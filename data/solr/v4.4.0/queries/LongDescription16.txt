This patch allows users to create their own implementation of QueryResponseWriter, and specify that class in solrconfig.xml. The default behavior is to use XMLResponseWriter like before. The class selection code only runs once at servlet init time, so it shouldn't have any measurable effect on performance.