Even if an explicit shard id is used, ZkController#preRegister should still wait to see the shard id in it's current ClusterState.