Refactor FileDataSource and FileListEntityProcessor to be more extensible