Refactor CoreContainer's SolrXML serialization code and improve testing