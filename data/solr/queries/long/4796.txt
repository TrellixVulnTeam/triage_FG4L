On a system with GNU java installed the fact that zkcli.sh doesn't honor JAVA_HOME could lead to hard to diagnose failure:


Exception in thread "main" java.lang.NoClassDefFoundError: org.apache.solr.cloud.ZkCLI
   at gnu.java.lang.MainThread.run(libgcj.so.7rh)
Caused by: java.lang.ClassNotFoundException: org.apache.solr.cloud.ZkCLI not found in gnu.gcj.runtime.SystemClassLoader{urls=[], parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
   at java.net.URLClassLoader.findClass(libgcj.so.7rh)
   at java.lang.ClassLoader.loadClass(libgcj.so.7rh)
   at java.lang.ClassLoader.loadClass(libgcj.so.7rh)
   at gnu.java.lang.MainThread.run(libgcj.so.7rh)


