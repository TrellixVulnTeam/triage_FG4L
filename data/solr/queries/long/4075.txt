Simple Repro of this issue: which now I thought was related to the decision made in: https://issues.apache.org/jira/browse/SOLR-3080 but Mark tells me might have been a problem during the zk layout refactoring right before 4.0.

1.	Download SOLR 4 production and extract.
2.	Replace solr.xml in apache-solr-4.0.0/example/solr/solr.xml with:

<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="true">
  <cores adminPath="/admin/cores" defaultCoreName="collection1" host="$
{host:}
" hostPort="$
{jetty.port:}
" hostContext="$
{hostContext:}
" zkClientTimeout="$
{zkClientTimeout:15000}
">
    <core shard="shard1" instanceDir="collection1/" name="collection1" collection="polecat"/>
    <core shard="shard1" instanceDir="collection2/" name="collection2" collection="polecat"/>
    <core schema="schema.xml" shard="core3" instanceDir="core3/" name="core3" config="solrconfig.xml" collection="polecat" dataDir="data"/>
  </cores>
</solr>

3.	Start solr with: java -Dbootstrap_confdir=./solr/collection1/conf -Dcollection.configName=myconf -DzkRun -Dsolrcloud.skip.autorecovery=true  -jar start.jar
	(skip.autorecovery is used because the shards don't exist previously)

Then run this:
	Sanity query:  http://localhost:8983/solr/polecat/select?q=*%3A*&wt=xml&distrib=true
	Remove the core: http://localhost:8983/solr/admin/cores?action=UNLOAD&core=core3&deleteIndex=true
	Error query: http://localhost:8983/solr/polecat/select?q=*%3A*&wt=xml&distrib=true

And the sanity query, we will receive 0 records, the error query "no servers hosting shard:".   And in the clusterstate.json:  "core3":{"replicas":{}}}}