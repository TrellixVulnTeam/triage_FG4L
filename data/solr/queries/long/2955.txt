To reproduce:


	Start example configuration from 3.6 or 4.0 distribution, and add example .xml documents to index
	Query: http://localhost:8983/solr/select?q=*:*&sort=id%20asc&group=true&group.sort=score%20desc&group.field=manu_id_s&shards=localhost:8983/solr



This will log


Dec 8, 2011 10:01:23 AM org.apache.solr.common.SolrException log
SEVERE: java.lang.IllegalStateException: All required fields must be set
	at org.apache.solr.search.grouping.distributed.command.TopGroupsFieldCommand$Builder.build(TopGroupsFieldCommand.java:94)
	at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:291)
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:194)
	.
	.



For other (legal) values of group.sort or without the shards parameter, the query succeeds. 