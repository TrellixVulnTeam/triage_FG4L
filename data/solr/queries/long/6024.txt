Harish Agarwal reported this in solr user mailing list : http://search-lucene.com/m/QTPaoTJXV1

It is east to re-produce with default example solr setup. Following types are added example schema.xml. And exampledocs are indexed.



 <field name="cat" type="string" indexed="true" stored="true" docValues="true" multiValued="true"/>
  <field name="popularity" type="int" indexed="true" stored="false" docValues="true" multiValued="true"/>



When docValues="true" and multiValued="true" are used at the same time, StatsComponent throws :


ERROR org.apache.solr.core.SolrCore  â€“ org.apache.solr.common.SolrException: Type mismatch: popularity was indexed as SORTED_SET
	at org.apache.solr.request.UnInvertedField.<init>(UnInvertedField.java:193)
	at org.apache.solr.request.UnInvertedField.getUnInvertedField(UnInvertedField.java:699)
	at org.apache.solr.handler.component.SimpleStats.getStatsFields(StatsComponent.java:319)
	at org.apache.solr.handler.component.SimpleStats.getStatsCounts(StatsComponent.java:290)
	at org.apache.solr.handler.component.StatsComponent.process(StatsComponent.java:78)
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:221)
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1964)

