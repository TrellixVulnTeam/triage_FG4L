The commitWithin option on an UpdateRequest is only honored for requests containing new documents.  It does not, for example, work with a delete query.  The following doesn't work as expected:


UpdateRequest request = new UpdateRequest();
request.deleteById("id123");
request.setCommitWithin(1000);
solrServer.request(request);



In my opinion, the commitWithin attribute should be  permitted on the <delete/> xml tag as well as <add/>.  Such a change would go in XMLLoader.java and its would have some ramifications elsewhere too.  Once this is done, then UpdateRequest.getXml() can be updated to generate the right XML.