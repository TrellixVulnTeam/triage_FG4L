If the first character of a token gets stripped the startOffset of that token is not adjusted. With the last character it behaves as expected. I'll attach a patch for the TestWordDelimiterFilter testcase which reproduces that issue shortly.