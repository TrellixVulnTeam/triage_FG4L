<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:25:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-846/SOLR-846.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-846] Out Of memory doing delta import with fetch size set to -1</title>
                <link>https://issues.apache.org/jira/browse/SOLR-846</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Database has about 3 million records.  Doing full-import there is no problem.  However, when a large number of changes occurred 2558057, delta-import throws OutOfMemory error after 1288338 documents processed.  The stack trace is below&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;Thread-3&quot; java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
	at org.tartarus.snowball.ext.EnglishStemmer.&amp;lt;init&amp;gt;(EnglishStemmer.java:4&lt;br/&gt;
9)&lt;br/&gt;
	at org.apache.solr.analysis.EnglishPorterFilter.&amp;lt;init&amp;gt;(EnglishPorterFilt&lt;br/&gt;
erFactory.java:83)&lt;br/&gt;
	at org.apache.solr.analysis.EnglishPorterFilterFactory.create(EnglishPor&lt;br/&gt;
terFilterFactory.java:66)&lt;br/&gt;
	at org.apache.solr.analysis.EnglishPorterFilterFactory.create(EnglishPor&lt;br/&gt;
terFilterFactory.java:35)&lt;br/&gt;
	at org.apache.solr.analysis.TokenizerChain.tokenStream(TokenizerChain.ja&lt;br/&gt;
va:48)&lt;br/&gt;
	at org.apache.solr.schema.IndexSchema$SolrIndexAnalyzer.tokenStream(Inde&lt;br/&gt;
xSchema.java:348)&lt;br/&gt;
	at org.apache.lucene.analysis.Analyzer.reusableTokenStream(Analyzer.java&lt;br/&gt;
:44)&lt;br/&gt;
	at org.apache.lucene.index.DocInverterPerField.processFields(DocInverter&lt;br/&gt;
PerField.java:117)&lt;br/&gt;
	at org.apache.lucene.index.DocFieldConsumersPerField.processFields(DocFi&lt;br/&gt;
eldConsumersPerField.java:36)&lt;br/&gt;
	at org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(Do&lt;br/&gt;
cFieldProcessorPerThread.java:234)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWrite&lt;br/&gt;
r.java:765)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWrite&lt;br/&gt;
r.java:748)&lt;br/&gt;
	at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2&lt;br/&gt;
118)&lt;br/&gt;
	at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2&lt;br/&gt;
095)&lt;br/&gt;
	at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandle&lt;br/&gt;
r2.java:232)&lt;br/&gt;
	at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpd&lt;br/&gt;
ateProcessorFactory.java:59)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SolrWriter.upload(SolrWriter.java:&lt;br/&gt;
69)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImportHandler$1.upload(DataImp&lt;br/&gt;
ortHandler.java:288)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilde&lt;br/&gt;
r.java:319)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.doDelta(DocBuilder.java&lt;br/&gt;
:211)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java&lt;br/&gt;
:133)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.doDeltaImport(DataImp&lt;br/&gt;
orter.java:359)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.j&lt;br/&gt;
ava:388)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.ja&lt;br/&gt;
va:377)&lt;/p&gt;


&lt;p&gt;dataSource in data-config.xml has been with the batchSize of &quot;-1&quot;.&lt;br/&gt;
    &amp;lt;dataSource driver=&quot;com.mysql.jdbc.Driver&quot; url=&quot;jdbc:mysql://host/dbname&quot; &lt;br/&gt;
user=&quot;&lt;b&gt;&quot; password=&quot;&lt;/b&gt;&quot; batchSize=&quot;-1&quot;/&amp;gt;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux 2.6.18-92.1.13.el5xen, mysql 5.0&lt;/p&gt;</environment>
        <key id="12408251">SOLR-846</key>
            <summary>Out Of memory doing delta import with fetch size set to -1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kleung11">Ricky Leung</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Nov 2008 15:19:04 +0000</created>
                <updated>Fri, 10 May 2013 11:39:20 +0100</updated>
                            <resolved>Fri, 7 Sep 2012 22:39:04 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12646577" author="noble.paul" created="Tue, 11 Nov 2008 15:55:13 +0000"  >&lt;p&gt;This was a known issue. DIH collects the delta row id (in memory) first and then run the import. We did not stream it because too many modified rows is uncommon and usually the delta query only fetches the pk field&lt;/p&gt;

&lt;p&gt;Anyway we need to fix that&lt;/p&gt;</comment>
                            <comment id="12647207" author="noble.paul" created="Thu, 13 Nov 2008 06:40:18 +0000"  >&lt;p&gt;a partial solution. &lt;br/&gt;
eventually we must stream it or persist the data&lt;/p&gt;</comment>
                            <comment id="12655574" author="shalinmangar" created="Thu, 11 Dec 2008 09:09:54 +0000"  >&lt;p&gt;Committed revision 725627.&lt;/p&gt;

&lt;p&gt;I&apos;ve committed Noble&apos;s patch, however as he noted, it is only a partial solution. I&apos;m in favor of streaming it however that will be an invasive change. Let&apos;s keep this issue open until we can implement a better solution.&lt;/p&gt;</comment>
                            <comment id="12680981" author="shalinmangar" created="Wed, 11 Mar 2009 18:57:43 +0000"  >&lt;p&gt;Marking for 1.5&lt;/p&gt;</comment>
                            <comment id="12872452" author="hossman" created="Thu, 27 May 2010 23:05:35 +0100"  >&lt;p&gt;Bulk updating 240 Solr issues to set the Fix Version to &quot;next&quot; per the process outlined in this email...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Selection criteria was &quot;Unresolved&quot; with a Fix Version of 1.5, 1.6, 3.1, or 4.0.  email notifications were suppressed.&lt;/p&gt;

&lt;p&gt;A unique token for finding these 240 issues in the future: hossversioncleanup20100527&lt;/p&gt;</comment>
                            <comment id="13043780" author="rcmuir" created="Fri, 3 Jun 2011 17:47:01 +0100"  >&lt;p&gt;Bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                            <comment id="13106349" author="rcmuir" created="Fri, 16 Sep 2011 15:50:42 +0100"  >&lt;p&gt;3.4 -&amp;gt; 3.5&lt;/p&gt;</comment>
                            <comment id="13237054" author="hossman" created="Fri, 23 Mar 2012 20:31:35 +0000"  >&lt;p&gt;Bulk changing fixVersion 3.6 to 4.0 for any open issues that are unassigned and have not been updated since March 19.&lt;/p&gt;

&lt;p&gt;Email spam suppressed for this bulk edit; search for hoss20120323nofix36 to identify all issues edited&lt;/p&gt;</comment>
                            <comment id="13412088" author="hossman" created="Wed, 11 Jul 2012 23:25:58 +0100"  >&lt;p&gt;bulk fixing the version info for 4.0-ALPHA and 4.0 all affected issues have &quot;hoss20120711-bulk-40-change&quot; in comment&lt;/p&gt;</comment>
                            <comment id="13429886" author="rcmuir" created="Tue, 7 Aug 2012 04:44:00 +0100"  >&lt;p&gt;rmuir20120906-bulk-40-change&lt;/p&gt;</comment>
                            <comment id="13451010" author="hossman" created="Fri, 7 Sep 2012 22:39:04 +0100"  >&lt;p&gt;this issue was listed as &quot;fixed&quot; in Solr 1.4&apos;s CHANGES.txt.&lt;/p&gt;

&lt;p&gt;in light of that, i&apos;m resolving, and any future work to improve things can be done in a new issue (since a new issue id would be neccessary to properly track it in CHANGES.txt anyway)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393844" name="SOLR-846.patch" size="1693" author="noble.paul" created="Thu, 13 Nov 2008 06:40:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Nov 2008 15:55:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxoun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>