<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:19:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-16/SOLR-16.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-16] patch to allow the use of a custom query output writer</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This patch allows users to create their own implementation of QueryResponseWriter, and specify that class in solrconfig.xml. The default behavior is to use XMLResponseWriter like before. The class selection code only runs once at servlet init time, so it shouldn&apos;t have any measurable effect on performance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12343228">SOLR-16</key>
            <summary>patch to allow the use of a custom query output writer</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="mbaranczak">Mike Baranczak</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 May 2006 00:24:55 +0100</created>
                <updated>Fri, 10 May 2013 11:41:00 +0100</updated>
                            <resolved>Fri, 26 May 2006 13:45:07 +0100</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12412392" author="ehatcher" created="Fri, 19 May 2006 02:13:10 +0100"  >&lt;p&gt;I would like to see a request time toggle on the writer used, just like the request handler gets decided.  I would like the client to control the format returned.   That shouldn&apos;t be a big refactoring - would you mind implementing that instead?&lt;/p&gt;</comment>
                            <comment id="12412393" author="yseeley@gmail.com" created="Fri, 19 May 2006 02:17:17 +0100"  >&lt;p&gt;&amp;gt; I would like to see a request time toggle on the writer used, just like the request handler gets decided.&lt;/p&gt;

&lt;p&gt;+1&lt;br/&gt;
 The default could be configured per request-handler and overridden by specific requests.&lt;/p&gt;</comment>
                            <comment id="12412396" author="mbaranczak" created="Fri, 19 May 2006 02:40:07 +0100"  >&lt;p&gt;&amp;gt; I would like to see a request time toggle on the writer used, just like the request handler gets decided.&lt;/p&gt;

&lt;p&gt;Using the same selection logic as for the request handlers does make more sense. Shouldn&apos;t be too hard to do.&lt;/p&gt;


&lt;p&gt;&amp;gt; The default could be configured per request-handler and overridden by specific requests.&lt;/p&gt;

&lt;p&gt;Right now, the request handler doesn&apos;t touch the output writer (the writer is called from SolrServlet) - so trying to associate the writer and the handler could get a wee bit messy. I&apos;d much rather just keep those two aspects of the configuration separate. Simpler for me, and simpler for the people configuring Solr.&lt;/p&gt;</comment>
                            <comment id="12412400" author="ehatcher" created="Fri, 19 May 2006 03:13:14 +0100"  >&lt;p&gt;I&apos;m fine with this configurability going in as is, and then we morph it to allow a request parameter to select the writer  as well, of course using the configured default so no client has to change or specify a writer unless they want something special (like Ruby code output rather than XML &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12412443" author="mbaranczak" created="Fri, 19 May 2006 07:14:57 +0100"  >&lt;p&gt;Revised patch enclosed.&lt;/p&gt;

&lt;p&gt;Multiple writers may be specified in solrconfig.xml. The syntax is pretty much the same as for specifying rewuest handlers; see example/solr/conf/solrconfig.xml for example. Writers may be selected by adding the parameter &quot;wt&quot; (writer type) to the request. XMLResponseWriter is the default.&lt;/p&gt;</comment>
                            <comment id="12412595" author="hossman" created="Sat, 20 May 2006 05:57:55 +0100"  >&lt;p&gt;I just read through the patch &amp;#8211; didn&apos;t have a chance to try it out yet &amp;#8211; and both the functionality and the implimentation look great!&lt;/p&gt;

&lt;p&gt;Can i ask for one smal favor before it gets applied: some test cases showing requests work with and with out the param specified when there are multiple options in the config?&lt;/p&gt;

&lt;p&gt;leaving src/test/test-files/solr/conf/solrconfig.xml as is will test the default situation where no writers are lsted ... you can modify src/test/test-files/solr/crazy-path-to-config.xml to include both the default and some new writer and then clone the SampleTest and add some test methods to check that you get the output you expected from various writters.&lt;/p&gt;

&lt;p&gt;You don&apos;t even need to provide a usefull writer ... even something that just outputs some static text would work, just put it in src/test so people know it&apos;s not a &quot;production&quot; writer.&lt;/p&gt;

&lt;p&gt;most of the helper methods in AbstractSolrTestCase try to validate that the responses are wellformed XML, but if you want to test a writer that isn&apos;t XML, it can still be done using the TerstHarness directly ... BasicFunctionalityTest.testMultipleUpdatesPerAdd shows an example.&lt;/p&gt;</comment>
                            <comment id="12412597" author="mbaranczak" created="Sat, 20 May 2006 06:08:53 +0100"  >&lt;p&gt;Yeah, I can write a test. I can&apos;t do it right now, but I&apos;ll probably get to it sometime early next week.&lt;/p&gt;</comment>
                            <comment id="12413033" author="mbaranczak" created="Wed, 24 May 2006 07:50:38 +0100"  >&lt;p&gt;OK, I tried writing a test case like Hoss suggested and it kept failing when I tried to select a custom writer. I eventually figured out that this is because TestHarness is hard-coded to use XMLResponseWriter. Which made perfect sense with the old set-up, but now...&lt;/p&gt;

&lt;p&gt;I could patch TestHarness so that it honors the queryResponseWriter settings, but this wouldn&apos;t make a very useful test, since it would completely bypass the code that actually does the work of selecting the writer (in SolrServlet). And if we actually wanted to test SolrServlet, we&apos;d have to completely rewrite the test framework. &lt;/p&gt;

&lt;p&gt;Any thoughts? &lt;/p&gt;</comment>
                            <comment id="12413045" author="hossman" created="Wed, 24 May 2006 09:21:12 +0100"  >&lt;p&gt;I think the right solution is to refactor the writer selection logic you added to the SolrServlet into a method in SolrCore...&lt;/p&gt;

&lt;p&gt;  public QueryResponseWriter getQueryResponseWriter(String handlerName)&lt;/p&gt;

&lt;p&gt;...i would also suggest adding another new method that calls that one...&lt;/p&gt;

&lt;p&gt;  public QueryResponseWriter getQueryResponseWriter(SolrQueryRequest)&lt;/p&gt;

&lt;p&gt;...and put the query param checking and default writer fallback logic in there.&lt;/p&gt;

&lt;p&gt;Then change SolrServlet and the TestHarness to call that.&lt;/p&gt;

&lt;p&gt;How does that sound?&lt;/p&gt;


&lt;p&gt;(One other small thing now that I&apos;m looking at the patch a little more closely: when handling exceptions,  SolrException.logOnce is probably a better choice then ex.printStackTrace() &amp;#8211; that way the logging information goes wherever the ServletContainer has it&apos;s logging configured to instead of just STDERR)&lt;/p&gt;</comment>
                            <comment id="12413056" author="mbaranczak" created="Wed, 24 May 2006 11:23:27 +0100"  >&lt;p&gt;I&apos;ve incorporated all of of Hoss&apos; suggestions. All the units tests are passing, and everything else looks good. &lt;/p&gt;

&lt;p&gt;I do like the idea of passing init parameters to the writer, but I unfortunately don&apos;t  have time to work on it right now.&lt;/p&gt;

&lt;p&gt;(custom_writer_rev3.patch and OutputWriterTest.java should be applied together - disregard all other files attached to this issue.)&lt;/p&gt;</comment>
                            <comment id="12413366" author="hossman" created="Fri, 26 May 2006 13:31:06 +0100"  >&lt;p&gt;patch looks &lt;b&gt;very&lt;/b&gt; good .. i&apos;m making a few tweaks and then I&apos;ll apply.&lt;/p&gt;</comment>
                            <comment id="12413367" author="hossman" created="Fri, 26 May 2006 13:45:07 +0100"  >&lt;p&gt;I did a little refactoring in initWriters to take advantage of some existing utility methods and commited this.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Mike.&lt;/p&gt;</comment>
                            <comment id="12413368" author="ehatcher" created="Fri, 26 May 2006 13:51:54 +0100"  >&lt;p&gt;Mike - thank you for your patience in refactoring what was already working for you into something more generalizable than you needed for the benefit of the community.  I personally will be experimenting with this new feature.&lt;/p&gt;

&lt;p&gt;Thank you Hoss for applying the patches and following through on making this fit the current Solr architecture.&lt;/p&gt;

&lt;p&gt;Open source development at its finest!&lt;/p&gt;</comment>
                            <comment id="12589340" author="hossman" created="Wed, 16 Apr 2008 00:56:43 +0100"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked (&quot;Resolved&quot; or &quot;Closed&quot;) and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.1&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 38 issues found was set to 1.1, email notification&lt;br/&gt;
was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this&lt;br/&gt;
(hopefully) unique string: 20080415hossman3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12334477" name="OutputWriterTest.java" size="2451" author="mbaranczak" created="Wed, 24 May 2006 11:23:27 +0100"/>
                            <attachment id="12334280" name="custom_writer.patch" size="2804" author="mbaranczak" created="Fri, 19 May 2006 00:25:45 +0100"/>
                            <attachment id="12334298" name="custom_writer_rev2.patch" size="6460" author="mbaranczak" created="Fri, 19 May 2006 07:14:57 +0100"/>
                            <attachment id="12334476" name="custom_writer_rev3.patch" size="10583" author="mbaranczak" created="Wed, 24 May 2006 11:17:37 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 May 2006 01:13:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxtwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21164</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>