<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:15:22 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1129/SOLR-1129.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1129] SolrJ cannot bind dynamic fields to beans</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1129</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;SolrJ does not support binding of dynamic fields to bean fields&lt;/p&gt;

&lt;p&gt;The field declaration could be as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;*_s&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; anyString;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12423762">SOLR-1129</key>
            <summary>SolrJ cannot bind dynamic fields to beans</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Apr 2009 08:30:43 +0100</created>
                <updated>Tue, 10 Nov 2009 15:52:04 +0000</updated>
                            <resolved>Wed, 15 Jul 2009 06:56:16 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>clients - java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12702675" author="avlesh" created="Sat, 25 Apr 2009 11:37:08 +0100"  >&lt;p&gt;Thanks for creating this ticket, Noble.&lt;/p&gt;

&lt;p&gt;I have an issue with the approach you have mentioned. IMO, the client should specify the &quot;field&quot; to which the value belongs to.&lt;br/&gt;
I would rather prefer a format like this -  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;*_s&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; foo;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where the keys are &lt;tt&gt;dynamicField&lt;/tt&gt; name&apos;s. For &lt;tt&gt;multivalued&lt;/tt&gt; fields, a user might specify an &lt;tt&gt;Object[]&lt;/tt&gt; as value.&lt;/p&gt;</comment>
                            <comment id="12702676" author="noble.paul" created="Sat, 25 Apr 2009 12:02:53 +0100"  >&lt;p&gt;I see your point . it can be extended to support this&lt;/p&gt;</comment>
                            <comment id="12702811" author="avlesh" created="Sat, 25 Apr 2009 22:37:35 +0100"  >&lt;p&gt;Adding a patch for this enhancement. &lt;br/&gt;
Existing test cases pass. I&apos;ll add new test cases in &lt;tt&gt;TestDocumentObjectBinder&lt;/tt&gt; shortly.&lt;/p&gt;

&lt;p&gt;This is the approach I took.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Dynamic fields can be annotated in the following manner
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;*_random&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; random;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;supplier_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt; suppliers;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;oem_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; oem;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Based on the &lt;tt&gt;value type&lt;/tt&gt; of this &lt;tt&gt;Map&lt;/tt&gt;, I populate all matching fields in the response with their corresponding value(s).&lt;/li&gt;
	&lt;li&gt;I added one more clause to the &lt;tt&gt;DocField&lt;/tt&gt;&apos;s &lt;tt&gt;storeType&lt;/tt&gt; method to take care of fields of type &lt;tt&gt;Map&lt;/tt&gt;. Using &lt;tt&gt;getActualTypeArguments&lt;/tt&gt; for this &lt;tt&gt;ParameterizedType&lt;/tt&gt; value, I populate the existing properties in the &lt;tt&gt;DocField&lt;/tt&gt; viz &lt;tt&gt;name, field, type, isArray, isList&lt;/tt&gt; etc.&lt;/li&gt;
	&lt;li&gt;I added a private method, &lt;tt&gt;getFieldValueByFieldName(SolrDocument sdoc, String fieldName)&lt;/tt&gt; in the &lt;tt&gt;DocField&lt;/tt&gt; class, which is now  being called by the &lt;tt&gt;inject&lt;/tt&gt; method for all fields. For regular index fields, the method behavior has not changed. However, for a dynamic field (as annotated by the client), this method prepares a &lt;tt&gt;Map&lt;/tt&gt; of matching fieldNames and their corresponding value(s). This in turn is used by the &lt;tt&gt;inject&lt;/tt&gt; method to call the client bean&apos;s corresponding setter method.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Please note that this fix is for version 1.3.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Avlesh&lt;/p&gt;</comment>
                            <comment id="12702985" author="noble.paul" created="Mon, 27 Apr 2009 05:29:45 +0100"  >&lt;p&gt;few comments &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The patch does not apply on trunk. fix for an older version is not possible&lt;/li&gt;
	&lt;li&gt;I am not sure if the following cases are handled
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;supplier_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; suppliers;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;oem_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] oem;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;We may not need to support LinkedHashMap as the type of the field . I don&apos;t think Solr preserves order&lt;/li&gt;
	&lt;li&gt;No injection time matching . field.matches(&quot;^&quot;&lt;ins&gt;fieldName&lt;/ins&gt;&quot;$&quot;)  is expensive. Create and cache the Pattern object well in advance.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12702987" author="avlesh" created="Mon, 27 Apr 2009 05:35:20 +0100"  >&lt;p&gt;All you points are taken, Noble.&lt;br/&gt;
I&apos;ll make the modifications in trunk and get back asap.&lt;/p&gt;</comment>
                            <comment id="12709344" author="shalinmangar" created="Thu, 14 May 2009 11:03:31 +0100"  >&lt;p&gt;Marking for 1.4 as this is a serious deficiency.&lt;/p&gt;</comment>
                            <comment id="12709360" author="noble.paul" created="Thu, 14 May 2009 12:00:10 +0100"  >&lt;p&gt;we released 1.3 w/o it. Still don&apos;t have a final patch . So, I feel it is not a must for 1.4. But if it goes in it is well and good&lt;/p&gt;</comment>
                            <comment id="12709373" author="avlesh" created="Thu, 14 May 2009 12:40:54 +0100"  >&lt;p&gt;Sorry for the delay. Will submit a patch latest by tomorrow.&lt;/p&gt;</comment>
                            <comment id="12711949" author="avlesh" created="Fri, 22 May 2009 05:57:38 +0100"  >&lt;p&gt;All the changes as discussed earlier, have been implemented.&lt;br/&gt;
SolrJ can now be used to bind dynamic fields using any one of these&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;*_random&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; random;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;categories_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt; categories;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;oem_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; oem;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;supplier_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; allSuppliers;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;supplier_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; supplier;

@Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;supplier_*&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setSuppliers(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] allSuppliers){}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The attached patch also contains a test case for the above mentioned usages. &lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Avlesh&lt;/p&gt;</comment>
                            <comment id="12714309" author="avlesh" created="Fri, 29 May 2009 06:55:45 +0100"  >&lt;p&gt;Just realized that the usage of &lt;tt&gt;field.matches(&quot;^&quot;fieldName&quot;$&quot;)&lt;/tt&gt; has not been changed to use the cached pattern. Made the necessary change. Please use the latest patch.&lt;/p&gt;</comment>
                            <comment id="12716287" author="noble.paul" created="Thu, 4 Jun 2009 15:16:20 +0100"  >&lt;p&gt;My attempt at simplifying the patch .&lt;br/&gt;
pleas take a look and let me know if any usecase is missing&lt;/p&gt;</comment>
                            <comment id="12716288" author="noble.paul" created="Thu, 4 Jun 2009 15:18:44 +0100"  >&lt;p&gt;w/o the SOPs&lt;/p&gt;</comment>
                            <comment id="12727913" author="noble.paul" created="Tue, 7 Jul 2009 05:48:26 +0100"  >&lt;p&gt; should this go into 1.4 ? &lt;/p&gt;</comment>
                            <comment id="12727919" author="avlesh" created="Tue, 7 Jul 2009 05:59:46 +0100"  >&lt;p&gt;Good to go, Noble. I have tried and tested the patch, it looks good.&lt;/p&gt;</comment>
                            <comment id="12729592" author="shalinmangar" created="Fri, 10 Jul 2009 11:10:41 +0100"  >&lt;blockquote&gt;&lt;p&gt;should this go into 1.4 ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12730296" author="noble.paul" created="Mon, 13 Jul 2009 12:28:30 +0100"  >&lt;p&gt;updated to the trunk . I plan to commit this shortly&lt;/p&gt;</comment>
                            <comment id="12731290" author="noble.paul" created="Wed, 15 Jul 2009 06:56:16 +0100"  >&lt;p&gt;committed r794144&lt;/p&gt;

&lt;p&gt;thanks Avlesh&lt;/p&gt;</comment>
                            <comment id="12747964" author="ahj" created="Wed, 26 Aug 2009 15:58:52 +0100"  >&lt;p&gt;The patch only addresses binding of dynamic fields  in one direction, that is, converting documents to beans. The other direction, converting beans to documents, does not work. Attempting to index a bean with dynamic fields using the SolrServer.addBean() method does fails to correctly index the dynamic fields.&lt;/p&gt;</comment>
                            <comment id="12747968" author="avlesh" created="Wed, 26 Aug 2009 16:06:05 +0100"  >&lt;p&gt;There is already as issue for the above Anders. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1357&quot; title=&quot;SolrInputDocument cannot process dynamic fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1357&quot;&gt;&lt;del&gt;SOLR-1357&lt;/del&gt;&lt;/a&gt; is waiting for a patch.&lt;/p&gt;</comment>
                            <comment id="12775723" author="gsingers" created="Tue, 10 Nov 2009 15:52:04 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12435176">SOLR-1417</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12413287" name="SOLR-1129.patch" size="12664" author="noble.paul" created="Mon, 13 Jul 2009 12:28:30 +0100"/>
                            <attachment id="12409884" name="SOLR-1129.patch" size="13101" author="noble.paul" created="Thu, 4 Jun 2009 15:18:44 +0100"/>
                            <attachment id="12409883" name="SOLR-1129.patch" size="13850" author="noble.paul" created="Thu, 4 Jun 2009 15:16:20 +0100"/>
                            <attachment id="12409341" name="SOLR-1129.patch" size="11571" author="avlesh" created="Fri, 29 May 2009 06:55:45 +0100"/>
                            <attachment id="12408773" name="SOLR-1129.patch" size="11579" author="avlesh" created="Fri, 22 May 2009 05:57:38 +0100"/>
                            <attachment id="12406452" name="SOLR-1129.patch" size="6214" author="avlesh" created="Sat, 25 Apr 2009 22:37:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Apr 2009 10:37:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxn4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>