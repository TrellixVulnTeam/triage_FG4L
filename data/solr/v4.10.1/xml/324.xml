<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-324/SOLR-324.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-324] solr can&apos;t perform sort by long field</title>
                <link>https://issues.apache.org/jira/browse/SOLR-324</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;when sorting results by field with type long&lt;br/&gt;
throwed folowing exception&lt;/p&gt;

&lt;p&gt;java.lang.NumberFormatException: For input string: &quot;1104836394000&quot;&lt;br/&gt;
	at java.lang.NumberFormatException.forInputString(Unknown Source)&lt;br/&gt;
	at java.lang.Integer.parseInt(Unknown Source)&lt;br/&gt;
	at java.lang.Integer.parseInt(Unknown Source)&lt;br/&gt;
	at org.apache.lucene.search.FieldCacheImpl$1.parseInt(FieldCacheImpl.java:136)&lt;br/&gt;
	at org.apache.lucene.search.FieldCacheImpl$3.createValue(FieldCacheImpl.java:171)&lt;br/&gt;
	at org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:72)&lt;br/&gt;
	at org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:154)&lt;br/&gt;
	at org.apache.lucene.search.FieldCacheImpl.getInts(FieldCacheImpl.java:148)&lt;br/&gt;
	at org.apache.lucene.search.FieldSortedHitQueue.comparatorInt(FieldSortedHitQueue.java:204)&lt;br/&gt;
	at org.apache.lucene.search.FieldSortedHitQueue$1.createValue(FieldSortedHitQueue.java:175)&lt;br/&gt;
	at org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:72)&lt;br/&gt;
	at org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:155)&lt;br/&gt;
	at org.apache.lucene.search.FieldSortedHitQueue.&amp;lt;init&amp;gt;(FieldSortedHitQueue.java:56)&lt;br/&gt;
	at org.apache.solr.search.SolrIndexSearcher.getDocListNC(SolrIndexSearcher.java:857)&lt;br/&gt;
	at org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:805)&lt;br/&gt;
	at org.apache.solr.search.SolrIndexSearcher.getDocList(SolrIndexSearcher.java:698)&lt;br/&gt;
	at org.apache.solr.handler.StandardRequestHandler.handleRequestBody(StandardRequestHandler.java:126)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:78)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:722)&lt;br/&gt;
	at org.apache.solr.servlet.SolrServlet.doGet(SolrServlet.java:64)&lt;br/&gt;
	at org.apache.solr.servlet.SolrServlet.doPost(SolrServlet.java:51)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:187)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP SP2  &lt;br/&gt;
Java 1.6u1 &lt;br/&gt;
solr - lastes svn version&lt;/p&gt;</environment>
        <key id="12375243">SOLR-324</key>
            <summary>solr can&apos;t perform sort by long field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="22dsse">Sergey Dryganets</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Aug 2007 17:41:58 +0100</created>
                <updated>Fri, 10 May 2013 11:39:03 +0100</updated>
                            <resolved>Wed, 20 Feb 2008 03:37:09 +0000</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12517325" author="yseeley@gmail.com" created="Thu, 2 Aug 2007 18:54:36 +0100"  >&lt;p&gt;This stems from lucene not being able to sort on a long field.&lt;br/&gt;
As a workaround for now, the type &quot;slong&quot; (sortable long), is able to do both range queries and sorts.&lt;/p&gt;</comment>
                            <comment id="12528942" author="hossman" created="Wed, 19 Sep 2007 23:38:30 +0100"  >
&lt;p&gt;Either LongField and DoubleField should log a warning that they not suitable for sorting (and this should be added to the javadocs) and that they defer to int/float based sorting which may have casting/parsing issues ... in which case people using small enough values will be fine.&lt;/p&gt;

&lt;p&gt;...OR...&lt;/p&gt;

&lt;p&gt;LongField and DoubleField should throw big exceptions if you try to use them to sort saying that if you wnat to Sort, use SortableLongField/SortableDoubleField&lt;/p&gt;

&lt;p&gt;(the names seem pretty intuitive to me)&lt;/p&gt;</comment>
                            <comment id="12531784" author="gsingers" created="Tue, 2 Oct 2007 14:09:03 +0100"  >&lt;p&gt;It also can&apos;t perform FunctionQuery&apos;s on longs and doubles either&lt;/p&gt;</comment>
                            <comment id="12531785" author="gsingers" created="Tue, 2 Oct 2007 14:10:15 +0100"  >&lt;p&gt;Adding the functionality to the FieldCache should allow us to then implement the appropriate pieces in Solr:  LongFieldSource, etc.&lt;/p&gt;</comment>
                            <comment id="12536811" author="gsingers" created="Mon, 22 Oct 2007 20:52:56 +0100"  >&lt;p&gt;Requires &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1015&quot; title=&quot;FieldCache should support longs and doubles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1015&quot;&gt;&lt;del&gt;LUCENE-1015&lt;/del&gt;&lt;/a&gt; to be built and the respective Lucene jars to be brought into the lib directory and the old Lucene jars to be removed.  This is a first draft, I still need to figure out how best to test it.  &lt;/p&gt;</comment>
                            <comment id="12539082" author="gsingers" created="Wed, 31 Oct 2007 13:52:18 +0000"  >&lt;p&gt;Patch based on latest trunk of Lucene, where I committed the changes to create ExtendedFieldCache and added support for sorting by long and doubles.&lt;/p&gt;

&lt;p&gt;Also needs the latest Lucene jars.&lt;/p&gt;</comment>
                            <comment id="12546361" author="gsingers" created="Wed, 28 Nov 2007 19:30:34 +0000"  >&lt;p&gt;There may be some changes to FieldCache based on this, which could remove the ExtendedFieldCache interface.&lt;/p&gt;</comment>
                            <comment id="12547922" author="gsingers" created="Mon, 3 Dec 2007 18:10:29 +0000"  >&lt;p&gt;Update of this for the latest changes in Lucene (see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1045&quot; title=&quot;SortField.AUTO doesn&amp;#39;t work with long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1045&quot;&gt;&lt;del&gt;LUCENE-1045&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Adds in support for Short and byte as well, but I did not add the declaration of those field types to the schema.xml examples.&lt;/p&gt;

&lt;p&gt;Requires the latest trunk of Lucene (not even last nights build)&lt;/p&gt;</comment>
                            <comment id="12553418" author="stuhood" created="Wed, 19 Dec 2007 18:03:30 +0000"  >&lt;p&gt;Using long values for dates would be a significant improvement over the current String implementation.&lt;/p&gt;</comment>
                            <comment id="12559103" author="otis" created="Tue, 15 Jan 2008 16:29:49 +0000"  >&lt;p&gt;Grant, should this issue be closed?  See &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1045&quot; title=&quot;SortField.AUTO doesn&amp;#39;t work with long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1045&quot;&gt;&lt;del&gt;LUCENE-1045&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12559111" author="gsingers" created="Tue, 15 Jan 2008 16:48:31 +0000"  >&lt;p&gt;No, Solr needs to be able to leverage what is in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1045&quot; title=&quot;SortField.AUTO doesn&amp;#39;t work with long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1045&quot;&gt;&lt;del&gt;LUCENE-1045&lt;/del&gt;&lt;/a&gt;.  Thinks like a LongField need to be changed.  The Patch should handle it, but it may need to be updated.&lt;/p&gt;</comment>
                            <comment id="12559123" author="otis" created="Tue, 15 Jan 2008 17:10:01 +0000"  >&lt;p&gt;Ah, this is in Solr-land, sorry, thought it was Lucene.&lt;/p&gt;</comment>
                            <comment id="12564401" author="gsingers" created="Thu, 31 Jan 2008 16:47:39 +0000"  >&lt;p&gt;Here&apos;s an update to this patch.  I dropped short/byte support for now because I somehow forgot to add in SortField.BYTE and SortField.SHORT on the related Lucene patch.  I will open a separate issue for those.  &lt;/p&gt;

&lt;p&gt;Applying this patch should resolve the long/double issue.&lt;/p&gt;</comment>
                            <comment id="12570556" author="gsingers" created="Wed, 20 Feb 2008 03:37:09 +0000"  >&lt;p&gt;Committed revision 629334.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12379485">LUCENE-1015</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12384979">SOLR-440</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12389078">SOLR-483</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12381799">LUCENE-1045</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12368169" name="SOLR-324" size="2720" author="gsingers" created="Mon, 22 Oct 2007 20:52:56 +0100"/>
                            <attachment id="12374473" name="SOLR-324.patch" size="15222" author="gsingers" created="Thu, 31 Jan 2008 16:47:38 +0000"/>
                            <attachment id="12370859" name="SOLR-324.patch" size="21303" author="gsingers" created="Mon, 3 Dec 2007 18:10:29 +0000"/>
                            <attachment id="12368765" name="SOLR-324.patch" size="3753" author="gsingers" created="Wed, 31 Oct 2007 13:52:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Aug 2007 17:54:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxs13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20860</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>