<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:14:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-349/SOLR-349.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-349] new functions for FunctionQuery</title>
                <link>https://issues.apache.org/jira/browse/SOLR-349</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;User should be able to boost a query by a function of other fields&lt;br/&gt;
Some background: &lt;a href=&quot;http://www.nabble.com/boosting-a-query-by-a-function-of-other-fields-tf4387856.html#a12510092&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/boosting-a-query-by-a-function-of-other-fields-tf4387856.html#a12510092&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12377821">SOLR-349</key>
            <summary>new functions for FunctionQuery</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Sep 2007 17:33:41 +0100</created>
                <updated>Fri, 10 May 2013 11:39:51 +0100</updated>
                            <resolved>Tue, 18 Sep 2007 05:05:55 +0100</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12525935" author="yseeley@gmail.com" created="Sat, 8 Sep 2007 19:18:01 +0100"  >&lt;p&gt;This issue is more for a top-down approach (less concerned with underlying implementation, more with just making it possible via http get).&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We need ways to add multiple fields together, multiply fields together, etc.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We need a scaling function... for example, the range of all the components may not be known, but one may want the final value to be between 1 and 2.  For something like this to be done efficiently, it seems like a min and max would be needed on ValueSource?  Barring that, this value source would need to iterate over &lt;b&gt;all&lt;/b&gt; documents and scale appropriately.  Perhaps do the latter for the first implementation and we could always optimize later?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12525937" author="yseeley@gmail.com" created="Sat, 8 Sep 2007 19:29:32 +0100"  >&lt;p&gt;This patch extends the linear function to include other value sources.&lt;br/&gt;
so instead of&lt;br/&gt;
  linear(a,2,3)  // a*2+3&lt;br/&gt;
you can do&lt;br/&gt;
  linear(a,2,3,b,4,c,5)  // a*2+3+b*4+c*5&lt;/p&gt;

&lt;p&gt;Everyone OK with extending LinearFloatFunction this way?  It seemed like the simplest way to get this capability.&lt;/p&gt;</comment>
                            <comment id="12525938" author="yseeley@gmail.com" created="Sat, 8 Sep 2007 19:30:48 +0100"  >&lt;p&gt;And yes, the syntax is less than ideal.... it would be nice to extend the parser to accept infix, but that&apos;s a different issue for another day.&lt;/p&gt;</comment>
                            <comment id="12525940" author="hossman" created="Sat, 8 Sep 2007 20:09:26 +0100"  >
&lt;p&gt;the idea that funcname(a,b,c,d,e,f,g,....) maps to a*b + 1*c + d*e + f*g + ... seems a little weird, even weirder that funcname is &quot;linear&quot; which in theory only has 3 inputs.&lt;/p&gt;

&lt;p&gt;wouldn&apos;t a new &quot;sum(....)&quot; function make more sense? ...&lt;/p&gt;

&lt;p&gt;sum(linear(a,2,3), linear(b,4,0), linear(c,5,0))&lt;/p&gt;

&lt;p&gt;(the key being that &quot;sum&quot; takes in a list of other ValueSources, while linear still takes only 1 and some constants)&lt;/p&gt;

&lt;p&gt;we&apos;d also need a &quot;mult&quot; function right?&lt;/p&gt;</comment>
                            <comment id="12525945" author="yseeley@gmail.com" created="Sat, 8 Sep 2007 21:00:01 +0100"  >&lt;p&gt;Yes, I suppose that sum() makes more sense... and ValueSources are so light weight it shouldn&apos;t really cause a performance difference.  Although I think perhaps a constant should be allowed in sum(), otherwise people will be trying the very reasonable sum(a,1) and it won&apos;t work.  Of course we could make a ConstantValueSource, so constants and value-sources would be interchangeable...&lt;/p&gt;

&lt;p&gt;For &quot;mult&quot;, I was thinking &quot;product&quot;.&lt;/p&gt;

&lt;p&gt;Also perhaps a map() to pseudo-handle default values.&lt;br/&gt;
product(x, map(y,0,1))  // map all zeros to 1 before multiplying&lt;/p&gt;</comment>
                            <comment id="12526042" author="yseeley@gmail.com" created="Mon, 10 Sep 2007 03:40:23 +0100"  >&lt;p&gt;Attaching functionquery.patch... adding many new functions:&lt;/p&gt;

&lt;p&gt;log, sqrt, abs, sum, product, const&lt;br/&gt;
scale(source, min, max)    // scale values from source to fall between min and max&lt;br/&gt;
map(source,min,max,target)   // change any values that fall between min&amp;amp;max to target&lt;br/&gt;
query(lucene_query, defaultVal)   // use relevancy score, w/ defaultVal when doc doesn&apos;t match&lt;/p&gt;

&lt;p&gt;I also changed the function parser to use a hash lookup on function name since the list was getting long.  The parser will now also accept a float constant as a value source, allowing things like add(a,2)&lt;/p&gt;

&lt;p&gt;This is just a snapshot for feedback... no tests yet.&lt;/p&gt;</comment>
                            <comment id="12526340" author="yseeley@gmail.com" created="Tue, 11 Sep 2007 04:42:46 +0100"  >&lt;p&gt;OK, my next step is to do tests for all these new functions provided no one sees an issue with the general approach.&lt;br/&gt;
I chose to stick with VaueSource as the basis for new functions rather than CustomScoreQuery because of greater complexities with weights, scorers, explanations, etc, and performance issues wrt scorers (skipTo, next needing to know deleted docs).&lt;/p&gt;</comment>
                            <comment id="12526808" author="yseeley@gmail.com" created="Wed, 12 Sep 2007 15:36:28 +0100"  >&lt;p&gt;Attatching a new version of the patch with tests.&lt;/p&gt;</comment>
                            <comment id="12527205" author="tomhill" created="Thu, 13 Sep 2007 19:06:13 +0100"  >&lt;p&gt;It looks like you are removing the hard coded parsing of the functions in QueryParsing.java. &lt;/p&gt;

&lt;p&gt;How hard would it be to allow user configured functions? We use several of our own functions, and currently have to hack up QueryParsing.java. &lt;/p&gt;

&lt;p&gt;I&apos;d much prefer to be able to add the classname to the config file, and have it just be picked up and added to vsParsers.&lt;/p&gt;

</comment>
                            <comment id="12527649" author="yseeley@gmail.com" created="Fri, 14 Sep 2007 23:15:24 +0100"  >&lt;p&gt;Being able to add new functions to the parser is probably useful to people... I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-356&quot; title=&quot;pluggable functions (value sources)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-356&quot;&gt;&lt;del&gt;SOLR-356&lt;/del&gt;&lt;/a&gt; for this.&lt;/p&gt;</comment>
                            <comment id="12528237" author="yseeley@gmail.com" created="Tue, 18 Sep 2007 05:05:55 +0100"  >&lt;p&gt;Added pow(a,b) and div(a,b) and committed.&lt;br/&gt;
Still open for discussion+changes of course.&lt;/p&gt;</comment>
                            <comment id="12579149" author="hossman" created="Sun, 16 Mar 2008 03:23:52 +0000"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked &quot;Resolved&quot; and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.3 as of today 2008-03-15&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 29 issues found was set to 1.3, email notification was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this (hopefully) unique string: batch20070315hossman1&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12365642" name="FunctionQuery.patch" size="59833" author="yseeley@gmail.com" created="Wed, 12 Sep 2007 15:36:28 +0100"/>
                            <attachment id="12365440" name="FunctionQuery.patch" size="26826" author="yseeley@gmail.com" created="Mon, 10 Sep 2007 03:40:23 +0100"/>
                            <attachment id="12365406" name="linear_combination.patch" size="7121" author="yseeley@gmail.com" created="Sat, 8 Sep 2007 19:29:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 8 Sep 2007 19:09:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxrvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20835</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>