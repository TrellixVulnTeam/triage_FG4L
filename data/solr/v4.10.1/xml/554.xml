<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:16:47 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-554/SOLR-554.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-554] Hierarchical JDK log level selector for SOLR Admin</title>
                <link>https://issues.apache.org/jira/browse/SOLR-554</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;An admin web page to allow displaying and setting the log level of  hierarchical loggers from the UI at runtime.  The existing logging.jsp only sets and displays the root log level.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12395155">SOLR-554</key>
            <summary>Hierarchical JDK log level selector for SOLR Admin</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="timmsc">Sean Timm</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2008 20:50:24 +0100</created>
                <updated>Fri, 10 May 2013 11:39:45 +0100</updated>
                            <resolved>Thu, 7 Aug 2008 19:39:38 +0100</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                    <component>web gui</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12593620" author="timmsc" created="Thu, 1 May 2008 21:00:29 +0100"  >&lt;p&gt;Here is an implementation written in a servlet.  To configure, add&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;servlet&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;Logging&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;servlet-class&amp;gt;&lt;/span&gt;org.apache.solr.servlet.LogLevelSelection&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/servlet-class&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/servlet&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;Logging&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/admin/logging&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to the web.xml configuration.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t have the same look and feel of the rest of the admin UI, but I did throw in a link to the Solr logo. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;This is adapted from a former co-workers implementation for an AOL internal framework using Log4j.&lt;/p&gt;</comment>
                            <comment id="12599063" author="otis" created="Thu, 22 May 2008 16:54:53 +0100"  >&lt;p&gt;Didn&apos;t try this, so I don&apos;t know what this looks like from a L&amp;amp;F perspective, but you mention L&amp;amp;F not being like the rest of Admin &amp;#8211; any chance of somebody giving this some L&amp;amp;F love?  If that happens, we could probably get that in 1.3.&lt;/p&gt;</comment>
                            <comment id="12599211" author="timmsc" created="Thu, 22 May 2008 23:04:21 +0100"  >&lt;p&gt;L&amp;amp;F screenshot&lt;/p&gt;</comment>
                            <comment id="12599212" author="timmsc" created="Thu, 22 May 2008 23:06:04 +0100"  >&lt;p&gt;Patch format this time.  Added using the solr-admin.css to help the L&amp;amp;F.  Includes mods to web.xml and admin/index.jsp to load this servlet instead of the logging.jsp.&lt;/p&gt;</comment>
                            <comment id="12599373" author="timmsc" created="Fri, 23 May 2008 15:03:19 +0100"  >&lt;p&gt;Minor L&amp;amp;F improvement.&lt;/p&gt;</comment>
                            <comment id="12599374" author="timmsc" created="Fri, 23 May 2008 15:05:40 +0100"  >&lt;p&gt;L&amp;amp;F screenshot&lt;/p&gt;</comment>
                            <comment id="12599392" author="timmsc" created="Fri, 23 May 2008 15:57:27 +0100"  >&lt;p&gt;It was pointed out to me that the logo was not positioned the same as the other admin pages.  This should be better.&lt;/p&gt;</comment>
                            <comment id="12599393" author="timmsc" created="Fri, 23 May 2008 15:59:22 +0100"  >&lt;p&gt;Better logo positioning.&lt;/p&gt;</comment>
                            <comment id="12599404" author="otis" created="Fri, 23 May 2008 16:44:06 +0100"  >&lt;p&gt;This looks very good to me.  I never used the admin log page&apos;s functionality.  Does clicking &quot;set&quot; actually generate the correct log config file (and it overwrites the old one)?&lt;/p&gt;</comment>
                            <comment id="12599434" author="timmsc" created="Fri, 23 May 2008 18:14:16 +0100"  >&lt;p&gt;No, like the existing logging.jsp, it doesn&apos;t touch the configuration file.  When the server is bounced, the log levels revert back to those in the config file.&lt;/p&gt;</comment>
                            <comment id="12599876" author="hossman" created="Mon, 26 May 2008 18:05:51 +0100"  >&lt;p&gt;While i&apos;m personally a fan of JDK Logging, it does seem that in the &quot;medium&quot; future, Solr will be moving to to SLF4J, so I have to question the wisdom of enhancing/improving a JDK Logging specific page in the Solr Admin UI.&lt;/p&gt;

&lt;p&gt;I suppose even if/when we use SLF4J, JDK Logging will be the default, and people will have to physically remove the &quot;adapter&quot; jar from the solr.war to use something else (at which time they could also remove this servlet registration and delete the link) ... but still, i just wanted to point out it&apos;s something we should think about.&lt;/p&gt;

&lt;p&gt;If nothing else, perhaps we could make the admin/index.jsp only generate a link to /admin/logging if it can tell a servlet is registered to that path?  ... or we could just worry about it later.&lt;/p&gt;</comment>
                            <comment id="12599898" author="timmsc" created="Mon, 26 May 2008 20:20:31 +0100"  >&lt;p&gt;I&apos;m not sure of the rationale, but SLF4J does not provide a way to change the logging levels, so the only way to do it is with the underlying logging system.  I can provide a Log4j version as well if folks would find that useful.&lt;/p&gt;

&lt;p&gt;From the SLF4J FAQ: &quot;SLF4J is only a facade, meaning that it does not provide a complete logging solution. Operations such as configuring appenders or setting logging levels cannot be performed with SLF4J. Thus, at some point in time, any non-trivial application will need to directly invoke the underlying logging system. In other words, complete independence from the API underlying logging system is not possible for a stand-alone application. Nevertheless, SLF4J reduces the impact of this dependence to near-painless levels.&quot;&lt;/p&gt;</comment>
                            <comment id="12604127" author="otis" created="Wed, 11 Jun 2008 07:02:10 +0100"  >&lt;p&gt;My feeling is we should go ahead with this change for now (for 1.3) and it it becomes obsolete or needs changing later, for 1.4, we can deal with that then.&lt;/p&gt;

&lt;p&gt;I&apos;m not assigning this to myself since I stayed out of the whole logging discussion, but I&apos;m marking it for 1.3, so somebody will handle this one way or the other prior to 1.3.&lt;/p&gt;</comment>
                            <comment id="12614810" author="dsmiley" created="Fri, 18 Jul 2008 18:28:57 +0100"  >&lt;p&gt;This feature may be useful, but it doesn&apos;t strike me as something that belongs in any web application (Solr included).  It strikes me as a feature that may or may not be there in your web server.&lt;/p&gt;</comment>
                            <comment id="12619286" author="shalinmangar" created="Sat, 2 Aug 2008 23:09:45 +0100"  >&lt;p&gt;Sean &amp;#8211; this looks great and it is certainly more useful than the current logging.jsp&lt;/p&gt;

&lt;p&gt;Is there a reason for not making this as a request handler? Currently, it displays all loggers available to it which also includes org.apache.catalina, ContainerBase and even javax.management.mbeanserver when running Solr under tomcat. It may be better to limit loggers to org.apache.solr by default. If this is made a request handler, we can configure the logger names it should support in solrconfig.xml and users can add packages of their custom solr plugins too. I&apos;ll see if I can find some time to make these changes.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12619424" author="shalinmangar" created="Mon, 4 Aug 2008 07:05:07 +0100"  >&lt;p&gt;On further thought, let&apos;s commit this for 1.3 and work on refactoring/enhancements if we can find time.&lt;/p&gt;

&lt;p&gt;Committed revision 682264.&lt;/p&gt;

&lt;p&gt;Thanks Sean!&lt;/p&gt;</comment>
                            <comment id="12619886" author="timmsc" created="Tue, 5 Aug 2008 15:01:22 +0100"  >&lt;p&gt;There have been times that I&apos;ve wanted to turn on logging for components outside of Solr.  Since it is hierarchical and sorted alphabetically, I&apos;ve never found it a problem to find the loggers that I am looking for.  My preference would be to keep all of the available loggers in the table and keep the configuration to a minimum (right now the user does not need to configure anything).&lt;/p&gt;</comment>
                            <comment id="12620708" author="timmsc" created="Thu, 7 Aug 2008 19:30:10 +0100"  >&lt;p&gt;Found a bug.  If a synthesized logger is set to OFF, the below exception is thrown.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;HTTP ERROR: 500

INTERNAL_SERVER_ERROR

RequestURI=/solr/admin/logging
Caused by:

java.lang.NullPointerException
	at org.apache.solr.servlet.LogLevelSelection.doGet(LogLevelSelection.java:134)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
        [...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The fix is to ensure that the Level returned from getEffectiveLevel is not null.  If it is null, return Level.OFF.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Level getEffectiveLevel( Logger logger ) {
    Level level = logger.getLevel();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;( Level l : LEVELS ) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( level != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; level;
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( l == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) { &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;; }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( logger.isLoggable( l ) ) {
        level = l;
      }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( level == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
      level = Level.OFF;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; level;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12620712" author="shalinmangar" created="Thu, 7 Aug 2008 19:39:38 +0100"  >&lt;p&gt;Committed revision 683672 with Sean&apos;s fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12429412">SOLR-1257</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12545378">SOLR-3208</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12381267" name="LogLevelSelection.java" size="8954" author="timmsc" created="Thu, 1 May 2008 21:00:29 +0100"/>
                            <attachment id="12382666" name="SOLR-554-screenshot-3.jpg" size="219871" author="timmsc" created="Fri, 23 May 2008 15:59:22 +0100"/>
                            <attachment id="12382665" name="SOLR-554.patch" size="10996" author="timmsc" created="Fri, 23 May 2008 15:57:27 +0100"/>
                            <attachment id="12382659" name="SOLR-554.patch" size="10998" author="timmsc" created="Fri, 23 May 2008 15:03:19 +0100"/>
                            <attachment id="12382607" name="SOLR-554.patch" size="10916" author="timmsc" created="Thu, 22 May 2008 23:06:04 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 May 2008 15:54:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxqmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>