<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:19:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-620/SOLR-620.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-620] Velocity Response Writer</title>
                <link>https://issues.apache.org/jira/browse/SOLR-620</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Add a Velocity - &lt;a href=&quot;http://velocity.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://velocity.apache.org&lt;/a&gt; - response writer, making it possible to generate a decent search UI straight from Solr itself.  Designed to work standalone or in conjunction with the JSON response writer (or SolrJS) for Ajaxy things.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12399771">SOLR-620</key>
            <summary>Velocity Response Writer</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehatcher">Erik Hatcher</assignee>
                                    <reporter username="ehatcher">Erik Hatcher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jul 2008 02:02:43 +0100</created>
                <updated>Tue, 10 Nov 2009 15:51:43 +0000</updated>
                            <resolved>Mon, 13 Apr 2009 10:06:41 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12611421" author="ehatcher" created="Tue, 8 Jul 2008 02:05:25 +0100"  >&lt;p&gt;First draft - very basic operation.  Must also add Velocity, Commons Lang, and Commons Collections to the classpath.&lt;/p&gt;

&lt;p&gt;Example: &lt;a href=&quot;http://localhost:8983/solr/select?q=ipod&amp;amp;wt=velocity&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select?q=ipod&amp;amp;wt=velocity&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With an optional template parameter, specifying the template name under conf/velocity (&amp;amp;template=default)&lt;/p&gt;</comment>
                            <comment id="12611422" author="ehatcher" created="Tue, 8 Jul 2008 02:07:38 +0100"  >&lt;p&gt;The JARs used to build this example (probably not the most current versions, but what I happened to have laying around).&lt;/p&gt;</comment>
                            <comment id="12611424" author="ehatcher" created="Tue, 8 Jul 2008 02:11:19 +0100"  >&lt;p&gt;There are a zillion bells and whistles that can be added to this, lots of Velocity parameters that can be controlled.  We&apos;ll probably want to have some custom Solr macros to make templating life a lot easier.  For example, we&apos;ll need to make navigating the DocList easier.&lt;/p&gt;</comment>
                            <comment id="12612436" author="mepheser" created="Thu, 10 Jul 2008 12:16:37 +0100"  >&lt;p&gt;Just added also the request object to the context for my very first implementation of a solrjs, so the searcher is avaliable for $request.getSearcher().doc(id).&lt;/p&gt;

&lt;p&gt;I think there are two possible ways to get make easier:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Wrapping the resonse in an object (maybe SolrReponse from solrj), providing handy getters and loops etc.&lt;/li&gt;
	&lt;li&gt;Creating velocity macros&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll experiment a bit with both solutions and comment again.&lt;/p&gt;</comment>
                            <comment id="12612527" author="ryantxu" created="Thu, 10 Jul 2008 16:07:31 +0100"  >&lt;p&gt;perhaps look at convrting the DocList to a SolrDocumentList.  Then velocity could use the solrj functions.&lt;/p&gt;

&lt;p&gt;take a look at: org.apache.solr.update.DocumentBuilder &amp;#8211; it has a function loadStoredFields that you can use to convert a Document to a SolrDocument.&lt;/p&gt;</comment>
                            <comment id="12612531" author="ehatcher" created="Thu, 10 Jul 2008 16:15:06 +0100"  >&lt;p&gt;Here&apos;s an updated patch with a bit more meat to the default.vm, also adding in the SolrQueryRequest to the Velocity context.   &lt;/p&gt;

&lt;p&gt;I&apos;ve done it the hard way for now, by navigating the API as rawly as it gets to display the documents.   Doing it this way for a bit will inform what kind of macros or other context helpers we need to make the view as clean as possible.&lt;/p&gt;</comment>
                            <comment id="12612534" author="ehatcher" created="Thu, 10 Jul 2008 16:18:05 +0100"  >&lt;p&gt;Matthias - I removed your patch to keep it clean here.  If you name the patch &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-620&quot; title=&quot;Velocity Response Writer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-620&quot;&gt;&lt;del&gt;SOLR-620&lt;/del&gt;&lt;/a&gt;.patch, it will grey out previous versions.  Two comments on your patch, be sure to flag your patch as being ok to use within the ASF, and also be sure to svn add (locally only of course) the .vm files so they appear in the patch too.&lt;/p&gt;</comment>
                            <comment id="12612535" author="ehatcher" created="Thu, 10 Jul 2008 16:21:55 +0100"  >&lt;p&gt;Another handy method to get all the documents is SolrIndexSearcher#readDocs(Document[] docs, DocList ids) - however it is probably best for memory usage (or is it?) to continue to use the DocList#iterator() so only a single document is loaded at a time in case there are large field values or a lot of documents requested.   Although this point will be a bit moot when Velocity layouts are implemented (something I plan to do eventually) where the original template is generated into a string buffer and then another wrapping template is generated around it.&lt;/p&gt;</comment>
                            <comment id="12612537" author="yseeley@gmail.com" created="Thu, 10 Jul 2008 16:26:27 +0100"  >&lt;blockquote&gt;&lt;p&gt;however it is probably best for memory usage (or is it?) to continue to use the DocList#iterator() so only a single document is loaded at a time&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.  That&apos;s why I deferred loading documents until response writing.... so things could be streamed one doc at a time.&lt;/p&gt;</comment>
                            <comment id="12612801" author="mepheser" created="Fri, 11 Jul 2008 09:22:49 +0100"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ve done it the hard way for now, by navigating the API as rawly as it gets to display the documents. Doing it this way for a bit will inform what kind of macros or other context helpers we need to make the view as clean as possible.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Played around a bit with macros and their capabilities, I think creating a java context helper class is the better way. The velocity template should make it easy to create very custom html. With macros, we could &quot;hide&quot; the complex method calls, but eg. creating a shortcut for a loop AND customize the html inside this loop will not be possible easily. &lt;/p&gt;

&lt;p&gt;And, correct me if I&apos;m wrong, your &quot;shortcut setters&quot; like &quot;#set($iterator=$response.values.response.iterator())&quot; have to be declared in every template file, cause template libraries cannot share variables, and macros only produce Strings and no other return types.&lt;/p&gt;

&lt;p&gt;So I suggest a small java wrapper object that still uses the doclist for performance considerations and only provides handy convenience methods like&lt;/p&gt;

&lt;p&gt;getResultIterator() -&amp;gt; iterator of ids, used in #foreachs&lt;br/&gt;
getDocFieldValue(docId, fieldName)&lt;br/&gt;
etc.&lt;/p&gt;

&lt;p&gt;so a custom result view looks like this:&lt;br/&gt;
#foreach($docid in $helper.getResultIterator())&lt;br/&gt;
&amp;lt;li&amp;gt;$helper.getDocFieldValue(docid, &quot;title&quot;)&amp;lt;/li&amp;gt;&lt;br/&gt;
#end&lt;/p&gt;

&lt;p&gt;This object can be passed to the velocity context and may be accessible to all custom templates, without changing the data&apos;s nature (doclist to momory objects or the like). I&apos;ll have a test version of thos approch ready this evening. &lt;/p&gt;
</comment>
                            <comment id="12612891" author="noble.paul" created="Fri, 11 Jul 2008 15:35:48 +0100"  >&lt;p&gt;Isn&apos;t this a good candidate for a contrib project? &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It introduces quite a few dependencies Solr core does not need&lt;/li&gt;
	&lt;li&gt;Most of the users do not deploy the webapp in Solr itself (for security reasons)&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12612894" author="ehatcher" created="Fri, 11 Jul 2008 15:43:32 +0100"  >&lt;p&gt;Sure, contrib is fine.   Where it ends up isn&apos;t a big deal to me.&lt;/p&gt;

&lt;p&gt;As for how Solr is deployed - having the web tier and Solr be one and the same (in a read-only configuration of course) is a pretty compelling way to deploy, I&apos;d think.  Why separate Solr and the UI when using load balanced replicated servers?     Of course it depends on the needs of the application, but keeping a separate web app to regurgitate what Solr returns can be an unnecessary deployment hassle.&lt;/p&gt;</comment>
                            <comment id="12615320" author="ryantxu" created="Mon, 21 Jul 2008 18:32:38 +0100"  >&lt;p&gt;Looking at a recent version of this, it seems best if we can reuse the NamedList&amp;lt;Object&amp;gt; parsing from solrj rather then have the velocity writer add helper functions to access parts of the response.&lt;/p&gt;

&lt;p&gt;I just posted &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-641&quot; title=&quot;expose EmbeddedSolrServer response parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-641&quot;&gt;&lt;del&gt;SOLR-641&lt;/del&gt;&lt;/a&gt; to expose this parsing form EmbeddedSolrServer&lt;/p&gt;</comment>
                            <comment id="12616666" author="ryantxu" created="Thu, 24 Jul 2008 22:37:06 +0100"  >&lt;p&gt;check &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-654&quot; title=&quot;Modify the solrj SolrResponse API so responses can be dynamicaly constructed and loaded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-654&quot;&gt;&lt;del&gt;SOLR-654&lt;/del&gt;&lt;/a&gt; for a way to construct a SolrResponse from a given class &amp;#8211; this way the velocity writer can have access to any utility functions a SolrResponse implementation has.&lt;/p&gt;</comment>
                            <comment id="12616896" author="mepheser" created="Fri, 25 Jul 2008 15:06:59 +0100"  >&lt;p&gt;According to the patches Ryan mentioned above (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-641&quot; title=&quot;expose EmbeddedSolrServer response parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-641&quot;&gt;&lt;del&gt;SOLR-641&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-654&quot; title=&quot;Modify the solrj SolrResponse API so responses can be dynamicaly constructed and loaded.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-654&quot;&gt;&lt;del&gt;SOLR-654&lt;/del&gt;&lt;/a&gt;, I created an update of VelocityResponseWriter.&lt;/p&gt;

&lt;p&gt; It now contains the following configuration possibilities:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;vl.template: The template file to use inside conf/velocity/&lt;/li&gt;
	&lt;li&gt;vl.json: If this param is true, the output of the template is wrapped inside a javascript function, eg myFunction( &amp;lt;actual output&amp;gt; ). This is necessary if we want to use JSON requests out of a javascript client.&lt;/li&gt;
	&lt;li&gt;vl.content: The content type of the response. Default is text/html in standard mode, and text/json in vl.json=true mode.&lt;/li&gt;
	&lt;li&gt;vl.response: To provide an implementation of SolrResponse inside the template, specify the class name of the implementation. For convenience, it looks inside the package &quot;org.apache.solr.client.solrj.response&quot;, so you only have to choose  eg. QueryResponse, LukeResponse, MultiCoreResponse. Custom classes may be accessed using the full qualified class name, eg. my.custom.package.CustomResponse&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Regardless of the  vl.response, there is always an instance of RawRequestHelper inside the context, this provides access to the SolrQueryRequest and SolrQueryResponse, as well as convenience methods like getResultIterator() or getRequestParam()&lt;/p&gt;</comment>
                            <comment id="12616953" author="ehatcher" created="Fri, 25 Jul 2008 18:12:50 +0100"  >&lt;p&gt;Matthias - I&apos;m perplexed by the JSON feature.   The intention was to use the Velocity writer to produce templated output, but if you want JSON data, use wt=json, not the velocity one.&lt;/p&gt;</comment>
                            <comment id="12616969" author="ryantxu" created="Fri, 25 Jul 2008 18:49:56 +0100"  >&lt;p&gt;the JSON feature gets around a javascript limitation for cross-site scripting.  If you enclose your HTML within a JSON tag, you can access from any server &amp;#8211; otherwise it has to come from the same machine.&lt;/p&gt;

&lt;p&gt;the json feature just sends your velocity template output (perhaps html) surrounded with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  { result: &lt;span class=&quot;code-quote&quot;&gt;&quot;your template output here (escaped &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; json)&quot;&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12642622" author="yseeley@gmail.com" created="Sat, 25 Oct 2008 15:31:07 +0100"  >&lt;p&gt;Would it make sense to allow passing of the velocity template in a parameter for extra on-the-fly flexibility?&lt;/p&gt;</comment>
                            <comment id="12642787" author="ehatcher" created="Sun, 26 Oct 2008 11:06:10 +0000"  >&lt;p&gt;That&apos;s an interesting idea, Yonik.  Easy enough to implement.  I&apos;m not quite sure how useful it&apos;d be - I&apos;m curious about what use cases this would be leveraged.  I&apos;ll toss it in though.&lt;/p&gt;

&lt;p&gt;The same feature would be useful to the XsltResponseWriter also, I&apos;d think.  &lt;/p&gt;</comment>
                            <comment id="12643580" author="ehatcher" created="Wed, 29 Oct 2008 18:28:47 +0000"  >&lt;p&gt;Attached is a new patch.  Sorry Matthias, this doesn&apos;t included your changes (mostly the JSON wrapper, something I&apos;ve yet to fully understand the need for).&lt;/p&gt;

&lt;p&gt;This new patch allows for templates to be specified as parameters.  &amp;amp;template.hit=$doc.get(&apos;id&apos;), for example, overrides the hit.vm template found in conf/velocity.&lt;/p&gt;</comment>
                            <comment id="12643595" author="ehatcher" created="Wed, 29 Oct 2008 18:40:48 +0000"  >&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/solr/VelocityResponseWriter&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/VelocityResponseWriter&lt;/a&gt; contains usage instructions and examples.&lt;/p&gt;</comment>
                            <comment id="12643646" author="ehatcher" created="Wed, 29 Oct 2008 20:48:46 +0000"  >&lt;p&gt;This .zip supercedes the previous patches (except for the JSON wrapping feature from Matthias - no worries, that part will come back as needed).  The .zip slides into the contrib/ structure as &quot;velocity&quot;.  Unzip, then run &quot;ant dist&quot; in contrib/velocity to have the example configuration all set up for this.&lt;/p&gt;</comment>
                            <comment id="12644266" author="ehatcher" created="Fri, 31 Oct 2008 11:56:22 +0000"  >&lt;p&gt;Updated .zip.  Simply extract to contrib, then start up the example (from example/ subdirectory): java -Dsolr.solr.home=../contrib/velocity/src/main/solr/ -jar start.jar&lt;/p&gt;

&lt;p&gt;This adds pagination, CSS, a decent facet navigation, reasonable document view, and JQuery integration (just for toggling explanation hit detail for now).&lt;/p&gt;</comment>
                            <comment id="12644328" author="ryantxu" created="Fri, 31 Oct 2008 16:16:00 +0000"  >&lt;p&gt;Looks good.&lt;/p&gt;

&lt;p&gt;I think you should go ahead and commit it.  It is easier to keep track of the changes once it is committed.&lt;/p&gt;</comment>
                            <comment id="12644373" author="ehatcher" created="Fri, 31 Oct 2008 17:34:05 +0000"  >&lt;p&gt;Thanks Ryan!  Committed.   Needs work, but it&apos;s a good starting point, and usable as is.&lt;/p&gt;</comment>
                            <comment id="12644379" author="ryantxu" created="Fri, 31 Oct 2008 17:54:20 +0000"  >&lt;p&gt;don&apos;t know why, but FF 3.0.3 (on mac) does not display anything unless we change:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: contrib/velocity/src/main/solr/conf/velocity/browse.vm
===================================================================
--- contrib/velocity/src/main/solr/conf/velocity/browse.vm	(revision 709500)
+++ contrib/velocity/src/main/solr/conf/velocity/browse.vm	(working copy)
@@ -7,7 +7,7 @@
 &amp;lt;head&amp;gt;
   &amp;lt;title&amp;gt;#param(&apos;title&apos;)&amp;lt;/title&amp;gt;
   &amp;lt;meta http-equiv=&lt;span class=&quot;code-quote&quot;&gt;&quot;content-type&quot;&lt;/span&gt; content=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/html; charset=UTF-8&quot;&lt;/span&gt;/&amp;gt;
-  &amp;lt;script type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; src=&lt;span class=&quot;code-quote&quot;&gt;&quot;/solr/admin/jquery-1.2.3.min.js&quot;&lt;/span&gt;/&amp;gt;
+  &amp;lt;script type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; src=&lt;span class=&quot;code-quote&quot;&gt;&quot;/solr/admin/jquery-1.2.3.min.js&quot;&lt;/span&gt;&amp;gt;&amp;lt;/script&amp;gt;
   &amp;lt;link rel=&lt;span class=&quot;code-quote&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/css&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;/solr/admin/file?file=/velocity/main.css&amp;amp;contentType=text/css&quot;&lt;/span&gt;/&amp;gt;
 &amp;lt;/head&amp;gt;
 &amp;lt;body&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12644380" author="ryantxu" created="Fri, 31 Oct 2008 18:02:30 +0000"  >&lt;p&gt;What are your thoughts on what should go in the velocity contrib src/main/solr files?&lt;/p&gt;

&lt;p&gt;I don&apos;t like that it duplicates all the stuff in /trunk/example/solr&lt;/p&gt;

&lt;p&gt;In my view (influenced by wicket), it would be great if the velocity templates were packaged in the .jar files rather then in the config directory. &lt;/p&gt;</comment>
                            <comment id="12644474" author="ehatcher" created="Sat, 1 Nov 2008 00:37:29 +0000"  >&lt;p&gt;As for the duplication - I agree.... really all I&apos;m after is getting an example configuration, much like data import handler (which also duplicates an entire configuration, mostly).  All this VelocityResponseWriter needs is to be registered in solrconfig.xml (where&apos;s Spring when you need it, such that dropping in a JAR is all that is needed to wire in a new component?! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;   Suggestions on improving, or just hardwire it into the default example config, are welcome?&lt;/p&gt;

&lt;p&gt;Regarding Velocity template location, Velocity has a very flexible resource loader mechanism.  Right now it&apos;s hardcoded to use the custom parameter loader (&amp;amp;template.&amp;lt;template name&amp;gt;=&amp;lt;body&amp;gt;) or the file system.  Just wiring in the built-in classpath resource loader won&apos;t be enough... we need a SolrResourceLoader pass-through to pick up templates in JAR files in conf/lib - that&apos;ll be real handy.&lt;/p&gt;

&lt;p&gt;I&apos;ll work on the JAR loading capability, shouldn&apos;t be too hard to toss in there.&lt;/p&gt;</comment>
                            <comment id="12644491" author="ehatcher" created="Sat, 1 Nov 2008 04:59:54 +0000"  >&lt;p&gt;Ok, got your JAR loader in place.  At this point, templates get found first in params (&amp;amp;template.name=body), then the file system (either v.base_dir property value, bad name I know, or conf/velocity), then the JARs.  This gives overridability down to the request level.&lt;/p&gt;

&lt;p&gt;The one caveat to the JAR loader... it&apos;s actually just a front-end to SolrResourceLoader#openResource(), so it can open files in the conf directory (or via absolute path, it seems!), as well as from conf/lib/*.jar&apos;s and the Solr classpath itself.&lt;/p&gt;

&lt;p&gt;We&apos;ll make the Velocity properties more flexibly managed as we evolve this.&lt;/p&gt;

&lt;p&gt;Templates on the file system really make the most sense to me, but we&apos;ll let Velocity&apos;s flexibility shine through.&lt;/p&gt;</comment>
                            <comment id="12647706" author="gsingers" created="Fri, 14 Nov 2008 19:33:41 +0000"  >&lt;p&gt;Just noticed that this contrib is not added into the release/signing/packaging stuff in the top level build.&lt;/p&gt;</comment>
                            <comment id="12648303" author="mepheser" created="Mon, 17 Nov 2008 20:12:01 +0000"  >&lt;p&gt;As discussed on the mailinglist, this patch adds the removed json wrap and response writer capabilities.&lt;/p&gt;</comment>
                            <comment id="12648577" author="ehatcher" created="Tue, 18 Nov 2008 11:18:03 +0000"  >&lt;p&gt;I have added in the json escaping/wrapping feature, renamed all parameters (including template overrides) to use the &quot;v.&quot; prefix.  But I did not add the rawResponse feature yet.  It needs more thought, and no known example is using it yet.  I&apos;d prefer that SolrJ&apos;s SolrQuery and SolrResponse objects be put into the Velocity context - making this portable between embedded and HTTP Solr calls.  Using the SolrJ API will alleviate the need that rawResponse was filling, I believe.  &lt;/p&gt;</comment>
                            <comment id="12698102" author="koji" created="Sat, 11 Apr 2009 16:50:24 +0100"  >&lt;p&gt;I got my HTML page with garbage characters because my template encoding is UTF-8 but velocity expects it ISO-8859-1 as default (default velocity.properties file). I think it is necessary we can override default properties. How do people think applying the patch?&lt;/p&gt;</comment>
                            <comment id="12698116" author="ehatcher" created="Sat, 11 Apr 2009 18:55:02 +0100"  >&lt;p&gt;Yeah, I figured we&apos;d need to provide a mechanism to load velocity.properties, or at least specify them in some manner through config.  Does the engine.init calls after setting some properties lose those values originally set?   Maybe velocity.properties should be loaded from SolrResourceLoader so that it can live on the classpath?&lt;/p&gt;</comment>
                            <comment id="12698148" author="koji" created="Sun, 12 Apr 2009 02:27:35 +0100"  >&lt;blockquote&gt;&lt;p&gt;Does the engine.init calls after setting some properties lose those values originally set?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;According to the Velocity document, the sequence of ve initialization will be engine.setProperty(ies) then engine.init.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://velocity.apache.org/engine/releases/velocity-1.6.2/developer-guide.html#separate&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://velocity.apache.org/engine/releases/velocity-1.6.2/developer-guide.html#separate&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And I checked VelocityEngine through debugger. It was no problem.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Maybe velocity.properties should be loaded from SolrResourceLoader so that it can live on the classpath?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right. I updated the patch.&lt;/p&gt;

&lt;p&gt;I&apos;d like to commit if there is no objections.&lt;/p&gt;</comment>
                            <comment id="12698201" author="ehatcher" created="Sun, 12 Apr 2009 11:08:02 +0100"  >&lt;p&gt;Looks good, no objections at all.  Commit when ready.&lt;/p&gt;</comment>
                            <comment id="12698304" author="koji" created="Mon, 13 Apr 2009 02:47:19 +0100"  >&lt;p&gt;velocity.properties was committed revision 764347.&lt;/p&gt;</comment>
                            <comment id="12698352" author="ehatcher" created="Mon, 13 Apr 2009 10:06:41 +0100"  >&lt;p&gt;I think we can resolve this issue and open new ones for any additional work needed on the VelocityResponseWriter.&lt;/p&gt;</comment>
                            <comment id="12775513" author="gsingers" created="Tue, 10 Nov 2009 15:51:43 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12400670">SOLR-641</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12400953">SOLR-654</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405245" name="SOLR-620-velocity.properties.patch" size="3811" author="koji" created="Sun, 12 Apr 2009 02:27:35 +0100"/>
                            <attachment id="12405236" name="SOLR-620-velocity.properties.patch" size="2400" author="koji" created="Sat, 11 Apr 2009 16:50:24 +0100"/>
                            <attachment id="12394096" name="SOLR-620.patch" size="4196" author="mepheser" created="Mon, 17 Nov 2008 20:12:01 +0000"/>
                            <attachment id="12393000" name="SOLR-620.patch" size="9613" author="ehatcher" created="Wed, 29 Oct 2008 18:28:47 +0000"/>
                            <attachment id="12386883" name="SOLR-620.patch" size="10107" author="mepheser" created="Fri, 25 Jul 2008 15:06:59 +0100"/>
                            <attachment id="12385772" name="SOLR-620.patch" size="3380" author="ehatcher" created="Thu, 10 Jul 2008 16:15:06 +0100"/>
                            <attachment id="12385456" name="SOLR-620.patch" size="2647" author="ehatcher" created="Tue, 8 Jul 2008 02:05:25 +0100"/>
                            <attachment id="12393146" name="SOLR-620.zip" size="1180030" author="ehatcher" created="Fri, 31 Oct 2008 11:56:22 +0000"/>
                            <attachment id="12393008" name="SOLR-620.zip" size="1120697" author="ehatcher" created="Wed, 29 Oct 2008 20:48:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Jul 2008 11:16:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxq87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>