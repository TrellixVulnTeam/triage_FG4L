<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-805/SOLR-805.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-805] DisMax queries are not being cached in QueryResultCache</title>
                <link>https://issues.apache.org/jira/browse/SOLR-805</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I have a DisMax Search Handler set up in my solrconfig.xml to weight results based on which field a hit was found in. Results seem to be coming back fine, but the exact same query issued twice will &lt;b&gt;not&lt;/b&gt; result in a cache hit.&lt;/p&gt;

&lt;p&gt;I have run far enough in the debugger to determine that the hashCode for the BooleanQuery object is returning a different value each time for the same query. This leads me to believe there is some random factor involved in it&apos;s calculation, such as a default Object hashCode() implementation somewhere in the chain. Non DisMax queries seem to be caching just fine.&lt;/p&gt;

&lt;p&gt;Where I see this behavior exhibited is on line 47 of the QueryResultKey constructor. I have not dug in far enough to determine exactly where the hashCode is being incorrectly calculated. I will try and dig in further tomorrow, but wanted to get some attention on the bug. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Using Sun JDK 1.5 and Solr 1.3.0 release on Windows XP&lt;/p&gt;</environment>
        <key id="12406053">SOLR-805</key>
            <summary>DisMax queries are not being cached in QueryResultCache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tfeak">Todd Feak</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Oct 2008 23:53:01 +0100</created>
                <updated>Thu, 13 Aug 2009 15:03:51 +0100</updated>
                            <resolved>Fri, 24 Oct 2008 15:15:52 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12638639" author="tfeak" created="Fri, 10 Oct 2008 21:01:41 +0100"  >&lt;p&gt;The fix for this has been commited to Lucene under the linked issue. Should be resolved when the referenced Lucene library is upgraded.&lt;/p&gt;</comment>
                            <comment id="12642354" author="koji" created="Fri, 24 Oct 2008 01:50:02 +0100"  >&lt;p&gt;I&apos;ll commit today if there is no objections.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ svn status
A      lib/lucene-queries-2.9-dev.jar
D      lib/lucene-spellchecker-2.4.0.jar
A      lib/lucene-snowball-2.9-dev.jar
D      lib/lucene-analyzers-2.4.0.jar
A      lib/lucene-spellchecker-2.9-dev.jar
D      lib/lucene-core-2.4.0.jar
A      lib/lucene-analyzers-2.9-dev.jar
D      lib/lucene-highlighter-2.4.0.jar
D      lib/lucene-memory-2.4.0.jar
A      lib/lucene-core-2.9-dev.jar
D      lib/lucene-queries-2.4.0.jar
D      lib/lucene-snowball-2.4.0.jar
A      lib/lucene-highlighter-2.9-dev.jar
A      lib/lucene-memory-2.9-dev.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12642467" author="koji" created="Fri, 24 Oct 2008 15:15:52 +0100"  >&lt;p&gt;Committed revision 707641. Thanks Todd!&lt;/p&gt;</comment>
                            <comment id="12642968" author="otis" created="Mon, 27 Oct 2008 17:36:27 +0000"  >&lt;p&gt;Does this call for 1.3.1 release in the very near future?  Most Solr 1.3 DisMax users will probably not be able to figure this one out, yet it will hurt them.&lt;/p&gt;</comment>
                            <comment id="12643008" author="tfeak" created="Mon, 27 Oct 2008 18:40:57 +0000"  >&lt;p&gt;I&apos;m not sure if this will help with the decision or not, but I should clarify. &lt;/p&gt;

&lt;p&gt;This problem was not specifically with DisMax queries, though that&apos;s what I initially thought. It&apos;s with any query that would contain a MultiPhraseQuery within it. According to Yonik in the linked in bug, the SynonymFilter could inject this on a standard query. So, this problem isn&apos;t limited to DisMax, but it also may not encompass &lt;b&gt;all&lt;/b&gt; DisMax queries.&lt;/p&gt;</comment>
                            <comment id="12643335" author="shalinmangar" created="Tue, 28 Oct 2008 20:29:22 +0000"  >&lt;p&gt;Apart from this one, I don&apos;t think there are any major fixes for 1.3 branch. With Java based replication being in the trunk now, we can also plan for an early 1.4 release &amp;#8211; replication alone is a huge user facing feature. Of course, we need some time for the new features to stabilize, therefore, 1.4 can&apos;t be done as quick as a 1.3.1 release can be.&lt;/p&gt;</comment>
                            <comment id="12645876" author="ryguasu" created="Fri, 7 Nov 2008 20:30:00 +0000"  >&lt;p&gt;I was trying to figure out exactly which revision of the Lucene trunk Koji&apos;s commit here was built against, since it doesn&apos;t seem to be stated here in JIRA or in the SVN log. If anyone else else is curious, the answer is Lucene r707499 &amp;#8211; at least according to the MANIFEST.MF file in lib/lucene-core-2.9-dev.jar.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12406054">LUCENE-1415</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Oct 2008 00:50:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxp3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20386</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>