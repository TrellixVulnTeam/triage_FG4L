<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:23:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-217/SOLR-217.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-217] schema option to ignore unused fields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-217</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;One thing that causes problems for me (and i assume others) is that Solr is schema-strict in that unknown fields cause solr to throw exceptions and there is no way to relax this constraint.  this can cause all sorts of serious problems if you have automated feeding applications that do things like SELECT * FROM table1 or where you want to add other fields to the document for processing purposes before sending them to solr but don&apos;t want to deal with &apos;cleanup&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12368203">SOLR-217</key>
            <summary>schema option to ignore unused fields</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="willjohnson3">Will Johnson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Apr 2007 15:19:42 +0100</created>
                <updated>Fri, 10 May 2013 11:41:12 +0100</updated>
                            <resolved>Tue, 8 May 2007 19:07:41 +0100</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>update</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12492306" author="willjohnson3" created="Fri, 27 Apr 2007 15:20:50 +0100"  >&lt;p&gt;the attached patch solve this problme by adding a new option to schema.xml to allow unnamed fields including those that don&apos;t match dynamic fields to be ignored.  the default is false if the attribute is missing which is consistent with existing SOLR functionality.  if you want to enable this feature the schema.xml would look like:&lt;/p&gt;

&lt;p&gt;....  blah blah blah ...&lt;br/&gt;
&amp;lt;fields ignoreUnnamedFields=&quot;true&quot;&amp;gt;&lt;br/&gt;
....  blah blah blah ...&lt;/p&gt;</comment>
                            <comment id="12492324" author="yseeley@gmail.com" created="Fri, 27 Apr 2007 16:41:59 +0100"  >&lt;p&gt;This is a unique enough of a requirement, I&apos;m not sure an additional configuration switch is warranted.&lt;/p&gt;

&lt;p&gt;However, another solution might be to allow fields to be unstored &lt;b&gt;and&lt;/b&gt; unindexed (essentially doing nothing).  That would allow you to map a dynamic field of &quot;*&quot; to an unstored + unindexed field.&lt;br/&gt;
It would also allow people to transition schemas + older clients.  They could change the old field to unstored + unindexed and use a copyField to move it to the new field.&lt;/p&gt;</comment>
                            <comment id="12492326" author="willjohnson3" created="Fri, 27 Apr 2007 16:50:16 +0100"  >&lt;p&gt;i was actually taking this requirement from the other enterprise search&lt;br/&gt;
engines that i&apos;ve worked with that do this by default.  ie, solr is&lt;br/&gt;
different in this case.  your *-&amp;gt;nothing method sounds good as well but it&lt;br/&gt;
doesn&apos;t seem as obvious to someone reading the schema or trying to feed&lt;br/&gt;
data.  you might also run into problems later on when there are other&lt;br/&gt;
properties for &apos;things to do&apos; for fields other than indexing and searching.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;will&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12492332" author="ehatcher" created="Fri, 27 Apr 2007 17:11:00 +0100"  >&lt;p&gt;I like Yonik&apos;s suggestion of allowing unstored+unindexed fields to be no-op.&lt;/p&gt;</comment>
                            <comment id="12492357" author="hossman" created="Fri, 27 Apr 2007 19:15:11 +0100"  >&lt;p&gt;whatever mechanism we may add for supporting something like this, the default if unspecified should definitely be an error ... if Solr is asked to index data it doesn&apos;t know what to do with it should complain, rather then silently ignoring it ... this will help people with typos in their schema or indexing code find their problems faster.&lt;/p&gt;

&lt;p&gt;As for the proposed solutions: my initial reaction to reading the comments so far was to agree with Will: having an explicit true/false option makes it much cleraer to people reading the schema what&apos;s going on ... but in thinking about the possible use cases I prefer yonik&apos;s approach: leveraging the existing field/dynamcField syntax will allow people to not only say &quot;any unknown field should be ignored&quot; but also &quot;field XXXX should be ignored&quot; and &quot;any unknown field that starts with S_* should be ignored&quot;&lt;/p&gt;

&lt;p&gt;(there&apos;s also the question as to hwat should happen if i did have a stored=&quot;true&quot; dynamicField of &quot;*&quot; and i set ignoreUnnamedFields=&quot;true&quot;)&lt;/p&gt;


&lt;p&gt;For the example config, we might want to do something like this to make it more obvious what&apos;s going on, and to serve as a recommended config style...&lt;/p&gt;

&lt;p&gt;   &amp;lt;!-- since fields of this type are by default not stored or indexed, any data added to &lt;br/&gt;
         them will be ignored outright&lt;br/&gt;
     --&amp;gt;&lt;br/&gt;
   &amp;lt;fieldtype name=&quot;ignored&quot; stored=&quot;false&quot; indexed=&quot;false&quot; class=&quot;solr.StrField&quot; /&amp;gt;&lt;br/&gt;
   ...&lt;br/&gt;
   &amp;lt;!-- ignore any fields that don&apos;t already match an existing field name or dynamic field --&amp;gt;&lt;br/&gt;
   &amp;lt;dynamicField name=&quot;*&quot; type=&quot;ignored&quot; /&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="12492367" author="willjohnson3" created="Fri, 27 Apr 2007 19:50:16 +0100"  >&lt;p&gt;I like that solution and I can definitely see the advantages of having&lt;br/&gt;
dumb_*=ignored and so on.  How does this patch sound instead of the&lt;br/&gt;
previous:&lt;/p&gt;


&lt;p&gt;public Field createField(SchemaField field, String externalVal, float&lt;br/&gt;
boost) {&lt;br/&gt;
    String val;&lt;br/&gt;
    try &lt;/p&gt;
{
      val = toInternal(externalVal);
    }
&lt;p&gt; catch (NumberFormatException e) &lt;/p&gt;
{
      throw new SolrException(500, &quot;Error while creating field &apos;&quot; +
field + &quot;&apos; from value &apos;&quot; + externalVal + &quot;&apos;&quot;, e, false);
    }
&lt;p&gt;    if (val==null) return null;&lt;br/&gt;
    if (!field.indexed() &amp;amp;&amp;amp; !field.stored()) &lt;/p&gt;
{
        log.finest(&quot;Ignoring unindexed/unstored field: &quot; + field);
        return null;
    }

&lt;p&gt;    ... blah blah blah....&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;will&lt;/li&gt;
&lt;/ul&gt;




</comment>
                            <comment id="12492369" author="skeptikos" created="Fri, 27 Apr 2007 19:52:34 +0100"  >&lt;p&gt;+1 to Hoss&apos; elaboration of Yonik&apos;s suggested approach, except for reverse-compatibility (where we DO want an error for unknown fields) schema.xml should probably read something like:&lt;/p&gt;

&lt;p&gt;   &amp;lt;!-- since fields of this type are by default not stored or indexed, any data added to&lt;br/&gt;
         them will be ignored outright&lt;br/&gt;
     --&amp;gt;&lt;br/&gt;
   &amp;lt;fieldtype name=&quot;ignored&quot; stored=&quot;false&quot; indexed=&quot;false&quot; class=&quot;solr.StrField&quot; /&amp;gt;&lt;br/&gt;
   ...&lt;br/&gt;
   &amp;lt;!-- uncomment the following to ignore any fields that don&apos;t already match an existing&lt;br/&gt;
          field name or dynamic field, rather than reporting them as an error.&lt;br/&gt;
          alternately, change the type=&quot;ignored&quot; to some other type e.g. &quot;text&quot; if you want&lt;br/&gt;
          unknown fields indexed and/or stored by default --&amp;gt;&lt;br/&gt;
   &amp;lt;!-&lt;del&gt;dynamicField name=&quot;*&quot; type=&quot;ignored&quot; /&lt;/del&gt;-&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12492664" author="willjohnson3" created="Mon, 30 Apr 2007 13:54:37 +0100"  >&lt;p&gt;since we now have required fields (&lt;a href=&quot;http://issues.apache.org/jira/browse/SOLR-181&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/SOLR-181&lt;/a&gt;) any chance we can have ignored fields as well?  let me know if something else needs to be done to the patch but as far as i can tell the code works and people seem to agree that it&apos;s the correct approach.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;will&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12492665" author="yseeley@gmail.com" created="Mon, 30 Apr 2007 14:03:32 +0100"  >&lt;p&gt;Will, could you please add the last patch again, and click &quot;Grant License to ASF&quot;?&lt;/p&gt;
</comment>
                            <comment id="12492672" author="willjohnson3" created="Mon, 30 Apr 2007 15:08:07 +0100"  >&lt;p&gt;v3 patch included.  this version of the patch also takes into account the suggested example/solr/conf/schema.xml changes.  &lt;/p&gt;</comment>
                            <comment id="12492986" author="hossman" created="Wed, 2 May 2007 00:40:23 +0100"  >&lt;p&gt;added a simple test to the existing patch.&lt;/p&gt;

&lt;p&gt;one thing to note is that this will result in the field being &quot;ignored&quot; if you try to query on it as well ... but this is a more general problem of qhat to do when people try to query on an unindexed field (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-223&quot; title=&quot;SolrQueryParser should do more error checking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-223&quot;&gt;&lt;del&gt;SOLR-223&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;will commit in a day or so barring objections&lt;/p&gt;</comment>
                            <comment id="12494359" author="hossman" created="Tue, 8 May 2007 19:07:41 +0100"  >&lt;p&gt;commited r536278&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12356429" name="ASF.LICENSE.NOT.GRANTED--ignoreNonIndexedNonStoredField.patch" size="717" author="willjohnson3" created="Fri, 27 Apr 2007 19:50:16 +0100"/>
                            <attachment id="12356411" name="ignoreUnnamedFields.patch" size="2163" author="willjohnson3" created="Fri, 27 Apr 2007 15:20:49 +0100"/>
                            <attachment id="12356588" name="ignoreUnnamedFields_v3.patch" size="3505" author="hossman" created="Wed, 2 May 2007 00:40:23 +0100"/>
                            <attachment id="12356507" name="ignoreUnnamedFields_v3.patch" size="1940" author="willjohnson3" created="Mon, 30 Apr 2007 15:08:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Apr 2007 15:41:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxsof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>