<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:19:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1000/SOLR-1000.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1000] DIH FileListEntityProcessor fileName filters directory names and stops recursion </title>
                <link>https://issues.apache.org/jira/browse/SOLR-1000</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I have been trying to find out why DIH in FileListEntityProcessor mode did not appear to be recursing into subdirectories. Going through FileListEntityProcessor.java I eventually tumbled to the fact that my filename filter setting from data-config.xml also applied to directory names.&lt;/p&gt;

&lt;p&gt;Now, I feel that the fieldName filter should be applied to files fed into the parser, it should not be applied to the directory names we are recursing through. I bodged the code to adjust the behavior so that the &quot;FileName&quot; and &quot;excludes&quot; attributes of &quot;entity&quot; only apply to filenames and not directory names. It now recurses though my directory tree only indexing the appropriate files! I think the new behavior is more standard.&lt;/p&gt;

&lt;p&gt;I will submit the a patch once I have constructed one!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413738">SOLR-1000</key>
            <summary>DIH FileListEntityProcessor fileName filters directory names and stops recursion </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="fergus">Fergus McMenemie</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Feb 2009 22:15:07 +0000</created>
                <updated>Tue, 10 Nov 2009 15:50:35 +0000</updated>
                            <resolved>Tue, 3 Feb 2009 20:34:51 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="12669650" author="fergus" created="Mon, 2 Feb 2009 16:32:47 +0000"  >&lt;p&gt;Here is my first attempt at a patch, it seems to work OK however the testcase I added TestFileListEntityProcessor.java fails. I need somebody who knows what they are doing to point out what I am doing wrong!&lt;/p&gt;</comment>
                            <comment id="12669662" author="shalinmangar" created="Mon, 2 Feb 2009 17:30:17 +0000"  >&lt;p&gt;First the ClassCastException was because AbstractDataImportHandlerTest tries to read a string from the attributes map. But in this case, testRecursive put in a boolean true rather than a string to the &apos;recursive&apos; attribute. That was fixed by adding string &quot;true&quot; instead of a boolean. I&apos;ll fix AbstractDataImportHandlerTest to read String.valueOf to handle these cases in the future.&lt;/p&gt;

&lt;p&gt;After this fix, the assert at the end of the testRecursive failed. This is because it expects to find 3 files but &quot;a.xml&quot;, &quot;b.xml&quot; and &quot;c.props&quot; are in the same directory and due to the &apos;fileName&apos; regex, c.props won&apos;t be picked up. I guess you meant to add c.props to another child directory inside the one you are creating?&lt;/p&gt;</comment>
                            <comment id="12669913" author="fergus" created="Tue, 3 Feb 2009 10:07:43 +0000"  >&lt;p&gt;Sorted bugs in the Junit test and added a few other improvements to the test.&lt;/p&gt;</comment>
                            <comment id="12670102" author="shalinmangar" created="Tue, 3 Feb 2009 20:28:43 +0000"  >&lt;p&gt;Thanks Fergus.&lt;/p&gt;

&lt;p&gt;One minor thing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
      Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; r = getNext();
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (r != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) r = applyTransformer(r);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; r;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the new code the loop is not used at all. The difference is important because Transformers have the ability to skip documents by doing map.put(&quot;$skipDoc&quot;, true) on this map. If a document is skipped, applyTransformer will return null and we&apos;d like to request a new row from the data source (entity processor in this case). With this change, null will be returned which signals that the DataSource/EntityProcessor has run out of data even though it has not.&lt;/p&gt;

&lt;p&gt;Except for this, the patch looks great! I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12670104" author="shalinmangar" created="Tue, 3 Feb 2009 20:34:51 +0000"  >&lt;p&gt;Committed revision 740423.&lt;/p&gt;

&lt;p&gt;I reverted the change I mentioned above and I moved the issue to the DIH CHANGES.txt&lt;/p&gt;

&lt;p&gt;Thanks Fergus!&lt;/p&gt;</comment>
                            <comment id="12775467" author="gsingers" created="Tue, 10 Nov 2009 15:50:35 +0000"  >&lt;p&gt;Bulk close Solr 1.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399345" name="SOLR-1000.patch" size="5970" author="fergus" created="Tue, 3 Feb 2009 10:07:43 +0000"/>
                            <attachment id="12399279" name="SOLR-1000.patch" size="5295" author="fergus" created="Mon, 2 Feb 2009 16:32:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Feb 2009 17:30:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxnw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20190</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>