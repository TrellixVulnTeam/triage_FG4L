<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:18:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-82/SOLR-82.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-82] specify default values in the schema</title>
                <link>https://issues.apache.org/jira/browse/SOLR-82</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;It would be nice to specify a default value for a given field in the schema.  &lt;/p&gt;

&lt;p&gt;Chris Hostetter suggested this in:&lt;br/&gt;
&lt;a href=&quot;http://www.mail-archive.com/solr-user@lucene.apache.org/msg01564.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mail-archive.com/solr-user@lucene.apache.org/msg01564.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12358573">SOLR-82</key>
            <summary>specify default values in the schema</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Dec 2006 02:03:06 +0000</created>
                <updated>Fri, 10 May 2013 11:41:16 +0100</updated>
                            <resolved>Sat, 6 Jan 2007 01:39:27 +0000</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                    <component>update</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12458344" author="ryantxu" created="Thu, 14 Dec 2006 02:05:33 +0000"  >&lt;p&gt;This modifies SchemaField.java to keep a &quot;defaultValue&quot; and DocumentBuilder.java makes sure they exist when returning the document.&lt;/p&gt;

&lt;p&gt;The test is not totally adequate (i&apos;m not so good with XPath yet..) but it does make sure a date specified in the schema exists&lt;/p&gt;</comment>
                            <comment id="12458380" author="hossman" created="Thu, 14 Dec 2006 07:03:44 +0000"  >&lt;p&gt;only had a chance to skim the patch so far, and i think this aspect from the mailing list is going to be a real issue with indexing performance...&lt;/p&gt;

&lt;p&gt;: The only change I might make is to have the schema store if it has fields&lt;br/&gt;
: with default values so that DocumentBuilder.getDoc() does not cycle through&lt;br/&gt;
: all fields if there aren&apos;t any.&lt;/p&gt;

&lt;p&gt;... we can add a &quot;Set&amp;lt;SchemaField&amp;gt; fieldsWithDefaults&quot; to IndexSchema to quickly determine if there are any fields with defaults DocumentBuilder needs to check and what those fields are.&lt;/p&gt;</comment>
                            <comment id="12458582" author="ryantxu" created="Thu, 14 Dec 2006 19:10:49 +0000"  >&lt;p&gt;This is a revised version that stores a list of fieldsWithDefaultValue in the schema and only cycles through them (rather then every field)&lt;/p&gt;

&lt;p&gt;The important bit is in: DocumentBuilder.java&lt;/p&gt;

&lt;p&gt; public Document getDoc() {&lt;/p&gt;

&lt;p&gt;	// Check for default fields in our schema...&lt;br/&gt;
	for( SchemaField field : schema.getFieldsWithDefaultValue() ) {&lt;br/&gt;
	  if( doc.getField( field.getName() ) == null ) &lt;/p&gt;
{
	    doc.add( field.createField( field.getDefaultValue(), 1.0f ) );
	  }
&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;    Document ret = doc; doc=null;&lt;br/&gt;
    return ret;&lt;br/&gt;
  }&lt;/p&gt;
</comment>
                            <comment id="12460097" author="hossman" created="Thu, 21 Dec 2006 01:09:23 +0000"  >&lt;p&gt;Ryan: i finally got a chance to look this over in depth (your second version) and I love it!&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch with some minor modifications...&lt;/p&gt;

&lt;p&gt;1) fixed a typo in SchemaField.toString&lt;br/&gt;
2) cleaned up some indenting oddness in the lines you modified&lt;br/&gt;
3) added the name of the field to your log.fine line in IndexSchema&lt;br/&gt;
4) added sample usage to the example schema and 1 exampledoc (utf8-example.xml)&lt;br/&gt;
5) replaced your new testclass with a single new method in BasicFunctionalityTest which not only tests that the default is there, but also that it can be explicitly set when adding the doc.&lt;/p&gt;

&lt;p&gt;what do you think?&lt;/p&gt;</comment>
                            <comment id="12460099" author="ryantxu" created="Thu, 21 Dec 2006 01:18:15 +0000"  >&lt;p&gt;looks great.  thanks!&lt;/p&gt;</comment>
                            <comment id="12462591" author="hossman" created="Fri, 5 Jan 2007 20:13:50 +0000"  >&lt;p&gt;commited.&lt;/p&gt;

&lt;p&gt;Thanks for doing the leg work Ryan!&lt;/p&gt;</comment>
                            <comment id="12589316" author="hossman" created="Wed, 16 Apr 2008 00:44:45 +0100"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked (&quot;Resolved&quot; or &quot;Closed&quot;) and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 39 issues found was set to 1.2, email notification&lt;br/&gt;
was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this&lt;br/&gt;
(hopefully) unique string: 20080415hossman2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12347134" name="defaultValuesPatch.patch" size="6947" author="ryantxu" created="Thu, 14 Dec 2006 02:05:33 +0000"/>
                            <attachment id="12347621" name="defaultValuesPatch2.patch" size="10271" author="hossman" created="Thu, 21 Dec 2006 01:09:23 +0000"/>
                            <attachment id="12347219" name="defaultValuesPatch2.patch" size="8205" author="ryantxu" created="Thu, 14 Dec 2006 19:10:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Dec 2006 07:03:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxtif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>