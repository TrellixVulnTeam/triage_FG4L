<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:17:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-142/SOLR-142.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-142] RawResponseWriter - replace /admin/get-file.jsp</title>
                <link>https://issues.apache.org/jira/browse/SOLR-142</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;A RawResponseWriter writes a ContentStream directly to the response.&lt;/p&gt;

&lt;p&gt;This is useful to spit back a file directly from solr.  This implementation looks for a response property named &quot;content&quot; and sends it to the client.  If it can&apos;t find one, it delegates the response to another ResponseWriter.&lt;/p&gt;

&lt;p&gt;As an example, I added a GetAdminFileRequestHandler to replace /admin/get-file.jsp&lt;/p&gt;</description>
                <environment></environment>
        <key id="12362029">SOLR-142</key>
            <summary>RawResponseWriter - replace /admin/get-file.jsp</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Feb 2007 19:20:24 +0000</created>
                <updated>Fri, 10 May 2013 11:40:46 +0100</updated>
                            <resolved>Wed, 2 Jan 2008 17:25:52 +0000</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                    <component>web gui</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12470323" author="ryantxu" created="Mon, 5 Feb 2007 19:33:37 +0000"  >&lt;p&gt;The RawResponseWriter is configured by default (just like JSON etc)&lt;/p&gt;

&lt;p&gt;One could create it explicitly and specify what &apos;base&apos; response writer it should use (JSON etc)&lt;/p&gt;

&lt;p&gt; &amp;lt;queryResponseWriter name=&quot;raw&quot; class=&quot;org.apache.solr.request.RawResponseWriter&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;int name=&quot;base&quot;&amp;gt;JSON&amp;lt;/int&amp;gt;&lt;br/&gt;
 &amp;lt;/queryResponseWriter&amp;gt; &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - - - - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I added a GetAdminFileRequestHandler that is configured to use wt=raw by default.  I wanted to delete get-file.jsp, but it is needed to include:&lt;/p&gt;

&lt;p&gt;&amp;lt;jsp:include page=&quot;get-file.jsp?file=admin-extra.html&amp;amp;optional=y&quot; flush=&quot;true&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;(which, by the way, spits out HTML in the middle of a table declaration)&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - - - - - - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I deleted raw-schema.jsp that did not appear to be referenced by anything&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - - -  - - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I could not help myself and added:  GetSystemPropertiesRequestHandler and deleted get-properties.jsp.  Unlike get-properties.jsp, GetSystemPropertiesRequestHandler  spits back properties formatted by the selected ResponseWriter.  It also added the ability to get a single property&lt;/p&gt;</comment>
                            <comment id="12470729" author="hossman" created="Tue, 6 Feb 2007 20:26:32 +0000"  >&lt;p&gt;Ryan, i really like the idea of a RawResponseWriter, and your GetAdminFileRequestHandler ... for a hwile now i&apos;ve been thinking that it would be good to change the admin/gettableFiles section of hte solrconfig so that...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;files could have a default content-type specified&lt;/li&gt;
	&lt;li&gt;direcotries could be listed (with a content-type to assume for all files in that directory)&lt;br/&gt;
...and then replace get-file.jsp with a servlet that used the extra path info to find the filename, and supported query args to override the default content-type with text/plain&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;my motivation being to help with things like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-75&quot; title=&quot;XSLT-based &amp;quot;Schema Browser&amp;quot; in admin view&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-75&quot;&gt;&lt;del&gt;SOLR-75&lt;/del&gt;&lt;/a&gt; where we sometimes need the schema as XML, but othertimes we want to return it as plain text ... and to let the XmlResponseWriter start supporting useful params telling it what stylesheet from the xslt directory to include in the response (for client site styling using a stylesheet served from the solr server)&lt;/p&gt;

&lt;p&gt; &amp;#8211; but i like your idea of a RequestHandler/ResponseWriter better.&lt;/p&gt;

&lt;p&gt;we should consier deprecating admin/gettableFiles completley, and moving the info about what file are gettable directly into the init params for the GetAdminFileRequestHandler (where it can also support the content-type/direcotry stuff that i described)&lt;/p&gt;

&lt;p&gt;in that case, we&apos;d need to leave get-files.jsp where it is, so something still supports the legacy admin/gettableFiles list of files.&lt;/p&gt;</comment>
                            <comment id="12471426" author="ryantxu" created="Thu, 8 Feb 2007 18:28:03 +0000"  >&lt;p&gt;Posted an update to this patch.  It may be getting away from my original goal to get a RawRequestHandler committed soon... but oh well.&lt;/p&gt;

&lt;p&gt;This adds RequestHandlers for a bunch of admin thing that could (should) be spit back in the standard response writer format.&lt;/p&gt;

&lt;p&gt;some urls to check:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/admin/file&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/file&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/file?file=protwords.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/file?file=protwords.txt&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/file?file=schema.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/file?file=schema.xml&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/file?file=schema.xml&amp;amp;txt=true&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/file?file=schema.xml&amp;amp;txt=true&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/threads&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/threads&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/registry&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/registry&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/registry?wt=json&amp;amp;indent=true&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/registry?wt=json&amp;amp;indent=true&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/stats&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/stats&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/ping&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/ping&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/properties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/properties&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/properties?name=java.home&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/properties?name=java.home&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/logging&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/logging&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/logging?set=FINE&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/logging?set=FINE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To get these to display nicely, we would need an xls file and link to:&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/admin/stats?stylesheet=admin.xls&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/stats?stylesheet=admin.xls&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I like this direction because it moves solr away from the need for a JDK, removes a bunch of code from jsp scriptlets, and makes the admin info easily available to clients through JSON/xml etc.&lt;/p&gt;</comment>
                            <comment id="12473581" author="ryantxu" created="Fri, 16 Feb 2007 01:31:21 +0000"  >&lt;p&gt;this version of the patch is only the RawResponseWriter.  I am moving all the admin changes to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-162&quot; title=&quot;lucene index browser / admin helpers (Luke)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-162&quot;&gt;&lt;del&gt;SOLR-162&lt;/del&gt;&lt;/a&gt;.  For an example of the RawResponseWriter in use, see that patch.&lt;/p&gt;</comment>
                            <comment id="12474322" author="hossman" created="Tue, 20 Feb 2007 00:39:25 +0000"  >&lt;p&gt;revised version of Ryan&apos;s latest patch &amp;#8211; just adds some documentation.&lt;/p&gt;

&lt;p&gt;the patch is nice and clean and simple &amp;#8211; but without anything illustrating it&apos;s use i&apos;m hesitent to commit it.&lt;/p&gt;

&lt;p&gt;(i know a lot of the previous code in this issue got migrated to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-162&quot; title=&quot;lucene index browser / admin helpers (Luke)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-162&quot;&gt;&lt;del&gt;SOLR-162&lt;/del&gt;&lt;/a&gt;, but perhaps at least the GetAdminFileRequestHandler should be part of this patch so the basic functionality for getting a file and writing it&apos;s raw stream is commited all at once.&lt;/p&gt;</comment>
                            <comment id="12474328" author="ryantxu" created="Tue, 20 Feb 2007 01:24:45 +0000"  >&lt;p&gt;Thanks for looking at that.  Here is an updated version that includes GetAdminFileRequestHandler.java from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-162&quot; title=&quot;lucene index browser / admin helpers (Luke)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-162&quot;&gt;&lt;del&gt;SOLR-162&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This patch also deletes /admin/get-file.jsp and changes to /admin/index.jsp that point to this handler.  That is good because it moves away from some ugly jsp scriptlet code - it is bad because if someone just updates the .war file without updating solrconfig.xml they will get a 404.  &lt;/p&gt;

&lt;p&gt;You make the call on what part is appropriate to add at this time.  &lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
ryan&lt;/p&gt;

</comment>
                            <comment id="12492410" author="hossman" created="Fri, 27 Apr 2007 23:09:53 +0100"  >&lt;p&gt;I still haven&apos;t looked at Ryan&apos;s latest patch on this issue (from Feb!) but if the only issue is that /admin/get-file.jsp has been deleted so links on the admin screen won&apos;t work because they assume the new handler, then maybe the best way to solve this is:&lt;/p&gt;

&lt;p&gt;1) change the admin.jsp screen not to include links to either get-file.jsp or the new GetFile handler by default (a good idea since people might want to change the name of the handler) but if a gettableFiles section exists in the solrconfig, continue to link to get-files.jsp&lt;br/&gt;
2) document in the CHANGES recommending that people use the new GetFile handler and add links to it in an admin-extras.html file (since only they know which handler name they used)&lt;br/&gt;
3) makr get-files.jsp as heavily deprecated (so we can eventually get rid of it) and make it delegate to an anonymous on the fly created instance of the GetFile handler.&lt;/p&gt;</comment>
                            <comment id="12492592" author="ryantxu" created="Sun, 29 Apr 2007 20:17:54 +0100"  >&lt;p&gt;I think the best thing to do now is split this into two issues:  &lt;/p&gt;

&lt;p&gt;1. just the RawResponseWriter and the GetFile handler.  (you did review this way back in feb!)&lt;br/&gt;
2. Update the admin .jsp to use the new handlers wherever possible and provide a path to support path based request handlers going forward&lt;/p&gt;</comment>
                            <comment id="12554604" author="ryantxu" created="Thu, 27 Dec 2007 19:45:25 +0000"  >&lt;p&gt;resurrecting an old patch from February.  This uses the request handler framework to return raw admin files.&lt;/p&gt;</comment>
                            <comment id="12554610" author="ryantxu" created="Thu, 27 Dec 2007 21:13:24 +0000"  >&lt;p&gt;The ShowFileRequestHander should be added to the standard /admin request handlers in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-447&quot; title=&quot;Register standard AdminHandlers automatically.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-447&quot;&gt;&lt;del&gt;SOLR-447&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12554937" author="ryantxu" created="Sat, 29 Dec 2007 18:12:53 +0000"  >&lt;p&gt;Updated so that &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-447&quot; title=&quot;Register standard AdminHandlers automatically.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-447&quot;&gt;&lt;del&gt;SOLR-447&lt;/del&gt;&lt;/a&gt; AdminHandler automatically registers the ShowFile handler&lt;/p&gt;</comment>
                            <comment id="12627165" author="hossman" created="Sat, 30 Aug 2008 01:00:10 +0100"  >&lt;p&gt;adding some linked issues for posterity.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12403389">SOLR-740</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12389994">SOLR-493</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12385258">SOLR-447</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12358618">SOLR-85</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12362978">SOLR-162</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12372331" name="SOLR-142-RawResponseWriter.patch" size="17735" author="ryantxu" created="Sat, 29 Dec 2007 18:12:53 +0000"/>
                            <attachment id="12372267" name="SOLR-142-RawResponseWriter.patch" size="17030" author="ryantxu" created="Thu, 27 Dec 2007 19:45:25 +0000"/>
                            <attachment id="12351547" name="SOLR-142-RawResponseWriter.patch" size="18449" author="ryantxu" created="Tue, 20 Feb 2007 01:24:45 +0000"/>
                            <attachment id="12351545" name="SOLR-142-RawResponseWriter.patch" size="5269" author="hossman" created="Tue, 20 Feb 2007 00:39:25 +0000"/>
                            <attachment id="12351311" name="SOLR-142-RawResponseWriter.patch" size="3540" author="ryantxu" created="Fri, 16 Feb 2007 01:31:21 +0000"/>
                            <attachment id="12350681" name="SOLR-142-RawResponseWriter.patch" size="48364" author="ryantxu" created="Thu, 8 Feb 2007 18:27:06 +0000"/>
                            <attachment id="12350366" name="SOLR-142-RawResponseWriter.patch" size="16522" author="ryantxu" created="Mon, 5 Feb 2007 19:25:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Feb 2007 20:26:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxt53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>