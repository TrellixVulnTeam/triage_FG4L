<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:21:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-386/SOLR-386.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-386] Configurable SolrHighlighter implementation</title>
                <link>https://issues.apache.org/jira/browse/SOLR-386</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;It would be great if SolrCore allowed the highlighter class to be configurable.  A good way would be to add a &lt;ins&gt;class&lt;/ins&gt; attribute to the &amp;lt;highlighting&amp;gt; element in solrconfig.xml, similar to how the RequestHandler instance is initialized in SorCore.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380792">SOLR-386</key>
            <summary>Configurable SolrHighlighter implementation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klaasm">Mike Klaas</assignee>
                                    <reporter username="elilevine">Eli Levine</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 18:37:56 +0100</created>
                <updated>Fri, 10 May 2013 11:40:01 +0100</updated>
                            <resolved>Thu, 20 Mar 2008 22:39:07 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>highlighter</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12536293" author="ryantxu" created="Fri, 19 Oct 2007 18:54:30 +0100"  >&lt;p&gt;How is this different from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;The example solrconfig.xml in trunk includes:&lt;/p&gt;


&lt;p&gt;  &amp;lt;highlighting&amp;gt;&lt;br/&gt;
   &amp;lt;!-- Configure the standard fragmenter --&amp;gt;&lt;br/&gt;
   &amp;lt;!-- This could most likely be commented out in the &quot;default&quot; case --&amp;gt;&lt;br/&gt;
   &amp;lt;fragmenter name=&quot;gap&quot; class=&quot;org.apache.solr.highlight.GapFragmenter&quot; default=&quot;true&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;int name=&quot;hl.fragsize&quot;&amp;gt;100&amp;lt;/int&amp;gt;&lt;br/&gt;
    &amp;lt;/lst&amp;gt;&lt;br/&gt;
   &amp;lt;/fragmenter&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;!-- A regular-expression-based fragmenter (f.i., for sentence extraction) --&amp;gt;&lt;br/&gt;
   &amp;lt;fragmenter name=&quot;regex&quot; class=&quot;org.apache.solr.highlight.RegexFragmenter&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;!-- slightly smaller fragsizes work better because of slop --&amp;gt;&lt;br/&gt;
      &amp;lt;int name=&quot;hl.fragsize&quot;&amp;gt;70&amp;lt;/int&amp;gt;&lt;br/&gt;
      &amp;lt;!-- allow 50% slop on fragment sizes --&amp;gt;&lt;br/&gt;
      &amp;lt;float name=&quot;hl.regex.slop&quot;&amp;gt;0.5&amp;lt;/float&amp;gt; &lt;br/&gt;
      &amp;lt;!-- a basic sentence pattern --&amp;gt;&lt;br/&gt;
      &amp;lt;str name=&quot;hl.regex.pattern&quot;&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;-\w ,/\n\&amp;quot;&amp;#39;&amp;#93;&lt;/span&gt;&lt;/p&gt;
{20,200}
&lt;p&gt;&amp;lt;/str&amp;gt;&lt;br/&gt;
    &amp;lt;/lst&amp;gt;&lt;br/&gt;
   &amp;lt;/fragmenter&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;!-- Configure the standard formatter --&amp;gt;&lt;br/&gt;
   &amp;lt;formatter name=&quot;html&quot; class=&quot;org.apache.solr.highlight.HtmlFormatter&quot; default=&quot;true&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;str name=&quot;hl.simple.pre&quot;&amp;gt;&amp;lt;![CDATA&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;lt;em&amp;gt;&amp;#93;&lt;/span&gt;]&amp;gt;&amp;lt;/str&amp;gt;&lt;br/&gt;
     &amp;lt;str name=&quot;hl.simple.post&quot;&amp;gt;&amp;lt;![CDATA&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;lt;/em&amp;gt;&amp;#93;&lt;/span&gt;]&amp;gt;&amp;lt;/str&amp;gt;&lt;br/&gt;
    &amp;lt;/lst&amp;gt;&lt;br/&gt;
   &amp;lt;/formatter&amp;gt;&lt;br/&gt;
  &amp;lt;/highlighting&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12536295" author="elilevine" created="Fri, 19 Oct 2007 18:57:40 +0100"  >&lt;p&gt;This is different in that this request asks for the SolrHighlighter implementation itself to be pluggable, not just fragmenters and formatters.&lt;/p&gt;</comment>
                            <comment id="12536302" author="klaasm" created="Fri, 19 Oct 2007 19:09:27 +0100"  >&lt;p&gt;I suppose the real question is What behaviour are you trying to achieve by ripping out the whole highlighter implementation?  If you have custom code that does something completely different, it is probably easier to just call that code manually from your own request handler.&lt;/p&gt;</comment>
                            <comment id="12536348" author="elilevine" created="Fri, 19 Oct 2007 22:31:04 +0100"  >&lt;p&gt;This would be useful for projects with non-standard highlighting needs.  In our case, under certain circumstances we need to run a field through the highlighter multiple times using different fragmenters if previous runs did not produce any highlighted fragments.  Also, this would allow us to use SpanScorer for phrase highlighting, as it is instantiated differently from other scorers (needs CachingTokenFilter, etc.)&lt;/p&gt;

&lt;p&gt;Since the Solr highlighter is a plug-in, it seems natural to allow different implementations to be used, similar to what&apos;s allowed for request and update handlers and other configurable parts of SolrCore.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Eli&lt;/p&gt;</comment>
                            <comment id="12539478" author="pgwillia" created="Thu, 1 Nov 2007 22:29:01 +0000"  >&lt;p&gt;This patch allows highlighting to be plugged in.&lt;/p&gt;

&lt;p&gt;What I did:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Made SolrHighlighter an interface&lt;/li&gt;
	&lt;li&gt;The old SolrHighlighter became DefaultSolrHighlighter&lt;/li&gt;
	&lt;li&gt;Instantiate the highlighter in SolrCore based on what is in the solrconfig.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So to roll your own&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Implement SolrHighlighter (ie org.apache.solr.highlight.MySolrHighlighter)&lt;/li&gt;
	&lt;li&gt;find &amp;lt;highlighting&amp;gt; in solrconfig.xml and modify to &amp;lt;highlighting class=&quot;org.apache.solr.highlight.MySolrHighlighter&quot;&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This patch builds on changes made to trunk by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-281&quot; title=&quot;Search Components (plugins)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-281&quot;&gt;&lt;del&gt;SOLR-281&lt;/del&gt;&lt;/a&gt;.  This patch also contains these changes (meaning you should apply this patch to the trunk).  I get the feeling that this is probably not the right way to build a dependent patch, but I don&apos;t know any better.  Let me know if I should change how I built this patch.&lt;/p&gt;</comment>
                            <comment id="12541588" author="pgwillia" created="Sat, 10 Nov 2007 21:41:46 +0000"  >&lt;p&gt;Updated patch to work with recent changes made to SolrCore.  Should apply against a clean trunk again.  No further changes.&lt;/p&gt;</comment>
                            <comment id="12541967" author="pgwillia" created="Mon, 12 Nov 2007 22:37:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-281&quot; title=&quot;Search Components (plugins)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-281&quot;&gt;&lt;del&gt;SOLR-281&lt;/del&gt;&lt;/a&gt; was recently commited.  Formerly those changes were also included in this patch.  The changes made by that patch have been removed from this patch so &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-386&quot; title=&quot;Configurable SolrHighlighter implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-386&quot;&gt;&lt;del&gt;SOLR-386&lt;/del&gt;&lt;/a&gt;-SolrHighlighter.patch applies cleanly to trunk again.  Unless someone has comments, or an alternate implementation I don&apos;t foresee this patch changing again.&lt;/p&gt;</comment>
                            <comment id="12570929" author="pgwillia" created="Thu, 21 Feb 2008 02:33:50 +0000"  >&lt;p&gt;I&apos;d really like some feedback on this patch.  I&apos;ve just updated the patch based on changes that have been made to SolrHighlighter.java since revision 594314).&lt;/p&gt;

&lt;p&gt;Eli, does this meet your needs?  This is all I need in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-380&quot; title=&quot;There&amp;#39;s no way to convert search results into page-level hits of a &amp;quot;structured document&amp;quot;.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-380&quot;&gt;SOLR-380&lt;/a&gt; to plug in a custom highlighter.  I would really appreciate if this could be committed by someone so that I can stop worrying about keeping up with revisions.  It has been assigned to Mike Klass so his feedback in particular would be valuable to me.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Tricia&lt;/p&gt;</comment>
                            <comment id="12571153" author="elilevine" created="Thu, 21 Feb 2008 19:26:42 +0000"  >&lt;p&gt;I looked at the patch and it seems it does what I need, which is simply to allow the class of SolrHighlighter to be configurable.  Thanks, Tricia.&lt;/p&gt;

&lt;p&gt;Eli&lt;/p&gt;</comment>
                            <comment id="12573314" author="gsingers" created="Thu, 28 Feb 2008 15:15:28 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Made SolrHighlighter an interface&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why not just extend and override?  The general problem w/ interfaces is it gets hard to maintain back-compatibility in this kind of environment.  Another option would be to abstract SolrHighlighter to extend AbstractSolrHighlighter and then your new highlighter could just extend AbstractSolrHightlighter&lt;/p&gt;</comment>
                            <comment id="12574337" author="klaasm" created="Mon, 3 Mar 2008 03:04:15 +0000"  >&lt;p&gt;Hi Tricia,&lt;/p&gt;

&lt;p&gt;I&apos;m not sure that I would ever use SolrHighlighter overriding (if I had the need, I probably would just make a separate search component).  However, several people want this functionality and it has relatively low implementation/maintenance cost.&lt;/p&gt;

&lt;p&gt;There are a few things that need to be done to get the patch committed.  First, the unnecessary whitespace changes in SolrCore shouldn&apos;t be in the diff (it makes it really hard to see the changes, and might make it hard to apply/revert).  Also, I&apos;m skeptical of using interfaces for this type of thing, for maintenance reasons.  Perhaps we could move to one of the approaches that Grant suggested?&lt;/p&gt;

&lt;p&gt;Thanks again for the contribution, and sorry it took so long&lt;/p&gt;
</comment>
                            <comment id="12575534" author="pgwillia" created="Thu, 6 Mar 2008 02:09:39 +0000"  >&lt;p&gt;OK.  So I think I fixed the whitespace problem.&lt;/p&gt;

&lt;p&gt;Thanks for explaining the problem with interfaces &amp;#8211; that makes sense now.  I assume that EventListener and RequestHandler are interfaces because they&apos;ve been thought long and hard about and are not going to change?&lt;/p&gt;

&lt;p&gt;My first try at the patch was just to include the public methods, which are the ones you (MIke Klaas) list:&lt;br/&gt;
&amp;gt; .initialize(Config)&lt;br/&gt;
&amp;gt; .isHighlightEnabled(SolrParams)&lt;br/&gt;
&amp;gt; .doHighlighting(...)&lt;br/&gt;
&amp;gt; .getHighlightFields(...) &lt;/p&gt;

&lt;p&gt;I discovered that the unit tests call the formatters and fragmenters directly so in the interface version I had made public get methods for these.  Now that we&apos;re using an abstract class I am able to just include these as is - so no changes to HighlighterTest this time.  But speaking of unit tests... Anecdotally I know that the SolrCore changes allow the highlighter to be configured (my custom highlighter).  I wrote HighlighterConfigTest as a unit test for this functionality.&lt;/p&gt;

&lt;p&gt;I decided to leave the default implementation of isHighlightingEnabled(SolrParams), and getHighlightFields(...) in the abstract class because both methods deal with reading parameters.  I can&apos;t think of a use case of a highlighter that wouldn&apos;t use this or at worst ignore/override this method.  Is this a reasonable decision?&lt;/p&gt;

&lt;p&gt;I wasn&apos;t sure what to do with the logger, so I left it in the AbstractSolrHighlighter.  This decision is based on the example of UpdateHandler. &lt;/p&gt;

&lt;p&gt;Hmm... I just realized that naming the abstraction of SolrHighlighter AbstractSolrHighlighter causes problems all over the code when you want your custom highlighter to plugin.  I think the path of least resistance is to call the abstract class SolrHighlighter and the existing implementation DefaultSolrHighlighter.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12577163" author="klaasm" created="Mon, 10 Mar 2008 20:16:22 +0000"  >&lt;p&gt;Tricia: thanks for the changes.  I think that your decisions make sense--I&apos;ll be sure to followup by the end of the week.&lt;/p&gt;</comment>
                            <comment id="12580955" author="klaasm" created="Thu, 20 Mar 2008 22:39:07 +0000"  >&lt;p&gt;Commited in r639490.  Thanks Tricia!&lt;/p&gt;</comment>
                            <comment id="12589282" author="hossman" created="Wed, 16 Apr 2008 00:28:41 +0100"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Currently marked (&quot;Resolved&quot; or &quot;Closed&quot;) and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;&quot;Affects Versions&quot; included 1.3&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 8 issues found was set to 1.3 (1.3 has not yet been released, if an issue is already fixed, and it affected 1.3 then the fix will be in 1.3)&lt;/p&gt;

&lt;p&gt;Email notification was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this&lt;br/&gt;
(hopefully) unique string:  20080415hossman1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12372788">SOLR-281</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12377216" name="SOLR-386-SolrHighlighter.patch" size="57618" author="pgwillia" created="Thu, 6 Mar 2008 02:09:39 +0000"/>
                            <attachment id="12376080" name="SOLR-386-SolrHighlighter.patch" size="56438" author="pgwillia" created="Thu, 21 Feb 2008 02:33:50 +0000"/>
                            <attachment id="12369398" name="SOLR-386-SolrHighlighter.patch" size="40052" author="pgwillia" created="Mon, 12 Nov 2007 22:37:24 +0000"/>
                            <attachment id="12369313" name="SOLR-386-SolrHighlighter.patch" size="98780" author="pgwillia" created="Sat, 10 Nov 2007 21:41:46 +0000"/>
                            <attachment id="12368849" name="SOLR-386-SolrHighlighter.patch" size="98153" author="pgwillia" created="Thu, 1 Nov 2007 22:29:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Oct 2007 17:54:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7209</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxrnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>