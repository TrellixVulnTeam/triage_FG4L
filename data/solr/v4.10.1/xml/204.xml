<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:25:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-204/SOLR-204.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-204] Let solrconfig.xml configure the SolrDispatchFilter to handle /select</title>
                <link>https://issues.apache.org/jira/browse/SOLR-204</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The major reason to make everythign use the SolrDispatchFilter is that we would have consistent error handling.  Currently, &lt;/p&gt;

&lt;p&gt;SolrServlet spits back errors using:&lt;br/&gt;
 PrintWriter writer = response.getWriter();&lt;br/&gt;
 writer.write(msg);&lt;/p&gt;

&lt;p&gt;and the SolrDispatchFilter spits them back using:&lt;br/&gt;
 res.sendError( code, ex.getMessage() );&lt;/p&gt;

&lt;p&gt;Using &quot;sendError&quot; lets the servlet container format the code so it shows up ok in a browser.  Without it, you may have to view source to see the error.&lt;/p&gt;

&lt;p&gt;Aditionaly, SolrDispatchFilter is more decerning about including stack trace.  It only includes a stack trace of 500 or an unknown response code.&lt;/p&gt;

&lt;p&gt;Eventually, the error should probably be formatted in the requested format - &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-141&quot; title=&quot;Errors/Exceptions should be formated by ResponseWriter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-141&quot;&gt;&lt;del&gt;SOLR-141&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12366677">SOLR-204</key>
            <summary>Let solrconfig.xml configure the SolrDispatchFilter to handle /select</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Apr 2007 22:40:39 +0100</created>
                <updated>Fri, 10 May 2013 11:39:00 +0100</updated>
                            <resolved>Sun, 29 Apr 2007 21:55:21 +0100</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12487111" author="ryantxu" created="Thu, 5 Apr 2007 22:50:18 +0100"  >&lt;p&gt;this removes the &quot;handle-select&quot; init param from web.xml and adds:&lt;/p&gt;

&lt;p&gt;  &amp;lt;requestDispatcher handleSelect=&quot;true&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;to solrconfig.xml&lt;/p&gt;

&lt;p&gt;The one thing I would maybe change is to make the config more of a tree then a list, maybe we should have:&lt;/p&gt;

&lt;p&gt;  &amp;lt;requestDispatcher handleSelect=&quot;true&quot; &amp;gt;&lt;br/&gt;
    &amp;lt;requestParsers enableRemoteStreaming=&quot;false&quot; multipartUploadLimitInKB=&quot;2048&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;/requestDispatcher&amp;gt;&lt;/p&gt;

&lt;p&gt;rather then:&lt;/p&gt;

&lt;p&gt;&amp;lt;requestDispatcher handleSelect=&quot;true&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;requestParsers enableRemoteStreaming=&quot;false&quot; multipartUploadLimitInKB=&quot;2048&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;This would change a configuration that has been added since 1.1&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - - - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This patch also cleans up reading enableRemoteStreaming and multipartUploadLimitInKB, when i wrote it i did not know about the much cleaner:&lt;/p&gt;

&lt;p&gt;this.enableRemoteStreams = SolrConfig.config.getBool( &lt;br/&gt;
        &quot;requestParsers/@enableRemoteStreaming&quot;, false ); &lt;/p&gt;
</comment>
                            <comment id="12492147" author="ryantxu" created="Fri, 27 Apr 2007 00:01:51 +0100"  >&lt;p&gt;Updated version.  This modifies solrconfig so it has a &quot;requestDispatcher&quot; section and moves requestParsers into that group.&lt;/p&gt;

&lt;p&gt;  &amp;lt;requestDispatcher handleSelect=&quot;true&quot; &amp;gt;&lt;br/&gt;
    &amp;lt;&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (--Make sure your system has some authentication before enabling remote streaming) not found.&lt;/span&gt;  --&amp;gt;&lt;br/&gt;
    &amp;lt;requestParsers enableRemoteStreaming=&quot;false&quot; multipartUploadLimitInKB=&quot;2048&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;/requestDispatcher&amp;gt;&lt;/p&gt;

&lt;p&gt;this means anyone using &apos;enableRemoteStreaming&apos; since solr1.1 will need to modify solrconfig.xml.  &lt;/p&gt;</comment>
                            <comment id="12492505" author="yseeley@gmail.com" created="Sat, 28 Apr 2007 19:17:30 +0100"  >&lt;p&gt;I wanted to try this out to see what sendError() output looks like, but the patch isn&apos;t applying cleanly.&lt;/p&gt;

&lt;p&gt;$ patch -p0 &amp;lt; c:/dl/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-204&quot; title=&quot;Let solrconfig.xml configure the SolrDispatchFilter to handle /select&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-204&quot;&gt;&lt;del&gt;SOLR-204&lt;/del&gt;&lt;/a&gt;*&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file src/test/test-files/solr/conf/solrconfig.xml&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file src/webapp/WEB-INF/web.xml&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file src/webapp/src/org/apache/solr/servlet/SolrDispatchFilter.java&lt;br/&gt;
Hunk #1 FAILED at 56.&lt;br/&gt;
1 out of 1 hunk FAILED &amp;#8211; saving rejects to file src/webapp/src/org/apache/solr/&lt;br/&gt;
servlet/SolrDispatchFilter.java.rej&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file src/webapp/src/org/apache/solr/servlet/SolrRequestParsers.java&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file example/solr/conf/solrconfig.xml&lt;br/&gt;
Hunk #1 succeeded at 231 (offset 8 lines).&lt;/p&gt;</comment>
                            <comment id="12492507" author="ryantxu" created="Sat, 28 Apr 2007 19:33:25 +0100"  >&lt;p&gt;applies cleanly with trunk&lt;/p&gt;</comment>
                            <comment id="12492508" author="ryantxu" created="Sat, 28 Apr 2007 19:37:08 +0100"  >&lt;p&gt;sendError lets the web app decide how to format the response body.  Typically they put HTML with the status code, with a footer saying the &quot;Jetty&quot; or &quot;Resin&quot;&lt;/p&gt;

&lt;p&gt;This is what you get to configure with:&lt;/p&gt;

&lt;p&gt;  &amp;lt;error-page&amp;gt;&lt;br/&gt;
    &amp;lt;exception-type&amp;gt;java.lang.Exception&amp;lt;/exception-type&amp;gt;&lt;br/&gt;
    &amp;lt;location&amp;gt;/error&amp;lt;/location&amp;gt;&lt;br/&gt;
  &amp;lt;/error-page&amp;gt;&lt;br/&gt;
  &amp;lt;error-page&amp;gt;&amp;lt;error-code&amp;gt;404&amp;lt;/error-code&amp;gt;&amp;lt;location&amp;gt;/error&amp;lt;/location&amp;gt;&amp;lt;/error-page&amp;gt;&lt;br/&gt;
etc&lt;/p&gt;</comment>
                            <comment id="12492511" author="yseeley@gmail.com" created="Sat, 28 Apr 2007 20:40:58 +0100"  >&lt;p&gt;OK cool, for something like an undefined field, it looks fine:&lt;br/&gt;
&quot;undefined field catdsfgsdg&quot;&lt;/p&gt;

&lt;p&gt;But for something like a query parsing error, the only pointer to &lt;b&gt;what&lt;/b&gt; the error is is in the stack trace, and you don&apos;t get that back.  You just get: &quot;Error parsing Lucene query&quot;&lt;/p&gt;

&lt;p&gt;The logs show:&lt;br/&gt;
SEVERE: org.apache.lucene.queryParser.ParseException: Cannot parse &apos;foo:&lt;b&gt;&apos;: &apos;&lt;/b&gt;&apos; or &apos;?&apos; not allowed as first character in WildcardQuery&lt;br/&gt;
        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:149)&lt;br/&gt;
        at org.apache.solr.search.QueryParsing.parseQuery(QueryParsing.java:94)&lt;br/&gt;
        at org.apache.solr.request.StandardRequestHandler.handleRequestBody(StandardRequestHandler.java:85)&lt;br/&gt;
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:77)&lt;/p&gt;

&lt;p&gt;Hmmm, but I think this is an exception issue:&lt;/p&gt;

&lt;p&gt;In QueryParsing.java:&lt;br/&gt;
    } catch (ParseException e) &lt;/p&gt;
{
      SolrCore.log(e);
      throw new SolrException(400,&quot;Error parsing Lucene query&quot;,e);
    }

&lt;p&gt;should probably be something more like:&lt;br/&gt;
  throw new SolrException(400,&quot;Query parsing error: &quot; + e.getMessage() ,e);&lt;/p&gt;</comment>
                            <comment id="12492512" author="ryantxu" created="Sat, 28 Apr 2007 20:48:15 +0100"  >
&lt;p&gt;&amp;gt; &lt;br/&gt;
&amp;gt; should probably be something more like:&lt;br/&gt;
&amp;gt;   throw new SolrException(400,&quot;Query parsing error: &quot; + e.getMessage() ,e);&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;Yes, the other change is that errors for RequestDispatcher only print the stack trace if it is &amp;gt;=500, 400 (bad request) assumes the message will contain a user useful response.  &lt;/p&gt;
</comment>
                            <comment id="12492600" author="ryantxu" created="Sun, 29 Apr 2007 21:55:21 +0100"  >&lt;p&gt;added in:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=533558&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=533558&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12356462" name="SOLR-204-HandleSelect.patch" size="5566" author="ryantxu" created="Sat, 28 Apr 2007 19:33:25 +0100"/>
                            <attachment id="12356373" name="SOLR-204-HandleSelect.patch" size="5752" author="ryantxu" created="Fri, 27 Apr 2007 00:01:51 +0100"/>
                            <attachment id="12355047" name="SOLR-204-HandleSelect.patch" size="4809" author="ryantxu" created="Thu, 5 Apr 2007 22:50:18 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Apr 2007 18:17:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxsrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>