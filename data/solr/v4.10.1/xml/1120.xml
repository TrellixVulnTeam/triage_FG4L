<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:15:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1120/SOLR-1120.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1120] Simplify EntityProcessor API</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1120</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Writing an EntityProcessor is deceptively complex. There are so many gotchas.&lt;/p&gt;

&lt;p&gt;I propose the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Extract out the Transformer application logic from EntityProcessor and add it to DocBuilder. Then EntityProcessor do not need to call applyTransformer or know about rowIterator and getFromRowCache() methods.&lt;/li&gt;
	&lt;li&gt;Change the meaning of EntityProcessor#destroy to be called on end of parent&apos;s row &amp;#8211; Right now init is called once per parent row but destroy actually means the end of import. In fact, there is no correct way for an entity processor to do clean up right now. Most do clean up when returning null (end of data) but with the introduction of $skipDoc, a transformer can return $skipDoc and the entity processor will never get a chance to clean up for the current init.&lt;/li&gt;
	&lt;li&gt;EntityProcessor will use the EventListener API to listen for import end. This should be used by EntityProcessor to do a final cleanup.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12423086">SOLR-1120</key>
            <summary>Simplify EntityProcessor API</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalinmangar">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Apr 2009 08:19:05 +0100</created>
                <updated>Tue, 10 Nov 2009 15:50:36 +0000</updated>
                            <resolved>Thu, 11 Jun 2009 13:58:51 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12700085" author="fergus" created="Fri, 17 Apr 2009 09:45:38 +0100"  >&lt;p&gt;Good idea. Dont know if you are interested in the following.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Further to extracting out the Transformer application logic, I was wondering if every entity attribute read should automatically be processed by replaceTokens. Is there any ligitimate place where one would want to disallow replaceTokens? The following snippet of code is repeated far too many times; but is important if DIH is to provide simple predictable behaviour.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    s = context.getEntityAttribute(CHANGELIST_OMIT);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (s != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) s = resolver.replaceTokens(s);

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;The regexp transformer now has several combinations of mutually exclusive attributes. It would be nice to check the attributes for nonsensical combinations. However given that the transformer is invoked for every row such checking code could be a nasty overhead. I dont know how to sort this, but somehow we need to catch the first invocation of a fields transformer and allow far more detailed checking of the attributes&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12700087" author="noble.paul" created="Fri, 17 Apr 2009 09:50:38 +0100"  >&lt;blockquote&gt;&lt;p&gt;Is there any ligitimate place where one would want to disallow replaceTokens?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes . the XPathEntityProcessor uses it directly just to know what are the variables in the url so that it can read them and store . probably we can  add amethod getEntityAttributeResolved() to get the resolved value&lt;/p&gt;</comment>
                            <comment id="12700432" author="noble.paul" created="Sat, 18 Apr 2009 09:36:20 +0100"  >&lt;p&gt;A new class added EntityProcessorWrapper which does all the transformer related actions. EntityProcessors are now agnostic of Transformers alltogether&lt;/p&gt;</comment>
                            <comment id="12700681" author="shalinmangar" created="Mon, 20 Apr 2009 08:21:32 +0100"  >&lt;p&gt;Thanks Noble.&lt;/p&gt;

&lt;p&gt;This patch has the following changes on top of Noble&apos;s patch:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Added EntityProcessor#close method which will be called at the end of import. This is simpler than using EventListeners.&lt;/li&gt;
	&lt;li&gt;Fixed a bug with calling destroy in the wrong place in DataConfig&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;All tests pass. I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12700684" author="shalinmangar" created="Mon, 20 Apr 2009 08:35:11 +0100"  >&lt;p&gt;Another patch which adds a new method to Context:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Context#getResolvedEntityAttribute(String) which returns the resolved value of the entity attribute&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="12700685" author="shalinmangar" created="Mon, 20 Apr 2009 08:37:21 +0100"  >&lt;p&gt;Committed revision 766608.&lt;/p&gt;

&lt;p&gt;Thanks Noble!&lt;/p&gt;</comment>
                            <comment id="12701845" author="noble.paul" created="Thu, 23 Apr 2009 09:34:30 +0100"  >&lt;p&gt;futher simplifying DocBuilder&lt;/p&gt;</comment>
                            <comment id="12703215" author="shalinmangar" created="Mon, 27 Apr 2009 17:53:18 +0100"  >&lt;p&gt;Same as Noble&apos;s patch but DocWrapper extends SolrInputDocument now.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12703216" author="shalinmangar" created="Mon, 27 Apr 2009 17:56:49 +0100"  >&lt;p&gt;Committed revision 769058.&lt;/p&gt;

&lt;p&gt;Thanks Noble!&lt;/p&gt;</comment>
                            <comment id="12715581" author="shalinmangar" created="Tue, 2 Jun 2009 17:55:08 +0100"  >&lt;p&gt;The initial commit for this issue broke the Debug functionality.&lt;/p&gt;

&lt;p&gt;Refer to &lt;a href=&quot;http://www.lucidimagination.com/search/document/42c345a606820f9/npe_in_dataimport_debuglogger_peekstack_dih_development_console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.lucidimagination.com/search/document/42c345a606820f9/npe_in_dataimport_debuglogger_peekstack_dih_development_console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12715830" author="noble.paul" created="Wed, 3 Jun 2009 07:07:16 +0100"  >&lt;p&gt;committed revision:781272&lt;/p&gt;

&lt;p&gt;thanks Steffen Baumgart&lt;/p&gt;</comment>
                            <comment id="12717220" author="noble.paul" created="Mon, 8 Jun 2009 11:13:20 +0100"  >&lt;p&gt;this has broken some features in XPathEntityProcessor&lt;/p&gt;

&lt;p&gt;if a field is added by a transformer then XPathEntityProcessor is unable to use it in common fields .Features like $nextUrl , $hasMore cannot work&lt;/p&gt;</comment>
                            <comment id="12718355" author="noble.paul" created="Thu, 11 Jun 2009 09:49:20 +0100"  >&lt;p&gt;a new method added to EntityProcessor (postTransform) . this can be used by the EntityProcessor implementations to get a callback after the transformations are done&lt;/p&gt;</comment>
                            <comment id="12718441" author="shalinmangar" created="Thu, 11 Jun 2009 13:58:51 +0100"  >&lt;p&gt;Committed revision 783750.&lt;/p&gt;

&lt;p&gt;Thanks Noble!&lt;/p&gt;</comment>
                            <comment id="12775479" author="gsingers" created="Tue, 10 Nov 2009 15:50:36 +0000"  >&lt;p&gt;Bulk close Solr 1.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410370" name="SOLR-1120.patch" size="2384" author="noble.paul" created="Thu, 11 Jun 2009 09:49:20 +0100"/>
                            <attachment id="12409733" name="SOLR-1120.patch" size="1260" author="noble.paul" created="Wed, 3 Jun 2009 07:05:02 +0100"/>
                            <attachment id="12406539" name="SOLR-1120.patch" size="9495" author="shalinmangar" created="Mon, 27 Apr 2009 17:53:18 +0100"/>
                            <attachment id="12406421" name="SOLR-1120.patch" size="11412" author="noble.paul" created="Sat, 25 Apr 2009 06:42:02 +0100"/>
                            <attachment id="12406203" name="SOLR-1120.patch" size="12627" author="noble.paul" created="Thu, 23 Apr 2009 09:34:30 +0100"/>
                            <attachment id="12405903" name="SOLR-1120.patch" size="41304" author="shalinmangar" created="Mon, 20 Apr 2009 08:35:11 +0100"/>
                            <attachment id="12405902" name="SOLR-1120.patch" size="38810" author="shalinmangar" created="Mon, 20 Apr 2009 08:21:32 +0100"/>
                            <attachment id="12405889" name="SOLR-1120.patch" size="33264" author="noble.paul" created="Mon, 20 Apr 2009 05:31:51 +0100"/>
                            <attachment id="12405839" name="SOLR-1120.patch" size="27360" author="noble.paul" created="Sat, 18 Apr 2009 09:36:20 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Apr 2009 08:45:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxn6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>