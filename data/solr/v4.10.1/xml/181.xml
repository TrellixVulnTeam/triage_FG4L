<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:19:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-181/SOLR-181.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-181] Support for &quot;Required&quot; field Property</title>
                <link>https://issues.apache.org/jira/browse/SOLR-181</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In certain situations, it can be helpful to require every document in your index has a value for a given field.  While ideally the indexing client(s) should be responsible enough to add all necessary fields, this patch allows it to be enforced in the Solr schema, by adding a required property to a field entry.  For example, with this in the schema:&lt;/p&gt;

&lt;p&gt;   &amp;lt;field name=&quot;name&quot; type=&quot;nametext&quot; indexed=&quot;true&quot; stored=&quot;true&quot; required=&quot;true&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;A request to index a document without a name field will result in this response:&lt;/p&gt;

&lt;p&gt;&amp;lt;result status=&quot;1&quot;&amp;gt;org.apache.solr.core.SolrException: missing required fields: name &lt;br/&gt;
(and then, of course, the stack trace)&lt;br/&gt;
&amp;lt;/result&amp;gt;&lt;/p&gt;

&lt;p&gt;The meat of this patch is that DocumentBuilder.getDoc() throws a SolrException if not all required fields have values; this may not work well as is with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-139&quot; title=&quot;Support updateable/modifiable documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-139&quot;&gt;&lt;del&gt;SOLR-139&lt;/del&gt;&lt;/a&gt;, Support updateable/modifiable documents, and may have to be changed depending on that issue&apos;s final disposition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12364056">SOLR-181</key>
            <summary>Support for &quot;Required&quot; field Property</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="gludington">Greg Ludington</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Mar 2007 06:04:03 +0000</created>
                <updated>Wed, 16 Apr 2008 00:44:45 +0100</updated>
                            <resolved>Mon, 30 Apr 2007 01:41:57 +0100</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                    <component>update</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12477742" author="gludington" created="Sun, 4 Mar 2007 06:32:10 +0000"  >&lt;p&gt;This patch allows a per-field &quot;required&quot; property that can be used to require clients to include certain fields to submit to the index.&lt;/p&gt;

&lt;p&gt;With this in the index:&lt;br/&gt;
  &amp;lt;field name=&quot;name&quot; type=&quot;nametext&quot; indexed=&quot;true&quot; stored=&quot;true&quot; required=&quot;true&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;A document submitted without a name field will throw a SolrException in DocumentBuilder.getDoc() resulting in this sort of message being sent back to the client:&lt;/p&gt;

&lt;p&gt;&amp;lt;result status=&quot;1&quot;&amp;gt;org.apache.solr.core.SolrException: missing required fields:&lt;br/&gt;
name&lt;/p&gt;

&lt;p&gt;Issues with the patch as submitted:&lt;/p&gt;

&lt;p&gt;1) The rule is enforced, and the Exception thrown, from DocumentBuilder.getDoc().  Since this area may change in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-139&quot; title=&quot;Support updateable/modifiable documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-139&quot;&gt;&lt;del&gt;SOLR-139&lt;/del&gt;&lt;/a&gt;, this patch may need to be adjusted depending on the final result of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-139&quot; title=&quot;Support updateable/modifiable documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-139&quot;&gt;&lt;del&gt;SOLR-139&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
2) Fields with defaultValues are implicitly required, though currently this patch does &lt;b&gt;not&lt;/b&gt; automatically make the uniqueKey field required.  It may make sense to do this; however, there seems to be some debate on the mailing lists about this, so It is commented out with a //TODO for now.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-172&quot; title=&quot;add doc without uniqueKey field causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-172&quot;&gt;&lt;del&gt;SOLR-172&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
3) The RequiredFieldsTest case uses its own schema file, as otherwise all other tests would have to be retrofitted to add these required fields in their submissions, and all future test writers would have to keep this in mind, as well.&lt;/p&gt;</comment>
                            <comment id="12477743" author="gludington" created="Sun, 4 Mar 2007 06:36:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-139&quot; title=&quot;Support updateable/modifiable documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-139&quot;&gt;&lt;del&gt;SOLR-139&lt;/del&gt;&lt;/a&gt; makes documents modifiable, instead of all-or-nothing added, which has implications for restricting fields.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-172&quot; title=&quot;add doc without uniqueKey field causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-172&quot;&gt;&lt;del&gt;SOLR-172&lt;/del&gt;&lt;/a&gt; covers similar ground specific to the uniqueKey field.&lt;/p&gt;</comment>
                            <comment id="12492524" author="ryantxu" created="Sun, 29 Apr 2007 00:24:12 +0100"  >&lt;p&gt;Finally got a chance to look at this.  It looks good.  I made a few modifications:&lt;/p&gt;

&lt;p&gt;1. changed tabs to spaces&lt;br/&gt;
2. Added javadoc comments to make it clear that RequiredFields must contain all fieldsWithDefaultValues&lt;br/&gt;
3. The error now contains the documents uniqueKey&lt;br/&gt;
4. moved the test to o.a.s.schema&lt;br/&gt;
5. I added a non-final flag to SchemaField to say if the field is required.&lt;br/&gt;
6. Modified IndexSchema.java to set the uniqueKey as required &lt;b&gt;unless&lt;/b&gt; it is specified as required=&quot;false&quot; in the schema&lt;br/&gt;
7. Added required=&quot;true&quot; to the example schema.xml &lt;br/&gt;
8. Added required=&quot;false&quot; to the test schema.xml (one test does not include it)&lt;/p&gt;

&lt;p&gt;As a note to anyone else looking at the change log, Greg&apos;s patch also modifies AbstractSolrTestCase and TestHarness to be able to check what status is expected from checkUpdateU&lt;/p&gt;


&lt;p&gt;I think this offers a good solution to the (mis)feature that you could have a null uniqueKey.  This patch lets you have a null uniqueKey, but you have to configure it.&lt;/p&gt;
</comment>
                            <comment id="12492532" author="yseeley@gmail.com" created="Sun, 29 Apr 2007 01:37:04 +0100"  >&lt;p&gt;Haven&apos;t looked at the code,  but the description looks fine.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12492616" author="ryantxu" created="Mon, 30 Apr 2007 01:41:57 +0100"  >&lt;p&gt;commited&lt;/p&gt;</comment>
                            <comment id="12589312" author="hossman" created="Wed, 16 Apr 2008 00:44:45 +0100"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked (&quot;Resolved&quot; or &quot;Closed&quot;) and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 39 issues found was set to 1.2, email notification&lt;br/&gt;
was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this&lt;br/&gt;
(hopefully) unique string: 20080415hossman2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12363513">SOLR-172</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12361944">SOLR-139</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12356467" name="solr-181-required-fields.patch" size="47970" author="ryantxu" created="Sun, 29 Apr 2007 00:24:12 +0100"/>
                            <attachment id="12352538" name="solr-181-required-fields.patch" size="38317" author="gludington" created="Sun, 4 Mar 2007 06:32:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Apr 2007 23:24:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxswf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21001</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>