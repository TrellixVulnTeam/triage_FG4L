<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:19:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-477/SOLR-477.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-477] AnalysisRequestHandler</title>
                <link>https://issues.apache.org/jira/browse/SOLR-477</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Being able to programmatically access tokenization information can be quite useful not only in Solr, but in other NLP applications where token vectors are necessary.&lt;/p&gt;

&lt;p&gt;The patch to follow creates an AnalysisRequestHandler which processes a document through the analysis process and returns a response filled with tokens, their offsets, position inc., type and value.&lt;/p&gt;

&lt;p&gt;Patch also adds some character array processing to Xml and adds Token handling to XMLWriter.&lt;/p&gt;

&lt;p&gt;I only implemented Xml output, as I don&apos;t know JSON or the other types.  If someone else is so motivated, they can add those.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12388407">SOLR-477</key>
            <summary>AnalysisRequestHandler</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Feb 2008 04:19:24 +0000</created>
                <updated>Wed, 20 Feb 2008 04:07:10 +0000</updated>
                            <resolved>Wed, 20 Feb 2008 04:07:10 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12567949" author="yseeley@gmail.com" created="Tue, 12 Feb 2008 04:27:33 +0000"  >&lt;p&gt;I&apos;ve been meaning to create a handler like this...&lt;br/&gt;
I&apos;m not sure that Token should be directly added to XMLWriter and friends though... seems more flexible for the handler to handle the transformation from token(s) to more primitive types.  Or did you actually add a &amp;lt;token&amp;gt; tag to the xml?&lt;/p&gt;</comment>
                            <comment id="12567951" author="gsingers" created="Tue, 12 Feb 2008 04:28:25 +0000"  >&lt;p&gt;First draft at a simple patch to add an AnalysisRequestHandler to Solr.  &lt;/p&gt;

&lt;p&gt;Adds in an example set of docs under examples/exampleAnalysis along with a quick and dirty post.sh script to run the analysis.&lt;/p&gt;

&lt;p&gt;Adds support into XmlWriter and TextResponseWriter, although TextResponseWriter currently does nothing when encountering a Token.&lt;/p&gt;

&lt;p&gt;Unit tests show sample of how to invoke, but in a nutshell it works more or less like the &amp;lt;add&amp;gt; functionality.  Each field in a &amp;lt;doc&amp;gt; is tokenized according to the analysis semantics for that field.  Payloads are currently ignored.  I suppose we could UUEncode the byte array or something, but, since Solr doesn&apos;t currently support payloads, not much point in outputting them just yet.&lt;/p&gt;</comment>
                            <comment id="12567954" author="hossman" created="Tue, 12 Feb 2008 04:47:29 +0000"  >&lt;p&gt;i&apos;m with yonik - let&apos;s stick with primitive types in the response.  I&apos;d like to avoid ever having to break the ResponseWriter contract unless absolutely neccessary.&lt;/p&gt;

&lt;p&gt;Grant quick question because i can&apos;t tell by skimming the patch: is there any information currently returned by analysis.jsp that isn&apos;t returned by this handler?  if not, we should consider adding it so that that JSP can go the way of hte DODO like the other JSPs are.&lt;/p&gt;
</comment>
                            <comment id="12567955" author="ryantxu" created="Tue, 12 Feb 2008 04:50:41 +0000"  >
&lt;p&gt;&amp;gt; I&apos;ve been meaning to create a handler like this...&lt;br/&gt;
&amp;gt; I&apos;m not sure that Token should be directly added to XMLWriter and friends though... seems more flexible for the handler to handle the transformation from token(s) to more primitive types.  Or did you actually add a &amp;lt;token&amp;gt; tag to the xml?&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;I&apos;ve been using something similar &amp;#8211; but it is implemented as a SearchComponent &amp;#8211; it adds another bit to the response like highlighting does. &lt;/p&gt;

&lt;p&gt;If possible, i think we should avoid custom XMLWriter implementations... the NamedList suff is a bit akward, but having stuff work in JSON/ruby/etc is a big deal&lt;/p&gt;</comment>
                            <comment id="12567956" author="gsingers" created="Tue, 12 Feb 2008 04:57:21 +0000"  >&lt;p&gt;OK, I will update tomorrow w/ primitives instead of the token tag.  I admit I don&apos;t fully understand the interplay between the other writers (JSON, etc.) so help would be appreciated there.&lt;/p&gt;

&lt;p&gt;As for a SearchComponent piece, I&apos;d like to hear more.  Does the SearchComponent  piece handle ContentStreams?  That is, could I just send my &amp;lt;add&amp;gt;...&amp;lt;/add&amp;gt; to it and it would spit out the tokens?  On the query side of things, I think it would be useful to see how the query is analyzed, so that makes sense in a SearchComponent.  Perhaps we can find common code?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Grant quick question because i can&apos;t tell by skimming the patch: is there any information currently returned by analysis.jsp that isn&apos;t returned by this handler? if not, we should consider adding it so that that JSP can go the way of hte DODO like the other JSPs are.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It only outputs the final token result, so you wouldn&apos;t be able to do the intermediate code output.  Also, I think the JSP does some fancy sorting for positions, etc.  I leave that up to the application.  But, yes, I did have a look at it and originally started using some of the code, then went away from it once I realized I didn&apos;t care whether it was a regular Analyzer or a TokenChain.&lt;/p&gt;</comment>
                            <comment id="12567960" author="ryantxu" created="Tue, 12 Feb 2008 05:20:12 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I admit I don&apos;t fully understand the interplay between the other writers (JSON, etc.) so help would be appreciated there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;essentially the types supported by TextResponseWriter are automatically supported by the standard writers.  Check line 109 writeVal() in: &lt;a href=&quot;http://svn.apache.org/repos/asf/lucene/solr/trunk/src/java/org/apache/solr/request/TextResponseWriter.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/lucene/solr/trunk/src/java/org/apache/solr/request/TextResponseWriter.java&lt;/a&gt;&lt;/p&gt;


&lt;blockquote&gt;
&lt;p&gt;As for a SearchComponent piece, I&apos;d like to hear more.  Does the SearchComponent  piece handle ContentStreams?  That is, could I just send my &amp;lt;add&amp;gt;...&amp;lt;/add&amp;gt; to it and it would spit out the tokens?  On the query side of things, I think it would be useful to see how the query is analyzed, so that makes sense in a SearchComponent.  Perhaps we can find common code?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No ContentStreams in the version I&apos;m working with.  I am analyzing stored fields so the client can link directly to a valid &apos;filter&apos;.  To see it in action, check:&lt;br/&gt;
&lt;a href=&quot;http://www.digitalcommonwealth.org/browse/archive:C%2FWMARS+Digital+Treasures+Respository/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.digitalcommonwealth.org/browse/archive:C%2FWMARS+Digital+Treasures+Respository/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note how the subject line gets split into linkable tokens.  Check that stored content &quot;Mass.&quot; actually links to &quot;/subject:Massachusetts/&quot;&lt;/p&gt;

&lt;p&gt;I&apos;ve also found this really useful for debugging what tokens exist for given fields &amp;#8211; of course it only works for stored fields.&lt;/p&gt;

&lt;p&gt;After you finish the handler version, I&apos;ll see what can be shared.&lt;/p&gt;</comment>
                            <comment id="12568113" author="gsingers" created="Tue, 12 Feb 2008 13:39:33 +0000"  >&lt;p&gt;OK, here&apos;s an update with just primitive use, for better or worse.  It adds quite a bit of verbosity to a result, but such is life.  &lt;/p&gt;</comment>
                            <comment id="12568116" author="yseeley@gmail.com" created="Tue, 12 Feb 2008 13:47:11 +0000"  >&lt;p&gt;Interface is the most important part... can someone cut&apos;n&apos;paste what the input + output looks like for casual reviewers?&lt;/p&gt;</comment>
                            <comment id="12568120" author="gsingers" created="Tue, 12 Feb 2008 13:58:54 +0000"  >&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/solr/AnalysisRequestHandler&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/AnalysisRequestHandler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12570562" author="gsingers" created="Wed, 20 Feb 2008 04:07:10 +0000"  >&lt;p&gt;Committed revision 629342.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12375356" name="SOLR-477.patch" size="21263" author="gsingers" created="Tue, 12 Feb 2008 13:39:33 +0000"/>
                            <attachment id="12375304" name="SOLR-477.patch" size="22863" author="gsingers" created="Tue, 12 Feb 2008 04:28:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Feb 2008 04:27:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7127</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxr3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>