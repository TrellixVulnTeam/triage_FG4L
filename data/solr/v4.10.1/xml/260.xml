<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:24:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-260/SOLR-260.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-260] reusable PluginLoader -- helper class to load plugins</title>
                <link>https://issues.apache.org/jira/browse/SOLR-260</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As we talk about adding more configuration (Handlers, Highlighting, Components, etc) we should standardize the format and share the loading and initialization code.&lt;/p&gt;

&lt;p&gt;This patch extracts the common stuff from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt; and makes it work with the RequestHandler framework.&lt;/p&gt;

&lt;p&gt;This is an abstract base class &amp;#8211; each implementation needs to take care of actually creating and initializing the instances:&lt;/p&gt;

&lt;p&gt;abstract class PluginLoader&amp;lt;T&amp;gt;&lt;br/&gt;
{&lt;br/&gt;
  abstract public T create( String className, NamedList args, Map&amp;lt;String,String&amp;gt; params );&lt;/p&gt;

&lt;p&gt;  abstract public void init( T plugin, NamedList args, Map&amp;lt;String,String&amp;gt; params );&lt;/p&gt;

&lt;p&gt;  public Map&amp;lt;String,T&amp;gt; load( NodeList nodes )&lt;/p&gt;
  {
    ...
  }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12371423">SOLR-260</key>
            <summary>reusable PluginLoader -- helper class to load plugins</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Jun 2007 22:59:44 +0100</created>
                <updated>Fri, 10 May 2013 11:40:09 +0100</updated>
                            <resolved>Fri, 26 Oct 2007 06:29:06 +0100</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12503673" author="hossman" created="Tue, 12 Jun 2007 00:22:19 +0100"  >&lt;p&gt;Ryan: FYI but there is currently no patch attached to this issue.&lt;/p&gt;


&lt;p&gt;looking ta the way PluginLoader is used in the latest &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt; patch, i wonder if some of this stuff could be simplified more by adding two new super interfaces to many of the things that can currently be specified as plugins (you alluded to this in an old comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt; that i remember seeing when skimming my email a while back, but never really got a chance to comment on).&lt;/p&gt;

&lt;p&gt;Assuming we have two interfaces like this...&lt;/p&gt;

&lt;p&gt;  public interface MapInitializedPlugin &lt;/p&gt;
{
    init( Map&amp;lt;String,String&amp;gt; args);
  }
&lt;p&gt;  public interface NamedListInitializedPlugin &lt;/p&gt;
{
    init( NamedList args );
  }

&lt;p&gt;...then the PluginLoader concept can be much simpler can&apos;t it?  something like...&lt;/p&gt;

&lt;p&gt;  public abstract class AbstractPluginLoader&amp;lt;T&amp;gt; {&lt;br/&gt;
    protected T createInstance(String pluginClassName) &lt;/p&gt;
{
      Class clazz = Config.findClass( pluginClassName, DEFAULT_PACAKGES);
      return (T) clazz.newInstance(); // :TODO: do some error check that clazz extends T
  }
&lt;p&gt;  public class MapPluginLoader&amp;lt;T extends MapInitializedPlugin&amp;gt; extends AbstractPluginLoader&amp;lt;T&amp;gt; {&lt;br/&gt;
    protected T createInstance(String pluginClassName, Map&amp;lt;String,String&amp;gt; args) &lt;/p&gt;
{ createInstance( pluginClassName); }&lt;br/&gt;
    public T getInstance(String pluginClassName, Map&amp;lt;String,String&amp;gt; args) {
      T plugin = createInstance(pluginClassName);
      plugin.init(args);
      return plugin;
    }&lt;br/&gt;
  }&lt;br/&gt;
  public class NamedListPluginLoader&amp;lt;T extends NamedListInitializedPlugin&amp;gt; extends AbstractPluginLoader&amp;lt;T&amp;gt; {&lt;br/&gt;
    protected T createInstance(String pluginClassName, NamedList args) { createInstance( pluginClassName); }
&lt;p&gt;    public T getInstance(String pluginClassName, NamedList args) &lt;/p&gt;
{
      T plugin = createInstance(pluginClassName);
      plugin.init(args);
      return plugin;
    }
&lt;p&gt;  }&lt;/p&gt;

&lt;p&gt;...similar batch processing methods to the ones you already have (for dealing with DOM Nodes) can also be added, but the key is that you can say things like...&lt;/p&gt;

&lt;p&gt;   SolrRequestHandler r = (new NamedLIstPluginLoader&amp;lt;SolrRequestHandler&amp;gt;()).getInstance(concreteImplName);&lt;/p&gt;

&lt;p&gt;...instead of each usage needing to provide an impl for the PluginLoader.init method (and the methods don&apos;t all have the double usage of NamedList and Map&amp;lt;String,String&amp;gt; args that might confuse people since one of them is always ignored).&lt;/p&gt;

&lt;p&gt;NOTE: I&apos;m not sure why you have your PluginLoader.create method abstract ... it seems like the common case is common enough that we can provide a default impl.&lt;/p&gt;






</comment>
                            <comment id="12503678" author="hossman" created="Tue, 12 Jun 2007 00:31:56 +0100"  >&lt;p&gt;a few more thoughts...&lt;br/&gt;
1) instead of DEFAULT_PACAKGES that should really be &quot;String[] getDefaultPackages()&quot; method that could be overridden in subclasses (anonymous or otherwise)&lt;br/&gt;
2) there&apos;s really no reason for the createInstance methods i put in NamedListPluginLoader and MapPluginLoader ... if a special case comes along where a special type of plugin requires a special type of instantiation, people can take care of it by overriding getInstance.&lt;/p&gt;</comment>
                            <comment id="12503679" author="ryantxu" created="Tue, 12 Jun 2007 00:35:37 +0100"  >&lt;p&gt;&amp;gt; &lt;br/&gt;
&amp;gt; Ryan: FYI but there is currently no patch attached to this issue.&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;i&apos;m trying to mush RequestHandlers and FieldTypes into it now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I&apos;ll post something soon &amp;#8211; integrating a few of your thoughts.&lt;/p&gt;</comment>
                            <comment id="12503704" author="ryantxu" created="Tue, 12 Jun 2007 02:59:07 +0100"  >&lt;p&gt;This patch uses a single plugin loader for:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;RequestHandlers&lt;/li&gt;
	&lt;li&gt;FieldTypes&lt;/li&gt;
	&lt;li&gt;QueryResponseWriter&lt;/li&gt;
	&lt;li&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt; highlighting)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It could be used for field and dynamicField, but I&apos;ll hold off on that...&lt;/p&gt;

&lt;p&gt;RequestHandlers and FieldTypes have enough custom stuff going on (lazy loading, Analyzers) that they can&apos;t use the general class NamedListPluginLoader&amp;lt;T&amp;gt;&lt;/p&gt;

&lt;p&gt;QueryResponseWriters are initalized with:&lt;/p&gt;

&lt;p&gt;  NamedListPluginLoader&amp;lt;QueryResponseWriter&amp;gt; loader = &lt;br/&gt;
      new NamedListPluginLoader&amp;lt;QueryResponseWriter&amp;gt;( &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;solrconfig.xml&amp;#93;&lt;/span&gt; &quot;+xpath, responseWriters );&lt;br/&gt;
  defaultResponseWriter = loader.load( nodes );&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This configuration adds the ability to specify the default RequestHandlers/QueryResponseWriter using default=&quot;true&quot; on exactly one entry.  This was required for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt; highlighting config, but I think it is generally useful.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I added package o.a.solr.util.plugin with 5 classes.  Any better suggestions where this ought to live?&lt;/p&gt;</comment>
                            <comment id="12505022" author="ryantxu" created="Fri, 15 Jun 2007 04:47:38 +0100"  >&lt;p&gt;No real changes... applies with trunk&lt;/p&gt;</comment>
                            <comment id="12505297" author="ryantxu" created="Fri, 15 Jun 2007 17:29:27 +0100"  >&lt;p&gt;The most recent patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-225&quot; title=&quot;Allow pluggable Highlighting classes -- Formatters and Fragmenters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-225&quot;&gt;&lt;del&gt;SOLR-225&lt;/del&gt;&lt;/a&gt; includes this change.  If you want to evaluate the plugin architecture, check there &amp;#8211; the patch on this issue will be slightly out date...&lt;/p&gt;</comment>
                            <comment id="12509766" author="hossman" created="Tue, 3 Jul 2007 08:19:30 +0100"  >&lt;p&gt;Ryan ... sorry i slacked off on reviewing the last few patches in this issue.  i just took a look at commit #552680 and it looks sweet.  I&apos;m still not crazy about the &quot;init(T plugin, Map&amp;lt;String, String&amp;gt; params, Node node)&quot; method sig, but since we have to get the class/name params anyway, i guess it doesn&apos;t do any harm to pass the Map in along with the Node ... we just need to beef up the javadocs so it&apos;s clear where the Map comes from&lt;/p&gt;

&lt;p&gt;Just to clarify, if i&apos;m understanding the default=&quot;true&quot; code, it means that RequestHandler resolution will go as follows...&lt;br/&gt;
 1) look for a RequestHandler with a name matching the request&lt;br/&gt;
 2) look for a RequestHandler configured with default=&quot;true&quot;&lt;br/&gt;
 3) look for a RequestHandler configured with name=&quot;standard&quot;&lt;br/&gt;
 4) use an anonymous instance of StandardRequestHandler&lt;/p&gt;

&lt;p&gt;...that looks good to me, but we should definitely document it.&lt;/p&gt;

&lt;p&gt;Minor Question: isn&apos;t the init method in the AbstractPluginLoader&amp;lt;SolrRequestHandler&amp;gt; redundant?&lt;/p&gt;</comment>
                            <comment id="12509793" author="ryantxu" created="Tue, 3 Jul 2007 09:40:35 +0100"  >
&lt;p&gt;&amp;gt; I&apos;m still not crazy about the &quot;init(T plugin, Map&amp;lt;String, String&amp;gt; params, Node node)&quot;&lt;/p&gt;

&lt;p&gt;I don&apos;t like it either.  In 552709 I changed it to:&lt;br/&gt;
 init(T plugin, Node node)&lt;br/&gt;
The few places that actually use the map can generate it using DOMUtils.&lt;/p&gt;


&lt;p&gt;&amp;gt; Just to clarify, if i&apos;m understanding the default=&quot;true&quot; code, it means that RequestHandler resolution will go as follows...&lt;br/&gt;
&amp;gt;  1) look for a RequestHandler with a name matching the request&lt;br/&gt;
&amp;gt;  2) look for a RequestHandler configured with default=&quot;true&quot;&lt;br/&gt;
&amp;gt;  3) look for a RequestHandler configured with name=&quot;standard&quot;&lt;br/&gt;
&amp;gt;  4) use an anonymous instance of StandardRequestHandler&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;exactly.  likewise, the QueryResponseWriter follows the same pattern.&lt;/p&gt;

&lt;p&gt;&amp;gt; ...that looks good to me, but we should definitely document it.&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;Where do you think is the best place?  the example solrconfig.xml?&lt;/p&gt;


&lt;p&gt;&amp;gt; Minor Question: isn&apos;t the init method in the AbstractPluginLoader&amp;lt;SolrRequestHandler&amp;gt; redundant?&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;I don&apos;t think so (but I am often wrong).  If the RequestHandler plugin loader extended NamedListPluginLoader, then it would be.  The RequestHandler funny business with lazy loading makes it better to directly subclass AbstractPluginLoader&lt;/p&gt;</comment>
                            <comment id="12509916" author="hossman" created="Tue, 3 Jul 2007 16:50:28 +0100"  >&lt;p&gt;&amp;gt; Where do you think is the best place? the example solrconfig.xml?&lt;/p&gt;

&lt;p&gt;well, at a minimum we should change it to use default=&quot;true&quot; and document what that means, removing the comment about &quot;standard&quot; from there would probably make sense since new users aren&apos;t going to care about the magic of hte name &quot;standard&quot; with the default=true syntax .. but we should still document on the wiki somewhere what the full handler/writer resolution chain is.&lt;/p&gt;

&lt;p&gt;&amp;gt; The RequestHandler funny business with lazy loading makes it better to directly subclass AbstractPluginLoader &lt;/p&gt;

&lt;p&gt;...ah, yeah i missed that ... but i don&apos;t see any reason why it can&apos;t still subclass NamedListPluginLoader just for the init method (even if it is does need custom create/register methods.&lt;/p&gt;</comment>
                            <comment id="12537825" author="hossman" created="Fri, 26 Oct 2007 05:14:08 +0100"  >&lt;p&gt;Ryan: do you consider this issue fixed, or did you want to leave it open to track converting more plugins to using PluginLoader?  (if so we should probably list the classes in the issue description, if not we should open seperate bugs to track the individual types of plugins)&lt;/p&gt;</comment>
                            <comment id="12537836" author="ryantxu" created="Fri, 26 Oct 2007 06:29:06 +0100"  >&lt;p&gt;should have been resolved a while ago.&lt;/p&gt;</comment>
                            <comment id="12579141" author="hossman" created="Sun, 16 Mar 2008 03:23:52 +0000"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked &quot;Resolved&quot; and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.3 as of today 2008-03-15&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 29 issues found was set to 1.3, email notification was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this (hopefully) unique string: batch20070315hossman1&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12368569">SOLR-225</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12359798" name="SOLR-260-PluginLoader.patch" size="32099" author="ryantxu" created="Fri, 15 Jun 2007 04:47:38 +0100"/>
                            <attachment id="12359457" name="SOLR-260-PluginLoader.patch" size="31948" author="ryantxu" created="Tue, 12 Jun 2007 02:59:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Jun 2007 23:22:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxsfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>