<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:23:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-893/SOLR-893.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-893] Unable to delete documents via SQL and deletedPkQuery with deltaimport</title>
                <link>https://issues.apache.org/jira/browse/SOLR-893</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;DocBuilder calls entityProcessor.nextModifiedRowKey which sets up rowIterator for the modified rows, but when it comes time to call entityProcessor.nextDeletedRowKey, this is skipped as although no rows are returned from nextModifiedRowKey, rowIterator in SqlEntityProcessor.java is still not null&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409854">SOLR-893</key>
            <summary>Unable to delete documents via SQL and deletedPkQuery with deltaimport</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="rosher">Dan Rosher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Dec 2008 23:15:46 +0000</created>
                <updated>Tue, 10 Nov 2009 15:51:52 +0000</updated>
                            <resolved>Fri, 5 Dec 2008 19:14:52 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12653044" author="rosher" created="Wed, 3 Dec 2008 23:20:52 +0000"  >&lt;p&gt;If there are no rows to fetch from the datasource, then null the rowIterator .. this ensure that e.g. the query for nextDeletedRowKey can be subsequently run.&lt;/p&gt;

&lt;p&gt;Also a test case added for deleting rows during a delta import added&lt;/p&gt;</comment>
                            <comment id="12653176" author="noble.paul" created="Thu, 4 Dec 2008 05:20:20 +0000"  >&lt;p&gt;instead of adding the check in each method it can be added to the getNext() method&lt;/p&gt;

&lt;p&gt;as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rowIterator.hasNext())
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; rowIterator.next();
      query = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
      rowIterator = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12653244" author="rosher" created="Thu, 4 Dec 2008 10:17:57 +0000"  >&lt;p&gt;Thanks Noble ... I&apos;ve made that change ... additionally I&apos;ve noticed that during any particular delta import you might have both and update/create AND a delete, the current code would not honor the delete hence I&apos;ve added something to cater for this, and updated the test to confirm.  &lt;/p&gt;</comment>
                            <comment id="12653452" author="shalinmangar" created="Thu, 4 Dec 2008 20:12:26 +0000"  >&lt;p&gt;Thanks for the patch Dan.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(modifiedRow.get(entity.pk) == row.get(entity.pk)){
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Wouldn&apos;t this need an equals check?&lt;/p&gt;</comment>
                            <comment id="12653709" author="rosher" created="Fri, 5 Dec 2008 09:27:49 +0000"  >&lt;p&gt;Ah yes thanks Shalin, == is now &apos;.equals&apos;&lt;/p&gt;</comment>
                            <comment id="12653898" author="shalinmangar" created="Fri, 5 Dec 2008 19:14:52 +0000"  >&lt;p&gt;Committed revision 723824.&lt;/p&gt;

&lt;p&gt;Thanks Dan!&lt;/p&gt;</comment>
                            <comment id="12775597" author="gsingers" created="Tue, 10 Nov 2009 15:51:52 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395385" name="SOLR-893.patch" size="6498" author="rosher" created="Fri, 5 Dec 2008 09:27:49 +0000"/>
                            <attachment id="12395276" name="SOLR-893.patch" size="6491" author="rosher" created="Thu, 4 Dec 2008 10:17:57 +0000"/>
                            <attachment id="12395228" name="SOLR-893.patch" size="4480" author="rosher" created="Wed, 3 Dec 2008 23:20:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Dec 2008 05:20:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxok7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20298</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>