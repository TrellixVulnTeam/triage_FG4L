<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-544/SOLR-544.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-544] Dates with &quot;optional&quot; milliseconds are not equivilent</title>
                <link>https://issues.apache.org/jira/browse/SOLR-544</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Something that occured to me while working n &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-470&quot; title=&quot;DateField throws error on iso8601 date&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-470&quot;&gt;&lt;del&gt;SOLR-470&lt;/del&gt;&lt;/a&gt; is that since the earliest versions of Solr, &quot;DateField&quot; has advertised it&apos;s format as...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;date field shall be of the form &quot;1995-12-31T23:59:59Z&quot;  The trailing &quot;Z&quot; designates UTC time and is mandatory. Optional fractional seconds are allowed: &quot;1995-12-31T23:59:59.999Z&quot;  All other parts are mandatory.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem is that Solr has always remained happily ignorant about wether you were using milliseconds or not, even in the case of &quot;0&quot; milliseconds, so the following input strings do not result in Terms which are truly equal...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;1995-12-31T23:59:59Z&lt;/li&gt;
	&lt;li&gt;1995-12-31T23:59:59.0Z&lt;/li&gt;
	&lt;li&gt;1995-12-31T23:59:59.00Z&lt;/li&gt;
	&lt;li&gt;1995-12-31T23:59:59.000Z&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...which means if people are inconsistent about how they interact with DateField (sometimes including the millis and sometimes not including them) the can get incorrect behavior in various situations:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;sorting by date with a secondary sort can cause hte secondary sort to be ignored when the dates should be considered equal.&lt;/li&gt;
	&lt;li&gt;range queries might miss items equal to the end points but with fewer/more characters then the input&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Any solution would require true parsing &amp;amp; normalizing of any date input (currently dates are only parsed if they involve DateMath) and complete reindexing&lt;/p&gt;

&lt;p&gt;NOTE: I don&apos;t personally think fixing this issue in DateField is worthwhile. i think it would be better to document it as a caveat and require people to be consistent in their usage of milliseconds (ie: if you are going to use them, then always use them even if they are 0). &lt;br/&gt;
Instead we should probably focus on a new Long based Date Field (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-440&quot; title=&quot;Should use longs for internal DateField storage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-440&quot;&gt;&lt;del&gt;SOLR-440&lt;/del&gt;&lt;/a&gt;) since that would always require parsing to get to the internal representation anyway.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12394466">SOLR-544</key>
            <summary>Dates with &quot;optional&quot; milliseconds are not equivilent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Apr 2008 20:33:59 +0100</created>
                <updated>Fri, 10 May 2013 11:39:27 +0100</updated>
                            <resolved>Mon, 19 May 2008 23:03:39 +0100</resolved>
                                    <version>1.1.0</version>
                    <version>1.2</version>
                    <version>1.3</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12591019" author="yseeley@gmail.com" created="Mon, 21 Apr 2008 20:54:07 +0100"  >&lt;p&gt;From the schema:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The format for this date field is of the form 1995-12-31T23:59:59Z, and&lt;br/&gt;
is a more restricted form of the canonical representation of dateTime&lt;br/&gt;
&lt;a href=&quot;http://www.w3.org/TR/xmlschema-2/#dateTime&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.w3.org/TR/xmlschema-2/#dateTime&lt;/a&gt;&lt;br/&gt;
The trailing &quot;Z&quot; designates UTC time and is mandatory.&lt;br/&gt;
Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z&lt;br/&gt;
All other components are mandatory.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Part of the canonical representation referenced states that&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The fractional second string, if present, must not end in &apos;0&apos;;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So not an oversight, but not enforced either.&lt;/p&gt;

&lt;p&gt;I agree with using a more efficient internal storage mechanism though.  The current one really just stems from the observation that the values already sorted correctly if the &apos;Z&apos; was lopped off.&lt;/p&gt;</comment>
                            <comment id="12591037" author="hossman" created="Mon, 21 Apr 2008 21:39:41 +0100"  >&lt;p&gt;good point yonik ... perhaps we should just reiterate the &quot;no trailing 0&quot; aspect of the millis more strenuously in the docs. and move on to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-440&quot; title=&quot;Should use longs for internal DateField storage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-440&quot;&gt;&lt;del&gt;SOLR-440&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12591039" author="hossman" created="Mon, 21 Apr 2008 21:41:04 +0100"  >&lt;p&gt;we should make sure we have something in 1.3 that addresses this (even if it is just documentation)&lt;/p&gt;</comment>
                            <comment id="12598113" author="hossman" created="Mon, 19 May 2008 23:03:39 +0100"  >&lt;p&gt;patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-470&quot; title=&quot;DateField throws error on iso8601 date&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-470&quot;&gt;&lt;del&gt;SOLR-470&lt;/del&gt;&lt;/a&gt; both improves the documentation regarding trailing zeros in addition to adding a parser that ensures all dates are in the canonical format.&lt;/p&gt;

&lt;p&gt;Committed revision 658003.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12387708">SOLR-470</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12384979">SOLR-440</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12394887">SOLR-552</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Apr 2008 19:54:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7063</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxqov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>