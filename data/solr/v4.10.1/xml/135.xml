<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:17:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-135/SOLR-135.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-135] Restructure / Refactor codebase for shared libraries</title>
                <link>https://issues.apache.org/jira/browse/SOLR-135</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;For &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-20&quot; title=&quot;A simple Java client for updating and searching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-20&quot;&gt;&lt;del&gt;SOLR-20&lt;/del&gt;&lt;/a&gt; and other java projects, it would be nice to have common code share a codebase that does not require lucene or junit to compile.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12361831">SOLR-135</key>
            <summary>Restructure / Refactor codebase for shared libraries</summary>
                <type id="5" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Wish</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2007 10:30:24 +0000</created>
                <updated>Fri, 10 May 2013 11:39:09 +0100</updated>
                            <resolved>Fri, 15 Jun 2007 00:54:46 +0100</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12469711" author="ryantxu" created="Fri, 2 Feb 2007 10:46:03 +0000"  >&lt;p&gt;A first start for this would be to move:&lt;br/&gt;
  /solr/src/java/org/apache/solr/util/&lt;br/&gt;
to:&lt;br/&gt;
 /solr/src/common/org/apache/solr/util/&lt;/p&gt;

&lt;p&gt;(or some other name, &quot;shared&quot;?)&lt;/p&gt;

&lt;p&gt;It would also be nice to move:&lt;br/&gt;
 AbstractSolrTestCase.java, TestHarness.java, and o.a.s.util.test to:&lt;br/&gt;
 \solr\src\test\org\apache\solr\util&lt;/p&gt;

&lt;p&gt;As a first pass, SolrParams.java and ContentStream.java should be moved to:&lt;br/&gt;
  /solr/src/common/org/apache/solr/request/&lt;/p&gt;

&lt;p&gt;Longer term, the logic and constants should be seperated from SolrParams.java&lt;/p&gt;

&lt;p&gt;I &lt;b&gt;think&lt;/b&gt; a quick version of this could be done that would not affect any existing code, just the build.xml file.  &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - - - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;should o.a.s.tst be moved to \solr\src\test\org\apache\solr\tst?&lt;/p&gt;

&lt;p&gt;I can&apos;t quite figure out what &quot;tst&quot; does.&lt;/p&gt;
</comment>
                            <comment id="12469900" author="yseeley@gmail.com" created="Fri, 2 Feb 2007 22:57:08 +0000"  >&lt;p&gt;Sounds good in general, I think.&lt;/p&gt;

&lt;p&gt;The test request handler (in tst), was for leveraging existing tests but doing additional tests for every test.&lt;br/&gt;
Things like testing that if one requests a DocList and a DocSet of the same query, all the documents are identical, tested filtering by a query (before we had things like fq, etc), tested the doc iteration interface, intersectionSize, etc.&lt;/p&gt;

&lt;p&gt;We have enough other tests now, most of it is probably redundant.&lt;br/&gt;
I think the entire &quot;tst&quot; directory can be removed.&lt;/p&gt;
</comment>
                            <comment id="12501099" author="ryantxu" created="Mon, 4 Jun 2007 06:38:58 +0100"  >&lt;p&gt;This patch moves a single file (XML.java) into a new source directory and modifies build.xml to generate the proper .jar files.&lt;/p&gt;

&lt;p&gt;The structure is:&lt;br/&gt;
 /src/common/&lt;br/&gt;
 /src/java/&lt;/p&gt;

&lt;p&gt;output is:&lt;br/&gt;
 /dist/apache-solr-1.3-dev.jar&lt;br/&gt;
 /dist/apache-solr-1.3-dev-common.jar&lt;/p&gt;

&lt;p&gt;I used &quot;common&quot; rather then &quot;util&quot; since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-20&quot; title=&quot;A simple Java client for updating and searching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-20&quot;&gt;&lt;del&gt;SOLR-20&lt;/del&gt;&lt;/a&gt; needs many files that are not in util and without a lucene dependency, it should not have them &amp;#8211; if anyone has better names, let me know!&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Someone more familiar with ant &quot;best practices&quot; needs to look over these changes!&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;- - -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have been unable to make a patch that successfully moves XML.java from /src/java to /src/common, when you test this, just copy the file over &amp;#8211; no changes.&lt;/p&gt;</comment>
                            <comment id="12504009" author="hossman" created="Tue, 12 Jun 2007 22:25:10 +0100"  >&lt;p&gt;one the topic of adding a src/common directory ... i think in the long run we&apos;ll be happier if there is no overlap in the java package names that live in this directory and the ones that live in src/java (much the way the only java packages in src/webapp are o.a.s.servlet) ... so using src/common/org/apache/solr/common/XML.java may be a better way to go (even though it means we would need to leave a deprecated src/java/org/apache/solr/util/XML.java subclassing it in src/java)  I could probably be convinced that this isn&apos;t that important, but i&apos;ve definitely found it confusing for people that some of the lucene-java contribs reuse the same package names as the core classes in some cases)&lt;/p&gt;

&lt;p&gt;on the subject of the build.xml ... now that we&apos;ve got three instances of &amp;lt;javac&amp;gt; and two of &amp;lt;jar&amp;gt; we probably want to make some macros for them to reduce redundency.&lt;/p&gt;

&lt;p&gt;Gimme 30 minutes to see if i can whip up a derivitive patch ... if i dont&apos; attach one it means i got sidetracked with something else.&lt;/p&gt;</comment>
                            <comment id="12504022" author="hossman" created="Tue, 12 Jun 2007 23:07:14 +0100"  >&lt;p&gt;here&apos;s what i&apos;ve got so far ...it occured to me that if we use seperate package names, we don&apos;t actually need to separate the code out, we can do it all with exclude/include directives.&lt;/p&gt;

&lt;p&gt;this has one small glitch at the moment, post.jar isnt&apos; getting it&apos;s main-class set properly ... might be a mistake i made, or it might be a defect in the manifest merging ant is suppose to do ... i&apos;ll check it out later&lt;/p&gt;

&lt;p&gt;(this isn&apos;t a big deal though, post.jar has never really had a good manifest file, i was just trying to clean that up when i added the macro)&lt;/p&gt;</comment>
                            <comment id="12504037" author="hossman" created="Wed, 13 Jun 2007 00:05:30 +0100"  >&lt;p&gt;as far as i can tell the manifest merging that the ant docs describe for the &amp;lt;jar&amp;gt; task just flat out don&apos;t work, so we just wont use the new macro for hte post.jar&lt;/p&gt;


&lt;p&gt;NOTE: with this patch, the intent is to svn copy XML.java to the new common dir, then patch the existing file to purge it&apos;s body and add the deprecated messages.&lt;/p&gt;

&lt;p&gt;as i mentioned before, this appraoch doesn&apos;t use src/common at all ... it assumes a new &quot;org.apache.solr.common&quot; package in src/java and uses include/exclude rules to make sure things in that package live in the common jar (and compile first)&lt;/p&gt;

&lt;p&gt;it would be easy to move this package to live in src/common if people think there is a need, my main concern is just that we shouldn&apos;t have &quot;org.apache.solr.util&quot; living in two places (src/java and src/common)&lt;/p&gt;</comment>
                            <comment id="12504038" author="ryantxu" created="Wed, 13 Jun 2007 00:09:31 +0100"  >&lt;p&gt;&amp;gt; &lt;br/&gt;
&amp;gt;it would be easy to move this package to live in src/common if people think there is a need, my main concern is just that we shouldn&apos;t have &quot;org.apache.solr.util&quot; living in two places (src/java and src/common)&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;yes, I like separate package names better.... but i&apos;m worried about the impact on dependent code.  &lt;/p&gt;

&lt;p&gt;The classes needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-20&quot; title=&quot;A simple Java client for updating and searching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-20&quot;&gt;&lt;del&gt;SOLR-20&lt;/del&gt;&lt;/a&gt; are:&lt;br/&gt;
 &lt;a href=&quot;http://solrstuff.org/svn/solrj/src/org/apache/solr/util/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://solrstuff.org/svn/solrj/src/org/apache/solr/util/&lt;/a&gt;&lt;br/&gt;
 &lt;a href=&quot;http://solrstuff.org/svn/solrj/src/org/apache/solr/request/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://solrstuff.org/svn/solrj/src/org/apache/solr/request/&lt;/a&gt;&lt;br/&gt;
 &lt;a href=&quot;http://solrstuff.org/svn/solrj/src/org/apache/solr/core/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://solrstuff.org/svn/solrj/src/org/apache/solr/core/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Are you suggesting its ok to move XML.java and SolrException.java to o.a.s.common?  That seems kinda extreme for anyone using the classes...&lt;/p&gt;

&lt;p&gt;If it is ok, i&apos;m all for it...  if not, I think we should make the &apos;common&apos; package and put anything new in there, adding comments to the classes that should be moved in the future.  &lt;/p&gt;</comment>
                            <comment id="12504039" author="ryantxu" created="Wed, 13 Jun 2007 00:13:16 +0100"  >&lt;p&gt;As a note to anyone not looking at the patch...  this would not break API compatibility, but it would add a lot of empty classes that look like:&lt;/p&gt;

&lt;p&gt;@Deprecated&lt;br/&gt;
public class XML extends org.apache.solr.common.XML &lt;/p&gt;
{
  // don&apos;t use this class!
}</comment>
                            <comment id="12504068" author="hossman" created="Wed, 13 Jun 2007 01:40:20 +0100"  >&lt;p&gt;&amp;gt;&amp;gt; yes, I like separate package names better.... but i&apos;m worried about the impact on dependent code.&lt;br/&gt;
&amp;gt;&amp;gt; ...&lt;br/&gt;
&amp;gt;&amp;gt; Are you suggesting its ok to move XML.java and SolrException.java to o.a.s.common? That seems kinda extreme &lt;br/&gt;
&amp;gt;&amp;gt; for anyone using the classes...&lt;/p&gt;

&lt;p&gt;I&apos;m not sure.  I think we&apos;ve been talking for a long time about refactoring some of the classes into different packages, which really only affects their organization when developers look at them &amp;#8211; if we are now also looking at reorganizing them into jars, and ensuring that certain subsets can be compiled into their own jar with no dependencie on files not in that jar &amp;#8211; then i think we might as well do both at once.  I said, I could probably be convinced that this isn&apos;t that important, and we should continue using the same package names in a new src/common directory &amp;#8211; so perhaps a better question to ask is: do we want to rework the packages too?&quot;&lt;/p&gt;

&lt;p&gt;Most of the classes you listed seem like perfect candidates for  new &quot;common&quot; package (or at the very least o.a.s.common.util, o.a.s.common.params), but i have to admit i hadn&apos;t really considered SolrException ... on one hand it&apos;s used so pervasively it should be considered &quot;common&quot; (not including it would mean changing a &lt;b&gt;lot&lt;/b&gt; of APIs of things we want to be able to include in the common jar) on the other hand it does have very HTTP specific error codes in it.&lt;/p&gt;


&lt;p&gt;Just spit balling here... what if o.a.s.common.SolrException was a base class with no error codes (it looks like all of the &quot;Common&quot; classes just use &quot;BAD_REQUEST&quot; at this point so refactoring it out would be clean, and the http codes don&apos;t make sense in a &apos;common&apos; context anyway) and o.a.s.util.SolrException a real (non deprecated) subclass that adds the ErrorCodes ... anyone catching util.SolrException is golden, anyone catching common.SolrException can either infer an ErrorCode from context, or assume BAD_REQUEST (a static utility in util.SolrException could make this easy by wrapping the common.SolrException in a util.SolrException.&lt;/p&gt;

&lt;p&gt;ugh.&lt;/p&gt;

</comment>
                            <comment id="12504156" author="ryantxu" created="Wed, 13 Jun 2007 09:11:57 +0100"  >&lt;p&gt;&amp;gt; do we want to rework the packages too?&lt;/p&gt;

&lt;p&gt;I think now is as good of a time as any.  I agree that having independent jar files with classes in the same package is less then great.&lt;/p&gt;


&lt;p&gt;&amp;gt; on the other hand it does have very HTTP specific error codes in it.&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;I don&apos;t see any problem with HTTP status codes in the base class.  It seems standard enough.  I think we may want to have multiple error types that overlap with the same HTTP status code (500)&lt;/p&gt;

&lt;p&gt;(Not now, but...) I would like to see typed exceptions so they could be handled differently &amp;#8211; BadRequestException() etc...&lt;/p&gt;</comment>
                            <comment id="12504536" author="ryantxu" created="Thu, 14 Jun 2007 05:24:20 +0100"  >&lt;p&gt;phew!  The changelog frenzy was successful.  Thank you eclipse.&lt;/p&gt;

&lt;p&gt;The moved files have their revision history:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/common/params/SolrParams.java?view=log&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/common/params/SolrParams.java?view=log&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and stub classs are all in place.&lt;/p&gt;

&lt;p&gt;Since we have moved these files to a new location, I think we should try to clean up the depricated classes like CommonParams.  There are essentially two types of &quot;Param&quot; classes&lt;/p&gt;

&lt;p&gt;1. public static final String PARAM_NAME lists...&lt;br/&gt;
2. SolrParams helpers&lt;/p&gt;

&lt;p&gt;but we should work on that later...&lt;/p&gt;</comment>
                            <comment id="12504963" author="hossman" created="Fri, 15 Jun 2007 00:13:13 +0100"  >&lt;p&gt;Whoops ... while banging my head against my desk trying ot figure out why i couldn&apos;t see my changes, i discovered that the last build.xml patch i attached to this issue had a really bad bug in that it was compiling all of hte classes into both jars (core and common)&lt;/p&gt;

&lt;p&gt;i have fixed this locally but it turns out it was masking another problem: CommonParams and DisMaxParams have a compilation dependency on SolrCore (and possible other things i haven&apos;t found yet because javac gave up when it hit that error) to log errors.&lt;/p&gt;

&lt;p&gt;I&apos;m going to change these classes to have their own loggers ... if that&apos;s hte only problem i&apos;ll commit, if there are still more problems i&apos;ll udpate this bug with a patch for discussion&lt;/p&gt;</comment>
                            <comment id="12504968" author="hossman" created="Fri, 15 Jun 2007 00:54:46 +0100"  >&lt;p&gt;Committed revision 547455.&lt;/p&gt;</comment>
                            <comment id="12579144" author="hossman" created="Sun, 16 Mar 2008 03:23:52 +0000"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked &quot;Resolved&quot; and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.3 as of today 2008-03-15&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 29 issues found was set to 1.3, email notification was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this (hopefully) unique string: batch20070315hossman1&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12373837">SOLR-301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12343833">SOLR-20</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12359554" name="SOLR-135-RestructureForCommonJar.patch" size="11926" author="hossman" created="Wed, 13 Jun 2007 00:05:30 +0100"/>
                            <attachment id="12359551" name="SOLR-135-RestructureForCommonJar.patch" size="11992" author="hossman" created="Tue, 12 Jun 2007 23:07:12 +0100"/>
                            <attachment id="12358809" name="SOLR-135-RestructureForCommonJar.patch" size="9631" author="ryantxu" created="Mon, 4 Jun 2007 06:38:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Feb 2007 22:57:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxt6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>