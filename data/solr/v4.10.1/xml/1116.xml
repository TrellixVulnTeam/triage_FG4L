<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:26:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1116/SOLR-1116.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1116] Add a Binary FieldType</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1116</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Lucene supports binary data for field but Solr has no corresponding field type. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12422855">SOLR-1116</key>
            <summary>Add a Binary FieldType</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 10:23:43 +0100</created>
                <updated>Tue, 10 Nov 2009 15:50:36 +0000</updated>
                            <resolved>Tue, 26 May 2009 08:45:22 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12702685" author="noble.paul" created="Sat, 25 Apr 2009 12:47:45 +0100"  >&lt;ul&gt;
	&lt;li&gt;added a new field BinaryField&lt;/li&gt;
	&lt;li&gt;JavabinCodec writes ByteBuffer as byte[]&lt;/li&gt;
	&lt;li&gt;in text formats the binary data is written down as hex encoded bytes&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12704081" author="noble.paul" created="Wed, 29 Apr 2009 12:42:06 +0100"  >&lt;ul&gt;
	&lt;li&gt;mask the byte to get a +ve int&lt;/li&gt;
	&lt;li&gt;implement toExternal()&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12704192" author="yseeley@gmail.com" created="Wed, 29 Apr 2009 17:33:15 +0100"  >&lt;p&gt;We could use base64 as the standard for input/output in text protocols - that will only expand the size by 33% over binary.&lt;/p&gt;</comment>
                            <comment id="12704258" author="ryantxu" created="Wed, 29 Apr 2009 20:06:22 +0100"  >&lt;p&gt;Perhaps we could use a url safe option too... this would let use query binary fields with our existing interfaces.&lt;/p&gt;

&lt;p&gt;Check:&lt;br/&gt;
&lt;a href=&quot;http://iharder.sourceforge.net/current/java/base64/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://iharder.sourceforge.net/current/java/base64/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://iharder.sourceforge.net/current/java/base64/api/Base64.html#URL_SAFE&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://iharder.sourceforge.net/current/java/base64/api/Base64.html#URL_SAFE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That refers to RFC3548&lt;/p&gt;</comment>
                            <comment id="12704284" author="klaasm" created="Wed, 29 Apr 2009 20:46:00 +0100"  >&lt;p&gt;+1 for url-safe base64 (-_ being the extra chars)&lt;/p&gt;</comment>
                            <comment id="12704464" author="noble.paul" created="Thu, 30 Apr 2009 04:44:56 +0100"  >&lt;blockquote&gt;&lt;p&gt;We could use base64 as the standard for input/output in text protocols&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I thought of it. But we will need to add some external library to do base64 encode&amp;lt;-&amp;gt;decode . Which one to use?&lt;/p&gt;

&lt;p&gt;There is one other challenge. The xml response format does not have a binary type . for backcompat reasons I have used &amp;lt;str&amp;gt; as the type. To add another type we may need to bump up the version&lt;/p&gt;</comment>
                            <comment id="12704512" author="noble.paul" created="Thu, 30 Apr 2009 08:37:40 +0100"  >&lt;blockquote&gt;&lt;p&gt;for url-safe base64 (-_ being the extra chars) &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;why do we need it to be url safe?. I guess the binary fields in Lucene is not indexed (Just stored) . If that is the case then we may not need to send it in the &apos;q&apos; param. &lt;/p&gt;
</comment>
                            <comment id="12706772" author="tao" created="Thu, 7 May 2009 10:16:49 +0100"  >&lt;p&gt;I just couldn&apos;t patch it to Solr 1.3. JavaBinCodec.java and solrconfig-slave1.xml do not actually exist in apache-solr-1.3.0 release. And when I tried again after removing those code related with the two files from the patch, I got the following response:&lt;/p&gt;

&lt;p&gt;patch -p0 &amp;lt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1116&quot; title=&quot;Add a Binary FieldType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1116&quot;&gt;&lt;del&gt;SOLR-1116&lt;/del&gt;&lt;/a&gt;.patch &lt;br/&gt;
patching file src/java/org/apache/solr/request/BinaryResponseWriter.java&lt;br/&gt;
Hunk #1 FAILED at 210.&lt;br/&gt;
1 out of 1 hunk FAILED &amp;#8211; saving rejects to file src/java/org/apache/solr/request/BinaryResponseWriter.java.rej&lt;br/&gt;
patching file src/java/org/apache/solr/schema/BinaryField.java&lt;br/&gt;
patching file src/java/org/apache/solr/update/DocumentBuilder.java&lt;br/&gt;
Hunk #1 FAILED at 29.&lt;br/&gt;
Hunk #2 FAILED at 216.&lt;br/&gt;
Hunk #3 FAILED at 225.&lt;br/&gt;
Hunk #4 FAILED at 263.&lt;br/&gt;
Hunk #5 FAILED at 286.&lt;br/&gt;
5 out of 5 hunks FAILED &amp;#8211; saving rejects to file src/java/org/apache/solr/update/DocumentBuilder.java.rej&lt;br/&gt;
patching file src/test/org/apache/solr/schema/TestBinaryField.java&lt;br/&gt;
patching file src/test/test-files/solr/conf/schema-binaryfield.xml&lt;/p&gt;</comment>
                            <comment id="12706781" author="noble.paul" created="Thu, 7 May 2009 10:41:00 +0100"  >&lt;p&gt;the patch will not apply on Solr 1.3 . it will apply only on trunk&lt;/p&gt;</comment>
                            <comment id="12710733" author="ryantxu" created="Tue, 19 May 2009 14:51:24 +0100"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; why do we need it to be url safe?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;More then anything it seems like a pending gotcha and the fix (with URL safe base64) is trivial.&lt;/p&gt;</comment>
                            <comment id="12710754" author="noble.paul" created="Tue, 19 May 2009 16:12:26 +0100"  >&lt;p&gt;my only concern is that does the standard tools available in other languages (php/python etc) for Base64 encoding/decoding work with the url safe format? if it doesn&apos;t, it beats the purpose&lt;/p&gt;</comment>
                            <comment id="12710764" author="ryantxu" created="Tue, 19 May 2009 16:39:57 +0100"  >&lt;p&gt;quick google seach shows a few options in other languages:&lt;br/&gt;
&lt;a href=&quot;http://search.cpan.org/~kazuho/MIME-Base64-URLSafe-0.01/lib/MIME/Base64/URLSafe.pm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search.cpan.org/~kazuho/MIME-Base64-URLSafe-0.01/lib/MIME/Base64/URLSafe.pm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In php, you can use &quot;base64_url_encode&quot;&lt;br/&gt;
&lt;a href=&quot;http://us.php.net/base64_encode&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://us.php.net/base64_encode&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12710772" author="yseeley@gmail.com" created="Tue, 19 May 2009 17:01:36 +0100"  >&lt;p&gt;There&apos;s no reason we can&apos;t accept either Base64 variant as input.&lt;br/&gt;
For output, should it be the normal Base64 or the URL-safe variant? (and no, I don&apos;t want yet another parameter that lets you choose &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12710782" author="ab" created="Tue, 19 May 2009 17:25:42 +0100"  >&lt;p&gt;One scenario that I have experience with is when you store small images as fields, to be displayed on the result list. URL-safe encoding means you can directly embed the returned string without re-encoding it.&lt;/p&gt;</comment>
                            <comment id="12711007" author="noble.paul" created="Wed, 20 May 2009 06:05:25 +0100"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t want yet another parameter that lets you choose&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I am fine with either format. we will stick to one . &lt;/p&gt;

&lt;p&gt;+0 for standard base64&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;ou can directly embed the returned string without re-encoding it. &lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;No browser accepts the image data as Base64. your front-end will have to read the string and send it out as a byte[].&lt;/p&gt;</comment>
                            <comment id="12711081" author="ab" created="Wed, 20 May 2009 11:02:48 +0100"  >&lt;blockquote&gt;&lt;p&gt;No browser accepts the image data as Base64. your front-end will have to read the string and send it out as a byte[].&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please see &lt;a href=&quot;http://en.wikipedia.org/wiki/Data_URI_scheme&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/Data_URI_scheme&lt;/a&gt; - this is the use case I was referring to, and indeed you can send base64 encoded content directly to any modern browser.&lt;/p&gt;</comment>
                            <comment id="12711087" author="noble.paul" created="Wed, 20 May 2009 11:21:18 +0100"  >&lt;p&gt;silly me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12711502" author="noble.paul" created="Thu, 21 May 2009 08:25:38 +0100"  >&lt;p&gt;hi Andrzej from the wikipedia documentation what I understand is that browsers support standard base64 not the url-safe version&lt;/p&gt;</comment>
                            <comment id="12711528" author="ab" created="Thu, 21 May 2009 10:15:53 +0100"  >&lt;p&gt;Indeed! then it&apos;s not relevant here. +0 from me for the regular base64.&lt;/p&gt;</comment>
                            <comment id="12712520" author="noble.paul" created="Sun, 24 May 2009 08:23:09 +0100"  >&lt;p&gt;The text format is standard base64 encoding&lt;/p&gt;</comment>
                            <comment id="12712575" author="noble.paul" created="Sun, 24 May 2009 18:17:55 +0100"  >&lt;p&gt;I plan to commit this in a day or two . Please let me know if there is any feedback&lt;/p&gt;</comment>
                            <comment id="12712894" author="noble.paul" created="Tue, 26 May 2009 08:45:22 +0100"  >&lt;p&gt;committed revision:778600&lt;/p&gt;</comment>
                            <comment id="12775478" author="gsingers" created="Tue, 10 Nov 2009 15:50:36 +0000"  >&lt;p&gt;Bulk close Solr 1.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408902" name="SOLR-1116.patch" size="30152" author="noble.paul" created="Sun, 24 May 2009 08:23:09 +0100"/>
                            <attachment id="12406771" name="SOLR-1116.patch" size="18028" author="noble.paul" created="Wed, 29 Apr 2009 12:42:06 +0100"/>
                            <attachment id="12406432" name="SOLR-1116.patch" size="17905" author="noble.paul" created="Sat, 25 Apr 2009 12:47:45 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Apr 2009 16:33:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxn7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>