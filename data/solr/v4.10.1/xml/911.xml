<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:25:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-911/SOLR-911.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-911] multi-select facets</title>
                <link>https://issues.apache.org/jira/browse/SOLR-911</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;plumbing to support the selection of multiple constraints in a facet&lt;/p&gt;</description>
                <environment></environment>
        <key id="12410638">SOLR-911</key>
            <summary>multi-select facets</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Dec 2008 20:44:28 +0000</created>
                <updated>Tue, 10 Nov 2009 15:51:53 +0000</updated>
                            <resolved>Wed, 17 Dec 2008 22:48:07 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12656333" author="yseeley@gmail.com" created="Sat, 13 Dec 2008 21:28:00 +0000"  >&lt;p&gt;OK, here&apos;s a prototype (still needs string-constants, distrib support, and tests) that implements support for multi-select facets by allowing the tagging of any query via the existing &quot;localParams&quot; syntax.  It adds localParams support to facet commands like facet.field to allow exclusion of certain filters.&lt;/p&gt;

&lt;p&gt;fq=&lt;/p&gt;
{!tag=typefilter}
&lt;p&gt;type:pdf&amp;amp;facet.field=&lt;/p&gt;
{!ex=typefilter}
&lt;p&gt;myfield&lt;/p&gt;

&lt;p&gt;both tag and ex may be a comma separated list to allow storing under different tags and selecting multiple tags.&lt;/p&gt;

&lt;p&gt;The localParams method seems preferable since it can be arbitrarily extended for other controls, and already existed when parsing queries.  &lt;/p&gt;

&lt;p&gt;This patch also adds the ability to specify a different output name/key... useful for complex facet queries:&lt;/p&gt;

&lt;p&gt;facet.query=&lt;/p&gt;
{!key=foo}
&lt;p&gt;rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;1 TO 2&amp;#93;&lt;/span&gt; OR rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;5 TO 9&amp;#93;&lt;/span&gt;&lt;br/&gt;
will cause the results to come back under a key of &quot;foo&quot; rather than &quot;rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;1 TO 2&amp;#93;&lt;/span&gt; OR rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;5 TO 9&amp;#93;&lt;/span&gt;&quot;&lt;/p&gt;</comment>
                            <comment id="12656341" author="ehatcher" created="Sat, 13 Dec 2008 21:47:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;facet.query={!key=foo}rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;1 TO 2&amp;#93;&lt;/span&gt; OR rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;5 TO 9&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;nice!&lt;/p&gt;

&lt;p&gt;Another goodie to overload into the local params is something maybe like &lt;/p&gt;
{!nocache}
&lt;p&gt; to prevent filling up the filter cache with something that is not meant to be reused or often.  There&apos;s another implementation over at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-407&quot; title=&quot;Uncached filter query parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-407&quot;&gt;&lt;del&gt;SOLR-407&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12656556" author="yseeley@gmail.com" created="Mon, 15 Dec 2008 06:27:00 +0000"  >&lt;p&gt;Whew, things got complicated in distributed search.... refinement queries need to keep the same exclusions so that they get the right count.  I decided to implement a different approach that specifies a comma separated list of terms for the facet.field when refining.  This should result in much smaller refinement requests, less parsing overhead, and smaller response sizes.&lt;/p&gt;

&lt;p&gt;Attaching latest draft... only thing left is to make some string constants I think.&lt;/p&gt;</comment>
                            <comment id="12656675" author="yseeley@gmail.com" created="Mon, 15 Dec 2008 18:05:54 +0000"  >&lt;p&gt;Attaching finished patch.&lt;br/&gt;
I&apos;ll wait a little while before committing to give time for others to review the API and suggest changes.&lt;/p&gt;</comment>
                            <comment id="12657077" author="hossman" created="Tue, 16 Dec 2008 17:34:43 +0000"  >&lt;blockquote&gt;
&lt;p&gt;This patch also adds the ability to specify a different output name/key... useful for complex facet queries:&lt;/p&gt;

&lt;p&gt;facet.query={!key=foo}rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;1 TO 2&amp;#93;&lt;/span&gt; OR rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;5 TO 9&amp;#93;&lt;/span&gt;&lt;br/&gt;
will cause the results to come back under a key of &quot;foo&quot; rather than &quot;rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;1 TO 2&amp;#93;&lt;/span&gt; OR rng:&lt;span class=&quot;error&quot;&gt;&amp;#91;5 TO 9&amp;#93;&lt;/span&gt;&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;but then how will the client know how what to filter on to actually constrain the query by &quot;foo&quot; since it won&apos;t actually ko what query that was?&lt;/p&gt;</comment>
                            <comment id="12657096" author="yseeley@gmail.com" created="Tue, 16 Dec 2008 18:25:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;but then how will the client know how what to filter on to actually constrain the query by &quot;foo&quot; since it won&apos;t actually ko what query that was?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, it&apos;s optional... it&apos;s only an issue for stateless clients without conventions or application specific knowledge - and they could always look at the original parameters via echoParams.&lt;/p&gt;</comment>
                            <comment id="12657125" author="hossman" created="Tue, 16 Dec 2008 19:27:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Well, it&apos;s optional... it&apos;s only an issue for stateless clients without conventions or application specific knowledge - and they could always look at the original parameters via echoParams.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;that assumes it wasn&apos;t baked into the config file.&lt;/p&gt;

&lt;p&gt;I guess there&apos;s no harm in adding it (except perhaps confusion: i&apos;d hate to see people assume that they can add &quot;fq=key&quot; since they got &quot;key&quot; back in the facet_queries section of the response)&lt;/p&gt;

&lt;p&gt;my point was really just that facet constraint &quot;labels&quot; are really only useful if each label is easily associated with a way of applying that constraint.  replacing the query string with a &quot;key&quot; in the response is only useful if that key can be used for something.&lt;/p&gt;

&lt;p&gt;It seems to me like it would be far more useful to just reserve &quot;key&quot; as a special local param that we guarantee will never get used, so people can include it in the facet.query and then parse it out of the response themselves.  &lt;/p&gt;

&lt;p&gt;You can already do this today...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;In Config...
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;
      &amp;lt;str name=&quot;facet.query&quot;&amp;gt;{!ignoredparam=&quot;Low Price&quot;}price:[* TO 500]&amp;lt;/str&amp;gt;
      &amp;lt;str name=&quot;facet.query&quot;&amp;gt;{!ignoredparam=&quot;Hight Price&quot;}price:[500 TO *]&amp;lt;/str&amp;gt;
      ...
In Query Response...
   &amp;lt;lst name=&quot;facet_queries&quot;&amp;gt;
     &amp;lt;int name=&quot;{!ignoredparam=&quot;Low Price&quot;}price:[* TO 500]&quot;&amp;gt;3&amp;lt;/int&amp;gt;
     &amp;lt;int name=&quot;{!ignoredparam=&quot;Hight Price&quot;}price:[500 TO *]&quot;&amp;gt;0&amp;lt;/int&amp;gt;
     ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...but it would be nice to have a parma name reserved for this.&lt;/p&gt;

&lt;p&gt;(admittedly it never occurred to me until this Jira post that that worked, i&apos;m going to start encouraging every one i know to start doing that)&lt;/p&gt;</comment>
                            <comment id="12657591" author="yseeley@gmail.com" created="Wed, 17 Dec 2008 22:48:07 +0000"  >&lt;p&gt;Committed.  I don&apos;t believe there are changes suggested to the API, just possible additions.&lt;br/&gt;
We can iterate or improve before 1.4.&lt;/p&gt;</comment>
                            <comment id="12775606" author="gsingers" created="Tue, 10 Nov 2009 15:51:53 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396108" name="SOLR-911.patch" size="30002" author="yseeley@gmail.com" created="Mon, 15 Dec 2008 18:05:54 +0000"/>
                            <attachment id="12396058" name="SOLR-911.patch" size="28743" author="yseeley@gmail.com" created="Mon, 15 Dec 2008 06:27:00 +0000"/>
                            <attachment id="12396015" name="SOLR-911.patch" size="10098" author="yseeley@gmail.com" created="Sat, 13 Dec 2008 21:28:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 13 Dec 2008 21:47:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxofz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20279</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>