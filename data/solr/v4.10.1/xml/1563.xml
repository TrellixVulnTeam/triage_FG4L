<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:24:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1563/SOLR-1563.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1563] binary fields caused a null pointer exception in the luke request handler</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1563</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Multiple reports of NPEs when using Solr 1.4 - so far these all seem to relate to getting a null returned by Fieldable.stringValue when it isn&apos;t expected or accounted for.  Thread where this was initially discussed...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://old.nabble.com/NPE-when-trying-to-view-a-specific-document-via-Luke-to26330237.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://old.nabble.com/NPE-when-trying-to-view-a-specific-document-via-Luke-to26330237.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12440683">SOLR-1563</key>
            <summary>binary fields caused a null pointer exception in the luke request handler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Nov 2009 01:08:42 +0000</created>
                <updated>Thu, 8 Jul 2010 20:55:39 +0100</updated>
                            <resolved>Sun, 22 Nov 2009 22:57:49 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.4.1</fixVersion>
                    <fixVersion>1.5</fixVersion>
                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12777785" author="hossman" created="Sat, 14 Nov 2009 01:10:38 +0000"  >
&lt;p&gt;First anecdotal NPE stack trace reported by Jake Brownell when using LukeRequestHandler to look at a specific document id when using 1.4.  No details about schema provided../&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/admin/luke?id=1

1. java.lang.NullPointerException
2.         at org.apache.lucene.index.TermBuffer.set(TermBuffer.java:95)
3.         at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:158)
4.         at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:232)
5.         at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:179)
6.         at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:975)
7.         at org.apache.lucene.index.DirectoryReader.docFreq(DirectoryReader.java:627)
8.         at org.apache.solr.search.SolrIndexReader.docFreq(SolrIndexReader.java:308)
9.         at org.apache.solr.handler.admin.LukeRequestHandler.getDocumentFieldsInfo(LukeRequestHandler.java:248)
10.        at org.apache.solr.handler.admin.LukeRequestHandler.handleRequestBody(LukeRequestHandler.java:124)
11.        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
12.        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12777786" author="hossman" created="Sat, 14 Nov 2009 01:12:34 +0000"  >&lt;p&gt;Second anecdotal exception reported by Solr Trey, also while using luke to look at a specific document id.  no details about schema...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;HTTP Status 500 - null java.lang.NullPointerException at
org.apache.lucene.index.Term.compareTo(Term.java:119) at
org.apache.lucene.index.TermInfosReader.getIndexOffset(TermInfosReader.java:160)
at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:231) at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:179) at
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:975) at
org.apache.lucene.index.DirectoryReader.docFreq(DirectoryReader.java:627) at
org.apache.solr.search.SolrIndexReader.docFreq(SolrIndexReader.java:308) at
org.apache.solr.handler.admin.LukeRequestHandler.getDocumentFieldsInfo(LukeRequestHandler.java:248)
at
org.apache.solr.handler.admin.LukeRequestHandler.handleRequestBody(LukeRequestHandler.java:124)
at
org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316) at
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12777788" author="hossman" created="Sat, 14 Nov 2009 01:17:58 +0000"  >&lt;p&gt;The following stack trace was generated using Solr 1.4, and the &quot;example&quot; configs provided with Solr 1.4.&lt;/p&gt;

&lt;p&gt;Steps to reproduce...&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;cd example &amp;amp;&amp;amp; java -jar start.jar&lt;/li&gt;
	&lt;li&gt;cd example/exampledocs &amp;amp;&amp;amp; java -jar post.jar  *.xml&lt;/li&gt;
	&lt;li&gt;open in browser: &lt;a href=&quot;http://localhost:8983/solr/select/?q=SP2514N&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select/?q=SP2514N&lt;/a&gt; (this works fine)&lt;/li&gt;
	&lt;li&gt;open in browser: &lt;a href=&quot;http://localhost:8983/solr/admin/luke?id=SP2514N&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/admin/luke?id=SP2514N&lt;/a&gt; (this fails with stack trace below)&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at org.apache.lucene.index.TermBuffer.set(TermBuffer.java:95)
	at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:158)
	at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:232)
	at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:179)
	at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:975)
	at org.apache.lucene.index.DirectoryReader.docFreq(DirectoryReader.java:627)
	at org.apache.solr.search.SolrIndexReader.docFreq(SolrIndexReader.java:308)
	at org.apache.solr.handler.admin.LukeRequestHandler.getDocumentFieldsInfo(LukeRequestHandler.java:248)
	at org.apache.solr.handler.admin.LukeRequestHandler.handleRequestBody(LukeRequestHandler.java:124)
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12777790" author="hossman" created="Sat, 14 Nov 2009 01:28:22 +0000"  >&lt;p&gt;&lt;br/&gt;
I&apos;ve deleted this comment, because the error case it describes is based on a completley faulty testing method ... i wasn&apos;t paying close enough attention to what data dir was getting used.&lt;/p&gt;</comment>
                            <comment id="12777792" author="hossman" created="Sat, 14 Nov 2009 01:31:36 +0000"  >&lt;p&gt;In all of the stack traces listed above, the NPE seems to be orriginating from an attempt to derefrence a string value that was returned by Fieldable.stringValue higher up in the call stack.&lt;/p&gt;

&lt;p&gt;Given the number of different code paths involved (some of which haven&apos;t changed from Solr 1.3 to Solr 1.4) I can&apos;t help but think something changed deep in lucene to cause null to be returned in cases where it wasn&apos;t returned in older versions of Lucene.  So far i haven&apos;t been able to figure out where.&lt;/p&gt;</comment>
                            <comment id="12781237" author="yseeley@gmail.com" created="Sun, 22 Nov 2009 22:29:00 +0000"  >&lt;p&gt;Attaching patch that fixes luke, and adds support for binary fields.&lt;/p&gt;</comment>
                            <comment id="12781244" author="yseeley@gmail.com" created="Sun, 22 Nov 2009 22:57:49 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="12872696" author="hossman" created="Fri, 28 May 2010 00:13:14 +0100"  >
&lt;p&gt;Correcting Fix Version based on CHANGES.txt, see this thread for more details...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12873822" author="hossman" created="Tue, 1 Jun 2010 00:28:27 +0100"  >&lt;p&gt;Committed revision 949889.&lt;/p&gt;

&lt;p&gt;merged to branch-1.4 for 1.4.1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12425776" name="SOLR-1563.patch" size="4138" author="yseeley@gmail.com" created="Sun, 22 Nov 2009 22:29:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 22 Nov 2009 22:29:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6107</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxkin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>