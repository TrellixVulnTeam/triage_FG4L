<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:21:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-924/SOLR-924.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-924] Solr: Making finalizers call super.finalize() wrapped in try..finally block </title>
                <link>https://issues.apache.org/jira/browse/SOLR-924</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There are some occurences of finalizers in the code base. While the presence of them is debatable and discussed in a separate JIRA - the ones that are retained are better off wrapped around a try .. finally block to recursively call the finalizer of the super class for proper resource usage unwinding , (in case finalizers get invoked ). &lt;/p&gt;</description>
                <environment>&lt;p&gt;Tomcat 6, JRE 6&lt;/p&gt;</environment>
        <key id="12410846">SOLR-924</key>
            <summary>Solr: Making finalizers call super.finalize() wrapped in try..finally block </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="kaykay.unique">Karthik K</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Dec 2008 21:57:21 +0000</created>
                <updated>Thu, 21 May 2009 14:01:11 +0100</updated>
                            <resolved>Sat, 20 Dec 2008 20:03:46 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                    <component>replication (java)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="12657180" author="kaykay.unique" created="Tue, 16 Dec 2008 21:59:08 +0000"  >&lt;p&gt;The following classes have their try .. finally clause implemented in finalizers set up for recursive call. &lt;/p&gt;

&lt;p&gt;Index: contrib/dataimporthandler/src/main/java/org/apache/solr/handler/dataimport/JdbcDataSource.java&lt;br/&gt;
Index: src/java/org/apache/solr/update/SolrIndexWriter.java&lt;br/&gt;
Index: src/java/org/apache/solr/core/SolrCore.java&lt;br/&gt;
Index: src/java/org/apache/solr/core/CoreContainer.java&lt;br/&gt;
Index: src/common/org/apache/solr/common/util/ConcurrentLRUCache.java&lt;/p&gt;</comment>
                            <comment id="12657293" author="noble.paul" created="Wed, 17 Dec 2008 05:35:03 +0000"  >&lt;p&gt;Why do we need to call a super.finalize() when the super class is java.lang.Object ?&lt;/p&gt;

&lt;p&gt;It achieves no purpose&lt;/p&gt;


</comment>
                            <comment id="12657421" author="kaykay.unique" created="Wed, 17 Dec 2008 15:25:24 +0000"  >&lt;p&gt;Not all of them seems to inherit from Object ( JdbcDataSource inherits from DataSource&amp;lt;?&amp;gt; ).  SolrIndexWriter from IndexWriter  etc.  So - to ensure proper cleanup of resources - we need to be having the try .. finally block around finalizers. &lt;/p&gt;</comment>
                            <comment id="12657669" author="noble.paul" created="Thu, 18 Dec 2008 04:34:49 +0000"  >&lt;p&gt;DataSource&amp;lt;?&amp;gt; is just an interface defined as an abstract class. For others it may be worth it.&lt;/p&gt;

&lt;p&gt;We do not have to be religious about this. if the superclass is doing something in the finalize then it is worth adding this or else we can drop it&lt;/p&gt;</comment>
                            <comment id="12657675" author="kaykay.unique" created="Thu, 18 Dec 2008 05:09:29 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; DataSource&amp;lt;?&amp;gt; is just an interface defined as an abstract class. For others it may be worth it.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;I believe we might as well be consistent when making changes instead of excluding based on specific super class implementation. &lt;/p&gt;</comment>
                            <comment id="12657702" author="hossman" created="Thu, 18 Dec 2008 07:40:06 +0000"  >&lt;p&gt;What Kay is suggesting is a pretty well established &quot;best practice&quot; .. even if you &lt;b&gt;know&lt;/b&gt; the super class has an empty finalize method it&apos;s still a good idea to call super.finalize() in a finally block because you have no garuntee someone else won&apos;t modify the implementation of the super class in a future version.  even when you subclass Object, super.finalize() is a good idea to protect yourself against yourself: future refactoring could inject a new super class (which could then gain a non-trivial finalize method)&lt;/p&gt;

&lt;p&gt;i really see no downside to the patch&lt;/p&gt;</comment>
                            <comment id="12658320" author="hossman" created="Sat, 20 Dec 2008 20:03:46 +0000"  >&lt;p&gt;Committed revision 728336.&lt;/p&gt;

&lt;p&gt;thanks Kay.&lt;/p&gt;</comment>
                            <comment id="12658331" author="kaykay.unique" created="Sat, 20 Dec 2008 23:01:10 +0000"  >&lt;p&gt;Thanks HossMan for committing the same. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12410659">SOLR-914</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12410659">SOLR-914</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12396242" name="SOLR-924.patch" size="2943" author="kaykay.unique" created="Tue, 16 Dec 2008 21:59:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Dec 2008 05:35:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxodb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>