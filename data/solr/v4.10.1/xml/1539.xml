<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:16:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1539/SOLR-1539.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1539] XPathEntityProcessor timeout when stream=true</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1539</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When setting stream=true on XPathEntityProcessor a separate thread is created to read whatever Reader is being used for rows while the original thread pumps a BlockingQueue.  This design allows the Reader to be read even when DIH cannot process documents as quickly as they become available in the Reader.&lt;/p&gt;

&lt;p&gt;This design has questionable value.  It adds complexity to the code with unclear benefits to the user.&lt;/p&gt;

&lt;p&gt;At any rate, the code incorrectly uses the BlockingQueue API:&lt;/p&gt;

&lt;p&gt;1.  Arbitrarily sets a 10 second timeout and fails when this timeout elapses before a row becomes available.&lt;br/&gt;
2.  Fails to check the return code when calling offer() to see if the item was successfully added or if the queue is full.&lt;br/&gt;
3.  Fails to stop consuming the Reader even after an import has failed or been aborted.&lt;/p&gt;

&lt;p&gt;The effect is that if a URL being processed pauses more than 10 seconds to think in between streaming rows, the XPathEntityProcessor fails.  Setting the readTimeout and connectionTimeout attributes on the dataSource does not address this bug because XPathEntityProcessor imposes its own timeout, hard-coded to 10 seconds.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12439691">SOLR-1539</key>
            <summary>XPathEntityProcessor timeout when stream=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="chris.eldredge">Chris Eldredge</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2009 18:39:15 +0000</created>
                <updated>Sat, 21 Nov 2009 07:57:27 +0000</updated>
                            <resolved>Sat, 21 Nov 2009 07:57:27 +0000</resolved>
                                    <version>1.4</version>
                                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12772594" author="chris.eldredge" created="Mon, 2 Nov 2009 18:40:44 +0000"  >&lt;p&gt;Patch against r831980 including test cases.&lt;/p&gt;</comment>
                            <comment id="12772863" author="noble.paul" created="Tue, 3 Nov 2009 03:21:31 +0000"  >&lt;p&gt;so you wish the queue timeout to be configurable? or to make it longer?&lt;/p&gt;</comment>
                            <comment id="12772872" author="lancenorskog" created="Tue, 3 Nov 2009 04:12:36 +0000"  >&lt;p&gt;Why does it need a separate thread?&lt;/p&gt;</comment>
                            <comment id="12773080" author="chris.eldredge" created="Tue, 3 Nov 2009 15:04:24 +0000"  >&lt;p&gt;In reply to Noble Paul, the timeout in this code is likely an unintended side-effect of incorrectly using the BlockingQueue.  This code should not have any timeout at all.  My patch (attached) corrects the code so there will be no timeout in this component.&lt;/p&gt;

&lt;p&gt;In replay to Lance Norskog, I&apos;m not sure a separate thread provides any advantage.  In theory it allows the data stream to be consumed at a different rate than documents can be processed but once the queue limit is reached any advantage goes away.  The extra thread can probably be removed but I was trying to fix the bugs I found in the least invasive way.&lt;/p&gt;</comment>
                            <comment id="12780930" author="noble.paul" created="Sat, 21 Nov 2009 07:57:27 +0000"  >&lt;p&gt;committed r882852&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12423838" name="SOLR-1539.patch" size="11074" author="chris.eldredge" created="Mon, 2 Nov 2009 18:40:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Nov 2009 03:21:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxknz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>