<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:18:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1653/SOLR-1653.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1653] add PatternReplaceCharFilter</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1653</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Add a new CharFilter that uses a regular expression for the target of replace string in char stream.&lt;/p&gt;

&lt;p&gt;Usage:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;schema.xml&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;fieldType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;textCharNorm&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt; positionIncrementGap=&lt;span class=&quot;code-quote&quot;&gt;&quot;100&quot;&lt;/span&gt; &amp;gt;
  &amp;lt;analyzer&amp;gt;
    &amp;lt;charFilter class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.PatternReplaceCharFilterFactory&quot;&lt;/span&gt;
                groupedPattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;([nN][oO]\.)\s*(\d+)&quot;&lt;/span&gt;
                replaceGroups=&lt;span class=&quot;code-quote&quot;&gt;&quot;1,2&quot;&lt;/span&gt; blockDelimiters=&lt;span class=&quot;code-quote&quot;&gt;&quot;:;&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;charFilter class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.MappingCharFilterFactory&quot;&lt;/span&gt; mapping=&lt;span class=&quot;code-quote&quot;&gt;&quot;mapping-ISOLatin1Accent.txt&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;tokenizer class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.WhitespaceTokenizerFactory&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/analyzer&amp;gt;
&amp;lt;/fieldType&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12443203">SOLR-1653</key>
            <summary>add PatternReplaceCharFilter</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="koji">Koji Sekiguchi</assignee>
                                    <reporter username="koji">Koji Sekiguchi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Dec 2009 16:52:26 +0000</created>
                <updated>Wed, 30 Mar 2011 16:45:53 +0100</updated>
                            <resolved>Tue, 15 Dec 2009 14:16:50 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>Schema and Analysis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12789957" author="koji" created="Sun, 13 Dec 2009 23:04:00 +0000"  >&lt;p&gt;I&apos;ll commit in a few days.&lt;/p&gt;</comment>
                            <comment id="12790026" author="shalinmangar" created="Mon, 14 Dec 2009 07:47:56 +0000"  >&lt;p&gt;Koji, even after reading through the test, I do not understand how to use it. Are the characters in curly braces, written down for non-groups only? What if I want to remove one particular group?&lt;/p&gt;

&lt;p&gt;It is always good to write a use-case and an example in the issue description itself.&lt;/p&gt;</comment>
                            <comment id="12790056" author="koji" created="Mon, 14 Dec 2009 09:23:40 +0000"  >&lt;p&gt;Ok. I&apos;ll show you same samples &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;INPUT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;groupedPattern&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;replaceGroups&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;OUTPUT&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;comment&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;see-ing looking&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(\w+)(ing)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;see-ing look&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;remove &quot;ing&quot; from the end of word&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;see-ing looking&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(\w+)ing&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;see-ing look&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;same as above. 2nd parentheses can be omitted&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;No.1 NO. no.  543&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;nN&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;oO&amp;#93;&lt;/span&gt;\.\s*(\d+)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;{#}
&lt;p&gt;,1&lt;/p&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;#1	NO.	#543&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sample for literal. do not forget to set blockDelimiters other than period when you use period in groupedPattern&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;abc=1234=5678&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(\w+)=(\d+)=(\d+)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3,
{=},1,{=}
&lt;p&gt;,2&lt;/p&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5678=abc=1234&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;change the order of the groups&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                            <comment id="12790067" author="noble.paul" created="Mon, 14 Dec 2009 09:42:52 +0000"  >&lt;p&gt;I guess this can be achieved with the matcher#replaceAll() directly &lt;/p&gt;

&lt;p&gt;input = see-ing looking&lt;br/&gt;
regex = (\w+)(ing)&lt;br/&gt;
replaceWith = $1&lt;/p&gt;

&lt;p&gt;input = abc=1234=5678&lt;br/&gt;
regex =(\w+)=(\d+)=(\d+)&lt;br/&gt;
replaceWith=$3=$1=$2&lt;/p&gt;
</comment>
                            <comment id="12790127" author="koji" created="Mon, 14 Dec 2009 12:53:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;I guess this can be achieved with the matcher#replaceAll() directly &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;re right if we don&apos;t correct offset of the output char stream. I need to process one match at a time.&lt;/p&gt;</comment>
                            <comment id="12790129" author="noble.paul" created="Mon, 14 Dec 2009 13:01:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;I need to process one match at a time.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I guess regex can process one match at a time. &lt;/p&gt;

&lt;p&gt;The most important point is that , we don&apos;t need to educate the users on this new  syntax. (I am still not clear about the syntax) . No need to write any parsing code and maintain it &lt;/p&gt;</comment>
                            <comment id="12790533" author="koji" created="Tue, 15 Dec 2009 02:53:13 +0000"  >&lt;p&gt;Excuse myself, because I tried to correct offset per group in a match when I started the first patch, I introduced my own syntax. But, yes, now I&apos;ve implemented the offset correction per match, so I can use standard syntax. Here is the new patch.&lt;/p&gt;

&lt;p&gt;Usage:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;schema.xml&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;fieldType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;textCharNorm&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt; positionIncrementGap=&lt;span class=&quot;code-quote&quot;&gt;&quot;100&quot;&lt;/span&gt; &amp;gt;
  &amp;lt;analyzer&amp;gt;
    &amp;lt;charFilter class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.PatternReplaceCharFilterFactory&quot;&lt;/span&gt;
                pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;([nN][oO]\.)\s*(\d+)&quot;&lt;/span&gt;
                replaceWith=&lt;span class=&quot;code-quote&quot;&gt;&quot;$1$2&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;charFilter class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.MappingCharFilterFactory&quot;&lt;/span&gt; mapping=&lt;span class=&quot;code-quote&quot;&gt;&quot;mapping-ISOLatin1Accent.txt&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;tokenizer class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.WhitespaceTokenizerFactory&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/analyzer&amp;gt;
&amp;lt;/fieldType&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If there is no objections, I&apos;ll commit later today.&lt;/p&gt;</comment>
                            <comment id="12790565" author="noble.paul" created="Tue, 15 Dec 2009 05:23:29 +0000"  >&lt;p&gt;In Solr we refer to Regular Expression Strings as &apos;regex&apos; . If you think &apos;pattern&apos; is ok , go ahead.&lt;/p&gt;</comment>
                            <comment id="12790572" author="koji" created="Tue, 15 Dec 2009 05:47:54 +0000"  >&lt;p&gt;I see that existing &quot;PatternReplaceFilter&quot; (not CharFilter) is using &quot;pattern&quot;. But it uses &quot;replacement&quot;, not &quot;replaceWith&quot;. I think I use &quot;pattern&quot; and &quot;replacement&quot;.&lt;/p&gt;</comment>
                            <comment id="12790577" author="shalinmangar" created="Tue, 15 Dec 2009 06:01:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;If there is no objections, I&apos;ll commit later today.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thanks Koji!&lt;/p&gt;</comment>
                            <comment id="12790751" author="koji" created="Tue, 15 Dec 2009 14:16:50 +0000"  >&lt;p&gt;Committed revision 890798. Thanks Shalin and Noble for taking time to review the patch.&lt;/p&gt;</comment>
                            <comment id="12797601" author="ijabz" created="Thu, 7 Jan 2010 11:45:05 +0000"  >&lt;p&gt;Hi, Im using in non Solr in an analyser, and think there maybe a performance issue because you cannot pass a compiled Pattern. In the reusableTokenStream() method you cannot reset a charfilter like you can a tokenizer so it as to recompile the pattern everytime &lt;/p&gt;

&lt;p&gt;i.e. &lt;br/&gt;
 public TokenStream reusableTokenStream(String fieldName, Reader reader) throws IOException {&lt;br/&gt;
        SavedStreams streams = (SavedStreams)getPreviousTokenStream();&lt;br/&gt;
        if (streams == null) &lt;/p&gt;
{
            streams = new SavedStreams();
            setPreviousTokenStream(streams);
            streams.tokenStream = new StandardTokenizer(Version.LUCENE_CURRENT,new PatternReplaceCharFilter(&quot;(no\\.) ([0-9]+)&quot;,&quot;$1$2,reader));
            streams.filteredTokenStream = new StandardFilter(streams.filteredTokenStream);
            streams.filteredTokenStream = new AccentFilter(streams.filteredTokenStream);
            streams.filteredTokenStream = new LowercaseFilter(streams.filteredTokenStream);
        }
&lt;p&gt;        else &lt;/p&gt;
{
            streams.tokenStream.reset(new PatternReplaceCharFilter(&quot;(no\\.) ([0-9]+)&quot;,&quot;$1$2&quot;,reader));
        }
&lt;p&gt;        return streams.filteredTokenStream;&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="12798271" author="koji" created="Sat, 9 Jan 2010 00:47:43 +0000"  >&lt;p&gt;Thanks, Paul! I&apos;ve just committed revision 897357.&lt;/p&gt;</comment>
                            <comment id="12872776" author="hossman" created="Fri, 28 May 2010 03:49:32 +0100"  >
&lt;p&gt;Correcting Fix Version based on CHANGES.txt, see this thread for more details...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13013215" author="gsingers" created="Wed, 30 Mar 2011 16:45:53 +0100"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427998" name="SOLR-1653.patch" size="17063" author="koji" created="Tue, 15 Dec 2009 02:53:13 +0000"/>
                            <attachment id="12427859" name="SOLR-1653.patch" size="22049" author="koji" created="Sun, 13 Dec 2009 17:00:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Dec 2009 07:47:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6022</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxjzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19556</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>