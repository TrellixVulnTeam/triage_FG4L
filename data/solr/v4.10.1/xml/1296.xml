<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:26:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1296/SOLR-1296.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1296] Enable opening IndexReader with termInfosIndexDivisor and setting IndexWriter&apos;s termIndexInterval</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1296</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We need to enable opening an IndexReader with termInfosIndexDivisor set in solrConfig.  &lt;/p&gt;

&lt;p&gt;We need to enable setting the termIndexInterval in SolrIndexConfig.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12430950">SOLR-1296</key>
            <summary>Enable opening IndexReader with termInfosIndexDivisor and setting IndexWriter&apos;s termIndexInterval</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="jasonrutherglen">Jason Rutherglen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jul 2009 18:41:13 +0100</created>
                <updated>Tue, 10 Nov 2009 15:52:11 +0000</updated>
                            <resolved>Sat, 12 Sep 2009 13:29:56 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="12733921" author="jasonrutherglen" created="Wed, 22 Jul 2009 01:37:02 +0100"  >&lt;ul&gt;
	&lt;li&gt;termInfosIndexDivisor is set in StandardIndexReaderFactory as&lt;br/&gt;
an optional parameter&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;termIndexInterval is obtained from SolrIndexConfig and set in&lt;br/&gt;
SolrIndexWriter&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Needs a test case&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12734363" author="jasonrutherglen" created="Wed, 22 Jul 2009 23:25:01 +0100"  >&lt;ul&gt;
	&lt;li&gt;Test case placed into TestConfig&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Created solrconfig-termindex.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;IndexReader.getTermInfosIndexDivisor is deprecated and probably can be turned on again in Lucene trunk&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12740749" author="jasonrutherglen" created="Fri, 7 Aug 2009 22:27:31 +0100"  >&lt;p&gt;Added the remainder of testTermIndexDivisor&lt;/p&gt;</comment>
                            <comment id="12742496" author="gsingers" created="Wed, 12 Aug 2009 19:05:48 +0100"  >&lt;p&gt;Looks like solrconfig-termindex.xml was not included in the patch.&lt;/p&gt;

&lt;p&gt;Also, not sure about exposing getIndexWriter() on the DUH2 just for testing purposes.  Is there another way to get at testing this?&lt;/p&gt;</comment>
                            <comment id="12742540" author="jasonrutherglen" created="Wed, 12 Aug 2009 20:36:54 +0100"  >&lt;ul&gt;
	&lt;li&gt;Added solrconfig-termindex.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I&apos;m not sure about IW access?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12743512" author="hossman" created="Sat, 15 Aug 2009 02:19:54 +0100"  >&lt;p&gt;This should do the trick...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class ExposeWriterHandler &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; DirectUpdateHandler2 {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ExposeWriterHandler() { &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(h.getCore()); }
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; getWriter() {
    forceOpenWriter();
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; writer;
  }
};
IndexWriter writer = (&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ExposeWriterHandler()).getWriter();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...since all that maters is you get &lt;em&gt;a&lt;/em&gt; writer using the configsfrom the core.&lt;/p&gt;

&lt;p&gt;If i&apos;m missing something then the next obvious solution would be to changed the &amp;lt;updateHandler class=&quot;...&quot;/&amp;gt; to pointat a concrete public class created for this test.&lt;/p&gt;


&lt;p&gt;BTW: do we really need solrconfig-termindex.xml ? .. why not just make these changes to the solrconfig.xml that TestConfig already uses?&lt;/p&gt;

</comment>
                            <comment id="12744622" author="jasonrutherglen" created="Tue, 18 Aug 2009 18:57:20 +0100"  >&lt;blockquote&gt;&lt;p&gt;This should do the trick... &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why would we go through the effort?  IW is a public Lucene class.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;do we really need solrconfig-termindex.xml&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We probably don&apos;t want all the tests to have different behavior.  &lt;/p&gt;</comment>
                            <comment id="12744638" author="gsingers" created="Tue, 18 Aug 2009 19:34:15 +0100"  >&lt;blockquote&gt;&lt;p&gt;Why would we go through the effort? IW is a public Lucene class.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because it&apos;s not publicly exposed in Solr and exposing it just for the sake of testing doesn&apos;t seem wise.&lt;/p&gt;</comment>
                            <comment id="12744642" author="jasonrutherglen" created="Tue, 18 Aug 2009 19:43:45 +0100"  >&lt;blockquote&gt;&lt;p&gt;Because it&apos;s not publicly exposed in Solr and exposing it just for the sake of testing doesn&apos;t seem wise.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you describe the worst case scenario you imagine will happen if IndexWriter is exposed?&lt;/p&gt;</comment>
                            <comment id="12744648" author="markrmiller@gmail.com" created="Tue, 18 Aug 2009 19:54:04 +0100"  >&lt;p&gt;People may start to use it and count on it, and we will have to needlessly support that.&lt;/p&gt;

&lt;p&gt;A public class in Lucene will still occasionally break back compat, and come with maintenance/deprecation as well. Just because its public in Lucene, that doesn&apos;t mean it should be public in Solr.&lt;/p&gt;

&lt;p&gt;For each little thing, its arguably never that big a deal - but a good policy keeps a bunch of little things from creeping.&lt;/p&gt;

&lt;p&gt;-1 on exposing anything just for tests.&lt;/p&gt;</comment>
                            <comment id="12744650" author="gsingers" created="Tue, 18 Aug 2009 19:55:55 +0100"  >&lt;blockquote&gt;&lt;p&gt;Can you describe the worst case scenario you imagine will happen if IndexWriter is exposed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, someone who thinks they know what they are doing closes the IW when it shouldn&apos;t be closed causing exceptions, etc and emails to solr-user, etc. and wasting the communities time.  However, the impetus is not on me to defend why it shouldn&apos;t be exposed, it&apos;s on you to show why it is proper to take something that is currently private and make it public just to pass a test.  If it needs to be public for other use cases, fine, but generally speaking, I don&apos;t think variables, etc. should be made public just for testing purposes.  That&apos;s bad OOD.&lt;/p&gt;</comment>
                            <comment id="12744679" author="jasonrutherglen" created="Tue, 18 Aug 2009 21:06:01 +0100"  >&lt;p&gt;For a test I agree it&apos;s not worth exposing IW publicly however&lt;br/&gt;
there should be a simple way to access it as a package protected&lt;br/&gt;
variable?&lt;/p&gt;

&lt;p&gt;A great example of a public Lucene API being exposed from Solr&lt;br/&gt;
that can easily break the system is getWrappedReader. IR is as&lt;br/&gt;
canonical to Lucene as IW. And calling close on IR will also&lt;br/&gt;
cause numerous errors for users. Why is it public, it&apos;s only&lt;br/&gt;
used internally to Solr? &lt;/p&gt;

&lt;p&gt;The Solr policy as it&apos;s being described isn&apos;t making sense to me.&lt;/p&gt;

&lt;p&gt;An answer to the second question?&lt;/p&gt;

&lt;blockquote&gt;&lt;blockquote&gt;&lt;p&gt;do we really need solrconfig-termindex.xml&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We probably don&apos;t want all the tests to have different behavior.&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="12744686" author="markrmiller@gmail.com" created="Tue, 18 Aug 2009 21:15:32 +0100"  >&lt;p&gt;I&apos;m not against exposing something package private for tests - anyone that jumps the fence to use that should know what they are getting themselves into.&lt;/p&gt;</comment>
                            <comment id="12754521" author="gsingers" created="Sat, 12 Sep 2009 13:29:56 +0100"  >&lt;p&gt;Committed revision 814160.&lt;/p&gt;

&lt;p&gt;Moved the termInfosIndexDivisor up to the abstract class.&lt;/p&gt;

&lt;p&gt;Implemented Hoss&apos;s Expose Writer option.  Added unit tests for the IndexReaderFactory.&lt;/p&gt;</comment>
                            <comment id="12775814" author="gsingers" created="Tue, 10 Nov 2009 15:52:11 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12416355" name="SOLR-1296.patch" size="24537" author="jasonrutherglen" created="Wed, 12 Aug 2009 20:36:54 +0100"/>
                            <attachment id="12415892" name="SOLR-1296.patch" size="7372" author="jasonrutherglen" created="Fri, 7 Aug 2009 22:27:31 +0100"/>
                            <attachment id="12414273" name="SOLR-1296.patch" size="24348" author="jasonrutherglen" created="Wed, 22 Jul 2009 23:25:01 +0100"/>
                            <attachment id="12414168" name="SOLR-1296.patch" size="3702" author="jasonrutherglen" created="Wed, 22 Jul 2009 01:37:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Aug 2009 18:05:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxm3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19901</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>