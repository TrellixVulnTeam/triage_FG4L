<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-769/SOLR-769.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-769] Support Document and Search Result clustering</title>
                <link>https://issues.apache.org/jira/browse/SOLR-769</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Clustering is a useful tool for working with documents and search results, similar to the notion of dynamic faceting.  Carrot2 (&lt;a href=&quot;http://project.carrot2.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://project.carrot2.org/&lt;/a&gt;) is a nice, BSD-licensed, library for doing search results clustering.  Mahout (&lt;a href=&quot;http://lucene.apache.org/mahout&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.apache.org/mahout&lt;/a&gt;) is well suited for whole-corpus clustering.  &lt;/p&gt;

&lt;p&gt;The patch I lays out a contrib module that starts off w/ an integration of a SearchComponent for doing clustering and an implementation using Carrot.  In search results mode, it will use the DocList as the input for the cluster.   While Carrot2 comes w/ a Solr input component, it is not the same as the SearchComponent that I have in that the Carrot example actually submits a query to Solr, whereas my SearchComponent is just chained into the Component list and uses the ResponseBuilder to add in the cluster results.&lt;/p&gt;

&lt;p&gt;While not fully fleshed out yet, the collection based mode will take in a list of ids or just use the whole collection and will produce clusters.  Since this is a longer, typically offline task, there will need to be some type of storage mechanism (and replication??????) for the clusters.  I &lt;em&gt;may&lt;/em&gt; push this off to a separate JIRA issue, but I at least want to present the use case as part of the design of this component/contrib.  It may even make sense that we split this out, such that the building piece is something like an UpdateProcessor and then the SearchComponent just acts as a lookup mechanism.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12404143">SOLR-769</key>
            <summary>Support Document and Search Result clustering</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="dweiss">Dawid Weiss</assignee>
                                    <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Sep 2008 03:58:18 +0100</created>
                <updated>Mon, 28 Jul 2014 13:35:47 +0100</updated>
                                                            <fixVersion>1.4</fixVersion>
                                    <component>contrib - Clustering</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>20</watches>
                                                                <comments>
                            <comment id="12638637" author="gsingers" created="Fri, 10 Oct 2008 21:00:37 +0100"  >&lt;p&gt;Starting docs at &lt;a href=&quot;http://wiki.apache.org/solr/ClusteringComponent&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/ClusteringComponent&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12638791" author="gsingers" created="Sat, 11 Oct 2008 20:29:34 +0100"  >&lt;p&gt;Patch soon, as a start.  I&apos;m going to check in the basic directory structure and libs, and then provide a patch with the source that we can iterate on.&lt;/p&gt;</comment>
                            <comment id="12638794" author="gsingers" created="Sat, 11 Oct 2008 20:54:00 +0100"  >&lt;p&gt;Clustering libs&lt;/p&gt;</comment>
                            <comment id="12638795" author="gsingers" created="Sat, 11 Oct 2008 21:05:39 +0100"  >&lt;p&gt;First draft of a patch.&lt;/p&gt;

&lt;p&gt;Notes:&lt;/p&gt;

&lt;p&gt;1. Carrot2 uses the snowball stemmers, but it shouldn&apos;t clash, b/c it actually slightly changes the names of them to be like englishStemmer (as opposed to EnglishStemmer).  I&apos;m debating whether or not to just re-implement this so that it can use the same snowball stemmers we use in Solr.  Probably not a big deal.&lt;/p&gt;

&lt;p&gt;2. I haven&apos;t implemented document clustering yet.  To do this, I need to setup a background thread that will be spawned to do the clustering, since it is presumably going through some large set of documents and clustering them.  To do this, it will probably require term vectors.  This will introduce a dep. on Mahout, so I&apos;ll need a version of that library too.&lt;/p&gt;

&lt;p&gt;3. It would be really cool for the Carrot2 implementation to support using other clustering algs besides Lingo.  Basically, this just needs to be factored into the configuration and the jars included in the distribution.  This is not a high priority for me at the moment.&lt;/p&gt;

&lt;p&gt;TODO:&lt;br/&gt;
More tests.&lt;br/&gt;
Decide on output format&lt;br/&gt;
Implement doc. clustering framework part (i.e. spawning of threads, commands)&lt;br/&gt;
????&lt;/p&gt;</comment>
                            <comment id="12638813" author="gsingers" created="Sun, 12 Oct 2008 03:27:44 +0100"  >&lt;p&gt;More updates, added example&lt;/p&gt;</comment>
                            <comment id="12638814" author="gsingers" created="Sun, 12 Oct 2008 03:34:10 +0100"  >&lt;p&gt;Still to do, more testing, get feedback, implement basics of doc. clustering.  This last piece will take some more design work.  Also need to validate some more that the results make sense for search results clustering, but my first look suggests they do.&lt;/p&gt;</comment>
                            <comment id="12638875" author="ab" created="Sun, 12 Oct 2008 19:03:31 +0100"  >&lt;p&gt;FYI, Carrot2 does support a handful of different clustering algorithms (the ones I know of are Fuzzy Ants, KMeans and Suffix Tree, in addition to Lingo).&lt;/p&gt;</comment>
                            <comment id="12638924" author="gsingers" created="Mon, 13 Oct 2008 00:37:15 +0100"  >&lt;p&gt;Yeah, I probably will include the other jars and make it easy to include them.  For now, I wanted to get something basic working for a talk I&apos;m giving on Wednesday night &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12639831" author="gsingers" created="Wed, 15 Oct 2008 14:11:31 +0100"  >&lt;p&gt;Here&apos;s a patch that actually passes the tests.&lt;/p&gt;

&lt;p&gt;Note, there&apos;s still a little oddity with the Snowball program that needs to be worked out, thus I don&apos;t recommend running this patch in production yet.  The issue is that both Carrot and Solr have deps on Snowball, but on different versions, furthermore, Carrot2 goes one further and slightly modifies the names of Snowball.&lt;/p&gt;

&lt;p&gt;I will upload new libs in a minute.&lt;/p&gt;</comment>
                            <comment id="12639833" author="gsingers" created="Wed, 15 Oct 2008 14:12:56 +0100"  >&lt;p&gt;Untar in contrib/clustering/lib.&lt;/p&gt;</comment>
                            <comment id="12639835" author="gsingers" created="Wed, 15 Oct 2008 14:20:33 +0100"  >&lt;p&gt;Note, also, that even though I put in support for some of the other C2 (Carrot2) algorithms, I don&apos;t think they quite work yet.  I think they require passing in more parameters to set some algorithm properties (for instance, for Fuzzy Ants, I think you need to set a depth) and I haven&apos;t figured those out yet.  If you have C2 experience, insight would be appreciated.&lt;/p&gt;

&lt;p&gt;For now, stick to Lingo.&lt;/p&gt;</comment>
                            <comment id="12641119" author="gsingers" created="Mon, 20 Oct 2008 19:55:33 +0100"  >&lt;p&gt;Removed the alternate algorithm implementations, but left in some of the framework for adding them.  The Carrot2 maintainers are likely to remove Fuzzy Ants and some of the other implementations in 3.0, which is due out sometime soon.  Thus, I&apos;d rather not support something that isn&apos;t recommended.&lt;/p&gt;

&lt;p&gt;I&apos;m likely to commit this fairly soon.&lt;/p&gt;

&lt;p&gt;-Grant&lt;/p&gt;</comment>
                            <comment id="12641342" author="gsingers" created="Tue, 21 Oct 2008 11:41:59 +0100"  >&lt;p&gt;OK, here&apos;s a first scratch at the component side of document clustering.  There are no implementations of the DocumentClusteringEngine yet, so I am bit hesitant to even throw out a proposed API for that yet, but the current one is pretty generic, which is both good and bad.  I don&apos;t particularly like passing around something as open as SolrParams, but I don&apos;t think I can pin down a generic set of explicit parameters either.&lt;/p&gt;</comment>
                            <comment id="12641377" author="gsingers" created="Tue, 21 Oct 2008 14:28:36 +0100"  >&lt;p&gt;How about a patch where the tests pass?  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Here ya go...&lt;/p&gt;</comment>
                            <comment id="12641812" author="vaiju1981" created="Wed, 22 Oct 2008 14:12:47 +0100"  >&lt;p&gt;Hi Grant,&lt;/p&gt;

&lt;p&gt;For just minor copying of .txt file I got this working without any problems. &lt;/p&gt;

&lt;p&gt;So what would be the procedure to add some clustering code beyond carrot or other available libraries.&lt;/p&gt;

&lt;p&gt;--Thanks and Regards&lt;br/&gt;
Vaijanath&lt;/p&gt;</comment>
                            <comment id="12641823" author="gsingers" created="Wed, 22 Oct 2008 14:34:55 +0100"  >&lt;blockquote&gt;&lt;p&gt;So what would be the procedure to add some clustering code beyond carrot or other available libraries.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Essentially, you need to implement either a SearchClusteringEngine or a DocumentClusteringEngine and then hook declare it in the SearchComponent configuration, as is done with the Carrot2 example here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;engine&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;!-- The name, only one can be named &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt; --&amp;gt;
      &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;lt;/str&amp;gt;
      &amp;lt;!-- Carrot2 specific parameters.  See the Carrot2 site &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details on setting. --&amp;gt;
      &amp;lt;!-- carrot.algorithm:   Optional.  Currently only
      lingo is supported pending the release of Carrot2 3.0.  
       --&amp;gt;
      &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;carrot.algorithm&quot;&lt;/span&gt;&amp;gt;lingo&amp;lt;/str&amp;gt;
      &amp;lt;!-- Lingo specific --&amp;gt;
      &amp;lt;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;carrot.lingo.threshold.clusterAssignment&quot;&lt;/span&gt;&amp;gt;0.150&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;&amp;gt;
      &amp;lt;&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;carrot.lingo.threshold.candidateClusterThreshold&quot;&lt;/span&gt;&amp;gt;0.775&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;&amp;gt;
    &amp;lt;/lst&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or, in the mock setup:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;engine&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;!-- The name, only one can be named &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt; --&amp;gt;
      &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;&amp;gt;docEngine&amp;lt;/str&amp;gt;
      &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;classname&quot;&lt;/span&gt;&amp;gt;org.apache.solr.handler.clustering.MockDocumentClusteringEngine&amp;lt;/str&amp;gt;
    &amp;lt;/lst&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you don&apos;t declare the classname value, then it assumes the Carrot implementation.&lt;/p&gt;

&lt;p&gt;Naturally, you need to take care of all the libraries being available to Solr, etc. just as you would for any plugin.&lt;/p&gt;

&lt;p&gt;Since you are interested in clustering, Vaijanath, it would be good to get your feedback on the APIs.  Are you doing full document clustering or just search snippet clustering?   Also, if you are using an open source clustering library that has acceptable licensing terms (i.e. not GPL or similar), perhaps consider contributing an implementation of the engine and then we can make it available to everyone.&lt;/p&gt;</comment>
                            <comment id="12641832" author="vaiju1981" created="Wed, 22 Oct 2008 14:53:18 +0100"  >&lt;p&gt;Hi Grant,&lt;/p&gt;

&lt;p&gt;Till now I have worked mostly with full document clustering. Had never thought of search snippet clustering.  I will definitely pitch in for clustering library. There are many libraries which have favourable/acceptable licensing terms which can be added to Solr.&lt;/p&gt;

&lt;p&gt;--Thanks and Regards&lt;br/&gt;
Vaijanath&lt;/p&gt;</comment>
                            <comment id="12642179" author="bruce@jivesoftware.com" created="Thu, 23 Oct 2008 16:09:57 +0100"  >&lt;p&gt;Grant,&lt;/p&gt;

&lt;p&gt;This patch looks very promising, I can&apos;t wait to give it a try and find a way to incorporate it into a project I&apos;m working on (when it&apos;s ready of course ... likely not till after Carrot2 3  is released though)&lt;/p&gt;

&lt;p&gt;Can you give a quick estimate as to the performance impact of enabling clustering in search results mode? In the example @ &lt;a href=&quot;http://wiki.apache.org/solr/ClusteringFullResultsExample&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/ClusteringFullResultsExample&lt;/a&gt; the query time seems pretty high and I was wondering if that was a result of this patch or something else?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Bruce Ritchie&lt;/p&gt;</comment>
                            <comment id="12642182" author="stanislaw.osinski" created="Thu, 23 Oct 2008 16:14:25 +0100"  >&lt;p&gt;Bruce,&lt;/p&gt;

&lt;p&gt;For performance of the clustering algorithm alone, please take a look at: &lt;a href=&quot;http://project.carrot2.org/algorithms.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://project.carrot2.org/algorithms.html&lt;/a&gt;&lt;br/&gt;
Obviously, you&apos;d need to add the overhead of fetching the snippets / documents from the index. Not sure how many are fetched and whether they come from Solr&apos;s cache or not, so not sure if clustering or fetching time is prevailing.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Staszek&lt;/p&gt;</comment>
                            <comment id="12642187" author="gsingers" created="Thu, 23 Oct 2008 16:31:26 +0100"  >&lt;p&gt;Hi Bruce,&lt;/p&gt;

&lt;p&gt;I haven&apos;t done any perf. testing, as I&apos;ve been focused on functionality first.  However, I&apos;m not sure whether that query was the first one run, or not, so I don&apos;t know the status of the searcher, etc.  I&apos;m pretty sure I don&apos;t have any warming queries, etc.&lt;/p&gt;</comment>
                            <comment id="12663332" author="gsingers" created="Tue, 13 Jan 2009 13:53:51 +0000"  >&lt;p&gt;Updated to trunk.  See &lt;a href=&quot;http://wiki.apache.org/solr/ClusteringComponent&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/ClusteringComponent&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12672278" author="gsingers" created="Tue, 10 Feb 2009 14:43:30 +0000"  >&lt;p&gt;Here&apos;s a patch for Carrot2 3.0 that COMPILES ONLY.  &lt;br/&gt;
You will need to download the clustering-libs.tar.gz from &lt;a href=&quot;http://people.apache.org/~gsingers/clustering-libs.tar.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~gsingers/clustering-libs.tar.gz&lt;/a&gt; as it is too big to upload to JIRA.&lt;/p&gt;

&lt;p&gt;TODO:&lt;br/&gt;
1. Tests passing and more tests&lt;br/&gt;
2. Update NOTICE.txt and LICENSE.txt&lt;br/&gt;
3. Get trimmed down Carrot2 library that doesn&apos;t have all the Document Source dependencies, and preferably the web services deps.  Solr doesn&apos;t need the Google, etc. API deps.  Preferably remove the LGPL deps too, but for now, they are downloaded via ANT from the Maven repositories.&lt;br/&gt;
4. Update the Maven template&lt;br/&gt;
5. Hook in the builds&lt;br/&gt;
6. Make sure the example works&lt;/p&gt;</comment>
                            <comment id="12672281" author="stanislaw.osinski" created="Tue, 10 Feb 2009 14:50:08 +0000"  >&lt;p&gt;Hi Grant,&lt;/p&gt;

&lt;p&gt;I&apos;ve added a Carrot2 issue referring to point 3 on your TODO list: &lt;a href=&quot;http://issues.carrot2.org/browse/CARROT-457&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.carrot2.org/browse/CARROT-457&lt;/a&gt;. I&apos;ll be looking into this over the weekend.&lt;/p&gt;

&lt;p&gt;Staszek&lt;/p&gt;</comment>
                            <comment id="12680940" author="stanislaw.osinski" created="Wed, 11 Mar 2009 17:37:59 +0000"  >&lt;p&gt;Yet another patch, this time with passing unit tests and working example. Will make some more comments in a sec. Please use &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-769&quot; title=&quot;Support Document and Search Result clustering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-769&quot;&gt;SOLR-769&lt;/a&gt;-lib.zip libs with this patch.&lt;/p&gt;</comment>
                            <comment id="12680942" author="stanislaw.osinski" created="Wed, 11 Mar 2009 17:43:45 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;I&apos;ve just uploaded a patch that passes unit tests and has working example, but this is by no means a final version. A few outstanding questions / issues:&lt;/p&gt;

&lt;p&gt;1. Response structure.&lt;/p&gt;

&lt;p&gt;I was wondering &amp;#8211; to we need to repeat the document contents in the &apos;clusters&apos; response section? Assuming that each document in the index has a unique ID, we could reduce the size of the response by just referencing documents by IDs like this:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;clusters&quot;&lt;/span&gt;&amp;gt;
 &amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;numClusters&quot;&lt;/span&gt;&amp;gt;3&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;
 &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;label&quot;&lt;/span&gt;&amp;gt;GPU VPU Clocked&amp;lt;/str&amp;gt;
  &amp;lt;/lst&amp;gt;
  &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;&amp;gt;EN7800GTX/2DHTV/256M&amp;lt;/str&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;&amp;gt;100-435805&amp;lt;/str&amp;gt;
  &amp;lt;/lst&amp;gt;
 &amp;lt;/lst&amp;gt;
 &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;label&quot;&lt;/span&gt;&amp;gt;Hard Drive&amp;lt;/str&amp;gt;
  &amp;lt;/lst&amp;gt;
  &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;&amp;gt;6H500F0&amp;lt;/str&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;&amp;gt;SP2514N&amp;lt;/str&amp;gt;
  &amp;lt;/lst&amp;gt;
 &amp;lt;/lst&amp;gt;
 &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;cluster&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;label&quot;&lt;/span&gt;&amp;gt;Other Topics&amp;lt;/str&amp;gt;
  &amp;lt;/lst&amp;gt;
  &amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;&amp;gt;9885A004&amp;lt;/str&amp;gt;
  &amp;lt;/lst&amp;gt;
 &amp;lt;/lst&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Actually, this is what I&apos;ve implemented in the patch.&lt;/p&gt;

&lt;p&gt;Also, in case of hierarchical clusters I&apos;ve introduced a grouping entity called &quot;clusters&quot; so that the top- and sub-levels or the response are consistent (see unit tests). Please let me know if this makes sense.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
2. Build: compile warnings about missing SimpleXML&lt;/p&gt;

&lt;p&gt;SimpleXML is one of the problematic dependencies as it&apos;s GPL. Luckily, it&apos;s not needed at runtime, but generates warnings about missing dependencies during compile time. So the option is either to live with the warnings or to add SimpleXML (version 1.7.2) to get rid of the warnings.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
3. Build: copying of protowords.txt etc&lt;/p&gt;

&lt;p&gt;The patch includes lexical files both in the contrib/clustering/src/java/test/resources/.... and in the examples dir. I&apos;m not sure how this is handled though &amp;#8211; do you keep copies in the repository or copy those somehow in the build?
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
4. Highlighting&lt;/p&gt;

&lt;p&gt;This is the bit I&apos;ve not yet fully analyzed. In general, Carrot2 should fairly well handle full documents (up to say a few hundred kB each), it&apos;s just the number of documents that must be in the order of hundreds. Therefore, highlighting is not mandatory, but it may sometimes improve the quality of clusters.&lt;/p&gt;

&lt;p&gt;I was wondering, if highlighting is performed earlier in the Solr pipeline, could this be reused during clustering? One possible approach could be that clustering uses whatever is fed from the pipeline: if highlighting is enabled, clustering will be performed on the highlighted content, if there was no highlighting, we&apos;d cluster full documents. Not sure if that&apos;s reasonable / possible to implement though.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
5. Documentation (wiki) updates&lt;/p&gt;

&lt;p&gt;Once we stabilise the ideas, I&apos;m happy to update the wiki with regard to the algorithms used (Lingo/STC) and passing additional parameters.&lt;/p&gt;</comment>
                            <comment id="12683008" author="stanislaw.osinski" created="Wed, 18 Mar 2009 12:51:10 +0000"  >&lt;p&gt;Libs with Carrot2 v3.0.1 we&apos;ve just released.&lt;/p&gt;</comment>
                            <comment id="12683854" author="shalinmangar" created="Fri, 20 Mar 2009 11:56:10 +0000"  >&lt;p&gt;Marking for 1.4 release&lt;/p&gt;</comment>
                            <comment id="12684014" author="stanislaw.osinski" created="Fri, 20 Mar 2009 20:09:41 +0000"  >&lt;p&gt;Further code clean-ups, support for passing intialization-time attributes to Carrot2 algorithms, some comments in the example configuration file.&lt;/p&gt;</comment>
                            <comment id="12688132" author="gsingers" created="Sun, 22 Mar 2009 13:56:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Highlighting:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, that&apos;s an interesting thought.  We could check to see if highlighting is done first.&lt;/p&gt;

&lt;p&gt;Also, you say C2 can handle full docs, is it feasible, then to implement it for the &quot;offline&quot; mode I have in mind, whereby you cluster the whole collection offline and then store the clusters for retrieval?  I haven&apos;t implemented this yet, but was thinking some people will be interested in full corpus clustering.  The nice thing, then, is that as new documents come in, they can be added to existing clusters (and maybe periodically, we re-cluster).  Just thinking outloud.&lt;/p&gt;

&lt;p&gt;Rest of the stuff in that comment sounds good.  I will try out the patch.&lt;/p&gt;</comment>
                            <comment id="12688141" author="gsingers" created="Sun, 22 Mar 2009 16:03:10 +0000"  >&lt;p&gt;Should the MockClusteringAlgorithm be under the test source tree and not the main one?  I moved it in the patch to follow&lt;/p&gt;

&lt;p&gt;I don&apos;t think we need to output the number of clusters, since that will be obvious from the list size.  I dropped it in the patch to follow&lt;/p&gt;

&lt;p&gt;Also, on the response structure, we certainly could make it optional, although it means having to go do a lookup in the real doc list, which could be less than fun.&lt;/p&gt;

&lt;p&gt;Patch to follow&lt;/p&gt;</comment>
                            <comment id="12688171" author="stanislaw.osinski" created="Sun, 22 Mar 2009 21:09:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also, you say C2 can handle full docs, is it feasible, then to implement it for the &quot;offline&quot; mode I have in mind, whereby you cluster the whole collection offline and then store the clusters for retrieval? I haven&apos;t implemented this yet, but was thinking some people will be interested in full corpus clustering. The nice thing, then, is that as new documents come in, they can be added to existing clusters (and maybe periodically, we re-cluster). Just thinking outloud.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We have two variables here: the length of docs and the number of docs. Carrot2 is suitable for small numbers of docs (up to say 1000). If the docs are short (a paragraph or so), the clustering should be pretty fast, suitable for on-line processing (see: &lt;a href=&quot;http://project.carrot2.org/algorithms.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://project.carrot2.org/algorithms.html&lt;/a&gt;). If the documents get longer, Carrot2 will still handle them, but will require some more time for processing, I&apos;ll try to do some measurements. But C2 is not useful for the &quot;whole collection&quot; case &amp;#8211; it performs all processing in-memory and here we&apos;d need a totally different class of algorithm, something along the lines of Mahout developments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Hmm, that&apos;s an interesting thought. We could check to see if highlighting is done first.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To quickly summarise the pros and cons of relying on highlighting being done outside of the clustering component:&lt;/p&gt;

&lt;p&gt;Pros:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;we avoid duplication of processing (highlighting being done twice)&lt;/li&gt;
	&lt;li&gt;simpler code of the clustering component, less configuration&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Cons:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;if someone doesn&apos;t want highlighting in the search results, the clustering is likely to take more time (because it operates on full documents, and it&apos;s controlled globally)&lt;/li&gt;
	&lt;li&gt;depending on the highlighter, we may get some markup in the summaries, which may affect clustering (I&apos;d need to check how Carrot2 handles that)&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;Should the MockClusteringAlgorithm be under the test source tree and not the main one? I moved it in the patch to follow &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Absolutely, it should be in the test source.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t think we need to output the number of clusters, since that will be obvious from the list size. I dropped it in the patch to follow&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Makes sense, I kept it because the original version had it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, on the response structure, we certainly could make it optional, although it means having to go do a lookup in the real doc list, which could be less than fun.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;By &quot;lookup&quot; you mean the lookup in the XML response? Here again we have a trade off between the length of the response and ease of processing: if we repeat document titles / snippets in the clusters structure, we at least double the response size (at least because the same document may belong to many clusters), but can potentially save some lookups. But if we want to get some other fields of a document (other than we repeat in the clusters list), we&apos;d still need a lookup. &lt;/p&gt;

&lt;p&gt;To sum up, my intuition would be to avoid duplication and stick with document ids in cluster list (this is what we do in Carrot2 XMLs as well). Optionally, the clustering component could have a list of configurable fields to be repeated in the cluster list if that&apos;s really helpful in real-word use cases.&lt;/p&gt;</comment>
                            <comment id="12695401" author="gsingers" created="Fri, 3 Apr 2009 15:28:40 +0100"  >&lt;p&gt;Hi Stanislaw,&lt;/p&gt;

&lt;p&gt;I&apos;m going to commit soon and I was wondering if Carrot2 has a handy place where they keep all the licenses and notices so that I can fill out Solr&apos;s NOTICE.txt and LICENSE.txt.  If not, I will go collate them.&lt;/p&gt;</comment>
                            <comment id="12695463" author="stanislaw.osinski" created="Fri, 3 Apr 2009 16:52:26 +0100"  >&lt;p&gt;Hi Grant,&lt;/p&gt;

&lt;p&gt;If you download &lt;a href=&quot;http://download.carrot2.org/stable/carrot2-java-api-3.0.1.zip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.carrot2.org/stable/carrot2-java-api-3.0.1.zip&lt;/a&gt;, you&apos;ll find licenses in the lib/ folder of the distribution. That distribution contains slightly more JARs than needed for Solr (which uses carrot2-mini.jar), so you&apos;d need to pick only those that are relevant.&lt;/p&gt;

&lt;p&gt;S.&lt;/p&gt;</comment>
                            <comment id="12699908" author="gsingers" created="Thu, 16 Apr 2009 23:22:53 +0100"  >&lt;p&gt;Looks like we need to make the NNI JAR be a download, too, right?  It appears to be LGPL.  Where does that library come from, anyway?  I don&apos;t see it on Carrot trunk, but it is in the zip.  And a search for it doesn&apos;t reveal much.&lt;/p&gt;

&lt;p&gt;-Grant&lt;/p&gt;</comment>
                            <comment id="12700028" author="stanislaw.osinski" created="Fri, 17 Apr 2009 07:36:22 +0100"  >&lt;p&gt;NNI JAR is indeed LGPL, it comes from MTJ: &lt;a href=&quot;http://ressim.berlios.de/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ressim.berlios.de/&lt;/a&gt;. It&apos;s also included in Carrot2 trunk, not in the main lib/ dir, but in /core/carrot2-util-matrix/lib.&lt;/p&gt;

&lt;p&gt;At the time we integrated it with Carrot2 (a few years ago), it used to be distributed as a separate dependency for MTJ, wow it&apos;s included in MTJ JAR. As MTJ is quite big and we need literally two classes that are in nni.jar, I&apos;d prefer to make the NNI JAR as it is a part of download, with a reference to the MTJ project. Would that make sense?&lt;/p&gt;

&lt;p&gt;S.&lt;/p&gt;</comment>
                            <comment id="12700634" author="gsingers" created="Mon, 20 Apr 2009 02:56:59 +0100"  >&lt;p&gt;OK, I think this is ready to go, except I still need to double check how it works with release.   Since we can&apos;t distribute LGPL, this is going to have to be a source only release artifact and thus can never be in the WAR, unfortunately.&lt;/p&gt;

&lt;p&gt;The tarball contains the JAR files that one needs, with the exception of the LGPL deps which are downloaded from the approp. places.&lt;/p&gt;</comment>
                            <comment id="12709153" author="gsingers" created="Wed, 13 May 2009 22:57:15 +0100"  >&lt;p&gt;OK, I think all the ducks are in a row.  &lt;/p&gt;

&lt;p&gt;I intend to commit on Friday.&lt;/p&gt;</comment>
                            <comment id="12710087" author="stanislaw.osinski" created="Sat, 16 May 2009 10:09:22 +0100"  >&lt;p&gt;Thanks Grant! Looking forward to seeing the code in the repo!&lt;/p&gt;

&lt;p&gt;S.&lt;/p&gt;</comment>
                            <comment id="12710093" author="allahbaksh" created="Sat, 16 May 2009 10:51:31 +0100"  >&lt;p&gt;Hi Grant,&lt;br/&gt;
I am looking forward keenly to see this feature. I want to see it in action as soon as possible. When the Code will be comitted to repo?&lt;/p&gt;</comment>
                            <comment id="12711137" author="gsingers" created="Wed, 20 May 2009 14:32:16 +0100"  >&lt;p&gt;Committed revision 776692.&lt;/p&gt;

&lt;p&gt;Thanks to everyone who helped out, especially Carrot2 creators Dawid and Stanislaw.&lt;/p&gt;</comment>
                            <comment id="12711883" author="bgiaccio" created="Fri, 22 May 2009 01:35:39 +0100"  >&lt;p&gt;This is a patch to add shard support to the ClusteringComponent.  &lt;/p&gt;

&lt;p&gt;Much like the recently posted spell check shard patch it simply implements finishStage and stitches the response together.&lt;/p&gt;

&lt;p&gt;A second option would have been to move the body of the process method to finishStage.  This would have the benefit of only needing to do the clustering on the final set of responses. After the QueryComponent does its job of creating the final result set.   This would also not make finishStage be so dependent on what is happening in the engines when they create their cluster response.&lt;/p&gt;

&lt;p&gt;I&apos;m still trying to wrap my head around TestDistributedSearch so see how I can provide test methods.&lt;/p&gt;

&lt;p&gt;If option 2 that I laid out is preferred I should be able to provide a patch for that as well.&lt;/p&gt;</comment>
                            <comment id="12712165" author="gsingers" created="Fri, 22 May 2009 18:03:35 +0100"  >&lt;blockquote&gt;&lt;p&gt;A second option would have been to move the body of the process method to finishStage. This would have the benefit of only needing to do the clustering on the final set of responses. After the QueryComponent does its job of creating the final result set. This would also not make finishStage be so dependent on what is happening in the engines when they create their cluster response&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I would say that this is actually the correct way to do this, as opposed to just stitching the results together.  For example, it may very well make sense that results from shard 1 belong in cluster A when clustered on the main node, whereas they belong to cluster B when only clustered on the shard.  &lt;/p&gt;

&lt;p&gt;If you can make that change and then add some tests, I can commit.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m still trying to wrap my head around TestDistributedSearch so see how I can provide test methods.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please add any insight you have to &lt;a href=&quot;http://wiki.apache.org/solr/WritingDistributedSearchComponents&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/WritingDistributedSearchComponents&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12712420" author="koji" created="Sat, 23 May 2009 14:29:44 +0100"  >&lt;p&gt;(snip off from &lt;a href=&quot;http://www.nabble.com/questions-about-Clustering-tt23681134.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/questions-about-Clustering-tt23681134.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;I&apos;d like to use this cool stuff on an environment other than English, e.g. Japanese.&lt;/p&gt;

&lt;p&gt;I&apos;ve implemented Carrot2JapaneseAnalyzer (w/ Payload/ITokenType) for this purpose. It worked well with ClusteringDocumentList example, but didn&apos;t work with CarrotClusteringEngine.&lt;/p&gt;

&lt;p&gt;What I did is that I inserted the following lines(&apos;+&apos;) to CarrotClusteringEngine:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
attributes.put(AttributeNames.QUERY, query.toString());
+ attributes.put(AttributeUtils.getKey(Tokenizer.class, &lt;span class=&quot;code-quote&quot;&gt;&quot;analyzer&quot;&lt;/span&gt;),
+ Carrot2JapaneseAnalyzer.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There is no runtime errors, but Carrot2 didn&apos;t use my analyzer, it just ignored and used ExtendedWhitespaceAnalyzer (confirmed via debugger).&lt;/p&gt;

&lt;p&gt;Is it classloader problem? I placed my jar in $&lt;/p&gt;
{solr.solr.home}
&lt;p&gt;/lib .&lt;/p&gt;</comment>
                            <comment id="12712421" author="stanislaw.osinski" created="Sat, 23 May 2009 14:35:07 +0100"  >&lt;p&gt;Pasting the comment I made on the list:&lt;/p&gt;

&lt;p&gt;The catch with analyzer is that this specific attribute is an initialization-time attribute, so you need to add it to the &lt;tt&gt;initAttributes&lt;/tt&gt; map in the &lt;tt&gt;init()&lt;/tt&gt; method of &lt;tt&gt;CarrotClusteringEngine&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Please let me know if this solves the problem. If not, I&apos;ll investigate further.&lt;/p&gt;</comment>
                            <comment id="12712442" author="koji" created="Sat, 23 May 2009 17:28:34 +0100"  >&lt;blockquote&gt;&lt;p&gt;The catch with analyzer is that this specific attribute is an initialization-time attribute, so you need to add it to the initAttributes map in the init() method of CarrotClusteringEngine.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This solves the problem. Thank you!&lt;/p&gt;</comment>
                            <comment id="12712482" author="koji" created="Sun, 24 May 2009 03:10:09 +0100"  >&lt;p&gt;patch for &quot;carrot.analyzerClass&quot; feature.&lt;/p&gt;</comment>
                            <comment id="12712534" author="stanislaw.osinski" created="Sun, 24 May 2009 10:51:52 +0100"  >&lt;p&gt;In fact, you can set Carrot2 attributes (both init- and request-time) in the solr config file, this should work also without the patch. Just add:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&amp;lt;str name=&quot;Tokenizer.analyzer&quot;&amp;gt;fully.qualified.class.Name&amp;lt;/str&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;to the search component element. See &lt;a href=&quot;http://wiki.apache.org/solr/ClusteringComponent&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/ClusteringComponent&lt;/a&gt; for some example. You&apos;ll find list of Carrot2 attributes, their ids and description at: &lt;a href=&quot;http://download.carrot2.org/stable/manual/#chapter.components&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.carrot2.org/stable/manual/#chapter.components&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12712544" author="koji" created="Sun, 24 May 2009 12:31:04 +0100"  >&lt;blockquote&gt;
&lt;p&gt;In fact, you can set Carrot2 attributes (both init- and request-time) in the solr config file, this should work also without the patch. Just add:&lt;/p&gt;

&lt;p&gt;&amp;lt;str name=&quot;Tokenizer.analyzer&quot;&amp;gt;fully.qualified.class.Name&amp;lt;/str&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, I thought I need to assign Class&amp;lt;?&amp;gt; type (other than String) for the second argument of the attribute. I&apos;ll try it.&lt;/p&gt;</comment>
                            <comment id="12712545" author="stanislaw.osinski" created="Sun, 24 May 2009 12:45:32 +0100"  >&lt;p&gt;Ah, I should have mentioned that up front &amp;#8211; Carrot2 will try to convert the string into the type accepted by the attribute. In case of the class-types attributes, it will try to load the class using the current thread&apos;s context classloader. Conversions are also available for numeric, boolean and enum attributes (see: &lt;a href=&quot;http://download.carrot2.org/head/javadoc/org/carrot2/util/attribute/AttributeBinder.AttributeTransformerFromString.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.carrot2.org/head/javadoc/org/carrot2/util/attribute/AttributeBinder.AttributeTransformerFromString.html&lt;/a&gt;). Please let me know if that way works for you.&lt;/p&gt;</comment>
                            <comment id="12712557" author="koji" created="Sun, 24 May 2009 15:33:08 +0100"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Tokenizer.analyzer&quot;&lt;/span&gt;&amp;gt;fully.qualified.class.Name&amp;lt;/str&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This works as expected w/o my patch. Thank you, Stanislaw!&lt;/p&gt;</comment>
                            <comment id="12715779" author="bgiaccio" created="Wed, 3 Jun 2009 03:50:53 +0100"  >&lt;p&gt;Okay I&apos;ve rewritten the patch, as I suggested.  Now the clustering happens in finishStage for distributed queries and it happens in process for non-distributed  both by calling the new method clusterResults .   To make this happen I had to convert the interfaces and supporting code to use SolrDocumentList rather than DocList.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a unit test which extends TestDistributedSearch,  I had to modify TestDistributedSearch and make a bunch of things protected.   This allowed me to write a very small test case (just had to override doTest)  and leave all the logic for creating shards, distributing docs, and comparing responses in TestDistributedSearch.  I felt this made for a very clean way to test a single distributed component.&lt;/p&gt;</comment>
                            <comment id="12724847" author="yseeley@gmail.com" created="Sat, 27 Jun 2009 13:20:01 +0100"  >&lt;p&gt;The response structure is a bit funny (it&apos;s like normal XML, which we don&apos;t really use in Solr-land), and certainly not optimal for JSON responses:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-quote&quot;&gt;&quot;clusters&quot;&lt;/span&gt;:[
  &lt;span class=&quot;code-quote&quot;&gt;&quot;cluster&quot;&lt;/span&gt;,[
	&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;,[
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;label&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;DDR&quot;&lt;/span&gt;],
	&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;,[
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;TWINX2048-3200PRO&quot;&lt;/span&gt;,
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VS1GB400C3&quot;&lt;/span&gt;,
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VDBDB1A16&quot;&lt;/span&gt;]],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;cluster&quot;&lt;/span&gt;,[
	&lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;,[
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;label&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;Car Power Adapter&quot;&lt;/span&gt;],
	&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;,[
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;F8V7067-APL-KIT&quot;&lt;/span&gt;,
	 &lt;span class=&quot;code-quote&quot;&gt;&quot;doc&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;IW-02&quot;&lt;/span&gt;]],
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is &quot;labels&quot;  is needed because there could be multiple labels per cluster in the future?  ( I assume yes)&lt;br/&gt;
Do we need more per-doc information than just the id?  (I assume no)&lt;br/&gt;
Could we want other per-cluster information in the future (I assume yes)&lt;br/&gt;
What other possible information could be added in the future?&lt;/p&gt;

&lt;p&gt;Given the assumptions above, &quot;clusters&quot;, &quot;docs&quot;, and &quot;labels&quot; should all be arrays instead of NamedLists (the names are just repeated redundant info).&lt;br/&gt;
All of the remaining NamedLists(just each &quot;cluster&quot;) should be a SimpleOrderedMap since access by key is more important than order... that will give us something along the lines of:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;clusters&quot;&lt;/span&gt; : [
    { &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt; : [&lt;span class=&quot;code-quote&quot;&gt;&quot;DDR&quot;&lt;/span&gt;],
	&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;TWINX2048-3200PRO&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VS1GB400C3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VDBDB1A16&quot;&lt;/span&gt;]
    }
    ,
    { &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt; : [&lt;span class=&quot;code-quote&quot;&gt;&quot;Car Power Adapter&quot;&lt;/span&gt;],
	&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;F8V7067-APL-KIT&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;IW-02&quot;&lt;/span&gt;]
    }
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Make sense?&lt;/p&gt;</comment>
                            <comment id="12724854" author="yseeley@gmail.com" created="Sat, 27 Jun 2009 14:45:09 +0100"  >&lt;p&gt;I hit an error trying to cluster some documents I added with solr cell - 400 unknown field &quot;Author&quot;.&lt;br/&gt;
Seems like it would be nice if we could handle unknown field types gracefully?&lt;/p&gt;</comment>
                            <comment id="12725573" author="gsingers" created="Tue, 30 Jun 2009 11:46:35 +0100"  >&lt;blockquote&gt;&lt;p&gt;Is &quot;labels&quot; is needed because there could be multiple labels per cluster in the future? ( I assume yes)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure, but likely so&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do we need more per-doc information than just the id? (I assume no)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think for other algorithms like k-Means, Canopy and others (Mahout) you could reasonable expect to return:&lt;br/&gt;
1.  The centroid that the given document belongs to -  This can be captured as the label, but it is often represented as a vector and could thus be quite long.  For instance, in Mahout, we could return this as a JSON string (we&apos;re using GSON over there)&lt;br/&gt;
2.  The distance from the centroid used in clustering.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;Could we want other per-cluster information in the future (I assume yes)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See #1 in the previous.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;What other possible information could be added in the future?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hard to say, but the nature of this implementation is such that people will can plug in their own clustering algorithms which may have different outputs.  Until we have at least one other implementation, it will be difficult to &quot;harden&quot; the interfaces.   For now, though, you&apos;re proposed alterations to the format are fine with me.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Seems like it would be nice if we could handle unknown field types gracefully?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, that would be good.&lt;/p&gt;
</comment>
                            <comment id="12725694" author="yseeley@gmail.com" created="Tue, 30 Jun 2009 17:52:42 +0100"  >&lt;p&gt;Now that I&apos;m looking at some of the code, is there a reason why clustering doesn&apos;t use a SolrQueryRequest, but instead grabs a searcher directly from the core?&lt;/p&gt;</comment>
                            <comment id="12725702" author="gsingers" created="Tue, 30 Jun 2009 18:05:50 +0100"  >&lt;blockquote&gt;&lt;p&gt;Now that I&apos;m looking at some of the code, is there a reason why clustering doesn&apos;t use a SolrQueryRequest, but instead grabs a searcher directly from the core?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because the clustering engine gets initialized during core initialization and thus doesn&apos;t have a SolrQueryRequest at that time.  Is there harm in the way it&apos;s being done?  I suppose it adds an extra reference, right, meaning it could keep a core open longer?  &lt;/p&gt;

&lt;p&gt;In the case of document clustering, I think it could be a long running job.  It&apos;s not clear yet how that should work, but it is something to keep in mind.  I expect to implement that sometime this summer, likely after 1.4.&lt;/p&gt;</comment>
                            <comment id="12725703" author="gsingers" created="Tue, 30 Jun 2009 18:07:16 +0100"  >&lt;p&gt;Also, some  implementations may need lower level interfaces than Searcher, it just seems easier to have core access.&lt;/p&gt;</comment>
                            <comment id="12725730" author="yseeley@gmail.com" created="Tue, 30 Jun 2009 18:59:50 +0100"  >&lt;p&gt;I&apos;m talking about the search results clustering, which is per-request.  RequestHandlers should pretty much always use the core/searcher associated with the SolrQueryRequest.  newSearcher/firstSearcher hooks set this themselves, hence it&apos;s a different searcher than one would get from getSearcher() (and could possibly even cause a deadlock).   Architecturally, there could be any number of reasons to use a different searcher in the future... the SolrQueryRequest says which searcher to use.&lt;/p&gt;</comment>
                            <comment id="12725731" author="gsingers" created="Tue, 30 Jun 2009 19:04:41 +0100"  >&lt;p&gt;Makes sense, might need to refactor some of the initialization code and the abstract clustering engine, but no big deal.&lt;/p&gt;</comment>
                            <comment id="12725739" author="stanislaw.osinski" created="Tue, 30 Jun 2009 19:38:06 +0100"  >&lt;blockquote&gt;&lt;p&gt;Is &quot;labels&quot; is needed because there could be multiple labels per cluster in the future? ( I assume yes)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct. Currently neither of Carrot2&apos;s algorithms creates clusters with multiple labels, but it&apos;s quite likely that there are other algorithms that can do that.&lt;/p&gt;</comment>
                            <comment id="12726149" author="yseeley@gmail.com" created="Wed, 1 Jul 2009 18:47:14 +0100"  >&lt;p&gt;The attached patch implements the simpler JSON friendly format.&lt;/p&gt;

&lt;p&gt;example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[...] 
&lt;span class=&quot;code-quote&quot;&gt;&quot;clusters&quot;&lt;/span&gt;:[
  { &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;DDR&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;TWINX2048-3200PRO&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VS1GB400C3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VDBDB1A16&quot;&lt;/span&gt;]
  },
  { &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;Car Power Adapter&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;F8V7067-APL-KIT&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;IW-02&quot;&lt;/span&gt;]
  },
  { &lt;span class=&quot;code-quote&quot;&gt;&quot;labels&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;Display&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;MA147LL/A&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;VA902B&quot;&lt;/span&gt;]
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12726215" author="yseeley@gmail.com" created="Wed, 1 Jul 2009 21:27:21 +0100"  >&lt;p&gt;This fixes the SolrQueryRequest issue and also stopped the swallowing of an exception that I just happened to see.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="12726482" author="yseeley@gmail.com" created="Thu, 2 Jul 2009 14:52:06 +0100"  >&lt;p&gt;Anyone mind if I reformat the source files that currently use tabs?&lt;/p&gt;</comment>
                            <comment id="12726485" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 14:56:11 +0100"  >&lt;blockquote&gt;&lt;p&gt;Anyone mind if I reformat the source files that currently use tabs? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12727247" author="yseeley@gmail.com" created="Sat, 4 Jul 2009 16:41:35 +0100"  >&lt;p&gt;Of course, now that I&apos;ve removed the clustering libs from the solr.war, the example no longer works for some reason... looks like all the jars are in example/clustering/solr/lib, so it&apos;s classloading issues I imagine.&lt;/p&gt;

&lt;p&gt;On a related note, I&apos;m not sure how useful it is to have a clustering component with multiple plugins itself... the extra level of plugins seems to just add more complexity.  Different plugins could always share utility classes, perhaps even base classes, and could strive for a common output format - all without going to an additional plugin model.&lt;/p&gt;</comment>
                            <comment id="12728270" author="bgiaccio" created="Tue, 7 Jul 2009 19:13:56 +0100"  >&lt;p&gt;If you could , could my patch to handle shards be applied before you reformat so I don&apos;t have to piece it together again and resubmit?&lt;/p&gt;</comment>
                            <comment id="12728271" author="yseeley@gmail.com" created="Tue, 7 Jul 2009 19:15:40 +0100"  >&lt;p&gt;Apologies Brad - I didn&apos;t realize there were pending patches or I would have not done the reformat.&lt;/p&gt;</comment>
                            <comment id="12728861" author="stanislaw.osinski" created="Wed, 8 Jul 2009 20:23:43 +0100"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;While configuring the clustering component for an algorithm that returns hierarchical clusters, it took me a while to debug why subclusters wouldn&apos;t appear on the output. It turned out that the default value for the &lt;tt&gt;carrot.outputSubClusters&lt;/tt&gt; parameter is &lt;tt&gt;false&lt;/tt&gt;, which was the opposite to what I assumed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Would it be a problem to change the default to &lt;tt&gt;true&lt;/tt&gt;, so that other users avoid the same problem? &lt;/p&gt;

&lt;p&gt;Another improvement worth making for the &lt;tt&gt;carrot.outputSubClusters&lt;/tt&gt; = &lt;tt&gt;false&lt;/tt&gt; case is &quot;flattening&quot; the clusters: returning all documents of the 1st level clusters, including those contained in the subclusters the user chose not to output. Without this improvement, many document-cluster assignments may be lost because some Carrot2 algorithms will assign documents only to the &quot;leaf&quot; (deepest in the hierarchy) clusters.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch that implements both changes.&lt;/p&gt;</comment>
                            <comment id="12732277" author="yseeley@gmail.com" created="Fri, 17 Jul 2009 01:52:46 +0100"  >&lt;p&gt;un-assigning myself since I&apos;m not sure when I&apos;ll be able to get back to this.&lt;br/&gt;
Issues remaining:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;classloading issues after the hander was removed from solr.war&lt;/li&gt;
	&lt;li&gt;possible packaging issues that Grant brought up (the downloaded jars shouldn&apos;t be shipped)&lt;/li&gt;
	&lt;li&gt;update the Wiki once classloading works and we can generate the new example output&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12735635" author="gsingers" created="Mon, 27 Jul 2009 16:59:57 +0100"  >&lt;blockquote&gt;&lt;p&gt;classloading issues after the hander was removed from solr.war&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the issue is that changes you made don&apos;t include the actual include the clustering code in Solr when running the example.   I think we just need to copy over the clustering JAR from the build directory into the lib, but that is a bit weird, IMO.  &lt;/p&gt;

&lt;p&gt;To fix, I&apos;m going to make the example target create a proper Solr home under contrib/clustering/example.  Which, of course, isn&apos;t much different from how it used to be.  I am also going to restore the downloads directory for packaging/release functionality.&lt;/p&gt;</comment>
                            <comment id="12735638" author="gsingers" created="Mon, 27 Jul 2009 17:15:29 +0100"  >&lt;p&gt;Note, I believe there is also a classloading issue when trying to load the carrot algorithm, b/c it does not use the SolrResourceLoader&lt;/p&gt;</comment>
                            <comment id="12735643" author="gsingers" created="Mon, 27 Jul 2009 17:29:28 +0100"  >&lt;p&gt;OK, I have committed my changes and believe functionality is restored and is properly working with the SolrResourceLoader.  Also applied Stanislaw&apos;s patch.&lt;/p&gt;

&lt;p&gt;Still likely need to review how to distribute all of this.  My guess is that we should only include the source, including the build and instructions for installing, and not even package jars at all since we can&apos;t include the LGPL ones necessary for Carrot2.&lt;/p&gt;</comment>
                            <comment id="12735739" author="gsingers" created="Mon, 27 Jul 2009 20:46:16 +0100"  >&lt;p&gt;This should be back to working and the example is not contained in the contrib/clustering, plus I re-instated the downloads directory.&lt;/p&gt;</comment>
                            <comment id="12736030" author="stanislaw.osinski" created="Tue, 28 Jul 2009 11:57:05 +0100"  >&lt;p&gt;Hi Grant,&lt;/p&gt;

&lt;p&gt;There&apos;s one more thing: we&apos;re planning to release version 3.1.0 of Carrot2 with certain bug fixes in clustering algorithm and better support for Chinese (using the new analyzer from Lucene). Our plan is to release after Lucene 2.9 is out, but before Solr 1.4, so that the latter would have a newer version of Carrot2 on board (should be just a matter of replacing Carrot2 JAR / upgrading version of the downloaded dependency). Would that make sense? Should I create a separate issue for it, or rather reopen this one?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;S.&lt;/p&gt;</comment>
                            <comment id="12736037" author="gsingers" created="Tue, 28 Jul 2009 12:30:44 +0100"  >&lt;blockquote&gt;&lt;p&gt;Would that make sense? Should I create a separate issue for it, or rather reopen this one?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, I think that makes sense.  Separate issue would be good, this one is long enough.&lt;/p&gt;</comment>
                            <comment id="12736039" author="stanislaw.osinski" created="Tue, 28 Jul 2009 12:46:09 +0100"  >&lt;p&gt;Created: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1314&quot; title=&quot;Upgrade Carrot2 to version 3.1.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1314&quot;&gt;&lt;del&gt;SOLR-1314&lt;/del&gt;&lt;/a&gt;. I&apos;ll attach a patch there as soon as Lucene 2.9 is released.&lt;/p&gt;</comment>
                            <comment id="12970742" author="koji" created="Mon, 13 Dec 2010 08:29:19 +0000"  >&lt;p&gt;add component info&lt;/p&gt;</comment>
                            <comment id="12970758" author="koji" created="Mon, 13 Dec 2010 09:27:23 +0000"  >&lt;p&gt;Apologies Grant for quote your comment on 27/Jul/09:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also applied Stanislaw&apos;s patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m confused by this line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;Document&amp;gt; docs = outputSubClusters ? outCluster.getDocuments() : outCluster.getAllDocuments();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;According to Carrot2 Javadoc:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://download.carrot2.org/stable/javadoc/org/carrot2/core/Cluster.html#getAllDocuments%28%29&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.carrot2.org/stable/javadoc/org/carrot2/core/Cluster.html#getAllDocuments%28%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Should it be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;Document&amp;gt; docs = outputSubClusters ? outCluster.getAllDocuments() : outCluster.getDocuments();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="12970760" author="stanislaw.osinski" created="Mon, 13 Dec 2010 09:38:31 +0000"  >&lt;p&gt;Hi Koji,&lt;/p&gt;

&lt;p&gt;Actually, the current code seems right: if we don&apos;t output subclusters, we need to include all documents of the cluster, including those from its subclusters, otherwise the subclusters&apos; documents may not appear in the response at all. But if we do output subclusters, we add only the documents assigned specifically to the cluster because the subclusters with their documents will be included in the response too.&lt;/p&gt;

&lt;p&gt;S.&lt;/p&gt;</comment>
                            <comment id="12970762" author="koji" created="Mon, 13 Dec 2010 09:57:31 +0000"  >&lt;p&gt;Uh, I needed to read the part of the recursive call. Thanks for explanation!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12431585">SOLR-1314</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12408894" name="SOLR-769-analyzerClass.patch" size="3528" author="koji" created="Sun, 24 May 2009 03:10:09 +0100"/>
                            <attachment id="12402482" name="SOLR-769-lib.zip" size="1763489" author="stanislaw.osinski" created="Wed, 18 Mar 2009 12:51:10 +0000"/>
                            <attachment id="12412312" name="SOLR-769.patch" size="13802" author="yseeley@gmail.com" created="Wed, 1 Jul 2009 21:27:21 +0100"/>
                            <attachment id="12412290" name="SOLR-769.patch" size="10160" author="yseeley@gmail.com" created="Wed, 1 Jul 2009 18:47:14 +0100"/>
                            <attachment id="12408051" name="SOLR-769.patch" size="180834" author="gsingers" created="Wed, 13 May 2009 22:57:15 +0100"/>
                            <attachment id="12405885" name="SOLR-769.patch" size="180834" author="gsingers" created="Mon, 20 Apr 2009 02:56:59 +0100"/>
                            <attachment id="12403389" name="SOLR-769.patch" size="124802" author="gsingers" created="Sun, 22 Mar 2009 16:05:49 +0000"/>
                            <attachment id="12399922" name="SOLR-769.patch" size="167928" author="gsingers" created="Tue, 10 Feb 2009 14:43:30 +0000"/>
                            <attachment id="12397778" name="SOLR-769.patch" size="191531" author="gsingers" created="Tue, 13 Jan 2009 13:53:51 +0000"/>
                            <attachment id="12392572" name="SOLR-769.patch" size="197416" author="gsingers" created="Tue, 21 Oct 2008 14:28:36 +0100"/>
                            <attachment id="12392566" name="SOLR-769.patch" size="195358" author="gsingers" created="Tue, 21 Oct 2008 11:41:59 +0100"/>
                            <attachment id="12392515" name="SOLR-769.patch" size="187551" author="gsingers" created="Mon, 20 Oct 2008 19:55:33 +0100"/>
                            <attachment id="12392180" name="SOLR-769.patch" size="197666" author="gsingers" created="Wed, 15 Oct 2008 14:11:31 +0100"/>
                            <attachment id="12391950" name="SOLR-769.patch" size="153678" author="gsingers" created="Sun, 12 Oct 2008 03:27:44 +0100"/>
                            <attachment id="12391945" name="SOLR-769.patch" size="106951" author="gsingers" created="Sat, 11 Oct 2008 21:05:39 +0100"/>
                            <attachment id="12405886" name="SOLR-769.tar" size="1955840" author="gsingers" created="Mon, 20 Apr 2009 02:56:59 +0100"/>
                            <attachment id="12402688" name="SOLR-769.zip" size="42903" author="stanislaw.osinski" created="Fri, 20 Mar 2009 20:09:41 +0000"/>
                            <attachment id="12409722" name="clustering-componet-shard.patch" size="21103" author="bgiaccio" created="Wed, 3 Jun 2009 03:50:53 +0100"/>
                            <attachment id="12392181" name="clustering-libs.tar" size="1955840" author="gsingers" created="Wed, 15 Oct 2008 14:12:56 +0100"/>
                            <attachment id="12391944" name="clustering-libs.tar" size="1617920" author="gsingers" created="Sat, 11 Oct 2008 20:54:00 +0100"/>
                            <attachment id="12412899" name="subcluster-flattening.patch" size="1239" author="stanislaw.osinski" created="Wed, 8 Jul 2009 20:23:43 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 12 Oct 2008 18:03:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxpbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>