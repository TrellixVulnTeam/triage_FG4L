<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:22:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-967/SOLR-967.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-967] NamedList - Deprecating ctor. with heterogenous List and replacing with a type-safe variant. </title>
                <link>https://issues.apache.org/jira/browse/SOLR-967</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;NamedList (org/apache/solr/common/util/NamedList ) currently has a heterogenous List (even numbered indices are String-s ) and the odd-numbered indices are the specific types.  As per benchmarks ( see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-912&quot; title=&quot;org.apache.solr.common.util.NamedList - Typesafe efficient variant - ModernNamedList introduced - implementing the same API as NamedList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-912&quot;&gt;SOLR-912&lt;/a&gt; ) - the implementation could be improved in favor of a Map.Entry&amp;lt;String, T&amp;gt; that beats in performance and ease of code maintenance. &lt;/p&gt;

&lt;p&gt;As per the discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-912&quot; title=&quot;org.apache.solr.common.util.NamedList - Typesafe efficient variant - ModernNamedList introduced - implementing the same API as NamedList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-912&quot;&gt;SOLR-912&lt;/a&gt; , a separate issue in JIRA is created that temporarily deprecates the List ctor. in NamedList and replaces the same with a Map.Entry&amp;lt;String, T&amp;gt; [] arg. constructor . &lt;/p&gt;

&lt;p&gt;This would be go in 1.4 to enable people to migrate their code for the new ctor. and move away from List&amp;lt;?&amp;gt; . &lt;/p&gt;

&lt;p&gt;At a later version of Solr (may be v2) - the optimal implementation would be brought back in with the List &amp;lt;Map.Entry&amp;lt;String, ?&amp;gt; &amp;gt; for better type-safety and performance. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 6, Tomcat 6&lt;/p&gt;</environment>
        <key id="12412760">SOLR-967</key>
            <summary>NamedList - Deprecating ctor. with heterogenous List and replacing with a type-safe variant. </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="kaykay.unique">Karthik K</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jan 2009 17:31:30 +0000</created>
                <updated>Tue, 10 Nov 2009 15:51:55 +0000</updated>
                            <resolved>Thu, 19 Feb 2009 22:21:01 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="12665165" author="kaykay.unique" created="Mon, 19 Jan 2009 17:52:13 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    1.  add an &quot;Entry&amp;lt;String, T&amp;gt;[]&quot; constructor (with a warning, but no commitment, that modifying the array contents may affect the NamedList) which builds up a pairwise List&amp;lt;Object&amp;gt; and delegates to the existing &quot;List&quot; constructor&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Once we build a pairwise List&amp;lt;Object&amp;gt; and delegate to the external &quot;List&quot; ctor , I am not sure how we can give a &apos;partial&apos; guarantee that modifying the array affecting NamedList since we are essentially flattening the former data structure (Map.Entry&amp;lt;String, T&amp;gt; ) into the latter ( String key; T value; } &lt;/p&gt;

&lt;p&gt;So - I have added documentation such a way that the guarantee is not possible.  &lt;/p&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;    2. deprecate the existing List constructor.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;In addition to deprecating the existing ctor. the comment has also been modified such that the external modification guarantee would not be held again in the future implementations and users are advised to use add / remove etc. for the modification as opposed to changing the data structure without the knowledge of the class. &lt;/p&gt;

&lt;p&gt; In fact-  if we eventually bring back List &amp;lt; Map.Entry&amp;lt;String, ? &amp;gt; &amp;gt; , the external modification guarantee might be honored although I am not sure if that is a big development plus as providing multiple ways to modify the underlying data structure might be hard to track in the code. &lt;/p&gt;

&lt;p&gt;Let me know if this patch would provide the intended transition. &lt;/p&gt;</comment>
                            <comment id="12675100" author="hossman" created="Thu, 19 Feb 2009 19:37:59 +0000"  >&lt;p&gt;Kay: I made a few modifications to your patch...&lt;/p&gt;

&lt;p&gt;1) tweaked some of the docs. you had a cut/paste sentence in the new constructor that contradicted the later sentences, i also cleaned up exactly what the commitments are from each constructor, and what the expectations should be for users.  We also don&apos;t need to tell people that the explicit backing of the LIst constructor will go away in future versions, because it will only go away when the method goes away (we can&apos;t add a pure List&amp;lt;Entry&amp;gt; constructor for a while after removing the current List constructor because of type erasure and people possibly skipping versions when upgrading)&lt;/p&gt;

&lt;p&gt;2) i changed the new constructor to take Map.Entry&amp;lt;String, ? extends T&amp;gt;[] instead of Map.Entry&amp;lt;String, ?&amp;gt;[] ... unless i&apos;m missing something a completely unbounded type wildcard would be just as bad as the untyped List.&lt;/p&gt;

&lt;p&gt;how does this look to you?&lt;/p&gt;</comment>
                            <comment id="12675116" author="kaykay.unique" created="Thu, 19 Feb 2009 20:22:52 +0000"  >&lt;p&gt;1) Thanks  for helping with the docs.&lt;/p&gt;

&lt;p&gt;2)  ? extends T - makes perfect sense since it provides one more degree of flexibility while preserving the contract about the type T . &lt;/p&gt;</comment>
                            <comment id="12675117" author="kaykay.unique" created="Thu, 19 Feb 2009 20:23:11 +0000"  >&lt;p&gt;The revised patch looks ok to me. &lt;/p&gt;</comment>
                            <comment id="12675158" author="hossman" created="Thu, 19 Feb 2009 22:21:01 +0000"  >&lt;p&gt;Committed revision 746031.&lt;/p&gt;</comment>
                            <comment id="12775630" author="gsingers" created="Tue, 10 Nov 2009 15:51:55 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12410646">SOLR-912</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12400544" name="SOLR-967.patch" size="9884" author="hossman" created="Thu, 19 Feb 2009 19:37:59 +0000"/>
                            <attachment id="12398246" name="SOLR-967.patch" size="9790" author="kaykay.unique" created="Mon, 19 Jan 2009 17:43:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Feb 2009 19:37:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxo3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>