<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:21:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-925/SOLR-925.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-925] Highlighter doesn&apos;t work on a field which is multiValued=&quot;true&quot; and termOffsets=&quot;true&quot;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-925</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This seems to be introduced at r674677.&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;java.lang.StringIndexOutOfBoundsException: String index out of range: 15&lt;br/&gt;
	at java.lang.String.substring(Unknown Source)&lt;br/&gt;
	at org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(Highlighter.java:239)&lt;br/&gt;
	at org.apache.solr.highlight.DefaultSolrHighlighter.doHighlighting(DefaultSolrHighlighter.java:310)&lt;br/&gt;
	at org.apache.solr.handler.component.HighlightComponent.process(HighlightComponent.java:83)&lt;br/&gt;
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:171)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1313)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:303)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:232)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)&lt;br/&gt;
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)&lt;br/&gt;
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)&lt;br/&gt;
	at org.mortbay.jetty.Server.handle(Server.java:285)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:821)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378)&lt;br/&gt;
	at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:226)&lt;br/&gt;
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12410879">SOLR-925</key>
            <summary>Highlighter doesn&apos;t work on a field which is multiValued=&quot;true&quot; and termOffsets=&quot;true&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="koji">Koji Sekiguchi</assignee>
                                    <reporter username="koji">Koji Sekiguchi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Dec 2008 09:57:19 +0000</created>
                <updated>Tue, 10 Nov 2009 15:51:53 +0000</updated>
                            <resolved>Fri, 26 Dec 2008 01:09:36 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>highlighter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12657785" author="sbgt" created="Thu, 18 Dec 2008 14:28:01 +0000"  >&lt;p&gt;Can be replicated with the example-setup that comes with Solr (Jetty + example docs):&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/select/?q=iPOd%20video&amp;amp;version=2.2&amp;amp;start=0&amp;amp;rows=10&amp;amp;indent=on&amp;amp;hl=true&amp;amp;qt=dismax&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select/?q=iPOd%20video&amp;amp;version=2.2&amp;amp;start=0&amp;amp;rows=10&amp;amp;indent=on&amp;amp;hl=true&amp;amp;qt=dismax&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12657973" author="markrmiller@gmail.com" created="Fri, 19 Dec 2008 02:16:31 +0000"  >&lt;p&gt;I havn&apos;t looked into this, so I don&apos;t know for sure, but there has always been issues with offsets and multi fields with Lucene (that have affected the Highlighter of course). I&apos;m hoping that &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1448&quot; title=&quot;add getFinalOffset() to TokenStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1448&quot;&gt;&lt;del&gt;LUCENE-1448&lt;/del&gt;&lt;/a&gt; is going to straighten that all right up (so hopefully this too?).&lt;/p&gt;</comment>
                            <comment id="12658495" author="koji" created="Mon, 22 Dec 2008 10:23:48 +0000"  >&lt;p&gt;Thanks Mark for the input, but this bug introduced when fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-556&quot; title=&quot;Highlighting of multi-valued fields returns snippets which span multiple different values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-556&quot;&gt;&lt;del&gt;SOLR-556&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I think the attached patch fixes the problem.&lt;/p&gt;</comment>
                            <comment id="12658578" author="koji" created="Mon, 22 Dec 2008 15:56:55 +0000"  >&lt;p&gt;All tests pass. I plan to commit in a few days. Meanwhile I&apos;ll look into test cases for this bug.&lt;/p&gt;</comment>
                            <comment id="12658743" author="dbowen" created="Tue, 23 Dec 2008 04:35:51 +0000"  >&lt;p&gt;-1 on this patch.  If you try this example (using the example as in ant run-example):&lt;/p&gt;

&lt;p&gt;&amp;lt;add&amp;gt;&amp;lt;doc&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;id&quot;&amp;gt;Test for Highlighting StringIndexOutOfBoundsExcdption&amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;name&quot;&amp;gt;Some Name&amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;manu&quot;&amp;gt;Acme, Inc.&amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;features&quot;&amp;gt;Description of the features, mentioning various things&amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;features&quot;&amp;gt;Features also is multivalued&amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;popularity&quot;&amp;gt;6&amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;field name=&quot;inStock&quot;&amp;gt;true&amp;lt;/field&amp;gt;&lt;br/&gt;
&amp;lt;/doc&amp;gt;&amp;lt;/add&amp;gt;&lt;/p&gt;

&lt;p&gt;then this url&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/select/?q=features&amp;amp;hl=true&amp;amp;hl.snippets=2&amp;amp;hl.fl=features&amp;amp;hl.fragsize=0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select/?q=features&amp;amp;hl=true&amp;amp;hl.snippets=2&amp;amp;hl.fl=features&amp;amp;hl.fragsize=0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;shows correct highlighting in the first snippet, but highlighting is shifted right about 19 characters in the second.&lt;/p&gt;
</comment>
                            <comment id="12658749" author="koji" created="Tue, 23 Dec 2008 04:57:19 +0000"  >&lt;p&gt;David, how snippets look like you are getting?&lt;br/&gt;
I use your sample doc and url, then I got:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;highlighting&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Test for Highlighting StringIndexOutOfBoundsExcdption&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;features&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;

	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str&amp;gt;&lt;/span&gt;Description of the &amp;amp;lt;em&amp;amp;gt;features&amp;amp;lt;/em&amp;amp;gt;, mentioning various things&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str&amp;gt;&lt;/span&gt;&amp;amp;lt;em&amp;amp;gt;Features&amp;amp;lt;/em&amp;amp;gt; also is multivalued&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/arr&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/lst&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/lst&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12659178" author="dbowen" created="Thu, 25 Dec 2008 00:42:43 +0000"  >&lt;p&gt;That&apos;s strange.  I get this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;lst name=&quot;highlighting&quot;&amp;gt;
  &amp;lt;lst name=&quot;Test for Highlighting StringIndexOutOfBoundsExcdption&quot;&amp;gt;
    &amp;lt;arr name=&quot;features&quot;&amp;gt;
      &amp;lt;str&amp;gt;Description of the &amp;lt;em&amp;gt;features&amp;lt;/em&amp;gt;, mentioning various things&amp;lt;/str&amp;gt;
      &amp;lt;str&amp;gt;Features also is mu&amp;lt;em&amp;gt;ltivalue&amp;lt;/em&amp;gt;d&amp;lt;/str&amp;gt;
    &amp;lt;/arr&amp;gt;
  &amp;lt;/lst&amp;gt;
&amp;lt;/lst&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12659179" author="dbowen" created="Thu, 25 Dec 2008 00:51:58 +0000"  >&lt;p&gt;Ack!  Sorry Koji, my mistake.  I was inadvertently using a patched Lucene highlighter class which apparently causes this problem.&lt;/p&gt;

&lt;p&gt;+1 on committing this patch.&lt;/p&gt;
</comment>
                            <comment id="12659217" author="koji" created="Fri, 26 Dec 2008 01:09:36 +0000"  >&lt;p&gt;Committed revision 729450 w/ some test cases.&lt;/p&gt;</comment>
                            <comment id="12775613" author="gsingers" created="Tue, 10 Nov 2009 15:51:53 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396586" name="SOLR-925.patch" size="2404" author="koji" created="Mon, 22 Dec 2008 10:23:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Dec 2008 14:28:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxod3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>