<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:22:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1216/SOLR-1216.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1216] disambiguate the replication command names</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1216</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There is a lot of confusion in the naming of various commands such as snappull, snapshot etc. This is a vestige of the script based replication we currently have. The commands can be renamed to make more sense&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&apos;snappull&apos; to be renamed to &apos;sync&apos;&lt;/li&gt;
	&lt;li&gt;&apos;snapshot&apos; to be renamed to &apos;backup&apos;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;thoughts?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12427709">SOLR-1216</key>
            <summary>disambiguate the replication command names</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jun 2009 05:57:24 +0100</created>
                <updated>Tue, 10 Nov 2009 15:52:07 +0000</updated>
                            <resolved>Mon, 22 Jun 2009 13:06:28 +0100</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                    <component>replication (java)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12718713" author="noble.paul" created="Fri, 12 Jun 2009 05:58:41 +0100"  >&lt;p&gt;the relevant mail thread &lt;a href=&quot;http://markmail.org/thread/zucdwx4p2xmeaejj&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://markmail.org/thread/zucdwx4p2xmeaejj&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12718846" author="markrmiller@gmail.com" created="Fri, 12 Jun 2009 15:19:09 +0100"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;I like the names too. Perhaps &apos;syncFromMaster&apos; ? I could go either way for various reasons.&lt;/p&gt;

&lt;p&gt;Lets also clearup the doc for this stuff as part of the issue. I can work on the wiki part if you&apos;d like.&lt;/p&gt;

&lt;p&gt;Are backups made in the same format as the scripts method (eg can I basically steal that info from the scripts wiki page?)&lt;/p&gt;

&lt;p&gt;Is it possible to replicate a backup or just the live index?&lt;/p&gt;

&lt;p&gt;I also want to put in what happens when you shutdown during a replication - does Solr wait? Abort? If its aborts, are the temp files cleaned up later?&lt;/p&gt;

&lt;p&gt;replicate and polling both to default to on right?&lt;/p&gt;

&lt;p&gt;and the replicate setting just stops any slaves hitting a master with replicate=off from syncing?&lt;/p&gt;</comment>
                            <comment id="12719078" author="noble.paul" created="Sat, 13 Jun 2009 05:52:42 +0100"  >&lt;blockquote&gt;&lt;p&gt;Lets also clearup the doc for this stuff as part of the issue....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes the wiki has to be cleaned up too&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Are backups made in the same format as the scripts method&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The format is same (same dir name format). The mechanism is different. scripts use hard links , this uses copying&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is it possible to replicate a backup or just the live index?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;nope. only live index can be transferred. The backup can be made the live index and then the user can replicate it. There is a file called index.properties in the dataDir (only created by replicationhandler. but users can create them too ). It can take a property index=&amp;lt;dir-name&amp;gt; which tells solr core where to load the index from. users can edit that and do a reload core for the new backup to be used as the index.&lt;/p&gt;



&lt;blockquote&gt;&lt;p&gt;what happens when you shutdown during a replication - does Solr wait? Abort? If its aborts, are the temp files cleaned up later?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;replication is aborted. temp files will remain as is. They will not be cleaned up automatically. But presence of those temp files will not have any impact of future replication. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;replicate and polling both to default to on right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;and the replicate setting just stops any slaves hitting a master with replicate=off from syncing?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;the slaves will keep polling even if the master has disabled replication . But the master will respond with &quot;no changes&quot; .This will ensure that when the replication is re-enabled from master , the slaves will be able to resume replication &lt;/p&gt;

</comment>
                            <comment id="12719395" author="noble.paul" created="Mon, 15 Jun 2009 05:35:23 +0100"  >&lt;p&gt;Changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&apos;snappull&apos; renamed to &apos;sync&apos;&lt;/li&gt;
	&lt;li&gt;&apos;abortsnappull&apos; renamed to &apos;abortsync&apos;&lt;br/&gt;
*&apos;snapshoot&apos; renamed to &apos;backup&apos; &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I shall commit this in a day or two&lt;/p&gt;</comment>
                            <comment id="12719609" author="wunder" created="Mon, 15 Jun 2009 16:55:56 +0100"  >&lt;p&gt;&quot;sync&quot; is a weak name, because it doesn&apos;t say whether it is a push or pull synchronization.&lt;/p&gt;</comment>
                            <comment id="12719620" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 17:16:47 +0100"  >&lt;p&gt;thats why I was torn between it and &quot;syncFromMaster&quot;.&lt;/p&gt;

&lt;p&gt;Not in love with that either though. Any suggestions?&lt;/p&gt;</comment>
                            <comment id="12719625" author="wunder" created="Mon, 15 Jun 2009 17:23:37 +0100"  >&lt;p&gt;If we choose a name for the thing we are pulling, like &quot;image&quot;, then we can use &quot;makeimage&quot;, &quot;pullimage&quot;, etc.&lt;/p&gt;</comment>
                            <comment id="12719920" author="shalinmangar" created="Tue, 16 Jun 2009 05:29:44 +0100"  >&lt;blockquote&gt;&lt;p&gt;If we choose a name for the thing we are pulling, like &quot;image&quot;, then we can use &quot;makeimage&quot;, &quot;pullimage&quot;, etc. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How about &quot;pullIndex&quot;?&lt;/p&gt;</comment>
                            <comment id="12719922" author="noble.paul" created="Tue, 16 Jun 2009 05:39:35 +0100"  >&lt;p&gt;&quot;image&apos; gives the same idea of snapshot. it suggests that an image of the index exists&lt;/p&gt;

&lt;p&gt;how about &apos;fetchIndex&apos; and &apos;abortfetch&apos; ?&lt;/p&gt;</comment>
                            <comment id="12721752" author="noble.paul" created="Fri, 19 Jun 2009 12:58:14 +0100"  >&lt;p&gt;let us choose a name and close this soon&lt;/p&gt;
</comment>
                            <comment id="12722567" author="noble.paul" created="Mon, 22 Jun 2009 12:43:25 +0100"  >&lt;p&gt;&apos;fetchindex &apos;and &apos;abortfetch&apos; are the commands. I shall commit this shortly&lt;/p&gt;</comment>
                            <comment id="12722571" author="noble.paul" created="Mon, 22 Jun 2009 13:06:28 +0100"  >&lt;p&gt;committed : r787212&lt;/p&gt;</comment>
                            <comment id="12726447" author="noble.paul" created="Thu, 2 Jul 2009 13:01:49 +0100"  >&lt;p&gt;snapshoot command renamed to backup&lt;/p&gt;</comment>
                            <comment id="12726451" author="noble.paul" created="Thu, 2 Jul 2009 13:04:21 +0100"  >&lt;p&gt;commitetd r790559&lt;/p&gt;</comment>
                            <comment id="12730151" author="markrmiller@gmail.com" created="Sun, 12 Jul 2009 23:11:32 +0100"  >&lt;p&gt;Comments for ReplicationHandler still need to be updated.&lt;/p&gt;</comment>
                            <comment id="12730152" author="markrmiller@gmail.com" created="Sun, 12 Jul 2009 23:13:43 +0100"  >&lt;p&gt;Also, internally, everything is still SnapPuller, SpanShot for classnames and variable names and what not.&lt;/p&gt;

&lt;p&gt;I think we have to go whole hog if we want to change to fetchindex - otherwise, its still confusing anyway.&lt;/p&gt;

&lt;p&gt;We could also stick with snappull and snapshot, but I think we would need to be more clear about that means - in terms of Lucene, in terms of the old scripts, and in terms of the ReplicationHandler.&lt;/p&gt;</comment>
                            <comment id="12730154" author="markrmiller@gmail.com" created="Sun, 12 Jul 2009 23:17:52 +0100"  >&lt;p&gt;By the way, thanks for beefing up the wiki page Noble!&lt;/p&gt;</comment>
                            <comment id="12730206" author="noble.paul" created="Mon, 13 Jul 2009 05:11:30 +0100"  >&lt;p&gt;I guess changing variable names is fine and I can do it. But if we change the classnames we lose the history altogether .  &lt;/p&gt;</comment>
                            <comment id="12733884" author="hossman" created="Wed, 22 Jul 2009 00:13:22 +0100"  >&lt;blockquote&gt;&lt;p&gt;I guess changing variable names is fine and I can do it. But if we change the classnames we lose the history altogether .&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;are you talking about svn history?&lt;/p&gt;

&lt;p&gt;&quot;svn mv&quot; preserves all history ... the only danger is in applying patches generated by someone else, you have to manually finesse applying the patch to get the right history bits flipped before committing.&lt;/p&gt;</comment>
                            <comment id="12733984" author="noble.paul" created="Wed, 22 Jul 2009 05:52:12 +0100"  >&lt;blockquote&gt;&lt;p&gt;&quot;svn mv&quot; preserves all history .&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;then it is fine to rename the Classes &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;SnapPuller -&amp;gt; ReplicationClient&lt;/li&gt;
	&lt;li&gt;SnapShooter -&amp;gt; IndexBackup&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;or if you have any other names in mind that is fine&lt;/p&gt;</comment>
                            <comment id="12775771" author="gsingers" created="Tue, 10 Nov 2009 15:52:07 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412387" name="SOLR-1216.patch" size="1698" author="noble.paul" created="Thu, 2 Jul 2009 13:01:49 +0100"/>
                            <attachment id="12411395" name="SOLR-1216.patch" size="3056" author="noble.paul" created="Mon, 22 Jun 2009 12:43:25 +0100"/>
                            <attachment id="12410618" name="SOLR-1216.patch" size="2210" author="noble.paul" created="Mon, 15 Jun 2009 05:35:22 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Jun 2009 14:19:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxmlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19981</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>