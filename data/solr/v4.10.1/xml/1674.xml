<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:22:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1674/SOLR-1674.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1674] improve analysis tests, cut over to new API</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1674</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This patch&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;converts all analysis tests to use the new tokenstream api&lt;/li&gt;
	&lt;li&gt;converts most tests to use the more stringent assertion mechanisms from lucene&lt;/li&gt;
	&lt;li&gt;adds new tests to improve coverage&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Most bugs found by more stringent testing have been fixed, with the exception of SynonymFilter.&lt;br/&gt;
The problems with this filter are more serious, the previous tests were essentially a no-op.&lt;br/&gt;
The new tests for SynonymFilter test the current behavior, but have FIXMEs with what I think the old test wanted to expect in the comments.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12443766">SOLR-1674</key>
            <summary>improve analysis tests, cut over to new API</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rcmuir">Robert Muir</assignee>
                                    <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Dec 2009 14:45:04 +0000</created>
                <updated>Wed, 16 Apr 2014 13:57:32 +0100</updated>
                                                            <fixVersion>4.9</fixVersion>
                    <fixVersion>Trunk</fixVersion>
                                    <component>Schema and Analysis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12792986" author="rcmuir" created="Sun, 20 Dec 2009 11:36:59 +0000"  >&lt;p&gt;here is an updated patch.&lt;br/&gt;
I think I managed to resolve some problems with synonymfilter, especially the recursion tests (I believe they were simply typos and there isnt a bug), and the position increments (this was a problem in the tests)&lt;/p&gt;

&lt;p&gt;so in my opinion, the only problem left is &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1670&quot; title=&quot;synonymfilter/map repeat bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1670&quot;&gt;SOLR-1670&lt;/a&gt;, the repeat problem.&lt;/p&gt;</comment>
                            <comment id="12793001" author="rcmuir" created="Sun, 20 Dec 2009 16:39:00 +0000"  >&lt;p&gt;Hello, I see Uwe has commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1657&quot; title=&quot;convert the rest of solr to use the new tokenstream API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1657&quot;&gt;&lt;del&gt;SOLR-1657&lt;/del&gt;&lt;/a&gt; that he would help convert tokenstreams to the new api, but he needs this patch (the tests) applied first.&lt;/p&gt;

&lt;p&gt;Is it possible for someone to take a look at this patch to get things moving along? its only tests, no source code changes.&lt;/p&gt;</comment>
                            <comment id="12793003" author="markrmiller@gmail.com" created="Sun, 20 Dec 2009 16:55:11 +0000"  >&lt;p&gt;I think TestCapitalizationFilter and TestMultiWordSynonyms need to be brought back up to trunk? A quick patch attempt is giving me problems. &lt;/p&gt;</comment>
                            <comment id="12793004" author="rcmuir" created="Sun, 20 Dec 2009 16:56:54 +0000"  >&lt;p&gt;this is because you use $Id$. its not my fault... &lt;/p&gt;</comment>
                            <comment id="12793005" author="markrmiller@gmail.com" created="Sun, 20 Dec 2009 17:08:12 +0000"  >&lt;p&gt;Thats BS - they are fixable in the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I hate those damn $id tags - every time ... I&apos;ll fix them.&lt;/p&gt;</comment>
                            <comment id="12793006" author="rcmuir" created="Sun, 20 Dec 2009 17:09:44 +0000"  >&lt;p&gt;I sent an email... if no one cares about these $id$ tags then when i get back from vacation i will gladly volunteer to submit a patch to remove them &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;A quick workaround is to change them back to $Id$ in your local, then apply the patch...&lt;/p&gt;</comment>
                            <comment id="12793008" author="markrmiller@gmail.com" created="Sun, 20 Dec 2009 17:29:51 +0000"  >&lt;p&gt;Fixed a small issue with protWords.txt not matching prowrods.txt on unix systems.&lt;/p&gt;

&lt;p&gt;If there are no objections I will commit this beautiful addition to our analysis tests soon.&lt;/p&gt;</comment>
                            <comment id="12793174" author="shalinmangar" created="Mon, 21 Dec 2009 12:22:31 +0000"  >&lt;p&gt;All tests pass after renaming protWords.txt to protwords.txt. Unfortunately, this is too big to review in detail right now but I trust Robert to do the right thing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If there are no objections I will commit this beautiful addition to our analysis tests soon.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12793206" author="markrmiller@gmail.com" created="Mon, 21 Dec 2009 13:57:27 +0000"  >&lt;p&gt;Thanks a lot Robert! Test contributions are rare and exciting!&lt;/p&gt;</comment>
                            <comment id="12793526" author="rcmuir" created="Tue, 22 Dec 2009 06:13:23 +0000"  >&lt;p&gt;hmm it appears i may have slowed down the junit tests with the previous patch, unfortunately.&lt;/p&gt;

&lt;p&gt;attached is a patch to speed them up... (maybe not necessary, but they were very very slow on my laptop)&lt;/p&gt;</comment>
                            <comment id="12793646" author="yseeley@gmail.com" created="Tue, 22 Dec 2009 15:50:51 +0000"  >&lt;p&gt;Hmmm, isn&apos;t it a bug that this passes?&lt;br/&gt;
    assertTokenizesTo(map, &quot;a b&quot;, new String[] &lt;/p&gt;
{ &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;  }
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;w/o the 1670 fix, we get &quot;ab/ab/ab&quot; (repeated tokens all at the same position).  That&apos;s not the same as three &quot;ab&quot; tokens in a row.&lt;/p&gt;

&lt;p&gt;Also, we seem to have lost matching flexibility with overlapping tokens.  &quot;a/aa&quot; should be the same as &quot;aa/a&quot;, but if you change the order of overlapping tokens now, the tests fail.&lt;/p&gt;

&lt;p&gt;Didn&apos;t ya guys like my a/aa syntax to indicate overlapping tokens?  It certainly made it faster for me to write the original testcases &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12793652" author="markrmiller@gmail.com" created="Tue, 22 Dec 2009 16:01:01 +0000"  >&lt;p&gt;Robert is on holiday I think - will reopen for now.&lt;/p&gt;</comment>
                            <comment id="12793653" author="rcmuir" created="Tue, 22 Dec 2009 16:04:04 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Hmmm, isn&apos;t it a bug that this passes?&lt;/p&gt;

&lt;p&gt;w/o the 1670 fix, we get &quot;ab/ab/ab&quot; (repeated tokens all at the same position). That&apos;s not the same as three &quot;ab&quot; tokens in a row. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The tests pass because it &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;. If we want to validate pos incs, we should change the test to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertTokenizesTo(map, &lt;span class=&quot;code-quote&quot;&gt;&quot;a b&quot;&lt;/span&gt;, 
  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt; },
  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; [] { 1, 0, 0 });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this way the posIncs are tested too.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Also, we seem to have lost matching flexibility with overlapping tokens. &quot;a/aa&quot; should be the same as &quot;aa/a&quot;, but if you change the order of overlapping tokens now, the tests fail.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This &quot;flexibility&quot; caused things such as &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1670&quot; title=&quot;synonymfilter/map repeat bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1670&quot;&gt;SOLR-1670&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1667&quot; title=&quot;PatternTokenizer does not clearAttributes()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1667&quot;&gt;&lt;del&gt;SOLR-1667&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1662&quot; title=&quot;BufferedTokenStream incorrect cloning&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1662&quot;&gt;&lt;del&gt;SOLR-1662&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1660&quot; title=&quot;capitalizationfilter crashes if you use the maxWordCountOption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1660&quot;&gt;&lt;del&gt;SOLR-1660&lt;/del&gt;&lt;/a&gt;. When I switched to less &quot;flexible&quot; tests, these bugs were found. So sorry to see it go.&lt;/p&gt;</comment>
                            <comment id="12843611" author="markrmiller@gmail.com" created="Wed, 10 Mar 2010 16:20:27 +0000"  >&lt;p&gt;I&apos;ve committed the speed up patch, thanks Robert!&lt;/p&gt;

&lt;p&gt;Leaving open for posInc tests&lt;/p&gt;</comment>
                            <comment id="12872782" author="hossman" created="Fri, 28 May 2010 03:54:12 +0100"  >
&lt;p&gt;Correcting Fix Version based on CHANGES.txt, see this thread for more details...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12924431" author="markrmiller@gmail.com" created="Mon, 25 Oct 2010 03:20:20 +0100"  >&lt;p&gt;Going to close this if no one objects...&lt;/p&gt;</comment>
                            <comment id="12982740" author="rcmuir" created="Mon, 17 Jan 2011 17:08:41 +0000"  >&lt;p&gt;i&apos;d still like to add posinc tests for some of these tokenstreams,&lt;br/&gt;
but also other ones in the analyzers module too (e.g. ones from lucene contrib).&lt;/p&gt;

&lt;p&gt;i&apos;ll set 3.2 for now.&lt;/p&gt;</comment>
                            <comment id="13717437" author="steve_rowe" created="Tue, 23 Jul 2013 19:48:14 +0100"  >&lt;p&gt;Bulk move 4.4 issues to 4.5 and 5.0&lt;/p&gt;</comment>
                            <comment id="13971237" author="thetaphi" created="Wed, 16 Apr 2014 13:57:32 +0100"  >&lt;p&gt;Move issue to Solr 4.9.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12443422">SOLR-1657</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12428569" name="SOLR-1674.patch" size="186443" author="rcmuir" created="Sun, 20 Dec 2009 11:36:59 +0000"/>
                            <attachment id="12428444" name="SOLR-1674.patch" size="184064" author="rcmuir" created="Fri, 18 Dec 2009 14:45:32 +0000"/>
                            <attachment id="12428700" name="SOLR-1674_speedup.patch" size="19657" author="rcmuir" created="Tue, 22 Dec 2009 06:13:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 Dec 2009 16:55:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxjuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>