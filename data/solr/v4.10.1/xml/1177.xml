<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:18:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1177/SOLR-1177.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1177] Distributed TermsComponent</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1177</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;TermsComponent should be distributed&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425931">SOLR-1177</key>
            <summary>Distributed TermsComponent</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="mattweber">Matt Weber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 May 2009 16:50:05 +0100</created>
                <updated>Thu, 2 May 2013 03:29:26 +0100</updated>
                            <resolved>Mon, 14 Dec 2009 07:06:49 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12711200" author="mattweber" created="Wed, 20 May 2009 16:57:33 +0100"  >&lt;p&gt;Here is my first attempt at a patch that is not currently working.  For some reason only the prepare and process methods are being called.  It seems that the shards parameter is not being honored like it is in the other distributed components because rb.shards is always null.  I have looked at the other distributed components and did not notice them doing anything special with the shards parameter.   I have based this code on the information from &lt;a href=&quot;http://wiki.apache.org/solr/WritingDistributedSearchComponents&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/WritingDistributedSearchComponents&lt;/a&gt; and looking though the FacetComponent, DebugComponent, StatsComponent, and HighlightComponent code.  Any help figuring out why the other methods are not being called is greatly appreciated.  Please ignore the println statments, they are for debug only and will be removed in the finalized, working patch.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12711848" author="mwoytowitz" created="Thu, 21 May 2009 23:37:35 +0100"  >&lt;p&gt;I got the previous patch working.  It was we close.  I attached the java file and a patch for just the TermsComponent&lt;/p&gt;</comment>
                            <comment id="12712242" author="mattweber" created="Fri, 22 May 2009 21:33:37 +0100"  >&lt;p&gt;I have cleaned up the patch, tested it against the latest version of trunk and wrote some unit tests.  This patch invalidates &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1156&quot; title=&quot;Sort TermsComponent results by frequency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1156&quot;&gt;&lt;del&gt;SOLR-1156&lt;/del&gt;&lt;/a&gt; because it also includes sorting support.&lt;/p&gt;</comment>
                            <comment id="12712243" author="mattweber" created="Fri, 22 May 2009 21:34:59 +0100"  >&lt;p&gt;This patch includes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1156&quot; title=&quot;Sort TermsComponent results by frequency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1156&quot;&gt;&lt;del&gt;SOLR-1156&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12789305" author="shalinmangar" created="Fri, 11 Dec 2009 13:36:54 +0000"  >&lt;ol&gt;
	&lt;li&gt;Based on Matt&apos;s patch&lt;/li&gt;
	&lt;li&gt;Synced to trunk&lt;/li&gt;
	&lt;li&gt;Uses BaseDistributedTestCase&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;All tests pass.&lt;/p&gt;

&lt;p&gt;I had to change TermData#frequency to an int to match the output of distributed and non-distributed cases. It is theoretically possible to have the sum of frequencies from all shards to exceed size of an int but I don&apos;t think it is practical right now. The problem is that we represent frequency as int everywhere for non-distributed responses. If we want longs in distributed search responses then we must start using longs in non-distributed responses as well to maintain compatibility.&lt;/p&gt;

&lt;p&gt;Matt &amp;#8211; There is an issue open for adding SolrJ support for TermsComponent - &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt;. Is it possible to replace the TermsHelper and TermData classes by classes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt;? I&apos;d like to have the same classes parsing responses in Solrj and distributed search.&lt;/p&gt;</comment>
                            <comment id="12789334" author="yseeley@gmail.com" created="Fri, 11 Dec 2009 14:54:24 +0000"  >&lt;p&gt;The facet component internally uses long to add up distributed facet counts, and then uses this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// use &amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; tags &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; smaller facet counts (better back compatibility)
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; num(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; val) {
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val &amp;lt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)val;
   &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; val;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yes, it&apos;s not ideal to switch from &amp;lt;int&amp;gt; to &amp;lt;long&amp;gt; in a running application, but I think it&apos;s better than failing or overflowing the int.&lt;br/&gt;
Client code in SolrJ should be written to handle either via ((Number)x).longValue()&lt;/p&gt;</comment>
                            <comment id="12789336" author="mattweber" created="Fri, 11 Dec 2009 15:06:18 +0000"  >&lt;p&gt;Thanks for the update Yonik!  I will see if I can get this and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; using the same classes.&lt;/p&gt;</comment>
                            <comment id="12789611" author="mattweber" created="Fri, 11 Dec 2009 23:45:07 +0000"  >&lt;p&gt;Here is an updated patch that includes Shalin&apos;s suggestions:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;replace TermData with TermsResponse.Term&lt;/li&gt;
	&lt;li&gt;updates TermsHelper to use the parsing code from TermsResponse&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also changed TermsResponse.Term#frequency to a long so that we don&apos;t overflow when calculating the frequency.  Then to keep back-compatbility with existing code I do the following when writing it to the NamedList:&lt;/p&gt;

&lt;p&gt;if (tc.getFrequency() &amp;gt;= freqmin &amp;amp;&amp;amp; tc.getFrequency() &amp;lt;= freqmax) &lt;/p&gt;
{
    fieldterms.add(tc.getTerm(), ((Number)tc.getFrequency()).intValue());
    cnt++;
}

&lt;p&gt;Is this a good approach?&lt;/p&gt;


&lt;p&gt;This new patch includes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="12789613" author="mattweber" created="Fri, 11 Dec 2009 23:47:36 +0000"  >&lt;p&gt;The latest version of this patch includes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; since we are reusing code from that patch.&lt;/p&gt;</comment>
                            <comment id="12789790" author="shalinmangar" created="Sat, 12 Dec 2009 21:06:54 +0000"  >&lt;p&gt;Thanks Matt. Can you please attach the relevant portions to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt;. We can commit &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; first and then resolve this one.&lt;/p&gt;</comment>
                            <comment id="12789794" author="mattweber" created="Sat, 12 Dec 2009 21:17:36 +0000"  >&lt;p&gt;The latest &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; patch is included inside the latest patch I attached to this ticket.  Should I separate them?&lt;/p&gt;</comment>
                            <comment id="12789795" author="shalinmangar" created="Sat, 12 Dec 2009 21:31:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;The latest &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; patch is included inside the latest patch I attached to this ticket. Should I separate them? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. I&apos;ll commit &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; first so remove those classes from the current patch.&lt;/p&gt;

&lt;p&gt;PS: I&apos;m sorry if I am confusing you. It is 3AM here and I&apos;m a little confused myself &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12789799" author="mattweber" created="Sat, 12 Dec 2009 21:52:38 +0000"  >&lt;p&gt;New patch that DOES NOT include the code for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt;.  Make sure you have &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; applied before using this patch.&lt;/p&gt;</comment>
                            <comment id="12789800" author="mattweber" created="Sat, 12 Dec 2009 21:53:53 +0000"  >&lt;p&gt;The latest version of this patch depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1139&quot; title=&quot;SolrJ TermsComponent Query and Response Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1139&quot;&gt;&lt;del&gt;SOLR-1139&lt;/del&gt;&lt;/a&gt; being applied.&lt;/p&gt;</comment>
                            <comment id="12790016" author="shalinmangar" created="Mon, 14 Dec 2009 07:05:17 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tc.getFrequency() &amp;gt;= freqmin &amp;amp;&amp;amp; tc.getFrequency() &amp;lt;= freqmax) {
  fieldterms.add(tc.getTerm(), ((&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;)tc.getFrequency()).intValue()); cnt++; 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I changed freqmin and freqmax to long and used Yonik&apos;s method to write int if possible or else switch to longs in the response.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12790017" author="shalinmangar" created="Mon, 14 Dec 2009 07:06:49 +0000"  >&lt;p&gt;Committed revision 890199.&lt;/p&gt;

&lt;p&gt;Thanks Matt!&lt;/p&gt;</comment>
                            <comment id="12872678" author="hossman" created="Thu, 27 May 2010 23:59:28 +0100"  >&lt;p&gt;Correcting Fix Version based on CHANGES.txt, see this thread for more details...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13013064" author="gsingers" created="Wed, 30 Mar 2011 16:45:26 +0100"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12424978">SOLR-1156</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12424368">SOLR-1139</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12427893" name="SOLR-1177.patch" size="13913" author="shalinmangar" created="Mon, 14 Dec 2009 07:05:17 +0000"/>
                            <attachment id="12427833" name="SOLR-1177.patch" size="13001" author="mattweber" created="Sat, 12 Dec 2009 21:52:38 +0000"/>
                            <attachment id="12427794" name="SOLR-1177.patch" size="27090" author="mattweber" created="Fri, 11 Dec 2009 23:45:06 +0000"/>
                            <attachment id="12427722" name="SOLR-1177.patch" size="13420" author="shalinmangar" created="Fri, 11 Dec 2009 13:36:54 +0000"/>
                            <attachment id="12408838" name="SOLR-1177.patch" size="24423" author="mattweber" created="Fri, 22 May 2009 21:33:36 +0100"/>
                            <attachment id="12408597" name="SOLR-1177.patch" size="18385" author="mattweber" created="Wed, 20 May 2009 16:57:32 +0100"/>
                            <attachment id="12408751" name="TermsComponent.java" size="14741" author="mwoytowitz" created="Thu, 21 May 2009 23:37:35 +0100"/>
                            <attachment id="12408750" name="TermsComponent.patch" size="12340" author="mwoytowitz" created="Thu, 21 May 2009 23:37:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 May 2009 22:37:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6469</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxmuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>