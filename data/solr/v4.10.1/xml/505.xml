<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:22:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-505/SOLR-505.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-505] Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers</title>
                <link>https://issues.apache.org/jira/browse/SOLR-505</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The code from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-127&quot; title=&quot;Make Solr more friendly to external HTTP caches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-127&quot;&gt;&lt;del&gt;SOLR-127&lt;/del&gt;&lt;/a&gt; emits HTTP cache headers for all handlers if configured. We should not emit cache related headers for update request handlers. Partial responses (coming from the Timeout request stuff) should not be cached as well.&lt;/p&gt;

&lt;p&gt;To solve this problem we can simply add two methods to the SolrQueryResponse class (like void setAvoidHTTPCaching(boolean) and boolean isAvoidHTTPCaching() - the default for the value would be false). The update request handlers should set this to true all the time. The partial response stuff can set this to true as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12391733">SOLR-505</key>
            <summary>Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="otis">Otis Gospodnetic</assignee>
                                    <reporter username="tpeuss">Thomas Peuss</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Mar 2008 11:23:06 +0000</created>
                <updated>Fri, 10 May 2013 11:40:23 +0100</updated>
                            <resolved>Fri, 23 May 2008 22:12:34 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12579860" author="tpeuss" created="Tue, 18 Mar 2008 14:21:06 +0000"  >&lt;p&gt;Draft version of a patch.&lt;/p&gt;</comment>
                            <comment id="12579867" author="yseeley@gmail.com" created="Tue, 18 Mar 2008 14:33:40 +0000"  >&lt;p&gt;+1 on the general approach.&lt;br/&gt;
Distributed search will probably need to avoid caching as well.&lt;/p&gt;</comment>
                            <comment id="12579918" author="tpeuss" created="Tue, 18 Mar 2008 16:47:02 +0000"  >&lt;p&gt;BTW: The patch uses &lt;em&gt;avoidHttpCaching=true&lt;/em&gt; as default as this is the safer approach. The patch only set this to &lt;em&gt;false&lt;/em&gt; for the search handlers.&lt;/p&gt;</comment>
                            <comment id="12580070" author="timmsc" created="Tue, 18 Mar 2008 20:42:31 +0000"  >&lt;p&gt;Should errors be cached?  Certainly some are transient and shouldn&apos;t be.&lt;/p&gt;

&lt;p&gt;In the SolrDispatchFilter,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( solrRsp.getException() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
    sendError( (HttpServletResponse)response, solrRsp.getException() );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the Expires and Cache-Control headers could be reset as in HttpCacheHeaderUtil.checkAvoidHttpCaching(...).&lt;/p&gt;</comment>
                            <comment id="12580718" author="tpeuss" created="Thu, 20 Mar 2008 10:18:02 +0000"  >&lt;ul&gt;
	&lt;li&gt;Updated to trunk&lt;/li&gt;
	&lt;li&gt;Emits &lt;em&gt;no-cache&lt;/em&gt; headers in case of exceptions&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12598683" author="tpeuss" created="Wed, 21 May 2008 16:22:34 +0100"  >&lt;p&gt;Any further comments on this? Good enough?&lt;/p&gt;</comment>
                            <comment id="12598751" author="timmsc" created="Wed, 21 May 2008 20:00:21 +0100"  >&lt;p&gt;It worked well for me.  I&apos;d like to see it included in 1.3.&lt;/p&gt;</comment>
                            <comment id="12598884" author="otis" created="Thu, 22 May 2008 02:48:44 +0100"  >&lt;p&gt;Yes, I think we should get this in 1.3.&lt;br/&gt;
I took a quick look at the patch and saw this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rsp.setAvoidHttpCaching(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Am I the only one who has a harder time reading negative methods like this, esp. when they take false?&lt;br/&gt;
Would it not be nicer to just have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rsp.setHttpCaching(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or even&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rsp.httpCachingOn() + rsp.httpCachingOff()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;isAvoidHttpCaching()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; have &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;isHttpCachingOn()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I know this is &quot;just naming&quot;, but I think it helps with readability a bit.&lt;/p&gt;

&lt;p&gt;I notice the unit test mods are not in the patch.  Is there no need to test the modified behaviour?&lt;/p&gt;</comment>
                            <comment id="12598891" author="otis" created="Thu, 22 May 2008 04:14:48 +0100"  >&lt;p&gt;Thomas - just to make it more obvious - it looks like Sean Timm included your patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-502&quot; title=&quot;Add search time out support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-502&quot;&gt;&lt;del&gt;SOLR-502&lt;/del&gt;&lt;/a&gt;, so I will look at patches provided with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-502&quot; title=&quot;Add search time out support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-502&quot;&gt;&lt;del&gt;SOLR-502&lt;/del&gt;&lt;/a&gt; instead of expecting code/patch changes here under &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt;.  I hope that&apos;s OK and that it simplifies things.&lt;/p&gt;</comment>
                            <comment id="12598951" author="tpeuss" created="Thu, 22 May 2008 10:02:54 +0100"  >&lt;p&gt;I don&apos;t think that is a good idea to include the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt; with the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-502&quot; title=&quot;Add search time out support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-502&quot;&gt;&lt;del&gt;SOLR-502&lt;/del&gt;&lt;/a&gt;. Sean included it only because he depends on the code changes we do with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I would like to see the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Rework &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt; like Otis mentioned. As we only change the &quot;naming&quot; and not the overall approach I am fine with that. I can do that tomorrow.&lt;/li&gt;
	&lt;li&gt;Commit &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Rework &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-502&quot; title=&quot;Add search time out support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-502&quot;&gt;&lt;del&gt;SOLR-502&lt;/del&gt;&lt;/a&gt; to use the changed API and to be compatible with trunk&lt;/li&gt;
	&lt;li&gt;Commit &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-505&quot; title=&quot;Give RequestHandlers the possiblity to suppress the generation of HTTP caching headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-505&quot;&gt;&lt;del&gt;SOLR-505&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-502&quot; title=&quot;Add search time out support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-502&quot;&gt;&lt;del&gt;SOLR-502&lt;/del&gt;&lt;/a&gt; have different goals. So combining them makes no big sense to me and might confuse people.&lt;/p&gt;</comment>
                            <comment id="12598990" author="dsmiley" created="Thu, 22 May 2008 13:20:37 +0100"  >&lt;p&gt;Otis, I completely agree with your comment on the naming.  It&apos;s a bit odd.  I was thinking the same thing before your comment and I should of said something too; don&apos;t know why I didn&apos;t.&lt;/p&gt;</comment>
                            <comment id="12599060" author="otis" created="Thu, 22 May 2008 16:50:59 +0100"  >&lt;p&gt;Thomas - very much fine with me.  I, too, was wondering why Sean incorporated your patch in his, but assumed you guys had a deal of some kind (e.g. perhaps you were colleagues working in sync).&lt;br/&gt;
I&apos;ll wait for the new patch, commit, resolve this issue and then I&apos;ll move over to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-502&quot; title=&quot;Add search time out support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-502&quot;&gt;&lt;del&gt;SOLR-502&lt;/del&gt;&lt;/a&gt; and wait for Sean to make a new and clean patch for that timeout functionality.&lt;/p&gt;</comment>
                            <comment id="12599449" author="tpeuss" created="Fri, 23 May 2008 18:56:52 +0100"  >&lt;ul&gt;
	&lt;li&gt;Reworked naming like Otis suggested&lt;/li&gt;
	&lt;li&gt;Some other minor changes&lt;/li&gt;
	&lt;li&gt;Added tests to check the new code (this was the hardest part)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12599510" author="otis" created="Fri, 23 May 2008 22:12:34 +0100"  >&lt;p&gt;Danke, Thomas.&lt;/p&gt;

&lt;p&gt;Committed revision 659657.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12395833">SOLR-573</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12361541">SOLR-127</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12390491">SOLR-502</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12391735">SOLR-506</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12382680" name="SOLR-505.patch" size="14630" author="tpeuss" created="Fri, 23 May 2008 18:56:52 +0100"/>
                            <attachment id="12378305" name="SOLR-505.patch" size="10538" author="tpeuss" created="Thu, 20 Mar 2008 10:18:02 +0000"/>
                            <attachment id="12378126" name="SOLR-505.patch" size="8701" author="tpeuss" created="Tue, 18 Mar 2008 14:21:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Mar 2008 14:33:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxqxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>