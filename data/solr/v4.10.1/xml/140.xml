<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:17:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-140/SOLR-140.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-140] single quote in search query will break any sorts</title>
                <link>https://issues.apache.org/jira/browse/SOLR-140</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Query strings that contain a single quote, properly escaped, break &lt;b&gt;as soon as you add a sort field&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;For example,&lt;br/&gt;
If  I want to search for the word ----   jam&apos;s   ---- &lt;br/&gt;
including the single quote, I can.  But as soon as I add a sort criteria to the URL, it breaks.&lt;/p&gt;

&lt;p&gt;Note: %27 is a single quote encoded for URI&apos;s&lt;/p&gt;

&lt;p&gt;Here&apos;s the examples....&lt;br/&gt;
&lt;a href=&quot;http://10.0.101.11:8080/forsale/select/?q=jam%27s&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://10.0.101.11:8080/forsale/select/?q=jam%27s&lt;/a&gt;    &amp;#8211; this works (i get ~20 hits back)&lt;br/&gt;
&lt;a href=&quot;http://10.0.101.11:8080/forsale/select/?q=jam%27s;score%20desc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://10.0.101.11:8080/forsale/select/?q=jam%27s;score%20desc&lt;/a&gt; &amp;#8212; this doesn&apos;t (get 0 hits back)&lt;/p&gt;

&lt;p&gt;Seems that if the first query works, it shouldn&apos;t be breakable just by telling it explicitly to sort on score??  All other sorts break in this scenario as well ( i.e., price, etc).&lt;/p&gt;

&lt;p&gt;email rsp from Yonik:&lt;br/&gt;
Hmmm, Solr tries to be smart about splitting the query from the sort&lt;br/&gt;
specification.&lt;br/&gt;
If it sees a semicolon inside quotes (single or double), or backslash&lt;br/&gt;
escaped, then it will treat it as part of the query.&lt;/p&gt;

&lt;p&gt;An immediate workaround would be to query for &quot;jam&apos;s&quot; or jam\&apos;s&lt;/p&gt;

&lt;p&gt;It would be helpful if you could open a JIRA issue for this.&lt;/p&gt;</description>
                <environment>&lt;p&gt;SOLR nightly build 2007-02-01, but old builds as well.  Ubuntu 6.06 LTS server.  Tomcat 5.5.20&lt;/p&gt;</environment>
        <key id="12361945">SOLR-140</key>
            <summary>single quote in search query will break any sorts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="juancho">John Kleven</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Feb 2007 08:13:08 +0000</created>
                <updated>Wed, 21 Feb 2007 15:26:50 +0000</updated>
                            <resolved>Wed, 21 Feb 2007 15:26:50 +0000</resolved>
                                    <version>1.1.0</version>
                                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12470399" author="yseeley@gmail.com" created="Mon, 5 Feb 2007 23:52:33 +0000"  >&lt;p&gt;A quick patch to the problem.&lt;br/&gt;
Not a complete solution, but it should make the situation better, with little cost.&lt;/p&gt;</comment>
                            <comment id="12473494" author="juancho" created="Thu, 15 Feb 2007 20:18:11 +0000"  >&lt;p&gt;This patch didn&apos;t help me.  Details as follows:&lt;/p&gt;

&lt;p&gt;I applied the patch (split_sort.txt)&lt;/p&gt;

&lt;p&gt;I then recompiled this version:  apache-solr-1.1.0-incubating&lt;/p&gt;

&lt;p&gt;using: ant compile then ant dist&lt;/p&gt;

&lt;p&gt;I then copied:&lt;br/&gt;
/opt/apache-solr-1.1.0-incubating/dist/apache-solr-1.1.1-dev-incubating.war&lt;/p&gt;

&lt;p&gt;as solr.war, and deployed it via tomcat.&lt;/p&gt;

&lt;p&gt;Unfortunately, i could not find any differences in behaviour.&lt;/p&gt;

&lt;p&gt;If I search for anything, and add a &apos;s  (apostrophe s) AND use a sort (i.e.,&lt;br/&gt;
;price or whatever) it returns me no hits.  I did notice that with both pre&lt;br/&gt;
and post patched .war file, if you use an escape char (as u recommended) i.e.,&lt;br/&gt;
\&apos;s it will work.&lt;/p&gt;

&lt;p&gt;Maybe i didn&apos;t do something right, not sure.  Thanks for the patch though,&lt;br/&gt;
let me know if you would like me to try another.&lt;/p&gt;</comment>
                            <comment id="12473503" author="yseeley@gmail.com" created="Thu, 15 Feb 2007 20:34:34 +0000"  >&lt;p&gt;Thanks for reminding me about this patch.&lt;br/&gt;
I just tried it out again and it works for me, so I think it&apos;s probably an installation issue, or you have a more complicated query than I&apos;ve tested with.&lt;/p&gt;

&lt;p&gt;Without patch:&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/select?indent=on&amp;amp;wt=json&amp;amp;q=solr%27s%3Bprice+desc&amp;amp;debugQuery=on&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select?indent=on&amp;amp;wt=json&amp;amp;q=solr%27s%3Bprice+desc&amp;amp;debugQuery=on&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;{&lt;br/&gt;
 &quot;responseHeader&quot;:{&lt;br/&gt;
  &quot;status&quot;:0,&lt;br/&gt;
  &quot;QTime&quot;:0,&lt;br/&gt;
  &quot;params&quot;:{&lt;br/&gt;
	&quot;wt&quot;:&quot;json&quot;,&lt;br/&gt;
	&quot;indent&quot;:&quot;on&quot;,&lt;br/&gt;
	&quot;q&quot;:&quot;solr&apos;s;price desc&quot;,&lt;br/&gt;
	&quot;debugQuery&quot;:&quot;on&quot;}},&lt;br/&gt;
 &quot;response&quot;:&lt;/p&gt;
{&quot;numFound&quot;:0,&quot;start&quot;:0,&quot;docs&quot;:[]
 }
&lt;p&gt;,&lt;br/&gt;
 &quot;debug&quot;:{&lt;br/&gt;
  &quot;rawquerystring&quot;:&quot;solr&apos;s;price desc&quot;,&lt;br/&gt;
  &quot;querystring&quot;:&quot;solr&apos;s;price desc&quot;,&lt;br/&gt;
  &quot;parsedquery&quot;:&quot;PhraseQuery(text:\&quot;solr price\&quot;) text:desc&quot;,&lt;br/&gt;
  &quot;parsedquery_toString&quot;:&quot;text:\&quot;solr price\&quot; text:desc&quot;,&lt;br/&gt;
  &quot;explain&quot;:{}}}&lt;/p&gt;

&lt;p&gt;With patch:&lt;br/&gt;
{&lt;br/&gt;
 &quot;responseHeader&quot;:{&lt;br/&gt;
  &quot;status&quot;:0,&lt;br/&gt;
  &quot;QTime&quot;:100,&lt;br/&gt;
  &quot;params&quot;:{&lt;br/&gt;
	&quot;wt&quot;:&quot;json&quot;,&lt;br/&gt;
	&quot;indent&quot;:&quot;on&quot;,&lt;br/&gt;
	&quot;q&quot;:&quot;solr&apos;s;price desc&quot;,&lt;br/&gt;
	&quot;debugQuery&quot;:&quot;on&quot;}},&lt;br/&gt;
 &quot;response&quot;:&lt;/p&gt;
{&quot;numFound&quot;:0,&quot;start&quot;:0,&quot;docs&quot;:[]
 }
&lt;p&gt;,&lt;br/&gt;
 &quot;debug&quot;:{&lt;br/&gt;
  &quot;rawquerystring&quot;:&quot;solr&apos;s;price desc&quot;,&lt;br/&gt;
  &quot;querystring&quot;:&quot;solr&apos;s&quot;,&lt;br/&gt;
  &quot;parsedquery&quot;:&quot;text:solr&quot;,&lt;br/&gt;
  &quot;parsedquery_toString&quot;:&quot;text:solr&quot;,&lt;br/&gt;
  &quot;explain&quot;:{}}}&lt;/p&gt;</comment>
                            <comment id="12473955" author="yseeley@gmail.com" created="Sat, 17 Feb 2007 20:47:20 +0000"  >&lt;p&gt;Committed.&lt;br/&gt;
Perhaps try the next nightly build (2007-02-18 or later) with the app server in /example to verify.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12350394" name="split_sort.txt" size="1077" author="yseeley@gmail.com" created="Mon, 5 Feb 2007 23:52:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Feb 2007 23:52:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxt5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>