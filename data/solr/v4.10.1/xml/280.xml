<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:26:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-280/SOLR-280.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-280] slightly more efficient SolrDocument implementation</title>
                <link>https://issues.apache.org/jira/browse/SOLR-280</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Following discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-272&quot; title=&quot;SolrDocument performance testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-272&quot;&gt;&lt;del&gt;SOLR-272&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This implementation stores fields as a Map&amp;lt;String,Object&amp;gt; rather then a Map&amp;lt;String,Collection&amp;lt;Object&amp;gt;&amp;gt;.  The API changes slightly in that:&lt;/p&gt;

&lt;p&gt; getFieldValue( name ) returns a Collection if there are more then one fields and a Object if there is only one.&lt;/p&gt;

&lt;p&gt;getFirstValue( name ) returns a single value for the field.  This is intended to make things easier for client applications.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12372746">SOLR-280</key>
            <summary>slightly more efficient SolrDocument implementation</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Sat, 30 Jun 2007 21:38:00 +0100</created>
                <updated>Fri, 3 Aug 2007 18:25:19 +0100</updated>
                            <resolved>Fri, 3 Aug 2007 18:25:19 +0100</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12509326" author="ryantxu" created="Sat, 30 Jun 2007 21:41:19 +0100"  >&lt;p&gt;We could go further and store boosted values as:&lt;/p&gt;

&lt;p&gt;class BoostedValue &lt;/p&gt;
{
  float boost;
  Object value;
}
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;but I think that makes the implementation to convoluted.  If we went this route, we would need to check each value before passing it back to the client.&lt;/p&gt;</comment>
                            <comment id="12509431" author="yseeley@gmail.com" created="Sun, 1 Jul 2007 17:48:35 +0100"  >&lt;p&gt;I think one should be able to simply set a field value without a copy being made:&lt;/p&gt;

&lt;p&gt;public Object setField(String name, Collection value)  &lt;/p&gt;
{
  return _fields.put(name, value);
}

&lt;p&gt;One area I&apos;m concerned about performance is on the output side of things.&lt;br/&gt;
If we added an extension point to manipulate documents before they are written to the response, it makes sense to use SolrDocument there rather than Lucene&apos;s Document.... but we may be constructing 100 in the course of a response.  Just something to keep in mind.&lt;/p&gt;

&lt;p&gt;Another thing to keep in mind is that if it complicates things having SolrInputDocument inherit from SolrDocument, that relationship isn&apos;t needed (is it?)&lt;/p&gt;</comment>
                            <comment id="12509462" author="ryantxu" created="Sun, 1 Jul 2007 21:40:40 +0100"  >&lt;p&gt;This is a new implementation where SolrInputDocument &lt;b&gt;does not&lt;/b&gt; extend SolrDocument.  This way each can be optimized for how they are most frequently used.  &lt;/p&gt;

&lt;p&gt;This adds:&lt;/p&gt;

&lt;p&gt;public class SolrInputField &lt;/p&gt;
{
  final String name;
  float boost = 1.0f;
  Object value = null;
}

&lt;p&gt;and SolrInputDocument keeps a Map&amp;lt;String,SolrInputField&amp;gt;&lt;/p&gt;

&lt;p&gt;This still handles the distinctness bit in SolrInputDocument &amp;#8211; there may be a way to put the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-139&quot; title=&quot;Support updateable/modifiable documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-139&quot;&gt;&lt;del&gt;SOLR-139&lt;/del&gt;&lt;/a&gt; logic elsewhere but i&apos;ll tackle that later.&lt;/p&gt;</comment>
                            <comment id="12509588" author="willjohnson3" created="Mon, 2 Jul 2007 16:10:07 +0100"  >&lt;p&gt;&amp;gt;The API changes mostly affect solrj users. &lt;/p&gt;

&lt;p&gt;being one of those heavily affected users i created the attached patch to make us unaffected.  (or at least i went from a few hundred compile errors to 0)&lt;/p&gt;

&lt;p&gt;the following methods were added back and are mostly 1-5 line wrappers to the existing methods or underlying datastructures.&lt;/p&gt;

&lt;p&gt;setField(String, Object)&lt;br/&gt;
getFieldValue(String)&lt;br/&gt;
getFieldValues(String)&lt;br/&gt;
addField(String, Object)&lt;br/&gt;
getFieldNames() &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;will&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12509601" author="ryantxu" created="Mon, 2 Jul 2007 16:44:40 +0100"  >&lt;p&gt;added in r552514&lt;/p&gt;

&lt;p&gt;thanks Will&lt;/p&gt;</comment>
                            <comment id="12509602" author="ryantxu" created="Mon, 2 Jul 2007 16:58:38 +0100"  >&lt;p&gt;in rev552521, I changed the Float variables to float and default everything to 1.0.  if we have wrapper functions, this seems better then autoboxing/checking null values.&lt;/p&gt;</comment>
                            <comment id="12509605" author="yseeley@gmail.com" created="Mon, 2 Jul 2007 17:06:18 +0100"  >&lt;p&gt;I agree... things are looking good guys!&lt;/p&gt;</comment>
                            <comment id="12517589" author="ryantxu" created="Fri, 3 Aug 2007 18:25:19 +0100"  >&lt;p&gt;resolving an old issue&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12372300">SOLR-272</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12360942" name="SOLR-280-SolrDocument2-API-Compatibility.patch" size="2158" author="willjohnson3" created="Mon, 2 Jul 2007 16:10:07 +0100"/>
                            <attachment id="12360894" name="SOLR-280-SolrDocument2.patch" size="28377" author="ryantxu" created="Sun, 1 Jul 2007 21:40:40 +0100"/>
                            <attachment id="12360872" name="SOLR-280-SolrDocument2.patch" size="8893" author="ryantxu" created="Sat, 30 Jun 2007 21:41:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 1 Jul 2007 16:48:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7310</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxsav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20904</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>