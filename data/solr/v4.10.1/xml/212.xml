<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:23:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-212/SOLR-212.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-212] Embeddable class to call solr directly</title>
                <link>https://issues.apache.org/jira/browse/SOLR-212</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;For some embedded applications, it is useful to call solr without running an HTTP server.  This class mimics the behavior you would get if you sent the request through an HTTP connection.  It is designed to work nicely (ie simple) with JNI&lt;/p&gt;

&lt;p&gt;the main function is:&lt;/p&gt;

&lt;p&gt;public class DirectSolrConnection &lt;br/&gt;
{&lt;br/&gt;
  String request( String pathAndParams, String body ) throws Exception&lt;/p&gt;
  {
    ...
  }
&lt;p&gt;}&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12367881">SOLR-212</key>
            <summary>Embeddable class to call solr directly</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2007 00:10:50 +0100</created>
                <updated>Fri, 10 May 2013 11:40:24 +0100</updated>
                            <resolved>Sun, 29 Apr 2007 19:33:45 +0100</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12491100" author="ryantxu" created="Tue, 24 Apr 2007 00:23:32 +0100"  >&lt;p&gt;This class now sits in: o.a.s.servlet because it uses package protected request parsing functions.&lt;/p&gt;

&lt;p&gt;It has a &lt;b&gt;really&lt;/b&gt; simple test that should be extended.&lt;/p&gt;

&lt;p&gt;Example usage:&lt;/p&gt;

&lt;p&gt; DirectSolrConnection solr = new DirectSolrConnection();&lt;br/&gt;
 String json = solr.request( &quot;/select?qt=dismax&amp;amp;wt=json&amp;amp;q=...&quot;, null );&lt;br/&gt;
 String xml = solr.request( &quot;/update&quot;, &quot;&amp;lt;add&amp;gt;&amp;lt;doc&amp;gt;&amp;lt;field ...&quot; );&lt;/p&gt;</comment>
                            <comment id="12492372" author="otis" created="Fri, 27 Apr 2007 20:02:46 +0100"  >&lt;p&gt;Mucho cool.  I see the DirectSolrConnection.coffee doesn&apos;t have ASL v2 in it.&lt;br/&gt;
How does this relate to the code I see on &lt;a href=&quot;http://wiki.apache.org/solr/EmbeddedSolr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/EmbeddedSolr&lt;/a&gt;  ?&lt;br/&gt;
Typo: initalized -&amp;gt; initialized (in javadoc + code)&lt;/p&gt;</comment>
                            <comment id="12492383" author="ryantxu" created="Fri, 27 Apr 2007 21:22:42 +0100"  >&lt;p&gt;Added header and fixed &quot;Initialized&quot; typo&lt;br/&gt;
(fixed the typo in Config r533207)&lt;/p&gt;

&lt;p&gt;This approach differs from the one outlined in &lt;a href=&quot;http://wiki.apache.org/solr/EmbeddedSolr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/EmbeddedSolr&lt;/a&gt; in that it is strictly a text interface that mimics the request and response stream.  The other approach gives you direct access to the lucene Document class.  The text approach is nice because it means the same code would work if it needed to run across a network.&lt;/p&gt;
</comment>
                            <comment id="12492517" author="ryantxu" created="Sat, 28 Apr 2007 21:41:25 +0100"  >&lt;p&gt;Adding dataDir to an optional constructor.&lt;/p&gt;</comment>
                            <comment id="12492518" author="bwhitman" created="Sat, 28 Apr 2007 22:19:00 +0100"  >&lt;p&gt;Much love from user land on this one. I just successfully put solr in a C app without any webserver running using JNI.&lt;/p&gt;

&lt;p&gt;After I clean up my JNI calling code I can post an example app here to show how it&apos;s done on the client side if anyone is interested?&lt;/p&gt;






</comment>
                            <comment id="12492522" author="bwhitman" created="Sat, 28 Apr 2007 23:44:33 +0100"  >&lt;p&gt;Since the main use case of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-212&quot; title=&quot;Embeddable class to call solr directly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-212&quot;&gt;&lt;del&gt;SOLR-212&lt;/del&gt;&lt;/a&gt; is to embed it in client applications, we should be careful about logging. As of now &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-212&quot; title=&quot;Embeddable class to call solr directly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-212&quot;&gt;&lt;del&gt;SOLR-212&lt;/del&gt;&lt;/a&gt; will spit stuff all over stderr.&lt;/p&gt;

&lt;p&gt;I suggest putting this&lt;/p&gt;

&lt;p&gt;System.setProperty(&quot;java.util.logging.config.file&quot;, instanceDir+&quot;/conf/logging.properties&quot;);&lt;/p&gt;

&lt;p&gt;near line 79 of DirectSolrConnection.java. That way, if a developer/user chooses, they can put a logging.prop file in conf and set direct logging of Solr requests either to their own application logs or a file. If the conf/logging.properties file does not exist, I believe the default logging.properties will be used (which is what happens now.)&lt;/p&gt;
</comment>
                            <comment id="12492526" author="ryantxu" created="Sun, 29 Apr 2007 00:45:31 +0100"  >&lt;p&gt;Updated to take an (optional) logging path&lt;/p&gt;</comment>
                            <comment id="12492534" author="otis" created="Sun, 29 Apr 2007 02:48:22 +0100"  >&lt;p&gt;Brian: interested!&lt;/p&gt;</comment>
                            <comment id="12492587" author="ryantxu" created="Sun, 29 Apr 2007 19:03:35 +0100"  >&lt;p&gt;Added some real tests (it adds/delete/searches for documents) and fixed the things that broke &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12492590" author="ryantxu" created="Sun, 29 Apr 2007 19:33:45 +0100"  >&lt;p&gt;added in rev 533538&lt;/p&gt;

&lt;p&gt;Yes Brian, we&apos;d love to see the JNI code!&lt;/p&gt;
</comment>
                            <comment id="12492591" author="bwhitman" created="Sun, 29 Apr 2007 19:46:48 +0100"  >&lt;p&gt;Am working on extracting it from Cocoa as we speak... watch this space!&lt;/p&gt;
</comment>
                            <comment id="12493255" author="bwhitman" created="Thu, 3 May 2007 01:52:11 +0100"  >&lt;p&gt;I didn&apos;t have time to extract it from Cocoa/ObjC. Here is the xcode project with everything anyway &amp;#8211; so right now you&apos;ll need OSX to try this out. This is a very simple test of Ryan&apos;s &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-212&quot; title=&quot;Embeddable class to call solr directly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-212&quot;&gt;&lt;del&gt;SOLR-212&lt;/del&gt;&lt;/a&gt; patch, it queries, adds a document and commits, all without a web server! Let me know if you have any questions. --brian&lt;/p&gt;</comment>
                            <comment id="12493466" author="skeptikos" created="Thu, 3 May 2007 20:12:02 +0100"  >&lt;p&gt;One issue which comes up both DirectSolrConnection.java and the &lt;a href=&quot;http://wiki.apache.org/solr/EmbeddedSolr&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/EmbeddedSolr&lt;/a&gt; technique (which I have started using for a custom indexer)  is that the SolrCore constructor will always create an initial searcher, and doing so will execute any warming SolrEventListeners defined in the config, whether or not the application needs it. Besides delaying startup and wasting cycles, it can cause the allocation of significant amounts of memory for sort FieldCaches, Solr caches, and the like, none of which will be used for a non-search application.  And&lt;/p&gt;

&lt;p&gt;Other than maintaining 2 sets of config files differening only in whether warmup queries are defined, does anyone have any ideas for how warmup can be selectively enabled based on the calling context?&lt;/p&gt;</comment>
                            <comment id="12517011" author="tom.liu" created="Wed, 1 Aug 2007 17:49:28 +0100"  >&lt;p&gt;The DirectSolrConnection  class should have an additional method added:&lt;/p&gt;

&lt;p&gt;public void clearup() &lt;/p&gt;
{
	  core.close();
  }

&lt;p&gt;otherwise, the program cannot stop, there are searcher and listeners running in other thread. Use this method to clear the resources.&lt;/p&gt;</comment>
                            <comment id="12517012" author="tom.liu" created="Wed, 1 Aug 2007 17:51:06 +0100"  >&lt;p&gt;My version of  DirectSolrConnection  with clearup method added.&lt;/p&gt;</comment>
                            <comment id="12517013" author="tom.liu" created="Wed, 1 Aug 2007 17:54:49 +0100"  >&lt;p&gt;With clear up method added to clear up used resources&lt;/p&gt;</comment>
                            <comment id="12517049" author="ryantxu" created="Wed, 1 Aug 2007 20:14:26 +0100"  >&lt;p&gt;I added a &quot;close()&quot; method in rev 561922&lt;/p&gt;</comment>
                            <comment id="12517346" author="tom.liu" created="Thu, 2 Aug 2007 20:20:57 +0100"  >&lt;p&gt;That is great!&lt;/p&gt;</comment>
                            <comment id="12523177" author="sunrise1984" created="Tue, 28 Aug 2007 08:25:35 +0100"  >&lt;p&gt;Expect standard C/C++ versions with a solr plgu-in!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12362985" name="DirectSolrConnection.java" size="6814" author="tom.liu" created="Wed, 1 Aug 2007 17:54:49 +0100"/>
                            <attachment id="12356485" name="SOLR-212-DirectSolrConnection.patch" size="11106" author="ryantxu" created="Sun, 29 Apr 2007 19:03:35 +0100"/>
                            <attachment id="12356468" name="SOLR-212-DirectSolrConnection.patch" size="9201" author="ryantxu" created="Sun, 29 Apr 2007 00:45:31 +0100"/>
                            <attachment id="12356465" name="SOLR-212-DirectSolrConnection.patch" size="7926" author="ryantxu" created="Sat, 28 Apr 2007 21:41:25 +0100"/>
                            <attachment id="12356433" name="SOLR-212-DirectSolrConnection.patch" size="7612" author="ryantxu" created="Fri, 27 Apr 2007 21:22:42 +0100"/>
                            <attachment id="12356096" name="SOLR-212-DirectSolrConnection.patch" size="6523" author="ryantxu" created="Tue, 24 Apr 2007 00:23:32 +0100"/>
                            <attachment id="12356680" name="embeddedSolr.zip" size="1341388" author="bwhitman" created="Thu, 3 May 2007 01:52:11 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Apr 2007 19:02:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxspj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>