<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:23:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-875/SOLR-875.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-875] Consolidate Solr&apos;s and Lucene&apos;s OpenBitSet classes</title>
                <link>https://issues.apache.org/jira/browse/SOLR-875</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Currently there are two versions of OpenBitSet and BitUtil in Solr and Lucene.&lt;/p&gt;

&lt;p&gt;We should only have one version of these classes in Lucene, that Solr should use.&lt;/p&gt;

&lt;p&gt;Tasks here:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Merge different versions into Lucene&lt;/li&gt;
	&lt;li&gt;Make Solr classes use/extend the classes in Lucene (we need to keep the Solr ones for backwards-compatibility)&lt;/li&gt;
	&lt;li&gt;Deprecate the classes in Solr&lt;/li&gt;
	&lt;li&gt;Change all references in Solr to use the classes in Lucene&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One difficulty here is Solr&apos;s BitSetIterator vs. Lucene&apos;s OpenBitSetIterator. Both have a next() method, however one returns an int (BitSetIterator), the other one returns a boolean and offers a doc() method to get the doc id. So I can&apos;t make BitSetIterator extend OpenBitSetIterator. There are not many places in Solr&apos;s core that use BitSetIterator, so we could simply change e.g. search/BitDocSet.java to use OpenBitSetIterator. This would however require to change the call to next() into two calls to next() and doc(). I wonder if this would be a noticeable performance hit?&lt;/p&gt;

&lt;p&gt;We could of course also leave both iterators and only merge OpenBitSet and BitUtil, but I&apos;d prefer to only have one iterator, because they basically do exactly the same.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409102">SOLR-875</key>
            <summary>Consolidate Solr&apos;s and Lucene&apos;s OpenBitSet classes</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michaelbusch">Michael Busch</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Nov 2008 23:58:06 +0000</created>
                <updated>Sun, 7 Dec 2008 06:12:26 +0000</updated>
                            <resolved>Sat, 6 Dec 2008 14:56:24 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12650084" author="michaelbusch" created="Mon, 24 Nov 2008 00:14:28 +0000"  >&lt;blockquote&gt;
&lt;p&gt;This would however require to change the call to next() into two calls to next() and doc(). I wonder if this would be a noticeable performance hit?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I can also add a &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; nextDoc()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;method to OpenBitSetIterator, that Solr can use. But it would have to set curDocId before returning the value. So still a tiny overhead, but probably less than two method calls.&lt;/p&gt;</comment>
                            <comment id="12650467" author="michaelbusch" created="Tue, 25 Nov 2008 05:20:15 +0000"  >&lt;p&gt;This patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;deprecates OpenBitSet, BitUtil and BitSetIterator in org.apache.solr.util&lt;/li&gt;
	&lt;li&gt;updates all places in Solr&apos;s core that reference these classes to use the ones in Lucene&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All tests pass and this patch is backwards-compatible. &lt;br/&gt;
Note that this patch only compiles against the current Lucene trunk + &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1467&quot; title=&quot;Consolidate Solr&amp;#39;s and Lucene&amp;#39;s OpenBitSet classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1467&quot;&gt;&lt;del&gt;LUCENE-1467&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12650469" author="michaelbusch" created="Tue, 25 Nov 2008 05:27:44 +0000"  >&lt;p&gt;Note that Yonik recently (August &apos;08) commit this to Lucene&apos;s OpenBitSet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
URL: http:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/viewvc?rev=690302&amp;amp;view=rev
&lt;/span&gt;Log:
fix OpenBitSet.hashCode rotate

Modified:
    lucene/java/trunk/src/java/org/apache/lucene/util/OpenBitSet.java

Modified: lucene/java/trunk/src/java/org/apache/lucene/util/OpenBitSet.java
URL: http:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/util/OpenBitSet.java?rev=690302&amp;amp;r1=690301&amp;amp;r2=690302&amp;amp;view=diff
&lt;/span&gt;==============================================================================
--- lucene/java/trunk/src/java/org/apache/lucene/util/OpenBitSet.java (original)
+++ lucene/java/trunk/src/java/org/apache/lucene/util/OpenBitSet.java Fri Aug 29 08:33:44 2008
@@ -763,7 +763,7 @@
       &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; h = 0x98761234;  &lt;span class=&quot;code-comment&quot;&gt;// something non-zero &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; length==0
&lt;/span&gt;       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = bits.length; --i&amp;gt;=0;) {
       h ^= bits[i];
-      h = (h &amp;lt;&amp;lt; 1) | (h &amp;gt;&amp;gt;&amp;gt; 31); &lt;span class=&quot;code-comment&quot;&gt;// rotate left
&lt;/span&gt;+      h = (h &amp;lt;&amp;lt; 1) | (h &amp;gt;&amp;gt;&amp;gt; 63); &lt;span class=&quot;code-comment&quot;&gt;// rotate left
&lt;/span&gt;     }
     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)((h&amp;gt;&amp;gt;32) ^ h);  &lt;span class=&quot;code-comment&quot;&gt;// fold leftmost bits into right
&lt;/span&gt;   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This fix wasn&apos;t committed to Solr yet.&lt;/p&gt;</comment>
                            <comment id="12650756" author="michaelbusch" created="Tue, 25 Nov 2008 21:49:47 +0000"  >&lt;p&gt;I just committed and resolved &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1467&quot; title=&quot;Consolidate Solr&amp;#39;s and Lucene&amp;#39;s OpenBitSet classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1467&quot;&gt;&lt;del&gt;LUCENE-1467&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12654114" author="gsingers" created="Sat, 6 Dec 2008 14:56:24 +0000"  >&lt;p&gt;Committed revision 723994.&lt;/p&gt;

&lt;p&gt;Had a slight change to the patch for the new UninvertedField faceting feature that was recently added.&lt;/p&gt;

&lt;p&gt;Thanks, Michael!&lt;/p&gt;</comment>
                            <comment id="12654177" author="michaelbusch" created="Sun, 7 Dec 2008 06:12:26 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Had a slight change to the patch for the new UninvertedField faceting feature that was recently added.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Great, thanks Grant!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12409103">LUCENE-1467</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12394631" name="solr-875.patch" size="52964" author="michaelbusch" created="Tue, 25 Nov 2008 05:20:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 Dec 2008 14:56:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxoo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20316</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>