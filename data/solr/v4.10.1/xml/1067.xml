<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:15:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1067/SOLR-1067.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1067] QueryParsing.parseFunction uses Singleton Core (SolrCore.getSolrCore())</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1067</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;QueryParsing.parseFunction is a static utility method that depends on the SolrCore.getSolrCore singleton &amp;#8211; but it is not yet deprecated and is used in some rather important places in the code base (the result is that the last core initialized&lt;/p&gt;

&lt;p&gt;it was noted a while back, with some comments about how to tackle the problem, but it looks like we never opened an issue to deal with it...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/QueryParsing-using-SolrCore.getSolrCore()-td19806087.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/QueryParsing-using-SolrCore.getSolrCore()-td19806087.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...we should deal with this in some way prior to the 1.4 release (if nothing else, we need to document it as a caveat).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12416687">SOLR-1067</key>
            <summary>QueryParsing.parseFunction uses Singleton Core (SolrCore.getSolrCore())</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Mar 2009 21:18:18 +0000</created>
                <updated>Fri, 10 May 2013 11:39:59 +0100</updated>
                            <resolved>Wed, 6 Jun 2012 22:56:10 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12681034" author="hossman" created="Wed, 11 Mar 2009 21:25:38 +0000"  >&lt;p&gt;to followup on a comment i made in that email thread...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The sanest thing to do would probably be to make parseFunction construct a&lt;br/&gt;
local instance of FunctionQParser (with a null SolrQueryRequest) instead&lt;br/&gt;
of using QParser.getParser(...).  that should be fairly close to the way&lt;br/&gt;
it worked in older versions&lt;/p&gt;

&lt;p&gt;(hmmm... except FunctionQParser does something similar to get a&lt;br/&gt;
ValueSourceParser ... a new constructor for FunctionQParser that&lt;br/&gt;
explicitly tells it to use ValueSourceParser.standardValueSourceParsers&lt;br/&gt;
might be in order).&lt;/p&gt;

&lt;p&gt;I think it goes without saying that QueryParsing.parseFunction should be&lt;br/&gt;
deprecated as well ... fortunately it&apos;s only used in a few places in the&lt;br/&gt;
core code ... unfortunately those places also don&apos;t currently have access&lt;br/&gt;
to a SolrQueryRequest at the moment:&lt;br/&gt;
  1) SolrPluginUtils.parseFuncs &amp;#8211; should probably be deprecated, callers&lt;br/&gt;
of it should start using the QParser APIs.&lt;br/&gt;
  2) SolrQueryParser.getFieldQuery &amp;#8211; it&apos;s only used if the&lt;br/&gt;
SolrQueryParser was constructed with an IndexSchema and not with a QParser&lt;br/&gt;
(in which case it can ask the QParser for a subParser) .. the IndexSchema&lt;br/&gt;
constructor should probably be deprecated as well (but i haven&apos;t dug in to&lt;br/&gt;
see how far down the rabit hole that change would go) &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we gave FunctionQParser a constructor that took in an IndexSchema instead of a SolrQueryRequest, then that new constructor could be used by both QueryParsing.parseFunction and SolrQueryParser.getFieldQuery and &amp;#8211; we&apos;d still need to use the ValueSourceParser.standardValueSourceParsers as well, but that would be better then picking the ones declared arbitrarily in the last core.&lt;/p&gt;</comment>
                            <comment id="12740906" author="yseeley@gmail.com" created="Sat, 8 Aug 2009 17:07:59 +0100"  >&lt;p&gt;Here&apos;s a patch that incrementally improves the situation.&lt;br/&gt;
I think the only place a QParser isn&apos;t used now is deleteByQuery.&lt;/p&gt;</comment>
                            <comment id="12740921" author="yseeley@gmail.com" created="Sat, 8 Aug 2009 18:22:01 +0100"  >&lt;p&gt;I think we&apos;ve done everything reasonable for 1.4, moving the rest to 1.5&lt;/p&gt;</comment>
                            <comment id="12872494" author="hossman" created="Thu, 27 May 2010 23:06:31 +0100"  >&lt;p&gt;Bulk updating 240 Solr issues to set the Fix Version to &quot;next&quot; per the process outlined in this email...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Selection criteria was &quot;Unresolved&quot; with a Fix Version of 1.5, 1.6, 3.1, or 4.0.  email notifications were suppressed.&lt;/p&gt;

&lt;p&gt;A unique token for finding these 240 issues in the future: hossversioncleanup20100527&lt;/p&gt;</comment>
                            <comment id="13043814" author="rcmuir" created="Fri, 3 Jun 2011 17:47:12 +0100"  >&lt;p&gt;Bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                            <comment id="13106370" author="rcmuir" created="Fri, 16 Sep 2011 15:50:47 +0100"  >&lt;p&gt;3.4 -&amp;gt; 3.5&lt;/p&gt;</comment>
                            <comment id="13237081" author="hossman" created="Fri, 23 Mar 2012 20:31:42 +0000"  >&lt;p&gt;Bulk changing fixVersion 3.6 to 4.0 for any open issues that are unassigned and have not been updated since March 19.&lt;/p&gt;

&lt;p&gt;Email spam suppressed for this bulk edit; search for hoss20120323nofix36 to identify all issues edited&lt;/p&gt;</comment>
                            <comment id="13290467" author="hossman" created="Wed, 6 Jun 2012 22:56:10 +0100"  >&lt;p&gt;no longer a problem in 4.0 due to both of these (deprecated) methods having been removed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12444749">SOLR-1703</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415938" name="SOLR-1067.patch" size="7200" author="yseeley@gmail.com" created="Sat, 8 Aug 2009 17:07:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 8 Aug 2009 16:07:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxnhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>