<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-669/SOLR-669.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-669] SOLR currently does not support caching for (Query, FacetFieldList)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-669</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;It is huge performance bottleneck and it describes huge difference between qtime and SolrJ&apos;s elapsedTime. I quickly browsed SolrIndexSearcher: it caches only (Key, DocSet/DocList &amp;lt;Lucene Ids&amp;gt;) key-value pairs and it does not have cache for (Query, FacetFieldList).&lt;br/&gt;
filterCache stores DocList for each &apos;filter&apos; and is used for constant recalculations...&lt;/p&gt;

&lt;p&gt;This would be significant performance improvement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401338">SOLR-669</key>
            <summary>SOLR currently does not support caching for (Query, FacetFieldList)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="funtick">Fuad Efendi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jul 2008 17:39:23 +0100</created>
                <updated>Wed, 20 Feb 2013 21:41:53 +0000</updated>
                            <resolved>Wed, 20 Feb 2013 21:41:53 +0000</resolved>
                                    <version>1.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="6048000">1,680h</timeoriginalestimate>
                            <timeestimate seconds="6048000">1,680h</timeestimate>
                                        <comments>
                            <comment id="12618574" author="funtick" created="Thu, 31 Jul 2008 02:05:55 +0100"  >&lt;p&gt;This piece of code in SimpleFacets:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sf.multiValued() || ft.isTokenized() || ft &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; BoolField) {
      &lt;span class=&quot;code-comment&quot;&gt;// Always use filters &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; booleans... we know the number of values is very small.
&lt;/span&gt;      counts = getFacetTermEnumCounts(searcher, docs, field, offset, limit, mincount,missing,sort,prefix);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-comment&quot;&gt;// TODO: &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; logic could use filters instead of the fieldcache &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// the number of terms in the field is small enough.
&lt;/span&gt;      counts = getFieldCacheCounts(searcher, docs, field, offset,limit, mincount, missing, sort, prefix);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;optimization for single-valued non-tokenized... &apos;Lucene FieldCache to get counts for each unique field value in docs&apos;&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;We should implement &lt;b&gt;additional&lt;/b&gt; caching to support this &lt;em&gt;the FilterCache to get the intersection&lt;/em&gt;; FilterCache stores DocSet only and does not store NamedList of field-intersections:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
   * Returns a list of terms in the specified field along with the 
   * corresponding count of documents in the set that match that constraint.
   * This method uses the FilterCache to get the intersection count between &amp;lt;code&amp;gt;docs&amp;lt;/code&amp;gt;
   * and the DocSet &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each term in the filter.
   *
   * @see FacetParams#FACET_LIMIT
   * @see FacetParams#FACET_ZEROS
   * @see FacetParams#FACET_MISSING
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; NamedList getFacetTermEnumCounts(SolrIndexSearcher searcher, DocSet docs, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; offset, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; limit, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; mincount, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; missing, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; sort, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix)
    &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12618578" author="funtick" created="Thu, 31 Jul 2008 02:16:46 +0100"  >&lt;p&gt;To confirm: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SOLR uses Lucene internals (with caching) only if field is non-tokenized single-valued non-boolean, and SOLR does not have own cache to store calculated intersections (&lt;em&gt;faceting&lt;/em&gt;).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13581763" author="janhoy" created="Tue, 19 Feb 2013 23:41:04 +0000"  >&lt;p&gt;Closing old issue, please re-open if necessary.&lt;/p&gt;</comment>
                            <comment id="13581976" author="gunnar" created="Wed, 20 Feb 2013 05:54:45 +0000"  >&lt;p&gt;This bug is closed as duplicate but I can&apos;t actually see a link to the other issue this one duplicates. It would be nice if such a link can be added.&lt;/p&gt;</comment>
                            <comment id="13582549" author="janhoy" created="Wed, 20 Feb 2013 21:41:53 +0000"  >&lt;p&gt;Changed resolution state to &quot;Won&apos;t fix&quot;. It appears this is not a feature anyone finds useful enough to even comment on, far less contribute to for almost 5 years, so to me that&apos;s a theoretical need, not a real one. Please re-open if you (or anyone else) want to see this solved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Feb 2013 23:41:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxpxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>