<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:14:42 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-965/SOLR-965.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-965] Better exception logging when no ping query configured</title>
                <link>https://issues.apache.org/jira/browse/SOLR-965</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;user noted that with the example multicore configs, &lt;a href=&quot;http://localhost:8983/solr/core1/admin/ping&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/core1/admin/ping&lt;/a&gt; results in a 500 error and logs quite a bit of crap starting with a NullPointerException.&lt;/p&gt;

&lt;p&gt;The failing ping is the correct behavior, because the example multicore configs don&apos;t define a pingQuery &amp;#8211; but the code path of the failure and the exceptions logged are less then ideal.  ping.jsp (which is still used if the PingRequestHandler doesn&apos;t get registered) and SolrConfig.getPingQueryRequest should me modified to log an (on topic) error and fail fast when there is no &amp;lt;pingQuery&amp;gt; declaration.&lt;/p&gt;

&lt;p&gt;A quick skim of PingRequestHandlers suggests we may also want to add some better logging (specifically: warnings about configuring it with good defaults) if it gets called without any params.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412627">SOLR-965</key>
            <summary>Better exception logging when no ping query configured</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jan 2009 20:00:07 +0000</created>
                <updated>Tue, 10 Nov 2009 15:51:55 +0000</updated>
                            <resolved>Tue, 28 Apr 2009 23:24:53 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12664653" author="hossman" created="Fri, 16 Jan 2009 20:00:46 +0000"  >&lt;p&gt;example of the exception in case anyone searches for it...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SEVERE: java.lang.NullPointerException
        at org.apache.solr.common.util.StrUtils.splitSmart(StrUtils.java:37)
        at org.apache.solr.search.OldLuceneQParser.parse(LuceneQParserPlugin.java:103)
        at org.apache.solr.search.QParser.getQuery(QParser.java:126)
        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:82)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:150)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1325)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1349)
        at org.apache.jsp.admin.ping_jsp._jspService(org.apache.jsp.admin.ping_jsp:180)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:80)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:464)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:358)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12702388" author="markrmiller@gmail.com" created="Fri, 24 Apr 2009 15:28:04 +0100"  >&lt;p&gt;Here is a simple patch that throws an exception if the ping query params are 0.&lt;/p&gt;

&lt;p&gt;In the multicore scenario, you get:&lt;/p&gt;

&lt;p&gt;HTTP ERROR: 500&lt;/p&gt;

&lt;p&gt;Ping requires that the PingRequestHandler, admin/pingQuery is defined in solrconfig.xml with both QT and Q params&lt;/p&gt;

&lt;p&gt;java.lang.IllegalStateException: Ping requires that the PingRequestHandler, admin/pingQuery is defined in solrconfig.xml with both QT and Q params&lt;br/&gt;
	at org.apache.solr.core.SolrConfig.getPingQueryRequest(SolrConfig.java:228)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.getPingQueryRequest(SolrCore.java:781)&lt;br/&gt;
	at org.apache.jsp.admin.ping_jsp._jspService(org.apache.jsp.admin.ping_jsp:177)&lt;/p&gt;


&lt;p&gt;I couldn&apos;t get the current ping.jsp error handling to work - I would get state exceptions errors that the response was already committed if a resp.sendError was hit&lt;br/&gt;
in the jsp. So I just throw an exception instead, and the dispatchfilter catches the exception and does the resp.sendError.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12703859" author="hossman" created="Tue, 28 Apr 2009 23:24:53 +0100"  >&lt;p&gt;thanks mark ... i added a little warning logging on init if hte deprecated feature was used, and tweaked your error message so it directed people to use PingRequestHandler instead of the old admin/pingQuery if they ever encountered that error.&lt;/p&gt;

&lt;p&gt;Committed revision 769574.&lt;/p&gt;</comment>
                            <comment id="12775629" author="gsingers" created="Tue, 10 Nov 2009 15:51:55 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12406365" name="SOLR-965.patch" size="1959" author="markrmiller@gmail.com" created="Fri, 24 Apr 2009 15:28:04 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Apr 2009 14:28:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxo3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>