<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:17:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1750/SOLR-1750.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1750] SolrInfoMBeanHandler - replacement for stats.jsp and registry.jsp</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1750</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;stats.jsp is cool and all, but suffers from escaping issues, and also is not accessible from SolrJ or other standard Solr APIs.&lt;/p&gt;

&lt;p&gt;Here&apos;s a request handler that emits everything stats.jsp does.&lt;/p&gt;

&lt;p&gt;For now, it needs to be registered in solrconfig.xml like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;requestHandler name=&lt;span class=&quot;code-quote&quot;&gt;&quot;/admin/stats&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.SystemStatsRequestHandler&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But will register this in AdminHandlers automatically before committing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12455167">SOLR-1750</key>
            <summary>SolrInfoMBeanHandler - replacement for stats.jsp and registry.jsp</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehatcher">Erik Hatcher</assignee>
                                    <reporter username="ehatcher">Erik Hatcher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2010 12:27:35 +0000</created>
                <updated>Tue, 21 Jun 2011 17:48:31 +0100</updated>
                            <resolved>Fri, 11 Jun 2010 22:54:22 +0100</resolved>
                                                    <fixVersion>1.5</fixVersion>
                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>web gui</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12829050" author="ehatcher" created="Wed, 3 Feb 2010 12:29:52 +0000"  >&lt;p&gt;I&apos;ll commit this in the near future. &lt;/p&gt;

&lt;p&gt;Any thoughts on the naming of this beast?  &quot;stats&quot; is a bit overloaded (StatsComponent).  as is &quot;system&quot; (SystemInfoHandler).&lt;/p&gt;</comment>
                            <comment id="12829052" author="ehatcher" created="Wed, 3 Feb 2010 12:31:19 +0000"  >&lt;p&gt;Also, food for thought, when (hopefully not if) the VelocityResponseWriter is moved into core, we can deprecate stats.jsp and skin the output of this request handler for a similar pleasant view like stats.jsp+client-side xsl does now.&lt;/p&gt;</comment>
                            <comment id="12829144" author="steve_rowe" created="Wed, 3 Feb 2010 17:08:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Any thoughts on the naming of this beast?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How about SysInfoRequestHandler - bonus: SIRH evokes &lt;a href=&quot;http://en.wikipedia.org/wiki/Sirhan_Sirhan&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RFK&apos;s assassin&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12829199" author="steve_rowe" created="Wed, 3 Feb 2010 19:07:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;stats&quot; is a bit overloaded (StatsComponent). as is &quot;system&quot; (SystemInfoHandler).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I swear when I read this, before I suggested SIRH, you had written &quot;SystemStatsHandler&quot; instead of &quot;SystemInfoHandler&quot;.  Not sure how you changed it without a red &quot;edited&quot; annotation in the header for your comment....  Et tu, Atlassian?&lt;/p&gt;

&lt;p&gt;Anyway, pathological paranoia aside, SIRH is too close to SystemInfoHandler - I hereby begin the process of formally withdrawing it from consideration.  Ok, done.&lt;/p&gt;

&lt;p&gt;stats.xsl creates a title prefix &quot;Solr Statistics&quot; - how about SolrStatsRequestHandler?&lt;/p&gt;</comment>
                            <comment id="12829354" author="simon.rosenthal" created="Thu, 4 Feb 2010 00:57:58 +0000"  >
&lt;p&gt;+1 on SolrStatsRequestHandler&lt;/p&gt;

&lt;p&gt;You might want to consider either omitting or making optional the Lucene Fieldcache stats; they can often be &lt;b&gt;very&lt;/b&gt; slow to be generated  ( see  &lt;a href=&quot;http://www.lucidimagination.com/search/document/5ba908577d2e4c25/stats_page_slow_in_latest_nightly#2f40166c25f9bfa0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.lucidimagination.com/search/document/5ba908577d2e4c25/stats_page_slow_in_latest_nightly#2f40166c25f9bfa0&lt;/a&gt; ). One use case for this request handler that I can see is high frequency (every few seconds) monitoring as part of performance testing,  for which a fast response is pretty mandatory.&lt;/p&gt;
</comment>
                            <comment id="12829773" author="hossman" created="Thu, 4 Feb 2010 20:52:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Any thoughts on the naming of this beast?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;SystemInfoHandler sounds good.&lt;/p&gt;

&lt;p&gt;This would probably also be a good time to retire &quot;registry.jsp&quot; ... all we need to do is add a few more pieces of &quot;system info&quot; to this handler (and add some param options to disable the &quot;stats&quot; part of the output)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, food for thought, when (hopefully not if) the VelocityResponseWriter is moved into core, we can deprecate stats.jsp and skin the output of this request handler for a similar pleasant view like stats.jsp+client-side xsl does now.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Even if/when VelocityResponseWRiter is in the core, i&apos;d still rather just rely on client side XSLT for this to reduce the number of things that could potentially get missconfigured and then confuse people why the page doesn&apos;t look right ... the XmlResponseWRriter has always supported a &quot;stylesheet&quot; param that (while not generally useful to most people) let&apos;s you easily reference any style sheet that can be served out of the admin directory ... all we really need is an updatd .xsl file to translate the standard XML format into the old style stats view.&lt;/p&gt;</comment>
                            <comment id="12829883" author="hossman" created="Fri, 5 Feb 2010 00:37:34 +0000"  >&lt;p&gt;Some updates to Erik&apos;s previous version...&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;adds everything from registry.jsp
	&lt;ul&gt;
		&lt;li&gt;lucene/solr version info&lt;/li&gt;
		&lt;li&gt;source/docs info for each object&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;forcibly disable HTTP Caching&lt;/li&gt;
	&lt;li&gt;adds params to control which objects are listed
	&lt;ul&gt;
		&lt;li&gt;(multivalued) &quot;cat&quot; param restricts category names (default is all)&lt;/li&gt;
		&lt;li&gt;(multivalued) &quot;key&quot; param restricts object keys (default is all)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;adds (boolean) &quot;stats&quot; param to control if stats are outputed for each object
	&lt;ul&gt;
		&lt;li&gt;per-field style override can be used to override per object key&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;refactored the old nested looping that stast.jsp did over every object and every category into a single pass&lt;/li&gt;
	&lt;li&gt;switch all HashMaps to NamedLists or SimpleOrderedMaps to preserve predictable ordering&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Examples...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;?cat=CACHE&lt;/tt&gt;
	&lt;ul&gt;
		&lt;li&gt;return info about caches, but nothing else (stats disabled by default)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;?stats=true&amp;amp;cat=CACHE&lt;/tt&gt;
	&lt;ul&gt;
		&lt;li&gt;return info and stats about caches, but nothing else&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;?stats=true&amp;amp;f.fieldCache.stats=false&lt;/tt&gt;
	&lt;ul&gt;
		&lt;li&gt;Info about everything, stats for everything except fieldCache&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;?key=fieldCache&amp;amp;stats=true&lt;/tt&gt;
	&lt;ul&gt;
		&lt;li&gt;Return info and stats for fieldCache, but nothing else&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I left the class name alone, but i vote for &quot;SystemInfoRequestHandler&quot; with a default registration of &quot;/admin/info&quot;&lt;/p&gt;
</comment>
                            <comment id="12829904" author="hossman" created="Fri, 5 Feb 2010 01:29:49 +0000"  >&lt;p&gt;Whoops .. i botched the HTTP Caching prevention in the last version&lt;/p&gt;</comment>
                            <comment id="12839928" author="hossman" created="Tue, 2 Mar 2010 00:05:43 +0000"  >
&lt;p&gt;Committed revision 917812.&lt;/p&gt;

&lt;p&gt;I went ahead and commited the most recent attachment under the name &quot;SystemInfoRequestHandler&quot; with slightly generalized javadocs.&lt;/p&gt;

&lt;p&gt;Leaving the issue open so we make sure to settle the remaining issues before we release...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;decide if we want to change the name&lt;/li&gt;
	&lt;li&gt;add default registration as part of the AdminRequestHandler (ie: /admin/info ?)&lt;/li&gt;
	&lt;li&gt;add some docs (didn&apos;t wnat to make a wiki page until we&apos;re certain of hte name)&lt;/li&gt;
	&lt;li&gt;decide if we want to modify the response structure (should all of the top level info be encapsulated in a container?)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12840208" author="ehatcher" created="Tue, 2 Mar 2010 15:40:47 +0000"  >&lt;p&gt;Thanks Hoss for committing!&lt;/p&gt;

&lt;p&gt;naming: I&apos;m fine with how it is, but fine if the name changes too and +1 to adding default registration&lt;/p&gt;
</comment>
                            <comment id="12872446" author="hossman" created="Thu, 27 May 2010 23:05:29 +0100"  >&lt;p&gt;Bulk updating 240 Solr issues to set the Fix Version to &quot;next&quot; per the process outlined in this email...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Selection criteria was &quot;Unresolved&quot; with a Fix Version of 1.5, 1.6, 3.1, or 4.0.  email notifications were suppressed.&lt;/p&gt;

&lt;p&gt;A unique token for finding these 240 issues in the future: hossversioncleanup20100527&lt;/p&gt;</comment>
                            <comment id="12872800" author="hossman" created="Fri, 28 May 2010 04:07:59 +0100"  >
&lt;p&gt;Correcting Fix Version based on CHANGES.txt, see this thread for more details...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-dev/201005.mbox/%3Calpine.DEB.1.10.1005251052040.24672@radix.cryptio.net%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12874768" author="hossman" created="Wed, 2 Jun 2010 21:05:02 +0100"  >&lt;p&gt;1) i screwed up, and should have put this in o.a.s.handler.admin instead of o.a.s.handler&lt;/p&gt;

&lt;p&gt;2) Somehow i completely overlooked the fact that there is already a o.a.s.handler.admin.SystemInfoHandler (Erik even mentioned it above) which is registered to the path /admin/system and returns basic info on the current machine, current JVM, the versions of Lucene/Solr, and some basic info about the SolrCore.&lt;/p&gt;

&lt;p&gt;With that in mind i propose we rename this new one to &quot;SolrInfoMBeanHandler&quot; since that&apos;s the crux of what it provides (data about all of the SolrInfoMBeans) and have AdminHandler register it with the path /admin/mbeans.  We could/should probably also remove some of the code that overlaps between this handler and SystemInfoHandler.&lt;/p&gt;

&lt;p&gt;comments?&lt;/p&gt;
</comment>
                            <comment id="12874904" author="lancenorskog" created="Thu, 3 Jun 2010 02:20:10 +0100"  >&lt;p&gt;Please add an option that just lists the catalog of MBeans.&lt;/p&gt;</comment>
                            <comment id="12874910" author="hossman" created="Thu, 3 Jun 2010 02:32:27 +0100"  >&lt;blockquote&gt;&lt;p&gt;Please add an option that just lists the catalog of MBeans. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s already there &amp;#8211; if stats=false it just returns the list of SolrInfoMBeans from the registry (like registry.jsp)&lt;/p&gt;

&lt;p&gt;what do you think of the proposed name change &amp;amp; path: SolrInfoMBeanHandler &amp;amp; /admin/mbeans ?&lt;/p&gt;</comment>
                            <comment id="12877986" author="hossman" created="Fri, 11 Jun 2010 22:46:21 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1750&quot; title=&quot;SolrInfoMBeanHandler - replacement for stats.jsp and registry.jsp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1750&quot;&gt;&lt;del&gt;SOLR-1750&lt;/del&gt;&lt;/a&gt; cleanup...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rename to o.a.s.handler.admin.SolrInfoMBeanHandler&lt;/li&gt;
	&lt;li&gt;add default registration as part of the AdminRequestHandler /admin/mbeans&lt;/li&gt;
	&lt;li&gt;eliminate duplication of functionality w/SystemInfoHandler&lt;/li&gt;
	&lt;li&gt;&quot;docs&quot; are left in explicit order returned by plugin&lt;/li&gt;
	&lt;li&gt;if &quot;cats&quot; param is used, categories are returned in that order&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12877988" author="hossman" created="Fri, 11 Jun 2010 22:54:22 +0100"  >&lt;p&gt;Committed revision 953886. ... trunk&lt;br/&gt;
Committed revision 953887. ... branch 3x&lt;/p&gt;</comment>
                            <comment id="12894277" author="jrochkind" created="Sat, 31 Jul 2010 14:45:10 +0100"  >&lt;p&gt;re: naming. If you&apos;re someone like me who is becoming fairly familiar with using solr, but not with the solr code &amp;#8211; then &quot;SolrInfoMBeanHandler&quot; or &quot;admin/mbean&quot;  doesn&apos;t mean anything to me, and is kind of confusing. I want to get info on my indexes and caches-- it would be very non-obvious to me (if i hadn&apos;t read this ticket) that &quot;MBean&quot; has anything to do with this, since I don&apos;t know what an MBean is &amp;#8211; and probably shouldn&apos;t have to to use solr through it&apos;s APIs.&lt;/p&gt;

&lt;p&gt;So seems to me that a name based on the functions provided (not the underlying internal implementation) is preferable. But i recognize the namespace conflict problems, so much stuff in Solr already (some of it deprecated or soon to be deprecated or removed, some of it not) that it&apos;s hard to find a non-conflicting name. &lt;/p&gt;

&lt;p&gt;Even if the underlying class is SolrInfoMBeanHandler, would it be less (or more) confusing for the path to be /admin/info still?  That might be less confusing, as someone like me would still see /admin/info in the config and think, aha, that might be what I want. Or the lack of consistency might just be more confusing in the end. &lt;/p&gt;

&lt;p&gt;I don&apos;t know what the current SystemInfoHandler does, what&apos;s the difference between that and this new one? There might be hints to naming in that. If the new one does everything the old one does, perhaps call it NewSystemInfoHandler, but still register it at /admin/info, with the other one being deprecated? Just brainstorming. Or rename the other one to OldSystemInfoHandler. &lt;/p&gt;</comment>
                            <comment id="13013079" author="gsingers" created="Wed, 30 Mar 2011 16:45:29 +0100"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                            <comment id="13052606" author="janhoy" created="Tue, 21 Jun 2011 16:04:51 +0100"  >&lt;p&gt;The /admin/stats handler is not registered by default, nor is it included in example config. I had to add &amp;lt;requestHandler name=&quot;/admin/stats&quot; class=&quot;org.apache.solr.handler.admin.SolrInfoMBeanHandler&quot; /&amp;gt; to my solrconfig to get it working.&lt;/p&gt;</comment>
                            <comment id="13052656" author="hossman" created="Tue, 21 Jun 2011 17:48:31 +0100"  >&lt;p&gt;Jan: as stated above the registration i picked was /admin/mbeans - stats is too specific since the component can be used for other purposes then getting stats.&lt;/p&gt;

&lt;p&gt;it&apos;s also not a &quot;default&quot; handler &amp;#8211; it&apos;s registered if you register the AdminHandler&lt;/p&gt;

&lt;p&gt;Jonathan: i overlooked your comment until now.  the existing SystemInfoHandler isn&apos;t deprecated &amp;#8211; it&apos;s still very useful and provides information about the entire &quot;system&quot; solr is running in (the jvm, the os, etc...)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446909" name="SOLR-1750-followup.patch" size="10064" author="hossman" created="Fri, 11 Jun 2010 22:46:20 +0100"/>
                            <attachment id="12434914" name="SystemStatsRequestHandler.java" size="4076" author="hossman" created="Fri, 5 Feb 2010 01:29:49 +0000"/>
                            <attachment id="12434909" name="SystemStatsRequestHandler.java" size="4028" author="hossman" created="Fri, 5 Feb 2010 00:37:34 +0000"/>
                            <attachment id="12434671" name="SystemStatsRequestHandler.java" size="2458" author="ehatcher" created="Wed, 3 Feb 2010 12:28:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Feb 2010 17:08:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5704</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxjf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19465</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>