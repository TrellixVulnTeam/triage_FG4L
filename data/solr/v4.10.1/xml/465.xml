<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-465/SOLR-465.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-465] Add configurable DirectoryProvider so that alternate Directory implementations can be specified via solrconfig.xml</title>
                <link>https://issues.apache.org/jira/browse/SOLR-465</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Solr is presently hard-coded to use the FSDirectory implementation in Lucene.  Other Directory implementations are possible.  This patch creates a new DirectoryProvider interface and extends SolrCore to load an implementation of it from solrconfig.xml (if specified).  If not specified, then it will fallback to the FSDirectory.&lt;/p&gt;

&lt;p&gt;A DirectoryProvider plugin can be configured in solrconfig.xml with the following XML:&lt;br/&gt;
   &amp;lt;directoryProvider class=&quot;class.name&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;!-- Parameters as required by the implementation --&amp;gt;&lt;br/&gt;
   &amp;lt;/directoryProvider&amp;gt;&lt;/p&gt;

&lt;p&gt;This patch was created against solr trunk checked out on 11/20/2007.  Most of it is new code and should apply cleanly or with minor relocation.  If it does not, let me know and I will update.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12386946">SOLR-465</key>
            <summary>Add configurable DirectoryProvider so that alternate Directory implementations can be specified via solrconfig.xml</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="tlaurenzomq">TJ Laurenzo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Jan 2008 15:08:32 +0000</created>
                <updated>Thu, 13 Aug 2009 15:13:03 +0100</updated>
                            <resolved>Tue, 28 Apr 2009 20:15:48 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>8</watches>
                                    <timeoriginalestimate seconds="900">0.25h</timeoriginalestimate>
                            <timeestimate seconds="900">0.25h</timeestimate>
                                        <comments>
                            <comment id="12561703" author="tlaurenzomq" created="Wed, 23 Jan 2008 15:09:37 +0000"  >&lt;p&gt;Patch to add DirectoryProvider configurability to Solr.&lt;/p&gt;</comment>
                            <comment id="12566343" author="hossman" created="Wed, 6 Feb 2008 21:26:01 +0000"  >&lt;p&gt;i haven&apos;t looked at the patch, but i just wanted to point out that  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-465&quot; title=&quot;Add configurable DirectoryProvider so that alternate Directory implementations can be specified via solrconfig.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-465&quot;&gt;&lt;del&gt;SOLR-465&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-243&quot; title=&quot;Create a hook to allow custom code to create custom IndexReaders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-243&quot;&gt;&lt;del&gt;SOLR-243&lt;/del&gt;&lt;/a&gt; should be dealt with holistically so that the solutions to each of the use cases work well together.&lt;/p&gt;

&lt;p&gt;(ie: perhaps DirectoryProvider should be a property of an IndexReaderFactory)&lt;/p&gt;</comment>
                            <comment id="12626084" author="markrmiller@gmail.com" created="Wed, 27 Aug 2008 12:45:08 +0100"  >&lt;p&gt;New patch.&lt;/p&gt;

&lt;p&gt;Updates things to trunk, tweaks things to be more like latest &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-243&quot; title=&quot;Create a hook to allow custom code to create custom IndexReaders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-243&quot;&gt;&lt;del&gt;SOLR-243&lt;/del&gt;&lt;/a&gt;, adds a unit test to make sure alternate DirectoryFactory is used.&lt;/p&gt;

&lt;p&gt;Looks like we will want to use an alternate Directory for UNIX systems due to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-753&quot; title=&quot;Use NIO positional read to avoid synchronization in FSIndexInput&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-753&quot;&gt;&lt;del&gt;LUCENE-753&lt;/del&gt;&lt;/a&gt; (which in the end adds a new Directory implementation called org.apache.lucene.store.NIOFSDirectory). Makes sense to fit this issue into that.&lt;/p&gt;

&lt;p&gt;Once Lucene is up to date, I&apos;ll add a new patch that returns a directory based on the OS from the default Factory.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12637633" author="markrmiller@gmail.com" created="Tue, 7 Oct 2008 21:23:23 +0100"  >&lt;p&gt;I&apos;ve worked a bit on updating this to trunk, but it has a bit of overlap with solr-243, so if either are going in, it will be much easier to finish the other after.&lt;/p&gt;</comment>
                            <comment id="12642453" author="markrmiller@gmail.com" created="Fri, 24 Oct 2008 13:36:11 +0100"  >&lt;p&gt;Updated to trunk and now uses NIOFSDirectory if non-windows OS is detected.&lt;/p&gt;</comment>
                            <comment id="12645348" author="yseeley@gmail.com" created="Wed, 5 Nov 2008 22:36:54 +0000"  >&lt;p&gt;Patch looks good to me - I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="12645638" author="yseeley@gmail.com" created="Fri, 7 Nov 2008 00:39:25 +0000"  >&lt;p&gt;Thanks guys, I just committed this.&lt;/p&gt;</comment>
                            <comment id="12646782" author="markrmiller@gmail.com" created="Wed, 12 Nov 2008 02:54:16 +0000"  >&lt;p&gt;Sorry guys, this patch isnt right for NIODirectory. You can&apos;t control the directory that way. Will have to think of something else...at worst users will have to select with a java property rather than auto getting the good stuff.&lt;/p&gt;</comment>
                            <comment id="12647002" author="yseeley@gmail.com" created="Wed, 12 Nov 2008 19:06:14 +0000"  >&lt;p&gt;Hmmm, can you expand on what&apos;s wrong?&lt;/p&gt;</comment>
                            <comment id="12647008" author="markrmiller@gmail.com" created="Wed, 12 Nov 2008 19:17:31 +0000"  >&lt;p&gt;You will get an FSDirectory no matter which OS. Open is a static method that pulls from a system property for the directory impl to use. So its not broken per say (you can set the property and get the right stuff), but you wont get the NIOFSDirectory automatically on non windows like the code implies. I&apos;m going to try and make it workable at the Lucene level without the sys property is my hope.&lt;/p&gt;</comment>
                            <comment id="12647022" author="otis" created="Wed, 12 Nov 2008 19:43:07 +0000"  >&lt;p&gt;But couldn&apos;t one start the container with the appropriate system property pointing to the new NIOFSDirectory class and &quot;turn on&quot; NIOFSDirectory (or any other Directory) that way?&lt;/p&gt;</comment>
                            <comment id="12647027" author="shalinmangar" created="Wed, 12 Nov 2008 19:51:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;But couldn&apos;t one start the container with the appropriate system property pointing to the new NIOFSDirectory class and &quot;turn on&quot; NIOFSDirectory (or any other Directory) that way?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why not specify in solrconfig.xml?&lt;/p&gt;

&lt;p&gt;Another question I had was &amp;#8211; Is it possible to use RAMDirectory too?&lt;/p&gt;</comment>
                            <comment id="12647034" author="markrmiller@gmail.com" created="Wed, 12 Nov 2008 20:04:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;But couldn&apos;t one start the container with the appropriate system property pointing to the new NIOFSDirectory class and &quot;turn on&quot; NIOFSDirectory (or any other Directory) that way?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. Thats why I say its not really broken.  It will still work, and you can still change the impl...but the code implies you will get the right impl for the right OS, and you won&apos;t without using that system property. Hoping to make that pain go away.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Why not specify in solrconfig.xml?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Possibly...I think automatic has a lot of allure though...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is it possible to use RAMDirectory too?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The factory returns a Directory, so it is in that sense...it may have other ramifications though depending on what solr assumes. Don&apos;t know off hand.&lt;/p&gt;</comment>
                            <comment id="12647704" author="yseeley@gmail.com" created="Fri, 14 Nov 2008 19:26:17 +0000"  >&lt;p&gt;reopening.  &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1451&quot; title=&quot;Can&amp;#39;t create NIOFSDirectory w/o setting a system property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1451&quot;&gt;&lt;del&gt;LUCENE-1451&lt;/del&gt;&lt;/a&gt; has been committed, adding public constructors to FSDirectory and subclasses.&lt;/p&gt;</comment>
                            <comment id="12647899" author="shalinmangar" created="Sat, 15 Nov 2008 21:28:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Possibly...I think automatic has a lot of allure though...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Automatic is great. I was only referring to using solrconfig.xml instead of system property for this. I see now that this system property is used by Lucene and not Solr.&lt;/p&gt;

&lt;p&gt;Just for my understanding, now Solr uses NIOFSDirectory automatically but only on non-windows platforms, is that correct?&lt;/p&gt;</comment>
                            <comment id="12647902" author="markrmiller@gmail.com" created="Sat, 15 Nov 2008 22:02:47 +0000"  >&lt;p&gt;Thats the hope once we upgrade to a Lucene with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1451&quot; title=&quot;Can&amp;#39;t create NIOFSDirectory w/o setting a system property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1451&quot;&gt;&lt;del&gt;LUCENE-1451&lt;/del&gt;&lt;/a&gt;, but right now its not possible to auto do it - you have to set the system property.&lt;/p&gt;</comment>
                            <comment id="12649340" author="shalinmangar" created="Thu, 20 Nov 2008 11:41:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1451&quot; title=&quot;Can&amp;#39;t create NIOFSDirectory w/o setting a system property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1451&quot;&gt;&lt;del&gt;LUCENE-1451&lt;/del&gt;&lt;/a&gt; has been committed. So all we need is to upgrade the lucene jars in the solr lib, right?&lt;/p&gt;

&lt;p&gt;If there are no objections, I&apos;ll do that today.&lt;/p&gt;</comment>
                            <comment id="12649344" author="markrmiller@gmail.com" created="Thu, 20 Nov 2008 11:44:08 +0000"  >&lt;p&gt;We will need a tiny new patch as well...ill put it up as soon as the jars are upgraded .&lt;/p&gt;</comment>
                            <comment id="12649467" author="shalinmangar" created="Thu, 20 Nov 2008 20:23:23 +0000"  >&lt;p&gt;I have upgraded Lucene jars to r719351&lt;/p&gt;</comment>
                            <comment id="12651584" author="markrmiller@gmail.com" created="Fri, 28 Nov 2008 15:22:53 +0000"  >&lt;p&gt;Sorry, this fell off my radar. I&apos;ll post another patch to finish this up this weekend.&lt;/p&gt;</comment>
                            <comment id="12651896" author="yseeley@gmail.com" created="Mon, 1 Dec 2008 01:15:41 +0000"  >&lt;p&gt;Committed.  Thanks Mark!&lt;/p&gt;</comment>
                            <comment id="12683832" author="aklochkov" created="Fri, 20 Mar 2009 10:27:42 +0000"  >&lt;p&gt;I tried to use custom Directory implementation which doesn&apos;t use file system and found that there are some places in the Solr code which don&apos;t let to do this &apos;cause they instantiate FSDirectory. Here is my patch, please review it and apply if it&apos;s Ok. I don&apos;t have rights to re-open the issue.&lt;/p&gt;</comment>
                            <comment id="12685410" author="hossman" created="Sat, 21 Mar 2009 03:16:46 +0000"  >&lt;p&gt;Hmmm... yes, this does seem to be an oversight.&lt;/p&gt;

&lt;p&gt;the root issue seems to be that there is still a SolrIndexWriter constructor that takes a IndexDeletionPolicy but does &lt;b&gt;not&lt;/b&gt; take a DirectoryFactory. &lt;/p&gt;

&lt;p&gt;the latest patch seems to be adding yet another constructor (that takes both) and modifies the callers of the existing IndexDeletionPolicy method to use the new one ... but since the IndexDeletionPolicy code was added after 1.3 we can just change it.&lt;/p&gt;

&lt;p&gt;It also seems like it might be a good idea to add some logging to SolrIndexWriter.getDirectory(String,SolrIndexConfig) warning people when legacy code is being used that might not be respecting their DirectoryFactory.&lt;/p&gt;

&lt;p&gt;reopening, assigning to Yonik to review since he &amp;amp; Miller worked on this originally&lt;/p&gt;</comment>
                            <comment id="12702173" author="markrmiller@gmail.com" created="Fri, 24 Apr 2009 01:25:03 +0100"  >&lt;p&gt;Bah, those constructors came in after this patch - they should be the issues reopened! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll put up a patch changing it.&lt;/p&gt;</comment>
                            <comment id="12703633" author="markrmiller@gmail.com" created="Tue, 28 Apr 2009 14:13:25 +0100"  >&lt;p&gt;changes made&lt;/p&gt;</comment>
                            <comment id="12703777" author="markrmiller@gmail.com" created="Tue, 28 Apr 2009 19:15:55 +0100"  >&lt;p&gt;Sorry, missed UpdateHandler in that last patch - new patch to fix. Eclipse is both a blessing and a curse &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12703793" author="yseeley@gmail.com" created="Tue, 28 Apr 2009 20:15:48 +0100"  >&lt;p&gt;Thanks Mark, committed.&lt;/p&gt;</comment>
                            <comment id="12703899" author="markrmiller@gmail.com" created="Wed, 29 Apr 2009 01:14:02 +0100"  >&lt;p&gt;I should have also changed the SolrCore use of SolrIndexWriter to create an index to use a non deprecated SolrIndexWriter constructor.&lt;/p&gt;</comment>
                            <comment id="12715282" author="thetaphi" created="Mon, 1 Jun 2009 23:16:00 +0100"  >&lt;p&gt;I committed a changed version of the FSDirectory today to Lucene trunk (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1658&quot; title=&quot;Absorb NIOFSDirectory into FSDirectory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1658&quot;&gt;&lt;del&gt;LUCENE-1658&lt;/del&gt;&lt;/a&gt;). The ctor/class name of the default directory impl is now SimpleFSDirectory vs. NIOFSDirectory and MMapDirectory. All three dirs can no instantiated by a one-arg and two-arg ctor (File&lt;span class=&quot;error&quot;&gt;&amp;#91;, LockFactory&amp;#93;&lt;/span&gt;).&lt;/p&gt;

&lt;p&gt;FSDirectory will get abstract in 3.0 and so cannot be instantiated (only protected ctor). It is now also a factory, to choose automatically the best variant for the platform: FSDirectory.open(File&lt;span class=&quot;error&quot;&gt;&amp;#91;, LockFactory&amp;#93;&lt;/span&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12388830">SOLR-480</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12369810">SOLR-243</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12402651" name="SOLR-465-fixes.patch" size="2242" author="aklochkov" created="Fri, 20 Mar 2009 10:27:42 +0000"/>
                            <attachment id="12406717" name="SOLR-465.patch" size="723" author="markrmiller@gmail.com" created="Wed, 29 Apr 2009 01:14:02 +0100"/>
                            <attachment id="12406670" name="SOLR-465.patch" size="2291" author="markrmiller@gmail.com" created="Tue, 28 Apr 2009 19:15:55 +0100"/>
                            <attachment id="12406639" name="SOLR-465.patch" size="1492" author="markrmiller@gmail.com" created="Tue, 28 Apr 2009 14:13:25 +0100"/>
                            <attachment id="12394982" name="SOLR-465.patch" size="769" author="markrmiller@gmail.com" created="Mon, 1 Dec 2008 00:26:56 +0000"/>
                            <attachment id="12392787" name="SOLR-465.patch" size="30662" author="markrmiller@gmail.com" created="Fri, 24 Oct 2008 13:36:11 +0100"/>
                            <attachment id="12388994" name="SOLR-465.patch" size="31669" author="markrmiller@gmail.com" created="Wed, 27 Aug 2008 12:45:08 +0100"/>
                            <attachment id="12373836" name="solr-directory-provider.patch" size="13686" author="tlaurenzomq" created="Wed, 23 Jan 2008 15:09:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Feb 2008 21:26:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxr67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>