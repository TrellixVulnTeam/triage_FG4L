<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:22:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-966/SOLR-966.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-966] Enhance the map() function to take in a default value</title>
                <link>https://issues.apache.org/jira/browse/SOLR-966</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The map function currently takes in only one min,max target and returns the field&apos;s value if it is not between min and max. This makes it very difficult to use it for scoring. &lt;/p&gt;

&lt;p&gt;This issue aims to add an optional fifth parameter to the map function query which will be a default value that is used if the field&apos;s value does not fall between min and max. If this parameter is not specified, the behavior is the same as before for back-compatibility.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412661">SOLR-966</key>
            <summary>Enhance the map() function to take in a default value</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Jan 2009 11:53:46 +0000</created>
                <updated>Tue, 10 Nov 2009 15:50:34 +0000</updated>
                            <resolved>Tue, 3 Feb 2009 21:09:39 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12664823" author="shalinmangar" created="Sat, 17 Jan 2009 12:09:09 +0000"  >&lt;p&gt;I guess the problem (feature?) of map is that if the field value is not between min and max, it outputs the value of the field. That makes it difficult to use map for scoring on numeric field values.&lt;/p&gt;

&lt;p&gt;An alternative to Noble&apos;s approach can be to add an optional fifth argument for a default value. If value does not fall between min and max, map can output the default value. However, both these approaches are mutually exclusive.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12664848" author="ryantxu" created="Sat, 17 Jan 2009 17:24:35 +0000"  >&lt;p&gt;For context, what class/component are you looking at?&lt;/p&gt;

&lt;p&gt;What use case are you trying to solve?&lt;/p&gt;</comment>
                            <comment id="12664851" author="shalinmangar" created="Sat, 17 Jan 2009 17:39:53 +0000"  >&lt;p&gt;I&apos;m using the map function (FunctionQuery).&lt;/p&gt;

&lt;p&gt;Consider the following (hypothetical) use-case:&lt;br/&gt;
I want to boost up listings of a certain category over listings of another category. Say for example, &quot;SUV&quot; and &quot;Sedan&quot;. For each category, I&apos;ve indexed a integer field, say &quot;SUV&quot; = 1 and &quot;Sedan&quot; = 2. Now I&apos;m trying to boost SUVs over Sedans through function queries. This is just one of the many different boosts I need to apply.&lt;/p&gt;

&lt;p&gt;So I use q=&lt;em&gt;val&lt;/em&gt;:map(category, 1, 1, 3) &lt;em&gt;val&lt;/em&gt;:map(category, 2, 2, 1). The priorities of the categories are not fixed i.e. they change at runtime. I cannot use a sort because of the many different boosting criteria I have. I cannot use the normal boosts because I don&apos;t want TF/IDF influencing the scores.&lt;/p&gt;

&lt;p&gt;I hope the description makes sense.&lt;/p&gt;</comment>
                            <comment id="12665037" author="noble.paul" created="Mon, 19 Jan 2009 04:34:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;However, both these approaches are mutually exclusive.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is still possible to have both these working together.&lt;/p&gt;

&lt;p&gt;For the no:of arguments &apos;n&apos; if (n%3) == 0 then no default is used. if ((n%3)-1) =0 , then the last value can be used as default. Although it is more complex (to explain) it hopefully will meet most of the requirements of a switch - case - default &lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12668539" author="noble.paul" created="Thu, 29 Jan 2009 18:16:32 +0000"  >&lt;p&gt;decided to go w/ shalin&apos;s suggestion . added just a default value. The last value is optional. if not present ,the field value is used as default.&lt;/p&gt;</comment>
                            <comment id="12668807" author="shalinmangar" created="Fri, 30 Jan 2009 10:25:32 +0000"  >&lt;p&gt;Changed equals and hashcode method to take the default value into consideration.&lt;/p&gt;

&lt;p&gt;I found a bug in the hashcode function:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;.floatToIntBits(min);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which should have been&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;h += &lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;.floatToIntBits(min);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since my knowledge of hashing is limited, it would be nice if someone can review this.&lt;/p&gt;</comment>
                            <comment id="12670113" author="shalinmangar" created="Tue, 3 Feb 2009 21:09:39 +0000"  >&lt;p&gt;Committed revision 740445.&lt;/p&gt;

&lt;p&gt;Thanks Noble!&lt;/p&gt;</comment>
                            <comment id="12775461" author="gsingers" created="Tue, 10 Nov 2009 15:50:34 +0000"  >&lt;p&gt;Bulk close Solr 1.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399111" name="SOLR-966.patch" size="2655" author="shalinmangar" created="Fri, 30 Jan 2009 10:25:32 +0000"/>
                            <attachment id="12399023" name="SOLR-966.patch" size="1872" author="noble.paul" created="Thu, 29 Jan 2009 18:16:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 Jan 2009 12:09:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxo3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>