<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:23:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1150/SOLR-1150.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1150] OutofMemoryError on enabling highlighting</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1150</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Please refer to following mail thread&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://markmail.org/message/5nhkm5h3ongqlput&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://markmail.org/message/5nhkm5h3ongqlput&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am testing with 2MB document size and just 500 documents. Indexing is working fine even with 128MB heap size. But on searching Solr throws OOM error. This issue is observed only when we enable highlighting. While indexing I am storing 1 MB text. While searching Solr reads all the 500 documents in the memory. It also reads the complete 1 MB stored field in the memory for all 500 documents. Due to this 500 docs * 1 MB * 2 (2 bytes per char) = 1000 MB memory is required for searching.&lt;/p&gt;

&lt;p&gt;This memory usage can be reduced by reading one document at a time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424806">SOLR-1150</key>
            <summary>OutofMemoryError on enabling highlighting</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="sidgate">Siddharth Gargate</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 May 2009 12:18:03 +0100</created>
                <updated>Tue, 10 Nov 2009 15:52:05 +0000</updated>
                            <resolved>Tue, 16 Jun 2009 14:54:36 +0100</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>highlighter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12707932" author="sidgate" created="Mon, 11 May 2009 09:17:40 +0100"  >&lt;p&gt;I have attached the patch file with previous suggested code changes..&lt;/p&gt;</comment>
                            <comment id="12711582" author="markrmiller@gmail.com" created="Thu, 21 May 2009 12:54:14 +0100"  >&lt;p&gt;Patch looks right - my only concern would be a performance impact, but that does look unlikely. There is likely to be some benefit in loading them all at once, but I can&apos;t imagine one at a time is much of a loss.&lt;/p&gt;</comment>
                            <comment id="12711952" author="sidgate" created="Fri, 22 May 2009 06:23:00 +0100"  >&lt;p&gt;Thanks Mark.&lt;br/&gt;
SolrIndexSearcher.readDocs method internally reads one doc at a time. So there shouldn&apos;t be any performance loss. &lt;/p&gt;</comment>
                            <comment id="12719597" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 16:27:25 +0100"  >&lt;p&gt;Odd - change looks like it wouldnt affect this, but somehow the highlighter test fails as it attempts to access a deleted doc. Not quite sure what is up yet.&lt;/p&gt;</comment>
                            <comment id="12719598" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 16:32:11 +0100"  >&lt;p&gt;There is a problem with distrib and highlighting as well.&lt;/p&gt;</comment>
                            <comment id="12719599" author="yseeley@gmail.com" created="Mon, 15 Jun 2009 16:34:42 +0100"  >&lt;p&gt;It&apos;s trying to read the loop iterator (i.e. 0-9)  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12719601" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 16:40:50 +0100"  >&lt;p&gt;ah, thanks for the spot yonik.&lt;/p&gt;

&lt;p&gt;Ill switch it to use doc ids instead and see how things go &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12720136" author="markrmiller@gmail.com" created="Tue, 16 Jun 2009 14:54:35 +0100"  >&lt;p&gt;Thanks Siddharth!&lt;/p&gt;</comment>
                            <comment id="12775733" author="gsingers" created="Tue, 10 Nov 2009 15:52:05 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410688" name="SOLR-1150.patch" size="2504" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 18:34:38 +0100"/>
                            <attachment id="12407756" name="SOLR-1150.patch" size="1824" author="sidgate" created="Mon, 11 May 2009 09:17:40 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 May 2009 11:54:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxmzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>