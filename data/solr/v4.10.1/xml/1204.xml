<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:26:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1204/SOLR-1204.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1204] Enhance SpellingQueryConverter to handle UTF-8 instead of ASCII only</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1204</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Solr - User - SpellCheckComponent: queryAnalyzerFieldType&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/SpellCheckComponent%3A-queryAnalyzerFieldType-td23870668.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/SpellCheckComponent%3A-queryAnalyzerFieldType-td23870668.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the above thread, it was suggested to extend the SpellingQueryConverter to cover the full UTF-8 range instead of handling US-ASCII only. This might be as simple as changing the regular expression used to tokenize the input string to accept a sequence of one or more Unicode letters ( \p&lt;/p&gt;
{L}
&lt;p&gt;+ ) instead of a sequence of one or more word characters ( \w+ ).&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html&lt;/a&gt; for Java regular expression reference.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427179">SOLR-1204</key>
            <summary>Enhance SpellingQueryConverter to handle UTF-8 instead of ASCII only</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="milu71">Michael Ludwig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2009 08:55:41 +0100</created>
                <updated>Tue, 10 Nov 2009 15:52:07 +0000</updated>
                            <resolved>Fri, 5 Jun 2009 11:24:16 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12716531" author="milu71" created="Fri, 5 Jun 2009 08:58:07 +0100"  >&lt;p&gt;A patch replacing the regular expression used to tokenize the input string as per the description.&lt;/p&gt;</comment>
                            <comment id="12716544" author="shalinmangar" created="Fri, 5 Jun 2009 10:12:50 +0100"  >&lt;p&gt;I know people don&apos;t usually use non-ASCII characters in field names but shouldn&apos;t we replace the &lt;br class=&quot;atl-forced-newline&quot; /&gt;w, before the colon, too for completeness?&lt;/p&gt;</comment>
                            <comment id="12716549" author="milu71" created="Fri, 5 Jun 2009 10:25:56 +0100"  >&lt;p&gt;What is a legal field name? I assumed it was ASCII only, starting with a letter or underscore, i.e. a typical symbol name.&lt;/p&gt;</comment>
                            <comment id="12716552" author="shalinmangar" created="Fri, 5 Jun 2009 10:31:12 +0100"  >&lt;blockquote&gt;&lt;p&gt;What is a legal field name?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Any UTF-8 string will do actually. There were discussions on limiting valid field names to valid Java identifiers which are also allowed to have UTF-8 characters.&lt;/p&gt;</comment>
                            <comment id="12716555" author="milu71" created="Fri, 5 Jun 2009 10:50:31 +0100"  >&lt;p&gt;Update of the previous patch to also allow any valid UTF-8 character in the field name, not only in the query string.&lt;/p&gt;</comment>
                            <comment id="12716567" author="shalinmangar" created="Fri, 5 Jun 2009 11:24:16 +0100"  >&lt;p&gt;Committed revision 781975.&lt;/p&gt;

&lt;p&gt;Thanks Michael!&lt;/p&gt;</comment>
                            <comment id="12716594" author="milu71" created="Fri, 5 Jun 2009 13:20:17 +0100"  >&lt;p&gt;Sorry for being inexact in my last comment. I wrote &quot;any valid UTF-8 character&quot; when I meant &quot;any valid UTF-8 letter&quot;, which is what the patch contains, and which isn&apos;t equivalent to what I wrote.&lt;/p&gt;

&lt;p&gt;In order to produce a correct patch, I need to know what are legal field names. It can hardly be &quot;any UTF-8 string&quot; as that will also contain the colon, which is already used to delimit field names from query strings. What about digits? Asterisk? Dash (minus)? Underscore? Space? Tabulator?&lt;/p&gt;

&lt;p&gt;My original idea was to allow letters, digits and underscore. But this may not be sufficient.&lt;/p&gt;</comment>
                            <comment id="12716597" author="rcmuir" created="Fri, 5 Jun 2009 13:22:46 +0100"  >&lt;p&gt;hi, michael. Its not for some languages. I recommend using this definition of &apos;identifier&apos; from UTR #8:&lt;/p&gt;

&lt;p&gt;&amp;lt;identifier&amp;gt;  	 	::= &amp;lt;identifier_start &amp;gt; ( &amp;lt;identifier_start&amp;gt; | &amp;lt;identifier_extend&amp;gt; )*&lt;br/&gt;
&amp;lt;identifier_start&amp;gt;  	Lu,Ll,Lt,Lm,Lo,Nl  	Uppercase letter, Lowercase letter, Titlecase letter, Modifier letter, Other letter, Letter number&lt;br/&gt;
&amp;lt;identifier_extend&amp;gt; 	Mn,Mc,Nd,Pc,Cf 	Non-spacing mark, Spacing combining mark, Decimal number, Connector punctuation, Formatting code&lt;br/&gt;
&amp;lt;ident_ignorable_char&amp;gt; 	Cf 	Formatting code &lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12716751" author="milu71" created="Fri, 5 Jun 2009 21:56:51 +0100"  >&lt;p&gt;Hi Robert, it looks like you&apos;re talking about this report:&lt;br/&gt;
&lt;a href=&quot;http://unicode.org/reports/tr8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://unicode.org/reports/tr8/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The XML recommendation might also serve as a point of reference, although both a NAME and a NMTOKEN are probably too liberal in what they accept (the colon among others):&lt;br/&gt;
&lt;a href=&quot;http://www.w3.org/TR/REC-xml/#NT-Name&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.w3.org/TR/REC-xml/#NT-Name&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Shalin mentioned Java identifiers, probably without intending to ban names such as &quot;null&quot; and &quot;class&quot;:&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/docs/books/jls/third_edition/html/lexical.html#40625&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/docs/books/jls/third_edition/html/lexical.html#40625&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not Unicode-savvy enough to know what&apos;s behind all these classes, and I&apos;m not Solr-savvy enough to know which of the punctuation characters that have special meaning in the Solr query language should or must be excluded. So first the spec, then the implementation (regular expression, or some schema technology to validate the field names in schema.xml, or whatever).&lt;/p&gt;</comment>
                            <comment id="12716763" author="rcmuir" created="Fri, 5 Jun 2009 22:49:27 +0100"  >&lt;p&gt;those others you mentioned also look good...&lt;/p&gt;

&lt;p&gt;in fact the last one you mentioned (the java one) might be the easiest to implement&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Character.html#isJavaIdentifierStart(char&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Character.html#isJavaIdentifierStart(char&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Character.html#isJavaIdentifierPart(char&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Character.html#isJavaIdentifierPart(char&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;i&apos;m not worried about punctuation just real &quot;letters&quot; in languages where .isLetter() returns false!&lt;/p&gt;</comment>
                            <comment id="12716833" author="shalinmangar" created="Sat, 6 Jun 2009 06:29:07 +0100"  >&lt;blockquote&gt;
&lt;p&gt;In order to produce a correct patch, I need to know what are legal field names. It can hardly be &quot;any UTF-8 string&quot; as that will also contain the colon, which is already used to delimit field names from query strings. What about digits? Asterisk? Dash (minus)? Underscore? Space? Tabulator?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Lucene does not limit the field names. Those special characters are actually limitations of our query parser syntax. However, you are right, we need to view them from Solr&apos;s point of view. Let us try to limit this to valid Java identifiers or the closest that we can get to them.&lt;/p&gt;</comment>
                            <comment id="12717323" author="milu71" created="Mon, 8 Jun 2009 18:00:02 +0100"  >&lt;p&gt;FYI, there is a nice Unicode web tool here: &lt;a href=&quot;http://rishida.net/scripts/uniview/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://rishida.net/scripts/uniview/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Java identifiers exclude dash (minus) and dot ( - and . ); they allow $, &#8364; and other currencies.&lt;/p&gt;

&lt;p&gt;An XML NMTOKEN excludes currency symbols, but allows dash, dot, middle dot, underscore, and colon. It also allows Arabic numerals &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt; at the beginning.&lt;/p&gt;

&lt;p&gt;Colons must be excluded for Solr purposes. But I wouldn&apos;t exclude dash and dot.&lt;/p&gt;

&lt;p&gt;Fields are entered in XML (schema.xml), so why not base the type on an XML type? Validation would be easy:&lt;/p&gt;

&lt;p&gt;&amp;lt;!DOCTYPE solr-test[&lt;br/&gt;
&amp;lt;!ELEMENT solr-test EMPTY &amp;gt;&lt;br/&gt;
&amp;lt;!ATTLIST solr-test field NMTOKEN #REQUIRED&amp;gt;&lt;br/&gt;
]&amp;gt;&lt;br/&gt;
&amp;lt;solr-test field=&quot;   123.K&#228;se-A_Z      &quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Note the leading and trailing spaces around the attribute value; the XML parser strips these when validating using an NMTOKEN type, so this user error can be excluded fairly simple. The absence of any colon, however, would have to be guaranteed by some other means. Still, I think there are advantages.&lt;/p&gt;

&lt;p&gt;If ensuring the uniqueness of a field name in a schema.xml matters, one could also consider using the NAME type and defining field/@name as ID in the DTD. This would exclude dash, dot, middle dot and Arabic numerals as start characters.&lt;/p&gt;

&lt;p&gt;I think I could supply a patch for NMTOKEN or NAME if this is found desirable.&lt;/p&gt;</comment>
                            <comment id="12718128" author="shalinmangar" created="Wed, 10 Jun 2009 17:28:54 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think I could supply a patch for NMTOKEN or NAME if this is found desirable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Please do!&lt;/p&gt;</comment>
                            <comment id="12718412" author="milu71" created="Thu, 11 Jun 2009 12:29:28 +0100"  >&lt;p&gt;In the original regular expression - (?&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;?!(\w+:|\d+)))\w+ - what is the rationale behind treating a sequence of digits - \d+ - as a separate token?&lt;/p&gt;</comment>
                            <comment id="12718413" author="milu71" created="Thu, 11 Jun 2009 12:31:33 +0100"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; A smiley destroyed my regular expression ...&lt;/p&gt;</comment>
                            <comment id="12721323" author="milu71" created="Thu, 18 Jun 2009 16:52:07 +0100"  >&lt;p&gt;The patch has been ready for a week now, but before supplying it, I&apos;d like to understand what is the rationale behind treating a sequence of digits - \d+ - as a separate token in the original regular expression - (?&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;?!(\w+:|\d+)))\w+ to be found in SpellingQueryConverter.java?&lt;/p&gt;</comment>
                            <comment id="12751121" author="shalinmangar" created="Thu, 3 Sep 2009 19:23:02 +0100"  >&lt;blockquote&gt;&lt;p&gt;The patch has been ready for a week now, but before supplying it, I&apos;d like to understand what is the rationale behind treating a sequence of digits - \d+ - as a separate token in the original regular expression&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m sorry I forgot about this issue completely. I&apos;m not sure about the rationale. Grant wrote it originally. Grant, can you share your thoughts?&lt;/p&gt;</comment>
                            <comment id="12751315" author="dbowen" created="Fri, 4 Sep 2009 06:44:45 +0100"  >&lt;p&gt;Since this ticket is marked resolved, I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1407&quot; title=&quot;SpellingQueryConverter now disallows underscores and digits in field names (but allows all UTF-8 letters)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1407&quot;&gt;&lt;del&gt;SOLR-1407&lt;/del&gt;&lt;/a&gt; to point out some closely related problems.&lt;/p&gt;</comment>
                            <comment id="12751337" author="shalinmangar" created="Fri, 4 Sep 2009 08:03:25 +0100"  >&lt;blockquote&gt;&lt;p&gt;Since this ticket is marked resolved, I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1407&quot; title=&quot;SpellingQueryConverter now disallows underscores and digits in field names (but allows all UTF-8 letters)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1407&quot;&gt;&lt;del&gt;SOLR-1407&lt;/del&gt;&lt;/a&gt; to point out some closely related problems.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, that is how I remembered this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12751410" author="milu71" created="Fri, 4 Sep 2009 11:06:30 +0100"  >&lt;p&gt;Shalin, thanks for reporting back &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; If I marked the issue resolved, that wasn&apos;t my intention. Must have overlooked it. I&apos;m going to post the NMTOKEN version I&apos;ve come up with to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1407&quot; title=&quot;SpellingQueryConverter now disallows underscores and digits in field names (but allows all UTF-8 letters)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1407&quot;&gt;&lt;del&gt;SOLR-1407&lt;/del&gt;&lt;/a&gt; so it&apos;s not lost. Up to you to consider whether it&apos;s reasonable or not. The question about the sequence of digits is still entirely unclear to me, though.&lt;/p&gt;</comment>
                            <comment id="12775765" author="gsingers" created="Tue, 10 Nov 2009 15:52:07 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12434763">SOLR-1407</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12409962" name="SpellingQueryConverter.java.diff" size="491" author="milu71" created="Fri, 5 Jun 2009 10:50:31 +0100"/>
                            <attachment id="12409943" name="SpellingQueryConverter.java.diff" size="488" author="milu71" created="Fri, 5 Jun 2009 08:58:07 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Jun 2009 09:12:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxmof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>