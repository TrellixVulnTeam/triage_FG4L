<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:25:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-152/SOLR-152.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-152] Dismax should not require &apos;q&apos;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-152</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;using fq=xxx should be sufficient to make a valid query&lt;/p&gt;

&lt;p&gt;see:&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/dismax-without-q%3D-tf3198431.html#a8880594&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/dismax-without-q%3D-tf3198431.html#a8880594&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12362407">SOLR-152</key>
            <summary>Dismax should not require &apos;q&apos;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="ryantxu">Ryan McKinley</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Feb 2007 05:49:28 +0000</created>
                <updated>Fri, 10 May 2013 11:41:06 +0100</updated>
                            <resolved>Thu, 22 Feb 2007 00:23:31 +0000</resolved>
                                                    <fixVersion>1.2</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12471603" author="hossman" created="Fri, 9 Feb 2007 07:16:13 +0000"  >&lt;p&gt;past discussion (along with my concerns about what it means semanticly to not have a &quot;q&quot;) are in this thread...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/DisMax-and-null-query-strings-tf2321023.html#a6457790&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/DisMax-and-null-query-strings-tf2321023.html#a6457790&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...at the time what was discussed was having the absence of a &quot;q&quot; param would result in the &quot;main&quot; query being a MatchAllDocs &amp;#8211; the intent being that having a &quot;q&quot; tells dismax what you want your superset to be, and not having a &quot;q&quot; tells it to default to everything.  (since there is no easy syntax for telling dismax to match all like there is in the standard handler)&lt;/p&gt;


&lt;p&gt;This patch takes a different approach: defaulting to nothing (so no matter how many FQs you add, you still get nothing) ... that doesn&apos;t really seem that usefull to me &amp;#8211; sure it eliminates the exception, but it doesn&apos;t gain the user functionality they didn&apos;t have before.&lt;/p&gt;

&lt;p&gt;(this behavior isn&apos;t obvious when looking at the test in the patch, because the test config has a default &quot;bf&quot; which is being used even when the &quot;q&quot; isn&apos;t)&lt;/p&gt;
</comment>
                            <comment id="12471606" author="ryantxu" created="Fri, 9 Feb 2007 07:26:59 +0000"  >&lt;p&gt;&amp;gt; (this behavior isn&apos;t obvious when looking at the test in the patch, because the test config has a default &quot;bf&quot; which is being used even when the &quot;q&quot; isn&apos;t) &lt;/p&gt;

&lt;p&gt;aaaaah.  I&apos;ve been struggling to figure out why it worked on one index and not another!&lt;/p&gt;

&lt;p&gt;I see your point on it not making sense...  It is probably beter for the client to send a &apos;q&apos; that will match everything if that is what it is after.&lt;/p&gt;

&lt;p&gt;But it should throw a 400 exception!&lt;/p&gt;
</comment>
                            <comment id="12471607" author="hossman" created="Fri, 9 Feb 2007 07:38:32 +0000"  >&lt;p&gt;&amp;gt; I see your point on it not making sense... It is probably beter for the client to send a &apos;q&apos; that &amp;gt; will match everything if that is what it is after.&lt;/p&gt;

&lt;p&gt;i agree... but i don&apos;t think it makes sense to try and add some special syntax to the &quot;q&quot; ... it probably makes more sense to add a new &quot;matchall&quot; param &amp;#8211; if there is no q, and matchall=true then use a MatchAllDocs instead &amp;#8211; if neither are set, throw an exception&lt;/p&gt;

&lt;p&gt;(that way matchall can be set in the solrconfig as either a default or an invariant)&lt;/p&gt;

&lt;p&gt;&amp;gt; But it should throw a 400 exception!&lt;/p&gt;

&lt;p&gt;no disagreement there ... improving the error messages in error input cases is sometihng we need to do a lot of in Solr (most of hte focus in the past was on good behavior for good input)&lt;/p&gt;</comment>
                            <comment id="12471608" author="ryantxu" created="Fri, 9 Feb 2007 07:46:16 +0000"  >
&lt;p&gt;&amp;gt; &lt;br/&gt;
&amp;gt; (that way matchall can be set in the solrconfig as either a default or an invariant)&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;thats good! then you can set:&lt;/p&gt;

&lt;p&gt; &amp;lt;requestHandler name=&quot;dismax&quot; class=&quot;solr.DisMaxRequestHandler&quot; &amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;str name=&quot;q&quot;&amp;gt;&lt;br/&gt;
        matchall&lt;br/&gt;
     &amp;lt;/str&amp;gt;&lt;br/&gt;
     ...&lt;/p&gt;

&lt;p&gt;problem solved.&lt;/p&gt;</comment>
                            <comment id="12471609" author="hossman" created="Fri, 9 Feb 2007 07:51:39 +0000"  >&lt;p&gt;don&apos;t you mean...&lt;/p&gt;

&lt;p&gt; &amp;lt;requestHandler name=&quot;dismax&quot; class=&quot;solr.DisMaxRequestHandler&quot; &amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
       &amp;lt;str name=&quot;matchall&quot;&amp;gt;true&amp;lt;/str&amp;gt;&lt;br/&gt;
       ...&lt;/p&gt;

&lt;p&gt;?&lt;/p&gt;</comment>
                            <comment id="12471610" author="ryantxu" created="Fri, 9 Feb 2007 07:53:56 +0000"  >&lt;p&gt;danm, i was hoping you would not notice.  There is no delete button around here.&lt;/p&gt;</comment>
                            <comment id="12471614" author="ryantxu" created="Fri, 9 Feb 2007 08:03:52 +0000"  >&lt;p&gt;using the matchall parameter&lt;/p&gt;</comment>
                            <comment id="12471770" author="hossman" created="Fri, 9 Feb 2007 17:57:09 +0000"  >&lt;p&gt;i haven&apos;t looked at the latest patch yet, but it occured to me on the train this morning that a better mechanism then matchall=&lt;/p&gt;
{true}
&lt;p&gt;|&lt;/p&gt;
{false}
&lt;p&gt; would be altq=&lt;/p&gt;
{lucene-standard-syntax-query}

&lt;p&gt;with the psuedoe code being...&lt;/p&gt;

&lt;p&gt;   Query mainUserQuery = null;&lt;br/&gt;
   if ( params.get(Q) is not empty ) &lt;/p&gt;
{
      mainUserQuery = dismaxParse( params.get(Q) )
  }
&lt;p&gt; else if ( params.get(ALTQ) is not empty ) &lt;/p&gt;
{
      mainUserQuery = SolrQueryParser.parse(  params.get(ALTQ) );
  }
&lt;p&gt;  if ( null == mainUserQuery) &lt;/p&gt;
{
     throw NoQueryStringException;
  }


&lt;p&gt;...that way people that want a MatchAllDocs fallback can put altq=&lt;b&gt;:&lt;/b&gt; in their defaults or UIR ... but if they want it with a different boost (because they are using BF and BQ) they can do that, or if their index is heavily partitioned by doctype and they only want certain types of docs to be included in the set when no Q is specified they can use &quot;altq=doctype:(product blog)&quot;&lt;/p&gt;
</comment>
                            <comment id="12471775" author="yseeley@gmail.com" created="Fri, 9 Feb 2007 18:11:28 +0000"  >&lt;p&gt;Or perhaps annotating the q parameter to avoid the explosion of parameters?&lt;/p&gt;

&lt;p&gt;q=&amp;lt;!lucene&amp;gt;&lt;b&gt;:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/Using-HTTP-Post-for-Queries-tf3039973.html#a8483387&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Using-HTTP-Post-for-Queries-tf3039973.html#a8483387&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12471810" author="hossman" created="Fri, 9 Feb 2007 20:46:37 +0000"  >
&lt;p&gt;&amp;gt;&amp;gt; q=&amp;lt;!lucene&amp;gt;&lt;b&gt;:&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;one of the major focuses of dismax is to take the hassle out of front end client code needing to &quot;preprocess&quot; user queries ... an approach like this would require that the client notice when no query is specified, and set teh q appropraitely (it would also probably require that the client allways put &quot;&amp;lt;!dismax&amp;gt;&quot; in front of most input to &quot;escape&quot; the possibility of a user searching on something like &quot;&amp;lt;!lucene&amp;gt;&quot;&lt;/p&gt;

&lt;p&gt;at a broader level: annotating the &quot;q&quot; doesn&apos;t really address the issue of letting the &quot;solrconfig owner&quot; specify what the behavior should be: an extra param can be baked into the config, but a prefix on a user query can not.&lt;/p&gt;</comment>
                            <comment id="12471814" author="yseeley@gmail.com" created="Fri, 9 Feb 2007 21:01:15 +0000"  >&lt;p&gt;&amp;gt; an approach like this would require that the client notice when no query is specified, and set teh q appropraitely&lt;/p&gt;

&lt;p&gt;I&apos;m not sure I understand... wouldn&apos;t defaulting still work the same way?&lt;/p&gt;

&lt;p&gt; &amp;lt;requestHandler name=&quot;dismax&quot; class=&quot;solr.DisMaxRequestHandler&quot; &amp;gt;&lt;br/&gt;
    &amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
       &amp;lt;str name=&quot;q&quot;&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;!lucene&amp;#93;&lt;/span&gt;&lt;b&gt;:&lt;/b&gt;&amp;lt;/str&amp;gt; &lt;/p&gt;

&lt;p&gt;I thought you were proposing an altq that would work just like q, but it would be in lucene query syntax.&lt;br/&gt;
What happens when one one wants XML syntax?&lt;br/&gt;
But as you say,  the dismax syntax is special...  in that context, either an altq or q.type param would make sense.   Then, the altq could actually have the optional annotations about what type of query it is (if/when we get around to that).&lt;/p&gt;</comment>
                            <comment id="12471815" author="hossman" created="Fri, 9 Feb 2007 21:03:17 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; at a broader level: annotating the &quot;q&quot; doesn&apos;t really address the issue of letting the &quot;solrconfig owner&quot; specify what &amp;gt;&amp;gt; the behavior should be: an extra param can be baked into the config, but a prefix on a user query can not.&lt;/p&gt;

&lt;p&gt;to clarify, the default in the solrconfig could of course be &amp;lt;str name=&quot;q&quot;&amp;gt;&amp;lt;!lucene&amp;gt;&lt;b&gt;:&lt;/b&gt;&amp;lt;/str&amp;gt; ... but if the client has to prepend &amp;lt;!dismax&amp;gt; on the front of user input anyway, it can&apos;t do it blindly (or it might send an &quot;empty&quot; query of &quot;&amp;lt;!dismax&amp;gt;&quot; and defeat the point of the default)&lt;/p&gt;

&lt;p&gt;with an extra param, the lcient doesn&apos;t even have to know anything special is happening when hte user provides an epty string &amp;#8211; it doesn&apos;t even have to check to see if hte user has provided an empty string&lt;/p&gt;</comment>
                            <comment id="12471846" author="hossman" created="Fri, 9 Feb 2007 22:09:07 +0000"  >&lt;p&gt;whoops ... looks like comment collision ... yeah, i&apos;m thinking altq would be in &quot;solr standard syntax&quot; and if at soem point we add anotations about query syntax it would support them.&lt;/p&gt;

&lt;p&gt;(a q.type param wouldn&apos;t really solve this problem ... a default Q of &quot;&lt;b&gt;:&lt;/b&gt; in the solorconfig would requre a defualt QTYPE of &quot;standard&quot; or something ... whch means clients clients sending a &quot;q&quot; in the simple dismax syntaxwould have to allways specify q.type=dismax, unless q was blank in which case overriding the q.type would break the default q ... so we&apos;re back where we started: the client code needing ot look at the users iput and change something about the request if it&apos;s blank)&lt;/p&gt;</comment>
                            <comment id="12474889" author="hossman" created="Thu, 22 Feb 2007 00:23:31 +0000"  >&lt;p&gt;I&apos;ve committed a variation on Ryan&apos;s latest patch that:&lt;/p&gt;

&lt;p&gt;  1) changes from the matchall=true syntax to a q.alt=&lt;b&gt;:&lt;/b&gt; syntax&lt;br/&gt;
  2) adds documentaiton about the new param&lt;br/&gt;
  3) demonstrates the new param in the example solrconfig.xml&lt;/p&gt;</comment>
                            <comment id="12589318" author="hossman" created="Wed, 16 Apr 2008 00:44:45 +0100"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked (&quot;Resolved&quot; or &quot;Closed&quot;) and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 39 issues found was set to 1.2, email notification&lt;br/&gt;
was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this&lt;br/&gt;
(hopefully) unique string: 20080415hossman2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12350736" name="SOLR-152-DismaxNoQ.patch" size="5881" author="ryantxu" created="Fri, 9 Feb 2007 08:03:52 +0000"/>
                            <attachment id="12350732" name="SOLR-152-DismaxNoQ.patch" size="4825" author="ryantxu" created="Fri, 9 Feb 2007 05:54:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Feb 2007 07:16:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxt2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>