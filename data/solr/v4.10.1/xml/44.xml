<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:26:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-44/SOLR-44.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-44] Basic Facet Count support</title>
                <link>https://issues.apache.org/jira/browse/SOLR-44</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;First pass at basic facet support.  initial patch includes utilities for use in RequestHandlers, and usage in StandardRequestHandler (DisMax should use SolrParams before attempting to add this)&lt;/p&gt;

&lt;p&gt;Basic idea is that:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;facet=true indicates facet counts are desired.&lt;/li&gt;
	&lt;li&gt;facetField=inStock indicates we want a count of the matching docs for each value in the field inStock&lt;/li&gt;
	&lt;li&gt;facetQuery=title:ipod indicates we want the count of matching docs also in the set of docs matching query title:ipod&lt;/li&gt;
	&lt;li&gt;if user wants to apply a facet constraint on subsequent queries, they can add an &quot;fq&quot; (filter query) param (support for this was added to StandardRequestHandler as well)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Things marked TODO...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add support for per field facetLimit indicating that only the top N items in each facetField should be returned&lt;/li&gt;
	&lt;li&gt;add support for a per field facetZero boolean indicating that there is no reason to bother returning counts of 0 for facetFields (some clients may want to know the list, others don&apos;t care)&lt;/li&gt;
	&lt;li&gt;potential optimization when using faceLimit to cache the terms with the highest docFreq and see if they provide all the info we need without doing a full TermEnum&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;d like to get some feedback on the overall appraoch and params before i proceed too much farther.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12348895">SOLR-44</key>
            <summary>Basic Facet Count support</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Hoss Man</assignee>
                                    <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Aug 2006 02:55:44 +0100</created>
                <updated>Fri, 10 May 2013 11:40:43 +0100</updated>
                            <resolved>Tue, 26 Sep 2006 06:59:45 +0100</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12431625" author="klaasm" created="Wed, 30 Aug 2006 18:11:41 +0100"  >&lt;p&gt;I haven&apos;t looked at the patch yet but in terms of the parameters, might it make sense to use a group name similar to the highlighter params?  e.g., facet, facet.fl, facet.query, facet.limit, etc.&lt;/p&gt;

&lt;p&gt;Also, now that we have per-field override capability for params, we should document which params can be thus overridden (facet.zero, facet.limit?)&lt;/p&gt;</comment>
                            <comment id="12431745" author="hossman" created="Thu, 31 Aug 2006 00:26:13 +0100"  >&lt;p&gt;Per mailing list discussion...&lt;br/&gt;
  1) Mike&apos;s points about parameter names are dead on, and i&apos;ll be making changes.&lt;br/&gt;
  2) Yonik pointed out I wasn&apos;t very forthcoming with examples, my bad.&lt;/p&gt;

&lt;p&gt;With the patch as it stands right now, a query like this (against the example schema/docs) ...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/select/?q=video&amp;amp;facetQuery=inStock:true&amp;amp;facetQuery=price:[*+TO+500]&amp;amp;facet=true&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select/?q=video&amp;amp;facetQuery=inStock:true&amp;amp;facetQuery=price:[*+TO+500]&amp;amp;facet=true&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...would match on 3 docs, and would contain the following additional data...&lt;/p&gt;

&lt;p&gt;   &amp;lt;lst name=&quot;facet_counts&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;int name=&quot;inStock:true&quot;&amp;gt;1&amp;lt;/int&amp;gt;&lt;br/&gt;
     &amp;lt;int name=&quot;price:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO 500&amp;#93;&lt;/span&gt;&quot;&amp;gt;2&amp;lt;/int&amp;gt;&lt;br/&gt;
   &amp;lt;/lst&amp;gt;&lt;/p&gt;

&lt;p&gt;The real powerful stuff comes into play when using facetField ...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/select/?indent=1&amp;amp;q=video&amp;amp;facetField=inStock&amp;amp;facetField=cat&amp;amp;facetQuery=price:[*+TO+500]&amp;amp;facet=true&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select/?indent=1&amp;amp;q=video&amp;amp;facetField=inStock&amp;amp;facetField=cat&amp;amp;facetQuery=price:[*+TO+500]&amp;amp;facet=true&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...to get...&lt;/p&gt;


&lt;p&gt;&amp;lt;lst name=&quot;facet_counts&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;int name=&quot;price:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO 500&amp;#93;&lt;/span&gt;&quot;&amp;gt;2&amp;lt;/int&amp;gt;&lt;br/&gt;
 &amp;lt;lst name=&quot;inStock&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;true&quot;&amp;gt;1&amp;lt;/int&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;int name=&quot;false&quot;&amp;gt;2&amp;lt;/int&amp;gt;&lt;br/&gt;
 &amp;lt;/lst&amp;gt;&lt;br/&gt;
 &amp;lt;lst name=&quot;cat&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;search&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;memory&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;graphics&quot;&amp;gt;2&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;card&quot;&amp;gt;2&amp;lt;/int&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;int name=&quot;connector&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;software&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;electronics&quot;&amp;gt;3&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;copier&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;multifunction&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;camera&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;int name=&quot;music&quot;&amp;gt;1&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;hard&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;scanner&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;monitor&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;drive&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;br/&gt;
  &amp;lt;int name=&quot;printer&quot;&amp;gt;0&amp;lt;/int&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;/lst&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="12432392" author="hossman" created="Mon, 4 Sep 2006 00:24:58 +0100"  >&lt;p&gt;Per more mailing list discusion, a new version of the patch...&lt;/p&gt;

&lt;p&gt;1) param names have changed to match conventions disccuessed about highlighting...&lt;/p&gt;

&lt;p&gt;facet - boolean - do facet counts or not&lt;br/&gt;
facet.query - multival string - list of arbitrary query constraints to count&lt;br/&gt;
facet.field - multival string - list of fields to treat as facets&lt;br/&gt;
facet.missing - boolean, per field - count docs that have no value for field&lt;br/&gt;
facet.zeros - boolean, per field - include facet field values with 0 counts&lt;br/&gt;
facet.limit - int, per field - max number of field values to return (desc)&lt;/p&gt;

&lt;p&gt;2) note that previuosly TODO &quot;limit&quot; and &quot;zeros&quot; functionality has been added&lt;/p&gt;

&lt;p&gt;3) note addition of &quot;missing&quot; option per discussion on the list&lt;/p&gt;

&lt;p&gt;4) response format has been modified slightly (not as extensively as discussed on the list since there wasn&apos;t a clear concensus about a good API - but a cleaner seperation of query based facets and facet fields)&lt;/p&gt;

&lt;p&gt;5) heavy refactoring: all functionality put into a &quot;SimpleFacets&quot; class which can be subclasseed/composed to get individual pieces of functionality.  usage of this class by StandardRequestHandler also refactored into method that subclassing handlers can override (to add complex facet behavior without giving up other built in goodness of StandardRequestHandler)&lt;/p&gt;

&lt;p&gt;A cool example that demonstrates everything with the example schema/docs...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/select/?facet.query=price:[400+TO+*]&amp;amp;facet.query=price:[*+TO+400]&amp;amp;q=video&amp;amp;start=0&amp;amp;rows=0&amp;amp;f.cat.facet.limit=8&amp;amp;facet.zeros=false&amp;amp;f.cat.facet.zeros=true&amp;amp;facet=true&amp;amp;facet.field=inStock&amp;amp;facet.field=cat&amp;amp;f.includes.facet.missing=true&amp;amp;facet.field=includes&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/select/?facet.query=price:[400+TO+*]&amp;amp;facet.query=price:[*+TO+400]&amp;amp;q=video&amp;amp;start=0&amp;amp;rows=0&amp;amp;f.cat.facet.limit=8&amp;amp;facet.zeros=false&amp;amp;f.cat.facet.zeros=true&amp;amp;facet=true&amp;amp;facet.field=inStock&amp;amp;facet.field=cat&amp;amp;f.includes.facet.missing=true&amp;amp;facet.field=includes&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(NOTE: this is all still just used in StandardRequestHandler - not DisMax yet)&lt;/p&gt;</comment>
                            <comment id="12432978" author="hossman" created="Wed, 6 Sep 2006 23:03:04 +0100"  >&lt;p&gt;revised patch inlcudes facet support for the DisMax handler, also changed DisMax handler&apos;s use of &quot;fq&quot; to be multivalue (as standard request handler is now)&lt;/p&gt;

&lt;p&gt;I&apos;ll probably commit this version sometime in the next 24 hours unless any one spots any problems.&lt;/p&gt;</comment>
                            <comment id="12432987" author="hossman" created="Wed, 6 Sep 2006 23:31:16 +0100"  >&lt;p&gt;Small change to the way the fq params are processed...&lt;/p&gt;

&lt;p&gt;previously it was valid to have an &quot;fq&quot; param of &quot;&quot; that would be ignored by the DisMax handler (if it did&apos;t ignore it, you got a parse error from QueryParser) ... i readded that logic to the utility that now deals with the FQ params for both standard and dismax.&lt;/p&gt;</comment>
                            <comment id="12433138" author="yseeley@gmail.com" created="Thu, 7 Sep 2006 15:58:03 +0100"  >&lt;p&gt;I&apos;ve tried it out... seems to be working great!&lt;/p&gt;</comment>
                            <comment id="12433197" author="hossman" created="Thu, 7 Sep 2006 19:52:36 +0100"  >&lt;p&gt;patch commited ... i&apos;ll update work on some better wiki pages this afternoon.&lt;/p&gt;</comment>
                            <comment id="12437747" author="hossman" created="Tue, 26 Sep 2006 06:59:45 +0100"  >&lt;p&gt;whoops ...  i left this open to remind me to work on the wiki pages, which i did without remembering to resolve this.&lt;/p&gt;</comment>
                            <comment id="12589327" author="hossman" created="Wed, 16 Apr 2008 00:56:42 +0100"  >&lt;p&gt;This bug was modified as part of a bulk update using the criteria...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Marked (&quot;Resolved&quot; or &quot;Closed&quot;) and &quot;Fixed&quot;&lt;/li&gt;
	&lt;li&gt;Had no &quot;Fix Version&quot; versions&lt;/li&gt;
	&lt;li&gt;Was listed in the CHANGES.txt for 1.1&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Fix Version for all 38 issues found was set to 1.1, email notification&lt;br/&gt;
was suppressed to prevent excessive email.&lt;/p&gt;

&lt;p&gt;For a list of all the issues modified, search jira comments for this&lt;br/&gt;
(hopefully) unique string: 20080415hossman3&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12339826" name="ASF.LICENSE.NOT.GRANTED--simple-facets.patch" size="12961" author="hossman" created="Wed, 30 Aug 2006 02:55:44 +0100"/>
                            <attachment id="12340313" name="simple-facets.patch" size="33899" author="hossman" created="Wed, 6 Sep 2006 23:31:16 +0100"/>
                            <attachment id="12340309" name="simple-facets.patch" size="33664" author="hossman" created="Wed, 6 Sep 2006 23:03:04 +0100"/>
                            <attachment id="12340119" name="simple-facets.patch" size="24787" author="hossman" created="Mon, 4 Sep 2006 00:24:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Aug 2006 17:11:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxtqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>