<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1269/SOLR-1269.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1269] stack trace not clear when there is a SQL error</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1269</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When setting up a new JDBC datasource and the SQL isn&apos;t right yet, we are getting a stack trace that says ClassNotFoundException, but that is misleading.  &lt;/p&gt;

&lt;p&gt;A cleaner stack trace is warranted, indicating the actual error.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;actual SQL statement omitted&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: SELECT     .....  Processing Document # 1&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&amp;lt;init&amp;gt;(JdbcDataSource.java:250)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:207)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:40)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:58)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:71)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:237)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:343)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:224)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:167)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:333)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:393)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:372)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: Unable to load null or org.apache.solr.handler.dataimport.null&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:723)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource$1.call(JdbcDataSource.java:188)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource$1.call(JdbcDataSource.java:127)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.getConnection(JdbcDataSource.java:362)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.access$300(JdbcDataSource.java:40)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&amp;lt;init&amp;gt;(JdbcDataSource.java:237)&lt;br/&gt;
	... 11 more&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)&lt;br/&gt;
	at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:280)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:713)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429982">SOLR-1269</key>
            <summary>stack trace not clear when there is a SQL error</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="ehatcher">Erik Hatcher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jul 2009 22:00:19 +0100</created>
                <updated>Tue, 10 Nov 2009 15:50:36 +0000</updated>
                            <resolved>Mon, 7 Sep 2009 14:20:02 +0100</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12752098" author="shalinmangar" created="Mon, 7 Sep 2009 12:26:38 +0100"  >&lt;ol&gt;
	&lt;li&gt;Used DataImportHandlerException.wrapAndThrow to avoid incorrect messages&lt;/li&gt;
	&lt;li&gt;Add null check in JdbcDataSource#close&lt;/li&gt;
	&lt;li&gt;Fixed close() logic so that JdbcDataSource#close is not called after connection timeouts.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I tried two scenarios:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Incorrect driver name&lt;/li&gt;
	&lt;li&gt;Incorrect sql query&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;With incorrect driver name, before this patch:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SEVERE: Full Import failed&lt;br/&gt;
org.apache.solr.handler.dataimport.DataImportHandlerException: Failed to initialize DataSource: null Processing Document # 1&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.getDataSourceInstance(DataImporter.java:307)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.ContextImpl.getDataSource(ContextImpl.java:93)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SqlEntityProcessor.init(SqlEntityProcessor.java:52)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.EntityProcessorWrapper.init(EntityProcessorWrapper.java:71)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:302)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:225)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:167)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:333)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:393)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:372)&lt;br/&gt;
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Could not load driver: org.hsqldb.ajdbcDriver Processing Document # 1&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.createConnectionFactory(JdbcDataSource.java:114)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.init(JdbcDataSource.java:62)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.getDataSourceInstance(DataImporter.java:305)&lt;br/&gt;
	... 9 more&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After the patch:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SEVERE: Full Import failed&lt;br/&gt;
org.apache.solr.handler.dataimport.DataImportHandlerException: Could not load driver: org.hsqldb.ajdbcDriver Processing Document # 1&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.createConnectionFactory(JdbcDataSource.java:114)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.init(JdbcDataSource.java:62)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.getDataSourceInstance(DataImporter.java:306)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.ContextImpl.getDataSource(ContextImpl.java:93)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SqlEntityProcessor.init(SqlEntityProcessor.java:52)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.EntityProcessorWrapper.init(EntityProcessorWrapper.java:71)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:302)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:225)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:167)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:333)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:393)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:372)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: Unable to load org.hsqldb.ajdbcDriver or org.apache.solr.handler.dataimport.org.hsqldb.ajdbcDriver&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:717)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.createConnectionFactory(JdbcDataSource.java:112)&lt;br/&gt;
	... 11 more&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In the case of incorrect SQL query, the following is logged (before and after is same):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SEVERE: Exception while processing: item document : SolrInputDocument&lt;span class=&quot;error&quot;&gt;&amp;#91;{}&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: select * from item1 Processing Document # 1&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&amp;lt;init&amp;gt;(JdbcDataSource.java:251)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:208)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:39)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:58)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:71)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:237)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:339)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:225)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:167)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:333)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:393)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:372)&lt;br/&gt;
Caused by: java.sql.SQLException: Table not found in statement &lt;span class=&quot;error&quot;&gt;&amp;#91;select * from item1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.hsqldb.jdbc.Util.sqlException(Unknown Source)&lt;br/&gt;
	at org.hsqldb.jdbc.jdbcStatement.fetchResult(Unknown Source)&lt;br/&gt;
	at org.hsqldb.jdbc.jdbcStatement.execute(Unknown Source)&lt;br/&gt;
	at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.&amp;lt;init&amp;gt;(JdbcDataSource.java:244)&lt;br/&gt;
	... 11 more&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="12752131" author="shalinmangar" created="Mon, 7 Sep 2009 14:20:02 +0100"  >&lt;p&gt;Committed revision 812123.&lt;/p&gt;

&lt;p&gt;Thanks Erik!&lt;/p&gt;</comment>
                            <comment id="12775481" author="gsingers" created="Tue, 10 Nov 2009 15:50:36 +0000"  >&lt;p&gt;Bulk close Solr 1.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12418798" name="SOLR-1269.patch" size="6154" author="shalinmangar" created="Mon, 7 Sep 2009 12:26:38 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Sep 2009 11:26:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6379</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxm9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>