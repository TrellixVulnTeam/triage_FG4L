<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:20:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-1261/SOLR-1261.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-1261] Lucene trunk renamed RangeQuery &amp; Co to TermRangeQuery</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1261</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I committed shortly ago &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1713&quot; title=&quot;Rename RangeQuery -&amp;gt; TermRangeQuery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1713&quot;&gt;&lt;del&gt;LUCENE-1713&lt;/del&gt;&lt;/a&gt;, that renamed RangeQuery to TermRangeQuery (and also RangeFilter -&amp;gt; TermRangeFilter). The API of the old deprecated RangeQuery and RangeFilter classes was reverted to the state of Lucene 2.4, only the new classes contain the improvements of 2.9. So Solr will not compile anymore, because the new ctors of RangeQuery and setConstantScoreRewrite are no longer available, but were already included into Solr.&lt;/p&gt;

&lt;p&gt;This can be solved by simply replacing RangeQuery to TermRangeQuery in the source.&lt;/p&gt;

&lt;p&gt;There were some minor cleanups with the API, because there must not be any strange methods anmes because of BW compatibility in the new class. Also all ctors using Term are only available in the deprecated classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429537">SOLR-1261</key>
            <summary>Lucene trunk renamed RangeQuery &amp; Co to TermRangeQuery</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Jul 2009 21:27:57 +0100</created>
                <updated>Tue, 10 Nov 2009 15:52:09 +0000</updated>
                            <resolved>Wed, 15 Jul 2009 18:36:12 +0100</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12727270" author="thetaphi" created="Sat, 4 Jul 2009 21:29:18 +0100"  >&lt;p&gt;This change is related to Lucenes new numeric search capabilities and some API cleanup because of this.&lt;/p&gt;</comment>
                            <comment id="12727272" author="thetaphi" created="Sat, 4 Jul 2009 21:59:18 +0100"  >&lt;p&gt;Attached is a patch, that does this (untested, but should work).&lt;/p&gt;

&lt;p&gt;In my opinion, QueryParsing.java should now also be able to create a string representation of NumericRangeQueries, I did this, too (related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-940&quot; title=&quot;TrieRange support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-940&quot;&gt;&lt;del&gt;SOLR-940&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12731576" author="shalinmangar" created="Wed, 15 Jul 2009 18:33:00 +0100"  >&lt;blockquote&gt;&lt;p&gt;In my opinion, QueryParsing.java should now also be able to create a string representation of NumericRangeQueries, I did this, too (related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-940&quot; title=&quot;TrieRange support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-940&quot;&gt;&lt;del&gt;SOLR-940&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The only problem is that Solr always prints out the value given by FieldType#toExternal which TermRangeQuery#toString wouldn&apos;t know about. So I guess we should leave it as is.&lt;/p&gt;</comment>
                            <comment id="12731579" author="shalinmangar" created="Wed, 15 Jul 2009 18:36:12 +0100"  >&lt;p&gt;Committed revision 794328.&lt;/p&gt;

&lt;p&gt;This has been committed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-940&quot; title=&quot;TrieRange support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-940&quot;&gt;&lt;del&gt;SOLR-940&lt;/del&gt;&lt;/a&gt; and other related issues.&lt;/p&gt;</comment>
                            <comment id="12731609" author="thetaphi" created="Wed, 15 Jul 2009 19:22:26 +0100"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;In my opinion, QueryParsing.java should now also be able to create a string representation of NumericRangeQueries, I did this, too (related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-940&quot; title=&quot;TrieRange support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-940&quot;&gt;&lt;del&gt;SOLR-940&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The only problem is that Solr always prints out the value given by FieldType#toExternal which TermRangeQuery#toString wouldn&apos;t know about. So I guess we should leave it as is.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You misunderstood me. I did not change anything in TermRangeQuery, the code is identical to that before (only ConstantScoreRangeQuery and RangeQuery replaced by TermRangeQuery).&lt;/p&gt;

&lt;p&gt;What I have done as new contribution in this patch is, that I extended QueryParsing.java to print out the correct numeric query representation (also using toExternal and so on):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (query &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NumericRangeQuery) {
      NumericRangeQuery q = (NumericRangeQuery)query;
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fname = q.getField();
      FieldType ft = writeFieldName(fname, schema, out, flags);
      out.append( q.includesMin() ? &apos;[&apos; : &apos;{&apos; );
      &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; lt = q.getMin();
      &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; ut = q.getMax();
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lt==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        out.append(&apos;*&apos;);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        writeFieldVal(lt.toString(), ft, out, flags);
      }

      out.append(&lt;span class=&quot;code-quote&quot;&gt;&quot; TO &quot;&lt;/span&gt;);

      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ut==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        out.append(&apos;*&apos;);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        writeFieldVal(ut.toString(), ft, out, flags);
      }

      out.append( q.includesMax() ? &apos;]&apos; : &apos;}&apos; );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12731614" author="thetaphi" created="Wed, 15 Jul 2009 19:39:02 +0100"  >&lt;p&gt;The only problem with the above code are Date Trie Queries, as they would be printed as long values... (effectively toExternal(Long.toString())  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12775798" author="gsingers" created="Tue, 10 Nov 2009 15:52:09 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12411367">SOLR-940</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12428610">LUCENE-1713</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12412546" name="SOLR-1261.patch" size="4823" author="thetaphi" created="Sat, 4 Jul 2009 21:59:18 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 17:33:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxmbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19936</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>