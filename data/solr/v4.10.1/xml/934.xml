<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:18:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/SOLR-934/SOLR-934.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[SOLR-934] Enable importing of mails into a solr index through DIH.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-934</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Enable importing of mails into solr through DIH. Take one or more mailbox credentials, download and index their content along with the content from attachments. The folders to fetch can be made configurable based on various criteria. Apache Tika is used for extracting content from different kinds of attachments. JavaMail is used for mail box related operations like fetching mails, filtering them etc.&lt;/p&gt;

&lt;p&gt;The basic configuration for one mail box is as below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;document&amp;gt;&lt;/span&gt;
   &amp;lt;entity processor=&lt;span class=&quot;code-quote&quot;&gt;&quot;MailEntityProcessor&quot;&lt;/span&gt; user=&lt;span class=&quot;code-quote&quot;&gt;&quot;somebody@gmail.com&quot;&lt;/span&gt; 
                password=&lt;span class=&quot;code-quote&quot;&gt;&quot;something&quot;&lt;/span&gt; host=&lt;span class=&quot;code-quote&quot;&gt;&quot;imap.gmail.com&quot;&lt;/span&gt; protocol=&lt;span class=&quot;code-quote&quot;&gt;&quot;imaps&quot;&lt;/span&gt;/&amp;gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/document&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The below is the list of all configuration available:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Required&lt;/font&gt;&lt;br/&gt;
---------&lt;br/&gt;
&lt;b&gt;user&lt;/b&gt; &lt;br/&gt;
&lt;b&gt;pwd&lt;/b&gt; &lt;br/&gt;
&lt;b&gt;protocol&lt;/b&gt;  (only &quot;imaps&quot; supported now)&lt;br/&gt;
&lt;b&gt;host&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Optional&lt;/font&gt;&lt;br/&gt;
---------&lt;br/&gt;
&lt;b&gt;folders&lt;/b&gt; - comma seperated list of folders. &lt;br/&gt;
If not specified, default folder is used. Nested folders can be specified like a/b/c&lt;br/&gt;
&lt;b&gt;recurse&lt;/b&gt; - index subfolders. Defaults to true.&lt;br/&gt;
&lt;b&gt;exclude&lt;/b&gt; - comma seperated list of patterns. &lt;br/&gt;
&lt;b&gt;include&lt;/b&gt; - comma seperated list of patterns.&lt;br/&gt;
&lt;b&gt;batchSize&lt;/b&gt; - mails to fetch at once in a given folder. &lt;br/&gt;
Only headers can be prefetched in Javamail IMAP.&lt;br/&gt;
&lt;b&gt;readTimeout&lt;/b&gt; - defaults to 60000ms&lt;br/&gt;
&lt;b&gt;conectTimeout&lt;/b&gt; - defaults to 30000ms&lt;br/&gt;
&lt;b&gt;fetchSize&lt;/b&gt; - IMAP config. 32KB default&lt;br/&gt;
&lt;b&gt;fetchMailsSince&lt;/b&gt; -&lt;br/&gt;
date/time in &quot;yyyy-MM-dd HH:mm:ss&quot; format, mails received after which will be fetched. Useful for delta import.&lt;br/&gt;
&lt;b&gt;customFilter&lt;/b&gt; - class name.  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Folder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.mail.SearchTerm;

clz &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; MailEntityProcessor.CustomFilter() {    
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SearchTerm getCustomSearch(Folder folder);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;processAttachement&lt;/b&gt; - defaults to true&lt;/p&gt;

&lt;p&gt;The below are the indexed fields.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-comment&quot;&gt;// Fields To Index
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// single valued
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; SUBJECT = &lt;span class=&quot;code-quote&quot;&gt;&quot;subject&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FROM = &lt;span class=&quot;code-quote&quot;&gt;&quot;from&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; SENT_DATE = &lt;span class=&quot;code-quote&quot;&gt;&quot;sentDate&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; XMAILER = &lt;span class=&quot;code-quote&quot;&gt;&quot;xMailer&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-comment&quot;&gt;// multi valued
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; TO_CC_BCC = &lt;span class=&quot;code-quote&quot;&gt;&quot;allTo&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAGS = &lt;span class=&quot;code-quote&quot;&gt;&quot;flags&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; CONTENT = &lt;span class=&quot;code-quote&quot;&gt;&quot;content&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ATTACHMENT = &lt;span class=&quot;code-quote&quot;&gt;&quot;attachement&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ATTACHMENT_NAMES = &lt;span class=&quot;code-quote&quot;&gt;&quot;attachementNames&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-comment&quot;&gt;// flag values
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAG_ANSWERED = &lt;span class=&quot;code-quote&quot;&gt;&quot;answered&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAG_DELETED = &lt;span class=&quot;code-quote&quot;&gt;&quot;deleted&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAG_DRAFT = &lt;span class=&quot;code-quote&quot;&gt;&quot;draft&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAG_FLAGGED = &lt;span class=&quot;code-quote&quot;&gt;&quot;flagged&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAG_RECENT = &lt;span class=&quot;code-quote&quot;&gt;&quot;recent&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FLAG_SEEN = &lt;span class=&quot;code-quote&quot;&gt;&quot;seen&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12411138">SOLR-934</key>
            <summary>Enable importing of mails into a solr index through DIH.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalinmangar">Shalin Shekhar Mangar</assignee>
                                    <reporter username="preetam">Preetam Rao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Dec 2008 09:30:36 +0000</created>
                <updated>Tue, 10 Nov 2009 15:51:54 +0000</updated>
                            <resolved>Mon, 13 Apr 2009 21:27:18 +0100</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="12658481" author="preetam" created="Mon, 22 Dec 2008 09:48:39 +0000"  >&lt;p&gt;Rough cut version. Tested with sample mails from my gmail account.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Indexes one folder from IMAP account.&lt;/li&gt;
	&lt;li&gt;Indexes attachments from various types like ppt, word, txt, and anything that Tika supports.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TODO&lt;br/&gt;
--------&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;recurse into folders&lt;/li&gt;
	&lt;li&gt;performance tuning&lt;/li&gt;
	&lt;li&gt;support filter criteria for folders&lt;/li&gt;
	&lt;li&gt;supprt more than one mail box&lt;/li&gt;
	&lt;li&gt;support pop3&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;USAGE&lt;br/&gt;
----------&lt;/p&gt;

&lt;p&gt;For each mail it creates a document with the following attributes:&lt;br/&gt;
    // Created fields&lt;br/&gt;
    // single valued&lt;br/&gt;
    &quot;subject&quot;&lt;br/&gt;
    &quot;from&quot;&lt;br/&gt;
    &quot;sent_date&quot;&lt;br/&gt;
    &quot;sent_date_display&quot;&lt;br/&gt;
    &quot;X_Mailer&quot;&lt;br/&gt;
    // multi valued&lt;br/&gt;
    &quot;all_to&quot;&lt;br/&gt;
    &quot;flags&quot;&lt;br/&gt;
    &quot;content&quot;&lt;br/&gt;
    &quot;Attachement&quot;&lt;/p&gt;

&lt;p&gt;   // flag values&lt;br/&gt;
   &quot;answered&quot;&lt;br/&gt;
    &quot;deleted&quot;&lt;br/&gt;
    &quot;draft&quot;&lt;br/&gt;
    &quot;flagged&quot;&lt;br/&gt;
    &quot;recent&quot;&lt;br/&gt;
    &quot;seen&quot;&lt;/p&gt;

&lt;p&gt;COMPILE&lt;br/&gt;
-------------&lt;br/&gt;
Dependencies:&lt;br/&gt;
JavaMail API jar&lt;br/&gt;
Activation jar&lt;br/&gt;
Tika and its dependent jars&lt;/p&gt;

&lt;p&gt;How should we go about adding these dependencies ?&lt;/p&gt;


</comment>
                            <comment id="12659046" author="shalinmangar" created="Wed, 24 Dec 2008 05:16:44 +0000"  >&lt;p&gt;Thanks for this Preetam, looks great!&lt;/p&gt;

&lt;p&gt;A few suggestions:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Use the Lucene code style &amp;#8211; you can get a codestyle for Eclipse/Idea from &lt;a href=&quot;http://wiki.apache.org/solr/HowToContribute&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/solr/HowToContribute&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Let us use the Java variable naming convention for the fields e.g sent_date becomes sentDate&lt;/li&gt;
	&lt;li&gt;I don&apos;t think we need the sent_date_display, people can always format the date and display as they want&lt;/li&gt;
	&lt;li&gt;All the attributes for the entity processor should be templatized e.g user=&quot;$
{dataimporter.request.user}
&lt;p&gt;&quot; and so on. You&apos;d need to use context.getVariableResolver().replaceTokens(attr)&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;The Profile class looks un-necessary. The values can be stored directly as private variables&lt;/li&gt;
	&lt;li&gt;Attachment names can be another multi-valued field&lt;/li&gt;
	&lt;li&gt;Exception while connecting must be propagated so that the users know why the connection is failing.&lt;/li&gt;
	&lt;li&gt;For delta imports, we can just provide a olderThan and newerThan syntax. That should be enough&lt;/li&gt;
	&lt;li&gt;Streaming is recommended instead of calling folder.getMessages(). We can use getMessages(int start, int end) and the batchSize can be a configurable parameter with some sane default.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Support for recursive folders will be awesome.&lt;/p&gt;</comment>
                            <comment id="12659050" author="preetam" created="Wed, 24 Dec 2008 06:03:08 +0000"  >&lt;p&gt;I agree with all the comments... Will incorporate them soon...&lt;/p&gt;</comment>
                            <comment id="12660194" author="preetam" created="Thu, 1 Jan 2009 14:54:19 +0000"  >&lt;p&gt;Most of the features are implemented now.&lt;br/&gt;
Test cases also updated.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;recursion supported.&lt;/li&gt;
	&lt;li&gt;folders can be selected/excluded by list of comma separated patterns&lt;/li&gt;
	&lt;li&gt;mails can be fetched since a predefined receive date/time&lt;/li&gt;
	&lt;li&gt;custom filters can be plugged in&lt;/li&gt;
	&lt;li&gt;batching supported&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TODO&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;currently testbed needs to be setup manually. Create folders in testcase setup().&lt;/li&gt;
	&lt;li&gt;support POP3&lt;/li&gt;
	&lt;li&gt;any reveiws/feedbacks/cleanup&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;attaching all the dependency jars as an attachment so that one does not have to search them. May be it should be integrated through ant-maven tasks or maven directly.&lt;/p&gt;</comment>
                            <comment id="12660208" author="noble.paul" created="Thu, 1 Jan 2009 18:48:03 +0000"  >&lt;p&gt;looks good. A few observations.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the init must call super.init()&lt;/li&gt;
	&lt;li&gt;Right before returning nextRow() ,call super.applyTransformer(row)&lt;/li&gt;
	&lt;li&gt;Returning null signals end of rows. Close any connections or do cleanup&lt;/li&gt;
	&lt;li&gt;&apos;exclude&apos; and &apos;include&apos; should either allow for escaping comma (between multiple regex) or it can just take one reex for the time being&lt;/li&gt;
	&lt;li&gt;For fetchMailsSince use the format yyyy-MM-dd HH:mm:ss. There is already an instance DataImporter.DATE_TIME_FORMAT&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12660210" author="gsingers" created="Thu, 1 Jan 2009 19:07:09 +0000"  >&lt;p&gt;Would it make more sense for DIH to farm out it&apos;s content acquisition to a library like Droids?  Then, we could have real crawling, etc. all through a pluggable connector framework.&lt;/p&gt;</comment>
                            <comment id="12660214" author="noble.paul" created="Thu, 1 Jan 2009 19:18:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Would it make more sense for DIH to farm out it&apos;s content acquisition to a library like Droids&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It would be great. It should be possible to have a DroidEntityProcessor one day.  &lt;/p&gt;</comment>
                            <comment id="12660272" author="preetam" created="Fri, 2 Jan 2009 08:31:57 +0000"  >&lt;p&gt;Regarding comma separated list of patterns:&lt;/p&gt;

&lt;p&gt;Folder names won&apos;t contain commas usually.&lt;br/&gt;
The regex which will contain commas is for limiting number of occurances like &lt;/p&gt;
{M,N}
&lt;p&gt;, which also does not seem to be very useful in restricting&lt;br/&gt;
folder names.&lt;/p&gt;

&lt;p&gt;Can we leave it as it is till the need arises ? If not what would be a good escape character or replacement for comma ?&lt;/p&gt;</comment>
                            <comment id="12660274" author="noble.paul" created="Fri, 2 Jan 2009 08:38:45 +0000"  >&lt;p&gt;This is a trivial thing. Other suggestions are really important&lt;/p&gt;</comment>
                            <comment id="12660278" author="preetam" created="Fri, 2 Jan 2009 09:14:26 +0000"  >&lt;p&gt;Thanks for comments and feedback  Noble and Shalin.&lt;/p&gt;

&lt;p&gt;Attached is the latest patch which calls init() as well as applyTransformer(). Receives fetchTimeSince in yyyy-MM-dd HH:mm:ss format.&lt;/p&gt;

&lt;p&gt;exclude/include pattern is still comma seperated.&lt;/p&gt;

&lt;p&gt;Cleanup is already being handled in FolderIterator when it learns that all folders have been exhausted.&lt;/p&gt;

&lt;p&gt;Could not attach dependency jars (13MB). Single part or multi part with smaller size both fail...&lt;/p&gt;</comment>
                            <comment id="12660279" author="preetam" created="Fri, 2 Jan 2009 09:15:27 +0000"  >&lt;p&gt;updated date format&lt;/p&gt;</comment>
                            <comment id="12668153" author="shalinmangar" created="Wed, 28 Jan 2009 20:46:28 +0000"  >&lt;p&gt;MailEntityProcessor and its dependencies must be kept in one place &amp;#8211; either in WEB-INF/lib or $solr_home/lib. We can&apos;t keep just the MailEntityProcessor in the war because it won&apos;t be able to load the dependencies from $solr_home/lib (due to the classloader being different) and asking the user to drop the dependencies to WEB-INF/lib does not sound good. It is impractical to keep all these dependencies in the solr war itself because most users will not need this functionality.&lt;/p&gt;

&lt;p&gt;I guess this needs to go into a separate contrib area. Thoughts?&lt;/p&gt;

&lt;p&gt;PS: a contrib for a contrib, cool! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12668336" author="noble.paul" created="Thu, 29 Jan 2009 04:39:49 +0000"  >&lt;p&gt;how about a new contrib called &apos;dih-ext&apos; . So all the future DIH enhancements which require external dependencies can go here (like a TikaEntityProcessor). &lt;/p&gt;</comment>
                            <comment id="12688170" author="shalinmangar" created="Sun, 22 Mar 2009 21:04:54 +0000"  >&lt;ol&gt;
	&lt;li&gt;Brought patch in sync with trunk&lt;/li&gt;
	&lt;li&gt;Created a &apos;lib&apos; directory inside contrib/dataimporthandler which will have the mail and activation jars&lt;/li&gt;
	&lt;li&gt;Created a &apos;extras&apos; directory inside src which will hold DIH components that have extra dependencies&lt;/li&gt;
	&lt;li&gt;Added ant targets to work on the extras in DIH build.xml&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;TODO:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Need to find out the licenses for the additional dependencies&lt;/li&gt;
	&lt;li&gt;Need to add info about these dependencies into LICENSE.txt and NOTICE.txt&lt;/li&gt;
	&lt;li&gt;Test some more (perhaps index my gmail account?) and create a demo?&lt;/li&gt;
	&lt;li&gt;Add info to the wiki&lt;/li&gt;
	&lt;li&gt;Commit&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12695331" author="shalinmangar" created="Fri, 3 Apr 2009 12:11:16 +0100"  >&lt;p&gt;Changes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Parse and store the fetchMailsSince string during init.&lt;/li&gt;
	&lt;li&gt;Return the sentDate as a Date object rather than as a long timestamp&lt;/li&gt;
	&lt;li&gt;Removed context as an argument from the getXFromContext methods&lt;/li&gt;
	&lt;li&gt;Removed unused getLongFromContext method&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I just indexed a month&apos;s worth of my gmail inbox. Works great!&lt;/p&gt;

&lt;p&gt;One question, what is the uniqueKey that we should use when indexing emails? I couldn&apos;t figure out so I removed the uniqueKey from my schema to try this out.&lt;/p&gt;

&lt;p&gt;Next steps:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Enhance the ant build file to copy the dependencies to example/solr/lib just like Solr Cell does.&lt;/li&gt;
	&lt;li&gt;Add a wiki page with instructions to setup, list of dependencies, example schema and data-config.xml&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12696842" author="hossman" created="Wed, 8 Apr 2009 01:23:57 +0100"  >&lt;blockquote&gt;&lt;p&gt;One question, what is the uniqueKey that we should use when indexing emails? I couldn&apos;t figure out so I removed the uniqueKey from my schema to try this out.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;FWIW: &quot;Message-ID&quot; while common is not mandatory (see sec3.6 and sec3.6.4 of RFCs #2822 and #5322)&lt;/p&gt;</comment>
                            <comment id="12696849" author="ryantxu" created="Wed, 8 Apr 2009 01:42:36 +0100"  >&lt;blockquote&gt;&lt;p&gt;FWIW: &quot;Message-ID&quot; while common is not mandatory (see sec3.6 and sec3.6.4 of RFCs #2822 and #5322)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In practice you can not rely on the the &quot;Message-ID&quot; to be unique.  Most modern mail servers do a good job making sure each value is unique, but some old MS mail servers sent the same message ID for &lt;b&gt;every&lt;/b&gt; message!  &lt;/p&gt;</comment>
                            <comment id="12696877" author="noble.paul" created="Wed, 8 Apr 2009 05:15:52 +0100"  >&lt;blockquote&gt;&lt;p&gt;One question, what is the uniqueKey that we should use when indexing emails?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &quot;Message-ID&quot; can be emitted by the EntityProcessor it can be left to the discretion of the user whether to use that as a uniqueKey or not.&lt;/p&gt;</comment>
                            <comment id="12698141" author="shalinmangar" created="Sat, 11 Apr 2009 22:46:08 +0100"  >&lt;p&gt;Changes&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Added messageId as another field&lt;/li&gt;
	&lt;li&gt;Added another core to example-DIH for indexing mails. When the example target is run, it copies over the tika libs, mail.jar, activation.jar and extras.jar into example/example-DIH/solr/mail/lib directory.&lt;/li&gt;
	&lt;li&gt;Added a maven pom template for extras jar&lt;/li&gt;
	&lt;li&gt;Updated maven related targets in the main build.xml for the new pom&lt;/li&gt;
	&lt;li&gt;Added licenses for mail.jar and activation.jar in LICENSE.txt&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;m not sure what needs to be added to NOTICE.txt, can anybody help?&lt;/p&gt;

&lt;p&gt;To run this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Apply this patch&lt;/li&gt;
	&lt;li&gt;Create a directory called lib inside contrib/dataimporthandler&lt;/li&gt;
	&lt;li&gt;Download and add mail.jar and activation.jar in the above directory&lt;/li&gt;
	&lt;li&gt;Update example/example-DIH/solr/mail/conf/data-config.xml with your mail server and login details&lt;/li&gt;
	&lt;li&gt;Run ant clean example&lt;/li&gt;
	&lt;li&gt;cd example&lt;/li&gt;
	&lt;li&gt;java -Dsolr.solr.home=./example-DIH/solr -jar start.jar&lt;/li&gt;
	&lt;li&gt;Hit &lt;a href=&quot;http://localhost:8983/solr/mail/dataimport?command=full-import&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8983/solr/mail/dataimport?command=full-import&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ll let people try this out before committing this in a day or two. &lt;/p&gt;

&lt;p&gt;This will probably need some more enhancements which can be done through additional issues. Some that I can think of are:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Pluggable CustomFilter implementations&lt;/li&gt;
	&lt;li&gt;Making fields/methods inside MailEntityProcessor protected so functionality can be enhanced/overridden&lt;/li&gt;
	&lt;li&gt;Attachments are stored as two attachment and attachmentNames fields &amp;#8211; a way to associate one with another. I recall some discussion on the LocalSolr issue about something similar for multiple lat/long pairs.&lt;/li&gt;
	&lt;li&gt;Enhance example configuration to be able to run a mailing list search service out-of-the-box&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12698538" author="shalinmangar" created="Mon, 13 Apr 2009 21:19:30 +0100"  >&lt;p&gt;Updated NOTICE.txt and LICENSE.txt with the license information given at the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://repo2.maven.org/maven2/javax/activation/activation/1.1/activation-1.1.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo2.maven.org/maven2/javax/activation/activation/1.1/activation-1.1.pom&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://repo2.maven.org/maven2/javax/mail/mail/1.4.1/mail-1.4.1.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo2.maven.org/maven2/javax/mail/mail/1.4.1/mail-1.4.1.pom&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12698539" author="shalinmangar" created="Mon, 13 Apr 2009 21:27:18 +0100"  >&lt;p&gt;Committed revision 764601.&lt;/p&gt;

&lt;p&gt;Thanks Preetam!&lt;/p&gt;</comment>
                            <comment id="12698675" author="shalinmangar" created="Tue, 14 Apr 2009 08:14:10 +0100"  >&lt;p&gt;A few changes in this patch&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Made the CustomFilter interface static&lt;/li&gt;
	&lt;li&gt;Removed logRow method. LogTransformer can be used if needed&lt;/li&gt;
	&lt;li&gt;logConfig first checks if info level is enabled or not&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="12698676" author="shalinmangar" created="Tue, 14 Apr 2009 08:15:46 +0100"  >&lt;p&gt;Committed revision 764691.&lt;/p&gt;</comment>
                            <comment id="12775617" author="gsingers" created="Tue, 10 Nov 2009 15:51:54 +0000"  >&lt;p&gt;Bulk close for Solr 1.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405396" name="SOLR-934.patch" size="1873" author="shalinmangar" created="Tue, 14 Apr 2009 08:14:10 +0100"/>
                            <attachment id="12405348" name="SOLR-934.patch" size="120827" author="shalinmangar" created="Mon, 13 Apr 2009 21:19:30 +0100"/>
                            <attachment id="12405242" name="SOLR-934.patch" size="132122" author="shalinmangar" created="Sat, 11 Apr 2009 22:46:08 +0100"/>
                            <attachment id="12403401" name="SOLR-934.patch" size="37722" author="shalinmangar" created="Sun, 22 Mar 2009 21:04:54 +0000"/>
                            <attachment id="12397012" name="SOLR-934.patch" size="31814" author="preetam" created="Fri, 2 Jan 2009 09:14:26 +0000"/>
                            <attachment id="12396998" name="SOLR-934.patch" size="31729" author="preetam" created="Thu, 1 Jan 2009 14:54:19 +0000"/>
                            <attachment id="12396584" name="SOLR-934.patch" size="15157" author="preetam" created="Mon, 22 Dec 2008 09:48:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Dec 2008 05:16:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxxob3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>