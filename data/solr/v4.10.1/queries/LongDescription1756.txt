There is a bad cast (casts to String when its a Map.Entry), and an iterator is used by constantly creating a new iterator rather than using the same one - so it never actually iterates, and calling hasNext on a new iterator every time creates an infinite loop.