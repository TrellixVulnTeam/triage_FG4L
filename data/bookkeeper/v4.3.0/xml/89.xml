<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:28:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-89/BOOKKEEPER-89.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-89] Bookkeeper API changes for initial Bookkeeper release</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-89</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Changes are as follows.&lt;/p&gt;

&lt;p&gt;BookKeeper#createLedger, parameter is named passwd, &quot;Key&quot; used in LedgerHandle api&lt;br/&gt;
BookKeeper#getBookieClient shouldn&apos;t be public&lt;br/&gt;
BookKeeper#createComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#openComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#deleteComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#halt could be changed to close(), should throw a BKException&lt;/p&gt;

&lt;p&gt;LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private&lt;br/&gt;
LedgerHandle#getLedgerMetadata shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDigestManager shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDistributionSchedule shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#writeLedgerConfig shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#addEntry should return void, errors should go in an Exception&lt;br/&gt;
LedgerHandle#readComplete should not be public&lt;br/&gt;
LedgerHandle#addComplete should not be public&lt;br/&gt;
LedgerHandle#readLastConfirmedCompelte should not be public&lt;br/&gt;
LedgerHandle#closeComplete should not be public&lt;/p&gt;

&lt;p&gt;ASyncCallback#RecoverCallback shouldn&apos;t be public&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528455">BOOKKEEPER-89</key>
            <summary>Bookkeeper API changes for initial Bookkeeper release</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Oct 2011 10:56:00 +0100</created>
                <updated>Wed, 7 Dec 2011 15:56:07 +0000</updated>
                            <resolved>Thu, 27 Oct 2011 17:28:03 +0100</resolved>
                                                    <fixVersion>4.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13134032" author="ikelly" created="Mon, 24 Oct 2011 13:49:19 +0100"  >&lt;p&gt;Implemented changes as in description. RecoveryCallback is still public as BookKeeperTools needs it. BookKeeperTools has been moved in to the client package.&lt;/p&gt;</comment>
                            <comment id="13134043" author="jiraposter@reviews.apache.org" created="Mon, 24 Oct 2011 14:09:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2543/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Changes are as follows.&lt;/p&gt;

&lt;p&gt;BookKeeper#createLedger, parameter is named passwd, &quot;Key&quot; used in LedgerHandle api&lt;br/&gt;
BookKeeper#getBookieClient shouldn&apos;t be public&lt;br/&gt;
BookKeeper#createComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#openComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#deleteComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#halt could be changed to close(), should throw a BKException&lt;/p&gt;

&lt;p&gt;LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private&lt;br/&gt;
LedgerHandle#getLedgerMetadata shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDigestManager shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDistributionSchedule shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#writeLedgerConfig shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#addEntry should return void, errors should go in an Exception&lt;br/&gt;
LedgerHandle#readComplete should not be public&lt;br/&gt;
LedgerHandle#addComplete should not be public&lt;br/&gt;
LedgerHandle#readLastConfirmedCompelte should not be public&lt;br/&gt;
LedgerHandle#closeComplete should not be public&lt;/p&gt;

&lt;p&gt;ASyncCallback#RecoverCallback shouldn&apos;t be public&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; title=&quot;Bookkeeper API changes for initial Bookkeeper release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-89&quot;&gt;&lt;del&gt;BOOKKEEPER-89&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-89&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 &lt;br/&gt;
  pom.xml 2392db5 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2543/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ivan&lt;/p&gt;
</comment>
                            <comment id="13134116" author="ikelly" created="Mon, 24 Oct 2011 15:50:56 +0100"  >&lt;p&gt;Fixed the hedwig server compile. I hadn&apos;t cleaned, before testing last time.&lt;/p&gt;</comment>
                            <comment id="13134118" author="jiraposter@reviews.apache.org" created="Mon, 24 Oct 2011 15:51:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2543/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-24 14:53:25.740238)&lt;/p&gt;


&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Changes are as follows.&lt;/p&gt;

&lt;p&gt;BookKeeper#createLedger, parameter is named passwd, &quot;Key&quot; used in LedgerHandle api&lt;br/&gt;
BookKeeper#getBookieClient shouldn&apos;t be public&lt;br/&gt;
BookKeeper#createComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#openComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#deleteComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#halt could be changed to close(), should throw a BKException&lt;/p&gt;

&lt;p&gt;LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private&lt;br/&gt;
LedgerHandle#getLedgerMetadata shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDigestManager shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDistributionSchedule shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#writeLedgerConfig shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#addEntry should return void, errors should go in an Exception&lt;br/&gt;
LedgerHandle#readComplete should not be public&lt;br/&gt;
LedgerHandle#addComplete should not be public&lt;br/&gt;
LedgerHandle#readLastConfirmedCompelte should not be public&lt;br/&gt;
LedgerHandle#closeComplete should not be public&lt;/p&gt;

&lt;p&gt;ASyncCallback#RecoverCallback shouldn&apos;t be public&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; title=&quot;Bookkeeper API changes for initial Bookkeeper release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-89&quot;&gt;&lt;del&gt;BOOKKEEPER-89&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-89&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 &lt;br/&gt;
  hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 &lt;br/&gt;
  hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d &lt;br/&gt;
  hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 &lt;br/&gt;
  pom.xml 2392db5 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2543/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ivan&lt;/p&gt;
</comment>
                            <comment id="13135574" author="jiraposter@reviews.apache.org" created="Wed, 26 Oct 2011 01:02:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2543/#review2843&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/#review2843&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Thanks a lot for working on this patch, Ivan. It is mostly good for me, but I have a few comments if you don&apos;t mind.&lt;/p&gt;


&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/#comment6370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/#comment6370&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    We differentiate between password and ledger key in BookKeeper. The password is the string that the application passes to bookkeeper when creating a ledger. The password is used to generate the ledger key (check the constructor of ledger handle) and the mac key when MAC is being used.&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/#comment6376&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/#comment6376&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I understand that these tools need visibility to some internal methods of the client package, but this class is not really part of the bookkeeper client. It is instead a tool for things like bookie recovery.&lt;/p&gt;

&lt;p&gt;    I was wondering if we should at least have it in a separate folder to avoid confusion.&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/#comment6371&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/#comment6371&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Is this a tab?&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/#comment6373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/#comment6373&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why are we moving this test to a different package?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fpj&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-24 14:53:25, Ivan Kelly wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2543/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-24 14:53:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Changes are as follows.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#createLedger, parameter is named passwd, &quot;Key&quot; used in LedgerHandle api&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#getBookieClient shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#createComplete shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#openComplete shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#deleteComplete shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#halt could be changed to close(), should throw a BKException&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getLedgerMetadata shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getDigestManager shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getDistributionSchedule shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#writeLedgerConfig shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#addEntry should return void, errors should go in an Exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#readComplete should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#addComplete should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#readLastConfirmedCompelte should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#closeComplete should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ASyncCallback#RecoverCallback shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; title=&quot;Bookkeeper API changes for initial Bookkeeper release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-89&quot;&gt;&lt;del&gt;BOOKKEEPER-89&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-89&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pom.xml 2392db5 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2543/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ivan&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13135805" author="jiraposter@reviews.apache.org" created="Wed, 26 Oct 2011 09:39:32 +0100"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-10-26 00:03:20, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java, line 187&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/diff/2/?file=52724#file52724line187&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff/2/?file=52724#file52724line187&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     We differentiate between password and ledger key in BookKeeper. The password is the string that the application passes to bookkeeper when creating a ledger. The password is used to generate the ledger key (check the constructor of ledger handle) and the mac key when MAC is being used.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah, I&apos;ll change this back then and update the javadoc for LedgerHandle#getLedgerKey&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-10-26 00:03:20, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java, line 547&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/diff/2/?file=52725#file52725line547&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff/2/?file=52725#file52725line547&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Is this a tab?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nope, it&apos;s line which contains only whitespace, in this case spaces. Its considered bad style, so thats probably why it&apos;s on show here.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-10-26 00:03:20, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java, line 22&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/diff/2/?file=52732#file52732line22&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff/2/?file=52732#file52732line22&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Why are we moving this test to a different package?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It accesses MacDigestManager, which is now package private. In general I think it&apos;s better to have tests in the same package as the code they&apos;re testing, so that they can poke at internals without having to open them to the world.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-10-26 00:03:20, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java, line 1&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2543/diff/2/?file=52725#file52725line1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff/2/?file=52725#file52725line1&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I understand that these tools need visibility to some internal methods of the client package, but this class is not really part of the bookkeeper client. It is instead a tool for things like bookie recovery.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I was wondering if we should at least have it in a separate folder to avoid confusion.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s a tricky one. While it is toollike, it reaches into the internals of the client code. Really a tool should just use the public api itself. How about this? I&apos;ll move the BookKeeperTools back to tools, and put the main() in it, but then I&apos;ll create a class BookKeeperAdmin which acts as an admin client and implements the code that reaches into the internals. Then BookKeeperTools can use the public methods exposed by BookKeeperAdmin.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ivan&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2543/#review2843&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/#review2843&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-10-24 14:53:25, Ivan Kelly wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2543/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-24 14:53:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Changes are as follows.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#createLedger, parameter is named passwd, &quot;Key&quot; used in LedgerHandle api&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#getBookieClient shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#createComplete shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#openComplete shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#deleteComplete shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;BookKeeper#halt could be changed to close(), should throw a BKException&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getLedgerMetadata shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getDigestManager shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#getDistributionSchedule shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#writeLedgerConfig shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#addEntry should return void, errors should go in an Exception&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#readComplete should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#addComplete should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#readLastConfirmedCompelte should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LedgerHandle#closeComplete should not be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ASyncCallback#RecoverCallback shouldn&apos;t be public&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; title=&quot;Bookkeeper API changes for initial Bookkeeper release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-89&quot;&gt;&lt;del&gt;BOOKKEEPER-89&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-89&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;pom.xml 2392db5 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2543/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Ivan&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13135835" author="jiraposter@reviews.apache.org" created="Wed, 26 Oct 2011 10:47:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2543/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-26 09:49:18.492814)&lt;/p&gt;


&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Addressed comments. Removed passwd-&amp;gt;key change. Added BookKeeperAdmin and moved BookKeeperTools back to tools package.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Changes are as follows.&lt;/p&gt;

&lt;p&gt;BookKeeper#createLedger, parameter is named passwd, &quot;Key&quot; used in LedgerHandle api&lt;br/&gt;
BookKeeper#getBookieClient shouldn&apos;t be public&lt;br/&gt;
BookKeeper#createComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#openComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#deleteComplete shouldn&apos;t be public&lt;br/&gt;
BookKeeper#halt could be changed to close(), should throw a BKException&lt;/p&gt;

&lt;p&gt;LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private&lt;br/&gt;
LedgerHandle#getLedgerMetadata shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDigestManager shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#getDistributionSchedule shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#writeLedgerConfig shouldn&apos;t be public&lt;br/&gt;
LedgerHandle#addEntry should return void, errors should go in an Exception&lt;br/&gt;
LedgerHandle#readComplete should not be public&lt;br/&gt;
LedgerHandle#addComplete should not be public&lt;br/&gt;
LedgerHandle#readLastConfirmedCompelte should not be public&lt;br/&gt;
LedgerHandle#closeComplete should not be public&lt;/p&gt;

&lt;p&gt;ASyncCallback#RecoverCallback shouldn&apos;t be public&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; title=&quot;Bookkeeper API changes for initial Bookkeeper release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-89&quot;&gt;&lt;del&gt;BOOKKEEPER-89&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-89&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-89&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 &lt;br/&gt;
  hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 &lt;br/&gt;
  hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d &lt;br/&gt;
  hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 &lt;br/&gt;
  pom.xml 2392db5 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2543/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2543/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Ivan&lt;/p&gt;
</comment>
                            <comment id="13135858" author="ikelly" created="Wed, 26 Oct 2011 11:40:23 +0100"  >&lt;p&gt;patch generated with --no-prefix&lt;/p&gt;</comment>
                            <comment id="13135875" author="fpj" created="Wed, 26 Oct 2011 12:29:29 +0100"  >&lt;p&gt;BookieReadWriteTest is failing for me. I&apos;m attaching the surefire report.&lt;/p&gt;</comment>
                            <comment id="13135933" author="ikelly" created="Wed, 26 Oct 2011 14:18:52 +0100"  >&lt;p&gt;Failure is unrelated. Is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-92&quot; title=&quot;using wrong context object in readLastConfirmedComplete callback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-92&quot;&gt;&lt;del&gt;BOOKKEEPER-92&lt;/del&gt;&lt;/a&gt;, which I think has exposed a bug. I&apos;ll try and fix now and submit a new JIRA for it. Hopefully Jenkins will catch this sort of thing once ZK 3.4 is out.&lt;/p&gt;
</comment>
                            <comment id="13135952" author="ikelly" created="Wed, 26 Oct 2011 14:24:41 +0100"  >&lt;p&gt;Actually, Sijie had already spotted this problem. &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-94&quot; title=&quot;Double callbacks in readLastConfirmedOp which fails readLastConfirmed operation even received enough valid responses.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-94&quot;&gt;&lt;del&gt;BOOKKEEPER-94&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13135984" author="ikelly" created="Wed, 26 Oct 2011 14:48:48 +0100"  >&lt;p&gt;One final change. I had forgotten to change addEntry to return an exception instead of a return code. &lt;/p&gt;</comment>
                            <comment id="13136010" author="breed" created="Wed, 26 Oct 2011 15:21:47 +0100"  >&lt;p&gt;looks great. i like how you moved the callbacks from the class to inner classes! my one comment is that i think we should keep the accessor for the ZooKeeper public. if you are using bookkeeper and you want to do some zookeeper operations, usually you want to use the same zookeeper object to keep any session events in sync.&lt;/p&gt;</comment>
                            <comment id="13136019" author="ikelly" created="Wed, 26 Oct 2011 15:32:18 +0100"  >&lt;p&gt;In that case I would suggest passing your own ZK instance into the constructor. Do you think more is needed than this?&lt;/p&gt;</comment>
                            <comment id="13136354" author="fpj" created="Wed, 26 Oct 2011 21:50:11 +0100"  >&lt;p&gt;+1, looks great!&lt;/p&gt;</comment>
                            <comment id="13137211" author="breed" created="Thu, 27 Oct 2011 16:41:23 +0100"  >&lt;p&gt;+1 yes, i think you are right ivan. i don&apos;t feel strongly about it.&lt;/p&gt;</comment>
                            <comment id="13137248" author="ikelly" created="Thu, 27 Oct 2011 17:25:03 +0100"  >&lt;p&gt;Committed as r1189842. Thanks for reviewing, guys.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500883" name="BOOKKEEPER-89.diff" size="114852" author="ikelly" created="Wed, 26 Oct 2011 14:48:47 +0100"/>
                            <attachment id="12500860" name="BOOKKEEPER-89.diff" size="113943" author="ikelly" created="Wed, 26 Oct 2011 11:40:23 +0100"/>
                            <attachment id="12500852" name="BOOKKEEPER-89.diff" size="114089" author="ikelly" created="Wed, 26 Oct 2011 10:46:04 +0100"/>
                            <attachment id="12500456" name="BOOKKEEPER-89.diff" size="119698" author="ikelly" created="Mon, 24 Oct 2011 15:50:56 +0100"/>
                            <attachment id="12500431" name="BOOKKEEPER-89.diff" size="107802" author="ikelly" created="Mon, 24 Oct 2011 13:49:19 +0100"/>
                            <attachment id="12500867" name="TEST-org.apache.bookkeeper.test.BookieReadWriteTest.xml" size="11502" author="fpj" created="Wed, 26 Oct 2011 12:31:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Oct 2011 13:09:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hynzmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>173959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>