<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:27:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-629/BOOKKEEPER-629.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-629] Support hostname based ledger metadata to help users to change IP with existing installation</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-629</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Register the bookie with &lt;b&gt;hostname:port&lt;/b&gt; and also store the bookie addresses as &lt;b&gt;hostname:port&lt;/b&gt; in ledger metadata files instead of &lt;b&gt;ip:port&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;This will help users to change the machine IP if they want without loosing their data.&lt;/p&gt;

&lt;p&gt;Supporting hostname based installation/functionality is one of the important requirement of users.&lt;/p&gt;

&lt;p&gt;Any thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653372">BOOKKEEPER-629</key>
            <summary>Support hostname based ledger metadata to help users to change IP with existing installation</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12655537">BOOKKEEPER-639</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshr">Rakesh R</assignee>
                                    <reporter username="vinayrpet">Vinayakumar B</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jun 2013 05:25:08 +0100</created>
                <updated>Mon, 12 May 2014 07:31:34 +0100</updated>
                            <resolved>Mon, 12 May 2014 07:31:34 +0100</resolved>
                                    <version>4.2.1</version>
                                    <fixVersion>4.3.0</fixVersion>
                                    <component>bookkeeper-auto-recovery</component>
                    <component>bookkeeper-client</component>
                    <component>bookkeeper-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13686428" author="hustlmsp" created="Tue, 18 Jun 2013 07:12:14 +0100"  >&lt;p&gt;this would be a straightforward change, you could add an additional setting in configuration, if this setting is enabled, register using hostname. &lt;/p&gt;</comment>
                            <comment id="13686536" author="ikelly" created="Tue, 18 Jun 2013 10:54:24 +0100"  >&lt;p&gt;It should use reverseDNS on the ip it would have registered on otherwise to get the hostname. Otherwise, when it registers it may register with a domain which is not resolvable from the client (such as localhost). &lt;/p&gt;</comment>
                            <comment id="13688847" author="rakeshr" created="Thu, 20 Jun 2013 05:02:59 +0100"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustlmsp&quot; class=&quot;user-hover&quot; rel=&quot;hustlmsp&quot;&gt;Sijie Guo&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivank%40yahoo-inc.com&quot; class=&quot;user-hover&quot; rel=&quot;ivank@yahoo-inc.com&quot;&gt;Ivan Kelly&lt;/a&gt;, will introduce the following config item. Since Bookie#getBookieAddress() is using reverseDNS on the ip, I think just changing the StringUtils#addrToString will work. Whats your opinion?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Whether the bookie should use its hostname to register with the 
# co-ordination service(eg: zookeeper service). 
# When &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, bookie will use its ipaddress &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the registration.
# Default value is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.
#useHostName=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;AbstractConfiguration.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Get whether bookie is using hostname &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; registration. The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; is
     * &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.
     * 
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; bookie is registering with its hostname. Otherwise
     *         bookie is using its ipaddress
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; getUseHostName() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getBoolean(USE_HOST_NAME, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    }

    /**
     * Configure the bookie to use its hostname to register with the
     * co-ordination service(eg: zookeeper)
     * 
     * @see #getUseHostName
     * @param useHostName
     *            whether to use hostname &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; registration
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setUseHostName(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; useHostName) {
        setProperty(USE_HOST_NAME, useHostName);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;StringUtils.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; addrToString(InetSocketAddress addr,
            AbstractConfiguration conf) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conf.getUseHostName()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; addr.getAddress().getCanonicalHostName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;
                    + addr.getPort();
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; addr.getAddress().getHostAddress() + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + addr.getPort();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13688903" author="hustlmsp" created="Thu, 20 Jun 2013 07:06:23 +0100"  >&lt;p&gt;looks fine. but should we just pass a boolean flag rather than configuration, since it is a utility function, it would be better to not bound it with a bookkeeper specific class.&lt;/p&gt;</comment>
                            <comment id="13689997" author="rakeshr" created="Fri, 21 Jun 2013 04:30:48 +0100"  >&lt;p&gt;Thanks Sijie, Ivan. Please have a look at the patch.&lt;/p&gt;

&lt;p&gt;Few clarifications:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Do we need to update the metadata_version numbers?&lt;/li&gt;
	&lt;li&gt;I have used getUseHostName() property in both client&amp;amp;server side. Whats your opinion?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13690004" author="hadoopqa" created="Fri, 21 Jun 2013 05:07:37 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12588994/1-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;1-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Fri Jun 21 03:41:22 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 4 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 6 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 848&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/381/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/381/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13690037" author="hustlmsp" created="Fri, 21 Jun 2013 06:00:37 +0100"  >&lt;p&gt;1. you don&apos;t need to change all the places that use addrToString. e.g. RackawareEnsemblePlacementPolicy, parse ledger metadata.&lt;/p&gt;

&lt;p&gt;2. create a default version of addrToString which uses ip. and just change the places where you need to output the address using hostname as the issue described. don&apos;t change other places if they are unrelated.&lt;/p&gt;

&lt;p&gt;3. when you change cookie format (even cookie znode name), please consider backward compatibility. otherwise, please keep it using ip before you had a graceful solution for this part. similar comments applied on BookieIndexer.&lt;/p&gt;

&lt;p&gt;4. you could parse useHostName flag in LedgerMetadata.serialize(boolean useHostname) rather than change the the construct LedgerMetadata.  &lt;/p&gt;</comment>
                            <comment id="13690038" author="hustlmsp" created="Fri, 21 Jun 2013 06:02:01 +0100"  >&lt;p&gt;&amp;gt; Do we need to update the metadata_version numbers?&lt;/p&gt;

&lt;p&gt;the change didn&apos;t change the format of metadata and the original code works with ip or host. so you don&apos;t need to bump the metadata version.&lt;/p&gt;</comment>
                            <comment id="13691155" author="rakeshr" created="Sat, 22 Jun 2013 14:52:04 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustlmsp&quot; class=&quot;user-hover&quot; rel=&quot;hustlmsp&quot;&gt;Sijie Guo&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;create a default version of addrToString which uses ip. and just change the places where you need to output the address using hostname as the issue described. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could you please explain how to use this default version. Can you point me to any usage in our component.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;when you change cookie format (even cookie znode name), please consider backward compatibility. otherwise, please keep it using ip before you had a graceful solution for this part.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How about handling &apos;KeeperException.NoNodeException&apos; while Cookie.readFromZooKeeper() and also check the existence of bookieIpAddress. If exists, after successful verification, keep the new converted cookie data in zookeeper and then delete the old one from zookeeper.&lt;/p&gt;

&lt;p&gt;Also, I feel it would be good to provide upgradation of the existing ledger/autorecovery metadata info by using hostname instead of IP. IMHO will help users to do IP change more efficiently. Any thoughts?&lt;/p&gt;</comment>
                            <comment id="13691710" author="rakeshr" created="Mon, 24 Jun 2013 06:40:48 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustlmsp&quot; class=&quot;user-hover&quot; rel=&quot;hustlmsp&quot;&gt;Sijie Guo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Are you suggesting to add version in StringUtils.java. Am I missing anything?&lt;br/&gt;
It would be great if you could help me to know more about, who will store the version and do the version validation.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; CUR_VERSION = 1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13692680" author="hustlmsp" created="Tue, 25 Jun 2013 02:53:19 +0100"  >&lt;blockquote&gt;
&lt;p&gt;Could you please explain how to use this default version. Can you point me to any usage in our component.&lt;/p&gt;

&lt;p&gt;Are you suggesting to add version in StringUtils.java. Am I missing anything?&lt;br/&gt;
It would be great if you could help me to know more about, who will store the version and do the version validation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we need to define any version in this case.&lt;/p&gt;

&lt;p&gt;I meant method overload.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

addrToString(addr) {
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; addrToString(addr, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
}

addrToString(addr, useHostName) {
   &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; the logic
&lt;/span&gt;}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So you just modify the places that need to use addrToString(addr, useHostName).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
How about handling &apos;KeeperException.NoNodeException&apos; &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; Cookie.readFromZooKeeper() and also check the existence of bookieIpAddress. If exists, after successful verification, keep the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; converted cookie data in zookeeper and then delete the old one from zookeeper.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would suggest not doing this in the startup of bookie. &lt;/p&gt;

&lt;p&gt;1. useHost flag of a bookie should be decided: first by its identifier in cookie file. if it is IP, useHost should be set to false, otherwise set to true. if there is no cookie, use the flag defined in the configuration file.&lt;br/&gt;
2. provide a admin tool to change its identifier from IP to hostname, or from hostname to IP.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Also, I feel it would be good to provide upgradation of the existing ledger/autorecovery metadata info by using hostname instead of IP. IMHO will help users to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; IP change more efficiently. Any thoughts?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;+1 for it. it should be another admin command like recovery command.&lt;/p&gt;
</comment>
                            <comment id="13693148" author="rakeshr" created="Tue, 25 Jun 2013 17:26:30 +0100"  >&lt;p&gt;Attached latest patch, fixed comments. Please have a look at the latest patch.&lt;/p&gt;</comment>
                            <comment id="13693158" author="hadoopqa" created="Tue, 25 Jun 2013 17:57:28 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12589621/3-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;3-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Tue Jun 25 16:31:22 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 3 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 1 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 852&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/387/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/387/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13693283" author="hadoopqa" created="Tue, 25 Jun 2013 20:07:44 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12589638/4-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;4-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Tue Jun 25 18:41:22 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 3 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 1 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 852&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/388/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/388/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13693561" author="hustlmsp" created="Wed, 26 Jun 2013 02:15:13 +0100"  >&lt;p&gt;the patch looks fine. you also need to add backward compatible tests.&lt;/p&gt;

&lt;p&gt;1. new version bookie starts with the cookies generated by old version.&lt;br/&gt;
2. old version bookie starts with the cookies generated by new version (with useHostName)&lt;br/&gt;
3. old client should works correctly if new bookie starts with useHostName&lt;br/&gt;
4. old client should read the ledger metadata written by new client with useHostName&lt;br/&gt;
5. old client should be able to do bookie recovery the host (recorded using useHostName in ledgermetadata)&lt;/p&gt;</comment>
                            <comment id="13696134" author="hadoopqa" created="Sat, 29 Jun 2013 15:14:28 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12590165/5-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;5-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Sat Jun 29 13:41:29 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 5 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 879&lt;br/&gt;
.    Tests failed: 0&lt;br/&gt;
.    Tests errors: 9&lt;/p&gt;

&lt;p&gt;.    The patch failed the following testcases:&lt;/p&gt;

&lt;p&gt;.      &lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/398/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/398/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13696467" author="hustlmsp" created="Mon, 1 Jul 2013 05:45:19 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added a change in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-588&quot; title=&quot;SSL support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-588&quot;&gt;BOOKKEEPER-588&lt;/a&gt; to provide a wrapper class BookieSocketAddress for SSL support. after that, I think the change here would be easier, we don&apos;t need to let client involved in using ip or hostname, client should use the identifier provided by bookie server. Bookie server decide to use IP or hostname. so the change would be just in Bookie#getBookieAddress based the wrapper BookieSocketAddress.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-588?focusedCommentId=13696466&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13696466&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-588?focusedCommentId=13696466&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13696466&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13696471" author="hadoopqa" created="Mon, 1 Jul 2013 05:58:07 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12590224/6-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;6-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Mon Jul  1 04:31:21 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 5 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch seems to introduce 1 new Findbugs warning(s) in module(s) &lt;span class=&quot;error&quot;&gt;&amp;#91;bookkeeper-server&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 882&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/400/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/400/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13696584" author="rakeshr" created="Mon, 1 Jul 2013 06:15:57 +0100"  >&lt;p&gt;Hi Sijie, &lt;/p&gt;

&lt;p&gt;I created a parent issue &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-639&quot; title=&quot;Provide hostname based bookie and ledger metadata to support IP change&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-639&quot;&gt;BOOKKEEPER-639&lt;/a&gt; and plan to tag all the related changes of hostname support to this.&lt;br/&gt;
But I couldn&apos;t find a way to move &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt; as a sub-task of &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-639&quot; title=&quot;Provide hostname based bookie and ledger metadata to support IP change&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-639&quot;&gt;BOOKKEEPER-639&lt;/a&gt;. Can u please help me to move this as a sub-task of &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-639&quot; title=&quot;Provide hostname based bookie and ledger metadata to support IP change&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-639&quot;&gt;BOOKKEEPER-639&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13696587" author="rakeshr" created="Mon, 1 Jul 2013 06:20:16 +0100"  >&lt;p&gt;@Sijie I got it&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13696933" author="ikelly" created="Mon, 1 Jul 2013 17:39:41 +0100"  >&lt;p&gt;There seems to be a reoccurring issue here that a bookie&apos;s identity is tied to an entity which can change (ip address, listening port, etc). There&apos;s no real reason to do this. We could have each bookie generate an identity on first boot, using uuid or something, and then it can use that identity forever. on boot, the bookie creates /ledgers/active/&lt;/p&gt;
{uuid}
&lt;p&gt; which contains the current ip/hostname and listening port of the bookie.&lt;/p&gt;

&lt;p&gt;It adds an extra lookup for the client, but this can be done with a multiget to amortize the cost. &lt;/p&gt;</comment>
                            <comment id="13697072" author="rakeshr" created="Mon, 1 Jul 2013 20:01:28 +0100"  >&lt;blockquote&gt;&lt;p&gt;using uuid or something, and then it can use that identity forever. on boot, the bookie creates /ledgers/active/&lt;/p&gt;&lt;/blockquote&gt;
{uuid}

&lt;p&gt;Yeah &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivank%40yahoo-inc.com&quot; class=&quot;user-hover&quot; rel=&quot;ivank@yahoo-inc.com&quot;&gt;Ivan Kelly&lt;/a&gt;, this will be more generic and avoids bookie&apos;s machine/env details to an entity. &lt;/p&gt;

&lt;p&gt;How about an algo like:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;On fresh startup, bookie will generate &apos;uuid&apos; and store this to a file myid under ledger dir. Next startup will look at this myid file and read the identity.&lt;/li&gt;
	&lt;li&gt;Register the myid - creates an ephemeral znode in zk with data &apos;hostname:port&apos;. All clients will use the data for server communications.&lt;/li&gt;
	&lt;li&gt;cookies, Ledgermetadata, autorecovery modules will store bookie as myid. While fetching will resolve to hostname:port.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13697152" author="hustlmsp" created="Mon, 1 Jul 2013 21:39:55 +0100"  >&lt;p&gt;several concerns of UUID:&lt;/p&gt;

&lt;p&gt;1. the backward compatibility issue? how an old bookie client interacts with new bookies registered with UUID?&lt;/p&gt;

&lt;p&gt;2. if you change the ledger metadata to use UUID rather than &apos;hostname:port&apos;, how to keep backward compatibility issue? if you don&apos;t change the ledger metadata to use UUDI, you are still facing the problem of changing hostname or IP.&lt;/p&gt;


&lt;p&gt;In general, the bookie host is already kind of identifier (UUID) in cookie file. I don&apos;t think we need a separated uuid field. the changing of the environment should be counted as a bookie upgrade and addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-634&quot; title=&quot;Provide admin tool to rename bookie identifier in ledger metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-634&quot;&gt;&lt;del&gt;BOOKKEEPER-634&lt;/del&gt;&lt;/a&gt;. I don&apos;t think this is a big deal. &lt;/p&gt;</comment>
                            <comment id="13697443" author="rakeshr" created="Tue, 2 Jul 2013 03:58:17 +0100"  >&lt;p&gt;With UUID, the advantage is user can change hostname or IP or port easily without affecting bookie entities. During restart bookies will publish the communication details &lt;/p&gt;
{hostname:port}

&lt;blockquote&gt;&lt;p&gt;the backward compatibility issue? how an old bookie client interacts with new bookies registered with UUID?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustlmsp&quot; class=&quot;user-hover&quot; rel=&quot;hustlmsp&quot;&gt;Sijie Guo&lt;/a&gt;Good point. Since its change in the ledger metadata format, initial thought is mandating the up-gradation between versions. I didn&apos;t get any other way now&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13697503" author="hustlmsp" created="Tue, 2 Jul 2013 05:52:39 +0100"  >&lt;blockquote&gt;
&lt;p&gt;With UUID, the advantage is user can change hostname or IP or port easily without affecting bookie entities. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;somehow, the UUID breaks one of the functions of Cookie. Two processes has the ability to listen on different ports using same UUID accessing same directories by a mistake operation, which might corrupt data. so if you guys feel strongly to introduce UUID, you&apos;d need to provide a locking mechanism to prevent two bookies running at the same time accessing same data directories.&lt;/p&gt;

&lt;p&gt;go back to the debate of using &apos;hostname:port&apos; or using UUID. either &apos;hostname:port&apos; identifier or UUID has its pros and cons. using &apos;hostname:port&apos; is quite straightforward for debugging when you looking into its ledger metadata in zookeeper or looking to the available bookies znode. using UUID could gain the benefits as you described, but the question is how frequently you would change the hostname, IP or port? is it worth giving up the flexibility that &apos;hostname:port&apos; gave?&lt;/p&gt;

&lt;p&gt;if the idea is just to inject the &lt;/p&gt;
{host, ip, port}
&lt;p&gt; information, you don&apos;t need to change &apos;hostname:port&apos; identifier format. during first start time, you could generate the identifier based on &apos;hostname:port&apos;. so the identifier is still backward compatible with old version clients. After that, the bookie keeps using this identifier, you could let new bookie inject &lt;/p&gt;
{its host, ip, port}
&lt;p&gt; into its registration znode. so old bookie client could still use znode name to connect, new bookie client could try read content in its registration znode first. if its empty, it is an old bookie znode, so fallback to use znode name; if its not empty, it is a new bookie znode, use the content.&lt;/p&gt;

&lt;p&gt;but you still need the admin tool to have the ability to allow people changing identifier.&lt;/p&gt;</comment>
                            <comment id="13697565" author="rakeshr" created="Tue, 2 Jul 2013 08:02:21 +0100"  >&lt;p&gt;There are some cases where users would like to ship pre-installed clusters. &lt;br/&gt;
One use case which I come across is, after installing and testing, user wants to ship the nodes and update /etc/hosts by reconfigure the IP addresses. &lt;br/&gt;
Very rarely changing the server ports and hostname. IMHO, we can discuss all the possibilities and choose better approach.&lt;/p&gt;

&lt;p&gt;Thanks Sijie for the detailed analysis.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;information, you don&apos;t need to change &apos;hostname:port&apos; identifier format. during first start time, you could generate the identifier based on &apos;hostname:port&apos;. so the identifier is still backward compatible with old version clients. After that, the bookie keeps using this identifier, you could let new bookie inject &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So if I understand correctly, here the idea is to keep the identifier as &apos;hostname:port&apos; format. For example, &apos;HOST-10-18-40-30:8020&apos; later when user change the hostname to &apos;HOST-10-18-40-35&apos;, still this bookie will publish &apos;HOST-10-18-40-12:8020&apos; and content as the actual &apos;HOST-10-18-40-35:8020&apos;. Here I could see one conflicts, say when a new bookie joins with actual hostname as &apos;HOST-10-18-40-12&apos; and port 8020.&lt;/p&gt;</comment>
                            <comment id="13697640" author="rakeshr" created="Tue, 2 Jul 2013 10:47:48 +0100"  >&lt;p&gt;Sorry, please ignore the above example, its not correct.&lt;/p&gt;

&lt;p&gt;So if I understand correctly, here the idea is to keep the identifier as &apos;hostname:port&apos; format. For example, one bookie starts with the id &apos;HOST-10-18-40-30:8020&apos;, when user change the hostname to &apos;HOST-10-18-40-35&apos;, this bookie will publish &apos;HOST-10-18-40-30:8020&apos; and content as the actual &apos;HOST-10-18-40-35:8020&apos;. Here I could see one conflicts, say when a new bookie wants to joins with its actual hostname as &apos;HOST-10-18-40-30&apos; and port 8020, he will get ZNodeExistsException.&lt;/p&gt;</comment>
                            <comment id="13697671" author="ikelly" created="Tue, 2 Jul 2013 11:37:50 +0100"  >&lt;p&gt;Actually what we could do is register the bookie as /ledgers/active/&amp;lt;uuid&amp;gt;&lt;del&gt;&amp;lt;host/ip&amp;gt;&lt;/del&gt;&amp;lt;port&amp;gt;. This removes the extra lookup. The uuid could then be used in the ledger metadata. uuid and port could be used in the cookie. The issues Sijie raised about BC is valid. However, fixing for this should be the same as fixing for hostname. However, in this case, the main usecase is VM appliances, so BC shouldn&apos;t be a huge issue (we should provide tools to change a existing ip/hostname in any case).&lt;/p&gt;</comment>
                            <comment id="13697709" author="rakeshr" created="Tue, 2 Jul 2013 12:59:51 +0100"  >&lt;blockquote&gt;&lt;p&gt;register the bookie as /ledgers/active/&amp;lt;uuid&amp;gt;&lt;del&gt;&amp;lt;host/ip&amp;gt;&lt;/del&gt;&amp;lt;port&amp;gt;. This removes the extra lookup.The issues Sijie raised about BC is valid. However, fixing for this should be the same as fixing for hostname&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Should we continue with the old ledgermetadata format &amp;lt;host/ip:port&amp;gt; for BC? &lt;br/&gt;
Sorry, I didn&apos;t completely understood the &amp;lt;uuid&amp;gt; concept without causing any backward compatibility issues.&lt;/p&gt;</comment>
                            <comment id="13698459" author="hustlmsp" created="Wed, 3 Jul 2013 01:48:27 +0100"  >&lt;blockquote&gt;
&lt;p&gt;So if I understand correctly, here the idea is to keep the identifier as &apos;hostname:port&apos; format. For example, one bookie starts with the id &apos;HOST-10-18-40-30:8020&apos;, when user change the hostname to &apos;HOST-10-18-40-35&apos;, this bookie will publish &apos;HOST-10-18-40-30:8020&apos; and content as the actual &apos;HOST-10-18-40-35:8020&apos;. Here I could see one conflicts, say when a new bookie wants to joins with its actual hostname as &apos;HOST-10-18-40-30&apos; and port 8020, he will get ZNodeExistsException.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;unless you had a global id assignment, you had resolved this issue in uuid case.&lt;/p&gt;

&lt;p&gt;for me, this solution is making confused about the identifier, you had no idea about it is an old version bookie or a new version bookie. actually I don&apos;t like the proposal I raised.&lt;/p&gt;

&lt;p&gt;so if there is no clear solution for backward compatibility, I would suggest keeping current identifier format and providing an admin tool to change identifier. Let&apos;s do the generic solution util there is a big requirement and have to do it. for now keep things simple. &lt;/p&gt;



</comment>
                            <comment id="13698763" author="ikelly" created="Wed, 3 Jul 2013 10:06:08 +0100"  >&lt;blockquote&gt;&lt;p&gt;so if there is no clear solution for backward compatibility, I would suggest keeping current identifier format and providing an admin tool to change identifier. Let&apos;s do the generic solution util there is a big requirement and have to do it. for now keep things simple. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree. I think if we could go back and start from scratch, we could do something nicer to split the bookie identification from the network location. But with BC things do get more complex.&lt;/p&gt;</comment>
                            <comment id="13698825" author="hadoopqa" created="Wed, 3 Jul 2013 11:58:15 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12590615/7-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;7-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Wed Jul  3 10:31:22 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 5 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 882&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/405/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/405/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13698833" author="rakeshr" created="Wed, 3 Jul 2013 12:06:25 +0100"  >&lt;blockquote&gt;&lt;p&gt;I added a change in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-588&quot; title=&quot;SSL support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-588&quot;&gt;BOOKKEEPER-588&lt;/a&gt; to provide a wrapper class BookieSocketAddress for SSL support. after that, I think the change here would be easier, we don&apos;t need to let client involved in using ip or hostname, client should use the identifier provided by bookie server. Bookie server decide to use IP or hostname. so the change would be just in Bookie#getBookieAddress based the wrapper BookieSocketAddress.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-588?focusedCommentId=13696466&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13696466&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-588?focusedCommentId=13696466&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13696466&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hustlmsp&quot; class=&quot;user-hover&quot; rel=&quot;hustlmsp&quot;&gt;Sijie Guo&lt;/a&gt; I&apos;ve written few test cases and updated latest patch.. &lt;br/&gt;
Also would like to know, how do I incorporate BookieSocketAddress changes with this JIRA. Should I wait for the &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-588&quot; title=&quot;SSL support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-588&quot;&gt;BOOKKEEPER-588&lt;/a&gt; to push this in?&lt;/p&gt;</comment>
                            <comment id="13699187" author="hustlmsp" created="Wed, 3 Jul 2013 18:08:18 +0100"  >&lt;blockquote&gt;
&lt;p&gt;Sijie Guo I&apos;ve written few test cases and updated latest patch..&lt;br/&gt;
Also would like to know, how do I incorporate BookieSocketAddress changes with this JIRA. Should I wait for the &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-588&quot; title=&quot;SSL support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-588&quot;&gt;BOOKKEEPER-588&lt;/a&gt; to push this in?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I would create a separate task to provide this wrapper recently to unblock your work. Since it would make things clear without putting client in the decider to decide use IP or hostname.&lt;/p&gt;</comment>
                            <comment id="13699695" author="rakeshr" created="Thu, 4 Jul 2013 02:49:41 +0100"  >&lt;p&gt;Thats fine.&lt;/p&gt;</comment>
                            <comment id="13736490" author="hustlmsp" created="Mon, 12 Aug 2013 03:04:03 +0100"  >&lt;p&gt;Canceling it since &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-644&quot; title=&quot;Provide a bookie address wrapper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-644&quot;&gt;&lt;del&gt;BOOKKEEPER-644&lt;/del&gt;&lt;/a&gt; needs to be in first and the patch generated based on it.&lt;/p&gt;</comment>
                            <comment id="13893754" author="rakeshr" created="Thu, 6 Feb 2014 20:30:16 +0000"  >&lt;p&gt;Attached new patch.&lt;/p&gt;</comment>
                            <comment id="13893788" author="hadoopqa" created="Thu, 6 Feb 2014 20:49:58 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12627411/9-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;9-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Thu Feb  6 20:21:32 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 4 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 904&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/585/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/585/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13896248" author="hustlmsp" created="Mon, 10 Feb 2014 06:02:02 +0000"  >&lt;p&gt;several comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;please change &apos;useHostName&apos; to &apos;useHostNameAsBookieID&apos;. &apos;useHostName&apos; is too generic.&lt;/li&gt;
	&lt;li&gt;I saw several places in CookieTest, you are setting &apos;conf.setUseHostName(false)&apos;. why doing this? since this setting is false by default, no?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13896768" author="rakeshr" created="Mon, 10 Feb 2014 17:16:39 +0000"  >&lt;p&gt;Thanks Sijie for the review and your time. Attached new patch addressing the comments.&lt;/p&gt;</comment>
                            <comment id="13896798" author="hadoopqa" created="Mon, 10 Feb 2014 18:00:00 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12628005/10-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;10-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Mon Feb 10 17:31:33 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 4 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 904&lt;br/&gt;
.    Tests failed: 0&lt;br/&gt;
.    Tests errors: 1&lt;/p&gt;

&lt;p&gt;.    The patch failed the following testcases:&lt;/p&gt;

&lt;p&gt;.      &lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/588/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/588/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13917790" author="hustlmsp" created="Mon, 3 Mar 2014 07:19:25 +0000"  >&lt;p&gt;the patch looks good. but after thinking a bit more, the try catch logic to search both ip and hostname znodes is not good enough for extending in future, if we want to support other id for bookie id in future. so I am kind of thinking we should do as below:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if there is any cookie files in the local directory, we should use bookieHost in the cookie file as bookie id (znode path) to check, regarding the settings in configuration.&lt;/li&gt;
	&lt;li&gt;if there is no cookie files in local directory, we use the settings in the configuration to decide whether using ip or address as bookie id.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13924936" author="rakeshr" created="Sat, 8 Mar 2014 17:23:22 +0000"  >&lt;p&gt;Thanks Sijie for the comments. It would be helpful to me if you can give some more clarifications on:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;if there is any cookie files in the local directory, we should use bookieHost in the cookie file as bookie id (znode path) to check, regarding the settings in configuration.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Presently, Bookie#checkEnvironment flow is like, first verify the generated Cookie with ZK and then verifying the same against journalDir &amp;amp; ledgerDirectories respectively. Now for the proposed changes we should move &lt;em&gt;readCookieFromDirs&lt;/em&gt; one level up like:&lt;/p&gt;

&lt;p&gt;If cookie exists in local dir, then check whether the &apos;bookiehost&apos; is based on IP or HostName. If IP then set the &apos;useHostNameAsBookieID&apos; flag to false otherwise to true. If cookie doesn&apos;t exists, simply use the configured value of &apos;useHostNameAsBookieID&apos;. After that do the verification as usual like ZK, then journalDir and finally ledgerDirs.&lt;/p&gt;

&lt;p&gt;Clarification-1) For setting/tuning the flag, I&apos;ll be using the cookie file of journal directory. If there is any conflicts with cookie file of ledger dirs or ZK node path, will simply throw exception and exits.&lt;/p&gt;

&lt;p&gt;Clarification-2) We have one more way by completely reversing the Bookie#checkEnvironment logic like follows:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;readCookieFile of journal dir, then sets the flag.&lt;/li&gt;
	&lt;li&gt;Generate the masterCookie&lt;/li&gt;
	&lt;li&gt;Verify masterCookie against the local directories.&lt;/li&gt;
	&lt;li&gt;Verify masterCookie against ZK node path.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I feel not to reverse the existing verification logic. I&apos;d like to know your opinion.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rakesh&lt;/p&gt;</comment>
                            <comment id="13925387" author="hustlmsp" created="Mon, 10 Mar 2014 01:44:29 +0000"  >&lt;p&gt;we don&apos;t need to change original logic, but just add a checking before the logic: check if any cookies in directories: if not (new environment), generate instance id from configuration; if there is any cookie file, get instance id from cookie. then use the instance id locate zookeeper cookie in original logic. does it make sense?&lt;/p&gt;
</comment>
                            <comment id="13925738" author="rakeshr" created="Mon, 10 Mar 2014 13:47:33 +0000"  >&lt;p&gt;Thanks Sijie. Attached new patch addressing the comments, now done checks for new env using the cookie of journalDir and act upon.&lt;/p&gt;</comment>
                            <comment id="13925756" author="hadoopqa" created="Mon, 10 Mar 2014 14:19:16 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12633690/11-BOOKKEEPER-629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;11-BOOKKEEPER-629.patch&lt;/a&gt; downloaded at Mon Mar 10 13:50:53 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 4 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 919&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/597/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/597/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13959303" author="fpj" created="Thu, 3 Apr 2014 22:59:45 +0100"  >&lt;p&gt;I&apos;m sorry for chiming in late, but I was wondering if it wouldn&apos;t be best to recreate the znode instead of inverting the value of the parameter. It may be a bit counterintuitive. &lt;/p&gt;</comment>
                            <comment id="13968406" author="rakeshr" created="Mon, 14 Apr 2014 15:54:07 +0100"  >&lt;p&gt;Sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; for the late reply. Thank you for looking into this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;but I was wondering if it wouldn&apos;t be best to recreate the znode instead of inverting the value of the parameter. It may be a bit counterintuitive&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With the current approach, we are inverting the configuration to return previous value of #getBookieAddress(). Otw it would return hostname(say previously I&apos;ve created with IP), will this be backward compatible ?&lt;/p&gt;

&lt;p&gt;I was thinking that, will do the &quot;bookie id&quot; changes using the admin tool. It need to design an admin tool in such a way to update the metadata of,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ledger node&lt;/li&gt;
	&lt;li&gt;cookie node&lt;/li&gt;
	&lt;li&gt;available node&lt;/li&gt;
	&lt;li&gt;underreplicated node&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Does this sound good to you ?&lt;/p&gt;</comment>
                            <comment id="13986056" author="fpj" created="Wed, 30 Apr 2014 21:44:33 +0100"  >&lt;p&gt;The backward compatibility point is a good one. I suppose we could rewrite the znode once we release 4.3.0, no? One option actually is that we get this patch in 4.2.3, and do the znode rewrite in 4.3.0. This way we have an upgrade path. Otherwise, it looks good to me.&lt;/p&gt;</comment>
                            <comment id="13988790" author="rakeshr" created="Sat, 3 May 2014 20:12:16 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; I understood the point. I took sometime on analysis, here I&apos;ve noticed few impacts on Auto-Recovery module. What you all feel about the following case,&lt;br/&gt;
Auditor process sees the bookie availability by comparing(string comparison) the bookie Ids. Assume BK-1(4.2.x) acts as Auditor node and another BK-2 (4.2.x) node has upgraded to 4.3.0. Now Auditor will report BK-2 as unavailable and trigger ledger checks.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rakesh&lt;/p&gt;</comment>
                            <comment id="13988903" author="rakeshr" created="Sun, 4 May 2014 05:16:41 +0100"  >&lt;p&gt;Adding one more to my the above comment, there is an admin command to disable auto recovery of underreplicated ledgers. While upgrading they can disable it. Any other thoughts on Flavio&apos;s suggestion to &apos;rewrite the znode once we release 4.3.0&apos; ?&lt;/p&gt;</comment>
                            <comment id="13990735" author="ikelly" created="Tue, 6 May 2014 16:19:17 +0100"  >&lt;p&gt;upgrading the bookie cookie should be a manual operation initiated by the admin. if we do it automatically, we create a version trapdoor whereby if you upgrade to 4.3.0, you can never roll back to 4.2.x if you find errors. The tool to update the cookie should be run from the bookie (the on disk cookie needs to be updated also). The tool should ensure that autoreplication is disabled, ensure that the bookie is down, then update the cookie on disk and in the metadata store, then update all ledgers which contain the bookie to have the new version.&lt;/p&gt;

&lt;p&gt;@rakesh, can old clients read from ledgers with hostname based replicas?&lt;/p&gt;</comment>
                            <comment id="13990842" author="rakeshr" created="Tue, 6 May 2014 18:17:59 +0100"  >&lt;blockquote&gt;&lt;p&gt;can old clients read from ledgers with hostname based replicas?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If the client has proper /etc/hosts mappings, he will be able to create InetSocketAddress with the hostname and can connect to server. Am I correct ?. Anyway I&apos;ll include one testcase.&lt;/p&gt;</comment>
                            <comment id="13990972" author="rakeshr" created="Tue, 6 May 2014 19:44:59 +0100"  >&lt;p&gt;I could see one case, where the &quot;BookieMetadataFormatVersion&quot; will be incremented inorder to change IP to hostname. Now old clients may fail in parsing the metadata LedgerMetadata#parseConfig (). Here to avoid parsing err before running the tool, admin should ensure all the clients also be upgraded to 4.3.0&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; If we can reach to an agreement like, all the meta changes will do only through admin tool, then will try push this JIRA in and will start focusing on the admin tool &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-634&quot; title=&quot;Provide admin tool to rename bookie identifier in ledger metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-634&quot;&gt;&lt;del&gt;BOOKKEEPER-634&lt;/del&gt;&lt;/a&gt;. Does that make sense to you ?&lt;/p&gt;</comment>
                            <comment id="13991552" author="hustlmsp" created="Wed, 7 May 2014 06:16:10 +0100"  >&lt;p&gt;wait, I don&apos;t understand here, why you need to bump &apos;BookieMetadataFormatVersion&apos;? InetSocketAddress works for both IP and hostname. &lt;/p&gt;</comment>
                            <comment id="13991681" author="ikelly" created="Wed, 7 May 2014 10:13:14 +0100"  >&lt;p&gt;yes. what sijie said. if there&apos;s no problem with the new hostname format and inetsockaddress, then you dont need to bump the format. forcing an upgrade on all clients can be difficult if the clients are in multiple departments, etc. we should avoid if possible.&lt;/p&gt;</comment>
                            <comment id="13991884" author="rakeshr" created="Wed, 7 May 2014 15:57:33 +0100"  >&lt;p&gt;Cool, it gives some more confidence to move ahead &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;Is that a +1 for the trunk patch ?&lt;/p&gt;</comment>
                            <comment id="13992987" author="ikelly" created="Thu, 8 May 2014 19:21:48 +0100"  >&lt;p&gt;+1 from me. Will commit tomorrow if there are no objections and noone else commits it first. Do you intend for this to go into 4.2.3?&lt;/p&gt;</comment>
                            <comment id="13993544" author="ikelly" created="Fri, 9 May 2014 13:05:44 +0100"  >&lt;p&gt;Committed r1593518 to trunk. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; Do you want this in 4.2.3, or should i resolve?&lt;/p&gt;</comment>
                            <comment id="13993557" author="rakeshr" created="Fri, 9 May 2014 13:34:54 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt;, IMHO we can push this improvement only to 4.3 branch and resolve this JIRA now. If anyone feels to add into 4.2, we can backport it after the admin tool to support IP change part. Does it make sense ?. Also one more, this has been implemented on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-644&quot; title=&quot;Provide a bookie address wrapper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-644&quot;&gt;&lt;del&gt;BOOKKEEPER-644&lt;/del&gt;&lt;/a&gt;, which is not there in 4.2 branch.&lt;/p&gt;</comment>
                            <comment id="13993845" author="hudson" created="Fri, 9 May 2014 20:18:53 +0100"  >&lt;p&gt;SUCCESS: Integrated in bookkeeper-trunk #640 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/640/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/640/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-629&quot; title=&quot;Support hostname based ledger metadata to help users to change IP with existing installation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-629&quot;&gt;&lt;del&gt;BOOKKEEPER-629&lt;/del&gt;&lt;/a&gt;: Support hostname based ledger metadata to help users to change IP with existing installation (rakeshr via ivank) (ivank: rev 1593518)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/conf/bk_server.conf&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/CookieTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/BookieAutoRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/TestBackwardCompat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13994247" author="fpj" created="Sat, 10 May 2014 16:46:03 +0100"  >&lt;p&gt;I suggest we don&#180;t commit anything else until the asf mail server stabilizes.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, ok with focusing on the admin tool aka &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-634&quot; title=&quot;Provide admin tool to rename bookie identifier in ledger metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-634&quot;&gt;&lt;del&gt;BOOKKEEPER-634&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13994856" author="hustlmsp" created="Mon, 12 May 2014 07:31:34 +0100"  >&lt;p&gt;resolve this issue as this is a new feature not a bug fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12656501">BOOKKEEPER-644</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12588994" name="1-BOOKKEEPER-629.patch" size="29117" author="rakeshr" created="Fri, 21 Jun 2013 04:30:48 +0100"/>
                            <attachment id="12628005" name="10-BOOKKEEPER-629.patch" size="26020" author="rakeshr" created="Mon, 10 Feb 2014 17:16:39 +0000"/>
                            <attachment id="12633690" name="11-BOOKKEEPER-629.patch" size="27842" author="rakeshr" created="Mon, 10 Mar 2014 13:42:33 +0000"/>
                            <attachment id="12589620" name="2-BOOKKEEPER-629.patch" size="19378" author="rakeshr" created="Tue, 25 Jun 2013 17:18:28 +0100"/>
                            <attachment id="12589621" name="3-BOOKKEEPER-629.patch" size="19561" author="rakeshr" created="Tue, 25 Jun 2013 17:24:11 +0100"/>
                            <attachment id="12589638" name="4-BOOKKEEPER-629.patch" size="19545" author="rakeshr" created="Tue, 25 Jun 2013 19:33:56 +0100"/>
                            <attachment id="12590165" name="5-BOOKKEEPER-629.patch" size="41257" author="rakeshr" created="Sat, 29 Jun 2013 14:40:25 +0100"/>
                            <attachment id="12590224" name="6-BOOKKEEPER-629.patch" size="49619" author="rakeshr" created="Mon, 1 Jul 2013 05:23:10 +0100"/>
                            <attachment id="12590615" name="7-BOOKKEEPER-629.patch" size="50270" author="rakeshr" created="Wed, 3 Jul 2013 11:26:50 +0100"/>
                            <attachment id="12627411" name="9-BOOKKEEPER-629.patch" size="26031" author="rakeshr" created="Thu, 6 Feb 2014 20:11:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jun 2013 06:12:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzfeef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>