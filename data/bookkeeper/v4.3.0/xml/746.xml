<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:27:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-746/BOOKKEEPER-746.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-746] 5 new shell commands. List ledgers, list metadata, list underreplicated, show auditor and simpletest</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-746</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;names are self explanatory. &lt;br/&gt;
1. list all the ledgers in the cluster&lt;br/&gt;
2. print the metadata for a ledger&lt;br/&gt;
3. list underreplicated ledgers&lt;br/&gt;
4. show the address of the auditor&lt;br/&gt;
5. simple test: create ledger, write to ledger, close ledger&lt;/p&gt;</description>
                <environment></environment>
        <key id="12706649">BOOKKEEPER-746</key>
            <summary>5 new shell commands. List ledgers, list metadata, list underreplicated, show auditor and simpletest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Apr 2014 16:29:38 +0100</created>
                <updated>Tue, 3 Jun 2014 12:56:58 +0100</updated>
                            <resolved>Tue, 3 Jun 2014 12:56:58 +0100</resolved>
                                                    <fixVersion>4.3.0</fixVersion>
                    <fixVersion>4.2.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13960205" author="hadoopqa" created="Fri, 4 Apr 2014 19:04:28 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-746&quot; title=&quot;5 new shell commands. List ledgers, list metadata, list underreplicated, show auditor and simpletest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-746&quot;&gt;&lt;del&gt;BOOKKEEPER-746&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12638717/0007-5-new-shell-commands.-List-ledgers-list-me.branch4.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0007-5-new-shell-commands.-List-ledgers-list-me.branch4.2.patch&lt;/a&gt; downloaded at Fri Apr  4 18:02:49 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; Patch failed to apply to head of branch&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;</comment>
                            <comment id="13984363" author="rakeshr" created="Tue, 29 Apr 2014 15:59:20 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt; for the useful commands. I&apos;ve few comments, please go through below:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Javadoc is missing
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Iterator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; listLedgersToRereplicate();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Not required to check the children of &apos;urL&apos;. Can we have like:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;urL&quot;&lt;/span&gt;)) {
    curBatch.add(getLedgerId(c));
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; child = parent + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + c;
    queue.add(child);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;For &quot;listledgers&quot;&lt;br/&gt;
a) small typo in getUsage(): &quot;listsledger&quot; -&amp;gt; &quot;listledgers&quot;&lt;br/&gt;
b) I&apos;ve checked other commands, they are adding options to the usage, can we have like ?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getUsage() {
+            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;listledgers  [-meta]&quot;&lt;/span&gt;;
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;small typo: &quot;(this may take along time)&quot; -&amp;gt; (this may take a long time)&lt;/li&gt;
	&lt;li&gt;ListLedgersCmd - I haven&apos;t executed, but when looking at md.serialize(), it doesn&apos;t have ledgerid. IMHO we can print ledgerid and its metadata. Otw it may mess up things no ?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(md.serialize(), UTF_8));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Can we make the args optional for simpletest. Now its true
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            lOpts.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;e&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ensemble&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Ensemble size (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 3)&quot;&lt;/span&gt;);
+            lOpts.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;w&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;writeQuorum&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Write quorum size (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 2)&quot;&lt;/span&gt;);
+            lOpts.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ackQuorum&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Ack quorum size (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 2)&quot;&lt;/span&gt;);
+            lOpts.addOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;n&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;numEntries&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Entries to write (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 1000)&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;getUsage() of simpletest doesn&apos;t have options. It would be good to add options too.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;-Rakesh&lt;/p&gt;</comment>
                            <comment id="14015486" author="ikelly" created="Mon, 2 Jun 2014 16:57:31 +0100"  >&lt;p&gt;All comments addressed. I refactored printShellUsage, to avoid having to duplicate text also.&lt;/p&gt;</comment>
                            <comment id="14015488" author="ikelly" created="Mon, 2 Jun 2014 16:58:13 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; Could you take another look. This is the final jira for 4.2.3, so I should be able to start cutting a release after.&lt;/p&gt;</comment>
                            <comment id="14016223" author="rakeshr" created="Tue, 3 Jun 2014 06:12:40 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt;, latest patch looks fine . One last comment, previously I failed to add this.&lt;/p&gt;

&lt;p&gt;In SimpleTestCmd:&lt;br/&gt;
Please print the created ledger details like - ledger id,  the total number of entries written et. It may be helpful to the users.&lt;/p&gt;</comment>
                            <comment id="14016321" author="ikelly" created="Tue, 3 Jun 2014 09:36:25 +0100"  >&lt;p&gt;Addressed comments. I also added a printout of entries written every 1 second, and removed some duplicate imports.&lt;/p&gt;</comment>
                            <comment id="14016324" author="rakeshr" created="Tue, 3 Jun 2014 09:47:01 +0100"  >&lt;p&gt;+1 looks fine!&lt;/p&gt;</comment>
                            <comment id="14016343" author="hadoopqa" created="Tue, 3 Jun 2014 10:18:13 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-746&quot; title=&quot;5 new shell commands. List ledgers, list metadata, list underreplicated, show auditor and simpletest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-746&quot;&gt;&lt;del&gt;BOOKKEEPER-746&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12648099/0001-5-new-shell-commands.-List-ledgers-list-metadata-lis.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-5-new-shell-commands.-List-ledgers-list-metadata-lis.patch&lt;/a&gt; downloaded at Tue Jun  3 08:41:48 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch does not add/modify any testcase&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;WARNING&lt;/font&gt;: the current HEAD has 23 Javadoc warning(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 920&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;.   There is at least one warning, please check&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/649/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/649/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14016374" author="ikelly" created="Tue, 3 Jun 2014 11:36:11 +0100"  >&lt;p&gt;Committed r1599470 to trunk. Thanks for reviewing Rakesh.&lt;/p&gt;</comment>
                            <comment id="14016412" author="hudson" created="Tue, 3 Jun 2014 12:54:16 +0100"  >&lt;p&gt;SUCCESS: Integrated in bookkeeper-trunk #657 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/657/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/657/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-746&quot; title=&quot;5 new shell commands. List ledgers, list metadata, list underreplicated, show auditor and simpletest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-746&quot;&gt;&lt;del&gt;BOOKKEEPER-746&lt;/del&gt;&lt;/a&gt;: 5 new shell commands. List ledgers, list metadata, list underreplicated, show auditor and simpletest (ivank) (ivank: rev 1599470)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14016413" author="ikelly" created="Tue, 3 Jun 2014 12:56:52 +0100"  >&lt;p&gt;Committed revision 1599492 to branch-4.2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12706648">BOOKKEEPER-745</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12648099" name="0001-5-new-shell-commands.-List-ledgers-list-metadata-lis.patch" size="27593" author="ikelly" created="Tue, 3 Jun 2014 09:36:25 +0100"/>
                            <attachment id="12647919" name="0001-5-new-shell-commands.-List-ledgers-list-metadata-lis.patch" size="26556" author="ikelly" created="Mon, 2 Jun 2014 16:57:31 +0100"/>
                            <attachment id="12638716" name="0005-5-new-shell-commands.-List-ledgers-list-metada.trunk.patch" size="20829" author="ikelly" created="Fri, 4 Apr 2014 17:59:01 +0100"/>
                            <attachment id="12638717" name="0007-5-new-shell-commands.-List-ledgers-list-me.branch4.2.patch" size="20231" author="ikelly" created="Fri, 4 Apr 2014 17:59:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Apr 2014 18:04:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzo6bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>