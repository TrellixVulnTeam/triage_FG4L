<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:28:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-409/BOOKKEEPER-409.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-409] Integration Test - Perform bookie rereplication cycle by Auditor-RW processes</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-409</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;The idea is to perform integration testing of entire re-replication module : Auditor-RW processes&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608444">BOOKKEEPER-409</key>
            <summary>Integration Test - Perform bookie rereplication cycle by Auditor-RW processes</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12553925">BOOKKEEPER-237</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshr">Rakesh R</assignee>
                                    <reporter username="rakeshr">Rakesh R</reporter>
                        <labels>
                            <label>test</label>
                    </labels>
                <created>Thu, 20 Sep 2012 14:16:50 +0100</created>
                <updated>Thu, 2 May 2013 03:29:55 +0100</updated>
                            <resolved>Thu, 3 Jan 2013 10:06:48 +0000</resolved>
                                    <version>4.2.0</version>
                                    <fixVersion>4.2.0</fixVersion>
                                    <component>bookkeeper-auto-recovery</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13459589" author="rakeshr" created="Thu, 20 Sep 2012 14:26:22 +0100"  >&lt;p&gt;I&apos;ve tried to verifiy the complete functionality of rereplication module. Please look at the added tests and would like to know suggestions.&lt;/p&gt;

&lt;p&gt;&quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-319&quot; title=&quot;Manage auditing and replication processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-319&quot;&gt;&lt;del&gt;BOOKKEEPER-319&lt;/del&gt;&lt;/a&gt;:Manage auditing and replication processes&quot; should go first before this, as I tested through the AuditPeer interface.&lt;/p&gt;</comment>
                            <comment id="13471379" author="rakeshr" created="Mon, 8 Oct 2012 03:45:09 +0100"  >&lt;p&gt;Cancelling the patch as it needs to rebase in latest trunk.&lt;/p&gt;</comment>
                            <comment id="13481021" author="rakeshr" created="Sun, 21 Oct 2012 20:02:31 +0100"  >&lt;p&gt;Attached latest patch, could you please review the test cases.&lt;/p&gt;</comment>
                            <comment id="13481031" author="umamaheswararao" created="Sun, 21 Oct 2012 20:24:29 +0100"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void startReplicationService() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; CompatibilityException,
+            KeeperException, InterruptedException, IOException,
+            UnavailableException {
+        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index = -1;
+        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (BookieServer bserver : bs) {
+            startAutoRecovery(bserver, bsConfs.get(++index));
+        }
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;One quick comment: how about moving such functionality to BookKeeperClusterTestCase, as we are starting the BK cluster and ZK clusters from this base testcase and all others will use it. But here Auditor should be started on demand. May we can have another ctor or just expose the API to start by just passing the BK index.&lt;/p&gt;

&lt;p&gt;I did not go through the patch completely. I can post full comments by tomorrow if any. Thanks Rakesh for the patch.&lt;/p&gt;</comment>
                            <comment id="13492388" author="ikelly" created="Wed, 7 Nov 2012 14:47:11 +0000"  >&lt;p&gt;Sorry for taking so long to look at this. I have a few comments on the patch.&lt;/p&gt;

&lt;p&gt;Theres  no need for numberOfLedgers, numberOfEntries, listOfLedgerHandle, listOfLedgerReplica to be global in the class. whats more, declaring them global makes it harder to follow the flow of the tests.&lt;/p&gt;

&lt;p&gt;I agree with Uma about BookKeeperClusterBaseTest handling the starting of underreplication. Perhaps, add two methods, &lt;br/&gt;
void setAutoRecoveryEnabled(boolean) &amp;amp; boolean isAutoRecoveryEnabled()&lt;br/&gt;
BookieAutoRecoveryTest should call setAutoRecoveryEnabled(true) &lt;br/&gt;
When starting a bookie, we should start autorecovery if isAutoRecoveryEnabled() returns true. &lt;/p&gt;

&lt;p&gt;Rename createLedgerAndAddEntries -&amp;gt; createLedgersAndAddEntries. It should take two parameters, numLedgers &amp;amp; entriesPerLedger. Calling method should use the returned list rather than using the global list.&lt;/p&gt;

&lt;p&gt;You should retrieve the bookie to kill from the metadata of the ledger, to ensure the bookie killed is actually used.&lt;/p&gt;

&lt;p&gt;rename watchingLedgerNode -&amp;gt; watchUrLedgerNode&lt;/p&gt;

&lt;p&gt;You should use  ZkLedgerUnderreplicationManager#getUrLedgerZnode(long ledgerId); rather than copy-pasting the code&lt;/p&gt;</comment>
                            <comment id="13499054" author="umamaheswararao" created="Fri, 16 Nov 2012 20:02:35 +0000"  >&lt;p&gt;Cancelled the patch to address the comments&lt;/p&gt;</comment>
                            <comment id="13532403" author="ikelly" created="Fri, 14 Dec 2012 15:45:50 +0000"  >&lt;p&gt;Any progress on this? I can pick it up if needed&lt;/p&gt;</comment>
                            <comment id="13538268" author="fpj" created="Fri, 21 Dec 2012 18:17:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=umamaheswararao&quot; class=&quot;user-hover&quot; rel=&quot;umamaheswararao&quot;&gt;Uma Maheswara Rao G&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; Guys, Could you let us know please if you&apos;ll be able to provide a new patch?&lt;/p&gt;</comment>
                            <comment id="13539188" author="umamaheswararao" created="Mon, 24 Dec 2012 05:03:55 +0000"  >&lt;p&gt;oh, sorry for the late reply on this. Did not check the mails on this weekend &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I will update a patch today. &lt;br/&gt;
BTW, FYI....Rakesh is on leave.&lt;/p&gt;</comment>
                            <comment id="13539428" author="rakeshr" created="Tue, 25 Dec 2012 19:13:52 +0000"  >&lt;p&gt;Hi All, Sorry for the delay, I&apos;m on leave for few weeks. &lt;/p&gt;

&lt;p&gt;Thanks Uma and Ivan, could you please look at the reworked patch.&lt;/p&gt;</comment>
                            <comment id="13539430" author="hadoopqa" created="Tue, 25 Dec 2012 19:51:29 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12562358/BOOKKEEPER-409-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-409-2.patch&lt;/a&gt; downloaded at Tue Dec 25 19:22:07 UTC 2012&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 17 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 789&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/169/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/169/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13539453" author="umamaheswararao" created="Wed, 26 Dec 2012 02:24:16 +0000"  >&lt;p&gt;Patch looks mostly good. I have some minor stuff to address.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I think we should add javadoc for BookKeeperClusterBaseTest.&lt;/li&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void killBookieAndRecoveryService(
+            InetSocketAddress replicaToKillAddr) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
+        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Killing Bookie :&quot;&lt;/span&gt; + replicaToKillAddr);
+        killBookie(replicaToKillAddr);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think this extra delegation may not be required right, because Bookie stop it self will take care of killing recovery service right as startBookie is starting that service?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13539457" author="umamaheswararao" created="Wed, 26 Dec 2012 02:54:40 +0000"  >&lt;p&gt;Also please take care of the Jenkins comment:  -1 the patch contains 17 line(s) with trailing spaces&lt;/p&gt;</comment>
                            <comment id="13541049" author="rakeshr" created="Sun, 30 Dec 2012 07:07:06 +0000"  >&lt;p&gt;Thanks Uma for your time and review. Updated latest patch.&lt;/p&gt;</comment>
                            <comment id="13541051" author="hadoopqa" created="Sun, 30 Dec 2012 07:41:30 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12562705/BOOKKEEPER-409-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-409-3.patch&lt;/a&gt; downloaded at Sun Dec 30 07:12:08 UTC 2012&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 781&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/180/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/180/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13541092" author="umamaheswararao" created="Sun, 30 Dec 2012 15:23:54 +0000"  >&lt;p&gt;Still I did not see javadoc additions in BookKeeperClusterTestCase. forgot to update?&lt;/p&gt;</comment>
                            <comment id="13541113" author="rakeshr" created="Sun, 30 Dec 2012 17:31:21 +0000"  >&lt;p&gt;oops! Attached latest patch with javadocs.&lt;/p&gt;</comment>
                            <comment id="13541123" author="hadoopqa" created="Sun, 30 Dec 2012 18:09:28 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12562723/BOOKKEEPER-409-4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-409-4.patch&lt;/a&gt; downloaded at Sun Dec 30 17:40:03 UTC 2012&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 2 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 781&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/181/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/181/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13541135" author="hadoopqa" created="Sun, 30 Dec 2012 19:01:33 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12562729/BOOKKEEPER-409-5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-409-5.patch&lt;/a&gt; downloaded at Sun Dec 30 18:32:06 UTC 2012&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 781&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/182/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/182/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13542081" author="umamaheswararao" created="Wed, 2 Jan 2013 10:55:44 +0000"  >&lt;p&gt;Patch looks good to me. +1&lt;br/&gt;
Ivan, could you please take a look and if you are ok with this, please push this in.&lt;/p&gt;</comment>
                            <comment id="13542205" author="ikelly" created="Wed, 2 Jan 2013 16:10:51 +0000"  >&lt;p&gt;When I ran the tests, it gave me a race, which was stopping netty from shutting down. Basically replication worker was killing the bookkeeper client before killing the thread, so the client was being used. I fixed the race in replication worker in the new patch. I&apos;ll create another jira for fixing the root issue in 4.3.0. &lt;/p&gt;

&lt;p&gt;Also, I changed to used MultiLedgerManager not MultiLedgerManagerMultiDigest. The digest really shouldn&apos;t have an affect on this, and running both makes the test last twice as long. &lt;/p&gt;

&lt;p&gt;Otherwise it looks good, so when I get a +1 on the ReplicationWorker fix, ill commit.&lt;/p&gt;</comment>
                            <comment id="13542208" author="hadoopqa" created="Wed, 2 Jan 2013 16:13:56 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12562918/BOOKKEEPER-409.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-409.diff&lt;/a&gt; downloaded at Wed Jan  2 16:11:13 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; Patch failed to apply to head of branch&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;</comment>
                            <comment id="13542219" author="ikelly" created="Wed, 2 Jan 2013 16:31:52 +0000"  >&lt;p&gt;New patch with --no-prefix&lt;/p&gt;</comment>
                            <comment id="13542242" author="hadoopqa" created="Wed, 2 Jan 2013 17:19:50 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12562921/BOOKKEEPER-409.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-409.diff&lt;/a&gt; downloaded at Wed Jan  2 16:50:49 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 769&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/186/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/186/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13542249" author="rakeshr" created="Wed, 2 Jan 2013 17:37:12 +0000"  >&lt;p&gt;Thanks Uma and Ivan. &lt;/p&gt;

&lt;p&gt;@Ivan&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;When I ran the tests, it gave me a race, which was stopping netty from shutting down&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Its really good finding&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13542426" author="ikelly" created="Wed, 2 Jan 2013 21:25:50 +0000"  >&lt;p&gt;Is this ready to go then?&lt;/p&gt;</comment>
                            <comment id="13542710" author="umamaheswararao" created="Thu, 3 Jan 2013 04:45:03 +0000"  >&lt;p&gt;+1 for the change. Go and commit it. Thanks Ivan for the patch!&lt;/p&gt;</comment>
                            <comment id="13542830" author="ikelly" created="Thu, 3 Jan 2013 10:06:48 +0000"  >&lt;p&gt;Committed as r1428258. Thanks Rakesh.&lt;/p&gt;</comment>
                            <comment id="13542844" author="hudson" created="Thu, 3 Jan 2013 10:41:42 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk2 #25 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk2/25/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk2/25/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;: Integration Test - Perform bookie rereplication cycle by Auditor-RW processes (rakeshr via ivank) (Revision 1428258)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/BookieAutoRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13543891" author="hudson" created="Fri, 4 Jan 2013 13:58:20 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk2 #31 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk2/31/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk2/31/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-409&quot; title=&quot;Integration Test - Perform bookie rereplication cycle by Auditor-RW processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-409&quot;&gt;&lt;del&gt;BOOKKEEPER-409&lt;/del&gt;&lt;/a&gt;: Integration Test - Perform bookie rereplication cycle by Auditor-RW processes (rakeshr via ivank) (Revision 1428258)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/BookieAutoRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12595877">BOOKKEEPER-319</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12550198" name="BOOKKEEPER-409-1.patch" size="19613" author="rakeshr" created="Sun, 21 Oct 2012 20:02:31 +0100"/>
                            <attachment id="12562358" name="BOOKKEEPER-409-2.patch" size="24920" author="rakeshr" created="Tue, 25 Dec 2012 19:10:20 +0000"/>
                            <attachment id="12562705" name="BOOKKEEPER-409-3.patch" size="25184" author="rakeshr" created="Sun, 30 Dec 2012 07:03:17 +0000"/>
                            <attachment id="12562723" name="BOOKKEEPER-409-4.patch" size="30099" author="rakeshr" created="Sun, 30 Dec 2012 17:31:21 +0000"/>
                            <attachment id="12562729" name="BOOKKEEPER-409-5.patch" size="29970" author="rakeshr" created="Sun, 30 Dec 2012 18:24:54 +0000"/>
                            <attachment id="12562921" name="BOOKKEEPER-409.diff" size="32834" author="ikelly" created="Wed, 2 Jan 2013 16:31:52 +0000"/>
                            <attachment id="12562918" name="BOOKKEEPER-409.diff" size="32856" author="ikelly" created="Wed, 2 Jan 2013 16:10:51 +0000"/>
                            <attachment id="12545900" name="BOOKKEEPER-409.patch" size="19066" author="rakeshr" created="Thu, 20 Sep 2012 14:18:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 21 Oct 2012 19:24:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzs4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>