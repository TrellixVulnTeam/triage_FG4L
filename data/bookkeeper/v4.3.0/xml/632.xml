<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:31:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-632/BOOKKEEPER-632.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-632] AutoRecovery should consider read only bookies</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-632</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Autorecovery Auditor should consider the readonly bookies as Available Bookies  while publishing the under-replicated ledgers.&lt;/p&gt;

&lt;p&gt;Also AutoRecoveryDaemon should shutdown if the local bookie is readonly&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653903">BOOKKEEPER-632</key>
            <summary>AutoRecovery should consider read only bookies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vinayrpet">Vinayakumar B</assignee>
                                    <reporter username="vinayrpet">Vinayakumar B</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jun 2013 11:02:07 +0100</created>
                <updated>Wed, 21 Aug 2013 18:07:14 +0100</updated>
                            <resolved>Wed, 21 Aug 2013 14:55:26 +0100</resolved>
                                    <version>4.2.1</version>
                    <version>4.3.0</version>
                                    <fixVersion>4.2.2</fixVersion>
                    <fixVersion>4.3.0</fixVersion>
                                    <component>bookkeeper-auto-recovery</component>
                    <component>bookkeeper-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13692902" author="vinayrpet" created="Tue, 25 Jun 2013 11:06:41 +0100"  >&lt;p&gt;Attached the patch for the same.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="13692914" author="hadoopqa" created="Tue, 25 Jun 2013 11:37:58 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12589577/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Tue Jun 25 10:11:21 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 1 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 1 line(s) longer than 120 characters&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 856&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/382/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/382/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13693030" author="hadoopqa" created="Tue, 25 Jun 2013 14:37:46 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12589587/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Tue Jun 25 13:11:16 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch contains 1 line(s) with trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 856&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/384/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/384/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13693034" author="vinayrpet" created="Tue, 25 Jun 2013 14:44:53 +0100"  >&lt;blockquote&gt;&lt;p&gt;-1 the patch contains 1 line(s) with trailing spaces&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Patch is having one line with trailing spaces, which is added to remove from the code.&lt;/p&gt;</comment>
                            <comment id="13698005" author="ikelly" created="Tue, 2 Jul 2013 18:21:36 +0100"  >&lt;p&gt;The whitespace is actually in the comment for BookKeeperAdmin#getReadOnlyBookie. I&apos;ve actually added a tool to find this, &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-635&quot; title=&quot;jenkins build should highlight which lines of the patch cause raw analysis errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-635&quot;&gt;&lt;del&gt;BOOKKEEPER-635&lt;/del&gt;&lt;/a&gt;. It should make this easier to find in future.&lt;/p&gt;

&lt;p&gt;The patch adds a new public api to read the readonly bookies, then manually reads them in Auditor#getAvailableBookies(). It would be much better if this method read the bookies through BookKeeperAdmin&apos;s apis, so that if we change the format in future, we have less places to update.&lt;/p&gt;</comment>
                            <comment id="13699044" author="ikelly" created="Wed, 3 Jul 2013 15:55:03 +0100"  >&lt;p&gt;Cancelling until issue addressed.&lt;/p&gt;</comment>
                            <comment id="13718378" author="vinayrpet" created="Wed, 24 Jul 2013 14:54:35 +0100"  >&lt;p&gt;Attaching the patch for trail space removal.&lt;/p&gt;</comment>
                            <comment id="13718381" author="ikelly" created="Wed, 24 Jul 2013 14:59:16 +0100"  >&lt;p&gt;This doesn&apos;t address the other issue though. Auditor should use the public api to read the readonly bookies, rather than reading from zk directly.&lt;/p&gt;</comment>
                            <comment id="13718424" author="vinayrpet" created="Wed, 24 Jul 2013 15:39:17 +0100"  >&lt;blockquote&gt;&lt;p&gt;he patch adds a new public api to read the readonly bookies, then manually reads them in Auditor#getAvailableBookies(). It would be much better if this method read the bookies through BookKeeperAdmin&apos;s apis, so that if we change the format in future, we have less places to update.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree with your point Ivan, But the ways bookie addresses handled in Auditor and ReplicationWorker are different. In Auditor, bookie address is treated as just string, where as in RW its InetSocketAddress. BookKeeperAdmin#getReadOnlyBookie() will return collection of InetSocketAdress. So changes for this will be more and IMO that is out of scope of this Jira. &lt;/p&gt;

&lt;p&gt;Any thoughts..?&lt;/p&gt;</comment>
                            <comment id="13718433" author="ikelly" created="Wed, 24 Jul 2013 15:50:21 +0100"  >&lt;p&gt;InetSocketAddress can easily be converted to String with o.a.bookkeeper.util.StringUtils#addrToString. Reading directly from ZK is bad, because it&apos;s putting duplicate code in a number of places, which need to be updated if there&apos;s a change to the /ledgers/available format. For example, when /ledgers/available/readonly was added, this broke some bits of code that expected every znode under /ledgers/available to be a bookie. In fact, the code that this is fixing was guilty of this. Moving the handling of ZK to a central place prevents this situation occurring again in the future.&lt;/p&gt;</comment>
                            <comment id="13718455" author="hadoopqa" created="Wed, 24 Jul 2013 16:08:24 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12593939/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Wed Jul 24 14:41:21 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 865&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/431/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/431/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13718484" author="vinayrpet" created="Wed, 24 Jul 2013 16:33:45 +0100"  >&lt;p&gt;Thanks Ivan, I will have a try anyway. &lt;/p&gt;</comment>
                            <comment id="13718485" author="vinayrpet" created="Wed, 24 Jul 2013 16:35:13 +0100"  >&lt;p&gt;One more doubt, In Auditor#checkAllLedgers(), zookeeper, Bookkeeper clients are created and closed there itself. Is there any specific reason to create local to that method and close..? &lt;/p&gt;</comment>
                            <comment id="13718502" author="vinayrpet" created="Wed, 24 Jul 2013 16:49:04 +0100"  >&lt;p&gt;Attached the updated patch.&lt;br/&gt;
Used the BookKeeperAdmin apis&lt;/p&gt;</comment>
                            <comment id="13718541" author="ikelly" created="Wed, 24 Jul 2013 17:25:48 +0100"  >&lt;p&gt;Regarding, #checkAllLedgers(), I don&apos;t know. In any case, its out of scope for this. The new patch looks good. I&apos;ll run the tests over it, and submit.&lt;/p&gt;</comment>
                            <comment id="13718559" author="hadoopqa" created="Wed, 24 Jul 2013 17:48:41 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12593968/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Wed Jul 24 16:09:50 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 866&lt;br/&gt;
.    Tests failed: 9&lt;br/&gt;
.    Tests errors: 11&lt;/p&gt;

&lt;p&gt;.    The patch failed the following testcases:&lt;/p&gt;

&lt;p&gt;.      testSimpleLedger&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testRestartBookie&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testToggleLedgerReplication&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testSimpleLedger&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testRestartBookie&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testToggleLedgerReplication&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testSimpleLedger&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testRestartBookie&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;br/&gt;
.      testToggleLedgerReplication&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;(org.apache.bookkeeper.replication.AuditorLedgerCheckerTest)&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/432/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/432/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13719289" author="vinayrpet" created="Thu, 25 Jul 2013 07:24:11 +0100"  >&lt;p&gt;Fixed test failures.&lt;/p&gt;

&lt;p&gt;Previously I had missed watching available bookies.&lt;/p&gt;</comment>
                            <comment id="13719300" author="hustlmsp" created="Thu, 25 Jul 2013 07:36:01 +0100"  >&lt;p&gt;please add timeout option. I guessed we need to modify precommit hook to check &apos;@Test&apos; to ensure there is a timeout provided.&lt;/p&gt;</comment>
                            <comment id="13719307" author="vinayrpet" created="Thu, 25 Jul 2013 07:58:02 +0100"  >&lt;p&gt;Added timeout&lt;/p&gt;</comment>
                            <comment id="13719445" author="hadoopqa" created="Thu, 25 Jul 2013 10:44:46 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12594120/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Thu Jul 25 09:17:47 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 866&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/438/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/438/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13724087" author="vinayrpet" created="Tue, 30 Jul 2013 18:13:14 +0100"  >&lt;p&gt;Hi Ivan and Sijie, Please review the updated patch, all comments have been addressed.&lt;/p&gt;</comment>
                            <comment id="13731701" author="vinayrpet" created="Wed, 7 Aug 2013 07:35:19 +0100"  >&lt;p&gt;Patch for branch-4.2&lt;/p&gt;</comment>
                            <comment id="13731803" author="hadoopqa" created="Wed, 7 Aug 2013 10:15:18 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12596521/BOOKKEEPER-632-branch-4.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632-branch-4.2.patch&lt;/a&gt; downloaded at Wed Aug  7 09:13:23 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; Patch failed to apply to head of branch&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;</comment>
                            <comment id="13736493" author="hustlmsp" created="Mon, 12 Aug 2013 03:11:10 +0100"  >&lt;p&gt;timeout lgtm. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt; could you take a look at this, as you are involved in this thread.&lt;/p&gt;</comment>
                            <comment id="13737025" author="ikelly" created="Mon, 12 Aug 2013 17:52:16 +0100"  >&lt;p&gt;hey Vinay, really sorry about taking so long to get to this. Had a trip to the US last week, and previous weeks were eaten up preparing for it.&lt;/p&gt;

&lt;p&gt;Regarding the patch, we don&apos;t want to expose zookeeper apis in our public apis, and BookKeeperAdmin#getAvailableBookies() is a public api. It would be better to add a new API, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BookieWatcher#notifyBookiesChanged(BookiesListener listener);

&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; BookiesListener {
    void availableBookiesChanged();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way, BookKeeperAdmin isn&apos;t exposing anything new except for the #getReadOnlyBookies() api.&lt;/p&gt;</comment>
                            <comment id="13737819" author="vinayrpet" created="Tue, 13 Aug 2013 05:59:38 +0100"  >&lt;p&gt;Attaching the patch with changes as per Ivan&apos;s comments&lt;/p&gt;</comment>
                            <comment id="13737839" author="vinayrpet" created="Tue, 13 Aug 2013 06:14:55 +0100"  >&lt;p&gt;patch for branch 4.2 as well&lt;/p&gt;</comment>
                            <comment id="13737849" author="hadoopqa" created="Tue, 13 Aug 2013 06:41:36 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12597655/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Tue Aug 13 05:14:25 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 870&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/458/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/458/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13737852" author="hadoopqa" created="Tue, 13 Aug 2013 06:43:36 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12597656/BOOKKEEPER-632-branch-4.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632-branch-4.2.patch&lt;/a&gt; downloaded at Tue Aug 13 05:41:45 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; Patch failed to apply to head of branch&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;</comment>
                            <comment id="13738312" author="ikelly" created="Tue, 13 Aug 2013 16:00:43 +0100"  >&lt;p&gt;The api is clearer if waiting for notification is separated from the reading. I&apos;ve attached a patch that does this.&lt;/p&gt;

&lt;p&gt;Also, auditor shouldn&apos;t call #register on a passed in ZK object. This overwrites the previous watcher, which could lead to unpredictable behaviour. In any case, Auditor shouldn&apos;t watch for expired. It&apos;s already watched for by the watcher created in AutoRecoveryMain.&lt;/p&gt;</comment>
                            <comment id="13738336" author="vinayrpet" created="Tue, 13 Aug 2013 16:11:49 +0100"  >&lt;p&gt;patch looks good.&lt;br/&gt;
Only one doubt. why we need &lt;tt&gt;bkc.bookieWatcher.readBookiesBlocking();&lt;/tt&gt; as this would have been called in BookKeeper constructor. &lt;/p&gt;
</comment>
                            <comment id="13738338" author="vinayrpet" created="Tue, 13 Aug 2013 16:13:55 +0100"  >&lt;p&gt;one more.. Patch misses BookiesListener&lt;/p&gt;</comment>
                            <comment id="13738345" author="vinayrpet" created="Tue, 13 Aug 2013 16:17:20 +0100"  >&lt;p&gt;Posting the updated patch, on top of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt; Patch&lt;/p&gt;</comment>
                            <comment id="13738357" author="ikelly" created="Tue, 13 Aug 2013 16:25:44 +0100"  >&lt;p&gt;because the bookkeeper client is reused, and the readonly bookies may have changed, but the watcher may not have been triggered yet. It&apos;s really just to ensure we have the freshest list.&lt;/p&gt;</comment>
                            <comment id="13738380" author="vinayrpet" created="Tue, 13 Aug 2013 16:41:56 +0100"  >&lt;p&gt;Since we are registering for the changes, &lt;tt&gt;bkc.bookieWatcher.readBookiesBlocking()&lt;/tt&gt; may not be required.&lt;/p&gt;</comment>
                            <comment id="13738393" author="hadoopqa" created="Tue, 13 Aug 2013 16:50:14 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12597736/BOOKKEEPER-632.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-632.patch&lt;/a&gt; downloaded at Tue Aug 13 15:22:56 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 876&lt;br/&gt;
.    Tests failed: 1&lt;br/&gt;
.    Tests errors: 0&lt;/p&gt;

&lt;p&gt;.    The patch failed the following testcases:&lt;/p&gt;

&lt;p&gt;.      testAuditorZKSessionLoss(org.apache.bookkeeper.replication.AuditorBookieTest)&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/461/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/461/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13739306" author="vinayrpet" created="Wed, 14 Aug 2013 07:57:14 +0100"  > &lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;testAuditorZKSessionLoss(org.apache.bookkeeper.replication.AuditorBookieTest)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Seems This failure is unrelated&lt;/p&gt;</comment>
                            <comment id="13745069" author="ikelly" created="Tue, 20 Aug 2013 16:43:36 +0100"  >&lt;p&gt;Failure repros for me. There&apos;s something broken.&lt;/p&gt;</comment>
                            <comment id="13745110" author="ikelly" created="Tue, 20 Aug 2013 17:44:03 +0100"  >&lt;p&gt;Fixed the problem. The ZK expire test was in the wrong place after the change.&lt;/p&gt;</comment>
                            <comment id="13745539" author="hadoopqa" created="Tue, 20 Aug 2013 23:26:50 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12598978/0001-BOOKKEEPER-632-AutoRecovery-should-consider-read-onl.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-BOOKKEEPER-632-AutoRecovery-should-consider-read-onl.patch&lt;/a&gt; downloaded at Tue Aug 20 21:59:40 UTC 2013&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 5 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 877&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/466/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/466/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13745766" author="vinayrpet" created="Wed, 21 Aug 2013 05:07:07 +0100"  >&lt;p&gt;Patch looks good Ivan, +1.&lt;/p&gt;</comment>
                            <comment id="13745951" author="ikelly" created="Wed, 21 Aug 2013 12:19:57 +0100"  >&lt;p&gt;Committed r1516139 to trunk.&lt;/p&gt;</comment>
                            <comment id="13745975" author="hudson" created="Wed, 21 Aug 2013 12:57:12 +0100"  >&lt;p&gt;SUCCESS: Integrated in bookkeeper-trunk #332 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/332/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/332/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-632&quot; title=&quot;AutoRecovery should consider read only bookies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-632&quot;&gt;&lt;del&gt;BOOKKEEPER-632&lt;/del&gt;&lt;/a&gt;: AutoRecovery should consider read only bookies (vinay via ivank) (ivank: rev 1516139)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcher.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookiesListener.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorElector.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/AuditorBookieTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/AuditorLedgerCheckerTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/AutoRecoveryMainTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/TestReplicationWorker.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/ZooKeeperUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13746056" author="ikelly" created="Wed, 21 Aug 2013 14:55:26 +0100"  >&lt;p&gt;Committed 1516162 to branch-4.2. Some manual merging required. Final patch attached. Thanks for working on this Vinay.&lt;/p&gt;</comment>
                            <comment id="13746573" author="vinayrpet" created="Wed, 21 Aug 2013 18:07:14 +0100"  >&lt;p&gt;Thanks Ivan.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12599193" name="0001-BOOKKEEPER-632-42.patch" size="25917" author="ikelly" created="Wed, 21 Aug 2013 14:55:52 +0100"/>
                            <attachment id="12598978" name="0001-BOOKKEEPER-632-AutoRecovery-should-consider-read-onl.patch" size="25804" author="ikelly" created="Tue, 20 Aug 2013 17:44:03 +0100"/>
                            <attachment id="12597733" name="0001-BOOKKEEPER-632-AutoRecovery-should-consider-read-onl.patch" size="17428" author="ikelly" created="Tue, 13 Aug 2013 15:55:25 +0100"/>
                            <attachment id="12597732" name="0001-BOOKKEEPER-632-AutoRecovery-should-consider-read-onl.patch" size="17428" author="ikelly" created="Tue, 13 Aug 2013 15:54:35 +0100"/>
                            <attachment id="12597656" name="BOOKKEEPER-632-branch-4.2.patch" size="14648" author="vinayrpet" created="Tue, 13 Aug 2013 06:14:55 +0100"/>
                            <attachment id="12596521" name="BOOKKEEPER-632-branch-4.2.patch" size="11544" author="vinayrpet" created="Wed, 7 Aug 2013 07:35:19 +0100"/>
                            <attachment id="12597736" name="BOOKKEEPER-632.patch" size="16738" author="vinayrpet" created="Tue, 13 Aug 2013 16:17:20 +0100"/>
                            <attachment id="12597655" name="BOOKKEEPER-632.patch" size="14455" author="vinayrpet" created="Tue, 13 Aug 2013 06:03:12 +0100"/>
                            <attachment id="12594120" name="BOOKKEEPER-632.patch" size="11327" author="vinayrpet" created="Thu, 25 Jul 2013 07:58:02 +0100"/>
                            <attachment id="12594112" name="BOOKKEEPER-632.patch" size="11376" author="vinayrpet" created="Thu, 25 Jul 2013 07:24:11 +0100"/>
                            <attachment id="12593968" name="BOOKKEEPER-632.patch" size="9372" author="vinayrpet" created="Wed, 24 Jul 2013 16:49:04 +0100"/>
                            <attachment id="12593939" name="BOOKKEEPER-632.patch" size="8017" author="vinayrpet" created="Wed, 24 Jul 2013 14:54:35 +0100"/>
                            <attachment id="12589587" name="BOOKKEEPER-632.patch" size="8018" author="vinayrpet" created="Tue, 25 Jun 2013 12:04:15 +0100"/>
                            <attachment id="12589577" name="BOOKKEEPER-632.patch" size="8028" author="vinayrpet" created="Tue, 25 Jun 2013 11:11:02 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Jun 2013 10:37:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzfhnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>