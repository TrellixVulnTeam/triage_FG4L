<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:27:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-145/BOOKKEEPER-145.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-145] Put notice and license file for distributed binaries in SVN</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-145</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;During the 4.0.0 I manually put these in the binary tarballs. This is awkward though. It&apos;s easier just to have them in the source tree.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535986">BOOKKEEPER-145</key>
            <summary>Put notice and license file for distributed binaries in SVN</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Dec 2011 10:52:38 +0000</created>
                <updated>Mon, 22 Oct 2012 15:50:14 +0100</updated>
                            <resolved>Tue, 15 May 2012 11:06:38 +0100</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13198918" author="fpj" created="Thu, 2 Feb 2012 16:28:32 +0000"  >&lt;p&gt;+1 for me, but I think it would be a good idea to have someone else lik Pat having a look at this.&lt;/p&gt;</comment>
                            <comment id="13208603" author="phunt" created="Wed, 15 Feb 2012 17:35:55 +0000"  >&lt;p&gt;You don&apos;t want to do this. At least not like this patch.&lt;/p&gt;

&lt;p&gt;I&apos;m assuming you will have 1 source artifact plus 0 or more binary artifacts. You&apos;ll have the same issue, but in reverse - you don&apos;t want your source artifact to have a notice/license for things that are not included. On the other hand you do want your binary license/notice to include this.&lt;/p&gt;

&lt;p&gt;two options I can see:&lt;/p&gt;

&lt;p&gt;1) see how whirr does this, &lt;a href=&quot;http://svn.apache.org/viewvc/whirr/trunk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/whirr/trunk/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it has two notice files, one for bin one for source. this should work fine as long as you have homogeneous binaries. Although I would think you want a stripped down NOTICE.TXT/license and NOTICE-bin.txt/LICENSE-bin.txt instead of src. Then you pull the right file into the archive during the packaging.&lt;/p&gt;

&lt;p&gt;2) generate the notice/license on the fly. &lt;/p&gt;

&lt;p&gt;see this:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-880&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OPENJPA-880&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;or this:&lt;br/&gt;
&lt;a href=&quot;https://wiki.jasig.org/display/LIC/maven-notice-plugin&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://wiki.jasig.org/display/LIC/maven-notice-plugin&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;(probably other options as well).&lt;/p&gt;

&lt;p&gt;I&apos;m not very familiar with 2, but I&apos;d suggest you go this route - it will make your life easier in the long run.&lt;/p&gt;</comment>
                            <comment id="13208611" author="ikelly" created="Wed, 15 Feb 2012 17:43:33 +0000"  >&lt;p&gt;I&apos;ll take a look at the notice plugin, it looks like a nicer solution. &lt;/p&gt;

&lt;p&gt;Regarding whirr, it only seems to have 1 LICENSE.txt file which has all the licenses. Is this correct? &lt;/p&gt;</comment>
                            <comment id="13254687" author="ikelly" created="Mon, 16 Apr 2012 14:44:16 +0100"  >&lt;p&gt;This new patch uses maven-notice-plugin to generate the NOTICE file, and contains a separate LICENSE file to be used for binary artifacts which include thirdparty code. I couldn&apos;t find a maven plugin to autogenerate the LICENSE file.&lt;/p&gt;

&lt;p&gt;I&apos;ve also rejigged the assembly to include the new NOTICE/LICENSE for binary packages. I&apos;ve disabled binary package generation for all but hedwig-server and bookkeeper-server.&lt;/p&gt;

&lt;p&gt;Run mvn clean package assembly:single to generate the packages now. The packages generated will be:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;./bookkeeper-server/target/bookkeeper-server-4.1.0-SNAPSHOT-bin.tar.gz&lt;/li&gt;
	&lt;li&gt;./hedwig-server/target/hedwig-server-4.1.0-SNAPSHOT-bin.tar.gz&lt;/li&gt;
	&lt;li&gt;./target/bookkeeper-4.1.0-SNAPSHOT-src.tar.gz&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13262124" author="phunt" created="Wed, 25 Apr 2012 22:25:41 +0100"  >&lt;p&gt;Oddly a number of files in the tar have the executable bit set:&lt;/p&gt;

&lt;p&gt;-rwxrwxr-x 1 phunt phunt  11358 2012-04-25 14:05 LICENSE.txt*&lt;br/&gt;
-rwxrwxr-x 1 phunt phunt    167 2012-04-25 14:05 NOTICE.txt*&lt;br/&gt;
-rwxrwxr-x 1 phunt phunt   3372 2012-04-25 14:05 README*&lt;br/&gt;
(not everything, you might take a look)&lt;/p&gt;

&lt;p&gt;I did a git checkout and then a build as you mentioned above.&lt;/p&gt;</comment>
                            <comment id="13262132" author="phunt" created="Wed, 25 Apr 2012 22:29:00 +0100"  >&lt;p&gt;after generating the .tar.gz files as suggested above the NOTICE files only seem to have the notices for bk itself, there is no other information. I looked at the files you mentioned in your most recent comment. (ivan).&lt;/p&gt;

&lt;p&gt;I&apos;d suggest that you don&apos;t include the .jar files for testing. Rather you&apos;re better off just including the jars you need to run the product (in the bin assemblies). For example I notice you&apos;re bundling junit (cat b license). No real need to do this afaict.&lt;/p&gt;</comment>
                            <comment id="13269492" author="ikelly" created="Mon, 7 May 2012 11:17:46 +0100"  >&lt;p&gt;I removed the maven-notice-plugin stuff in the end, as it has no option to exclude dependencies in the test scope. So now both bookkeeper-server and hedwig-server have their own LICENSE.bin.txt and NOTICE.bin.txt files, which get pulled in when generating the packages.&lt;/p&gt;

&lt;p&gt;The permissions problems and junit inclusion has also been fixed.&lt;/p&gt;</comment>
                            <comment id="13271872" author="phunt" created="Wed, 9 May 2012 23:12:35 +0100"  >&lt;p&gt;I regenerated the binaries and they look ok. Notice that according to the Apache License (for included works under AL) you should do the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      (d) If the Work includes a &quot;NOTICE&quot; text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You&apos;re ok in this case with your notice file, because if you look at the jars (e.g. commons lang or commons io) you&apos;ll see that they include NOTICE files. If this were not the case you&apos;d be required to replicate their notice file w/in your own.&lt;/p&gt;</comment>
                            <comment id="13272307" author="ikelly" created="Thu, 10 May 2012 14:06:59 +0100"  >&lt;p&gt;Thanks Pat. Afaik, maven will throw the NOTICE and LICENSE into the jars automatically if its an apache project, so this should be fine.&lt;/p&gt;</comment>
                            <comment id="13274536" author="hustlmsp" created="Mon, 14 May 2012 11:07:25 +0100"  >&lt;p&gt;after applying the patch, it works good for me. +1.&lt;/p&gt;</comment>
                            <comment id="13275095" author="fpj" created="Tue, 15 May 2012 01:42:43 +0100"  >&lt;p&gt;+1, looks good to me too. I have checked that:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;the binary packages work by running &quot;bin/bookkeeper localbookie&quot; on the bookkeeper-server binary and &quot;bin/hedwig server&quot; on the hedwig-server binary.&lt;/li&gt;
	&lt;li&gt;the source packages in bookkeeper-4.1.0-SNAPSHOT-src.tar.gz compile cleanly&lt;/li&gt;
	&lt;li&gt;the file permissions on all look ok&lt;/li&gt;
	&lt;li&gt;the license and notice file in the binary packages cover all the jars in the lib/ directory&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13275288" author="ikelly" created="Tue, 15 May 2012 11:06:40 +0100"  >&lt;p&gt;Committed as r1338616. Thanks for reviewing guys&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12525822" name="BOOKKEEPER-145.diff" size="64776" author="ikelly" created="Mon, 7 May 2012 11:17:46 +0100"/>
                            <attachment id="12522771" name="BOOKKEEPER-145.diff" size="61316" author="ikelly" created="Mon, 16 Apr 2012 14:44:15 +0100"/>
                            <attachment id="12508226" name="BOOKKEEPER-145.diff" size="17891" author="ikelly" created="Wed, 21 Dec 2011 10:56:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Feb 2012 16:28:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy4sb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61742</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>