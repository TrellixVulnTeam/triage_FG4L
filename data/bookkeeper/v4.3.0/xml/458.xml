<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:28:42 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-458/BOOKKEEPER-458.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-458] Annoy BKReadException error when changing ledger.</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-458</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Some annoy BKReadException are found when changing ledger.&lt;/p&gt;

&lt;p&gt;1) suppose Topic T has ledger L1, storing messages starting from 1 - 100.&lt;br/&gt;
2) T changed ledger to write entry to ledger L2.&lt;br/&gt;
3) Before the entry is added successfully, Subscribe s subscribed topic T. ReadAhead cache tried to schedule a ReadAhead request to scan (103, 104).&lt;br/&gt;
4) RangeScanOp in BookKeeperPersistentManager executed to read entry 2 &amp;amp; 3 from L2. but actually there was no entries in L2.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;BookKeeperPersistentManager.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// None of the old ledgers have &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; seq-id, we must use the
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// current ledger
&lt;/span&gt;                &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; endSeqId = topicInfo.currentLedgerRange.getStartSeqIdIncluded()
                                + topicInfo.lastEntryIdAckedInCurrentLedger;

                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (endSeqId &amp;lt; startSeqId) {
                    request.getCallback().scanFinished(request.ctx, ReasonForFinish.NO_MORE_MESSAGES);                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;The code in BookKeeperPersistentManager is supposed to not scan any messages whose seq id is larger than lastEntryIdAckedInCurrentLedger. But lastEntryIdAckedInCurrentLedger isn&apos;t reset when changing ledger. so when RangeScanOp is executed, last entry id acked in previous ledger was used which causing calculating an error seq id for the boundary checking in RangeScanOp.&lt;/p&gt;

&lt;p&gt;The fix would be quite easy to reset lastEntryIdAckedInCurrentLedger when changing ledger. But we need a test case to cover this case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614963">BOOKKEEPER-458</key>
            <summary>Annoy BKReadException error when changing ledger.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jiannan">Jiannan Wang</assignee>
                                    <reporter username="hustlmsp">Sijie Guo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Nov 2012 14:37:32 +0000</created>
                <updated>Wed, 13 Feb 2013 15:46:27 +0000</updated>
                            <resolved>Thu, 13 Dec 2012 11:52:50 +0000</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                    <component>hedwig-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13496990" author="jiannan" created="Wed, 14 Nov 2012 09:56:05 +0000"  >&lt;p&gt;Attach a patch to fix the problem. Also post it to review board:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/8053/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/8053/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Although the fix is very simple, it&apos;s difficult to design a test case. I think the reviewer can check it in mind easily &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13497322" author="ikelly" created="Wed, 14 Nov 2012 18:29:54 +0000"  >&lt;p&gt;This shouldn&apos;t be too hard to unit test. You need to construct a BookKeeperPersistenceManager (and unfortunately all the other things it needs), use #persistMessage a few times, and then call #changeLedger. A call to #scanMessages after that should trigger the bug.&lt;/p&gt;</comment>
                            <comment id="13497882" author="jiannan" created="Thu, 15 Nov 2012 09:50:21 +0000"  >&lt;p&gt;I&apos;ll try to create a test case as your suggestion. Thanks Ivan.&lt;/p&gt;</comment>
                            <comment id="13504529" author="fpj" created="Tue, 27 Nov 2012 10:57:31 +0000"  >&lt;p&gt;Canceling patch until comment is addressed and a new patch is uploaded.&lt;/p&gt;</comment>
                            <comment id="13504566" author="hadoopqa" created="Tue, 27 Nov 2012 12:13:07 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-458&quot; title=&quot;Annoy BKReadException error when changing ledger.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-458&quot;&gt;&lt;del&gt;BOOKKEEPER-458&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WARNING: Running test-patch on a dirty local svn workspace&lt;/p&gt;</comment>
                            <comment id="13508261" author="fpj" created="Sun, 2 Dec 2012 13:27:50 +0000"  >&lt;p&gt;Hi Jiannan, I was wondering if you&apos;re planning on having a new patch uploaded soon.&lt;/p&gt;</comment>
                            <comment id="13508266" author="jiannan" created="Sun, 2 Dec 2012 13:36:13 +0000"  >&lt;p&gt;Yes, I plan to update the patch this week.&lt;/p&gt;</comment>
                            <comment id="13530271" author="jiannan" created="Wed, 12 Dec 2012 20:06:07 +0000"  >&lt;p&gt;Update patch which add a test case&lt;/p&gt;</comment>
                            <comment id="13530281" author="jiannan" created="Wed, 12 Dec 2012 20:15:48 +0000"  >&lt;p&gt;When I add test case, I meet with two problem:&lt;br/&gt;
  1) Sometimes when I run command &quot;mvn test -Dtest=TestBookKeeperPersistenceManager&quot;, maven-surefire-plugin cannot detect any testcase and print &quot;There are no tests to run.&quot; Actually it do run the test, but it runs tearDown() before the test finish! After upgrading the plugin version in pom.xml, this issue gone. So I would suggest to upgrade some dependency plugins&apos; version.&lt;br/&gt;
  2) I meet a irrelevant test failed, I think we should have a look at it in a new JIRA. Logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;testServerSideThrottle&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;(org.apache.hedwig.server.delivery.TestThrottlingDelivery)  Time elapsed: 3.314 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
junit.framework.AssertionFailedError: Received more messages than throttle value 5&lt;br/&gt;
        at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
        at junit.framework.Assert.assertTrue(Assert.java:20)&lt;br/&gt;
        at junit.framework.Assert.assertFalse(Assert.java:34)&lt;br/&gt;
        at org.apache.hedwig.server.delivery.TestThrottlingDelivery.throttleX(TestThrottlingDelivery.java:149)&lt;br/&gt;
        at org.apache.hedwig.server.delivery.TestThrottlingDelivery.testServerSideThrottle(TestThrottlingDelivery.java:216)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;
{java}</comment>
                            <comment id="13530330" author="hadoopqa" created="Wed, 12 Dec 2012 21:11:50 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-458&quot; title=&quot;Annoy BKReadException error when changing ledger.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-458&quot;&gt;&lt;del&gt;BOOKKEEPER-458&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12560628/BOOKKEEPER-458.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-458.diff&lt;/a&gt; downloaded at Wed Dec 12 20:51:33 UTC 2012&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 1 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 481&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/107/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/107/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13530357" author="fpj" created="Wed, 12 Dec 2012 21:31:24 +0000"  >&lt;p&gt;This change and patch look good to me. One quick clarification: isn&apos;t the assertFalse supposed to be assertNotNull in testReadWhenTopicChangeLedger? &lt;/p&gt;</comment>
                            <comment id="13530373" author="jiannan" created="Wed, 12 Dec 2012 21:43:40 +0000"  >&lt;p&gt;No, if no entry return normally, ScanCallback#scanFinished will be called. And the code in TestBookKeeperPersistenceManager#RangeScanVerifier#scanFinished push a Boolean into the queue, which indicates whether there is message scanned. But it is very strange that previous code push &quot;pubMsgs.isEmpty()&quot;, I think this behavior needs to be changed.&lt;/p&gt;</comment>
                            <comment id="13530395" author="fpj" created="Wed, 12 Dec 2012 21:54:31 +0000"  >&lt;p&gt;The poll call has a timeout value, so if it times out, the call will return null, no? Will the test throw an NPE instead?&lt;/p&gt;</comment>
                            <comment id="13530406" author="jiannan" created="Wed, 12 Dec 2012 22:06:35 +0000"  >&lt;p&gt;Yes, Flavio, you&apos;re right. I&apos;ll update patch.&lt;br/&gt;
I agree with you that NPE may be threw if timeout.&lt;/p&gt;</comment>
                            <comment id="13530422" author="jiannan" created="Wed, 12 Dec 2012 22:16:28 +0000"  >&lt;p&gt;Check null for scan result.&lt;br/&gt;
Thanks Flavio.&lt;/p&gt;</comment>
                            <comment id="13530437" author="fpj" created="Wed, 12 Dec 2012 22:29:07 +0000"  >&lt;p&gt;Cool, thanks. I&apos;m sorry for yet another request, but a last small one. Could you add an error message or a comment around the assertion just to explain what the assertion is checking? It will make it easier for others to understand what it is doing in the future. Otherwise, it looks good to me.&lt;/p&gt;</comment>
                            <comment id="13530453" author="jiannan" created="Wed, 12 Dec 2012 22:44:23 +0000"  >&lt;p&gt;It&apos;s a good practice to add message for assertion, I&apos;ll always do it in future.&lt;br/&gt;
Thanks Flavio.&lt;/p&gt;</comment>
                            <comment id="13530689" author="hustlmsp" created="Thu, 13 Dec 2012 05:17:44 +0000"  >&lt;p&gt;the patch lgtm +1. if there is another +1 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt;. It would be ready to be in. &lt;/p&gt;</comment>
                            <comment id="13530690" author="hustlmsp" created="Thu, 13 Dec 2012 05:19:35 +0000"  >&lt;p&gt;BTW, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jiannan&quot; class=&quot;user-hover&quot; rel=&quot;jiannan&quot;&gt;Jiannan Wang&lt;/a&gt; Could you open another jira tracking the issue you described about the failure fromtestServerSideThrottle?&lt;/p&gt;</comment>
                            <comment id="13530696" author="hadoopqa" created="Thu, 13 Dec 2012 05:31:11 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-458&quot; title=&quot;Annoy BKReadException error when changing ledger.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-458&quot;&gt;&lt;del&gt;BOOKKEEPER-458&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12560664/BOOKKEEPER-458.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BOOKKEEPER-458.diff&lt;/a&gt; downloaded at Thu Dec 13 05:10:55 UTC 2012&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 1 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 481&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/111/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/111/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13530834" author="fpj" created="Thu, 13 Dec 2012 09:48:01 +0000"  >&lt;p&gt;+1, lgtm.&lt;/p&gt;</comment>
                            <comment id="13530927" author="fpj" created="Thu, 13 Dec 2012 11:52:50 +0000"  >&lt;p&gt;Committed revision 1421239. Since the fix version didn&apos;t say anything, I haven&apos;t committed it to branch 4.1. In the case, this is necessary, please reopen this ticket and comment.&lt;/p&gt;</comment>
                            <comment id="13531192" author="jiannan" created="Thu, 13 Dec 2012 17:12:55 +0000"  >&lt;p&gt;To Sijie: has created JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-503&quot; title=&quot;The test case of TestThrottlingDelivery#testServerSideThrottle failed sometimes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-503&quot;&gt;&lt;del&gt;BOOKKEEPER-503&lt;/del&gt;&lt;/a&gt; for testServerSideThrottle failed&lt;/p&gt;</comment>
                            <comment id="13532106" author="hudson" created="Fri, 14 Dec 2012 06:51:28 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk #860 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/860/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/860/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-458&quot; title=&quot;Annoy BKReadException error when changing ledger.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-458&quot;&gt;&lt;del&gt;BOOKKEEPER-458&lt;/del&gt;&lt;/a&gt;:  Annoy BKReadException error when changing ledger. (jiannan via fpj) (Revision 1421239)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
fpj : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/server/persistence/BookkeeperPersistenceManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/test/java/org/apache/hedwig/server/persistence/TestBookKeeperPersistenceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12560664" name="BOOKKEEPER-458.diff" size="3599" author="jiannan" created="Wed, 12 Dec 2012 22:44:23 +0000"/>
                            <attachment id="12560657" name="BOOKKEEPER-458.diff" size="3488" author="jiannan" created="Wed, 12 Dec 2012 22:16:28 +0000"/>
                            <attachment id="12560628" name="BOOKKEEPER-458.diff" size="3384" author="jiannan" created="Wed, 12 Dec 2012 20:06:07 +0000"/>
                            <attachment id="12553481" name="BOOKKEEPER-458.diff" size="973" author="jiannan" created="Wed, 14 Nov 2012 09:56:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Nov 2012 09:56:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy8mrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>