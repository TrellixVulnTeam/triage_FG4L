<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:27:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-742/BOOKKEEPER-742.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-742] Fix for empty ledgers losing quorum.</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-742</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;If a ledger is open and empty, when a bookie in the ensemble crashes no recovery will take place (because there&apos;s nothing to recover). This open empty unrepaired ledger can persist for a long time. If it loses another bookie, it can lose quorum. At this point it&apos;s impossible for the bookie to know that its an empty ledger, and the admin gets notified of missing data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12706645">BOOKKEEPER-742</key>
            <summary>Fix for empty ledgers losing quorum.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Apr 2014 16:23:54 +0100</created>
                <updated>Thu, 24 Apr 2014 12:45:21 +0100</updated>
                            <resolved>Thu, 24 Apr 2014 12:41:12 +0100</resolved>
                                                    <fixVersion>4.3.0</fixVersion>
                    <fixVersion>4.2.3</fixVersion>
                                    <component>bookkeeper-auto-recovery</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13960170" author="hadoopqa" created="Fri, 4 Apr 2014 18:37:08 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-742&quot; title=&quot;Fix for empty ledgers losing quorum.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-742&quot;&gt;&lt;del&gt;BOOKKEEPER-742&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12638709/0001-Fix-for-empty-ledgers-using-quorum.trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-Fix-for-empty-ledgers-using-quorum.trunk.patch&lt;/a&gt; downloaded at Fri Apr  4 17:09:15 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 901&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/599/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/599/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13961141" author="fpj" created="Sat, 5 Apr 2014 16:54:10 +0100"  >&lt;p&gt;I remember this discussion on the list, but I can&apos;t remember the conclusion. This is a comment in the patch:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     * For example, if in a E3Q2, only 1 entry is written and the last bookie
     * in the ensemble fails, nothing has been written to it, so nothing needs to be
     * recovered. But if the second to last bookie fails, we&apos;ve now lost quorum for
     * the second entry, so it&apos;s impossible to see if the second has been written or
     * not.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem here is that you&apos;ve lost too many bookies, so it is possible that you&apos;ve lost data and consequently the ledger is bad. Say that entry has been successfully written and acknowledged. In this case, we can&apos;t recover 1 and the ledger is bad, but we can&apos;t distinguish the case you&apos;re describing from the one I just presented.&lt;/p&gt;

&lt;p&gt;Also, for completeness, I just wanted to confirm that if 3 or more entries have been written, then we would be able to spot that the ledger is really bad because we would be able to see entry 2, but not 1. &lt;/p&gt;

&lt;p&gt;One small point about the patch. This method isFinalEnsembleOpenAndAvailable, which seems to be key to this patch, returns true in the case the ledger metadata says closed. Returning true in this case is a bit misleading, and perhaps we could rename the method to something like shouldCloseLedger and negate the return values.  &lt;/p&gt;</comment>
                            <comment id="13961708" author="ikelly" created="Mon, 7 Apr 2014 09:43:22 +0100"  >&lt;blockquote&gt;
&lt;p&gt;The problem here is that you&apos;ve lost too many bookies, so it is possible that you&apos;ve lost data and consequently the ledger is bad. Say that entry has been successfully written and acknowledged. In this case, we can&apos;t recover 1 and the ledger is bad, but we can&apos;t distinguish the case you&apos;re describing from the one I just presented.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It&apos;s the same case. But we have an autorecovery system that should stop us from ever getting to that state, because we should deal with the case where the loss of 1 more bookie would cause data to possibly be lost.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Also, for completeness, I just wanted to confirm that if 3 or more entries have been written, then we would be able to spot that the ledger is really bad because we would be able to see entry 2, but not 1. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In this case, even if 2 entries have been written the current code would handle it because it was see that E2 exists on the second bookie, but not the third.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;One small point about the patch. This method isFinalEnsembleOpenAndAvailable, which seems to be key to this patch, returns true in the case the ledger metadata says closed. Returning true in this case is a bit misleading, and perhaps we could rename the method to something like shouldCloseLedger and negate the return values. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;shouldCloseLedger is too generic, I want to make it clear in the code that this is a special case. I can rename, but it needs to be clear that the method is checking for something particular.&lt;/p&gt;</comment>
                            <comment id="13961853" author="rakeshr" created="Mon, 7 Apr 2014 14:57:41 +0100"  >&lt;p&gt;For future reference, I&apos;m pasting the link to the mail discussions we had earlier : &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/zookeeper-bookkeeper-dev/201403.mbox/%3c05e401cf38e0$7fa56810$7ef03830$@yahoo.com%3e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Problem in rereplication algorithm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt; for the patch, overall it looks fine. I&apos;ve few clarifications:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1)&lt;/b&gt; bq.It&apos;s the same case. But we have an autorecovery system that should stop us from ever getting to that state, because we should deal with the case where the loss of 1 more bookie would cause data to possibly be lost.&lt;br/&gt;
So in an ideal cluster its not expected to see multiple failures at sametime. If multiple failure happens, again it would enter into the loop as opening ledger wouldn&apos;t get succeeded.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isFinalEnsembleOpenAndAvailable(lh)) {
+                        lh = admin.openLedger(ledgerId);
+                    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;b&gt;2)&lt;/b&gt; I failed to see reason why the following sync block is removed in the patch ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void submitAuditTask() {
-        &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
Also, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt; it would be great if you can have a look at BOOKEEPER-733, this is another case where I noticed unnecessary cycles. During that time, I thought of putting together all these cases (also considering unknown cases if any in future) as a whole and think of a generic way of handling by having return codes. Now based on the return code it can build an idea of BACKOFF or skipping that ledger in further cycles.&lt;/p&gt;</comment>
                            <comment id="13961871" author="ikelly" created="Mon, 7 Apr 2014 15:21:42 +0100"  >&lt;blockquote&gt;
&lt;p&gt;So in an ideal cluster its not expected to see multiple failures at sametime. If multiple failure happens, again it would enter into the loop as opening ledger wouldn&apos;t get succeeded.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The problem before this patch is that, after the first failure occurs, no corrective action is taken. Then when the second does occur we get into the bad situation. The two failures may have many weeks or months between them. In fact, these weren&apos;t even failures, but boxes being taken out of rotation. The whole process got stalled, because it looked like a ledger had been lost.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; 2) I failed to see reason why the following sync block is removed in the patch ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Because it serves no purpose. What resource is the sync block protecting (rather, the two sync blocks; the method is also synchronized)?&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-733&quot; title=&quot;Improve ReplicationWorker to handle the urLedgers which already have same leder replica in hand&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-733&quot;&gt;BOOKKEEPER-733&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13962385" author="fpj" created="Tue, 8 Apr 2014 00:31:38 +0100"  >&lt;blockquote&gt;&lt;p&gt;shouldCloseLedger is too generic&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;shouldCloseLedgerWhenLedgerOpenAndEnsembleAvailable &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;shouldCloseLedgerIfLedgerOpenAndEnsembleAvailable&lt;/p&gt;</comment>
                            <comment id="13962684" author="rakeshr" created="Tue, 8 Apr 2014 09:02:27 +0100"  >&lt;blockquote&gt;&lt;p&gt;Because it serves no purpose. What resource is the sync block protecting (rather, the two sync blocks; the method is also synchronized)?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;From the code I could see &apos;sync block&apos; is to avoid submitting tasks while shutdown. Yeah two sync is not required (synchronized method and sync block). But in the patch both are removed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;shouldCloseLedgerIfLedgerOpenAndEnsembleAvailable&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Thanks Flavio, this is better one&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13963096" author="ikelly" created="Tue, 8 Apr 2014 16:45:14 +0100"  >&lt;p&gt;The method name for the test shouldn&apos;t tell the calling code what to do. How about isLastSegmentOpenAndMissingBookies(LedgerHandle)? i.e. inverting the return value.&lt;/p&gt;</comment>
                            <comment id="13963101" author="ikelly" created="Tue, 8 Apr 2014 16:49:59 +0100"  >&lt;p&gt;re the sync, you&apos;re right, i missed the synchronized(Auditor.this), will add it back. &lt;/p&gt;</comment>
                            <comment id="13963141" author="fpj" created="Tue, 8 Apr 2014 17:26:16 +0100"  >&lt;blockquote&gt;&lt;p&gt;isLastSegmentOpenAndMissingBookies(LedgerHandle)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes, this is good.&lt;/p&gt;</comment>
                            <comment id="13967200" author="fpj" created="Fri, 11 Apr 2014 23:46:25 +0100"  >&lt;p&gt;Could you make the changes so that I can check this in, please?&lt;/p&gt;</comment>
                            <comment id="13969425" author="ikelly" created="Tue, 15 Apr 2014 11:46:29 +0100"  >&lt;p&gt;Adds back sync on submitAuditTask. Renames checking method.&lt;/p&gt;</comment>
                            <comment id="13969475" author="hadoopqa" created="Tue, 15 Apr 2014 13:15:25 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-742&quot; title=&quot;Fix for empty ledgers losing quorum.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-742&quot;&gt;&lt;del&gt;BOOKKEEPER-742&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12640250/0001-Fix-for-empty-ledgers-using-quorum.trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-Fix-for-empty-ledgers-using-quorum.trunk.patch&lt;/a&gt; downloaded at Tue Apr 15 11:47:16 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 TESTS&lt;/font&gt; - patch does not compile, cannot run testcases&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/604/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/604/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13969522" author="rakeshr" created="Tue, 15 Apr 2014 14:11:22 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ikelly&quot; class=&quot;user-hover&quot; rel=&quot;ikelly&quot;&gt;Ivan Kelly&lt;/a&gt; Latest patch looks nice +1 frome me. I didn&apos;t get the reason for the failure, can we rerun to see QA report again ?&lt;/p&gt;</comment>
                            <comment id="13972965" author="hadoopqa" created="Thu, 17 Apr 2014 15:08:43 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-742&quot; title=&quot;Fix for empty ledgers losing quorum.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-742&quot;&gt;&lt;del&gt;BOOKKEEPER-742&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12640250/0001-Fix-for-empty-ledgers-using-quorum.trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-Fix-for-empty-ledgers-using-quorum.trunk.patch&lt;/a&gt; downloaded at Thu Apr 17 13:40:59 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 2 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 901&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/605/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13978245" author="rakeshr" created="Wed, 23 Apr 2014 15:39:33 +0100"  >&lt;p&gt;Thanks Ivan. +1 latest patch looks nice.&lt;/p&gt;</comment>
                            <comment id="13979463" author="ikelly" created="Thu, 24 Apr 2014 09:45:11 +0100"  >&lt;p&gt;Committed r1589636 to trunk. Thanks for reviewing guys.&lt;/p&gt;</comment>
                            <comment id="13979489" author="hudson" created="Thu, 24 Apr 2014 10:14:07 +0100"  >&lt;p&gt;SUCCESS: Integrated in bookkeeper-trunk #624 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/624/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/624/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-742&quot; title=&quot;Fix for empty ledgers losing quorum.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-742&quot;&gt;&lt;del&gt;BOOKKEEPER-742&lt;/del&gt;&lt;/a&gt;: Fix for empty ledgers losing quorum. (ivank) (ivank: rev 1589636)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorElector.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationException.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/BookieAutoRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13979604" author="ikelly" created="Thu, 24 Apr 2014 12:41:12 +0100"  >&lt;p&gt;Committed revision 1589675 for branch-4.2&lt;/p&gt;</comment>
                            <comment id="13979607" author="ikelly" created="Thu, 24 Apr 2014 12:45:21 +0100"  >&lt;p&gt;Final patch used for 4.2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12706642">BOOKKEEPER-741</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12706646">BOOKKEEPER-743</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12640250" name="0001-Fix-for-empty-ledgers-using-quorum.trunk.patch" size="20972" author="ikelly" created="Tue, 15 Apr 2014 11:46:29 +0100"/>
                            <attachment id="12638709" name="0001-Fix-for-empty-ledgers-using-quorum.trunk.patch" size="20951" author="ikelly" created="Fri, 4 Apr 2014 17:55:47 +0100"/>
                            <attachment id="12641701" name="0003-Fix-for-empty-ledgers-using-quorum.branch4.2.patch" size="20987" author="ikelly" created="Thu, 24 Apr 2014 12:45:21 +0100"/>
                            <attachment id="12638708" name="0003-Fix-for-empty-ledgers-using-quorum.branch4.2.patch" size="20966" author="ikelly" created="Fri, 4 Apr 2014 17:55:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Apr 2014 17:37:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384968</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzo6af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>