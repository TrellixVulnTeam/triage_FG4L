<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:32:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-203/BOOKKEEPER-203.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-203] improve ledger manager interface to remove zookeeper dependency on metadata operations.</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-203</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;we need to improve ledger manager interface to remove zookeeper dependency on metadata operations, so it is easy for us to implement a MetaStore based ledger manager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12549007">BOOKKEEPER-203</key>
            <summary>improve ledger manager interface to remove zookeeper dependency on metadata operations.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12545436">BOOKKEEPER-181</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hustlmsp">Sijie Guo</assignee>
                                    <reporter username="hustlmsp">Sijie Guo</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Apr 2012 16:38:02 +0100</created>
                <updated>Thu, 10 Jul 2014 15:55:50 +0100</updated>
                            <resolved>Tue, 19 Jun 2012 11:40:57 +0100</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                    <component>bookkeeper-client</component>
                    <component>bookkeeper-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13243754" author="hustlmsp" created="Sun, 1 Apr 2012 16:53:38 +0100"  >&lt;p&gt;create a patch to improve ledger manager interface&lt;/p&gt;

&lt;p&gt;1) split ledger manager interface into client/server part, client side is LedgerManager, server side is ActiveLedgerManager.&lt;br/&gt;
2) remove zookeeper dependency on metadata operations, provides a well-defined metadata operation interface.&lt;/p&gt;</comment>
                            <comment id="13243756" author="jiraposter@reviews.apache.org" created="Sun, 1 Apr 2012 16:58:28 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;we need to improve ledger manager interface to remove zookeeper dependency on metadata operations, so it is easy for us to implement a MetaStore based ledger manager.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-203&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java ee38862 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java 2eed192 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java 17c70f1 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java 911c660 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 490c130 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java b9cd624 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java f0a165f &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerDeleteOp.java 5b10a5b &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java e576792 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java 2dcf0e4 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java 56186ab &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java e1bd1ff &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java 8fd7df8 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java 1300974 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManagerFactory.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java b573181 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManagerFactory.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java 3a3a81e &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManager.java 7d9eb96 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java b62ad3a &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ReflectionUtils.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/LedgerCacheTest.java 52cf514 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookieRecoveryTest.java 6135250 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/TestFencing.java c5350ad &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/GcLedgersTest.java 12c1b5a &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalAsyncLedgerOpsTest.java 24b3c12 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieFailureTest.java 70a4ea9 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieReadWriteTest.java 7d97fd4 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieRecoveryTest.java d99156e &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalLedgerDeleteTest.java dbcd65a &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerLayoutTest.java 4784854 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerManagerTestCase.java b8a541b &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/TestLedgerManager.java e07c756 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/AsyncLedgerOpsTest.java d7f153a &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java c172224 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java e647d68 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 3a3c8af &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerDeleteTest.java 2d3593e &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerBaseTestCase.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerTestCase.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4603/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sijie&lt;/p&gt;
</comment>
                            <comment id="13245762" author="jiraposter@reviews.apache.org" created="Tue, 3 Apr 2012 22:18:22 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4603/#review6616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#review6616&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;It looks pretty good for me, I just have a few small comments.&lt;/p&gt;


&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14294&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14294&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    For clarity, can we rename it to MetaStoreException or MetadataStoreException?&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14397&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14397&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    MetaStoreException&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14401&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14401&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    It doesn&apos;t look like we need to make this call public. If it is for testing, we could simply use inheritance, no?&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14404&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14404&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m wondering if it is ok to have a reference specific to zk here. Is the idea here that for every new backend we add, we include required system properties here? &lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14417&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14417&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    You may want to say bookie instead of server side.&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14416&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14416&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I wonder if ActiveLedgerManager is a good name for this class. It doesn&apos;t indicate that it is related to the bookie side, and it might be good to refer to it. But, I don&apos;t feel too strongly about it, since the comment before the class says that it is for bookies.&lt;/p&gt;



&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManager.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/#comment14405&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#comment14405&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    The comment here should not refer to zk, right?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fpj&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2012-04-01 15:56:33, Sijie Guo wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-01 15:56:33)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;we need to improve ledger manager interface to remove zookeeper dependency on metadata operations, so it is easy for us to implement a MetaStore based ledger manager.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-203&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java ee38862 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java 2eed192 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java 17c70f1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java 911c660 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 490c130 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java b9cd624 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java f0a165f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerDeleteOp.java 5b10a5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java e576792 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java 2dcf0e4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java 56186ab &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java e1bd1ff &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java 8fd7df8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java 1300974 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManagerFactory.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java b573181 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManagerFactory.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java 3a3a81e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManager.java 7d9eb96 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java b62ad3a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ReflectionUtils.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/LedgerCacheTest.java 52cf514 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookieRecoveryTest.java 6135250 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/TestFencing.java c5350ad &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/GcLedgersTest.java 12c1b5a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalAsyncLedgerOpsTest.java 24b3c12 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieFailureTest.java 70a4ea9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieReadWriteTest.java 7d97fd4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieRecoveryTest.java d99156e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalLedgerDeleteTest.java dbcd65a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerLayoutTest.java 4784854 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerManagerTestCase.java b8a541b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/TestLedgerManager.java e07c756 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/AsyncLedgerOpsTest.java d7f153a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java c172224 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java e647d68 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 3a3c8af &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerDeleteTest.java 2d3593e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerBaseTestCase.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerTestCase.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4603/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Sijie&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13245764" author="fpj" created="Tue, 3 Apr 2012 22:21:05 +0100"  >&lt;p&gt;Even if we +1 this jira, I was wondering if we should move it to 4.2.0. This jira is a sub-task of BOOKKEPER-181, and we have marked it for 4.2.0.&lt;/p&gt;</comment>
                            <comment id="13249652" author="hustlmsp" created="Mon, 9 Apr 2012 03:50:54 +0100"  >&lt;p&gt;Agreed to move it to 4.2.0.&lt;/p&gt;</comment>
                            <comment id="13274113" author="jiraposter@reviews.apache.org" created="Sun, 13 May 2012 02:58:45 +0100"  >

&lt;blockquote&gt;&lt;p&gt;On 2012-04-03 21:17:04, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; It looks pretty good for me, I just have a few small comments.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks Flavio for reviewing it. I would like to bring the patch to latest trunk and update it with your comments.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-03 21:17:04, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java, line 178&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/diff/1/?file=97866#file97866line178&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff/1/?file=97866#file97866line178&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     It doesn&apos;t look like we need to make this call public. If it is for testing, we could simply use inheritance, no?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;we use parseConfig in ledgermanager not for testing, which is another package.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-03 21:17:04, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java, line 146&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/diff/1/?file=97868#file97868line146&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff/1/?file=97868#file97868line146&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I&apos;m wondering if it is ok to have a reference specific to zk here. Is the idea here that for every new backend we add, we include required system properties here?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;zkLedgersRootPath not only for zookeeper-based ledger manager to store ledger metadata. under zkLedgersRootPath there is a &apos;layout&apos; znode, which describes the metadata layout and which ledger manager it used for current bookkeeper cluster.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2012-04-03 21:17:04, fpj wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java, line 30&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/4603/diff/1/?file=97870#file97870line30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff/1/?file=97870#file97870line30&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I wonder if ActiveLedgerManager is a good name for this class. It doesn&apos;t indicate that it is related to the bookie side, and it might be good to refer to it. But, I don&apos;t feel too strongly about it, since the comment before the class says that it is for bookies.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t have a good name for it also, just used its original name before we abstracted ledger manager interface.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Sijie&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4603/#review6616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/#review6616&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2012-04-01 15:56:33, Sijie Guo wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2012-04-01 15:56:33)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;we need to improve ledger manager interface to remove zookeeper dependency on metadata operations, so it is easy for us to implement a MetaStore based ledger manager.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-203&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java ee38862 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java 2eed192 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java 17c70f1 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java 911c660 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 490c130 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java b9cd624 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java f0a165f &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerDeleteOp.java 5b10a5b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java e576792 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java 2dcf0e4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java 56186ab &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java e1bd1ff &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java 8fd7df8 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java 1300974 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManagerFactory.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java b573181 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManagerFactory.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java 3a3a81e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManager.java 7d9eb96 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java b62ad3a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ReflectionUtils.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/LedgerCacheTest.java 52cf514 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookieRecoveryTest.java 6135250 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/client/TestFencing.java c5350ad &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/GcLedgersTest.java 12c1b5a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalAsyncLedgerOpsTest.java 24b3c12 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieFailureTest.java 70a4ea9 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieReadWriteTest.java 7d97fd4 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieRecoveryTest.java d99156e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalLedgerDeleteTest.java dbcd65a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerLayoutTest.java 4784854 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerManagerTestCase.java b8a541b &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/TestLedgerManager.java e07c756 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/AsyncLedgerOpsTest.java d7f153a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java c172224 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java e647d68 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 3a3c8af &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerDeleteTest.java 2d3593e &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerBaseTestCase.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerTestCase.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4603/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Sijie&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13274136" author="hustlmsp" created="Sun, 13 May 2012 03:45:59 +0100"  >&lt;p&gt;attach a new patch, which brought the code to latest trunk and addressed Flavio&apos;s suggestions. &lt;/p&gt;</comment>
                            <comment id="13274138" author="jiraposter@reviews.apache.org" created="Sun, 13 May 2012 03:46:47 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/4603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-05-13 02:44:58.032203)&lt;/p&gt;


&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;update a new patch, which brought the code to latest trunk and addressed Flavio&apos;s suggestions.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;we need to improve ledger manager interface to remove zookeeper dependency on metadata operations, so it is easy for us to implement a MetaStore based ledger manager.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/BOOKKEEPER-203&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java aa4dec2 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java 4dc71e5 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java c8b5001 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java 4df689e &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java 484a055 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java eb0955b &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java 712bbea &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java 8c5bce3 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerDeleteOp.java 5b10a5b &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 6ce576d &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java c699eae &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java 101ebf3 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java e1bd1ff &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java ce53461 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java 1300974 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManagerFactory.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java b573181 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManagerFactory.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java cab02fe &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManager.java 7d9eb96 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java 491a3e4 &lt;br/&gt;
  bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ReflectionUtils.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/LedgerCacheTest.java 52cf514 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookieRecoveryTest.java 8bd3f6b &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/TestFencing.java 1c109a2 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/GcLedgersTest.java 12c1b5a &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalAsyncLedgerOpsTest.java 24b3c12 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieFailureTest.java 70a4ea9 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieReadWriteTest.java 7d97fd4 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieRecoveryTest.java d99156e &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalLedgerDeleteTest.java dbcd65a &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerLayoutTest.java 4784854 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerManagerTestCase.java b8a541b &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/TestLedgerManager.java e07c756 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/AsyncLedgerOpsTest.java d7f153a &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java a81067d &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java e647d68 &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 3a3c8af &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerDeleteTest.java 2d3593e &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerBaseTestCase.java PRE-CREATION &lt;br/&gt;
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerTestCase.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/4603/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sijie&lt;/p&gt;
</comment>
                            <comment id="13286450" author="hustlmsp" created="Thu, 31 May 2012 11:03:52 +0100"  >&lt;p&gt;attach a new patch rebased to latest trunk.&lt;/p&gt;</comment>
                            <comment id="13294272" author="hustlmsp" created="Wed, 13 Jun 2012 09:46:11 +0100"  >&lt;p&gt;new patch 1) updated to latest trunk 2) introduce Version interface to remove zookeeper integer version dependency. because not every storage support integer version.&lt;/p&gt;</comment>
                            <comment id="13294328" author="ikelly" created="Wed, 13 Jun 2012 11:33:31 +0100"  >&lt;p&gt;Patch looks good. There&apos;s some small issues with it.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Needs to be rebased on trunk&lt;/li&gt;
	&lt;li&gt;MetaStoreException is not used. Is in wrong patch i guess?&lt;/li&gt;
	&lt;li&gt;BookKeeper.java patch removed the throwing of NoSuchLedgerExistsException, which we added in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-273&quot; title=&quot;LedgerHandle.deleteLedger() should be idempotent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-273&quot;&gt;&lt;del&gt;BOOKKEEPER-273&lt;/del&gt;&lt;/a&gt;. Is this intentional?&lt;/li&gt;
	&lt;li&gt;there are two overloads of getClass where only one is ever used. setClass is unused.&lt;/li&gt;
	&lt;li&gt;LedgerManagerFactory#newLedgerManagerFactory breaks getLedgerManagerType(). if factoryClass is null and layout is null, it should check getLedgerManagerType before setting factoryClass to FlatLedgerManagerType or HierarchicalLedgerManagerType.&lt;/li&gt;
	&lt;li&gt;This does introduce some incompatiblity. A 4.1.0 client will not work with an installation that has been initialised with the LedgerLayout code from this patch. This should be fine though, as LedgerLayout is only ever written on cluster initialization. However, I think we should change this to use protobufs so that any other changes like this are more BC friendly. Not in this patch though.&lt;/li&gt;
	&lt;li&gt;You may as well you MultiLedgerManagerBaseTestCase for the places where you use MultiLedgerManagerTestCase and get rid of MultiLedgerManagerTestCase.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13294330" author="ikelly" created="Wed, 13 Jun 2012 11:33:58 +0100"  >&lt;p&gt;ah, ignore first comment.&lt;/p&gt;</comment>
                            <comment id="13294363" author="hustlmsp" created="Wed, 13 Jun 2012 12:33:23 +0100"  >&lt;p&gt;Ivan, thanks for reviewing.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;MetaStoreException is not used. Is in wrong patch i guess?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it is introduced when I am working on &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-204&quot; title=&quot;Provide a MetaStore interface, and a mock implementation.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-204&quot;&gt;&lt;del&gt;BOOKKEEPER-204&lt;/del&gt;&lt;/a&gt;. would remove it in next patch.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;BookKeeper.java patch removed the throwing of NoSuchLedgerExistsException, which we added in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-273&quot; title=&quot;LedgerHandle.deleteLedger() should be idempotent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-273&quot;&gt;&lt;del&gt;BOOKKEEPER-273&lt;/del&gt;&lt;/a&gt;. Is this intentional?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, I put in AbstractZkLedgerManager, because NONODE is zookeeper&apos;s return code. You could refer it as below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    @Override
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void deleteLedger(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; ledgerId, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GenericCallback&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;&amp;gt; cb) {
+        zk.delete(getLedgerPath(ledgerId), -1, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VoidCallback() {
+            @Override
+            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void processResult(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; rc, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; ctx) {
+                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; bkRc;
+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rc == KeeperException.Code.NONODE.intValue()) {
+                    LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ledger node does not exist in ZooKeeper: ledgerId={}&quot;&lt;/span&gt;, ledgerId);
+                    bkRc = BKException.Code.NoSuchLedgerExistsException;
+                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rc == KeeperException.Code.OK.intValue()) {
+                    bkRc = BKException.Code.OK;
+                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+                    bkRc = BKException.Code.ZKException;
+                }
+                cb.operationComplete(bkRc, (&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;)&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
+            }
+        }, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;there are two overloads of getClass where only one is ever used. setClass is unused.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ah, ur right. would remove unused methods.&lt;/p&gt;



&lt;blockquote&gt;
&lt;p&gt;LedgerManagerFactory#newLedgerManagerFactory breaks getLedgerManagerType(). if factoryClass is null and layout is null, it should check getLedgerManagerType before setting factoryClass to FlatLedgerManagerType or HierarchicalLedgerManagerType.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes. ur right. would improve it.&lt;/p&gt;



</comment>
                            <comment id="13393673" author="hustlmsp" created="Mon, 18 Jun 2012 07:05:05 +0100"  >&lt;blockquote&gt;
&lt;p&gt;You may as well you MultiLedgerManagerBaseTestCase for the places where you use MultiLedgerManagerTestCase and get rid of MultiLedgerManagerTestCase.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;MultiLedgerManagerBaseTestCase is used to test different digest type and ledger manager, which gets rid of adding Hierarchical prefixed test cases.&lt;/p&gt;

&lt;p&gt;MultiLedgerManagerTestCase is used to test different ledger manager.&lt;/p&gt;</comment>
                            <comment id="13393674" author="hustlmsp" created="Mon, 18 Jun 2012 07:09:56 +0100"  >&lt;p&gt;update new patch addressing Ivan&apos;s comments.&lt;/p&gt;

&lt;p&gt;1) rebased to latest trunk&lt;br/&gt;
2) remove unused MetaStoreException and setClass in ReflectionUtils&lt;br/&gt;
3) improve LedgerManagerFactory#newLedgerManagerFactory for backward compatibility.&lt;br/&gt;
4) add uninitialize in LedgerManagerFactory to release resources used by ledger manager factory.&lt;/p&gt;</comment>
                            <comment id="13395481" author="ikelly" created="Mon, 18 Jun 2012 09:31:28 +0100"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MultiLedgerManagerBaseTestCase is used to test different digest type and ledger manager, which gets rid of adding Hierarchical prefixed test cases.

MultiLedgerManagerTestCase is used to test different ledger manager.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So MultiLedgerManagerBaseTestCase is really a superset of MultiLedgerManagerTestCase. I don&apos;t see any harm in just using MultiLedgerManagerBaseTestCase for all. The reason I wrote some test cases which didn&apos;t use the BaseTestCase, was because with Parameterized junit tests, it&apos;s not possible to run individual tests (i.e. mvn test -Dtest=TestFencing#testBasicFencing), which I found annoying. However, if the test is going to use a Parameterized junit test in any case, we should just run everything.&lt;/p&gt;</comment>
                            <comment id="13395766" author="hustlmsp" created="Mon, 18 Jun 2012 10:36:05 +0100"  >&lt;p&gt;@Ivan,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HierarchicalAsyncLedgerOpsTest -&amp;gt; AsyncLedgerOpsTest (BaseTestCase)
HierarchicalBookieReadWriteTest -&amp;gt; BookieReadWriteTest (BaseTestCase)
HierarchicalBookieFailureTest -&amp;gt; BookieFailureTest (BaseTestCase)
HierarchicalBookieRecoveryTest -&amp;gt; BookieRecoveryTest (BaseTestCase)
HierarchicalLedgerDeleteTest -&amp;gt; LedgerDeleteTest (BookKeeperClusterTestCase)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;MultiLedgerManagerBaseTestCase &amp;amp; MultiLedgerManagerTestCase are used to remove HierarchicalxxxTests to let them run as parameterized tests. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; So MultiLedgerManagerBaseTestCase is really a superset of MultiLedgerManagerTestCase. I don&apos;t see any harm in just using MultiLedgerManagerBaseTestCase for all.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If everything is run as MultiLedgerManagerBaseTestCase, it would take a long time to run. For example, LedgerDeleteTest just tests ledger deletion functionality. so we don&apos;t need to parameterize the test to run with different digest type. But we have to run with different ledger managers because deletion is related to gc implementation in different ledger managers.&lt;/p&gt;



</comment>
                            <comment id="13395814" author="ikelly" created="Mon, 18 Jun 2012 12:19:57 +0100"  >&lt;blockquote&gt;&lt;p&gt;If everything is run as MultiLedgerManagerBaseTestCase, it would take a long time to run. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is true. Would it be a big change to rename it to MultiLedgerManagerMultiDigestTestCase, to make things clearer?&lt;/p&gt;</comment>
                            <comment id="13395882" author="hustlmsp" created="Mon, 18 Jun 2012 14:38:43 +0100"  >
&lt;p&gt;attach a new patch renaming MultiLedgerManagerBaseTestCase to MultiLedgerManagerMultiDigestTestCase&lt;/p&gt;

&lt;p&gt;review board: &lt;a href=&quot;https://reviews.apache.org/r/4603/diff/5/#index_header&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff/5/#index_header&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13395943" author="ikelly" created="Mon, 18 Jun 2012 16:02:00 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt;.diff_v6 doesn&apos;t apply cleanly to trunk? Did you generate the patch against the correct branch? It looks like the clash is against &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-183&quot; title=&quot;Provide tools to read/check data files in bookie server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-183&quot;&gt;&lt;del&gt;BOOKKEEPER-183&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13395974" author="hustlmsp" created="Mon, 18 Jun 2012 16:52:50 +0100"  >&lt;p&gt;Thanks Ivan for reminding. &lt;/p&gt;

&lt;p&gt;Attach a new patch rebased on latest trunk.&lt;/p&gt;

&lt;p&gt;review board: &lt;a href=&quot;https://reviews.apache.org/r/4603/diff/6&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4603/diff/6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13396111" author="ikelly" created="Mon, 18 Jun 2012 19:27:41 +0100"  >&lt;p&gt;One last thing (unfortunately it wasn&apos;t in the patch i reviewed last week). I think Version and Versioned should be in the meta package and not in a package of their own. Actually, Versioned doesn&apos;t even seem to be used at all. I guess it&apos;s there for another patch you have planned?&lt;/p&gt;</comment>
                            <comment id="13396337" author="hustlmsp" created="Tue, 19 Jun 2012 00:00:23 +0100"  >&lt;p&gt;@Ivan,&lt;/p&gt;

&lt;p&gt;Versioned is added as a generic interface. I was planning to make LedgerMetadata as Versioned interface, but seems that there are too much modifications. so I don&apos;t do the change.&lt;/p&gt;

&lt;p&gt;But the idea I kept Versioned here is for completeness of versioning interface, and it would be used in Hedwig Meta Manager to write topic persistence info and owner info. (&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-250&quot; title=&quot;Need a ledger manager like interface to manage metadata operations in Hedwig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-250&quot;&gt;&lt;del&gt;BOOKKEEPER-250&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-259&quot; title=&quot;Create a topic manager using versioned write for leader election&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-259&quot;&gt;&lt;del&gt;BOOKKEEPER-259&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;meta package is used to put metadata related things of BookKeeper, while Version and Versioned are more generic abstraction than BookKeeper meta, it would be used in both BookKeeper and Hedwig metadata manager. So I put them in a separated versioning package.&lt;/p&gt;</comment>
                            <comment id="13396586" author="ikelly" created="Tue, 19 Jun 2012 08:50:27 +0100"  >&lt;p&gt;Ok, I&apos;ll take one last pass over the patch, but i think it&apos;s ready to go. &lt;/p&gt;</comment>
                            <comment id="13396664" author="ikelly" created="Tue, 19 Jun 2012 11:33:13 +0100"  >&lt;p&gt;looks good +1&lt;/p&gt;</comment>
                            <comment id="13396667" author="ikelly" created="Tue, 19 Jun 2012 11:40:57 +0100"  >&lt;p&gt;Committed r1351646. Great work Sijie.&lt;/p&gt;</comment>
                            <comment id="13396685" author="hudson" created="Tue, 19 Jun 2012 12:17:05 +0100"  >&lt;p&gt;Integrated in bookkeeper-trunk #567 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/567/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/567/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt;: improve ledger manager interface to remove zookeeper dependency on metadata operations. (sijie via ivank) (Revision 1351646)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BKException.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerDeleteOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ActiveLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManagerFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManagerFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkVersion.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ReflectionUtils.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/versioning&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/versioning/Version.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/versioning/Versioned.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/LedgerCacheTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookieRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/client/TestFencing.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/GcLedgersTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalAsyncLedgerOpsTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieFailureTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieReadWriteTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalBookieRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/HierarchicalLedgerDeleteTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerLayoutTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerManagerTestCase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/TestLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/TestZkVersion.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/AsyncLedgerOpsTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookKeeperClusterTestCase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerDeleteTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerMultiDigestTestCase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/MultiLedgerManagerTestCase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14054926" author="hudson" created="Tue, 8 Jul 2014 14:23:33 +0100"  >&lt;p&gt;FAILURE: Integrated in Hadoop-trunk-Commit #5839 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-trunk-Commit/5839/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-trunk-Commit/5839/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4286&quot; title=&quot;Changes from BOOKKEEPER-203 broken capability of including bookkeeper-server jar in hidden package of BKJM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4286&quot;&gt;&lt;del&gt;HDFS-4286&lt;/del&gt;&lt;/a&gt;. Changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt; broken capability of including bookkeeper-server jar in hidden package of BKJM. Contributed by Rakesh R. (umamahesh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608764&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608764&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/contrib/bkjournal/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HDFSHighAvailabilityWithNFS.apt.vm&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14056084" author="hudson" created="Wed, 9 Jul 2014 11:36:21 +0100"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Yarn-trunk #608 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Yarn-trunk/608/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Yarn-trunk/608/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4286&quot; title=&quot;Changes from BOOKKEEPER-203 broken capability of including bookkeeper-server jar in hidden package of BKJM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4286&quot;&gt;&lt;del&gt;HDFS-4286&lt;/del&gt;&lt;/a&gt;. Changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt; broken capability of including bookkeeper-server jar in hidden package of BKJM. Contributed by Rakesh R. (umamahesh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608764&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608764&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/contrib/bkjournal/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HDFSHighAvailabilityWithNFS.apt.vm&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14056129" author="hudson" created="Wed, 9 Jul 2014 12:33:09 +0100"  >&lt;p&gt;FAILURE: Integrated in Hadoop-Hdfs-trunk #1799 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1799/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Hdfs-trunk/1799/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-4286&quot; title=&quot;Changes from BOOKKEEPER-203 broken capability of including bookkeeper-server jar in hidden package of BKJM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-4286&quot;&gt;&lt;del&gt;HDFS-4286&lt;/del&gt;&lt;/a&gt;. Changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-203&quot; title=&quot;improve ledger manager interface to remove zookeeper dependency on metadata operations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-203&quot;&gt;&lt;del&gt;BOOKKEEPER-203&lt;/del&gt;&lt;/a&gt; broken capability of including bookkeeper-server jar in hidden package of BKJM. Contributed by Rakesh R. (umamahesh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608764&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608764&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/contrib/bkjournal/pom.xml&lt;/li&gt;
	&lt;li&gt;/hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/site/apt/HDFSHighAvailabilityWithNFS.apt.vm&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14057542" author="hudson" created="Thu, 10 Jul 2014 15:55:50 +0100"  >&lt;p&gt;SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1827 (See &lt;a href=&quot;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1827/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1827/&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12549012">BOOKKEEPER-206</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12549010">BOOKKEEPER-205</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12554512">BOOKKEEPER-246</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12520831" name="BOOKKEEPER-203.diff" size="159014" author="hustlmsp" created="Sun, 1 Apr 2012 16:53:37 +0100"/>
                            <attachment id="12526654" name="BOOKKEEPER-203.diff_v2" size="160791" author="hustlmsp" created="Sun, 13 May 2012 03:45:59 +0100"/>
                            <attachment id="12530367" name="BOOKKEEPER-203.diff_v3" size="161716" author="hustlmsp" created="Thu, 31 May 2012 11:03:52 +0100"/>
                            <attachment id="12531934" name="BOOKKEEPER-203.diff_v4" size="172835" author="hustlmsp" created="Wed, 13 Jun 2012 09:46:11 +0100"/>
                            <attachment id="12532367" name="BOOKKEEPER-203.diff_v5" size="172557" author="hustlmsp" created="Mon, 18 Jun 2012 07:09:56 +0100"/>
                            <attachment id="12532406" name="BOOKKEEPER-203.diff_v6" size="172634" author="hustlmsp" created="Mon, 18 Jun 2012 14:38:43 +0100"/>
                            <attachment id="12532420" name="BOOKKEEPER-203.diff_v7" size="172503" author="hustlmsp" created="Mon, 18 Jun 2012 16:52:50 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 1 Apr 2012 15:58:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyn5jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169085</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>