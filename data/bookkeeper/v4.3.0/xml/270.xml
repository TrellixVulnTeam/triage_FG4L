<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:26:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-270/BOOKKEEPER-270.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-270] Review documentation on bookie cookie</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-270</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Check &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-163&quot; title=&quot;Prevent incorrect NoSuchLedgerException for readLastConfirmed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-163&quot;&gt;&lt;del&gt;BOOKKEEPER-163&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12558123">BOOKKEEPER-270</key>
            <summary>Review documentation on bookie cookie</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12556864">BOOKKEEPER-264</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="fpj">Flavio Junqueira</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 May 2012 16:19:47 +0100</created>
                <updated>Mon, 22 Oct 2012 15:50:16 +0100</updated>
                            <resolved>Tue, 29 May 2012 22:03:21 +0100</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13283562" author="ikelly" created="Fri, 25 May 2012 17:05:12 +0100"  >&lt;p&gt;This is internal to the bookie implementation. It shouldn&apos;t be in the user doc. We can doc in the wiki when we do the stuff for adding/removing disks in 4.2&lt;/p&gt;</comment>
                            <comment id="13283565" author="fpj" created="Fri, 25 May 2012 17:09:56 +0100"  >&lt;p&gt;Isn&apos;t the cookie related to management of bookies as well? If so, it should go to the admin guide page, no?&lt;/p&gt;</comment>
                            <comment id="13284680" author="ikelly" created="Tue, 29 May 2012 10:07:02 +0100"  >&lt;p&gt;It&apos;s an internal mechanism. The administrator should never touch cookies directly. Given that this is the case, if they want to mess with internals they should read the code directly.&lt;/p&gt;</comment>
                            <comment id="13284707" author="fpj" created="Tue, 29 May 2012 11:22:07 +0100"  >&lt;p&gt;Cut at documentation for cookies.&lt;/p&gt;</comment>
                            <comment id="13284848" author="ikelly" created="Tue, 29 May 2012 15:28:59 +0100"  >&lt;p&gt;I&apos;d prefer not to talk about the cookies or their format, and just simply say that if you change the disk configuration of a bookie, it will not be able to start. Detailing the contents creates overhead for making modifications in the future, and we will certainly be making modifications in this area in 4.2.0.&lt;/p&gt;</comment>
                            <comment id="13284864" author="fpj" created="Tue, 29 May 2012 15:54:29 +0100"  >&lt;p&gt;I understand that it would be best to treat bookies as black boxes. However, I couldn&apos;t think of a good way of saying precisely the cases we cover (and I don&apos;t claim my description is currently precise enough) without giving some detail about the implementation. I&apos;m fine with hiding internal detail, but I&apos;m not ok with not being precise about the cases we cover. If you can think of a better way, I&apos;ll be happy to hear. &lt;/p&gt;</comment>
                            <comment id="13284882" author="hustlmsp" created="Tue, 29 May 2012 16:34:54 +0100"  >&lt;p&gt;I agreed Flavio that we should let admin guys be aware of why the bookie can&apos;t start and how they should do when encountering such cases. I would suggest moving the detail cookie format to bookkeeper internal documents, and add some trouble shooting guideline in administrator guide so admin guys know how to handle when encountering similar cases.&lt;/p&gt;

&lt;p&gt;Besides that, do we have any guidelines that when to run bookie recover tool?&lt;/p&gt;</comment>
                            <comment id="13284928" author="fpj" created="Tue, 29 May 2012 18:00:06 +0100"  >&lt;blockquote&gt;&lt;p&gt;I agreed Flavio that we should let admin guys be aware of why the bookie can&apos;t start and how they should do when encountering such cases. I would suggest moving the detail cookie format to bookkeeper internal documents, and add some trouble shooting guideline in administrator guide so admin guys know how to handle when encountering similar cases.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There are multiple reasons that could lead to a bookie to not start. Wiping out a directory by either replacing a disk or accidentally deleting it are two reasons. In such cases, I&apos;m not entirely sure of what the troubleshooting procedure is right now. Is it to wipe out the whole bookie state and reconstruct its state from scratch by using the bookie recovery tool? If this is something that we will better handle in 4.2.0, we may want to point out that the current version does not provide a feature that handles nicely such situations and it will come in a future version.&lt;/p&gt;

&lt;p&gt;In any case, it sounds like a good idea to me to have a section in the admin&apos;s guide called &quot;Troubleshooting&quot;. &lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;do we have any guidelines that when to run bookie recover tool?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In the docs folder, we have bookieRecovery.textile. It seems to be missing the case in which we have the target bookie as part of the input.&lt;/p&gt;</comment>
                            <comment id="13284931" author="ikelly" created="Tue, 29 May 2012 18:06:32 +0100"  >&lt;p&gt;I&apos;ve taken a run at this to document the failure procedure while keeping the internal implementation details out of view. See the attached patch.&lt;/p&gt;</comment>
                            <comment id="13284946" author="fpj" created="Tue, 29 May 2012 18:23:42 +0100"  >&lt;p&gt;This is excellent, Ivan. I just have a couple of comments:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;My spell checker is complaining about a couple of things, so it would be good to fix those. I can do them upon commit if necessary, but if you end up updating the patch because of the second comment, please check the spelling;&lt;/li&gt;
	&lt;li&gt;I liked the idea of having a section called troubleshooting and it sounds like this discussion fits perfectly such a section. How do you feel about having such a section and moving this discussion there?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13284949" author="ikelly" created="Tue, 29 May 2012 18:30:36 +0100"  >&lt;p&gt;Spelling fixed.&lt;/p&gt;

&lt;p&gt;Regarding having a troubleshooting section, I think it would be better to wait until we have seen issues in the wild, and add them to the troubleshooting section as needed. I think trying to preemptively add troubleshooting without experience wouldn&apos;t be very useful.&lt;/p&gt;

&lt;p&gt;In fact, I think for 4.2.0 we should go through the mailing list and create a FAQ.&lt;/p&gt;</comment>
                            <comment id="13284952" author="fpj" created="Tue, 29 May 2012 18:36:39 +0100"  >&lt;p&gt;+1, fair enough the point about troubleshooting. There is still a typo in the Bookie Recovery page, not introduced by you. The one committing it, please fix it. &lt;/p&gt;</comment>
                            <comment id="13285122" author="fpj" created="Tue, 29 May 2012 22:03:21 +0100"  >&lt;p&gt;Committed revision 1343973, 1343986 (CHANGES.txt missing in the first commit).&lt;/p&gt;</comment>
                            <comment id="13285135" author="hudson" created="Tue, 29 May 2012 22:11:41 +0100"  >&lt;p&gt;Integrated in bookkeeper-trunk #533 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/533/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/533/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-270&quot; title=&quot;Review documentation on bookie cookie&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-270&quot;&gt;&lt;del&gt;BOOKKEEPER-270&lt;/del&gt;&lt;/a&gt;: Review documentation on bookie cookie (ivank via fpj) (Revision 1343981)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
fpj : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/doc/bookieRecovery.textile&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/doc/bookkeeperConfig.textile&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13285162" author="hudson" created="Tue, 29 May 2012 22:53:47 +0100"  >&lt;p&gt;Integrated in bookkeeper-trunk #534 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/534/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/534/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-270&quot; title=&quot;Review documentation on bookie cookie&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-270&quot;&gt;&lt;del&gt;BOOKKEEPER-270&lt;/del&gt;&lt;/a&gt;: Review documentation on bookie cookie (ivank via fpj) (Revision 1343986)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
fpj : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12530066" name="BOOKKEEPER-270.diff" size="9287" author="ikelly" created="Tue, 29 May 2012 18:30:36 +0100"/>
                            <attachment id="12530058" name="BOOKKEEPER-270.diff" size="9280" author="ikelly" created="Tue, 29 May 2012 18:06:32 +0100"/>
                            <attachment id="12530027" name="BOOKKEEPER-270.patch" size="6706" author="fpj" created="Tue, 29 May 2012 11:22:07 +0100"/>
                            <attachment id="12530026" name="BOOKKEEPER-270.patch" size="7377" author="fpj" created="Tue, 29 May 2012 11:19:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 May 2012 16:05:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy4s2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61704</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>