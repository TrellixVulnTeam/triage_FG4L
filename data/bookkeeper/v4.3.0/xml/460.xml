<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:31:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-460/BOOKKEEPER-460.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-460] LedgerDeleteTest checks wrong place for log file</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-460</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;A minor problem, it seems forgot to update LedgerDeleteTest after upgrade bookkeeper filesystem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
// Verify that the first entry log (0.log) has been deleted from all of the Bookie Servers.
for (File ledgerDirectory : tmpDirs) {
    for (File f : ledgerDirectory.listFiles()) {
        assertFalse(&lt;span class=&quot;code-quote&quot;&gt;&quot;Found the entry log file (0.log) that should have been deleted in ledgerDirectory: &quot;&lt;/span&gt; 
            + ledgerDirectory, f.isFile() &amp;amp;&amp;amp; f.getName().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;0.log&quot;&lt;/span&gt;));
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;Solution:&lt;br/&gt;
Just reuse the checkLogFiles method in CompactionTest.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12615595">BOOKKEEPER-460</key>
            <summary>LedgerDeleteTest checks wrong place for log file</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lvfangmin">Fangmin Lv</assignee>
                                    <reporter username="lvfangmin">Fangmin Lv</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Nov 2012 10:51:55 +0000</created>
                <updated>Wed, 13 Feb 2013 15:46:39 +0000</updated>
                            <resolved>Mon, 26 Nov 2012 15:43:33 +0000</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                    <component>bookkeeper-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13494637" author="fpj" created="Sat, 10 Nov 2012 11:49:41 +0000"  >&lt;p&gt;Thanks for the patch, Fangmin. I&apos;m mostly ok with the patch. The only point I&apos;m not really happy about is creating a new class to hold checkLogFiles. Can&apos;t we have it in some other base class or utility class that already exists? To be honest, I looked into it and couldn&apos;t find a better place, so if anyone else has a suggestion, please comment. In the case we do create a new class, it might be better to have it in the util package. &lt;/p&gt;</comment>
                            <comment id="13494698" author="lvfangmin" created="Sat, 10 Nov 2012 14:28:15 +0000"  >&lt;p&gt;Hi Flavio, I agree with your point, I don&apos;t want to create a new class either, as you say there is not a place for keeping the common used methods. What about keep the checkLogFiles in the CompactionTest as a static method, Anybody please give some suggestion?&lt;/p&gt;</comment>
                            <comment id="13496932" author="hustlmsp" created="Wed, 14 Nov 2012 08:02:24 +0000"  >&lt;p&gt;I agreed putting in src/test/java/org/apache/bookkeeper/util as Flavio proposed, other than in bookie package.&lt;/p&gt;</comment>
                            <comment id="13496938" author="hustlmsp" created="Wed, 14 Nov 2012 08:23:33 +0000"  >&lt;p&gt;Flavio, Could you help adding Fangmin in the contributors list and assign this jira to him? I could not find him in the list.&lt;/p&gt;</comment>
                            <comment id="13499614" author="lvfangmin" created="Sun, 18 Nov 2012 05:33:55 +0000"  >&lt;p&gt;Move the TestUtils under util package as Flavio and sijie suggestion.&lt;/p&gt;</comment>
                            <comment id="13502874" author="ikelly" created="Thu, 22 Nov 2012 17:44:29 +0000"  >&lt;p&gt;This method would be nicer as &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; TestUtils#hasLogFiles(File ledgerDirectory, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;... logIds);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This could then be used as &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertFalse(&lt;span class=&quot;code-quote&quot;&gt;&quot;Found the entry log file ([0,1].log) that should have been deleted in ledgerDirectory: &quot;&lt;/span&gt; + ledgerDirectory, TestUtils.hasLogFiles(ledgerDirectory, 0, 1));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13503466" author="lvfangmin" created="Sun, 25 Nov 2012 08:42:10 +0000"  >&lt;p&gt;@Ivan&lt;br/&gt;
Good idea, submit a patch according to your proposal.&lt;/p&gt;</comment>
                            <comment id="13503845" author="ikelly" created="Mon, 26 Nov 2012 15:43:33 +0000"  >&lt;p&gt;Committed r1413685. Thanks Fangmin.&lt;/p&gt;</comment>
                            <comment id="13503857" author="hudson" created="Mon, 26 Nov 2012 16:09:30 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk #818 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/818/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/818/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-460&quot; title=&quot;LedgerDeleteTest checks wrong place for log file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-460&quot;&gt;&lt;del&gt;BOOKKEEPER-460&lt;/del&gt;&lt;/a&gt;: LedgerDeleteTest checks wrong place for log file (Fangmin Lv via ivank) (Revision 1413685)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/CompactionTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerDeleteTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13503909" author="hudson" created="Mon, 26 Nov 2012 17:17:53 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk #819 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/819/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/819/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-460&quot; title=&quot;LedgerDeleteTest checks wrong place for log file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-460&quot;&gt;&lt;del&gt;BOOKKEEPER-460&lt;/del&gt;&lt;/a&gt;: LedgerDeleteTest checks wrong place for log file (Fangmin Lv via ivank) &lt;span class=&quot;error&quot;&gt;&amp;#91;missing file&amp;#93;&lt;/span&gt; (Revision 1413700)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/util/TestUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553941" name="BOOKKEEPER-460.diff" size="8936" author="lvfangmin" created="Sun, 18 Nov 2012 05:33:55 +0000"/>
                            <attachment id="12552970" name="BOOKKEEPER-460.diff" size="8540" author="lvfangmin" created="Sat, 10 Nov 2012 10:58:00 +0000"/>
                            <attachment id="12554789" name="BOOKKEEPER-460.patch" size="9706" author="lvfangmin" created="Sun, 25 Nov 2012 08:42:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 10 Nov 2012 11:49:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256894</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyct47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>108692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>