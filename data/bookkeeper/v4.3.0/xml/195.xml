<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:26:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-195/BOOKKEEPER-195.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-195] HierarchicalLedgerManager doesn&apos;t consider idgen as a &quot;specialNode&quot;</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-195</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;From IRC: &lt;/p&gt;

&lt;p&gt;21:58 &amp;lt;johnnagro&amp;gt; 2012-03-28 05:15:19,669 - ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main-EventThread:AbstractZkLedgerManager$2@105&amp;#93;&lt;/span&gt; - Error polling ZK for the available ledger nodes: &lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt; org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /ledgers/idgen/ID-0000106522&lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)&lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt;         at org.apache.bookkeeper.meta.AbstractZkLedgerManager$2.processResult(AbstractZkLedgerManager.java:105)&lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:594)&lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:497)&lt;br/&gt;
21:58 &amp;lt;johnnagro&amp;gt; i will look for the gc one&lt;br/&gt;
21:59 &amp;lt;ivank&amp;gt; thats quite strange&lt;br/&gt;
22:00 &amp;lt;ivank&amp;gt; this occurred in the server?&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt; ah they may be related, this one has some GC stuff&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt; 012-03-24 09:17:34,419 - WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;GarbageCollectorThread:HierarchicalLedgerManager@376&amp;#93;&lt;/span&gt; - Exception during garbage collecting ledgers for idgen of /ledgers&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt; 2012-03-24 09:56:31,080 - ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main-EventThread:AbstractZkLedgerManager$2@105&amp;#93;&lt;/span&gt; - Error polling ZK for the available ledger nodes: &lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt; org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /ledgers/idgen/ID-0000037474&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt;         at org.apache.bookkeeper.meta.AbstractZkLedgerManager$2.processResult(AbstractZkLedgerManager.java:105)&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:594)&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt;         at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:497)&lt;br/&gt;
22:02 &amp;lt;johnnagro&amp;gt; this happened on the server, yes.&lt;/p&gt;


&lt;p&gt;Looking into the code, it seems that HierarchicalLedgerManager doesn&apos;t consider idgen to be special. This is a race, between the idgen node being created and the znodes underneath being listed. The znodes underneath should never be listed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12548542">BOOKKEEPER-195</key>
            <summary>HierarchicalLedgerManager doesn&apos;t consider idgen as a &quot;specialNode&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2012 21:10:48 +0100</created>
                <updated>Mon, 22 Oct 2012 15:50:16 +0100</updated>
                            <resolved>Wed, 28 Mar 2012 23:02:57 +0100</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13240725" author="ikelly" created="Wed, 28 Mar 2012 21:51:03 +0100"  >&lt;p&gt;Fix is simple&lt;/p&gt;</comment>
                            <comment id="13240750" author="fpj" created="Wed, 28 Mar 2012 22:28:28 +0100"  >&lt;p&gt;+1, looks good to me.&lt;/p&gt;</comment>
                            <comment id="13240774" author="ikelly" created="Wed, 28 Mar 2012 23:02:58 +0100"  >&lt;p&gt;Committed as r1306616. Thanks for reviewing Flavio.&lt;/p&gt;</comment>
                            <comment id="13240793" author="hudson" created="Wed, 28 Mar 2012 23:33:30 +0100"  >&lt;p&gt;Integrated in bookkeeper-trunk #430 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/430/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/430/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-195&quot; title=&quot;HierarchicalLedgerManager doesn&amp;#39;t consider idgen as a &amp;quot;specialNode&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-195&quot;&gt;&lt;del&gt;BOOKKEEPER-195&lt;/del&gt;&lt;/a&gt;: HierarchicalLedgerManager doesn&apos;t consider idgen as a &quot;specialNode&quot; (ivank) (Revision 1306616)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520319" name="BOOKKEEPER-195.diff" size="1162" author="ikelly" created="Wed, 28 Mar 2012 21:54:48 +0100"/>
                            <attachment id="12520318" name="BOOKKEEPER-195.diff" size="1147" author="ikelly" created="Wed, 28 Mar 2012 21:50:57 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Mar 2012 21:28:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy4s1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>