<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:26:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-431/BOOKKEEPER-431.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-431] Duplicate definition of COOKIES_NODE</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-431</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Is it necessary two definitions of COOKIES_NODE, one in cookie.java and one in AbstractZkLedgerManager?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12611545">BOOKKEEPER-431</key>
            <summary>Duplicate definition of COOKIES_NODE</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="umamaheswararao">Uma Maheswara Rao G</assignee>
                                    <reporter username="fpj">Flavio Junqueira</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Oct 2012 16:50:46 +0100</created>
                <updated>Wed, 13 Feb 2013 15:46:25 +0000</updated>
                            <resolved>Sat, 8 Dec 2012 10:19:39 +0000</resolved>
                                    <version>4.1.0</version>
                                    <fixVersion>4.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13475099" author="fpj" created="Fri, 12 Oct 2012 17:03:48 +0100"  >&lt;p&gt;Actually, Cookie.java defines COOKIE_NODE while AbstractZkLedgerManager defines COOKIES_NODE. I also noticed that AVAILABLE_NODE is duplicated. Is it for readability reasons? Shouldn&apos;t we have that in a single place?&lt;/p&gt;</comment>
                            <comment id="13475101" author="umamaheswararao" created="Fri, 12 Oct 2012 17:08:33 +0100"  >&lt;p&gt;How about having a constants file and maintaining all such consts at place?&lt;br/&gt;
If we maintain the constants inside specific files, it is very easy to duplicate the consts.&lt;/p&gt;</comment>
                            <comment id="13475113" author="fpj" created="Fri, 12 Oct 2012 17:21:18 +0100"  >&lt;p&gt;Yeah, I&apos;d rather have the constants in one single place. COOKIE_NODE was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-263&quot; title=&quot;ZK ledgers root path is hard coded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-263&quot;&gt;&lt;del&gt;BOOKKEEPER-263&lt;/del&gt;&lt;/a&gt;, but before that we had BOOKIE_COOKIE_PATH, so I&apos;m not entirely sure what the history of duplication is. Ivan, Sijie, do you guys have any other insight to add here?&lt;/p&gt;</comment>
                            <comment id="13476059" author="hustlmsp" created="Mon, 15 Oct 2012 10:52:31 +0100"  >&lt;p&gt;seems that we had BOOKIE_COOKIE_PATH first in Cookie.java. then a fix to exclude Cookie znode from GC introduced COOKIES_NODE in AbstractZkLedgerManager. Then &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-263&quot; title=&quot;ZK ledgers root path is hard coded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-263&quot;&gt;&lt;del&gt;BOOKKEEPER-263&lt;/del&gt;&lt;/a&gt; remove hard coded path introduced COOKIE_NODE in Cookie.java.&lt;/p&gt;

&lt;p&gt;I agreed that it would be better to maintain constants in single place to avoid duplications.&lt;/p&gt;</comment>
                            <comment id="13477938" author="ikelly" created="Wed, 17 Oct 2012 16:00:55 +0100"  >&lt;p&gt;I can&apos;t remember what reason there was for adding the second one (possibly to avoid cross package dependencies). In any case, I do agree that it&apos;s better to have just one, for COOKIE_NODE and for AVAILABLE_NODE&lt;/p&gt;</comment>
                            <comment id="13508263" author="fpj" created="Sun, 2 Dec 2012 13:30:44 +0000"  >&lt;p&gt;Hi Uma, Do you think you&apos;ll have time to generate a patch for this one?&lt;/p&gt;</comment>
                            <comment id="13508887" author="umamaheswararao" created="Mon, 3 Dec 2012 17:40:40 +0000"  >&lt;p&gt;Hi Flavio, Sorry for the late on this JIRA. From past few days I was not getting time due to travels and internal schedules. I will sit tomorrow and generate patch for it. Also will check the reviews if I can provide some comments on others to get 4.2 out soon.&lt;/p&gt;</comment>
                            <comment id="13510177" author="umamaheswararao" created="Wed, 5 Dec 2012 00:42:28 +0000"  >&lt;p&gt;Attached initial patch. All are straight forward changes. Just extracting to consts file.&lt;/p&gt;</comment>
                            <comment id="13511413" author="fpj" created="Thu, 6 Dec 2012 14:30:23 +0000"  >&lt;p&gt;Thanks, Uma. The patch looks mostly good to me and I just have one comment. I was actually thinking that the we shouldn&apos;t move the configuration strings in AbstractConfiguration, ClientConfiguration, and ServerConfiguration to BookKeeperConstants. They belong in the respect configuration classes and I don&apos;t expect them to be accessed elsewhere. What do you think?&lt;/p&gt;</comment>
                            <comment id="13511558" author="hustlmsp" created="Thu, 6 Dec 2012 17:48:46 +0000"  >&lt;p&gt;Agreed that we don&apos;t need to move configuration settings from Configuration to Constants. &lt;/p&gt;

&lt;p&gt;besides that, one minor comment:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;public static final String ZK_LEDGERS_ROOT_PATH_DEFAULT = &quot;/ledgers&quot;;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;how about DEFAULT_ZK_LEDGERS_ROOT_PATH rather than ZK_LEDGERS_ROOT_PATH_DEFAULT ?&lt;/p&gt;</comment>
                            <comment id="13511580" author="umamaheswararao" created="Thu, 6 Dec 2012 18:18:04 +0000"  >&lt;p&gt;Thanks Flavio and Sijie for taking a look.&lt;br/&gt;
I don&apos;t have any strong reason to move them to Consts for Configs. Just followed like in Hadoop how I used to refer the config items for Const file. &lt;br/&gt;
For name also same reason I think.&lt;br/&gt;
ex. see Hadoop config name:   &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;  DFS_STREAM_BUFFER_SIZE_KEY = &lt;span class=&quot;code-quote&quot;&gt;&quot;dfs.stream-buffer-size&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;     DFS_STREAM_BUFFER_SIZE_DEFAULT = 4096;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I addressed thse 2 comments in this patch.&lt;/p&gt;</comment>
                            <comment id="13526212" author="umamaheswararao" created="Fri, 7 Dec 2012 08:03:01 +0000"  >&lt;p&gt;Oh, I missed to update DEFAULT_ZK_LEDGERS_ROOT_PATH change. Updated now.&lt;/p&gt;</comment>
                            <comment id="13527097" author="fpj" created="Sat, 8 Dec 2012 10:19:39 +0000"  >&lt;p&gt;+1, thanks, Uma. Committed revision 1418637.&lt;/p&gt;</comment>
                            <comment id="13527099" author="fpj" created="Sat, 8 Dec 2012 10:44:39 +0000"  >&lt;p&gt;The order of patches confused me, so I ended up not using the one that fixed the DEFAULT_ZK_LEDGERS_ROOT_PATH constant. I have just fixed it manually and committed the changes. Committed revision 1418638.&lt;/p&gt;</comment>
                            <comment id="13527110" author="fpj" created="Sat, 8 Dec 2012 11:05:17 +0000"  >&lt;p&gt;I&apos;m uploading the diff of what has been committed for future reference.&lt;/p&gt;</comment>
                            <comment id="13527122" author="hudson" created="Sat, 8 Dec 2012 12:17:10 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk #843 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/843/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/843/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-431&quot; title=&quot;Duplicate definition of COOKIES_NODE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-431&quot;&gt;&lt;del&gt;BOOKKEEPER-431&lt;/del&gt;&lt;/a&gt;: Duplicate definition of COOKIES_NODE (uma via fpj) (Revision 1418637)&lt;/p&gt;

&lt;p&gt;     Result = UNSTABLE&lt;br/&gt;
fpj : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileSystemUpgrade.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcher.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieServer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorElector.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/BookieLedgerIndexer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/util/BookKeeperConstants.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/bookie/LedgerCacheTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/meta/LedgerLayoutTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/TestLedgerUnderreplicationManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/TestReplicationWorker.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13527352" author="hudson" created="Sun, 9 Dec 2012 06:16:26 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk #844 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/844/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/844/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-431&quot; title=&quot;Duplicate definition of COOKIES_NODE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-431&quot;&gt;&lt;del&gt;BOOKKEEPER-431&lt;/del&gt;&lt;/a&gt;: Duplicate definition of COOKIES_NODE (uma via fpj). &lt;br/&gt;
Additional commit to fix the DEFAULT_ZK_LEDGERS_ROOT_PATH constant. (Revision 1418638)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
fpj : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/util/BookKeeperConstants.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/TestLedgerUnderreplicationManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/TestReplicationWorker.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12559829" name="BOOKKEEPER-431-1.patch" size="41097" author="umamaheswararao" created="Fri, 7 Dec 2012 07:59:45 +0000"/>
                            <attachment id="12556384" name="BOOKKEEPER-431-1.patch" size="41298" author="umamaheswararao" created="Thu, 6 Dec 2012 18:18:39 +0000"/>
                            <attachment id="12560024" name="BOOKKEEPER-431-committed.diff" size="41717" author="fpj" created="Sat, 8 Dec 2012 11:05:17 +0000"/>
                            <attachment id="12556028" name="BOOKKEEPER-431.patch" size="77567" author="umamaheswararao" created="Wed, 5 Dec 2012 00:39:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Oct 2012 16:08:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy30nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>51422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>