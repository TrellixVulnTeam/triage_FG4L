<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:31:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-765/BOOKKEEPER-765.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-765] bookkeeper script should fall back to java in path if JAVA_HOME is not set</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-765</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;The current behaviour requires JAVA_HOME to be set, which isn&apos;t set by default on all machines. So machines on which bookkeeper ran fine, no longer work.&lt;/p&gt;

&lt;p&gt;Solution is to fallback to java in path is JAVA_HOME not set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12718191">BOOKKEEPER-765</key>
            <summary>bookkeeper script should fall back to java in path if JAVA_HOME is not set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jun 2014 17:23:32 +0100</created>
                <updated>Tue, 10 Jun 2014 11:46:25 +0100</updated>
                            <resolved>Tue, 10 Jun 2014 11:04:20 +0100</resolved>
                                                    <fixVersion>4.3.0</fixVersion>
                    <fixVersion>4.2.3</fixVersion>
                                    <component>bookkeeper-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14016859" author="ikelly" created="Tue, 3 Jun 2014 17:37:57 +0100"  >&lt;p&gt;Falls back to PATH if JAVA_HOME not set. I also moved the java check to after the sourcing of bkenv.sh so that JAVA_HOME can be set there if needed.&lt;/p&gt;

&lt;p&gt;Did same for hedwig.&lt;/p&gt;</comment>
                            <comment id="14017013" author="hadoopqa" created="Tue, 3 Jun 2014 20:09:19 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-765&quot; title=&quot;bookkeeper script should fall back to java in path if JAVA_HOME is not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-765&quot;&gt;&lt;del&gt;BOOKKEEPER-765&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12648187/0001-BOOKKEEPER-765-bookkeeper-script-should-fall-back-to.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-BOOKKEEPER-765-bookkeeper-script-should-fall-back-to.patch&lt;/a&gt; downloaded at Tue Jun  3 19:04:51 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; Patch failed to apply to head of branch&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;</comment>
                            <comment id="14017736" author="hadoopqa" created="Wed, 4 Jun 2014 15:52:34 +0100"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-765&quot; title=&quot;bookkeeper script should fall back to java in path if JAVA_HOME is not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-765&quot;&gt;&lt;del&gt;BOOKKEEPER-765&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12648323/0001-BOOKKEEPER-765-bookkeeper-script-should-fall-b.trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;0001-BOOKKEEPER-765-bookkeeper-script-should-fall-b.trunk.patch&lt;/a&gt; downloaded at Wed Jun  4 14:16:04 UTC 2014&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;-1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 120&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; the patch does not add/modify any testcase&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
.    &lt;font color=&quot;red&quot;&gt;WARNING&lt;/font&gt;: the current HEAD has 23 Javadoc warning(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 FINDBUGS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Findbugs warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 920&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;&lt;b&gt;-1 Overall result, please check the reported -1(s)&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;.   There is at least one warning, please check&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/652/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk-precommit-build/652/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14018679" author="fpj" created="Thu, 5 Jun 2014 12:09:41 +0100"  >&lt;p&gt;I&apos;m wondering if falling back to &quot;which java&quot; could cause any problem. In this machine at least, &quot;which java&quot; points to the java executable in /usr/bin but not the real java home. Just to confirm, is the java executable all we need?&lt;/p&gt;</comment>
                            <comment id="14018708" author="ikelly" created="Thu, 5 Jun 2014 12:50:25 +0100"  >&lt;p&gt;all we need is the java executable. That&apos;s all we were using until we made the previous change to allow JAVA_HOME. JAVA_HOME is only really useful if you have multiple java installs.&lt;/p&gt;</comment>
                            <comment id="14019836" author="rakeshr" created="Fri, 6 Jun 2014 14:23:25 +0100"  >&lt;blockquote&gt;&lt;p&gt;all we need is the java executable&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;JAVA_HOME checks added as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-712&quot; title=&quot;bookkeeper script should use &amp;#39;java&amp;#39; from JAVA_HOME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-712&quot;&gt;&lt;del&gt;BOOKKEEPER-712&lt;/del&gt;&lt;/a&gt;. I agree this fix will at least make my server run. But I&apos;ve one doubt, assume user by mistake not set JAVA_HOME and starting with &apos;which version&apos;. Will this creates problem like, my server started with older version and later point of time unfortunately when tries to execute few statements(which needs higher version) the process can crash or unresponsive ?. Previously user would get err messages during start up itself.&lt;/p&gt;</comment>
                            <comment id="14019843" author="fpj" created="Fri, 6 Jun 2014 14:34:03 +0100"  >&lt;p&gt;Until we reach agreement.&lt;/p&gt;</comment>
                            <comment id="14026252" author="ikelly" created="Tue, 10 Jun 2014 09:59:24 +0100"  >&lt;blockquote&gt;&lt;p&gt;Will this creates problem like, my server started with older version and later point of time unfortunately when tries to execute few statements(which needs higher version) the process can crash or unresponsive ?.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This won&apos;t happen. I assume you&apos;re talking about the bytecodes in the jvm version? We explicitly tell it to generate 1.6 version byte code. This will not run on anything below 1.6. Anything above will run it exactly the same.&lt;/p&gt;</comment>
                            <comment id="14026259" author="rakeshr" created="Tue, 10 Jun 2014 10:16:57 +0100"  >&lt;p&gt;OK cool.&lt;/p&gt;

&lt;p&gt;Just one comment. Please include which java going to use in echo message.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
echo &lt;span class=&quot;code-quote&quot;&gt;&quot;JAVA_HOME not set, using java from PATH $JAVA&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14026265" author="ikelly" created="Tue, 10 Jun 2014 10:30:15 +0100"  >&lt;p&gt;Added echo of java used when JAVA_HOME not set. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; this ready to go now?&lt;/p&gt;</comment>
                            <comment id="14026278" author="rakeshr" created="Tue, 10 Jun 2014 10:44:48 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivank%40yahoo-inc.com&quot; class=&quot;user-hover&quot; rel=&quot;ivank@yahoo-inc.com&quot;&gt;Ivan Kelly&lt;/a&gt;. &lt;br/&gt;
Please modify &quot;hedwig-server/bin/hedwig&quot; for the above comment. Apart from this +1 from me&lt;/p&gt;</comment>
                            <comment id="14026293" author="ikelly" created="Tue, 10 Jun 2014 11:04:20 +0100"  >&lt;p&gt;Committed r1601592 to trunk.&lt;br/&gt;
Committed revision 1601593 to branch-4.2.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews guys.&lt;/p&gt;</comment>
                            <comment id="14026313" author="hudson" created="Tue, 10 Jun 2014 11:46:25 +0100"  >&lt;p&gt;SUCCESS: Integrated in bookkeeper-trunk #666 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/666/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/666/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-765&quot; title=&quot;bookkeeper script should fall back to java in path if JAVA_HOME is not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-765&quot;&gt;&lt;del&gt;BOOKKEEPER-765&lt;/del&gt;&lt;/a&gt; bookkeeper script should fall back to java in path if JAVA_HOME is not set (ivank) (ivank: rev 1601592)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/bin/bookkeeper&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/conf/bkenv.sh&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/bin/hedwig&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/conf/hwenv.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12649556" name="0001-BOOKKEEPER-765-bookkeeper-script-should-fall-b.trunk.patch" size="4474" author="ikelly" created="Tue, 10 Jun 2014 10:30:15 +0100"/>
                            <attachment id="12648323" name="0001-BOOKKEEPER-765-bookkeeper-script-should-fall-b.trunk.patch" size="4470" author="ikelly" created="Wed, 4 Jun 2014 13:36:55 +0100"/>
                            <attachment id="12649555" name="0001-BOOKKEEPER-765-bookkeeper-script-should-fall-bac.b42.patch" size="4492" author="ikelly" created="Tue, 10 Jun 2014 10:30:15 +0100"/>
                            <attachment id="12648187" name="0001-BOOKKEEPER-765-bookkeeper-script-should-fall-back-to.patch" size="4484" author="ikelly" created="Tue, 3 Jun 2014 17:37:57 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Jun 2014 19:09:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396393</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq3nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>