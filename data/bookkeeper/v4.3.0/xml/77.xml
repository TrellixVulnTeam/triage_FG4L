<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:29:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-77/BOOKKEEPER-77.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-77] Add a console client for hedwig</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-77</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;implement a console client to use/admin hedwig system.&lt;/p&gt;

&lt;p&gt;Usage : hedwig_console &lt;span class=&quot;error&quot;&gt;&amp;#91;options&amp;#93;&lt;/span&gt; COMMAND &lt;span class=&quot;error&quot;&gt;&amp;#91;argument ...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;(if no COMMAND specified, hedwig_console will enter interactive mode.)&lt;/p&gt;

&lt;p&gt;OPTIONS:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;   --zkquorums            the quorum list of zookeeper cluster&lt;br/&gt;
   --zktimeout            timeout of zookeeper client&lt;br/&gt;
   --zk_hedwig_prefix     the prefix of zookeeper path to store hedwig metadata&lt;br/&gt;
   --region               which region of hedwig to connect&lt;br/&gt;
   --consume_interval     the consume interval of hub server&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;COMMANDS:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;pub &amp;lt;topic&amp;gt; &amp;lt;message&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Publish &amp;lt;message&amp;gt; to the specified &amp;lt;topic&amp;gt;.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;sub &amp;lt;topic&amp;gt; &amp;lt;subscriber_id&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;mode&amp;#93;&lt;/span&gt;
	&lt;ul&gt;
		&lt;li&gt;Subscribe the specified &amp;lt;topic&amp;gt; as subscriber &amp;lt;subscriber_id&amp;gt;. (NOTE: only run in INTERACTIVE mode now)&lt;/li&gt;
		&lt;li&gt;mode: subscription mode. available values are 0, 1, 2.
		&lt;ul&gt;
			&lt;li&gt;0 = CREATE : create the subscription if not subscription before.&lt;/li&gt;
			&lt;li&gt;1 = ATTACH (default) : attach the subscription&lt;/li&gt;
			&lt;li&gt;2 = CREATE_OR_ATTACH : if the subscription is not existed, create the subscription then attach.&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;closesub &amp;lt;topic&amp;gt; &amp;lt;subscriber_id&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Close subscription of subscriber &amp;lt;subscriber_id&amp;gt;. (NOTE: it just close the subscription connection and do cleanup work in client-side, without REMOVING subscription state from server side)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;unsub &amp;lt;topic&amp;gt; &amp;lt;subscriber_id&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Remove subscription state of subscriber &amp;lt;subscriber_id&amp;gt;. the subscription state of subscriber &amp;lt;subscriber_id&amp;gt; will be removed from server side.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;consume &amp;lt;topic&amp;gt; &amp;lt;subscriber_id&amp;gt; &amp;lt;num_messages_to_consume&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Move the subscription ptr of subscriber &amp;lt;subscriber_id&amp;gt; from ptr to ptr + num_messages_to_consume.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;consumeto &amp;lt;topic&amp;gt; &amp;lt;subscriber_id&amp;gt; &amp;lt;message_id&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;Move the subscription ptr of subscriber &amp;lt;subscriber_id&amp;gt; from ptr to &amp;lt;message_id&amp;gt;.&lt;/li&gt;
		&lt;li&gt;NOTE: consume*/*consumeto just sent consume request to hub server and hub server move the subscription ptr in its memory. Hub server lazily persists the subscription ptr to zookeeper. the default persist interval in hub server is 50 messages. so use DESCRIBE TOPIC to show subscription, the subscription ptr might be not changed.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;pubsub &amp;lt;topic&amp;gt; &amp;lt;subscriber_id_prefix&amp;gt; &amp;lt;timeout_secs&amp;gt; &amp;lt;message_prefix&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;A test command to test healthy of hedwig cluster.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;sub &amp;lt;topic&amp;gt; as subscriber &amp;lt;subscriber_id_prefix&amp;gt;_&amp;lt;cur_time&amp;gt; .&lt;/li&gt;
		&lt;li&gt;subscriber &amp;lt;subscriber_id_prefix&amp;gt;_&amp;lt;cur_time&amp;gt; will wait a message until &amp;lt;timeout_secs&amp;gt; secs.&lt;/li&gt;
		&lt;li&gt;publish a message &amp;lt;message_prefix&amp;gt;_&amp;lt;cur_time&amp;gt; to topic &amp;lt;topic&amp;gt; .&lt;/li&gt;
		&lt;li&gt;when subscriber &amp;lt;subscriber_id_prefix&amp;gt; receive the message, it will check the message is the published message&lt;/li&gt;
		&lt;li&gt;received message or timeout, subscriber &amp;lt;subscriber_id_prefix&amp;gt; will unsubscribe the &amp;lt;topic&amp;gt;&lt;/li&gt;
		&lt;li&gt;quit&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;
&lt;p&gt;      &lt;span class=&quot;error&quot;&gt;&amp;#91;hedwig: (standalone) 7&amp;#93;&lt;/span&gt; pubsub ttttttttt test 10 test_message&lt;br/&gt;
      Starting PUBSUB test ...&lt;br/&gt;
      Sub topic ttttttttt, subscriber id test-1319602021044&lt;br/&gt;
      Pub topic ttttttttt : test_message-1319602021044&lt;br/&gt;
      Received message : test_message-1319602021044&lt;br/&gt;
      PUBSUB SUCCESS. TIME: 43 MS&lt;br/&gt;
      SUCCESS. Finished 0.058 s&lt;/p&gt;&lt;/blockquote&gt;  

&lt;ul&gt;
	&lt;li&gt;show hubs
	&lt;ul&gt;
		&lt;li&gt;list all available hub servers. including hostname and how many topics the server owns.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;
&lt;p&gt;      Example:&lt;/p&gt;

&lt;p&gt;      Available Hub Servers:&lt;br/&gt;
              98.137.99.27:9875:9876 :        2&lt;/p&gt;&lt;/blockquote&gt;


&lt;ul&gt;
	&lt;li&gt;show topics
	&lt;ul&gt;
		&lt;li&gt;list all existing topics. (NOTE: since we fetch topic lists from zookeeper, we may got PacketLenException when we have millions of topics. it doesn&apos;t affect system, just can&apos;t display the topic list)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;describe topic &amp;lt;topic&amp;gt;
	&lt;ul&gt;
		&lt;li&gt;show state of a specified topic, including topic owner, topic persistent information, topic subscriber list and their subscription states.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;
&lt;p&gt;      Example:&lt;/p&gt;

&lt;p&gt;      ===== Topic Information : ttttt =====&lt;/p&gt;

&lt;p&gt;      Owner : 98.137.99.27:9875:9876&lt;/p&gt;

&lt;p&gt;      &amp;gt;&amp;gt;&amp;gt; Persistence Info &amp;lt;&amp;lt;&amp;lt;&lt;br/&gt;
      Ledger 54729 [ 1 ~ 59 ]&lt;br/&gt;
      Ledger 54731 [ 60 ~ 60 ]&lt;/p&gt;

&lt;p&gt;      &amp;gt;&amp;gt;&amp;gt; Subscription Info &amp;lt;&amp;lt;&amp;lt;&lt;br/&gt;
      Subscriber mysub : consumeSeqId: local:50&lt;/p&gt;&lt;/blockquote&gt;


&lt;ul&gt;
	&lt;li&gt;readtopic &amp;lt;topic&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;start_msg_id&amp;#93;&lt;/span&gt;
	&lt;ul&gt;
		&lt;li&gt;read messages of a specified &amp;lt;topic&amp;gt;.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;no &amp;lt;start_msg_id&amp;gt; specified : readtopic will start from &amp;lt;least_consumed_message_id&amp;gt; + 1 of its subscribers. in above exmaple, &quot;readtopic ttttt&quot; will start from 50. if there is no subscription, it will start from 1.&lt;/li&gt;
			&lt;li&gt;&amp;lt;start_msg_id&amp;gt; specified : since messages consumed will be removed by garbage collection. so readtopic tries to not read consumed message, it will start from MAX( &amp;lt;start_msg_id&amp;gt; , &amp;lt;least_consumed_message_id&amp;gt; ).&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Message Format
			&lt;ul&gt;
				&lt;li&gt;MsgId : include two parts: first part is which region the message is published from, second part is message id.&lt;/li&gt;
				&lt;li&gt;SrcRegion : region name&lt;/li&gt;
				&lt;li&gt;Message : the message body
&lt;blockquote&gt;
&lt;p&gt;            ---------- MSGID=LOCAL(51) ----------&lt;br/&gt;
            MsgId:     LOCAL(51)&lt;br/&gt;
            SrcRegion: standalone&lt;br/&gt;
            Message:&lt;/p&gt;

&lt;p&gt;            hello&lt;/p&gt;&lt;/blockquote&gt;         &lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;history
	&lt;ul&gt;
		&lt;li&gt;list history commands&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;redo &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;lt;cmdno&amp;gt;|!&amp;#93;&lt;/span&gt;
	&lt;ul&gt;
		&lt;li&gt;redo the specified command by command no. (NOTE: &quot;*redo *&quot; means redo the previous command)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;help
	&lt;ul&gt;
		&lt;li&gt;print help information&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;quit|exit
	&lt;ul&gt;
		&lt;li&gt;exit the interactive console&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12526315">BOOKKEEPER-77</key>
            <summary>Add a console client for hedwig</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="hustlmsp">Sijie Guo</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2011 12:59:33 +0100</created>
                <updated>Thu, 2 May 2013 03:29:45 +0100</updated>
                            <resolved>Wed, 8 Feb 2012 10:50:22 +0000</resolved>
                                    <version>4.0.0</version>
                                    <fixVersion>4.1.0</fixVersion>
                                    <component>hedwig-client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13123444" author="hustlmsp" created="Sat, 8 Oct 2011 13:00:58 +0100"  >&lt;p&gt;attach a draft version of hedwig console client.&lt;/p&gt;</comment>
                            <comment id="13135850" author="hustlmsp" created="Wed, 26 Oct 2011 11:19:54 +0100"  >&lt;p&gt;implementation of hedwig console:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;pub
	&lt;ul&gt;
		&lt;li&gt;use hedwigclient.getPublisher().publish(...)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;sub
	&lt;ul&gt;
		&lt;li&gt;use hedwigclient.getSubscriber().subscribe()&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;closesub
	&lt;ul&gt;
		&lt;li&gt;use hedwigclient.getSubscriber().closeSubscription()&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;unsub
	&lt;ul&gt;
		&lt;li&gt;use hedwigclient.getSubscriber().unsubscribe()&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;consume/consumeto
	&lt;ul&gt;
		&lt;li&gt;use hedwigclient.getSubscriber().consume()&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;pubsub
	&lt;ol&gt;
		&lt;li&gt;sub &amp;lt;topic&amp;gt; as subscriber &amp;lt;subscriber_id_prefix&amp;gt;_&amp;lt;cur_time&amp;gt; .&lt;/li&gt;
		&lt;li&gt;subscriber &amp;lt;subscriber_id_prefix&amp;gt;_&amp;lt;cur_time&amp;gt; will wait a message until &amp;lt;timeout_secs&amp;gt; secs.&lt;/li&gt;
		&lt;li&gt;publish a message &amp;lt;message_prefix&amp;gt;_&amp;lt;cur_time&amp;gt; to topic &amp;lt;topic&amp;gt; .&lt;/li&gt;
		&lt;li&gt;when subscriber &amp;lt;subscriber_id_prefix&amp;gt; receive the message, it will check the message is the published message&lt;/li&gt;
		&lt;li&gt;received message or timeout, subscriber &amp;lt;subscriber_id_prefix&amp;gt; will unsubscribe the &amp;lt;topic&amp;gt;&lt;/li&gt;
		&lt;li&gt;quit&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;describe topic
	&lt;ol&gt;
		&lt;li&gt;check whether the topic existed or not : zk.exists(&quot;/hedwig/&amp;lt;region&amp;gt;/topics/&amp;lt;topic&amp;gt;&quot;).
		&lt;ol&gt;
			&lt;li&gt;if existed, go next&lt;/li&gt;
			&lt;li&gt;else return&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
		&lt;li&gt;read the topic owner from zookeeper : /hedwig/&amp;lt;region&amp;gt;/topics/&amp;lt;topic&amp;gt;/owner&lt;/li&gt;
		&lt;li&gt;read the persistent information from zookeeper : /hedwig/&amp;lt;region&amp;gt;/topics/&amp;lt;topic&amp;gt;/ledgers
		&lt;ol&gt;
			&lt;li&gt;for each ledger, parse its data to get its start message id and end message id
			&lt;ol&gt;
				&lt;li&gt;if the ledger is not closed (which means the ledger is used for persist messages not), we use bookkeeper client to openLedgerNoRecovery to read the lastConfirmed message id&lt;/li&gt;
			&lt;/ol&gt;
			&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
		&lt;li&gt;read the subscription information from zookeeper : /hedwig/&amp;lt;region&amp;gt;/topics/&amp;lt;topic&amp;gt;/subscribers
		&lt;ol&gt;
			&lt;li&gt;for each subscriber, parse its data to get the subscription state&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;readtopic
	&lt;ol&gt;
		&lt;li&gt;check whether the topic existed or not : zk.exists(&quot;/hedwig/&amp;lt;region&amp;gt;/topics/&amp;lt;topic&amp;gt;&quot;).&lt;/li&gt;
		&lt;li&gt;read the persistent information from zookeeper&lt;/li&gt;
		&lt;li&gt;read the subscription information from zookeeper to get the &amp;lt;least_consumed_message_id&amp;gt;&lt;/li&gt;
		&lt;li&gt;find &amp;lt;start_message_id&amp;gt; by MAX( &amp;lt;least_consumed_message_id&amp;gt;, &amp;lt;start_message_id&amp;gt; )&lt;/li&gt;
		&lt;li&gt;loop over the ledgers used for persisting messsages
		&lt;ol&gt;
			&lt;li&gt;for each ledger, if the messages are all less than &amp;lt;start_message_id&amp;gt;, skip the ledger&lt;/li&gt;
			&lt;li&gt;otherwise, open ledger by calling openLedgerNoRecovery (just for reading) to read the messages and format them&lt;/li&gt;
		&lt;/ol&gt;
		&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;show hubs&lt;/li&gt;
	&lt;li&gt;fetch list of hosts from zookeeper /hedwig/&amp;lt;region&amp;gt;/available , for each host read its data and convert it to integer.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;show topics
	&lt;ul&gt;
		&lt;li&gt;fetch list of topics from zookeeper /hedwig/&amp;lt;region&amp;gt;/topics&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13135852" author="hustlmsp" created="Wed, 26 Oct 2011 11:22:16 +0100"  >&lt;p&gt;since hedwig_console will use zookeeper client to read metadata, use hedwig client to interact with hedwig, use bookkeeper client to openLedgerNoRecovery to read messages. &lt;/p&gt;

&lt;p&gt;so let hedwig_console be a independent module.&lt;/p&gt;

&lt;p&gt;attach it as a package.&lt;/p&gt;</comment>
                            <comment id="13135854" author="ikelly" created="Wed, 26 Oct 2011 11:23:16 +0100"  >&lt;p&gt;Could you put this patch in review board? &lt;/p&gt;</comment>
                            <comment id="13135855" author="hustlmsp" created="Wed, 26 Oct 2011 11:24:35 +0100"  >&lt;p&gt;hedwig console needs to use bookkeeper#openLedgerNoRecovery to read topic messages. &lt;/p&gt;</comment>
                            <comment id="13135859" author="jiraposter@reviews.apache.org" created="Wed, 26 Oct 2011 11:53:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2570/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;using zookeeper client to read metadata, use hedwig client to interact with hedwig, use bookkeeper client to openLedgerNoRecovery to read messages to implement a hedwig console&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; title=&quot;Add a console client for hedwig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-77&quot;&gt;&lt;del&gt;BOOKKEEPER-77&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/BOOKKEEPER-77&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/bin/hedwig_console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/bin/hedwig_console&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig-env.sh&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig-env.sh&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig_console.conf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig_console.conf&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/pom.xml&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/JLineHedwigCompletor.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/JLineHedwigCompletor.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/ReadTopic.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/ReadTopic.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/pom.xml&lt;/a&gt; 1188996 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2570/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sijie&lt;/p&gt;
</comment>
                            <comment id="13135872" author="jiraposter@reviews.apache.org" created="Wed, 26 Oct 2011 12:19:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2570/#review2854&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/#review2854&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;This is very nice &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;I have a few general comments. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Firstly, I dont think it should be a separate package. I would be inclined to include it in hedwig-server, and put the a cli option in hedwig-server/bin/hedwig. Its an admin tool really, so it should go with the server.&lt;/li&gt;
	&lt;li&gt;Is it possible to intergrate some help with the actual commands. I don&apos;t know about jline, but when I&apos;ve done cli interfaces in the past it&apos;s always been possible to attach the help to the actual commands.&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2570/#comment6388&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/#comment6388&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Could you add a &quot;show subscriptions&quot; here.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2570/#comment6389&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/#comment6389&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    zkquorums should be zkquorum, or even better zkserver. you only need to connect to one server, not a quorum and it&apos;s unlikely you&apos;ll change zkserver during the lifetime of the client.&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&lt;/a&gt;&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2570/#comment6390&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/#comment6390&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    These keys should be defined as final static Strings rather than using the actual string for each option.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ivan&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-10-26 10:54:04, Sijie Guo wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2570/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-10-26 10:54:04)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;using zookeeper client to read metadata, use hedwig client to interact with hedwig, use bookkeeper client to openLedgerNoRecovery to read messages to implement a hedwig console&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; title=&quot;Add a console client for hedwig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-77&quot;&gt;&lt;del&gt;BOOKKEEPER-77&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/BOOKKEEPER-77&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/bin/hedwig_console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/bin/hedwig_console&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig-env.sh&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig-env.sh&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig_console.conf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/conf/hedwig_console.conf&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/pom.xml&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/HedwigConsole.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/JLineHedwigCompletor.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/JLineHedwigCompletor.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/ReadTopic.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-console/src/main/java/org/apache/hedwig/client/console/ReadTopic.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/pom.xml&lt;/a&gt; 1188996 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2570/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Sijie&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13138243" author="jiraposter@reviews.apache.org" created="Fri, 28 Oct 2011 12:58:32 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2570/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-10-28 11:59:22.626468)&lt;/p&gt;


&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;made changed according to Ivan&apos;s suggestions:&lt;br/&gt;
1) move it to hedwig-server, so the console can be distributed with hedwig-server, which ease administration.&lt;br/&gt;
2) move commands and options to a separated file, change them to final static strings.&lt;br/&gt;
3) can use &apos;help &amp;lt;command&amp;gt;&apos; to display detail usage for a specific command&lt;br/&gt;
4) change zkquorum to zkserver&lt;/p&gt;

&lt;p&gt;since, &apos;describe topic &amp;lt;topic&amp;gt;&apos; can display subscriptions of a specific topic, so I didn&apos;t add a new command for &apos;show subscriptions&apos;.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;using zookeeper client to read metadata, use hedwig client to interact with hedwig, use bookkeeper client to openLedgerNoRecovery to read messages to implement a hedwig console&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; title=&quot;Add a console client for hedwig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-77&quot;&gt;&lt;del&gt;BOOKKEEPER-77&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/BOOKKEEPER-77&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/bin/hedwig&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/bin/hedwig&lt;/a&gt; 1188996 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/pom.xml&lt;/a&gt; 1188996 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigCommands.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigCommands.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigConsole.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/JLineHedwigCompletor.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/JLineHedwigCompletor.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/ReadTopic.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/ReadTopic.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2570/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sijie&lt;/p&gt;
</comment>
                            <comment id="13197866" author="ikelly" created="Wed, 1 Feb 2012 14:28:08 +0000"  >&lt;p&gt;This needs to be brought up to date with trunk. The code needs to be changed to use the post 4.0 hedwig api. &lt;/p&gt;</comment>
                            <comment id="13197878" author="hustlmsp" created="Wed, 1 Feb 2012 14:45:28 +0000"  >&lt;p&gt;thanks, I would create a patch based on trunk.&lt;/p&gt;</comment>
                            <comment id="13198749" author="jiraposter@reviews.apache.org" created="Thu, 2 Feb 2012 12:49:52 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2570/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2012-02-02 12:48:24.354170)&lt;/p&gt;


&lt;p&gt;Review request for bookkeeper.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;attach a new patch based on trunk. in this patch, I did some cleanup to move all the meta-related operations such as getTopics, show topic info into a admin class. &lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;using zookeeper client to read metadata, use hedwig client to interact with hedwig, use bookkeeper client to openLedgerNoRecovery to read messages to implement a hedwig console&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; title=&quot;Add a console client for hedwig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-77&quot;&gt;&lt;del&gt;BOOKKEEPER-77&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/BOOKKEEPER-77&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/bin/hedwig&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/bin/hedwig&lt;/a&gt; 1239585 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/pom.xml&lt;/a&gt; 1239585 &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigCommands.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigCommands.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigConsole.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigConsole.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/JLineHedwigCompletor.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/JLineHedwigCompletor.java&lt;/a&gt; PRE-CREATION &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/ReadTopic.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/ReadTopic.java&lt;/a&gt; PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2570/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2570/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sijie&lt;/p&gt;
</comment>
                            <comment id="13203461" author="ikelly" created="Wed, 8 Feb 2012 10:50:22 +0000"  >&lt;p&gt;Committed as r1241858. Good work Sijie!&lt;/p&gt;</comment>
                            <comment id="13203484" author="hudson" created="Wed, 8 Feb 2012 11:22:19 +0000"  >&lt;p&gt;Integrated in bookkeeper-trunk #349 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/349/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/349/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-77&quot; title=&quot;Add a console client for hedwig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-77&quot;&gt;&lt;del&gt;BOOKKEEPER-77&lt;/del&gt;&lt;/a&gt;: Add a console client for hedwig (Sijie Guo via ivank)&lt;/p&gt;

&lt;p&gt;ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/bin/hedwig&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigCommands.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/HedwigConsole.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/JLineHedwigCompletor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-server/src/main/java/org/apache/hedwig/admin/console/ReadTopic.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12528680">BOOKKEEPER-93</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12512940" name="BK-77.patch" size="88932" author="hustlmsp" created="Thu, 2 Feb 2012 12:48:49 +0000"/>
                            <attachment id="12498296" name="bookkeeper-77-draft.patch" size="34844" author="hustlmsp" created="Sat, 8 Oct 2011 13:00:58 +0100"/>
                            <attachment id="12500858" name="hedwig-console.tar.gz" size="15196" author="hustlmsp" created="Wed, 26 Oct 2011 11:22:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Oct 2011 10:23:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy4s07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>