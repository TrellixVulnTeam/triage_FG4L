<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:26:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-103/BOOKKEEPER-103.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-103] ledgerId and entryId is parsed wrong when addEntry</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-103</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;this case is found when openLedger using a wrong password.&lt;/p&gt;

&lt;p&gt;openLedger uses wrong password to do recovery, so the addEntry in bookie server will fail.&lt;br/&gt;
Then bookie server will sent a response with wrong ledgerId and entryId.&lt;br/&gt;
And openLedger can&apos;t receive response with right ledgerId and entryId, the program will hang there.&lt;/p&gt;

&lt;p&gt;--------- log messages ---------------&lt;/p&gt;


&lt;p&gt;2011-11-04 13:37:58,271 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-55-thread-1:PerChannelBookieClient@495&amp;#93;&lt;/span&gt; - Got response for read request from bookie: /10.82.129.91:5000 for ledger: 1 entry: -1 rc: 0entry length: 59&lt;br/&gt;
2011-11-04 13:37:58,269 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@185&amp;#93;&lt;/span&gt; - Received new read request: 1, -1&lt;br/&gt;
2011-11-04 13:37:58,273 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@189&amp;#93;&lt;/span&gt; - ##### Read entry ##### 59&lt;br/&gt;
2011-11-04 13:37:58,273 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@220&amp;#93;&lt;/span&gt; - Sending response for: -1, &apos;J####ookKeeper is cool!&lt;br/&gt;
2011-11-04 13:37:58,273 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-55-thread-1:PerChannelBookieClient@495&amp;#93;&lt;/span&gt; - Got response for read request from bookie: /10.82.129.91:5002 for ledger: 1 entry: -1 rc: 0entry length: 59&lt;br/&gt;
2011-11-04 13:37:58,273 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-55-thread-1:PendingReadOp@77&amp;#93;&lt;/span&gt; - Acquiring lock: 29&lt;br/&gt;
2011-11-04 13:37:58,269 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;New I/O client worker #8-3:PerChannelBookieClient$3@280&amp;#93;&lt;/span&gt; - Successfully wrote request for reading entry: -1 ledger-id: 1 bookie: /10.82.129.91:5001&lt;br/&gt;
2011-11-04 13:37:58,274 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;New I/O client worker #8-3:PerChannelBookieClient$3@280&amp;#93;&lt;/span&gt; - Successfully wrote request for reading entry: 29 ledger-id: 1 bookie: /10.82.129.91:5001&lt;br/&gt;
2011-11-04 13:37:58,274 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@185&amp;#93;&lt;/span&gt; - Received new read request: 1, 29&lt;br/&gt;
2011-11-04 13:37:58,274 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@189&amp;#93;&lt;/span&gt; - ##### Read entry ##### 59&lt;br/&gt;
2011-11-04 13:37:58,275 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@220&amp;#93;&lt;/span&gt; - Sending response for: 29, :###BookKeeper is cool!&lt;br/&gt;
2011-11-04 13:37:58,275 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-55-thread-1:PerChannelBookieClient@495&amp;#93;&lt;/span&gt; - Got response for read request from bookie: /10.82.129.91:5001 for ledger: 1 entry: -1 rc: 0entry length: 59&lt;br/&gt;
2011-11-04 13:37:58,275 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-55-thread-1:PerChannelBookieClient@495&amp;#93;&lt;/span&gt; - Got response for read request from bookie: /10.82.129.91:5001 for ledger: 1 entry: 29 rc: 0entry length: 59&lt;br/&gt;
2011-11-04 13:37:58,275 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-55-thread-1:PendingReadOp@147&amp;#93;&lt;/span&gt; - Releasing lock: 29&lt;br/&gt;
2011-11-04 13:37:58,276 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;New I/O client worker #8-3:PerChannelBookieClient$2@245&amp;#93;&lt;/span&gt; - Successfully wrote request for adding entry: 29 ledger-id: 1 bookie: /10.82.129.91:5001 entry length: 59&lt;br/&gt;
2011-11-04 13:37:58,276 - DEBUG - &lt;span class=&quot;error&quot;&gt;&amp;#91;New I/O client worker #8-1:PerChannelBookieClient$2@245&amp;#93;&lt;/span&gt; - Successfully wrote request for adding entry: 29 ledger-id: 1 bookie: /10.82.129.91:5000 entry length: 59&lt;br/&gt;
2011-11-04 13:37:58,277 - ERROR - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@179&amp;#93;&lt;/span&gt; - Unauthorized access to ledger 1155778282460938774&lt;br/&gt;
2011-11-04 13:37:58,286 - ERROR - &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerFactory:BookieServer@179&amp;#93;&lt;/span&gt; - Unauthorized access to ledger 1155778282460938774&lt;/p&gt;

&lt;p&gt;ledger id should be 1 but when it is 1155778282460938774&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530241">BOOKKEEPER-103</key>
            <summary>ledgerId and entryId is parsed wrong when addEntry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="hustlmsp">Sijie Guo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Nov 2011 09:10:55 +0000</created>
                <updated>Wed, 7 Dec 2011 15:56:17 +0000</updated>
                            <resolved>Fri, 4 Nov 2011 09:20:45 +0000</resolved>
                                    <version>4.0.0</version>
                                    <fixVersion>4.0.0</fixVersion>
                                    <component>bookkeeper-server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13143847" author="hustlmsp" created="Fri, 4 Nov 2011 09:13:59 +0000"  >&lt;p&gt;1) add a test case to reproduce this issue.&lt;br/&gt;
2) check op code first, then parse the packet according to different op.&lt;/p&gt;</comment>
                            <comment id="13143851" author="ikelly" created="Fri, 4 Nov 2011 09:14:35 +0000"  >&lt;p&gt;I think I fix this in my fencing code &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-101&quot; title=&quot;Add Fencing to Bookkeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-101&quot;&gt;&lt;del&gt;BOOKKEEPER-101&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

</comment>
                            <comment id="13143852" author="hustlmsp" created="Fri, 4 Nov 2011 09:16:05 +0000"  >&lt;p&gt;this bug is introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-83&quot; title=&quot;Added versioning and flags to the bookie protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-83&quot;&gt;&lt;del&gt;BOOKKEEPER-83&lt;/del&gt;&lt;/a&gt;, since it change parsing packet in a different way.&lt;/p&gt;</comment>
                            <comment id="13143856" author="hustlmsp" created="Fri, 4 Nov 2011 09:20:45 +0000"  >&lt;p&gt;Checked &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-101&quot; title=&quot;Add Fencing to Bookkeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-101&quot;&gt;&lt;del&gt;BOOKKEEPER-101&lt;/del&gt;&lt;/a&gt; . This issue is fixed in that ticket.&lt;br/&gt;
so I would marked this as duplicated.&lt;/p&gt;

&lt;p&gt;Thanks, Ivan.&lt;/p&gt;</comment>
                            <comment id="13143857" author="ikelly" created="Fri, 4 Nov 2011 09:20:53 +0000"  >&lt;p&gt;I think I prefer your fix for this. I&apos;ll do a full review.&lt;/p&gt;</comment>
                            <comment id="13143860" author="ikelly" created="Fri, 4 Nov 2011 09:24:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this.&lt;/p&gt;</comment>
                            <comment id="13143893" author="ikelly" created="Fri, 4 Nov 2011 10:26:43 +0000"  >&lt;p&gt;Committed as r1197472. Thanks Sijie.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12527406">BOOKKEEPER-83</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12502377" name="bookkeeper-103.patch" size="3531" author="hustlmsp" created="Fri, 4 Nov 2011 09:13:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2011 09:14:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyo0q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>174137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>