<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat May 16 23:32:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/BOOKKEEPER-303/BOOKKEEPER-303.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[BOOKKEEPER-303] LedgerMetadata should serialized using protobufs</title>
                <link>https://issues.apache.org/jira/browse/BOOKKEEPER-303</link>
                <project id="12311293" key="BOOKKEEPER">Bookkeeper</project>
                    <description>&lt;p&gt;Google protobufs is a library for serializing and deserializing data. It elegantly handles the cases where new data is added to a data format. This is useful in the case of something like LedgerMetadata, which may change over time. However, at the moment, whenever we make a change to the LedgerMetadata serialization format we have to break compatibility with old clients. By using protobufs, even if we add something to the format, old clients should be able to read the ledgers. &lt;/p&gt;

&lt;p&gt;We should also change our protocols to use protobufs for the same reason, but this should be done in 4.3.0.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/protobuf/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/protobuf/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595240">BOOKKEEPER-303</key>
            <summary>LedgerMetadata should serialized using protobufs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ikelly">Ivan Kelly</assignee>
                                    <reporter username="ikelly">Ivan Kelly</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jun 2012 10:32:39 +0100</created>
                <updated>Wed, 13 Feb 2013 15:47:03 +0000</updated>
                            <resolved>Wed, 27 Jun 2012 14:35:40 +0100</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13397381" author="ikelly" created="Wed, 20 Jun 2012 10:35:13 +0100"  >&lt;p&gt;Patch adds protobuf for ledgermetadata. To regenerate the protocol file, run maven with the protobuf profile.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn install -Pprotobuf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13397396" author="hustlmsp" created="Wed, 20 Jun 2012 11:02:59 +0100"  >&lt;p&gt;good work, Ivan.&lt;/p&gt;

&lt;p&gt;I haven&apos;t go thru all the patch. but just one question, why there are changes about Hedwig PubSubProtocol?&lt;/p&gt;</comment>
                            <comment id="13397397" author="ikelly" created="Wed, 20 Jun 2012 11:06:34 +0100"  >&lt;p&gt;Just to keep the version harmonized. It was 2.3.0, it&apos;s 2.4.1. I have no real preference for which version we use, but as HDFS uses 2.4.1, i need to keep that one installed. Also I changed hedwig-protocol to build the protobuf using the profile approach also. &lt;/p&gt;</comment>
                            <comment id="13397752" author="ikelly" created="Wed, 20 Jun 2012 19:41:20 +0100"  >&lt;p&gt;Updated patch to fix a few small oversights. (and empty try {} finally {} and writing the correct version number for the ledger metadata)&lt;/p&gt;</comment>
                            <comment id="13398625" author="ikelly" created="Thu, 21 Jun 2012 18:37:58 +0100"  >&lt;p&gt;Updated patch so that fencing an old client with a new client doesn&apos;t stop the old client from reading the ledger it was writing to.&lt;/p&gt;</comment>
                            <comment id="13401157" author="umamaheswararao" created="Tue, 26 Jun 2012 05:17:18 +0100"  >&lt;p&gt;@Sijie, Could you please review this patch? It is touching hedwig related protocols.&lt;br/&gt;
Many of the BK-237 JIRAs are marking as dependent on this JIRA and BK-2.&lt;/p&gt;</comment>
                            <comment id="13401246" author="ikelly" created="Tue, 26 Jun 2012 09:40:20 +0100"  >&lt;p&gt;New patch adds protobuf entry to NOTICE.bin.txt and LICENSE.bin.txt&lt;/p&gt;</comment>
                            <comment id="13401913" author="hustlmsp" created="Wed, 27 Jun 2012 03:49:06 +0100"  >&lt;p&gt;the patch is OK for me. but I had a question, should we need to put the generated protobuf java files in svn? why not let it be generated during build? in hedwig, we put generated java file in svn path but we don&apos;t put generated c++ files in svn path. If I remembered correctly, in the early version of hedwig, it also doesn&apos;t put the generated java files in svn path. I am not sure when we started put them in svn path.&lt;/p&gt;</comment>
                            <comment id="13401993" author="ikelly" created="Wed, 27 Jun 2012 07:36:41 +0100"  >&lt;p&gt;Because to generate during build, it requires that a person has protoc installed on their computer. Whats more, it requires that specific version is installed. Putting the generated files in, removes that headache from people downloading and trying out bookkeeper. &lt;/p&gt;</comment>
                            <comment id="13402042" author="hustlmsp" created="Wed, 27 Jun 2012 08:56:55 +0100"  >&lt;p&gt;OK. I got the idea. but the generated files aren&apos;t included for hedwig cpp client. It is inconsistent behavior for cpp project. How is your opinion?&lt;/p&gt;</comment>
                            <comment id="13402052" author="ikelly" created="Wed, 27 Jun 2012 09:12:00 +0100"  >&lt;p&gt;For the C++ client, you need the protobuf library installed, as well as other dependencies, so requiring protoc isn&apos;t too much (I should install with library anyhow). But for java, protobuf comes as a mvn dependency. So, for C++, generating the files doesn&apos;t add extra overhead. For java it does.&lt;/p&gt;</comment>
                            <comment id="13402073" author="hustlmsp" created="Wed, 27 Jun 2012 10:10:27 +0100"  >&lt;p&gt;OK. thanks Ivan for explanation. it makes sense for me.&lt;/p&gt;

&lt;p&gt;+1 for the patch. thanks Ivan for this work.&lt;/p&gt;</comment>
                            <comment id="13402222" author="ikelly" created="Wed, 27 Jun 2012 14:35:40 +0100"  >&lt;p&gt;Committed r1354492. Thanks for reviewing Sijie.&lt;/p&gt;</comment>
                            <comment id="13402240" author="hudson" created="Wed, 27 Jun 2012 15:08:32 +0100"  >&lt;p&gt;Integrated in bookkeeper-trunk #580 (See &lt;a href=&quot;https://builds.apache.org/job/bookkeeper-trunk/580/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/bookkeeper-trunk/580/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/BOOKKEEPER-303&quot; title=&quot;LedgerMetadata should serialized using protobufs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BOOKKEEPER-303&quot;&gt;&lt;del&gt;BOOKKEEPER-303&lt;/del&gt;&lt;/a&gt;: LedgerMetadata should serialized using protobufs (ivank) (Revision 1354492)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ivank : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadata.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerRecoveryOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingAddOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingReadOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadLastConfirmedOp.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/DataFormats.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/proto&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/proto/DataFormats.proto&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/resources/LICENSE.bin.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/main/resources/NOTICE.bin.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookieRecoveryTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/bookkeeper-server/src/test/java/org/apache/bookkeeper/test/TestBackwardCompat.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-protocol/pom.xml&lt;/li&gt;
	&lt;li&gt;/zookeeper/bookkeeper/trunk/hedwig-protocol/src/main/java/org/apache/hedwig/protocol/PubSubProtocol.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12468954">BOOKKEEPER-2</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12533449" name="BOOKKEEPER-303.diff" size="432968" author="ikelly" created="Tue, 26 Jun 2012 09:40:20 +0100"/>
                            <attachment id="12532911" name="BOOKKEEPER-303.diff" size="430045" author="ikelly" created="Thu, 21 Jun 2012 18:37:58 +0100"/>
                            <attachment id="12532738" name="BOOKKEEPER-303.diff" size="426965" author="ikelly" created="Wed, 20 Jun 2012 19:41:20 +0100"/>
                            <attachment id="12532675" name="BOOKKEEPER-303.diff" size="426477" author="ikelly" created="Wed, 20 Jun 2012 10:35:13 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jun 2012 10:02:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyn5vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>