Found this bug over on LUCENE-3969, but I'm currently tracking a ton of bugs, so
I figure I would open an issue and see if this one is obvious to anyone:

Consider this input string: "gzw f quaxot" (length = 12) with a WhitespaceTokenizer.
If i have mapping rules like this, then it works!:

"t" => ""



But if I have mapping rules like this:

"t" => ""
"tmakdbl" => "c"



Then it will compute final offset wrong:

    [junit] junit.framework.AssertionFailedError: finalOffset  expected:<12> but was:<11>



Looks like some logic/recursion bug in the correctOffset method? The second rule is not even "used" for this string,
it just happens to also start with 't'