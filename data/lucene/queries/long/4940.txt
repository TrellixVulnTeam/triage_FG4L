previously DocIdSet.EMPTY_DOCIDSET retuned NO_MORE_DOCS by default when DocIdSetIterator#docId() was called but since LUCENE-4924 we return -1 if the empty iterator is unpositioned / not exhausted. This causes an IllegalStateException since we couldn't detect the empty DocIdSet. Our tests somehow don't catch this and I ran into it integrating my RC0 that I build into ES last night so this is unreleased...