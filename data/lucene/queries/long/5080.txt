

  public void setMaxThreadCount(int count) {
    ...
    if (count > maxMergeCount) {
      throw new IllegalArgumentException("count should be <= maxMergeCount (= " + maxMergeCount + ")");
    }



but:



   public void setMaxMergeCount(int count) {
    ...
    if (count < maxThreadCount) {
      throw new IllegalArgumentException("count should be >= maxThreadCount (= " + maxThreadCount + ")");
    }



So you must call them in a magical order. I think we should nuke these setters and just have a CMS(int,int)