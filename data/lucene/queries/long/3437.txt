Get rid of this:


      if (doFail && (Thread.currentThread().getName().equals("main") 
          || Thread.currentThread().getName().equals("Main Thread"))) {

