Fix Directory implementations to use NIO2 APIs