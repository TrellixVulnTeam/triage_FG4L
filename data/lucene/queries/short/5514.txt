Backport Java 7 changes from trunk to Lucene 4.8