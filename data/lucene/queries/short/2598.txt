allow tests to use different Directory impls