<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:30:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1752/OPENJPA-1752.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1752] TestPessimisticLocks JUNIT test produced inconsistent behavior with various backends</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1752</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;TestPessimisticLocks JUNIT tests pass all assertions for Derby backend, but failures are seen on DB2, MySQL, Oracle.&lt;br/&gt;
It is likely that failures may also occur on other backends.&lt;/p&gt;

&lt;p&gt;There could be some problem in OpenJPA code in handling pessimistic lock requests.&lt;br/&gt;
There is also inconsistency in reporting exceptions - lock timout or query timeout should be non-fatal; but with Derby the PessimisticLockException is reported  which is considered fatal. It is also possible that the test scenarios are problematic.&lt;/p&gt;

&lt;p&gt;TestPessisimiticLocks has 5 test cases, the last test case worked for all backend. Problem test cases are listed as below:&lt;/p&gt;

&lt;p&gt;1.  testFindAfterQueryWithPessimisticLocks()&lt;br/&gt;
2.  testFindAfterQueryOrderByWithPessimisticLocks()&lt;br/&gt;
3.  testQueryAfterFindWithPessimisticLocks()&lt;br/&gt;
4.  testQueryOrderByAfterFindWithPessimisticLocks()&lt;/p&gt;


&lt;p&gt;The failure symptoms are summarized below -   Each test contains 2 variations.&lt;br/&gt;
The dot notation, for example, 1.1 is the first scenario in testFindAfterQueryWithPessimisticLocks() &lt;br/&gt;
Each test scenario is either expecting an exception or No exception; if no exception is reported, the SELECT sql got results from database.&lt;/p&gt;



&lt;p&gt;Tests       Derby                                        DB2V9.7                                 Oracle10gXE 10.2.0.1.0            MySQL 5.1.39/JDBC 5.1.7&lt;br/&gt;
====================================================================================================================================&lt;br/&gt;
1.1         PessimisticLockException      LockTimeoutException        LockTimeoutException              LockTimeoutException&lt;br/&gt;
1.2         No exception                              No exception                          No exception                                No exception&lt;br/&gt;
2.1         PessimisticLockException      LockTimeoutException        LockTimeoutException              LockTimeoutException&lt;br/&gt;
2.2         No  exception                             LockTimeoutException        No exception                                LockTimeoutException&lt;br/&gt;
3.1         No  exception                             QueryTimeoutException       process hang                            PersistenceException: Server shutdown &lt;span class=&quot;error&quot;&gt;&amp;#91;code=1053, state=08S01&amp;#93;&lt;/span&gt;  &lt;br/&gt;
3.2         PessimisticLockException      QueryTimeoutException       process hang                            PersistenceException: Server shutdown &lt;span class=&quot;error&quot;&gt;&amp;#91;code=1053, state=08S01&amp;#93;&lt;/span&gt;&lt;br/&gt;
4.1         No  exception                             QueryTimeoutException       No exception                             QueryTimeoutException&lt;br/&gt;
4.2         PessimisticLockException      QueryTimeoutException       process hang                           QueryTimeoutException&lt;/p&gt;

&lt;p&gt;NOTE: for Oracle, many test scenarios caused process to hang (test 3.1, 3.2, and 4.2) - ie. test never run to completion&lt;br/&gt;
      for MySQL, Server shutdown (test 3.1 and 3.2)&lt;br/&gt;
      here is the  stack trace:&lt;/p&gt;

&lt;p&gt;org.apache.openjpa.persistence.PersistenceException:Server shutdown in progress &lt;/p&gt;
{prepstmnt 33525219 SELECT t1.id, t1.name FROM Employee t0 LEFT OUTER JOIN Department t1 ON t0.FK_DEPT = t1.id WHERE (t0.id &amp;lt; ?) LIMIT ?, ? FOR UPDATE [params=?, ?, ?]} &lt;span class=&quot;error&quot;&gt;&amp;#91;code=1053, state=08S01&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;lt;openjpa-2.1.0-SNAPSHOT-rexported fatal general error&amp;gt; org.apache.openjpa.persistence.PersistenceException: Server shutdown in progress {prepstmnt 33525219 SELECT t1.id, t1.name FROM Employee t0 LEFT OUTER JOIN Department t1 ON t0.FK_DEPT = t1.id WHERE (t0.id &amp;lt; ?) LIMIT ?, ? FOR UPDATE [params=?, ?, ?]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=1053, state=08S01&amp;#93;&lt;/span&gt;&lt;br/&gt;
FailedObject: select e.department from Employee e where e.id &amp;lt; 10 &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.narrow(DBDictionary.java:4855)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.newStoreException(DBDictionary.java:4815)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:137)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:118)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:70)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.handleCheckedException(SelectResultObjectProvider.java:155)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl$PackingResultObjectProvider.handleCheckedException(QueryImpl.java:2109)&lt;br/&gt;
	at org.apache.openjpa.lib.rop.EagerResultList.&amp;lt;init&amp;gt;(EagerResultList.java:40)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.toResult(QueryImpl.java:1246)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1005)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:861)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:792)&lt;br/&gt;
	at org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)&lt;br/&gt;
	at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:288)&lt;br/&gt;
	at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:302)&lt;br/&gt;
	at org.apache.openjpa.persistence.lockmgr.TestPessimisticLocks.testQueryAfterFindWithPessimisticLocks(TestPessimisticLocks.java:271)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runTest(AbstractPersistenceTestCase.java:516)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:503)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:479)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.run(AbstractPersistenceTestCase.java:179)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)&lt;br/&gt;
Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: Server shutdown in progress &lt;/p&gt;
{prepstmnt 33525219 SELECT t1.id, t1.name FROM Employee t0 LEFT OUTER JOIN Department t1 ON t0.FK_DEPT = t1.id WHERE (t0.id &amp;lt; ?) LIMIT ?, ? FOR UPDATE [params=?, ?, ?]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=1053, state=08S01&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator.wrap(LoggingConnectionDecorator.java:274)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator.wrap(LoggingConnectionDecorator.java:258)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator.access$3(LoggingConnectionDecorator.java:257)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator$LoggingConnection$LoggingPreparedStatement.executeQuery(LoggingConnectionDecorator.java:1176)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:278)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement.executeQuery(JDBCStoreManager.java:1773)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:268)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.executeQuery(SelectImpl.java:499)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:424)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:382)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.open(SelectResultObjectProvider.java:94)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl$PackingResultObjectProvider.open(QueryImpl.java:2068)&lt;br/&gt;
	at org.apache.openjpa.lib.rop.EagerResultList.&amp;lt;init&amp;gt;(EagerResultList.java:34)&lt;br/&gt;
	... 30 more&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Server shutdown in progress&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Constructor.newInstance(Unknown Source)&lt;br/&gt;
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)&lt;br/&gt;
	at com.mysql.jdbc.Util.getInstance(Util.java:381)&lt;br/&gt;
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)&lt;br/&gt;
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3515)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.nextRowFast(MysqlIO.java:1545)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1401)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2829)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:468)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2534)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1749)&lt;br/&gt;
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2159)&lt;br/&gt;
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2554)&lt;br/&gt;
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1761)&lt;br/&gt;
	at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1912)&lt;br/&gt;
	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:93)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:280)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.JDBCEventConnectionDecorator$EventPreparedStatement.executeQuery(JDBCEventConnectionDecorator.java:270)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:278)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator$LoggingConnection$LoggingPreparedStatement.executeQuery(LoggingConnectionDecorator.java:1174)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:278)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement.executeQuery(JDBCStoreManager.java:1773)&lt;br/&gt;
	at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:268)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.executeQuery(SelectImpl.java:499)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:424)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:382)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.open(SelectResultObjectProvider.java:94)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl$PackingResultObjectProvider.open(QueryImpl.java:2068)&lt;br/&gt;
	at org.apache.openjpa.lib.rop.EagerResultList.&amp;lt;init&amp;gt;(EagerResultList.java:34)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.toResult(QueryImpl.java:1246)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1005)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:861)&lt;br/&gt;
	at org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:792)&lt;br/&gt;
	at org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)&lt;br/&gt;
	at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:288)&lt;br/&gt;
	at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:302)&lt;br/&gt;
	at org.apache.openjpa.persistence.lockmgr.TestPessimisticLocks.testQueryAfterFindWithPessimisticLocks(TestPessimisticLocks.java:271)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runTest(AbstractPersistenceTestCase.java:516)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:503)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:479)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.run(AbstractPersistenceTestCase.java:179)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12470490">OPENJPA-1752</key>
            <summary>TestPessimisticLocks JUNIT test produced inconsistent behavior with various backends</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fancy">Catalina Wei</assignee>
                                    <reporter username="fancy">Catalina Wei</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jul 2010 05:33:45 +0100</created>
                <updated>Mon, 20 Sep 2010 16:40:06 +0100</updated>
                            <resolved>Fri, 20 Aug 2010 01:29:00 +0100</resolved>
                                    <version>2.0.1</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12894705" author="fancy" created="Mon, 2 Aug 2010 21:53:03 +0100"  >&lt;p&gt;After upgrading MySQL server to 5.1.49, the server shutdown problem is gone.&lt;br/&gt;
Test 3.1 and 3.2  reported QueryTimeoutException using  MySQL-5.1.49.&lt;/p&gt;

&lt;p&gt;Updated test results:&lt;/p&gt;

&lt;p&gt;Tests Derby_________________  DB2V9.7____________  Oracle10gXE 10.2.0.1.0__ MySQL 5.1.49/JDBC 5.1.7&lt;br/&gt;
====================================================================================================================================&lt;br/&gt;
1.1__  PessimisticLockException_ LockTimeoutException__ LockTimeoutException__ LockTimeoutException&lt;br/&gt;
1.2__  No exception____________ No exception_________ No exception__________ No exception&lt;br/&gt;
2.1__  PessimisticLockException_ LockTimeoutException__ LockTimeoutException___ LockTimeoutException&lt;br/&gt;
2.2__  No exception____________ LockTimeoutException___ No exception_________ LockTimeoutException&lt;br/&gt;
3.1__  No exception____________ QueryTimeoutException__ process hang________ QueryTimeoutException&lt;br/&gt;
3.2__  PessimisticLockException_ QueryTimeoutException___ process hang________ QueryTimeoutException&lt;br/&gt;
4.1__  No exception___________ QueryTimeoutException___ No exception_________ QueryTimeoutException&lt;br/&gt;
4.2__  PessimisticLockException_ QueryTimeoutException___ process hang________ QueryTimeoutException&lt;/p&gt;


&lt;p&gt;The assertion failures still remain in TestPessismisticLocks JUNIT test.&lt;br/&gt;
Needs further investigation.&lt;/p&gt;</comment>
                            <comment id="12894964" author="fancy" created="Tue, 3 Aug 2010 19:04:25 +0100"  >&lt;p&gt;Test results for Oracle backend was inaccurate in previous comments, test 3.1 actually passed with no exceptions.&lt;br/&gt;
Oracle server is hanging only in test 3.2. This happens to both Oracle 10g 10.2.0.1.0 and Oracle 11g 11.1.0.6.0.&lt;/p&gt;

&lt;p&gt;Update  test results for Oracle 10g and 11g:&lt;/p&gt;

&lt;p&gt;Tests Derby_________________ DB2V9.7______________ Oracle10gXE &amp;amp; Oracle 11g ______MySQL 5.1.49/JDBC 5.1.7&lt;br/&gt;
====================================================================================================================================&lt;br/&gt;
1.1__ PessimisticLockException_ LockTimeoutException____ LockTimeoutException_________ LockTimeoutException&lt;br/&gt;
1.2__ No exception____________ No exception___________ No exception_________________ No exception&lt;br/&gt;
2.1__ PessimisticLockException_ LockTimeoutException____ LockTimeoutException_________ LockTimeoutException&lt;br/&gt;
2.2__ No exception____________ LockTimeoutException____ No exception________________ LockTimeoutException&lt;br/&gt;
3.1__ No exception____________ QueryTimeoutException___ No exception--_______________ QueryTimeoutException&lt;br/&gt;
3.2__ PessimisticLockException_ QueryTimeoutException___&lt;em&gt;Server  hang&lt;/em&gt;________________ QueryTimeoutException&lt;br/&gt;
4.1__ No exception___________ QueryTimeoutException____ No exception_________________ QueryTimeoutException&lt;br/&gt;
4.2__ PessimisticLockException_ QueryTimeoutException____ process hang________________ QueryTimeoutException &lt;/p&gt;</comment>
                            <comment id="12900536" author="fancy" created="Fri, 20 Aug 2010 01:28:59 +0100"  >&lt;p&gt;Fixed testcase&lt;/p&gt;</comment>
                            <comment id="12912541" author="mikedd" created="Mon, 20 Sep 2010 16:40:06 +0100"  >&lt;p&gt;Closing issues which have been resolved for some time. If the problem persists, please reopen. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Sep 2010 15:40:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt2yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>