<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:29:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2443/OPENJPA-2443.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2443] InvalidStateException while merging a new Entity with a GeneratedValue id</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2443</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;This problem only happens if you have an Entity with a Generated id that also has the annotation @Basic(optional = false). If you create a new Entity and then try to persist it via EntityManager.merge(...) call, you&apos;ll get the following stack :&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-0.0.0-rnull fatal user error&amp;gt; org.apache.openjpa.persistence.InvalidStateException: The field &quot;id&quot; of instance &quot;org.apache.openjpa.persistence.jdbc.auto.AutoIncrementEntity@99883308&quot; contained a null value; the metadata for this field specifies that nulls are illegal.&lt;br/&gt;
	at org.apache.openjpa.kernel.SingleFieldManager.preFlush(SingleFieldManager.java:567)&lt;br/&gt;
	at org.apache.openjpa.kernel.SingleFieldManager.preFlush(SingleFieldManager.java:511)&lt;br/&gt;
	at org.apache.openjpa.kernel.StateManagerImpl.preFlush(StateManagerImpl.java:3019)&lt;br/&gt;
	at org.apache.openjpa.kernel.PNewState.beforeFlush(PNewState.java:44)&lt;br/&gt;
	at org.apache.openjpa.kernel.StateManagerImpl.beforeFlush(StateManagerImpl.java:1035)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.flush(BrokerImpl.java:2141)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.flushSafe(BrokerImpl.java:2101)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.flush(BrokerImpl.java:1872)&lt;br/&gt;
	at org.apache.openjpa.kernel.DelegatingBroker.flush(DelegatingBroker.java:1045)&lt;br/&gt;
	at org.apache.openjpa.persistence.EntityManagerImpl.flush(EntityManagerImpl.java:663)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12675132">OPENJPA-2443</key>
            <summary>InvalidStateException while merging a new Entity with a GeneratedValue id</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="curtisr7">Rick Curtis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Oct 2013 22:28:47 +0100</created>
                <updated>Thu, 24 Oct 2013 14:43:22 +0100</updated>
                            <resolved>Thu, 24 Oct 2013 14:43:22 +0100</resolved>
                                    <version>2.3.0</version>
                    <version>2.4.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                    <fixVersion>2.4.0</fixVersion>
                                    <component>kernel</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13802355" author="curtisr7" created="Tue, 22 Oct 2013 23:19:07 +0100"  >&lt;p&gt;Attaching a unit test and a test-fix.&lt;/p&gt;

&lt;p&gt;The net of this change is that in pre-flush, don&apos;t check to see if a field is null if  is a GenerationType.IDENTITY field as the value will get populated later in the flush processing.&lt;/p&gt;</comment>
                            <comment id="13802973" author="jira-bot" created="Wed, 23 Oct 2013 16:58:47 +0100"  >&lt;p&gt;Commit 1535067 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=curtisr7&quot; class=&quot;user-hover&quot; rel=&quot;curtisr7&quot;&gt;Rick Curtis&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535067&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535067&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2443&quot; title=&quot;InvalidStateException while merging a new Entity with a GeneratedValue id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2443&quot;&gt;&lt;del&gt;OPENJPA-2443&lt;/del&gt;&lt;/a&gt; : Fix SingleFieldManager to not check for null values for IDENTITY generated fields when flushing.&lt;/p&gt;</comment>
                            <comment id="13803072" author="jira-bot" created="Wed, 23 Oct 2013 18:58:24 +0100"  >&lt;p&gt;Commit 1535082 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=curtisr7&quot; class=&quot;user-hover&quot; rel=&quot;curtisr7&quot;&gt;Rick Curtis&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535082&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535082&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2443&quot; title=&quot;InvalidStateException while merging a new Entity with a GeneratedValue id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2443&quot;&gt;&lt;del&gt;OPENJPA-2443&lt;/del&gt;&lt;/a&gt; : Remove unnecessary import.&lt;/p&gt;</comment>
                            <comment id="13803519" author="struberg" created="Thu, 24 Oct 2013 00:05:03 +0100"  >&lt;p&gt;Rick, if you like then you might also apply this to the 2.3.x branch. Seems save for me to do so.&lt;/p&gt;</comment>
                            <comment id="13804184" author="jira-bot" created="Thu, 24 Oct 2013 14:42:43 +0100"  >&lt;p&gt;Commit 1535379 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=curtisr7&quot; class=&quot;user-hover&quot; rel=&quot;curtisr7&quot;&gt;Rick Curtis&lt;/a&gt; in branch &apos;openjpa/branches/2.3.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535379&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2443&quot; title=&quot;InvalidStateException while merging a new Entity with a GeneratedValue id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2443&quot;&gt;&lt;del&gt;OPENJPA-2443&lt;/del&gt;&lt;/a&gt; : Fix SingleFieldManager to not check for null values for IDENTITY generated fields when flushing.&lt;/p&gt;</comment>
                            <comment id="13804186" author="curtisr7" created="Thu, 24 Oct 2013 14:43:16 +0100"  >&lt;p&gt;I merged the changes back to 2.3.x.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12609738" name="OPENJPA-2443.patch" size="4060" author="curtisr7" created="Tue, 22 Oct 2013 23:19:07 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Oct 2013 15:58:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzj04v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355041</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>