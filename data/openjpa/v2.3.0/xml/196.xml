<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:38:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-196/OPENJPA-196.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-196] Ease the restrictions on forcing a matche between the number of declared and assigned positional parameters</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-196</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;OpenJPA currently enforces that each positional parameter that is assigned in a query must actually be declared in that query, although the spec doesn&apos;t actually seem to mention that restriction.&lt;/p&gt;

&lt;p&gt;As respoted by Dain Sundstorm on the OpenJPA mailing list:&lt;/p&gt;

&lt;p&gt;Actually, I think there is a bigger problem...  Say I have a query like this:&lt;/p&gt;

&lt;p&gt;    SELECT x FROM foo AS x WHERE foo.name = ?2&lt;/p&gt;

&lt;p&gt;The org.apache.openjpa.kernel.QueryImpl.assertParameters(...) code assumes that if I have 1 parameter it is numbered ?1, but in EJB 2.1 this was not a requirement and there are certification tests that verify you are allowed to have &quot;unused&quot; parameters (e.g, in my example about ?1 and ?N where N&amp;gt;2 are all not used).  I couldn&apos;t find any text in the specification that says that all all positional parameters must be used in the query, but I did find text that say the EJB-QL 3.0 language is an extension of the EJB-QL 2.1 language:&lt;/p&gt;

&lt;p&gt;&quot;The Java Persistence query language is an extension of the Enterprise Java Beans query language, EJB QL, definedin&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;.&quot;&lt;/p&gt;

&lt;p&gt;So I think we must remove the &quot;extra-params&quot; check, but I would be happy with a &quot;don&apos;t check for extra-params flag&quot;.&lt;/p&gt;

&lt;p&gt;-dain&lt;/p&gt;

&lt;p&gt;On Mar 31, 2007, at 8:56 AM, Dain Sundstrom wrote:&lt;/p&gt;

&lt;p&gt;I&apos;m working on a CMP 2 implementation that delegates to OpenJPA for persistence.  I&apos;m running into a problem where I get the following exception:&lt;/p&gt;

&lt;p&gt;org.apache.openjpa.persistence.ArgumentException : More parameters were passed to execute() than were declared: 4 parameters were specified for query execution, but only 2 parameters were declared in the query.&lt;/p&gt;


&lt;p&gt;In CMP you declare finder and select methods that have parameters which are passed into the query engine.  You can have as many parameters as you like but are not required to use them all, but it appears that OpenJPA is enforcing a restriction where if the EJB-QL text only lists say 2 parameters and I set 4 I get the above exception.  In order of perference:&lt;/p&gt;

&lt;p&gt;Is this spec required? If not, can we remove the check?&lt;/p&gt;

&lt;p&gt;Is there a way to disable the check?  If so, how?&lt;/p&gt;

&lt;p&gt;Is there a way to determine the number of paramters a query takes?  If so, I can change my code.&lt;/p&gt;

&lt;p&gt;Is there a way to get the ejbql text from a Query object? If so, I&apos;ll write a quick parser to determine number of queries myself.&lt;/p&gt;

&lt;p&gt;BTW, I&apos;m currently using 0.9.6.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-dain&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12366360">OPENJPA-196</key>
            <summary>Ease the restrictions on forcing a matche between the number of declared and assigned positional parameters</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mprudhom">Marc Prud&apos;hommeaux</assignee>
                                    <reporter username="mprudhom">Marc Prud&apos;hommeaux</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Apr 2007 17:28:26 +0100</created>
                <updated>Tue, 9 Mar 2010 18:32:33 +0000</updated>
                            <resolved>Mon, 2 Apr 2007 23:00:53 +0100</resolved>
                                    <version>0.9.0</version>
                    <version>0.9.6</version>
                                    <fixVersion>0.9.7</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12485901" author="mprudhom" created="Sun, 1 Apr 2007 17:29:18 +0100"  >&lt;p&gt;This siple patch removed the restirction.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12354700" name="OPENJPA-196.patch" size="774" author="mprudhom" created="Sun, 1 Apr 2007 17:29:18 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7k33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>