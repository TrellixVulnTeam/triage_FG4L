<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:32:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1811/OPENJPA-1811.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1811] Dynamic load of enhancer agent on Mac OS X fails</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1811</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Splitting out this item from &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1804&quot; title=&quot;NPE in MappingInfo.java line 1514&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1804&quot;&gt;&lt;del&gt;OPENJPA-1804&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
The dynamic loading of the enhancer agent on Mac OS X w/ Java 1.6.0 fails due to the packaging differences on the Mac, where instead of a tools.jar, there is a 1.6.0/Classes/classes.jar that we should be using instead.&lt;/p&gt;</description>
                <environment>Mac</environment>
        <key id="12474858">OPENJPA-1811</key>
            <summary>Dynamic load of enhancer agent on Mac OS X fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drwoods">Donald Woods</assignee>
                                    <reporter username="wboyce@panix.com">Willis Blackburn</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Sep 2010 20:54:20 +0100</created>
                <updated>Thu, 13 Jan 2011 16:45:39 +0000</updated>
                            <resolved>Wed, 22 Sep 2010 21:41:46 +0100</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>Enhance</component>
                    <component>UnenhancedClasses</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12913769" author="drwoods" created="Wed, 22 Sep 2010 21:39:59 +0100"  >&lt;p&gt;Before fix -&lt;br/&gt;
768  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - org.apache.openjpa.enhance.InstrumentationFactorygetInstrumentation() _disabled: _inst:null_dynamicallyInstall:true&lt;br/&gt;
768  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - org.apache.openjpa.enhance.InstrumentationFactory.findToolsJar() &amp;#8211; couldn&apos;t find /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/tools.jar&lt;br/&gt;
769  db  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - Creating subclass for &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;class openjpatest.Group, class openjpatest.Organization, class openjpatest.AddressBook&amp;#93;&lt;/span&gt;&quot;. This means that your application will be less efficient and will consume more memory than it would if you ran the OpenJPA enhancer. Additionally, lazy loading will not be available for one-to-one and many-to-one persistent attributes in types using field access; they will be loaded eagerly instead.&lt;/p&gt;


&lt;p&gt;After fix -&lt;br/&gt;
64  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - org.apache.openjpa.enhance.InstrumentationFactory.getInstrumentation() _inst:null _dynamicallyInstall:true&lt;br/&gt;
66  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - org.apache.openjpa.enhance.InstrumentationFactory.findToolsJar() &amp;#8211; couldn&apos;t find default /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/tools.jar&lt;br/&gt;
66  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - org.apache.openjpa.enhance.InstrumentationFactory.findToolsJar() &amp;#8211; found /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Classes/classes.jar&lt;br/&gt;
. . .&lt;br/&gt;
1537  db  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - Creating subclass and redefining methods for &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;class openjpatest.Group, class openjpatest.Organization&amp;#93;&lt;/span&gt;&quot;. This means that your application will be less efficient than it would if you ran the OpenJPA enhancer.&lt;/p&gt;</comment>
                            <comment id="12913773" author="drwoods" created="Wed, 22 Sep 2010 21:41:46 +0100"  >&lt;p&gt;Committed revision 1000209.&lt;/p&gt;</comment>
                            <comment id="12913965" author="wboyce@panix.com" created="Thu, 23 Sep 2010 11:14:14 +0100"  >&lt;p&gt;Thanks for fixing this!&lt;/p&gt;

&lt;p&gt;I noticed that the log message says that OpenJPA will still produce subclasses for the attach API enhancer.  Is the attach API enhancer unable to actually modify the classes being loaded?&lt;/p&gt;</comment>
                            <comment id="12913967" author="wboyce@panix.com" created="Thu, 23 Sep 2010 11:16:46 +0100"  >&lt;p&gt;Definitely confused by log message 1537 since the docs say that the log message will be:&lt;/p&gt;

&lt;p&gt;OpenJPA dynamically loaded the class enhancer. Any classes that were not enhanced at build time will be enhanced when they are loaded by the JVM.&lt;/p&gt;</comment>
                            <comment id="12914015" author="drwoods" created="Thu, 23 Sep 2010 13:52:34 +0100"  >&lt;p&gt;This is due to the persistence.xml not listing all of the classes.  The Javaagent loaded enhancer and Dynamically loaded enhancer behave the same, in that when a &amp;lt;class&amp;gt; list is provided, then only those classes will get pre-enhanced.&lt;br/&gt;
    &lt;a href=&quot;http://openjpa.apache.org/builds/latest/docs/manual/manual.html#ref_guide_pc_enhance_runtime&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://openjpa.apache.org/builds/latest/docs/manual/manual.html#ref_guide_pc_enhance_runtime&lt;/a&gt;&lt;br/&gt;
    Section 2.3 - &quot;If you declare a persistent class list, OpenJPA will only search for metadata for classes in that list. &quot;&lt;br/&gt;
I&apos;ll add the same note to Section 2.4 using &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1804&quot; title=&quot;NPE in MappingInfo.java line 1514&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1804&quot;&gt;&lt;del&gt;OPENJPA-1804&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Once I added the other 2 classes to the persistence.xml so they were all listed -&lt;br/&gt;
        &amp;lt;class&amp;gt;openjpatest.AddressBook&amp;lt;/class&amp;gt;&lt;br/&gt;
        &amp;lt;class&amp;gt;openjpatest.Group&amp;lt;/class&amp;gt;&lt;br/&gt;
        &amp;lt;class&amp;gt;openjpatest.Organization&amp;lt;/class&amp;gt;&lt;br/&gt;
        &amp;lt;class&amp;gt;openjpatest.EmailAddress&amp;lt;/class&amp;gt;&lt;br/&gt;
        &amp;lt;class&amp;gt;openjpatest.HostName&amp;lt;/class&amp;gt;&lt;br/&gt;
then your expected behavior appears -&lt;br/&gt;
. . .&lt;br/&gt;
79  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - org.apache.openjpa.enhance.InstrumentationFactory.getInstrumentation() _inst:null _dynamicallyInstall:true&lt;br/&gt;
82  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - org.apache.openjpa.enhance.InstrumentationFactory.findToolsJar() &amp;#8211; couldn&apos;t find default /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/tools.jar&lt;br/&gt;
83  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - org.apache.openjpa.enhance.InstrumentationFactory.findToolsJar() &amp;#8211; found /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Classes/classes.jar&lt;br/&gt;
. . .&lt;br/&gt;
210  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Found 5 classes with metadata in 7 milliseconds.&lt;br/&gt;
216  db  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Clearing metadata repository &quot;org.apache.openjpa.meta.MetaDataRepository@761eec35&quot;.&lt;br/&gt;
707  db  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - OpenJPA dynamically loaded the class enhancer. Any classes that were not enhanced at build time will be enhanced when they are loaded by the JVM.&lt;br/&gt;
. . .&lt;br/&gt;
1588  db  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - An exception was thrown while attempting to perform class file transformation on &quot;openjpatest/Group&quot;:&lt;br/&gt;
&amp;lt;openjpa-2.1.0-SNAPSHOT-r422266:999559M fatal user error&amp;gt; org.apache.openjpa.util.MetaDataException: Errors encountered while resolving metadata.  See nested exceptions for details.&lt;br/&gt;
. . .&lt;br/&gt;
Caused by: &amp;lt;openjpa-2.1.0-SNAPSHOT-r422266:999559M nonfatal user error&amp;gt; org.apache.openjpa.util.MetaDataException: No metadata was found for type &quot;class java.lang.Object&quot;. The class is not enhanced.&lt;br/&gt;
. . .&lt;/p&gt;</comment>
                            <comment id="12981354" author="mikedd" created="Thu, 13 Jan 2011 16:45:39 +0000"  >&lt;p&gt;Closing issue which has been resolved for some time. If you believe the issue is not resolved please reopen or open a new issue. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12474490">OPENJPA-1804</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Sep 2010 20:39:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt37j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>