<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:39:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-184/OPENJPA-184.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-184] use DB2 Diagnostic interface to report extended error diagnostics on SQL Exception</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-184</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;When using DB2 database and the SQLException occurs &lt;br/&gt;
if the SQLException instance supports the DB2Diagnosable interface, &lt;br/&gt;
extended error information from the SQLCA will be written to the SQL channel. &lt;br/&gt;
The message format produced by DB2Diagnosable writer is&lt;/p&gt;

&lt;p&gt;	 SQLCA OUTPUT[Errp=SQLDMISR, Errd=&lt;span class=&quot;error&quot;&gt;&amp;#91;-2146893819, 5, 0, 0, -957, 0&amp;#93;&lt;/span&gt;]&lt;br/&gt;
Errp is the name of the DB2 module that detected the error and Errd are 6 integers of diagnostic information, SQLWARN are 6 characters &lt;br/&gt;
of warning flags..  Often this additional information can be used by an administrator in doing problem determination.&lt;/p&gt;

&lt;p&gt;This message will be appended to the persistence exception error message already created by OpenJPA&lt;br/&gt;
and it will be written to SQL logging channel (if active).&lt;/p&gt;

&lt;p&gt;DB2Dictionary class is modified to use java reflection on the SQLException instance to determine &lt;br/&gt;
if it supports DB2Diagnosble methods &quot;getErrp&quot; and if so &lt;br/&gt;
it invokes the methods to retrieve Errp and Errd fields, formats and logs the error message.&lt;br/&gt;
Reflection is used so that the DB2Dictionary does not contain any compile time or runtime &lt;br/&gt;
dependency on the DB2 jdbc driver.  If the DB2Diagnosable methods do not exist on the SQLException&lt;br/&gt;
instance,  no extended error information is logged.  &lt;/p&gt;

&lt;p&gt;org.apache.openjpa.jdbc.sql.SQLException class is modified so in the event of an exception &lt;br/&gt;
if the Dictionary is DB2, to call the Dictionary routines above.&lt;/p&gt;</description>
                <environment>DB2 database</environment>
        <key id="12365955">OPENJPA-184</key>
            <summary>use DB2 Diagnostic interface to report extended error diagnostics on SQL Exception</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wisneskid">David Wisneski</assignee>
                                    <reporter username="wisneskid">David Wisneski</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2007 02:57:07 +0100</created>
                <updated>Thu, 2 Feb 2012 16:21:37 +0000</updated>
                            <resolved>Tue, 3 May 2011 18:55:30 +0100</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12484913" author="pcl" created="Wed, 28 Mar 2007 17:01:17 +0100"  >&lt;p&gt;&amp;gt; This message will be appended to the persistence exception &lt;br/&gt;
&amp;gt; error message already created by OpenJPA and it will be written &lt;br/&gt;
&amp;gt; to SQL logging channel (if active).&lt;/p&gt;

&lt;p&gt;I&apos;ve found that doing logging and then throwing the same content in an exception becomes confusing. I&apos;d prefer to see the core code only throw the exception. I believe that we discussed putting code in place that always logs all exceptions at OpenJPA&apos;s boundaries a while ago; I prefer that solution for people that can&apos;t manage to get exceptions logged / handled properly by their own frameworks. Thoughts?&lt;/p&gt;

&lt;p&gt;&amp;gt; org.apache.openjpa.jdbc.sql.SQLException class is modified so &lt;br/&gt;
&amp;gt; in the event of an exception if the Dictionary is DB2, to call the Dictionary &lt;br/&gt;
&amp;gt; routines above.&lt;/p&gt;

&lt;p&gt;I&apos;d prefer not to see DB2-specific logic put into SQLException. How about changing SQLException to always call some new method in DBDictionary, and just only do something in the method in DB2Dictionary?&lt;/p&gt;</comment>
                            <comment id="12487365" author="pcl" created="Sat, 7 Apr 2007 01:00:35 +0100"  >&lt;p&gt;Is this issue still open?&lt;/p&gt;</comment>
                            <comment id="12489180" author="mikedd" created="Mon, 16 Apr 2007 18:33:15 +0100"  >&lt;p&gt;Resolving issue per Ritika&apos;s comments on the dev mailing list. &lt;/p&gt;</comment>
                            <comment id="12489237" author="kwsutter" created="Mon, 16 Apr 2007 22:22:38 +0100"  >&lt;p&gt;Sorry, I&apos;m going to re-open this Issue.  I don&apos;t see any mention of this added functionality in our OpenJPA documentation.  Without documentation, the feature is not of much use.  So, I think we should leave it open until it is properly documented.&lt;/p&gt;</comment>
                            <comment id="13028345" author="milosz" created="Tue, 3 May 2011 18:55:31 +0100"  >&lt;p&gt;Some documentation has been added in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1990&quot; title=&quot;Skip getting extend exception text when running on DB2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1990&quot;&gt;&lt;del&gt;OPENJPA-1990&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13198911" author="allee8285" created="Thu, 2 Feb 2012 16:21:36 +0000"  >&lt;p&gt;Close issue in preparation for 2.2.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12505439">OPENJPA-1990</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Mar 2007 16:01:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7k53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>