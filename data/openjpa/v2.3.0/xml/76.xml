<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:39:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-76/OPENJPA-76.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-76] add-was-interfaces ant task throws exception on a &quot;non-clean&quot; build.</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-76</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Patrick Linskey found the problem and posted to the dev mailing list. Here&apos;s the original post :&lt;/p&gt;

&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I get the following stack trace when running &apos;mvn package&apos;. It looks&lt;br/&gt;
like I don&apos;t have some required IBM classes in my classpath.&lt;br/&gt;
Surprisingly, this exception does not cause the build to fail, but&lt;br/&gt;
presumably, the output bytes are not the same as if this had run&lt;br/&gt;
successfully.&lt;/p&gt;

&lt;p&gt;Does anyone have any suggestions for either getting the classes into the&lt;br/&gt;
classpath or moving the exception to runtime, so that there aren&apos;t&lt;br/&gt;
build-time dependency issues resulting in different jars from the same&lt;br/&gt;
sources?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;-Patrick&lt;/p&gt;


&lt;p&gt;Partial stack trace:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; [antrun:run &lt;/p&gt;
{execution: add-was-interfaces}
&lt;p&gt;]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Executing tasks&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; java.lang.IllegalArgumentException:&lt;br/&gt;
java.lang.NoClassDefFoundError:&lt;br/&gt;
com/ibm/websphere/jtaextensions/SynchronizationCallback&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:180)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.Java.run(Java.java:710)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:178)&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.tools.ant.taskdefs.Java.execute(Java.java:84)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.Task.perform(Task.java:364)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.Target.execute(Target.java:341)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.maven.plugin.antrun.AbstractAntMojo.executeTasks(AbstractAntM&lt;br/&gt;
ojo.java:108)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.maven.plugin.antrun.AntRunMojo.execute(AntRunMojo.java:83)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginMa&lt;br/&gt;
nager.java:412)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Default&lt;br/&gt;
LifecycleExecutor.java:534)&lt;br/&gt;
    .....&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Caused by: java.lang.IllegalArgumentException:&lt;br/&gt;
java.lang.NoClassDefFoundError:&lt;br/&gt;
com/ibm/websphere/jtaextensions/SynchronizationCallback&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at serp.util.Strings.toClass(Strings.java:211)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at serp.util.Strings.toClass(Strings.java:140)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at serp.bytecode.BCClass.getType(BCClass.java:565)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at serp.bytecode.BCClass.write(BCClass.java:202)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at&lt;br/&gt;
org.apache.openjpa.ee.WASManagedRuntime.main(WASManagedRuntime.java:412)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native&lt;br/&gt;
Method)&lt;/p&gt;


&lt;p&gt;Upon further examination the problem occurs if the WASSynchronization class is modified a second time (ie you don&apos;t run mvn clean before running mvn package). &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12354902">OPENJPA-76</key>
            <summary>add-was-interfaces ant task throws exception on a &quot;non-clean&quot; build.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mikedd">Michael Dick</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Nov 2006 04:35:48 +0000</created>
                <updated>Tue, 17 Apr 2007 19:38:46 +0100</updated>
                            <resolved>Tue, 7 Nov 2006 08:02:24 +0000</resolved>
                                                                    <component>kernel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12447631" author="mikedd" created="Tue, 7 Nov 2006 04:52:29 +0000"  >&lt;p&gt;Attaching a patch file which avoids the problem (at least for the time being). &lt;/p&gt;

&lt;p&gt;The problem occurs when the new BCClass is written out to the file system. The patch will check whether the interface is already included in the class. If the &quot;new&quot; interface is already there the program will terminate. &lt;/p&gt;

&lt;p&gt;The larger question remains: should Serp be used in this manner, or should a stub class be created and used at compile time. Currently a stub class for misc.sun.Perf is being created in the openjpa-lib project, but is removed before the jar files are created and is not distributed with OpenJPA.&lt;/p&gt;
</comment>
                            <comment id="12447699" author="pcl" created="Tue, 7 Nov 2006 07:35:53 +0000"  >&lt;p&gt;I&apos;m perfectly happy with the use of serp here. Historically, we (the Kodo team) have created stub jars etc. with abandon, since the source was not available and thus we were not at risk of distributing bits that violated copyrights. Obviously, this is more of a concern with an open-source project, so we probably will need to be more careful about things like this in the future.&lt;/p&gt;

&lt;p&gt;Currently, this seems to be the only big issue. It used to be that we needed to link against various Oracle-specific classes, but between judicious reflection and Oracle&apos;s increased standards compliance over the years, we&apos;ve been able to avoid that for now. But I&apos;m sure that similar situations will crop up in the future.&lt;/p&gt;</comment>
                            <comment id="12447706" author="pcl" created="Tue, 7 Nov 2006 08:02:24 +0000"  >&lt;p&gt;I applied the patch with revision 472018. I changed it slightly to make it use resources instead of files.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12344444" name="openjpa-76-patch.txt" size="1815" author="mikedd" created="Tue, 7 Nov 2006 04:52:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Nov 2006 07:35:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt11b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>