<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:31:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1615/OPENJPA-1615.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1615] CriteriaQuery test failures on MSSQL</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1615</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Seeing 2 different testcase failures in TestTypesafeCriteria for MSSQL:&lt;/p&gt;

&lt;p&gt;1)  MSSQL doesn&apos;t support the MOD() function syntax but expects &quot;%&quot; instead, which is set in the SQLServerDictionary as &quot;supportsModOperator = true&quot;, but CriteriaBuilderImpl and Expressions is ignoring this option when generating the JPQL, so the testFunctionWithTwoArgument() and testFunctionWithFunctionArgumentInOrderBy() tests fail -&lt;/p&gt;

&lt;p&gt;junit.framework.AssertionFailedError: CriteriaQuery corresponding to SELECT MOD(c.balanceOwed,10) FROM Customer c failed to execute&lt;br/&gt;
java.lang.RuntimeException: SELECT MOD(t0.balanceOwed, ?) FROM CR_CUST t0&lt;br/&gt;
at org.apache.openjpa.persistence.criteria.AbstractCriteriaTestCase.executeQueryAndCollectSQL(AbstractCriteriaTestCase.java:314)&lt;br/&gt;
at org.apache.openjpa.persistence.criteria.AbstractCriteriaTestCase.executeAndCompareSQL(AbstractCriteriaTestCase.java:164)&lt;br/&gt;
at org.apache.openjpa.persistence.criteria.AbstractCriteriaTestCase.assertEquivalence(AbstractCriteriaTestCase.java:141)&lt;br/&gt;
at org.apache.openjpa.persistence.criteria.AbstractCriteriaTestCase.assertEquivalence(AbstractCriteriaTestCase.java:108)&lt;br/&gt;
at org.apache.openjpa.persistence.criteria.TestTypesafeCriteria.testFunctionWithTwoArgument(TestTypesafeCriteria.java:908)&lt;br/&gt;
. . .&lt;br/&gt;
Caused by: &amp;lt;openjpa-2.0.0-SNAPSHOT-runknown fatal general error&amp;gt; org.apache.openjpa.persistence.PersistenceException: &apos;MOD&apos; is not a recognized built-in function name. &lt;/p&gt;
{prepstmnt 3164468 SELECT MOD(t0.balanceOwed, ?) FROM CR_CUST t0 [params=(int) 10]} &lt;span class=&quot;error&quot;&gt;&amp;#91;code=195, state=S00010&amp;#93;&lt;/span&gt;&lt;br/&gt;
. . .&lt;br/&gt;
Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: &apos;MOD&apos; is not a recognized built-in function name. {prepstmnt 3164468 SELECT MOD(t0.balanceOwed, ?) FROM CR_CUST t0 [params=(int) 10]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=195, state=S00010&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;2) There is a NVARCHAR to BigDecimal conversion failure in testBigDecimalConversion()-&lt;br/&gt;
&amp;lt;openjpa-2.0.0-SNAPSHOT-runknown fatal general error&amp;gt; org.apache.openjpa.persistence.PersistenceException: Error converting data type nvarchar to decimal. &lt;/p&gt;
{prepstmnt 17141330 SELECT (t0.accountNum * ?) FROM CR_CUST t0 WHERE (t0.id = ?) [params=(BigDecimal) 10.3259699999999998709654391859658062458038330078125, (long) 301]} &lt;span class=&quot;error&quot;&gt;&amp;#91;code=8114, state=S0005&amp;#93;&lt;/span&gt;&lt;br/&gt;
. . .&lt;br/&gt;
Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: Error converting data type nvarchar to decimal. {prepstmnt 17141330 SELECT (t0.accountNum * ?) FROM CR_CUST t0 WHERE (t0.id = ?) [params=(BigDecimal) 10.3259699999999998709654391859658062458038330078125, (long) 301]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=8114, state=S0005&amp;#93;&lt;/span&gt;&lt;br/&gt;
. . .&lt;br/&gt;
NestedThrowables:&lt;br/&gt;
com.microsoft.sqlserver.jdbc.SQLServerException: Error converting data type nvarchar to decimal.&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:196)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461447">OPENJPA-1615</key>
            <summary>CriteriaQuery test failures on MSSQL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="drwoods">Donald Woods</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Apr 2010 20:21:18 +0100</created>
                <updated>Sun, 5 Apr 2015 17:16:55 +0100</updated>
                                            <version>2.0.0-beta3</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12854657" author="drwoods" created="Wed, 7 Apr 2010 20:23:58 +0100"  >&lt;p&gt;Patch that disables the 3 failing tests for now on MSSQL, until the real problems are fixed.&lt;/p&gt;</comment>
                            <comment id="12854666" author="drwoods" created="Wed, 7 Apr 2010 20:48:39 +0100"  >&lt;p&gt;Applied &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1615&quot; title=&quot;CriteriaQuery test failures on MSSQL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1615&quot;&gt;OPENJPA-1615&lt;/a&gt;-trunk-skiptests.patch to trunk (as r931648) and 2.0.x (as r931654) for now, so we can get past the test failures until this issue is fixed.&lt;/p&gt;</comment>
                            <comment id="12856997" author="ppoddar@apache.org" created="Wed, 14 Apr 2010 19:02:22 +0100"  >&lt;p&gt;TestTypesafeCriteria.testFunctionWithTwoArgument() is invalid for SQLServer because CriteriaQuery function() method should refer to a valid database function and MOD() is not a valid function for SQLServer.&lt;/p&gt;
</comment>
                            <comment id="12857013" author="drwoods" created="Wed, 14 Apr 2010 19:34:36 +0100"  >&lt;p&gt;So, does runtime code need to be changed to fix this?  There is a solution, that we should be using &quot;%&quot; instead of &quot;MOD&quot; when using MSSQL....&lt;/p&gt;</comment>
                            <comment id="13199049" author="allee8285" created="Thu, 2 Feb 2012 18:17:20 +0000"  >&lt;p&gt;Move fix version to 2.3.0 in preparation for 2.2.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441074" name="OPENJPA-1615-trunk-skiptests.patch" size="3343" author="drwoods" created="Wed, 7 Apr 2010 20:23:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Apr 2010 18:02:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7ntj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>