<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:39:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2377/OPENJPA-2377.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2377] Metamodel.managedType returns wrong result for Embeddable</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2377</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;I use the following code to dynamically determine if a class is an embeddable:&lt;/p&gt;

&lt;p&gt;Class c = Class.forName(s);&lt;br/&gt;
ManagedType type = metamodel.managedType(c);&lt;br/&gt;
if (type.getPersistenceType() == Type.PersistenceType.EMBEDDABLE) &lt;/p&gt;
{
     logger.debug(&quot;&quot; + c + &quot; is an Embeddable.&quot;);
     // do somthing with the embeddable
}
&lt;p&gt;else if (type.getPersistenceType() == Type.PersistenceType.ENTITY) &lt;/p&gt;
{
     logger.debug(&quot;&quot; + c + &quot; is an Entity.&quot;);
     // do somthing with the entity
}

&lt;p&gt;but when I use this code for an Embeddable, I always get &quot;xxx is an Entity&quot; logged.&lt;/p&gt;

&lt;p&gt;After examining the source code, I found &quot;MetamodelImpl.instantiate&quot; method will always put embeddable to both &quot;embeddables&quot; and &quot;entities&quot; containers, but &quot;MetamodelImpl.managedType&quot; method will first search &quot;entities&quot; and then &quot;embeddables&quot; for a persistence class, thus, &quot;Entity&quot; type will be returned for a ACTUAL Embeddable class.&lt;/p&gt;

&lt;p&gt;Hope this can be fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644570">OPENJPA-2377</key>
            <summary>Metamodel.managedType returns wrong result for Embeddable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="allee8285">Albert Lee</assignee>
                                    <reporter username="azuo_lee">Azuo Lee</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Apr 2013 11:15:48 +0100</created>
                <updated>Tue, 14 May 2013 17:28:19 +0100</updated>
                            <resolved>Tue, 14 May 2013 17:28:19 +0100</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13648822" author="allee8285" created="Fri, 3 May 2013 22:41:44 +0100"  >&lt;p&gt;This patch fixed the reported problem. &lt;/p&gt;

&lt;p&gt;While investigating the problem, due to meta model implementation, we have identified the getEntities and getManagedTypes return more entries than expected if embeddable is used.  This patch also fix these problems as well.&lt;/p&gt;</comment>
                            <comment id="13648824" author="allee8285" created="Fri, 3 May 2013 22:43:41 +0100"  >&lt;p&gt;Azuo,&lt;/p&gt;

&lt;p&gt;Can you apply the patch and verify if this resolve your problem.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Albert Lee.&lt;/p&gt;</comment>
                            <comment id="13657006" author="azuo_lee" created="Tue, 14 May 2013 13:28:44 +0100"  >&lt;p&gt;The patch works fine for my code. Thanks.&lt;/p&gt;

&lt;p&gt;P.S. Should I resolve and close the issure right now, or it will be closed automatically (or by you?) after the patch is committed?&lt;/p&gt;</comment>
                            <comment id="13657183" author="allee8285" created="Tue, 14 May 2013 17:28:19 +0100"  >&lt;p&gt;Azuo,  I have resolved the issue and you can close the JIRA when you feel it has resolved your problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12581753" name="OPENJPA-2377.trunk.patch" size="9255" author="allee8285" created="Fri, 3 May 2013 22:41:44 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 May 2013 21:41:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzdwrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325280</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>