<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:32:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-258/OPENJPA-258.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-258] MetaDataInheritanceComparator is not transitive; C &gt; B &gt; A &gt; C leads to out-of-memory crash in PCEnhancer</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-258</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Comparisons done by MetaDataInheritanceComparator are not transitive. It is possible to have classes A, B, and C such that the comparator simultaneously reports that A &amp;gt; B, B &amp;gt; C, and C &amp;gt; A. Under certain unlucky conditions, this causes the SortedTree holding the metadata resolution buffer to become confused during Red-Black fix, such that it can retrieve a certain element, but not delete it. The &quot;processed&quot; list then grows until heap is exhausted.&lt;/p&gt;

&lt;p&gt;In the enclosed sample project, &lt;/p&gt;

&lt;p&gt;A &amp;lt; B by name&lt;br/&gt;
B &amp;lt; C by assignable primary key field&lt;br/&gt;
C &amp;lt; A by &quot;levels&quot; from base class (Object)&lt;/p&gt;

&lt;p&gt;If you import the enclosed eclipse project into an AspectJ-enabled eclipse, and refer the AspectJ compiler to an OpenJPA jar file, you&apos;ll get the following output:&lt;/p&gt;

&lt;p&gt;  bug.B &amp;gt; bug.A&lt;br/&gt;
  bug.C &amp;gt; bug.B&lt;br/&gt;
  bug.A &amp;gt; bug.C&lt;br/&gt;
  Cycle detected: &lt;br/&gt;
  bug.A &amp;gt; bug.C &amp;gt; bug.B &amp;gt; bug.A&lt;/p&gt;

&lt;p&gt;The project will work outside of AspectJ, and will exhibit the out of memory condition described above.&lt;/p&gt;

&lt;p&gt;I acknowledge that the enclosed persistence.xml file is not kosher, in that it doesn&apos;t list all classes to be instrumented. My own project, affected by this bug, has a correct persistence.xml file. I had to work hard to contrive a simple example, as the order in which classes are buffered affects the appearance of the bug.&lt;/p&gt;

&lt;p&gt;There is no work-around that I know of. I don&apos;t believe that the comparator&apos;s semantics are well-defined.&lt;/p&gt;</description>
                <environment>Sun JDK 5, Sun JDK 6</environment>
        <key id="12371491">OPENJPA-258</key>
            <summary>MetaDataInheritanceComparator is not transitive; C &gt; B &gt; A &gt; C leads to out-of-memory crash in PCEnhancer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdf@us.ibm.com">Jonathan Feinberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2007 19:21:43 +0100</created>
                <updated>Tue, 9 Mar 2010 18:32:35 +0000</updated>
                            <resolved>Thu, 31 Jan 2008 08:04:57 +0000</resolved>
                                    <version>0.9.6</version>
                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12503952" author="jdf@us.ibm.com" created="Tue, 12 Jun 2007 19:23:10 +0100"  >&lt;p&gt;Attached: An eclipse/AJDT project. When built and run with AspectJ, will instrument the defective comparator and fail fast on detection of cycle. Without AJDT, will run out of memory and die.&lt;/p&gt;</comment>
                            <comment id="12521483" author="mprudhom" created="Tue, 21 Aug 2007 15:57:08 +0100"  >&lt;p&gt;Bumping to release 1.0.1 since 1.0.0 is being released.&lt;/p&gt;</comment>
                            <comment id="12538828" author="allee8285" created="Tue, 30 Oct 2007 16:08:58 +0000"  >&lt;p&gt;Defer to next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12359534" name="jpa-comparator-bug.zip" size="4691" author="jdf@us.ibm.com" created="Tue, 12 Jun 2007 19:23:10 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Aug 2007 14:57:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysq0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>201564</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>