<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:33:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-159/OPENJPA-159.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-159] Make ManagedRuntime amenable to more transaction execution strategies</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-159</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;OpenJPA occasionally needs to perform work in a non-business transaction (see AbstractJDBCSeq.java). In a transactional environment, one way that this is achieved is by suspending the current JTA transaction, starting a new one, doing the work, cleaning up the new tx, and resuming the original one. Some environments do not allow direct transaction control, but mechanisms such as stateless session beans can often be used to kick off atomic operations that should execute in a separate transaction.&lt;/p&gt;

&lt;p&gt;We could easily add ManagedRuntime.executeInNewTransaction(Runnable) that captured this slightly-coarser-grained transaction control. The default implementation could simply do  suspend(), begin(), invoke Runnable.run(), commit()/rollback(), resume().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12363286">OPENJPA-159</key>
            <summary>Make ManagedRuntime amenable to more transaction execution strategies</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12351985">OPENJPA-61</parent>
                                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikedd">Michael Dick</assignee>
                                    <reporter username="pcl">Patrick Linskey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Feb 2007 07:10:02 +0000</created>
                <updated>Tue, 9 Mar 2010 18:32:31 +0000</updated>
                            <resolved>Fri, 25 Apr 2008 21:24:52 +0100</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                    <component>jdbc</component>
                    <component>kernel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12592493" author="mikedd" created="Fri, 25 Apr 2008 21:24:52 +0100"  >&lt;p&gt;Under svn revision 651441 I added a doNonTransactionalWork method to the ManagedRuntime interface. Here&apos;s the relevant signature : &lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&amp;lt;P&amp;gt;&lt;/li&gt;
	&lt;li&gt;Do a unit of work which will execute outside of the current managed&lt;/li&gt;
	&lt;li&gt;transaction.&lt;/li&gt;
	&lt;li&gt;&amp;lt;/P&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;P&amp;gt;&lt;/li&gt;
	&lt;li&gt;If the runnable object encounters an exception it should be wrapped in a&lt;/li&gt;
	&lt;li&gt;RuntimeException and thrown back to the caller&lt;/li&gt;
	&lt;li&gt;&amp;lt;/P&amp;gt;&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@param runnable&lt;/li&gt;
	&lt;li&gt;The runnable wrapper for the work that will be done. The&lt;/li&gt;
	&lt;li&gt;runnable object should be fully initialized with any state&lt;/li&gt;
	&lt;li&gt;needed to execute.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws NotSupportedException&lt;/li&gt;
	&lt;li&gt;if the transaction can not be suspended.&lt;br/&gt;
     */&lt;br/&gt;
    public void doNonTransactionalWork(Runnable runnable)&lt;br/&gt;
            throws NotSupportedException;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Currently the interface is only used when we obtain a sequence value from a sequence table (see TableJDBCSeq.java). The default implementation, found in AbstractManagedRuntime will merely suspend, execute, then resume the current transaction. &lt;/p&gt;

&lt;p&gt;Subclasses can further refine this behavior and to take advantage of vendor specific hooks. An example has been provided for WebSphere Application Server under &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-159&quot; title=&quot;Make ManagedRuntime amenable to more transaction execution strategies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-159&quot;&gt;&lt;del&gt;OPENJPA-159&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12592494" author="mikedd" created="Fri, 25 Apr 2008 21:25:25 +0100"  >&lt;p&gt;Edit,messed up the link, the new WebSphere Managed runtime is provided in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-149&quot; title=&quot;non-jta-data-source must be specified in WebSphere environments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-149&quot;&gt;&lt;del&gt;OPENJPA-149&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12362837">OPENJPA-149</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Apr 2008 20:24:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyspun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>201536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>