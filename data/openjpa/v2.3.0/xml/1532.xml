<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:41:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1532/OPENJPA-1532.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1532] Should the &lt;shared-cache-mode&gt; element in a persistence unit definition automatically turn on the data cache?</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1532</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;The JPA 2.0 spec introduces a new persistence unit definition element, &amp;lt;shared-cache-mode&amp;gt;, which accepts NONE, ALL, ENABLE_SELECTIVE, and DISABLE_SELECTIVE.  The JPA 2.0 spec section 3.7.1 documents the behavior of each of those modes.&lt;/p&gt;

&lt;p&gt;What I am curious about is if the use of &amp;lt;shared-cache-mode&amp;gt; should implicitly enable OpenJPA&apos;s data cache plugin.  Currently, the above element is completely ignored if the persistence unit is missing the properties: openjpa.DataCache=true and openjpa.RemoteCommitProvider=sjvm (because by default, OpenJPA disables data caching).  My interpretation of the spec suggests that &amp;lt;shared-cache-mode&amp;gt; is not only a platform-independent method of instructing the data cache which entities are eligible for admittance to the data cache, but it is also a switch providing a platform-independent method of both turning the data cache on or off (since whether the cache is enabled by default is platform-specific).  Otherwise, why have a NONE value, if it was not intended to be a platform independent means of turning the data cache off?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12457216">OPENJPA-1532</key>
            <summary>Should the &lt;shared-cache-mode&gt; element in a persistence unit definition automatically turn on the data cache?</summary>
                <type id="11" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Question</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="fyrewyld">Jody Grassel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2010 20:47:15 +0000</created>
                <updated>Wed, 10 Apr 2013 17:06:32 +0100</updated>
                            <resolved>Wed, 28 Nov 2012 15:58:07 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.1.0</version>
                    <version>2.2.0</version>
                                    <fixVersion>2.2.2</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>datacache</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12837529" author="kwsutter" created="Tue, 23 Feb 2010 23:53:02 +0000"  >&lt;p&gt;Absolutely, the JPA 2 &amp;lt;shared-cache-mode&amp;gt; element should affect the existing OpenJPA DataCache enablement.  That should be part of the integration work.  I am reading the spec like you are and the &amp;lt;shared-cache-mode&amp;gt; affects whether to use an L2 cache for caching entities or not.  I read that to mean that it should also affect the enablement of the cache.  Unless we can find something in the spec that indicates otherwise, I would say that this is a bug.&lt;/p&gt;</comment>
                            <comment id="12838358" author="mikedd" created="Thu, 25 Feb 2010 14:38:27 +0000"  >&lt;p&gt;Attaching a patch which partially resolves this issue. I wouldn&apos;t consider it finished though. &lt;/p&gt;

&lt;p&gt;Specifically the patch sets openjpa.DataCache and openjpa.RemoteCommitProvider to the most basic values if :&lt;br/&gt;
1. They are not already provided in persistence.xml or passed in when the EMF is created&lt;br/&gt;
2. shared-cache-mode is not NONE&lt;/p&gt;

&lt;p&gt;There&apos;s still work to be done to resolve conflicts, (eg shared-cache-mode = ALL and openjpa.DataCache=false), and there may be a cleaner way to handle the properties, but at least it&apos;s a starting point. &lt;/p&gt;</comment>
                            <comment id="13461949" author="ppoddar@apache.org" created="Mon, 24 Sep 2012 19:02:14 +0100"  >&lt;p&gt;Whether &amp;lt;shared-cache-mode&amp;gt; activates data cache or not &amp;#8211; is not the issue I have raised. In fact I tend to agree that shared-cache-mode should activate Data Cache. My concern is &lt;b&gt;how&lt;/b&gt; it is to be done.doing it in a case-by-case basis is weaker design construct. A design to support co-dependent configuration should be followed.   &lt;/p&gt;</comment>
                            <comment id="13469451" author="helenxu" created="Thu, 4 Oct 2012 16:20:45 +0100"  >&lt;p&gt;Attached a fix to this issue. The fix is similar to what Michael had, but in different class when all the properties are loaded in PersistenceProductDerivation. Also add more messages to indicate the config conflicts and give recommendation. &lt;br/&gt;
New test cases are added to have a better coverage.&lt;br/&gt;
Modified the existing doc to include the integration of the shared cache mode and openjpa.DataCache&lt;/p&gt;</comment>
                            <comment id="13472378" author="curtisr7" created="Tue, 9 Oct 2012 14:48:26 +0100"  >&lt;p&gt;Committed test/code to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Helen!&lt;/p&gt;</comment>
                            <comment id="13491796" author="helenxu" created="Tue, 6 Nov 2012 20:43:45 +0000"  >&lt;p&gt;reopen the issue to attach the migration doc&lt;/p&gt;</comment>
                            <comment id="13505585" author="helenxu" created="Wed, 28 Nov 2012 15:58:07 +0000"  >&lt;p&gt;Migration doc added to 2.2.x and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12547769" name="OPENJPA-1532-Doc.patch" size="4559" author="helenxu" created="Thu, 4 Oct 2012 16:20:23 +0100"/>
                            <attachment id="12552336" name="OPENJPA-1532-MigrationDoc.patch" size="1246" author="helenxu" created="Tue, 6 Nov 2012 20:44:11 +0000"/>
                            <attachment id="12547768" name="OPENJPA-1532.patch" size="56930" author="helenxu" created="Thu, 4 Oct 2012 16:20:23 +0100"/>
                            <attachment id="12437002" name="OPENJPA-1532.patch.txt" size="19290" author="mikedd" created="Thu, 25 Feb 2010 14:38:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Feb 2010 23:53:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161796</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxusrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>