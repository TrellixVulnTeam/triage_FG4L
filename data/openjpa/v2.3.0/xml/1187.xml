<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:45:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1187/OPENJPA-1187.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1187] Output control for generated canonical metamodel source code</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1187</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Where to write the canonical metamodel source code a.b.PC_.java for a.b.PC.java?&lt;/p&gt;

&lt;p&gt;   This is a typical usability issue that does not seem to have unique answer. I have listed some possible options and current state of affair in OpenJPA implementaion.&lt;/p&gt;

&lt;p&gt;   Let us hear your comments.&lt;/p&gt;


&lt;p&gt; A. in the same directory where original source code  a.b.PC.java  resides?&lt;br/&gt;
 B. in package path relative to a directory as specified by the user? Say some/user/dir/a/b/PC_.java&lt;br/&gt;
 C. in the same directory where the classes are being generated? (i.e. value of the javac -d option)&lt;br/&gt;
 D. some other place?&lt;/p&gt;

&lt;p&gt;The opinion seems to be divided on these choices. Some pros and cons of the above choices&lt;/p&gt;

&lt;p&gt;  Choice A:   in the same directory where original source code  a.b.PC.java  resides&lt;br/&gt;
    pros: somewhat natural. May be even helpful when the source code files being compiled reside relative to multiple roots.&lt;br/&gt;
    cons: some may object to auto-generated files in the same directory of the user-written files. &lt;br/&gt;
    The original Annotation Processor expert thinks it is bad idea.&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  Choice B: in package path relative to a directory as specified by the user? Say some/user/dir/a/b/PC_.java&lt;br/&gt;
    pros: Gives the choice to user. &lt;br/&gt;
    cons: to support the positive use case of choice A (i.e. where the source files are relative to multiple roots. (This is reported during &quot;user field trial&quot;) can be messy.&lt;/p&gt;

&lt;p&gt;   Choice C: in the same directory where the classes are being generated? (i.e. value of the javac -d option)&lt;br/&gt;
    pros: annotation processor is free of output path details. The generated files are some sort of derived artifacts as and equivalent to *.class files.&lt;br/&gt;
    cons: *.java files with *.class files in the same directory can cause packaging script headache&lt;/p&gt;

&lt;p&gt; D. some other place?&lt;/p&gt;


&lt;p&gt;  The current implementation:&lt;br/&gt;
     If the user specifies a output directory&lt;br/&gt;
      $ javac -processor org.apache.openjpa.persistence.meta.AnnotationProcessor6 -Aout=/mycanonical/meta/model  a/b/PC.java&lt;br/&gt;
     the output will be at /mycanonical/meta/model/a/b/PC_.java&lt;/p&gt;

&lt;p&gt;    The default case is if the user user does not specify -Aout option or the specified directory is invalid, then the files are generated relative to the &apos;current directory&apos; i.e. the directory from which javac was invoked. &lt;/p&gt;


&lt;p&gt;   The proposed change:&lt;br/&gt;
     The -Aout=xyz option remains as it is.&lt;br/&gt;
     The default case will generate PC_.java in the same directory of PC.java.&lt;br/&gt;
     If that is not feasible for some reason (see Note below), write relative to &apos;current directory&apos;. &lt;/p&gt;

&lt;p&gt;   Note: Implementation-wise the proposed change is bit tricky. Because there is no &quot;standard compliant&quot; way to know the exact file system location of source code for a type a.b.PC that is being compiled &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; (i.e. the context in which Annotation Processor is being invoked and all the above funky file-writing is to happen). There are non-standard way to get the file system location of the source code file using Sun&apos;s javac and tools.jar. So this feature of writing to the same directory of original *.java file is infeasible for other compilers or even for Sun&apos;s javac if tools.jar is not in compiler&apos;s classpath. &lt;/p&gt;



&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://forums.sun.com/post!reply.jspa?messageID=10770788&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forums.sun.com/post!reply.jspa?messageID=10770788&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; Personal communication with Annotation Processing authors&lt;/p&gt;</description>
                <environment></environment>
        <key id="12430971">OPENJPA-1187</key>
            <summary>Output control for generated canonical metamodel source code</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ppoddar@apache.org">Pinaki Poddar</assignee>
                                    <reporter username="ppoddar@apache.org">Pinaki Poddar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jul 2009 00:51:17 +0100</created>
                <updated>Mon, 12 Apr 2010 18:33:52 +0100</updated>
                            <resolved>Thu, 27 Aug 2009 17:58:06 +0100</resolved>
                                                    <fixVersion>2.0.0-M3</fixVersion>
                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12430820">OPENJPA-1183</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12461819">OPENJPA-1628</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt2sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>