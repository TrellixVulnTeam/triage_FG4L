<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:33:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-428/OPENJPA-428.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-428] Bad error message regarding &quot;openjpa.Id&quot;</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-428</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Hi all, this bug is to report a confusing and misplaced error message. Problem is described below. Feel free to request more info from me.&lt;/p&gt;

&lt;p&gt;When running my project with OpenJPA, I get the following error message:&lt;/p&gt;

&lt;p&gt;140  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;http-0.0.0.0-8080-Processor23&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 1.0.0&lt;br/&gt;
380  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;http-0.0.0.0-8080-Processor23&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &quot;org.apache.openjpa.jdbc.sql.DB2Dictionary&quot;.&lt;br/&gt;
20  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;http-0.0.0.0-8080-Processor25&amp;#93;&lt;/span&gt; openjpa.Runtime - The property named &quot;openjpa.Id&quot; was not recognized and will be ignored, although the name closely matches a valid property called &quot;openjpa.Id&quot;.&lt;br/&gt;
100  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;http-0.0.0.0-8080-Processor25&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 1.0.0&lt;br/&gt;
300  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;http-0.0.0.0-8080-Processor25&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &quot;org.apache.openjpa.jdbc.sql.DB2Dictionary&quot;.&lt;/p&gt;

&lt;p&gt;As you can see, the two property names printed are the same, not different or similar. I retyped all my @Id annotations to make sure there was no special character in one of them coming from copy&amp;amp;paste.&lt;br/&gt;
Furthermore, I was able to identify that the error message was being printed only when I removed the @Id annotation from one of my classes (all the other classes still have @Id).&lt;/p&gt;

&lt;p&gt;Here is a sample of my class without @Id annotation:&lt;br/&gt;
@Entity&lt;br/&gt;
@Table(name=&quot;TAX&quot;, schema=&quot;JPA_SC&quot;)&lt;br/&gt;
public class Tax  {&lt;/p&gt;

&lt;p&gt;	// Class variables  &lt;br/&gt;
	protected double taxamount;&lt;/p&gt;

&lt;p&gt;	public Tax(){&lt;/p&gt;

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;	public Tax(double taxamount)&lt;/p&gt;
{
		this.taxamount = taxamount;
	}
&lt;p&gt;//plus getter and setter for taxamount&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Vitor Rodrigues&lt;/p&gt;</description>
                <environment></environment>
        <key id="12381637">OPENJPA-428</key>
            <summary>Bad error message regarding &quot;openjpa.Id&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="allee8285">Albert Lee</assignee>
                                    <reporter username="vitorrodrigues">Vitor Rodrigues</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Nov 2007 17:39:40 +0000</created>
                <updated>Wed, 8 Aug 2012 19:04:01 +0100</updated>
                            <resolved>Wed, 8 Aug 2012 19:04:01 +0100</resolved>
                                    <version>1.0.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12540227" author="pcl" created="Mon, 5 Nov 2007 17:41:15 +0000"  >&lt;p&gt;Attached is a test case (source and compiled classes) that attempts to emulate this issue, but when run against OpenJPA 1.0.0, I don&apos;t see the error message.&lt;/p&gt;

&lt;p&gt;Issue428Entity.class is enhanced in the attached jar; I also ran the test without the enhancer. I saw no errors in either environment.&lt;/p&gt;</comment>
                            <comment id="12834361" author="faywang" created="Tue, 16 Feb 2010 18:24:03 +0000"  >&lt;p&gt;There is another scenario to get the message of &apos;The property named &quot;openjpa.Id&quot; was not recognized and will be ignored, although the name closely matches a valid property called &quot;openjpa.Id&quot;. &apos;:&lt;/p&gt;

&lt;p&gt;C:\was70\bin&amp;gt;set classpath=D:\db2jcc.jar;D:\db2jcc_license_cu.jar;D:\pdq.jar;D:\pdqmgmt.jar;D:\META-INF&lt;/p&gt;

&lt;p&gt;C:\was70\bin&amp;gt;wsdb2gen -pu CustomerEJB3 -url jdbc:db2://localhost:50000/DEMODB -user user1 -pw password1&lt;br/&gt;
Start WsJpaDB2Gen for CustomerEJB3...&lt;br/&gt;
94  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - The configuration property named &quot;openjpa.Id&quot; was not recognized and will be ignored, although the name closely matches a valid property called &quot;openjpa.Id&quot;.&lt;br/&gt;
url from user is jdbc:db2://localhost:50000/DEMODB&lt;br/&gt;
URL from user is jdbc:db2://localhost:50000/DEMODB&lt;br/&gt;
ConnectionProperties: DriverType=4, DatabaseName=DEMODB, PortNumber=50000, ServerName=localhost&lt;br/&gt;
1203  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &quot;com.ibm.ws.persistence.jdbc.sql.DB2Dictionary&quot;.&lt;br/&gt;
1719  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 2.0.0-M3&lt;br/&gt;
2047  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &quot;com.ibm.ws.persistence.pdqstatic.jdbc.sql.StaticDB2Dictionary&quot;.&lt;br/&gt;
Done!&lt;/p&gt;

&lt;p&gt;Note that the persistence.xml is in D:\META-INF. However, the classpath is set to D:\META-INF. If the classpath is changed to D:\ , the project works fine. No more the message about openjpa.Id. &lt;/p&gt;

</comment>
                            <comment id="12906946" author="kwsutter" created="Tue, 7 Sep 2010 20:41:12 +0100"  >&lt;p&gt;From Harold on our Users forum (&lt;a href=&quot;http://openjpa.208410.n2.nabble.com/Confusing-warning-about-openjpa-jdbc-SynchronizeMappings-tc5495438.html#a5495438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://openjpa.208410.n2.nabble.com/Confusing-warning-about-openjpa-jdbc-SynchronizeMappings-tc5495438.html#a5495438&lt;/a&gt;)...&lt;/p&gt;

&lt;p&gt;Hi Kevin,&lt;/p&gt;

&lt;p&gt;I can&apos;t offer a fix (yet), but I think I&apos;ve pinpointed the problem. Here is&lt;br/&gt;
a little test case:&lt;/p&gt;

&lt;p&gt;import static org.junit.Assert.assertEquals;&lt;br/&gt;
import org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl;&lt;br/&gt;
import org.junit.Test;&lt;/p&gt;

&lt;p&gt;public class ConfigurationTest {&lt;/p&gt;

&lt;p&gt;   @Test&lt;br/&gt;
   public void cloneTest() &lt;/p&gt;
{
       JDBCConfigurationImpl config = new JDBCConfigurationImpl();
       JDBCConfigurationImpl newConfig = (JDBCConfigurationImpl)
config.clone();
       assertEquals(config, newConfig);
   }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;The warning message about the configuration property&lt;br/&gt;
openjpa.jdbc.SynchronizeMappings is logged during config.clone().&lt;/p&gt;

&lt;p&gt;clone() is implemented by invoking first toProperties(true) and then&lt;br/&gt;
fromProperties() on the resulting properties map.&lt;/p&gt;

&lt;p&gt;fromProperties() removes all known properties from the map and then issues&lt;br/&gt;
warnings for all remaining ones - at least that seems to be the intention.&lt;/p&gt;

&lt;p&gt;The problem is that SynchronizeMappings has no default value, or rather a&lt;br/&gt;
default value of null. Thus, the map generated by toProperties(true)&lt;br/&gt;
contains the key openjpa.jdbc.SynchronizeMappings with a value of null.&lt;/p&gt;

&lt;p&gt;fromProperties() in fact only removes the known properties with a non-null&lt;br/&gt;
value,  so the key openjpa.jdbc.SynchronizeMappings remains in the map and&lt;br/&gt;
causes the warning.&lt;/p&gt;

&lt;p&gt;The warning would not appear if clone() invoked toProperties(false), but I&apos;m&lt;br/&gt;
not sure if this has any side effects.&lt;/p&gt;

&lt;p&gt;Moreover, in my test case, the assertion&lt;/p&gt;

&lt;p&gt;  assertEquals(config, newConfig);&lt;/p&gt;

&lt;p&gt;fails - now the Javadoc of Object.clone() states that x.clone().equals&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; is&lt;br/&gt;
not an absolute requirement (without giving any good reasons), but in this&lt;br/&gt;
case I would definitely expect the clone of a configuration to be equal to&lt;br/&gt;
the original.&lt;/p&gt;

&lt;p&gt;The assertion failure is caused by LockTimeout:0&lt;span class=&quot;error&quot;&gt;&amp;#91;int&amp;#93;&lt;/span&gt; != LockTimeout:0&lt;span class=&quot;error&quot;&gt;&amp;#91;int&amp;#93;&lt;/span&gt;,&lt;br/&gt;
so it appears that for x of class IntValue the invariant&lt;/p&gt;

&lt;p&gt;x.clone().equals&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;does not hold either (why?).&lt;/p&gt;

&lt;p&gt;Incidentally, the comment of ConfigurationImpl.toProperties() is outdated.&lt;br/&gt;
It references a non-existing parameter getAll and a non-existing method&lt;br/&gt;
getAllProperties().&lt;/p&gt;

&lt;p&gt;Hopefully, this is enough input for someone familiar with the implementation&lt;br/&gt;
details to come up with a fix...&lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;

&lt;p&gt;Harald&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12368986" name="OPENJPA-428-test.jar" size="9867" author="pcl" created="Mon, 5 Nov 2007 17:41:15 +0000"/>
                            <attachment id="12531982" name="OPENJPA-428.21x.patch" size="2030" author="allee8285" created="Wed, 13 Jun 2012 16:25:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Nov 2007 17:41:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysp6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>201429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>