<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:38:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-740/OPENJPA-740.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-740] In MySQL use LONGBLOB, MEDIUMBLOB etc.. when needed, cause BLOB only holds 64kb of data.</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-740</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;When a column is annotated as a BLOB of using @Persistent to use streaming blobs, and the underlying database is MySQL, OpenJPA will create a column of type BLOB. Unfortunately, in MySQL a BLOB column can hold a (vary) limited amount of data, while (especially when using streaming blobs) the user would probably expect it to hold a large amount of data.&lt;/p&gt;

&lt;p&gt;Also adding the @Column annotation and specifying a size bigger than what a BLOB column in MySQL can hold, OpenJPA still creates only a BLOB column.&lt;/p&gt;

&lt;p&gt;I think OpenJPA should be able to create the proper column type depending on the @Column annotation if present, or otherwise default at least to a MEDIUMBLOB to preserve cross-database compatibility as expected.&lt;/p&gt;

&lt;p&gt;The simplest patch i can think of is setting blobTypeName=&quot;MEDIUMBLOB&quot; in the MySQLDictionary constructor.&lt;/p&gt;

&lt;p&gt;Otherwise, overriding the getTypeName to properly parse the length and return the correct BLOB/TEXT type for mysql.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12405967">OPENJPA-740</key>
            <summary>In MySQL use LONGBLOB, MEDIUMBLOB etc.. when needed, cause BLOB only holds 64kb of data.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drwoods">Donald Woods</assignee>
                                    <reporter username="s.gianni">Simone Gianni</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Oct 2008 23:15:36 +0100</created>
                <updated>Wed, 3 Nov 2010 16:02:48 +0000</updated>
                            <resolved>Mon, 8 Mar 2010 21:50:15 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.2.1</version>
                    <version>1.2.2</version>
                    <version>1.3.0</version>
                    <version>2.0.0-M3</version>
                    <version>2.0.0-beta</version>
                    <version>2.0.0-beta2</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0-beta3</fixVersion>
                                    <component>sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12697091" author="s.gianni" created="Wed, 8 Apr 2009 17:52:30 +0100"  >&lt;p&gt;This patchs uses the right column table for mysql based on the size specified for the column. I had this patch for a few months now, but no one told me how to test it in junit, so unfortunately I haven&apos;t provided a junit test case for it.&lt;/p&gt;

&lt;p&gt;Sice this patch is old, I don&apos;t know if it still applies to recent OpenJPA versions. If I have time to, I&apos;ll do a fresh checkout and test it.&lt;/p&gt;</comment>
                            <comment id="12842286" author="norman" created="Sat, 6 Mar 2010 18:11:22 +0000"  >&lt;p&gt;The Problem still exists in 1.2.2. And for me its really a blocker !&lt;/p&gt;</comment>
                            <comment id="12842288" author="norman" created="Sat, 6 Mar 2010 18:13:38 +0000"  >&lt;p&gt;Our bugreport listed here is related to it:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/IMAP-114&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/IMAP-114&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12842781" author="drwoods" created="Mon, 8 Mar 2010 19:25:15 +0000"  >&lt;p&gt;Updated 1.3.x and trunk patches to match the latest svn revisions.&lt;/p&gt;</comment>
                            <comment id="12842784" author="drwoods" created="Mon, 8 Mar 2010 19:31:21 +0000"  >&lt;p&gt;Fixed order for col.size() checks to correctly return the type....&lt;/p&gt;</comment>
                            <comment id="12842793" author="milosz" created="Mon, 8 Mar 2010 19:43:57 +0000"  >&lt;p&gt;For those not able to use OpenJPA versions with fix - If only MySQL is being used or separate configurations are used for different databases (i.e. DBDictionary auto-detection is not used), setting the following property in persistence.xml should be a workaround:&lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;openjpa.jdbc.DBDictionary&quot; value=&quot;blobTypeName=LONGBLOB&quot;/&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12842795" author="milosz" created="Mon, 8 Mar 2010 19:48:26 +0000"  >&lt;p&gt;Donald, just wondering about the patch - will the column type be correct (i.e. equals the type specified in blobTypeName public variable) when the size of the column is not specified?&lt;/p&gt;</comment>
                            <comment id="12842805" author="drwoods" created="Mon, 8 Mar 2010 20:25:01 +0000"  >&lt;p&gt;Thanks Milosz, I just added a check for size==0 so it&apos;ll use the old blob size (64KB).&lt;br/&gt;
For those cases, users should use your prior comment of overriding the blobTypeName.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12479005">OPENJPA-1870</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12464618">OPENJPA-1667</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12438219" name="OPENJPA-740-13x.patch" size="1585" author="drwoods" created="Mon, 8 Mar 2010 19:31:21 +0000"/>
                            <attachment id="12404982" name="OPENJPA-740-mysqlblob.patch" size="1400" author="s.gianni" created="Wed, 8 Apr 2009 17:52:30 +0100"/>
                            <attachment id="12438218" name="OPENJPA-740-trunk.patch" size="1550" author="drwoods" created="Mon, 8 Mar 2010 19:31:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 Mar 2010 18:11:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysq73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>201592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>