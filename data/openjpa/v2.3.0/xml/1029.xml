<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:37:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1029/OPENJPA-1029.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1029] SQLServerDictionary causes NumberFormatException if MS SQL Server JDBC driver is used</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1029</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;If the Microsoft SQL Server JDBC Driver v1.2 or 2.0 is used instead of the jTDS driver, then the SQLServerDictionary will throw an exception while trying to parse the driverName &quot;Microsoft SQL Server JDBC Driver&quot; to determine the server version.  For the MS SQL JDBC driver, it should be using meta.getDatabaseMajorVersion() to determine the server version.  Also, the MS SQL JDBC driver was not being recognized correctly, so driverVendor was being set to VENDOR_OTHER instead of VENDOR_MICROSOFT.&lt;/p&gt;

&lt;p&gt;java.lang.NumberFormatException: For input string: &quot;JDBC&quot;&lt;br/&gt;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:447)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:497)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLServerDictionary.connectedConfiguration(SQLServerDictionary.java:92)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:190)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:100)&lt;br/&gt;
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:584)&lt;br/&gt;
	at org.apache.openjpa.persistence.query.TestQueryTimeout.setUp(TestQueryTimeout.java:89)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:125)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.PersistenceTestCase.runBare(PersistenceTestCase.java:455)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.PersistenceTestCase.run(PersistenceTestCase.java:182)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
	at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:213)&lt;br/&gt;
	at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)&lt;br/&gt;
	at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)&lt;br/&gt;
	at org.apache.maven.surefire.Surefire.run(Surefire.java:177)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
	at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:334)&lt;br/&gt;
	at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:980)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422393">OPENJPA-1029</key>
            <summary>SQLServerDictionary causes NumberFormatException if MS SQL Server JDBC driver is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikedd">Michael Dick</assignee>
                                    <reporter username="drwoods">Donald Woods</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Apr 2009 19:47:28 +0100</created>
                <updated>Tue, 9 Mar 2010 18:31:13 +0000</updated>
                            <resolved>Thu, 30 Apr 2009 17:32:42 +0100</resolved>
                                    <version>2.0.0-M2</version>
                                    <fixVersion>1.0.4</fixVersion>
                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0-M2</fixVersion>
                                    <component>third-party</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                            <comments>
                            <comment id="12697209" author="drwoods" created="Wed, 8 Apr 2009 22:07:01 +0100"  >&lt;p&gt;Patch that allows usage of the MS SQL Server JDBC drivers &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and adds a test profile for v2.0 of the driver.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://msdn.microsoft.com/en-us/data/aa937724.aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/data/aa937724.aspx&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12697210" author="drwoods" created="Wed, 8 Apr 2009 22:08:45 +0100"  >&lt;p&gt;Jeremy, can you take a look at this patch for me?  It will have to be applied before &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-964&quot; title=&quot;Finish updating sql-error-state- codes.xml for query timeout support on other DBs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-964&quot;&gt;&lt;del&gt;OPENJPA-964&lt;/del&gt;&lt;/a&gt;-part1.patch for proper MS SQL Server support.&lt;/p&gt;</comment>
                            <comment id="12697460" author="milosz" created="Thu, 9 Apr 2009 11:04:44 +0100"  >&lt;p&gt;Donald, have you made sure we will not blow up when using the older Microsoft driver in these lines:&lt;/p&gt;

&lt;p&gt;+            if (VENDOR_MICROSOFT.equalsIgnoreCase(driverVendor)) {&lt;br/&gt;
+                if (meta.getDatabaseMajorVersion() &amp;gt;= 9) {&lt;/p&gt;

&lt;p&gt;meta.getDatabaseMajorVersion() comes with JDBC 3.&lt;/p&gt;</comment>
                            <comment id="12697473" author="drwoods" created="Thu, 9 Apr 2009 11:52:25 +0100"  >&lt;p&gt;What &quot;older&quot; driver are you referring to?&lt;br/&gt;
On the Microsoft website at the link provided earlier, there are only 3 drivers to download -&lt;br/&gt;
v1.1 - SQL Server 2000/2005 JDBC Driver 1.1 is JDBC 3.0 compliant and runs on the Java Runtime Environment (JRE) version 1.4 and later versions&lt;br/&gt;
v1.2 - provides access to SQL Server 2000 and SQL Server 2005 from any Java application ... Type 4 JDBC driver ... is JDBC 3.0 compliant and runs on the Java Development Kit (JDK) version 1.4 and higher.&lt;br/&gt;
v2.0 - provides access to SQL Server 2000, SQL Server 2005, and SQL Server 2008 from any Java application ... Type 4 JDBC driver ...  is JDBC 4.0 compliant and runs on the Java Development Kit (JDK) version 5.0 or later.&lt;/p&gt;

&lt;p&gt;For OpenJPA, I would only suggest tolerating the 1.2 driver and supporting/recommending the 2.0 driver.  In my testing both worked fine, but we only get a SQL status code back from the 2.0 driver for query timeouts.&lt;/p&gt;</comment>
                            <comment id="12697509" author="milosz" created="Thu, 9 Apr 2009 14:30:54 +0100"  >&lt;p&gt;I was referring to v1.2 but from your research we can see we are safe even with v1.1.&lt;/p&gt;

&lt;p&gt;+1 for tolerating v1.2 and recommending v2.0. Allowing only v2.0 seems too restrictive to me as, from what I can see, this is very fresh stuff. A note on this could be added to Supported Databases section in the manual.&lt;/p&gt;</comment>
                            <comment id="12697592" author="drwoods" created="Thu, 9 Apr 2009 19:28:06 +0100"  >&lt;p&gt;Thanks for the review.  I&apos;ll attach an updated patch that includes the Doc updates, along with setting a ne VENDOR_JTDS for the old driver, so we can differentiate the two.&lt;/p&gt;</comment>
                            <comment id="12697871" author="drwoods" created="Fri, 10 Apr 2009 18:32:27 +0100"  >&lt;p&gt;Updated patch which does not log cursor or pooling warnings if using the v2.0 driver.&lt;/p&gt;</comment>
                            <comment id="12697873" author="drwoods" created="Fri, 10 Apr 2009 18:33:24 +0100"  >&lt;p&gt;The doc updates were included in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1033&quot; title=&quot;Update supported database and driver matrix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1033&quot;&gt;&lt;del&gt;OPENJPA-1033&lt;/del&gt;&lt;/a&gt;, as I had other db/driver updates in-progress....&lt;/p&gt;</comment>
                            <comment id="12699704" author="drwoods" created="Thu, 16 Apr 2009 14:41:04 +0100"  >&lt;p&gt;Patches to allow usage of the MS SQL Server JDBC Driver v1.2 or 2.0 with OpenJPA 1.0.x, 1.2.x and 1.3.x.&lt;br/&gt;
Also adds a test-mssql profile to the openjpa-persistence-jdbc/pom.xml for easier testing.&lt;/p&gt;</comment>
                            <comment id="12699762" author="drwoods" created="Thu, 16 Apr 2009 17:55:08 +0100"  >&lt;p&gt;Updated patches that protect against a null driverName being returned from DatabaseMetaData and cleans up some of the conditional statements.&lt;/p&gt;</comment>
                            <comment id="12699769" author="drwoods" created="Thu, 16 Apr 2009 18:15:39 +0100"  >&lt;p&gt;Updated patch for trunk that protects against a possible null driverName being returned from DatabaseMetaData and cleans up some of the conditional statements.&lt;/p&gt;</comment>
                            <comment id="12699992" author="techhusky" created="Fri, 17 Apr 2009 04:39:56 +0100"  >&lt;p&gt;Committed &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1029&quot; title=&quot;SQLServerDictionary causes NumberFormatException if MS SQL Server JDBC driver is used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1029&quot;&gt;&lt;del&gt;OPENJPA-1029&lt;/del&gt;&lt;/a&gt;.patch dated 2009-04-16 10:15 AM to trunk for Donald under revision 765841.&lt;/p&gt;</comment>
                            <comment id="12700161" author="drwoods" created="Fri, 17 Apr 2009 13:51:03 +0100"  >&lt;p&gt;Mike, please consider the patches for the maintenance branches. Thanks.&lt;/p&gt;</comment>
                            <comment id="12704688" author="drwoods" created="Thu, 30 Apr 2009 17:32:42 +0100"  >&lt;p&gt;resolving as fixed in trunk&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12438918">OPENJPA-1359</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12416318">OPENJPA-964</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405669" name="OPENJPA-1029-10x.patch" size="9594" author="drwoods" created="Thu, 16 Apr 2009 17:55:08 +0100"/>
                            <attachment id="12405668" name="OPENJPA-1029-12x.patch" size="9594" author="drwoods" created="Thu, 16 Apr 2009 17:55:08 +0100"/>
                            <attachment id="12405667" name="OPENJPA-1029-13x.patch" size="9594" author="drwoods" created="Thu, 16 Apr 2009 17:55:08 +0100"/>
                            <attachment id="12405670" name="OPENJPA-1029.patch" size="5705" author="drwoods" created="Thu, 16 Apr 2009 18:15:39 +0100"/>
                            <attachment id="12405169" name="OPENJPA-1029.patch" size="8987" author="drwoods" created="Fri, 10 Apr 2009 18:32:27 +0100"/>
                            <attachment id="12405004" name="OPENJPA-1029.patch" size="6143" author="drwoods" created="Wed, 8 Apr 2009 22:07:01 +0100"/>
                    </attachments>
                <subtasks>
                            <subtask id="12422583">OPENJPA-1033</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Apr 2009 10:04:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt6a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204198</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>