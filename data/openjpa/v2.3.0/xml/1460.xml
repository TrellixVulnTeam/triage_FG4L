<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:40:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1460/OPENJPA-1460.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1460] Fix scope visibility of orm.xml when it is packaged in both ear file and war file</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1460</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Per JPA 2.0 spec, section 8.2.2:&lt;br/&gt;
An EJB-JAR, WAR, application client jar, or EAR can define a persistence unit. When referencing a persistence unit using the unitName annotation element or persistence-unit-name deployment descriptor element, the visibility scope of the persistence unit is determined by its point of definition:&lt;/p&gt;

&lt;p&gt;(1) A persistence unit that is defined at the level of an EJB-JAR, WAR, or application client jar is scoped to that EJB-JAR, WAR, or application jar respectively and is visible to the components defined in that jar or war.&lt;/p&gt;

&lt;p&gt;(2) A persistence unit that is defined at the level of the EAR is generally visible to all components in the application. However, if a persistence unit of the same name is defined by an EJB-JAR, WAR, or application jar file within the EAR, the persistence unit of that name defined at EAR level will not be visible to the components defined by that EJB-JAR, WAR, or application jar file unless the persistence unit reference uses the persistence unit name # syntax to specify a path name to disambiguate the reference. When the # syntax is used, the path name is relative to the referencing application component jar file. For example, the syntax ../lib/persistenceUnitRoot. jar#myPersistenceUnit refers to a persistence unit whose name, as specified in the name element of the persistence.xml file, is myPersistenceUnit and for which the relative path name of the root of the persistence unit is ../lib/persistenceUnitRoot. jar. The # syntax may be used with both the unitName annotation element&lt;br/&gt;
or persistence-unit-name deployment descriptor element to reference a persistence unit defined at EAR level.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445570">OPENJPA-1460</key>
            <summary>Fix scope visibility of orm.xml when it is packaged in both ear file and war file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="faywang">Fay Wang</assignee>
                                    <reporter username="faywang">Fay Wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 23:29:42 +0000</created>
                <updated>Tue, 9 Mar 2010 18:29:25 +0000</updated>
                            <resolved>Tue, 9 Mar 2010 14:57:01 +0000</resolved>
                                    <version>2.0.0-M3</version>
                    <version>2.0.0-beta</version>
                                    <fixVersion>2.0.0-beta2</fixVersion>
                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                            <comments>
                            <comment id="12800476" author="faywang" created="Fri, 15 Jan 2010 00:49:20 +0000"  >&lt;p&gt;fix NPE.&lt;/p&gt;</comment>
                            <comment id="12801621" author="faywang" created="Sun, 17 Jan 2010 23:43:38 +0000"  >&lt;p&gt;The fix checked into the JIRA assume that the orm.xml to be used should reside in the same location as the persistence.xml that is used to create EntityManagerFactory.&lt;/p&gt;</comment>
                            <comment id="12803601" author="faywang" created="Fri, 22 Jan 2010 04:43:34 +0000"  >&lt;p&gt;Per spec:&lt;br/&gt;
8.2.1.6.2 Object/relational Mapping Files&lt;br/&gt;
A object/relational mapping XML file named orm.xml may be specified in the META-INF directory in the root of the persistence unit or in the META-INF directory of any jar file referenced by the persistence.xml. Alternatively, or in addition, one or more mapping files may be referenced by the mapping-file elements of the persistence-unit element. These mapping files may be present anywhere on the class path.&lt;/p&gt;

&lt;p&gt;As a result: &lt;br/&gt;
the entity manager factory will look look for orm.xml file 	&lt;br/&gt;
	1.  in the same location (jar file\meta-inf directory) as where the persistence.xml that defined the pu of the EMF was found.&lt;br/&gt;
	2.  in the meta-inf directory of any jar file explicitly mentioned in the &amp;lt;jarfile&amp;gt; tag in the PU.&lt;/p&gt;

&lt;p&gt;finally any &amp;lt;mapping-file&amp;gt; files are also loaded.  &lt;/p&gt;



</comment>
                            <comment id="12803892" author="faywang" created="Fri, 22 Jan 2010 21:51:18 +0000"  >&lt;p&gt;This patch fixes the violation of the principle of spec-agnostic  OpenJPAConfiguration.  &lt;/p&gt;</comment>
                            <comment id="12831564" author="drwoods" created="Tue, 9 Feb 2010 18:01:51 +0000"  >&lt;p&gt;Updated patch that can be applied to the latest trunk (r908071) code&lt;/p&gt;</comment>
                            <comment id="12831661" author="ppoddar@apache.org" created="Tue, 9 Feb 2010 20:59:26 +0000"  >&lt;p&gt;This change should not expose the persistent environment setting on to OpenJPAConfiguration interface. That method does not have a clear semantics to be on the configuration interface. Please keep the method on OpenJPAConfigurationImpl and do a conditional cast to solve the problem at hand.. &lt;/p&gt;</comment>
                            <comment id="12831745" author="faywang" created="Tue, 9 Feb 2010 23:11:03 +0000"  >&lt;p&gt;Made changes according to Pinaki&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="12834279" author="drwoods" created="Tue, 16 Feb 2010 16:05:09 +0000"  >&lt;p&gt;Fay, why did you reopen this?  Is there more work or docs updates to do?&lt;/p&gt;</comment>
                            <comment id="12843069" author="drwoods" created="Tue, 9 Mar 2010 14:57:01 +0000"  >&lt;p&gt;all patches were applied and included in Beta2, so closing this.  there is a open subtask for remaining optional work.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12430331" name="OPENJPA-1460-1.patch" size="4952" author="faywang" created="Fri, 15 Jan 2010 00:49:20 +0000"/>
                            <attachment id="12431094" name="OPENJPA-1460-2.patch" size="8762" author="faywang" created="Fri, 22 Jan 2010 04:41:33 +0000"/>
                            <attachment id="12431151" name="OPENJPA-1460-3.patch" size="9484" author="faywang" created="Fri, 22 Jan 2010 21:51:18 +0000"/>
                            <attachment id="12435318" name="OPENJPA-1460-4.patch" size="9052" author="drwoods" created="Tue, 9 Feb 2010 18:01:51 +0000"/>
                            <attachment id="12435370" name="OPENJPA-1460-5.patch" size="8951" author="faywang" created="Tue, 9 Feb 2010 23:11:03 +0000"/>
                            <attachment id="12430323" name="OPENJPA-1460.patch" size="4900" author="faywang" created="Fri, 15 Jan 2010 00:19:51 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12455930">OPENJPA-1505</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Feb 2010 18:01:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>87576</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysxjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>202781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>