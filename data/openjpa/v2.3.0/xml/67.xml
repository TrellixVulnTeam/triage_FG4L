<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:36:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-67/OPENJPA-67.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-67] Bug with creating a named Sequence Generator for DB2</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-67</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;We discovered that the usage of a named Sequence Generator with DB2 doesn&apos;t work as expected:&lt;/p&gt;

&lt;p&gt;@Entity&lt;br/&gt;
@Table(name=&quot;ORDEREJB&quot;)&lt;br/&gt;
public class OrderEntity implements Serializable {&lt;br/&gt;
        @Id&lt;br/&gt;
        @SequenceGenerator(name=&quot;OrderSeq&quot;, sequenceName=&quot;O_SEQ&quot;)&lt;br/&gt;
        @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;OrderSeq&quot;)&lt;br/&gt;
        private int orderid;&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;This results in the following error:&lt;/p&gt;

&lt;p&gt;2188  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 11372121, conn 27778511&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;985 ms&amp;#93;&lt;/span&gt; executing prepstmnt 3860801 SELECT NEXTVAL FOR O_SEQ&lt;br/&gt;
2188  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - &amp;lt;t 11372121, conn 27778511&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; commit&lt;br/&gt;
2203  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - &amp;lt;t 11372121, conn 27778511&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;15 ms&amp;#93;&lt;/span&gt; close&lt;br/&gt;
&amp;lt;0|false|0.9.0-incubating-SNAPSHOT&amp;gt; org.apache.openjpa.persistence.PersistenceException: An unexpected token &quot;END-OF-STATEMENT&quot; was found following &quot;CT NEXTVAL FOR O_SEQ&quot;.  Expected tokens may include:  &quot;&amp;lt;table_expr&amp;gt;&quot;. &lt;/p&gt;
{prepstmnt 3860801 SELECT NEXTVAL FOR O_SEQ}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=-104, state=42601&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.newStoreException(DBDictionary.java:3713)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:94)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:80)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:56)&lt;/p&gt;

&lt;p&gt;We have discovered that the incorrect SQL statement is specified in the DB2Dictionary.  Instead of this:&lt;/p&gt;

&lt;p&gt;        nextSequenceQuery = &quot;SELECT NEXT VALUE FOR&lt;/p&gt;
{0}&quot;;&lt;br/&gt;
&lt;br/&gt;
We need this:&lt;br/&gt;
&lt;br/&gt;
        nextSequenceQuery = &quot;VALUES NEXTVAL FOR {0}
&lt;p&gt;&quot;;&lt;/p&gt;

&lt;p&gt;I just wanted to document this issue instead of just fixing it so that the problem can be searchable (we&apos;ve had a few people run into this when using OpenJPA with DB2).&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Kevin&lt;/p&gt;</description>
                <environment>DB2</environment>
        <key id="12353882">OPENJPA-67</key>
            <summary>Bug with creating a named Sequence Generator for DB2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwsutter">Kevin Sutter</assignee>
                                    <reporter username="kwsutter">Kevin Sutter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Oct 2006 19:38:32 +0100</created>
                <updated>Tue, 31 Jul 2007 19:56:34 +0100</updated>
                            <resolved>Fri, 27 Oct 2006 17:18:12 +0100</resolved>
                                                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12445216" author="kwsutter" created="Fri, 27 Oct 2006 17:18:12 +0100"  >&lt;p&gt;Updated the DB2 Dictionary with the proper DB2 statements.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysz6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203048</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>