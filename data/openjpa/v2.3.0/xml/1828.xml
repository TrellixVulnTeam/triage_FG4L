<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:35:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1828/OPENJPA-1828.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1828] Query with expression IN (collection_valued_input_parameter) should report syntax error, correct usange is  IN collection_valued_input_parameter</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1828</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;for (int i = 0; i &amp;lt; 2; i ++) &lt;/p&gt;
{
    List categories = new LinkedList();
    categories.add(&quot;01&quot;);
    categories.add(&quot;02&quot;);
    categories.add(&quot;03&quot;);
    Query q = entityManager.createQuery(&quot;select v.id from Category v where v.id in (:p) order by v.id asc&quot;);
    q.setParameter(&quot;p&quot;, categories);
    List results = q.getResultList();
    for (Iterator it = results.iterator(); it.hasNext(); )
         System.out.print(it.next() + &quot;, &quot;);
    System.out.println();
}

&lt;p&gt;The above code will produce the following output:&lt;br/&gt;
01, 02, 03,&lt;br/&gt;
02, 03,&lt;/p&gt;

&lt;p&gt;&quot;01&quot; is missing when the second time the same query is executed.&lt;/p&gt;</description>
                <environment>openjpa-2.1.0-20101001.064809-70</environment>
        <key id="12476792">OPENJPA-1828</key>
            <summary>Query with expression IN (collection_valued_input_parameter) should report syntax error, correct usange is  IN collection_valued_input_parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fancy">Catalina Wei</assignee>
                                    <reporter username="azuo_lee">Azuo Lee</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Oct 2010 19:26:32 +0100</created>
                <updated>Thu, 13 Jan 2011 16:45:41 +0000</updated>
                            <resolved>Wed, 20 Oct 2010 06:11:15 +0100</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12922180" author="fancy" created="Mon, 18 Oct 2010 19:00:02 +0100"  >&lt;p&gt;1. JPA2 Spec defines the collectioin_valued_paramater usage in IN expression is:&lt;br/&gt;
        in_expression ::=&lt;br/&gt;
            &lt;/p&gt;
{state_field_path_expression | type_discriminator}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;NOT&amp;#93;&lt;/span&gt; IN&lt;br/&gt;
                { ( in_item &lt;/p&gt;
{, in_item}
&lt;p&gt;* ) | (subquery) | collection_valued_input_parameter }&lt;/p&gt;

&lt;p&gt;Notice that the collection_valued_input_parameter is not enclosed in parentheses.&lt;/p&gt;

&lt;p&gt;If the input parameter is changed from &quot;(&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&quot; to &quot;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&quot; in the query string as below, then the correct output is produced :&lt;/p&gt;

&lt;p&gt;        &quot;select v.id from Category v where v.id in &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; order by v.id asc&quot;&lt;/p&gt;

&lt;p&gt;2. Single_valued_input_parameter vs. Collection_valued_input_parameter validation was missing, which caused incorrect result&lt;br/&gt;
 when the second time the same query is executed.&lt;br/&gt;
 The fix is to validate it at runtime.&lt;br/&gt;
 The committed code will report ArgumentException if a single_valued_parameter is specified, but user is passing a collection value.&lt;/p&gt;</comment>
                            <comment id="12922847" author="azuo_lee" created="Wed, 20 Oct 2010 06:11:15 +0100"  >&lt;p&gt;Thanks, eliminating the enclosing parentheses solves the problem.&lt;/p&gt;</comment>
                            <comment id="12981358" author="mikedd" created="Thu, 13 Jan 2011 16:45:41 +0000"  >&lt;p&gt;Closing issue which has been resolved for some time. If you believe the issue is not resolved please reopen or open a new issue. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Oct 2010 18:00:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt3p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>