<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:31:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1540/OPENJPA-1540.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1540] XMLSchemaSerializer outputs funny values for column name attributes (regression from 1.2.2)</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1540</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;During a reverse mapping run, it&apos;s often common to take the output of a SchemaGenerator and feed it to an XMLSchemaSerializer via its addAll() method.&lt;/p&gt;

&lt;p&gt;When the DBDictionary that was in effect at schema generation time is one that supports delimiters (see InformixDictionary), then the identifiers on all the artifacts in the SchemaGroup housed by the SchemaGenerator have quotes in them.&lt;/p&gt;

&lt;p&gt;Consequently, when the XMLSchemaSerializer writes its schemas to disk, you can get strange results.  Here&apos;s an example &amp;lt;column&amp;gt; fragment:&lt;/p&gt;

&lt;p&gt;&amp;lt;column name=&quot;&amp;quot;foobar&amp;quot;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;Technically I suppose this may not be a bug in XMLSchemaSerializer, since it is simply serializing what it is handed.  But given that other tools consume its XML schema files, and given that the value of name attribute will be read in as a String, and given that usually what happens is that a String is turned into a DBIdentifier and delimited/quoted as necessary, I am not sure that delimiters should be stored by the XMLSchemaSerializer.&lt;/p&gt;

&lt;p&gt;A downstream effect of this bug is that any reverse  mapping that takes place from here involving annotations will not compile.  That is, if you ask the ReverseMappingTool for example to produce annotated Java objects, the annotations will look like this:&lt;/p&gt;

&lt;p&gt;@Column(name=&quot;&quot;foobar&quot;&quot;)&lt;/p&gt;

&lt;p&gt;...which will not compile.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12457464">OPENJPA-1540</key>
            <summary>XMLSchemaSerializer outputs funny values for column name attributes (regression from 1.2.2)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="techhusky">Jeremy Bauer</assignee>
                                    <reporter username="ljnelson">Laird Nelson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Feb 2010 17:35:10 +0000</created>
                <updated>Mon, 10 Feb 2014 22:53:44 +0000</updated>
                                            <version>2.0.0-beta</version>
                                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12839826" author="techhusky" created="Mon, 1 Mar 2010 19:54:13 +0000"  >&lt;p&gt;Problem 1.  There looks to be a bug in the code that determines whether a value needs to be delimited based upon DBMD returned by the JDBC driver.  I am working on a fix.&lt;/p&gt;

&lt;p&gt;Problem 2.  If a value requires delimiters (ex.  &quot;foo bar&quot;) the code generator needs to escape each delimiter.  Ex:  @Column(name=&quot;\&quot;foo bar\&quot;&quot;).  &lt;/p&gt;</comment>
                            <comment id="12839873" author="techhusky" created="Mon, 1 Mar 2010 21:38:35 +0000"  >&lt;p&gt;Laird, I committed a change under rev 917727 (to trunk) that should fix many of the backward compatibility issues you are seeing &amp;#8211; provided that you are/were using the Informix JDBC driver. The IBM JCC driver &lt;b&gt;should&lt;/b&gt; have worked without this change. Please let me know if it helps. There will still be a problem in the reverse mapping tool if delimited ID&apos;s are used (but I doubt this is the case since you are running with 1.2.2 as well). In addition there may still be a problem with index identifiers that start with a number (that does not follow SQL naming conventions and needs special handling) . I&apos;ll work on tuning the naming code to allow this behavior on Informix.&lt;/p&gt;</comment>
                            <comment id="13897163" author="ayl2" created="Mon, 10 Feb 2014 22:53:44 +0000"  >&lt;p&gt;I need to revive this ticket. Running into this issue with an Oracle database. Whenever a column name contains lowercase characters, the generated annotation has incorrect delimiters as described by original reporter. &lt;/p&gt;

&lt;p&gt;EXAMPLE GENERATED CODE&lt;/p&gt;

&lt;p&gt;import javax.persistence.*;&lt;/p&gt;

&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Auto-generated by:&lt;/li&gt;
	&lt;li&gt;org.apache.openjpa.jdbc.meta.ReverseMappingTool$AnnotatedCodeGenerator&lt;br/&gt;
 */&lt;br/&gt;
@Entity&lt;br/&gt;
@Table(schema=&quot;MYUSER&quot;, name=&quot;T_CONSTRAINT&quot;)&lt;br/&gt;
public class TConstraint {&lt;br/&gt;
	private String constraint;&lt;br/&gt;
	private String description;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;	public TConstraint () {&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;	public TConstraint (String constraint) &lt;/p&gt;
{
		this.constraint = constraint;
	}&lt;br/&gt;
&lt;br/&gt;
	@Id&lt;br/&gt;
	@Column(name=&quot;&quot;Constraint&quot;&quot;, length=16)&lt;br/&gt;
	public String getConstraint() {
		return constraint;
	}&lt;br/&gt;
&lt;br/&gt;
	public void setConstraint(String constraint) {
		this.constraint = constraint;
	}

&lt;p&gt;	@Basic&lt;br/&gt;
	@Column(length=50)&lt;br/&gt;
	public String getDescription() &lt;/p&gt;
{
		return description;
	}

&lt;p&gt;	public void setDescription(String description) &lt;/p&gt;
{
		this.description = description;
	}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;OPENJPA REVISION INFO&lt;/p&gt;

&lt;p&gt;revision.number=422266:1491915&lt;br/&gt;
openjpa.version=2.3.0-SNAPSHOT&lt;br/&gt;
openjpa.enhancer.revision=1461751 &lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457446">OPENJPA-1537</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Mar 2010 19:54:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7o0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>