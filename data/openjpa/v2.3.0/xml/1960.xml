<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:41:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1960/OPENJPA-1960.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1960] openjpa.InitializeEagerly breaks bean-validation integration</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1960</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;&amp;lt;property name=&quot;openjpa.InitializeEagerly&quot; value=&quot;true&quot;/&amp;gt; breaks the bean-validation integration&lt;/p&gt;

&lt;p&gt;AbstractBrokerFactory#makeReadOnly&lt;br/&gt;
evaluates conf.isInitializeEagerly() which returns true (due to the config) and calls _conf.setReadOnly(Configuration.INIT_STATE_FROZEN)&lt;br/&gt;
+ at the end of AbstractBrokerFactory#initializeBroker it gets called again&lt;/p&gt;

&lt;p&gt;that causes:&lt;br/&gt;
the created BrokerFactory gets used as argument for PersistenceProviderImpl#loadValidator which fails (with a warning or an exception depending on the validation-mode configured in the persistence.xml) because the config is in state INIT_STATE_FROZEN&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501521">OPENJPA-1960</key>
            <summary>openjpa.InitializeEagerly breaks bean-validation integration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="gpetracek">Gerhard Petracek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2011 23:19:03 +0000</created>
                <updated>Thu, 2 Feb 2012 17:07:46 +0000</updated>
                            <resolved>Tue, 22 Mar 2011 20:51:19 +0000</resolved>
                                    <version>2.1.0</version>
                    <version>2.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>kernel</component>
                    <component>validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13007301" author="curtisr7" created="Wed, 16 Mar 2011 00:43:05 +0000"  >&lt;p&gt;What is the exception / warning that you are getting?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                            <comment id="13007317" author="gpetracek" created="Wed, 16 Mar 2011 02:19:21 +0000"  >&lt;p&gt;with the default validation mode (== auto):&lt;br/&gt;
WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;btpool0-1&amp;#93;&lt;/span&gt; openjpa.Runtime - Could not create the optional validation provider. Reason returned: &quot;Can not modify &quot;LifecycleEventManager&quot; because the property is not dynamic and the current configuration is read-only.&quot;&lt;/p&gt;

&lt;p&gt;in case of &amp;lt;validation-mode&amp;gt;CALLBACK&amp;lt;/validation-mode&amp;gt; it is:&lt;br/&gt;
Caused by: java.lang.RuntimeException: Can not modify &quot;LifecycleEventManager&quot; because the property is not dynamic and the current configuration is read-only.&lt;br/&gt;
	at org.apache.openjpa.lib.conf.Value.assertChangeable(Value.java:480)&lt;br/&gt;
	at org.apache.openjpa.lib.conf.PluginValue.setString(PluginValue.java:135)&lt;br/&gt;
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.setLifecycleEventManager(OpenJPAConfigurationImpl.java:1742)&lt;br/&gt;
	at org.apache.openjpa.persistence.validation.ValidationUtils.setupValidation(ValidationUtils.java:103)&lt;br/&gt;
	at org.apache.openjpa.persistence.PersistenceProviderImpl.loadValidator(PersistenceProviderImpl.java:325)&lt;br/&gt;
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:104)&lt;/p&gt;</comment>
                            <comment id="13008487" author="curtisr7" created="Fri, 18 Mar 2011 16:09:10 +0000"  >&lt;p&gt;Attaching a test fix. The jar has a patch file of the changes, and the compiled .class change.&lt;/p&gt;</comment>
                            <comment id="13008489" author="curtisr7" created="Fri, 18 Mar 2011 16:10:23 +0000"  >&lt;p&gt;Gerhard -&lt;/p&gt;

&lt;p&gt;Please give the attached patch a try. &lt;/p&gt;

&lt;p&gt;I really don&apos;t like the change, but I want to make sure I am looking at fixing the same path that you are reporting. Once I get the thumbs up from you I&apos;ll see about fixing this another way.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                            <comment id="13008633" author="gpetracek" created="Fri, 18 Mar 2011 21:11:42 +0000"  >&lt;p&gt;your bypass of #assertChangeable works&lt;/p&gt;</comment>
                            <comment id="13009834" author="curtisr7" created="Tue, 22 Mar 2011 20:51:19 +0000"  >&lt;p&gt;Committed revision 1084349 to trunk.&lt;/p&gt;</comment>
                            <comment id="13198968" author="allee8285" created="Thu, 2 Feb 2012 17:07:46 +0000"  >&lt;p&gt;Close issue in preparation for 2.2.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474011" name="OPENJPA-1960-test_fix.jar" size="52123" author="curtisr7" created="Fri, 18 Mar 2011 16:09:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Mar 2011 00:43:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt00v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>