<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:37:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-750/OPENJPA-750.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-750] OptimisticLockException is thrown when numeric truncation occurs on Sybase</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-750</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;OpenJPA throws an OptimisicLockException after an insert is issued to Sybase and there is no SQLException and the update count does not match the expected value.  The root cause is that the insert is trying to insert a numeric value which is larger than the numeric field.  Sybase issues a SQLWarning  (preparedStatement.getWarnings()) and the insert fails.  An OptimisticLockException is thrown with misleading statement text.&lt;/p&gt;

&lt;p&gt;I recommend we:&lt;/p&gt;

&lt;p&gt;1) Add a config property to disable numeric truncation, if possible.&lt;br/&gt;
2) Check for SQLWarning&apos;s after an ps exec fails and minimally log them.  Or throw them as a more appropriate exception?&lt;/p&gt;

&lt;p&gt;This issue is very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-745&quot; title=&quot;Sybase by default silently truncates a string which is longer than the column length without raising an exception &quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-745&quot;&gt;&lt;del&gt;OPENJPA-745&lt;/del&gt;&lt;/a&gt;, except 745 deals with character truncation.&lt;/p&gt;</description>
                <environment>Sybase 15, jconn3.jar</environment>
        <key id="12406711">OPENJPA-750</key>
            <summary>OptimisticLockException is thrown when numeric truncation occurs on Sybase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="techhusky">Jeremy Bauer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Oct 2008 21:26:28 +0100</created>
                <updated>Thu, 22 Apr 2010 21:32:50 +0100</updated>
                            <resolved>Thu, 23 Oct 2008 15:51:24 +0100</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12640684" author="faywang" created="Fri, 17 Oct 2008 23:13:35 +0100"  >&lt;p&gt;Hi Jeremy, for your option (1), you might want to look at Sybase arithabort numeric_truncation flag. For compliance with the ANSI SQL standard, enter &lt;br/&gt;
&quot;set arithabort numeric_truncation on&quot;. For details, see &lt;a href=&quot;http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/3524;pt=693/*&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/3524;pt=693/*&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12642174" author="techhusky" created="Thu, 23 Oct 2008 15:51:24 +0100"  >&lt;p&gt;Committed in revision 707270.&lt;/p&gt;

&lt;p&gt;Resolved issue by adding a new option, IgnoreNumericTruncation to the Sybase dictionary.  In addition, code was added to the batching and standard prepared statement managers to log any SQL warnings that result from statement execution.  That will help make issues such as this simpler to diagnose for those JDBC drivers that surface individual or batch operation failures as a warning.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12406339">OPENJPA-745</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Oct 2008 22:13:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161058</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt2h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>