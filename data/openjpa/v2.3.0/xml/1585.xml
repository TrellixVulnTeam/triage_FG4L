<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:36:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1585/OPENJPA-1585.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1585] Additional trace to relate SQL pushdowns with entity action or JPQL query</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1585</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Additional trace can help users understand and relate query or entity actions with SQL pushdowns:&lt;br/&gt;
1.  why SQL pushdown has JOINs that are generated, a trace dumping out eager relations for the generated SQL is very helpful.&lt;br/&gt;
2. a JPQL or a simple em.find() generated caused more than one SQL requests.&lt;br/&gt;
3. entity instance actions (INSERT, UPDATE, DELETE) generated SQL&lt;/p&gt;

&lt;p&gt;Examples:&lt;br/&gt;
1. JOIN is generated because of the eager relation &apos;entitya&apos;:&lt;br/&gt;
4891  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Query - Executing query: select s from CascadeB s&lt;br/&gt;
4906  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Extra - Eager relations: &lt;span class=&quot;error&quot;&gt;&amp;#91;test.entities.CascadeB.entitya&amp;#93;&lt;/span&gt;&lt;br/&gt;
5141  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 26882784, conn 9493&amp;gt; executing prepstmnt 25862088 SELECT t0.id, t1.id, t1.name, t0.name FROM CascadeB t0 LEFT OUTER JOIN CascadeA t1 ON t0.ENTITYA_ID = t1.id &lt;/p&gt;

&lt;p&gt;2. flush for new instance of entity action:&lt;br/&gt;
7250  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Extra - flush: org.apache.openjpa.kernel.PNewState for oid=1&lt;br/&gt;
7250  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL -: INSERT INTO BasicA (age,id,name) VALUES (?,?,?) &lt;span class=&quot;error&quot;&gt;&amp;#91;1,1,name1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;2: loading relation &apos;entitya&apos;:&lt;br/&gt;
7734  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Extra - load field: &apos;entitya&apos; for oid=1 class test.entities.BasicB&lt;br/&gt;
7734  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Extra - find: oid=1 class test.entities.BasicA&lt;br/&gt;
7734  p1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Extra - getInitializeStateResult: oid=1 class test.entities.BasicA&lt;br/&gt;
7969  pdq1  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 26882784, conn 3125250&amp;gt; executing prepstmnt 28008463 SELECT t0.name FROM BasicA t0 WHERE t0.id = ?  optimize for 1 row &lt;span class=&quot;error&quot;&gt;&amp;#91;params=(int) 1&amp;#93;&lt;/span&gt;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12459604">OPENJPA-1585</key>
            <summary>Additional trace to relate SQL pushdowns with entity action or JPQL query</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fancy">Catalina Wei</assignee>
                                    <reporter username="fancy">Catalina Wei</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Mar 2010 02:49:29 +0000</created>
                <updated>Tue, 30 Mar 2010 00:17:49 +0100</updated>
                            <resolved>Sun, 21 Mar 2010 18:05:35 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0-beta3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12847211" author="fancy" created="Fri, 19 Mar 2010 02:59:31 +0000"  >&lt;p&gt;In this patch, a trace channel named &apos;openjpa.jdbc.Extra&apos; is defined for getting additional trace information that may help users relate the SQLs generated to entity activities or JPQL queries.&lt;/p&gt;

&lt;p&gt;To turn on this trace, add as below:&lt;/p&gt;

&lt;p&gt;    &amp;lt;property name=&quot;openjpa.Log&quot; value=&quot;Query=TRACE,SQL=TRACE,Extra=TRACE&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;It would only make sense to turn on Extra trace when Query and SQL traces are also turned on.&lt;/p&gt;</comment>
                            <comment id="12848152" author="ppoddar@apache.org" created="Mon, 22 Mar 2010 14:55:56 +0000"  >&lt;p&gt;1. How about adding these useful trace statements to SQL=TRACE level itself instead of having an extra channel.&lt;br/&gt;
2. The trace messages use non-localized hard coded Strings. Generally that is not done for other parts of the code base.&lt;/p&gt;</comment>
                            <comment id="12848407" author="fancy" created="Mon, 22 Mar 2010 22:34:32 +0000"  >
&lt;p&gt;Hi Pinaki,&lt;br/&gt;
Thanks for your comment.&lt;br/&gt;
Yes, it would be nice to introduce another level of tracing&lt;br/&gt;
(openjpa.jdbc.SQL=DIAG level),&lt;br/&gt;
but that involves changing the Log interface, and I found that the&lt;br/&gt;
com.ibm.ws.jpa.management.TraceLogChannel  implements Log interface.&lt;br/&gt;
I was afraid of any build/compile breaks at this time since we are about to&lt;br/&gt;
cut 2.0.0  branch.&lt;br/&gt;
I will take another shot at this after we have that done and work on it at&lt;br/&gt;
trunk code.&lt;/p&gt;

&lt;p&gt;as far as message ids, there are lots of trace messages that we logged were&lt;br/&gt;
non-localized messages.&lt;br/&gt;
It seems that if trace messages is providing information that user need to&lt;br/&gt;
take some action, then a message id should be used.&lt;br/&gt;
Because messages will get translated into different languages and users&lt;br/&gt;
other than US-speakings would know what actions to take.&lt;/p&gt;

&lt;p&gt;The diagnostic trace that I added are mostly informational, no actions were&lt;br/&gt;
given to users. So I think it should be OK with non-localized messages.&lt;/p&gt;

&lt;p&gt;Thanks again.&lt;/p&gt;

&lt;p&gt;Regards, Catalina&lt;/p&gt;

&lt;p&gt;Department: DMQA&lt;br/&gt;
e-mail: fancy@us.ibm.com&lt;br/&gt;
Tie:  543-3290&lt;/p&gt;



&lt;p&gt;  From:       &quot;Pinaki Poddar (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt;                 &lt;/p&gt;

&lt;p&gt;  To:         Catalina Wei/Silicon Valley/IBM@IBMUS                    &lt;/p&gt;

&lt;p&gt;  Date:       03/22/2010 07:57 AM                                      &lt;/p&gt;

&lt;p&gt;  Subject:    &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Commented: (&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1585&quot; title=&quot;Additional trace to relate SQL pushdowns with entity action or JPQL query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1585&quot;&gt;&lt;del&gt;OPENJPA-1585&lt;/del&gt;&lt;/a&gt;) Additional trace to relate SQL pushdowns with entity action or&lt;br/&gt;
              JPQL query                                               &lt;/p&gt;







&lt;p&gt;    [&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1585?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=12848152#action_12848152&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OPENJPA-1585?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=12848152#action_12848152&lt;/a&gt;&lt;br/&gt;
 ]&lt;/p&gt;

&lt;p&gt;Pinaki Poddar commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1585&quot; title=&quot;Additional trace to relate SQL pushdowns with entity action or JPQL query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1585&quot;&gt;&lt;del&gt;OPENJPA-1585&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
----------------------------------------&lt;/p&gt;

&lt;p&gt;1. How about adding these useful trace statements to SQL=TRACE level itself&lt;br/&gt;
instead of having an extra channel.&lt;br/&gt;
2. The trace messages use non-localized hard coded Strings. Generally that&lt;br/&gt;
is not done for other parts of the code base.&lt;/p&gt;

&lt;p&gt;actions with SQL pushdowns:&lt;br/&gt;
eager relations for the generated SQL is very helpful.&lt;br/&gt;
requests.&lt;br/&gt;
CascadeB s&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;test.entities.CascadeB.entitya&amp;#93;&lt;/span&gt;&lt;br/&gt;
executing prepstmnt 25862088 SELECT t0.id, t1.id, t1.name, t0.name FROM&lt;br/&gt;
CascadeB t0 LEFT OUTER JOIN CascadeA t1 ON t0.ENTITYA_ID = t1.id&lt;br/&gt;
org.apache.openjpa.kernel.PNewState for oid=1&lt;br/&gt;
(age,id,name) VALUES (?,?,?) &lt;span class=&quot;error&quot;&gt;&amp;#91;1,1,name1&amp;#93;&lt;/span&gt;&lt;br/&gt;
oid=1 class test.entities.BasicB&lt;br/&gt;
test.entities.BasicA&lt;br/&gt;
oid=1 class test.entities.BasicA&lt;br/&gt;
executing prepstmnt 28008463 SELECT t0.name FROM BasicA t0 WHERE t0.id = ?&lt;br/&gt;
optimize for 1 row &lt;span class=&quot;error&quot;&gt;&amp;#91;params=(int) 1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message is automatically generated by JIRA.&lt;br/&gt;
-&lt;br/&gt;
You can reply to this email to add a comment to the issue online.&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                            <attachment id="12439520" name="ASF.LICENSE.NOT.GRANTED--ecblank.gif" size="45" author="fancy" created="Mon, 22 Mar 2010 22:34:32 +0000"/>
                            <attachment id="12439519" name="ASF.LICENSE.NOT.GRANTED--graycol.gif" size="105" author="fancy" created="Mon, 22 Mar 2010 22:34:32 +0000"/>
                            <attachment id="12439233" name="OPENJPA-1585.patch" size="8980" author="fancy" created="Fri, 19 Mar 2010 02:59:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 22 Mar 2010 14:55:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7nwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>