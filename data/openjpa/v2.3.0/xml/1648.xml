<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:44:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1648/OPENJPA-1648.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1648] Slice thread pool breaks down under high concurrency </title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1648</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Slice thread pool breaks down under heavy usage &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;br/&gt;
This is due to poor choice of thread pool.&lt;/p&gt;

&lt;p&gt;Also creation of thread pool for every flush() is inefficient.&lt;/p&gt;

&lt;p&gt;Simple solution will be to use a cached thread pool &amp;#8211; which will be upper bounded by available system&apos;s capacity for concurrent native threads. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12463706">OPENJPA-1648</key>
            <summary>Slice thread pool breaks down under high concurrency </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ppoddar@apache.org">Pinaki Poddar</assignee>
                                    <reporter username="ppoddar@apache.org">Pinaki Poddar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2010 22:19:00 +0100</created>
                <updated>Wed, 12 Jan 2011 23:03:06 +0000</updated>
                            <resolved>Wed, 12 Jan 2011 23:03:06 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                    <component>slice</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12864025" author="sso" created="Tue, 4 May 2010 22:44:08 +0100"  >&lt;p&gt;Hi Pinaki&lt;/p&gt;

&lt;p&gt;I try and finally{} the block with threadPool.shutdown(). &lt;/p&gt;

&lt;p&gt;That seems to work.  100k transaction no problem now.&lt;/p&gt;

&lt;p&gt;You nail it right on with the excessive pool creation in every flush().&lt;/p&gt;

&lt;p&gt;I am not sure CachedThreadPool would have solved the problem.  You still have more flush() call coming along the way &amp;#8211; then we need to define RejectExecutionHandler.  We can&apos;t abort and we can&apos;t discard.&lt;/p&gt;

&lt;p&gt;Since the pool is gonna go out of scope by the time flush() is done, we probably need to shut it down before going out of scope (so that expired thread no longer hang around).&lt;/p&gt;

&lt;p&gt;I will keep on stressing the stack and see if there are more problems.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Simon&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://openjpa.208410.n2.nabble.com/Spring-3-0-2-OpenJPA-2-0-Slice-OutOfMemoryError-shortly-after-pounding-1000-threads-to-the-system-td5000822.html#a5000822&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://openjpa.208410.n2.nabble.com/Spring-3-0-2-OpenJPA-2-0-Slice-OutOfMemoryError-shortly-after-pounding-1000-threads-to-the-system-td5000822.html#a5000822&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12980989" author="mikedd" created="Wed, 12 Jan 2011 23:03:06 +0000"  >&lt;p&gt;If there&apos;s more work to be done for this issue please re-open, or open a sub task for the remaining work. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 May 2010 21:44:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161906</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysnvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>201218</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>