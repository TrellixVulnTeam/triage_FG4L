<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:44:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-991/OPENJPA-991.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-991] Implement LockTimeout using db specific server-side lock timeout feature</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-991</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;This issue is originally reported by Donald Woods in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-957&quot; title=&quot;Support lock timeout hint on applicable methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-957&quot;&gt;&lt;del&gt;OPENJPA-957&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&quot;Looks like the existing implementation (not defined in JPA 1.0 Spec and OpenJPA specific) is using setQueryTimeout() in PessimisticLockManager, which is a client side JDBC timeout function, while lock timeouts are implemented in the DB server. See -&lt;br/&gt;
DB2 - &lt;a href=&quot;http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0011874.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0011874.htm&lt;/a&gt;&lt;br/&gt;
MS SQL - &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/aa213032(SQL.80).aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/aa213032(SQL.80).aspx&lt;/a&gt;&lt;br/&gt;
Derby - config property - &lt;a href=&quot;http://db.apache.org/derby/docs/dev/devguide/cdevconcepts16400.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/dev/devguide/cdevconcepts16400.html&lt;/a&gt;&lt;br/&gt;
Oracle - LOCKWAIT on the connection or on the DB&lt;br/&gt;
Also, the following discussion gives a good overview of the two and why apps should use both to handle unreliable network conditions -&lt;br/&gt;
&lt;a href=&quot;http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/95755534-bbef-4c2c-afa4-b80ca2a2c333/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/95755534-bbef-4c2c-afa4-b80ca2a2c333/&lt;/a&gt;&quot;&lt;/p&gt;

&lt;p&gt;This issue caused TestException.testThrowsOptimisticException to hang when run against DB2 because the default lock timeout is -1 on DB2, which means to wait forever. This test case will be disabled until the issue is resolved and re-enabled.&lt;/p&gt;

&lt;p&gt;Albert Lee.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12417320">OPENJPA-991</key>
            <summary>Implement LockTimeout using db specific server-side lock timeout feature</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="allee8285">Albert Lee</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Mar 2009 20:30:20 +0000</created>
                <updated>Tue, 29 Oct 2013 14:13:21 +0000</updated>
                                            <version>1.0.4</version>
                    <version>1.1.1</version>
                    <version>1.2.2</version>
                    <version>1.3.0</version>
                    <version>2.0.0</version>
                    <version>2.2.0</version>
                    <version>2.3.0</version>
                                                    <component>kernel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12688093" author="allee8285" created="Sun, 22 Mar 2009 02:23:29 +0000"  >&lt;p&gt;Oracle 11g lock timeout support in the&lt;/p&gt;

&lt;p&gt;LOCK TABLE ..... IN lockmode MODE WAIT xsec clause pg 18-72&lt;br/&gt;
SELECT... .FOR UPDATE .... WAIT xsec clause pg 19-13&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://download.oracle.com/docs/cd/B28359_01/server.111/b28286.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/docs/cd/B28359_01/server.111/b28286.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------&lt;br/&gt;
DB2 uses &quot;SET CURRENT LOCK TIMEOUT = &amp;lt;secs&amp;gt;&quot; for all statements on the current connection.&lt;/p&gt;

&lt;p&gt;-----------------------------------&lt;br/&gt;
Derby reference.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://db.apache.org/derby/docs/10.1/ref/refderby.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.1/ref/refderby.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY&lt;br/&gt;
Use the SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY system procedure to set or delete the value of a property of the database on the current connection. If &quot;VALUE&quot; is not null, then the property with key value &quot;KEY&quot; is set to &quot;VALUE&quot;. If &quot;VALUE&quot; is null, then the property with key value &quot;KEY&quot; is deleted from the database property set.&lt;/p&gt;

&lt;p&gt;Syntax&lt;br/&gt;
SYSCS_UTIL.SYSCS_GET_DATABASE_PROPERTY(IN KEY VARCHAR(128),IN VALUE VARCHAR(32672))&lt;br/&gt;
This procedure does not return any results.&lt;br/&gt;
JDBC example&lt;br/&gt;
Set the derby.locks.deadlockTimeout property to a value of 10:&lt;/p&gt;

&lt;p&gt;CallableStatement cs = conn.prepareCall&lt;br/&gt;
(&quot;CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY(?, ?)&quot;);&lt;br/&gt;
cs.setString(1, &quot;derby.locks.deadlockTimeout&quot;);&lt;br/&gt;
cs.setString(2, &quot;10&quot;);&lt;br/&gt;
cs.execute();&lt;br/&gt;
cs.close();&lt;/p&gt;

&lt;p&gt;SQL example&lt;br/&gt;
Set the derby.locks.deadlockTimeout property to a value of 10:&lt;br/&gt;
CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY&lt;br/&gt;
(&apos;derby.locks.deadlockTimeout&apos;, &apos;10&apos;);&lt;/p&gt;

&lt;p&gt;Derby 10.1 does not implement&lt;br/&gt;
&#8226; setQueryTimeout&lt;/p&gt;

&lt;p&gt;Derby 10.2 has full support for Statement.setQueryTimeout() &lt;/p&gt;</comment>
                            <comment id="12845117" author="milosz" created="Sun, 14 Mar 2010 18:35:01 +0000"  >&lt;p&gt;Has this been actually fixed? I can&apos;t see any commits in subversion panel or in e.g. OracleDictionary?&lt;/p&gt;</comment>
                            <comment id="12845304" author="drwoods" created="Mon, 15 Mar 2010 13:41:21 +0000"  >&lt;p&gt;This has not been fixed, as pointed out by Milosz.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12459907">OPENJPA-1594</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12458864">OPENJPA-1565</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12416217">OPENJPA-957</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 14 Mar 2010 18:35:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7mg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288607</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>