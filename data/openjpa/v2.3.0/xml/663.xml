<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:42:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-663/OPENJPA-663.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-663] Index creation fails when default schema does not exist</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-663</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;I have an entity which uses the org.apache.openjpa.persistence.jdbc.Index annotation to specify an index on a field. When running against DB2 on iSeries with the Toolkit for Java JDBC driver, the mapping tool is failing with an internal SQLException when issuing the SQL to create the index.  Here is the exception output:&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-1.0.1-SNAPSHOT-runknown nonfatal general error&amp;gt; org.apache.openjpa.persistence.PersistenceException: &lt;span class=&quot;error&quot;&gt;&amp;#91;SQL0204&amp;#93;&lt;/span&gt; MYUID in QSYS type *LIB not found. &lt;/p&gt;
{stmnt 1135625136 CREATE UNIQUE INDEX projid_index ON myschema.ProjectBean (projid)}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=-204, state=42704&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Investigation determined that the problem is due to not specifying a default library on the JDBC URL (myschema) and using a user login that does not have a matching schema defined.  Neither are a requirement for iSeries.  The JDBC driver chooses the user profile name as the default schema.  Unlike DB2 on LUW, the schema name will not get created by default (or as the result of another CREATE which uses the schema name) on iSeries, resulting in the error above.&lt;/p&gt;

&lt;p&gt;Unlike most other annotations, the Index annotation does not allow a schema to be specified.  In addition, the openjpa.jdbc.Schema property does not affect index generation.  Since (at least on iSeries) indexes can be created in a specific schema, the Index annotation should be enhanced to include an attribute which allows specification of the schema name to use when creating the index.&lt;/p&gt;

&lt;p&gt;This problem was found when using DB2 on iSeries, but could occur using any database/JDBC driver which behaves similarly.&lt;/p&gt;</description>
                <environment>DB2 for iSeries / i5/OS.  Toolkit for Java JDBC driver.</environment>
        <key id="12400689">OPENJPA-663</key>
            <summary>Index creation fails when default schema does not exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="techhusky">Jeremy Bauer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jul 2008 20:39:21 +0100</created>
                <updated>Tue, 16 Sep 2008 19:59:09 +0100</updated>
                                            <version>1.2.0</version>
                                                    <component>sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12619582" author="techhusky" created="Mon, 4 Aug 2008 17:40:26 +0100"  >&lt;p&gt;Attaching doc update.  I&apos;d like this issue (and the workaround) to be documented under the DB2 section of the manual until it gets resolved.&lt;/p&gt;

&lt;p&gt;Please commit for 1.2.x and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387493" name="OPENJPA-663_doc.patch" size="1304" author="techhusky" created="Mon, 4 Aug 2008 17:40:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7lef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>