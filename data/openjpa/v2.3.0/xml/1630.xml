<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:42:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1630/OPENJPA-1630.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1630] NPE in MetaDataRepository when preloading is enabled under heavy stress.</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1630</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;A timing window exists in the MetaDataRepository where the following&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; NPE can be encountered. It is incorrect to assume that calling processRegisteredClasses at the end of preload would process all registered classes. As it turns out, that call does process all registered classes that this instance of the MDR cares about. The problem comes in when after the MDR is preloaded, Entities that belong to a different PU are registered with the PCRegistry and they are added to the _registered list. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.openjpa.meta.MetaDataRepository.processRegisteredClasses(MetaDataRepository.java:1622)&lt;br/&gt;
        at org.apache.openjpa.meta.ClassMetaData.getPCSubclasses(ClassMetaData.java:364)&lt;br/&gt;
        at org.apache.openjpa.meta.ClassMetaData.getPCSubclassMetaDatas(ClassMetaData.java:381)&lt;br/&gt;
        at org.apache.openjpa.meta.ClassMetaData.getMappedPCSubclassMetaDatas(ClassMetaData.java:403)&lt;br/&gt;
        at org.apache.openjpa.jdbc.meta.ClassMapping.getMappedPCSubclassMappings(ClassMapping.java:628)&lt;br/&gt;
        at org.apache.openjpa.jdbc.meta.ClassMapping.getIndependentAssignableMappings(ClassMapping.java:667)&lt;br/&gt;
        at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initializeState(JDBCStoreManager.java:380)&lt;br/&gt;
        at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initialize(JDBCStoreManager.java:342)&lt;br/&gt;
        at com.ibm.ws.persistence.jdbc.kernel.WsJpaJDBCStoreManager.initialize(WsJpaJDBCStoreManager.java:147)&lt;br/&gt;
        at org.apache.openjpa.kernel.DelegatingStoreManager.initialize(DelegatingStoreManager.java:112)&lt;br/&gt;
        at org.apache.openjpa.kernel.ROPStoreManager.initialize(ROPStoreManager.java:57)&lt;br/&gt;
        at org.apache.openjpa.kernel.BrokerImpl.initialize(BrokerImpl.java:1005)&lt;br/&gt;
        at org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:963)&lt;br/&gt;
        ... 46 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461981">OPENJPA-1630</key>
            <summary>NPE in MetaDataRepository when preloading is enabled under heavy stress.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="curtisr7">Rick Curtis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2010 20:33:41 +0100</created>
                <updated>Thu, 22 Apr 2010 21:30:22 +0100</updated>
                            <resolved>Thu, 15 Apr 2010 17:43:08 +0100</resolved>
                                    <version>1.2.2</version>
                    <version>2.0.0-beta3</version>
                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.1.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>kernel</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                            <comments>
                            <comment id="12856578" author="curtisr7" created="Tue, 13 Apr 2010 20:37:01 +0100"  >&lt;p&gt;There are a couple of ways to fix this problem. The easiest is to always lock on the _registered list when mutating, regardless of whether or not _locking is set.&lt;/p&gt;

&lt;p&gt;The not so easy, but probably more correct solution is to only add classes to the _registered list that each MDR cares about. I&apos;m leaning toward the first solution for the 2.0.x branch due to stability concerns and I&apos;ll investigate fixing it differently in trunk.&lt;/p&gt;</comment>
                            <comment id="12857018" author="curtisr7" created="Wed, 14 Apr 2010 19:40:22 +0100"  >&lt;p&gt;Committed revision 934103 to trunk.&lt;/p&gt;</comment>
                            <comment id="12857403" author="curtisr7" created="Thu, 15 Apr 2010 17:43:08 +0100"  >&lt;p&gt;Committed revision 934478 to 2.0.X. &lt;/p&gt;</comment>
                            <comment id="12857545" author="drwoods" created="Thu, 15 Apr 2010 22:25:02 +0100"  >&lt;p&gt;Don&apos;t need Fix Version of 2.1.0 since 2.0.0 hasn&apos;t been released yet....&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441638" name="ASF.LICENSE.NOT.GRANTED--OPENJPA-1630.patch" size="1512" author="curtisr7" created="Tue, 13 Apr 2010 20:37:01 +0100"/>
                    </attachments>
                <subtasks>
                            <subtask id="12462444">OPENJPA-1635</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Apr 2010 21:25:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysybr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>202909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>