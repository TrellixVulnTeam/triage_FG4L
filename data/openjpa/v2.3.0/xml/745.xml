<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:38:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-745/OPENJPA-745.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-745] Sybase by default silently truncates a string which is longer than the column length without raising an exception </title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-745</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;By default, Sybase silently truncates a string which is longer than the column length without raising an exception. To override this behavior, string_rtruncation must be set on. In order to be consistent with other databases (which raise exceptions when a string length is longer than the column length), we will set string_rtruncation on by default for Sybase. For an application that wants to keep Sybase silent truncation behavior, a DBDictionary property &quot;setStringRightTruncationOn&quot; is introduced. When it is set to false in the persistence.xml, the string will be silently truncated during insert/update. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12406339">OPENJPA-745</key>
            <summary>Sybase by default silently truncates a string which is longer than the column length without raising an exception </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="faywang">Fay Wang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Oct 2008 23:36:20 +0100</created>
                <updated>Tue, 9 Mar 2010 18:32:56 +0000</updated>
                            <resolved>Thu, 23 Oct 2008 00:34:32 +0100</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12640909" author="ppoddar@apache.org" created="Mon, 20 Oct 2008 05:20:29 +0100"  >&lt;p&gt;Following part of the patch in JDBCStoreManager appears to be too specifc&lt;/p&gt;

&lt;p&gt;     public Connection getConnection() {&lt;br/&gt;
         connect(true);&lt;br/&gt;
+        try &lt;/p&gt;
{
+            _dict.raiseRightTruncationException(_conn);
+        }
&lt;p&gt; catch (SQLException se) &lt;/p&gt;
{
+            throw SQLExceptions.getStore(se, _dict);
+        }
&lt;p&gt;         return _conn;&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;Suggested&lt;br/&gt;
 a) more generic name such as DBDictionary.setConnection(Connection conn) or DBDictionary.initializeSettings(Connection conn) or similar.&lt;br/&gt;
 b) more importantly, the more appropriate location for this invocation is internal connect(boolean) method itself where the exception handling is carried out.&lt;/p&gt;</comment>
                            <comment id="12641041" author="faywang" created="Mon, 20 Oct 2008 16:34:12 +0100"  >&lt;p&gt;The attached patch is per Pinaki&apos;s suggestion. Thanks for your feedback!&lt;/p&gt;</comment>
                            <comment id="12641190" author="mikedd" created="Mon, 20 Oct 2008 23:27:53 +0100"  >&lt;p&gt;Shouldn&apos;t : &lt;br/&gt;
&amp;#8212; openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/JDBCStoreManager.java	(revision 706319)&lt;br/&gt;
+++ openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/JDBCStoreManager.java	(working copy)&lt;br/&gt;
@@ -920,6 +920,7 @@&lt;br/&gt;
        try &lt;/p&gt;
{
            // connect if the connection is currently null, or if
            // the connection has been closed out from under us
            if (_conn == null)
                 _conn = connectInternal();
             if (ref)
                 _conn.ref();
+            _dict.initializeSettings(_conn);
         }
&lt;p&gt; catch (SQLException se) &lt;/p&gt;
{
             throw SQLExceptions.getStore(se, _dict);
         } finally {&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
actually be &lt;br/&gt;
        try {&lt;br/&gt;
            // connect if the connection is currently null, or if&lt;br/&gt;
            // the connection has been closed out from under us&lt;br/&gt;
-            if (_conn == null) &lt;br/&gt;
+            if (_conn == null) {
                 _conn = connectInternal();
+                _dict.initializeSettings(_conn);
+           }&lt;br/&gt;
             if (ref)&lt;br/&gt;
                 _conn.ref();&lt;br/&gt;
         } catch (SQLException se) {
             throw SQLExceptions.getStore(se, _dict);
         }
&lt;p&gt; finally {&lt;/p&gt;

&lt;p&gt;It seems like we&apos;d only need to set the truncation property the first time we obtain a connection, not every time the store uses it. &lt;/p&gt;</comment>
                            <comment id="12641252" author="faywang" created="Tue, 21 Oct 2008 03:13:08 +0100"  >&lt;p&gt;commit with r706493 and r706494.&lt;/p&gt;</comment>
                            <comment id="12642004" author="faywang" created="Thu, 23 Oct 2008 00:34:23 +0100"  >&lt;p&gt;make the fix in synch with the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-750&quot; title=&quot;OptimisticLockException is thrown when numeric truncation occurs on Sybase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-750&quot;&gt;&lt;del&gt;OPENJPA-750&lt;/del&gt;&lt;/a&gt;. commit in openjpa truck with r-707214 and in openjpa 1.2.x with r-707222.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12406711">OPENJPA-750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12392494" name="OPENJPA-745-1.patch" size="2626" author="faywang" created="Mon, 20 Oct 2008 16:34:12 +0100"/>
                            <attachment id="12392111" name="OPENJPA-745.patch" size="3039" author="faywang" created="Tue, 14 Oct 2008 18:39:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Oct 2008 04:20:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7lof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>