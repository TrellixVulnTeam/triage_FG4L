<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:33:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2183/OPENJPA-2183.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2183] Query hint &quot;openjpa.hint.RelaxParameterTypeChecking&quot; is reported to be unsupported and is ignored</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2183</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Setting &lt;br/&gt;
Query q = em.createQuery(qs);&lt;br/&gt;
q.setHint(&quot;openjpa.hint.RelaxParameterTypeChecking&quot;, &quot;true&quot;);&lt;br/&gt;
results in &lt;br/&gt;
Warn: &quot;openjpa.hint.RelaxParameterTypeChecking&quot; is not a supported query hint. May be you meant &quot;openjpa.hint.ParameterMarkerInQuery&quot;?&lt;/p&gt;

&lt;p&gt;I assume the reason is that the openjpa.hint.RelaxParameterTypeChecking hint is not supported by any ProductDerivation and thus being refused in org.apache.openjpa.persistence.HintHandler#record.&lt;/p&gt;</description>
                <environment>Websphere 8.0.3, openjpa-2.1.2-SNAPSHOT-r422266:1227818</environment>
        <key id="12553933">OPENJPA-2183</key>
            <summary>Query hint &quot;openjpa.hint.RelaxParameterTypeChecking&quot; is reported to be unsupported and is ignored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peter.martinovic">Peter Martinovic</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 May 2012 14:24:53 +0100</created>
                <updated>Wed, 6 Jun 2012 19:16:37 +0100</updated>
                                            <version>2.1.0</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13268423" author="allee8285" created="Fri, 4 May 2012 16:07:35 +0100"  >&lt;p&gt;Attached a patch. Can you give this a try?&lt;/p&gt;</comment>
                            <comment id="13268445" author="peter.martinovic" created="Fri, 4 May 2012 16:24:33 +0100"  >&lt;p&gt;Thank you! Unfortunately we are using the IBM variant of OpenJPA packed into WebSphere AS (as specified in the &apos;Environment&apos; field) and cannot patch the OpenJPA code to test it/make use of it. If WS8 uses the PersistenceProductDerivation (I am not quite sure how do product derivations work) I think the patch would work.&lt;/p&gt;</comment>
                            <comment id="13268675" author="allee8285" created="Fri, 4 May 2012 21:11:08 +0100"  >&lt;p&gt;Here is a jar contains the related changes targeted for WAS 8.0.&lt;/p&gt;

&lt;p&gt;This part has not been changed since 12/2010 so it is saved to use.  &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Save a copy of $WAS_HOME/plugins/com.ibm.ws.jpa.jar.&lt;/li&gt;
	&lt;li&gt;Replace the content of &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2183&quot; title=&quot;Query hint &amp;quot;openjpa.hint.RelaxParameterTypeChecking&amp;quot; is reported to be unsupported and is ignored&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2183&quot;&gt;OPENJPA-2183&lt;/a&gt;.WAS8.jar to $WAS_HOME/plugins/com.ibm.ws.jpa.jar. .&lt;/li&gt;
	&lt;li&gt;Make sure the META-INF/MANIFEST.MF is NOT changed.&lt;/li&gt;
	&lt;li&gt;Once replace, refresh the osgi cache by &quot;osgiCfgInit -all&quot; before restart the server.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If test is positive, I&apos;ll commit to trunk.&lt;/p&gt;

&lt;p&gt;Albert Lee.&lt;/p&gt;</comment>
                            <comment id="13271211" author="peter.martinovic" created="Wed, 9 May 2012 09:34:28 +0100"  >&lt;p&gt;Thank you, I will test it as soon as possible.&lt;/p&gt;</comment>
                            <comment id="13284697" author="peter.martinovic" created="Tue, 29 May 2012 10:45:26 +0100"  >&lt;p&gt;Hello Albert. Your patch works, the hint is correctly set on the query. Thank you. &lt;/p&gt;

&lt;p&gt;-------------------&lt;/p&gt;

&lt;p&gt;a) Named parameters and Query.setParameter work fine!&lt;/p&gt;

&lt;p&gt;-------------------&lt;/p&gt;

&lt;p&gt;b) Inline string values (e.g. String whereCondition = &quot;a.enumAttrib1 = &apos;&quot; + value + &quot;&apos;&quot;) do not work.&lt;/p&gt;

&lt;p&gt;There is &quot;java.lang.ClassCastException: java.lang.String incompatible with java.lang.Enum&quot;. It is because QueryImpl at line 826 uses Class.isAssignableFrom for parameter type checking, I guess it should use its own method QueryImpl.assertValueAssignable, or similar, that respects the RelaxParameterTypeChecking hint. &lt;/p&gt;

&lt;p&gt;-------------------&lt;/p&gt;

&lt;p&gt;I would consider this task as resolved and suggest to reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1889&quot; title=&quot;Relax query binding parameter type-checking for enum types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1889&quot;&gt;&lt;del&gt;OPENJPA-1889&lt;/del&gt;&lt;/a&gt; (if inline string values are supposed to be supported).&lt;/p&gt;





</comment>
                            <comment id="13290313" author="allee8285" created="Wed, 6 Jun 2012 19:16:36 +0100"  >&lt;p&gt;I committed the patch to trunk. If you need to get an fix for WAS, you will need to go through the IBM service channel to obtain the official fixpack.&lt;/p&gt;

&lt;p&gt;BTW, can you paste the ClassCastException stack here for further investigation on this problem.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12480151">OPENJPA-1889</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12525673" name="OPENJPA-2183.WAS8.jar" size="16868" author="allee8285" created="Fri, 4 May 2012 21:11:07 +0100"/>
                            <attachment id="12525630" name="OPENJPA-2183.patch" size="722" author="allee8285" created="Fri, 4 May 2012 16:06:12 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 May 2012 15:07:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxusdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>