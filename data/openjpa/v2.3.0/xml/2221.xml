<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:34:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2221/OPENJPA-2221.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2221] Use of AbstractValueHandler map() causes exception on find()</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2221</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;When a value strategy implemented by a subclass of AbstractValuehandler overrides the map() method, an exception occurs on a find() if the strategy is implemented on an id field. The method returns a Column[].&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-2.1.2-SNAPSHOT-r422266:1297100 nonfatal user error&amp;gt; org.apache.openjpa.persistence.ArgumentException: The specified parameter of type &quot;class [Ljava.lang.Object;&quot; is not a valid query parameter.&lt;br/&gt;
FailedObject: id1 &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.openjpa.util.StringId&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.String&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.setUnknown(DBDictionary.java:1465)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.setUnknown(DBDictionary.java:1391)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLBuffer.setParameters(SQLBuffer.java:656)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLBuffer.prepareStatement(SQLBuffer.java:565)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SQLBuffer.prepareStatement(SQLBuffer.java:541)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.prepareStatement(SelectImpl.java:479)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:420)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:382)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.getInitializeStateResult(JDBCStoreManager.java:576)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initializeState(JDBCStoreManager.java:378)&lt;br/&gt;
	at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initialize(JDBCStoreManager.java:333)&lt;br/&gt;
	at org.apache.openjpa.kernel.DelegatingStoreManager.initialize(DelegatingStoreManager.java:112)&lt;br/&gt;
	at org.apache.openjpa.kernel.ROPStoreManager.initialize(ROPStoreManager.java:57)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.initialize(BrokerImpl.java:1027)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:985)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:902)&lt;br/&gt;
	at org.apache.openjpa.kernel.DelegatingBroker.find(DelegatingBroker.java:231)&lt;br/&gt;
	at org.apache.openjpa.persistence.EntityManagerImpl.find(EntityManagerImpl.java:486)&lt;br/&gt;
	at org.apache.openjpa.persistence.strategy.value.TestValueStrategy.testIt(TestValueStrategy.java:37)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:88)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:613)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runTest(AbstractPersistenceTestCase.java:579)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:566)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:542)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.run(AbstractPersistenceTestCase.java:206)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;/p&gt;

&lt;p&gt;Presumably the exception would occur on other fields if they were part of the query.&lt;/p&gt;

&lt;p&gt;The DBDictionary setUnknown() method needs to handle input of an Object[].&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596262">OPENJPA-2221</key>
            <summary>Use of AbstractValueHandler map() causes exception on find()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fyrewyld">Jody Grassel</assignee>
                                    <reporter username="dianner">Dianne Richards</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jun 2012 15:47:38 +0100</created>
                <updated>Fri, 18 Oct 2013 14:49:06 +0100</updated>
                            <resolved>Fri, 18 Oct 2013 14:49:06 +0100</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13797689" author="struberg" created="Thu, 17 Oct 2013 08:37:43 +0100"  >&lt;p&gt;Any special reason this fix didn&apos;t get applied to trunk as well?&lt;/p&gt;</comment>
                            <comment id="13797739" author="struberg" created="Thu, 17 Oct 2013 10:53:04 +0100"  >&lt;p&gt;I also gonna apply this patch to trunk and 2.3.x, ok?&lt;/p&gt;</comment>
                            <comment id="13797742" author="jira-bot" created="Thu, 17 Oct 2013 10:57:06 +0100"  >&lt;p&gt;Commit 1533026 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/branches/2.3.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1533026&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1533026&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2221&quot; title=&quot;Use of AbstractValueHandler map() causes exception on find()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2221&quot;&gt;&lt;del&gt;OPENJPA-2221&lt;/del&gt;&lt;/a&gt; also applied to 2.3.x branch&lt;/p&gt;</comment>
                            <comment id="13797790" author="jira-bot" created="Thu, 17 Oct 2013 12:04:36 +0100"  >&lt;p&gt;Commit 1533047 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1533047&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1533047&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2221&quot; title=&quot;Use of AbstractValueHandler map() causes exception on find()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2221&quot;&gt;&lt;del&gt;OPENJPA-2221&lt;/del&gt;&lt;/a&gt; AbstractValueHandler map() fix applied to trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Oct 2013 07:37:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240145</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxus53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>