<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:30:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1289/OPENJPA-1289.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1289] Oracle driver throws exception due to incorrect mapping of XMLType column</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1289</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Many variations of org.apache.openjpa.persistence.xmlmapping.query.TestXMLCustomerOrder are failing on Oracle with this exception:&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-2.0.0-SNAPSHOT-rexported nonfatal general error&amp;gt; org.apache.openjpa.persistence.PersistenceException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor&lt;br/&gt;
&amp;lt;snip/&amp;gt;&lt;br/&gt;
Caused by: java.sql.SQLException: Invalid column type: getCLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor&lt;br/&gt;
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)&lt;br/&gt;
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)&lt;br/&gt;
at oracle.jdbc.driver.Accessor.unimpl(Accessor.java:358)&lt;br/&gt;
at oracle.jdbc.driver.Accessor.getCLOB(Accessor.java:1328)&lt;br/&gt;
at oracle.jdbc.driver.OracleResultSetImpl.getCLOB(OracleResultSetImpl.java:1305)&lt;br/&gt;
at oracle.jdbc.driver.OracleResultSetImpl.getClob(OracleResultSetImpl.java:1471)&lt;br/&gt;
at org.apache.commons.dbcp.DelegatingResultSet.getClob(DelegatingResultSet.java:515)&lt;br/&gt;
at org.apache.openjpa.lib.jdbc.DelegatingResultSet.getClob(DelegatingResultSet.java:612)&lt;br/&gt;
at org.apache.openjpa.jdbc.sql.DBDictionary.getClob(DBDictionary.java:690)&lt;br/&gt;
at org.apache.openjpa.jdbc.sql.OracleDictionary.getClobString(OracleDictionary.java:562)&lt;br/&gt;
at org.apache.openjpa.jdbc.sql.ResultSetResult.getStringInternal(ResultSetResult.java:471)&lt;br/&gt;
at org.apache.openjpa.jdbc.sql.ResultSetResult.getObjectInternal(ResultSetResult.java:399)&lt;br/&gt;
at org.apache.openjpa.jdbc.sql.AbstractResult.getObject(AbstractResult.java:696)&lt;br/&gt;
at org.apache.openjpa.jdbc.meta.strats.HandlerStrategies.loadDataStore(HandlerStrategies.java:220)&lt;br/&gt;
at org.apache.openjpa.jdbc.meta.strats.HandlerFieldStrategy.load(HandlerFieldStrategy.java:186)&lt;br/&gt;
at org.apache.openjpa.jdbc.meta.FieldMapping.load(FieldMapping.java:913)&lt;br/&gt;
at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:1021)&lt;br/&gt;
at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:973)&lt;br/&gt;
at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initializeState(JDBCStoreManager.java:393)&lt;br/&gt;
at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initialize(JDBCStoreManager.java:292)&lt;br/&gt;
&amp;lt;snip/&amp;gt;&lt;br/&gt;
The Oracle driver does not allow the clob operations to operate on fields of XMLType.  OpenJPA maps fields of type XMLType to CLOB and uses CLOB getter/setters, resulting in the exception above.  The mapping should be changed such that the CLOB operations are not used for XML data.&lt;/p&gt;</description>
                <environment>Oracle 10i and 11 server.  10.x and 11.2.0.1.0 thin JDBC driver</environment>
        <key id="12435247">OPENJPA-1289</key>
            <summary>Oracle driver throws exception due to incorrect mapping of XMLType column</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="techhusky">Jeremy Bauer</assignee>
                                    <reporter username="techhusky">Jeremy Bauer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Sep 2009 20:49:55 +0100</created>
                <updated>Wed, 8 Dec 2010 14:48:58 +0000</updated>
                            <resolved>Wed, 27 Jan 2010 16:02:17 +0000</resolved>
                                    <version>1.2.2</version>
                    <version>2.0.0-M3</version>
                                    <fixVersion>1.2.3</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0-beta</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12753743" author="milosz" created="Thu, 10 Sep 2009 19:14:52 +0100"  >&lt;p&gt;Hello Jeremy. Maybe this problem is revealed by the &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-525&quot; title=&quot;Inserts new entity with NULL value for Clob column actually inserts empty string&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-525&quot;&gt;&lt;del&gt;OPENJPA-525&lt;/del&gt;&lt;/a&gt; fix. Before that fix we were unintentionally called get getString on CLOBs, now we are calling getClobString.&lt;/p&gt;</comment>
                            <comment id="12798339" author="milosz" created="Sat, 9 Jan 2010 12:13:18 +0000"  >&lt;p&gt;Hi Jeremy. Are you still seeing the failure?&lt;/p&gt;

&lt;p&gt;I noticed that for some reason the test case fails at table creation phase because it started adding column length to XMLTYPE:&lt;/p&gt;

&lt;p&gt;PersistenceException: ORA-00907: missing right parenthesis&lt;br/&gt;
 &lt;/p&gt;
{stmnt 16108506 CREATE TABLE TORDER (oid NUMBER NOT NULL, amount NUMBER, delivered NUMBER, shipAddress XMLType(255), version NUMBER, CUSTOMER_COUNTRYCODE VARCHAR2(255), CUSTOMER_ID NUMBER, PRIMARY KEY (oid))}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=907, state=42000&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;It helped to add &quot;XMLTYPE&quot; to fixedSizeTypeNameSet. After that the test passes (I executed it from Eclipse).&lt;/p&gt;

&lt;p&gt;My environment is Java 5, Oracle 10g Express Edition Release 10.2.0.1.0, Oracle JDBC driver 10.2.0.3.0&lt;/p&gt;
</comment>
                            <comment id="12800884" author="milosz" created="Fri, 15 Jan 2010 19:52:49 +0000"  >&lt;p&gt;It seems that the CREATE TABLE problem has been resolved by Catalina in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1461&quot; title=&quot;Incorrect Oracle CREATE TABLE DDL for XML column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1461&quot;&gt;&lt;del&gt;OPENJPA-1461&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12805550" author="techhusky" created="Wed, 27 Jan 2010 16:02:17 +0000"  >&lt;p&gt;This problem has been fixed by Catalina under &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1461&quot; title=&quot;Incorrect Oracle CREATE TABLE DDL for XML column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1461&quot;&gt;&lt;del&gt;OPENJPA-1461&lt;/del&gt;&lt;/a&gt;.  Thanks, Milosz for keeping an eye on these issues.&lt;/p&gt;</comment>
                            <comment id="12858328" author="milosz" created="Sun, 18 Apr 2010 20:32:54 +0100"  >&lt;p&gt;Applied a similar fix to the 1.3.x branch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12445588">OPENJPA-1461</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12389721">OPENJPA-525</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12479205">OPENJPA-1874</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Sep 2009 18:14:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161562</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt3lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>