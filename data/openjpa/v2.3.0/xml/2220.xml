<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:34:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2220/OPENJPA-2220.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2220] Persistent field fetching statistic tool</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2220</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;This task is to create a statistic tool which monitors the persistent fields fetching and finds out the fields which are never accessed. Based on the statistic data, user can set the field access type to LAZY to improve the performance by eliminating the data loading and processing time.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12595920">OPENJPA-2220</key>
            <summary>Persistent field fetching statistic tool</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="helenxu">Helen Xu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jun 2012 15:53:39 +0100</created>
                <updated>Mon, 29 Oct 2012 20:00:49 +0000</updated>
                            <resolved>Mon, 29 Oct 2012 20:00:49 +0000</resolved>
                                    <version>2.2.1</version>
                    <version>2.3.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13401502" author="ppoddar@apache.org" created="Tue, 26 Jun 2012 17:35:38 +0100"  >&lt;p&gt;I think it is a good/useful feature. And I appreciate your contribution.&lt;br/&gt;
I would suggest to expand the scope of this idea to collect more statistics on field access patterns. It has been a long-held wish for many original OpenJPA developers to collect such detailed statistics, so that based on the access pattern of correlated fields we can prescribe which fetch groups will best serve an applications need. &lt;/p&gt;

&lt;p&gt;A nit: to determine whether a field is persistent, the patch code checks AccessCode and if the bean-method starts with &quot;getX&quot; etc. That check should include boolean fields which may start with &quot;is&quot;. You should find the logic somewhere (do not remember exactly where, but around AccessCode or classes that use it), some code that determines whether a named field is persistent.    &lt;/p&gt;</comment>
                            <comment id="13401504" author="ppoddar@apache.org" created="Tue, 26 Jun 2012 17:38:24 +0100"  >&lt;p&gt;The documentation refers the availability of this feature or OpenJPA Tools repository. &lt;br/&gt;
I think this is the first time we are referring to OpenJPA tools from our main documentation pages.&lt;/p&gt;

&lt;p&gt;Several useful tools in the past has been floating around. Please open a separate discussion thread on how best we could organize our tools and ensure that they reach the users.&lt;/p&gt;</comment>
                            <comment id="13401590" author="curtisr7" created="Tue, 26 Jun 2012 19:35:16 +0100"  >&lt;p&gt;&amp;gt; A nit: to ...&lt;br/&gt;
Nice catch on the isXXXX.&lt;/p&gt;

&lt;p&gt;&amp;gt; Several useful tools in the past has been floating around. Please open a separate discussion thread on how best we could organize our tools and ensure that they reach the users. &lt;br/&gt;
I thought we came the consensus that if the tool has a dependency on a version of the runtime, it needs to live with the runtime code?. If it has no runtime dependency, it would live in the seperate openjpa-tools repository?  &lt;/p&gt;</comment>
                            <comment id="13401701" author="curtisr7" created="Tue, 26 Jun 2012 22:30:30 +0100"  >&lt;p&gt;We should also exclude version and primary key fields as I could see where those fields aren&apos;t used directly by application code, but they are still important to the runtime.&lt;/p&gt;</comment>
                            <comment id="13401719" author="helenxu" created="Tue, 26 Jun 2012 23:05:23 +0100"  >&lt;p&gt;Thanks for your comments.&lt;/p&gt;

&lt;p&gt;I&apos;ll make the code change to exclude the PK fields. Version fields are excluded.&lt;/p&gt;

&lt;p&gt;For the boolean field, the enhancer also generate the getXXXX method. it is covered in the test case.&lt;/p&gt;</comment>
                            <comment id="13401804" author="ppoddar@apache.org" created="Wed, 27 Jun 2012 00:42:35 +0100"  >&lt;p&gt;Rick,&lt;br/&gt;
  &amp;gt; we came the consensus that if the tool has a dependency on a version of the runtime, ....&lt;br/&gt;
I am inviting a discussion on tools to get a better focus/attention of other members on such activity. The tools are &quot;unsupported&quot; in some way &amp;#8211; meaning the processes   (distribution, documentation, release) around them arr not as matured as that of OpenJPA.  &lt;/p&gt;</comment>
                            <comment id="13402218" author="curtisr7" created="Wed, 27 Jun 2012 14:29:26 +0100"  >&lt;p&gt;After thinking more about this last night I&apos;m thinking we could also exclude fields that are currently marked lazy.... telling the user that they didn&apos;t access a field marked as LAZY seems like noise. Thoughts?&lt;/p&gt;

&lt;p&gt;&amp;gt; The tools are &quot;unsupported&quot; in some way &amp;#8211; meaning the processes (distribution, documentation, release) around them arr not as matured as that of OpenJPA. &lt;br/&gt;
Agreed.&lt;/p&gt;</comment>
                            <comment id="13405972" author="curtisr7" created="Tue, 3 Jul 2012 19:29:45 +0100"  >&lt;p&gt;I committed revision 1356860 to trunk.&lt;/p&gt;

&lt;p&gt;This first iteration of this tool is limited in usage. Currently it is not configurable. Once it is on the classpath, it starts running. When you take it off the classpath, it stops running. It is also depended upon runtime (ie: javaagent or container enhancement) enhancement.&lt;/p&gt;

&lt;p&gt;I modified a number of things from the original patch to make it more usable... When the code first gets loaded up you&apos;ll see this message&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; so a user is notified when it is running. Also, when the statistics are dumped you&apos;ll see a message along these lines&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ll also note that I modified the pom to spit out another jar file that allows this tool to work in a WebSphere environment. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; 3094  fetchStatisticPU  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - The FetchStatisticsAuxEnhancer has been loaded and is tracking persistent field usage.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; 4226  fetchStatisticPU  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-5&amp;#93;&lt;/span&gt; openjpa.Runtime - Successfully collected fetch statistics from Entities &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.openjpa.enhance.stats.AEntity,...,  org.apache.openjpa.enhance.stats.EEntity&amp;#93;&lt;/span&gt;. The following fields are FetchType.EAGER and were never fetched [ total 10 ] : &lt;br/&gt;
	org.apache.openjpa.enhance.stats.AEntity.checked&lt;br/&gt;
	org.apache.openjpa.enhance.stats.AEntity.desc&lt;br/&gt;
	org.apache.openjpa.enhance.stats.AEntity.extraInfo&lt;br/&gt;
	org.apache.openjpa.enhance.stats.AEntity.name&lt;br/&gt;
...&lt;/p&gt;</comment>
                            <comment id="13410699" author="helenxu" created="Tue, 10 Jul 2012 19:54:22 +0100"  >&lt;p&gt;removed duplicate info from README doc and added the fields filtering condition.  patch attached.&lt;/p&gt;</comment>
                            <comment id="13410713" author="helenxu" created="Tue, 10 Jul 2012 20:06:31 +0100"  >&lt;p&gt;if user has a lot of entities, the following message could be very long. &lt;/p&gt;

&lt;p&gt;4226 fetchStatisticPU INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-5&amp;#93;&lt;/span&gt; openjpa.Runtime - Successfully collected fetch statistics from Entities &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.openjpa.enhance.stats.AEntity,..., org.apache.openjpa.enhance.stats.EEntity&amp;#93;&lt;/span&gt;. The following fields are FetchType.EAGER and were never fetched [ total 10 ] : &lt;/p&gt;

&lt;p&gt;how about this :&lt;/p&gt;

&lt;p&gt;4226 fetchStatisticPU INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-5&amp;#93;&lt;/span&gt; openjpa.Runtime - Successfully collected fetch statistics. The following fields are FetchType.EAGER and were never fetched [ total 10 ] &lt;br/&gt;
org.apache.openjpa.enhance.stats.AEntity &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;&lt;br/&gt;
checked&lt;br/&gt;
desc&lt;br/&gt;
extraInfo&lt;br/&gt;
name &lt;br/&gt;
org.apache.openjpa.enhance.stats.BEntity &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.openjpa.enhance.stats.CEntity.&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;br/&gt;
name&lt;br/&gt;
desc&lt;br/&gt;
org.apache.openjpa.enhance.stats.DEntity &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533484" name="OPENJPA-2220Patch.txt" size="43711" author="helenxu" created="Tue, 26 Jun 2012 16:02:03 +0100"/>
                            <attachment id="12535896" name="READMEpatch" size="2897" author="helenxu" created="Tue, 10 Jul 2012 19:54:22 +0100"/>
                            <attachment id="12533485" name="statisticToolDocPatch.txt" size="5804" author="helenxu" created="Tue, 26 Jun 2012 16:02:03 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Jun 2012 16:35:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxus5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3379</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>