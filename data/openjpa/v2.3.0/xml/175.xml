<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:31:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-175/OPENJPA-175.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-175] Eager selects by PagingResultObjectProvider may not use the FetchBatchSize</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-175</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;The PagingResultObjectProvider during initialization does checks to determine the appropriate pageSize. While this logic caps the size to 50 and addresses determining an appropriate page size, it doesn&apos;t always conform to the set batch size. For example with the size being 1000 and FetchBatchSize set to say 500, the page size is determined to be 50 resulting in eager selects happening in batches of 50 when the user expects it to be in batches of 500. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12365310">OPENJPA-175</key>
            <summary>Eager selects by PagingResultObjectProvider may not use the FetchBatchSize</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ssegu">Srinivasa</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2007 23:57:25 +0000</created>
                <updated>Tue, 9 Mar 2010 18:32:32 +0000</updated>
                            <resolved>Sat, 24 Mar 2007 00:42:32 +0000</resolved>
                                    <version>0.9.0</version>
                    <version>0.9.6</version>
                                    <fixVersion>0.9.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12482409" author="awhite" created="Tue, 20 Mar 2007 15:11:08 +0000"  >&lt;p&gt;+1, with some caveats:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The proposed patch doesn&apos;t handle the common cases where the FetchBatchSize is -1 (unlimited) or 0 (driver default).&lt;/li&gt;
	&lt;li&gt;I&apos;m a little nervous about defaulting the in clause limit to &quot;unlimited&quot; when we don&apos;t have much info on actual database limits other than Oracle.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12482503" author="ssegu" created="Tue, 20 Mar 2007 19:43:57 +0000"  >&lt;p&gt;Patch with fixes to address the FetchBatchSize values of -1, 0. For FetchBatchSize being 0 or negative value other than -1 uses the earlier logic of determining a pageSize capped by 50 based on size.&lt;/p&gt;</comment>
                            <comment id="12482821" author="awhite" created="Wed, 21 Mar 2007 16:22:59 +0000"  >&lt;p&gt;I&apos;ll have to see the code in context once it&apos;s checked in because I&apos;m not very good at reading patches, but it looks good to me.&lt;/p&gt;</comment>
                            <comment id="12482931" author="awhite" created="Wed, 21 Mar 2007 22:06:27 +0000"  >&lt;p&gt;1. Are you also going to fix InExpression to honor the DBDictionary&apos;s new in clause limit?&lt;br/&gt;
2. After reviewing the patch some more, I propose the following simplified version:&lt;/p&gt;

&lt;p&gt;        // try to find a good page size.  if the known size &amp;lt; batch size, use&lt;br/&gt;
        // it.  if the batch size is set, then use that; if it&apos;s sorta close&lt;br/&gt;
        // to the size, then use the size / 2 to get two full pages rather&lt;br/&gt;
        // than a possible big one and small one&lt;br/&gt;
        int batch = getFetchConfiguration().getFetchBatchSize();&lt;br/&gt;
        int pageSize;&lt;br/&gt;
        if (batch &amp;lt; 0)&lt;br/&gt;
            pageSize = (int) size;&lt;br/&gt;
        else {&lt;br/&gt;
            if (batch == 0)&lt;br/&gt;
                batch = 50; // reasonable default&lt;br/&gt;
            if (size &amp;lt;= batch)&lt;br/&gt;
                pageSize = (int) size;&lt;br/&gt;
            else if (size &amp;lt;= batch * 2) &lt;/p&gt;
{
                if (size % 2 == 0)
                    pageSize = (int) (size / 2);
                else
                    pageSize = (int) (size / 2 + 1);
            }
&lt;p&gt; else&lt;br/&gt;
                pageSize = batch;&lt;br/&gt;
        } &lt;/p&gt;</comment>
                            <comment id="12482947" author="ssegu" created="Wed, 21 Mar 2007 22:57:08 +0000"  >&lt;p&gt;1 - Yes, was planning to do it as a separate JIRA given that it directly does not concern the issue raised here, however I will include it here since we are introducing the in-clause limit in the DBDictionary for this fix.&lt;br/&gt;
2 - Looks fine to me, except for the minor issue that in the (size &amp;lt;= batch * 2) case we will not be adhering to the FetchBatchSize for pageSize in that the first in-clause query will be for lesser than the FetchBatchSize number of entries, however we will still endup running the same number of in-clause queries - 2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12353927" name="InExpression-Diff.txt" size="3263" author="ssegu" created="Thu, 22 Mar 2007 05:45:51 +0000"/>
                            <attachment id="12353782" name="OPENJPA-175-patch.txt" size="5485" author="ssegu" created="Tue, 20 Mar 2007 19:43:57 +0000"/>
                            <attachment id="12353704" name="OPENJPA-175-patch.txt" size="5295" author="ssegu" created="Tue, 20 Mar 2007 00:05:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Mar 2007 15:11:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysyxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>