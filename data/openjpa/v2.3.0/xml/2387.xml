<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:38:03 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2387/OPENJPA-2387.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2387] Schema name is incorrectly included in length of Sequence name.</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2387</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Take the following entity definition:&lt;/p&gt;

&lt;p&gt;@Entity @Table(name=&quot;LONG_NAME_ENTITY&quot;)&lt;br/&gt;
@SequenceGenerator(name=&quot;longSequenceNameSequence&quot;,sequenceName=&quot;A_TWENTY_NINE_CHAR_LENGTH_SEQ&quot;)&lt;br/&gt;
public class LongSequenceNameEntity implements Serializable&lt;/p&gt;

&lt;p&gt;As can be seen, a Sequence is defined with a name which is 29 characters long.  On a Database such as Oracle which has a 30 character limit on sequence names, among others names, this sequence is perfectly legal.  However, when a schema name is tacked onto this by OpenJPA, OpenJPA code incorrectly counts the characters of the schema in the length of the sequence name.   As such, the following exception will occur:&lt;/p&gt;

&lt;p&gt;Caused by: &amp;lt;openjpa-2.2.1.1-SNAPSHOT-r422266:1445654M nonfatal user error&amp;gt; org.apache.openjpa.persistence.ArgumentException: Sequence name &quot;HTHOMANN.A_TWENTY_NINE_CHAR_LENGTH_SEQ&quot; is 38-character long. The database allows maximum 30-character for a sequence name.&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.checkNameLength(DBDictionary.java:5358)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.commonCreateAlterSequenceSQL(DBDictionary.java:3492)&lt;br/&gt;
	at org.apache.openjpa.jdbc.sql.DBDictionary.getAlterSequenceSQL(DBDictionary.java:3469)&lt;/p&gt;


&lt;p&gt;The DBDictionary.checkNameLength in this case is counting the characters of the schema name, and sequence name.  The length of the schema name should not be included in the length of the sequence.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12649352">OPENJPA-2387</key>
            <summary>Schema name is incorrectly included in length of Sequence name.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jpaheath">Heath Thomann</assignee>
                                    <reporter username="jpaheath">Heath Thomann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 May 2013 17:37:09 +0100</created>
                <updated>Fri, 28 Feb 2014 19:08:35 +0000</updated>
                                            <version>2.2.2</version>
                    <version>2.2.1.1</version>
                    <version>2.3.0</version>
                                                    <component>sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13666457" author="jpaheath" created="Fri, 24 May 2013 17:56:59 +0100"  >&lt;p&gt;Providing a patch to resolve the issue.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Heath&lt;/p&gt;</comment>
                            <comment id="13713082" author="jira-bot" created="Fri, 19 Jul 2013 00:28:28 +0100"  >&lt;p&gt;Commit 1504719 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/branches/2&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1504719&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1504719&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.&lt;/p&gt;</comment>
                            <comment id="13713084" author="jira-bot" created="Fri, 19 Jul 2013 00:30:43 +0100"  >&lt;p&gt;Commit 1504720 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/branches/2&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1504720&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1504720&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.&lt;/p&gt;</comment>
                            <comment id="13713086" author="jira-bot" created="Fri, 19 Jul 2013 00:32:11 +0100"  >&lt;p&gt;Commit 1504721 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1504721&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1504721&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.&lt;/p&gt;</comment>
                            <comment id="13722862" author="jira-bot" created="Mon, 29 Jul 2013 20:15:29 +0100"  >&lt;p&gt;Commit 1508184 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/branches/2.2.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1508184&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1508184&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.  Made update to ensure schema is used after length is calculated.&lt;/p&gt;</comment>
                            <comment id="13722864" author="jira-bot" created="Mon, 29 Jul 2013 20:17:20 +0100"  >&lt;p&gt;Commit 1508185 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/branches/2.2.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1508185&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1508185&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.  Made update to ensure schema is used after length is calculated.&lt;/p&gt;</comment>
                            <comment id="13722873" author="jira-bot" created="Mon, 29 Jul 2013 20:23:49 +0100"  >&lt;p&gt;Commit 1508186 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/branches/2.2.1.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1508186&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1508186&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.  Made update to ensure schema is used after length is calculated.&lt;/p&gt;</comment>
                            <comment id="13722876" author="jira-bot" created="Mon, 29 Jul 2013 20:27:28 +0100"  >&lt;p&gt;Commit 1508188 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpaheath&quot; class=&quot;user-hover&quot; rel=&quot;jpaheath&quot;&gt;Heath Thomann&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1508188&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1508188&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2387&quot; title=&quot;Schema name is incorrectly included in length of Sequence name.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2387&quot;&gt;OPENJPA-2387&lt;/a&gt;: Fix to exclude schema name when checking the length of a sequence name.  Made update to ensure schema is used after length is calculated.&lt;/p&gt;</comment>
                            <comment id="13916196" author="dave.chen80@gmail.com" created="Fri, 28 Feb 2014 19:08:35 +0000"  >&lt;p&gt;Hi, we are currently using version 2.2.2 and facing the same issue. When the binary patch version will be released? Thanks in advance!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12584713" name="OPENJPA-2387-2.2.1.x.patch" size="917" author="jpaheath" created="Fri, 24 May 2013 17:56:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Jul 2013 23:28:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzepyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330014</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>