<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:41:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1530/OPENJPA-1530.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1530] MySQL storage engine support</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1530</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;The MySQLDictionary currently supports only TYPE innodb. There is a skeleton for support of this element but there is no way to change it from the default.&lt;/p&gt;

&lt;p&gt;Also, according to the MySQL documentation &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.1/en/create-table.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/refman/5.1/en/create-table.html&lt;/a&gt;  TYPE is deprecated. The recommended (and supported) keyword is ENGINE. &lt;/p&gt;

&lt;p&gt;&quot;Since MySQL 5.1.8, it produces a warning. It will be removed in a future MySQL release. You should not use TYPE in any new applications, and you should immediately begin conversion of existing applications to use ENGINE instead.&quot;&lt;/p&gt;

&lt;p&gt;I propose to change TYPE to ENGINE, and to provide a way for the user to specify which engine to use.&lt;/p&gt;

&lt;p&gt;I need some feedback on this: A property, mysql.engine, with a default of innodb (for compatibility) can be specified by the user in order to create tables using any of the supported engines. Can the property be put onto the command line? Can the property be added to persistence.xml? Can the property be added to the maven profile properties?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12457213">OPENJPA-1530</key>
            <summary>MySQL storage engine support</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clr">Craig L Russell</assignee>
                                    <reporter username="clr">Craig L Russell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2010 20:43:21 +0000</created>
                <updated>Wed, 13 Feb 2013 21:04:06 +0000</updated>
                            <resolved>Tue, 9 Mar 2010 16:50:57 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0-beta3</fixVersion>
                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12838602" author="clr" created="Thu, 25 Feb 2010 23:24:53 +0000"  >&lt;p&gt;Please review this patch. It makes schema creation possible for MySQL engines other than MyISAM or innodb.&lt;/p&gt;

&lt;p&gt;It adds a property jdbc.mysql.Engine to the JDBC Configuration. This allows the MySQL engine type to be specified on the command line via -Dopenjpa.jdbc.mysql.Engine=ndbcluster or in persistence.xml &amp;lt;property name=&quot;openjpa.jdbc.mysql.Engine&quot; value=&quot;ndbcluster&quot;.&lt;/p&gt;

&lt;p&gt;I didn&apos;t see other XXXDictionary implementations with special properties so I guessed this is the way to get the JDBC Configuration to hold the value and for MySQLDictionary to get the value. If there is a different pattern I should use, please let me know.&lt;/p&gt;
</comment>
                            <comment id="12839957" author="clr" created="Tue, 2 Mar 2010 01:46:45 +0000"  >&lt;p&gt;This update should be widely available, especially for 2.0&lt;/p&gt;</comment>
                            <comment id="12840248" author="milosz" created="Tue, 2 Mar 2010 17:20:35 +0000"  >&lt;p&gt;Hi Craig. The Dictionaries support their special properties just by having public variables. MySQLDictionary currently supports the &quot;tableType&quot; property this way. You can override it by using&lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;openjpa.jdbc.DBDictionary&quot; value=&quot;mysql(TableType=ndbcluster)&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;or &lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;openjpa.jdbc.DBDictionary&quot; value=&quot;TableType=ndbcluster&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;I think that the only change you want here is:&lt;/p&gt;

&lt;p&gt;+    @Override&lt;br/&gt;
     public String[] getCreateTableSQL(Table table) &lt;/p&gt;
{
         String[] sql = super.getCreateTableSQL(table);
-        if (!StringUtils.isEmpty(tableType))
-            sql[0] = sql[0] + &quot; TYPE = &quot; + tableType;
+        if (!StringUtils.isEmpty(engine))
+            sql[0] = sql[0] + &quot; ENGINE = &quot; + engine;
         return sql;
     }</comment>
                            <comment id="12841504" author="techhusky" created="Thu, 4 Mar 2010 20:36:40 +0000"  >&lt;p&gt;I agree with Milosz.  The property does not go beyond the scope of the dictionary so it should be localized to the MySQL dictionary.  For example:  &lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;openjpa.jdbc.DBDictionary&quot; value=&quot;mysql(Engine=ndbcluster)&quot;/&amp;gt;.&lt;/p&gt;

&lt;p&gt;You just need to provide a getter and setter (or public field) for &quot;Engine&quot; in the MySQL dictionary and the config framework will take care of setting the value.  Also, if you add a new dictionary value please update the OpenJPA docs specific to the MySQL dictionary.  Oh, and the print statement needs to be removed.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12841552" author="clr" created="Thu, 4 Mar 2010 21:55:06 +0000"  >&lt;p&gt;Do you think I need a test case for this? Seems straightforward enough and I&apos;ll be testing it pretty thoroughly myself.&lt;/p&gt;</comment>
                            <comment id="12841561" author="techhusky" created="Thu, 4 Mar 2010 22:12:21 +0000"  >&lt;p&gt;IMO, no.  Since it requires a special environment and will be disabled in the normal test runs anyway.  But, if you&apos;d like to add a test and put it in the excludes list that would be a bonus.  It would be handy to have if it was ever needed for regression or specialized testing of that environment. &lt;/p&gt;</comment>
                            <comment id="12841672" author="mikedd" created="Fri, 5 Mar 2010 02:59:14 +0000"  >&lt;p&gt;I agree with Milosz &amp;amp; Jeremy - the engine variable should be moved to MySQLDictionary. &lt;/p&gt;

&lt;p&gt;If we do add a testcase I&apos;d rather have it only run on MySQL instead of excluding it entirely (we&apos;ll forget about it if it&apos;s excluded). We&apos;d just need to set the engine property to ndbcluster and verify that we can create a table.  &lt;/p&gt;
</comment>
                            <comment id="12843191" author="clr" created="Tue, 9 Mar 2010 16:50:57 +0000"  >&lt;p&gt;Committed changes to 1.3.x and trunk:&lt;br/&gt;
     public String[] getCreateTableSQL(Table table) {&lt;br/&gt;
         String[] sql = super.getCreateTableSQL(table);&lt;br/&gt;
         if (!StringUtils.isEmpty(tableType))&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sql&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = sql&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; + &quot; TYPE = &quot; + tableType;&lt;br/&gt;
+            sql&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = sql&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; + &quot; ENGINE = &quot; + tableType;&lt;br/&gt;
         return sql;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Since tableType is already documented, there&apos;s no need to change it.&lt;/p&gt;

&lt;p&gt;svn commit -m &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1530&quot; title=&quot;MySQL storage engine support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1530&quot;&gt;&lt;del&gt;OPENJPA-1530&lt;/del&gt;&lt;/a&gt; change TYPE to ENGINE in DDL for MySQL&quot;&lt;br/&gt;
Sending        openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/MySQLDictionary.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 920979.&lt;br/&gt;
clr% svn commit -m &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1530&quot; title=&quot;MySQL storage engine support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1530&quot;&gt;&lt;del&gt;OPENJPA-1530&lt;/del&gt;&lt;/a&gt; change TYPE to ENGINE in DDL for MySQL&quot;&lt;br/&gt;
Sending        openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/MySQLDictionary.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 920977.&lt;/p&gt;</comment>
                            <comment id="12843192" author="clr" created="Tue, 9 Mar 2010 16:51:30 +0000"  >&lt;p&gt;Thanks for the assistance resolving this.&lt;/p&gt;</comment>
                            <comment id="13577935" author="jira-bot" created="Wed, 13 Feb 2013 21:04:06 +0000"  >&lt;p&gt;Commit 1445923 from rpalache&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1445923&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1445923&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1530&quot; title=&quot;MySQL storage engine support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1530&quot;&gt;&lt;del&gt;OPENJPA-1530&lt;/del&gt;&lt;/a&gt; change TYPE to ENGINE in DDL for MySQL&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12437066" name="openjpa-1530.patch" size="2932" author="clr" created="Thu, 25 Feb 2010 23:24:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Mar 2010 17:20:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7o1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>