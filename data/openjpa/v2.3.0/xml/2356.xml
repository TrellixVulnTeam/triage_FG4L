<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:41:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2356/OPENJPA-2356.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2356] Use new Offset/Limit/ROWNUM features in DB2 family of databases for range queries</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2356</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;JPA queries that use setFirstResult() and/or setMaxResult() translate to some form of Offset and Limit syntax in database SQL query. Recently DB2 and Derby has added ROWNUM and FETCH offset respectively.&lt;br/&gt;
OpenJPA should use these facilities when appropriate.   &lt;/p&gt;</description>
                <environment></environment>
        <key id="12638420">OPENJPA-2356</key>
            <summary>Use new Offset/Limit/ROWNUM features in DB2 family of databases for range queries</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ppoddar@apache.org">Pinaki Poddar</assignee>
                                    <reporter username="ppoddar@apache.org">Pinaki Poddar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Mar 2013 00:35:41 +0000</created>
                <updated>Sun, 5 Apr 2015 17:16:56 +0100</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13611034" author="jira-bot" created="Fri, 22 Mar 2013 18:22:41 +0000"  >&lt;p&gt;Commit 1459918 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ppoddar%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;ppoddar@apache.org&quot;&gt;Pinaki Poddar&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1459918&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1459918&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2356&quot; title=&quot;Use new Offset/Limit/ROWNUM features in DB2 family of databases for range queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2356&quot;&gt;OPENJPA-2356&lt;/a&gt;: Use FETCH OFFSET/NEXT and ROWNUM support for DB2 familiy of databases for Range queries&lt;/p&gt;</comment>
                            <comment id="13615423" author="curtisr7" created="Wed, 27 Mar 2013 15:58:53 +0000"  >&lt;p&gt;Pinaki &amp;#8211; Can I have you update the affects/fix versions?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13649463" author="allee8285" created="Mon, 6 May 2013 01:00:01 +0100"  >&lt;p&gt;commit r1459918 cause the following failure when run against Oracle. It passed with Derby.&lt;/p&gt;

&lt;p&gt;     73   &amp;lt;testcase time=&quot;2.058&quot; classname=&quot;org.apache.openjpa.persistence.jdbc.meta.TestRangeQuery&quot; name=&quot;testQueryRange&quot;&amp;gt;&lt;br/&gt;
     74     &amp;lt;failure message=&quot;expected:&amp;lt;5&amp;gt; but was:&amp;lt;0&amp;gt;&quot; type=&quot;junit.framework.AssertionFailedError&quot;&amp;gt;junit.framework.AssertionFailedError: expected:&amp;lt;5&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
     75   at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
     76   at junit.framework.Assert.failNotEquals(Assert.java:282)&lt;br/&gt;
     77   at junit.framework.Assert.assertEquals(Assert.java:64)&lt;br/&gt;
     78   at junit.framework.Assert.assertEquals(Assert.java:201)&lt;br/&gt;
     79   at junit.framework.Assert.assertEquals(Assert.java:207)&lt;br/&gt;
     80   at org.apache.openjpa.persistence.jdbc.meta.TestRangeQuery.testQueryRange(TestRangeQuery.java:74)&lt;br/&gt;
     81   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;</comment>
                            <comment id="13649476" author="allee8285" created="Mon, 6 May 2013 02:29:59 +0100"  >&lt;p&gt;MySQL also failed the same way.&lt;/p&gt;</comment>
                            <comment id="13649811" author="ppoddar@apache.org" created="Mon, 6 May 2013 16:50:14 +0100"  >
&lt;p&gt;Albert,&lt;br/&gt;
  The test (TestRangeQuery) runs OK in my environment against MySQL. Bu&lt;br/&gt;
these features vary across database versions.&lt;br/&gt;
Is it possible for you to observe the following&lt;br/&gt;
   a) the database and driver version being used?&lt;br/&gt;
   b) the SQL it spits out (lok for the last two especially)&lt;/p&gt;

&lt;p&gt;In my environment it looks as follows&lt;/p&gt;

&lt;p&gt;openjpa.jdbc.JDBC - Connected to MySQL version 5.5 using JDBC driver&lt;br/&gt;
MySQL-AB JDBC Driver version mysql-connector-java-5.1.12 ( Revision: $&lt;/p&gt;
{bzr.revision-id}
&lt;p&gt; ).&lt;/p&gt;

&lt;p&gt;prepstmnt 535240679 SELECT t0.id, t0.name FROM EagerOuterJoinPC t0 ORDER BY&lt;br/&gt;
t0.name ASC LIMIT ?, ? &lt;span class=&quot;error&quot;&gt;&amp;#91;params=(long) 5, (long) 15&amp;#93;&lt;/span&gt;&lt;br/&gt;
prepstmnt 1628659987 SELECT COUNT&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; FROM (SELECT t0.id FROM&lt;br/&gt;
EagerOuterJoinPC t0 LIMIT ?, ?) s &lt;span class=&quot;error&quot;&gt;&amp;#91;params=(long) 5, (long) 15&amp;#93;&lt;/span&gt;&lt;/p&gt;




&lt;p&gt;Regards &amp;#8211;&lt;/p&gt;

&lt;p&gt;Pinaki Poddar&lt;br/&gt;
Chair, Apache OpenJPA Project           &lt;a href=&quot;http://openjpa.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://openjpa.apache.org/&lt;/a&gt;&lt;br/&gt;
JPA Expert Group Member&lt;br/&gt;
Application &amp;amp; Integration Middleware&lt;/p&gt;








&lt;p&gt;From:	&quot;Albert Lee (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
To:	Pinaki Poddar/Dallas/IBM@IBMUS&lt;br/&gt;
Date:	05/05/2013 06:30 PM&lt;br/&gt;
Subject:	&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Commented&amp;#93;&lt;/span&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2356&quot; title=&quot;Use new Offset/Limit/ROWNUM features in DB2 family of databases for range queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2356&quot;&gt;OPENJPA-2356&lt;/a&gt;) Use new Offset/Limit/ROWNUM&lt;br/&gt;
            features in DB2 family of databases for range queries&lt;/p&gt;




&lt;p&gt;    [&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2356?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=13649476#comment-13649476&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OPENJPA-2356?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=13649476#comment-13649476&lt;/a&gt;&lt;br/&gt;
 ]&lt;/p&gt;

&lt;p&gt;Albert Lee commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2356&quot; title=&quot;Use new Offset/Limit/ROWNUM features in DB2 family of databases for range queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2356&quot;&gt;OPENJPA-2356&lt;/a&gt;:&lt;br/&gt;
-------------------------------------&lt;/p&gt;

&lt;p&gt;MySQL also failed the same way.&lt;/p&gt;

&lt;p&gt;queries&lt;br/&gt;
---------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;some form of Offset and Limit syntax in database SQL query. Recently DB2&lt;br/&gt;
and Derby has added ROWNUM and FETCH offset respectively.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message is automatically generated by JIRA.&lt;br/&gt;
If you think it was sent incorrectly, please contact your JIRA&lt;br/&gt;
administrators&lt;br/&gt;
For more information on JIRA, see: &lt;a href=&quot;http://www.atlassian.com/software/jira&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.atlassian.com/software/jira&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13650892" author="allee8285" created="Tue, 7 May 2013 15:44:04 +0100"  >&lt;p&gt;This test failed on Oracle, MySQL, HSQLDB, PostgreSQL so far. It does pass for Derby.&lt;/p&gt;

&lt;p&gt;The following is the MySQL trace from the run.  MySQL is at v5.5&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
Running org.apache.openjpa.persistence.jdbc.meta.TestRangeQuery&lt;br/&gt;
58  TestConv  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Runtime - Starting OpenJPA 2.3.0-SNAPSHOT&lt;br/&gt;
155  TestConv  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Using dictionary class &quot;org.apache.openjpa.jdbc.sql.MySQLDictionary&quot;.&lt;br/&gt;
973  TestConv  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - Connected to MySQL version 5.5 using JDBC driver MySQL-AB JDBC Driver version mysql-connector-java-5.1.12 ( Revision: $&lt;/p&gt;
{bzr.revision-id}
&lt;p&gt; ). &lt;br/&gt;
1500  TestConv  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - OpenJPA cannot map field &quot;org.apache.openjpa.persistence.jdbc.common.apps.ConstantJoinPC4.manyToMany&quot; efficiently.  It is of an unsupported type. The field value will be serialized to a BLOB by default.&lt;br/&gt;
1770  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 85031456&amp;gt; executing stmnt 2008817593 DELETE FROM autoincpc1&lt;br/&gt;
1796  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 85031456&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
........&lt;br/&gt;
1796  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 85031456&amp;gt; executing stmnt 1179468258 DELETE FROM OPENJPA_SEQUENCE_TABLE&lt;br/&gt;
1803  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 85031456&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;7 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2029  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 830152036&amp;gt; executing prepstmnt 17227669 SELECT t0.id, t1.id, t2.id, t3.id, t3.EAGER_ID, t3.strngfld, t4.id, t4.DTYPE, t4.strngfld, t4.intField, t5.id, t5.EAGER_ID, t5.strngfld, t6.id, t7.id, t7.DTYPE, t7.strngfld, t7.intField, t6.strngfld, t1.strngfld, t2.intField, t0.strngfld FROM HelperPC t0 LEFT OUTER JOIN EagerPC t1 ON t0.EAGER_ID = t1.id LEFT OUTER JOIN EagerPCSub t2 ON t1.id = t2.id LEFT OUTER JOIN HelperPC t3 ON t1.EAGER_ID = t3.id LEFT OUTER JOIN HelperPC3 t4 ON t1.eagsub = t4.id LEFT OUTER JOIN HelperPC t5 ON t1.HELPER_ID = t5.id LEFT OUTER JOIN HelperPC2 t6 ON t1.RECURSE_ID = t6.id LEFT OUTER JOIN HelperPC3 t7 ON t6.HELPER_ID = t7.id WHERE (t4.DTYPE IS NULL OR t4.DTYPE IN &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2030  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 830152036&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2055  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 138583065&amp;gt; executing prepstmnt 2000169429 DELETE t0 FROM EagerOuterJoinPC t0&lt;br/&gt;
2055  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 138583065&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2094  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 93343904&amp;gt; executing prepstmnt 2021888176 SELECT SEQUENCE_VALUE FROM OPENJPA_SEQUENCE_TABLE WHERE ID = ? FOR UPDATE &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2098  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 93343904&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;4 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2111  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 299878560&amp;gt; executing prepstmnt 576658153 INSERT INTO OPENJPA_SEQUENCE_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2122  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 299878560&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;11 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2137  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1645300503&amp;gt; executing prepstmnt 1062659565 SELECT SEQUENCE_VALUE FROM OPENJPA_SEQUENCE_TABLE WHERE ID = ? FOR UPDATE &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2137  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1645300503&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2138  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1645300503&amp;gt; executing prepstmnt 2137731611 UPDATE OPENJPA_SEQUENCE_TABLE SET SEQUENCE_VALUE = ? WHERE ID = ? AND SEQUENCE_VALUE = ? &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2138  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1645300503&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2158  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 64338076 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2168  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;10 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2169  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 1385961324 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2169  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2169  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 1655441108 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2170  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2170  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 1605442425 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2170  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2170  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 1236308610 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2171  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2171  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 46712790 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2171  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2172  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 160194151 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2172  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2172  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 635681751 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2172  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2173  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 1051225362 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2173  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2174  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; executing prepstmnt 2067115646 INSERT INTO EagerOuterJoinPC (id, name, helper) VALUES (?, ?, ?) &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2174  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1145768891&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2225  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1682745014&amp;gt; executing prepstmnt 163905324 SELECT t0.id, t0.name FROM EagerOuterJoinPC t0 ORDER BY t0.name ASC LIMIT ?, ? &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2227  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1682745014&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;2 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
2243  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1951982241&amp;gt; executing prepstmnt 1282830982 SELECT COUNT&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; FROM (SELECT t0.id FROM EagerOuterJoinPC t0 LIMIT ?, ?) s &lt;span class=&quot;error&quot;&gt;&amp;#91;params=?, ?&amp;#93;&lt;/span&gt;&lt;br/&gt;
2244  TestConv  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 1266620481, conn 1951982241&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.554 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
testQueryRange(org.apache.openjpa.persistence.jdbc.meta.TestRangeQuery)  Time elapsed: 2.484 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
junit.framework.AssertionFailedError: expected:&amp;lt;5&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
        at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
        at junit.framework.Assert.failNotEquals(Assert.java:282)&lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:64)&lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:201)&lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:207)&lt;br/&gt;
        at org.apache.openjpa.persistence.jdbc.meta.TestRangeQuery.testQueryRange(TestRangeQuery.java:74)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;
</comment>
                            <comment id="13702518" author="dlau" created="Mon, 8 Jul 2013 23:11:36 +0100"  >&lt;p&gt;Fixed TestRangeQuery problem. Test now passes against Derby, DB2, Oracle, Mysql, Postgresql and Hsql. Attached is the patch for fixing this issue.&lt;/p&gt;

&lt;p&gt;The problem is database specific, in this case it is Derby. Derby uses &quot;Fetch First . . . Rows Only&quot; to return the number of rows. This results in a different number than the actual number of rows should get returned. That&apos;s why Derby needs to undergo the changes in applyRange() method.  &lt;/p&gt;

&lt;p&gt;On the other hand, the rest of the databases all have their own ways to return the number of rows. The syntax/mechanisms they are using though, always return the actual number of rows. (eg. &quot;Limit&quot;, &quot;Offset&quot;, &quot;Fetch&quot;) So they should not undergo the changes in method applyRange().&lt;/p&gt;

&lt;p&gt;Therefore, we moved applyRange() from SelectImpl to DerbyDictionary to be specific only to Derby. This fixed the problem. &lt;/p&gt;</comment>
                            <comment id="13703250" author="jira-bot" created="Tue, 9 Jul 2013 14:25:22 +0100"  >&lt;p&gt;Commit 1501256 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=allee8285&quot; class=&quot;user-hover&quot; rel=&quot;allee8285&quot;&gt;Albert Lee&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1501256&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1501256&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2356&quot; title=&quot;Use new Offset/Limit/ROWNUM features in DB2 family of databases for range queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2356&quot;&gt;OPENJPA-2356&lt;/a&gt; Database specific adjustments for previous patch. Contributed by Di Lau.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12407616">OPENJPA-759</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12591296" name="OPENJPA-2356.patch" size="3294" author="dlau" created="Mon, 8 Jul 2013 23:11:36 +0100"/>
                            <attachment id="12581900" name="graycol.gif" size="105" author="ppoddar@apache.org" created="Mon, 6 May 2013 16:50:14 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Mar 2013 18:22:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcvhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>