<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:40:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1469/OPENJPA-1469.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1469] Turn on DataCache by default</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1469</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;I&apos;m proposing that we change the default behavior for the DataCache.  Currently, the DataCache is turned off by default.  Our competition is turning on their L2 cache by default.  Thus, out-of-the-box comparisons are killing us.  We have to explain the difference, get them to change the configuration one way or the other for apples-to-apples comparisons, and then re-run the benchmark.  By that time, it&apos;s too late.  We already lost.&lt;/p&gt;

&lt;p&gt;Due to the upcoming 2.0.0 release, it seems like a good time to change this default.  Please comment directly to this JIRA.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Kevin&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445856">OPENJPA-1469</key>
            <summary>Turn on DataCache by default</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="kwsutter">Kevin Sutter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2010 20:17:24 +0000</created>
                <updated>Tue, 29 Oct 2013 13:48:33 +0000</updated>
                            <resolved>Tue, 29 Oct 2013 13:47:39 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.1.1</version>
                    <version>2.2.0</version>
                                                    <component>datacache</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                            <comments>
                            <comment id="12802340" author="kwsutter" created="Tue, 19 Jan 2010 17:12:38 +0000"  >&lt;p&gt;Currently, the QueryCache is turned &quot;on&quot; by default if the DataCache is turned &quot;on&quot;.  But, we&apos;re finding some performance issues with the default QueryCache (reference &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1471&quot; title=&quot;Change the default QueryCache eviction policy.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1471&quot;&gt;&lt;del&gt;OPENJPA-1471&lt;/del&gt;&lt;/a&gt;).  Depending on how quickly we can turn around openjpa-1471, this JIRA may enable DataCache and disable QueryCache.  I&apos;m running the JUnit bucket right now with this configuration to see if this combination introduces any functional changes.&lt;/p&gt;</comment>
                            <comment id="12803049" author="kwsutter" created="Wed, 20 Jan 2010 23:26:16 +0000"  >&lt;p&gt;This exercise is uncovering a few things which may make this &quot;simple change&quot; unattainable before the 2.0 release...&lt;/p&gt;

&lt;p&gt;To turn on the L2 cache by default, we need to set the following default values for best performance and functionality:&lt;/p&gt;

&lt;p&gt;openjpa.DataCache = true&lt;br/&gt;
openjpa.QueryCache = false&lt;br/&gt;
openjpa.RemoteCommitProvider = sjvm&lt;/p&gt;

&lt;p&gt;Setting the RemoteCommitProvider to sjvm by default identifies that the Broker is no longer Serializable and, thus, fails those tests.&lt;/p&gt;

&lt;p&gt;To temporarily get around this situation, I changed _provider in RemoteCommitEventManager to transient to allow for Serialization.  This cleared up 16 of the errors.  But, this is not a proper fix since the RemoteCommitEventManager is not transient in the OpenJPAConfiguration object.  And, the RemoteCommitEventManager depends on the RemoteCommitProvider to function properly.  So, maybe we need to make the RemoteCommitProvider Serializable...  More investigation required.&lt;/p&gt;

&lt;p&gt;When I set openjpa.QueryCache to false, I found a few tests that were dependent on this being &quot;on&quot; by default.  These were the TestCacheMode* tests and the TestBulkJPQLAndDataCache tests.  I can update these tests.&lt;/p&gt;

&lt;p&gt;There were also a few WriteBehind testcases that were failing with these settings.  Since this function doesn&apos;t look ready for a 2.0 release, I can disable these tests for now...&lt;/p&gt;

&lt;p&gt;I still have to work through the remaining issues with setting the DataCache to &quot;true&quot;...&lt;/p&gt;

&lt;p&gt;Bottom line is that the only change that we might be able to include in the 2.0 release is to turn the QueryCache &quot;off&quot; by default.  I&apos;ll post more when I know more...  Or, when Donald pulls the plug on the 2.0 release...&lt;/p&gt;

&lt;p&gt;Kevin&lt;/p&gt;</comment>
                            <comment id="12803300" author="kwsutter" created="Thu, 21 Jan 2010 14:26:47 +0000"  >&lt;p&gt;More test results...&lt;/p&gt;

&lt;p&gt;DataCache = true&lt;br/&gt;
QueryCache = false (proposed new default)&lt;br/&gt;
RemoteCommitProvider = sjvm&lt;/p&gt;

&lt;p&gt;30 Failures, 37 Errors&lt;/p&gt;

&lt;p&gt;DataCache = true&lt;br/&gt;
QueryCache = true (current default)&lt;br/&gt;
RemoteCommitProvider = sjvm&lt;/p&gt;

&lt;p&gt;394 Failures, 39 Errors&lt;/p&gt;

&lt;p&gt;Two things are becoming obvious...&lt;/p&gt;

&lt;p&gt;1)  I don&apos;t have the time to resolve all of the errors associated with turning on the DataCache by default before the 2.0 cutoff.  &lt;br/&gt;
We can continue to investigate these errors and get this default reset in the near future.  Most of these problems are probably just testcase errors (like the other fixups).  But, we need to take the time to investigate and understand before making this switch.&lt;/p&gt;

&lt;p&gt;2)  We have to turn the QueryCache off by default.  Not only does the &quot;true&quot; setting affect the performance gain when you turn on DataCache, but from a quick peek at the errors generated by the above configuration, the use of the QueryCache is affecting other aspects of the runtime like Serialization.&lt;/p&gt;

&lt;p&gt;I will be creating separate sub-tasks for the work items not being covered.  Please comment if you do not agree with this direction.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Kevin&lt;/p&gt;</comment>
                            <comment id="12848206" author="kwsutter" created="Mon, 22 Mar 2010 16:52:04 +0000"  >&lt;p&gt;Moving this defect out to 2.1.x...  Since we didn&apos;t make this change in the 2.0 release, it would be a &quot;shock&quot; to turn on data caching in the service stream...&lt;/p&gt;</comment>
                            <comment id="12898380" author="curtisr7" created="Fri, 13 Aug 2010 20:28:29 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1767&quot; title=&quot;OneToMany relationships owned by the many side aren&amp;#39;t properly evicted from the DataCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1767&quot;&gt;OPENJPA-1767&lt;/a&gt; needs to be resolved before we can consider turning on the DataCache by default.&lt;/p&gt;</comment>
                            <comment id="12898973" author="curtisr7" created="Mon, 16 Aug 2010 17:07:03 +0100"  >&lt;p&gt;Below is the entire list of tests that fail in the openjpa-persistence-jdbc bucket. To recreate the failures, enable the datacache and re-run. I&apos;m putting this list here because I don&apos;t think I&apos;ll be able to get through all of them in the near future.&lt;/p&gt;

&lt;p&gt;Failures that have been investigated:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1767&quot; title=&quot;OneToMany relationships owned by the many side aren&amp;#39;t properly evicted from the DataCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1767&quot;&gt;OPENJPA-1767&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.openjpa.persistence.jdbc.annotations.TestOneToOne&lt;/li&gt;
	&lt;li&gt;org.apache.openjpa.persistence.spring.TestLibService&lt;/li&gt;
	&lt;li&gt;org.apache.openjpa.persistence.jdbc.annotations.TestManyToMany&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1768&quot; title=&quot;StackOverflowError when finding an Entity with an Eager ManyToMany relationship.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1768&quot;&gt;&lt;del&gt;OPENJPA-1768&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.openjpa.jdbc.kernel.TestM2MBiVersion&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1769&quot; title=&quot;Broker getObjectId(...) doesn&amp;#39;t return a proper object id for an Entity that is detached and has no DetachedStateManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1769&quot;&gt;&lt;del&gt;OPENJPA-1769&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.openjpa.persistence.detachment.TestDetachNoStateField&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1770&quot; title=&quot;Inconsistent behaviour when fetching an Entity that has a null embeddable and the DataCache is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1770&quot;&gt;&lt;del&gt;OPENJPA-1770&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.openjpa.persistence.jdbc.annotations.TestEJBEmbedded&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Fixed testcases:&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.query.TestUpdateSingleValuedAssociation&lt;/p&gt;

&lt;p&gt;Broker serialization tests (busted and probably don&apos;t care):&lt;br/&gt;
org.apache.openjpa.kernel.TestEnhancedInstanceBrokerSerialization&lt;br/&gt;
org.apache.openjpa.kernel.TestInstanceGraphBrokerSerialization&lt;/p&gt;

&lt;p&gt;Failures requiring investigation:&lt;br/&gt;
org.apache.openjpa.persistence.graph.TestPersistentGraph&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.query.TestNativeQueryProcedures&lt;br/&gt;
org.apache.openjpa.jdbc.kernel.TestCollectionTracking&lt;br/&gt;
org.apache.openjpa.persistence.embed.attrOverrides.TestAssocOverrides&lt;br/&gt;
org.apache.openjpa.persistence.proxy.TestDetachMerge&lt;br/&gt;
org.apache.openjpa.persistence.TestXMLPersistenceMetaDataParser&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.annotations.TestJoinedInheritance&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.annotations.TestManyToMany&lt;br/&gt;
org.apache.openjpa.persistence.jpql.joins.TestEJBJoins&lt;br/&gt;
org.apache.openjpa.persistence.kernel.TestIndirectRecursion&lt;br/&gt;
org.apache.openjpa.persistence.kernel.TestPCClass&lt;br/&gt;
org.apache.openjpa.persistence.event.TestBeforeCommit&lt;br/&gt;
org.apache.openjpa.persistence.annotations.TestJoinedInheritance&lt;br/&gt;
org.apache.openjpa.persistence.annotations.TestManyToMany&lt;br/&gt;
org.apache.openjpa.persistence.annotations.TestOneToOne&lt;br/&gt;
org.apache.openjpa.persistence.enhance.identity.TestMultipleLevelDerivedIdentity1&lt;br/&gt;
org.apache.openjpa.persistence.query.TestProjectionQueryWithIdenticalResult&lt;br/&gt;
org.apache.openjpa.persistence.detach.TestDetachCascade&lt;br/&gt;
org.apache.openjpa.persistence.embed.TestEmbeddable&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.order.TestOrderColumn&lt;br/&gt;
org.apache.openjpa.persistence.conf.TestOverrideNonJtaDataSource&lt;br/&gt;
org.apache.openjpa.persistence.conf.TestSwitchConnection&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestChainEntities&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestEagerBidiSQL&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestIdOrderedOneMany&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestInverseEagerSQL&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestLazyManyToOne&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestManyEagerSQL&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestManyOneAsId&lt;br/&gt;
org.apache.openjpa.persistence.relations.TestRelationFieldAsPrimaryKeyAndForeignKey&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.sqlcache.TestFinderCache&lt;br/&gt;
org.apache.openjpa.persistence.jpql.functions.TestSetParameter&lt;br/&gt;
org.apache.openjpa.persistence.criteria.TestSubqueries&lt;br/&gt;
org.apache.openjpa.jdbc.persistence.classcriteria.TestQuerySubclass&lt;br/&gt;
org.apache.openjpa.persistence.jdbc.query.cache.TestNonPrimaryKeyQueryParameters&lt;/p&gt;</comment>
                            <comment id="13199869" author="allee8285" created="Fri, 3 Feb 2012 17:07:25 +0000"  >&lt;p&gt;Move fix version to 2.3.0 in preparation for 2.2.0 release.&lt;/p&gt;</comment>
                            <comment id="13807986" author="kwsutter" created="Tue, 29 Oct 2013 13:47:39 +0000"  >&lt;p&gt;This idea of turning on the Data (L2) Cache by default has been discussed ad nauseam and we&apos;re not going to do it.  There are too many pitfalls with turning on an L2 cache without knowledge of the end-user.  It&apos;s much better to let the customer determine when or if a Data Cache is suitable for a given scenario.  Since I originated this JIRA, I figure I can resolve it as &quot;won&apos;t fix&quot;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12471579">OPENJPA-1767</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471582">OPENJPA-1768</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12472005">OPENJPA-1770</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12444060">OPENJPA-1443</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12445873">OPENJPA-1471</subtask>
                            <subtask id="12446249">OPENJPA-1476</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Aug 2010 19:28:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7niv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>