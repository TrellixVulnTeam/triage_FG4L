<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:30:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1753/OPENJPA-1753.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1753] TestMixedLockManagerLockPermutation: Timing issue determines the pass/no-pass of the test case</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1753</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;This test case spawns three threads and the pass/no pass of the test cases depends on the timing. &lt;/p&gt;

&lt;p&gt;	One example is TestMixedLockManagerFindPermutation.testFindReadPessimisticRead: &lt;br/&gt;
        commonFindTest(&lt;br/&gt;
            &quot;testFind(Read,Commit/PessimisticRead,Rollback)&quot;,&lt;br/&gt;
            LockModeType.READ, Act.CommitTx, 1, null,&lt;br/&gt;
            LockModeType.PESSIMISTIC_READ, Act.RollbackTx, 1, null);&lt;/p&gt;

&lt;p&gt;	If the find by the second child &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-8&amp;#93;&lt;/span&gt; is executed before the jdbc commit of the update statement by the first child &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-7&amp;#93;&lt;/span&gt;, the test will fail. Attached are the trace file for the successful run and failing run. &lt;/p&gt;


</description>
                <environment></environment>
        <key id="12470528">OPENJPA-1753</key>
            <summary>TestMixedLockManagerLockPermutation: Timing issue determines the pass/no-pass of the test case</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="allee8285">Albert Lee</assignee>
                                    <reporter username="faywang">Fay Wang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jul 2010 17:27:56 +0100</created>
                <updated>Mon, 20 Sep 2010 16:40:06 +0100</updated>
                            <resolved>Fri, 13 Aug 2010 20:23:44 +0100</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12897939" author="allee8285" created="Thu, 12 Aug 2010 21:39:04 +0100"  >&lt;p&gt;Need to set postgresql.conf property max_connection &amp;gt;= 150, otherwise will get exception like:&lt;/p&gt;

&lt;p&gt;TestMixedLockManagerLockPermutation.testLockWriteRead  View test details   (org.apache.openjpa.persistence.lockmgr)&lt;br/&gt;
    &amp;lt;openjpa-2.1.0-SNAPSHOT-rexported fatal store error&amp;gt; org.apache.openjpa.util.StoreException: Cannot create PoolableConnectionFactory (FATAL: sorry, too many clients already)&lt;br/&gt;
    at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:102)&lt;br/&gt;
    at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:599)&lt;/p&gt;</comment>
                            <comment id="12912542" author="mikedd" created="Mon, 20 Sep 2010 16:40:06 +0100"  >&lt;p&gt;Closing issues which have been resolved for some time. If the problem persists, please reopen. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12450911" name="trace_fail.txt" size="11991" author="faywang" created="Fri, 30 Jul 2010 17:28:45 +0100"/>
                            <attachment id="12450912" name="trace_success.txt" size="10578" author="faywang" created="Fri, 30 Jul 2010 17:28:45 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Aug 2010 20:39:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161998</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7o6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288887</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>