<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:38:10 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1842/OPENJPA-1842.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1842] CachedEntityStatistics depends on @GeneratedValue which is not supported in Oracle by default</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1842</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;CachedEntityStatistics depends on @GeneratedValue which is not supported in Oracle by default unless special trigger and OracleDictionary setting is implemented.&lt;/p&gt;

&lt;p&gt;Otherwise, the following similar exception will be observed.&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: ORA-01400: cannot insert NULL into (&quot;JPAUSER&quot;.&quot;CACHEDENTITYSTATISTICS&quot;.&quot;ID&quot;)&lt;br/&gt;
 &lt;/p&gt;
{prepstmnt 406657085 INSERT INTO CachedEntityStatistics (firstName, lastName, version) VALUES (?, ?, ?) [params=?, ?, ?]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=1400, state=23000&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;SInce TestStatistics, the test case uses CachedEntityStatistics, is not testing GeneratedValue per se, will remove the annotation and implement a simple id assignment in CachedEntityStatistics  class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477672">OPENJPA-1842</key>
            <summary>CachedEntityStatistics depends on @GeneratedValue which is not supported in Oracle by default</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="allee8285">Albert Lee</assignee>
                                    <reporter username="allee8285">Albert Lee</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Oct 2010 22:53:43 +0100</created>
                <updated>Wed, 20 Oct 2010 22:17:27 +0100</updated>
                            <resolved>Wed, 20 Oct 2010 22:17:21 +0100</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.0.2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12922320" author="curtisr7" created="Mon, 18 Oct 2010 23:13:36 +0100"  >&lt;p&gt;Would changing the strategy to GenerationType.AUTO make the problem go away?&lt;/p&gt;</comment>
                            <comment id="12922408" author="allee8285" created="Tue, 19 Oct 2010 03:35:49 +0100"  >&lt;p&gt;While you are typing, it has changed to use AUTO instead and re-running the junit bucket. Thank Mike and Rick for the suggestion.&lt;/p&gt;

&lt;p&gt;Albert Lee.&lt;/p&gt;</comment>
                            <comment id="12922553" author="curtisr7" created="Tue, 19 Oct 2010 14:35:07 +0100"  >&lt;p&gt;I thought about this some more last night and we&apos;re not fixing the right problem here. I think the problem is that we don&apos;t have a good way to create these special Oracle triggers in our unit test bucket.? Going the route of making sure that all of our unit tests don&apos;t use GenerationType.IDENTITY is going to be error prone, and we&apos;ll be continually chasing this problem. How feasible is it to add support for GenerationType.IDENTITY?&lt;/p&gt;

&lt;p&gt;FYI &amp;#8211; As of this morning I found 20 instances of &quot;@GeneratedValue(strategy = GenerationType.IDENTITY) &quot; in our test bucket, but I&apos;m not sure how many of those are actually used.&lt;/p&gt;
</comment>
                            <comment id="12922576" author="allee8285" created="Tue, 19 Oct 2010 15:43:01 +0100"  >&lt;p&gt;Changing from IDENTITY to AUTO also causes some test failures running against MSSQL:&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: Cannot insert explicit value for identity column in table &apos;CachedEntityStatistics&apos; when IDENTITY_INSERT is set to OFF. &lt;/p&gt;
{prepstmnt 20188152 INSERT INTO CachedEntityStatistics (id, firstName, lastName, version) VALUES (?, ?, ?, ?) [params=?, ?, ?, ?]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=544, state=S0001&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;and Sybase:&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: Explicit value specified for identity field in table &apos;CachedEntityStatistics&apos; when &apos;SET IDENTITY_INSERT&apos; is OFF.&lt;/p&gt;
{prepstmnt 724577072 INSERT INTO CachedEntityStatistics (id, firstName, lastName, version) VALUES (?, ?, ?, ?) [params=?, ?, ?, ?]}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=584, state=ZZZZZ&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;BTW, we are not proposing changing all IDENTITY to something else. If so that leave us a hole in testing this functionality.&lt;/p&gt;

&lt;p&gt;Need to take a close look at what can be done here.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Oct 2010 22:13:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7ojj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>