<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:44:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-320/OPENJPA-320.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-320] Do not use System Tables (SYS*) with DB2</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-320</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;DB2&apos;s system tables (schemas beginning with SYS*) are causing problems with the JPA CTS bucket, if we&apos;re trying to use the SynchronizeMappings feature.&lt;/p&gt;

&lt;p&gt;From our dev mailing list (&lt;a href=&quot;http://www.nabble.com/Null-schema-name-when-generating-tables--tf4280146.html):&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Null-schema-name-when-generating-tables--tf4280146.html):&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;======================================================&lt;br/&gt;
We&apos;re running the CTS TCK against DB2 and we&apos;ve hit a snag with the SynchronizeMappings feature (I know this is not a required aspect of the TCK, but that&apos;s what we have been using to create the tables for the testing).&lt;/p&gt;

&lt;p&gt;One of the tests in the TCK requires a table called DATATYPES.  The problem is that DB2 has a system table by this name, so when OpenJPA attempts to look up any existing table information, we accidentally find the system table (SYSCAT) instead of the user&apos;s table (cts1).  The following trace snippet shows the problem.&lt;/p&gt;

&lt;p&gt;1000  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Schema - Reading table information for schema name &quot;null&quot;, table name &quot;DATATYPES&quot;.&lt;br/&gt;
1000  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - &amp;lt;t 16515324, conn 1314410072&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; rollback&lt;br/&gt;
1000  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - &amp;lt;t 16515324, conn 1314410072&amp;gt; getColumns: null, null, DATATYPES, null&lt;br/&gt;
1500  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.Schema - Reading column information for table &quot; SYSCAT.DATATYPES&quot;.&lt;/p&gt;

&lt;p&gt;Of course, this goes on thinking that we have found an appropriate DATATYPES table definition, but later when we attempt to alter it, we get an error:&lt;/p&gt;

&lt;p&gt;1891  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 16515324, conn 477240434&amp;gt; executing stmnt 854733554 ALTER TABLE DATATYPES ADD id INTEGER&lt;br/&gt;
1891  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.SQL - &amp;lt;t 16515324, conn 477240434&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; spent&lt;br/&gt;
1891  JPATCK  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.jdbc.JDBC - &amp;lt;t 16515324, conn 477240434&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 ms&amp;#93;&lt;/span&gt; close&lt;br/&gt;
&amp;lt;openjpa-0.0.0-r420667:563705M nonfatal general error&amp;gt; org.apache.openjpa.persistence.PersistenceException: DB2 SQL error: SQLCODE: -204, SQLSTATE: 42704, SQLERRMC: CTS1.DATATYPES &lt;/p&gt;
{stmnt 854733554 ALTER TABLE DATATYPES ADD id INTEGER}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=-204, state=42704&amp;#93;&lt;/span&gt;&lt;br/&gt;
======================================================&lt;/p&gt;

&lt;p&gt;By examining and experimenting with OpenJPA, it looks like we have a mechanism already in place to skip over these type of system tables.  By setting the variable systemSchemas with the names of these DB2-specific schema names, then we can bypass these tables and avoid the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12376197">OPENJPA-320</key>
            <summary>Do not use System Tables (SYS*) with DB2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwsutter">Kevin Sutter</assignee>
                                    <reporter username="kwsutter">Kevin Sutter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Aug 2007 21:39:23 +0100</created>
                <updated>Wed, 29 Aug 2007 16:34:32 +0100</updated>
                            <resolved>Fri, 17 Aug 2007 13:40:42 +0100</resolved>
                                    <version>0.9.7</version>
                                    <fixVersion>1.0.0</fixVersion>
                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12520536" author="kwsutter" created="Fri, 17 Aug 2007 13:40:42 +0100"  >&lt;p&gt;Resolved via svn revision 566855.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7k8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>