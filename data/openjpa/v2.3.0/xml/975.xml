<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:39:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-975/OPENJPA-975.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-975] Oracle needs ability to not have an escape character for search strings.</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-975</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Oracle application has a JPQL query that attempts to set a parameter to &apos;\&apos;. &apos;\&apos; is not a reserved character with Oracle and the query will work if you execute it &quot;normally&quot; with JDBC.&lt;/p&gt;

&lt;p&gt;OpenJPA automatically adds ESCAPE (&apos;\&apos;) to every search SQL query.  As a result the \ is interpreted as an escape indicator and the SQL will not execute as expected.&lt;/p&gt;</description>
                <environment>Oracle</environment>
        <key id="12416685">OPENJPA-975</key>
            <summary>Oracle needs ability to not have an escape character for search strings.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bjreed">B.J. Reed</assignee>
                                    <reporter username="bjreed">B.J. Reed</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Mar 2009 20:53:23 +0000</created>
                <updated>Tue, 20 Nov 2012 16:05:57 +0000</updated>
                            <resolved>Sun, 5 Apr 2009 10:12:46 +0100</resolved>
                                    <version>1.2.0</version>
                    <version>1.3.0</version>
                    <version>2.0.0-M2</version>
                                    <fixVersion>1.0.4</fixVersion>
                    <fixVersion>1.2.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0-M2</fixVersion>
                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12681025" author="bjreed" created="Wed, 11 Mar 2009 20:58:40 +0000"  >&lt;p&gt;Attached patch has a new field in the DBDictionary: alwaysAddSearchStringEscape = true&lt;/p&gt;

&lt;p&gt;The OracleDictionary sets this to false.&lt;/p&gt;

&lt;p&gt;If this field is true, then JDBCExpressionFactory acts as it always did and uses the searchStringEscape that is defined for the Dictionary.  If it is false, then the additional  ESCAPE (&apos;\&apos;) will not be added.&lt;/p&gt;

&lt;p&gt;Test case also included.&lt;/p&gt;</comment>
                            <comment id="12681262" author="milosz" created="Thu, 12 Mar 2009 11:10:24 +0000"  >&lt;p&gt;B.J., thanks for the patch.&lt;/p&gt;

&lt;p&gt;1. Wouldn&apos;t you mind updating also the documentation? We have a section in the manual which covers public dictionary properties.&lt;/p&gt;

&lt;p&gt;2. It could be beneficial to research other databases in that matter. I have a feeling that many of them do not require the ESCAPE clause. A separate issue can be opened for that.&lt;/p&gt;</comment>
                            <comment id="12681283" author="milosz" created="Thu, 12 Mar 2009 12:19:12 +0000"  >&lt;p&gt;Another small request. Is it possible that you rename the property to requiresEscapeForLike? We already have a few requires*For*  properties and it would fit nicely into that name pattern.&lt;/p&gt;</comment>
                            <comment id="12681317" author="bjreed" created="Thu, 12 Mar 2009 13:47:05 +0000"  >&lt;p&gt;Thanks Milosz for the review.&lt;/p&gt;

&lt;p&gt;I had noticed all the &quot;required&quot; properties a few days ago and there was some subtle difference on the name that I landed on.....but that logic totally escapes me now, so I&apos;ve renamed to requiresSearchStringEscapeForLike - also want to make it as obvious as possible that it works with the  &quot;SearchStringEscape&quot; property.&lt;/p&gt;

&lt;p&gt;I have it on my list of TODO&apos;s to update the documentation.&lt;/p&gt;

&lt;p&gt;Have opened up &lt;a href=&quot;http://issues.apache.org/jira/browse/OPENJPA-976&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/OPENJPA-976&lt;/a&gt; to do more investigation about which DB&apos;s prefer the search string escape.  At this time my knowledge of all the DB&apos;s is rather limited, but I&apos;ll be happy to do that research.&lt;/p&gt;</comment>
                            <comment id="12681333" author="bjreed" created="Thu, 12 Mar 2009 14:33:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-975&quot; title=&quot;Oracle needs ability to not have an escape character for search strings.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-975&quot;&gt;&lt;del&gt;OPENJPA-975&lt;/del&gt;&lt;/a&gt;doc.patch is the update to the documentation for this new DB Dictionary property.&lt;/p&gt;</comment>
                            <comment id="12681362" author="milosz" created="Thu, 12 Mar 2009 15:47:40 +0000"  >&lt;p&gt;This quote from the manual&lt;/p&gt;

&lt;p&gt;&quot;SearchStringEscape: The default escape character used when generating SQL LIKE clauses. The escape character is used to escape the wildcard meaning of the _ and % characters. Note: since JPQL provides the ability to define the escape character in the query, this setting is primarily used when translating other query languages, such as JDOQL. Defaults to &quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot; (a single backslash in Java speak).&quot;&lt;/p&gt;

&lt;p&gt;worries me as it suggests the resolution of this issue conflicts with JDOQL support.&lt;/p&gt;

&lt;p&gt;Could some more experienced developer comment on this?&lt;br/&gt;
Is this &quot;always append ESCAPE to LIKE&quot; behaviour a JDOQL requirement?&lt;br/&gt;
Do we care for JDO in OpenJPA 1.3 and 2.0?&lt;/p&gt;</comment>
                            <comment id="12681371" author="mikedd" created="Thu, 12 Mar 2009 16:10:47 +0000"  >&lt;p&gt;Is this change specific to Oracle, or do other databases also allow the \ character to be used? &lt;/p&gt;

&lt;p&gt;I was thinking of this as more of a compatibility option. Ie in openjpa &amp;lt; 1.3.0 we automatically append the ESCAPE clause (unless configured otherwise). In OpenJPA &amp;gt;= 1.3.0 we do not (since the clause seems extraneous to me). &lt;/p&gt;

&lt;p&gt;I think this would be more tolerable for JDO providers who build on top of OpenJPA&apos;s kernel. They could set the compatibility option in their ProductDerivation (similar to what was proposed for detach options) and then all databases would use the old behavior. If the setting is in the DBDictionary then reverting to the old behavior requires more code. &lt;/p&gt;

&lt;p&gt;To answer the broader question about whether we care for JDO in OpenJPA version x. My opinion is that we care, but our obligation is to provide JPA expected behavior by default. When this conflicts with JDO&apos;s expected behavior we should provide a configuration option to allow JDO like behavior, but we have no obligation to provide it &quot;out of the box&quot;. &lt;/p&gt;</comment>
                            <comment id="12682756" author="bjreed" created="Tue, 17 Mar 2009 18:54:23 +0000"  >&lt;p&gt;It appears that most DB&apos;s do want the escape character by default, Oracle is an exception, but probably not the only one.  Latest patch cleans up the test case code and adds another test to use a different escape string.&lt;/p&gt;</comment>
                            <comment id="12683896" author="fyrewyld" created="Fri, 20 Mar 2009 14:29:20 +0000"  >&lt;p&gt;OpenJPA 1.0.x version of the patch.&lt;/p&gt;</comment>
                            <comment id="12690029" author="mikedd" created="Fri, 27 Mar 2009 20:19:28 +0000"  >&lt;p&gt;Updating Joe&apos;s patch. Removing hard coded directory names( C:/$&lt;/p&gt;
{something}
&lt;p&gt;). &lt;/p&gt;</comment>
                            <comment id="12690105" author="mikedd" created="Fri, 27 Mar 2009 21:13:05 +0000"  >&lt;p&gt;Before committing the patch I&apos;d like to make sure that the current behavior is the default. Ie on Oracle (or any database) we should still include ESCAPE (&apos;/&apos;) unless the user configures otherwise. &lt;/p&gt;

&lt;p&gt;The line in OracleDictionary that sets requiresSearchStringEscapeForLike should be removed, and the testcase will need updating to reflect that (set the property in order to test it at least when the DBDictionary is Oracle. The patch also includes an updated setClobString() method for Oracle that doesn&apos;t seem to be related to the problem. Is that intentional or did it creep in as part of another change? One other minor nit, there was a spot where the patch went beyond 80 characters, no big deal but it is something to keep an eye on.&lt;/p&gt;

&lt;p&gt;Otherwise the patch looks good and I&apos;d be happy to include it in 1.0.4 when the issues listed above are resolved.&lt;/p&gt;
</comment>
                            <comment id="12693423" author="milosz" created="Sat, 28 Mar 2009 10:31:49 +0000"  >&lt;p&gt;Another minor editorial remark is we tend to omit braces in one-line &quot;if&quot; statements.&lt;/p&gt;</comment>
                            <comment id="12693844" author="bjreed" created="Mon, 30 Mar 2009 18:04:34 +0100"  >&lt;p&gt;trunk patch contains document change and code change.  Does not alter the escape character default behavior for Oracle.&lt;/p&gt;</comment>
                            <comment id="12694573" author="mikedd" created="Wed, 1 Apr 2009 16:16:20 +0100"  >&lt;p&gt;Thanks for the patch(es) B.J. and Jody. I&apos;ve committed the changes. &lt;/p&gt;</comment>
                            <comment id="12695082" author="milosz" created="Thu, 2 Apr 2009 19:24:02 +0100"  >&lt;p&gt;I am afraid we have the problem with the patch applied to trunk.&lt;/p&gt;

&lt;p&gt;1. Building the manual fails with message: &apos;The id &quot;DBDictionary.SearchStringEscape&quot; already exists in this document.&apos; This is because of property description being doubled - it exists in generic database section and in Oracle. Should be in generic only.&lt;/p&gt;

&lt;p&gt;2. The DBDictionary.RequiresSearchStringEscapeForLike should be rather moved from Oracle section to generic one as this is a DBDictionary property.&lt;/p&gt;

&lt;p&gt;I did not check the health of branches.&lt;/p&gt;</comment>
                            <comment id="12695088" author="mikedd" created="Thu, 2 Apr 2009 19:46:14 +0100"  >&lt;p&gt;Same bug in the branches, sorry. Fix forthcoming. &lt;/p&gt;</comment>
                            <comment id="12695102" author="mikedd" created="Thu, 2 Apr 2009 20:30:16 +0100"  >&lt;p&gt;Fixes committed. Both properties are under the DBDictionary section. &lt;/p&gt;</comment>
                            <comment id="12695830" author="milosz" created="Sun, 5 Apr 2009 10:12:46 +0100"  >&lt;p&gt;Mike, I tried to build the manual in trunk and 1.3.x, now builds went fine. I also glanced the files affected in other branches and they looked good also.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12613027">OPENJPA-2282</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12416751">OPENJPA-976</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12404163" name="OPENJPA-975-trunk.patch" size="11836" author="bjreed" created="Mon, 30 Mar 2009 18:04:34 +0100"/>
                            <attachment id="12402403" name="OPENJPA-975c.patch" size="13089" author="bjreed" created="Tue, 17 Mar 2009 18:54:23 +0000"/>
                            <attachment id="12403839" name="OPENJPA-975c_1.0.x.patch" size="13560" author="mikedd" created="Fri, 27 Mar 2009 20:19:28 +0000"/>
                            <attachment id="12402667" name="OPENJPA-975c_1.0.x.patch" size="14514" author="fyrewyld" created="Fri, 20 Mar 2009 14:29:19 +0000"/>
                            <attachment id="12402047" name="OPENJPA-975doc.patch" size="2008" author="bjreed" created="Thu, 12 Mar 2009 14:33:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Mar 2009 11:10:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyezfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>