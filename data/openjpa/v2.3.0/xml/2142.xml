<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:35:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2142/OPENJPA-2142.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2142] Merge of a new object does not handle Entity Id field</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2142</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;When a merge is done on a new object with an Id that contains an Entity, the following exception occurs:&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-2.2.1-SNAPSHOT-r422266:1292578 nonfatal user error&amp;gt; org.apache.openjpa.persistence.InvalidStateException: Attempt to change a primary key field of an instance that already has a final object id.  Only new, unflushed instances whose id you have not retrieved can have their primary keys changed.&lt;br/&gt;
FailedObject: hat.entities.Child@38d138d1&lt;br/&gt;
	at org.apache.openjpa.kernel.StateManagerImpl.assertNoPrimaryKeyChange(StateManagerImpl.java:2108)&lt;br/&gt;
	at org.apache.openjpa.kernel.StateManagerImpl.settingObjectField(StateManagerImpl.java:2043)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachStrategy.attachField(AttachStrategy.java:236)&lt;br/&gt;
	at org.apache.openjpa.kernel.VersionAttachStrategy.attach(VersionAttachStrategy.java:155)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachManager.attach(AttachManager.java:252)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachStrategy.attachCollection(AttachStrategy.java:370)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachStrategy.replaceList(AttachStrategy.java:431)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachStrategy.attachField(AttachStrategy.java:255)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachManager.handleCascade(AttachManager.java:267)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachManager.attach(AttachManager.java:241)&lt;br/&gt;
	at org.apache.openjpa.kernel.AttachManager.attach(AttachManager.java:105)&lt;br/&gt;
	at org.apache.openjpa.kernel.BrokerImpl.attach(BrokerImpl.java:3474)&lt;br/&gt;
	at org.apache.openjpa.kernel.DelegatingBroker.attach(DelegatingBroker.java:1214)&lt;br/&gt;
	at org.apache.openjpa.persistence.EntityManagerImpl.merge(EntityManagerImpl.java:878)&lt;br/&gt;
	...&lt;/p&gt;

&lt;p&gt;During the merge, a copy is made of the original object, with a copy of the key fields. But, if a key field is an Entity, it is not copied, causing this exception in later processing. The fix is to attach this field immediately after the original object is copied.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544008">OPENJPA-2142</key>
            <summary>Merge of a new object does not handle Entity Id field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dianner">Dianne Richards</assignee>
                                    <reporter username="dianner">Dianne Richards</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Feb 2012 15:44:24 +0000</created>
                <updated>Tue, 8 May 2012 15:26:05 +0100</updated>
                            <resolved>Tue, 8 May 2012 15:25:49 +0100</resolved>
                                    <version>2.2.1</version>
                    <version>2.3.0</version>
                                    <fixVersion>2.2.1</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13261662" author="dianner" created="Wed, 25 Apr 2012 15:15:15 +0100"  >&lt;p&gt;Reopen to commit changes for earlier releases&lt;/p&gt;</comment>
                            <comment id="13261696" author="dianner" created="Wed, 25 Apr 2012 16:05:43 +0100"  >&lt;p&gt;In 2.0.x there is a 2nd problem in this merge scenario. BrokerImpl.getObjectId() returns null when the StateManager in the pc object is null. This is fixed in subsequent releases by calling ApplicationIds.create(). This fix will be backported to 2.0.x in this JIRA to complete the merge fix.&lt;/p&gt;</comment>
                            <comment id="13261702" author="curtisr7" created="Wed, 25 Apr 2012 16:10:24 +0100"  >&lt;p&gt;Can you also port the testcases from trunk to 2.2.x ?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Apr 2012 15:10:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7pzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>289179</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>