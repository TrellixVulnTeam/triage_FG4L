<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:37:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-607/OPENJPA-607.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-607] Extraneous &quot;( )&quot; on DISTINCT, ALL, ANY results in  SQL syntax errors on some database systems</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-607</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;In testing various back-end database systems such as Sybase, Informix. there are cases where the extra pair of () resulted in SQL Syntax error:&lt;br/&gt;
For example,&lt;br/&gt;
1. in generating ALL, ANY subquery, there is extraneous pair of &quot;(  )&quot;  that are tolerated by most systems such as DB2, Oracle but not Sybase.&lt;br/&gt;
WHERE (t0.DEPT_DEPTNO = ANY ((SELECT t1.deptno FROM DeptBean t1 WHERE (t1.deptno = ? )))&lt;/p&gt;

&lt;p&gt;2.In the case of DISTINCT function, Informix reports syntax error when argument/s of the DISTINCT is/are parenthesized:&lt;br/&gt;
SELECT COUNT(DISTINCT (t1.name)) FROM EmpBean t1&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12396602">OPENJPA-607</key>
            <summary>Extraneous &quot;( )&quot; on DISTINCT, ALL, ANY results in  SQL syntax errors on some database systems</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fancy">Catalina Wei</assignee>
                                    <reporter username="fancy">Catalina Wei</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 May 2008 08:03:30 +0100</created>
                <updated>Tue, 9 Mar 2010 18:32:53 +0000</updated>
                            <resolved>Thu, 22 May 2008 16:58:20 +0100</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12598937" author="mikedd" created="Thu, 22 May 2008 09:02:15 +0100"  >&lt;p&gt;Hi Catalina,&lt;/p&gt;

&lt;p&gt;What&apos;s the benefit of leaving the parenthesis in? If they&apos;re truly extraneous I would think that the default would be to not use them unless they&apos;re needed. &lt;/p&gt;

&lt;p&gt;The code changes provided affect ALL, DISTINCT and ANY, but does the same problem occur with other UnaryOps? &lt;/p&gt;</comment>
                            <comment id="12599064" author="fancy" created="Thu, 22 May 2008 16:58:20 +0100"  >&lt;p&gt;This problem is fixed under r659027.&lt;/p&gt;</comment>
                            <comment id="12599422" author="fancy" created="Fri, 23 May 2008 17:40:01 +0100"  >&lt;p&gt;case 1. ALL and ANY :&lt;br/&gt;
apply to subquery only.  OpenJPA always pushdown subquery in enclosing parenthesis.&lt;br/&gt;
ALL or ANY operator puts additional pair of parenthesis.&lt;br/&gt;
The fix is to not putting in unneeded pair, because Sybase reports syntax&lt;br/&gt;
error for ANY or ALL subquery having the extra enclosing parenthesis.&lt;br/&gt;
case 2. Distinct function&lt;br/&gt;
first, do not confuse this DISTINCT function with SELECT DISTINCT.&lt;br/&gt;
SELECT DISTINCT will not got through the Distinct.class code.&lt;br/&gt;
The Distinct function is only associated with a COUNT function.&lt;br/&gt;
It is safe that given the fact  OpenJpa only pushdown  COUNT(DISTINCT one-item),&lt;br/&gt;
we can enclose one-item with or without parenthesis.&lt;br/&gt;
The fix is not to enclose one-time to get around syntax error reported by Informix.&lt;/p&gt;

&lt;p&gt;So far, I have verified the fix against DB2, Oracle, Sybase, SQLServer and Informix.&lt;/p&gt;

&lt;p&gt;Help needed to verify other back-end systems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 May 2008 08:02:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160923</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt61j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>