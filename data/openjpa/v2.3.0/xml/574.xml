<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:44:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-574/OPENJPA-574.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-574] Cached object in DataCache not evicted due to StatementBatching not reporting OptimisticException </title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-574</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;If  DataCache is enabled, and the default statement batching is active, there are cases that we fail to report OptimisticException. &lt;br/&gt;
Because of that, the cached objects were not get removed from the cache.&lt;/p&gt;

&lt;p&gt;We have testcases running with different backend and returns different updateCount value from batchExecute when update failed:&lt;br/&gt;
1. DB2/NT,  update count of 0 was returned &lt;br/&gt;
2. Oracle 10g,  update count of -2 was returned.&lt;/p&gt;

&lt;p&gt;The code in questioin is  in BatchingPreparedStatementManagerImpl.checkUpdateCount() method.&lt;/p&gt;

&lt;p&gt;We think the returned update count of  0 and -2 should report OptimisticException for UPDATE/DELETE SQL requests.&lt;br/&gt;
Current implemented code reports OptimisticException if update count of -3 is returned.&lt;br/&gt;
We don&apos;t know if any JDBC driver would return -3 for update/delete that did not qualify due to version value mismatch (in the case that the cache is out of sync with the database).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12394163">OPENJPA-574</key>
            <summary>Cached object in DataCache not evicted due to StatementBatching not reporting OptimisticException </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fancy">Catalina Wei</assignee>
                                    <reporter username="fancy">Catalina Wei</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Apr 2008 01:54:53 +0100</created>
                <updated>Tue, 9 Mar 2010 18:32:50 +0000</updated>
                            <resolved>Wed, 28 May 2008 20:59:00 +0100</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>jdbc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12595100" author="fancy" created="Thu, 8 May 2008 01:48:00 +0100"  >&lt;p&gt;fixed in r654337.&lt;/p&gt;</comment>
                            <comment id="12596642" author="fancy" created="Wed, 14 May 2008 07:19:31 +0100"  >&lt;p&gt;As more testing against various DB2 platforms and Oracle backends, problems uncovered in checkUpdateCount().&lt;/p&gt;</comment>
                            <comment id="12600589" author="fancy" created="Wed, 28 May 2008 20:59:00 +0100"  >&lt;p&gt;resolved for the problems uncovered so far.  &lt;br/&gt;
if  new problem surfaced, will open subtask under this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt213:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>