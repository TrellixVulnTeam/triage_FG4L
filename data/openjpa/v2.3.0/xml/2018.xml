<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:43:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2018/OPENJPA-2018.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2018] Cannot bind String[] to ParameterExpression for path.in(parameter)</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2018</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Given the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
User user = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; User(&lt;span class=&quot;code-quote&quot;&gt;&quot;Dave&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Matthews&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo@bar.de&quot;&lt;/span&gt;);
em.persist(user);
em.flush();

CriteriaBuilder builder = em.getCriteriaBuilder();

CriteriaQuery&amp;lt;User&amp;gt; criteria = builder.createQuery(User.class);
Root&amp;lt;User&amp;gt; root = criteria.from(User.class);
criteria.where(root.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;firstname&quot;&lt;/span&gt;).in(builder.parameter(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[].class)));

TypedQuery&amp;lt;User&amp;gt; query = em.createQuery(criteria);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ParameterExpression parameter : criteria.getParameters()) {
  query.setParameter(parameter, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;Dave&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Carter&quot;&lt;/span&gt;});
}

List&amp;lt;User&amp;gt; result = query.getResultList();
assertThat(result.isEmpty(), is(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get a&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;openjpa-2.0.0-r422266:935683 nonfatal user error&amp;gt; org.apache.openjpa.persistence.ArgumentException: The specified parameter of type &lt;span class=&quot;code-quote&quot;&gt;&quot;class [Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;&quot;&lt;/span&gt; is not a valid query parameter.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using &lt;tt&gt;Collection&lt;/tt&gt; as &lt;tt&gt;ParameterExpression&lt;/tt&gt; type and binding the parameters via &lt;tt&gt;Arrays.asList(...)&lt;/tt&gt; works fine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12510474">OPENJPA-2018</key>
            <summary>Cannot bind String[] to ParameterExpression for path.in(parameter)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="struberg">Mark Struberg</assignee>
                                    <reporter username="oliver.gierke">Oliver Gierke</reporter>
                        <labels>
                            <label>binding</label>
                            <label>criteria_api</label>
                            <label>jpa</label>
                    </labels>
                <created>Wed, 15 Jun 2011 18:08:54 +0100</created>
                <updated>Fri, 9 Jan 2015 17:20:26 +0000</updated>
                            <resolved>Mon, 28 Oct 2013 18:49:32 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>jpa</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13198966" author="oliver.gierke" created="Thu, 2 Feb 2012 17:07:25 +0000"  >&lt;p&gt;It does not seem to work with collections as well:&lt;/p&gt;

&lt;p&gt;CriteriaBuilder builder = em.getCriteriaBuilder();&lt;/p&gt;

&lt;p&gt;CriteriaQuery&amp;lt;User&amp;gt; criteriaQuery = builder.createQuery(User.class);&lt;br/&gt;
Root&amp;lt;User&amp;gt; root = criteriaQuery.from(User.class);&lt;br/&gt;
criteriaQuery.where(root.&amp;lt;Integer&amp;gt; get(&quot;id&quot;).in(builder.parameter(Collection.class)));&lt;/p&gt;

&lt;p&gt;TypedQuery&amp;lt;User&amp;gt; query = em.createQuery(criteriaQuery);&lt;br/&gt;
for (Parameter parameter : query.getParameters()) &lt;/p&gt;
{
	query.setParameter(parameter, Arrays.asList(1, 2));
}

&lt;p&gt;List&amp;lt;User&amp;gt; resultList = query.getResultList();&lt;/p&gt;

&lt;p&gt;This fails with:&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-2.0.0-r422266:935683 nonfatal user error&amp;gt; org.apache.openjpa.persistence.ArgumentException: Filter invalid. Cannot compare field id of type java.lang.Integer to value of type java.util.Collection. Numeric comparisons must be between numeric types only. To enable such comparisons for backwards-compatibility, add &quot;QuotedNumbersInQueries=true&quot; to the org.apache.openjpa.Compatibility setting in your configuration.&lt;/p&gt;

&lt;p&gt;Tried against 2.0 as well as 2.1. Don&apos;t quite get why OpenJPA tries to compare the integer against the collection instead of its values.&lt;/p&gt;</comment>
                            <comment id="13801793" author="oliver.gierke" created="Tue, 22 Oct 2013 14:17:33 +0100"  >&lt;p&gt;Any update here? This ticket is more than 2 years old and effectively a violation of the spec.&lt;/p&gt;</comment>
                            <comment id="13801906" author="romain.manni-bucau" created="Tue, 22 Oct 2013 16:21:33 +0100"  >&lt;p&gt;Hi Olivier,&lt;/p&gt;

&lt;p&gt;do you care attaching a sample with a failling test reproducing it? (seems you have it not that far)&lt;/p&gt;</comment>
                            <comment id="13801947" author="oliver.gierke" created="Tue, 22 Oct 2013 16:49:28 +0100"  >&lt;p&gt;Sample project to show binding fail with both arrays and a collection. Run mvn clean test to see it fail.&lt;/p&gt;</comment>
                            <comment id="13802643" author="romain.manni-bucau" created="Wed, 23 Oct 2013 07:37:31 +0100"  >&lt;p&gt;Proposed patch&lt;/p&gt;

&lt;p&gt;@Olivier: thank you for the sample, it really helps&lt;/p&gt;</comment>
                            <comment id="13803216" author="curtisr7" created="Wed, 23 Oct 2013 20:41:30 +0100"  >&lt;p&gt;My only comment on the patch is in regards to the unit test. For future reference, don&apos;t use openjpa.RuntimeUnenhancedClasses. That is a very buggy feature and we really should be discouraging usage of it. Also try to follow the test case pattern outlined by SingleEMTestCase / SingleEMFTestCase. This way you&apos;ll get enhancement for free, and the test will work across all of the different supported databases.&lt;/p&gt;</comment>
                            <comment id="13803339" author="romain.manni-bucau" created="Wed, 23 Oct 2013 22:12:28 +0100"  >&lt;p&gt;updating the test.&lt;/p&gt;

&lt;p&gt;Note: I kept supported for runtime unenhancedclass cause ATM the parent is not hacking classloaders to do enhancement in test (it relies on mvn AFAIK) so it is not easy to work on tests without it and for this test this is enough.&lt;/p&gt;</comment>
                            <comment id="13803352" author="curtisr7" created="Wed, 23 Oct 2013 22:23:25 +0100"  >&lt;p&gt;When developing/running unit tests in your IDE you can use the javaagent and when the tests are run with maven the Entities will be enhanced as part of the build. &lt;/p&gt;</comment>
                            <comment id="13805345" author="romain.manni-bucau" created="Fri, 25 Oct 2013 15:33:45 +0100"  >&lt;p&gt;Same patch with a better handling of array in all cases (was working with the sample of Olivier but not with the bind using a name/position case)&lt;/p&gt;</comment>
                            <comment id="13805364" author="jira-bot" created="Fri, 25 Oct 2013 16:13:11 +0100"  >&lt;p&gt;Commit 1535760 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535760&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535760&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; correctly handle select IN with arrays&lt;/p&gt;

&lt;p&gt;txs to rmannibucau for the patch.&lt;br/&gt;
Applied with minor changes&lt;/p&gt;</comment>
                            <comment id="13805367" author="romain.manni-bucau" created="Fri, 25 Oct 2013 16:17:40 +0100"  >&lt;p&gt;missingpatch.patch is a diff between what Mark applied and what was in my last patch to handle array too in all cases&lt;/p&gt;</comment>
                            <comment id="13805587" author="jira-bot" created="Fri, 25 Oct 2013 19:51:09 +0100"  >&lt;p&gt;Commit 1535816 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/branches/2.3.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535816&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535816&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt;  correctly handle select IN with arrays&lt;/p&gt;

&lt;p&gt;txs to rmannibucau for the patch.&lt;br/&gt;
Applied with minor changes&lt;/p&gt;</comment>
                            <comment id="13805593" author="curtisr7" created="Fri, 25 Oct 2013 20:00:51 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; &amp;#8211; It looks like you committed an earlier version of Romain&apos;s patch, but I still have a couple issues with it (the latest version).&lt;/p&gt;

&lt;p&gt;+            &quot;javax.persistence.provider&quot;, PersistenceProviderImpl.class.getName(),&lt;br/&gt;
+            &quot;openjpa.RuntimeUnenhancedClasses&quot;, &quot;supported&quot;,&lt;br/&gt;
+            &quot;openjpa.ConnectionURL&quot;, &quot;jdbc:derby:memory:openjpa2018;create=true&quot;,&lt;br/&gt;
+            &quot;openjpa.ConnectionDriverName&quot;, &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);&lt;br/&gt;
+        em = emf.createEntityManager();&lt;/p&gt;

&lt;p&gt;#1) RuntimeUnenhancedClasses is a feature we always tell users to stay away from. We should NEVER condone it&apos;s usage. It is buggy, and should have never made it into the codebase.&lt;/p&gt;

&lt;p&gt;#2) Don&apos;t specify database connection details in the test setup method. These properties will be passed in at runtime via Maven, or if running in Eclipse, via SystemProperties. &lt;/p&gt;

&lt;p&gt;#3) You shouldn&apos;t need to specify the persistence provider implementation class.&lt;/p&gt;
</comment>
                            <comment id="13805613" author="struberg" created="Fri, 25 Oct 2013 20:19:14 +0100"  >&lt;p&gt;agree, slipped through. Will fix it.&lt;/p&gt;</comment>
                            <comment id="13805628" author="jira-bot" created="Fri, 25 Oct 2013 20:40:32 +0100"  >&lt;p&gt;Commit 1535838 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535838&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535838&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; improve unit test setup&lt;/p&gt;</comment>
                            <comment id="13805633" author="jira-bot" created="Fri, 25 Oct 2013 20:45:08 +0100"  >&lt;p&gt;Commit 1535839 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/branches/2.3.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1535839&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1535839&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; improve unit test setup&lt;/p&gt;</comment>
                            <comment id="13806165" author="jira-bot" created="Sat, 26 Oct 2013 21:59:05 +0100"  >&lt;p&gt;Commit 1536036 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=allee8285&quot; class=&quot;user-hover&quot; rel=&quot;allee8285&quot;&gt;Albert Lee&lt;/a&gt; in branch &apos;openjpa/branches/2.3.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1536036&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1536036&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; add svn:eol-style=native property&lt;/p&gt;</comment>
                            <comment id="13806300" author="struberg" created="Sun, 27 Oct 2013 09:53:26 +0000"  >&lt;p&gt;Romain, your latest patch uses  Literal.TYPE_COLLECTION for arrays. &lt;br/&gt;
I fear this is not a valid approach as the other direction also is used in our codebase.&lt;/p&gt;

&lt;p&gt;e.g. in criteria.Expressions line 1486 (toKernelExpression) there is still &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
.. &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (((Literal)val2).getParseType() == Literal.TYPE_COLLECTION) {
     Collection coll = (Collection)((Literal)val2).getValue();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Of course we can just do n instanceof but I think this is kind of dirty. I wonder whether we should introduce a dedicated Literal.TYPE_ARRAY to make the code cleaner.&lt;/p&gt;</comment>
                            <comment id="13806832" author="struberg" created="Mon, 28 Oct 2013 15:05:42 +0000"  >&lt;p&gt;also add a few tests for JPQL to make sure we broke nothing. &lt;br/&gt;
Wonder if this did work in the past ...&lt;/p&gt;</comment>
                            <comment id="13806982" author="jira-bot" created="Mon, 28 Oct 2013 17:43:23 +0000"  >&lt;p&gt;Commit 1536439 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1536439&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1536439&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; fix handling of Arrays in Select IN statements&lt;/p&gt;</comment>
                            <comment id="13807016" author="jira-bot" created="Mon, 28 Oct 2013 17:59:50 +0000"  >&lt;p&gt;Commit 1536453 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/branches/2.3.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1536453&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1536453&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; fix handling of Arrays in Select IN statements&lt;/p&gt;</comment>
                            <comment id="13807042" author="struberg" created="Mon, 28 Oct 2013 18:16:17 +0000"  >&lt;p&gt;would be happy about a review. The latest sources from trunk and 2.3.x should both fix the issues.&lt;/p&gt;</comment>
                            <comment id="13924055" author="oliver.gierke" created="Fri, 7 Mar 2014 17:05:21 +0000"  >&lt;p&gt;This still seems to be broken for in 2.3.0 in case you refer to the parameter by name. This works:&lt;/p&gt;

&lt;p&gt;CriteriaBuilder builder = em.getCriteriaBuilder();&lt;br/&gt;
CriteriaQuery&amp;lt;User&amp;gt; criteriaQuery = builder.createQuery(User.class);&lt;br/&gt;
Root&amp;lt;User&amp;gt; root = criteriaQuery.from(User.class);&lt;br/&gt;
ParameterExpression&amp;lt;Collection&amp;gt; parameter = builder.parameter(Collection.class);&lt;br/&gt;
criteriaQuery.where(root.&amp;lt;Integer&amp;gt; get(&quot;id&quot;).in(parameter));&lt;br/&gt;
TypedQuery&amp;lt;User&amp;gt; query = em.createQuery(criteriaQuery);&lt;br/&gt;
query.setParameter(parameter, Arrays.asList(1, 2));&lt;br/&gt;
List&amp;lt;User&amp;gt; resultList = query.getResultList();&lt;/p&gt;

&lt;p&gt;this doesn&apos;t:&lt;/p&gt;

&lt;p&gt;CriteriaBuilder builder = em.getCriteriaBuilder();&lt;br/&gt;
CriteriaQuery&amp;lt;User&amp;gt; criteriaQuery = builder.createQuery(User.class);&lt;br/&gt;
Root&amp;lt;User&amp;gt; root = criteriaQuery.from(User.class);&lt;br/&gt;
criteriaQuery.where(root.&amp;lt;Integer&amp;gt; get(&quot;id&quot;).in(builder.parameter(Collection.class, &quot;ids&quot;)));&lt;br/&gt;
TypedQuery&amp;lt;User&amp;gt; query = em.createQuery(criteriaQuery);&lt;br/&gt;
query.setParameter(&quot;ids&quot;, Arrays.asList(1, 2));&lt;br/&gt;
List&amp;lt;User&amp;gt; resultList = query.getResultList();&lt;/p&gt;

&lt;p&gt;The latter again fails with the exception:&lt;/p&gt;

&lt;p&gt;Filter invalid. Cannot compare field id of type java.lang.Integer to value of type java.util.List. Numeric comparisons must be between numeric types only. To enable such comparisons for backwards-compatibility, add &quot;QuotedNumbersInQueries=true&quot; to the org.apache.openjpa.Compatibility setting in your configuration.; nested exception is &amp;lt;openjpa-2.3.0-r422266:1540826 nonfatal user error&amp;gt; org.apache.openjpa.persistence.ArgumentException: Filter invalid. Cannot compare field id of type java.lang.Integer to value of type java.util.Collection. Numeric comparisons must be between numeric types only. To enable such comparisons for backwards-compatibility, add &quot;QuotedNumbersInQueries=true&quot; to the org.apache.openjpa.Compatibility setting in your configuration.&lt;/p&gt;</comment>
                            <comment id="14271557" author="jira-bot" created="Fri, 9 Jan 2015 17:20:26 +0000"  >&lt;p&gt;Commit 1650604 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=struberg&quot; class=&quot;user-hover&quot; rel=&quot;struberg&quot;&gt;Mark Struberg&lt;/a&gt; in branch &apos;openjpa/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1650604&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1650604&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-2018&quot; title=&quot;Cannot bind String[] to ParameterExpression for path.in(parameter)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-2018&quot;&gt;&lt;del&gt;OPENJPA-2018&lt;/del&gt;&lt;/a&gt; improve readability&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12609921" name="OPENJPA-2018-test-update.patch" size="6494" author="romain.manni-bucau" created="Wed, 23 Oct 2013 22:12:28 +0100"/>
                            <attachment id="12610572" name="OPENJPA-2018-test2.patch" size="4561" author="struberg" created="Mon, 28 Oct 2013 15:05:42 +0000"/>
                            <attachment id="12610323" name="OPENJPA-2018-with-array.patch" size="21715" author="romain.manni-bucau" created="Fri, 25 Oct 2013 15:33:45 +0100"/>
                            <attachment id="12609811" name="OPENJPA-2018.patch" size="15744" author="romain.manni-bucau" created="Wed, 23 Oct 2013 07:37:31 +0100"/>
                            <attachment id="12610328" name="missingpatch.patch" size="7012" author="romain.manni-bucau" created="Fri, 25 Oct 2013 16:17:40 +0100"/>
                            <attachment id="12609672" name="openjpa-2018.zip" size="6050" author="oliver.gierke" created="Tue, 22 Oct 2013 16:49:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Oct 2013 15:21:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7pbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>289074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>