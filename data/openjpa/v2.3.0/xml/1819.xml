<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:32:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1819/OPENJPA-1819.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1819] ORDER BY will append additional column to the SELECT clause which may potentialy cause ORA-00979 error</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1819</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Assuming entity Person and entity Exam has one-to-many association, the following JPQL statement:&lt;br/&gt;
SELECT p.id r1, p.name r2, sum(e.score) r3 FROM Exam e LEFT JOIN e.person p GROUP BY p.id, p.name ORDER BY p.id&lt;/p&gt;

&lt;p&gt;will produce the following SQL, which is not executable if the underlining database is Oracle 9.2:&lt;br/&gt;
SELECT t1.id, t1.name, SUM(t0.score) AS r3, t0.person FROM exams t0, persons t1 WHERE t0.person = t1.id&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/add.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; GROUP BY t1.id, t1.name ORDER BY t0.person ASC&lt;/p&gt;

&lt;p&gt;The additional column &quot;t0.person&quot; will cause error ORA-00979: not a GROUP BY expression.&lt;/p&gt;

&lt;p&gt;The correct SQL should be:&lt;br/&gt;
SELECT t1.id, t1.name, SUM(t0.score) AS r3 FROM exams t0, persons t1 WHERE t0.person = t1.id&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/add.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; GROUP BY t1.id, t1.name ORDER BY t1.id ASC&lt;/p&gt;</description>
                <environment>OpenJPA 2.0&lt;br/&gt;
WebSphere 6.1&lt;br/&gt;
Oracle 9.2</environment>
        <key id="12475495">OPENJPA-1819</key>
            <summary>ORDER BY will append additional column to the SELECT clause which may potentialy cause ORA-00979 error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="azuo_lee">Azuo Lee</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Sep 2010 10:57:24 +0100</created>
                <updated>Fri, 18 Oct 2013 16:08:15 +0100</updated>
                            <resolved>Fri, 18 Oct 2013 16:08:15 +0100</resolved>
                                    <version>2.0.1</version>
                    <version>2.0.2</version>
                                    <fixVersion>2.1.0</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12916529" author="faywang" created="Thu, 30 Sep 2010 17:02:18 +0100"  >&lt;p&gt;This apparently is not specific to Oracle. When running against DB2, the generated SQL is:&lt;/p&gt;

&lt;p&gt;SELECT t1.id, t1.name, SUM(t0.score) AS r3, t0.person &lt;br/&gt;
FROM Exam t0 &lt;br/&gt;
LEFT OUTER JOIN Person t1 ON t0.PERSON_ID = t1.id &lt;br/&gt;
GROUP BY t1.id, t1.name ORDER BY t0.person ASC &lt;/p&gt;

&lt;p&gt;and DB2 throws the following exception:&lt;br/&gt;
com.ibm.db2.jcc.am.ro: DB2 SQL Error: SQLCODE=-119, SQLSTATE=42803, SQLERRMC=person, DRIVER=3.58.82&lt;/p&gt;</comment>
                            <comment id="12918980" author="azuo_lee" created="Thu, 7 Oct 2010 18:22:34 +0100"  >&lt;p&gt;Fixed in 2.1.0-20101001.064809-70.&lt;/p&gt;</comment>
                            <comment id="12981355" author="mikedd" created="Thu, 13 Jan 2011 16:45:39 +0000"  >&lt;p&gt;Closing issue which has been resolved for some time. If you believe the issue is not resolved please reopen or open a new issue. &lt;/p&gt;</comment>
                            <comment id="13048627" author="azuo_lee" created="Mon, 13 Jun 2011 17:19:59 +0100"  >&lt;p&gt;I&apos;m afraid the issure is not fixed in 2.0.x versions, but i have to use OpenJPA with websphere 6.1 which does not support 2.1.x versions.&lt;/p&gt;</comment>
                            <comment id="13055350" author="azuo_lee" created="Mon, 27 Jun 2011 07:14:24 +0100"  >&lt;p&gt;Could any ASF user please copy the code that fixes this issure from trunk to branch 2.0.x ?&lt;/p&gt;</comment>
                            <comment id="13799168" author="struberg" created="Fri, 18 Oct 2013 16:08:15 +0100"  >&lt;p&gt;This has been fixed in trunk already since quite some time.&lt;/p&gt;

&lt;p&gt;Azuo, if you still have this problem in the old WebSphere version you reported it for, then I suggest creating a PMR for it and let IBM deal with it (with a pointer to this JIRA). &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12456026" name="OPENJPA-1819.patch" size="786" author="faywang" created="Thu, 30 Sep 2010 17:48:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Sep 2010 16:02:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7omn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>