<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:35:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-2235/OPENJPA-2235.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-2235] &quot;READ_UNCOMMITTED&quot; setting for the fetch plan isolation level is ignored in DB2Dictionary</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-2235</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;When user set query hint as shown below for db2, no &quot;with UR&quot; clause append to the query. The setting is ignored.&lt;br/&gt;
query.setHint(&quot;openjpa.FetchPlan.Isolation&quot;, &quot;READ_UNCOMMITTED&quot;);&lt;/p&gt;

&lt;p&gt;Uncommitted read is very risky and should be avoid if it is possible. JPA specification requires a minimum of read-committed isolation to ensure no &quot;dirty read&quot; and &quot;non-repeatible read&quot; can occur. Use of read-uncommitted isolation may cause data integrity problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12599487">OPENJPA-2235</key>
            <summary>&quot;READ_UNCOMMITTED&quot; setting for the fetch plan isolation level is ignored in DB2Dictionary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="helenxu">Helen Xu</assignee>
                                    <reporter username="helenxu">Helen Xu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jul 2012 16:55:22 +0100</created>
                <updated>Wed, 10 Apr 2013 17:04:41 +0100</updated>
                            <resolved>Wed, 10 Apr 2013 17:04:36 +0100</resolved>
                                    <version>2.1.1</version>
                    <version>2.2.0</version>
                    <version>2.3.0</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.2.2</fixVersion>
                    <fixVersion>2.2.1.1</fixVersion>
                    <fixVersion>2.3.0</fixVersion>
                                    <component>performance</component>
                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13418814" author="helenxu" created="Fri, 20 Jul 2012 00:54:18 +0100"  >&lt;p&gt;Fix and unit test attached.&lt;/p&gt;</comment>
                            <comment id="13421725" author="kwsutter" created="Tue, 24 Jul 2012 21:09:33 +0100"  >&lt;p&gt;Helen,&lt;br/&gt;
Thanks for taking a look at this jira and providing a patch.  Based on the initial problem description, we&apos;re only concerned with the openjpa.FetchPlan.Isolation hint getting set to UR, right?  But, your code patch would also work if the openjpa.jdbc.TransactionIsolation property is set.  At least that&apos;s what I get from this conditional:&lt;/p&gt;

&lt;p&gt;         if ( isolationLevel == Connection.TRANSACTION_READ_UNCOMMITTED ) {&lt;/p&gt;

&lt;p&gt;and isolation level is set via these statements earlier in this method:&lt;/p&gt;

&lt;p&gt;        if (fetch != null &amp;amp;&amp;amp; fetch.getIsolation() != -1)&lt;br/&gt;
            isolationLevel = fetch.getIsolation();&lt;br/&gt;
        else&lt;br/&gt;
            isolationLevel = conf.getTransactionIsolationConstant();&lt;/p&gt;

&lt;p&gt;So, if we&apos;re looking to support UR for both the FetchPlan hint and the TransactionIsolation property, then your patch looks good.  But, if we&apos;re trying to fix just the FetchPlan hint, then the patch might be too broad.&lt;/p&gt;</comment>
                            <comment id="13423239" author="helenxu" created="Thu, 26 Jul 2012 18:04:06 +0100"  >&lt;p&gt;good catch. Thanks&lt;/p&gt;

&lt;p&gt;we should only check the isolation hint. Modified the code for that. Attached a new patch.&lt;/p&gt;</comment>
                            <comment id="13423920" author="kwsutter" created="Fri, 27 Jul 2012 16:18:32 +0100"  >&lt;p&gt;The code patch looks clean.  I would suggest a few more comments in the header block for this method...  Since we&apos;re kind of extending the use of the getForUpdateClause() method to only do the &quot;WITH UR&quot; clause if isForUpdate parameter is false, it would be good to explain that.  Either that, or we should consider breaking off these two aspects into separate methods.  Not sure of the ripple effect though with this type of change.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13437977" author="helenxu" created="Mon, 20 Aug 2012 17:17:12 +0100"  >&lt;p&gt;We&apos;ll have to change the interface from the abstract class and all the subclasses if we want to break the function. It is kind of risky.&lt;/p&gt;

&lt;p&gt;I just added a bit more comment to the method to indicate it also handle the UR hint.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12541605" name="OPENJPA-2235.patch" size="4229" author="helenxu" created="Mon, 20 Aug 2012 17:18:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jul 2012 20:09:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxus1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>