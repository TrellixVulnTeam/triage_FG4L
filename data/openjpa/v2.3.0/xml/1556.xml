<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:33:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1556/OPENJPA-1556.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1556] Exception thrown on first use of @Strategy in @Embeddable classes</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1556</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;I have an entity (SimpleEntity) which references an ElementCollection (ChildOne.class).  There is a @Strategy annotation on a field within the embeddable class.  The first time a query is built for the entity, an exception is thrown:&lt;/p&gt;

&lt;p&gt;&amp;lt;openjpa-2.0.0-beta2-r422266:915978 fatal user error&amp;gt; org.apache.openjpa.persistence.ArgumentException: Attempt to map &quot;com.example.ChildOne.address&quot; failed: the owning entity is not mapped.&lt;br/&gt;
	at org.apache.openjpa.jdbc.meta.MappingInfo.assertTable(MappingInfo.java:628)&lt;br/&gt;
	at org.apache.openjpa.jdbc.meta.MappingInfo.createColumns(MappingInfo.java:558)&lt;br/&gt;
	at org.apache.openjpa.jdbc.meta.ValueMappingInfo.getColumns(ValueMappingInfo.java:178)&lt;br/&gt;
	at org.apache.openjpa.jdbc.meta.strats.HandlerStrategies.map(HandlerStrategies.java:65)&lt;br/&gt;
	at org.apache.openjpa.jdbc.meta.strats.HandlerFieldStrategy.map(HandlerFieldStrategy.java:81)&lt;br/&gt;
	at org.apache.openjpa.jdbc.meta.FieldMapping.setStrategy(FieldMapping.java:146)&lt;br/&gt;
	... etc. ...&lt;/p&gt;

&lt;p&gt;If the @Strategy is not present, everything works fine.  If the exception is intentionally triggered, subsequent use is successful.&lt;/p&gt;

&lt;p&gt;Google suggests that this behavior has been seen before &amp;lt;&lt;a href=&quot;http://marc.info/?l=geronimo-user&amp;amp;m=121545735018232&amp;amp;w=2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://marc.info/?l=geronimo-user&amp;amp;m=121545735018232&amp;amp;w=2&lt;/a&gt;&amp;gt; and &amp;lt;&lt;a href=&quot;http://issues.apache.org/jira/browse/OPENJPA-524&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/OPENJPA-524&lt;/a&gt;&amp;gt;, though there appears to have been no resolution in either case and this differs by use of @ElementCollection.&lt;/p&gt;</description>
                <environment>Mac OS X 10.6, Maven 2.2.x, Spring 3.0</environment>
        <key id="12458565">OPENJPA-1556</key>
            <summary>Exception thrown on first use of @Strategy in @Embeddable classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="faywang">Fay Wang</assignee>
                                    <reporter username="no1uno">Jerry Carter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Mar 2010 18:20:13 +0000</created>
                <updated>Tue, 23 Mar 2010 18:33:55 +0000</updated>
                            <resolved>Wed, 10 Mar 2010 22:43:03 +0000</resolved>
                                    <version>2.0.0-beta2</version>
                                    <fixVersion>2.0.0-beta3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12843252" author="no1uno" created="Tue, 9 Mar 2010 19:15:35 +0000"  >&lt;p&gt;The attached Eclipse project uses Maven for the builds.  Import into Eclipse and build as Maven install.  There will be an exception thrown from TestSimpleDAO::testCreateEntity().  Readding the commented lines as the start of the function will cause the exception to be caught and ignored on the first pass with all subsequent interactions succeeding.&lt;/p&gt;</comment>
                            <comment id="12844080" author="oringel" created="Thu, 11 Mar 2010 14:33:35 +0000"  >&lt;p&gt;the same exception occurs if you add the @Strategy annotation on a field of an @Embeddable or @MappedSuperclass (not part of an @ElementCollection). &lt;br/&gt;
The attached patch does not fix the problem. &lt;/p&gt;

&lt;p&gt;To be more concrete. I try to change the default enum handling using an own EnumValueHandler. The Handler is working if you add&lt;br/&gt;
the Strategy to the @Entity. Adding the field to a @MappedSuperclass leads to the above exception.&lt;/p&gt;

&lt;p&gt;@javax.persistence.Entity&lt;br/&gt;
@javax.persistence.Table(name = &quot;TESTENTITY&quot;)&lt;br/&gt;
public class TestEntity extends TestEntityBase &lt;/p&gt;
{
...
}

&lt;p&gt;@MappedSuperclass&lt;br/&gt;
public abstract class TestEntityBase &lt;/p&gt;
{
    @Column(name = &quot;TESTENUMSIMPLE&quot;)
    @Enumerated(javax.persistence.EnumType.STRING)
    @Strategy(&quot;jpa.test.domain.EnumStrategy&quot;)
    private TestEnumSimple testEnumSimple;
...
}

&lt;p&gt;You get the same Exception if you add the @Strategy to a @Embeddable and I also tried a own StringValueHandler with the same result.&lt;/p&gt;</comment>
                            <comment id="12844532" author="no1uno" created="Fri, 12 Mar 2010 15:03:37 +0000"  >&lt;p&gt;Oliver: Interesting.  Not sure what the protocol is for this project, but you might open a new JIRA report and link back to this one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12459020">OPENJPA-1570</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12459180">OPENJPA-1574</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12438343" name="OPENJPA-1556.patch" size="1918" author="faywang" created="Tue, 9 Mar 2010 23:44:31 +0000"/>
                            <attachment id="12438310" name="openjpa1556.tar.zip" size="8614" author="no1uno" created="Tue, 9 Mar 2010 19:15:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Mar 2010 14:33:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyt6e7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>