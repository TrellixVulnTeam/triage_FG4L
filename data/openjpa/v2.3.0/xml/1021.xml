<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:37:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1021/OPENJPA-1021.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1021] PersistentMap MapKey applied to a relation field as key for a java.util.Map</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1021</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;I&apos;ve tried to use a relation field as key for a java.util.Map, using a PersistentMap &amp;amp; MapKey annotation.&lt;/p&gt;

&lt;p&gt;Ideally, such a mapping should be supported of course. For an example real-world use case, see the test case I&apos;ll attach (it&apos;s the same that I posted to the list last week).&lt;/p&gt;

&lt;p&gt;According to Fay Wang on users@openjpa.apache.org, this is not possible today (v1.2.0), see &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/openjpa-users/200904.mbox/%3C188945.43609.qm@web55901.mail.re3.yahoo.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/openjpa-users/200904.mbox/%3C188945.43609.qm@web55901.mail.re3.yahoo.com%3E&lt;/a&gt; (the short email exchange which lead to the creation of this JIRA).&lt;/p&gt;

&lt;p&gt;According to Pinaki Poddar on &lt;a href=&quot;http://n2.nabble.com/Map%3CClassA,ClassB%3E-problem-td534546.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://n2.nabble.com/Map%3CClassA,ClassB%3E-problem-td534546.html&lt;/a&gt; this should work. Either way, the current error message (&quot;Map field ...  is attempting to use a map table, but its key is mapped by another field.  Use an inverse key or join table mapping.&quot;) is unclear. &lt;/p&gt;

&lt;p&gt;At the very least, the documentation manual should clearly say that this is explicitly not supported, or include an example if it is, and/or a clear error message should be printed by the run-time. Ideally it should be a working and documenting mapping though...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422109">OPENJPA-1021</key>
            <summary>PersistentMap MapKey applied to a relation field as key for a java.util.Map</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vorburger">Michael Vorburger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Apr 2009 13:06:25 +0100</created>
                <updated>Mon, 6 Apr 2009 17:40:38 +0100</updated>
                                            <version>1.2.0</version>
                                                    <component>jpa</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12696054" author="vorburger" created="Mon, 6 Apr 2009 13:09:10 +0100"  >&lt;p&gt;Test case demonstrating the &quot;Map field ...  is attempting to use a map table, but its key is mapped by another field.  Use an inverse key or join table mapping.&quot; problem when using a relation field as key for a java.util.Map, using a PersistentMap &amp;amp; MapKey annotation.&lt;/p&gt;</comment>
                            <comment id="12696167" author="faywang" created="Mon, 6 Apr 2009 17:40:07 +0100"  >&lt;p&gt;This patch allows MapKey annotation to be applied to a relation field of the map value.&lt;/p&gt;</comment>
                            <comment id="12696168" author="faywang" created="Mon, 6 Apr 2009 17:40:38 +0100"  >&lt;p&gt;A Junit test case is attached.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12404749" name="OPENJPA-1021-testcase.patch" size="34148" author="faywang" created="Mon, 6 Apr 2009 17:40:37 +0100"/>
                            <attachment id="12404748" name="OPENJPA-1021.patch" size="930" author="faywang" created="Mon, 6 Apr 2009 17:40:07 +0100"/>
                            <attachment id="12404714" name="Test-OpenJPAPersistentMap.zip" size="80515" author="vorburger" created="Mon, 6 Apr 2009 13:09:10 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 Apr 2009 16:40:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7mdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>288594</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>