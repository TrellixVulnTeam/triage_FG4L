<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:43:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-946/OPENJPA-946.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-946] Oracle create table(s) exceptions</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-946</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description></description>
                <environment></environment>
        <key id="12415877">OPENJPA-946</key>
            <summary>Oracle create table(s) exceptions</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12414167">OPENJPA-904</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drwoods">Donald Woods</assignee>
                                    <reporter username="mcconne">Tim McConnell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Mar 2009 16:32:04 +0000</created>
                <updated>Tue, 9 Mar 2010 18:31:10 +0000</updated>
                            <resolved>Tue, 23 Jun 2009 17:21:09 +0100</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0-M3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12677821" author="mcconne" created="Sun, 1 Mar 2009 16:32:49 +0000"  >&lt;p&gt;Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: ORA-00904: : invalid identifier&lt;br/&gt;
 &lt;/p&gt;
{stmnt 12673179 CREATE TABLE PROX_PC (id NUMBER NOT NULL, date DATE, name VARCHAR2(255), sqlDate DATE, timestamp TIMESTAMP, PRIMARY KEY (id))}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;code=904, state=42000&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="12679488" author="mcconne" created="Fri, 6 Mar 2009 04:21:48 +0000"  >&lt;p&gt;The set of reserved words for the Oracle dictionary is incomplete which is causing this testcase to fail. In this particular testcase a column is named &quot;date&quot;, which is reserved but not included in the reservedWordSet. This patch update the Oracle dictionary with all the reserved words.&lt;/p&gt;</comment>
                            <comment id="12679547" author="milosz" created="Fri, 6 Mar 2009 10:00:09 +0000"  >&lt;p&gt;Tim, have you checked the patch resolves the issue? I am afraid adding a DATE to Oracle will not help because:&lt;/p&gt;

&lt;p&gt;1. The file sql-keywords.rsrc already contains the DATE word. This file contains reserved words defined by SQL spec and its contents are merged with database-specific reserved words.&lt;/p&gt;

&lt;p&gt;2. Recently I hit a similar problem with Firebird database: many of our tests use entities with a property &quot;value&quot; and VALUE is an SQL reserved word (exists in the sql-keywords.rsrc) and also a Firebird reserved word.&lt;/p&gt;

&lt;p&gt;Maybe we are not checking column names against reserved words or merging SQL words with database-specific ones is broken.&lt;/p&gt;</comment>
                            <comment id="12679658" author="mcconne" created="Fri, 6 Mar 2009 17:31:31 +0000"  >&lt;p&gt;Hi Milosz, I did not know that. Thanks for pointing it out......&lt;/p&gt;</comment>
                            <comment id="12707212" author="mcconne" created="Fri, 8 May 2009 03:34:31 +0100"  >&lt;p&gt;Hi Ravi, Please try this patch. It will fix your Oracle &quot;Create Table&quot; errors when reserved keywords are used for column names. Please let me know how it goes. Thanks much&lt;/p&gt;</comment>
                            <comment id="12708077" author="rpalache" created="Mon, 11 May 2009 16:28:30 +0100"  >&lt;p&gt;Hi Tim,&lt;/p&gt;

&lt;p&gt;I applied the patch in trunk version and &lt;/p&gt;

&lt;p&gt;I am getting a compilation error saying:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD FAILURE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Compilation failure&lt;br/&gt;
D:\openJPAsrc\openjpa_trunk\trunk\openjpa-persistence-jdbc\src\test\java\org\apache\openjpa\persiste&lt;br/&gt;
nce\dynamicschema\TestDynamicSchemas.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;195,28&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
symbol  : method getReservedWords()&lt;br/&gt;
location: class org.apache.openjpa.jdbc.sql.DBDictionary&lt;/p&gt;

&lt;p&gt;D:\openJPAsrc\openjpa_trunk\trunk\openjpa-persistence-jdbc\src\test\java\org\apache\openjpa\persiste&lt;br/&gt;
nce\dynamicschema\TestDynamicSchemas.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;195,28&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
symbol  : method getReservedWords()&lt;br/&gt;
location: class org.apache.openjpa.jdbc.sql.DBDictionary&lt;/p&gt;


&lt;p&gt;Also, the fix only contains files in test cases. &lt;br/&gt;
So, will this fix work for an openJPA sample (outside test suites)  that uses reserved words.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Ravi.&lt;/p&gt;</comment>
                            <comment id="12708693" author="mcconne" created="Wed, 13 May 2009 00:58:42 +0100"  >&lt;p&gt;Hi Ravi, sorry about the first patch. Please discard it and try this patch. Let me know how it goes. Thanks much&lt;/p&gt;</comment>
                            <comment id="12708697" author="mcconne" created="Wed, 13 May 2009 01:15:43 +0100"  >&lt;p&gt;This patch contains a JUnit testcase, which may or may not matter to Ravi, but should be the patch that gets committed.....&lt;/p&gt;</comment>
                            <comment id="12708885" author="rpalache" created="Wed, 13 May 2009 12:11:06 +0100"  >&lt;p&gt;Thanks for the patch Tim.&lt;/p&gt;

&lt;p&gt;It worked fine for me.&lt;br/&gt;
I was trying to run TestEJBState which is failing because of this error.&lt;br/&gt;
After applying your patch I no more see this issue.&lt;/p&gt;

&lt;p&gt;I am getting a new exception, ORA-02275(different from above), so I will open a new JIRA for this.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Ravi.&lt;/p&gt;</comment>
                            <comment id="12708932" author="mikedd" created="Wed, 13 May 2009 15:08:21 +0100"  >&lt;p&gt;Some comments on the patch.&lt;/p&gt;

&lt;p&gt;The method name getReservedColumnNames() is misleading. It&apos;s really returning the the set of reserved words - reserved words that can be used as column names. Renaming to getValidColumnNames() makes more sense to me. Javadoc would also help here - I had to go back to the declaration of the instance variable to figure out why the method was correct. &lt;/p&gt;

&lt;p&gt;In addition this method recreates the list each time it&apos;s invoked - it&apos;d be better to either cache the list after the first invocation or create the set when the dictionary is initialized. &lt;/p&gt;

&lt;p&gt;I&apos;m not sure I have a good solution at hand, but it looks like a lot of the dictionaries reuse the same set of allowable column names. It&apos;d be nice if we could store that list in a single place instead of potentially maintaining it in each class. &lt;/p&gt;

&lt;p&gt;Otherwise the patch looks good, thanks very much for looking into it Tim. The testcase is very nice and appreciated. &lt;/p&gt;

</comment>
                            <comment id="12708941" author="mikedd" created="Wed, 13 May 2009 15:25:07 +0100"  >&lt;p&gt;One other thing : OpenJPA &amp;gt; 1.0.x requires Java 5, so we can use generics. New code should take advantage of them to avoid misleading compiler warnings. &lt;/p&gt;</comment>
                            <comment id="12708964" author="mcconne" created="Wed, 13 May 2009 16:16:43 +0100"  >&lt;p&gt;Hi Michael, thanks for reviewing and testing it. I&apos;ll add some javadoc today and update per your comments. I&apos;m now getting the same ORA-02275 errors that you&apos;re seeing. Plus, I&apos;m now getting many of these errors below. Do you know what this error is or what might be causing it ??&lt;/p&gt;

&lt;p&gt;testAttrOverride1(org.apache.openjpa.persistence.embed.attrOverrides.TestAttrOverrides)  Time elapsed: 0.157 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
&amp;lt;openjpa-2.0.0-SNAPSHOT-r422266:774177M fatal store error&amp;gt; org.apache.openjpa.util.StoreException: Cannot create PoolableConnectionFactory (Listener refused the connection with the following error:&lt;br/&gt;
ORA-12518, TNS:listener could not hand off client connection&lt;br/&gt;
The Connection descriptor used by the client was:&lt;br/&gt;
9.51.245.122:1521:XE&lt;/p&gt;

&lt;p&gt;I altered my Oracle database settings via this command but it did not seem to help:&lt;/p&gt;

&lt;p&gt;&quot;ALTER SYSTEM SET PROCESSES=500 SCOPE=SPFILE;&quot; &lt;/p&gt;</comment>
                            <comment id="12708990" author="mikedd" created="Wed, 13 May 2009 17:17:34 +0100"  >&lt;p&gt;Hi Tim,&lt;/p&gt;

&lt;p&gt;FWIW I&apos;ve seen that error before and adding a connection pool really helped (tried this before doing the SET PROCESSES step). &lt;/p&gt;

&lt;p&gt;If you&apos;re already using a connection pool you can try tweaking the settings (default values in pom.xml might not be perfect for Oracle XE). &lt;/p&gt;</comment>
                            <comment id="12709258" author="mcconne" created="Thu, 14 May 2009 04:46:30 +0100"  >&lt;p&gt;Attached new patch and have incorporated as many of Mike&apos;s comments as possible. Please review again and let me know what you think. Thanks much&lt;/p&gt;</comment>
                            <comment id="12713039" author="drwoods" created="Tue, 26 May 2009 15:52:59 +0100"  >&lt;p&gt;also included in 1.3.x as Rev778727&lt;/p&gt;</comment>
                            <comment id="12719717" author="mcconne" created="Mon, 15 Jun 2009 20:11:38 +0100"  >&lt;p&gt;Reopening as there still appears to be a problem when using the mapping tool (SynchronizeMappings) and the SchemaFactory in its configuration.&lt;/p&gt;</comment>
                            <comment id="12721642" author="mcconne" created="Fri, 19 Jun 2009 05:00:20 +0100"  >&lt;p&gt;This patch will handle the case where column names are validated and translated against the database dictionary and multiple schema factories get invoked, including the DynamicSchemaFactory. Additionally, some changes have been made to the Derby (see &lt;a href=&quot;http://db.apache.org/derby/docs/10.1/ref/rrefkeywords29722.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.1/ref/rrefkeywords29722.html&lt;/a&gt;) and DB2 dictionaries. Thanks Jeremy for the testcase.&lt;/p&gt;</comment>
                            <comment id="12722939" author="mcconne" created="Tue, 23 Jun 2009 03:47:07 +0100"  >&lt;p&gt;Cleaned up dictionaries for these databases:&lt;/p&gt;

&lt;p&gt;1. Derby&lt;br/&gt;
2. DB2&lt;br/&gt;
3. MySQL&lt;br/&gt;
4. Oracle&lt;br/&gt;
5. PostgreSQL&lt;/p&gt;</comment>
                            <comment id="12723161" author="drwoods" created="Tue, 23 Jun 2009 17:21:09 +0100"  >&lt;p&gt;Committed patch from 20090622 to 1.3.x and trunk.  Thanks Tim.&lt;/p&gt;</comment>
                            <comment id="12736648" author="alan_raison" created="Wed, 29 Jul 2009 15:35:38 +0100"  >&lt;p&gt;This patch seems to include a test case which tries to connect to a Derby server - not much good if you&apos;re not using Derby &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;See openjpa/trunk/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/dynamicschema/TestResWordEntity.java &lt;/p&gt;</comment>
                            <comment id="12736726" author="drwoods" created="Wed, 29 Jul 2009 18:58:22 +0100"  >&lt;p&gt;Thanks for catching that Alan.&lt;br/&gt;
Updated TestResWordEntity.java in trunk as Rev798991 and 1.3.x as Rev798993.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12428885">OPENJPA-1145</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12411486" name="OPENJPA-946.patch" size="25817" author="mcconne" created="Tue, 23 Jun 2009 03:48:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Mar 2009 10:00:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysxbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>202748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>