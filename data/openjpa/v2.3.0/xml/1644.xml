<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:44:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1644/OPENJPA-1644.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1644] Null field values after calling EntityManager.remove()</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1644</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Fields of an entity instance are nulled after calling EntityManager.remove() on an instance.&lt;/p&gt;

&lt;p&gt;For example, I have an entity class named User. I persist and then remove an instance of User.&lt;/p&gt;

&lt;p&gt;//&lt;br/&gt;
// EntityManager em is initialized before the following code&lt;br/&gt;
//&lt;/p&gt;

&lt;p&gt;em.getTransaction().begin();&lt;br/&gt;
User user = new User();&lt;br/&gt;
user.setName(&quot;name1&quot;);&lt;br/&gt;
em.persist(user);&lt;br/&gt;
em.getTransaction().commit();&lt;br/&gt;
System.out.println(user.getName); // will print out name1&lt;br/&gt;
em.getTransaction().begin();&lt;br/&gt;
em.remove(user);&lt;br/&gt;
em.getTransaction().commit();&lt;br/&gt;
System.out.println(user.getName); // will print out null (oh no!) &lt;/p&gt;

&lt;p&gt;After I persist and remove the same instance of User, it&apos;s fields became null. I believe this shouldn&apos;t be the case as Section &quot;3.2.3 Removal&quot; of the 2.0 spec states:&lt;/p&gt;

&lt;p&gt;&quot;After an entity has been removed, its state (except for generated state) will be that of the entity at the point at which the remove operation was called.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463425">OPENJPA-1644</key>
            <summary>Null field values after calling EntityManager.remove()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="curtisr7">Rick Curtis</assignee>
                                    <reporter username="leoisiah">Leo Isiah Sambayan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Apr 2010 11:48:18 +0100</created>
                <updated>Wed, 10 Apr 2013 22:12:45 +0100</updated>
                            <resolved>Wed, 10 Apr 2013 22:12:45 +0100</resolved>
                                    <version>1.2.2</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.2.3</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12863065" author="curtisr7" created="Sat, 1 May 2010 23:17:08 +0100"  >&lt;p&gt;This patch fixes the reported behavior, but I&apos;m not sure what all it will break(Although all current unit tests pass).&lt;/p&gt;

&lt;p&gt;I need to do some more testing before it is committed.&lt;/p&gt;</comment>
                            <comment id="12919877" author="curtisr7" created="Mon, 11 Oct 2010 16:50:03 +0100"  >&lt;p&gt;I did some research as to why we were clearing out the fields of an Entity after deleting it and it appears that it is something that has been with us from the JDO days. Per the JDO spec: &lt;/p&gt;

&lt;p&gt;&quot;A persistent-deleted instance transitions to transient at commit. During the transition, its persistent fields are written with their Java default values....&quot;The net of that is that after an instance is deleted, the provider must clear out all fields of that Entity.&lt;/p&gt;

&lt;p&gt;The JPA 2.0 spec states something along these lines :  &quot;After an entity has been removed, its state (except for generated state) will be that of the entity at the point at which the remove operation was called.&quot; I&apos;ll be committing changes shortly to support the JPA spec.&lt;/p&gt;
</comment>
                            <comment id="12981338" author="mikedd" created="Thu, 13 Jan 2011 16:45:27 +0000"  >&lt;p&gt;Closing issue which has been resolved for some time. If you believe the issue is not resolved please reopen or open a new issue. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443395" name="OPENJPA-1644.patch" size="9853" author="curtisr7" created="Sat, 1 May 2010 23:17:08 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 1 May 2010 22:17:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161902</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hysyfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>202927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>