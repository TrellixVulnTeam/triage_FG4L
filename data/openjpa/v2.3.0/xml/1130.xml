<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:35:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/OPENJPA-1130/OPENJPA-1130.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[OPENJPA-1130] Use maven-jar-plugin to create a o-p-j-tests.jar to share base TestCase classes across modules</title>
                <link>https://issues.apache.org/jira/browse/OPENJPA-1130</link>
                <project id="12310351" key="OPENJPA">OpenJPA</project>
                    <description>&lt;p&gt;Propose moving openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/test/* base testcase classes to a openjpa-testsupport JAR which can be shared between o-p-j, openjpa-slice and new ones being added to openjpa-integration for bean validation and eventually OSGi.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427419">OPENJPA-1130</key>
            <summary>Use maven-jar-plugin to create a o-p-j-tests.jar to share base TestCase classes across modules</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12426574">OPENJPA-1105</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drwoods">Donald Woods</assignee>
                                    <reporter username="drwoods">Donald Woods</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2009 02:24:24 +0100</created>
                <updated>Tue, 9 Mar 2010 18:31:17 +0000</updated>
                            <resolved>Wed, 10 Jun 2009 16:57:22 +0100</resolved>
                                                    <fixVersion>2.0.0-M3</fixVersion>
                                    <component>build / infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12717519" author="mikedd" created="Tue, 9 Jun 2009 02:49:14 +0100"  >&lt;p&gt;I believe the ideal solution is to use the maven jar plugin to create an openjpa-persistence-jdbc-test artifact. That artifact can then be used in downstream modules like any other dependency. &lt;/p&gt;

&lt;p&gt;Similarly we could move some of the persistence API agnostic tests to openjpa-kernel or openjpa-jdbc. &lt;/p&gt;

&lt;p&gt;Creating a new module is another way to approach the problem but it seems like overkill to me.&lt;/p&gt;</comment>
                            <comment id="12717534" author="drwoods" created="Tue, 9 Jun 2009 03:12:14 +0100"  >&lt;p&gt;Creating a new module allows us to use the maven depends and potentially the maven-bundle-plugin for OSGi test support.  Also, I&apos;m only looking to move about 6 classes over and not all of the testcases.&lt;br/&gt;
We took a similar approach in Apache Geronimo, where we have common testsupport and testsuite classes over in separate modules, which our testsuites then depend upon....&lt;br/&gt;
Ideally, anything that directly extends junit.framework would be moved to this new openjpa-testsupport module, to help facilitate us moving to JUnit 4 (or another framework) in the future.&lt;/p&gt;</comment>
                            <comment id="12717536" author="mikedd" created="Tue, 9 Jun 2009 03:40:07 +0100"  >&lt;p&gt;I&apos;m not sure about the maven-bundle-plugin, but normal depends will work with a test-jar, just need to add &amp;lt;classifier&amp;gt;test&amp;lt;/classifier&amp;gt;.&lt;/p&gt;

&lt;p&gt;If there are issues with that approach (ie won&apos;t work for OSGi, or downstream consumers) then we can go with a separate module. &lt;/p&gt;

&lt;p&gt;Moving to a different test framework is another interesting problem. I suppose splitting out some of the tests would help with memory usage though. &lt;/p&gt;</comment>
                            <comment id="12717699" author="drwoods" created="Tue, 9 Jun 2009 15:58:15 +0100"  >&lt;p&gt;Patch file of the proposed changes, where the base TestCase classes in openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/test/ are moved to a new openjpa-testsupport module.  &lt;br/&gt;
Lots of updates, due to the package renaming/moving of the 10 testcase support classes.&lt;/p&gt;</comment>
                            <comment id="12717727" author="mikedd" created="Tue, 9 Jun 2009 17:12:29 +0100"  >&lt;p&gt;I&apos;d prefer something like this since it doesn&apos;t move any of the classes and creates test jars for all our modules. Making the test classes available might produce some side benefits, users can easily download our unit tests and run in their environment (as opposed to building them from source). I think this is the way I&apos;d like to go in the long term.&lt;/p&gt;

&lt;p&gt;There is a problem with the install goal though. Maven builds a tests jar for the parent pom and that jar doesn&apos;t include LICENSE.txt and NOTICE.txt so the ianal plugin fails. I&apos;d guess this is a bug in the maven-jar-plugin, but I want to do some more investigation first. &lt;/p&gt;</comment>
                            <comment id="12717755" author="drwoods" created="Tue, 9 Jun 2009 18:14:53 +0100"  >&lt;p&gt;Cool! Thanks for the patch.  I&apos;ll give this way a try with the bean validation integration tests and see if it&apos;ll work.&lt;br/&gt;
BTW - By only putting the test-jar goal on openjpa-persistence-jdbc/pom.xml, then we don&apos;t have ianal failures, which were being caused by other modules that had package == pom instead of jar.&lt;/p&gt;</comment>
                            <comment id="12717825" author="drwoods" created="Tue, 9 Jun 2009 22:29:46 +0100"  >&lt;p&gt;Well, so far using test-jar isn&apos;t working, as when I try to use the enhancer on classes in my validation tests, I&apos;m getting unresolved class references for items included in the tests jar....&lt;/p&gt;</comment>
                            <comment id="12718088" author="mikedd" created="Wed, 10 Jun 2009 15:16:41 +0100"  >&lt;p&gt;The enhancer has never handled jarred classes very well. &lt;/p&gt;

&lt;p&gt;If we rely on the enhancer my guess would be that doing a top down build would work (maven operates on target/test-classes in this case), but building just the module will fail (maven picks up the jar from .m2/repository). I&apos;d expect the same behavior for test-jar or a separate module though. &lt;/p&gt;

&lt;p&gt;Maybe I need to read more on the validation aspect of JPA 2.0. Are we relying on the entities having been enhanced, or do we need to re-enhance them? If it&apos;s the former we can probably reorder the enhancement to occur before test-jar does its work. For the latter we&apos;ll have to unjar or improve the enhancer to handle jarred classes. &lt;/p&gt;</comment>
                            <comment id="12718093" author="drwoods" created="Wed, 10 Jun 2009 15:26:07 +0100"  >&lt;p&gt;I&apos;m trying to enhance classes in a new openjpa-integration/validation/src/test/main directory for my validation specific testing (as the entities will be using bean validation annotations that are not available in the normal openjpa-persistence-jdbc builds.)&lt;/p&gt;

&lt;p&gt;The enhancer error I&apos;m seeing, is due to existing entities in the test jar -&lt;br/&gt;
. . .&lt;br/&gt;
628  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Found duplicate metadata or mapping for &quot;class org.apache.openjpa.persistence.jdbc.order.BaseTestElement3&quot;.  Ignoring.&lt;br/&gt;
629  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Parsing class &quot;org.apache.openjpa.persistence.jdbc.order.BaseTestEntity3&quot;.&lt;br/&gt;
629  WARN   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Found duplicate metadata or mapping for &quot;class org.apache.openjpa.persistence.jdbc.order.BaseTestEntity3&quot;.  Ignoring.&lt;br/&gt;
629  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Finished parsing metadata resource &quot;jar:&lt;a href=&quot;file:/Users/drwoods/.m2/repository/org/apache/openjpa/openjpa-persistence-jdbc/2.0.0-SNAPSHOT/openjpa-persistence-jdbc-2.0.0-SNAPSHOT-tests.jar!/org/apache/openjpa/persistence/jdbc/order/order-orm-3.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/Users/drwoods/.m2/repository/org/apache/openjpa/openjpa-persistence-jdbc/2.0.0-SNAPSHOT/openjpa-persistence-jdbc-2.0.0-SNAPSHOT-tests.jar!/org/apache/openjpa/persistence/jdbc/order/order-orm-3.xml&lt;/a&gt;&quot;.&lt;br/&gt;
629  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Set persistence-capable superclass of &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper&quot; to &quot;null&quot;.&lt;br/&gt;
631  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Resolving metadata for &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper@353678091&quot;.&lt;br/&gt;
631  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - 	Resolving field &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper@353678091.id&quot;.&lt;br/&gt;
639  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - 	Resolving field &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper@353678091.mid&quot;.&lt;br/&gt;
639  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - 	Resolving field &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper@353678091.name&quot;.&lt;br/&gt;
641  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Preparing mapping for &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper&quot;.&lt;br/&gt;
641  TRACE  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.MetaData - Resolving mapping for &quot;org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper@353678091&quot;.&lt;br/&gt;
641  INFO   &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; openjpa.Enhance - Enhancing type &quot;class org.apache.openjpa.persistence.access.xml.XMLMixedMappedSuper&quot;.&lt;br/&gt;
java.io.FileNotFoundException: &lt;a href=&quot;file:/Users/drwoods/.m2/repository/org/apache/openjpa/openjpa/2.0.0-SNAPSHOT/openjpa-2.0.0-SNAPSHOT.jar!/org/apache/openjpa/persistence/access/xml/XMLMixedMappedSuper.class&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/Users/drwoods/.m2/repository/org/apache/openjpa/openjpa/2.0.0-SNAPSHOT/openjpa-2.0.0-SNAPSHOT.jar!/org/apache/openjpa/persistence/access/xml/XMLMixedMappedSuper.class&lt;/a&gt; (No such file or directory)&lt;br/&gt;
	at java.io.FileOutputStream.open(Native Method)&lt;br/&gt;
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:179)&lt;br/&gt;
	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:70)&lt;br/&gt;
	at serp.bytecode.BCClass.write(BCClass.java:179)&lt;br/&gt;
	at org.apache.openjpa.enhance.PCEnhancer.record(PCEnhancer.java:595)&lt;br/&gt;
	at org.apache.openjpa.enhance.PCEnhancer.record(PCEnhancer.java:581)&lt;br/&gt;
	at org.apache.openjpa.enhance.PCEnhancer.run(PCEnhancer.java:4602)&lt;br/&gt;
. . .&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; An Ant BuildException has occured: The following error occurred while executing this line:&lt;br/&gt;
/Users/drwoods/openjpa/trunk/openjpa-integration/validation/src/main/ant/enhancer.xml:51: The following error occurred while executing this line:&lt;br/&gt;
/Users/drwoods/openjpa/trunk/openjpa-integration/validation/src/main/ant/enhancer.xml:79: java.io.FileNotFoundException: &lt;a href=&quot;file:/Users/drwoods/.m2/repository/org/apache/openjpa/openjpa/2.0.0-SNAPSHOT/openjpa-2.0.0-SNAPSHOT.jar!/org/apache/openjpa/persistence/access/xml/XMLMixedMappedSuper.class&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/Users/drwoods/.m2/repository/org/apache/openjpa/openjpa/2.0.0-SNAPSHOT/openjpa-2.0.0-SNAPSHOT.jar!/org/apache/openjpa/persistence/access/xml/XMLMixedMappedSuper.class&lt;/a&gt; (No such file or directory)&lt;/p&gt;</comment>
                            <comment id="12718119" author="drwoods" created="Wed, 10 Jun 2009 16:53:49 +0100"  >&lt;p&gt;Now that we upgraded to maven-jar-plugin-2.2 in &lt;a href=&quot;https://issues.apache.org/jira/browse/OPENJPA-1131&quot; title=&quot;Upgrade to maven-jar-plugin-2.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OPENJPA-1131&quot;&gt;&lt;del&gt;OPENJPA-1131&lt;/del&gt;&lt;/a&gt;, Mike&apos;s proposed test-jar solution can be used.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410230" name="OPENJPA-1130-tests-classifier.patch.txt" size="1349" author="mikedd" created="Tue, 9 Jun 2009 17:12:29 +0100"/>
                            <attachment id="12410226" name="OPENJPA-1130.patch" size="355599" author="drwoods" created="Tue, 9 Jun 2009 15:58:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Jun 2009 01:49:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>161415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyejkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>