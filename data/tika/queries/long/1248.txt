The javadoc of the CharsetDetector.getReader method states that the declaredEncoding parameter can be null or empty. However, providing such values throws an exception (IllegalArgumentException or IllegalCharsetNameException).
Either the javadoc should be updated to match this behavior, or the bug should be fixed (even if the method seems not to be used internally).