The distance calculation for language profiles creates a Set of Strings with each call and performs hashtable lookups for all those Strings. This patch creates and caches compact structures that are iterated sequentially. The result is a factor 2 speed up (see the performance test in LanguageIdentifierTest).