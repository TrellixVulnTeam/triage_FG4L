XHTMLContentHandler.endElement checks if the element is in the ENDLINE set to see if it should emit a newline.  The html elements in ENDLINE are all lower case, but the HtmlParser class uses the XHTMLDowngradeHandler handler to upper case all html elements.  This means that none of the html elements in the web page will match the elements in the ENDLINE set.  

This also is a problem with the INDENT set as well