Following patch will add simple encoding detection support for html parser. Common detection code moved to utility method. HtmlParser junit test moved to separate class.