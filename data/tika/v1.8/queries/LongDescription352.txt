Both HtmlParser and TXTParser have their own code to extract the charset from a content-type metadata string. They should be using MediaType.parse to do this.