<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:37:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-845/TIKA-845.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-845] Check for Existing Value in Multi-Value Fields in XML Metadata Handler</title>
                <link>https://issues.apache.org/jira/browse/TIKA-845</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The XML Abstract metdata handler should check for an existing value for multi-valued fields as well as simple text fields.&lt;/p&gt;

&lt;p&gt;Similar metadata may be stored in multiple fields in the source and a developer may choose to map several source fields to the same tika field, in which case no check is made for duplicates of existing delimited values.&lt;/p&gt;

&lt;p&gt;For example, a developer may want to dump any values contained in legacy IPTC keywords and dc:subject into tika keywords.  If IPTC keywords = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;rock&amp;#39;,&amp;#39;tree&amp;#39;,&amp;#39;dog&amp;#39;&amp;#93;&lt;/span&gt; and dc:subject = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;rock&amp;#39;,&amp;#39;tree&amp;#39;,&amp;#39;K9&amp;#39;&amp;#93;&lt;/span&gt; then currently tika keywords = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;rock&amp;#39;,&amp;#39;tree&amp;#39;,&amp;#39;dog&amp;#39;,&amp;#39;rock&amp;#39;,&amp;#39;tree&amp;#39;,&amp;#39;K9&amp;#39;&amp;#93;&lt;/span&gt; instead of the desired &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;rock&amp;#39;,&amp;#39;tree&amp;#39;,&amp;#39;dog&amp;#39;,&amp;#39;K9&amp;#39;&amp;#93;&lt;/span&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12538558">TIKA-845</key>
            <summary>Check for Existing Value in Multi-Value Fields in XML Metadata Handler</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgauss">Ray Gauss II</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Jan 2012 19:15:44 +0000</created>
                <updated>Tue, 24 Jan 2012 01:42:48 +0000</updated>
                            <resolved>Mon, 23 Jan 2012 16:08:25 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13187101" author="rgauss" created="Mon, 16 Jan 2012 19:17:47 +0000"  >&lt;p&gt;Patch to check for existing multi-value.&lt;/p&gt;</comment>
                            <comment id="13191228" author="gagravarr" created="Mon, 23 Jan 2012 16:08:18 +0000"  >&lt;p&gt;I think the current logic isn&apos;t quite correct. Rather than ending up with a proper multivalued metadata object, we end up with a single string of comma separated values, which seems wrong to me&lt;/p&gt;

&lt;p&gt;What I&apos;ve done is fix up the logic, which allows for what looks to be a cleaner way to check for duplicates&lt;/p&gt;

&lt;p&gt;I&apos;ve also fixed up the single unit test that depending on the old comma concatination, DcXMLParserTest, to now check for the correct multivalued approach&lt;/p&gt;

&lt;p&gt;I&apos;ve committed this in r1234873.&lt;/p&gt;</comment>
                            <comment id="13191805" author="rgauss" created="Tue, 24 Jan 2012 01:42:48 +0000"  >&lt;p&gt;I was following precedence there and actually not even calling that code since ElementMetadataHandler correctly stores as a multivalued object, but you&apos;re right and your changes look spot on.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12510735" name="xml-check-multi-value-existing.diff" size="1056" author="rgauss" created="Mon, 16 Jan 2012 19:17:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jan 2012 16:08:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224062</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx1a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16527</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>