<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:32:03 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-457/TIKA-457.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-457] HTMLParser gets an early &lt;/body&gt; event</title>
                <link>https://issues.apache.org/jira/browse/TIKA-457</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I am using the IdentityMapper in the HTMLparser with this simple document:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt; my title &amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;frameset rows=\&lt;span class=&quot;code-quote&quot;&gt;&quot;20,*\&quot;&lt;/span&gt;&amp;gt; 
&amp;lt;frame src=\&lt;span class=&quot;code-quote&quot;&gt;&quot;top.html\&quot;&lt;/span&gt;&amp;gt;
&amp;lt;/frame&amp;gt;
&amp;lt;frameset cols=\&lt;span class=&quot;code-quote&quot;&gt;&quot;20,*\&quot;&lt;/span&gt;&amp;gt;
&amp;lt;frame src=\&lt;span class=&quot;code-quote&quot;&gt;&quot;left.html\&quot;&lt;/span&gt;&amp;gt;
&amp;lt;/frame&amp;gt;
&amp;lt;frame src=\&lt;span class=&quot;code-quote&quot;&gt;&quot;invalid.html\&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/frame&amp;gt;
&amp;lt;frame src=\&lt;span class=&quot;code-quote&quot;&gt;&quot;right.html\&quot;&lt;/span&gt;&amp;gt;
&amp;lt;/frame&amp;gt;
&amp;lt;/frameset&amp;gt;
&amp;lt;/frameset&amp;gt;
&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Strangely the HTMLHandler is getting a call to endElement on the body &lt;b&gt;BEFORE&lt;/b&gt;  we reach frameset. As a result the variable bodylevel is decremented back to 0 and the remaining entities are ignored due to the logic implemented in HTMLHandler.&lt;/p&gt;

&lt;p&gt;Any idea?&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12468725">TIKA-457</key>
            <summary>HTMLParser gets an early &lt;/body&gt; event</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkrugler">Ken Krugler</assignee>
                                    <reporter username="jnioche">Julien Nioche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jul 2010 16:28:01 +0100</created>
                <updated>Mon, 16 Aug 2010 19:34:59 +0100</updated>
                            <resolved>Fri, 13 Aug 2010 18:11:28 +0100</resolved>
                                                    <fixVersion>0.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12886061" author="kkrugler" created="Wed, 7 Jul 2010 21:29:52 +0100"  >&lt;p&gt;It&apos;s TagSoup that&apos;s generating the &quot;interesting&quot; output. Straight from a TagSoup parser (without Tika), the above gives you:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt; my title &amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body/&amp;gt;&amp;lt;frameset rows=&lt;span class=&quot;code-quote&quot;&gt;&quot;20,*&quot;&lt;/span&gt;&amp;gt;&amp;lt;frame frameborder=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; scrolling=&lt;span class=&quot;code-quote&quot;&gt;&quot;auto&quot;&lt;/span&gt; src=&lt;span class=&quot;code-quote&quot;&gt;&quot;top.html&quot;&lt;/span&gt;/&amp;gt;&amp;lt;frameset cols=&lt;span class=&quot;code-quote&quot;&gt;&quot;20,*&quot;&lt;/span&gt;&amp;gt;&amp;lt;frame frameborder=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; scrolling=&lt;span class=&quot;code-quote&quot;&gt;&quot;auto&quot;&lt;/span&gt; src=&lt;span class=&quot;code-quote&quot;&gt;&quot;left.html&quot;&lt;/span&gt;/&amp;gt;&amp;lt;frame frameborder=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; scrolling=&lt;span class=&quot;code-quote&quot;&gt;&quot;auto&quot;&lt;/span&gt; src=&lt;span class=&quot;code-quote&quot;&gt;&quot;invalid.html&quot;&lt;/span&gt;/&amp;gt;&amp;lt;frame frameborder=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; scrolling=&lt;span class=&quot;code-quote&quot;&gt;&quot;auto&quot;&lt;/span&gt; src=&lt;span class=&quot;code-quote&quot;&gt;&quot;right.html&quot;&lt;/span&gt;/&amp;gt;&amp;lt;/frameset&amp;gt;&amp;lt;/frameset&amp;gt;&amp;lt;/html&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;According to the XHTML 1.0 &quot;frameset&quot; DTD and the HTML 4.01 &quot;frameset&quot; DTD, the &amp;lt;frameset&amp;gt; element should NOT be inside of a body tag, which is why you&apos;re seeing the odd output.&lt;/p&gt;

&lt;p&gt;I believe the issue here is that based on TagSoup&apos;s state machine architecture, the &amp;lt;body&amp;gt; tag has been emitted by the time you get to the &amp;lt;frameset&amp;gt;. TagSoup could hang onto the &amp;lt;body&amp;gt; tag until it sees something other than a &amp;lt;frameset&amp;gt;, but that feels pretty extreme.&lt;/p&gt;

&lt;p&gt;Side note - the HTML is slightly broken, in that &amp;lt;frame src=\&quot;invalid.html\&quot;/&amp;gt; is followed by &amp;lt;/frame&amp;gt;, but it&apos;s already been terminated by the &quot;/&amp;gt;&quot; sequence. Don&apos;t know if that was intentional or not.&lt;/p&gt;

&lt;p&gt;Also strictly speaking you can&apos;t have empty &amp;lt;frame&amp;gt; elements, which is what are defined in the example. They should be &amp;lt;frame src=&quot;blah&quot;&amp;gt; without a &amp;lt;/frame&amp;gt;.&lt;/p&gt;
</comment>
                            <comment id="12898316" author="kkrugler" created="Fri, 13 Aug 2010 18:03:52 +0100"  >&lt;p&gt;This also improves handling of &amp;lt;frame&amp;gt; elements for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-463&quot; title=&quot;HtmlParser doesn&amp;#39;t extract links from img, map, object, frame, iframe, area, link&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-463&quot;&gt;&lt;del&gt;TIKA-463&lt;/del&gt;&lt;/a&gt;, by resolving relative URLs in src=xxx attributes for these elements.&lt;/p&gt;</comment>
                            <comment id="12898320" author="kkrugler" created="Fri, 13 Aug 2010 18:11:28 +0100"  >&lt;p&gt;SVN 985288&lt;/p&gt;</comment>
                            <comment id="12899020" author="kkrugler" created="Mon, 16 Aug 2010 19:34:59 +0100"  >&lt;p&gt;Just applied patch (SVN 986089) to problem that showed up during testing on larger dataset. Empty value in Metadata was getting emitted as &amp;lt;meta&amp;gt; tag with empty content=xxx attribute, which can cause SAX processing code to throw  a NPE.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12469102">TIKA-463</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12452035" name="TIKA-457.patch" size="10230" author="kkrugler" created="Fri, 13 Aug 2010 18:03:51 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Jul 2010 20:29:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx3o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>