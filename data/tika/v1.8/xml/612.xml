<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:31:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-612/TIKA-612.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-612] Specify PDFBox options via ParseContext </title>
                <link>https://issues.apache.org/jira/browse/TIKA-612</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-611&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TIKA-611&lt;/a&gt;. The options used by PDFBox are currently hardwritten in the PDFParser code, we will allow them to be specified via the ParseContext objects&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500857">TIKA-612</key>
            <summary>Specify PDFBox options via ParseContext </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikemccand">Michael McCandless</assignee>
                                    <reporter username="jnioche">Julien Nioche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2011 09:02:51 +0000</created>
                <updated>Fri, 10 Feb 2012 12:22:32 +0000</updated>
                            <resolved>Thu, 17 Nov 2011 17:25:01 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>1.1</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13047143" author="laubrino" created="Fri, 10 Jun 2011 12:25:17 +0100"  >&lt;p&gt;Hi. Due to this serious bug in PDFBox &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-956&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PDFBOX-956&lt;/a&gt; I would appreciate if you can implement this. It would be then possible to turn the suppressDuplicateOverlappingText off.&lt;/p&gt;</comment>
                            <comment id="13090192" author="jnioche" created="Wed, 24 Aug 2011 14:12:14 +0100"  >&lt;p&gt;Patch which allows to specify the options via the Context object. WDYT?&lt;/p&gt;</comment>
                            <comment id="13090273" author="mikemccand" created="Wed, 24 Aug 2011 15:54:53 +0100"  >&lt;p&gt;I&apos;m attaching a test case (it passes), showing a PDF w/ 2 columns and verifying the text within a single column is kept contiguous.&lt;/p&gt;</comment>
                            <comment id="13096266" author="jukkaz" created="Fri, 2 Sep 2011 21:11:13 +0100"  >&lt;p&gt;+1 looks good to me.&lt;/p&gt;

&lt;p&gt;A possible design improvement could be to make PDFParseOptions an interface like the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; PDFParseOptions {
    void apply(PDFTextStripper stripper);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The proposed bean class would implement that interface like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void apply(PDFTextStripper stripper) {
        stripper.setForceParsing(getForceParsing());
        stripper.setSortByPosition(getSortByPosition());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would make it easy for client applications to apply also other PDF parsing settings not currently known by Tika.&lt;/p&gt;</comment>
                            <comment id="13146397" author="mikemccand" created="Tue, 8 Nov 2011 16:55:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;This would make it easy for client applications to apply also other PDF parsing settings not currently known by Tika.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, this seems like it&apos;d be more general.  EG, we could fold in get/setSuppressDuplicateOverlappingText (and move it off of PDFParser), and maybe also get/setEnableAutoSpace.&lt;/p&gt;

&lt;p&gt;In general, since there are so many options on PDFTextStripper, and the &quot;right&quot; settings seems to vary PDF by PDF, it means it&apos;s important that we expose full control...&lt;/p&gt;</comment>
                            <comment id="13148695" author="mikemccand" created="Fri, 11 Nov 2011 19:46:34 +0000"  >&lt;p&gt;I agree, we probably shouldn&apos;t just directly expose PDFTextStripper&lt;br/&gt;
directly; it&apos;d be better (less API surface area) if we pick certain&lt;br/&gt;
options and expose them ourselves.  Then if PDFTextStripper changes&lt;br/&gt;
things, or if we somehow switch to a different PDF lib, we won&apos;t break&lt;br/&gt;
our users.&lt;/p&gt;

&lt;p&gt;Alternatively, can just expose options on PDFParser directly?  This is&lt;br/&gt;
more intuitive and direct (you just use setters on the parser), and we&lt;br/&gt;
can name/genericize the options, and choose which to expose?  (This is&lt;br/&gt;
what I&apos;ve been doing on the last few PDF issues....).&lt;/p&gt;</comment>
                            <comment id="13150539" author="mikemccand" created="Tue, 15 Nov 2011 15:02:54 +0000"  >&lt;p&gt;Patch, just adding setSortByPosition to PDFParser.  I think this is more straightforward and lets us control what/how we expose...&lt;/p&gt;</comment>
                            <comment id="13152147" author="mikemccand" created="Thu, 17 Nov 2011 17:25:01 +0000"  >&lt;p&gt;I committed the last patch; let&apos;s open separate issues for other options that need exposing...&lt;/p&gt;</comment>
                            <comment id="13205370" author="janhoy" created="Fri, 10 Feb 2012 11:47:56 +0000"  >&lt;p&gt;So how do we set a PDFBox option via ParseContext in practice? Say we want to &lt;tt&gt;setEnableAutoSpace(false)&lt;/tt&gt;.&lt;br/&gt;
The test case attached to this issue calls &lt;tt&gt;parser.setEnableAutoSpace(false)&lt;/tt&gt; directly on the parser, not via parseContext.&lt;/p&gt;</comment>
                            <comment id="13205376" author="gagravarr" created="Fri, 10 Feb 2012 11:58:13 +0000"  >&lt;p&gt;The conclusion was to expose the options on the PDFParser directly instead. setEnableAutoSpace is already supported by PDFParser&lt;/p&gt;

&lt;p&gt;If you know you have a PDF, create a PDFParser, set the options, then parse&lt;/p&gt;

&lt;p&gt;If you want to use something like AutoDetectParser but with special PDF options, you have two options. One is to fetch the parsers from the AutoDetectParser, possibly recursing, until you find the PDFParser, and set. The other is to create a new AutoDetectParser on an explicitly created PDFParser, with the DefaultParser as a fallback&lt;/p&gt;</comment>
                            <comment id="13205394" author="janhoy" created="Fri, 10 Feb 2012 12:22:32 +0000"  >&lt;p&gt;Hmm, that&apos;s kind of awkward to use from e.g. SolrCell. Any chance of considering a PDFParseOptions on the Context as an alternative?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12533261">SOLR-2930</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12491491" name="TIKA-612-testcase.patch" size="1747" author="mikemccand" created="Wed, 24 Aug 2011 15:54:53 +0100"/>
                            <attachment id="12503749" name="TIKA-612.patch" size="7134" author="mikemccand" created="Tue, 15 Nov 2011 15:02:53 +0000"/>
                            <attachment id="12491478" name="Tika-612.patch" size="4165" author="jnioche" created="Wed, 24 Aug 2011 14:12:14 +0100"/>
                            <attachment id="12491492" name="testPDFTwoColumns.pdf" size="57100" author="mikemccand" created="Wed, 24 Aug 2011 15:54:53 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jun 2011 11:25:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4253</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx2pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>