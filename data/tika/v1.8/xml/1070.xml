<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:36:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1070/TIKA-1070.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1070] StackOverflow error in org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1070</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;The error occurs when parsing big &quot;XLS&quot; files and is caused by the ElementInfo stored in &quot;currentElement&quot;.&lt;/p&gt;

&lt;p&gt;Each time a new element is started (method startElement) the current elment is newly overwritten with &lt;/p&gt;

&lt;p&gt;currentElement = new ElementInfo(currentElement, namespaces);&lt;/p&gt;

&lt;p&gt;where the existing element is used as the parent element. Since the currentElement is not reset to the parent element after finishing the element (method: endElement) the method getPrefix recursively traverses the parents and finally causes the StackOverFlowError&lt;/p&gt;

&lt;p&gt;For my understanding: something like:&lt;/p&gt;

&lt;p&gt;currentElement = currentElement.parent;&lt;/p&gt;

&lt;p&gt;in the endElement method solves the issue!&lt;/p&gt;

&lt;p&gt;Best&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java&lt;/p&gt;</environment>
        <key id="12630122">TIKA-1070</key>
            <summary>StackOverflow error in org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dglachs">Dietmar Glachs</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Jan 2013 11:43:33 +0000</created>
                <updated>Tue, 25 Mar 2014 16:21:47 +0000</updated>
                            <resolved>Tue, 25 Jun 2013 16:00:40 +0100</resolved>
                                    <version>1.2</version>
                    <version>1.3</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13570385" author="gagravarr" created="Mon, 4 Feb 2013 16:54:46 +0000"  >&lt;p&gt;As Jukka wrote most of this, we should probably let him sanity check the proposed fix. I think he&apos;ll hopefully be back around again within a few weeks, but please ping us if you&apos;ve not heard back by then and someone else will try to review!&lt;/p&gt;</comment>
                            <comment id="13635050" author="dglachs" created="Thu, 18 Apr 2013 10:57:40 +0100"  >&lt;p&gt;Hello Nick,&lt;/p&gt;

&lt;p&gt;sorry to bother you with this - but since the issue is still unresolved, I would ask you to adjust the endElement-Method in org.apache.tika.sax.ToXMLContentHandler as follows.&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public void endElement(String uri, String localName, String qName)&lt;br/&gt;
            throws SAXException {&lt;br/&gt;
        if (inStartElement) &lt;/p&gt;
{
            write(&quot; /&amp;gt;&quot;);
            inStartElement = false;
        }
&lt;p&gt; else &lt;/p&gt;
{
            write(&quot;&amp;lt;/&quot;);
            write(qName);
            write(&apos;&amp;gt;&apos;);
        }
&lt;p&gt;        // &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1070&quot; title=&quot;StackOverflow error in org.apache.tika.sax.ToXMLContentHandler$ElementInfo.getPrefix(ToXMLContentHandler.java:58)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1070&quot;&gt;&lt;del&gt;TIKA-1070&lt;/del&gt;&lt;/a&gt; &lt;br/&gt;
        currentElement = currentElement.parent;&lt;br/&gt;
        namespaces.clear();&lt;br/&gt;
    } &lt;/p&gt;

&lt;p&gt;as initially posted the &quot;currentElement = currentElement.parent&quot; statement solves the issue&lt;/p&gt;

&lt;p&gt;thx&lt;br/&gt;
   Dietmar&lt;/p&gt;</comment>
                            <comment id="13635070" author="gagravarr" created="Thu, 18 Apr 2013 11:30:53 +0100"  >&lt;p&gt;Any chance you could turn this suggested fix into a patch?&lt;/p&gt;</comment>
                            <comment id="13636142" author="dglachs" created="Fri, 19 Apr 2013 07:52:38 +0100"  >&lt;p&gt;Patch for ToXMLContentHandler - simply adding the proposed line to endElement-Method&lt;/p&gt;</comment>
                            <comment id="13693106" author="gagravarr" created="Tue, 25 Jun 2013 16:00:30 +0100"  >&lt;p&gt;None of our XML gurus have spotted a problem with this, so I&apos;ve gone ahead and applied it (with a doc tweak) in r1496507, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579498" name="ToXMLContentHandler.java.patch" size="604" author="dglachs" created="Fri, 19 Apr 2013 07:52:38 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Feb 2013 16:54:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzbgfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>