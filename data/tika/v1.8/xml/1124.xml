<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:28:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1124/TIKA-1124.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1124] Nested documents not extracted if a PDF file is in the chain</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1124</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Tika 1.3 is not able to get attachments from the attached PDF.&lt;br/&gt;
The trunk is able to get attachments from the PDF.  However, if that PDF is then embedded in another document, the docs embedded in the PDF are not extracted.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure of a solution, but I found two things that might help with the diagnosis:&lt;br/&gt;
1) If you modify the code in PDFParser so that it doesn&apos;t wrap the handler in a BodyContentHandler, everything works (in trunk).&lt;br/&gt;
2) If you modify BodyContentHandler to use my toy SimpleBodyMatchingContentHandler, the problem is also solved.&lt;/p&gt;

&lt;p&gt;The cause may be in the MatchingContentHandler.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12649161">TIKA-1124</key>
            <summary>Nested documents not extracted if a PDF file is in the chain</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 May 2013 19:43:12 +0100</created>
                <updated>Thu, 8 Aug 2013 19:18:22 +0100</updated>
                            <resolved>Thu, 8 Aug 2013 19:18:22 +0100</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>general</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13665479" author="tallison@mitre.org" created="Thu, 23 May 2013 19:45:16 +0100"  >&lt;p&gt;outer.docx contains the attached.pdf, which itself contains an attachment.  Toy examples of avoiding the use of MatchingContentHandler also attached.&lt;/p&gt;</comment>
                            <comment id="13729781" author="tallison@mitre.org" created="Mon, 5 Aug 2013 19:42:21 +0100"  >&lt;p&gt;If anyone has a chance to look into this, I&apos;d appreciate it.  I suspect something is going awry with the recursion in the triggering documents + xpath query in MatchingContentHandler. Thank you!&lt;/p&gt;</comment>
                            <comment id="13729903" author="tallison@mitre.org" created="Mon, 5 Aug 2013 21:39:30 +0100"  >&lt;p&gt;Ok, I think I figured this out... AbstractOOXML includes contents from embedded documents before calling handler.endDocument()&lt;br/&gt;
PDFParser, however, calls handler.endDocument() and then tries to append content from embedded documents.&lt;br/&gt;
I think this means that the parent handler sees an end of body and therefore does not process the contents of the embedded document.&lt;/p&gt;

&lt;p&gt;trivial fix: move handler.endDocument() out of PDF2XHTML and call it after processing the embedded documents in PDFParser.&lt;/p&gt;

&lt;p&gt;Unless I hear otherwise, I&apos;ll commit this over the next few days.&lt;/p&gt;</comment>
                            <comment id="13730226" author="tallison@mitre.org" created="Tue, 6 Aug 2013 01:49:14 +0100"  >&lt;p&gt;Chose to move embedded file code into PDF2XHTML.  This allows the proper closing of &amp;lt;/body&amp;gt; with the PDF2XHTML&apos;s XHTMLContentHandler.  Will strip Windows noise before committing, but I wanted to submit this draft in case anyone wants to review it.&lt;/p&gt;</comment>
                            <comment id="13730649" author="gagravarr" created="Tue, 6 Aug 2013 12:04:18 +0100"  >&lt;p&gt;I don&apos;t know the PDF code well, but at first glance the patch looks good&lt;/p&gt;

&lt;p&gt;One thing that might be good would be to expand the test a little bit, to check that all the correct parts were found, and in the right order. POIContainerExtractionTest has some examples of doing that for other embedded resources, so might be worth a look for a guide&lt;/p&gt;</comment>
                            <comment id="13733799" author="tallison@mitre.org" created="Thu, 8 Aug 2013 19:18:22 +0100"  >&lt;p&gt;Added tests (thanks to Nick&apos;s advice to use model of POIContainerExtractionTest).  Committed r1511901&lt;br/&gt;
and r1511908.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12596255" name="TIKA-1124.patch" size="12431" author="tallison@mitre.org" created="Tue, 6 Aug 2013 01:49:14 +0100"/>
                            <attachment id="12584547" name="pdf_attachment_issues.zip" size="44847" author="tallison@mitre.org" created="Thu, 23 May 2013 19:45:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Aug 2013 11:04:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzeosf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329823</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>