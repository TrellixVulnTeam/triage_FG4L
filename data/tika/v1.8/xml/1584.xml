<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:35:03 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1584/TIKA-1584.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1584] Tika 1.7 possible regression (nested attachment files not getting parsed)</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1584</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I tried to send this to the tika user list, but got a qmail failure so I am opening a jira to see if I can get help with this.&lt;/p&gt;

&lt;p&gt;There appears to be a change in the behavior of tika since 1.5 (the last version we have used). In 1.5, if we pass a file with content type of rfc822 which contains a zip that contains a docx file, the entire content would get recursed and the text returned. In 1.7, tika only unwinds as far as the zip file and ignores the content of the contained docx file. This is causing a regression failure in our search tests because the contents of the docx file are not found when searched for.&lt;/p&gt;

&lt;p&gt;We are testing with tika-server if this helps. If we ask the meta service to just characterize the test data, it correctly determines the input is of type rfc822. However, on extract, the contents of the attachment are not extracted as expected.&lt;/p&gt;

&lt;p&gt;curl -X PUT -T test.eml -q -H Content-Type:application/octet-stream  &lt;a href=&quot;http://localhost:9998/meta&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:9998/meta&lt;/a&gt; 2&amp;gt;/dev/null | grep Content-Type&lt;br/&gt;
&quot;Content-Type&quot;,&quot;message/rfc822&quot;&lt;/p&gt;

&lt;p&gt;curl -X PUT -T test.eml -q -H Content-Type:application/octet-stream  &lt;a href=&quot;http://localhost:9998/tika&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:9998/tika&lt;/a&gt; 2&amp;gt;/dev/null | grep docx&lt;br/&gt;
sign.docx       &amp;lt;&amp;lt;&amp;lt;&amp;lt;--- this is not expected, need contents of this extracted&lt;/p&gt;


&lt;p&gt;We can easily reproduce this problem with a simple eml file with an attachment. Can someone please comment if this seems like a problem or perhaps we need to change something in our call to get the old behavior?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12786450">TIKA-1584</key>
            <summary>Tika 1.7 possible regression (nested attachment files not getting parsed)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison@mitre.org">Tim Allison</assignee>
                                    <reporter username="rtulloh">Rob Tulloh</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Mar 2015 14:21:35 +0000</created>
                <updated>Mon, 30 Mar 2015 17:05:39 +0100</updated>
                            <resolved>Mon, 30 Mar 2015 15:01:21 +0100</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14385328" author="rtulloh" created="Sat, 28 Mar 2015 14:26:48 +0000"  >&lt;p&gt;If the .zip file is passed to tika, it shows the same behavior.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl -X PUT -T sign.zip -H Content-Type:application/octet-stream  http://localhost:9998/tika 2&amp;gt;/dev/null

sign.docx

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14385440" author="tallison@mitre.org" created="Sat, 28 Mar 2015 18:01:49 +0000"  >&lt;p&gt;Able to attach example triggering doc?  By &quot;same behavior&quot; do you mean that a docx inside a zip is not extracted with /tika? Any luck w /rmeta?&lt;/p&gt;</comment>
                            <comment id="14385463" author="tallison@mitre.org" created="Sat, 28 Mar 2015 18:49:19 +0000"  >&lt;p&gt;Just checked svn. That&apos;s a major regression added in 1.7 when we added specification of ParseContext. We need to add the Parser to the ParseContext to get recursive parsing. W/o use of ParseContext in call to parse, the parser used to work recursively. Will fix Monday unless someone beats me to it. Thank you for raising this. No need to attach test doc.&lt;/p&gt;</comment>
                            <comment id="14385472" author="rtulloh" created="Sat, 28 Mar 2015 19:00:08 +0000"  >&lt;p&gt;Thank you. For what it&apos;s worth, it easy to reproduce. Just zip any document you want and then pass the zip file to tika server and see what it gives back. As 1.7 is released, does this mean that this won&apos;t be fixed until 1.8 or would 1.7 get re-released/patched?&lt;/p&gt;</comment>
                            <comment id="14385477" author="tallison@mitre.org" created="Sat, 28 Mar 2015 19:07:25 +0000"  >&lt;p&gt;IMHO this is major enough for a fix asap. Whether that&apos;s 1.7.1 with just this fix or a full cut of trunk as 1.8 is up to all devs. Tika colleagues, what do you think?&lt;/p&gt;</comment>
                            <comment id="14385483" author="tpalsulich" created="Sat, 28 Mar 2015 19:16:11 +0000"  >&lt;p&gt;We now have two major issues which need a quick release. So, I would say go for 1.8. Tim, can you chime in on the current discuss thread?&lt;/p&gt;</comment>
                            <comment id="14385494" author="rtulloh" created="Sat, 28 Mar 2015 19:26:21 +0000"  >&lt;p&gt;I would vote for a release as we have been waiting for tika-1371and were hoping to upgrade to 1.7&lt;/p&gt;</comment>
                            <comment id="14386729" author="tallison@mitre.org" created="Mon, 30 Mar 2015 15:01:21 +0100"  >&lt;p&gt;r1670095.&lt;/p&gt;

&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rtulloh&quot; class=&quot;user-hover&quot; rel=&quot;rtulloh&quot;&gt;Rob Tulloh&lt;/a&gt;, for raising this issue!&lt;/p&gt;

&lt;p&gt;To confirm:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika &amp;#8211; I added recursive parsing back into /tika for both xml and txt&lt;/li&gt;
	&lt;li&gt;/meta &amp;#8211; this does not process recursively.&lt;/li&gt;
	&lt;li&gt;/rmeta &amp;#8211; this still works as designed.  The recursive parser wrapper adds the parser into ParseContext on its own&lt;/li&gt;
	&lt;li&gt;/unpacker &amp;#8211; this adds its own recursive handler to the ParseContext &amp;#8211; no change needed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Are there any other services that might have been affected by this regression?&lt;/p&gt;</comment>
                            <comment id="14386765" author="hudson" created="Mon, 30 Mar 2015 15:34:27 +0100"  >&lt;p&gt;FAILURE: Integrated in tika-trunk-jdk1.7 #585 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/585/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/585/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1584&quot; title=&quot;Tika 1.7 possible regression (nested attachment files not getting parsed)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1584&quot;&gt;&lt;del&gt;TIKA-1584&lt;/del&gt;&lt;/a&gt;: fixed regression in Tika 1.7 that prevents processing of embedded docs with /tika service (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1670095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1670095&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/resource/MetadataResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/resource/RecursiveMetadataResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/resource/TikaResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/TikaResourceTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14386899" author="rtulloh" created="Mon, 30 Mar 2015 17:01:33 +0100"  >&lt;p&gt;Thanks for the quick turn around to fixing this. Expected to release as a fix to 1.7?&lt;/p&gt;</comment>
                            <comment id="14386903" author="tallison@mitre.org" created="Mon, 30 Mar 2015 17:04:02 +0100"  >&lt;p&gt;Community voted to cut release candidate from trunk as 1.8.  Thank you, again, for raising this. &lt;/p&gt;</comment>
                            <comment id="14386906" author="tpalsulich" created="Mon, 30 Mar 2015 17:04:39 +0100"  >&lt;p&gt;Yup! The 1.8 release process should start this week. Ideally, it will hit the mirrors some time next week.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;edit: 1.8, not 1.7!&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Mar 2015 18:01:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|i01eav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>