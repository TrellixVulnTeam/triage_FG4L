<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:30:41 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1375/TIKA-1375.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1375] Decrease memory consumption when extracting images from PDFs</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1375</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;This patch applies changes made in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2101&quot; title=&quot;Surprising memory consumption when extracting images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2101&quot;&gt;&lt;del&gt;PDFBOX-2101&lt;/del&gt;&lt;/a&gt; to decrease memory consumption during extraction of embedded images.  This also applies the recommendation by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;Tilman Hausherr&lt;/a&gt; on the PDFBox dev &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/pdfbox-dev/201407.mbox/%3c53CFF0CE.9090507@t-online.de%3e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;list &lt;/a&gt; to clear resources after handling each page.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12729459">TIKA-1375</key>
            <summary>Decrease memory consumption when extracting images from PDFs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison@mitre.org">Tim Allison</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jul 2014 14:47:49 +0100</created>
                <updated>Sat, 26 Jul 2014 09:29:43 +0100</updated>
                            <resolved>Fri, 25 Jul 2014 12:50:46 +0100</resolved>
                                                    <fixVersion>1.6</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14074306" author="tallison@mitre.org" created="Fri, 25 Jul 2014 12:38:52 +0100"  >&lt;p&gt;I ran four versions of Tika against a random selection of 10k pdfs from govdocs1 to make sure that there wouldn&apos;t be any surprises if we added the three calls to clear().  These were all single-threaded runs on an 8GB linux vm.&lt;/p&gt;

&lt;p&gt;The first run was the most recent SNAPSHOT (1.6 Baseline). The second run was after the three calls to clear() were added, but because embedded images are by default not extracted, the only one that was ever actually called was the one at the end of each page.  The third run was the 1.6 SNAPSHOT/Baseline with image extraction turned on, and the fourth was the clear() version with image extraction turned on.  &lt;/p&gt;

&lt;p&gt;There were the same number of exceptions across all versions.  Within the &quot;without image extraction&quot; pairs, the number of metadata elements was exactly the same, and within the &quot;with image extraction&quot; pairs, the number of metadata elements was exactly the same. &lt;/p&gt;

&lt;p&gt;Adding .clear() improved speed when not extracting images and decreased speed by a much smaller amount (percentage-wise) when extracting images.&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Run&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Average Millis&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Median Millis&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tika 1.6 Baseline&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;272.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;113.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tika 1.6 Page.clear()&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;243.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;85.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tika 1.6 Baseline Image Extraction&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;861.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;120.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tika 1.6 Image Extraction w/ 3x clear()&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;888.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;124.0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Memory profiling tests remain, but this is enough evidence to me of &quot;do no harm&quot; that I think we should make these changes.&lt;/p&gt;</comment>
                            <comment id="14074312" author="tallison@mitre.org" created="Fri, 25 Jul 2014 12:50:47 +0100"  >&lt;p&gt;fixed r1613395.&lt;/p&gt;

&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;Tilman Hausherr&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lehmi&quot; class=&quot;user-hover&quot; rel=&quot;lehmi&quot;&gt;Andreas Lehmk&#252;hler&lt;/a&gt; for your work on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-2101&quot; title=&quot;Surprising memory consumption when extracting images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-2101&quot;&gt;&lt;del&gt;PDFBOX-2101&lt;/del&gt;&lt;/a&gt; and advice on this issue!&lt;/p&gt;</comment>
                            <comment id="14074358" author="hudson" created="Fri, 25 Jul 2014 13:49:04 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #118 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/118/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/118/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1375&quot; title=&quot;Decrease memory consumption when extracting images from PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1375&quot;&gt;&lt;del&gt;TIKA-1375&lt;/del&gt;&lt;/a&gt;: decrease memory consumption when extracting images in PDFs (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1613395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1613395&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDF2XHTML.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14075303" author="hudson" created="Sat, 26 Jul 2014 09:29:43 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #116 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/116/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/116/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1375&quot; title=&quot;Decrease memory consumption when extracting images from PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1375&quot;&gt;&lt;del&gt;TIKA-1375&lt;/del&gt;&lt;/a&gt;: decrease memory consumption when extracting images in PDFs (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1613395&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1613395&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDF2XHTML.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12717072">PDFBOX-2101</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12713662">TIKA-1294</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Jul 2014 12:49:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrzgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>