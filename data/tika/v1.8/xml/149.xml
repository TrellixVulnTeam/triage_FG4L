<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:35:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-149/TIKA-149.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-149] Parser for zip files</title>
                <link>https://issues.apache.org/jira/browse/TIKA-149</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Tika should be able to parse zip files. The resulting XHTML document should be something like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;xhtml&amp;gt;&lt;br/&gt;
  &amp;lt;head&amp;gt;...&amp;lt;/head&amp;gt;&lt;br/&gt;
  &amp;lt;body&amp;gt;&lt;br/&gt;
    &amp;lt;div class=&quot;file&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;h1&amp;gt;path/to/file/inside/the/zip&amp;lt;/h1&amp;gt;&lt;br/&gt;
        ... (parsed contents of the file)&lt;br/&gt;
    &amp;lt;/div&amp;gt;&lt;br/&gt;
    ...&lt;br/&gt;
  &amp;lt;/body&amp;gt;&lt;br/&gt;
&amp;lt;/xhtml&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401289">TIKA-149</key>
            <summary>Parser for zip files</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jul 2008 09:26:26 +0100</created>
                <updated>Fri, 22 May 2009 23:05:29 +0100</updated>
                            <resolved>Thu, 4 Sep 2008 17:41:28 +0100</resolved>
                                                    <fixVersion>0.2</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12619396" author="davemeikle" created="Mon, 4 Aug 2008 02:27:31 +0100"  >&lt;p&gt;Patch to implement basic Zip Parser.&lt;/p&gt;</comment>
                            <comment id="12619397" author="davemeikle" created="Mon, 4 Aug 2008 02:29:05 +0100"  >&lt;p&gt;Patch for basic Zip Parser......With actual new file in it this time - it has been a long day &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12619460" author="jukkaz" created="Mon, 4 Aug 2008 11:08:54 +0100"  >&lt;p&gt;Looks good, though I don&apos;t think we need to copy the zip entries to temporary files before parsing. Also, instead of using ParseUtils.getParser, how about using an instance variable and a setter method for the delegate parser?&lt;/p&gt;</comment>
                            <comment id="12620011" author="davemeikle" created="Tue, 5 Aug 2008 20:22:07 +0100"  >&lt;p&gt;Sorry, should have just manipulated the stream. Not sure about the delegate parser though, as each file may require a different parser. I have just updated the code to use the AutoDetectParser but if you can see the other use case it can be changed for the seperate setter method for the delegate parser.&lt;/p&gt;</comment>
                            <comment id="12620012" author="davemeikle" created="Tue, 5 Aug 2008 20:24:35 +0100"  >&lt;p&gt;update removing temp file creation.&lt;/p&gt;</comment>
                            <comment id="12620060" author="davemeikle" created="Tue, 5 Aug 2008 22:50:25 +0100"  >&lt;p&gt;Update to remove temporary file creation and import tidy&lt;/p&gt;</comment>
                            <comment id="12620181" author="jukkaz" created="Wed, 6 Aug 2008 10:02:46 +0100"  >&lt;p&gt;Thanks for the update!&lt;/p&gt;

&lt;p&gt;I was thinking that you could simply pass the &quot;zis&quot; stream to the underlying parser... This way you wouldn&apos;t need to spool the content to a temporary buffer or file.&lt;/p&gt;

&lt;p&gt;Also, my idea of the delegate parser was that you don&apos;t instantiate it inside the parse() method, but instead use an instance variable (that perhaps defaults to AutoDetectParser) that can be set by the client. This way the client has full control over how the zip entries get parsed. The problem with the original ParseUtils.getParser() call with TikaConfig.getDefaultConfig() was that the client couldn&apos;t override the parsing mechanism other than by changing the default configuration.&lt;/p&gt;</comment>
                            <comment id="12620200" author="davemeikle" created="Wed, 6 Aug 2008 11:08:52 +0100"  >&lt;p&gt;The problem is when using the zis directly if during a parse the stream is closed you cannot access the next file in the ZIP. Using the stream manipulation you can.&lt;/p&gt;

&lt;p&gt;I see what you mean about the delegate parser. In Tika what is the preferred approach for setting instance variables like this, via constructors or getters/setters.&lt;/p&gt;</comment>
                            <comment id="12620217" author="jukkaz" created="Wed, 6 Aug 2008 12:25:26 +0100"  >&lt;p&gt;You can use the CloseShieldInputStream wrapper from commons-io to prevent the zis stream from being closed. Also, note that the general contract of the parse() method is that the parser should &lt;em&gt;not&lt;/em&gt; close the stream.&lt;/p&gt;

&lt;p&gt;&amp;gt; In Tika what is the preferred approach for setting instance variables like this, via constructors or getters/setters.&lt;/p&gt;

&lt;p&gt;I&apos;d use getter/setter methods, with some reasonable default value like in this case the AutoDetectParser.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/io/api-release/org/apache/commons/io/input/CloseShieldInputStream.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/io/api-release/org/apache/commons/io/input/CloseShieldInputStream.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12620367" author="davemeikle" created="Wed, 6 Aug 2008 19:28:23 +0100"  >&lt;p&gt;Updated patch to include getters/setter for parser&lt;/p&gt;</comment>
                            <comment id="12628379" author="jukkaz" created="Thu, 4 Sep 2008 17:41:28 +0100"  >&lt;p&gt;Applied the patch (plus the Apache header on ZipParser.java) in revision 692148. Good work, thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387595" name="TIKA-149-II.diff" size="4908" author="davemeikle" created="Tue, 5 Aug 2008 22:50:25 +0100"/>
                            <attachment id="12387666" name="TIKA-149-III.diff" size="4805" author="davemeikle" created="Wed, 6 Aug 2008 19:28:23 +0100"/>
                            <attachment id="12387444" name="TIKA-149.patch" size="5064" author="davemeikle" created="Mon, 4 Aug 2008 02:29:05 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Aug 2008 01:27:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx5kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17221</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>