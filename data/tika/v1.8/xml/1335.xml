<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:28:42 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1335/TIKA-1335.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1335] mime type for CSV files incorrectly detected as text/plain</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1335</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Mime type autodetection returns &quot;text/plain&quot; for CSV files, for example:&lt;/p&gt;

&lt;p&gt;% tika -m foo.csv&lt;br/&gt;
Content-Encoding: ISO-8859-1&lt;br/&gt;
Content-Length: 78&lt;br/&gt;
Content-Type: text/plain; charset=ISO-8859-1&lt;br/&gt;
resourceName: foo.csv&lt;/p&gt;

&lt;p&gt;This occurs regardless of whether the filename has the appropriate *.csv extension or not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721015">TIKA-1335</key>
            <summary>mime type for CSV files incorrectly detected as text/plain</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chrismattmann">Chris A. Mattmann</assignee>
                                    <reporter username="kxu">Kaijian Xu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jun 2014 01:02:13 +0100</created>
                <updated>Sat, 14 Jun 2014 21:04:15 +0100</updated>
                            <resolved>Sat, 14 Jun 2014 19:59:07 +0100</resolved>
                                    <version>1.5</version>
                    <version>1.6</version>
                                    <fixVersion>1.6</fixVersion>
                                    <component>mime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14030078" author="kxu" created="Fri, 13 Jun 2014 01:13:14 +0100"  >&lt;p&gt;My actual goal is to provide mime type detection of &lt;em&gt;arbitrary&lt;/em&gt; file types using TikaJAXRS, so I&apos;ve also observed that:&lt;br/&gt;
% curl -T foo.csv &lt;a href=&quot;http://localhost:9998/meta&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:9998/meta&lt;/a&gt; &lt;br/&gt;
&quot;Content-Encoding&quot;,&quot;ISO-8859-1&quot;&lt;br/&gt;
&quot;Content-Type&quot;,&quot;text/plain; charset=ISO-8859-1&quot;&lt;/p&gt;

&lt;p&gt;In fact, it will even override an explicitly provided content type:&lt;br/&gt;
% curl -T foo.csv &lt;a href=&quot;http://localhost:9998/meta&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:9998/meta&lt;/a&gt; --header &quot;Content-Type: text/csv&quot;&lt;br/&gt;
&quot;Content-Encoding&quot;,&quot;ISO-8859-1&quot;&lt;br/&gt;
&quot;Content-Type&quot;,&quot;text/plain; charset=ISO-8859-1&quot;&lt;/p&gt;

&lt;p&gt;Whereas the usual behavior is for the explicitly given type to be honored, e.g.&lt;br/&gt;
% curl -T bar.png &lt;a href=&quot;http://localhost:9998/meta&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:9998/meta&lt;/a&gt; --header &quot;Content-Type: text/plain&quot;&lt;br/&gt;
&quot;Content-Encoding&quot;,&quot;IBM866&quot;&lt;br/&gt;
&quot;Content-Type&quot;,&quot;text/plain; charset=IBM866&quot;&lt;/p&gt;</comment>
                            <comment id="14030230" author="chrismattmann" created="Fri, 13 Jun 2014 04:34:04 +0100"  >&lt;p&gt;Thanks KJ, will take a look.&lt;/p&gt;</comment>
                            <comment id="14030231" author="chrismattmann" created="Fri, 13 Jun 2014 04:34:30 +0100"  >&lt;p&gt;BTW folks, KJ is at USC and another one of my students I&apos;m directing at Tika this summer and beyond! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; KJ, feel like introducing yourself on dev@tika.apache.org?&lt;/p&gt;</comment>
                            <comment id="14030427" author="gagravarr" created="Fri, 13 Jun 2014 10:37:37 +0100"  >&lt;p&gt;That&apos;s not the right way to trigger detection though, you want `tika --detect foo.csv`, which will return `text/csv` as expected&lt;/p&gt;

&lt;p&gt;The mime type in the header, from the metadata, is set by the parser. Since we don&apos;t have an explicit CSV parser, it gets handled by the default text one&lt;/p&gt;

&lt;p&gt;We might want to add a detector endpoint to the JAXRS server, but that&apos;ll need to be a new JIRA!&lt;/p&gt;</comment>
                            <comment id="14030437" author="hudson" created="Fri, 13 Jun 2014 11:03:46 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #43 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/43/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/43/&lt;/a&gt;)&lt;br/&gt;
Add a test CSV file, based on the Excel one, and a unit test shows it gets detected correctly. Also mark CSV as explicitly being a child of text/plain, rather than the previous implicit definition, to avoid confusion. &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1335&quot; title=&quot;mime type for CSV files incorrectly detected as text/plain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1335&quot;&gt;&lt;del&gt;TIKA-1335&lt;/del&gt;&lt;/a&gt; (nick: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602352&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602352&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/testCSV.csv&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14030483" author="hudson" created="Fri, 13 Jun 2014 11:51:18 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #44 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/44/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/44/&lt;/a&gt;)&lt;br/&gt;
Add a test CSV file, based on the Excel one, and a unit test shows it gets detected correctly. Also mark CSV as explicitly being a child of text/plain, rather than the previous implicit definition, to avoid confusion. &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1335&quot; title=&quot;mime type for CSV files incorrectly detected as text/plain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1335&quot;&gt;&lt;del&gt;TIKA-1335&lt;/del&gt;&lt;/a&gt; (nick: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602352&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602352&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/main/resources/org/apache/tika/mime/tika-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/mime/TestMimeTypes.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/testCSV.csv&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14030817" author="chrismattmann" created="Fri, 13 Jun 2014 17:36:38 +0100"  >&lt;p&gt;Nick committed some better MIME detection in r1602352. I think we need to expose the detector interface via JAX-RS and Nick filed an issue for this in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1336&quot; title=&quot;Provide a Detector JAXRS endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1336&quot;&gt;&lt;del&gt;TIKA-1336&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14031456" author="chrismattmann" created="Sat, 14 Jun 2014 05:36:34 +0100"  >&lt;p&gt;Nick, I tried the --detect on the CDEC example KJ added:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[chipotle:tika/tika-app/target] mattmann% java -jar tika-app-1.6-SNAPSHOT.jar --detect $HOME/Desktop/CDEC_WEATHER_2010_03_02 
text/plain
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this is with the latest example that you checked in. That doesn&apos;t seem to take care of the file, mainly I think b/c it&apos;s missing the extension. I realize that CSV is a sub-type of text/plain and this one is hard to detect - I wonder if we should put in like tab characters as early on MAGIC for CSV detection. there doesn&apos;t seem to be any MAGIC or precedence for this.&lt;/p&gt;

&lt;p&gt;I tried on the .csv example, that seemed to work fine.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[chipotle:tika/tika-app/target] mattmann% java -jar tika-app-1.6-SNAPSHOT.jar --detect $HOME/Desktop/foo.csv 
text/csv
[chipotle:tika/tika-app/target] mattmann% 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I almost have a patch ready for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1336&quot; title=&quot;Provide a Detector JAXRS endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1336&quot;&gt;&lt;del&gt;TIKA-1336&lt;/del&gt;&lt;/a&gt;, I will be attaching it soon. It&apos;s a start at the detection JAX-RS interface. I&apos;ll update the wiki with docs and also am going to add a unit test. It doesn&apos;t seem to work though on the CDEC example for the same reason, however it works for csv.&lt;/p&gt;</comment>
                            <comment id="14031492" author="gagravarr" created="Sat, 14 Jun 2014 07:59:48 +0100"  >&lt;p&gt;I don&apos;t think we&apos;re going to be able to write mime matchers that reliably detect CSV, not least because there&apos;s so many variants of it (tab? comma? quoted? double quoted? escaped?)&lt;/p&gt;</comment>
                            <comment id="14031614" author="chrismattmann" created="Sat, 14 Jun 2014 17:34:46 +0100"  >&lt;p&gt;well, I&apos;ll try and make some progress, either way.&lt;/p&gt;</comment>
                            <comment id="14031653" author="chrismattmann" created="Sat, 14 Jun 2014 19:58:57 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kxu&quot; class=&quot;user-hover&quot; rel=&quot;kxu&quot;&gt;Kaijian Xu&lt;/a&gt; see the update I committed in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1336&quot; title=&quot;Provide a Detector JAXRS endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1336&quot;&gt;&lt;del&gt;TIKA-1336&lt;/del&gt;&lt;/a&gt; - and the docs on the wiki for JaxRS: &lt;a href=&quot;https://wiki.apache.org/tika/TikaJAXRS&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://wiki.apache.org/tika/TikaJAXRS&lt;/a&gt; I think this should take care of your detections for now, so long as you provide the filename hint or trick in the Content-Disposition header. I&apos;m marking this as resolved for now, please open up a new more specific issue if this doesn&apos;t deal with your fix.&lt;/p&gt;</comment>
                            <comment id="14031654" author="chrismattmann" created="Sat, 14 Jun 2014 19:59:07 +0100"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;per issue comments&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14031674" author="hudson" created="Sat, 14 Jun 2014 20:44:46 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #46 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/46/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/46/&lt;/a&gt;)&lt;br/&gt;
Update docs for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1335&quot; title=&quot;mime type for CSV files incorrectly detected as text/plain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1335&quot;&gt;&lt;del&gt;TIKA-1335&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1336&quot; title=&quot;Provide a Detector JAXRS endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1336&quot;&gt;&lt;del&gt;TIKA-1336&lt;/del&gt;&lt;/a&gt;. (mattmann: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602618&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602618&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14031681" author="hudson" created="Sat, 14 Jun 2014 21:04:15 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #46 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/46/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/46/&lt;/a&gt;)&lt;br/&gt;
Update docs for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1335&quot; title=&quot;mime type for CSV files incorrectly detected as text/plain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1335&quot;&gt;&lt;del&gt;TIKA-1335&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1336&quot; title=&quot;Provide a Detector JAXRS endpoint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1336&quot;&gt;&lt;del&gt;TIKA-1336&lt;/del&gt;&lt;/a&gt;. (mattmann: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602618&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1602618&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12721068">TIKA-1336</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12650185" name="CDEC_WEATHER_2010_03_02" size="8316" author="kxu" created="Fri, 13 Jun 2014 01:03:17 +0100"/>
                            <attachment id="12650184" name="foo.csv" size="78" author="kxu" created="Fri, 13 Jun 2014 01:03:17 +0100"/>
                            <attachment id="12650186" name="velocity.csv" size="732" author="kxu" created="Fri, 13 Jun 2014 01:03:17 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Jun 2014 03:34:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqkxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>