<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:37:52 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-849/TIKA-849.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-849] Identify and parse the Apple iBooks format</title>
                <link>https://issues.apache.org/jira/browse/TIKA-849</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;With the release of iBooks Author 1.0, Apple have created a new eBook format very similar to ePub. Tika could be extended to identify and parse this new format, re-using the existing ePub code wherever possible.&lt;/p&gt;

&lt;p&gt;I have created an initial patch, which I will attach to this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539464">TIKA-849</key>
            <summary>Identify and parse the Apple iBooks format</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="anjackson">Andrew Jackson</reporter>
                        <labels>
                            <label>new-parser</label>
                    </labels>
                <created>Mon, 23 Jan 2012 13:30:18 +0000</created>
                <updated>Mon, 2 Mar 2015 02:21:05 +0000</updated>
                                            <version>1.1</version>
                                                    <component>mime</component>
                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13191148" author="anjackson" created="Mon, 23 Jan 2012 13:34:42 +0000"  >&lt;p&gt;This patch identifies &amp;#42;.ibooks files, and passes them through the ePub parser. Unfortunately, the content of the eBook is not extracted successfully. I&apos;m not sure why this is, and feedback would be appreciated here. I think the content&amp;#42;.xhtml files are actually HTML5 and it seems that the current XHTML-based parser is unable to parse them. A unit test and test file is included.&lt;/p&gt;</comment>
                            <comment id="13191242" author="gagravarr" created="Mon, 23 Jan 2012 16:30:34 +0000"  >&lt;p&gt;Sample file committed in r1234886, along with a unit test for Zip Container Aware detection of epub files (epub seems to use the same scheme as the Open Document Format does)&lt;/p&gt;</comment>
                            <comment id="13191259" author="gagravarr" created="Mon, 23 Jan 2012 17:11:07 +0000"  >&lt;p&gt;Test and parser change committed in r1234904, thanks&lt;/p&gt;

&lt;p&gt;It looks like all the text is stored within things like&lt;br/&gt;
   &amp;lt;object type=&quot;application/x-ibooks+shape&quot; id=&quot;textShape-89&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;It&apos;s all in regular html div tags inside those objects, though sometimes that object is nested inside another of type &quot;application/x-ibooks+flowhead&quot;&lt;/p&gt;

&lt;p&gt;Images seem to be within svg tags&lt;/p&gt;

&lt;p&gt;I guess we&apos;ll need to do something for the ibooks case to treat these objects as regular xhtml?&lt;/p&gt;</comment>
                            <comment id="13192074" author="anjackson" created="Tue, 24 Jan 2012 11:28:44 +0000"  >&lt;p&gt;I&apos;m not that familiar with the content handling infrastructure of Tika at present, so I&apos;m having trouble working out how to do this. I can see the ePubParser delegating the content handling to the ePubContentParser which uses an XHTMLContentHandler, but I don&apos;t really understand that code well enough to see why it discards the &amp;lt;object&amp;gt; elements and lets the others through. Or perhaps that filtering is done at a later stage?&lt;/p&gt;

&lt;p&gt;In any case, I suppose we would need a new iBooksParser and a new iBooksContentParser, based on the ePub code, but using a different ContentHandler?&lt;/p&gt;</comment>
                            <comment id="13192078" author="anjackson" created="Tue, 24 Jan 2012 11:53:41 +0000"  >&lt;p&gt;By the way, I notice you added a&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;sub-class-of type=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/epub+zip&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to the iBooks identification information. I&apos;m not sure this is correct, as I was under the impression that this was a strict conformance hierarchy. This would imply that every x-ibooks+zip also conforms to the epub+zip format, but this is not the case, because the new MIME type declaration means it violates the ePub standard.&lt;/p&gt;</comment>
                            <comment id="13192079" author="gagravarr" created="Tue, 24 Jan 2012 11:58:34 +0000"  >&lt;p&gt;We might be able to use the same handler, but it&apos;d need one of our XML experts to weigh in and say for sure!&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed a bug in r1235215 where start/end document was being called for each html/xhtml file, which solves the use of --metadata from TikaCLI but doesn&apos;t affect the text extraction&lt;/p&gt;

&lt;p&gt;For the mimetype subtype, I thought it made sense as both use the same structure and a very similar format. If you think that&apos;s wrong, we could maybe invent a common supertype for the two, to show their relation&lt;/p&gt;</comment>
                            <comment id="13217999" author="anjackson" created="Tue, 28 Feb 2012 08:27:41 +0000"  >&lt;p&gt;Having thought about it, I think your proposed sub-type relationship is a more sensible approach, and my interpretation of the relationship was overly strict.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511494" name="ibooks-support.patch" size="1090609" author="anjackson" created="Mon, 23 Jan 2012 13:34:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jan 2012 16:30:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx19b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>