<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:35:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-936/TIKA-936.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-936] encoding of ZipArchiveInputStream</title>
                <link>https://issues.apache.org/jira/browse/TIKA-936</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;When extracting from the zip files which are zipped at Windows OS(Japanese), the file name extracted from zip is garbled.&lt;/p&gt;

&lt;p&gt;ZipArchiveInputStream has three constructors. Modifying like the below, the file name was not garbled. I specified the encoding - SJIS.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;PackageExtractor&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void parse(InputStream stream)
 :
 &lt;span class=&quot;code-comment&quot;&gt;//unpack(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveInputStream(stream), xhtml);  
&lt;/span&gt; unpack(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZipArchiveInputStream(stream,&lt;span class=&quot;code-quote&quot;&gt;&quot;SJIS&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;), xhtml); 
 :
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In first constructor &lt;del&gt;the platform&apos;s default encoding&lt;/del&gt; UTF-8 is used.  In my case the encoding of my computer is UTF-8, the encoding of zip file is SJIS, so the file name was garbled. We will get garbled file name if there is a difference of  encoding between &lt;del&gt;platform&lt;/del&gt; this constructor and zip file.&lt;/p&gt;

&lt;p&gt;I want Tika to parse zip by giving some kind of encoding parameter per file, Where should I give the encoding, somewhere in Metadata or ParseContext? Please support this. I am using Tika via Solr(SolrCell), so when posting zip file to Solr I want to add encoding parameter to the request.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12558398">TIKA-936</key>
            <summary>encoding of ZipArchiveInputStream</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chrismattmann">Chris A. Mattmann</assignee>
                                    <reporter username="shinichiro abe">Shinichiro Abe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2012 09:36:08 +0100</created>
                <updated>Fri, 6 Feb 2015 20:42:39 +0000</updated>
                            <resolved>Fri, 6 Feb 2015 19:43:33 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13284665" author="shinichiro abe" created="Tue, 29 May 2012 09:37:53 +0100"  >&lt;p&gt;Here is a zip file. The file name extracted from zip is garbled.&lt;/p&gt;</comment>
                            <comment id="13285537" author="gagravarr" created="Wed, 30 May 2012 10:59:19 +0100"  >&lt;p&gt;I&apos;ve tried with Unzip, and I get garbage too, so it looks like Windows isn&apos;t storing the encoding used anywhere useful in the file&lt;/p&gt;

&lt;p&gt;I think the ParseContext would be the right place for it. We probably want to check to see if any other archive formats suffer from this issue too, and fix any of those at the same time&lt;/p&gt;</comment>
                            <comment id="13404455" author="jukkaz" created="Sat, 30 Jun 2012 12:29:16 +0100"  >&lt;p&gt;I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-192&quot; title=&quot;Allow setting of the zip encoding in ArchiveStreamFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-192&quot;&gt;&lt;del&gt;COMPRESS-192&lt;/del&gt;&lt;/a&gt; for a change in Commons Compress that&apos;ll make it easier for us to do this.&lt;/p&gt;</comment>
                            <comment id="13974110" author="jukkaz" created="Fri, 18 Apr 2014 15:21:42 +0100"  >&lt;p&gt;In revision 1588474 I made it possible to pass a customized &lt;tt&gt;ArchiveStreamFactory&lt;/tt&gt; instance through the parse context. The required client code looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ArchiveStreamFactory factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArchiveStreamFactory();
factory.setEntryEncoding(&lt;span class=&quot;code-quote&quot;&gt;&quot;SJIS&quot;&lt;/span&gt;);
context.set(ArchiveStreamFactory.class, factory);
parser.parse(..., context);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See also the test case I added in &lt;tt&gt;ZipParserTest&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Note that this feature applies also to the other archive types supported by Commons Compress. Also, if the UTF-8 flag of a particular zip file is set, then the given encoding is ignored and UTF-8 is used to decode entry names within that zip file.&lt;/p&gt;</comment>
                            <comment id="13978018" author="shinichiro abe" created="Wed, 23 Apr 2014 10:15:07 +0100"  >&lt;p&gt;Thanks Jukka! I made a link to Solr.&lt;/p&gt;</comment>
                            <comment id="14306931" author="githubbot" created="Thu, 5 Feb 2015 09:52:49 +0000"  >&lt;p&gt;GitHub user kongxianghe1234 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/27&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/pull/27&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Update RarParser.java&lt;/p&gt;

&lt;p&gt;    if you want to detect a file which has chinese-like fileName ? this way you did will be error.&lt;br/&gt;
    details &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-936&quot; title=&quot;encoding of ZipArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-936&quot;&gt;&lt;del&gt;TIKA-936&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kongxianghe1234/tika&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kongxianghe1234/tika&lt;/a&gt; patch-1&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/27.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/pull/27.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #27&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6d3913047980521df07ae10922a6c4233dadbb52&lt;br/&gt;
Author: &#23380;&#31077;&#21644;  JavaMiner &amp;lt;kong1011437633@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-02-05T09:52:41Z&lt;/p&gt;

&lt;p&gt;    Update RarParser.java&lt;/p&gt;

&lt;p&gt;    if you want to detect a file which has chinese-like fileName ? this way you did will be error.&lt;br/&gt;
    details &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-936&quot; title=&quot;encoding of ZipArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-936&quot;&gt;&lt;del&gt;TIKA-936&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14309736" author="githubbot" created="Fri, 6 Feb 2015 19:42:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/27&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/pull/27&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14309738" author="chrismattmann" created="Fri, 6 Feb 2015 19:43:33 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Thanks for the patch in pull request #27, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kongxianghe1234&quot; class=&quot;user-hover&quot; rel=&quot;kongxianghe1234&quot;&gt;kongxianghe&lt;/a&gt; I committed this in r1657933. Cheers!&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14309874" author="hudson" created="Fri, 6 Feb 2015 20:42:39 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #474 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/474/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/474/&lt;/a&gt;)&lt;br/&gt;
Patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-936&quot; title=&quot;encoding of ZipArchiveInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-936&quot;&gt;&lt;del&gt;TIKA-936&lt;/del&gt;&lt;/a&gt; Fix for RarParser for handling Chinese characters contributed by kongxianghe1234 &amp;lt;kong1011437633@gmail.com&amp;gt;. This closes #27. (mattmann: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1657933&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1657933&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pkg/RarParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12709982">SOLR-6007</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12596500">COMPRESS-192</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12530019" name="x-&#26085;&#26412;&#35486;&#12513;&#12514;.zip" size="160" author="shinichiro abe" created="Tue, 29 May 2012 09:37:53 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 May 2012 09:59:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx0pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16436</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>