<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:37:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-915/TIKA-915.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-915] Image geodata being rounded to integers</title>
                <link>https://issues.apache.org/jira/browse/TIKA-915</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;This was initially reported as an Alfresco issue, &lt;a href=&quot;https://issues.alfresco.com/jira/browse/ALF-13004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.alfresco.com/jira/browse/ALF-13004&lt;/a&gt;, but is actually a Tika problem. It seems that for some images, the geo metadata is being incorrectly rounded to an integer:&lt;/p&gt;

&lt;p&gt;   $ tika --metadata 2012-02-19\ 16.43.29.jpg | grep --text geo&lt;br/&gt;
   geo:lat: 51.0&lt;br/&gt;
   geo:long: -1.0&lt;/p&gt;

&lt;p&gt;The image was actually taken at (as extracted by exiftool)&lt;/p&gt;

&lt;p&gt;   $ exiftool 2012-02-19\ 16.43.29.jpg | grep GPS&lt;br/&gt;
   ....&lt;br/&gt;
   GPS Altitude                    : 295 m Above Sea Level&lt;br/&gt;
   GPS Date/Time                   : 2012:02:20 16:44:22Z&lt;br/&gt;
   GPS Latitude                    : 51 deg 34&apos; 32.74&quot; N&lt;br/&gt;
   GPS Longitude                   : 1 deg 34&apos; 4.39&quot; W&lt;br/&gt;
   GPS Position                    : 51 deg 34&apos; 32.74&quot; N, 1 deg 34&apos; 4.39&quot; W&lt;/p&gt;

&lt;p&gt;The sample file for this example is available at &amp;lt;&lt;a href=&quot;https://issues.alfresco.com/jira/secure/attachment/29236/2012-02-19+16.43.29.jpg&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.alfresco.com/jira/secure/attachment/29236/2012-02-19+16.43.29.jpg&lt;/a&gt;&amp;gt;. We do have the OK to use the photo in a test suite, but it&apos;s possibly a bit big as-is so we may need to resize it whilst preserving the exif data for a unit test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554331">TIKA-915</key>
            <summary>Image geodata being rounded to integers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgauss">Ray Gauss II</assignee>
                                    <reporter username="gagravarr">Nick Burch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 May 2012 15:51:59 +0100</created>
                <updated>Thu, 2 May 2013 03:29:54 +0100</updated>
                            <resolved>Mon, 30 Jul 2012 19:19:45 +0100</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13271395" author="rgauss" created="Wed, 9 May 2012 14:11:26 +0100"  >&lt;p&gt;Unfortunately this looks like an issue with the Drew Noakes library, possibly in this file: &lt;a href=&quot;http://code.google.com/p/metadata-extractor/source/browse/trunk/Source/com/drew/metadata/exif/GpsDescriptor.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/metadata-extractor/source/browse/trunk/Source/com/drew/metadata/exif/GpsDescriptor.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Shall I investigate further or are there plans to move away from this library?&lt;/p&gt;</comment>
                            <comment id="13271400" author="rgauss" created="Wed, 9 May 2012 14:24:02 +0100"  >&lt;p&gt;Attached is a patch which includes a test which demonstrates the failure and a smaller version of the example file.&lt;/p&gt;

&lt;p&gt;Unfortunately the patch also contains some of the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-859&quot; title=&quot;DublinCore Metadata Keys Should be Prefixed and Property Objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-859&quot;&gt;&lt;del&gt;TIKA-859&lt;/del&gt;&lt;/a&gt; in the test class so you can ignore those.&lt;/p&gt;

&lt;p&gt;Also, the grant of license only applies to the patch, license to use the image was obtained by Nick.&lt;/p&gt;</comment>
                            <comment id="13271443" author="gagravarr" created="Wed, 9 May 2012 15:24:01 +0100"  >&lt;p&gt;While I can see some users wanting to call out to exiftool to do the metadata parsing, many will want a pure Java solution. I believe the Drew Noakes library is the best pure Java one available under a suitable license, and so we&apos;ll need to stick with it.&lt;/p&gt;

&lt;p&gt;If you have some time, would you be able to look into doing a bug report to Drew Noakes (ideally with a unit test, and maybe even a patch!)&lt;/p&gt;</comment>
                            <comment id="13271452" author="gagravarr" created="Wed, 9 May 2012 15:34:33 +0100"  >&lt;p&gt;Thanks for the test Ray, I&apos;ve committed it (disabled!) in r1336225. We can enable it once it&apos;s all fixed upstream&lt;/p&gt;</comment>
                            <comment id="13274632" author="rgauss" created="Mon, 14 May 2012 15:54:59 +0100"  >&lt;p&gt;I&apos;ve investigated the latest release, 2.5.0-RC3, of the Drew Noakes library and the bit of code that handles the geo extraction and parsing has in fact been updated and works with this particular image file.&lt;/p&gt;

&lt;p&gt;Unfortunately there are two issues in moving to that release:&lt;/p&gt;

&lt;p&gt;1) 2.4.0-beta-1 (the version we currently use) is still the latest available in maven central repository.&lt;/p&gt;

&lt;p&gt;2) Major refactoring has been done on the Noakes side, and while I have completed much of that work locally there&apos;s still a fair amount to be done.&lt;/p&gt;

&lt;p&gt;I can complete that work on issue 2 if there&apos;s consensus on when and how we solve issue 1.&lt;/p&gt;
</comment>
                            <comment id="13274669" author="gagravarr" created="Mon, 14 May 2012 16:13:11 +0100"  >&lt;p&gt;If need be, we can ask for an updated version to be loaded into Maven Central. I believe that the best practice would be to ask Drew if he&apos;d mind uploading the new version himself. If he&apos;s not interested in doing that, then you can ask to package and upload it&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(It takes a couple of days to get set up, so don&apos;t expect to rush it!)&lt;/p&gt;</comment>
                            <comment id="13275097" author="rgauss" created="Tue, 15 May 2012 01:44:37 +0100"  >&lt;p&gt;I&apos;ve emailed Mr. Noakes.&lt;/p&gt;</comment>
                            <comment id="13281910" author="rgauss" created="Wed, 23 May 2012 22:00:00 +0100"  >&lt;p&gt;Still no response from Mr. Noakes but he has just released two new versions: &lt;a href=&quot;https://groups.google.com/forum/?fromgroups#!topic/metadata-extractor-announce/EhveUDBb78o&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://groups.google.com/forum/?fromgroups#!topic/metadata-extractor-announce/EhveUDBb78o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve tried once more via the google project dev list.  If there&apos;s no response by next week I&apos;ll begin the procedure to push it myself.&lt;/p&gt;</comment>
                            <comment id="13286565" author="rgauss" created="Thu, 31 May 2012 14:46:28 +0100"  >&lt;p&gt;Great news.  Mr. Noakes is in the process of getting things setup to push to Maven Central repo.&lt;/p&gt;

&lt;p&gt;He hit a snag with Adobe&apos;s XMPCore not being available but I pinged J&#246;rg Ehrlich who informed me that Adobe was already working on making that artifact available, and it&apos;s live now.&lt;/p&gt;</comment>
                            <comment id="13405808" author="ehsavoie" created="Tue, 3 Jul 2012 12:12:47 +0100"  >&lt;p&gt;Be careful there seems to be some incompatibilities between the xmpcore in the maven repositories and the one used to compile metadata-extractor 2.6.2.&lt;br/&gt;
&lt;a href=&quot;https://code.google.com/p/metadata-extractor/issues/detail?id=55&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://code.google.com/p/metadata-extractor/issues/detail?id=55&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13419568" author="rgauss" created="Fri, 20 Jul 2012 21:59:47 +0100"  >&lt;p&gt;I ended up pushing version 2.6.2 of the Drew Noakes metadata-extractor library to Sonatype myself &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and it has been synced to central &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.  I&apos;ll hopefully have some time in the next few weeks to work on refactoring Tika for the changes in the library since 2.4.0-beta-1.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://code.google.com/p/metadata-extractor/issues/detail?id=39#c15&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/metadata-extractor/issues/detail?id=39#c15&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://search.maven.org/#browse%7C930506482&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search.maven.org/#browse%7C930506482&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13420586" author="ehsavoie" created="Mon, 23 Jul 2012 12:55:41 +0100"  >&lt;p&gt;The patch for Tika has already been pushed : &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-811&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TIKA-811&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13424643" author="rgauss" created="Mon, 30 Jul 2012 00:26:43 +0100"  >&lt;p&gt;Resolved in r1366967&lt;/p&gt;</comment>
                            <comment id="13424818" author="rgauss" created="Mon, 30 Jul 2012 13:33:43 +0100"  >&lt;p&gt;Resolved by r1366967&lt;/p&gt;</comment>
                            <comment id="13425082" author="rgauss" created="Mon, 30 Jul 2012 19:17:33 +0100"  >&lt;p&gt;Reopening this as the metadata-extractor library is adding false precision and we should be rounding its result.&lt;/p&gt;</comment>
                            <comment id="13425085" author="rgauss" created="Mon, 30 Jul 2012 19:19:45 +0100"  >&lt;p&gt;Moved the decimal formatting from the JpegParserTest to the GeotagHandler in r1367205.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12534920">TIKA-811</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12526156" name="problem_jpeg_geo_test.diff" size="6956" author="rgauss" created="Wed, 9 May 2012 14:24:02 +0100"/>
                            <attachment id="12526155" name="testJPEG_GEO_2.jpg" size="20844" author="rgauss" created="Wed, 9 May 2012 14:24:02 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 May 2012 13:11:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx0un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16457</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>