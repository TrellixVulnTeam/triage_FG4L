<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:30:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1302/TIKA-1302.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1302] Let&apos;s run Tika against a large batch of docs nightly</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1302</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Many thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lewismc&quot; class=&quot;user-hover&quot; rel=&quot;lewismc&quot;&gt;Lewis John McGibbney&lt;/a&gt; for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1301&quot; title=&quot;Establish TikaServer on Apache hosted VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1301&quot;&gt;TIKA-1301&lt;/a&gt;!  Once we get nightly builds up and running again, it might be fun to run Tika regularly against a large set of docs and report metrics.&lt;/p&gt;

&lt;p&gt;One excellent candidate corpus is govdocs1: &lt;a href=&quot;http://digitalcorpora.org/corpora/files&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://digitalcorpora.org/corpora/files&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Any other candidate corpora?  &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=willp-bl&quot; class=&quot;user-hover&quot; rel=&quot;willp-bl&quot;&gt;William Palmer&lt;/a&gt;, have anything handy you&apos;d like to contribute? &lt;br/&gt;
&lt;a href=&quot;http://www.openplanetsfoundation.org/blogs/2014-03-21-tika-ride-characterising-web-content-nanite&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.openplanetsfoundation.org/blogs/2014-03-21-tika-ride-characterising-web-content-nanite&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12714862">TIKA-1302</key>
            <summary>Let&apos;s run Tika against a large batch of docs nightly</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 May 2014 20:55:45 +0100</created>
                <updated>Mon, 1 Dec 2014 12:58:37 +0000</updated>
                                                                            <component>cli</component>
                    <component>general</component>
                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                                                            <comments>
                            <comment id="14001532" author="willp-bl" created="Mon, 19 May 2014 10:23:21 +0100"  >&lt;p&gt;This one might be worth a look - &lt;a href=&quot;https://github.com/openplanets/format-corpus&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/openplanets/format-corpus&lt;/a&gt; - Some of the files there are (intentionally) broken, and some are there as examples of format features (i.e. PDF with password, embedded fonts etc)  If the license is not clear enough for any files then please raise an issue, sure people will be glad to help.&lt;/p&gt;

&lt;p&gt;Unfortunately I can&apos;t share any of the web content I describe using in that blog post.&lt;/p&gt;</comment>
                            <comment id="14001612" author="jnioche" created="Mon, 19 May 2014 12:53:37 +0100"  >&lt;p&gt;How large do you want that batch to be? If we are talking millions of pages, one option would be to use the Tika module of  Behemoth on the CommonCrawl dataset. See &lt;a href=&quot;http://digitalpebble.blogspot.co.uk/2011/05/processing-enron-dataset-using-behemoth.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://digitalpebble.blogspot.co.uk/2011/05/processing-enron-dataset-using-behemoth.html&lt;/a&gt; for a comparable  work we did some time ago on the Enron dataset. Behemoth already has a module for ingesting data from CommonCrawl. This means of course having Hadoop up and running.&lt;/p&gt;

&lt;p&gt;Alternatively it would be simple to extract the documents from the CC dataset into the server&apos;s filesystem and use the TikaServer without Hadoop. Not sure what the legal implications of using these documents would be though.&lt;/p&gt;

&lt;p&gt;The beauty of using the CommonCrawl dataset is that apart from volume, it is a good sample of the web with all the weird and beautiful things it contains (broken documents, large ones, etc...)&lt;/p&gt;


</comment>
                            <comment id="14002918" author="willp-bl" created="Tue, 20 May 2014 09:07:09 +0100"  >&lt;p&gt;Ross Spencer has made the openplanets format-corpus I mentioned above more usable, see &lt;a href=&quot;https://github.com/ross-spencer/opf-format-corpus/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ross-spencer/opf-format-corpus/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Ref:  &lt;a href=&quot;https://twitter.com/beet_keeper/status/468626971337838593&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://twitter.com/beet_keeper/status/468626971337838593&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14004069" author="chrismattmann" created="Tue, 20 May 2014 23:25:37 +0100"  >&lt;p&gt;GovDocs - Giuseppe Totaro from the University of Rome (PhD student there) has been working on this dataset and even has a paper to report out on. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gostep&quot; class=&quot;user-hover&quot; rel=&quot;gostep&quot;&gt;Giuseppe Totaro&lt;/a&gt; can you comment on this one?&lt;/p&gt;</comment>
                            <comment id="14004103" author="gostep" created="Wed, 21 May 2014 00:05:19 +0100"  >&lt;p&gt;Thank you Chris.&lt;/p&gt;

&lt;p&gt;I&apos;m working with Tika against large set of data. Govdocs1 represents a good choice in order to test Tika performance with a large amount of heterogeneous documents. By using Tika 1.4, I noticed that about 10% of govdocs1 files are not correctly parsed.&lt;br/&gt;
Unfortunately, each file of govdocs1 corpus has the same metadata properties (&lt;a href=&quot;http://digitalcorpora.org/corpora/files&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://digitalcorpora.org/corpora/files&lt;/a&gt;), so this corpus does not provide the possibility to realistically test metadata extraction.&lt;br/&gt;
After our paper will be published in proceedings, I will happy to describe results more in details and share them with the community.&lt;br/&gt;
Now, we&apos;re working also with other corpora constructed by ourself starting from realistic (unclassified) disk images.&lt;/p&gt;

&lt;p&gt;I hope to meet your interests.&lt;/p&gt;</comment>
                            <comment id="14004592" author="tallison@mitre.org" created="Wed, 21 May 2014 12:39:54 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jnioche&quot; class=&quot;user-hover&quot; rel=&quot;jnioche&quot;&gt;Julien Nioche&lt;/a&gt;, very cool corpus. My dream would be to run Tika via hadoop against a corpus that big, diverse and noisy whenever there&apos;s a commit (or better yet, let developers upload their mods as a tika-server, go for a cup of coffee and come back to see the results).  For initial steps, govdocs1 seems like a great start...perhaps we could include a random sample from CC downloaded to Apache servers if that is consistent with both Apache and CC licenses?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrismattmann&quot; class=&quot;user-hover&quot; rel=&quot;chrismattmann&quot;&gt;Chris A. Mattmann&lt;/a&gt;, thank you for pointing out &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gostep&quot; class=&quot;user-hover&quot; rel=&quot;gostep&quot;&gt;Giuseppe Totaro&lt;/a&gt;&apos;s work!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gostep&quot; class=&quot;user-hover&quot; rel=&quot;gostep&quot;&gt;Giuseppe Totaro&lt;/a&gt;, please post a link to your work to this issue when it is published.  Are there any evaluation components that you&apos;d like to contribute?  Do you think there would be a way to share your datasets?  And, finally, I&apos;m not sure what you mean by all of the metadata is the same.  I am just getting started with the govdocs corpus...when I open up two different pdf files, the have different pdf versions, different authors, different producers. &lt;/p&gt;</comment>
                            <comment id="14006015" author="gostep" created="Thu, 22 May 2014 16:27:41 +0100"  >&lt;p&gt;Hi Tim,&lt;/p&gt;

&lt;p&gt;I refer to metadata schema of each govdocs1 file. In &lt;a href=&quot;http://digitalcorpora.org/corpora/files&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://digitalcorpora.org/corpora/files&lt;/a&gt;, you can read:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The following metadata is provided for each of the files:&lt;/p&gt;

&lt;p&gt;The URL from which the file was downloaded.&lt;br/&gt;
The date and time of the download.&lt;br/&gt;
The search term that was used.&lt;br/&gt;
The search engine that provided the document.&lt;br/&gt;
The length and SHA1 of the file.&lt;br/&gt;
A Simple Dublin Core for the file.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Of course when our paper will be published I&apos;ll try to explain more detail our work and dataset.&lt;/p&gt;</comment>
                            <comment id="14006118" author="tallison@mitre.org" created="Thu, 22 May 2014 17:47:03 +0100"  >&lt;p&gt;Ok, I think we might be talking about different things.  For example, when I pull the metadata out of 002454 with Tika 1.5, I see: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[{
dcterms:modified&quot;:[&quot;2004-05-26T15:31:39Z&quot;],
&quot;meta:creation-date&quot;:[&quot;2004-05-26T15:31:31Z&quot;],
&quot;meta:save-date&quot;:[&quot;2004-05-26T15:31:39Z&quot;],
&quot;dc:creator&quot;:[&quot;Slimjimbob&quot;],
&quot;Last-Modified&quot;:[&quot;2004-05-26T15:31:39Z&quot;],
&quot;Author&quot;:[&quot;Slimjimbob&quot;],
&quot;dcterms:created&quot;:[&quot;2004-05-26T15:31:31Z&quot;],
date&quot;:[&quot;2004-05-26T15:31:39Z&quot;],
&quot;modified&quot;:[&quot;2004-05-26T15:31:39Z&quot;],
&quot;creator&quot;:[&quot;Slimjimbob&quot;],
&quot;xmpTPg:NPages&quot;:[&quot;1&quot;],
&quot;Creation-Date&quot;:[&quot;2004-05-26T15:31:31Z&quot;],
&quot;title&quot;:[&quot;CoverMay/June04.qxd&quot;],
&quot;meta:author&quot;:[&quot;Slimjimbob&quot;],
&quot;created&quot;:[&quot;Wed May 26 11:31:31 EDT 2004&quot;],
&quot;producer&quot;:[&quot;Acrobat Distiller 5.00 for Macintosh&quot;],
&quot;Content-Type&quot;:[&quot;application/pdf&quot;],
&quot;xmp:CreatorTool&quot;:[&quot;QuarkXPress. 4.04: LaserWriter 8 8.7.1&quot;],
&quot;Last-Save-Date&quot;:[&quot;2004-05-26T15:31:39Z&quot;],
&quot;dc:title&quot;:[&quot;CoverMay/June04.qxd&quot;]
}]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This includes more than is available here:&lt;br/&gt;
[ 002454  | &lt;a href=&quot;http://digitalcorpora.org/cgi-bin/info.cgi?docid=002454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://digitalcorpora.org/cgi-bin/info.cgi?docid=002454&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Are you saying that there is no metadata truth set against which to evaluate or are we using &quot;metadata&quot; to mean different things?  &lt;/p&gt;

&lt;p&gt;Thank you again, and I look forward to seeing your paper!&lt;/p&gt;</comment>
                            <comment id="14007132" author="tallison@mitre.org" created="Fri, 23 May 2014 13:53:29 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrismattmann&quot; class=&quot;user-hover&quot; rel=&quot;chrismattmann&quot;&gt;Chris A. Mattmann&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gagravarr&quot; class=&quot;user-hover&quot; rel=&quot;gagravarr&quot;&gt;Nick Burch&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lewismc&quot; class=&quot;user-hover&quot; rel=&quot;lewismc&quot;&gt;Lewis John McGibbney&lt;/a&gt; and All,&lt;br/&gt;
  Would it be ok to start trying to work on this on the vm that Lewis just had set up for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1301&quot; title=&quot;Establish TikaServer on Apache hosted VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1301&quot;&gt;TIKA-1301&lt;/a&gt;?  I figure we can take baby steps on that and  if this kind of process turns out to be useful to the community and we need more resources then we can set up a separate vm.&lt;/p&gt;</comment>
                            <comment id="14007199" author="chrismattmann" created="Fri, 23 May 2014 15:32:01 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt; this is a good question &amp;#8211; the VM that lewis set up I believe is so that anyone can try out Tika via the JAX-RS service. I would imagine if we do the large batch of docs nightly test (which I think would be awesome, btw) we&apos;ll need to figure out the specs we would need and then compare it to the VM that lewis just had set up. How much RAM, CPU, disk etc do you think we&apos;ll need Tim?&lt;/p&gt;</comment>
                            <comment id="14007348" author="tallison@mitre.org" created="Fri, 23 May 2014 17:48:49 +0100"  >&lt;p&gt;Y, that&apos;s an important question.  All depends on size of corpus and what we want for processing time.&lt;/p&gt;

&lt;p&gt;Let&apos;s assume we start with govdocs1 or a sample of it.&lt;/p&gt;

&lt;p&gt;Complete back of envelope...&lt;/p&gt;

&lt;p&gt;On my laptop (4 cores with -Xmx1g), it takes a multithreaded indexer ~40 seconds to index 1000 files from govdocs1 (let&apos;s assume the time to index is roughly equivalent to the time it&apos;ll take to write out the diagnostic stuff we&apos;ll want to record for each file).&lt;/p&gt;

&lt;p&gt;That would be 10k files in 6.6 minutes, 100k files in a bit more than an hour and 1M files in 11 hours.&lt;/p&gt;

&lt;p&gt;So, if wanted to start small, we could start with 100k.  The full govdocs1 takes up 470GB.  A 100k sample would take up roughly 47GB.&lt;/p&gt;

&lt;p&gt;We&apos;d want probably (ballpark) 10x input corpus size to store the output so that we can compare different versions of Tika.  So, 0.5 TB.  Let&apos;s double that for some growth: 1 TB.&lt;/p&gt;

&lt;p&gt;So, with a modest 4 cores, let&apos;s say 4 GB RAM, and 1 TB of storage, we could run Tika against 100k files in a bit more than an hour.  Add another few minutes to compare output for comparison statistics.&lt;/p&gt;

&lt;p&gt;***These numbers are based on a purely in-memory run.  We&apos;ll probably want to run against a server (not the public one, of course) so that&apos;ll add some to the time.&lt;/p&gt;

&lt;p&gt;Do these numbers jibe with what others are experiencing?&lt;/p&gt;

&lt;p&gt;The big gotcha, of course, is that we&apos;ll want to harden the server and/or create a server daemon to restart the server(s) for OOM and infinite hangs.  But I think those features are badly needed and this project will give good motivation for these improvements.&lt;/p&gt;
</comment>
                            <comment id="14018448" author="chrismattmann" created="Thu, 5 Jun 2014 04:44:45 +0100"  >&lt;p&gt;+1 this sounds good to me, Tim.&lt;/p&gt;</comment>
                            <comment id="14020346" author="hudson" created="Fri, 6 Jun 2014 21:46:34 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #29 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/29/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/29/&lt;/a&gt;)&lt;br/&gt;
fix potential null pointer exception in PDFParser; found while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt; (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1600996&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1600996&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14020362" author="hudson" created="Fri, 6 Jun 2014 22:01:42 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #29 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/29/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/29/&lt;/a&gt;)&lt;br/&gt;
fix potential null pointer exception in PDFParser; found while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt; (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1600996&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1600996&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14043524" author="tpalsulich" created="Wed, 25 Jun 2014 15:20:55 +0100"  >&lt;p&gt;Are there any updates with this? We have the VM we need for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1301&quot; title=&quot;Establish TikaServer on Apache hosted VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1301&quot;&gt;TIKA-1301&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/INFRA-7751&quot; title=&quot;Create a VM for Apache Tika&quot; class=&quot;issue-link&quot; data-issue-key=&quot;INFRA-7751&quot;&gt;&lt;del&gt;INFRA-7751&lt;/del&gt;&lt;/a&gt;). So, we get the nightly build running, then we add this on top?&lt;/p&gt;</comment>
                            <comment id="14043561" author="lewismc" created="Wed, 25 Jun 2014 15:50:15 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;So, we get the nightly build running, then we add this on top?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not quite. The aim of the VM established in &lt;a href=&quot;https://issues.apache.org/jira/browse/INFRA-7751&quot; title=&quot;Create a VM for Apache Tika&quot; class=&quot;issue-link&quot; data-issue-key=&quot;INFRA-7751&quot;&gt;&lt;del&gt;INFRA-7751&lt;/del&gt;&lt;/a&gt; is to get a web application/service running there. This requires work on both &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-894&quot; title=&quot;Add webapp mode for Tika Server, simplifies deployment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-894&quot;&gt;TIKA-894&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1269&quot; title=&quot;Self-hosted documentation for the JAX-RS Server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1269&quot;&gt;&lt;del&gt;TIKA-1269&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14044668" author="tallison@mitre.org" created="Thu, 26 Jun 2014 14:56:41 +0100"  >&lt;p&gt;Agreed.&lt;/p&gt;

&lt;p&gt;If there&apos;s a grad student with some time on his/her hands interested in helping out on this issue, there&apos;s still plenty to do.  Especially on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1332&quot; title=&quot;Create &amp;quot;eval&amp;quot; code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1332&quot;&gt;TIKA-1332&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14044891" author="lewismc" created="Thu, 26 Jun 2014 18:23:11 +0100"  >&lt;p&gt;I would love to work with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt; to address the issues as above. If we could address this in the near future then it would be a large step forward for Tika&apos;s public exposure and would enable further understading of how to embed Tika in applications based on the REST API and WebService endpoint. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt;, please state whether these issues are of interest to you.&lt;/p&gt;</comment>
                            <comment id="14045781" author="tpalsulich" created="Fri, 27 Jun 2014 11:05:39 +0100"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lewismc&quot; class=&quot;user-hover&quot; rel=&quot;lewismc&quot;&gt;Lewis John McGibbney&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt;. I&apos;m definitely interested in helping out with these issues. I&apos;ll read up and/or comment on them over the next few days.&lt;/p&gt;</comment>
                            <comment id="14166931" author="tallison@mitre.org" created="Fri, 10 Oct 2014 15:53:02 +0100"  >&lt;p&gt;I just transitioned development on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt; subtasks (&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1330&quot; title=&quot;Add robust tika-batch code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1330&quot;&gt;&lt;del&gt;TIKA-1330&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1332&quot; title=&quot;Create &amp;quot;eval&amp;quot; code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1332&quot;&gt;TIKA-1332&lt;/a&gt;) to my fork on github under the &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt; branch (&lt;a href=&quot;https://github.com/tballison/tika/tree/TIKA-1302&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/tballison/tika/tree/TIKA-1302&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14176892" author="anjackson" created="Mon, 20 Oct 2014 14:15:05 +0100"  >&lt;p&gt;At the UK Web Archive we run Apache Tika over all our collections (it&apos;s been run over about 4 billion resources so far). We record the results in Apache Solr, to act as a search facet, and we also collect the Exceptions that are thrown when Tika fails. We can&apos;t make the content available to you directly, but perhaps there are datasets we can produce that would be useful to you? e.g. would a list of the exceptions that we&apos;ve seen (along with the URL to the resource that caused the exception) be of interest?&lt;/p&gt;</comment>
                            <comment id="14176900" author="kkrugler" created="Mon, 20 Oct 2014 14:44:16 +0100"  >&lt;p&gt;Andrew - that sounds amazing! Could you provide an example of such an exception, so we could see what information is currently being captured? And do you have any idea how many (of the 4B) are failing, and thus the size of the exception list? Thanks.&lt;/p&gt;</comment>
                            <comment id="14176934" author="anjackson" created="Mon, 20 Oct 2014 15:39:29 +0100"  >&lt;p&gt;I have 2,358,167 errors from one collection (2 billion resources), but the majority are SAXParseExceptions. It&apos;s made up of UK web archive content from 1996-2010, so there&apos;s lots of broken HTML/XML in there. If I strip out the SAXParseExceptions, there&apos;s just 317,548 miscellaneous errors, that are perhaps more interesting. &lt;/p&gt;

&lt;p&gt;Here&apos;s an example including the SAX exceptions:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
wayback_date,url,content_length,content_type_tika,parse_error
20100713041445,http://www.expedia.co.uk:80/pub/agent.dll/qscr=dspv/nojs=1/htid=2737187,org.xml.sax.SAXParseException: The markup in the document following the root element must be well-formed.
20091017141202,http://www.expedia.co.uk:80/pub/agent.dll/qscr=dspv/nojs=1/htid=34830/crti=4/hotel-pictures,&quot;org.xml.sax.SAXParseException: Open quote is expected for attribute &quot;&quot;ID&quot;&quot; associated with an  element type  &quot;&quot;COMMENT&quot;&quot;.&quot;
20091017143741,http://www.madfun.co.uk:80/-10?ref=31,org.xml.sax.SAXParseException: The markup in the document following the root element must be well-formed.
20061020021825,http://reservations.talkingcities.co.uk:80/nexres/hotels/map_hotels.cgi?hid=10055548&amp;amp;map_only=yes&amp;amp;type=overview,org.xml.sax.SAXParseException: The markup in the document following the root element must be well-formed.
20061020022224,http://www.ravensportal.co.uk:80/forum/index.php?PHPSESSID=1688184d9bb881cfc73600b1670ecaf5&amp;amp;amp;type=rss;action=.xml,org.xml.sax.SAXParseException: The character reference must end with the &apos;;&apos; delimiter.
20101227142905,http://www.etc-online.co.uk:80/style4.asp?pn=courses&amp;amp;sn=26,org.xml.sax.SAXParseException: The markup in the document following the root element must be well-formed.
20060926015856,http://www.qca.org.uk/4412.html,&quot;org.xml.sax.SAXParseException: The entity &quot;&quot;nbsp&quot;&quot; was referenced\, but not declared.&quot;
20040827075658,http://users.ox.ac.uk:80/~sedm1731/Work/Ex%20parte%20St%20Germain.doc,java.lang.ArrayIndexOutOfBoundsException: -1
20030124193820,http://www.mgcars.org.uk:80/cgi-bin/gen5?runprog=porter&amp;amp;cov=&amp;amp;mode=buy&amp;amp;o=4854130936&amp;amp;code=9123&amp;amp;cu=&amp;amp;,&quot;org.xml.sax.SAXParseException: The element type &quot;&quot;META&quot;&quot; must be terminated by the matching end-tag &quot;&quot;&amp;lt;/META&amp;gt;&quot;&quot;.&quot;
20100121205831,http://www.epupz.co.uk:80/clas/viewdetails.asp?view=307389,org.xml.sax.SAXParseException: The entity name must immediately follow the &apos;&amp;amp;&apos; in the entity reference.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...and for the others...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
wayback_date,url,content_length,content_type_tika,parse_error
20100928070438,http://redtyger.co.uk/discuss/projectexternal.php,7524,application/rss+xml,java.lang.NullPointerException: null
20040827075658,http://users.ox.ac.uk:80/~sedm1731/Work/Ex%20parte%20St%20Germain.doc,44997,application/msword,java.lang.ArrayIndexOutOfBoundsException: -1
20060303154606,http://www.dfes.gov.uk:80/rsgateway/DB/SFR/s000286/sfr37-2001.doc,562004,application/msword,java.lang.IllegalArgumentException: Position 698368 past the end of the file
20041225033311,http://members.lycos.co.uk:80/worldofradio/distance.pdf,57891,application/pdf,org.apache.pdfbox.exceptions.CryptographyException: Error: The supplied password does not match either the owner or user password in the document.
20041121095540,http://scom.hud.ac.uk:80/scomzl/conference/chenhua/040528_01E/PDP2148.pdf,191115,application/pdf,&quot;java.io.IOException: Error: Expected a long type\, actual=&apos;25#0/&apos;&quot;
20041121095849,http://scom.hud.ac.uk:80/scomzl/conference/chenhua/040528_01E/SER2549.pdf,157148,application/pdf,java.util.zip.DataFormatException: oversubscribed literal/length tree
20041121100005,http://scom.hud.ac.uk:80/scomzl/conference/chenhua/040528_01E/MSV_Foreword.pdf,12773,application/pdf,java.util.zip.DataFormatException: oversubscribed dynamic bit lengths tree
20060925090249,http://www2.rgu.ac.uk/library_edocs/resource/exam/0405engineering/EN3581%20OFFSHORE%20ENGINEERING.pdf,1684742,application/pdf,org.apache.pdfbox.exceptions.CryptographyException: Error: The supplied password does not match either the owner or user password in the document.
20060925091406,http://www2.rgu.ac.uk/library_edocs/resource/exam/0304engineering/EE31060304s1.pdf,149238,application/pdf,org.apache.pdfbox.exceptions.CryptographyException: Error: The supplied password does not match either the owner or user password in the document.
20040612212128,http://www.swhst.org.uk:80/Linked%20Files/spr%20contact%20addresses.xls,23040,application/vnd.ms-excel,org.apache.poi.EncryptedDocumentException: Default password is invalid for docId/saltData/saltHash
20051111183952,http://freeweb.co.uk:80/show_nw.php?ref=258&amp;amp;target=B&amp;amp;show=aff&amp;amp;PHPSESSID=a150a130c58fcea048866fb965ef7dfb,232436,text/html; charset=iso-8859-1,org.apache.tika.sax.SecureContentHandler$SecureSAXException: Suspected zip bomb: 100 levels of XML element nesting
20071025140555,http://www.honleyhigh.kirklees.sch.uk/MFL/MFL_Links/PowerPoint%20Presentations/German/Geryear-9-future-tense.ppt,2664960,application/vnd.ms-powerpoint,&quot;org.apache.poi.hslf.exceptions.OldPowerPointFormatException: Based on the Current User stream\, you seem to have supplied a PowerPoint95 file\, which isn&apos;t supported&quot;
20071207004337,http://www.jisc.org.uk/uploaded_documents/e-port-brief.ppt,155136,application/vnd.ms-powerpoint,java.lang.ArrayIndexOutOfBoundsException: 20
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first two columns identify the item. The next two are the size of the item in bytes, and the result of using Tika to identity the format (.detect only, no parse). The last column contains the first line of the parse exception(s).&lt;/p&gt;

&lt;p&gt;Note that to download the original item, you can get them from the Internet archive using this template: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
http://web.archive.org/web/{wayback_date}/{url}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;i.e. for the last exception listed above, you can download the item at: &lt;a href=&quot;http://web.archive.org/web/20071207004337/http://www.jisc.org.uk/uploaded_documents/e-port-brief.ppt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://web.archive.org/web/20071207004337/http://www.jisc.org.uk/uploaded_documents/e-port-brief.ppt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It might take me a while to generate the full output for the 2.3 million, so I&apos;ll try to pull out the 300 thousand other errors first. Our Solr index is having some performance issues, so it might a bit slow.&lt;/p&gt;</comment>
                            <comment id="14177054" author="tallison@mitre.org" created="Mon, 20 Oct 2014 17:12:22 +0100"  >&lt;p&gt;That would be a fantastic resource.  Thank you for sharing!  We could do a bit of munging to prioritize most common exceptions in dependencies.&lt;/p&gt;

&lt;p&gt;Your 0.1% exception rate is smaller than the 0.7% exception rate I&apos;m finding on the govdocs1 corpus, but in the same ballpark.  Interesting.&lt;/p&gt;

&lt;p&gt;Do you know how many permanent hangs you had and can you identify those files easily enough?  I had about 6 in the govdocs1 corpus.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;

&lt;p&gt;P.S. On the SAXParseExceptions...did those come from the XMLParser or from the HtmlParser?  I recently discovered that we hardcode an override in TikaResource within tika-server:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; parsers.put(MediaType.APPLICATION_XML, new HtmlParser());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not sure that we should hardcode that, but it does make sense to use that configuration!&lt;/p&gt;</comment>
                            <comment id="14177058" author="willp-bl" created="Mon, 20 Oct 2014 17:13:40 +0100"  >&lt;p&gt;&#65279;&lt;br/&gt;
I have left the British Library (as of 20th October 2014).  Please contact Maureen.Pennock@bl.uk if you need to contact someone.&lt;/p&gt;

&lt;p&gt;Any FOI requests should be sent to FOI-Enquiries@bl.uk.&lt;/p&gt;


&lt;p&gt;******************************************************************************************************************&lt;br/&gt;
Experience the British Library online at www.bl.uk&amp;lt;&lt;a href=&quot;http://www.bl.uk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.bl.uk/&lt;/a&gt;&amp;gt;&lt;br/&gt;
The British Library&#8217;s latest Annual Report and Accounts : www.bl.uk/aboutus/annrep/index.html&amp;lt;&lt;a href=&quot;http://www.bl.uk/aboutus/annrep/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.bl.uk/aboutus/annrep/index.html&lt;/a&gt;&amp;gt;&lt;br/&gt;
Help the British Library conserve the world&apos;s knowledge. Adopt a Book. www.bl.uk/adoptabook&amp;lt;&lt;a href=&quot;http://www.bl.uk/adoptabook&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.bl.uk/adoptabook&lt;/a&gt;&amp;gt;&lt;br/&gt;
The Library&apos;s St Pancras site is WiFi - enabled&lt;br/&gt;
*****************************************************************************************************************&lt;br/&gt;
The information contained in this e-mail is confidential and may be legally privileged. It is intended for the addressee(s) only. If you are not the intended recipient, please delete this e-mail and notify the postmaster@bl.uk&amp;lt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:postmaster@bl.uk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;postmaster@bl.uk&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&amp;gt; : The contents of this e-mail must not be disclosed or copied without the sender&apos;s consent.&lt;br/&gt;
The statements and opinions expressed in this message are those of the author and do not necessarily reflect those of the British Library. The British Library does not take any responsibility for the views of the author.&lt;br/&gt;
*****************************************************************************************************************&lt;br/&gt;
Think before you print&lt;/p&gt;</comment>
                            <comment id="14177877" author="chrismattmann" created="Tue, 21 Oct 2014 04:20:16 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;Andrew Jackson&lt;/a&gt; thanks for sharing. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gostep&quot; class=&quot;user-hover&quot; rel=&quot;gostep&quot;&gt;Giuseppe Totaro&lt;/a&gt; has been working in this area and is currently running Tika in an HPC environment against govdocs (as is &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt;). It would be great to coordinate here in Tika. Thanks for sharing this.&lt;/p&gt;</comment>
                            <comment id="14178361" author="anjackson" created="Tue, 21 Oct 2014 13:55:02 +0100"  >&lt;p&gt;Okay, so the c.300,000 exceptions are here: &lt;a href=&quot;https://www.dropbox.com/s/ka19fguaxflp725/parse_errors.csv.gz?dl=0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://www.dropbox.com/s/ka19fguaxflp725/parse_errors.csv.gz?dl=0&lt;/a&gt; - let me know if you&apos;d like it placed elsewhere (it&apos;s 14MB of compressed CSV).&lt;/p&gt;

&lt;p&gt;This conversation has helped me spot a gap in our code. We currently do a Tika.detect() before we do a Tika.parse(), and only do the latter if the former succeeded. Sadly, the version of the code that I used to generate this data did not record the Tika exception for the .detect() step, only the .parse() step. This will explain why there are no hung-thread events in this result set - the interrupted .detect() was not recorded properly.  We&apos;ll be re-running this scan soonish, so I&apos;ll make sure the next version records all the exceptions. IIRC, from looking at the MIME types, the permanent hangs were mostly ZIPs, Office documents, and maybe some PDFs.&lt;/p&gt;

&lt;p&gt;Note that the CSV includes the Content-Type from the .detect() step, and this should indicate which module was run on the resource (i.e. whatever the Tika 1.5 mapping was for that MIME type). I don&apos;t think we changed the parse configuration significantly, so it seems HTML and XHTML and XML should all have gone through the HtmlParser (I&apos;m not 100% sure about this, and will try to check).&lt;/p&gt;

&lt;p&gt;I&apos;m not sure it&apos;s worth giving you all the SAX exceptions, as there are a lot of repeats of the same problems. I think a random sample of about 50,000 should be plenty. Does that sound okay to you?&lt;/p&gt;

&lt;p&gt;EDIT: Oh, and I meant to say, I&apos;m glad to hear about &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gostep&quot; class=&quot;user-hover&quot; rel=&quot;gostep&quot;&gt;Giuseppe Totaro&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt;&apos;s efforts to run this on GovDocs, and would be interested in comparing results. We already publish format profile data about web archives, and would love to have more data to refer to.&lt;/p&gt;</comment>
                            <comment id="14186718" author="anjackson" created="Tue, 28 Oct 2014 11:50:37 +0000"  >&lt;p&gt;Shall I go ahead and extract the XML errors? Or would you rather I waited until we&apos;ve re-run with the new version that will catch the permanent hangs and regenerate all the data?&lt;/p&gt;</comment>
                            <comment id="14193663" author="chrismattmann" created="Sun, 2 Nov 2014 02:58:18 +0000"  >&lt;p&gt;I&apos;d say extract the errors, we&apos;d appreciate them thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;Andrew Jackson&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14194543" author="tallison@mitre.org" created="Mon, 3 Nov 2014 14:00:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;Andrew Jackson&lt;/a&gt;, the google docs link is down at the moment, so I can&apos;t see the full doc.  If there is any way to capture the full stacktrace so that we can compare with our govdocs1 runs, that would be fantastic.  You can see our current output format comparing two versions of PDFBox over on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1442&quot; title=&quot;Upgrade to PDFBox 1.8.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1442&quot;&gt;&lt;del&gt;TIKA-1442&lt;/del&gt;&lt;/a&gt;. This is ongoing work (from my perspective), and there&apos;s no need to rush.  Whichever option is easier for you...thank you for sharing!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; I don&apos;t think we changed the parse configuration significantly, so it seems HTML and XHTML and XML should all have gone through the HtmlParser (I&apos;m not 100% sure about this, and will try to check).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Y, if you could check, I&apos;d be interested.  I think the default behavior would be to send XML through the DcXMLParser, which is far stricter than the default HtmlParser.  You can see by our choice on tika-server, though, that at least one dev prefers to have our HtmlParser handle xml. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thank you, again!&lt;/p&gt;</comment>
                            <comment id="14209757" author="anjackson" created="Thu, 13 Nov 2014 13:42:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt; I&apos;ve created a download folder on our own site, and included a dump of about 1/8th of the SAX errors, here: &lt;a href=&quot;http://www.webarchive.org.uk/datasets/ukwa.ds.2/for-tika/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.webarchive.org.uk/datasets/ukwa.ds.2/for-tika/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looking through the SAX exceptions, they do seem to be from resources that are identified as XML (application/&amp;#42;xml) by Tika. i.e. the exceptions do &lt;b&gt;not&lt;/b&gt; seem to be coming from malformed HTML, which is consistent with the standard Tika configuration you described above (which I can confirm is what we ran with).&lt;/p&gt;

&lt;p&gt;Unfortunately, I can&apos;t recover the full stack traces from that run, and it&apos;s not clear if we&apos;ll be able to do that in the future because of the way we&apos;re doing the indexing, but we&apos;ll look at it and hopefully be able to record the full error in the future. For now, you&apos;ll have to re-run the source item through Tika to reproduce the error - sorry about that.&lt;/p&gt;</comment>
                            <comment id="14218825" author="tpalsulich" created="Thu, 20 Nov 2014 01:08:54 +0000"  >&lt;p&gt;I just got access to an HPC cluster at NYU. How are you running Tika against the govdocs corpus, Tim? I&apos;m downloading it right now and would like to reproduce your results.&lt;/p&gt;</comment>
                            <comment id="14219371" author="tallison@mitre.org" created="Thu, 20 Nov 2014 13:35:32 +0000"  >&lt;p&gt;HPC is way beyond current status of tika-batch, which is initially aimed at conventional/single-box computing.  I heartily welcome tika-batch-hadoop and any other tika-batch-HPC packages!&lt;/p&gt;

&lt;p&gt;If you do want to join in the effort on tika-batch, please do!  I need plenty of help in code review, unit tests, usability and edge case (i.e bug) discovery.  I&apos;d also love to halve the amount of code and keep the robustness, extensibility and logging.&lt;/p&gt;

&lt;p&gt;You can grab my dev version of tika-batch from my github &lt;a href=&quot;https://github.com/tballison/tika/tree/TIKA-1302&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;fork&lt;/a&gt;.  See some background on the &lt;a href=&quot;https://wiki.apache.org/tika/TikaBatchOverview&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;wiki&lt;/a&gt;.  I finished an initial integration with tika-app, and you should be able to run tika-app with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -jar tika-app.jar &amp;lt;srcDirectory&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That will iterate through the srcDirectory and output files in a directory named &quot;output&quot; with a mirror of the srcDirectory&apos;s structure.  This sounds underwhelming, I know, but the code is robust against OOM and permanent hangs, it is multi-threaded, and the user should be able to interrupt the process (and child process) gracefully.&lt;/p&gt;

&lt;p&gt;There are lots of commandline arguments available.  &lt;del&gt;I&apos;m going to update the usage &lt;a href=&quot;http://wiki.apache.org/tika/TikaBatchUsage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;wiki&lt;/a&gt; shortly, but the usual -? from the app will give you some of the options.&lt;/del&gt;  I&apos;ve updated the TikaBatchUsage wiki just now.  Let me know when you have questions.&lt;/p&gt;

</comment>
                            <comment id="14226262" author="tallison@mitre.org" created="Wed, 26 Nov 2014 14:41:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anjackson&quot; class=&quot;user-hover&quot; rel=&quot;anjackson&quot;&gt;Andrew Jackson&lt;/a&gt;, I&apos;m attaching some summary stats on the exceptions file you posted.  Thank you for sharing.&lt;/p&gt;

&lt;p&gt;In these summary stats, I took the literal exception message, and then I also pared it down to the chunk of text before the first &quot;:&quot;.  Without the full stacktrace, this will conflate exceptions, but it still might be useful.&lt;/p&gt;

&lt;p&gt;I&apos;m just getting started on the tika-eval code, but one of the things I&apos;ve run into is that the literal exception message can be problematic if the task is to bin and count exception causes.  What I&apos;m currently doing is truncating the message as I did with your data and then running group by on the full stacktrace.  One limitation of this, though, is that we can&apos;t easily compare exceptions across different versions of the software because line numbers are included, and if one changes, a comparison of &quot;group by&quot; output fails.&lt;/p&gt;

&lt;p&gt;On the SAX exceptions, the XML parser accounted for nearly a quarter of the exceptions on govdocs1 with Tika 1.7-SNAPSHOT.  Apologies for the repetition...in tika-server, it looks like we&apos;ve hard-coded the selection of the more forgiving html parser instead of the XML parser.  Depending on your use case, that change in your Tika config might make sense.&lt;/p&gt;

&lt;p&gt;On another note, with govdocs1, we have very few modern pdfs, (ppt|doc|xls)&lt;span class=&quot;error&quot;&gt;&amp;#91;xm&amp;#93;&lt;/span&gt;, rtf, msg, open office and multimedia files...Other Tikis, what other formats do we need?  I might be willing to crawl for docs, but I don&apos;t have a good starting point/list of links, and the search engine APIs aren&apos;t as generous as they used to be.  So, do you happen to have link data fresher than 2010, by chance?  Would you be willing to share a list of links or is it publicly available?  Or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jnioche&quot; class=&quot;user-hover&quot; rel=&quot;jnioche&quot;&gt;Julien Nioche&lt;/a&gt;, how easy would it be to export a few hundred thousand of those file types from CommonCrawl?&lt;/p&gt;</comment>
                            <comment id="14226336" author="jnioche" created="Wed, 26 Nov 2014 15:40:24 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt;&lt;br/&gt;
It would be easy to do that with Behemoth, not sure CC contains many multimedia files but it certainly will have the other types you mentioned. We could either dump the content of the URLs to an archive to process with Tika later or do the Tika parsing with Behemoth as well. &lt;/p&gt;</comment>
                            <comment id="14226368" author="chrismattmann" created="Wed, 26 Nov 2014 16:06:11 +0000"  >&lt;p&gt;how about images and scientific data? we are actively crawling NSF and NASA Polar data sites, see:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/NSF-Polar-Cyberinfrastructure/datavis-hackathon/issues/1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/NSF-Polar-Cyberinfrastructure/datavis-hackathon/issues/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We have some of this data on Amazon S3 buckets and would be easily able to share. Great work Tim.&lt;/p&gt;</comment>
                            <comment id="14226393" author="tallison@mitre.org" created="Wed, 26 Nov 2014 16:22:37 +0000"  >&lt;p&gt;Looks like I&apos;ll need to rm govdocs1 zips to clear some space or link another drive! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jnioche&quot; class=&quot;user-hover&quot; rel=&quot;jnioche&quot;&gt;Julien Nioche&lt;/a&gt;, near term, would you be willing to scp some files to the vm we&apos;re building for this?  Longer term, once we get the process running in a conventional environment, it&apos;d be great to move to hadoop.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrismattmann&quot; class=&quot;user-hover&quot; rel=&quot;chrismattmann&quot;&gt;Chris A. Mattmann&lt;/a&gt;, same with you?  &lt;/p&gt;

&lt;p&gt;300gb-ish sample for each corpus reasonable?&lt;/p&gt;</comment>
                            <comment id="14226397" author="jnioche" created="Wed, 26 Nov 2014 16:28:03 +0000"  >&lt;p&gt;Sure, will get back to you re-details of scp when I have the data ready&lt;/p&gt;</comment>
                            <comment id="14226415" author="anjackson" created="Wed, 26 Nov 2014 16:35:29 +0000"  >&lt;p&gt;We have two more sets of data. One is the same as the 1996-2010 stuff, but from 2010 to April 2013, and for each item a copy can generally be accessed via the Internet Archive. We are planning to extend our indexing to the entire 1996-2013 dataset soon, but in reality its going to be a few months yet due to technical difficulties and other priorities. The second set of data runs from 2013 onwards, and due to the legal constraints on that material cannot be made available. However, for the next year or two, most of it will still be available on the live web, so that&apos;s the fallback option. That material has been indexed (although with an older Tika version), but we&apos;re going to re-index that too shortly, so we should also be able to make that available. (n.b. &apos;shortly&apos; still means weeks or months!)&lt;/p&gt;

&lt;p&gt;Both of these data sets are large and contain more large files. There were c. 2 billion resources in the 1996-2010 chunk, and there are 1.5-2 billion in the 2010-2013 chunk, and over 2 billion per year since then, and in contrast to the early material, we do not limit the size per resource. So that should be interesting.&lt;/p&gt;

&lt;p&gt;However, it would be good to run against a broader range of material, given that I stop Tika from recursively processing ZIPs etc. and that web archives are rather weak on A/V files, systems files, software, etc. I&apos;m not aware of a good A/V corpus, but on the systems and software side, there are the system images &lt;a href=&quot;http://digitalcorpora.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;also held at digitalcorpora.org&lt;/a&gt; and the &lt;a href=&quot;https://fedorahosted.org/file-tests/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;various files used by a RedHat dev to regression test the &apos;file&apos; command&lt;/a&gt;. There is also &lt;a href=&quot;https://github.com/openpreserve/format-corpus&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this small corpus of example files&lt;/a&gt; that I have been contributing to lately, the &lt;a href=&quot;http://browsers.evolt.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;evolt browser archive&lt;/a&gt; and the &lt;a href=&quot;http://disktype.cvs.sourceforge.net/viewvc/disktype/file-system-sampler/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;disktype filesystem image samples&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14226418" author="chrismattmann" created="Wed, 26 Nov 2014 16:38:08 +0000"  >&lt;p&gt;Sure Tim I&apos;ll help to get the scientific data files for the corpus. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pzimdars&quot; class=&quot;user-hover&quot; rel=&quot;pzimdars&quot;&gt;Paul Zimdars&lt;/a&gt; can you help here? We want to transfer data off our Amazon box and onto our new VM here for Tika donated by RackSpace. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;Tim Allison&lt;/a&gt; has the details.&lt;/p&gt;</comment>
                            <comment id="14228305" author="jnioche" created="Fri, 28 Nov 2014 14:15:14 +0000"  >&lt;p&gt;FYI have extracted data from the CommonCrawl dataset using Behemoth and put that on the server. See &lt;a href=&quot;http://digitalpebble.blogspot.co.uk/2014/11/generating-test-corpus-for-apache-tika.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://digitalpebble.blogspot.co.uk/2014/11/generating-test-corpus-for-apache-tika.html&lt;/a&gt; for a description of the steps. Roughly 220GB of compressed data, 2M documents of all mime-types, mostly non HTML. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@apache.org&quot;&gt;Tim Allison&lt;/a&gt; please let me know if you have any problems with the data&lt;/p&gt;</comment>
                            <comment id="14229752" author="tallison@mitre.org" created="Mon, 1 Dec 2014 12:58:37 +0000"  >&lt;p&gt;Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jnioche&quot; class=&quot;user-hover&quot; rel=&quot;jnioche&quot;&gt;Julien Nioche&lt;/a&gt;!  I&apos;m unpacking and staging now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12683849" name="wayback_exception_summaries.xlsx" size="487605" author="tallison@mitre.org" created="Wed, 26 Nov 2014 14:41:00 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12720617">TIKA-1330</subtask>
                            <subtask id="12720618">TIKA-1331</subtask>
                            <subtask id="12720621">TIKA-1332</subtask>
                            <subtask id="12720622">TIKA-1333</subtask>
                            <subtask id="12720624">TIKA-1334</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 May 2014 09:23:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393175</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpk6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393341</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>