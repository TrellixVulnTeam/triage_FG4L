<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:37:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-847/TIKA-847.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-847] Add regular expression support to the MagicDetector</title>
                <link>https://issues.apache.org/jira/browse/TIKA-847</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Following on from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-86&quot; title=&quot;Support magic(5) files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-86&quot;&gt;&lt;del&gt;TIKA-86&lt;/del&gt;&lt;/a&gt;, we would like to add support for regular expressions to the MagicDetector. This would allow more signatures to be re-used from more sources (e.g. the file(1) command). As part of the SCAPE Project, we have added this functionality to our own Tika branch (e.g. &lt;a href=&quot;https://github.com/openplanets/tika/commit/b8de9e77c8b432788e3f73a4dbccca8ea044b503&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/openplanets/tika/commit/b8de9e77c8b432788e3f73a4dbccca8ea044b503&lt;/a&gt;) and are working to tidy this up to make a clean patch we can submit here.&lt;/p&gt;

&lt;p&gt;BTW, are there any patch submission guidelines or coding standards we should check our work against first?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12538618">TIKA-847</key>
            <summary>Add regular expression support to the MagicDetector</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="anjackson">Andrew Jackson</reporter>
                        <labels>
                            <label>detection</label>
                            <label>format</label>
                    </labels>
                <created>Tue, 17 Jan 2012 11:06:46 +0000</created>
                <updated>Sat, 30 Jun 2012 16:57:14 +0100</updated>
                            <resolved>Sat, 30 Jun 2012 16:57:14 +0100</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.2</fixVersion>
                                    <component>mime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13187587" author="anjackson" created="Tue, 17 Jan 2012 11:09:25 +0000"  >&lt;p&gt;Under &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-86&quot; title=&quot;Support magic(5) files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-86&quot;&gt;&lt;del&gt;TIKA-86&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkrugler&quot; class=&quot;user-hover&quot; rel=&quot;kkrugler&quot;&gt;Ken Krugler&lt;/a&gt; suggested we use the Lucene FSM RegEx engine (see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1606&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LUCENE-1606&lt;/a&gt; and &lt;a href=&quot;http://search-lucene.com/jd/lucene/org/apache/lucene/search/RegexpQuery.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-lucene.com/jd/lucene/org/apache/lucene/search/RegexpQuery.html&lt;/a&gt;). However, I believe this code is not yet in a stable Lucene version (4.0-SNAPSHOT only) and so would rather we defer that optimisation to a later date (under a separate ticket).&lt;/p&gt;</comment>
                            <comment id="13188402" author="thetaphi" created="Wed, 18 Jan 2012 10:54:48 +0000"  >&lt;p&gt;You could use the original FSM library, Lucene&apos;s is a fork of: &lt;a href=&quot;http://www.brics.dk/automaton/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.brics.dk/automaton/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13193833" author="pete.s.may" created="Thu, 26 Jan 2012 13:41:07 +0000"  >&lt;p&gt;Patch updating MagicDetector and associated unit tests to incorporate regular expression support in the signature file (does not support EOF regular expressions).&lt;/p&gt;

&lt;p&gt;This required a slight extension to the freedesktops mime-info to support a type=&quot;regex&quot; attribute in the &quot;match&quot; element.  Do you have an XML schema anywhere for mime-info, as this would also need updating?&lt;/p&gt;

&lt;p&gt;I also noted (what I consider) a minor bug in the while loop at line 315 (&lt;a href=&quot;https://github.com/apache/tika/blob/trunk/tika-core/src/main/java/org/apache/tika/detect/MagicDetector.java#L315&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/blob/trunk/tika-core/src/main/java/org/apache/tika/detect/MagicDetector.java#L315&lt;/a&gt;) of MagicDetector, where the offset is not incremented by the number of read bytes.  I have corrected that in this patch, but I can extract this out as a separate issue if preferred?&lt;/p&gt;</comment>
                            <comment id="13202883" author="anjackson" created="Tue, 7 Feb 2012 22:34:09 +0000"  >&lt;p&gt;As far as I can tell, Lucene&apos;s FSM engine is so very new it is only in the v4 snapshot, so I would prefer it if we stuck to the built-in RegEx functionality for now and revisited this optimisation under a separate ticket, at least until Lucene 4 is released.&lt;/p&gt;

&lt;p&gt;Is there anything &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pete.s.may&quot; class=&quot;user-hover&quot; rel=&quot;pete.s.may&quot;&gt;Peter May&lt;/a&gt; or I can do to help this issue along?&lt;/p&gt;</comment>
                            <comment id="13404524" author="jukkaz" created="Sat, 30 Jun 2012 16:57:14 +0100"  >&lt;p&gt;Sorry for the delay on this, the issue fell off our radar.&lt;/p&gt;

&lt;p&gt;I committed the patch in revision 1355752. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511979" name="regex_support.patch" size="12407" author="pete.s.may" created="Thu, 26 Jan 2012 13:41:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Jan 2012 10:54:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224121</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx19r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>