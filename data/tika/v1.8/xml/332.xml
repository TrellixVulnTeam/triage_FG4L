<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:29:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-332/TIKA-332.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-332] Use http-equiv meta tag charset info when processing HTML documents</title>
                <link>https://issues.apache.org/jira/browse/TIKA-332</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Currently Tika doesn&apos;t use the charset info that&apos;s optionally present in HTML documents, via the &amp;lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html; charset=xxx&quot;&amp;gt; tag.&lt;/p&gt;

&lt;p&gt;If the mime-type is detected as being one that&apos;s handled by the HtmlParser, then the first 4-8K of text should be converted from bytes to us-ascii, and then scanned using a regex something like:&lt;/p&gt;

&lt;p&gt;    private static final Pattern HTTP_EQUIV_CHARSET_PATTERN = Pattern.compile(&quot;&amp;lt;meta\\s+http-equiv\\s*=\\s*&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;\&amp;quot;&amp;#93;&lt;/span&gt;\\s*Content-Type&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;\&amp;quot;&amp;#93;&lt;/span&gt;\\s+content\\s*=\\s*&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;\&amp;quot;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;^;&amp;#93;&lt;/span&gt;&lt;ins&gt;;\\s*charset\\s*=\\s*(&lt;span class=&quot;error&quot;&gt;&amp;#91;^&amp;#39;\&amp;quot;&amp;#93;&lt;/span&gt;&lt;/ins&gt;)\&quot;&quot;);&lt;/p&gt;

&lt;p&gt;If a charset is detected, this should take precedence over a charset in the HTTP response headers, and (obviously) used to convert the bytes to text before the actual parsing of the document begins.&lt;/p&gt;

&lt;p&gt;In a test I did of 100 random HTML pages, roughly 15% contained charset info in the meta tag that wound up being different from the detected or HTTP response header charset, so this is a pretty important improvement to make. Without it, Tika isn&apos;t that useful for processing HTML pages.&lt;/p&gt;

&lt;p&gt;Though the other problem is that the HtmlParser code doesn&apos;t use the CharsetDetector, which is another reason for lots of incorrect text. I&apos;ll file a separate issue about that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441695">TIKA-332</key>
            <summary>Use http-equiv meta tag charset info when processing HTML documents</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="kkrugler">Ken Krugler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 17:49:50 +0000</created>
                <updated>Sun, 13 Dec 2009 00:25:02 +0000</updated>
                            <resolved>Sun, 13 Dec 2009 00:25:02 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12782550" author="kkrugler" created="Wed, 25 Nov 2009 18:38:14 +0000"  >&lt;p&gt;It turns out the HtmlParser code doesn&apos;t even use the CharsetDetector support - this is only being used by the TXTParser, as far as I can tell (and incorrectly at that).&lt;/p&gt;</comment>
                            <comment id="12785187" author="kkrugler" created="Thu, 3 Dec 2009 05:26:25 +0000"  >&lt;p&gt;Additional cleanup to new test, plus others - include &amp;lt;head&amp;gt; tags around &amp;lt;title&amp;gt;, &amp;lt;meta&amp;gt;, &amp;lt;base&amp;gt; tags for more conformant HTML. Needs to be applied after &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-332&quot; title=&quot;Use http-equiv meta tag charset info when processing HTML documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-332&quot;&gt;&lt;del&gt;TIKA-332&lt;/del&gt;&lt;/a&gt;-.patch.&lt;/p&gt;</comment>
                            <comment id="12789827" author="jukkaz" created="Sun, 13 Dec 2009 00:25:02 +0000"  >&lt;p&gt;Patches applied in revision 890009.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12441696">TIKA-333</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426754" name="TIKA-332-2.patch" size="2181" author="kkrugler" created="Thu, 3 Dec 2009 05:26:25 +0000"/>
                            <attachment id="12426753" name="TIKA-332.patch" size="3934" author="kkrugler" created="Thu, 3 Dec 2009 05:18:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 13 Dec 2009 00:25:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx4fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>