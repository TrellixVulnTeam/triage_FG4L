<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:36:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-289/TIKA-289.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-289] Add magic byte patterns from file(1)</title>
                <link>https://issues.apache.org/jira/browse/TIKA-289</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;As discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-285&quot; title=&quot;Update media type registry to the latest httpd mime type database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-285&quot;&gt;&lt;del&gt;TIKA-285&lt;/del&gt;&lt;/a&gt;, the file(1) command comes with a pretty comprehensive set of magic byte patterns. It would be nice to get those patterns included also in Tika.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12436710">TIKA-289</key>
            <summary>Add magic byte patterns from file(1)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                            <label>new-parser</label>
                    </labels>
                <created>Sun, 27 Sep 2009 21:37:48 +0100</created>
                <updated>Sat, 14 Mar 2015 21:27:16 +0000</updated>
                                                                            <component>mime</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14341980" author="tpalsulich" created="Sun, 1 Mar 2015 06:39:15 +0000"  >&lt;p&gt;Does anyone know if Tika integrated the magic from the file command?&lt;/p&gt;</comment>
                            <comment id="14341993" author="gagravarr" created="Sun, 1 Mar 2015 06:55:58 +0000"  >&lt;p&gt;There are a few issues with integrating it:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Very few of the entries in the file magic list have mimetypes, only descriptions, so we&apos;d need to manually review each one and search for a mimetype. (I see only 287 different mimetypes, as compared to the vast number of magic entries)&lt;/li&gt;
	&lt;li&gt;Many of the file magic entries include a little bit of parser logic too, with various bits of the matching being included in the description string, sometimes lots&lt;/li&gt;
	&lt;li&gt;Some of the matching is actually done with code (much like our container aware detectors), not the mime magic, see the &lt;tt&gt;src&lt;/tt&gt; directory for those&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The file magic and sourcecode are a very good source of magic patterns, and sometimes also basic parser logic, but I&apos;m not sure how practical a bulk import would be?&lt;/p&gt;</comment>
                            <comment id="14342001" author="tpalsulich" created="Sun, 1 Mar 2015 07:01:40 +0000"  >&lt;p&gt;I agree, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gagravarr&quot; class=&quot;user-hover&quot; rel=&quot;gagravarr&quot;&gt;Nick Burch&lt;/a&gt;. Let&apos;s consider &lt;tt&gt;file&lt;/tt&gt; as a reference when we need help with how to support a new type, rather than as a source to bulk import from.&lt;/p&gt;</comment>
                            <comment id="14342004" author="gagravarr" created="Sun, 1 Mar 2015 07:05:56 +0000"  >&lt;p&gt;I&apos;ve just checked, and there are actually a handful of mime types defined in the file magic which we don&apos;t have, doh! Let&apos;s add those few in, then close&lt;/p&gt;

&lt;p&gt;Also, I wonder if we should add a reference to the file magic (probably the &lt;a href=&quot;https://github.com/file/file/tree/master/magic/Magdir&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;github version&lt;/a&gt;) to the detection or similar docs, to point new people to it as a possible source of suitably licensed magics if they can&apos;t otherwise find some?&lt;/p&gt;</comment>
                            <comment id="14342005" author="tpalsulich" created="Sun, 1 Mar 2015 07:09:25 +0000"  >&lt;p&gt;Sounds great!&lt;/p&gt;</comment>
                            <comment id="14342046" author="gagravarr" created="Sun, 1 Mar 2015 08:05:33 +0000"  >&lt;p&gt;Attached is the list of mime types extracted from the file(1) magic directory (found from grepping for &lt;tt&gt;!:mime&lt;/tt&gt;) which aren&apos;t found in the Tika Mimetypes file&lt;/p&gt;

&lt;p&gt;Some of these will be aliases for ones we already have, some will be aliases where we also need to bring over magic, and some will be new ones&lt;/p&gt;

&lt;p&gt;This list doesn&apos;t include any for which we have a mime type, but don&apos;t currently have any magic&lt;/p&gt;</comment>
                            <comment id="14342233" author="gagravarr" created="Sun, 1 Mar 2015 14:07:41 +0000"  >&lt;p&gt;&lt;tt&gt;file-has-magic-tika-missing.txt&lt;/tt&gt; is the list of mime types where file(1) has magic but Tika does not, where both know about the same mime type. Note that there may be some false positives on this list, eg where Tika has the magic on a parent type&lt;/p&gt;</comment>
                            <comment id="14342345" author="hudson" created="Sun, 1 Mar 2015 17:43:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #520 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/520/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/520/&lt;/a&gt;)&lt;br/&gt;
Add a Tika CLI option for comparing with the File(1) magic directory, to report types to consider adding, and types we may be able to get magic for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-289&quot; title=&quot;Add magic byte patterns from file(1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-289&quot;&gt;TIKA-289&lt;/a&gt; (nick: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1663133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1663133&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-app/src/main/java/org/apache/tika/cli/TikaCLI.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14342347" author="gagravarr" created="Sun, 1 Mar 2015 17:50:12 +0000"  >&lt;p&gt;As of r1663136, you can now run the Tika CLI with the option &lt;tt&gt;--compare-file-magic=&amp;lt;dir&amp;gt;&lt;/tt&gt; to have the Tika mime types compared to a File(1) magic directory. This will report the mime types known to File(1) but not Tika, and the ones that File(1) has magic but Tika doesn&apos;t, plus some summary statistics&lt;/p&gt;

&lt;p&gt;Hopefully others can use that soon-ish to add in some of the missing types, and missing magics for known types. Longer term, we can use it to track when File(1) adds new types we might want to add in too&lt;/p&gt;</comment>
                            <comment id="14342372" author="tpalsulich" created="Sun, 1 Mar 2015 18:32:57 +0000"  >&lt;p&gt;The dir is the one you linked on GH above?&lt;/p&gt;</comment>
                            <comment id="14342393" author="gagravarr" created="Sun, 1 Mar 2015 19:00:05 +0000"  >&lt;p&gt;Yup, from there, or from a source tarball, or from some installs (needs to be the expanded version though, not the compiled/binary magic file which may Linux distros ship with the binary install)&lt;/p&gt;</comment>
                            <comment id="14362037" author="tpalsulich" created="Sat, 14 Mar 2015 21:27:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gagravarr&quot; class=&quot;user-hover&quot; rel=&quot;gagravarr&quot;&gt;Nick Burch&lt;/a&gt;, can you take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1114&quot; title=&quot;sgml mime type is not detected when passed in as byte stream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1114&quot;&gt;TIKA-1114&lt;/a&gt; and the &lt;a href=&quot;https://github.com/file/file/blob/master/magic/Magdir/sgml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file SGML magic&lt;/a&gt;? I&apos;m not sure what to take away from that file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12701697" name="file-has-magic-tika-missing.txt" size="1085" author="gagravarr" created="Sun, 1 Mar 2015 14:07:41 +0000"/>
                            <attachment id="12701683" name="file-mimes-missing.txt" size="2253" author="gagravarr" created="Sun, 1 Mar 2015 08:05:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 1 Mar 2015 06:39:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx4pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17081</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>