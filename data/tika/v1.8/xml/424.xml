<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:28:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-424/TIKA-424.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-424] Avoid ArrayIndexOutOfBoundsException on some mp3 files</title>
                <link>https://issues.apache.org/jira/browse/TIKA-424</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;There can currently be an ArrayIndexOutOfBoundsException if the tag of an mp3 is empty but null padded (see &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-418&quot; title=&quot;RuntimeException while getting content for ppsx, ppsm, pptm, thmx and xps file types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-418&quot;&gt;&lt;del&gt;TIKA-418&lt;/del&gt;&lt;/a&gt; for someone reporting one against the wrong bug...)&lt;/p&gt;

&lt;p&gt;Attached patch correctly detects this condition and returns an empty string.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464778">TIKA-424</key>
            <summary>Avoid ArrayIndexOutOfBoundsException on some mp3 files</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="gagravarr">Nick Burch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 May 2010 11:15:27 +0100</created>
                <updated>Mon, 2 Aug 2010 17:40:07 +0100</updated>
                            <resolved>Wed, 26 May 2010 11:22:34 +0100</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12871612" author="jukkaz" created="Wed, 26 May 2010 11:22:34 +0100"  >&lt;p&gt;Thanks! Patch committed in revision 948385.&lt;/p&gt;</comment>
                            <comment id="12894036" author="roparz" created="Fri, 30 Jul 2010 14:31:07 +0100"  >&lt;p&gt;Hi !&lt;/p&gt;

&lt;p&gt;There is another exception with MP3 files parsing :&lt;/p&gt;

&lt;p&gt;org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.mp3.Mp3Parser@518bf072&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:134)&lt;br/&gt;
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:99)&lt;br/&gt;
	at Test.main(Test.java:24)&lt;br/&gt;
Caused by: java.lang.ArrayIndexOutOfBoundsException&lt;br/&gt;
	at java.lang.System.arraycopy(Native Method)&lt;br/&gt;
	at org.apache.tika.parser.mp3.ID3v2Frame$RawTag.&amp;lt;init&amp;gt;(ID3v2Frame.java:294)&lt;br/&gt;
	at org.apache.tika.parser.mp3.ID3v2Frame$RawTag.&amp;lt;init&amp;gt;(ID3v2Frame.java:266)&lt;br/&gt;
	at org.apache.tika.parser.mp3.ID3v2Frame$RawTagIterator.next(ID3v2Frame.java:249)&lt;br/&gt;
	at org.apache.tika.parser.mp3.ID3v24Handler.&amp;lt;init&amp;gt;(ID3v24Handler.java:46)&lt;br/&gt;
	at org.apache.tika.parser.mp3.Mp3Parser.getAllTagHandlers(Mp3Parser.java:132)&lt;br/&gt;
	at org.apache.tika.parser.mp3.Mp3Parser.parse(Mp3Parser.java:64)&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:132)&lt;br/&gt;
	... 2 more&lt;/p&gt;

&lt;p&gt;Do you need my MP3 file to do some tests ?&lt;/p&gt;

&lt;p&gt;Thx.&lt;/p&gt;</comment>
                            <comment id="12894042" author="gagravarr" created="Fri, 30 Jul 2010 14:44:02 +0100"  >&lt;p&gt;If you&apos;re seeing the problem with a recent svn checkout of Tika, could you please point us at an mp3 that causes the problem so we can take a look?&lt;/p&gt;

&lt;p&gt;Ideally, if you&apos;ve got a sub 100kb file that can be freely distributed, we can use that for a unit test. If not, we can use the file for fixing, but not commit the file for a unit test&lt;/p&gt;</comment>
                            <comment id="12894056" author="roparz" created="Fri, 30 Jul 2010 15:27:53 +0100"  >&lt;p&gt;I only have a non-free mp3 file and it&apos;is more than 100KB (2.5MB).&lt;br/&gt;
I attached it.&lt;/p&gt;</comment>
                            <comment id="12894577" author="gagravarr" created="Mon, 2 Aug 2010 16:56:36 +0100"  >&lt;p&gt;Your file has broken ID3v2.4 tags in it. It looks to me like the lengths are recorded in bytes, not bytes/4 as v2.4 requires. Most id3 tools I&apos;ve tried silently fail, and claim there are no tags&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed Tika in r981573, and it&apos;ll now not break, even if the tags are likely to be largely gibberish since they&apos;re corrupted.&lt;/p&gt;</comment>
                            <comment id="12894579" author="chrismattmann" created="Mon, 2 Aug 2010 16:59:08 +0100"  >&lt;p&gt;Hey Guys: can we cook up a free MP3 file with similarly corrupted ID3v2.4 tags? How hard would it be to do that? I&apos;d be happy to try but need a pointer of where to start...&lt;/p&gt;</comment>
                            <comment id="12894589" author="gagravarr" created="Mon, 2 Aug 2010 17:35:55 +0100"  >&lt;p&gt;Actually, it looks like it&apos;s just a bug in the ID3v2.4 specs...&lt;/p&gt;

&lt;p&gt;I&apos;ve just tried creating some ID3v2.4 files using mid3v2, and it does size=bytes just like the sample file. No-one seems to do 4* like the spec doc says. Interestingly, the spec doc has 4*size in the layout section, then goes on to describe the size as being just like ID3v2.3, i.e. no 4*. I think it&apos;s a spec bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In r981590 I have updated tika to follow what all the other programs do, and added a testcase with a sample file from mid3v2&lt;/p&gt;</comment>
                            <comment id="12894591" author="chrismattmann" created="Mon, 2 Aug 2010 17:40:07 +0100"  >&lt;p&gt;+1, great thanks Nick!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444779" name="mp3-fix.patch" size="1524" author="gagravarr" created="Tue, 18 May 2010 11:16:02 +0100"/>
                            <attachment id="12450908" name="test2.mp3" size="2668637" author="roparz" created="Fri, 30 Jul 2010 15:27:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 May 2010 10:22:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx3vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>