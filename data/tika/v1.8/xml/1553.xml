<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:36:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1553/TIKA-1553.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1553] Let&apos;s add a mock parser to be used in testing parser drivers and wrappers</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1553</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt; and as part of making Tika more robust generally, it would be useful to have an evil parser that will throw exceptions/errors and hang for lengths of time.  &lt;/p&gt;

&lt;p&gt;This will allow us to test timeouts and handling of exceptions and errors in tika-server and in tika-batch.  &lt;/p&gt;

&lt;p&gt;We could also use this for tests with ForkParser.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12776447">TIKA-1553</key>
            <summary>Let&apos;s add a mock parser to be used in testing parser drivers and wrappers</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tallison@mitre.org">Tim Allison</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Feb 2015 13:58:17 +0000</created>
                <updated>Mon, 9 Mar 2015 14:51:47 +0000</updated>
                            <resolved>Fri, 6 Mar 2015 14:43:28 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14328964" author="tallison@mitre.org" created="Fri, 20 Feb 2015 14:23:52 +0000"  >&lt;p&gt;r1661129&lt;/p&gt;</comment>
                            <comment id="14328991" author="hudson" created="Fri, 20 Feb 2015 14:43:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #499 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/499/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/499/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1553&quot; title=&quot;Let&amp;#39;s add a mock parser to be used in testing parser drivers and wrappers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1553&quot;&gt;&lt;del&gt;TIKA-1553&lt;/del&gt;&lt;/a&gt;: add an EvilParser for testing purposes (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1661129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1661129&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/TikaTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/evil/EvilParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/evil/EvilParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/META-INF&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/META-INF/services&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/META-INF/services/org.apache.tika.parser.Parser&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/org&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/org/apache&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/org/apache/tika&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/org/apache/tika/mime&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/org/apache/tika/mime/custom-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/fake_oom.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/heavy_hang.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/nothing_bad.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/null_pointer.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/null_pointer_no_msg.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/real_oom.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil/sleep.evil&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14350227" author="tallison@mitre.org" created="Fri, 6 Mar 2015 11:18:39 +0000"  >&lt;p&gt;I&apos;d like to make this more general, rename it to MockParser and move it into tika-core tests...we could also create a separate tika-test-framework module, but given that we&apos;d have at most two classes in there now (TikaTest?), I&apos;m not sure that makes sense yet.&lt;/p&gt;

&lt;p&gt;The reason to move MockParser from tika-parsers to tika-core is that it isn&apos;t of any use in testing parsers, but rather frameworks/containers/executors/wrappers of parsers.  I&apos;ve been using this for tika-batch, but we can also use it for further development of ForkParser and for the next steps in making tika-server robust against ooms and hangs.&lt;/p&gt;

&lt;p&gt;The idea is that a user can specify the actions of a parser by having MockParser parse a mock.xml file.&lt;/p&gt;

&lt;p&gt;Current design with all options is below.  In this example, the parser would add a metadata element, write some content, pause a bit and then throw an IOException...&amp;lt;oom/&amp;gt; is just there as an example; the parser wouldn&apos;t reach that, of course.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;
&amp;lt;mock&amp;gt;
    &amp;lt;!-- action can be &quot;add&quot; or &quot;set&quot; --&amp;gt;
    &amp;lt;metadata action=&quot;add&quot; name=&quot;author&quot;&amp;gt;Nikolai Lobachevsky&amp;lt;/metadata&amp;gt;
    &amp;lt;!-- element is the name of the sax event to write, p=paragraph
        if the element is not specified, the default is &amp;lt;p&amp;gt; --&amp;gt;
    &amp;lt;write element=&quot;p&quot;&amp;gt;some content&amp;lt;/write&amp;gt;

    &amp;lt;!-- hang
        millis: how many milliseconds to pause.  The actual hang time will probably
            be a bit longer than the value specified.
        heavy: whether or not the hang should do something computationally expensive.
            If the value is false, this just does a Thread.sleep(millis).
            This attribute is optional, with default of heavy=false.
        pulse_millis: (required if &quot;heavy&quot; is true), how often to check to see
            whether the thread was interrupted or that the total hang time exceeded the millis
        interruptible: whether or not the parser will check to see if its thread
            has been interrupted; this attribute is optional with default of true
    --&amp;gt;
    &amp;lt;hang millis=&quot;100&quot; heavy=&quot;true&quot; pulse_millis=&quot;10&quot; interruptible=&quot;true&quot; /&amp;gt;

    &amp;lt;!-- throw an exception or error; optionally include a message or not --&amp;gt;
    &amp;lt;throw class=&quot;java.io.IOException&quot;&amp;gt;not another IOException&amp;lt;/throw&amp;gt;

    &amp;lt;!-- perform a genuine OutOfMemoryError --&amp;gt;
    &amp;lt;oom/&amp;gt;
&amp;lt;/mock&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14350391" author="tallison@mitre.org" created="Fri, 6 Mar 2015 14:43:28 +0000"  >&lt;p&gt;r1664635&lt;/p&gt;</comment>
                            <comment id="14350592" author="hudson" created="Fri, 6 Mar 2015 17:16:14 +0000"  >&lt;p&gt;FAILURE: Integrated in tika-trunk-jdk1.7 #532 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/532/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/532/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1553&quot; title=&quot;Let&amp;#39;s add a mock parser to be used in testing parser drivers and wrappers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1553&quot;&gt;&lt;del&gt;TIKA-1553&lt;/del&gt;&lt;/a&gt; change EvilParser to MockParser and move to core (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1664635&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1664635&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/test/java/org/apache/tika/parser/DummyParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/test/java/org/apache/tika/parser/mock&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/test/java/org/apache/tika/parser/mock/MockParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/pom.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mock&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mock/MockParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/META-INF/services/org.apache.tika.parser.Parser&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/org/apache/tika/mime/custom-mimetypes.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/example.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/fake_oom.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/heavy_hang.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/nothing_bad.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/null_pointer.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/null_pointer_no_msg.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/real_oom.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/sleep.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/sleep_interruptible.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/sleep_not_interruptible.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/StackTraceOffTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/StackTraceTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/mock&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/mock/null_pointer.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14350709" author="tpalsulich" created="Fri, 6 Mar 2015 18:56:36 +0000"  >&lt;p&gt;+1. It looks like the above error was just Jenkins funkiness.&lt;/p&gt;</comment>
                            <comment id="14350726" author="tallison@mitre.org" created="Fri, 6 Mar 2015 19:04:23 +0000"  >&lt;p&gt;Thank you for that.  I was playing with XMP&apos;s dependencies in some of the dev work I was doing, but none of that should have made it into the commit!  I triple checked before and then triple checked after the failure notice.  It looks like a problem with a grib dependency, perhaps?&lt;/p&gt;

&lt;p&gt;Y, a Jenkins hiccup, I think.&lt;/p&gt;</comment>
                            <comment id="14353057" author="hudson" created="Mon, 9 Mar 2015 14:51:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #537 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/537/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/537/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1553&quot; title=&quot;Let&amp;#39;s add a mock parser to be used in testing parser drivers and wrappers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1553&quot;&gt;&lt;del&gt;TIKA-1553&lt;/del&gt;&lt;/a&gt;, add action types for printing to stdout and stderr (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1665232&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1665232&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-core/src/test/java/org/apache/tika/parser/mock/MockParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mock/MockParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/resources/test-documents/mock/example.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Feb 2015 14:43:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzzqrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>