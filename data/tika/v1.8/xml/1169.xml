<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:35:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1169/TIKA-1169.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1169] Fails to parse jnilib file</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1169</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m trying to parse a folder with jnilib file inside, but Tika 1.4 throws exception :&lt;/p&gt;

&lt;p&gt;java.io.IOException: &lt;br/&gt;
	at org.apache.tika.parser.ParsingReader.read(ParsingReader.java:260)&lt;br/&gt;
	at java.io.Reader.read(Unknown Source)&lt;br/&gt;
	at ca.cloudscraper.core.impl.Engine.process(Engine.java:63)&lt;br/&gt;
	at ca.cloudscraper.core.impl.Engine.process(Engine.java:34)&lt;br/&gt;
	at ca.cloudscraper.core.impl.Engine.process(Engine.java:34)&lt;br/&gt;
	at ca.cloudscraper.core.impl.Engine.process(Engine.java:34)&lt;br/&gt;
	at ca.cloudscraper.core.impl.Engine.execute(Engine.java:117)&lt;br/&gt;
	at ca.cloudscraper.core.tests.LuceneServiceImplTest.test5(LuceneServiceImplTest.java:140)&lt;br/&gt;
	at ca.cloudscraper.core.tests.LuceneServiceImplTest.main(LuceneServiceImplTest.java:176)&lt;br/&gt;
Caused by: org.apache.tika.exception.TikaException: Failed to parse a Java class&lt;br/&gt;
	at org.apache.tika.parser.asm.XHTMLClassVisitor.parse(XHTMLClassVisitor.java:66)&lt;br/&gt;
	at org.apache.tika.parser.asm.ClassParser.parse(ClassParser.java:51)&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)&lt;br/&gt;
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)&lt;br/&gt;
	at org.apache.tika.parser.ParsingReader$ParsingTask.run(ParsingReader.java:221)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;br/&gt;
Caused by: java.lang.ArrayIndexOutOfBoundsException: 0&lt;br/&gt;
	at org.objectweb.asm.ClassReader.readClass(ClassReader.java:2157)&lt;br/&gt;
	at org.objectweb.asm.ClassReader.accept(ClassReader.java:542)&lt;br/&gt;
	at org.objectweb.asm.ClassReader.accept(ClassReader.java:506)&lt;br/&gt;
	at org.apache.tika.parser.asm.XHTMLClassVisitor.parse(XHTMLClassVisitor.java:61)&lt;br/&gt;
	... 6 more&lt;/p&gt;

&lt;p&gt;Seems like Tika tries to parse this file as Java class file, but that obviously doesn&apos;t work.&lt;br/&gt;
I&apos;ve tried to create custom-mimetypes.xml file like this :&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;mime-info&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;mime-type type=&quot;application/octet-stream&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;_comment&amp;gt;Mac OSX jnilib&amp;lt;/_comment&amp;gt;&lt;br/&gt;
    &amp;lt;glob pattern=&quot;*.jnilib&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;/mime-type&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/mime-info&amp;gt;&lt;/p&gt;

&lt;p&gt;and after I repack tika-app-1.4.jar with this file in org.apache.tika.mime folder, the problem still&lt;br/&gt;
exists.&lt;/p&gt;

&lt;p&gt;Jnilib file is actually from the ActiveMQ 5.8.0 binary found in bin/macosx/libwrapper.jnilib&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 x64, Java 1.6.45&lt;/p&gt;</environment>
        <key id="12666553">TIKA-1169</key>
            <summary>Fails to parse jnilib file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="brat">brat</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Sep 2013 09:41:35 +0100</created>
                <updated>Fri, 16 May 2014 15:23:32 +0100</updated>
                            <resolved>Mon, 2 Sep 2013 13:28:57 +0100</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13755957" author="brat" created="Mon, 2 Sep 2013 09:42:47 +0100"  >&lt;p&gt;From ActiveMQ 5.8.0&lt;/p&gt;</comment>
                            <comment id="13756038" author="gagravarr" created="Mon, 2 Sep 2013 13:28:57 +0100"  >&lt;p&gt;Hopefully fixed in r1519414.&lt;/p&gt;

&lt;p&gt;I&apos;ve add a more specific magic on a different type, along with a new mimetype and unit test&lt;/p&gt;</comment>
                            <comment id="13999705" author="githubbot" created="Fri, 16 May 2014 10:02:41 +0100"  >&lt;p&gt;GitHub user mkr opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/pull/8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1169&quot; title=&quot;Fails to parse jnilib file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1169&quot;&gt;&lt;del&gt;TIKA-1169&lt;/del&gt;&lt;/a&gt;: Adding other Mach-O magic bytes for jnilib files.&lt;/p&gt;

&lt;p&gt;    Adding remaining Mach-o binary signatures to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1169&quot; title=&quot;Fails to parse jnilib file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1169&quot;&gt;&lt;del&gt;TIKA-1169&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mkr/tika&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/mkr/tika&lt;/a&gt; tika-1169-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/pull/8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #8&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8b033abfa19a3cb8939ac67bbabcd4d53e89ec42&lt;br/&gt;
Author: Matthias Krueger &amp;lt;mkr@mkr.io&amp;gt;&lt;br/&gt;
Date:   2014-05-16T08:58:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1169&quot; title=&quot;Fails to parse jnilib file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1169&quot;&gt;&lt;del&gt;TIKA-1169&lt;/del&gt;&lt;/a&gt;: Adding other Mach-O magic bytes for jnilib files.&lt;br/&gt;
    MH_MAGIC = 0xfeedface&lt;br/&gt;
    MH_CIGAM = 0xcefaedfe&lt;br/&gt;
    MH_MAGIC_64 = 0xfeedfacf&lt;br/&gt;
    MH_CIGAM_64 = 0xcffaedfe&lt;br/&gt;
     See &lt;a href=&quot;https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="13999825" author="githubbot" created="Fri, 16 May 2014 15:23:32 +0100"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tika/pull/8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/tika/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12601038" name="libwrapper.jnilib" size="35332" author="brat" created="Mon, 2 Sep 2013 09:42:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Sep 2013 12:28:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzhlcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>