<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:31:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-394/TIKA-394.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-394] Missing spaces on html parsing</title>
                <link>https://issues.apache.org/jira/browse/TIKA-394</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;On parsing such html code:&lt;/p&gt;

&lt;p&gt;text&amp;lt;p&amp;gt;more&amp;lt;br&amp;gt;yet&amp;lt;select&amp;gt;&amp;lt;option&amp;gt;city1&amp;lt;option&amp;gt;city2&amp;lt;/select&amp;gt;&lt;/p&gt;

&lt;p&gt;resulting text is:&lt;/p&gt;

&lt;p&gt;textmore&lt;br/&gt;
yetcity1city2&lt;/p&gt;

&lt;p&gt;But must be:&lt;/p&gt;

&lt;p&gt;text&lt;br/&gt;
more&lt;br/&gt;
yet city1 city2&lt;/p&gt;

&lt;p&gt;Code sample:&lt;/p&gt;

&lt;p&gt;import java.io.*;&lt;br/&gt;
import org.apache.tika.metadata.*;&lt;br/&gt;
import org.apache.tika.parser.*;&lt;/p&gt;

&lt;p&gt;public class test {&lt;/p&gt;

&lt;p&gt;   public static void main(String[] args) throws Exception {&lt;br/&gt;
      Metadata metadata = new Metadata();&lt;br/&gt;
      metadata.set(Metadata.CONTENT_TYPE, &quot;text/html&quot;);&lt;br/&gt;
      String content = &quot;text&amp;lt;p&amp;gt;more&amp;lt;br&amp;gt;yet&amp;lt;select&amp;gt;&amp;lt;option&amp;gt;city1&amp;lt;option&amp;gt;city2&amp;lt;/select&amp;gt;&quot;;&lt;/p&gt;

&lt;p&gt;      InputStream in = new ByteArrayInputStream(content.getBytes(&quot;UTF-8&quot;));&lt;br/&gt;
      AutoDetectParser parser = new AutoDetectParser();&lt;br/&gt;
      Reader reader = new ParsingReader(parser, in, metadata, new ParseContext());&lt;br/&gt;
      char[] buf = new char&lt;span class=&quot;error&quot;&gt;&amp;#91;10000&amp;#93;&lt;/span&gt;;&lt;br/&gt;
      int len;&lt;br/&gt;
      StringBuffer text = new StringBuffer();&lt;br/&gt;
      while((len = reader.read(buf)) &amp;gt; 0) &lt;/p&gt;
{
         text.append(buf, 0, len);
      }
&lt;p&gt;      System.out.print(text);&lt;br/&gt;
   }&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tomcat 6, Windows XP (russian locale)&lt;/p&gt;</environment>
        <key id="12460251">TIKA-394</key>
            <summary>Missing spaces on html parsing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkrugler">Ken Krugler</assignee>
                                    <reporter username="edhel">Andrey Barhatov</reporter>
                        <labels>
                            <label>html</label>
                            <label>spaces</label>
                            <label>tag</label>
                    </labels>
                <created>Thu, 25 Mar 2010 15:56:11 +0000</created>
                <updated>Thu, 25 Aug 2011 17:28:47 +0100</updated>
                            <resolved>Tue, 26 Oct 2010 18:02:07 +0100</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12887235" author="kkrugler" created="Sun, 11 Jul 2010 22:38:03 +0100"  >&lt;p&gt;The issue here is that various content handlers (e.g. BodyContentHandler, WriteoutContentHandler) need to add spaces at the end (and sometimes beginning) of elements that typically get rendered on different lines by a browser.&lt;/p&gt;

&lt;p&gt;Examples include &amp;lt;p&amp;gt;, &amp;lt;option&amp;gt;, &amp;lt;menu&amp;gt;, and others.&lt;/p&gt;

&lt;p&gt;I think we need a TextContentHandler &quot;helper&quot; that everybody can use to convert a stream of XHTML events into a reasonable text approximation of the marked up content.&lt;/p&gt;</comment>
                            <comment id="12925036" author="kkrugler" created="Tue, 26 Oct 2010 17:58:26 +0100"  >&lt;p&gt;Actually XHTMLContentHandler is set up to deal with this, but it was missing entries for &quot;select&quot; and &quot;option&quot;.&lt;/p&gt;</comment>
                            <comment id="12925038" author="kkrugler" created="Tue, 26 Oct 2010 18:02:07 +0100"  >&lt;p&gt;Committed: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1027652&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1027652&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13091107" author="edhel" created="Thu, 25 Aug 2011 17:28:47 +0100"  >&lt;p&gt;I test my above code on Tika 0.9. Result:&lt;/p&gt;

&lt;p&gt;textmore&lt;br/&gt;
yetcity1&lt;br/&gt;
city2&lt;/p&gt;

&lt;p&gt;I suppose it&apos;s not correct behavior.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12477542">TIKA-532</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12458084" name="TIKA-394.patch" size="3330" author="kkrugler" created="Tue, 26 Oct 2010 17:59:50 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 11 Jul 2010 21:38:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx41z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>