<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:37:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1323/TIKA-1323.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1323] Improve exception reporting in JAX-RS server</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1323</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I&apos;d like to use tika-server for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt;.  As part of that, I&apos;d like to record exception stacktraces per document.  I see two options: transmit the info back to the client (assuming a doc didn&apos;t bring the server down &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) along with the current error code or log the document id and stacktrace via the server.  Given my current design thoughts, I&apos;d prefer the first option.&lt;/p&gt;

&lt;p&gt;Any objections or recommendations?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12718522">TIKA-1323</key>
            <summary>Improve exception reporting in JAX-RS server</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tallison@mitre.org">Tim Allison</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jun 2014 02:57:20 +0100</created>
                <updated>Thu, 2 Apr 2015 03:48:12 +0100</updated>
                            <resolved>Fri, 20 Feb 2015 19:22:01 +0000</resolved>
                                                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14018612" author="sergey_beryozkin" created="Thu, 5 Jun 2014 10:17:27 +0100"  >&lt;p&gt;Hi, my be do log at the server plus optionally report all the details to the client ? I&apos;m not sure really &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14018931" author="tallison@mitre.org" created="Thu, 5 Jun 2014 17:35:48 +0100"  >&lt;p&gt;Hi Sergey,&lt;/p&gt;

&lt;p&gt;  For &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1302&quot; title=&quot;Let&amp;#39;s run Tika against a large batch of docs nightly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1302&quot;&gt;TIKA-1302&lt;/a&gt;, I&apos;d like to use tika-server, and I&apos;d like to be able to record exceptions at a per file level so that we can say, e.g. With Tika 1.5 we had 515 exceptions on docx files, but with Tika-1.6-SNAPSHOT we had 1025 or something similar.  I&apos;d also like to be able to say: we had an exception on file 12345.docx with Tika 1.5 but we&apos;re not getting an exception with Tika-1.6-SNAPSHOT.  We can do that now with tika-server on the client side.  If my client receives a 422 or 500, I know that something went wrong, and I can log it.&lt;/p&gt;

&lt;p&gt;However, what I&apos;d also like to be able to do is identify frequency of stacktrace elements so that we can sort the most frequent exceptions per document type.  To do this, we need to be able to record the stacktrace, and I&apos;d also like to be able to link the stacktrace back to the document that caused the problem. &lt;/p&gt;

&lt;p&gt;If I run Tika directly via java code (what I&apos;ve been doing), I can easily catch the exceptions and log the information at a per file basis.  So, my preference (plan A) would be have tika-server return the stacktrace as the body content for exceptions.  We can parameterize this functionality on the commandline, of course.  The other option (plan B) would be to pass the file name to tika-server, and have tika-server log the file name in conjunction with the stacktrace, but that is not as appealing to me.  The third option, of course, is to set up a different service for evaluation, but I&apos;d much prefer to use our base code as much as possible.&lt;/p&gt;

&lt;p&gt;So, is plan A reasonable?&lt;/p&gt;
</comment>
                            <comment id="14019202" author="sergey_beryozkin" created="Thu, 5 Jun 2014 21:31:20 +0100"  >&lt;p&gt;Hi Tim, sure, I was only commenting because in a pure web service server world it is kind of a good practice to limit the exposure of  the exception information to the client for the security reasons. But in this case it is not a &apos;pure&apos; server fault which can expose some sensitive info, it is more about presenting the &apos;fault&apos; info about given file Tika can not process to the client, this is how I see it a least &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. So yes, if A works for you then it is +1...&lt;/p&gt;

&lt;p&gt;Cheers, Sergey  &lt;/p&gt;</comment>
                            <comment id="14025345" author="tallison@mitre.org" created="Mon, 9 Jun 2014 17:50:10 +0100"  >&lt;p&gt;Great. Thank you, Sergey!  I&apos;ll require that the option be set on the commandline and the default will be the current behavior.  I&apos;ll post a patch to the review board by the end of the week or so.&lt;/p&gt;

&lt;p&gt;Off topic, but related... I noticed that the server will keep running even if a particular request causes an out of memory exception, other runtime exceptions or even errors.  This is an issue for another ticket, but before opening that one, I wanted to confirm: does this make sense?  Should the server keep running even if there are serious exceptions or errors?  I&apos;d think we&apos;d want it to clean up, log everything and shut down, but I&apos;d be interested in feedback.&lt;/p&gt;

&lt;p&gt;If we do want the server to shutdown for serious exceptions/errors, then I&apos;d want to add a daemon that polls the server for status (are you still alive/how many stale requests are you still processing?) and (re)restarts it if there are problems.  &lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="14329391" author="tallison@mitre.org" created="Fri, 20 Feb 2015 19:22:01 +0000"  >&lt;p&gt;r1661193&lt;/p&gt;

&lt;p&gt;Commandline option -includeStack will enable this behavior.  I centralized and made exception handling more uniform for parsing for /tika, /unpack and /rmeta.  /meta is still slightly different for backwards compatibility.&lt;/p&gt;</comment>
                            <comment id="14329426" author="tallison@mitre.org" created="Fri, 20 Feb 2015 19:41:52 +0000"  >&lt;p&gt;now running with this option on &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1301&quot; title=&quot;Establish TikaServer on Apache hosted VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1301&quot;&gt;TIKA-1301&lt;/a&gt;&apos;s server: 162.209.99.130 port 9998&lt;/p&gt;</comment>
                            <comment id="14329432" author="hudson" created="Fri, 20 Feb 2015 19:44:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #500 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/500/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/500/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1323&quot; title=&quot;Improve exception reporting in JAX-RS server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1323&quot;&gt;&lt;del&gt;TIKA-1323&lt;/del&gt;&lt;/a&gt;: allow tika-server to return stack traces from parse exceptions for easier analysis of parser exceptions via tika-server. (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1661193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1661193&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/pom.xml&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/MetadataResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/RecursiveMetadataResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/TikaExceptionMapper.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/TikaResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/TikaServerCli.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/TikaServerParseException.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/TikaServerParseExceptionMapper.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/UnpackerResource.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/CXFTestBase.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/DetectorResourceTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/MetadataResourceTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/StackTraceOffTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/StackTraceTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/TikaResourceTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/java/org/apache/tika/server/UnpackerResourceTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/META-INF&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/META-INF/services&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/META-INF/services/org.apache.tika.parser.Parser&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/evil/null_pointer.evil&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/mime&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/test/resources/mime/custom-mimetypes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14392026" author="hudson" created="Thu, 2 Apr 2015 03:48:12 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #599 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/599/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/599/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1323&quot; title=&quot;Improve exception reporting in JAX-RS server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1323&quot;&gt;&lt;del&gt;TIKA-1323&lt;/del&gt;&lt;/a&gt;: flush writer when printing stack trace (tallison: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1670807&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1670807&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-server/src/main/java/org/apache/tika/server/TikaServerParseExceptionMapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Jun 2014 09:17:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq5nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>