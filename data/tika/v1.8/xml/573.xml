<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:34:41 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-573/TIKA-573.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-573] MimeType.getExtension()</title>
                <link>https://issues.apache.org/jira/browse/TIKA-573</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;This patch adds getExtension() method to MimeType and support for reading mime-types from mime.types format.&lt;/p&gt;

&lt;p&gt;I added mime.types file from Fedora Linux, license says that it is public domain file:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
Red Hat disclaims any copyright on the &quot;mailcap&quot; and &quot;mime-types&quot; files and places them in the public domain. You are &lt;br/&gt;
free to do whatever you wish with these files.&lt;/p&gt;

&lt;p&gt;The mailcap.4 man page is under an MIT license:&lt;/p&gt;

&lt;p&gt;Copyright (c) 1991 Bell Communications Research, Inc. (Bellcore)&lt;/p&gt;

&lt;p&gt;Permission to use, copy, modify, and distribute this material&lt;br/&gt;
for any purpose and without fee is hereby granted, provided&lt;br/&gt;
that the above copyright notice and this permission notice&lt;br/&gt;
appear in all copies, and that the name of Bellcore not be&lt;br/&gt;
used in advertising or publicity pertaining to this&lt;br/&gt;
material without the specific, prior written permission&lt;br/&gt;
of an authorized representative of Bellcore.  BELLCORE&lt;br/&gt;
MAKES NO REPRESENTATIONS ABOUT THE ACCURACY OR SUITABILITY&lt;br/&gt;
OF THIS MATERIAL FOR ANY PURPOSE.  IT IS PROVIDED &quot;AS IS&quot;,&lt;br/&gt;
WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES.&lt;/p&gt;


&lt;p&gt;Tom Callaway, Fedora Legal, Red Hat&lt;br/&gt;
Thu Sep 17, 2009&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;(we do not need man page, only mime.types file)&lt;/p&gt;

&lt;p&gt;getExtension() method can be used for creating friendly filename for OLE-embedded files, streams and other cases when name is not known&lt;/p&gt;</description>
                <environment></environment>
        <key id="12493288">TIKA-573</key>
            <summary>MimeType.getExtension()</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="maxim.valyanskiy">Maxim Valyanskiy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Dec 2010 10:48:08 +0000</created>
                <updated>Thu, 2 Aug 2012 10:33:37 +0100</updated>
                            <resolved>Fri, 17 Dec 2010 10:34:43 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                    <component>mime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12971620" author="maxim.valyanskiy" created="Wed, 15 Dec 2010 10:51:00 +0000"  >&lt;p&gt;patch&lt;/p&gt;</comment>
                            <comment id="12971994" author="maxim.valyanskiy" created="Thu, 16 Dec 2010 08:04:34 +0000"  >&lt;p&gt;I&apos;m not sure that this patch fits correctly into Tika architecture, because it required additional actions to initialize extensions in MimeTypes class&lt;/p&gt;

&lt;p&gt;I see two alternatives to it:&lt;/p&gt;

&lt;p&gt;1) Add extension attribute into &amp;lt;mime-type&amp;gt; in tika-mimetypes.xml. I can use some script add all extensions from mime.types into tika-mimetypes.xml&lt;/p&gt;

&lt;p&gt;2) It is possible to get extension by parsing &amp;lt;glob&amp;gt; pattern in tika-mimetypes.xml&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="12972070" author="jukkaz" created="Thu, 16 Dec 2010 13:07:57 +0000"  >&lt;p&gt;It would be good if we could keep all media type information centralized in tika-mimetypes.xml, possibly with utility scripts that automatically map other type databases like mailcap files and the magic files mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-86&quot; title=&quot;Support magic(5) files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-86&quot;&gt;&lt;del&gt;TIKA-86&lt;/del&gt;&lt;/a&gt; into the XML format.&lt;/p&gt;

&lt;p&gt;I&apos;d also like to see us merge the extension and glob pattern information together. It looks like all the extensions in the mailcap file could be mapped to &amp;lt;glob&amp;gt; patterns in tika-mimetypes.xml, and conversely all &amp;lt;glob&amp;gt; patterns that start with &quot;*.&quot; and contain no other wildcard characters could be mapped to file extensions to be returned by the proposed new method.&lt;/p&gt;

&lt;p&gt;BTW, note that some media types are associated with more than one file extension. However, in all use cases I can think of the getExtension() method should return just a single &quot;default&quot; extension, which could simply be the extension that&apos;s listed first in the type database.&lt;/p&gt;</comment>
                            <comment id="12972156" author="maxim.valyanskiy" created="Thu, 16 Dec 2010 17:43:03 +0000"  >&lt;p&gt;Thank you, Jukka. I found that file extensions are already extracted in org.apache.tika.Patterns class.&lt;/p&gt;

&lt;p&gt;I prepared new version of my patch that initializes MimeType.extension on tika-mimetypes.xml parsing (without mime.types file). Extension are filled only once, so first pattern in mime-type definition becomes default extension.&lt;/p&gt;

&lt;p&gt;Patch also includes usage of MimeType.getExtension() method in TikaCLI&lt;/p&gt;</comment>
                            <comment id="12972157" author="maxim.valyanskiy" created="Thu, 16 Dec 2010 17:43:41 +0000"  >&lt;p&gt;new version of patch&lt;/p&gt;</comment>
                            <comment id="12972434" author="maxim.valyanskiy" created="Fri, 17 Dec 2010 10:34:43 +0000"  >&lt;p&gt;commited last patch at r1050340&lt;/p&gt;</comment>
                            <comment id="13035265" author="gaffa" created="Wed, 18 May 2011 11:11:44 +0100"  >&lt;p&gt;I got an Use-Case for getting all known valid extensions instead of a &quot;preferred extension&quot;.&lt;br/&gt;
We need to validate a file in an external component. In this component we have a stream as an input and no information about the files name. Afterwards the consumer of the component shall get an information about which mime type was detected and which are the known valid extensions.&lt;/p&gt;

&lt;p&gt;Example: User uploads myImage.jpeg. Tika recognizes the mime type and gives .jpg as extension. The consumer now checks if .jpg matches the actual extension .jpeg and it does not. The method getExtension() should be renamed into getPreferredExtension() or better: be removed as there is no way to know which is the &quot;preferred&quot; extension from the xml but the order. Better implement public List&amp;lt;String&amp;gt; getExtensions().&lt;/p&gt;

&lt;p&gt;I can provide you with a patch today if you like to have that. Can you tell me how soon this change would be applied to a public snapshot or something like that? We need that in our component and its kind of a showstopper. We would have to move away from tika if we cannot achieve to get ALL known valid extensions...&lt;/p&gt;</comment>
                            <comment id="13035317" author="gaffa" created="Wed, 18 May 2011 12:42:52 +0100"  >&lt;p&gt;We will use a proxy class deserializing the xml for now. I will open another bug and submit a patch later today.&lt;/p&gt;</comment>
                            <comment id="13035320" author="jukkaz" created="Wed, 18 May 2011 12:51:31 +0100"  >&lt;p&gt;&amp;gt; The consumer now checks if .jpg matches the actual extension .jpeg and it does not.&lt;/p&gt;

&lt;p&gt;Why would the consumer do this check? It already knows the file type in your example above.&lt;/p&gt;

&lt;p&gt;I&apos;m not saying this functionality wouldn&apos;t be needed, just trying to understand the need here.&lt;/p&gt;</comment>
                            <comment id="13035463" author="gaffa" created="Wed, 18 May 2011 17:02:15 +0100"  >&lt;p&gt;Well the consumer is a portlet which allows uploads of files by clients. All we get is a CommonsMultiPartFile -instance containing a stream which gets evaluated by our component which uses tika to get the Mime-Type and check if this mime type is allowed. We also have the OriginalFileName-field. Now we know that we have a file with a valid mime type and ANY extension. Next the portlet shall check if the original file has an extension which matches the mime type. For this purpose we need ALL extensions known to be related to the mime type.&lt;/p&gt;</comment>
                            <comment id="13035465" author="gaffa" created="Wed, 18 May 2011 17:02:51 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-661&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TIKA-661&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466393" name="0001-TIKA-573-add-MimeType.getExtension.patch" size="6144" author="maxim.valyanskiy" created="Thu, 16 Dec 2010 17:43:40 +0000"/>
                            <attachment id="12466306" name="TIKA-573.patch" size="53086" author="maxim.valyanskiy" created="Wed, 15 Dec 2010 10:51:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Dec 2010 13:07:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx2yf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>