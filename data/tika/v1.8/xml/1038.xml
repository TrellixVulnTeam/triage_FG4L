<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:35:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1038/TIKA-1038.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1038] Parsing PDF with StackOverlowError </title>
                <link>https://issues.apache.org/jira/browse/TIKA-1038</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;Tika corrupt with StackOverflowError on some pdf documents:&lt;br/&gt;
&lt;a href=&quot;http://www.ellipse-labo.com/fiches/1303214351.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.ellipse-labo.com/fiches/1303214351.pdf&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://downloads.joomlacode.org/frsrelease/5/4/0/54089/handbuch_ckforms-DE-1.3.2.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://downloads.joomlacode.org/frsrelease/5/4/0/54089/handbuch_ckforms-DE-1.3.2.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

AutoDetectParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AutoDetectParser(
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TypeDetector(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDFParser(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OfficeParser(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HtmlParser(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RTFParser(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OOXMLParser());

WriteOutContentHandler contentHandler = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WriteOutContentHandler();
Metadata metadata = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Metadata();

parser.parse(contentStream, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BodyContentHandler(contentHandler), metadata, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ParseContext());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.StackOverflowError
	at java.util.LinkedHashMap$LinkedHashIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:345)
	at java.util.LinkedHashMap$LinkedHashIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:345)
	at java.util.LinkedHashMap$KeyIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:383)
	at java.util.LinkedHashMap$KeyIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:383)
	at java.util.LinkedHashMap.newKeyIterator(LinkedHashMap.java:396)
	at java.util.HashMap$KeySet.iterator(HashMap.java:874)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1416)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1421)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1421)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1421)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1421)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


</description>
                <environment></environment>
        <key id="12618838">TIKA-1038</key>
            <summary>Parsing PDF with StackOverlowError </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tpalsulich">Tyler Palsulich</assignee>
                                    <reporter username="patsak">Konstantin Privezentsev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Dec 2012 07:58:10 +0000</created>
                <updated>Wed, 4 Mar 2015 23:31:57 +0000</updated>
                            <resolved>Wed, 4 Mar 2015 21:42:41 +0000</resolved>
                                    <version>1.2</version>
                                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14346075" author="tpalsulich" created="Wed, 4 Mar 2015 00:19:29 +0000"  >&lt;p&gt;Just commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1835&quot; title=&quot;Stackoverflow pdfbox 1.8.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1835&quot;&gt;&lt;del&gt;PDFBOX-1835&lt;/del&gt;&lt;/a&gt; with this issue. I was able to reproduce with Tika 1.8-SNAPSHOT. Here is an updated stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#10140;  trunk  tika http:&lt;span class=&quot;code-comment&quot;&gt;//downloads.joomlacode.org/frsrelease/5/4/0/54089/handbuch_ckforms-DE-1.3.2.pdf
&lt;/span&gt;INFO - Document is encrypted
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.StackOverflowError
	at java.util.LinkedHashMap$LinkedHashIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:366)
	at java.util.LinkedHashMap$LinkedHashIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:366)
	at java.util.LinkedHashMap$KeyIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:404)
	at java.util.LinkedHashMap$KeyIterator.&amp;lt;init&amp;gt;(LinkedHashMap.java:404)
	at java.util.LinkedHashMap.newKeyIterator(LinkedHashMap.java:417)
	at java.util.HashMap$KeySet.iterator(HashMap.java:1002)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1554)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1560)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1560)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1560)
	at org.apache.pdfbox.cos.COSDictionary.toString(COSDictionary.java:1560)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14347377" author="tilman" created="Wed, 4 Mar 2015 18:59:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;Tim Allison&lt;/a&gt;  are you watching this one? I made a (hopefully useful) response in &lt;a href=&quot;https://issues.apache.org/jira/browse/PDFBOX-1835&quot; title=&quot;Stackoverflow pdfbox 1.8.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PDFBOX-1835&quot;&gt;&lt;del&gt;PDFBOX-1835&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14347382" author="tallison@mitre.org" created="Wed, 4 Mar 2015 19:04:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;Tilman Hausherr&lt;/a&gt;, I hadn&apos;t been, but now am.  Thank you.  I&apos;ll have a chance to look into this once we dig out from the impending snow. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14347406" author="tpalsulich" created="Wed, 4 Mar 2015 19:18:13 +0000"  >&lt;p&gt;Here is a simple patch to never call &lt;tt&gt;toString()&lt;/tt&gt; on a &lt;tt&gt;COSDictionary&lt;/tt&gt;. This passes all tests locally. I don&apos;t think this has any unintended consequences. But, I&apos;m not sure.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit and resolve this by EOD today if no one objects.&lt;/p&gt;</comment>
                            <comment id="14347426" author="tallison@mitre.org" created="Wed, 4 Mar 2015 19:29:37 +0000"  >&lt;p&gt;Couldn&apos;t help it.  Y, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt;, that looks good to me.  I don&apos;t think we&apos;ll lose much info if we don&apos;t unspool dicts there...clearly a fairly rare event.&lt;/p&gt;

&lt;p&gt;If you could add a comment about the danger of calling toString() on COSDictionary in lieu of a unit test with this non-Apache friendly document, that&apos;d be great.&lt;/p&gt;

&lt;p&gt;If there are any surprises, we&apos;ll probably find them on the next run against govdocs1.&lt;/p&gt;

&lt;p&gt;Should  have been more explicit.  Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt; for tracking this down, and thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;Tilman Hausherr&lt;/a&gt;, yet again!&lt;/p&gt;</comment>
                            <comment id="14347616" author="tpalsulich" created="Wed, 4 Mar 2015 21:42:41 +0000"  >&lt;p&gt;Fixed in r1664157. Thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tilman&quot; class=&quot;user-hover&quot; rel=&quot;tilman&quot;&gt;Tilman Hausherr&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tallison%40mitre.org&quot; class=&quot;user-hover&quot; rel=&quot;tallison@mitre.org&quot;&gt;Tim Allison&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14347781" author="hudson" created="Wed, 4 Mar 2015 23:31:57 +0000"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #529 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/529/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/529/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1038&quot; title=&quot;Parsing PDF with StackOverlowError &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1038&quot;&gt;&lt;del&gt;TIKA-1038&lt;/del&gt;&lt;/a&gt;. Fix possible infinite recursion while parsing some PDFs. (tpalsulich: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1664157&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1664157&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/pdf/PDFParser.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12702589" name="TIKA-1038.palsulich.patch" size="671" author="tpalsulich" created="Wed, 4 Mar 2015 19:18:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 4 Mar 2015 00:19:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyy0lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>