<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:36:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-761/TIKA-761.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-761] Provide version number by CLI argument -V</title>
                <link>https://issues.apache.org/jira/browse/TIKA-761</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I&apos;d like to get the Apache Tika version number through CLI argument -V or --version. The patch is trivial and basically finished. The only thing missing (because Java is not my native programming language) is the actual version number. Any hints where I can get that from?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528484">TIKA-761</key>
            <summary>Provide version number by CLI argument -V</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="ingorenner">Ingo Renner</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Oct 2011 14:16:10 +0100</created>
                <updated>Tue, 1 Nov 2011 12:35:04 +0000</updated>
                            <resolved>Fri, 28 Oct 2011 17:09:10 +0100</resolved>
                                                    <fixVersion>1.0</fixVersion>
                                    <component>cli</component>
                    <component>general</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13134059" author="gagravarr" created="Mon, 24 Oct 2011 14:26:48 +0100"  >&lt;p&gt;The version is maintained in the pom, and Maven then puts that into the Manifest. I think the key in the tika-cli jar is &quot;Bundle-Version&quot;, but hopefully one of the Maven gurus can confirm?&lt;/p&gt;</comment>
                            <comment id="13134063" author="ingorenner" created="Mon, 24 Oct 2011 14:26:57 +0100"  >&lt;p&gt;just needs the version number in version()&lt;/p&gt;</comment>
                            <comment id="13134065" author="ingorenner" created="Mon, 24 Oct 2011 14:28:48 +0100"  >&lt;p&gt;removed whitespace change&lt;/p&gt;</comment>
                            <comment id="13134068" author="ingorenner" created="Mon, 24 Oct 2011 14:31:36 +0100"  >&lt;p&gt;@Nick, the version number in the pom was quite obvious, I just don&apos;t know how to access that in the app eventually.&lt;/p&gt;</comment>
                            <comment id="13134093" author="ingorenner" created="Mon, 24 Oct 2011 15:27:09 +0100"  >&lt;p&gt;working patch.&lt;/p&gt;

&lt;p&gt;I added a properties file in the filtered resources path. This properties file is processed by maven when building and I can then read the version number from the properties.&lt;/p&gt;</comment>
                            <comment id="13134105" author="ingorenner" created="Mon, 24 Oct 2011 15:36:57 +0100"  >&lt;p&gt;BTW, how about using -v (lowercase) to get the version instead of using it for verbose as it is now?&lt;/p&gt;</comment>
                            <comment id="13134108" author="gagravarr" created="Mon, 24 Oct 2011 15:41:49 +0100"  >&lt;p&gt;I think -v for verbose is more common, so I wouldn&apos;t be in favour of changing it&lt;/p&gt;</comment>
                            <comment id="13134113" author="jukkaz" created="Mon, 24 Oct 2011 15:49:28 +0100"  >&lt;p&gt;+1 Looks good.&lt;/p&gt;

&lt;p&gt;As a possible improvement, as Nick noted, you could read the version number from &lt;tt&gt;/META-INF/MANIFEST.MF&lt;/tt&gt; or from &lt;tt&gt;/META-INF/maven/org.apache.tika/tika-app/pom.properties&lt;/tt&gt; so we don&apos;t need to set up a custom properties file for this.&lt;/p&gt;

&lt;p&gt;Also, it would be cool if that information could be made available also through the Java API in tika-core. For example the toString() method of the Tika facade class could return something like &quot;Apache Tika x.y&quot;, and &lt;tt&gt;tika-app --version&lt;/tt&gt; would simply output that string.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;using -v (lowercase)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;-1 for backwards compatibility reasons.&lt;/p&gt;</comment>
                            <comment id="13134140" author="ingorenner" created="Mon, 24 Oct 2011 16:23:41 +0100"  >&lt;blockquote&gt;&lt;p&gt;+1 Looks good.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;thanks!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As a possible improvement, as Nick noted, you could read the version number from /META-INF/MANIFEST.MF or from /META-INF/maven/org.apache.tika/tika-app/pom.properties so we don&apos;t need to set up a custom properties file for this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It seems - from what I read - these are only available after building the app, which would be too late( ? ) &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, it would be cool if that information could be made available also through the Java API in tika-core. For example the toString() method of the Tika facade class could return something like &quot;Apache Tika x.y&quot;, and tika-app --version would simply output that string.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll give it a try.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;-1 for backwards compatibility reasons.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;fine with me, I just had the impression that -v was more common&lt;/p&gt;</comment>
                            <comment id="13134151" author="jukkaz" created="Mon, 24 Oct 2011 16:38:24 +0100"  >&lt;blockquote&gt;&lt;p&gt;It seems - from what I read - these are only available after building the app, which would be too late( ? )&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s not too late. After all, you can only run the app after it has been built. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; We need the version information only at runtime, so it&apos;s not a problem if it&apos;s not available at compile-time.&lt;/p&gt;</comment>
                            <comment id="13134210" author="ingorenner" created="Mon, 24 Oct 2011 17:32:03 +0100"  >&lt;p&gt;version.properties now in tika-core &lt;/p&gt;</comment>
                            <comment id="13134213" author="ingorenner" created="Mon, 24 Oct 2011 17:34:14 +0100"  >&lt;p&gt;Jukka, I hope this is what you meant with moving this to tika-core...&lt;/p&gt;

&lt;p&gt;However, I couldn&apos;t test the latest version of the patch since for some reason I&apos;m now getting the following exception when executing tika-app. I haven&apos;t changed anything besides what&apos;s in the diff. Any ideas?&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
	at org.apache.tika.mime.MimeTypesFactory.create(MimeTypesFactory.java:81)&lt;br/&gt;
	at org.apache.tika.mime.MimeTypesFactory.create(MimeTypesFactory.java:135)&lt;br/&gt;
	at org.apache.tika.mime.MimeTypes.getDefaultMimeTypes(MimeTypes.java:573)&lt;br/&gt;
	at org.apache.tika.detect.DefaultDetector.&amp;lt;init&amp;gt;(DefaultDetector.java:63)&lt;br/&gt;
	at org.apache.tika.cli.TikaCLI.&amp;lt;init&amp;gt;(TikaCLI.java:295)&lt;br/&gt;
	at org.apache.tika.cli.TikaCLI.main(TikaCLI.java:96)&lt;/p&gt;</comment>
                            <comment id="13134976" author="ingorenner" created="Tue, 25 Oct 2011 13:27:55 +0100"  >&lt;p&gt;Got the NPE resolved, it was caused by the changes to the pom. Since adding explicit resource directives Maven didn&apos;t copy tika-mimetypes.xml into the jar anymore. Fixed patch coming up...&lt;/p&gt;</comment>
                            <comment id="13135106" author="ingorenner" created="Tue, 25 Oct 2011 15:44:50 +0100"  >&lt;p&gt;Hi Nick and Jukka, some update on the META-INF approach:&lt;/p&gt;

&lt;p&gt;The path for the properties file would be&lt;br/&gt;
/META-INF/maven/org.apache.tika/tika-core/pom.properties&lt;/p&gt;

&lt;p&gt;I tried &lt;br/&gt;
String pomPropertiesFile = &quot;/META-INF/maven/&quot;&lt;br/&gt;
    + this.getClass().getPackage().getName()&lt;br/&gt;
    + &quot;/tika-core/pom.properties&quot;;&lt;br/&gt;
InputStream pomIs = Tika.class.getResourceAsStream(pomPropertiesFile);&lt;/p&gt;

&lt;p&gt;Problem is that getResourceAsStream replaces dots in the path with slashes except for the last one. So the path becomes something like /META-INF/maven/org/apache/tika/tika-core/pom.properties leading to an NPE when trying to load the properties from pomIs. ... Leaving us (me?) w/o a way to get to this properties file...&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;</comment>
                            <comment id="13135129" author="jukkaz" created="Tue, 25 Oct 2011 16:02:27 +0100"  >&lt;p&gt;I&apos;d simply hardcode the properties file path as &lt;tt&gt;/META-INF/maven/org.apache.tika/tika-core/pom.properties&lt;/tt&gt;. It&apos;s not going to change any time soon.&lt;/p&gt;</comment>
                            <comment id="13135162" author="ingorenner" created="Tue, 25 Oct 2011 16:47:44 +0100"  >&lt;p&gt;sure, but the dots will still be replaced with slashes by getResourceAsStream(), so it won&apos;t matter really (except for saving the getPackage() call)...&lt;/p&gt;</comment>
                            <comment id="13135167" author="jukkaz" created="Tue, 25 Oct 2011 16:52:39 +0100"  >&lt;blockquote&gt;&lt;p&gt;the dots will still be replaced with slashes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Only if the path is relative. If the path starts with a slash, like in &lt;tt&gt;/META-INF/...&lt;/tt&gt;, no dot replacement will occur.&lt;/p&gt;</comment>
                            <comment id="13135181" author="ingorenner" created="Tue, 25 Oct 2011 17:02:26 +0100"  >&lt;p&gt;oh wow, &lt;del&gt;indeed works&lt;/del&gt;. ... false alarm, still not working.&lt;/p&gt;</comment>
                            <comment id="13135257" author="jukkaz" created="Tue, 25 Oct 2011 18:27:25 +0100"  >&lt;p&gt;See revision 1188803 for a slightly modified version of your latest patch that seems to do the trick.&lt;/p&gt;</comment>
                            <comment id="13135885" author="ingorenner" created="Wed, 26 Oct 2011 13:05:12 +0100"  >&lt;p&gt;hmm, can&apos;t get it to work for me, stream is null.&lt;br/&gt;
What did you do to get it working on your end?&lt;/p&gt;

&lt;p&gt;In case it matters, I&apos;m on OS X Lion:&lt;br/&gt;
java -version&lt;br/&gt;
java version &quot;1.6.0_26&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_26-b03-383-11A511)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02-383, mixed mode)&lt;/p&gt;</comment>
                            <comment id="13138483" author="jukkaz" created="Fri, 28 Oct 2011 17:09:10 +0100"  >&lt;p&gt;In revision 1190416 I added a missing piece of POM configuration for copying the /META-INF/maven resources from tika-core also to tika-app.&lt;/p&gt;</comment>
                            <comment id="13141107" author="ingorenner" created="Tue, 1 Nov 2011 12:35:04 +0000"  >&lt;p&gt;confirmed, working now. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500488" name="TIKA-761.diff" size="3838" author="ingorenner" created="Mon, 24 Oct 2011 17:32:03 +0100"/>
                            <attachment id="12500451" name="TIKA-761.diff" size="2403" author="ingorenner" created="Mon, 24 Oct 2011 15:27:09 +0100"/>
                            <attachment id="12500441" name="TIKA-761.diff" size="1554" author="ingorenner" created="Mon, 24 Oct 2011 14:28:48 +0100"/>
                            <attachment id="12500439" name="TIKA-761.diff" size="2210" author="ingorenner" created="Mon, 24 Oct 2011 14:26:57 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Oct 2011 13:26:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx1sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>