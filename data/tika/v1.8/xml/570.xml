<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:34:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-570/TIKA-570.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-570] If this is a BMP, my name is horatio alger</title>
                <link>https://issues.apache.org/jira/browse/TIKA-570</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I am attaching a file which Tika is identifying as a bmp. It contains ordinary text.&lt;/p&gt;


&lt;p&gt;org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.image.ImageParser@20a19811&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:199)&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:197)&lt;br/&gt;
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:137)&lt;br/&gt;
	at com.basistech.jug.FileHarvester.process(FileHarvester.java:204)&lt;br/&gt;
	at com.basistech.jug.FileHarvester.harvestDir(FileHarvester.java:165)&lt;br/&gt;
	at com.basistech.jug.FileHarvester.harvestDir(FileHarvester.java:179)&lt;br/&gt;
	at com.basistech.jug.FileHarvester.harvest(FileHarvester.java:135)&lt;br/&gt;
	at com.basistech.jug.FileHarvester.run(FileHarvester.java:247)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: java.lang.RuntimeException: New BMP version not implemented yet.&lt;br/&gt;
	at com.sun.imageio.plugins.bmp.BMPImageReader.readHeader(BMPImageReader.java:462)&lt;br/&gt;
	at com.sun.imageio.plugins.bmp.BMPImageReader.getWidth(BMPImageReader.java:174)&lt;br/&gt;
	at org.apache.tika.parser.image.ImageParser.parse(ImageParser.java:75)&lt;br/&gt;
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:197)&lt;br/&gt;
	... 8 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12493011">TIKA-570</key>
            <summary>If this is a BMP, my name is horatio alger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bmargulies">Benson Margulies</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Dec 2010 19:38:30 +0000</created>
                <updated>Thu, 2 Aug 2012 10:33:39 +0100</updated>
                            <resolved>Mon, 13 Dec 2010 02:42:25 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12970578" author="gagravarr" created="Sun, 12 Dec 2010 04:54:20 +0000"  >&lt;p&gt;First line of the file:&lt;br/&gt;
&quot;BMW to Make Hybrid Sports Car&#8233;&quot;&lt;/p&gt;

&lt;p&gt;And the BMP matcher is:&lt;br/&gt;
    &amp;lt;magic priority=&quot;50&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;match value=&quot;BM&quot; type=&quot;string&quot; offset=&quot;0&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/magic&amp;gt;&lt;/p&gt;

&lt;p&gt;I think we&apos;ll need to add a second check too onto it&lt;/p&gt;</comment>
                            <comment id="12970579" author="gagravarr" created="Sun, 12 Dec 2010 04:59:28 +0000"  >&lt;p&gt;Reading &lt;a href=&quot;http://en.wikipedia.org/wiki/BMP_file_format&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://en.wikipedia.org/wiki/BMP_file_format&lt;/a&gt; I&apos;m not sure what else we can be sure to find, but I&apos;m tempted to say we also require either &quot;00 00&quot; or &quot;00 00 00&quot; inside the first few KB - a text file shouldn&apos;t have that many nulls, but most bitmaps will.&lt;/p&gt;</comment>
                            <comment id="12970626" author="bbdouglas-basis" created="Sun, 12 Dec 2010 18:29:45 +0000"  >&lt;p&gt;What about this (from the Wikipedia article):&lt;/p&gt;

&lt;p&gt;Offset: 0x1A&lt;br/&gt;
Size:2&lt;br/&gt;
Purpose: the number of color planes being used. Must be set to 1.&lt;/p&gt;

&lt;p&gt;This means that there is always a two byte 0x01 0x00 sequence at a specific offset toward the beginning of the file. This is in the header, and granted there are different versions of the header; but the description in the article makes it look like the majority of headers have this, possibly modulo OS/2 flavors. The pattern 0x01 0x00 is not likely to appear in most plain text, especially text that begins with ASCII. The BMP file in the unit tests has this signature, for example.&lt;/p&gt;</comment>
                            <comment id="12970627" author="bbdouglas-basis" created="Sun, 12 Dec 2010 18:41:39 +0000"  >&lt;p&gt;Also looking at:&lt;/p&gt;

&lt;p&gt;BITMAPCOREHEADER: &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/dd183372%28VS.85%29.aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/dd183372%28VS.85%29.aspx&lt;/a&gt;&lt;br/&gt;
BITMAPINFOHEADER: &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/dd183376%28VS.85%29.aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/dd183376%28VS.85%29.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It looks as if the two byte sequence at 0x1C (bit count) must have the values 0, 1, 4, 8, 16, 24, or 32. Especially since these all have a 0x00 in their most significant byte, this again should have very little overlap with text data that starts with ASCII.&lt;/p&gt;</comment>
                            <comment id="12970636" author="bbdouglas-basis" created="Sun, 12 Dec 2010 19:58:16 +0000"  >&lt;p&gt;I am attaching a patch that encodes the &quot;BM&quot; prefix, the color planes signature, and the possible bit count values in tika-mimetypes.xml. I believe that since we are checking for the &quot;BM&quot; magic, this should not conflict with any OS/2 variations, since they have different magic values, like &quot;BA&quot;, &quot;CI&quot;, etc.&lt;/p&gt;

&lt;p&gt;This patch adds the original text file to the test document set and confirms in the unit test that it is not detected as a bitmap.&lt;/p&gt;</comment>
                            <comment id="12970687" author="gagravarr" created="Mon, 13 Dec 2010 02:42:25 +0000"  >&lt;p&gt;Thanks for the patch, I agree those look like the right header bytes to check for. I&apos;ve applied it in r1045006.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12466071" name="C80A5295-EFC7-44DD-9A39-B882D1EC6F38.txt" size="1758" author="bmargulies" created="Sat, 11 Dec 2010 19:40:15 +0000"/>
                            <attachment id="12466070" name="C80A5295-EFC7-44DD-9A39-B882D1EC6F38.txt" size="1758" author="bmargulies" created="Sat, 11 Dec 2010 19:40:15 +0000"/>
                            <attachment id="12466106" name="TIKA-570.patch" size="3884" author="bbdouglas-basis" created="Sun, 12 Dec 2010 19:58:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 12 Dec 2010 04:54:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4293</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx2z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>