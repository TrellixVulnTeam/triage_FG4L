<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:35:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-402/TIKA-402.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-402] Support for iWork documents</title>
                <link>https://issues.apache.org/jira/browse/TIKA-402</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;It would be nice to have support for documents created by Apple&apos;s Keynote and Pages applications. Both file formats are described in &lt;a href=&quot;http://developer.apple.com/mac/library/documentation/AppleApplications/Conceptual/iWork2-0_XML/Chapter01/Introduction.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developer.apple.com/mac/library/documentation/AppleApplications/Conceptual/iWork2-0_XML/Chapter01/Introduction.html&lt;/a&gt;. I&apos;m not sure if there already are open source parser libraries for these formats or if we&apos;d need to directly process the XML content.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461719">TIKA-402</key>
            <summary>Support for iWork documents</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Apr 2010 18:15:57 +0100</created>
                <updated>Wed, 7 Jul 2010 14:31:04 +0100</updated>
                            <resolved>Wed, 7 Jul 2010 08:10:31 +0100</resolved>
                                                    <fixVersion>0.8</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12863218" author="martijn" created="Mon, 3 May 2010 00:24:00 +0100"  >&lt;p&gt;I couldn&apos;t find a java library that parses a keynote presentation, so I have made an initial patch that parses a keynote presentation. It is work in-progress and I was hoping to get some feedback. The attached presentation is a keynote version 5 presentation (but has keynote format version 2.x). &lt;/p&gt;

&lt;p&gt;The patch is working. If have tested this via the Tika CLI. Also 2 tests are included in the patch, one testing the parsing and one the auto detecting.&lt;/p&gt;

&lt;p&gt;I have added the test file separately, because binary files can&apos;t be included in a patch. The keynote file should be placed the test-documents package in the parsers module&apos;s resource directory.&lt;/p&gt;

&lt;p&gt;Older keynote format versions (1.x) are not supported yet, because the format is different. Also if I remember correctly that keynote file is a directory and not a compressed file. Support for Pages is not yet included.&lt;/p&gt;</comment>
                            <comment id="12863992" author="martijn" created="Tue, 4 May 2010 22:00:19 +0100"  >&lt;p&gt;Updated the patch. Refactored the patch a bit. I Introduced extractors for each format. I saw the same for the ms office parser. Currently only Keynote has a working extractor. Pages and Numbers format support will follow shortly.&lt;/p&gt;</comment>
                            <comment id="12865951" author="martijn" created="Mon, 10 May 2010 23:14:47 +0100"  >&lt;p&gt;I&apos;ve updated the patch to include Pages support. Parser will extract all metadata and content from a pages document. Every page had a div and each paragraph is added to a p element. Table data is extracted as well. I&apos;ve put this data inside a xhtml table (&amp;lt;table&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;...)&lt;/p&gt;

&lt;p&gt;The code needs some cleanup and some more documentation. Numbers support will follow soon.&lt;/p&gt;</comment>
                            <comment id="12866621" author="jukkaz" created="Wed, 12 May 2010 17:43:23 +0100"  >&lt;p&gt;Nice work, thanks!&lt;/p&gt;

&lt;p&gt;I took the liberty of changing the indentation to the four spaces we use elsewhere in Tika and of adding the Apache license headers based on your indication to license the code to Apache. I also made some adjustments to the code, mostly to avoid inner classes and inheritance from XMLParser. the resulting code was committed in revision 943569.&lt;/p&gt;

&lt;p&gt;I&apos;m leaving this issue open for further improvements like the Numbers support you mentioned.&lt;/p&gt;</comment>
                            <comment id="12867499" author="martijn" created="Fri, 14 May 2010 14:30:09 +0100"  >&lt;p&gt;Thanks for adding! Yes I forgot to add the Apache licence, so good you did that. I&apos;ve updated my patch. The following has changed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The test for pages did not have any assertions. So I added them to match with the test Pages document.&lt;/li&gt;
	&lt;li&gt;I noticed that for Keynote presentations the table wasn&apos;t parsed. I fixed that and adjusted the Keynote test and the testKeynote.key file.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I will work on the Numbers support in the coming days.&lt;/p&gt;</comment>
                            <comment id="12871767" author="jukkaz" created="Wed, 26 May 2010 16:12:56 +0100"  >&lt;p&gt;Latest patch committed in revision 948452, thanks!&lt;/p&gt;

&lt;p&gt;PS. Note that we use four spaces for indentation.&lt;/p&gt;</comment>
                            <comment id="12871848" author="martijn" created="Wed, 26 May 2010 18:52:19 +0100"  >&lt;p&gt;Oops... next patch will have 4 space indentation!&lt;/p&gt;</comment>
                            <comment id="12873503" author="martijn" created="Sun, 30 May 2010 22:59:20 +0100"  >&lt;p&gt;I&apos;ve added Numbers support to the patch. &lt;/p&gt;

&lt;p&gt;Pages and Numbers have both the same file content file (index.xml) in the compressed file (*.pages / *.numbers). This makes detecting formats a bit more difficult. I&apos;ve solved this by comparing the root element which is different in both formats. I&apos;m not really happy with this solution, but it seems the only solution. If someone has a nicer solution for this please share. A Keynote file has index.apx1 as content file, which makes it much easier to determine the format.&lt;/p&gt;</comment>
                            <comment id="12873682" author="jukkaz" created="Mon, 31 May 2010 16:03:07 +0100"  >&lt;p&gt;Nice work again, thanks! I committed  the latest changes in revision 949763.&lt;/p&gt;

&lt;p&gt;It looks like we&apos;re getting close to marking this as resolved. I&apos;m looking forward to rolling out this feature in Tika 0.8!&lt;/p&gt;</comment>
                            <comment id="12873708" author="jukkaz" created="Mon, 31 May 2010 17:37:42 +0100"  >&lt;p&gt;See revisions 949775, 949776 and 949795 for a few improvements I made.&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if it would make sense to use our existing generic XML root element detection mechanism for these file formats, especially since it&apos;s possible for an iWork document to be stored as directory instead of as a zip archive. This way we wouldn&apos;t need the explicit IWorkRootElementDetectContentHandler class and IWorkParser would be just a special case of the PackageParser class. On the other hand we&apos;d then need to turn the current format-specific content handlers into separate Tika Parser implementations. Not sure if the benefits are worth the trouble.&lt;/p&gt;</comment>
                            <comment id="12873710" author="chrismattmann" created="Mon, 31 May 2010 17:48:23 +0100"  >&lt;p&gt;Hey Jukka,&lt;/p&gt;

&lt;p&gt;Well, if we ever consider doing OmniGraffle documents, they exhibit the same behavior, so might be good to generalize it...&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Chris&lt;/p&gt;</comment>
                            <comment id="12873735" author="martijn" created="Mon, 31 May 2010 19:02:24 +0100"  >&lt;p&gt;I&apos;m also looking forward in having this feature in 0.8! I&apos;m not sure what you mean with: &apos;to use our existing generic XML root element detection mechanism for these file formats&apos;. What class(es) do you mean specifically with this? Also how would the PackageParser be able to parse the contents of a directory (The class only works for archives. Correct me if i&apos;m wrong.)? I&apos;ve only see this happening with keynote presentations made with IWork &apos;06 (I&apos;m not sure if I had the compression disabled for Keynote at that time). &lt;/p&gt;

&lt;p&gt;I also agree with Chris. There are properly more formats out there that use the same mechanism as IWork, but we can maybe wait to refactor until it&apos;s necessary (Agile... to throw in a buzz word).&lt;/p&gt;

&lt;p&gt;BTW It was a good to to use theContentHandlerDecorator. Too bad I missed that one!&lt;/p&gt;
</comment>
                            <comment id="12876431" author="jukkaz" created="Mon, 7 Jun 2010 22:33:48 +0100"  >&lt;p&gt;&amp;gt; XML root element detection&lt;/p&gt;

&lt;p&gt;See the o.a.t.detect.XmlRootExtractor class and the &amp;lt;root-XML/&amp;gt; entries in the tika-mimetypes.xml configuration file.&lt;/p&gt;

&lt;p&gt;&amp;gt; directory&lt;/p&gt;

&lt;p&gt;My idea is that if you point a file system crawler to uncompressed iWork directories, we should still be able to produce reasonable output when the crawler feeds the XML file to Tika.&lt;/p&gt;</comment>
                            <comment id="12885067" author="martijn" created="Sun, 4 Jul 2010 20:00:22 +0100"  >&lt;p&gt;Jukka, I made some refactorings in the new attached patch in order the get rid of the IWorkRootElementDetectContentHandler class. Basically the IWorkParser only parses the relevant IWork xml files (i configured the xml documents to the parser with root-XML element). I created IWorkPackageParser class that deals with the container format file (*.keynote|pages|numbers). In this way if a IWork document is uncompressed or somehow put in a different archive file it can still be parsed.&lt;/p&gt;</comment>
                            <comment id="12885515" author="jukkaz" created="Tue, 6 Jul 2010 13:19:48 +0100"  >&lt;p&gt;Nice work, thanks! I committed the latest patch in revision 960884.&lt;/p&gt;

&lt;p&gt;I guess we can mark this as resolved now.&lt;/p&gt;</comment>
                            <comment id="12885519" author="martijn" created="Tue, 6 Jul 2010 13:38:27 +0100"  >&lt;p&gt;Thanks for committing! Should support for IWork &apos;06 formats be done in  a new issue or in this one? I might have some time to do this in the near future.&lt;/p&gt;</comment>
                            <comment id="12885521" author="jukkaz" created="Tue, 6 Jul 2010 13:43:52 +0100"  >&lt;p&gt;&amp;gt; Should support for IWork &apos;06 formats be done in a new issue or in this one?&lt;/p&gt;

&lt;p&gt;It&apos;s probably best to track it in a separate issue to keep individual issues tightly focused.&lt;/p&gt;</comment>
                            <comment id="12885531" author="jukkaz" created="Tue, 6 Jul 2010 14:18:38 +0100"  >&lt;p&gt;Reopening for a minor test failure on Java 5, see revision 960892. It looks like in some cases the parser loses whitespace between words. This is probably related to the way the XML parser works in the underlying Java version. Perhaps a distinction between characters() and ignorableWhitespace() calls.&lt;/p&gt;</comment>
                            <comment id="12885682" author="martijn" created="Tue, 6 Jul 2010 21:49:31 +0100"  >&lt;p&gt;I&apos;ve attached a new patch that fixes the failure in test in a Java 5 environment. Apparently the following piece of text was given by the java 5 parser in two event s:&lt;br/&gt;
Both Pages 1.x and Keynote 2.x&lt;/p&gt;

&lt;p&gt;In the content handlers the trim function was used which resulted in the following line:&lt;br/&gt;
Both Pages 1.xand Keynote 2.x&lt;/p&gt;

&lt;p&gt;This caused the assertion failure. I&apos;ve removed all the usage of trim in the content handlers, which fixes the problem. Test passes as well when JDK 6 is used. The usage of trim was apparently not necessary. The text is put correctly in the XHTMLContentHandler.&lt;/p&gt;</comment>
                            <comment id="12885857" author="jukkaz" created="Wed, 7 Jul 2010 08:10:31 +0100"  >&lt;p&gt;Thanks! I committed the patch in revision 961262.&lt;/p&gt;</comment>
                            <comment id="12885862" author="jukkaz" created="Wed, 7 Jul 2010 08:21:44 +0100"  >&lt;p&gt;BTW, the XHTMLContentHandler is an extended ContentHandler, so you can also use lower level methods like characters(char[],int,int). I did that in revision 961266 to avoid having to instantiate extra String objects in the iwork content handlers.&lt;/p&gt;</comment>
                            <comment id="12885939" author="martijn" created="Wed, 7 Jul 2010 14:31:04 +0100"  >&lt;p&gt;Indeed that is prevents the creation of unnecessary strings. Good catch I didn&apos;t notice it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448818" name="iwork.patch" size="3268" author="martijn" created="Tue, 6 Jul 2010 21:49:31 +0100"/>
                            <attachment id="12448656" name="iwork.patch" size="19561" author="martijn" created="Sun, 4 Jul 2010 20:00:22 +0100"/>
                            <attachment id="12445895" name="iwork.patch" size="16498" author="martijn" created="Sun, 30 May 2010 22:59:20 +0100"/>
                            <attachment id="12444492" name="iwork.patch" size="8016" author="martijn" created="Fri, 14 May 2010 14:30:08 +0100"/>
                            <attachment id="12444150" name="iwork.patch" size="25849" author="martijn" created="Mon, 10 May 2010 23:14:47 +0100"/>
                            <attachment id="12443633" name="iwork.patch" size="16635" author="martijn" created="Tue, 4 May 2010 22:00:19 +0100"/>
                            <attachment id="12443431" name="iwork.patch" size="14166" author="martijn" created="Mon, 3 May 2010 00:24:00 +0100"/>
                            <attachment id="12444491" name="testKeynote.key" size="221745" author="martijn" created="Fri, 14 May 2010 14:30:08 +0100"/>
                            <attachment id="12443432" name="testKeynote.key" size="214375" author="martijn" created="Mon, 3 May 2010 00:24:00 +0100"/>
                            <attachment id="12445894" name="testNumbers.numbers" size="134571" author="martijn" created="Sun, 30 May 2010 22:59:20 +0100"/>
                            <attachment id="12444151" name="testPages.pages" size="134152" author="martijn" created="Mon, 10 May 2010 23:14:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 2 May 2010 23:24:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4458</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx3zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>