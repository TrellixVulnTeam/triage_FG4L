<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:36:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-800/TIKA-800.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-800] mark/reset not supported from POIFSContainerDetector</title>
                <link>https://issues.apache.org/jira/browse/TIKA-800</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bash-3.2$ touch test.txt
bash-3.2$ zip test.zip test.txt
  adding: test.txt (stored 0%)
bash-3.2$ java -jar tika-app-1.1-SNAPSHOT.jar -z test.zip
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.tika.exception.TikaException: TIKA-198: Illegal IOException from org.apache.tika.parser.pkg.PackageParser@2d58f9d3
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:249)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:243)
	at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)
	at org.apache.tika.cli.TikaCLI$OutputType.process(TikaCLI.java:130)
	at org.apache.tika.cli.TikaCLI.process(TikaCLI.java:397)
	at org.apache.tika.cli.TikaCLI.main(TikaCLI.java:101)
Caused by: java.io.IOException: mark/reset not supported
	at java.io.InputStream.reset(InputStream.java:330)
	at org.apache.tika.parser.microsoft.POIFSContainerDetector.detect(POIFSContainerDetector.java:116)
	at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:61)
	at org.apache.tika.cli.TikaCLI$FileEmbeddedDocumentExtractor.parseEmbedded(TikaCLI.java:676)
	at org.apache.tika.parser.pkg.PackageExtractor.unpack(PackageExtractor.java:167)
	at org.apache.tika.parser.pkg.PackageExtractor.parse(PackageExtractor.java:96)
	at org.apache.tika.parser.pkg.PackageParser.parse(PackageParser.java:64)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:243)
	... 5 more
bash-3.2$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12533865">TIKA-800</key>
            <summary>mark/reset not supported from POIFSContainerDetector</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ab">Andrzej Bialecki </reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Dec 2011 11:23:52 +0000</created>
                <updated>Tue, 6 Dec 2011 17:11:06 +0000</updated>
                            <resolved>Tue, 6 Dec 2011 01:14:06 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.1</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13162730" author="gagravarr" created="Mon, 5 Dec 2011 11:40:20 +0000"  >&lt;p&gt;Looks like the issue is that ArchiveInputStream (from Commons Compress) doesn&apos;t support mark/reset&lt;/p&gt;

&lt;p&gt;My hunch is that there are two fixes needed here:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;If the POIFS detector (now by run by default if the parser jar is available) can&apos;t mark/reset, it should decline to detect&lt;/li&gt;
	&lt;li&gt;The TikaCLI extractor should wrap the InputStreams it gets to ensure that all detectors can run&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If no-one spots a snag with these, I&apos;ll make the changes in a little bit&lt;/p&gt;</comment>
                            <comment id="13162734" author="jukkaz" created="Mon, 5 Dec 2011 11:55:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the POIFS detector (now by run by default if the parser jar is available) can&apos;t mark/reset, it should decline to detect&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The Detector interface explicitly asks for the given InputStream to support mark/reset, so I think it&apos;s fine for the detector to throw an IOException like it&apos;s doing in this case.&lt;/p&gt;</comment>
                            <comment id="13162735" author="gagravarr" created="Mon, 5 Dec 2011 11:59:44 +0000"  >&lt;p&gt;In that case, maybe it&apos;s best to have the wrapping done in PackageExtractor, if the shouldParseEmbedded call indicates we&apos;ll process it?&lt;/p&gt;

&lt;p&gt;(Since most people getting the embedded resources back will be using them with an AutoDetectParser, it would seem to make sense for us to do the work once rather than everyone having to handle it themselves)&lt;/p&gt;</comment>
                            <comment id="13163238" author="gagravarr" created="Tue, 6 Dec 2011 01:13:55 +0000"  >&lt;p&gt;Fixed in r1210736 by wrapping the ArchiveInputStream, the -z call now works correctly&lt;/p&gt;</comment>
                            <comment id="13163701" author="jukkaz" created="Tue, 6 Dec 2011 17:11:06 +0000"  >&lt;p&gt;Note that calling TikaInputStream.get(InputStream) expects that you&apos;ll explicitly close() the returned stream.&lt;br/&gt;
In revision 1211027 I changed the code to use the TikaInputStream.get(InputStream, TemporaryResources) method that works better in this situation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 5 Dec 2011 11:40:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx1k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>