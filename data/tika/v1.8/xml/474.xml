<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:39:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-474/TIKA-474.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-474] Tika parsing corrupt mp3</title>
                <link>https://issues.apache.org/jira/browse/TIKA-474</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I was trying some mp3s in tika-app cli coming from Nutch 0.9/1.0 samples and with &quot;A corrupt MP3 file that has been truncated half way through the ID3v2 frames&quot; returned this:&lt;/p&gt;

&lt;p&gt;$ java -jar tika-app-0.7.jar -v -m ~/nutch-0.9/src/plugin/parse-mp3/sample/test.mp3&lt;br/&gt;
Exception in thread &quot;main&quot; org.apache.tika.exception.TikaException: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-198&quot; title=&quot;Better distinction between IOException and TikaException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-198&quot;&gt;&lt;del&gt;TIKA-198&lt;/del&gt;&lt;/a&gt;: Illegal IOException from org.apache.tika.parser.mp3.Mp3Parser@1bf3d87&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:138)&lt;br/&gt;
    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:99)&lt;br/&gt;
    at org.apache.tika.cli.TikaCLI.process(TikaCLI.java:169)&lt;br/&gt;
    at org.apache.tika.cli.TikaCLI.main(TikaCLI.java:62)&lt;br/&gt;
Caused by: java.io.IOException: Tried to read 259186 bytes, but only 65526 bytes present&lt;br/&gt;
    at org.apache.tika.parser.mp3.ID3v2Frame.readFully(ID3v2Frame.java:160)&lt;br/&gt;
    at org.apache.tika.parser.mp3.ID3v2Frame.&amp;lt;init&amp;gt;(ID3v2Frame.java:110)&lt;br/&gt;
    at org.apache.tika.parser.mp3.ID3v2Frame.createFrameIfPresent(ID3v2Frame.java:81)&lt;br/&gt;
    at org.apache.tika.parser.mp3.Mp3Parser.getAllTagHandlers(Mp3Parser.java:128)&lt;br/&gt;
    at org.apache.tika.parser.mp3.Mp3Parser.parse(Mp3Parser.java:64)&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:132)&lt;br/&gt;
    ... 3 more&lt;/p&gt;

&lt;p&gt;Also tried with the latest trunk from github reproducing the problem:&lt;/p&gt;

&lt;p&gt;$ java -jar tika-app-0.8-SNAPSHOT.jar -v -m ~/nutch-0.9/src/plugin/parse-mp3/sample/test.mp3&lt;br/&gt;
Exception in thread &quot;main&quot; org.apache.tika.exception.TikaException: &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-198&quot; title=&quot;Better distinction between IOException and TikaException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-198&quot;&gt;&lt;del&gt;TIKA-198&lt;/del&gt;&lt;/a&gt;: Illegal IOException from org.apache.tika.parser.mp3.Mp3Parser@e79839&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:169)&lt;br/&gt;
    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:110)&lt;br/&gt;
    at org.apache.tika.cli.TikaCLI.process(TikaCLI.java:193)&lt;br/&gt;
    at org.apache.tika.cli.TikaCLI.main(TikaCLI.java:72)&lt;br/&gt;
Caused by: java.io.IOException: Tried to read 259186 bytes, but only 65526 bytes present&lt;br/&gt;
    at org.apache.tika.parser.mp3.ID3v2Frame.readFully(ID3v2Frame.java:160)&lt;br/&gt;
    at org.apache.tika.parser.mp3.ID3v2Frame.&amp;lt;init&amp;gt;(ID3v2Frame.java:110)&lt;br/&gt;
    at org.apache.tika.parser.mp3.ID3v2Frame.createFrameIfPresent(ID3v2Frame.java:81)&lt;br/&gt;
    at org.apache.tika.parser.mp3.Mp3Parser.getAllTagHandlers(Mp3Parser.java:133)&lt;br/&gt;
    at org.apache.tika.parser.mp3.Mp3Parser.parse(Mp3Parser.java:64)&lt;br/&gt;
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:163)&lt;br/&gt;
    ... 3 more&lt;/p&gt;

&lt;p&gt;The mp3 is here: &lt;a href=&quot;http://github.com/apache/nutch/raw/tags/release-1.0/src/plugin/parse-mp3/sample/test.mp3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/apache/nutch/raw/tags/release-1.0/src/plugin/parse-mp3/sample/test.mp3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;All the other mp3 samples were parsed well by Tika.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux Mandriva 2010 based OS (Linux Caixa M&#225;gica 15)&lt;br/&gt;
java version &quot;1.6.0_20&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_20-b02)&lt;/p&gt;</environment>
        <key id="12470981">TIKA-474</key>
            <summary>Tika parsing corrupt mp3</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gagravarr">Nick Burch</assignee>
                                    <reporter username="andrericardo">Andr&#233; Ricardo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Aug 2010 15:42:24 +0100</created>
                <updated>Mon, 9 Aug 2010 16:23:09 +0100</updated>
                            <resolved>Mon, 9 Aug 2010 15:49:50 +0100</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>cli</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12896053" author="andrericardo" created="Fri, 6 Aug 2010 15:44:20 +0100"  >&lt;p&gt;This is &quot;A corrupt MP3 file that has been truncated half way through the ID3v2 frames&quot; from the Nutch 0.9/1.0 sample mp3s files.&lt;/p&gt;</comment>
                            <comment id="12896569" author="gagravarr" created="Mon, 9 Aug 2010 15:49:50 +0100"  >&lt;p&gt;Fixed in r983661.&lt;/p&gt;

&lt;p&gt;The ID3 v2 header parsing now tries to do its best if not all the data for the header exists&lt;/p&gt;</comment>
                            <comment id="12896583" author="andrericardo" created="Mon, 9 Aug 2010 16:23:09 +0100"  >&lt;p&gt;Thank you Nick!&lt;/p&gt;

&lt;p&gt;Just looked at the diff to learn how you fixed it and it was nice to see that you have also wrote a test case!&lt;/p&gt;

&lt;p&gt;Built the latest version from svn and it works now:&lt;br/&gt;
$ java -jar tika-app-0.8-SNAPSHOT.jar -v -m ~/nutch-0.9/src/plugin/parse-mp3/sample/test.mp3 &lt;br/&gt;
Author: The White Stripes&lt;br/&gt;
Content-Length: 65536&lt;br/&gt;
Content-Type: audio/mpeg&lt;br/&gt;
resourceName: test.mp3&lt;br/&gt;
title: Girl you have no faith in medicine&lt;br/&gt;
xmpDM:album: Elephant&lt;br/&gt;
xmpDM:artist: The White Stripes&lt;br/&gt;
xmpDM:composer: null&lt;br/&gt;
xmpDM:genre: null&lt;br/&gt;
xmpDM:logComment: eng&lt;br/&gt;
xmpDM:releaseDate: 2003&lt;br/&gt;
xmpDM:trackNumber: 13&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451430" name="test.mp3" size="65536" author="andrericardo" created="Fri, 6 Aug 2010 15:44:20 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Aug 2010 14:49:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx3kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>