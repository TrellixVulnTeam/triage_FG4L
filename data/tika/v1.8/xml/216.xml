<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:36:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-216/TIKA-216.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-216] Zip bomb prevention</title>
                <link>https://issues.apache.org/jira/browse/TIKA-216</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;It would be good to have a mechanism that automatically detects a &quot;zip bomb&quot;, i.e. a compressed document that expands to excessive amounts of extracted text. The classic example is the 42.zip file that&apos;s just 42kB in size, but expands to about 4 &lt;b&gt;petabytes&lt;/b&gt; when all layers are fully uncompressed.&lt;/p&gt;

&lt;p&gt;A simple preventive measure could be a Parser decorator that counts the number of input bytes and the output characters, and fails with a TikaException when the ratio exceeds some configurable limit.&lt;/p&gt;

&lt;p&gt;As another preventive measure, the decorator could also keep track of the time (and perhaps even memory, if possible) it takes to process the input document. A TikaException would be thrown if processing time exceeds some configurable limit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12422352">TIKA-216</key>
            <summary>Zip bomb prevention</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Apr 2009 13:01:23 +0100</created>
                <updated>Fri, 10 Feb 2012 12:21:01 +0000</updated>
                            <resolved>Mon, 13 Jul 2009 21:12:27 +0100</resolved>
                                                    <fixVersion>0.4</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12702938" author="jukkaz" created="Sun, 26 Apr 2009 22:28:32 +0100"  >&lt;p&gt;There is now a SecureContentHandler decorator class that implements a simple zip bomb prevention heuristic. By default the class throws an exception for any input documents that produce over 100 output characters per input byte, a compression ratio that no normal document is expected to reach. There is a default threshold of 1M output characters after which the zip bomb detection gets activated. This threshold avoids false positives for otherwise normal documents that for some reason start with a sequence of highly compressible data.&lt;/p&gt;

&lt;p&gt;The SecureContentHandler decorator class is used together with the CountingInputStream from Commons IO. See below for sample usage:&lt;/p&gt;

&lt;p&gt;    CountingInputStream count = new CountingInputStream(stream);&lt;br/&gt;
    SecureContentHandler secure = new SecureContentHandler(handler, count);&lt;br/&gt;
    try &lt;/p&gt;
{
        parser.parse(count, secure, metadata);
    }
&lt;p&gt; catch (SAXException e) &lt;/p&gt;
{
        secure.throwIfCauseOf(e);
        throw e;
    }

&lt;p&gt;I added this to the AutoDetectParser, so all clients that use AutoDetectParser or tools based on that are automatically protected against simple zip bombs.&lt;/p&gt;
</comment>
                            <comment id="12718184" author="jukkaz" created="Wed, 10 Jun 2009 21:18:59 +0100"  >&lt;p&gt;For the record, see a similar issue in the Aperture project:&lt;br/&gt;
&lt;a href=&quot;http://sourceforge.net/tracker/?func=detail&amp;amp;aid=2786554&amp;amp;group_id=150969&amp;amp;atid=779500&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sourceforge.net/tracker/?func=detail&amp;amp;aid=2786554&amp;amp;group_id=150969&amp;amp;atid=779500&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12719818" author="jukkaz" created="Mon, 15 Jun 2009 23:19:46 +0100"  >&lt;p&gt;Reopening as the zip file in the Aperture issue is still causing problems for Tika.&lt;/p&gt;</comment>
                            <comment id="12730185" author="chrismattmann" created="Mon, 13 Jul 2009 02:23:55 +0100"  >&lt;p&gt;Hey Jukka, Tika&apos;ers:&lt;/p&gt;

&lt;p&gt;Do you see this as a blocker to 0.4? I&apos;d like to cut an RC in the next day or so, but this is still open and I wanted to check with you and get your thoughts?&lt;/p&gt;

&lt;p&gt;My vote is -1 for this being a blocker &amp;#8211; I think we can fix it in 0.5. Please let me know ASAP &amp;#8211; if I don&apos;t hear back in the next 48 hours I&apos;m going to go ahead and push this to 0.5. If I do hear back and there is significant support that this can go to 0.5, then I will do so earlier and move on to the RC.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Chris&lt;/p&gt;</comment>
                            <comment id="12730488" author="jukkaz" created="Mon, 13 Jul 2009 21:12:27 +0100"  >&lt;p&gt;The basic zip bomb prevention mechanism is already included, so I&apos;m resolving this as Fixed for the 0.4 release. The followup issue with droste.zip and similar specially crafted packages is filed as &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-259&quot; title=&quot;Safe parsing of droste.zip&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-259&quot;&gt;&lt;del&gt;TIKA-259&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12542106">TIKA-860</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Jul 2009 01:23:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxx55j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17154</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>