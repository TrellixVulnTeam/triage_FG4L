<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:34:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/TIKA-1422/TIKA-1422.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[TIKA-1422] org.apache.tika.parser.mail.RFC822ParserTest fails</title>
                <link>https://issues.apache.org/jira/browse/TIKA-1422</link>
                <project id="12310631" key="TIKA">Tika</project>
                    <description>&lt;p&gt;I&apos;m seeing test failures from:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
Results :

Failed tests:   testMultipart(org.apache.tika.parser.mail.RFC822ParserTest): (..)

Tests run: 538, Failures: 1, Errors: 0, Skipped: 1

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CentOS6 VM image, running:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[mattmann@memex tika]$ java -version
java version &quot;1.7.0_67&quot;
Java(TM) SE Runtime Environment (build 1.7.0_67-b01)
Java HotSpot(TM) 64-Bit Server VM (build 24.65-b04, mixed mode)
[mattmann@memex tika]$ mvn -version
Apache Maven 3.2.1 (ea8b2b07643dbb1b84b6d16e1f08391b666bc1e9; 2014-02-14T09:37:52-08:00)
Maven home: /usr/share/apache-maven
Java version: 1.7.0_65, vendor: Oracle Corporation
Java home: /data/home/mattmann/dist/jdk1.7.0_65/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;2.6.32-431.23.3.el6.centos.plus.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
[mattmann@memex tika]$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are the surefire reports - no clue what&apos;s up here:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[mattmann@memex tika]$ more tika-parsers/target/surefire-reports/org.apache.tika.parser.mail.RFC822ParserTest.txt 
-------------------------------------------------------------------------------
Test set: org.apache.tika.parser.mail.RFC822ParserTest
-------------------------------------------------------------------------------
Tests run: 8, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.699 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!
testMultipart(org.apache.tika.parser.mail.RFC822ParserTest)  Time elapsed: 0.152 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.mockito.exceptions.verification.TooManyActualInvocations: 
xHTMLContentHandler.startElement(
    &quot;http://www.w3.org/1999/xhtml&quot;,
    &quot;div&quot;,
    &quot;div&quot;,
    isA(org.xml.sax.Attributes)
);
Wanted 4 times but was 5
	at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:87)
Caused by: org.mockito.exceptions.cause.UndesiredInvocation: 
Undesired invocation:
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.SafeContentHandler.startElement(SafeContentHandler.java:264)
	at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:254)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.xpath.MatchingContentHandler.startElement(MatchingContentHandler.java:60)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.SafeContentHandler.startElement(SafeContentHandler.java:264)
	at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:254)
	at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:284)
	at org.apache.tika.parser.ocr.TesseractOCRParser.extractOutput(TesseractOCRParser.java:243)
	at org.apache.tika.parser.ocr.TesseractOCRParser.parse(TesseractOCRParser.java:155)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:247)
	at org.apache.tika.parser.mail.MailContentHandler.body(MailContentHandler.java:102)
	at org.apache.james.mime4j.parser.MimeStreamParser.parse(MimeStreamParser.java:133)
	at org.apache.tika.parser.mail.RFC822Parser.parse(RFC822Parser.java:76)
	at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12742999">TIKA-1422</key>
            <summary>org.apache.tika.parser.mail.RFC822ParserTest fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chrismattmann">Chris A. Mattmann</assignee>
                                    <reporter username="chrismattmann">Chris A. Mattmann</reporter>
                        <labels>
                            <label>memex</label>
                    </labels>
                <created>Sun, 21 Sep 2014 04:48:39 +0100</created>
                <updated>Mon, 6 Apr 2015 18:07:00 +0100</updated>
                            <resolved>Fri, 24 Oct 2014 17:57:48 +0100</resolved>
                                                    <fixVersion>1.7</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14145210" author="lfcnassif" created="Tue, 23 Sep 2014 19:40:40 +0100"  >&lt;p&gt;Again, a possible improvement to TesseractOCRParser is to include code to extract image metadata too, using existing image parsers. So the tests related to image metadata extraction will not be afected by TesseractOCRParser.&lt;/p&gt;</comment>
                            <comment id="14145218" author="chrismattmann" created="Tue, 23 Sep 2014 19:42:44 +0100"  >&lt;p&gt;hmm, good idea Luis. I&apos;ll try and explore that in my patch here. &lt;/p&gt;</comment>
                            <comment id="14145244" author="lfcnassif" created="Tue, 23 Sep 2014 19:58:27 +0100"  >&lt;p&gt;Also, despite the tests, currently trunk will afect users that look for image metadata only, because now TesseractOCRParser is the deafult image parser and it does not extract metadata. That approach will resolve this problem too. Another approach is to remove TesseractParser from the default service provider parser list and to call it from the existing image parsers if a TesseractOCRConfig object is found into the parseContext object. It is strange to see a TesseractOCRParser in the trace if the user only wants image metadata.&lt;/p&gt;</comment>
                            <comment id="14145253" author="chrismattmann" created="Tue, 23 Sep 2014 20:01:45 +0100"  >&lt;p&gt;I prefer to keep it as an available parser, so I&apos;ll have it delegate and call the image parsers to grab the metadata as well. THanks for the suggestion Luis!&lt;/p&gt;</comment>
                            <comment id="14145299" author="tpalsulich" created="Tue, 23 Sep 2014 20:34:29 +0100"  >&lt;p&gt;This assumes that if a user has Tesseract installed they want to run it on the image. Which, may not be true. But, I suppose they could call ImageParser directly if they want the performance boost.&lt;/p&gt;

&lt;p&gt;+1 to delegating to ImageParser to parse the image metadata from TesseractOCRParser.&lt;/p&gt;</comment>
                            <comment id="14146283" author="tallison@mitre.org" created="Wed, 24 Sep 2014 13:54:39 +0100"  >&lt;p&gt;While work is going on to get the TesseractOCRParser tests to pass on systems with and without Tesseract, would it be possible to temporarily ignore or comment out the things that are causing failures so that trunk will build cleanly?&lt;/p&gt;

&lt;p&gt;I got a clean build if I removed TesseractOCRParser from the services list and commented out this line in TikaMimeTypesTest:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;      assertEquals(&quot;org.apache.tika.parser.ocr.TesseractOCRParser&quot;, bmp.get(&quot;parser&quot;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To be clear, I&apos;m extremely grateful for all of the work that has gone into integrating OCR, and apologies if you are just about to commit the fixes!&lt;/p&gt;</comment>
                            <comment id="14146523" author="tpalsulich" created="Wed, 24 Sep 2014 17:53:37 +0100"  >&lt;p&gt;The Hudson builds are now stable with the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1421&quot; title=&quot;Tika-Parsers tests fail on CentOS6 if tesseract isn&amp;#39;t installed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1421&quot;&gt;&lt;del&gt;TIKA-1421&lt;/del&gt;&lt;/a&gt;. So, this is only a failure when Tesseract is installed. It has something to do with how attachments are parsed, but I&apos;m not sure exactly what this test is or why it&apos;s failing. As I understand it, there are 4 invocations of the handler without Tesseract installed and 5 with. So, it may not be an actual problem...&lt;/p&gt;

&lt;p&gt;But, if you think we should disable it temporarily, that&apos;s fine by me! We could also comment out the failing Assert in this test.&lt;/p&gt;</comment>
                            <comment id="14146537" author="tallison@mitre.org" created="Wed, 24 Sep 2014 18:06:55 +0100"  >&lt;p&gt;Sorry, user error.  Needed to force update.  Thank you!&lt;/p&gt;</comment>
                            <comment id="14156031" author="chrismattmann" created="Thu, 2 Oct 2014 04:10:35 +0100"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;patch gets tests passing and tries to add ImageMetadata - isn&apos;t the way to get it to work though just experimenting&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14157068" author="tpalsulich" created="Thu, 2 Oct 2014 20:51:42 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrismattmann&quot; class=&quot;user-hover&quot; rel=&quot;chrismattmann&quot;&gt;Chris A. Mattmann&lt;/a&gt;, I believe that patch fails when Tesseract is not installed. When Tesseract is not installed, the ContentHandler in question is only invoked 4 times. But, when Tesseract is installed, it&apos;s invoked 5 times.&lt;/p&gt;

&lt;p&gt;My first thought was that the Tesseract Parser always invoked the ContentHandler, even if no OCR text was found. But, there &lt;b&gt;is&lt;/b&gt; OCR text to be found in this test &amp;#8211; several &quot;Happy New Year!&quot; messages. So, there are a few ways I can see fixing this test:&lt;/p&gt;

&lt;p&gt;1. Just remove the offending line in the test.&lt;br/&gt;
2. Allow either 4 or 5 invocations of the handler.&lt;br/&gt;
3. Check if Tesseract is installed, checking for 4 or 5 invocations based on the result.&lt;br/&gt;
4. Update the image used in the test to have no text and update the TesseractParser to only invoke the handler when it finds content.&lt;/p&gt;

&lt;p&gt;I would like the third option the most, but I don&apos;t like the idea of checking for an external dependency in an otherwise unrelated test. On the other hand, it has the advantage of widening the scope of the test as little as possible.&lt;/p&gt;

&lt;p&gt;I&apos;d like the fourth option the most, but it requires some funky logic in TesseractOCRParser.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;
</comment>
                            <comment id="14159297" author="tpalsulich" created="Sat, 4 Oct 2014 22:42:10 +0100"  >&lt;p&gt;Here is a patch implementing option 3. All tests pass with or without Tesseract installed. I created a static canRun method in TesseractOCRTest and use it to check for 4 or 5 invocations in the mail test.&lt;/p&gt;</comment>
                            <comment id="14159305" author="chrismattmann" created="Sat, 4 Oct 2014 23:10:28 +0100"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;here&apos;s my patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt; - it implements a set of Image extractors to call to generate the metadata for each of the types they support. The other part of my patch though doesn&apos;t fix the tests, so maybe we could combine the two?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14162271" author="tpalsulich" created="Tue, 7 Oct 2014 19:34:20 +0100"  >&lt;p&gt;I attached a preliminary patch which combines &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrismattmann&quot; class=&quot;user-hover&quot; rel=&quot;chrismattmann&quot;&gt;Chris A. Mattmann&lt;/a&gt;&apos;s and mine. I don&apos;t think this is ready yet, but we can iterate.&lt;/p&gt;</comment>
                            <comment id="14163704" author="tpalsulich" created="Wed, 8 Oct 2014 17:27:06 +0100"  >&lt;p&gt;With my patch from yesterday, all tests are passing with or without tesseract on my computer (tesseract 3.03, java 1.7). Can anyone else confirm?&lt;/p&gt;</comment>
                            <comment id="14166359" author="chrismattmann" created="Fri, 10 Oct 2014 05:06:00 +0100"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tpalsulich&quot; class=&quot;user-hover&quot; rel=&quot;tpalsulich&quot;&gt;Tyler Palsulich&lt;/a&gt; the combined patch is failing for me on my Mac with Tesseract installed:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[chipotle:~/src/tika] mattmann% tesseract
Usage:tesseract imagename outputbase [-l lang] [-psm pagesegmode] [configfile...]

pagesegmode values are:
0 = Orientation and script detection (OSD) only.
1 = Automatic page segmentation with OSD.
2 = Automatic page segmentation, but no OSD, or OCR
3 = Fully automatic page segmentation, but no OSD. (Default)
4 = Assume a single column of text of variable sizes.
5 = Assume a single uniform block of vertically aligned text.
6 = Assume a single uniform block of text.
7 = Treat the image as a single text line.
8 = Treat the image as a single word.
9 = Treat the image as a single word in a circle.
10 = Treat the image as a single character.
-l lang and/or -psm pagesegmode must occur before anyconfigfile.

Single options:
  -v --version: version info
  --list-langs: list available languages for tesseract engine
[chipotle:~/src/tika] mattmann% tesseract

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
Results :

Failed tests:   testMultipart(org.apache.tika.parser.mail.RFC822ParserTest): (..)

Tests run: 542, Failures: 1, Errors: 0, Skipped: 1

[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Apache Tika parent ................................. SUCCESS [  2.176 s]
[INFO] Apache Tika core ................................... SUCCESS [ 16.806 s]
[INFO] Apache Tika parsers ................................ FAILURE [01:32 min]
[INFO] Apache Tika XMP .................................... SKIPPED
[INFO] Apache Tika serialization .......................... SKIPPED
[INFO] Apache Tika application ............................ SKIPPED
[INFO] Apache Tika OSGi bundle ............................ SKIPPED
[INFO] Apache Tika server ................................. SKIPPED
[INFO] Apache Tika translate .............................. SKIPPED
[INFO] Apache Tika examples ............................... SKIPPED
[INFO] Apache Tika Java-7 Components ...................... SKIPPED
[INFO] Apache Tika ........................................ SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:52 min
[INFO] Finished at: 2014-10-09T20:59:49-07:00
[INFO] Final Memory: 34M/178M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12:test (default-test) on project tika-parsers: There are test failures.
[ERROR] 
[ERROR] Please refer to /Users/mattmann/src/tika/tika-parsers/target/surefire-reports for the individual test results.
[ERROR] -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &amp;lt;goals&amp;gt; -rf :tika-parsers
[chipotle:~/src/tika] mattmann% svn status
?       tika-example/target
?       tika-java7/target
M       tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java
M       tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java
M       tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRTest.java
[chipotle:~/src/tika] mattmann% more tika-parsers/target/surefire-reports/org.apache.tika.parser.mail.RFC822ParserTest.txt 
-------------------------------------------------------------------------------
Test set: org.apache.tika.parser.mail.RFC822ParserTest
-------------------------------------------------------------------------------
Tests run: 8, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.853 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!
testMultipart(org.apache.tika.parser.mail.RFC822ParserTest)  Time elapsed: 0.235 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.mockito.exceptions.verification.TooLittleActualInvocations: 
xHTMLContentHandler.startElement(
    &quot;http://www.w3.org/1999/xhtml&quot;,
    &quot;div&quot;,
    &quot;div&quot;,
    isA(org.xml.sax.Attributes)
);
Wanted 5 times but was 4
        at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:91)
Caused by: org.mockito.exceptions.cause.TooLittleInvocations: 
Too little invocations:
        at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
        at org.apache.tika.sax.SafeContentHandler.startElement(SafeContentHandler.java:264)
        at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:254)
        at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:291)
        at org.apache.tika.parser.mail.MailContentHandler.startBodyPart(MailContentHandler.java:242)
        at org.apache.james.mime4j.parser.MimeStreamParser.parse(MimeStreamParser.java:162)
        at org.apache.tika.parser.mail.RFC822Parser.parse(RFC822Parser.java:76)
        at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:85)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
        at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
[chipotle:~/src/tika] mattmann% 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14166360" author="chrismattmann" created="Fri, 10 Oct 2014 05:06:23 +0100"  >&lt;p&gt;Looks like it was 4 times now with Tesseract installed? Huh?&lt;/p&gt;</comment>
                            <comment id="14166365" author="chrismattmann" created="Fri, 10 Oct 2014 05:08:26 +0100"  >&lt;p&gt;Note your combined patch includes this curious part:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@@ -241,19 +257,21 @@
      * @throws IOException if an input error occurred
      */
     private void extractOutput(InputStream stream, XHTMLContentHandler xhtml)
-            throws SAXException, IOException {
-    	
+	throws SAXException, IOException {
+ 
         Reader reader = new InputStreamReader(stream, &quot;UTF-8&quot;);
+        xhtml.startDocument();
+        xhtml.startElement(&quot;div&quot;);
         try {
-            xhtml.startElement(&quot;div&quot;);
             char[] buffer = new char[1024];
             for (int n = reader.read(buffer); n != -1; n = reader.read(buffer)) {
-                xhtml.characters(buffer, 0, n);
+                if (n &amp;gt; 0) xhtml.characters(buffer, 0, n);
             }
-            xhtml.endElement(&quot;div&quot;);
         } finally {
             reader.close();
         }
+        xhtml.endElement(&quot;div&quot;);
+        xhtml.endDocument();
     }
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You moved the start and end elements out of the try{} finally{} block and then you also added in a start and end document? That seems to have fixed it to only get called 4 times?&lt;/p&gt;</comment>
                            <comment id="14166903" author="chrismattmann" created="Fri, 10 Oct 2014 15:18:59 +0100"  >&lt;p&gt;ok figured it out. It was &lt;em&gt;this&lt;/em&gt; part of your combined patch:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@@ -139,8 +157,7 @@
         if (!ExternalParser.check(checkCmd)) return;
     	
     	XHTMLContentHandler xhtml = new XHTMLContentHandler(handler, metadata);
-    	xhtml.startDocument();
-    	
+
         TemporaryResources tmp = new TemporaryResources();
         File output = null;
         try {
@@ -167,7 +184,6 @@
         		output.delete();
             
         }
-        xhtml.endDocument();
     }
 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then this part:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@@ -241,19 +257,21 @@
      * @throws IOException if an input error occurred
      */
     private void extractOutput(InputStream stream, XHTMLContentHandler xhtml)
-            throws SAXException, IOException {
-    	
+	throws SAXException, IOException {
+ 
         Reader reader = new InputStreamReader(stream, &quot;UTF-8&quot;);
+        xhtml.startDocument();
+        xhtml.startElement(&quot;div&quot;);
         try {
-            xhtml.startElement(&quot;div&quot;);
             char[] buffer = new char[1024];
             for (int n = reader.read(buffer); n != -1; n = reader.read(buffer)) {
-                xhtml.characters(buffer, 0, n);
+                if (n &amp;gt; 0) xhtml.characters(buffer, 0, n);
             }
-            xhtml.endElement(&quot;div&quot;);
         } finally {
             reader.close();
         }
+        xhtml.endElement(&quot;div&quot;);
+        xhtml.endDocument();
     }
 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That fixed it. That portion above causes the XHTML handler to &lt;b&gt;only&lt;/b&gt; be invoked when there &lt;b&gt;is&lt;/b&gt; actual output, getting back to 4 times no matter what.&lt;/p&gt;</comment>
                            <comment id="14168704" author="chrismattmann" created="Sun, 12 Oct 2014 17:20:54 +0100"  >&lt;p&gt;OK I went ahead and created &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1445&quot; title=&quot;Figure out how to add Image metadata extraction to Tesseract parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1445&quot;&gt;&lt;del&gt;TIKA-1445&lt;/del&gt;&lt;/a&gt; on the ImageParser part. Tyler and my latest patch seem to fix the test issue. I&apos;m going to commit that to deal with &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt;, then deal with the Image parsing met (and take that out of this patch) and deal with it in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1445&quot; title=&quot;Figure out how to add Image metadata extraction to Tesseract parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1445&quot;&gt;&lt;del&gt;TIKA-1445&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14168708" author="chrismattmann" created="Sun, 12 Oct 2014 17:31:24 +0100"  >&lt;p&gt;okey dok, I went ahead and committed this in r1631206 since it fixes the test with/without Tesseract it seems. I&apos;ll address the image parsing issues in &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1445&quot; title=&quot;Figure out how to add Image metadata extraction to Tesseract parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1445&quot;&gt;&lt;del&gt;TIKA-1445&lt;/del&gt;&lt;/a&gt;. Thanks Tyler and everyone!&lt;/p&gt;</comment>
                            <comment id="14168709" author="chrismattmann" created="Sun, 12 Oct 2014 17:31:38 +0100"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fixed in r1631206.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14168713" author="hudson" created="Sun, 12 Oct 2014 17:43:12 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #259 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/259/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/259/&lt;/a&gt;)&lt;br/&gt;
Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt; contributed by tpalsulich and mattmann. (mattmann: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1631206&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1631206&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14168722" author="hudson" created="Sun, 12 Oct 2014 18:00:51 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #239 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/239/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/239/&lt;/a&gt;)&lt;br/&gt;
Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt; contributed by tpalsulich and mattmann. (mattmann: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1631206&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1631206&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14169130" author="thaichat04" created="Mon, 13 Oct 2014 10:23:34 +0100"  >&lt;p&gt;Strange, I&apos;m unable to build causing this failed test on latest. I&apos;m on Windows + Oracle JDK7:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;testcase time=&lt;span class=&quot;code-quote&quot;&gt;&quot;0.345&quot;&lt;/span&gt; classname=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.tika.parser.mail.RFC822ParserTest&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;testMultipart&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;failure message=&quot;
xHTMLContentHandler.startElement(
    &amp;amp;quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/1999/xhtml&amp;amp;quot;,
&lt;/span&gt;    &amp;amp;quot;div&amp;amp;quot;,
    &amp;amp;quot;div&amp;amp;quot;,
    isA(org.xml.sax.Attributes)
);
Wanted 4 times but was 5&lt;span class=&quot;code-quote&quot;&gt;&quot; type=&quot;&lt;/span&gt;org.mockito.exceptions.verification.TooManyActualInvocations&quot;&amp;gt;org.mockito.exceptions.verification.TooManyActualInvocations: 
xHTMLContentHandler.startElement(
    &amp;amp;quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/1999/xhtml&amp;amp;quot;,
&lt;/span&gt;    &amp;amp;quot;div&amp;amp;quot;,
    &amp;amp;quot;div&amp;amp;quot;,
    isA(org.xml.sax.Attributes)
);
Wanted 4 times but was 5
	at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:87)
Caused by: org.mockito.exceptions.cause.UndesiredInvocation: 
Undesired invocation:
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.SafeContentHandler.startElement(SafeContentHandler.java:264)
	at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:254)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.xpath.MatchingContentHandler.startElement(MatchingContentHandler.java:60)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.ContentHandlerDecorator.startElement(ContentHandlerDecorator.java:126)
	at org.apache.tika.sax.SafeContentHandler.startElement(SafeContentHandler.java:264)
	at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:254)
	at org.apache.tika.sax.XHTMLContentHandler.startElement(XHTMLContentHandler.java:284)
	at org.apache.tika.parser.ocr.TesseractOCRParser.extractOutput(TesseractOCRParser.java:250)
	at org.apache.tika.parser.ocr.TesseractOCRParser.parse(TesseractOCRParser.java:163)
	at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:247)
	at org.apache.tika.parser.mail.MailContentHandler.body(MailContentHandler.java:102)
	at org.apache.james.mime4j.parser.MimeStreamParser.parse(MimeStreamParser.java:133)
	at org.apache.tika.parser.mail.RFC822Parser.parse(RFC822Parser.java:76)
	at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
&amp;lt;/failure&amp;gt;
  &amp;lt;/testcase&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14172796" author="tpalsulich" created="Wed, 15 Oct 2014 20:10:07 +0100"  >&lt;p&gt;What version of Tesseract do you have installed, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thaichat04&quot; class=&quot;user-hover&quot; rel=&quot;thaichat04&quot;&gt;Hong-Thai Nguyen&lt;/a&gt;? I&apos;m also getting different results between Mac/Windows/Ubuntu.&lt;/p&gt;</comment>
                            <comment id="14173537" author="thaichat04" created="Thu, 16 Oct 2014 09:43:41 +0100"  >&lt;p&gt;I&apos;m not using Tesseract&lt;/p&gt;</comment>
                            <comment id="14173839" author="tpalsulich" created="Thu, 16 Oct 2014 16:05:02 +0100"  >&lt;p&gt;Can you check what &lt;tt&gt;%ErrorLevel%&lt;/tt&gt; is when you try to run Tesseract from command line? &lt;/p&gt;</comment>
                            <comment id="14178018" author="olegt" created="Tue, 21 Oct 2014 07:16:34 +0100"  >&lt;p&gt;Were missing imports of image parsers in the TesseractOCRParser unit test.&lt;/p&gt;

&lt;p&gt;Env:&lt;br/&gt;
Windows 7, PE, x64. &lt;br/&gt;
java version &quot;1.7.0_11&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)&lt;/p&gt;

&lt;p&gt;Output:&lt;br/&gt;
After import image parsers:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Building Apache Tika 1.7-SNAPSHOT&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &amp;#8212; maven-clean-plugin:2.4.1:clean (default-clean) @ tika &amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Deleting E:\work_dir\tika\tika-site\target&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &amp;#8212; maven-remote-resources-plugin:1.2.1:process (default) @ tika &amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &amp;#8212; maven-site-plugin:3.0:attach-descriptor (attach-descriptor) @ tika &amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; &amp;#8212; maven-install-plugin:2.3.1:install (default-install) @ tika &amp;#8212;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Installing E:\work_dir\tika\tika-site\pom.xml to \.m2\repository\org\apache\tika\tika\1.7-SNAPSHOT\tika-1.7-SNAPSHOT.pom&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Reactor Summary:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika parent ................................ SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;1.093s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika core .................................. SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;14.594s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika parsers ............................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;49.359s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika XMP ................................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;1.161s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika serialization ......................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;1.311s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika application ........................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;11.725s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika OSGi bundle ........................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;19.826s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika server ................................ SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;15.705s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika translate ............................. SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;1.476s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika examples .............................. SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;2.231s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika Java-7 Components ..................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;1.429s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Apache Tika ....................................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.029s&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 2:00.578s&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Tue Oct 21 08:12:17 IST 2014&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 67M/1156M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;/p&gt;</comment>
                            <comment id="14178186" author="thaichat04" created="Tue, 21 Oct 2014 10:33:55 +0100"  >&lt;p&gt;Applied latest fix on r1633325 &amp;amp; r1633331 with some formatting. Thank&lt;/p&gt;</comment>
                            <comment id="14178197" author="hudson" created="Tue, 21 Oct 2014 10:42:13 +0100"  >&lt;p&gt;FAILURE: Integrated in tika-trunk-jdk1.7 #273 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/273/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/273/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt; - Apply fix of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegt&quot; class=&quot;user-hover&quot; rel=&quot;olegt&quot;&gt;Oleg Tikhonov&lt;/a&gt; in Windows (thaichat04: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633325&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633325&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14178226" author="hudson" created="Tue, 21 Oct 2014 11:11:22 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #253 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/253/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/253/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt; - Fixing build &amp;amp; minor refactory of naming test class (thaichat04: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633331&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt; - Apply fix of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegt&quot; class=&quot;user-hover&quot; rel=&quot;olegt&quot;&gt;Oleg Tikhonov&lt;/a&gt; in Windows (thaichat04: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633325&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633325&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/ocr/TesseractOCRParser.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14178257" author="hudson" created="Tue, 21 Oct 2014 11:49:39 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #274 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/274/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/274/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt; - Fixing build &amp;amp; minor refactory of naming test class (thaichat04: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1633331&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRParserTest.java&lt;/li&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/ocr/TesseractOCRTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14178866" author="tpalsulich" created="Tue, 21 Oct 2014 20:09:52 +0100"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Results :

Failed tests:   testMultipart(org.apache.tika.parser.mail.RFC822ParserTest): (..)

Tests run: 546, Failures: 1, Errors: 0, Skipped: 4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Wanted 5 times but was 4
	at org.apache.tika.parser.mail.RFC822ParserTest.testMultipart(RFC822ParserTest.java:93)
Caused by: org.mockito.exceptions.cause.TooLittleInvocations:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Still getting a failing test with Tesseract 3.02.02 installed on Mac. Will look into this more tomorrow. But, thank you, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oleg%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;oleg@apache.org&quot;&gt;Oleg Tikhonov&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thaichat04&quot; class=&quot;user-hover&quot; rel=&quot;thaichat04&quot;&gt;Hong-Thai Nguyen&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;Edit: All tests pass without Tesseract installed. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14180504" author="tpalsulich" created="Wed, 22 Oct 2014 21:41:24 +0100"  >&lt;p&gt;Reopening as we&apos;re still getting odd test failures.&lt;/p&gt;</comment>
                            <comment id="14183044" author="tpalsulich" created="Fri, 24 Oct 2014 17:57:48 +0100"  >&lt;p&gt;Fixed in r1634094. Skip over the two failing checks if Tesseract is installed.&lt;/p&gt;</comment>
                            <comment id="14183103" author="hudson" created="Fri, 24 Oct 2014 18:44:28 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.7 #282 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.7/282/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.7/282/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt;. Skip checking the number of some handler invocations in the RFC822ParserTest if Tesseract is installed. (tpalsulich: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1634094&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1634094&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14183161" author="hudson" created="Fri, 24 Oct 2014 19:03:10 +0100"  >&lt;p&gt;SUCCESS: Integrated in tika-trunk-jdk1.6 #262 (See &lt;a href=&quot;https://builds.apache.org/job/tika-trunk-jdk1.6/262/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/tika-trunk-jdk1.6/262/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/TIKA-1422&quot; title=&quot;org.apache.tika.parser.mail.RFC822ParserTest fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TIKA-1422&quot;&gt;&lt;del&gt;TIKA-1422&lt;/del&gt;&lt;/a&gt;. Skip checking the number of some handler invocations in the RFC822ParserTest if Tesseract is installed. (tpalsulich: &lt;a href=&quot;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1634094&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/tika/trunk/?view=rev&amp;amp;rev=1634094&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/tika/trunk/tika-parsers/src/test/java/org/apache/tika/parser/mail/RFC822ParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12747589">TIKA-1445</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12672487" name="TIKA-1422.Mattmann.100114.patch.txt" size="3087" author="chrismattmann" created="Thu, 2 Oct 2014 04:10:35 +0100"/>
                            <attachment id="12672955" name="TIKA-1422.Mattmann.100414.patch.txt" size="3776" author="chrismattmann" created="Sat, 4 Oct 2014 23:10:28 +0100"/>
                            <attachment id="12676037" name="TIKA-1422.oleg.20141021.patch" size="3069" author="olegt" created="Tue, 21 Oct 2014 07:16:34 +0100"/>
                            <attachment id="12672954" name="TIKA-1422.palsulich.100414.patch" size="2653" author="tpalsulich" created="Sat, 4 Oct 2014 22:42:10 +0100"/>
                            <attachment id="12673403" name="TIKA-1422.palsulich.100714.patch" size="6516" author="tpalsulich" created="Tue, 7 Oct 2014 19:34:20 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Sep 2014 18:40:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzu62n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>