Tests can be made more robust to pass in Java 8