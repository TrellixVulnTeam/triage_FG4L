<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:20:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-184/MAHOUT-184.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-184] Code tweaks for .df.* code</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-184</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;This follows on my last email to the mailing list, and code inspection. It&apos;s big enough I made a patch. No surprises I hope given the consensus on code style and practice. Might be some good takeaways in here, or points for further discussion.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437085">MAHOUT-184</key>
            <summary>Code tweaks for .df.* code</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="srowen">Sean Owen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Oct 2009 00:15:20 +0100</created>
                <updated>Wed, 18 Nov 2009 14:06:31 +0000</updated>
                            <resolved>Mon, 5 Oct 2009 11:47:18 +0100</resolved>
                                                    <fixVersion>0.2</fixVersion>
                                        <due>Mon, 5 Oct 2009 07:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12761501" author="isabel" created="Fri, 2 Oct 2009 08:58:39 +0100"  >&lt;p&gt;Looks good to me. Deneche, could you please also have a look at the patch to spot any issues early on?&lt;/p&gt;

&lt;p&gt;I would prefer using CLI for the job implementation (core/src/main/java/org/apache/mahout/cf/taste/hadoop/RecommenderJob.java), but that can be done in a later patch.&lt;/p&gt;
</comment>
                            <comment id="12761819" author="adeneche" created="Sat, 3 Oct 2009 07:30:35 +0100"  >&lt;p&gt;I&apos;m having trouble applying the patch, got a lot of: &quot;Hunk #1 FAILED at XX.&quot;&lt;br/&gt;
I inspected the patch without applying it and it look fine, although I have two comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;comment 1:&lt;br/&gt;
in core/main/.../df/node/Node.java you added the following comment:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; node2Type() {
+    &lt;span class=&quot;code-comment&quot;&gt;// TODO shouldn&apos;t subclasses override &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; method then??&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;the problem is that node2type() is used when writing a Node to actually store its class in the form of an Integer. The static method Node.read(DataInput in) is used to read the node delegating the reading to the correct implementation. Overriding node2Type() without modifying Node.read(DataInput in) is a certain way to have headaches !!!&lt;br/&gt;
A better solution is to store the class name and use class loaders, but for now I don&apos;t really need it.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;comment 2:&lt;br/&gt;
in core/src/test/java/org/apache/mahout/df/data/DataLoaderTest.java you made the following change:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void checkCategorical(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;[][] source, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; missings,
       Data loaded, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; attr, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; aId, &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; oValue, &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; nValue) {
     &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; lind = 0;
 
@@ -286,7 +277,7 @@
         &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
 
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (source[index][attr] == oValue) {
-        assertTrue(nValue == loaded.get(lind).get(aId));
+        assertEquals(nValue, loaded.get(lind).get(aId), 0.0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think you meant :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        assertEquals(nValue, loaded.get(lind).get(aId)); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12761854" author="srowen" created="Sat, 3 Oct 2009 12:08:25 +0100"  >
&lt;p&gt;True, either way these two methods must be updated together. write()&lt;br/&gt;
and readFields() must be updated in parallel in the subclasses or else&lt;br/&gt;
things break too. It feels more object-oriented to override the method&lt;br/&gt;
in subclasses (purists might suggest that the Node enum itself should&lt;br/&gt;
have a method that returns a corresponding instance of an&lt;br/&gt;
implementation) but it is not something I personally feel so strongly&lt;br/&gt;
about.&lt;/p&gt;


&lt;p&gt;It&apos;s the same, the last arg defaults to 0.0 anyway. Assuming they&lt;br/&gt;
really should be the exact same double value and can&apos;t vary due to&lt;br/&gt;
intermediate rounding, this is right.&lt;/p&gt;</comment>
                            <comment id="12762034" author="srowen" created="Sun, 4 Oct 2009 18:15:13 +0100"  >&lt;p&gt;More stuff I&apos;d like to change, on a related note &amp;#8211; in particular here I&apos;d like to not throw Exception (except from main() or test methods), nor RuntimeException, and instead use the most appropriate standard subclass.&lt;/p&gt;</comment>
                            <comment id="12762089" author="adeneche" created="Mon, 5 Oct 2009 06:10:32 +0100"  >&lt;p&gt;.df* and .ga.* changes looks good to me&lt;/p&gt;

&lt;p&gt;but I&apos;m still enable to apply the patch, I&apos;m getting a lot of &quot;Hunk...failed...&quot; !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421232" name="MAHOUT-184.patch" size="63891" author="srowen" created="Sun, 4 Oct 2009 18:15:13 +0100"/>
                            <attachment id="12421082" name="Tweaks_to__df__.patch" size="154794" author="srowen" created="Fri, 2 Oct 2009 00:17:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Oct 2009 07:58:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy6on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>