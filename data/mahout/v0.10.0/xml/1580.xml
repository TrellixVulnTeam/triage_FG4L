<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:23:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1580/MAHOUT-1580.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1580] Optimize getNumNonZeroElements</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1580</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;getNumNonZeroElements in AbstractVector uses the nonZeroes -iterator internally which adds a lot of overhead for certain types of vectors, e.g. the dense ones. We should add custom implementations here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12721096">MAHOUT-1580</key>
            <summary>Optimize getNumNonZeroElements</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ssc">Sebastian Schelter</assignee>
                                    <reporter username="ssc">Sebastian Schelter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jun 2014 13:31:40 +0100</created>
                <updated>Mon, 13 Apr 2015 11:21:46 +0100</updated>
                            <resolved>Wed, 18 Jun 2014 21:32:28 +0100</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Math</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14030667" author="githubbot" created="Fri, 13 Jun 2014 15:22:04 +0100"  >&lt;p&gt;GitHub user sscdotopen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/17&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1580&quot; title=&quot;Optimize getNumNonZeroElements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1580&quot;&gt;&lt;del&gt;MAHOUT-1580&lt;/del&gt;&lt;/a&gt; Optimize getNumNonZeroElements()&lt;/p&gt;

&lt;p&gt;    Can someone have a look at the changes? The basic idea is to directly work on the internal datastructures instead of going through the non-zeroes iterator.&lt;/p&gt;

&lt;p&gt;    A quick benchmark should 7x performance on dense and 3x performance on sequential access sparse vectors.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sscdotopen/mahout&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/sscdotopen/mahout&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1580&quot; title=&quot;Optimize getNumNonZeroElements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1580&quot;&gt;&lt;del&gt;MAHOUT-1580&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/17.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/17.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #17&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 25b99847f43e4cb29b71064921d52c373c221442&lt;br/&gt;
Author: ssc &amp;lt;ssc@apache.org&amp;gt;&lt;br/&gt;
Date:   2014-06-13T12:32:24Z&lt;/p&gt;

&lt;p&gt;    custom implementations for main vectors&lt;/p&gt;

&lt;p&gt;commit 50fc20826893d2af3a7fafe94c4ac6ae6198e622&lt;br/&gt;
Author: ssc &amp;lt;ssc@apache.org&amp;gt;&lt;br/&gt;
Date:   2014-06-13T12:44:49Z&lt;/p&gt;

&lt;p&gt;    added optimization for permuted view&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14030967" author="githubbot" created="Fri, 13 Jun 2014 19:31:29 +0100"  >&lt;p&gt;Github user dlyubimov commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/17#issuecomment-46044957&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/17#issuecomment-46044957&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I guess i am a bit conflicted. &lt;/p&gt;

&lt;p&gt;    On one hand, if abstraction contract says one thing, concrete implementation definitely must not do something else &amp;#8211; even if it means inefficiency. (If approximation is desired, the contract must be very explicit about it: &lt;/p&gt;

&lt;p&gt;        /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Return the number of non zero elements in the vector.&lt;br/&gt;
         *&lt;/li&gt;
	&lt;li&gt;@return an int&lt;br/&gt;
         */&lt;br/&gt;
        int getNumNonZeroElements();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Actually i&apos;ve been using this for some time and have always been this is what it does &amp;#8211; reports the non-zero elements. In that sense, i am wholeheartedly support this patch since i firmly believe it is a better situation to be in compared to current state of things. (nothing can trump declared abstract contract &amp;#8211; if there&apos;s faster less than accurate alternative, just create another perhaps optional contract that explicitly says so). but you can&apos;t have a contract that says &quot;number of non-zero elements&quot; and return say 50 where true value of non-zero elements is 10. &lt;/p&gt;


&lt;p&gt;    On the other hand, it is very painfully enticing to implement that as an internal counter rather than a computation &amp;#8211; by controlling all assigment flows. Which might be origanizationally difficult. The analogy here is that say hash sets always know their cardinality without having to compute it.&lt;/p&gt;

&lt;p&gt;    So, i&apos;d say, if count tracking is difficult (or viewed as more expensive option since it obviously adds load to modifications), then i&apos;d say commit this.&lt;/p&gt;
</comment>
                            <comment id="14031643" author="githubbot" created="Sat, 14 Jun 2014 19:14:09 +0100"  >&lt;p&gt;Github user sscdotopen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/17#issuecomment-46095388&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/17#issuecomment-46095388&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It is  a misconception that this method gives approximate answers. It did not do this before my changes and it doesn&apos;t do it with the changes. I just made it faster. &lt;/p&gt;</comment>
                            <comment id="14034272" author="githubbot" created="Tue, 17 Jun 2014 20:49:43 +0100"  >&lt;p&gt;Github user dlyubimov commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/17#issuecomment-46356129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/17#issuecomment-46356129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, so are we ready to commit this?&lt;/p&gt;</comment>
                            <comment id="14036333" author="githubbot" created="Wed, 18 Jun 2014 21:32:08 +0100"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/17&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/17&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14036386" author="hudson" created="Wed, 18 Jun 2014 22:08:07 +0100"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #2664 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2664/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2664/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1580&quot; title=&quot;Optimize getNumNonZeroElements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1580&quot;&gt;&lt;del&gt;MAHOUT-1580&lt;/del&gt;&lt;/a&gt; Optimize getNumNonZeroElements() closes apache/mahout#17 (ssc: rev 45d88031c8e782a624eaf6cefea9700600805647)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CHANGELOG&lt;/li&gt;
	&lt;li&gt;math/src/main/java/org/apache/mahout/math/SequentialAccessSparseVector.java&lt;/li&gt;
	&lt;li&gt;math/src/test/java/org/apache/mahout/math/VectorTest.java&lt;/li&gt;
	&lt;li&gt;math/src/main/java/org/apache/mahout/math/DenseVector.java&lt;/li&gt;
	&lt;li&gt;math/src/main/java/org/apache/mahout/math/RandomAccessSparseVector.java&lt;/li&gt;
	&lt;li&gt;math/src/main/java/org/apache/mahout/math/PermutedVectorView.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Jun 2014 14:22:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399293</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqlev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399403</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>