<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:16:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-597/MAHOUT-597.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-597] Kernels in Mean Shift</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-597</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Improve currently implemented variant of the mean shift algorithm in Mahout so that kernels are supported.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12496924">MAHOUT-597</key>
            <summary>Kernels in Mean Shift</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeastman">Jeff Eastman</assignee>
                                    <reporter username="vavasilev">Vasil Vasilev</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Jan 2011 11:00:16 +0000</created>
                <updated>Thu, 9 Feb 2012 14:00:40 +0000</updated>
                            <resolved>Sun, 5 Jun 2011 00:41:37 +0100</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>Clustering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12987498" author="vavasilev" created="Thu, 27 Jan 2011 11:04:13 +0000"  >&lt;p&gt;This is a proposal for implementing various types of kernels with the means shift algorithm. The following changes were introduced:&lt;/p&gt;

&lt;p&gt;1. The original algorithm was changed: Previously when one cluster &quot;touched&quot; other clusters its centroid was computed only based on the centroids of the clusters it touched, but not based on his centroid itself. Now before calculating the shift I one more line was added which makes the cluster observe his personal centroid:&lt;/p&gt;

&lt;p&gt;public boolean shiftToMean(MeanShiftCanopy canopy) &lt;/p&gt;
{ canopy.observe(canopy.getCenter(), canopy.getBoundPoints().size()); canopy.computeConvergence(measure, convergenceDelta); canopy.computeParameters(); return canopy.isConverged(); }

&lt;p&gt;With this modification also a problem with convergence of the algorithm is resolved, when there are 2 clusters left which are within their T1 boundaries and not within their T2 boundaries. In this cases their centroids will switch from one another until infinity.&lt;br/&gt;
With this modification, however, the number of iterations until convergence increased slightly.&lt;br/&gt;
This change was necessary in order to introduce the other types of &quot;soft&quot; kernels.&lt;/p&gt;

&lt;p&gt;2. IKernelProfile interface was introduced which has the methods:&lt;br/&gt;
public double calculateValue(double distance, double h);&lt;br/&gt;
public double calculateDerivativeValue(double distance, double h);&lt;/p&gt;

&lt;p&gt;The first one is not used by the current implementations, because the value of the kernel profile - k - is not needed in calculating the meanshift, rather the value of the derivative of the kernel profile - g - is used.&lt;/p&gt;

&lt;p&gt;3. Currenlty 2 implementations are created:&lt;br/&gt;
TriangularKernelProfile with calculated value:&lt;br/&gt;
@Override&lt;br/&gt;
public double calculateDerivativeValue(double distance, double h) &lt;/p&gt;
{ return (distance &amp;lt; h) ? 1.0 : 0.0; }
&lt;p&gt;This profile covers the cases that are currently covered by the meanshift algorithm implementation&lt;/p&gt;

&lt;p&gt;In addition NormalKernelProfile was created with calculated value:&lt;br/&gt;
@Override&lt;br/&gt;
public double calculateDerivativeValue(double distance, double h) &lt;/p&gt;
{ return UncommonDistributions.dNorm(distance, 0.0, h); }

&lt;p&gt;4. The merging of canopies now uses the kernel profile&lt;/p&gt;

&lt;p&gt;public void mergeCanopy(MeanShiftCanopy aCanopy, Collection&amp;lt;MeanShiftCanopy&amp;gt; canopies) {&lt;br/&gt;
MeanShiftCanopy closestCoveringCanopy = null;&lt;br/&gt;
double closestNorm = Double.MAX_VALUE;&lt;br/&gt;
for (MeanShiftCanopy canopy : canopies) {&lt;br/&gt;
double norm = measure.distance(canopy.getCenter(), aCanopy.getCenter());&lt;br/&gt;
double weight = kernelProfile.calculateDerivativeValue(norm, t1);&lt;br/&gt;
if(weight &amp;gt; 0.0)&lt;/p&gt;
{ aCanopy.touch(canopy, weight); }

&lt;p&gt;if (norm &amp;lt; t2 &amp;amp;&amp;amp; ((closestCoveringCanopy == null) || (norm &amp;lt; closestNorm))) &lt;/p&gt;
{ closestNorm = norm; closestCoveringCanopy = canopy; }
&lt;p&gt;}&lt;br/&gt;
if (closestCoveringCanopy == null) &lt;/p&gt;
{ canopies.add(aCanopy); }
&lt;p&gt; else &lt;/p&gt;
{ closestCoveringCanopy.merge(aCanopy); }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;5. The MeanShiftCanopy is modified so that its touch method includes also the weight with which the clusters should observe each other. This weight was calculated based on the kernel profile in use&lt;/p&gt;

&lt;p&gt;void touch(MeanShiftCanopy canopy, double weight) &lt;/p&gt;
{ canopy.observe(getCenter(), weight*((double)boundPoints.size())); observe(canopy.getCenter(), weight*((double)canopy.boundPoints.size())); }

&lt;p&gt;6. Some other modifications were made which were necessary to compile the code and to make the tests pass&lt;/p&gt;

&lt;p&gt;With the so changed algorithm the following observations can be made:&lt;/p&gt;

&lt;p&gt;1. Using NormalKernel &quot;blurs&quot; the cluster boundaries. I.e. the cluster content is more intermixed&lt;br/&gt;
2. The following procedure for estimating T2 and convergence delta can be used:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;bind convergence delta = T2 / 2&lt;/li&gt;
	&lt;li&gt;When you decrease T2 the number of iterations increases and the number of resulting clusters after convergence decreases&lt;/li&gt;
	&lt;li&gt;You come to a moment when you decrease T2 the number of iterations increases, but the number of resulting clusters remains unchanged. This is the point with the best value for T2&lt;br/&gt;
      3. In case of Normal kernel what you give as T1 is in fact the standard deviation of a normal distribution, so the radius of the window will be T1^2&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12987631" author="jeastman" created="Thu, 27 Jan 2011 16:23:39 +0000"  >&lt;p&gt;This looks excellent, and the change in #1 clearly fixes a major bug. Nice work with the kernels too. &lt;/p&gt;</comment>
                            <comment id="13037611" author="srowen" created="Sun, 22 May 2011 16:16:47 +0100"  >&lt;p&gt;Jeff it looks like you approve of the patch &amp;#8211; seems like something to be worked in for 0.6 then.&lt;/p&gt;</comment>
                            <comment id="13043566" author="jeastman" created="Fri, 3 Jun 2011 17:43:48 +0100"  >&lt;p&gt;Should have committed it earlier. It has a few conflicts now but I&apos;m on it for 0.6 for sure.&lt;/p&gt;</comment>
                            <comment id="13044415" author="jeastman" created="Sun, 5 Jun 2011 00:41:37 +0100"  >&lt;p&gt;r1131504 committed this patch after fixing conflicts caused by the delay. All tests run&lt;/p&gt;</comment>
                            <comment id="13044425" author="hudson" created="Sun, 5 Jun 2011 03:38:56 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #863 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Mahout-Quality/863/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Mahout-Quality/863/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-597&quot; title=&quot;Kernels in Mean Shift&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-597&quot;&gt;&lt;del&gt;MAHOUT-597&lt;/del&gt;&lt;/a&gt;: Applied patch to support kernels in MeanShift. All tests run.&lt;/p&gt;

&lt;p&gt;jeastman : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1131504&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1131504&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/kernel&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/cdbw/TestCDbwEvaluator.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/meanshift/MeanShiftCanopy.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/meanshift/MeanShiftCanopyClusterer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/meanshift/TestMeanShift.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/commandline/DefaultOptionCreator.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/examples/src/main/java/org/apache/mahout/clustering/display/DisplayMeanShift.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/TestClusterEvaluator.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/TestClusterDumper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/kernel/NormalKernelProfile.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/kernel/TriangularKernelProfile.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/examples/src/main/java/org/apache/mahout/clustering/syntheticcontrol/meanshift/Job.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/meanshift/MeanShiftCanopyDriver.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/meanshift/MeanShiftCanopyConfigKeys.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/kernel/IKernelProfile.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13044572" author="srowen" created="Sun, 5 Jun 2011 17:36:01 +0100"  >&lt;p&gt;Tiny question on this. Would it be OK to use Java&apos;s UnsupportedOperationException instead of Commons Lang&apos;s NotImplementedException? Just seems more standard.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469540" name="meanshift_with_kernels.patch" size="33057" author="vavasilev" created="Thu, 27 Jan 2011 11:04:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Jan 2011 16:23:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy44v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>