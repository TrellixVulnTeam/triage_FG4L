<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:23:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-389/MAHOUT-389.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-389] UncenteredCosineSimilarity </title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-389</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;org.apache.mahout.cf.taste.impl.similarity.UncenteredCosineSimilarity only computes the cosine distance between those components of the vectors where both vectors have a value greater zero.&lt;/p&gt;

&lt;p&gt;This is inconsistent with the definition of the cosine (correct me if I&apos;m wrong) and is inconsistent with the distributed cosine similarity computation.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12463677">MAHOUT-389</key>
            <summary>UncenteredCosineSimilarity </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="ssc">Sebastian Schelter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2010 16:17:06 +0100</created>
                <updated>Sun, 31 Oct 2010 15:49:27 +0000</updated>
                            <resolved>Thu, 6 May 2010 18:55:45 +0100</resolved>
                                                    <fixVersion>0.4</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12863838" author="ssc" created="Tue, 4 May 2010 16:18:39 +0100"  >&lt;p&gt;Unit test attached.&lt;/p&gt;</comment>
                            <comment id="12863861" author="srowen" created="Tue, 4 May 2010 17:07:34 +0100"  >&lt;p&gt;The issue with that is you are implicitly assuming that missing ratings are 0, and that&apos;s not a good assumption. For example, if your ratings are on a scale of 1 to 5, you are assuming that all unknown items are utterly hated.&lt;/p&gt;

&lt;p&gt;It is not ignoring zeroes; it is ignoring missing ratings.&lt;/p&gt;

&lt;p&gt;I think the distributed computation should act the same way for similar reasons.&lt;/p&gt;</comment>
                            <comment id="12863943" author="srowen" created="Tue, 4 May 2010 19:47:51 +0100"  >&lt;p&gt;I should add you could emulate the behavior you may desire in the non-distributed implementation with a combination of the UncenteredCosineSimilarity, and a PreferenceInferrer which always infers 0.&lt;/p&gt;

&lt;p&gt;I don&apos;t see a simple way to make the distributed version emulate the non-distributed version.&lt;/p&gt;

&lt;p&gt;While I think the non-distributed version has preferable semantics, neither is really &quot;wrong&quot;. I suggesting leaving this as more of an improvement idea to figure out a way to unify them, by modifying the distributed version.&lt;/p&gt;</comment>
                            <comment id="12864322" author="ssc" created="Wed, 5 May 2010 14:13:56 +0100"  >&lt;p&gt;There might be cases where it makes sense to look not only at co-ratings, e.g. imagine you have 3 products: A, B and C&lt;/p&gt;

&lt;p&gt;Let&apos;s say the pairs A,B and A,C have the same co-ratings (the same users bought them), but B is a topseller, which is bought by lots of people and C is a niche product, which only sells rarely.&lt;br/&gt;
A cosine which includes the zero assumption would decrease the value for the topseller and prefer the niche product, which might be a good thing depending on your use case.&lt;/p&gt;

&lt;p&gt;But I definitely see your point here that the assumption is generally not holding and I also think that the distributed version should be modified. &lt;/p&gt;

&lt;p&gt;I attached a patch with a first proposal how this could be managed.&lt;/p&gt;

&lt;p&gt;I tried to refactor the similarity computation out of the map-reduce code and make it possible to implement different similarity functions that have to follow this scheme:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;in a early stage of the process, the similarity implementation can compute a weight (a single double) for each item-vector&lt;/li&gt;
	&lt;li&gt;in the end, it is given all co-ratings and the previously computed weights for each item-pair that has at least one co-rating&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;That should be sufficient to compute centered pearson-correlation as well as cosine or tanimoto coefficients.&lt;/p&gt;

&lt;p&gt;I hope it&apos;s understandable what I&apos;m trying to propose here, taking a look at org.apache.mahout.cf.taste.hadoop.similarity.DistributedSimilarity together with DistributedPearsonCorrelationSimilarity and DistributedUncenteredZeroAssumingCosineSimilarity will hopefully help to get a clearer picture. These implementations are merely for demonstration purposes, they could be merged with the already existing non-distributed implementations in case you like the approach described here.&lt;/p&gt;</comment>
                            <comment id="12864325" author="ssc" created="Wed, 5 May 2010 14:21:07 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-389&quot; title=&quot;UncenteredCosineSimilarity &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-389&quot;&gt;&lt;del&gt;MAHOUT-389&lt;/del&gt;&lt;/a&gt;-2.patch had some debug code not removed, sorry, this patch should be clean&lt;/p&gt;</comment>
                            <comment id="12864334" author="srowen" created="Wed, 5 May 2010 15:04:49 +0100"  >&lt;p&gt;De-emphasizing common items is often desirable, though achieving it this way may be a case of mixing two things that can be separable. That is you can more directly de-emphasize with, for example, the provided InverseUserFrequency transformation.&lt;/p&gt;

&lt;p&gt;But doubtless there are times when this version of the computation is better, even best. For example when your rating is really the number of times a user has viewed an item, then it&apos;s absolutely correct to assume missing items are rated 0, because they really are 0, and so adding that information is even better. You could also get this effect with a PreferenceInferrer. (See I&apos;ve thought of everything.)&lt;/p&gt;

&lt;p&gt;But I don&apos;t really mind adding more variations on the similarity computation, to give people options. As long as it fits in nicely, doesn&apos;t really complicate the code or confuse readers, and doesn&apos;t have any material performance impact, why not? I will look at the patch a bit later and see what you&apos;re up to.&lt;/p&gt;</comment>
                            <comment id="12864812" author="srowen" created="Thu, 6 May 2010 17:14:08 +0100"  >&lt;p&gt;I&apos;m happy to commit this since it looks fine, suits your purposes as an active user, and remains reusable. I might make minor changes like not making CoRating an inner class of an interface, and just making it Writable rather than separate the Writable wrapper.&lt;/p&gt;</comment>
                            <comment id="12864835" author="ssc" created="Thu, 6 May 2010 18:03:25 +0100"  >&lt;p&gt;I&apos;m glad you like it, refactor it as you wish! &lt;/p&gt;

&lt;p&gt;This patch should make it possible for mahout users to use their own customized similarity implementation for the distributed computation&lt;/p&gt;</comment>
                            <comment id="12864859" author="srowen" created="Thu, 6 May 2010 18:55:45 +0100"  >&lt;p&gt;Committed patch #3 with some largely cosmetic style changes&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443707" name="MAHOUT-389-2.patch" size="53850" author="ssc" created="Wed, 5 May 2010 14:13:56 +0100"/>
                            <attachment id="12443709" name="MAHOUT-389-3.patch" size="53763" author="ssc" created="Wed, 5 May 2010 14:21:07 +0100"/>
                            <attachment id="12443585" name="MAHOUT-389.patch" size="2545" author="ssc" created="Tue, 4 May 2010 16:18:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 May 2010 16:07:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy5f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>