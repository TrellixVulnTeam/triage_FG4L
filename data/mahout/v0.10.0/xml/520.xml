<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:16:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-520/MAHOUT-520.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-520] Add example scripts / integration tests for various algorithms.</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-520</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Scripts like build-reuters.sh are useful in that they both demonstrate typical usage of Mahout from the command-line but also serve as integration tests. We should add additional scripts that drive the algorithms so new users can quickly run the examples. &lt;/p&gt;

&lt;p&gt;Perhaps these can also be run from hudson as a part of the nightly builds and can serve as integration tests.&lt;/p&gt;

&lt;p&gt;As a start towards this goal, provide build-20news-bayes.sh example (in the same vein as build-reuters.sh, that follows &lt;a href=&quot;https://cwiki.apache.org/MAHOUT/twenty-newsgroups.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/MAHOUT/twenty-newsgroups.html&lt;/a&gt;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12475679">MAHOUT-520</key>
            <summary>Add example scripts / integration tests for various algorithms.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drew.farris">Drew Farris</assignee>
                                    <reporter username="drew.farris">Drew Farris</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Oct 2010 01:45:57 +0100</created>
                <updated>Sat, 21 May 2011 04:19:00 +0100</updated>
                            <resolved>Thu, 3 Feb 2011 12:52:23 +0000</resolved>
                                    <version>0.4</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>Classification</component>
                        <due>Fri, 21 Jan 2011 05:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12917131" author="drew.farris" created="Sat, 2 Oct 2010 01:48:19 +0100"  >&lt;p&gt;This patch includes a working build-20news-bayes.sh script. Would love some feedback. I realize it&apos;s close to get it into 0.4, but it would be nice to have it in there. This makes it easier to do some basic integration testing on the bayes classifier code. &lt;/p&gt;</comment>
                            <comment id="12919688" author="joekumar" created="Mon, 11 Oct 2010 00:19:44 +0100"  >&lt;p&gt;Drew,&lt;/p&gt;

&lt;p&gt;I was just looking at your patch. Couple of observations.&lt;/p&gt;

&lt;p&gt;1. type, ng and source are optional parameters in TrainClassifier and by default they are set to the values you have in the script&lt;br/&gt;
2. type, ng, source and method are optional params in TestClassifier and are set to the values you have mentioned&lt;br/&gt;
3. after checking if HADOOP_HOME is set, should we run TrainClassifier and TestClassifier in parallel mode by setting the method parameter to mapreduce ? If HADOOP_HOME is not, we could just invoke TrainClassifier and TestClassifier without setting those params so it goes into sequential mode ?&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12919808" author="drew.farris" created="Mon, 11 Oct 2010 14:02:53 +0100"  >&lt;p&gt;Joe, thanks for the feedback re: the bayes driver script.&lt;/p&gt;

&lt;p&gt;The work you&apos;ve done getting the default argument values in place is very useful.. In the context of this script I think it makes sense to include many of the arguments for TrainClassifier and TestClassifier as a self-documenting way to show how they are used.&lt;/p&gt;

&lt;p&gt;Good idea regarding parallel vs. sequential. I&apos;ll get that change in place.&lt;/p&gt;</comment>
                            <comment id="12920073" author="joekumar" created="Tue, 12 Oct 2010 04:18:55 +0100"  >&lt;p&gt;The attached patch contains a script for running the clustering algos on synthetic control data.&lt;/p&gt;

&lt;p&gt;Script runs in 2 mode&lt;br/&gt;
1. default is the interactive mode -&amp;gt; from MAHOUT_HOME directory, examples/bin/build-cluster-syntheticcontrol.sh&lt;br/&gt;
2. non-interactive mode -&amp;gt; examples/bin/build-cluster-syntheticcontrol.sh -ni . this mode can be used by hudson script for automated testing&lt;/p&gt;

&lt;p&gt;The script &lt;br/&gt;
1. checks if HADOOP_HOME is set, if not throws error and halts&lt;br/&gt;
2. checks health of dfs by invoking $HADOOP_HOME/bin/hadoop fs -ls. If not healthy, throws error and halts&lt;br/&gt;
3. uploads synthetic_control.data to hdfs&lt;br/&gt;
4. checks with user on which clustering algo they&apos;d want to use.&lt;br/&gt;
5. User chooses a # and the corresponding algo is executed.&lt;/p&gt;

&lt;p&gt;I have tested the scenarios failure and success scenarios from my end. If someone also want to verify, that&apos;ll be wonderful.&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12920422" author="drew.farris" created="Wed, 13 Oct 2010 04:00:40 +0100"  >&lt;p&gt;Joe, The attached patch looks good, I noticed that :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ $1 = &lt;span class=&quot;code-quote&quot;&gt;&quot;-ni&quot;&lt;/span&gt; ]; then
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should likely be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;code-quote&quot;&gt;&quot;$1&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;-ni&quot;&lt;/span&gt; ]; then
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So an error isn&apos;t emitted if $1 isn&apos;t present.&lt;/p&gt;

&lt;p&gt;I&apos;m also wondering about the blind -rmr of a directory named &apos;testdata&apos; although I do something similar in the 20newsgroups script. Perhaps in this case we should test for the presence of the directory we&apos;re about to delete and exit if it already exists? Alternatively it may be ok if we name the directory something to be fairly sure that I won&apos;t exist, e,g: examples/bin/work/20news-bydate/bayes-test-input may be pretty safe.&lt;/p&gt;

&lt;p&gt;Regardless, I ran the canopy, kmeans and fuzzykmeans algorithms from the script in interactive mode and they appeared to execute correctly.&lt;/p&gt;

</comment>
                            <comment id="12920423" author="drew.farris" created="Wed, 13 Oct 2010 04:07:01 +0100"  >&lt;p&gt;Updated build-20news-bayes.sh&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;changes the analyzer class used to reflect the move of DefaultAnalyzer to the vectorizer package&lt;/li&gt;
	&lt;li&gt;runs using the mapreduce method if executing on hadoop&lt;/li&gt;
	&lt;li&gt;exits immediately when one of the steps encounters an error (via set -e)&lt;/li&gt;
	&lt;li&gt;is more flexible regarding the directory the script can be run from (detects path to script and cd&apos;s to that path instead of blindly cd&apos;ing to examples/bin&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12920428" author="joekumar" created="Wed, 13 Oct 2010 05:00:04 +0100"  >&lt;p&gt;Drew,&lt;/p&gt;

&lt;p&gt;Thanks for your comments. &lt;/p&gt;

&lt;p&gt;I was just going over the Breiman example and saw that the document references testdata directory. This directory is not hardcoded in the BreimanExample class and so it wont be much of an impact to change the documentation of Breiman Example. Neverthless, I guess its dangerous to just -rmr on testdata. we could probably create a separate directory like syntethic_control_testdata. But with changing this directory we need to modify all the Job.java under org.apache.mahout.clustering.syntheticcontrol.* . I believe it is better to modify those classes and add an InputOption / OutputOption to get the input and output directories as parameters instead of the current hardcoded directory names. should I submit a separate patch for this ? what do you suggest ?&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12920523" author="drew.farris" created="Wed, 13 Oct 2010 13:53:43 +0100"  >&lt;p&gt;Joe, I didn&apos;t realize that the synthetic control examples used hardcoded directory names. I agree, it makes sense to modify these to use input and output directories that are parameters. Why don&apos;t you should open a new issue for that and attach a patch when you&apos;re ready.&lt;/p&gt;
</comment>
                            <comment id="12920560" author="jeastman" created="Wed, 13 Oct 2010 14:55:07 +0100"  >&lt;p&gt;The synthetic control examples use default parameter values when run without arguments but users can also supply a full set of arguments is they wish. The following k-means arguments are supported, along with their default values:&lt;/p&gt;

&lt;p&gt;-i testdata &lt;br/&gt;
-o output &lt;br/&gt;
-dm org.apache.mahout.common.distance.EuclideanDistanceMeasure&lt;br/&gt;
-t1 80&lt;br/&gt;
-t2 55&lt;br/&gt;
-x 10 &lt;br/&gt;
-ow&lt;/p&gt;

&lt;p&gt;Note that, for k-means, the number of clusters (-k) is computed by Canopy using the supplied -dm,  -t1 and -t2 arguments so -k is not an argument.&lt;/p&gt;</comment>
                            <comment id="12920577" author="drew.farris" created="Wed, 13 Oct 2010 15:20:02 +0100"  >&lt;p&gt;Thanks for commenting Jeff. &lt;/p&gt;

&lt;p&gt;Joe, it appears that we should take a closer look at the synthetic control examples to see if we can use the existing arguments to control input/output.&lt;/p&gt;</comment>
                            <comment id="12920848" author="joekumar" created="Thu, 14 Oct 2010 05:23:11 +0100"  >&lt;p&gt;Jeff,&lt;br/&gt;
Thanks for pointing it out. Sorry that I didnt read the entire code and spoke too soon.&lt;/p&gt;

&lt;p&gt;Drew,&lt;br/&gt;
I can modify the code to specify the parameters. Currently I m having a single line of code (org.apache.mahout.clustering.syntheticcontrol.&quot;$&lt;/p&gt;
{algorithm[$choice-1]}
&lt;p&gt;&quot;.Job) to call any of the clustering algos since the variable in the command is just the algo name. But if we specify the i/p and o/p parameters, we need to call each of the algos separately as each of them have different params. For eg, meanshift needs a convergencedelta while dirichlet doesnt need one and so on.&lt;/p&gt;

&lt;p&gt;Should we also modify the various synthetic control clustering jobs to specify default values and make them optional params. For eg, in kmeans (or in all algos), the i/p and o/p would be the only mandatory params. Will it make sense to do that ? From the script perspective, it&apos;ll be great since we could just stick to 1 line of code for calling all clustering algos (I am trying to achieve DRY). Depending on this decision, i&apos;ll modify the script and re-post the patch.&lt;/p&gt;

&lt;p&gt;Also currently in the non-interactive mode, I am just invoking canopy clustering. Should we just leave it that way or should we call each of the clustering algos so that hudson could verify all of the clustering algos ?&lt;/p&gt;

&lt;p&gt;regards&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12921227" author="joekumar" created="Fri, 15 Oct 2010 05:59:04 +0100"  >&lt;p&gt;Modified build-reuters.sh to run under interactive / non-interactive mode.&lt;br/&gt;
For hudson, invoke examples/bin/build-reuters.sh -ni&lt;br/&gt;
Users will invoke examples/bin/build-reuters.sh and then they can choose between kmeans and lda&lt;/p&gt;</comment>
                            <comment id="12982130" author="srowen" created="Sat, 15 Jan 2011 16:44:52 +0000"  >&lt;p&gt;This has been knocking around a while and looks like a substantial and useful bit of work and it&apos;s been reviewed. Ready to commit then Drew?&lt;/p&gt;</comment>
                            <comment id="12982313" author="drew.farris" created="Sun, 16 Jan 2011 15:01:47 +0000"  >&lt;p&gt;I&apos;ll review the latest changes asap and commit. I hope to have a chance to close this up by Tuesday evening.&lt;/p&gt;</comment>
                            <comment id="12983521" author="drew.farris" created="Wed, 19 Jan 2011 03:33:10 +0000"  >&lt;p&gt;Rolls up all of Joe&apos;s and my modifications into a single patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;examples/bin/build-20news-bayes.sh&lt;/li&gt;
	&lt;li&gt;examples/bin/build-reuters.sh&lt;/li&gt;
	&lt;li&gt;examples/bin/build-cluster-syntheticcontrol.sh&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Modified the code for the &apos;interative&apos; examples so that options would be solicited up-front instead of after the preparation phases have been run. &lt;/p&gt;

&lt;p&gt;I&apos;ve run through all of the examples with a hadoop cluster operational. Posting the patch for feedback, the goal is to commit in a couple days.&lt;/p&gt;</comment>
                            <comment id="12985162" author="hudson" created="Sat, 22 Jan 2011 17:48:42 +0000"  >&lt;p&gt;Integrated in Mahout-Quality #578 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Mahout-Quality/578/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/Mahout-Quality/578/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-520&quot; title=&quot;Add example scripts / integration tests for various algorithms.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-520&quot;&gt;&lt;del&gt;MAHOUT-520&lt;/del&gt;&lt;/a&gt;: Add example scripts / integration tests for various algorithms.&lt;/p&gt;</comment>
                            <comment id="12990076" author="srowen" created="Thu, 3 Feb 2011 12:52:23 +0000"  >&lt;p&gt;Looks like you committed this right Drew?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457232" name="MAHOUT-520-buildreuters.patch" size="3120" author="joekumar" created="Fri, 15 Oct 2010 05:59:04 +0100"/>
                            <attachment id="12456927" name="MAHOUT-520-syntheticcontrol.patch" size="3106" author="joekumar" created="Tue, 12 Oct 2010 04:18:55 +0100"/>
                            <attachment id="12468722" name="MAHOUT-520.patch" size="11956" author="drew.farris" created="Wed, 19 Jan 2011 03:33:10 +0000"/>
                            <attachment id="12457037" name="MAHOUT-520.patch" size="3573" author="drew.farris" created="Wed, 13 Oct 2010 04:07:00 +0100"/>
                            <attachment id="12456172" name="MAHOUT-520.patch" size="3277" author="drew.farris" created="Sat, 2 Oct 2010 01:48:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 10 Oct 2010 23:19:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy4lz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>