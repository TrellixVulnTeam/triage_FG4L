<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:17:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-848/MAHOUT-848.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-848] M/R job launching code should add Oozie&apos;s action.xml as a configuration resource of the Hadoop Configuration object</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-848</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Here&apos;s an overview of what is happening:&lt;/p&gt;

&lt;p&gt;Oozie workflow has a sub-workflow (and in my case a sub-workflow to the sub-workflow, so 3 levels down) that launches a Mahout job, such as the vectorizer as a Java action. This job fails due to class loading issues, e.g. vectorizer code cannot load a Lucene class, which it&apos;s definitely in the job jar and definitely gets found just fine if launched from a simple Oozie (1-level) workflow.&lt;/p&gt;

&lt;p&gt;The solution is to include Oozie&apos;s action.xml as a configuration resource of the Hadoop Configuration object, i.e.&lt;/p&gt;

&lt;p&gt;        String oozieActionConfXml = System.getProperty(&quot;oozie.action.conf.xml&quot;);            &lt;br/&gt;
        if (oozieActionConfXml != null) &lt;/p&gt;
{
            conf.addResource(new Path(&quot;file:///&quot;, oozieActionConfXml));
        }

&lt;p&gt;As you can see, there&apos;s no adverse affects if not running in an Oozie workflow. This code could be added to AbstractJob with minimal impact and much benefit to those of us using Mahout in our Oozie workflows.&lt;/p&gt;</description>
                <environment>&lt;p&gt;oozie workflow&lt;/p&gt;</environment>
        <key id="12528020">MAHOUT-848</key>
            <summary>M/R job launching code should add Oozie&apos;s action.xml as a configuration resource of the Hadoop Configuration object</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="thelabdude">Timothy Potter</reporter>
                        <labels>
                            <label>oozie</label>
                    </labels>
                <created>Thu, 20 Oct 2011 21:30:50 +0100</created>
                <updated>Tue, 19 Jun 2012 14:59:06 +0100</updated>
                            <resolved>Thu, 31 May 2012 17:04:24 +0100</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13281354" author="thelabdude" created="Wed, 23 May 2012 03:02:24 +0100"  >&lt;p&gt;Needed to override Configured&apos;s setConf method to install the Oozie action configuration resource on the provided Configuration object. This isn&apos;t ideal but is safe since Hadoop&apos;s ToolRunner calls setConf before it calls run.&lt;/p&gt;</comment>
                            <comment id="13281355" author="thelabdude" created="Wed, 23 May 2012 03:03:07 +0100"  >&lt;p&gt;Upload of .patch file with simple fix for this issue.&lt;/p&gt;</comment>
                            <comment id="13286471" author="gsingers" created="Thu, 31 May 2012 11:52:43 +0100"  >&lt;p&gt;I&apos;ll apply this today.&lt;/p&gt;</comment>
                            <comment id="13286683" author="gsingers" created="Thu, 31 May 2012 17:04:24 +0100"  >&lt;p&gt;Applied.  Thanks, Tim&lt;/p&gt;</comment>
                            <comment id="13286776" author="hudson" created="Thu, 31 May 2012 18:49:31 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #1507 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1507/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1507/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-848&quot; title=&quot;M/R job launching code should add Oozie&amp;#39;s action.xml as a configuration resource of the Hadoop Configuration object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-848&quot;&gt;&lt;del&gt;MAHOUT-848&lt;/del&gt;&lt;/a&gt;: add in oozie config option (Revision 1344791)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
gsingers : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1344791&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1344791&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/AbstractJob.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13293908" author="thelabdude" created="Tue, 12 Jun 2012 21:51:55 +0100"  >&lt;p&gt;Thanks for applying this Grant. Just now getting a chance to test this ...&lt;/p&gt;

&lt;p&gt;Unfortunately, it looks as though setConf(null) is a valid state during Job setup so another patch is needed to check for null before calling conf.addResource!&lt;/p&gt;

&lt;p&gt;Will post a patch shortly (I have a bunch of changes to my working dir so need to clean it up before building a patch).&lt;/p&gt;</comment>
                            <comment id="13295373" author="thelabdude" created="Fri, 15 Jun 2012 00:17:36 +0100"  >&lt;p&gt;A simple one-liner patch to check for a null Configuration object passed to setConf.&lt;/p&gt;</comment>
                            <comment id="13396379" author="thelabdude" created="Tue, 19 Jun 2012 00:47:53 +0100"  >&lt;p&gt;Already marked as fix but needs another patch - I don&apos;t see an option for re-opening this ticket. Do I create a new ticket?&lt;/p&gt;</comment>
                            <comment id="13396672" author="gsingers" created="Tue, 19 Jun 2012 11:54:05 +0100"  >&lt;p&gt;Yeah, please open another&lt;/p&gt;</comment>
                            <comment id="13396776" author="thelabdude" created="Tue, 19 Jun 2012 14:59:05 +0100"  >&lt;p&gt;Ok, patch supplied on &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1033&quot; title=&quot;Solution for MAHOUT-848 doesn&amp;#39;t check for the Configuration object being null before using it.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1033&quot;&gt;&lt;del&gt;MAHOUT-1033&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532144" name="MAHOUT-848.patch" size="831" author="thelabdude" created="Fri, 15 Jun 2012 00:17:36 +0100"/>
                            <attachment id="12528687" name="MAHOUT-848.patch" size="1147" author="thelabdude" created="Wed, 23 May 2012 03:03:07 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 31 May 2012 10:52:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy2lr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>