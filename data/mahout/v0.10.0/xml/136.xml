<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:18:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-136/MAHOUT-136.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-136] Change Canopy MR Implementation to use Vector Writable</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-136</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Internal serialization of Canopy currently uses asFormatString rather than just making the Canopy writable. This is storage inefficient.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428422">MAHOUT-136</key>
            <summary>Change Canopy MR Implementation to use Vector Writable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeastman">Jeff Eastman</assignee>
                                    <reporter username="jeastman">Jeff Eastman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2009 22:44:13 +0100</created>
                <updated>Wed, 18 Nov 2009 14:05:55 +0000</updated>
                            <resolved>Tue, 29 Sep 2009 11:39:45 +0100</resolved>
                                    <version>0.1</version>
                                    <fixVersion>0.2</fixVersion>
                                    <component>Clustering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12722105" author="jeastman" created="Sat, 20 Jun 2009 01:52:25 +0100"  >&lt;p&gt;r786738 committed the following changes.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modified CanopyMapper and CanopyReducer to produce and consume Canopy centroids as Writable values vs. previous formatStrings&lt;/li&gt;
	&lt;li&gt;Modified CanopyMapper to specify SparseVector output from mapper&lt;/li&gt;
	&lt;li&gt;Fixed null name hash() bug in SparseVector&lt;/li&gt;
	&lt;li&gt;Modified Canopy.emitPointToExistingCanopies to emit only canopy id and not full serialized canopy.&lt;/li&gt;
	&lt;li&gt;This eliminates the need for the OutputDriver and OutputMapper in synthetic control example so they are deleted.&lt;/li&gt;
	&lt;li&gt;Updated unit tests; all tests run&lt;/li&gt;
	&lt;li&gt;Synthetic control example runs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;NOTE: When passing Vectors between Map and Reduce steps using Writable format, Hadoop uses the &lt;b&gt;same instance&lt;/b&gt; to do all of the deserializations. I had to change the Canopy constructors to clone() their center arguments so that the same instance would not be reused for multiple canopies.&lt;/p&gt;</comment>
                            <comment id="12722233" author="gsingers" created="Sat, 20 Jun 2009 19:03:54 +0100"  >&lt;p&gt;Should Canopy be writable?  If so, it&apos;s not clear to me how ClusterMapper should work though.  I have a patch that takes care of it for the CanopyMapper/Reducer, but am stuck on the ClusterMapper for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-137&quot; title=&quot;Convert Clustering Algs to use Vector Writable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-137&quot;&gt;&lt;del&gt;MAHOUT-137&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12722244" author="jeastman" created="Sat, 20 Jun 2009 20:02:24 +0100"  >&lt;p&gt;I don&apos;t think so for Canopy, since canopies are never sent between map and reduce steps. The above commit sends only the centroid vector as Writable from the mapper. For reducer output, only the identifier is used for the key and the centroid for the value. The ClusterMapper no longer outputs the entire Canopy definition with each point; only the identifier. This is similar to what Kmeans does. &lt;/p&gt;

&lt;p&gt;Kmeans clusters, OTOH, do need to be serialized in order to save their state between iterations. The centroids and identifiers need to be saved together so making them writable is an option. I was going to create a new issue to do that but MANOUT-137 does that. It is still not clear to me whether or not to use Writable or Json format for these inter-iteration results, since the number of clusters will typically be small and readability probably trumps density.&lt;/p&gt;</comment>
                            <comment id="12722275" author="gsingers" created="Sun, 21 Jun 2009 00:22:57 +0100"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think so for Canopy, since canopies are never sent between map and reduce steps. The above commit sends only the centroid vector as Writable from the mapper. For reducer output, only the identifier is used for the key and the centroid for the value. The ClusterMapper no longer outputs the entire Canopy definition with each point; only the identifier. This is similar to what Kmeans does. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That seems fine, Canopy as a Writable can do the same thing.  The thing I don&apos;t get is what is going on between the CanopyReducer and the ClusterMapper.  As I read the code, it seems like the CanopyDriver is going to output Canopy as a formatted string (canopy id, centroid) but then it seems like the ClusterMapper is expecting a Vector, but I&apos;m not sure I understand how the configure stuff plays in.  If I upload what I have, can you take a look?&lt;/p&gt;</comment>
                            <comment id="12722277" author="gsingers" created="Sun, 21 Jun 2009 00:53:13 +0100"  >&lt;p&gt;I think I see what&apos;s going on now.&lt;/p&gt;</comment>
                            <comment id="12760462" author="jeastman" created="Tue, 29 Sep 2009 02:04:54 +0100"  >&lt;p&gt;I think this issue has been completed and should be closed, since Canopy does now use Vector Writable for communicating the centroid vectors between the mapper and reducer. What it does not do, is transmit Writable Canopies between the map and reduce steps as kmeans does. There is an implementation of Writable methods for Canopy (IMHO it is not correct since it sets the point total and count to nonzero values) but the mapper and reducer do not use them so this is moot. Converting the mapper and reducer to communicate writable canopies can be done but there are a lot of annoying little complications in the driver which currently goes to some lengths to use the same vector form (dense, sparse) as the input data.&lt;/p&gt;

&lt;p&gt;It works as implemented.&lt;/p&gt;

&lt;p&gt;Unless somebody strongly disagrees I&apos;m going to close this issue as resolved, since the real intent was to replace the text representation of the centroid vector with the writable version and that has been done for some time now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12428472">MAHOUT-137</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Jun 2009 18:03:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy6zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23282</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>