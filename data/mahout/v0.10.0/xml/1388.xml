<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:19:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1388/MAHOUT-1388.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1388] Add command line support and logging for MLP</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1388</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;The user should have the ability to run the Perceptron from the command line.&lt;/p&gt;

&lt;p&gt;There are two programs to execute MLP, the training and labeling. The first one takes the data as input and outputs the model, the second one takes the model and unlabeled data as input and outputs the results.&lt;/p&gt;

&lt;p&gt;The parameters for training are as follows:&lt;br/&gt;
------------------------------------------------&lt;br/&gt;
--input -i (input data)&lt;br/&gt;
--skipHeader -sk // whether to skip the first row, this parameter is optional&lt;br/&gt;
--labels -labels // the labels of the instances, separated by whitespace. Take the iris dataset for example, the labels are &apos;setosa versicolor virginica&apos;.&lt;br/&gt;
--model -mo  // in training mode, this is the location to store the model (if the specified location has an existing model, it will update the model through incremental learning), in labeling mode, this is the location to store the result&lt;br/&gt;
--update -u // whether to incremental update the model, if this parameter is not given, train the model from scratch&lt;br/&gt;
--output -o           // this is only useful in labeling mode&lt;br/&gt;
--layersize -ls (no. of units per hidden layer) // use whitespace separated number to indicate the number of neurons in each layer (including input layer and output layer), e.g. &apos;5 3 2&apos;.&lt;br/&gt;
--squashingFunction -sf // currently only supports Sigmoid&lt;br/&gt;
--momentum -m &lt;br/&gt;
--learningrate -l&lt;br/&gt;
--regularizationweight -r&lt;br/&gt;
--costfunction -cf   // the type of cost function,&lt;br/&gt;
------------------------------------------------&lt;br/&gt;
For example, train a 3-layer (including input, hidden, and output) MLP with 0.1 learning rate, 0.1 momentum rate, and 0.01 regularization weight, the parameter would be:&lt;/p&gt;

&lt;p&gt;mlp -i /tmp/training-data.csv -labels setosa versicolor virginica -o /tmp/model.model -ls 5,3,1 -l 0.1 -m 0.1 -r 0.01&lt;/p&gt;

&lt;p&gt;This command would read the training data from /tmp/training-data.csv and write the trained model to /tmp/model.model.&lt;/p&gt;


&lt;p&gt;The parameters for labeling is as follows:&lt;br/&gt;
-------------------------------------------------------------&lt;br/&gt;
--input -i // input file path&lt;br/&gt;
--columnRange -cr // the range of column used for feature, start from 0 and separated by whitespace, e.g. 0 5&lt;br/&gt;
--format -f // the format of input file, currently only supports csv&lt;br/&gt;
--model -mo // the file path of the model&lt;br/&gt;
--output -o // the output path for the results&lt;br/&gt;
-------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;If a user need to use an existing model, it will use the following command:&lt;br/&gt;
mlp -i /tmp/unlabel-data.csv -m /tmp/model.model -o /tmp/label-result&lt;/p&gt;

&lt;p&gt;Moreover, we should be providing default values if the user does not specify any. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12686251">MAHOUT-1388</key>
            <summary>Add command line support and logging for MLP</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smarthi">Suneel Marthi</assignee>
                                    <reporter username="yxjiang">Yexi Jiang</reporter>
                        <labels>
                            <label>mlp</label>
                            <label>sgd</label>
                    </labels>
                <created>Tue, 24 Dec 2013 03:52:08 +0000</created>
                <updated>Mon, 13 Apr 2015 11:20:13 +0100</updated>
                            <resolved>Sun, 18 May 2014 22:04:28 +0100</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Classification</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13856592" author="smarthi" created="Wed, 25 Dec 2013 13:05:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yxjiang&quot; class=&quot;user-hover&quot; rel=&quot;yxjiang&quot;&gt;Yexi Jiang&lt;/a&gt; Also please provide adequate Logging statements in ur code. Would u be only supporting CSV as input format? &lt;/p&gt;</comment>
                            <comment id="13856671" author="yxjiang" created="Wed, 25 Dec 2013 22:19:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smarthi&quot; class=&quot;user-hover&quot; rel=&quot;smarthi&quot;&gt;Suneel Marthi&lt;/a&gt; OK, I&apos;ll add it. Currently, it only supports CSV.&lt;/p&gt;
</comment>
                            <comment id="13857945" author="yxjiang" created="Sat, 28 Dec 2013 04:55:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smarthi&quot; class=&quot;user-hover&quot; rel=&quot;smarthi&quot;&gt;Suneel Marthi&lt;/a&gt; I have finished the command line support for MLP. Do I need to paste it on the review board?&lt;/p&gt;</comment>
                            <comment id="13858426" author="yxjiang" created="Sun, 29 Dec 2013 20:03:13 +0000"  >&lt;p&gt;This patch should be applied after apply patch in Mahout-1265.&lt;/p&gt;</comment>
                            <comment id="13858427" author="yxjiang" created="Sun, 29 Dec 2013 20:03:22 +0000"  >&lt;p&gt;This patch should be applied after apply patch in Mahout-1265.&lt;/p&gt;</comment>
                            <comment id="13864384" author="smarthi" created="Tue, 7 Jan 2014 16:55:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yxjiang&quot; class=&quot;user-hover&quot; rel=&quot;yxjiang&quot;&gt;Yexi Jiang&lt;/a&gt; Please post this to reviewboard&lt;/p&gt;</comment>
                            <comment id="13864531" author="yxjiang" created="Tue, 7 Jan 2014 18:47:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smarthi&quot; class=&quot;user-hover&quot; rel=&quot;smarthi&quot;&gt;Suneel Marthi&lt;/a&gt; When I submit the patch to the review board, I got the following error:&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------&lt;br/&gt;
The file &apos;https://svn.apache.org/repos/asf/mahout/trunk/core/src/main/java/org/apache/mahout/classifier/mlp/NeuralNetwork.java&apos; (r1556303) could not be found in the repository&lt;br/&gt;
----------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;However, I checked this url, the file exists. I&apos;m not sure what causes this error.&lt;/p&gt;</comment>
                            <comment id="13864640" author="smarthi" created="Tue, 7 Jan 2014 20:20:06 +0000"  >&lt;p&gt;What did u use for Base directory? If u were using &apos;http://...&apos;  try using &apos;https://...&apos;.  That could be the issue (had seen this issue with other patches too that were generated from svn codebase).&lt;/p&gt;</comment>
                            <comment id="13864681" author="yxjiang" created="Tue, 7 Jan 2014 20:58:20 +0000"  >&lt;p&gt;The base I used is &lt;br/&gt;
---------------------------------&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/mahout/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/mahout/trunk&lt;/a&gt;&lt;br/&gt;
---------------------------------&lt;/p&gt;</comment>
                            <comment id="13864687" author="smarthi" created="Tue, 7 Jan 2014 21:01:18 +0000"  >&lt;p&gt;Use &apos;http://&apos; then. Since your local svn repository is from the &apos;http://&apos; branch.&lt;/p&gt;</comment>
                            <comment id="13864963" author="smarthi" created="Wed, 8 Jan 2014 01:31:00 +0000"  >&lt;p&gt;Updated the original patch to fix formatting issues and first cursory pass through the code.&lt;/p&gt;</comment>
                            <comment id="13889097" author="yxjiang" created="Sun, 2 Feb 2014 22:48:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smarthi&quot; class=&quot;user-hover&quot; rel=&quot;smarthi&quot;&gt;Suneel Marthi&lt;/a&gt; I have revised the code, could you please have a look at the code at the review board? &lt;a href=&quot;https://reviews.apache.org/r/16700/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16700/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13974102" author="ssc" created="Fri, 18 Apr 2014 15:11:23 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yxjiang&quot; class=&quot;user-hover&quot; rel=&quot;yxjiang&quot;&gt;Yexi Jiang&lt;/a&gt; I reviewed your code. The general ideas are fine, but it needs to be reworked quite a bit. You should add your classes to the core module, not the examples module and you should not use static variables inside your classes.&lt;/p&gt;

&lt;p&gt;If you fix these issues, we&apos;ll be happy to incorporate your code.&lt;/p&gt;
</comment>
                            <comment id="13974113" author="yxjiang" created="Fri, 18 Apr 2014 15:26:58 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ssc&quot; class=&quot;user-hover&quot; rel=&quot;ssc&quot;&gt;Sebastian Schelter&lt;/a&gt; Thanks, I will work on it.&lt;/p&gt;</comment>
                            <comment id="13974118" author="smarthi" created="Fri, 18 Apr 2014 15:35:32 +0100"  >&lt;p&gt;Since the MLP is presently not functional (and is unused), it makes sense porting this to Scala DSL instead of adding patches to what is existing (which needs to be refactored anyways to decouple from using Hadoop methods).  agree?&lt;/p&gt;</comment>
                            <comment id="13974127" author="yxjiang" created="Fri, 18 Apr 2014 15:41:24 +0100"  >&lt;p&gt;Do you mean that the MLP needs to be reimplemented in the way to work with spark? The current implementation of MLP is not a hadoop version.&lt;/p&gt;</comment>
                            <comment id="13974135" author="ssc" created="Fri, 18 Apr 2014 15:43:28 +0100"  >&lt;p&gt;I think as it is not MapReduce based, its fine to work on it.&lt;/p&gt;</comment>
                            <comment id="13974718" author="yxjiang" created="Sat, 19 Apr 2014 05:18:34 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ssc&quot; class=&quot;user-hover&quot; rel=&quot;ssc&quot;&gt;Sebastian Schelter&lt;/a&gt; For the comment &apos;duplicate code, this has already been implemented in the other class&apos;, could you please also point out which class has implemented the method that extract the string from the command line? I checked o.a.m.commons package, but didn&apos;t find the method I need.&lt;/p&gt;</comment>
                            <comment id="13975002" author="yxjiang" created="Sun, 20 Apr 2014 01:45:34 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smarthi&quot; class=&quot;user-hover&quot; rel=&quot;smarthi&quot;&gt;Suneel Marthi&lt;/a&gt; Could you please re-assign this issue to me?&lt;/p&gt;</comment>
                            <comment id="13986415" author="ssc" created="Thu, 1 May 2014 08:19:51 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yxjiang&quot; class=&quot;user-hover&quot; rel=&quot;yxjiang&quot;&gt;Yexi Jiang&lt;/a&gt; issues can only be assigned to committers.&lt;/p&gt;</comment>
                            <comment id="14001021" author="ssc" created="Sun, 18 May 2014 07:26:38 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yxjiang&quot; class=&quot;user-hover&quot; rel=&quot;yxjiang&quot;&gt;Yexi Jiang&lt;/a&gt; what&apos;s the status here?&lt;/p&gt;</comment>
                            <comment id="14001158" author="yxjiang" created="Sun, 18 May 2014 19:45:48 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ssc&quot; class=&quot;user-hover&quot; rel=&quot;ssc&quot;&gt;Sebastian Schelter&lt;/a&gt; The code is available at &lt;a href=&quot;https://reviews.apache.org/r/16700/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16700/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14001207" author="ssc" created="Sun, 18 May 2014 22:04:28 +0100"  >&lt;p&gt;Committed your patch with cosmetic changes, thank you. Could you open another JIRA for adding documentation on how to use MLP from the commandline?&lt;/p&gt;</comment>
                            <comment id="14001294" author="yxjiang" created="Mon, 19 May 2014 01:42:18 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ssc&quot; class=&quot;user-hover&quot; rel=&quot;ssc&quot;&gt;Sebastian Schelter&lt;/a&gt; Sure, where should I add the documentation to?&lt;/p&gt;</comment>
                            <comment id="14003333" author="hudson" created="Tue, 20 May 2014 15:13:29 +0100"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #2610 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2610/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2610/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1388&quot; title=&quot;Add command line support and logging for MLP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1388&quot;&gt;&lt;del&gt;MAHOUT-1388&lt;/del&gt;&lt;/a&gt; Add command line support and logging for MLP (ssc: rev 1595684)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/CHANGELOG&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/main/java/org/apache/mahout/classifier/mlp/MultilayerPerceptron.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/main/java/org/apache/mahout/classifier/mlp/NeuralNetwork.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/main/java/org/apache/mahout/classifier/mlp/RunMultilayerPerceptron.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/main/java/org/apache/mahout/classifier/mlp/TrainMultilayerPerceptron.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/test/java/org/apache/mahout/classifier/mlp/Datasets.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/test/java/org/apache/mahout/classifier/mlp/RunMultilayerPerceptronTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/test/java/org/apache/mahout/classifier/mlp/TestMultilayerPerceptron.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/test/java/org/apache/mahout/classifier/mlp/TestNeuralNetwork.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/mrlegacy/src/test/java/org/apache/mahout/classifier/mlp/TrainMultilayerPerceptronTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14060119" author="fschueler" created="Sun, 13 Jul 2014 15:29:54 +0100"  >&lt;p&gt;We played around with the existing implementation and came across some issues that might need some clarification/fixes. We could try to fix some of the issues but would be glad to get some feedback first, especially given that the mlp resides in the mrlegacy package and might not be used any more as soon as an implementation in the spark DSL exists.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;First of all, it seems like the MLP CLI does not perform iterations of any kind during training.  This is especially unpleasant in the case of a small dataset such as the iris data-set. In the corresponding unit-test, 2000 iterations are performed on the input data whereas the command line version only forwards the input once. This leads to wrong output on the validation data.&lt;br/&gt;
We think there should be a solution to this that either consists of an iteration parameter or the possibility to define a train/validation split and use the technique of early stopping where iteration stops if no significant improvement on the validation-set is observed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In the RunMultilayerperceptron case, the parameter -cr (column range) can not be set. Usually, the classified data doesn&apos;t have labels, but we think it should still be possible to select the columns of an input file for validation, especially if we split the same dataset into training and validation parts, we don&apos;t want to remove all the labels by hand. The fix for this is fairly easy since the functionality is already implemented and just has to be added to the argument-parser (we will provide a patch for this).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;We are not sure if the CLI-MLP can be used for regression since all the labels have to be provided as arguments.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;small typo in momentumweight: &quot;momemtumweight&quot;, we can provide the patch for this as well.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14060154" author="smarthi" created="Sun, 13 Jul 2014 17:10:42 +0100"  >&lt;p&gt;Felix, the MLP code can definitely do with some major rewrites. If you have the time to port this over to the new Scala DSL, please go ahead and do it.  This MLP implementation was added for the first time in 0.9 release and is still experimental, so definitely go ahead and submit a patch for this despite it being mrlegacy..&lt;/p&gt;</comment>
                            <comment id="14060568" author="fschueler" created="Mon, 14 Jul 2014 12:49:10 +0100"  >&lt;p&gt;We need this patch for the mlp example to work (so that headers in input files can be skipped and columns can be selected from the input)&lt;/p&gt;

&lt;p&gt;The documentation with example will be added to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1551&quot; title=&quot;Add document to describe how to use mlp with command line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1551&quot;&gt;&lt;del&gt;MAHOUT-1551&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12655525" name="MAHOUT-1388-optionParser.patch" size="1541" author="fschueler" created="Mon, 14 Jul 2014 12:49:10 +0100"/>
                            <attachment id="12621901" name="Mahout-1388.patch" size="30889" author="smarthi" created="Wed, 8 Jan 2014 01:31:00 +0000"/>
                            <attachment id="12620779" name="Mahout-1388.patch" size="31477" author="yxjiang" created="Sun, 29 Dec 2013 20:03:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Dec 2013 13:05:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzkspj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>