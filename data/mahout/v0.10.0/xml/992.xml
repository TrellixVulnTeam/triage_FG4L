<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:25:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-992/MAHOUT-992.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-992] Audit DistributedCache use to support EMR</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-992</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Apparently some of our DistributedCache use is not EMR-safe.  It would be great if someone could audit our uses of DC, and fix up this problem where it exists.&lt;/p&gt;

&lt;p&gt;For an example of problematic usage (and the fix), see &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-980&quot; title=&quot;Patch to make PFPGrowth run on Amazon MapReduce (also shows possible pattern to make other algorithms work in Amazon MapReduce)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-980&quot;&gt;&lt;del&gt;MAHOUT-980&lt;/del&gt;&lt;/a&gt;.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12546140">MAHOUT-992</key>
            <summary>Audit DistributedCache use to support EMR</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="tcp">tom pierce</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Mon, 12 Mar 2012 19:27:40 +0000</created>
                <updated>Mon, 3 Feb 2014 08:06:07 +0000</updated>
                            <resolved>Sun, 9 Jun 2013 21:52:06 +0100</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13227825" author="rionda" created="Mon, 12 Mar 2012 19:52:03 +0000"  >&lt;p&gt;I can probably look at this soon, or in any case I can review patches, as I submitted the one mentioned in the description (&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-980&quot; title=&quot;Patch to make PFPGrowth run on Amazon MapReduce (also shows possible pattern to make other algorithms work in Amazon MapReduce)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-980&quot;&gt;&lt;del&gt;MAHOUT-980&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13672570" author="robinanil" created="Sun, 2 Jun 2013 16:17:47 +0100"  >&lt;p&gt;Tom, Its all yours&lt;/p&gt;</comment>
                            <comment id="13672572" author="robinanil" created="Sun, 2 Jun 2013 16:19:17 +0100"  >&lt;p&gt;Didn&apos;t notice Matteo&apos;s update. It&apos;s yours, is it possible to clean it up for this release...? &lt;/p&gt;</comment>
                            <comment id="13677185" author="gsingers" created="Thu, 6 Jun 2013 17:16:46 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ssc&quot; class=&quot;user-hover&quot; rel=&quot;ssc&quot;&gt;Sebastian Schelter&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robin.anil%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;robin.anil@gmail.com&quot;&gt;Robin Anil&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;I see this in several places:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Path[] files = DistributedCache.getLocalCacheFiles(conf);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (files == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot read Frequency list from Distributed Cache&quot;&lt;/span&gt;);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (files.length != 1) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot read Frequency list from Distributed Cache (&quot;&lt;/span&gt; + files.length + &apos;)&apos;);
    }
    FileSystem fs = FileSystem.getLocal(conf);
    Path fListLocalPath = fs.makeQualified(files[0]);
    &lt;span class=&quot;code-comment&quot;&gt;// Fallback &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we are running locally.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!fs.exists(fListLocalPath)) {
      URI[] filesURIs = DistributedCache.getCacheFiles(conf);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (filesURIs == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot read Frequency list from Distributed Cache&quot;&lt;/span&gt;);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (filesURIs.length != 1) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot read Frequency list from Distributed Cache (&quot;&lt;/span&gt; + files.length + &apos;)&apos;);
      }
      fListLocalPath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(filesURIs[0].getPath());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t really follow the &quot;Fallback if running locally&quot; comment.  The first part of the code is looking in the local file system.  Doesn&apos;t (or shouldn&apos;t?) Hadoop handle this seamlessly?  Seems odd to me that we would get something that is in the local file system and then it not be there.&lt;/p&gt;</comment>
                            <comment id="13677192" author="ssc" created="Thu, 6 Jun 2013 17:22:27 +0100"  >&lt;p&gt;To my knowledge it doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="13677216" author="gsingers" created="Thu, 6 Jun 2013 17:43:30 +0100"  >&lt;p&gt;Just venting, but could the DistributedCache methods be any more poorly named?  For getting, &quot;getLocalCacheFiles&quot; is the &quot;user&quot; API and &quot;getCacheFiles&quot; is the internal API.  For setting, there is &quot;setLocalFiles&quot; which is internal and &quot;setCacheFiles&quot; which is user facing.&lt;/p&gt;</comment>
                            <comment id="13679154" author="gsingers" created="Sun, 9 Jun 2013 21:52:06 +0100"  >&lt;p&gt;Went through and audited all uses and fixed handling of cache values using makeQualified, etc.&lt;/p&gt;</comment>
                            <comment id="13679155" author="gsingers" created="Sun, 9 Jun 2013 21:52:38 +0100"  >&lt;p&gt;I&apos;m marking this as resolved, but it could use a review of my commits to make sure I didn&apos;t miss something.&lt;/p&gt;</comment>
                            <comment id="13679161" author="hudson" created="Sun, 9 Jun 2013 22:06:30 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #2067 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2067/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2067/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-992&quot; title=&quot;Audit DistributedCache use to support EMR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-992&quot;&gt;&lt;del&gt;MAHOUT-992&lt;/del&gt;&lt;/a&gt;: more cleanup on DistCache usage (Revision 1491294)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-992&quot; title=&quot;Audit DistributedCache use to support EMR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-992&quot;&gt;&lt;del&gt;MAHOUT-992&lt;/del&gt;&lt;/a&gt;: qualify the path to make sure we get it from the local file system properly (Revision 1491293)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
gsingers : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/classifier/df/mapreduce/Classifier.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/VectorCache.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/fpm/pfpgrowth/PFPGrowth.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/TimesSquaredJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/stochasticsvd/BtJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/pruner/WordsPrunerReducer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/tfidf/TFIDFPartialVectorReducer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/examples/src/main/java/org/apache/mahout/cf/taste/example/email/EmailUtility.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;gsingers : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/DictionaryVectorizer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/term/TFPartialVectorReducer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13679198" author="hudson" created="Sun, 9 Jun 2013 23:12:55 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #2068 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2068/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2068/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-992&quot; title=&quot;Audit DistributedCache use to support EMR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-992&quot;&gt;&lt;del&gt;MAHOUT-992&lt;/del&gt;&lt;/a&gt; Audit DistributedCache use to support EMR (Revision 1491301)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ssc : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/cf/taste/hadoop/als/ALS.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/classifier/df/mapreduce/Builder.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/classifier/df/mapreduce/Classifier.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/classifier/naivebayes/BayesUtils.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/classifier/naivebayes/test/BayesTestMapper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/VectorCache.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/HadoopUtil.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/fpm/pfpgrowth/PFPGrowth.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/TimesSquaredJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/stochasticsvd/ABtDenseOutJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/stochasticsvd/ABtJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/stochasticsvd/BtJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/pruner/WordsPrunerReducer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/term/TFPartialVectorReducer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/vectorizer/tfidf/TFIDFPartialVectorReducer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/classifier/df/data/Utils.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/streaming/mapreduce/StreamingKMeansTestMR.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/examples/src/main/java/org/apache/mahout/cf/taste/example/email/EmailUtility.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/SequenceFilesFromLuceneStorageDriverTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12651920">MAHOUT-1247</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Mar 2012 19:52:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231298</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy1q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>