<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:17:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1197/MAHOUT-1197.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1197] AbstractVector#cross is only appropriately efficient for dense vectors</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1197</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Nobody overrides this implementation:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;code&amp;#93;&lt;/span&gt;&lt;br/&gt;
  @Override&lt;br/&gt;
  public Matrix cross(Vector other) {&lt;br/&gt;
    Matrix result = matrixLike(size, other.size());&lt;br/&gt;
    for (int row = 0; row &amp;lt; size; row++) &lt;/p&gt;
{
      result.assignRow(row, other.times(getQuick(row)));
    }
&lt;p&gt;    return result;&lt;br/&gt;
  }&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;code&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I think you can imagine what kind of performance this has on sparse vectors (k non-zeroes) with high cardinality (N) - scales as O(N^2) instead of O(k^2).&lt;/p&gt;

&lt;p&gt;I think the right approach is to &lt;b&gt;not&lt;/b&gt; implement this in AbstractVector at all, and force concrete implementations to properly implement it performantly.&lt;/p&gt;

&lt;p&gt;Alternatively, killing this method entirely might be appropriate.  If anyone was using it (and uses sparse vectors), they&apos;d have complained about this by now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644457">MAHOUT-1197</key>
            <summary>AbstractVector#cross is only appropriately efficient for dense vectors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jake.mannix">Jake Mannix</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Apr 2013 23:05:33 +0100</created>
                <updated>Mon, 3 Feb 2014 08:06:15 +0000</updated>
                            <resolved>Fri, 26 Apr 2013 08:48:29 +0100</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>Math</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13641163" author="tdunning" created="Thu, 25 Apr 2013 00:31:08 +0100"  >&lt;p&gt;Actually, I would imagine that this would work fine.  Vector.times should be a sparse op and the assign should be just as sparse (since there is nothing there to begin with.  &lt;/p&gt;

&lt;p&gt;As long as matrixLike returns the right type, this code should be pretty much fine aside from cons&apos;ing up a too many copies of the data.  That will only impose a constant cost.&lt;/p&gt;

&lt;p&gt;Is there something I am not seeing?&lt;/p&gt;</comment>
                            <comment id="13641313" author="jake.mannix" created="Thu, 25 Apr 2013 03:23:17 +0100"  >&lt;p&gt;The big issue is the loop over row from 0 to size.&lt;/p&gt;

&lt;p&gt;Yes, a bandaid fix would be to instead iterateNonZero, picking out the indices as we go (this is what I&apos;ve done in my work code which ran into 15ms individual v.cross(w) timings).&lt;/p&gt;</comment>
                            <comment id="13641325" author="tdunning" created="Thu, 25 Apr 2013 03:44:17 +0100"  >&lt;p&gt;Iterating over non-zero should be about as good as it gets.  I don&apos;t think it is a bandaid.  I think it is a fix.&lt;/p&gt;</comment>
                            <comment id="13641384" author="jake.mannix" created="Thu, 25 Apr 2013 05:00:47 +0100"  >&lt;p&gt;simple fix which should work for both dense and sparse subclasses.&lt;/p&gt;</comment>
                            <comment id="13643445" author="hudson" created="Sat, 27 Apr 2013 02:23:04 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #1977 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1977/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1977/&lt;/a&gt;)&lt;br/&gt;
    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1197&quot; title=&quot;AbstractVector#cross is only appropriately efficient for dense vectors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1197&quot;&gt;&lt;del&gt;MAHOUT-1197&lt;/del&gt;&lt;/a&gt; (Revision 1476306)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jmannix : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/math/src/main/java/org/apache/mahout/math/AbstractVector.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12580467" name="MAHOUT-1197.diff" size="703" author="jake.mannix" created="Thu, 25 Apr 2013 05:00:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Apr 2013 23:31:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324824</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzdw3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>