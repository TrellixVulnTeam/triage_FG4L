<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:23:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-731/MAHOUT-731.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-731] Add SQL92JDBCDataModel</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-731</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;I&apos;m thinking to work on a patch that adds SQL92JDBCDataModel based on the sample code of PostgreSQLJDBCDataModel. This class will only use standard SQL92. It won&apos;t be high performance, but would have maximum compatibility to other popular DBMS, such as Oracle, SQLlite, etc. This is quite important to Drupal/Mahout integration.&lt;/p&gt;

&lt;p&gt;Before I actually write the code, is there any suggestions or concerns? Thanks!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509915">MAHOUT-731</key>
            <summary>Add SQL92JDBCDataModel</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="danithaca">Daniel Xiaodan Zhou</reporter>
                        <labels>
                            <label>drupal_integration</label>
                    </labels>
                <created>Sat, 11 Jun 2011 15:18:12 +0100</created>
                <updated>Thu, 9 Feb 2012 14:00:54 +0000</updated>
                            <resolved>Thu, 16 Jun 2011 10:47:06 +0100</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13047916" author="srowen" created="Sat, 11 Jun 2011 15:43:50 +0100"  >&lt;p&gt;Seems fine to me. Just follow the pattern of the other implementations.&lt;/p&gt;</comment>
                            <comment id="13048869" author="danithaca" created="Tue, 14 Jun 2011 00:18:17 +0100"  >&lt;p&gt;patch attached. copied most of the code from PostgreSQLJDBCDataModel&lt;/p&gt;</comment>
                            <comment id="13049006" author="srowen" created="Tue, 14 Jun 2011 07:32:13 +0100"  >&lt;p&gt;Yes it&apos;s almost completely identical to the Postgres version &amp;#8211; this doesn&apos;t seem right. Either we can just relax the Postgres implementation to be SQL92 compliant, if it doesn&apos;t hurt it much, or this needs to be refactored to encapsulate their commonality. I am not comfortable with that much cloning.&lt;/p&gt;</comment>
                            <comment id="13049130" author="danithaca" created="Tue, 14 Jun 2011 12:22:06 +0100"  >&lt;p&gt;I think so too. The only different between SQL92 implementation and PostgreSQL is in setPreference(): SQL92 uses SELECT to test whether a record exists, and use INSERT or UPDATE accordingly. PostgreSQL simply INSERT first, in case of DUPLICATE KEY catches the exception (with a special exception ID) and UPDATE. Arguably this is a little faster than SQL92. &lt;/p&gt;

&lt;p&gt;My view is to have SQL92 as base class, and PostgreSQL as subclass that only overrides setPreference(). In fact, the PostgreSQL implementation is also quite identical to MySQL implementation too. Further refactoring is to pull up the set of SQL statements as a member method getDefaultSQL() into AbstractJDBCDataModel. This removes duplicate code in MySQL/Postgre/SQL92 too.&lt;/p&gt;

&lt;p&gt;If you think this is fine, I can do the refactoring. Do you think it&apos;s OK to check in this patch first for archival purpose? &lt;/p&gt;

&lt;p&gt;Also, I&apos;m not sure whether it&apos;s OK to use &quot;@author&quot; in Javadoc. Not so many classes in Taste have that...&lt;/p&gt;</comment>
                            <comment id="13049314" author="srowen" created="Tue, 14 Jun 2011 19:01:37 +0100"  >&lt;p&gt;I think Apache code style guidelines discourage @author tags on individual files. This policy encourages everyone to view all the code as &quot;theirs&quot;.&lt;/p&gt;

&lt;p&gt;The patch is fine, as it is, and is attached here in JIRA &quot;for the record&quot;. I don&apos;t think it needs to be committed. I assure you I also will make sure this gets in, in the right form.&lt;/p&gt;

&lt;p&gt;And yes if you have time to adjust this patch as we&apos;ve discussed, that would be great. I think you&apos;re welcome to keep it simple: extend the PostgreSQL implementation and override. Don&apos;t bother with MySQL. Even though it kind of makes some sense that the &quot;SQL92&quot; implementation is the base version, in practice a SQL92-compliant database that isn&apos;t one of the two supported RDBMSes is the rare beast.&lt;/p&gt;

&lt;p&gt;That said, if you really wanted to do a big proper clean refactoring to put the SQL92 implementation as the parent, I wouldn&apos;t object if it were nice and tidy. I wouldn&apos;t tell you that you need to do this though.&lt;/p&gt;</comment>
                            <comment id="13049385" author="danithaca" created="Tue, 14 Jun 2011 21:24:40 +0100"  >&lt;p&gt;I will remove @author tags from SQL92 implementation to follow Mahout standard. For the record, I think the Apache coding guideline (&lt;a href=&quot;http://portals.apache.org/development/code-standards.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://portals.apache.org/development/code-standards.html&lt;/a&gt;) suggests using the @author tags.&lt;/p&gt;

&lt;p&gt;I agree not to bother with MySQL. Between Postgres and SQL92, I&apos;d rather have SQL92 as base. Because SQL92 is not likely to change in the future, but Postgres might. Especially if you look at PostgreSQLJDBCDataModel.java line 62:&lt;/p&gt;

&lt;p&gt;private static final String POSTGRESQL_DUPLICATE_KEY_STATE = &quot;23505&quot;; // this is brittle...&lt;/p&gt;

&lt;p&gt;This is probably going to change in the future, and might affect SQL92 if SQL92 derives from Postgres...&lt;/p&gt;

&lt;p&gt;On the other hand, the benefit of duplicated code is that it allows some independence. Besides, the only duplication between SQL92 and Postgres is with the constructors (and the fact that they both override setPreference(), though differently). It has some but not much benefit to have Postgres extends SQL92 or vice versa. So I think the current implementation is fine too.&lt;/p&gt;

&lt;p&gt;The reason I&apos;d like to push SQL92 is that Drupal 7 supports Oracle/MSSQL/SQLite (&lt;a href=&quot;http://drupal.org/requirements&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://drupal.org/requirements&lt;/a&gt;). So I need to make sure Mahout can access those databases too for Drupal/Mahout integration.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="13049671" author="srowen" created="Wed, 15 Jun 2011 09:02:50 +0100"  >&lt;p&gt;(Those are just the conventions of one project, Portals, and I don&apos;t know that they&apos;re standard. Look at what you turn up with &quot;apache @author tag&quot; on Google for instance.)&lt;/p&gt;

&lt;p&gt;Sounds great to have PostgreSQL extend SQL92, please go for it as you see fit.&lt;/p&gt;</comment>
                            <comment id="13050031" author="danithaca" created="Wed, 15 Jun 2011 22:08:01 +0100"  >&lt;p&gt;new patch&lt;/p&gt;</comment>
                            <comment id="13050032" author="danithaca" created="Wed, 15 Jun 2011 22:09:31 +0100"  >&lt;p&gt;new patch attached. thanks for the explanation about @author tags.&lt;br/&gt;
the patch is successfully built in maven, and I have successfully tested it too.&lt;/p&gt;</comment>
                            <comment id="13050318" author="srowen" created="Thu, 16 Jun 2011 10:47:06 +0100"  >&lt;p&gt;OK, submitted with some minor changes&lt;/p&gt;</comment>
                            <comment id="13050420" author="danithaca" created="Thu, 16 Jun 2011 14:51:01 +0100"  >&lt;p&gt;thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12482493" name="SQL92.patch" size="19172" author="danithaca" created="Tue, 14 Jun 2011 00:18:17 +0100"/>
                            <attachment id="12482717" name="SQL92_postgres.patch" size="36203" author="danithaca" created="Wed, 15 Jun 2011 22:08:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 11 Jun 2011 14:43:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9331</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy3br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>