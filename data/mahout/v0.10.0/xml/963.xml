<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:24:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-963/MAHOUT-963.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-963] GenericUserPreferenceArray and GenericItemPreferenceArray use selection sorts</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-963</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Both PreferenceArray implementations use selection sorts with poor performance.  These sorts are invoked during construction of GenericDataModels, causing excessive construction time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540188">MAHOUT-963</key>
            <summary>GenericUserPreferenceArray and GenericItemPreferenceArray use selection sorts</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="fiatmoney">Bryce Nyeggen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jan 2012 20:35:54 +0000</created>
                <updated>Sat, 16 Jun 2012 10:35:22 +0100</updated>
                            <resolved>Tue, 7 Feb 2012 18:46:00 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13195082" author="fiatmoney" created="Fri, 27 Jan 2012 20:45:38 +0000"  >&lt;p&gt;Switches from selection sort to comb sort.&lt;/p&gt;</comment>
                            <comment id="13195539" author="srowen" created="Sat, 28 Jan 2012 14:07:00 +0000"  >&lt;p&gt;My profiling shows that the sorting barely registers as part of the time taken to load a model &amp;#8211; do you have a case where it seems to make a measurable difference?&lt;br/&gt;
These arrays are so small that any sort isn&apos;t a problem that I can see.&lt;/p&gt;

&lt;p&gt;Still, small wins are wins. I tried a little test, sorting a bunch of these arrays, where the size is exponentially distributed. The comb sort gets faster when the average size is about 15 or more, which is realistic for a lot of data sets. I can squeeze a little more out of the implementation to make it a little faster.&lt;/p&gt;

&lt;p&gt;I think it&apos;s a positive change and will put it in after the code freeze.&lt;/p&gt;</comment>
                            <comment id="13195576" author="fiatmoney" created="Sat, 28 Jan 2012 17:13:49 +0000"  >&lt;p&gt;I discovered this on a dataset of several million user-item pairs, with &amp;lt;20 items / user on average, but probably several hundred thousand users associated with the most common items.  In those cases, it brings it from several hours to construct the data model to a couple minutes, with nearly all of the gain associated with faster sorts on the GenericItemPreferenceArrays.  &lt;/p&gt;

&lt;p&gt;As a side note, in the time I spent looking at the code, I didn&apos;t see any calling code that depends on the GenericItemPreferenceArrays being sorted by user - is it currently necessary for them to be sorted at all, or is it just to allow future optimizations?&lt;/p&gt;</comment>
                            <comment id="13195599" author="srowen" created="Sat, 28 Jan 2012 18:49:16 +0000"  >&lt;p&gt;I think something else must be at work... I just don&apos;t see how sorting 20 things can take more time than it does to, say, read them into memory from disk and construct an object around them. It can&apos;t be 90+% of the time. But in any event it is a good change.&lt;/p&gt;

&lt;p&gt;Some similarity implementations depend on them being ordered by user or item, to do an efficient intersection.&lt;/p&gt;</comment>
                            <comment id="13203146" author="hudson" created="Wed, 8 Feb 2012 02:07:44 +0000"  >&lt;p&gt;Integrated in Mahout-Quality #1340 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1340/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1340/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-963&quot; title=&quot;GenericUserPreferenceArray and GenericItemPreferenceArray use selection sorts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-963&quot;&gt;&lt;del&gt;MAHOUT-963&lt;/del&gt;&lt;/a&gt; additional change to &quot;less than&quot; for reversed sort, which is necessary in one test&lt;/p&gt;

&lt;p&gt;srowen : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1241616&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1241616&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/cf/taste/impl/model/GenericItemPreferenceArray.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/cf/taste/impl/model/GenericUserPreferenceArray.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512228" name="MAHOUT-963.diff" size="3742" author="fiatmoney" created="Fri, 27 Jan 2012 20:45:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Jan 2012 14:07:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy1wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>