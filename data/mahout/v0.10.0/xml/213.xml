<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:24:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-213/MAHOUT-213.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-213] storeMapping should not been called when toLongID() is called</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-213</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;In the trunk, storeMapping is called always when toLongID() is called. In my opinion storeMapping should been called only in method initialize().&lt;br/&gt;
storeMapping will cost a lot when you use database to store the id mapping. I believe the code should like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void initialize(Iterable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; stringIDs) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; TasteException {
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; stringID : stringIDs) {
      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; longID = hash(stringID);
      storeMapping(longID, stringID);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12442708">MAHOUT-213</key>
            <summary>storeMapping should not been called when toLongID() is called</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="zjffdu">Jeff Zhang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Dec 2009 07:57:12 +0000</created>
                <updated>Sat, 21 May 2011 04:23:52 +0100</updated>
                            <resolved>Tue, 8 Dec 2009 12:19:59 +0000</resolved>
                                    <version>0.3</version>
                                    <fixVersion>0.3</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12787365" author="zjffdu" created="Tue, 8 Dec 2009 08:35:53 +0000"  >&lt;p&gt;And toLong method should like this:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; toLongID(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; stringID) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; TasteException {
    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; longID = hash(stringID);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; longID;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12787372" author="zjffdu" created="Tue, 8 Dec 2009 08:54:21 +0000"  >&lt;p&gt;Attach the patch&lt;/p&gt;</comment>
                            <comment id="12787379" author="srowen" created="Tue, 8 Dec 2009 09:24:58 +0000"  >&lt;p&gt;Hmm, what problem is this solving? The idea is that the mapping must remember any String-to-long conversion it&apos;s done. initialize() is just a convenience method. In this model, all of the strings must be known upfront or else this won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="12787390" author="zjffdu" created="Tue, 8 Dec 2009 10:15:43 +0000"  >&lt;p&gt;e.g. The toLong() method is public, it will been called by users many times. While the storeMapping should only been called only one time.&lt;/p&gt;

&lt;p&gt;Here&apos;s the code snippet I will call toLong when I implement a HBaseDataModel:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FastIDSet getItemIDsFromUser(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; userID) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; TasteException {
    Get get = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Get(Bytes.toBytes(userID));
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      Result user = userTable.get(get);
      NavigableMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; map = user.getNoVersionMap().get(ItemFamily);
      FastIDSet set = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FastIDSet();
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; entry : map.entrySet()) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uID = Bytes.toString(entry.getValue());
        set.add(userIDMigrator.toLongID(uID));
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; set;
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TasteException(e);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12787432" author="srowen" created="Tue, 8 Dec 2009 12:19:09 +0000"  >&lt;p&gt;I can buy this. The caller now has to make sure the IDMigrator has seen all possible strings ahead of time. I&apos;ve documented this. I agree that in some cases (like JDBC-backed storage) the storage overhead is high.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427315" name="Mahout_213.patch" size="853" author="zjffdu" created="Tue, 8 Dec 2009 08:54:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Dec 2009 09:24:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9852</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy6if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23206</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>