<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:17:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-95/MAHOUT-95.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-95] UserSimilarity-based NearestNNeighborhood</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-95</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;A variation of NearestNUserNeighborhood.  This version adds the minSimilarity parameter, which is the primary factor for including/excluding other users from the target user&apos;s neighbourhood.  Additionally, the &apos;n&apos; parameter was renamed to maxHoodSize and is used to optionally limit the size of the neighbourhood.&lt;/p&gt;

&lt;p&gt;The patch is for a brand new class, but we may really want just a single class (either keep this one and axe NearestNUserNeighborhood or add this functionality to NearestNUserNeighborhood), if this sounds good.&lt;/p&gt;

&lt;p&gt;I&apos;ll update the unit test and provide a patch for that if others think this can go in.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12408028">MAHOUT-95</key>
            <summary>UserSimilarity-based NearestNNeighborhood</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="otis">Otis Gospodnetic</assignee>
                                    <reporter username="otis">Otis Gospodnetic</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Nov 2008 18:04:33 +0000</created>
                <updated>Sat, 21 May 2011 04:23:52 +0100</updated>
                            <resolved>Thu, 29 Jan 2009 19:38:44 +0000</resolved>
                                                    <fixVersion>0.1</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12645989" author="srowen" created="Sat, 8 Nov 2008 15:11:35 +0000"  >&lt;p&gt;Looks OK to me. I agree it makes sense to maintain only 1 class if it encapsulates the other two. I changed the original today so you may want to look at the original again.&lt;/p&gt;</comment>
                            <comment id="12646320" author="otis" created="Mon, 10 Nov 2008 18:42:38 +0000"  >&lt;p&gt;Changed NearestNUserNeighborhood and TopItems classes.&lt;br/&gt;
(ignore earlier patches)&lt;/p&gt;</comment>
                            <comment id="12646512" author="srowen" created="Tue, 11 Nov 2008 09:24:30 +0000"  >&lt;p&gt;I don&apos;t think you need to copy getTopUsers(). This could be accomplished with a Rescorer. Pass in one that returns the original value if the similarity is at least the threshold, otherwise NaN.&lt;/p&gt;</comment>
                            <comment id="12662139" author="otis" created="Thu, 8 Jan 2009 22:07:06 +0000"  >&lt;p&gt;I just had a look at the code and your suggestion after a pause.  Yes, that would work...&lt;/p&gt;

&lt;p&gt;But how about this:&lt;br/&gt;
I want to ignore users whose theUser-user similarity is &amp;lt; N.&lt;br/&gt;
But I can&apos;t do that with the current API if I provide my implementation of Rescorer&amp;lt;&lt;b&gt;User&lt;/b&gt;&amp;gt; &amp;#8211; I can only pass in Rescorer&amp;lt;&lt;b&gt;Item&lt;/b&gt;&amp;gt; rescorers.  I tried adding the API that takes Rescorer&amp;lt;User&amp;gt;, but quickly found myself doing surgery on a number of classes (Recommender, TopItems, NearestNUserNeighborhood and maybe more), so I cowardly backed out...&lt;/p&gt;

&lt;p&gt;Maybe I&apos;m missing the right way to add support for passing in an instance of Rescorer&amp;lt;User&amp;gt;?&lt;/p&gt;

&lt;p&gt;Note that I could still create something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class MinItemSimilarityRescorer&amp;lt;T&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Rescorer&amp;lt;Item&amp;gt; {
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; minSimilarity;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MinItemSimilarityRescorer(&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; minSimilarity) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.minSimilarity = minSimilarity;
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isFiltered(Item thing) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
  }

  &lt;span class=&quot;code-comment&quot;&gt;// IGNORE Item and make &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; type-agnostic
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; rescore(Item thing, &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; originalScore) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (originalScore &amp;lt; minSimilarity) ? &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.NaN : originalScore;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And have this Rescorer never even look at the &amp;lt;T&amp;gt;, thus making it type-agnostic.... but it feels wrong to have &amp;lt;Item&amp;gt; there if the scores I&apos;m really looking at are user-user similarity scores.&lt;/p&gt;

&lt;p&gt;To put this in context, this rescorer gets called in TopItems.getTopUsers, so that&apos;s what I&apos;m looking at:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; similarity = estimator.estimate(user);
&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; rescoredSimilarity = rescorer == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? similarity : rescorer.rescore(user, similarity);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12662213" author="srowen" created="Fri, 9 Jan 2009 01:39:09 +0000"  >&lt;p&gt;It&apos;s been a while since I looked at this so apologies if I lost the original point &amp;#8211;&lt;/p&gt;

&lt;p&gt;I think the bit you want to change is the inner class Estimator. estimate() should return NaN if the similarity it computes is below your threshold. Then you don&apos;t need changes to getTopUsers() or Rescorers (indeed Rescorer&amp;lt;Item&amp;gt; doesn&apos;t seem to be what you want). The only chnage you need is what&apos;s in your patch now &amp;#8211; a new parameter to the constructor that is made available to Estimator then.&lt;/p&gt;</comment>
                            <comment id="12663466" author="otis" created="Tue, 13 Jan 2009 20:43:28 +0000"  >&lt;p&gt;Cleaned up version:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;No TopItems modifications&lt;/li&gt;
	&lt;li&gt;Addition of NearestNUserNeighborhood.MinSimilarityEstimator&lt;/li&gt;
	&lt;li&gt;Additional NearestNUserNeighborhood ctor that takes minSimilarity and uses MinSimilarityEstimator if minSimilarity &amp;gt; 0.0&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12663502" author="srowen" created="Tue, 13 Jan 2009 22:19:37 +0000"  >&lt;p&gt;Looks OK. I think you don&apos;t need two Estimators &amp;#8211; just overload one to serve both purposes. With that, feel free to commit.&lt;/p&gt;</comment>
                            <comment id="12664253" author="otis" created="Thu, 15 Jan 2009 20:36:55 +0000"  >&lt;p&gt;Something like this?&lt;/p&gt;

&lt;p&gt;The other patch was a bit more code, but was a bit more &quot;explicit&quot; for both a person reading and the JVM.  Will the JVM inline those if tests in the now modified estimate(User user) method?&lt;/p&gt;</comment>
                            <comment id="12668123" author="otis" created="Wed, 28 Jan 2009 19:36:29 +0000"  >&lt;p&gt;I think this is it.&lt;/p&gt;</comment>
                            <comment id="12668180" author="srowen" created="Wed, 28 Jan 2009 21:59:47 +0000"  >&lt;p&gt;LGTM, commit away.&lt;/p&gt;</comment>
                            <comment id="12668563" author="otis" created="Thu, 29 Jan 2009 19:38:44 +0000"  >&lt;p&gt;Finito.&lt;/p&gt;

&lt;p&gt;Sending        core/src/main/java/org/apache/mahout/cf/taste/impl/neighborhood/NearestNUserNeighborhood.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 738980.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393519" name="MAHOUT-95-diff-against-nearestN.txt" size="3910" author="otis" created="Fri, 7 Nov 2008 18:06:42 +0000"/>
                            <attachment id="12398920" name="MAHOUT-95.patch" size="3804" author="otis" created="Wed, 28 Jan 2009 19:36:29 +0000"/>
                            <attachment id="12398006" name="MAHOUT-95.patch" size="5218" author="otis" created="Thu, 15 Jan 2009 20:36:55 +0000"/>
                            <attachment id="12397816" name="MAHOUT-95.patch" size="4204" author="otis" created="Tue, 13 Jan 2009 20:43:28 +0000"/>
                            <attachment id="12393651" name="MAHOUT-95.patch" size="4823" author="otis" created="Mon, 10 Nov 2008 18:42:38 +0000"/>
                            <attachment id="12393518" name="MAHOUT-95.patch" size="6875" author="otis" created="Fri, 7 Nov 2008 18:06:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 8 Nov 2008 15:11:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy78f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>