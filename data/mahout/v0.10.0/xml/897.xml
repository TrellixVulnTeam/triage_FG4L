<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:24:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-897/MAHOUT-897.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-897] New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-897</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Current LDA implementation in Mahout suffers from a few issues:&lt;/p&gt;

&lt;p&gt;  1) it&apos;s based on the original Variational Bayes E/M training methods of Blei et al (&lt;a href=&quot;http://www.cs.princeton.edu/~blei/papers/BleiNgJordan2003.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.cs.princeton.edu/~blei/papers/BleiNgJordan2003.pdf&lt;/a&gt;), which are a) significantly more complex to implement/maintain, and b) significantly slower than subsequently discovered techniques&lt;/p&gt;

&lt;p&gt;  2) the entire &quot;current working model&quot; is held in memory in each Mapper, which limits the scalability of the implementation by numTerms in vocabulary * numTopics * 8bytes per double being less than the mapper heap size.&lt;/p&gt;

&lt;p&gt;  3) the sufficient statistics which need to be emitted by the mappers scale as numTopics * numNonZeroEntries in the corpus.  Even with judicious use of Combiners (currently implemented), this can get prohibitively expensive in terms of network + disk usage.&lt;/p&gt;

&lt;p&gt;In particular, point 3 looks like: a 1B nonzero entry corpus in Mahout would take up about 12GB of RAM in total, but if you wanted 200 topics, you&apos;d be using 2.5TB if disk+network traffic &lt;b&gt;per E/M iteration&lt;/b&gt;.  Running a moderate 40 iterations we&apos;re talking about 100TB.  Having tried this implementation on a 6B nonzero entry input corpus with 100 topics (500k term vocabulary, so memory wasn&apos;t an issue), I&apos;ve seen this in practice: even with our production Hadoop cluster with many thousands of map slots available, even one iteration was taking more than 3.5hours to get to 50% completion of the mapper tasks.&lt;/p&gt;

&lt;p&gt;Point 1) was simple to improve: switch from VB to an algorithm labeled CVB0 (&quot;Collapsed Variational Bayes, 0th derivative approximation&quot;) in Ascuncion, et al ( &lt;a href=&quot;http://www.datalab.uci.edu/papers/uai_2009.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.datalab.uci.edu/papers/uai_2009.pdf&lt;/a&gt; ).  I tried many approaches to get the overall distributed side of the algorithm to scale better, originally aiming at removing point 2), but it turned out that point 3) was what kept rearing its ugly head.  The way that YahooLDA ( &lt;a href=&quot;https://github.com/shravanmn/Yahoo_LDA&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/shravanmn/Yahoo_LDA&lt;/a&gt; ) and many others have achieved high scalability is by doing distributed Gibbs sampling, but that requires that you hold onto the model in distributed memory and query it continually via RPC.  This could be done in something like Giraph or Spark, but not in vanilla Hadoop M/R.&lt;/p&gt;

&lt;p&gt;The end result was to actually make point 2) even &lt;b&gt;worse&lt;/b&gt;, and instead of relying on Hadoop combiners to aggregate sufficient statistics for the model, you instead do a full map-side cache of (this mapper&apos;s slice of) the next iteration&apos;s model, and emit nothing in each map() call, emitting the entire model at cleanup(), and then the reducer simply sums the sub-models.  This effectively becomes a form of ensemble learning: each mapper learns its own sequential model, emits it, the reducers (one for each topic) sum up these models into one, which is fed out to all the models in the next iteration.&lt;/p&gt;

&lt;p&gt;In its current form, this LDA implementation can churn through about two M/R iterations per hour on the same cluster/data set mentioned above (which makes it at least 15x faster on larger data sets).&lt;/p&gt;

&lt;p&gt;It probably requires a fair amount of documentation / cleanup, but it comes with a nice end-to-end unit test (same as the one added to &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-399&quot; title=&quot;LDA on Mahout 0.3 does not converge to correct solution for overlapping pyramids toy problem.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-399&quot;&gt;&lt;del&gt;MAHOUT-399&lt;/del&gt;&lt;/a&gt;), and also comes with an &quot;in-memory&quot; version of the same algorithm, for smaller datasets (i.e. those which can fit in memory).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532820">MAHOUT-897</key>
            <summary>New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jake.mannix">Jake Mannix</assignee>
                                    <reporter username="jake.mannix">Jake Mannix</reporter>
                        <labels>
                            <label>clustering</label>
                            <label>lda</label>
                    </labels>
                <created>Sun, 27 Nov 2011 07:34:56 +0000</created>
                <updated>Thu, 9 Feb 2012 14:01:02 +0000</updated>
                            <resolved>Mon, 9 Jan 2012 17:51:23 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>Clustering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13157693" author="jake.mannix" created="Sun, 27 Nov 2011 07:41:09 +0000"  >&lt;p&gt;Patch pulled from my GitHub clone, after carefully extracting what hopefully is an internally consistent set of files!&lt;/p&gt;</comment>
                            <comment id="13157694" author="jake.mannix" created="Sun, 27 Nov 2011 07:45:11 +0000"  >&lt;p&gt;Dig in, see what is ugly, what doesn&apos;t work, etc.  It&apos;s already in use on some pretty massive corpora at Twitter, but the API could probably use some cleanup (esp. in the TopicModel and ModelTrainer classes).  &lt;/p&gt;

&lt;p&gt;I tried to avoid overengineering this one. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Much of this code has been fixed and improved by Andy Schlaikjer (finishing up his PhD at CMU and starting at Twitter in Jan).&lt;/p&gt;</comment>
                            <comment id="13157696" author="jake.mannix" created="Sun, 27 Nov 2011 07:51:55 +0000"  >&lt;p&gt;To run it, after applying the patch and building, &quot;./bin/mahout cvb --help&quot; will print out the CLI driver options.  In essence, you feed it the HDFS path of a DistributedRowMatrix (i.e. SequenceFile&amp;lt;IntWritable, VectorWritable&amp;gt;), and some training parameters, and some output paths, where your model: p(term|topic) distributions (in the form of another DistributedRowMatrix, rows keyed on topic), and the &quot;projection&quot; of your data: the p(topic|document) distributions (same form, rows keyed on docId) will go.&lt;/p&gt;</comment>
                            <comment id="13158002" author="jiraposter@reviews.apache.org" created="Sun, 27 Nov 2011 20:37:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for mahout.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1206835 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/MemoryUtil.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1206835 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1206835 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1206835 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/src/conf/driver.classes.props 1206835 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;mvn clean test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jake&lt;/p&gt;
</comment>
                            <comment id="13158268" author="jiraposter@reviews.apache.org" created="Mon, 28 Nov 2011 07:56:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/#review3531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#review3531&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Generally this looks like pretty clean code.  Some more comments about intent would be nice.&lt;/p&gt;

&lt;p&gt;My review so far is very superficial.&lt;/p&gt;


&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/#comment7864&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#comment7864&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Why return double?  Main ignores this.&lt;/p&gt;



&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/#comment7865&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#comment7865&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    I think convention is @override on a seaparate line.&lt;/p&gt;



&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/#comment7866&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#comment7866&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    This comment is very confusing.&lt;/p&gt;



&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/#comment7867&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#comment7867&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Javadoc here would be nice.  Why is this sampler different from samplers we already have?&lt;/p&gt;

&lt;p&gt;    Also, I don&apos;t see test code for this.&lt;/p&gt;



&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/#comment7868&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#comment7868&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    So this looks like a multinomial sampler.  Why not fit it into what already exists?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ted&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-11-27 20:37:25, Jake Mannix wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-11-27 20:37:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for mahout.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/MemoryUtil.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/src/conf/driver.classes.props 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;mvn clean test&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jake&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13158600" author="jiraposter@reviews.apache.org" created="Mon, 28 Nov 2011 17:57:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/#review3538&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#review3538&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/#comment7875&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#comment7875&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Indeed.  Will update with something more descriptive.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jake&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-11-27 20:37:25, Jake Mannix wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-11-27 20:37:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for mahout.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/MemoryUtil.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/src/conf/driver.classes.props 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;mvn clean test&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jake&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13158602" author="jiraposter@reviews.apache.org" created="Mon, 28 Nov 2011 17:59:40 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-11-28 07:54:29, Ted Dunning wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; Generally this looks like pretty clean code.  Some more comments about intent would be nice.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; My review so far is very superficial.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m pretty blind to places which need more docs, as it all does, and I know the code.  If you could point out places most in need of docs, I&apos;ll know where to start. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-11-28 07:54:29, Ted Dunning wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java, line 217&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/diff/1/?file=60151#file60151line217&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff/1/?file=60151#file60151line217&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Why return double?  Main ignores this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because any other program running this (currently: just the unit test I added) may want to know what the final converged perplexity was, so now it&apos;s available from the run() call.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-11-28 07:54:29, Ted Dunning wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java, line 103&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/diff/1/?file=60153#file60153line103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff/1/?file=60153#file60153line103&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     I think convention is @override on a seaparate line.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah yes, I&apos;ll fix that.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-11-28 07:54:29, Ted Dunning wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java, line 9&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/diff/1/?file=60164#file60164line9&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff/1/?file=60164#file60164line9&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Javadoc here would be nice.  Why is this sampler different from samplers we already have?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Also, I don&apos;t see test code for this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll add documentation like follows:&lt;/p&gt;

&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Samples from a given discrete distribution: you provide a source of randomness and a Vector (cardinality N) which describes a distribution over [0,N), and calls to sample() sample from 0 to N&lt;/li&gt;
	&lt;li&gt;using this distribution&lt;br/&gt;
   */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Do we already have a sampler which does this?&lt;/p&gt;

&lt;p&gt;I can add tests, good point.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-11-28 07:54:29, Ted Dunning wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java, line 58&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/2944/diff/1/?file=60164#file60164line58&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff/1/?file=60164#file60164line58&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     So this looks like a multinomial sampler.  Why not fit it into what already exists?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Point me to the class!&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Jake&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/#review3531&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/#review3531&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-11-27 20:37:25, Jake Mannix wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-11-27 20:37:25)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for mahout.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/MemoryUtil.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/src/conf/driver.classes.props 1206835 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;mvn clean test&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jake&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13159878" author="jiraposter@reviews.apache.org" created="Wed, 30 Nov 2011 07:35:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-30 07:35:21.576144)&lt;/p&gt;


&lt;p&gt;Review request for mahout and Ted Dunning.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;addressing Ted&apos;s comments&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1208294 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/MemoryUtil.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1208294 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1208294 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1208294 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/math/stats/SamplerTest.java PRE-CREATION &lt;br/&gt;
  trunk/src/conf/driver.classes.props 1208294 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;mvn clean test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jake&lt;/p&gt;
</comment>
                            <comment id="13159924" author="jiraposter@reviews.apache.org" created="Wed, 30 Nov 2011 08:59:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-30 08:58:25.710229)&lt;/p&gt;


&lt;p&gt;Review request for mahout and Ted Dunning.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Adds appropriate ASL headers to new files, adds a bunch of nice javadocs, some TODOs to clean up some detritus, moves MemoryUtil to a more common location.&lt;/p&gt;

&lt;p&gt;Could use some more review if anyone has an urge, but otherwise this code is ready to go.  More updates can come in the future.  And more docs, etc.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1208294 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/MemoryUtil.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1208294 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1208294 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1208294 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/math/stats/SamplerTest.java PRE-CREATION &lt;br/&gt;
  trunk/src/conf/driver.classes.props 1208294 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;mvn clean test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jake&lt;/p&gt;
</comment>
                            <comment id="13160226" author="jiraposter@reviews.apache.org" created="Wed, 30 Nov 2011 18:43:40 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-11-30 18:42:21.747592)&lt;/p&gt;


&lt;p&gt;Review request for mahout and Ted Dunning.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;More license headers, and some javadocs.&lt;/p&gt;

&lt;p&gt;Also: factor out an &quot;LDASampler&quot; which builds a sampler based on a Matrix representation of a topic model.  &lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1208294 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDASampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/MemoryUtil.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1208294 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1208294 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1208294 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/math/stats/SamplerTest.java PRE-CREATION &lt;br/&gt;
  trunk/src/conf/driver.classes.props 1208294 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;mvn clean test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jake&lt;/p&gt;
</comment>
                            <comment id="13160358" author="jake.mannix" created="Wed, 30 Nov 2011 21:31:26 +0000"  >&lt;p&gt;Hey Ted, any further thoughts on this?  I think I&apos;d like to commit it soon if people would like, but I don&apos;t have any +1&apos;s yet.  Boohoo. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13160376" author="isabel" created="Wed, 30 Nov 2011 21:53:22 +0000"  >&lt;p&gt;Without deeper knowledge of the math used to implement this patch: Anything that makes LDA faster, more stable or easier to use is a clear +1 from me - can&apos;t comment on the implementation though.&lt;/p&gt;

&lt;p&gt;Does anything change for users (thinking of the command line integration and the documentation in the wiki here).&lt;/p&gt;</comment>
                            <comment id="13160399" author="jake.mannix" created="Wed, 30 Nov 2011 22:19:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does anything change for users (thinking of the command line integration and the documentation in the wiki here).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because this is basically a complete rewrite of our LDA impl, it&apos;s got its own command-line invocation, it&apos;s own driver class, already added to driver.classes.props (in this patch).  If more people try it than myself, and we have it out there for a release and it works on more data than just mine, then we can deprecate the old LDA and remove it.  But I didn&apos;t want to kill the old one entirely before people had got a chance to compare.  &lt;/p&gt;

&lt;p&gt;Maybe that&apos;s the wrong idea, maybe it&apos;ll lead to confusion to have both in there, and I should just blow away the old one and migrate this one&apos;s user-facing interface to look like the old one?  Not sure what the best practice would be.&lt;/p&gt;</comment>
                            <comment id="13160625" author="jake.mannix" created="Thu, 1 Dec 2011 03:38:31 +0000"  >&lt;p&gt;I realized that without the patch described in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-845&quot; title=&quot;Make cluster top terms code more reusable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-845&quot;&gt;&lt;del&gt;MAHOUT-845&lt;/del&gt;&lt;/a&gt;, this new implementation is missing the &quot;LDATopics&quot; functionality.  Updating patch.&lt;/p&gt;</comment>
                            <comment id="13160626" author="jake.mannix" created="Thu, 1 Dec 2011 03:39:47 +0000"  >&lt;p&gt;modifies VectorDumper and VectorHelper to allow dumping of JSON-formatted &quot;top terms&quot; in the topics.&lt;/p&gt;</comment>
                            <comment id="13160629" author="jiraposter@reviews.apache.org" created="Thu, 1 Dec 2011 03:45:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-01 03:44:25.140987)&lt;/p&gt;


&lt;p&gt;Review request for mahout and Ted Dunning.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;VectorDumper becomes a &quot;top-terms&quot; dumper as well.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1208933 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDASampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/MemoryUtil.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1208933 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1208933 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1208933 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/math/stats/SamplerTest.java PRE-CREATION &lt;br/&gt;
  trunk/integration/src/main/java/org/apache/mahout/utils/vectors/VectorDumper.java 1208933 &lt;br/&gt;
  trunk/integration/src/main/java/org/apache/mahout/utils/vectors/VectorHelper.java 1208933 &lt;br/&gt;
  trunk/math/src/main/java/org/apache/mahout/math/AbstractVector.java 1208933 &lt;br/&gt;
  trunk/math/src/main/java/org/apache/mahout/math/NamedVector.java 1208933 &lt;br/&gt;
  trunk/src/conf/driver.classes.props 1208933 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;mvn clean test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jake&lt;/p&gt;
</comment>
                            <comment id="13161847" author="jiraposter@reviews.apache.org" created="Fri, 2 Dec 2011 20:51:39 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2944/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-02 20:49:52.055735)&lt;/p&gt;


&lt;p&gt;Review request for mahout and Ted Dunning.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Updates to VectorDumper and VectorHelper&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-897&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDASampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java 1209684 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/MemoryUtil.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/common/Pair.java 1209684 &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java 1209684 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java 1209684 &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java PRE-CREATION &lt;br/&gt;
  trunk/core/src/test/java/org/apache/mahout/math/stats/SamplerTest.java PRE-CREATION &lt;br/&gt;
  trunk/integration/src/main/java/org/apache/mahout/utils/vectors/VectorDumper.java 1209684 &lt;br/&gt;
  trunk/integration/src/main/java/org/apache/mahout/utils/vectors/VectorHelper.java 1209684 &lt;br/&gt;
  trunk/integration/src/test/java/org/apache/mahout/utils/vectors/VectorHelperTest.java PRE-CREATION &lt;br/&gt;
  trunk/math/src/main/java/org/apache/mahout/math/AbstractVector.java 1209684 &lt;br/&gt;
  trunk/math/src/main/java/org/apache/mahout/math/NamedVector.java 1209684 &lt;br/&gt;
  trunk/src/conf/driver.classes.props 1209684 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2944/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2944/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;mvn clean test&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jake&lt;/p&gt;
</comment>
                            <comment id="13161849" author="jake.mannix" created="Fri, 2 Dec 2011 20:52:39 +0000"  >&lt;p&gt;I&apos;m going to commit the latest patch later today if I don&apos;t hear any complaints.&lt;/p&gt;</comment>
                            <comment id="13162055" author="hudson" created="Sat, 3 Dec 2011 05:16:59 +0000"  >&lt;p&gt;Integrated in Mahout-Quality #1219 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1219/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1219/&lt;/a&gt;)&lt;br/&gt;
    fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-897&quot; title=&quot;New implementation for LDA: Collapsed Variational Bayes (0th derivative approximation), with map-side model caching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-897&quot;&gt;&lt;del&gt;MAHOUT-897&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
New Latent Dirichlet Allocation implementation, etc.&lt;/p&gt;

&lt;p&gt;jmannix : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1209794&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1209794&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDADriver.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/LDASampler.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0DocInferenceMapper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0TopicTermVectorNormalizerMapper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0Mapper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CachingCVB0PerplexityMapper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/InMemoryCollapsedVariationalBayes0.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/ModelTrainer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/TopicModel.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/MemoryUtil.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/Pair.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/DistributedRowMatrixWriter.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/MatrixUtils.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/stats/Sampler.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/ClusteringTestUtils.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/lda/TestMapReduce.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/stats/SamplerTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/utils/vectors/VectorDumper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/utils/vectors/VectorHelper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/utils/vectors/VectorHelperTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/math/src/main/java/org/apache/mahout/math/AbstractVector.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/math/src/main/java/org/apache/mahout/math/NamedVector.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/src/conf/driver.classes.props&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13182594" author="jeastman" created="Mon, 9 Jan 2012 16:11:59 +0000"  >&lt;p&gt;Looks to me like this issue can now be closed. Jake?&lt;/p&gt;</comment>
                            <comment id="13182667" author="jake.mannix" created="Mon, 9 Jan 2012 17:51:23 +0000"  >&lt;p&gt;Closed indeed!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505714" name="MAHOUT-897.diff" size="142814" author="jake.mannix" created="Thu, 1 Dec 2011 03:39:47 +0000"/>
                            <attachment id="12505233" name="MAHOUT-897.diff" size="109412" author="jake.mannix" created="Sun, 27 Nov 2011 07:41:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 27 Nov 2011 20:37:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy2av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>