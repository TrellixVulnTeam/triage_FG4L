<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:21:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-546/MAHOUT-546.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-546] Bug creating vector from Solr index with TrieFields</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-546</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;A Solr index with an Id field of type TrieLong causes NPE when trying to extract vectors from the lucene index&lt;/p&gt;

&lt;p&gt;Command line used:&lt;br/&gt;
../bin/mahout lucene.vector -d ~/solr/data/index/ -o  vectors.vec -t d.dic -f text -i articleId&lt;/p&gt;

&lt;p&gt;where &apos;articleId&apos; is a Stored numeric field declared as &apos;tlong&apos; in Solr.  Output:&lt;/p&gt;

&lt;p&gt;no HADOOP_HOME set, running locally&lt;br/&gt;
Nov 16, 2010 2:59:50 PM org.slf4j.impl.JCLLoggerAdapter info&lt;br/&gt;
INFO: Output File: moreover.vec&lt;br/&gt;
Nov 16, 2010 2:59:51 PM org.apache.hadoop.util.NativeCodeLoader &amp;lt;clinit&amp;gt;&lt;br/&gt;
WARNING: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
Nov 16, 2010 2:59:51 PM org.apache.hadoop.io.compress.CodecPool getCompressor&lt;br/&gt;
INFO: Got brand-new compressor&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
	at java.io.DataOutputStream.writeUTF(DataOutputStream.java:330)&lt;br/&gt;
	at java.io.DataOutputStream.writeUTF(DataOutputStream.java:306)&lt;br/&gt;
	at org.apache.mahout.math.VectorWritable.write(VectorWritable.java:125)&lt;br/&gt;
	at org.apache.hadoop.io.serializer.WritableSerialization$WritableSerializer.serialize(WritableSerialization.java:90)&lt;br/&gt;
	at org.apache.hadoop.io.serializer.WritableSerialization$WritableSerializer.serialize(WritableSerialization.java:77)&lt;br/&gt;
	at org.apache.hadoop.io.SequenceFile$RecordCompressWriter.append(SequenceFile.java:1128)&lt;br/&gt;
	at org.apache.hadoop.io.SequenceFile$Writer.append(SequenceFile.java:977)&lt;br/&gt;
	at org.apache.mahout.utils.vectors.io.SequenceFileVectorWriter.write(SequenceFileVectorWriter.java:46)&lt;br/&gt;
	at org.apache.mahout.utils.vectors.lucene.Driver.main(Driver.java:226)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)&lt;br/&gt;
	at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)&lt;br/&gt;
	at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:184)&lt;/p&gt;

&lt;p&gt;The problem is at class LuceneIteratable line 130:&lt;br/&gt;
  name = indexReader.document(doc, idFieldSelector).get(idField);&lt;/p&gt;

&lt;p&gt;It does not work with the way Solr stores numeric fields in the index.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12480120">MAHOUT-546</key>
            <summary>Bug creating vector from Solr index with TrieFields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="gustavonalle">G Fernandes</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Nov 2010 15:09:43 +0000</created>
                <updated>Thu, 9 Feb 2012 14:00:41 +0000</updated>
                            <resolved>Sun, 26 Jun 2011 09:12:27 +0100</resolved>
                                    <version>0.4</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12932964" author="gsingers" created="Wed, 17 Nov 2010 14:45:13 +0000"  >&lt;p&gt;Hmm, yeah, I would agree this is a bug.  Not sure how to fix it in an easy way.  We would need to have some knowledge of the fact that it is a numeric field and what precision it is.&lt;/p&gt;</comment>
                            <comment id="12932994" author="gustavonalle" created="Wed, 17 Nov 2010 15:49:18 +0000"  >&lt;p&gt;One option is to pass the type/precision as extra parameters: &lt;/p&gt;

&lt;p&gt;./bin/mahout lucene.vector -d ~/solr/data/index/ -o vectors.vec -t d.dic -f text -i articleId  --idFieldType long --idFieldPrecision 4&lt;/p&gt;</comment>
                            <comment id="13037246" author="srowen" created="Sat, 21 May 2011 03:52:28 +0100"  >&lt;p&gt;I am not sure that is the issue. The stack trace shows a different error. It&apos;s trying to serialize a NamedVector which has no name (and I don&apos;t know why).&lt;/p&gt;

&lt;p&gt;I propose that we take a step to repair the issue by:&lt;/p&gt;

&lt;p&gt;1. Write an empty string, not null, in this case, even if it shouldn&apos;t happen. It at least avoids a failure.&lt;br/&gt;
2. Make NamedVector never accept null. This may punt the NPE elsewhere, but will show its cause.&lt;/p&gt;

&lt;p&gt;You both seem to understand the other issue with Solr and precision. It seems a little ugly to go so far as to work around with a command-line arg, but I don&apos;t know well enough to have a strong opinion. Is this something that anyone has any suggested patch for?&lt;/p&gt;</comment>
                            <comment id="13042689" author="hudson" created="Thu, 2 Jun 2011 11:34:41 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #848 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Mahout-Quality/848/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/hudson/job/Mahout-Quality/848/&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="13055034" author="srowen" created="Sun, 26 Jun 2011 09:12:27 +0100"  >&lt;p&gt;I haven&apos;t heard any other comments on this, after I fixed the proximate issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Nov 2010 14:45:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy4g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22872</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>