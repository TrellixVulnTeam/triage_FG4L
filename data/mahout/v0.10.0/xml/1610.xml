<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:21:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1610/MAHOUT-1610.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1610] Tests can be made more robust to pass in Java 8</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1610</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Right now, several tests don&apos;t seem to pass when run with Java 8 (at least on Java 8). The failures are benign, and just due to tests looking for too-specific values or expecting things like a certain ordering of hashmaps. &lt;/p&gt;

&lt;p&gt;The tests can easily be made to pass both Java 8 and Java 6/7 at the same time by either relaxing the tests in a principled way, or accepting either output of two equally valid ones as correct.&lt;/p&gt;

&lt;p&gt;(There&apos;s also one curious compilation failure in Java 8, related to generics. It is fixable by changing to a more explicit declaration that should be equivalent. It should be entirely equivalent at compile time, and of course, at run time. I am not sure it&apos;s not just a javac bug, but, might as well work around when it&apos;s so easy.)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.8.0_11 OS X 10.9.4&lt;/p&gt;</environment>
        <key id="12737113">MAHOUT-1610</key>
            <summary>Tests can be made more robust to pass in Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="srowen">Sean Owen</reporter>
                        <labels>
                            <label>java8</label>
                            <label>tests</label>
                    </labels>
                <created>Wed, 27 Aug 2014 15:15:25 +0100</created>
                <updated>Mon, 13 Apr 2015 11:20:05 +0100</updated>
                            <resolved>Thu, 28 Aug 2014 17:39:57 +0100</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14112290" author="githubbot" created="Wed, 27 Aug 2014 15:31:22 +0100"  >&lt;p&gt;GitHub user srowen opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1610&quot; title=&quot;Tests can be made more robust to pass in Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1610&quot;&gt;&lt;del&gt;MAHOUT-1610&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;TESTS&amp;#93;&lt;/span&gt; Update tests to pass in Java 8&lt;/p&gt;

&lt;p&gt;    Right now, several tests don&apos;t seem to pass when run with Java 8 (at least on Java 8). The failures are benign, and just due to tests looking for too-specific values or expecting things like a certain ordering of hashmaps.&lt;/p&gt;

&lt;p&gt;    The tests can easily be made to pass both Java 8 and Java 6/7 at the same time by either relaxing the tests in a principled way, or accepting either output of two equally valid ones as correct.&lt;/p&gt;

&lt;p&gt;    (There&apos;s also one curious compilation failure in Java 8, related to generics. It is fixable by changing to a more explicit declaration that should be equivalent. It should be entirely equivalent at compile time, and of course, at run time. I am not sure it&apos;s not just a javac bug, but, might as well work around when it&apos;s so easy.)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/srowen/mahout&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/srowen/mahout&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1610&quot; title=&quot;Tests can be made more robust to pass in Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1610&quot;&gt;&lt;del&gt;MAHOUT-1610&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #46&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4ac89f32e5b76b73d7d11d05739229de51d189f6&lt;br/&gt;
Author: Sean Owen &amp;lt;srowen@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-08-27T14:30:36Z&lt;/p&gt;

&lt;p&gt;    Update tests to pass in Java 8&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14112304" author="tdunning" created="Wed, 27 Aug 2014 15:52:38 +0100"  >&lt;p&gt;Looks good to me.&lt;/p&gt;</comment>
                            <comment id="14113724" author="githubbot" created="Thu, 28 Aug 2014 14:03:52 +0100"  >&lt;p&gt;Github user srowen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46#issuecomment-53716190&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46#issuecomment-53716190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I may still have the commit bit for ASF git, but can&apos;t merge the pull request myself. (I also realize I&apos;m not yet sure if there&apos;s another step? will asfbot merge back to ASF git if merged here?)&lt;/p&gt;

&lt;p&gt;    Anyone who can merge this is welcome to do so!&lt;/p&gt;</comment>
                            <comment id="14113907" author="githubbot" created="Thu, 28 Aug 2014 17:09:36 +0100"  >&lt;p&gt;Github user dlyubimov commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46#issuecomment-53745490&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46#issuecomment-53745490&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; may still have the commit bit for ASF git, but can&apos;t merge the pull request myself&lt;br/&gt;
    Thanks, Sean. &lt;/p&gt;

&lt;p&gt;    Yes, you can merge. A bit exploded beyond what&apos;s needed IMO but still useful &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. Also, it works best if master is first merged to the PR branch and conflicts, if any, resolved there, so when you `--squash` stuff to master, you don&apos;t have to worry about conflicts on top of everything else. Hope this helps.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://mahout.apache.org/developers/github.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mahout.apache.org/developers/github.html&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="14113913" author="githubbot" created="Thu, 28 Aug 2014 17:14:53 +0100"  >&lt;p&gt;Github user srowen commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46#issuecomment-53746682&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46#issuecomment-53746682&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ah right, should have RTFM. Thanks! When you say &quot;beyond what&apos;s needed&quot; were you commenting on the PR, or on the docs? Just checking whether you meant you wanted to discuss the change more. &lt;/p&gt;</comment>
                            <comment id="14113918" author="githubbot" created="Thu, 28 Aug 2014 17:21:26 +0100"  >&lt;p&gt;Github user dlyubimov commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46#issuecomment-53748236&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46#issuecomment-53748236&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I meant the PR doc. Strictly in my opinion, since original versions  stuff&lt;br/&gt;
    has been added that was not strictly to the point and makes read longer and&lt;br/&gt;
    therefore harder than it needs be.&lt;/p&gt;


&lt;p&gt;    On Thu, Aug 28, 2014 at 9:14 AM, Sean Owen &amp;lt;notifications@github.com&amp;gt; wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Ah right, should have RTFM. Thanks! When you say &quot;beyond what&apos;s needed&quot;&lt;br/&gt;
    &amp;gt; were you commenting on the PR, or on the docs? Just checking whether you&lt;br/&gt;
    &amp;gt; meant you wanted to discuss the change more.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/mahout/pull/46#issuecomment-53746682&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46#issuecomment-53746682&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;</comment>
                            <comment id="14113938" author="githubbot" created="Thu, 28 Aug 2014 17:39:50 +0100"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14113985" author="hudson" created="Thu, 28 Aug 2014 18:13:03 +0100"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #2766 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2766/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2766/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1610&quot; title=&quot;Tests can be made more robust to pass in Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1610&quot;&gt;&lt;del&gt;MAHOUT-1610&lt;/del&gt;&lt;/a&gt; Update tests to pass in Java 8; closes apache/mahout#46 (srowen: rev 91f15ecfe5d26de36d8e9bcd6cf109b307882a32)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;mrlegacy/src/test/java/org/apache/mahout/classifier/df/tools/VisualizerTest.java&lt;/li&gt;
	&lt;li&gt;math/src/test/java/org/apache/mahout/math/random/MultinomialTest.java&lt;/li&gt;
	&lt;li&gt;mrlegacy/src/test/java/org/apache/mahout/clustering/TestClusterInterface.java&lt;/li&gt;
	&lt;li&gt;mrlegacy/src/test/java/org/apache/mahout/common/StringUtilsTest.java&lt;/li&gt;
	&lt;li&gt;mrlegacy/src/main/java/org/apache/mahout/clustering/ClusteringUtils.java&lt;/li&gt;
	&lt;li&gt;integration/src/test/resources/expected-arff-schema-2.json&lt;/li&gt;
	&lt;li&gt;integration/src/test/resources/expected-arff-dictionary-2.csv&lt;/li&gt;
	&lt;li&gt;mrlegacy/src/test/java/org/apache/mahout/classifier/df/DecisionForestTest.java&lt;/li&gt;
	&lt;li&gt;mrlegacy/src/test/java/org/apache/mahout/classifier/df/data/DatasetTest.java&lt;/li&gt;
	&lt;li&gt;integration/src/test/java/org/apache/mahout/utils/vectors/arff/DriverTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14114885" author="hudson" created="Fri, 29 Aug 2014 06:48:12 +0100"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #2771 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2771/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2771/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1610&quot; title=&quot;Tests can be made more robust to pass in Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1610&quot;&gt;&lt;del&gt;MAHOUT-1610&lt;/del&gt;&lt;/a&gt; addendum: add CHANGELOG note (srowen: rev d9e26c64d620d723c94386e1a5ef9e70588c31a3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CHANGELOG&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14114893" author="srowen" created="Fri, 29 Aug 2014 06:57:43 +0100"  >&lt;p&gt;I forgot to modify CHANGELOG, so fixed that in an extra commit. The original Hudson tests passed, so I can only assume this change to just the CHANGELOG file can&apos;t have broken something, and that this is a spurious failure.&lt;/p&gt;</comment>
                            <comment id="14116100" author="githubbot" created="Sat, 30 Aug 2014 01:19:10 +0100"  >&lt;p&gt;Github user dlyubimov commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/46#issuecomment-53942759&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/46#issuecomment-53942759&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    `�[32m- dssvd - the naive-est - q=0�[0m&lt;br/&gt;
    1 &lt;span class=&quot;error&quot;&gt;&amp;#91;Executor task launch worker-1&amp;#93;&lt;/span&gt; ERROR org.apache.spark.executor.Executor  - Exception in task ID 52&lt;br/&gt;
    java.io.FileNotFoundException: &lt;a href=&quot;http://67.195.81.155:38091/broadcast_4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://67.195.81.155:38091/broadcast_4&lt;/a&gt;&lt;br/&gt;
    	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1457)&lt;br/&gt;
    	at org.apache.spark.broadcast.HttpBroadcast$.read(HttpBroadcast.scala:196)&lt;br/&gt;
    	at org.apache.spark.broadcast.HttpBroadcast.readObject(HttpBroadcast.scala:89)&lt;br/&gt;
    	at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)&lt;br/&gt;
    	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)`&lt;/p&gt;


&lt;p&gt;    not sure what may be causing this.&lt;/p&gt;</comment>
                            <comment id="14116102" author="dlieu.7@gmail.com" created="Sat, 30 Aug 2014 01:19:56 +0100"  >&lt;p&gt;it seems to be Spark (spurious) failure, unable to open broadcast variable&lt;br/&gt;
handle. It would be nice to understand more why it happened, either we are&lt;br/&gt;
doing something wrong causing something to race, or it is something bad&lt;br/&gt;
with this version of Spark (or even build host setup?) causing this.&lt;/p&gt;

&lt;p&gt;It is unlikely though it is our unit test setup, as we basically just&lt;br/&gt;
ripped it off unit testing in Spark. We are also not running any parallel&lt;br/&gt;
sessions here.&lt;/p&gt;

&lt;p&gt;I think (but not sure) i saw it happened once before after we switched to&lt;br/&gt;
1.0, perhaps in my local runs, but never once we were on 0.9.&lt;/p&gt;

&lt;p&gt;Sean, or anyone else, if you have any thoughts I&apos;d appreciate sharing.&lt;/p&gt;


</comment>
                            <comment id="14116326" author="srowen" created="Sat, 30 Aug 2014 11:26:24 +0100"  >&lt;p&gt;I have seen failures like this in Spark before. I think this is something that was perhaps partly fixed in upcoming 1.1.0, if I remember correctly. It&apos;s a Spark issue AFAICT.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Aug 2014 14:31:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzt97r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>