<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:28:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-509/MAHOUT-509.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-509] Options in Bayes TrainClassifier and TestClassifier</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-509</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;As I was going through wikipedia example, I encountered a situation with TrainClassifier wherein some of the options with default values are actually mandatory. &lt;br/&gt;
The documentation / command line help says that &lt;br/&gt;
default source (--datasource) is hdfs but TrainClassifier has withRequired(true) while building the --datasource option. We are checking if the dataSourceType is hbase else set it to hdfs. so ideally withRequired should be set to false&lt;br/&gt;
default --classifierType is bayes but withRequired is set to true and we have code like&lt;br/&gt;
if (&quot;bayes&quot;.equalsIgnoreCase(classifierType)) &lt;/p&gt;
{
        log.info(&quot;Training Bayes Classifier&quot;);
        trainNaiveBayes(inputPath, outputPath, params);
        
      }
&lt;p&gt; else if (&quot;cbayes&quot;.equalsIgnoreCase(classifierType)) &lt;/p&gt;
{
        log.info(&quot;Training Complementary Bayes Classifier&quot;);
        // setup the HDFS and copy the files there, then run the trainer
        trainCNaiveBayes(inputPath, outputPath, params);
      }

&lt;p&gt;which should be changed to&lt;/p&gt;

&lt;p&gt;if (&quot;cbayes&quot;.equalsIgnoreCase(classifierType)) &lt;/p&gt;
{
        log.info(&quot;Training Complementary Bayes Classifier&quot;);
        trainCNaiveBayes(inputPath, outputPath, params);
        
      }
&lt;p&gt; else  &lt;/p&gt;
{
        log.info(&quot;Training  Bayes Classifier&quot;);
        // setup the HDFS and copy the files there, then run the trainer
        trainNaiveBayes(inputPath, outputPath, params);
      }

&lt;p&gt;Please let me know if this looks valid and I&apos;ll submit a patch for a JIRA issue.&lt;/p&gt;

&lt;p&gt;reg&lt;br/&gt;
Joe.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12474786">MAHOUT-509</key>
            <summary>Options in Bayes TrainClassifier and TestClassifier</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robinanil">Robin Anil</assignee>
                                    <reporter username="joekumar">Joe Prasanna Kumar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Sep 2010 05:44:29 +0100</created>
                <updated>Sun, 31 Oct 2010 15:50:29 +0000</updated>
                            <resolved>Sun, 26 Sep 2010 11:18:34 +0100</resolved>
                                                    <fixVersion>0.4</fixVersion>
                                    <component>Classification</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12913397" author="joekumar" created="Wed, 22 Sep 2010 05:51:49 +0100"  >&lt;p&gt;The patch contains changes to &lt;br/&gt;
1. TrainClassifier - setting default values of classifierType, dataSource, ngram, mindf&lt;br/&gt;
2. TestClassifier - setting default values of classifierType, dataSource and just rearranging code for setting the default values&lt;br/&gt;
3. driver.classes.props - added entry for WikipediaXmlSplitter and WikipediaDatasetCreatorDriver, so they could executed using the mahout command line util.&lt;/p&gt;</comment>
                            <comment id="12914956" author="srowen" created="Sun, 26 Sep 2010 11:18:34 +0100"  >&lt;p&gt;Committed, seems reasonable.&lt;/p&gt;</comment>
                            <comment id="12914964" author="hudson" created="Sun, 26 Sep 2010 13:35:14 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #331 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Mahout-Quality/331/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/Mahout-Quality/331/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-509&quot; title=&quot;Options in Bayes TrainClassifier and TestClassifier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-509&quot;&gt;&lt;del&gt;MAHOUT-509&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12919075" author="gangadhar" created="Thu, 7 Oct 2010 22:41:54 +0100"  >&lt;p&gt;The attached patch handles two issues&lt;br/&gt;
1. The testClassifier.props needs to have the datasource, classifiier type and ngram size&lt;br/&gt;
2. If the ngram size has any leading / following spaces, then a NumberFormatException is thrown. The patch handles this by trimming the spaces.&lt;/p&gt;</comment>
                            <comment id="12919111" author="joekumar" created="Fri, 8 Oct 2010 01:10:46 +0100"  >&lt;p&gt;Gangadhar,&lt;/p&gt;

&lt;p&gt;Thanks for testing and your feedbacks.&lt;/p&gt;

&lt;p&gt;For 1 (modifying testClassifier.props), we would have to make the parameters in TestClassifier optional rather than providing a default value in the property file. I verified TestClassifier and see that I missed out making these parameters optional. In the patch I had submitted, the default values of parameters were taken care of but changing the parameters to optional was missed out. I&apos;ll create a patch for this tonite and post it in here.&lt;/p&gt;

&lt;p&gt;For 2 (trimming spaces), I believe this should be a common fix and not specific to TestClassifier. Any class that uses the property files and has an integer value will suffer from this issue. So I digged a little bit to see that the fix should be in MahoutDriver.  current code is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; argMap.put(longArg, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {mainProps.getProperty(key)}); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and should be changed to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;argMap.put(longArg, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {mainProps.getProperty(key).trim()}); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I believe this should be a separate Jira issue. If so, you could probably create one and can verify my proposal and submit a patch.&lt;/p&gt;

&lt;p&gt;regards,&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12919153" author="joekumar" created="Fri, 8 Oct 2010 05:48:14 +0100"  >&lt;p&gt;I have fixed TestClassifier with making the parameters ngram, classifiertype and datasource as optional. Verified that this works. So to test a classifier (say with wikipedia example), the command would be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; $MAHOUT_HOME/bin/mahout testclassifier -m wikipediamodel -d wikipediainput -method mapreduce &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12919518" author="gangadhar" created="Sat, 9 Oct 2010 18:22:25 +0100"  >&lt;p&gt;I tested the &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-509&quot; title=&quot;Options in Bayes TrainClassifier and TestClassifier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-509&quot;&gt;&lt;del&gt;MAHOUT-509&lt;/del&gt;&lt;/a&gt;-fix-TestClassifier.patch and the classifier works without the extra parameters (the wiki commands work as stated in the wiki). I am not sure if this will get committed for the 0.4 release or will get deferred to 0.5.&lt;/p&gt;

&lt;p&gt;I checked the code you mentioned in the MahoutDriver.java and that seems a valid place to fix the trimming of the properties read. I will dig this a bit more and will create a JIRA issue for the 0.5 release.&lt;/p&gt;</comment>
                            <comment id="12921207" author="joekumar" created="Fri, 15 Oct 2010 04:05:38 +0100"  >&lt;p&gt;was someone able to apply &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-509&quot; title=&quot;Options in Bayes TrainClassifier and TestClassifier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-509&quot;&gt;&lt;del&gt;MAHOUT-509&lt;/del&gt;&lt;/a&gt;-fix-TestClassifier.patch so that the classifierType, dataSource and ngram are all optional params in TestClassifier &lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12921210" author="tdunning" created="Fri, 15 Oct 2010 04:48:49 +0100"  >&lt;p&gt;Committed 	&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-509&quot; title=&quot;Options in Bayes TrainClassifier and TestClassifier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-509&quot;&gt;&lt;del&gt;MAHOUT-509&lt;/del&gt;&lt;/a&gt;-fix-TestClassifier.patch&lt;/p&gt;

&lt;p&gt;Also accidentally committed a few additional items that I had been holding back on.  These are generally new code so they shouldn&apos;t have any&lt;br/&gt;
impact on users and all tests should still pass.&lt;/p&gt;</comment>
                            <comment id="12921225" author="hudson" created="Fri, 15 Oct 2010 05:54:58 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #399 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Mahout-Quality/399/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/Mahout-Quality/399/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-509&quot; title=&quot;Options in Bayes TrainClassifier and TestClassifier&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-509&quot;&gt;&lt;del&gt;MAHOUT-509&lt;/del&gt;&lt;/a&gt; make some parameters optional&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12456666" name="MAHOUT-509-fix-TestClassifier.patch" size="1959" author="joekumar" created="Fri, 8 Oct 2010 05:48:14 +0100"/>
                            <attachment id="12455233" name="MAHOUT-509.patch" size="7350" author="joekumar" created="Wed, 22 Sep 2010 05:51:49 +0100"/>
                            <attachment id="12456637" name="MAHOUT-509_1.patch" size="1059" author="gangadhar" created="Thu, 7 Oct 2010 22:41:54 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Sep 2010 10:18:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy4of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>