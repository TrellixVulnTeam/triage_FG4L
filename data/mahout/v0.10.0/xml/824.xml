<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:18:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-824/MAHOUT-824.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-824] FastByIDRunningAverage: Optimize SlopeOneRecommender by optimizing MemoryDiffStorage</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-824</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;The SlopeOneRecommender has by far the best RMS of all of the online recommenders in Mahout (that I&apos;ve found). Unfortunately the implementation also uses much more memory and is unuseable on my laptop.&lt;/p&gt;

&lt;p&gt;This patch optimizes memory (and speed) by folding FastByIDMap&amp;lt;RunningAverage&amp;gt; into one class: FastByIDRunningAverage. This is what it sounds like: a Long-addressable array of running averages (and optionally standard deviation).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525464">MAHOUT-824</key>
            <summary>FastByIDRunningAverage: Optimize SlopeOneRecommender by optimizing MemoryDiffStorage</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="lancenorskog">Lance Norskog</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Oct 2011 02:49:04 +0100</created>
                <updated>Thu, 9 Feb 2012 14:00:50 +0000</updated>
                            <resolved>Sun, 2 Oct 2011 08:04:00 +0100</resolved>
                                                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13118944" author="lancenorskog" created="Sun, 2 Oct 2011 02:52:40 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-824&quot; title=&quot;FastByIDRunningAverage: Optimize SlopeOneRecommender by optimizing MemoryDiffStorage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-824&quot;&gt;&lt;del&gt;MAHOUT-824&lt;/del&gt;&lt;/a&gt;.patch includes the whole project.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-824&quot; title=&quot;FastByIDRunningAverage: Optimize SlopeOneRecommender by optimizing MemoryDiffStorage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-824&quot;&gt;&lt;del&gt;MAHOUT-824&lt;/del&gt;&lt;/a&gt;.short.patch includes only additions to the utilities. FastByIRunningAverage and some fixes to FullRunningAverage&amp;amp;StdDev, and unit test enhancements.&lt;/p&gt;
</comment>
                            <comment id="13118947" author="lancenorskog" created="Sun, 2 Oct 2011 02:56:25 +0100"  >&lt;p&gt;The new MemoryDiffStorage2 is revamped to use FastByIDRunningAverage. The problem is that SlopeOneRecommender gives different RMS evaluation numbers on real data. The unit tests match- I&apos;ve added a bunch more unit tests trying to track down the problem. Only with real data is there a problem.  &lt;/p&gt;

&lt;p&gt;I&apos;m giving up for the nonce. SlopeOne is so much better that I still think it is worth optimizing, but I&apos;ve run out of steam.&lt;/p&gt;

&lt;p&gt;FastByIDRunningAverage is tight and could be used in other places, so I&apos;ve packaged it as a separate smaller patch.&lt;/p&gt;</comment>
                            <comment id="13118970" author="srowen" created="Sun, 2 Oct 2011 08:02:46 +0100"  >&lt;p&gt;I agree that slope-one is surprisingly effective, though storing all item-item diffs is expensive. The good news is that almost all item-item diffs carry virtually no info; they&apos;re noise. So, I think there&apos;s a much better way to dodge the memory constraint: prune the diffs. That can get you much farther than even optimizing away object overhead.&lt;/p&gt;

&lt;p&gt;See the constructors that let you cap the number of diffs stored. It can be reasonably smart; it throws out data based on standard deviation of the diffs.&lt;/p&gt;

&lt;p&gt;So, I&apos;d prefer to not yet add such a big amount of copy-and-paste. (And, see below, as you say, I don&apos;t think this quite works either, or at least there is some evidence it changes behavior.) I think it&apos;s fine work though and worth having in a patch; if it&apos;s really popular, well there&apos;s nothing terribly wrong with it, just duplicative.&lt;/p&gt;


&lt;p&gt;For the rest of the code &amp;#8211;&lt;/p&gt;

&lt;p&gt;I am happy to add more constructors for the running averages in general, sure, plus tests. I think some of the tests need a fix &amp;#8211; for example the copy constructor test doesn&apos;t test a copy.&lt;/p&gt;

&lt;p&gt;I can add the FastByIDMapTest. The copied keySet/values tests don&apos;t test those methods, really but I can remove them.&lt;/p&gt;

&lt;p&gt;I am not sure why the slope-one tests would need to be changed &amp;#8211; this suggests there&apos;s something about the changes that might have introduced a bug. I might have to peel some of that back if it looks like the case.&lt;/p&gt;

&lt;p&gt;Likewise, I am not sure why the IR stats eval would have changed; this ought not affect anything there.&lt;/p&gt;

&lt;p&gt;I would in general not want changes that make fields public or protected.&lt;/p&gt;</comment>
                            <comment id="13118971" author="srowen" created="Sun, 2 Oct 2011 08:04:00 +0100"  >&lt;p&gt;Marking &quot;WontFix&quot; but really, part was committed. The rest would have to be fixed up to pass tests first, and we&apos;d probably want more evidence it&apos;s justified over the existing pruning methods.&lt;/p&gt;</comment>
                            <comment id="13119016" author="hudson" created="Sun, 2 Oct 2011 15:36:48 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #1077 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1077/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1077/&lt;/a&gt;)&lt;br/&gt;
    Part of &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-824&quot; title=&quot;FastByIDRunningAverage: Optimize SlopeOneRecommender by optimizing MemoryDiffStorage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-824&quot;&gt;&lt;del&gt;MAHOUT-824&lt;/del&gt;&lt;/a&gt; &amp;#8211; some additional tests&lt;/p&gt;

&lt;p&gt;srowen : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1178133&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1178133&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/cf/taste/impl/common/FullRunningAverage.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/cf/taste/impl/common/FullRunningAverageAndStdDev.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/cf/taste/impl/common/FastByIDMapTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/cf/taste/impl/common/RunningAverageAndStdDevTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/cf/taste/impl/common/RunningAverageTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/cf/taste/impl/recommender/slopeone/MemoryDiffStorageTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13119116" author="lancenorskog" created="Mon, 3 Oct 2011 02:07:19 +0100"  >&lt;p&gt;Sure, this is fine. &lt;/p&gt;

&lt;p&gt;MemoryDiffStorage exposes the fact that it uses the RunningAverage(AndStdDev) classes. This was a vexing implementation leakage, and is why I had to add new constructors for FullRunningAverage(AndStdDev). If I went after it more, I would correct this.&lt;/p&gt;

&lt;p&gt;Anyway- is there a paper somewhere that defines the error loss for dropping samples in processOneUser? Is there a better subsampler than &apos;stop after the first N entries&apos;?&lt;/p&gt;</comment>
                            <comment id="13119181" author="srowen" created="Mon, 3 Oct 2011 08:55:57 +0100"  >&lt;p&gt;I don&apos;t have a paper; I am suggesting however that such pruning can even improve the result. A diff based on 1 user is different than one based on 100 users&apos; data. The pruning indeed appears dumb. Ideally it would at least throw out a &quot;poor&quot; diff in favor of a new one that&apos;s better. But, under this scheme, it&apos;s low-count diffs that are worst. And so a new 1-count diff is by definition among the worst. So it&apos;s as optimal a strategy as anything. Put another way, if you haven&apos;t seen an A-B diff at all in millions and millions of users, it&apos;s unlikely to be of consequence.&lt;/p&gt;</comment>
                            <comment id="13119335" author="tdunning" created="Mon, 3 Oct 2011 15:34:38 +0100"  >&lt;p&gt;For any method that doesn&apos;t have good regularization, trimming helps avoid over-training.  Slope-one and all of the correlation methods have zero regularization and are seriously susceptible to coincidence.  LLR trimming is kind of the simplest level of regularization.  Methods like latent factor log-linear have serious and real regularization and probably don&apos;t need trimming.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12497386" name="MAHOUT-824.patch" size="79600" author="lancenorskog" created="Sun, 2 Oct 2011 02:50:25 +0100"/>
                            <attachment id="12497387" name="MAHOUT-824.short.patch" size="36899" author="lancenorskog" created="Sun, 2 Oct 2011 02:50:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 2 Oct 2011 07:02:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy2r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>