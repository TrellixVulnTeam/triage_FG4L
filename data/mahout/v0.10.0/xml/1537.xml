<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:16:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1537/MAHOUT-1537.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1537] minor fixes to spark-shell</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1537</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Terminal clutters up after exiting spark shell (as terminal settings are changed within spark repl).&lt;/p&gt;

&lt;p&gt;Save and restore system terminal settings to avoid clutter.&lt;/p&gt;

&lt;p&gt;Also minor fix of prompt styling&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711820">MAHOUT-1537</key>
            <summary>minor fixes to spark-shell</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dlyubimov">Dmitriy Lyubimov</assignee>
                                    <reporter username="avati">Anand Avati</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 23:17:15 +0100</created>
                <updated>Mon, 13 Apr 2015 11:21:45 +0100</updated>
                            <resolved>Fri, 2 May 2014 19:45:36 +0100</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13987081" author="dlyubimov" created="Thu, 1 May 2014 23:23:12 +0100"  >&lt;p&gt;thank you. &lt;/p&gt;

&lt;p&gt;do you know why the terminal driver gets screwed in the first place? that was my question. This doesn&apos;t happen to neither scala nor spark shell. I&apos;d rather eradicate the source of it if it is known.&lt;/p&gt;</comment>
                            <comment id="13987085" author="avati" created="Thu, 1 May 2014 23:26:14 +0100"  >&lt;p&gt;Terminal gets screwed for spark shell too, and their wrapper script employs the same technique (stty -g and restore). I just copied the technique for our wrapper too.&lt;/p&gt;</comment>
                            <comment id="13987423" author="ssc" created="Fri, 2 May 2014 07:23:44 +0100"  >&lt;p&gt;I&apos;ve run into that issue when playing with the spark-shell, would be great to see that fixed.&lt;/p&gt;</comment>
                            <comment id="13987432" author="ssc" created="Fri, 2 May 2014 07:38:26 +0100"  >&lt;p&gt;I&apos;ve tried the patch and I still cannot see my keyboard inputs into the terminal after leaving the shell with :quit&lt;/p&gt;</comment>
                            <comment id="13987446" author="avati" created="Fri, 2 May 2014 07:52:02 +0100"  >&lt;p&gt;Odd, with the patch both :quit and ctrl-D work cleanly for me. What OS and terminal are you using? What is your $(echo $TERM)?&lt;/p&gt;</comment>
                            <comment id="13987449" author="ssc" created="Fri, 2 May 2014 07:54:42 +0100"  >&lt;p&gt;standard terminal on ubuntu 12.04 LTS, $TERM is xterm&lt;/p&gt;</comment>
                            <comment id="13987457" author="avati" created="Fri, 2 May 2014 08:11:37 +0100"  >&lt;p&gt;I just tried on a Mac and the patch fixes the problem on a mac as well. I don&apos;t have an Ubuntu at hand to check. It might be helpful to try this:&lt;/p&gt;

&lt;p&gt;sh$ save=`stty -g`&lt;br/&gt;
sh$ mahout spark-shell&lt;br/&gt;
....&lt;br/&gt;
mahout&amp;gt; :quit&lt;br/&gt;
...&lt;br/&gt;
sh$ &amp;lt;garbled&amp;gt;&lt;br/&gt;
sh$ stty $save # type it in &quot;blind faith&quot; even if invisible&lt;br/&gt;
sh$ &amp;lt;OK now&amp;gt;&lt;/p&gt;

&lt;p&gt;Does the above manual test work for you, or no?&lt;/p&gt;</comment>
                            <comment id="13987467" author="ssc" created="Fri, 2 May 2014 08:30:00 +0100"  >&lt;p&gt;If I run the shell on current trunk, the terminal is simply frozen after I exit the shell. If I run it with your patch, the terminal is working but I can&apos;t see my keyboard inputs. The manual test didn&apos;t work, because I cannot enter commands anymore.&lt;/p&gt;

&lt;p&gt;So your patch already helps.&lt;/p&gt;</comment>
                            <comment id="13987470" author="avati" created="Fri, 2 May 2014 08:39:14 +0100"  >&lt;p&gt;Can you further fix the situation by running&lt;/p&gt;

&lt;p&gt;sh$ stty echo&lt;/p&gt;

&lt;p&gt;after returning from shell (with the patch)?&lt;/p&gt;</comment>
                            <comment id="13987471" author="avati" created="Fri, 2 May 2014 08:40:24 +0100"  >&lt;p&gt;or even:&lt;/p&gt;

&lt;p&gt;sh$ stty sane&lt;/p&gt;
</comment>
                            <comment id="13987474" author="ssc" created="Fri, 2 May 2014 08:46:24 +0100"  >&lt;p&gt;After entering stty echo everything works well with your patch, strange&lt;/p&gt;</comment>
                            <comment id="13987481" author="avati" created="Fri, 2 May 2014 09:02:37 +0100"  >&lt;p&gt;Included &apos;stty sane&apos; before &apos;stty $save_tty&apos;.&lt;/p&gt;</comment>
                            <comment id="13987485" author="ssc" created="Fri, 2 May 2014 09:09:22 +0100"  >&lt;p&gt;still doesn&apos;t help unfortunately&lt;/p&gt;</comment>
                            <comment id="13987495" author="avati" created="Fri, 2 May 2014 09:27:46 +0100"  >&lt;p&gt;what is the output of&lt;/p&gt;

&lt;p&gt;sh$ stty -g&lt;/p&gt;

&lt;p&gt;on a new/fresh terminal?&lt;/p&gt;</comment>
                            <comment id="13987507" author="ssc" created="Fri, 2 May 2014 09:51:29 +0100"  >&lt;p&gt;6d02:5:4bf:8a3b:3:1c:7f:15:4:0:1:ff:11:13:1a:ff:12:f:17:16:ff:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0&lt;/p&gt;</comment>
                            <comment id="13988011" author="avati" created="Fri, 2 May 2014 18:55:38 +0100"  >&lt;p&gt;There was a typo in the previous patch. Fixed in this. Sabastien, could you please test this instead?&lt;/p&gt;</comment>
                            <comment id="13988022" author="ssc" created="Fri, 2 May 2014 19:01:28 +0100"  >&lt;p&gt;I had already fixed that in my last (unsuccessful) attempt. &lt;/p&gt;</comment>
                            <comment id="13988026" author="ssc" created="Fri, 2 May 2014 19:04:04 +0100"  >&lt;p&gt;Could someone else try that on Ubuntu? Maybe somethings wrong with my machine or setup...&lt;/p&gt;</comment>
                            <comment id="13988074" author="dlyubimov" created="Fri, 2 May 2014 19:38:02 +0100"  >&lt;p&gt;i will try it.&lt;/p&gt;</comment>
                            <comment id="13988078" author="avati" created="Fri, 2 May 2014 19:42:11 +0100"  >&lt;p&gt;It may also be worth testing if changing:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stty sane; stty $save_tty&lt;br/&gt;
+ stty $save_tty; stty echo&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;makes things better on Ubuntu?&lt;/p&gt;</comment>
                            <comment id="13988083" author="dlyubimov" created="Fri, 2 May 2014 19:45:31 +0100"  >&lt;p&gt;works for me on Kubuntu 12 LTS. Committed. Thank you Anand. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
commit a34d4510b2818ca29b21d9c31dab02a4dee02a6b
Author: Dmitriy Lyubimov &amp;lt;dlyubimov@apache.org&amp;gt;
Date:   Fri May 2 18:44:28 2014 +0000

    MAHOUT-1537 minor fixes to spark-shell (Anand Avati via dlyubimov)
    
    git-svn-id: https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/mahout/trunk@1592006 13f79535-47bb-0310-9956-ffa450edef68
&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13988235" author="hudson" created="Fri, 2 May 2014 21:57:39 +0100"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #2603 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2603/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2603/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1537&quot; title=&quot;minor fixes to spark-shell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1537&quot;&gt;&lt;del&gt;MAHOUT-1537&lt;/del&gt;&lt;/a&gt; minor fixes to spark-shell (Anand Avati via dlyubimov) (dlyubimov: rev 1592006)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/bin/mahout&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/spark-shell/src/main/scala/org/apache/mahout/sparkbindings/shell/MahoutSparkILoop.scala&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13988653" author="ssc" created="Sat, 3 May 2014 12:41:51 +0100"  >&lt;p&gt;works for me now as well in Ubuntu, thanks Anand&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12643083" name="0001-spark-shell-unclutter-terminal-on-exit.patch" size="858" author="avati" created="Fri, 2 May 2014 18:55:38 +0100"/>
                            <attachment id="12643012" name="0001-spark-shell-unclutter-terminal-on-exit.patch" size="857" author="avati" created="Fri, 2 May 2014 09:02:37 +0100"/>
                            <attachment id="12642933" name="0001-spark-shell-unclutter-terminal-on-exit.patch" size="847" author="avati" created="Thu, 1 May 2014 23:20:33 +0100"/>
                            <attachment id="12642934" name="0002-spark-shell-aesthetic-fix.patch" size="1067" author="avati" created="Thu, 1 May 2014 23:20:33 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 May 2014 22:23:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzp1zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>