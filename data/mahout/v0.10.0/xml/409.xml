<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:18:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-409/MAHOUT-409.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-409] Find bugs finds some bugs in our code</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-409</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;I will produce a patch shortly that fixes some low hanging fruit highlighted by findbugs.&lt;/p&gt;

&lt;p&gt;Notably this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.-1824009442/source.8285/#44&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.-1824009442/source.8285/#44&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.-694648638/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.-694648638/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.-1787470473/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.-1787470473/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.921339475/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/48/findbugsResult/HIGH/type.921339475/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466137">MAHOUT-409</key>
            <summary>Find bugs finds some bugs in our code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tdunning">Ted Dunning</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 23:54:59 +0100</created>
                <updated>Sun, 31 Oct 2010 15:49:34 +0000</updated>
                            <resolved>Sat, 5 Jun 2010 08:05:46 +0100</resolved>
                                    <version>0.3</version>
                                    <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12875348" author="tdunning" created="Fri, 4 Jun 2010 00:11:33 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-409&quot; title=&quot;Find bugs finds some bugs in our code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-409&quot;&gt;&lt;del&gt;MAHOUT-409&lt;/del&gt;&lt;/a&gt; - simple fixes for problems noted by FindBugs&lt;br/&gt;
EigenStatus should synch on this&lt;br/&gt;
IntPairWritable.Comparator and FirstGroupingComparator can&apos;t be serialized because of lack of super constructor&lt;br/&gt;
Likewise with GramKeyGroupComparator and CountUsersKeyWritable.CountUsersGroupComparator&lt;/p&gt;</comment>
                            <comment id="12875349" author="srowen" created="Fri, 4 Jun 2010 00:11:42 +0100"  >&lt;p&gt;Yeah &apos;inProgress&apos; can at best be a volatile boolean, if it were ever used as a &apos;done&apos; flag in a multi-threaded situation, but doesn&apos;t seem so. It can just be a boolean, no sync.&lt;/p&gt;

&lt;p&gt;The Comparator issues... well Comparators are typically Serializable for good measure since they are often packaged into Collection implementations, which are Serializable, and so must be as well. But it&apos;s right, the Hadoop Comparator they extend isn&apos;t serialization-friendly so just make the subclasses unserializable.&lt;/p&gt;

&lt;p&gt;The clone() issue is actually not an issue.&lt;/p&gt;

&lt;p&gt;The mutable array thing is easily addressed, if we want to shut it up, with an unmodifiable LIst. It&apos;s not actually an issue.&lt;/p&gt;

&lt;p&gt;The floating-point issues are as well all non-issues, actually.&lt;/p&gt;</comment>
                            <comment id="12875350" author="tdunning" created="Fri, 4 Jun 2010 00:12:48 +0100"  >&lt;p&gt;If I don&apos;t hear any complaints about this I will commit it in a day or so.&lt;/p&gt;

&lt;p&gt;Note that I deleted Serializable from several classes so if that is against your religion, please speak up.&lt;/p&gt;</comment>
                            <comment id="12875351" author="srowen" created="Fri, 4 Jun 2010 00:13:23 +0100"  >&lt;p&gt;Ah there&apos;s the patch. Exactly. synchronization can be removed in EigenStatus and made a primitive, it&apos;s not doing anything.&lt;/p&gt;</comment>
                            <comment id="12875357" author="tdunning" created="Fri, 4 Jun 2010 00:24:10 +0100"  >&lt;blockquote&gt;&lt;p&gt;The floating-point issues are as well all non-issues, actually.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, they are mostly non-issues.  There is one where there is a check == 0.5 and then a special case for a division that would diverge there.  The correct answer is to check for \approx 0.5 and insert an order-1 approximation.  To do otherwise may court numerical issues.&lt;/p&gt;

&lt;p&gt;I will go ahead and just make inProgress be volatile in case somebody cares some day.&lt;/p&gt;</comment>
                            <comment id="12875359" author="tdunning" created="Fri, 4 Jun 2010 00:37:14 +0100"  >&lt;p&gt;Slightly better patch.&lt;/p&gt;</comment>
                            <comment id="12875362" author="jake.mannix" created="Fri, 4 Jun 2010 00:38:16 +0100"  >&lt;p&gt;So as the creator of the not-correctly-synchronizing bug, the original intention of it is actually improperly used in o.a.m.math.decomposer.AsyncEigenVerifier, which sync&apos;s on an EigenStatus: one thread is doing computation, and another thread is doing computation in a loop.  The latter thread after each iteration, checks the EigenStatus to see if it&apos;s still &quot;inProgress()&quot;, which the first thread sets to false when it&apos;s done.  Unfortunately, I don&apos;t think even that is being done correctly, if you look at how it&apos;s done, it&apos;s not synchronizing on a proper final lock object.  &lt;/p&gt;

&lt;p&gt;So while yes, removing the lock on the boolean is correct, it reminds me that the way thread synchronization was coded (by me), it appears to have been done completely  unsafely.  As it turns out, the synchronization in practice is between two different threads who only make checks once every couple 10&apos;s of seconds up to once every 10&apos;s of minutes (depending on the data set), and so collisions on updating a single reference are basically infinitessimal.  Doesn&apos;t make it any more correct, but fairly innocuous, at least.&lt;/p&gt;</comment>
                            <comment id="12875370" author="tdunning" created="Fri, 4 Jun 2010 01:00:23 +0100"  >&lt;blockquote&gt;
&lt;p&gt;So while yes, removing the lock on the boolean is correct, it reminds me that the way thread synchronization was coded (by me), it appears to have been done completely  unsafely.  As it turns out, the synchronization in practice is between two different threads who only make checks once every couple 10&apos;s of seconds up to once every 10&apos;s of minutes (depending on the data set), and so collisions on updating a single reference are basically infinitessimal.  Doesn&apos;t make it any more correct, but fairly innocuous, at least.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I left the field as volatile in the latest patch which will give the desired semantics (for the flag, not the use of same).  &lt;/p&gt;</comment>
                            <comment id="12875878" author="tdunning" created="Sat, 5 Jun 2010 08:05:29 +0100"  >&lt;p&gt;Committed r951663&lt;/p&gt;</comment>
                            <comment id="12875879" author="tdunning" created="Sat, 5 Jun 2010 08:05:46 +0100"  >&lt;p&gt;Committed the last patch.&lt;/p&gt;</comment>
                            <comment id="12875884" author="hudson" created="Sat, 5 Jun 2010 09:37:49 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #51 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/51/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Mahout-Quality/51/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-409&quot; title=&quot;Find bugs finds some bugs in our code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-409&quot;&gt;&lt;del&gt;MAHOUT-409&lt;/del&gt;&lt;/a&gt; - small fixes to decrease the findBugs output.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446300" name="MAHOUT-409.patch" size="5806" author="tdunning" created="Fri, 4 Jun 2010 00:37:13 +0100"/>
                            <attachment id="12446298" name="MAHOUT-409.patch" size="4778" author="tdunning" created="Fri, 4 Jun 2010 00:11:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Jun 2010 23:11:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9655</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy5an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>