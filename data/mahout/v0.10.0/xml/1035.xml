<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:27:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1035/MAHOUT-1035.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1035] Hotspot in recommenditembased &#8211; UnsymmetrifyMapper job</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1035</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;While profiling the unsymmetrify mapper job in recommendations we noticed an hotspot consuming 90% of the CPU runtime in org.apache.mahout.math.map.OpenIntDoubleHashMap.keys method for the first map task.  We used the script provided in mahout examples for running ASF Email recommendations for profiling.  The attached patch addresses  the hotspot by reducing the number of for loop iterations in OpenIntDoubleHashMap.keys method by changing the initialization of transposedPartial.  This patch while retaining functionality(verified the output with and without patch) speeds up the unsymmetrify mapper task by more than 4X on x86 architectures.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596348">MAHOUT-1035</key>
            <summary>Hotspot in recommenditembased &#8211; UnsymmetrifyMapper job</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ssc">Sebastian Schelter</assignee>
                                    <reporter username="bhaskar.devireddy">Bhaskar Devireddy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 03:45:41 +0100</created>
                <updated>Mon, 3 Feb 2014 08:05:44 +0000</updated>
                            <resolved>Fri, 29 Jun 2012 22:51:56 +0100</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13403722" author="ssc" created="Fri, 29 Jun 2012 07:17:23 +0100"  >&lt;p&gt;Nice find!&lt;/p&gt;

&lt;p&gt;I think the problem with the like() call is that the newly created vector has the same initial capacity as the vector on which like() is invoked (a row of the similarity matrix here). This doesn&apos;t make any sense here and potentially wastes a lot of memory.&lt;/p&gt;

&lt;p&gt;I think we should simply change the creation to &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Vector transposedPartial = new RandomAccessSparseVector(similarities.size(), 1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t get the second part of your patch where you change OpenKeyTypeValueTypeHashMap. IMHO there shouldn&apos;t be a way to early terminate that loop, did I look over something?&lt;/p&gt;</comment>
                            <comment id="13403998" author="bhaskar.devireddy" created="Fri, 29 Jun 2012 17:16:15 +0100"  >&lt;p&gt;Made changes to the initial patch and incorporated your comments.&lt;br/&gt;
The Hashmap change is to improve performance of keys method in cases where the initial capacity is huge with very few elements populated.  But in this case it won&apos;t help since we are fixing the initial capacity.  I removed it from the patch.&lt;/p&gt;</comment>
                            <comment id="13404254" author="ssc" created="Fri, 29 Jun 2012 22:51:06 +0100"  >&lt;p&gt;Changed a few other places where like was cautiously used.&lt;/p&gt;</comment>
                            <comment id="13404314" author="hudson" created="Sat, 30 Jun 2012 00:27:19 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #1565 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1565/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1565/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1035&quot; title=&quot;Hotspot in recommenditembased &#8211; UnsymmetrifyMapper job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1035&quot;&gt;&lt;del&gt;MAHOUT-1035&lt;/del&gt;&lt;/a&gt; Hotspot in recommenditembased &#8211; UnsymmetrifyMapper job (Revision 1355573)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ssc : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1355573&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1355573&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/similarity/cooccurrence/RowSimilarityJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/similarity/cooccurrence/Vectors.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12534052" name="MAHOUT-1035.patch" size="3317" author="ssc" created="Fri, 29 Jun 2012 22:51:06 +0100"/>
                            <attachment id="12533931" name="patch_1035.patch" size="1847" author="bhaskar.devireddy" created="Fri, 29 Jun 2012 03:47:55 +0100"/>
                            <attachment id="12534002" name="patch_1035_ver2.patch" size="1186" author="bhaskar.devireddy" created="Fri, 29 Jun 2012 17:16:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jun 2012 06:17:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy1gv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>