<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:28:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1161/MAHOUT-1161.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1161] Unable to run CJKAnalyzer for conversion of a sequence file to sparse vector due to instantiation exception.</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1161</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Unable to run CJKAnalyzer while runnig the mahout command seq2sparse along with option -a &quot;org.apache.lucene.analysis.cjk.CJKAnalyzer&quot;.The problem is with instantiation of CJKAnanlyzer class.&lt;/p&gt;

&lt;p&gt;Executed Command :&lt;/p&gt;

&lt;p&gt;mahout seq2sparse -i inpuDir -o OutputDir -ow &lt;br/&gt;
-a org.apache.lucene.analysis.cjk.CJKAnalyzer -chunk 200 -wt tfidf -s 5 -md 3 -x 90 -ng 2 -ml 50 -seq&lt;/p&gt;

&lt;p&gt;Error Stack trace :&lt;/p&gt;

&lt;p&gt;MAHOUT-JOB: /home/ajit/mahout-0.5-cdh3u5/mahout-examples-0.5-cdh3u5-job.jar&lt;br/&gt;
13/03/12 15:56:15 INFO vectorizer.SparseVectorsFromSequenceFiles: Maximum n-gram size is: 2&lt;br/&gt;
13/03/12 15:56:16 INFO vectorizer.SparseVectorsFromSequenceFiles: Minimum LLR value: 50.0&lt;br/&gt;
13/03/12 15:56:16 INFO vectorizer.SparseVectorsFromSequenceFiles: Number of reduce tasks: 1&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.InstantiationException: org.apache.lucene.analysis.cjk.CJKAnalyzer&lt;br/&gt;
	at java.lang.Class.newInstance0(Class.java:340)&lt;br/&gt;
	at java.lang.Class.newInstance(Class.java:308)&lt;br/&gt;
	at org.apache.mahout.vectorizer.SparseVectorsFromSequenceFiles.run(SparseVectorsFromSequenceFiles.java:198)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
	at org.apache.mahout.vectorizer.SparseVectorsFromSequenceFiles.main(SparseVectorsFromSequenceFiles.java:52)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)&lt;br/&gt;
	at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)&lt;br/&gt;
	at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:187)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:197)&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Using Centos(6.3) OS ,hadoop-0.20.2-cdh3u5,JDK 1.6&lt;/p&gt;</environment>
        <key id="12636574">MAHOUT-1161</key>
            <summary>Unable to run CJKAnalyzer for conversion of a sequence file to sparse vector due to instantiation exception.</summary>
                <type id="11" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Question</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ssc">Sebastian Schelter</assignee>
                                    <reporter username="apache_ajit">ajit kumar</reporter>
                        <labels>
                            <label>features</label>
                            <label>test</label>
                    </labels>
                <created>Tue, 12 Mar 2013 13:41:43 +0000</created>
                <updated>Mon, 3 Feb 2014 08:05:54 +0000</updated>
                            <resolved>Tue, 9 Apr 2013 06:27:20 +0100</resolved>
                                    <version>0.5</version>
                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13616380" author="ssc" created="Thu, 28 Mar 2013 16:01:49 +0000"  >&lt;p&gt;Ajit,&lt;/p&gt;

&lt;p&gt;this patch in trunk should fix the issue, can you test it?&lt;/p&gt;</comment>
                            <comment id="13616390" author="ssc" created="Thu, 28 Mar 2013 16:15:07 +0000"  >&lt;p&gt;I modified the code to always try an instantation with the supplied Lucene Version, and as fallback to try one without. Can someone with more Lucene knowledge confirm that this is ok?&lt;/p&gt;</comment>
                            <comment id="13622086" author="rohit.haritash" created="Thu, 4 Apr 2013 13:28:25 +0100"  >&lt;p&gt;Hi when envoking the CJK Analyser getting the following exception. The following is the trace. I am using this analyser in mahout .7 with lucene-core 3.6.&lt;/p&gt;

&lt;p&gt;java.lang.IllegalStateException: java.lang.NoSuchMethodException: org.apache.lucene.analysis.cjk.CJKAnalyzer.&amp;lt;init&amp;gt;()&lt;br/&gt;
	at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:68)&lt;br/&gt;
	at com.tcs.test.kmeans.AnalyzerUtils.createAnalyzer(AnalyzerUtils.java:52)&lt;br/&gt;
	at com.tcs.test.kmeans.AnalyzerUtils.createAnalyzer(AnalyzerUtils.java:28)&lt;br/&gt;
	at com.tcs.test.kmeans.AnalyzerUtilsTest.createCJKAnalyzer(AnalyzerUtilsTest.java:23)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:220)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: java.lang.NoSuchMethodException: org.apache.lucene.analysis.cjk.CJKAnalyzer.&amp;lt;init&amp;gt;()&lt;br/&gt;
	at java.lang.Class.getConstructor0(Class.java:2706)&lt;br/&gt;
	at java.lang.Class.getConstructor(Class.java:1657)&lt;br/&gt;
	at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:62)&lt;br/&gt;
	... 27 more&lt;/p&gt;

</comment>
                            <comment id="13622088" author="ssc" created="Thu, 4 Apr 2013 13:31:02 +0100"  >&lt;p&gt;Hi Rohit,&lt;/p&gt;

&lt;p&gt;can you test wether the attached patch (supplied to the trunk) fixes the problem for you?&lt;/p&gt;</comment>
                            <comment id="13622171" author="rohit.haritash" created="Thu, 4 Apr 2013 14:19:28 +0100"  >&lt;p&gt;Hi Sebastian , &lt;/p&gt;

&lt;p&gt;Tested with the jars in trunk(Mahout snapshot.8) getting same exception-&lt;/p&gt;

&lt;p&gt;Invoke the method like :&lt;/p&gt;

&lt;p&gt;DocumentProcessor.tokenizeDocuments(new Path(inputDir),&lt;br/&gt;
AnalyzerUtils.createAnalyzer(CJKAnalyzer.class).getClass().asSubclass(Analyzer.class), tokenizedPath,&lt;br/&gt;
hadoopConfiguration);&lt;/p&gt;

&lt;p&gt;Same exception when performing the Junit testing. &lt;/p&gt;


&lt;p&gt;SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.&lt;br/&gt;
SLF4J: Defaulting to no-operation (NOP) logger implementation&lt;br/&gt;
SLF4J: See &lt;a href=&quot;http://www.slf4j.org/codes.html#StaticLoggerBinder&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.slf4j.org/codes.html#StaticLoggerBinder&lt;/a&gt; for further details.&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.NoSuchMethodException: org.apache.lucene.analysis.cjk.CJKAnalyzer.&amp;lt;init&amp;gt;()&lt;br/&gt;
	at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:68)&lt;br/&gt;
	at org.apache.mahout.common.lucene.AnalyzerUtils.createAnalyzer(AnalyzerUtils.java:68)&lt;br/&gt;
	at org.apache.mahout.common.lucene.AnalyzerUtils.createAnalyzer(AnalyzerUtils.java:54)&lt;br/&gt;
	at com.tcs.test.kmeans.NewsKMeansClustering.main(NewsKMeansClustering.java:63)&lt;br/&gt;
Caused by: java.lang.NoSuchMethodException: org.apache.lucene.analysis.cjk.CJKAnalyzer.&amp;lt;init&amp;gt;()&lt;br/&gt;
	at java.lang.Class.getConstructor0(Class.java:2706)&lt;br/&gt;
	at java.lang.Class.getConstructor(Class.java:1657)&lt;br/&gt;
	at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:62)&lt;br/&gt;
	... 3 more&lt;/p&gt;</comment>
                            <comment id="13622190" author="gsingers" created="Thu, 4 Apr 2013 14:31:25 +0100"  >&lt;p&gt;Sebastian, that&apos;s a reasonable approach, although it won&apos;t cover everything.  The fallback is for users to write a simple wrapper that provides a no-arg constructor&lt;/p&gt;</comment>
                            <comment id="13622351" author="ssc" created="Thu, 4 Apr 2013 15:06:04 +0100"  >&lt;p&gt;@rohit did you apply the patch from this jira issue?&lt;/p&gt;</comment>
                            <comment id="13625593" author="rohit.haritash" created="Mon, 8 Apr 2013 18:50:10 +0100"  >&lt;p&gt;@Sebastian Schelter : I applied the patch . The code is working fine. Thanks +1. Please commit to trunk. &lt;/p&gt;</comment>
                            <comment id="13626414" author="hudson" created="Tue, 9 Apr 2013 10:20:27 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #1956 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1956/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1956/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1161&quot; title=&quot;Unable to run CJKAnalyzer for conversion of a sequence file to sparse vector due to instantiation exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1161&quot;&gt;&lt;del&gt;MAHOUT-1161&lt;/del&gt;&lt;/a&gt; Unable to run CJKAnalyzer for conversion of a sequence file to sparse vector due to instantiation exception (Revision 1465885)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1161&quot; title=&quot;Unable to run CJKAnalyzer for conversion of a sequence file to sparse vector due to instantiation exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1161&quot;&gt;&lt;del&gt;MAHOUT-1161&lt;/del&gt;&lt;/a&gt; Unable to run CJKAnalyzer for conversion of a sequence file to sparse vector due to instantiation exception (Revision 1465883)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ssc : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/common/lucene&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/common/lucene/AnalyzerUtilsTest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ssc : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/CHANGELOG&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/lucene/AnalyzerUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12575883" name="MAHOUT-1161.patch" size="3752" author="ssc" created="Thu, 28 Mar 2013 16:01:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Mar 2013 16:01:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317066</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzck7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>