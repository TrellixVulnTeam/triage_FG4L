<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:17:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1622/MAHOUT-1622.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1622] MultithreadedBatchItemSimilarities outputs incorrect number of similarities.</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1622</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;In some cases the Output class in MultithreadedBatchItemSimilarities does not output all of the similarity pairs that it should. It is very possible for the number of active workers to go to zero while in the while loop, in which case the remaining similarities for the finished workers will not be flushed to the output. This is because the while loop is only conditioned on whether there are active workers or not. An easy fix is to also check to make sure the results structure is not empty. This way both the number of active workers must be 0 and the result set must be empty to exit the while loop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12748744">MAHOUT-1622</key>
            <summary>MultithreadedBatchItemSimilarities outputs incorrect number of similarities.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="avati">Anand Avati</assignee>
                                    <reporter username="jdaniels">Jesse Daniels</reporter>
                        <labels>
                            <label>legacy</label>
                    </labels>
                <created>Thu, 16 Oct 2014 23:22:37 +0100</created>
                <updated>Mon, 13 Apr 2015 10:57:42 +0100</updated>
                            <resolved>Sun, 5 Apr 2015 18:43:01 +0100</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="14174357" author="jdaniels" created="Thu, 16 Oct 2014 23:24:10 +0100"  >&lt;p&gt;Patch with test case&lt;/p&gt;</comment>
                            <comment id="14174369" author="jdaniels" created="Thu, 16 Oct 2014 23:26:26 +0100"  >&lt;p&gt;.patch file with proposed fix and accompanying test case.&lt;/p&gt;</comment>
                            <comment id="14396096" author="githubbot" created="Sun, 5 Apr 2015 07:06:50 +0100"  >&lt;p&gt;GitHub user avati opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;: MultithreadedBatchItemSimilarities output fix&lt;/p&gt;

&lt;p&gt;    Rebased batchSimilarities.patch attached in &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt; and resolved conflicts. Tests pass on laptop and good for merge.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/avati/mahout&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/avati/mahout&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #106&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5e15c62df3406cbe69465eee42fbddb0c439bb8a&lt;br/&gt;
Author: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;br/&gt;
Date:   2015-04-05T05:59:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;: MultithreadedBatchItemSimilarities output fix&lt;/p&gt;

&lt;p&gt;    In some cases the Output class in MultithreadedBatchItemSimilarities does&lt;br/&gt;
    not output all of the similarity pairs that it should. It is very possible&lt;br/&gt;
    for the number of active workers to go to zero while in the while loop,&lt;br/&gt;
    in which case the remaining similarities for the finished workers will not&lt;br/&gt;
    be flushed to the output. This is because the while loop is only&lt;br/&gt;
    conditioned on whether there are active workers or not. An easy fix is to&lt;br/&gt;
    also check to make sure the results structure is not empty. This way both&lt;br/&gt;
    the number of active workers must be 0 and the result set must be empty to&lt;br/&gt;
    exit the while loop.&lt;/p&gt;

&lt;p&gt;    On-behalf-of: Jesse Daniels &amp;lt;jessedaniels1@gmail.com&amp;gt;&lt;br/&gt;
    Signed-off-by: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14396100" author="avati" created="Sun, 5 Apr 2015 07:14:18 +0100"  >&lt;p&gt;Attached patch had minor conflict / trivial rebasing. Please find tested (on laptop) PR at &lt;a href=&quot;https://github.com/apache/mahout/pull/106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14396111" author="githubbot" created="Sun, 5 Apr 2015 07:30:29 +0100"  >&lt;p&gt;Github user smarthi commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#issuecomment-89727191&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#issuecomment-89727191&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Patch looks good to ship, would appreciate if u could update the codebase for Java 7. Remove calls to guava collections like Lists, Maps etc and replace them by Java 7 constructs.&lt;/p&gt;</comment>
                            <comment id="14396117" author="githubbot" created="Sun, 5 Apr 2015 07:58:14 +0100"  >&lt;p&gt;Github user avati commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#issuecomment-89729423&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#issuecomment-89729423&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Updated.&lt;/p&gt;</comment>
                            <comment id="14396119" author="githubbot" created="Sun, 5 Apr 2015 08:00:15 +0100"  >&lt;p&gt;Github user smarthi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775370&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775370&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java &amp;#8212;&lt;br/&gt;
    @@ -26,7 +26,7 @@&lt;br/&gt;
     import java.util.concurrent.TimeUnit;&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicInteger;&lt;/p&gt;

&lt;p&gt;    -import com.google.common.collect.Lists;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
     import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    U should be able to get rid of Closeables too, and replace that with Java 7 try - resources;  don&apos;t worry about that I&apos;ll take care of it. JFyi.&lt;/p&gt;</comment>
                            <comment id="14396122" author="githubbot" created="Sun, 5 Apr 2015 08:12:15 +0100"  >&lt;p&gt;Github user avati commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775411&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775411&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java &amp;#8212;&lt;br/&gt;
    @@ -26,7 +26,7 @@&lt;br/&gt;
     import java.util.concurrent.TimeUnit;&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicInteger;&lt;/p&gt;

&lt;p&gt;    -import com.google.common.collect.Lists;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
     import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Argh, I blindly replaced only collections! I could have removed Closeables as well, would be trivial. I&apos;m assuming you will be doing it, based on your previous comment.&lt;/p&gt;</comment>
                            <comment id="14396123" author="githubbot" created="Sun, 5 Apr 2015 08:13:40 +0100"  >&lt;p&gt;Github user smarthi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775419&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775419&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java &amp;#8212;&lt;br/&gt;
    @@ -26,7 +26,7 @@&lt;br/&gt;
     import java.util.concurrent.TimeUnit;&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicInteger;&lt;/p&gt;

&lt;p&gt;    -import com.google.common.collect.Lists;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
     import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Go ahead and do it if u like, I have a big change coming up which fixes&lt;br/&gt;
    some of that stuff.&lt;/p&gt;

&lt;p&gt;    On Sun, Apr 5, 2015 at 3:12 AM, Anand Avati &amp;lt;notifications@github.com&amp;gt;&lt;br/&gt;
    wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; In&lt;br/&gt;
    &amp;gt; mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775411&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775411&lt;/a&gt;&amp;gt;:&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &amp;gt; @@ -26,7 +26,7 @@&lt;br/&gt;
    &amp;gt; &amp;gt;  import java.util.concurrent.TimeUnit;&lt;br/&gt;
    &amp;gt; &amp;gt;  import java.util.concurrent.atomic.AtomicInteger;&lt;br/&gt;
    &amp;gt; &amp;gt;&lt;br/&gt;
    &amp;gt; &amp;gt; -import com.google.common.collect.Lists;&lt;br/&gt;
    &amp;gt; &amp;gt; +import java.util.ArrayList;&lt;br/&gt;
    &amp;gt; &amp;gt;  import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; Argh, I blindly replaced only collections! I could have removed Closeables&lt;br/&gt;
    &amp;gt; as well, would be trivial. I&apos;m assuming you will be doing it, based on your&lt;br/&gt;
    &amp;gt; previous comment.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/mahout/pull/106/files#r27775411&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106/files#r27775411&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="14396125" author="githubbot" created="Sun, 5 Apr 2015 08:17:28 +0100"  >&lt;p&gt;Github user avati commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775426&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java &amp;#8212;&lt;br/&gt;
    @@ -26,7 +26,7 @@&lt;br/&gt;
     import java.util.concurrent.TimeUnit;&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicInteger;&lt;/p&gt;

&lt;p&gt;    -import com.google.common.collect.Lists;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
     import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Done / pushed.&lt;/p&gt;</comment>
                            <comment id="14396127" author="githubbot" created="Sun, 5 Apr 2015 08:20:23 +0100"  >&lt;p&gt;Github user avati commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775438&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java &amp;#8212;&lt;br/&gt;
    @@ -26,7 +26,7 @@&lt;br/&gt;
     import java.util.concurrent.TimeUnit;&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicInteger;&lt;/p&gt;

&lt;p&gt;    -import com.google.common.collect.Lists;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
     import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    For some reason there is a delay in GitHub reflecting branch changes in PR.&lt;/p&gt;</comment>
                            <comment id="14396129" author="githubbot" created="Sun, 5 Apr 2015 08:21:19 +0100"  >&lt;p&gt;Github user smarthi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775440&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775440&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java &amp;#8212;&lt;br/&gt;
    @@ -26,7 +26,7 @@&lt;br/&gt;
     import java.util.concurrent.TimeUnit;&lt;br/&gt;
     import java.util.concurrent.atomic.AtomicInteger;&lt;/p&gt;

&lt;p&gt;    -import com.google.common.collect.Lists;&lt;br/&gt;
    +import java.util.ArrayList;&lt;br/&gt;
     import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I am seeing github issues too, consistently been getting RPC timeouts for&lt;br/&gt;
    the past 30 mins.&lt;/p&gt;

&lt;p&gt;    On Sun, Apr 5, 2015 at 3:20 AM, Anand Avati &amp;lt;notifications@github.com&amp;gt;&lt;br/&gt;
    wrote:&lt;/p&gt;

&lt;p&gt;    &amp;gt; In&lt;br/&gt;
    &amp;gt; mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/mahout/pull/106#discussion_r27775438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#discussion_r27775438&lt;/a&gt;&amp;gt;:&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &amp;gt; @@ -26,7 +26,7 @@&lt;br/&gt;
    &amp;gt; &amp;gt;  import java.util.concurrent.TimeUnit;&lt;br/&gt;
    &amp;gt; &amp;gt;  import java.util.concurrent.atomic.AtomicInteger;&lt;br/&gt;
    &amp;gt; &amp;gt;&lt;br/&gt;
    &amp;gt; &amp;gt; -import com.google.common.collect.Lists;&lt;br/&gt;
    &amp;gt; &amp;gt; +import java.util.ArrayList;&lt;br/&gt;
    &amp;gt; &amp;gt;  import com.google.common.io.Closeables;&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; For some reason there is a delay in GitHub reflecting branch changes in PR.&lt;br/&gt;
    &amp;gt;&lt;br/&gt;
    &amp;gt; &#8212;&lt;br/&gt;
    &amp;gt; Reply to this email directly or view it on GitHub&lt;br/&gt;
    &amp;gt; &amp;lt;&lt;a href=&quot;https://github.com/apache/mahout/pull/106/files#r27775438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106/files#r27775438&lt;/a&gt;&amp;gt;.&lt;br/&gt;
    &amp;gt;&lt;/p&gt;
</comment>
                            <comment id="14396130" author="githubbot" created="Sun, 5 Apr 2015 08:21:26 +0100"  >&lt;p&gt;Github user avati commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106#issuecomment-89729990&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106#issuecomment-89729990&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Creating fresh PR to reflect updates&lt;/p&gt;</comment>
                            <comment id="14396131" author="githubbot" created="Sun, 5 Apr 2015 08:21:26 +0100"  >&lt;p&gt;Github user avati closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/106&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14396132" author="githubbot" created="Sun, 5 Apr 2015 08:22:34 +0100"  >&lt;p&gt;GitHub user avati opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/108&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/108&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;: MultithreadedBatchItemSimilarities output fix&lt;/p&gt;

&lt;p&gt;    In some cases the Output class in MultithreadedBatchItemSimilarities does&lt;br/&gt;
    not output all of the similarity pairs that it should. It is very possible&lt;br/&gt;
    for the number of active workers to go to zero while in the while loop,&lt;br/&gt;
    in which case the remaining similarities for the finished workers will not&lt;br/&gt;
    be flushed to the output. This is because the while loop is only&lt;br/&gt;
    conditioned on whether there are active workers or not. An easy fix is to&lt;br/&gt;
    also check to make sure the results structure is not empty. This way both&lt;br/&gt;
    the number of active workers must be 0 and the result set must be empty to&lt;br/&gt;
    exit the while loop.&lt;/p&gt;

&lt;p&gt;    On-behalf-of: Jesse Daniels &amp;lt;jessedaniels1@gmail.com&amp;gt;&lt;br/&gt;
    Signed-off-by: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/avati/mahout&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/avati/mahout&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/108.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #108&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d77f7c48e68ae4f4d2b87dab0cefb0f245e189f6&lt;br/&gt;
Author: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;br/&gt;
Date:   2015-04-05T05:59:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;: MultithreadedBatchItemSimilarities output fix&lt;/p&gt;

&lt;p&gt;    In some cases the Output class in MultithreadedBatchItemSimilarities does&lt;br/&gt;
    not output all of the similarity pairs that it should. It is very possible&lt;br/&gt;
    for the number of active workers to go to zero while in the while loop,&lt;br/&gt;
    in which case the remaining similarities for the finished workers will not&lt;br/&gt;
    be flushed to the output. This is because the while loop is only&lt;br/&gt;
    conditioned on whether there are active workers or not. An easy fix is to&lt;br/&gt;
    also check to make sure the results structure is not empty. This way both&lt;br/&gt;
    the number of active workers must be 0 and the result set must be empty to&lt;br/&gt;
    exit the while loop.&lt;/p&gt;

&lt;p&gt;    On-behalf-of: Jesse Daniels &amp;lt;jessedaniels1@gmail.com&amp;gt;&lt;br/&gt;
    Signed-off-by: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14396133" author="avati" created="Sun, 5 Apr 2015 08:22:58 +0100"  >&lt;p&gt;Updated PR: &lt;a href=&quot;https://github.com/apache/mahout/pull/108&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/108&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14396311" author="githubbot" created="Sun, 5 Apr 2015 17:33:06 +0100"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/108&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/108&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14396328" author="hudson" created="Sun, 5 Apr 2015 18:09:10 +0100"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #3061 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3061/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3061/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;: MultithreadedBatchItemSimilarities outputs incorrect number of similarities, this closes apache/mahout#108 (suneel.marthi: rev cd366d17e1d9b4c001b0ffa08864e1ad5d21034d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CHANGELOG&lt;/li&gt;
	&lt;li&gt;mr/src/test/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilaritiesTest.java&lt;/li&gt;
	&lt;li&gt;mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14396340" author="hudson" created="Sun, 5 Apr 2015 18:42:17 +0100"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #3062 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3062/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3062/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1622&quot; title=&quot;MultithreadedBatchItemSimilarities outputs incorrect number of similarities.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1622&quot;&gt;&lt;del&gt;MAHOUT-1622&lt;/del&gt;&lt;/a&gt;: MultithreadedBatchItemSimilarities outputs incorrect number of similarities, fix the failing test (suneel.marthi: rev 9b6b2361ec0a4eacfb3700d123e02ccb6291f796)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;mr/src/test/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilaritiesTest.java&lt;/li&gt;
	&lt;li&gt;mr/src/main/java/org/apache/mahout/cf/taste/impl/similarity/precompute/MultithreadedBatchItemSimilarities.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14492203" author="sslavic" created="Mon, 13 Apr 2015 10:57:42 +0100"  >&lt;p&gt;Bulk closing all 0.10.0 resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12675372" name="batchSimilarities.patch" size="3353" author="jdaniels" created="Thu, 16 Oct 2014 23:26:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Apr 2015 06:06:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzv4zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>