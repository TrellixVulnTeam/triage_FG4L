<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:27:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1108/MAHOUT-1108.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1108] cluster-reuters.sh executes seqdirectory with MAHOUT_LOCAL=true</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1108</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Got the following exception when running the command with HADOOP_CONF and  HADOOP_CONF_DIR&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/ProgramDriver&lt;br/&gt;
	at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:96)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.ProgramDriver&lt;br/&gt;
	at java.net.URLClassLoader$1.run(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(Unknown Source)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(Unknown Source)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(Unknown Source)&lt;br/&gt;
	... 1 more&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12614128">MAHOUT-1108</key>
            <summary>cluster-reuters.sh executes seqdirectory with MAHOUT_LOCAL=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsingers">Grant Ingersoll</assignee>
                                    <reporter username="elmer.garduno">Elmer Garduno</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Oct 2012 05:43:25 +0000</created>
                <updated>Mon, 3 Feb 2014 08:05:45 +0000</updated>
                            <resolved>Sun, 2 Jun 2013 18:22:27 +0100</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13487561" author="elmer.garduno" created="Wed, 31 Oct 2012 05:48:28 +0000"  >&lt;p&gt;Added a pull request on github.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/mahout/pull/8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13487603" author="paritoshranjan" created="Wed, 31 Oct 2012 07:41:56 +0000"  >&lt;p&gt;The code tries to put reuters-out-seqdir directly in hdfs. It will hamper the execution of cluster-reuters in local mode. The code also removes the hadoop cluster status check and cleanup and directly puts everything in hdfs, which I think is not desired.&lt;/p&gt;

&lt;p&gt;I think the problem faced while execution in distributed environment happened due to absence of HADOOP_HOME property. Can you retry with HADOOP_HOME set?&lt;/p&gt;</comment>
                            <comment id="13488425" author="elmer.garduno" created="Thu, 1 Nov 2012 02:38:09 +0000"  >&lt;p&gt;Yes the HADOOP_HOME variable is set. I added a more balanced approach that copies the reuters-sgm files to the cluster from the beginning and then runs all the operations on the cluster.&lt;/p&gt;

&lt;p&gt;I have updated the request.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/mahout/pull/9&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/9&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13488613" author="paritoshranjan" created="Thu, 1 Nov 2012 11:20:27 +0000"  >&lt;p&gt;I tend to agree with you.&lt;/p&gt;

&lt;p&gt;I don&apos;t see the point of extracting it locally and the putting the files in hdfs, if it can be put directly into hdfs. From what I can see, nothing else is done sequentially (locally) in this script. So, MAHOUT_LOCAL seems to be redundant to me.&lt;/p&gt;

&lt;p&gt;Still, I think that the first mapreduce call should be after this check &lt;/p&gt;

&lt;p&gt; HADOOP=&quot;$HADOOP_HOME/bin/hadoop&quot;&lt;br/&gt;
  if [ ! -e $HADOOP ]; then&lt;br/&gt;
    echo &quot;Can&apos;t find hadoop in $HADOOP, exiting&quot;&lt;br/&gt;
    exit 1&lt;br/&gt;
  fi&lt;/p&gt;

&lt;p&gt;so that the user is warned with a proper message.&lt;/p&gt;

&lt;p&gt;Since I am not the creator of this script, and I am not sure about the use of MAHOUT_LOCAL, I would like to wait for someone to clarify the doubts regarding MAHOUT_LOCAL. Then, I think we can go ahead this change with some modifications ( like putting the mapreduce call after the check of hadoop&apos;s existence).&lt;/p&gt;
</comment>
                            <comment id="13489178" author="lancenorskog" created="Fri, 2 Nov 2012 00:39:20 +0000"  >&lt;p&gt;I don&apos;t use a Hadoop cluster, I just run these jobs locally. Please do not require a cluster to run the example programs.&lt;/p&gt;</comment>
                            <comment id="13489189" author="elmer.garduno" created="Fri, 2 Nov 2012 01:27:37 +0000"  >&lt;p&gt;@Paritosh I have updated the pull request to do the check before the first call, and also made sure the directory is available on HDFS or locally if that&apos;s the case.&lt;/p&gt;

&lt;p&gt;@Lance I think this change doesn&apos;t affect the way you currently use it, as the rest of the commands where already invoked without using MAHOUT_LOCAL.&lt;/p&gt;</comment>
                            <comment id="13672212" author="gsingers" created="Sat, 1 Jun 2013 20:42:33 +0100"  >&lt;p&gt;Elmer, can you supply a patch?&lt;/p&gt;</comment>
                            <comment id="13672337" author="elmer.garduno" created="Sun, 2 Jun 2013 09:00:00 +0100"  >&lt;p&gt;The attached patch works both with MAHOUT_LOCAL=true and in cluster mode.&lt;/p&gt;</comment>
                            <comment id="13672603" author="gsingers" created="Sun, 2 Jun 2013 18:14:21 +0100"  >&lt;p&gt;Slight addition to the script to handle it failing to download the test collection.&lt;/p&gt;

&lt;p&gt;Elmer, can you verify this works on both Hadoop and local, as I don&apos;t have a cluster access right now and UCI KDD appears to be down.&lt;/p&gt;</comment>
                            <comment id="13672605" author="gsingers" created="Sun, 2 Jun 2013 18:20:54 +0100"  >&lt;p&gt;I&apos;m going to commit.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ssc&quot; class=&quot;user-hover&quot; rel=&quot;ssc&quot;&gt;Sebastian Schelter&lt;/a&gt;, can you test on Hadoop when you get a chance before the release?&lt;/p&gt;</comment>
                            <comment id="13672607" author="gsingers" created="Sun, 2 Jun 2013 18:22:27 +0100"  >&lt;p&gt;Committed.  Reopen if it doesn&apos;t work on Hadoop.  KDD at UCI is down at the moment.&lt;/p&gt;</comment>
                            <comment id="13672625" author="hudson" created="Sun, 2 Jun 2013 19:11:40 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #2031 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2031/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2031/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1108&quot; title=&quot;cluster-reuters.sh executes seqdirectory with MAHOUT_LOCAL=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1108&quot;&gt;&lt;del&gt;MAHOUT-1108&lt;/del&gt;&lt;/a&gt;: cleanup for running on Hadoop and locally (Revision 1488746)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
gsingers : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/CHANGELOG&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/examples/bin/cluster-reuters.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13672629" author="elmer.garduno" created="Sun, 2 Jun 2013 19:24:50 +0100"  >&lt;p&gt;Grant, the change works well in both Hadoop and local. &lt;/p&gt;

&lt;p&gt;Just a side note: some problems can arise if users had previously used local mode and the files on the $&lt;/p&gt;
{WORK_DIR}
&lt;p&gt; are still there. This is because the logic to test for existing files is run locally and the file might actually not exist on the cluster.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585767" name="MAHOUT-1108.patch" size="2685" author="gsingers" created="Sun, 2 Jun 2013 18:14:21 +0100"/>
                            <attachment id="12585750" name="MAHOUT-1108.patch" size="2325" author="elmer.garduno" created="Sun, 2 Jun 2013 09:00:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Oct 2012 07:41:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy77en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76010</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>