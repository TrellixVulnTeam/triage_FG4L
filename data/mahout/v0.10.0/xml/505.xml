<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:23:41 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-505/MAHOUT-505.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-505] Alternate mechanism for assembling job files.</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-505</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Per discussion here:&lt;br/&gt;
&lt;a href=&quot;http://www.lucidimagination.com/search/document/6082249e667f2a1b/problem_with_our_jar_publishing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.lucidimagination.com/search/document/6082249e667f2a1b/problem_with_our_jar_publishing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Assembly job files using the assembly plugin/descriptor instead of an ant taks and the build helper plugin. This results in job files being named {-job.jar} instead of &lt;/p&gt;
{.job}
&lt;p&gt;, but that seems to be necessary to prevent nexus from overwriting the main jar artifacts with the jar files. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12474644">MAHOUT-505</key>
            <summary>Alternate mechanism for assembling job files.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="drew.farris">Drew Farris</assignee>
                                    <reporter username="drew.farris">Drew Farris</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 01:55:50 +0100</created>
                <updated>Sun, 31 Oct 2010 15:50:28 +0000</updated>
                            <resolved>Mon, 4 Oct 2010 04:44:30 +0100</resolved>
                                    <version>0.3</version>
                                    <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12912797" author="bmargulies" created="Tue, 21 Sep 2010 02:03:37 +0100"  >&lt;p&gt;You can always use finalName to change the job jar name that lands in target, as opposed to that in the maven repo.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if we can diddle the &amp;lt;type&amp;gt; for the assembly plugin to an arbitrary suffix, but that might trigger the nexus bug all over.&lt;/p&gt;

&lt;p&gt;You want me to take care of this?&lt;/p&gt;</comment>
                            <comment id="12912798" author="drew.farris" created="Tue, 21 Sep 2010 02:09:29 +0100"  >&lt;p&gt;Here&apos;s the patch. Built, ran tests, and build-reuters.sh example&lt;/p&gt;

&lt;p&gt;I did a mvn deploy and it completed successfully but can&apos;t figure out where it wound up. I suspect I don&apos;t have the Nexus karma I need for build promotion.&lt;/p&gt;

&lt;p&gt;Ted, maybe you can give this a try and see how it works out for you? Were you doing the deploy by hand, or using Husdon?&lt;/p&gt;</comment>
                            <comment id="12912801" author="drew.farris" created="Tue, 21 Sep 2010 02:21:14 +0100"  >&lt;p&gt;Benson, thanks for the tip about finalName &amp;#8211; and yes it looks like &amp;lt;type&amp;gt; is what got us into the mess in the first place, I suspect we need to set classifier to keep nexus happy.&lt;/p&gt;

&lt;p&gt;You&apos;re more than welcome to take it from here.&lt;/p&gt;

&lt;p&gt;Do you know who need to talk to and what do I need to ask for to get the necessary karma for doing build promotion in Nexus?&lt;/p&gt;</comment>
                            <comment id="12912806" author="drew.farris" created="Tue, 21 Sep 2010 02:35:18 +0100"  >&lt;p&gt;Some finalName wierdness:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;plugin&amp;gt;
  &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;maven-assembly-plugin&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;2.2-beta-5&amp;lt;/version&amp;gt;
  &amp;lt;executions&amp;gt;
    &amp;lt;execution&amp;gt;
      &amp;lt;id&amp;gt;job&amp;lt;/id&amp;gt;
      &amp;lt;phase&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;&amp;lt;/phase&amp;gt;
      &amp;lt;goals&amp;gt;
        &amp;lt;goal&amp;gt;single&amp;lt;/goal&amp;gt;
      &amp;lt;/goals&amp;gt;
      &amp;lt;configuration&amp;gt;
        &amp;lt;finalName&amp;gt;${project.artifactId}-${project.version}.job&amp;lt;/finalName&amp;gt;
        &amp;lt;descriptors&amp;gt;
          &amp;lt;descriptor&amp;gt;src/main/assembly/job.xml&amp;lt;/descriptor&amp;gt;
        &amp;lt;/descriptors&amp;gt;
      &amp;lt;/configuration&amp;gt;
    &amp;lt;/execution&amp;gt;
  &amp;lt;/executions&amp;gt;
&amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Results in:&lt;/p&gt;

{[INFO] Installing /home/drew/mahout/trunk/core/target/mahout-core-0.4-SNAPSHOT.job-job.jar to /home/drew/maven/repository/org/apache/mahout/mahout-core/0.4-SNAPSHOT/mahout-core-0.4-SNAPSHOT-job.jar}

&lt;p&gt;The former being wrong the latter being correct. So, it&apos;s getting deployed to the right location.&lt;/p&gt;</comment>
                            <comment id="12912842" author="tdunning" created="Tue, 21 Sep 2010 06:31:46 +0100"  >&lt;blockquote&gt;
&lt;p&gt;Ted, maybe you can give this a try and see how it works out for you? Were you doing the deploy by hand, or using Husdon?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I was merely observing the outcome of an occult process.  Presumably it is run by Hudson, but couldn&apos;t say.&lt;/p&gt;</comment>
                            <comment id="12912928" author="bmargulies" created="Tue, 21 Sep 2010 11:53:31 +0100"  >&lt;p&gt;With the patch in the current state:&lt;/p&gt;

&lt;p&gt;Installing /Users/benson/asf/mahout/trunk/core/target/mahout-core-0.4-SNAPSHOT-job.jar to /Users/benson/.m2/repository/org/apache/mahout/mahout-core/0.4-SNAPSHOT/mahout-core-0.4-SNAPSHOT-job.jar&lt;/p&gt;

&lt;p&gt;means &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;group org.apache.mahout&lt;/li&gt;
	&lt;li&gt;artifact mahout-core&lt;/li&gt;
	&lt;li&gt;classifier job&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There is no finalName in the current patch. &lt;/p&gt;

&lt;p&gt;It uploads:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/mahout/mahout-core/0.4-SNAPSHOT/mahout-core-0.4-20100921.103833-155-job.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/mahout/mahout-core/0.4-SNAPSHOT/mahout-core-0.4-20100921.103833-155-job.jar&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think I see where all the frustration comes from. You can&apos;t really control the name of the file uploaded to the repo. finalName is there to let you control the name in &apos;target&apos;, and it has some limitations even with that. You could try turning off &apos;attach&apos; in the assembly plugin, and then put the build-helper back into the picture, setting the &apos;type&apos; to job. However, chances are that this will get you back into Ted&apos;s original problem.&lt;/p&gt;

&lt;p&gt;Ted&apos;s original report is that nexus messes up when you attach an artifact that differs only in type from the main artifact. This does not surprise me. &apos;type&apos; generally derives from the top-level packaging element, and &apos;classifier&apos; is supposed to be used to distinguish multiple outputs.&lt;/p&gt;

&lt;p&gt;If you really want &amp;lt;type&amp;gt;job&amp;lt;/type&amp;gt;, then you need to move this to its own project. You may still need the build helper, because I don&apos;t know of any way to get the assembly plugin to end up with .job instead of .jar without modifying it. Just putting &apos;.job&apos; in the finalName does not change the &amp;lt;type&amp;gt;.&lt;/p&gt;

</comment>
                            <comment id="12912966" author="drew.farris" created="Tue, 21 Sep 2010 14:19:59 +0100"  >&lt;p&gt;Ok, I was missing something, everything does get deployed properly with this patch&lt;/p&gt;

&lt;p&gt;For example. using Ted&apos;s original query:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/index.html#nexus-search;gav~org.apache.mahout~mahout-core~~~~kw,versionexpand&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/index.html#nexus-search;gav~org.apache.mahout~mahout-core~~~~kw,versionexpand&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The core jar artifact is now correct. &lt;/p&gt;

&lt;p&gt;So, one question is whether everyone is happy with the name &lt;tt&gt;-job.jar&lt;/tt&gt; instead of &lt;tt&gt;.job&lt;/tt&gt; for out job files. &lt;/p&gt;

&lt;p&gt;Another question is whether we need mahout-core.job &amp;gt;and&amp;lt; mahout-examples.job or whether mahout-examples.job would be sufficient. &lt;/p&gt;

&lt;p&gt;It is also worth asking whether &lt;tt&gt;job&lt;/tt&gt; files should be deployed to the repository in the first place. If not, we keep thing in the build as they are and simply avoid attaching the job artifacts to the main artifact wit h the build helper plugin.&lt;/p&gt;</comment>
                            <comment id="12917470" author="hudson" created="Mon, 4 Oct 2010 05:59:28 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #370 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Mahout-Quality/370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/Mahout-Quality/370/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-505&quot; title=&quot;Alternate mechanism for assembling job files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-505&quot;&gt;&lt;del&gt;MAHOUT-505&lt;/del&gt;&lt;/a&gt;: Alternate mechanism for assembling job files. Now produces *-job.jar instead of *.job, should resolve Hudson artifact indexing issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455103" name="MAHOUT-505.patch" size="13286" author="drew.farris" created="Tue, 21 Sep 2010 02:09:29 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Sep 2010 01:03:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy4pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>