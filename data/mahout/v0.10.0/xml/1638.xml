<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:27:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1638/MAHOUT-1638.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1638] H2O bindings fail at drmParallelizeWithRowLabels(...)</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1638</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;The H2OHelper.drmFromMatrix(...) function fails when trying to write row label String keys to a water.fvec.Vec.:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 java.lang.IllegalArgumentException: Not a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
  at water.fvec.Chunk.set_impl(Chunk.java:507)
  at water.fvec.Chunk.set0(Chunk.java:469)
  at water.fvec.Chunk.set(Chunk.java:371)
  at water.fvec.Vec$Writer.set(Vec.java:803)
  at org.apache.mahout.h2obindings.H2OHelper.drmFromMatrix(H2OHelper.java:331)
  at org.apache.mahout.h2obindings.H2OEngine$.drmParallelizeWithRowLabels(H2OEngine.scala:83)                                                                   
  at org.apache.mahout.math.drm.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;$.drmParallelizeWithRowLabels(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:67)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;This causes an exception when calling drm.drmParallelizeWithRowLabels(...)&lt;/p&gt;

&lt;p&gt;To reproduce, apply &lt;a href=&quot;https://github.com/apache/mahout/pull/72&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PR#72: Enable Naive Bayes Tests in h2o Module&lt;/a&gt; and run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; $ mvn test 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;from the h2o module:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
- NB Aggregator *** FAILED ***
  java.lang.IllegalArgumentException: Not a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
  at water.fvec.Chunk.set_impl(Chunk.java:507)
  at water.fvec.Chunk.set0(Chunk.java:469)
  at water.fvec.Chunk.set(Chunk.java:371)
  at water.fvec.Vec$Writer.set(Vec.java:803)
  at org.apache.mahout.h2obindings.H2OHelper.drmFromMatrix(H2OHelper.java:331)
  at org.apache.mahout.h2obindings.H2OEngine$.drmParallelizeWithRowLabels(H2OEngine.scala:83)                                                                   
  at org.apache.mahout.math.drm.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;$.drmParallelizeWithRowLabels(&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.scala:67)                                                                          
  at org.apache.mahout.classifier.naivebayes.NBTestBase$$anonfun$2.apply$mcV$sp(NBTestBase.scala:91)                                                            
  at org.apache.mahout.classifier.naivebayes.NBTestBase$$anonfun$2.apply(NBTestBase.scala:70)                                                                   
  at org.apache.mahout.classifier.naivebayes.NBTestBase$$anonfun$2.apply(NBTestBase.scala:70)                                                                   
  ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12770232">MAHOUT-1638</key>
            <summary>H2O bindings fail at drmParallelizeWithRowLabels(...)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Andrew_Palumbo">Andrew Palumbo</assignee>
                                    <reporter username="Andrew_Palumbo">Andrew Palumbo</reporter>
                        <labels>
                            <label>DSL</label>
                            <label>h2o</label>
                            <label>scala</label>
                    </labels>
                <created>Tue, 27 Jan 2015 00:22:43 +0000</created>
                <updated>Mon, 13 Apr 2015 10:57:46 +0100</updated>
                            <resolved>Fri, 3 Apr 2015 18:03:55 +0100</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14292721" author="githubbot" created="Tue, 27 Jan 2015 00:34:45 +0000"  >&lt;p&gt;Github user andrewpalumbo commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/64#issuecomment-71568447&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/64#issuecomment-71568447&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @avati I&apos;m going to close this since its way out of sync.  I&apos;ve started &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1638&quot; title=&quot;H2O bindings fail at drmParallelizeWithRowLabels(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1638&quot;&gt;&lt;del&gt;MAHOUT-1638&lt;/del&gt;&lt;/a&gt; to work on this issue.&lt;/p&gt;</comment>
                            <comment id="14292754" author="andrew_palumbo" created="Tue, 27 Jan 2015 00:50:54 +0000"  >&lt;p&gt;^ the above comment is referring to my closing pr#64-  Not to closing this JIRA.&lt;/p&gt;</comment>
                            <comment id="14367288" author="andrew_palumbo" created="Wed, 18 Mar 2015 15:17:48 +0000"  >&lt;p&gt;As discussed on @dev yesterday, this seems to be a blocker for H2O. Is not a huge bug but does effect some core DrmLike capabilities. &lt;/p&gt;</comment>
                            <comment id="14386079" author="andrew_palumbo" created="Mon, 30 Mar 2015 02:48:13 +0100"  >&lt;p&gt;Current status:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; map = m.getRowLabelBindings();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (map != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
  &lt;span class=&quot;code-comment&quot;&gt;// label vector must be similarly partitioned like the Frame
&lt;/span&gt;  &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; []typeArr = {Vec.T_STR};
  labels = frame.lastVec().makeCons(1, frame.numRows(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; , typeArr)[0];
  Vec.Writer writer = labels.open();

  Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; rmap = reverseMap(map);
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; r = 0; r &amp;lt; m.rowSize(); r++){    
      writer.set(r, rmap.get(r).toString());
   }
   writer.close(closer);
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When I run tests i can verify that: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
labels.isString() == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
labels.chunkForRow(r).getClass().getSimpleName() == &lt;span class=&quot;code-quote&quot;&gt;&quot;C0LChunk&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As far as I can tell, we need a &lt;tt&gt;CStrChunk&lt;/tt&gt; or a &lt;tt&gt;NewChunk&lt;/tt&gt; to be able to set a String Value.&lt;/p&gt;

&lt;p&gt;still getting the exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Not a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
java.lang.IllegalArgumentException: Not a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
	at water.fvec.Chunk.set_impl(Chunk.java:494)
	at water.fvec.Chunk.set(Chunk.java:456)
	at water.fvec.Chunk.set_abs(Chunk.java:358)
	at water.fvec.Vec$Writer.set(Vec.java:821)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14391025" author="andrew_palumbo" created="Wed, 1 Apr 2015 18:25:35 +0100"  >&lt;p&gt;I just got confirmation that this is in fact bug in the h2o-core artifact.   &lt;/p&gt;</comment>
                            <comment id="14393844" author="andrew_palumbo" created="Fri, 3 Apr 2015 01:54:46 +0100"  >&lt;p&gt;The h2o guys have fixed this bug:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/h2oai/h2o-dev/commit/6cc02f49924be2d5b21d7eff3c592d18e5265b74&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/h2oai/h2o-dev/commit/6cc02f49924be2d5b21d7eff3c592d18e5265b74&lt;/a&gt;  &lt;/p&gt;

&lt;p&gt;Not sure how long it will be for a new artifact but they publish pretty often.  &lt;/p&gt;

&lt;p&gt;Since this doesn&apos;t break anything in the core algebra tests I&apos;d like to push this to 0.10.1.&lt;/p&gt;</comment>
                            <comment id="14394083" author="githubbot" created="Fri, 3 Apr 2015 06:31:26 +0100"  >&lt;p&gt;GitHub user avati opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/99&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/99&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1638&quot; title=&quot;H2O bindings fail at drmParallelizeWithRowLabels(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1638&quot;&gt;&lt;del&gt;MAHOUT-1638&lt;/del&gt;&lt;/a&gt;: implement String equivalent of Vec.makeCons()&lt;/p&gt;

&lt;p&gt;    Necessary for creating an empty Vec to hold String labels in the&lt;br/&gt;
    future.&lt;/p&gt;

&lt;p&gt;    Replace calls to Vec.makeCons with H2OHelper.makeEmptyStrVec()&lt;br/&gt;
    where the created Vec is used to store label strings.&lt;/p&gt;

&lt;p&gt;    Also, fix an off-by-one bug in MapBlockHelper&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/avati/mahout&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/avati/mahout&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1638&quot; title=&quot;H2O bindings fail at drmParallelizeWithRowLabels(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1638&quot;&gt;&lt;del&gt;MAHOUT-1638&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/99.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/99.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #99&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9d892697bd483773f2b75a70045cf66fba4cb91c&lt;br/&gt;
Author: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;br/&gt;
Date:   2015-04-03T03:53:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1638&quot; title=&quot;H2O bindings fail at drmParallelizeWithRowLabels(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1638&quot;&gt;&lt;del&gt;MAHOUT-1638&lt;/del&gt;&lt;/a&gt;: implement String equivalent of Vec.makeCons()&lt;/p&gt;

&lt;p&gt;    Necessary for creating an empty Vec to hold String labels in the&lt;br/&gt;
    future.&lt;/p&gt;

&lt;p&gt;    Replace calls to Vec.makeCons with H2OHelper.makeEmptyStrVec()&lt;br/&gt;
    where the created Vec is used to store label strings.&lt;/p&gt;

&lt;p&gt;    Also, fix an off-by-one bug in MapBlockHelper&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Anand Avati &amp;lt;avati@redhat.com&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14394584" author="githubbot" created="Fri, 3 Apr 2015 16:41:22 +0100"  >&lt;p&gt;Github user andrewpalumbo commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/99#issuecomment-89331349&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/99#issuecomment-89331349&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @avati thanks alot for the fix.  Looks good!  I&apos;ll push this. along with #72 &lt;/p&gt;</comment>
                            <comment id="14394677" author="githubbot" created="Fri, 3 Apr 2015 17:51:08 +0100"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/99&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/99&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14394696" author="andrew_palumbo" created="Fri, 3 Apr 2015 18:03:56 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=avati&quot; class=&quot;user-hover&quot; rel=&quot;avati&quot;&gt;Anand Avati&lt;/a&gt;  Thanks alot for the fix!  Appreciate it!&lt;/p&gt;</comment>
                            <comment id="14394724" author="hudson" created="Fri, 3 Apr 2015 18:22:23 +0100"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #3045 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3045/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3045/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1638&quot; title=&quot;H2O bindings fail at drmParallelizeWithRowLabels(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1638&quot;&gt;&lt;del&gt;MAHOUT-1638&lt;/del&gt;&lt;/a&gt;: H2O bindings fail at drmParallelizeWithRowLabels(...) closes apache/mahout#99 and &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1493&quot; title=&quot;Port Naive Bayes to the Spark DSL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1493&quot;&gt;&lt;del&gt;MAHOUT-1493&lt;/del&gt;&lt;/a&gt;-h2o closes apache/mahout#72 (apalumbo: rev 5197ac9e8393763dd4ed58f5f1e9f167e75d3078)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CHANGELOG&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/H2OHdfs.java&lt;/li&gt;
	&lt;li&gt;h2o/src/test/scala/org/apache/mahout/classifier/stats/ClassifierStatsH2OTestSuite.scala&lt;/li&gt;
	&lt;li&gt;h2o/src/main/scala/org/apache/mahout/h2obindings/ops/MapBlockHelper.scala&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/H2OHelper.java&lt;/li&gt;
	&lt;li&gt;h2o/src/test/scala/org/apache/mahout/classifier/naivebayes/NBH2OTestSuite.scala&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14394745" author="githubbot" created="Fri, 3 Apr 2015 18:37:51 +0100"  >&lt;p&gt;Github user dlyubimov commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/mahout/pull/99#issuecomment-89371164&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/mahout/pull/99#issuecomment-89371164&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This is superawesome. Thank you @avati !&lt;/p&gt;</comment>
                            <comment id="14492210" author="sslavic" created="Mon, 13 Apr 2015 10:57:46 +0100"  >&lt;p&gt;Bulk closing all 0.10.0 resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 Jan 2015 00:34:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzyp8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>