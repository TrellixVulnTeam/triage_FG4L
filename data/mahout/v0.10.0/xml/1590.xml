<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:21:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1590/MAHOUT-1590.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1590] mahout unit test failures due to guava version conflict on hadoop 2</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1590</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Running &lt;br/&gt;
   mvn clean test -Dhadoop2.version=2.4.0 &lt;/p&gt;

&lt;p&gt;has many unit test failures because guava version mismatch.   &lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;======&lt;br/&gt;
completeJobToyExample(org.apache.mahout.cf.taste.hadoop.als.ParallelALSFactorizationJobTest)  Time elapsed: 0.736 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NoSuchMethodError: com.google.common.base.Stopwatch.elapsedMillis()J&lt;br/&gt;
        at __randomizedtesting.SeedInfo.seed(&lt;span class=&quot;error&quot;&gt;&amp;#91;BEBBF9ACD237F984:B570D1523391FD4E&amp;#93;&lt;/span&gt;:0)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:278)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:375)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.JobSubmitter.writeNewSplits(JobSubmitter.java:493)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.JobSubmitter.writeSplits(JobSubmitter.java:510)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:394)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1285)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1282)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1548)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:1282)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1303)&lt;br/&gt;
        at org.apache.mahout.cf.taste.hadoop.als.ParallelALSFactorizationJob.run(ParallelALSFactorizationJob.java:172)&lt;br/&gt;
        at org.apache.mahout.cf.taste.hadoop.als.ParallelALSFactorizationJobTest.explicitExample(ParallelALSFactorizationJobTest.java:112)&lt;br/&gt;
        at org.apache.mahout.cf.taste.hadoop.als.ParallelALSFactorizationJobTest.completeJobToyExample(ParallelALSFactorizationJobTest.java:71)&lt;br/&gt;
=====&lt;/p&gt;

&lt;p&gt;hadoop mapreduce V2 is using guava v11.0.2 and mahout is using guava version 16.0&lt;/p&gt;

&lt;p&gt;After trying different versions guava version 14.0 seems to have hadoop MR V2 compatible jars and mahout needed classes. &lt;/p&gt;

&lt;p&gt;The unit tests ran successfully after changing the dependency in mahout to v14.0&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 2.x &lt;/p&gt;</environment>
        <key id="12724257">MAHOUT-1590</key>
            <summary>mahout unit test failures due to guava version conflict on hadoop 2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sslavic">Stevo Slavic</assignee>
                                    <reporter username="venkatnrangan">Venkat Ranganathan</reporter>
                        <labels>
                            <label>DSL</label>
                            <label>scala</label>
                            <label>spark</label>
                    </labels>
                <created>Sat, 28 Jun 2014 01:43:01 +0100</created>
                <updated>Mon, 13 Apr 2015 10:57:42 +0100</updated>
                            <resolved>Thu, 26 Mar 2015 17:53:38 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14184536" author="paged.fault" created="Sun, 26 Oct 2014 16:44:21 +0000"  >&lt;p&gt;I see the same issue as well&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[root@node1 examples]# sh bin/cluster-reuters.sh
Please select a number to choose the corresponding clustering algorithm
1. kmeans clustering
2. fuzzykmeans clustering
3. lda clustering
4. streamingkmeans clustering
Enter your choice : 3
ok. You chose 3 and we&apos;ll use lda Clustering
creating work directory at /tmp/mahout-work-root
MAHOUT_LOCAL is set, so we don&apos;t add HADOOP_CONF_DIR to classpath.
MAHOUT_LOCAL is set, running locally
SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/usr/local/mahout/examples/target/mahout-examples-1.0-SNAPSHOT-job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/usr/local/mahout/examples/target/dependency/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http:&lt;span class=&quot;code-comment&quot;&gt;//www.slf4j.org/codes.html#multiple_bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation.
&lt;/span&gt;SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
log4j:WARN No appenders could be found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; logger (org.apache.hadoop.util.Shell).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http:&lt;span class=&quot;code-comment&quot;&gt;//logging.apache.org/log4j/1.2/faq.html#noconfig &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more info.
&lt;/span&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NoSuchMethodError: com.google.common.base.Stopwatch.elapsedMillis()J
	at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:278)
	at org.apache.hadoop.mapreduce.lib.input.SequenceFileInputFormat.listStatus(SequenceFileInputFormat.java:59)
	at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:375)
	at org.apache.hadoop.mapreduce.JobSubmitter.writeNewSplits(JobSubmitter.java:493)
	at org.apache.hadoop.mapreduce.JobSubmitter.writeSplits(JobSubmitter.java:510)
	at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:394)
	at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1285)
	at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1282)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:415)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1556)
	at org.apache.hadoop.mapreduce.Job.submit(Job.java:1282)
	at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1303)
	at org.apache.mahout.vectorizer.DocumentProcessor.tokenizeDocuments(DocumentProcessor.java:93)
	at org.apache.mahout.vectorizer.SparseVectorsFromSequenceFiles.run(SparseVectorsFromSequenceFiles.java:257)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
	at org.apache.mahout.vectorizer.SparseVectorsFromSequenceFiles.main(SparseVectorsFromSequenceFiles.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:72)
	at org.apache.hadoop.util.ProgramDriver.run(ProgramDriver.java:145)
	at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:153)
	at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:195)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I will try the patch and recompile Mahout and see if I can get it resolved. Additionally, I am only seeing the above issue in MAHOUT_LOCAL mode.&lt;/p&gt;</comment>
                            <comment id="14184659" author="paged.fault" created="Sun, 26 Oct 2014 20:16:42 +0000"  >&lt;p&gt;I am confirming that downgrading the guava library to v14 resolves this issue.&lt;/p&gt;</comment>
                            <comment id="14381585" author="hudson" created="Thu, 26 Mar 2015 08:48:16 +0000"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #3011 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3011/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3011/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1590&quot; title=&quot;mahout unit test failures due to guava version conflict on hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1590&quot;&gt;&lt;del&gt;MAHOUT-1590&lt;/del&gt;&lt;/a&gt; Downgraded guava dependency, since it&apos;s latest one compatible with hadoop 2.4.0 (sslavic: rev 47790146ab93f742eb987f751e40645dfd530b37)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CHANGELOG&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14381717" author="hudson" created="Thu, 26 Mar 2015 11:11:36 +0000"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #3012 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3012/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3012/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1590&quot; title=&quot;mahout unit test failures due to guava version conflict on hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1590&quot;&gt;&lt;del&gt;MAHOUT-1590&lt;/del&gt;&lt;/a&gt; Downgraded Guava even further to 11.0.2, since that&apos;s the version Hadoop is providing/using; eliminated some usage of Guava&apos;s Closables/Closer since we&apos;re now on JDK 1.7 with try-with-resources (sslavic: rev c7241d5875a933a0b58cab0ceecb8962625040b7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;mrlegacy/src/test/java/org/apache/mahout/classifier/sgd/OnlineLogisticRegressionTest.java&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;integration/pom.xml&lt;/li&gt;
	&lt;li&gt;math/pom.xml&lt;/li&gt;
	&lt;li&gt;integration/src/test/java/org/apache/mahout/utils/vectors/lucene/LuceneIterableTest.java&lt;/li&gt;
	&lt;li&gt;mrlegacy/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14381778" author="hudson" created="Thu, 26 Mar 2015 12:13:19 +0000"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #3013 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3013/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3013/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1590&quot; title=&quot;mahout unit test failures due to guava version conflict on hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1590&quot;&gt;&lt;del&gt;MAHOUT-1590&lt;/del&gt;&lt;/a&gt; Fixed class path issues, hbase client in integration module was brining in hadoop 2.2 dependencies regardless of hadoop.version used in build (sslavic: rev b58df10f4c822ae989bb436734880940e9063fde)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14381841" author="hudson" created="Thu, 26 Mar 2015 13:08:55 +0000"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #3014 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3014/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3014/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1590&quot; title=&quot;mahout unit test failures due to guava version conflict on hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1590&quot;&gt;&lt;del&gt;MAHOUT-1590&lt;/del&gt;&lt;/a&gt; Spark expects guava 14.0.1 (sslavic: rev 9f4abbd96bc03ec5b76ed6a67a661904051cea50)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;spark/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14382180" author="hudson" created="Thu, 26 Mar 2015 16:41:59 +0000"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #3015 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3015/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3015/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1590&quot; title=&quot;mahout unit test failures due to guava version conflict on hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1590&quot;&gt;&lt;del&gt;MAHOUT-1590&lt;/del&gt;&lt;/a&gt; Upgraded h2o from 0.1.16 to 0.1.25; 0.1.16 had a bug fixe din 0.1.19, bug which was causing our tests to fail with NoClassDefFoundError for org.apache.hadoop.fs.s3.S3Exception class (sslavic: rev f5f54a1560c708913c30d460bec361eb71ab0bd7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/AtB.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/Par.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/RowRange.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/H2OHelper.java&lt;/li&gt;
	&lt;li&gt;h2o/src/test/scala/org/apache/mahout/h2obindings/test/DistributedH2OSuite.scala&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/AtA.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/Rbind.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/Cbind.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/TimesRightMatrix.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/AewB.java&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/ABt.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/Ax.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/AewScalar.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/Atx.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/H2OBlockMatrix.java&lt;/li&gt;
	&lt;li&gt;h2o/src/main/java/org/apache/mahout/h2obindings/ops/At.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14382327" author="sslavic" created="Thu, 26 Mar 2015 17:53:38 +0000"  >&lt;p&gt;Fixed. Thanks for the patch, it pointed in right direction.&lt;/p&gt;</comment>
                            <comment id="14385968" author="hudson" created="Sun, 29 Mar 2015 22:20:00 +0100"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #3024 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/3024/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/3024/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1590&quot; title=&quot;mahout unit test failures due to guava version conflict on hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1590&quot;&gt;&lt;del&gt;MAHOUT-1590&lt;/del&gt;&lt;/a&gt; Spark expects guava 14.0.1 (sslavic: rev 205896fde04baa774f77703c5867f09b20895e6b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;spark-shell/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14492204" author="sslavic" created="Mon, 13 Apr 2015 10:57:42 +0100"  >&lt;p&gt;Bulk closing all 0.10.0 resolved issues&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12785748">MAHOUT-1657</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12652932" name="MAHOUT-1590.patch" size="323" author="venkatnrangan" created="Sat, 28 Jun 2014 01:43:56 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Oct 2014 16:44:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzr4in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>