<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:28:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1200/MAHOUT-1200.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1200] Mahout tests depend on writing to /tmp/hadoop-$user</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1200</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Running the Mahout test suite creates the temp directory /tmp/hadoop-$user which is used by all Hadoop related tests that pull up a local cluster. The directory is not removed after running the tests. In particular when running multiple tests in parallel on the same machine as the same user this can lead to problems.&lt;/p&gt;

&lt;p&gt;To re-produce issue the following commands prior to running the full test suite:&lt;/p&gt;

&lt;p&gt;mkdir /tmp/hadoop-$USER&lt;/p&gt;

&lt;p&gt;chmod 000 /tmp/hadoop-$USER&lt;/p&gt;

&lt;p&gt;mvn test&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12645510">MAHOUT-1200</key>
            <summary>Mahout tests depend on writing to /tmp/hadoop-$user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="isabel">Isabel Drost-Fromm</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 21:04:40 +0100</created>
                <updated>Mon, 3 Feb 2014 08:05:55 +0000</updated>
                            <resolved>Sat, 1 Jun 2013 23:31:11 +0100</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13645914" author="isabel" created="Tue, 30 Apr 2013 21:09:16 +0100"  >&lt;p&gt;In order to fix the temp directory issue we need to be able to configure that directory for each job (including those creating &quot;sub&quot; jobs).&lt;/p&gt;</comment>
                            <comment id="13645958" author="isabel" created="Tue, 30 Apr 2013 21:48:15 +0100"  >&lt;p&gt;Fixes the tests only, make sure to first apply changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1201&quot; title=&quot;Some Mahout jobs do not pass user supplied Configuration object to sub jobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1201&quot;&gt;&lt;del&gt;MAHOUT-1201&lt;/del&gt;&lt;/a&gt; otherwise some of these tests will not compile.&lt;/p&gt;</comment>
                            <comment id="13645969" author="robinanil" created="Tue, 30 Apr 2013 21:54:00 +0100"  >&lt;p&gt;Can&apos;t you create a new subdirectory for each qualified class name /tmp/mahout-temp/org.apache.mahout.clustering.ClusteringTest/ ?&lt;/p&gt;</comment>
                            <comment id="13646422" author="isabel" created="Wed, 1 May 2013 07:49:16 +0100"  >&lt;p&gt;I&apos;m happy with any naming schema, for add long add we keep the random number in there add otherwise we run into issues when more than one suite is running (potentially on a continuous integration server) or when many users run the test sit (e.g. remember the trouble we had on people.Apache.org&lt;/p&gt;</comment>
                            <comment id="13646424" author="isabel" created="Wed, 1 May 2013 07:49:57 +0100"  >&lt;p&gt;I tried to loosly follow the ideas in &lt;a href=&quot;http://linux.die.net/man/3/mkstemp&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://linux.die.net/man/3/mkstemp&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13646484" author="isabel" created="Wed, 1 May 2013 10:50:00 +0100"  >&lt;p&gt;As suggested by Dawid one other option could be to simply create all test temp files not in /tmp but in the cwd - preferably in the mvn target directories to have mvn clean delete all build related data even in case tests were stopped by hitting ctrl-c What do you think?&lt;/p&gt;</comment>
                            <comment id="13646624" author="tdunning" created="Wed, 1 May 2013 15:37:21 +0100"  >&lt;p&gt;That sounds like an excellent idea.  Ensuring that directories in /tmp get cleaned up is hard.&lt;/p&gt;</comment>
                            <comment id="13647377" author="dweiss" created="Thu, 2 May 2013 09:15:18 +0100"  >&lt;p&gt;Another benefit is that if tests are run on a CI system such as jenkins, failed/ interrupted builds don&apos;t add up and pollute the /tmp space. This also has a drawback because another build wipes out any intermediate data but Jenkins (and other such systems) can be set up to archive selected artefacts on failed builds so I think this is minor).&lt;/p&gt;</comment>
                            <comment id="13648262" author="isabel" created="Fri, 3 May 2013 09:13:32 +0100"  >&lt;p&gt;Added some Maven configuration to store test local data to target output directory. Added some logic to make that work also when not started from within Maven.&lt;/p&gt;

&lt;p&gt;Note: Two things I&apos;d still like to check are whether it would be sufficient to set hadoop.tmp.dir only and whether running tests in parallel on method level could work as well.&lt;/p&gt;</comment>
                            <comment id="13649991" author="isabel" created="Mon, 6 May 2013 20:02:25 +0100"  >&lt;p&gt;Setting only the Hadoop tmp directory is sufficient. Running the tests method-parallel does not work. Changed patch attached.&lt;/p&gt;</comment>
                            <comment id="13672307" author="hudson" created="Sun, 2 Jun 2013 03:32:01 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #2027 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2027/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2027/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1200&quot; title=&quot;Mahout tests depend on writing to /tmp/hadoop-$user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1200&quot;&gt;&lt;del&gt;MAHOUT-1200&lt;/del&gt;&lt;/a&gt; - Mahout tests depend on writing to /tmp/hadoop-$user&lt;/p&gt;

&lt;p&gt;Change hadoop dependent tests to work out of a directory that is not under /tmp (Revision 1488627)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
isabel : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/cf/taste/hadoop/item/RecommenderJobTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/cf/taste/hadoop/similarity/item/ItemSimilarityJobTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/classifier/naivebayes/NaiveBayesTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/canopy/TestCanopyCreation.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/classify/ClusterClassificationDriverTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/dirichlet/TestDirichletClustering.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/dirichlet/TestMapReduce.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/fuzzykmeans/TestFuzzyKmeansClustering.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/iterator/TestClusterClassifier.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/kmeans/TestKmeansClustering.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/lda/cvb/TestCVBModelTrainer.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/meanshift/TestMeanShift.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/clustering/minhash/TestMinHashClustering.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/common/MahoutTestCase.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/fpm/pfpgrowth/FPGrowthTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/fpm/pfpgrowth/PFPGrowthRetailDataTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/fpm/pfpgrowth/PFPGrowthTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/TestDistributedRowMatrix.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/decomposer/TestDistributedLanczosSolver.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/decomposer/TestDistributedLanczosSolverCLI.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/similarity/TestVectorDistanceSimilarityJob.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/similarity/cooccurrence/RowSimilarityJobTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/solver/TestDistributedConjugateGradientSolver.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/solver/TestDistributedConjugateGradientSolverCLI.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/hadoop/stats/BasicStatsTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/stats/entropy/ConditionalEntropyTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/stats/entropy/EntropyTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/stats/entropy/InformationGainRatioTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/math/stats/entropy/InformationGainTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/vectorizer/DictionaryVectorizerTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/vectorizer/DocumentProcessorTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/vectorizer/EncodedVectorsFromSequenceFilesTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/vectorizer/HighDFWordsPrunerTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/test/java/org/apache/mahout/vectorizer/SparseVectorsFromSequenceFilesTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/utils/SplitInput.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/TestClusterDumper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/TestClusterEvaluator.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/utils/SplitInputTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/math/src/test/java/org/apache/mahout/math/MahoutTestCase.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12666945">MAHOUT-1325</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12645512">MAHOUT-1201</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12534041">MAHOUT-916</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12581932" name="MAHOUT-1200.patch" size="86362" author="isabel" created="Mon, 6 May 2013 20:02:25 +0100"/>
                            <attachment id="12581673" name="MAHOUT-1200.patch" size="86688" author="isabel" created="Fri, 3 May 2013 09:13:32 +0100"/>
                            <attachment id="12581224" name="MAHOUT-1200.patch" size="85110" author="isabel" created="Tue, 30 Apr 2013 21:48:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Apr 2013 20:54:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325872</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hze2jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>