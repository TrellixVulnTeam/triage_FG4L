<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:16:10 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-271/MAHOUT-271.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-271] Make WikipediaDatasetCreatorMapper fuzzy category match respect word boundaries</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-271</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;WikipediaDatasetCreatorDriver is useful to create categorisation corpora out of wikipedia, however the category match just do a String#contains check which can catch a lot of unrelated categories.&lt;/p&gt;

&lt;p&gt;Checking the word boundaries with a regexp such as String.format(&quot;\\b%s&lt;br class=&quot;atl-forced-newline&quot; /&gt;b&quot;, theCategoryNameIAmLookingFor); should fix the  issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12446942">MAHOUT-271</key>
            <summary>Make WikipediaDatasetCreatorMapper fuzzy category match respect word boundaries</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ogrisel">Olivier Grisel</assignee>
                                    <reporter username="ogrisel">Olivier Grisel</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2010 18:58:39 +0000</created>
                <updated>Sun, 31 Oct 2010 15:49:05 +0000</updated>
                            <resolved>Sun, 3 Oct 2010 11:22:32 +0100</resolved>
                                    <version>0.2</version>
                                    <fixVersion>0.4</fixVersion>
                                    <component>Classification</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12913130" author="tdunning" created="Tue, 21 Sep 2010 19:02:11 +0100"  >&lt;p&gt;Olivier,&lt;/p&gt;

&lt;p&gt;Is there a quick patch for this?  It would be very nice to put this in for 0.4 and resolve it.&lt;/p&gt;</comment>
                            <comment id="12913292" author="ogrisel" created="Tue, 21 Sep 2010 23:32:24 +0100"  >&lt;p&gt;Hi Ted,&lt;/p&gt;

&lt;p&gt;Unfortunately I will be offline for the next couple of weeks and I no longer have the code + data sandbox I used when reporting this issue at the first place so that I won&apos;t be able to provide a quick fix before leaving.&lt;/p&gt;</comment>
                            <comment id="12913370" author="joekumar" created="Wed, 22 Sep 2010 04:44:25 +0100"  >&lt;p&gt;Hi Olivier,&lt;/p&gt;

&lt;p&gt;I was just looking at this issue to see if I can write a patch.&lt;br/&gt;
In WikipediaDatasetCreatorMapper, we check to see if the exactMatchOnly option is specified; if so we check if the Set of Strings (inputCategories) contains the desired category like below&lt;/p&gt;

&lt;p&gt;// inputCategories is a Set&amp;lt;String&amp;gt;&lt;br/&gt;
if (exactMatchOnly &amp;amp;&amp;amp; inputCategories.contains(category)) &lt;/p&gt;
{
        return category;
      }
&lt;p&gt;If not (ie if the exactMatchOnly is not specified), only then we are using &quot;category.contains(inputCategory)&quot; &lt;br/&gt;
We should not be using a word boundary and restricting the match to an exact word since the condition itself is that the exactMatchOnly is not set. so whatever code we currently have looks good.&lt;/p&gt;

&lt;p&gt;I am trying to find out what the actual issue is ?!&lt;/p&gt;

&lt;p&gt;reg,&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12913496" author="ogrisel" created="Wed, 22 Sep 2010 11:48:59 +0100"  >&lt;p&gt;Suppose you are interested in articles related to the country of India.&lt;/p&gt;

&lt;p&gt;If you choose to use to disable the exactMatchOnly, you will find articles with the following categories which are perfectly fine: &quot;History of India&quot;, &quot;Economy of India&quot;. But you will also get completely unrelated articles such as those from the category: &quot;Politics of Indiana&quot;.&lt;/p&gt;

&lt;p&gt;The word boundaries trick would help get rid of those false positives. Alternatively it is always possible to use the exact category taxonomy data from: &lt;a href=&quot;http://download.wikimedia.org/enwiki/latest/enwiki-latest-category.sql.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.wikimedia.org/enwiki/latest/enwiki-latest-category.sql.gz&lt;/a&gt; and then use the exactMatchOnly on the expanded subcategories in mahout processing.&lt;/p&gt;</comment>
                            <comment id="12913870" author="joekumar" created="Thu, 23 Sep 2010 01:56:45 +0100"  >&lt;p&gt;Thanks a lot for the clarification Olivier.&lt;br/&gt;
Since you are busy, shall I write a patch for this and attach it to JIRA ?&lt;/p&gt;</comment>
                            <comment id="12913909" author="tdunning" created="Thu, 23 Sep 2010 06:40:11 +0100"  >&lt;p&gt;Joe,&lt;/p&gt;

&lt;p&gt;That would be lovely to have.  Putting it here on the JIRA is just right.&lt;/p&gt;</comment>
                            <comment id="12914290" author="joekumar" created="Fri, 24 Sep 2010 01:30:42 +0100"  >&lt;p&gt;Modified code to check for word boundaries.&lt;br/&gt;
When searching for &quot;India&quot;, code will match &quot;Politics of India&quot; but not &quot;People from Indiana&quot;&lt;/p&gt;</comment>
                            <comment id="12914291" author="joekumar" created="Fri, 24 Sep 2010 01:31:35 +0100"  >&lt;p&gt;Modified code to check for word boundaries.&lt;br/&gt;
When searching for &quot;India&quot;, code will match &quot;Politics of India&quot; but not &quot;People from Indiana&quot;&lt;/p&gt;</comment>
                            <comment id="12914295" author="gangadhar" created="Fri, 24 Sep 2010 01:38:39 +0100"  >&lt;p&gt;Joe / Olivier,&lt;br/&gt;
In the WikipediaDatasetCreatorMapper.java, for this issue, I have a question regarding the exactMatchOnly check. The current code has this &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;WikipediaDatasetCreatorMapper.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exactMatchOnly &amp;amp;&amp;amp; inputCategories.contains(category)) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; category;
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!exactMatchOnly) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; inputCategory : inputCategories) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (category.contains(inputCategory)) { &lt;span class=&quot;code-comment&quot;&gt;// we have an inexact match
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; inputCategory;
          }
        } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For the case that there is no requirement for an exactMatch, why do we need to check if the category contains the inputCategory? Couldn&apos;t we flip the search to say, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!exactMatchOnly) {
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(inputCategories.contains(category))
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; category;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; ? &lt;br/&gt;
That way, the way Olivier explained, &lt;em&gt;Indiana&lt;/em&gt; would also figure in the category for &lt;em&gt;India&lt;/em&gt;. &lt;/p&gt;

&lt;p&gt;Am I missing something basic here?&lt;/p&gt;</comment>
                            <comment id="12914315" author="joekumar" created="Fri, 24 Sep 2010 03:04:57 +0100"  >&lt;p&gt;I am not sure if I completely understand your qn,&lt;br/&gt;
&amp;#8211; For the case that there is no requirement for an exactMatch, why do we need to check if the category contains the inputCategory?&lt;br/&gt;
Actually Indiana should not be listed in the results when we do an inexact match search.&lt;/p&gt;

&lt;p&gt;If we are doing an inExactMatch search, then we match any category that has the specified input category. So for example, when you are searching for a category called &quot;India&quot;, the current code is iterating over the category set (inputCategories) and gets all the categories that has the word &quot;India&quot; in it. So it would match &quot;Politics of India&quot;, &quot;People Of India&quot;  and also &quot;People of Indiana&quot; etc. But we are really interested in anything that matches India (here it is &quot;Politics of India&quot; and &quot;People Of India&quot; ) .&lt;br/&gt;
So instead of using the contains method we are using regular expression that&apos;ll match anything that has the whole word &quot;India&quot; in it and thereby shortlisting &quot;Politics of India&quot; and &quot;People Of India&quot;.&lt;/p&gt;

&lt;p&gt;Does that answer what you are looking for ?&lt;/p&gt;</comment>
                            <comment id="12914708" author="joekumar" created="Sat, 25 Sep 2010 00:44:11 +0100"  >&lt;p&gt;In your patch, you have handled the situation for a word boundary when&lt;br/&gt;
exactMatchOnly is false (i.e. when the user says I don&apos;t want an exact&lt;br/&gt;
match). Shouldn&apos;t your patch address the case when the user says that&lt;br/&gt;
(s)he wants an exactMatch (i.e. when the exactMatchOnly is True).&lt;br/&gt;
Shouldn&apos;t the check for the word boundaries be in the condition where&lt;br/&gt;
the exactMatch is True ?&lt;br/&gt;
&lt;font color=&quot;blue&quot;&gt;&lt;br/&gt;
When the user wants to perform exactMatch, we check for the exact word. For eg, when he wants to exactMatch for category &quot;India&quot;, we match only the word &lt;br/&gt;
&quot;India&quot; which is done using the contains() of the &amp;lt;Set&amp;gt;inputCategories&lt;/font&gt;&lt;br/&gt;
And my question was when the exactMatch is false. In that case, why do&lt;br/&gt;
we need to iterate to check each category ? In his case we just want&lt;br/&gt;
to check if the set (inputCategories) contains the string pattern&lt;br/&gt;
category.&lt;br/&gt;
&lt;font color=&quot;blue&quot;&gt;&lt;br/&gt;
When the exactMatch is false, we try to match all those categories that are close to the input category. For example, when we specify &quot;India&quot; in the input categories file, we try to match all the documents in wikipedia data set with categories that contains something similar to &quot;India&quot; like &quot;Politics of India&quot;, &quot;People of India&quot; , &quot;People from Indiana&quot;. But if you look at the categories that gets matched, we have matched &quot;People from Indiana&quot; which is not of interest to us since we are searching for something similar to the whole word &quot;India&quot;. Hence I have modified to code to do an word boundary match. So now when we search for &quot;India&quot;, the wikipedia articles which has just  &quot;Politics of India&quot; and &quot;People of India&quot; would match, which is what we want.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;Was I able to explain my question better ? Please let me know if I am&lt;br/&gt;
not clear and I will try to rephrase it. I hope I understood the issue&lt;br/&gt;
in question properly. If not, please correct me.&lt;br/&gt;
&lt;font color=&quot;blue&quot;&gt;&lt;br/&gt;
Hope the above explanation answers your qn.&lt;br/&gt;
I just realized a mistake that I did and have re-uploaded the patch. Could you please get the latest patch and try out if it works good. I am planning to do it over the weekend but if you could help that&apos;ll be great.&lt;/font&gt;&lt;br/&gt;
Thank you&lt;br/&gt;
Gangadhar&lt;/p&gt;</comment>
                            <comment id="12914709" author="joekumar" created="Sat, 25 Sep 2010 00:45:19 +0100"  >&lt;p&gt;The previous patch has an issue. Just fixed it.&lt;br/&gt;
I&apos;ll do some testing with this over the weekend.&lt;/p&gt;</comment>
                            <comment id="12916489" author="srowen" created="Thu, 30 Sep 2010 15:31:12 +0100"  >&lt;p&gt;Joe do you think this is ready to go or want to test some more (and bump this to 0.5)?&lt;/p&gt;</comment>
                            <comment id="12917279" author="joekumar" created="Sun, 3 Oct 2010 04:55:26 +0100"  >&lt;p&gt;Sean,&lt;/p&gt;

&lt;p&gt;I just finished manually testing the fix. The patch works good.&lt;br/&gt;
For testing this out, I injected some data into a single chunk of xml file that gets created using WikipediaXMLSplitter. In the xml file, I modified some of the values in &quot;category&quot; as india and some as indiana. When I ran wikipediaDataSetCreator using the old code, the output had both values of india and indiana. When I ran wikipediaDataSetCreator with the patch, i got results that matched just india. So this fix is good to go.&lt;/p&gt;

&lt;p&gt;I am not sure if we need a test case for this. If so, I can probably work on one and the test case could go with 0.5 ?&lt;/p&gt;

&lt;p&gt;reg,&lt;br/&gt;
Joe.&lt;/p&gt;</comment>
                            <comment id="12917309" author="srowen" created="Sun, 3 Oct 2010 11:22:32 +0100"  >&lt;p&gt;Resolved with a version of your patch Joe. I thought it might be wasteful to compile the regexes in every map() so pre-computed them in setup(). (And rearranged the code somewhat.)&lt;/p&gt;</comment>
                            <comment id="12917322" author="hudson" created="Sun, 3 Oct 2010 13:00:27 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #366 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Mahout-Quality/366/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/Mahout-Quality/366/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-271&quot; title=&quot;Make WikipediaDatasetCreatorMapper fuzzy category match respect word boundaries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-271&quot;&gt;&lt;del&gt;MAHOUT-271&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455532" name="MAHOUT-271.patch" size="801" author="joekumar" created="Sat, 25 Sep 2010 00:45:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Sep 2010 18:02:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy65b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>