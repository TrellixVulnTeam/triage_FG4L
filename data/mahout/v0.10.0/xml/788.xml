<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:24:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-788/MAHOUT-788.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-788] ClusterDumper is never flushing output stream</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-788</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;ClusterDumper utility never calls flush on the OutputStreamWriter.  As of issue &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-679&lt;/a&gt;, the output stream is never being closed when it defaults to System.out &amp;#8211; while that&apos;s a good thing, it would be nice to flush the stream before exiting the program.  As is, when I run cluster dumper with the -b (substring) option set to something like 50, the stream never gets big enough to overflow the default buffer on my machine, so I see no output.  Even when it does get big enough to overflow the buffer, I still miss the last cluster&apos;s summary.  When the output is written to a file, the close() method usually flushes the buffer by default, but it shouldn&apos;t hurt to call the flush method either way &amp;#8211; therefore I&apos;d suggest adding in an unconditional call to writer.flush(); in the finally block just before conditionally closing the writer. (line 199 in the org.apache.mahout.utils.clustering.ClusterDumper.run(String[] args) method)&lt;/p&gt;

&lt;p&gt;    } finally {&lt;br/&gt;
      writer.flush();&lt;br/&gt;
      if (shouldClose) &lt;/p&gt;
{
        Closeables.closeQuietly(writer);
      }
&lt;p&gt;    }&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519051">MAHOUT-788</key>
            <summary>ClusterDumper is never flushing output stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="dscheffy">Jeff Hansen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Aug 2011 23:03:53 +0100</created>
                <updated>Thu, 9 Feb 2012 14:00:47 +0000</updated>
                            <resolved>Wed, 17 Aug 2011 10:32:11 +0100</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>Clustering</component>
                    <component>Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="13086099" author="lancenorskog" created="Wed, 17 Aug 2011 04:19:04 +0100"  >&lt;p&gt;A finally clause can throw exceptions in the middle.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { writer.flush(); } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable e) {;}
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldClose) {
        Closeables.closeQuietly(writer);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13086101" author="tdunning" created="Wed, 17 Aug 2011 04:26:28 +0100"  >&lt;p&gt;Lance,&lt;/p&gt;

&lt;p&gt;That idiom is hideous.  catch Throwable is almost always a bug.&lt;/p&gt;

&lt;p&gt;Better by far to say&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      ... stuff ...
   } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
       writer.flush();
     } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldClose) {
         Closeables.closeQuietly(writer);
       }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pushing the flush into the first try clause might be reasonable as well.  If the first part blows out, we don&apos;t much care if we flush all data (that might be wrong anyway), but we probably do care to close files.  Thus,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
     ... stuff ...
     writer.flush();
   } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldClose) {
       Closeables.closeQuietly(writer);
     }
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;might be a better form all round.&lt;/p&gt;
</comment>
                            <comment id="13086215" author="srowen" created="Wed, 17 Aug 2011 10:32:11 +0100"  >&lt;p&gt;I agree with flush()-ing within the main block. That smells better to me and also still addresses the reported issue.&lt;/p&gt;</comment>
                            <comment id="13086262" author="hudson" created="Wed, 17 Aug 2011 13:27:35 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #990 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/990/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/990/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-788&quot; title=&quot;ClusterDumper is never flushing output stream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-788&quot;&gt;&lt;del&gt;MAHOUT-788&lt;/del&gt;&lt;/a&gt; flush writer before close&lt;/p&gt;

&lt;p&gt;srowen : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1158594&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1158594&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/utils/clustering/ClusterDumper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13086359" author="dscheffy" created="Wed, 17 Aug 2011 15:49:13 +0100"  >&lt;p&gt;By the way, the bug fix that initiated this behavior (&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-679&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MAHOUT-679&lt;/a&gt;) also applies to SequenceFileDumper and VectorDumper, but was never fixed there (so the output is being flushed when the stream is unconditionally closed).  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Aug 2011 03:19:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy2z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>