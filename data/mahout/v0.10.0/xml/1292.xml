<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:20:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1292/MAHOUT-1292.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1292] lucene2seq should validate the &apos;id&apos; field</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1292</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Lucene2seq creates only one sequencefile, rather than a file for each document in the index.&lt;/p&gt;

&lt;p&gt;Running lucene2seq on my Solr (4.3) index produces a file with a header and, it seems, the field I specified from the index, concatenated for all the documents. After running this through seq2sparse and rowid (to prepare for cvb), the resulting matrix has only one row, though it should create one row per document.&lt;/p&gt;

&lt;p&gt;This issue prevents, at least, data from a lucene index from being easily used as input for cvb. Lucene.vector is also currently inadequate: the keys to its sequence files are LongWriteable, and rowid will not convert only Text to IntWriteable, as is necessary for the keys in cvb.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659852">MAHOUT-1292</key>
            <summary>lucene2seq should validate the &apos;id&apos; field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smarthi">Suneel Marthi</assignee>
                                    <reporter username="lmerkhofer">Liz Merkhofer</reporter>
                        <labels>
                            <label>cvb</label>
                            <label>lucene</label>
                            <label>solr</label>
                    </labels>
                <created>Thu, 25 Jul 2013 18:48:17 +0100</created>
                <updated>Mon, 3 Feb 2014 07:57:18 +0000</updated>
                            <resolved>Sat, 16 Nov 2013 19:11:24 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13720004" author="lmerkhofer" created="Thu, 25 Jul 2013 21:23:46 +0100"  >&lt;p&gt;Issue was created by typo when entering -id. Since a &quot;docId&quot; did not exist (rather, &quot;docid&quot;) in my index, documents were apparently not delimited. With correct -id, creates appropriate number of sequence files.&lt;/p&gt;</comment>
                            <comment id="13720838" author="smarthi" created="Fri, 26 Jul 2013 15:39:11 +0100"  >&lt;p&gt;Reopening this issue, there should be a way to error out (or report back to the user) if an invalid field (that&apos;s not present in Solr/Lucene) has been specified. The user did not have to go through the entire chain of lucene2seq -&amp;gt; seq2sparse -&amp;gt; rowid -&amp;gt; cvb0 to realize that lucene2seq had failed.&lt;/p&gt;
</comment>
                            <comment id="13820586" author="frankscholten" created="Tue, 12 Nov 2013 22:37:56 +0000"  >&lt;p&gt;Added a check to LuceneSegmentRecordReader&apos;s initialize method which checks all the fields and throws an IllegalArgumentException. It currently uses the experimental CollectionStatistics API which is probably way inefficient but this is what I could code up in a few minutes.&lt;/p&gt;

&lt;p&gt;See my branch here: &lt;a href=&quot;https://github.com/frankscholten/mahout/tree/MAHOUT-1292&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/frankscholten/mahout/tree/MAHOUT-1292&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The sequential runner also needs to check the fields in the index. Will look at that later.&lt;/p&gt;</comment>
                            <comment id="13821944" author="frankscholten" created="Wed, 13 Nov 2013 22:47:54 +0000"  >&lt;p&gt;Also added checks for the sequential version. CollectionStatistics seems to take only a milisecond when I ran it on an index with 100000 documents with random strings. Though if anyone knows a better or more elegant way to check for non-existing fields I am all for it.&lt;/p&gt;</comment>
                            <comment id="13821984" author="smarthi" created="Wed, 13 Nov 2013 23:31:51 +0000"  >&lt;p&gt;Looks good Frank. &lt;/p&gt;</comment>
                            <comment id="13824589" author="smarthi" created="Sat, 16 Nov 2013 19:11:11 +0000"  >&lt;p&gt;Thanks for the patch. Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13824639" author="hudson" created="Sat, 16 Nov 2013 21:46:50 +0000"  >&lt;p&gt;FAILURE: Integrated in Mahout-Quality #2323 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2323/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2323/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1292&quot; title=&quot;lucene2seq should validate the &amp;#39;id&amp;#39; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1292&quot;&gt;&lt;del&gt;MAHOUT-1292&lt;/del&gt;&lt;/a&gt;:lucene2seq should validate the &apos;id&apos; field (smarthi: rev 1542553)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/CHANGELOG&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/LuceneSegmentRecordReader.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/LuceneSeqFileHelper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/SequenceFilesFromLuceneStorage.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/SequenceFilesFromLuceneStorageMapper.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/AbstractLuceneStorageTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/LuceneSegmentRecordReaderTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/SequenceFilesFromLuceneStorageDriverTest.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/SequenceFilesFromLuceneStorageTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13824986" author="hudson" created="Sun, 17 Nov 2013 23:03:30 +0000"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #2324 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2324/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2324/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1292&quot; title=&quot;lucene2seq should validate the &amp;#39;id&amp;#39; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1292&quot;&gt;&lt;del&gt;MAHOUT-1292&lt;/del&gt;&lt;/a&gt;:lucene2seq should validate the &apos;id&apos; field (smarthi: rev 1542596)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/LuceneIndexHelper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13829684" author="hudson" created="Fri, 22 Nov 2013 06:03:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #2329 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2329/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2329/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1292&quot; title=&quot;lucene2seq should validate the &amp;#39;id&amp;#39; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1292&quot;&gt;&lt;del&gt;MAHOUT-1292&lt;/del&gt;&lt;/a&gt;: Minor cleanup (smarthi: rev 1544373)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/LuceneSegmentRecordReaderTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1292&quot; title=&quot;lucene2seq should validate the &amp;#39;id&amp;#39; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1292&quot;&gt;&lt;del&gt;MAHOUT-1292&lt;/del&gt;&lt;/a&gt;: Minor cleanups (smarthi: rev 1544371)&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/LuceneSegmentInputFormatTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13830892" author="hudson" created="Sun, 24 Nov 2013 07:23:35 +0000"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #2333 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2333/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2333/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1292&quot; title=&quot;lucene2seq should validate the &amp;#39;id&amp;#39; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1292&quot;&gt;&lt;del&gt;MAHOUT-1292&lt;/del&gt;&lt;/a&gt;: cleanup (smarthi: rev 1544929)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/SequenceFilesFromLuceneStorageDriverTest.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1292&quot; title=&quot;lucene2seq should validate the &amp;#39;id&amp;#39; field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1292&quot;&gt;&lt;del&gt;MAHOUT-1292&lt;/del&gt;&lt;/a&gt;: Temporary fix to test - testRunInvalidQuery() until we figure out the issue with the MR version of the code. (smarthi: rev 1544928)&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/SequenceFilesFromLuceneStorageDriverTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12614070" name="MAHOUT-1292.patch" size="12526" author="frankscholten" created="Fri, 15 Nov 2013 15:07:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Jul 2013 14:39:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzghqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340362</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>