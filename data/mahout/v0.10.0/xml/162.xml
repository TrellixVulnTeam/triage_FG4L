<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:24:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-162/MAHOUT-162.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-162] Added support for mapping String to long IDs in CF code</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-162</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Since the framework now only allows long (64-bit integer) IDs, and no longer Strings, we need to provide some support for translating between the two. The basic proposal is this:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Define a one-way mapping from Strings to longs that is repeatable and easy to implement in many contexts. In particular I propose using the bottom 64 bits of the MD5 hash of a string.&lt;/li&gt;
	&lt;li&gt;Define support for storing the reverse mapping (longs to Strings) in various ways, in an efficient way, that handles gracefully the very rare possibility of collision&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12432770">MAHOUT-162</key>
            <summary>Added support for mapping String to long IDs in CF code</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="srowen">Sean Owen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2009 13:58:14 +0100</created>
                <updated>Thu, 2 May 2013 03:29:21 +0100</updated>
                            <resolved>Mon, 17 Aug 2009 17:53:25 +0100</resolved>
                                    <version>0.2</version>
                                    <fixVersion>0.2</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due>Fri, 21 Aug 2009 07:00:00 +0000</due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12741897" author="srowen" created="Tue, 11 Aug 2009 15:43:40 +0100"  >&lt;p&gt;Draft patch.&lt;/p&gt;</comment>
                            <comment id="12743256" author="otis" created="Fri, 14 Aug 2009 17:02:02 +0100"  >&lt;p&gt;Had a quick look and this seems nice and straight forward to me.  Commit? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12743375" author="srowen" created="Fri, 14 Aug 2009 20:23:37 +0100"  >&lt;p&gt;The interesting part might be the choice of hash function. I reversed myself and went with MD5. The reason is that it is more portable since it is a well known function implemented in many contexts and this could aid integration. For example from a MySQL database table using string ids, once can simply select &apos;conv(substr(md5(id),1,16),16,10)&apos; instead of &apos;id&apos; from the table and that is about it. &lt;/p&gt;

&lt;p&gt;Good glad it looks pretty straightforward. My laptop died so it will be some time before I can rebuild and commit from a new machine. Good thing I put out the patch, that is about the only thing I hadn&apos;t saved. &lt;/p&gt;</comment>
                            <comment id="12744131" author="srowen" created="Mon, 17 Aug 2009 17:53:25 +0100"  >&lt;p&gt;Committed patch as it seems to work for me (and Otis I presume) and heard no objections.&lt;/p&gt;</comment>
                            <comment id="12746717" author="shiweiwei97" created="Mon, 24 Aug 2009 04:23:06 +0100"  >&lt;p&gt;In AbstractIDMigrator.java I see this.&lt;/p&gt;

&lt;p&gt;private static final Charset UTF8_CHARSET = Charset.forName(&quot;UTF8&quot;);&lt;br/&gt;
...&lt;br/&gt;
md5hash = md5Digest.digest(value.getBytes(UTF8_CHARSET));&lt;/p&gt;

&lt;p&gt;It would be nice if it uses the Java 5 compatible method String.getBytes(String) instead of String.getBytes(Charset)&lt;/p&gt;</comment>
                            <comment id="12746724" author="tdunning" created="Mon, 24 Aug 2009 05:11:49 +0100"  >
&lt;p&gt;Mahout uses java 1.6 where there is an advantage to do so.  This requirement is inherited from Hadoop.&lt;/p&gt;

&lt;p&gt;This code that you mention is a good example of an additional small improvement available with 1.6.  The java 5 version of getBytes throws an UnsupportedEncodingException which is a checked exception.  Since there isn&apos;t much that you can do about this, that is just pain for no gain.&lt;/p&gt;
</comment>
                            <comment id="12746731" author="shiweiwei97" created="Mon, 24 Aug 2009 06:08:29 +0100"  >&lt;p&gt;It won&apos;t be easy for us to migrate the production env to java 6. We will have to use our own IDMirgrator implementation then.&lt;/p&gt;</comment>
                            <comment id="12746770" author="srowen" created="Mon, 24 Aug 2009 09:42:39 +0100"  >&lt;p&gt;Doesn&apos;t a lot more than this fail in Java 6, like @Override on implemented interface methods? or are you compiling with 6 and running on 5? If so, is this really the only incompatible difference at runtime? Hmm, maybe so.&lt;/p&gt;

&lt;p&gt;I do echo Ted&apos;s comment that switching to Java 6 is a good idea but understand that is sometimes easier said than done. Since the project is officially on Java 6, I&apos;d hesitate to have an informal requirement to not use any new APIs in 6. I do agree, this was a good API change that avoids an unnecessary and annoying exception. Still, one could say, it&apos;s such a small change to create backwards compatibility.&lt;/p&gt;

&lt;p&gt;I&apos;m going to suggest you simply reuse and change the code for Java 5 for now, and if you move to Java 6 later, you can quite easily use the standard implementation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12432140">MAHOUT-158</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12416206" name="MAHOUT-162.patch" size="15061" author="srowen" created="Tue, 11 Aug 2009 15:43:40 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Aug 2009 16:02:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy6tj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23256</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>