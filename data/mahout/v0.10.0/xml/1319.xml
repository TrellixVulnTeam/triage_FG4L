<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:22:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-1319/MAHOUT-1319.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-1319] seqdirectory -filter argument silently ignored when run as MR</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-1319</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Running &quot;seqdirectory&quot; (Sequence Files from Input Directory) from the command line and specifying a custom filter using the -filter parameter, the argument is ignored and the default &quot;PrefixAdditionFilter&quot; is used on the input. No exception is thrown.&lt;/p&gt;

&lt;p&gt;When the same command is run with &quot;-xm sequential&quot;, the filter is found and works as expected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12665565">MAHOUT-1319</key>
            <summary>seqdirectory -filter argument silently ignored when run as MR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="smarthi">Suneel Marthi</assignee>
                                    <reporter username="lmerkhofer">Liz Merkhofer</reporter>
                        <labels>
                            <label>seqdirectory</label>
                            <label>text</label>
                    </labels>
                <created>Mon, 26 Aug 2013 19:28:30 +0100</created>
                <updated>Mon, 14 Jul 2014 01:56:12 +0100</updated>
                            <resolved>Fri, 20 Dec 2013 17:19:35 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13842150" author="frankscholten" created="Sat, 7 Dec 2013 09:31:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmerkhofer&quot; class=&quot;user-hover&quot; rel=&quot;lmerkhofer&quot;&gt;Liz Merkhofer&lt;/a&gt; Perhaps you can create a patch with your filter class implementation? Currently the PrefixAdditionFilter is the only subclass and having an extra subclass allows us to create a test case which selects one of them.&lt;/p&gt;</comment>
                            <comment id="13848719" author="smarthi" created="Sun, 15 Dec 2013 23:35:27 +0000"  >&lt;p&gt;Could someone please review this patch?&lt;/p&gt;</comment>
                            <comment id="13850997" author="smarthi" created="Tue, 17 Dec 2013 22:18:14 +0000"  >&lt;p&gt;Updated patch attached.&lt;/p&gt;</comment>
                            <comment id="13852701" author="tharindu_rusira" created="Thu, 19 Dec 2013 07:26:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=smarthi&quot; class=&quot;user-hover&quot; rel=&quot;smarthi&quot;&gt;Suneel Marthi&lt;/a&gt;,&lt;br/&gt;
I applied your patch and tested against Mahout 0.8. All tests pass but I encountered an exception while running seqdirectory command with -xm mapreduce. I used the same PrefixAdditionFilter to implement a custom filter (MyTestFilter.java) with simple print line statement that says &quot;THIS IS A CUSTOM FILTER&quot; (I have attached the new filter class &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1319&quot; title=&quot;seqdirectory -filter argument silently ignored when run as MR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1319&quot;&gt;&lt;del&gt;MAHOUT-1319&lt;/del&gt;&lt;/a&gt;-custom-filter.patch)&lt;br/&gt;
Here&apos;re the results I got. It seems Mahout fails to find the constructor of the custom filter(java.lang.NoSuchMethodException: org.apache.mahout.text.MyTestFilter.&amp;lt;init&amp;gt;()).&lt;br/&gt;
Do you see any reason for this behaviour? &lt;/p&gt;


&lt;p&gt;Mac-mini-Tharindu:mahout-0.8 tkumara$ bin/mahout seqdirectory -i dictionary_dataset -o ~/Desktop/seqfiles -ow -filter org.apache.mahout.text.MyTestFilter&lt;br/&gt;
hadoop binary is not in PATH,HADOOP_HOME/bin,HADOOP_PREFIX/bin, running locally&lt;br/&gt;
SLF4J: Class path contains multiple SLF4J bindings.&lt;br/&gt;
SLF4J: Found binding in &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:file:/mahout-0.8/examples/target/mahout-examples-0.8-job.jar!/org/slf4j/impl/StaticLoggerBinder.class&amp;#93;&lt;/span&gt;&lt;br/&gt;
SLF4J: Found binding in &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:file:/mahout-0.8/examples/target/dependency/slf4j-jcl-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class&amp;#93;&lt;/span&gt;&lt;br/&gt;
SLF4J: See &lt;a href=&quot;http://www.slf4j.org/codes.html#multiple_bindings&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.slf4j.org/codes.html#multiple_bindings&lt;/a&gt; for an explanation.&lt;br/&gt;
SLF4J: Actual binding is of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.slf4j.impl.JCLLoggerFactory&amp;#93;&lt;/span&gt;&lt;br/&gt;
Dec 19, 2013 12:33:14 PM org.slf4j.impl.JCLLoggerAdapter info&lt;br/&gt;
INFO: Command line arguments: {--charset=&lt;span class=&quot;error&quot;&gt;&amp;#91;UTF-8&amp;#93;&lt;/span&gt;, --chunkSize=&lt;span class=&quot;error&quot;&gt;&amp;#91;64&amp;#93;&lt;/span&gt;, --endPhase=&lt;span class=&quot;error&quot;&gt;&amp;#91;2147483647&amp;#93;&lt;/span&gt;, --fileFilterClass=&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.mahout.text.MyTestFilter&amp;#93;&lt;/span&gt;, --input=&lt;span class=&quot;error&quot;&gt;&amp;#91;dictionary_dataset&amp;#93;&lt;/span&gt;, --keyPrefix=[], --method=&lt;span class=&quot;error&quot;&gt;&amp;#91;mapreduce&amp;#93;&lt;/span&gt;, --output=&lt;span class=&quot;error&quot;&gt;&amp;#91;/Users/tkumara/Desktop/seqfiles&amp;#93;&lt;/span&gt;, --overwrite=null, --startPhase=&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, --tempDir=&lt;span class=&quot;error&quot;&gt;&amp;#91;temp&amp;#93;&lt;/span&gt;}&lt;br/&gt;
Dec 19, 2013 12:33:14 PM org.slf4j.impl.JCLLoggerAdapter info&lt;br/&gt;
INFO: Deleting /Users/tkumara/Desktop/seqfiles&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.NoSuchMethodException: org.apache.mahout.text.MyTestFilter.&amp;lt;init&amp;gt;()&lt;br/&gt;
at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:68)&lt;br/&gt;
at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:28)&lt;br/&gt;
at org.apache.mahout.text.SequenceFilesFromDirectory.runMapReduce(SequenceFilesFromDirectory.java:143)&lt;br/&gt;
at org.apache.mahout.text.SequenceFilesFromDirectory.run(SequenceFilesFromDirectory.java:90)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)&lt;br/&gt;
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)&lt;br/&gt;
at org.apache.mahout.text.SequenceFilesFromDirectory.main(SequenceFilesFromDirectory.java:64)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)&lt;br/&gt;
at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)&lt;br/&gt;
at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:194)&lt;br/&gt;
Caused by: java.lang.NoSuchMethodException: org.apache.mahout.text.MyTestFilter.&amp;lt;init&amp;gt;()&lt;br/&gt;
at java.lang.Class.getConstructor0(Class.java:2810)&lt;br/&gt;
at java.lang.Class.getConstructor(Class.java:1718)&lt;br/&gt;
at org.apache.mahout.common.ClassUtils.instantiateAs(ClassUtils.java:62)&lt;br/&gt;
... 13 more&lt;/p&gt;

&lt;p&gt;But my custom filter works fine when running in the sequential mode.&lt;/p&gt;

&lt;p&gt;Mac-mini-Tharindu:mahout-0.8 tkumara$ bin/mahout seqdirectory -i dictionary_dataset -o ~/Desktop/seqfiles -ow -filter org.apache.mahout.text.MyTestFilter -xm sequential&lt;br/&gt;
hadoop binary is not in PATH,HADOOP_HOME/bin,HADOOP_PREFIX/bin, running locally&lt;br/&gt;
SLF4J: Class path contains multiple SLF4J bindings.&lt;br/&gt;
SLF4J: Found binding in &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:file:/mahout-0.8/examples/target/mahout-examples-0.8-job.jar!/org/slf4j/impl/StaticLoggerBinder.class&amp;#93;&lt;/span&gt;&lt;br/&gt;
SLF4J: Found binding in &lt;span class=&quot;error&quot;&gt;&amp;#91;jar:file:/mahout-0.8/examples/target/dependency/slf4j-jcl-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class&amp;#93;&lt;/span&gt;&lt;br/&gt;
SLF4J: See &lt;a href=&quot;http://www.slf4j.org/codes.html#multiple_bindings&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.slf4j.org/codes.html#multiple_bindings&lt;/a&gt; for an explanation.&lt;br/&gt;
SLF4J: Actual binding is of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.slf4j.impl.JCLLoggerFactory&amp;#93;&lt;/span&gt;&lt;br/&gt;
Dec 19, 2013 12:32:43 PM org.slf4j.impl.JCLLoggerAdapter info&lt;br/&gt;
INFO: Command line arguments: {--charset=&lt;span class=&quot;error&quot;&gt;&amp;#91;UTF-8&amp;#93;&lt;/span&gt;, --chunkSize=&lt;span class=&quot;error&quot;&gt;&amp;#91;64&amp;#93;&lt;/span&gt;, --endPhase=&lt;span class=&quot;error&quot;&gt;&amp;#91;2147483647&amp;#93;&lt;/span&gt;, --fileFilterClass=&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.mahout.text.MyTestFilter&amp;#93;&lt;/span&gt;, --input=&lt;span class=&quot;error&quot;&gt;&amp;#91;dictionary_dataset&amp;#93;&lt;/span&gt;, --keyPrefix=[], --method=&lt;span class=&quot;error&quot;&gt;&amp;#91;sequential&amp;#93;&lt;/span&gt;, --output=&lt;span class=&quot;error&quot;&gt;&amp;#91;/Users/tkumara/Desktop/seqfiles&amp;#93;&lt;/span&gt;, --overwrite=null, --startPhase=&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, --tempDir=&lt;span class=&quot;error&quot;&gt;&amp;#91;temp&amp;#93;&lt;/span&gt;}&lt;br/&gt;
Dec 19, 2013 12:32:44 PM org.slf4j.impl.JCLLoggerAdapter info&lt;br/&gt;
INFO: Deleting /Users/tkumara/Desktop/seqfiles&lt;br/&gt;
Dec 19, 2013 12:32:44 PM org.apache.hadoop.util.NativeCodeLoader &amp;lt;clinit&amp;gt;&lt;br/&gt;
WARNING: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable&lt;br/&gt;
THIS IS A CUSTOM FILTER&lt;br/&gt;
Dec 19, 2013 12:32:44 PM org.slf4j.impl.JCLLoggerAdapter info&lt;br/&gt;
INFO: Program took 481 ms (Minutes: 0.008016666666666667)&lt;/p&gt;</comment>
                            <comment id="13852725" author="smarthi" created="Thu, 19 Dec 2013 08:14:59 +0000"  >&lt;p&gt;thanks for verifying this, attached is updated patch that fixes this issue (its not been tested).&lt;/p&gt;</comment>
                            <comment id="13853776" author="smarthi" created="Fri, 20 Dec 2013 08:11:45 +0000"  >&lt;p&gt;Uploading a new patch that takes a filter class that implements PathFilter.  Unlike the sequential version the MR version already handles the keyprefix and chunk sizes without the need of a filter class (like PrefixAdditionFilter).&lt;/p&gt;

&lt;p&gt;With this patch it should be possible to pass in a CustomFilter that implements PathFilter to the MR version of seqdirectory.&lt;/p&gt;</comment>
                            <comment id="13854197" author="smarthi" created="Fri, 20 Dec 2013 17:19:35 +0000"  >&lt;p&gt;Patch committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13854981" author="hudson" created="Sat, 21 Dec 2013 23:31:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Mahout-Quality #2378 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/2378/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/2378/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-1319&quot; title=&quot;seqdirectory -filter argument silently ignored when run as MR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-1319&quot;&gt;&lt;del&gt;MAHOUT-1319&lt;/del&gt;&lt;/a&gt;: seqdirectory -filter argument silently ignored when run as MR (smarthi: rev 1552746)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/CHANGELOG&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/common/HadoopUtil.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/SequenceFilesFromDirectory.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/main/java/org/apache/mahout/text/WholeFileRecordReader.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/TestPathFilter.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/integration/src/test/java/org/apache/mahout/text/TestSequenceFilesFromDirectory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14060031" author="rangerwolf" created="Sun, 13 Jul 2014 08:31:46 +0100"  >&lt;p&gt;Hi All,&lt;br/&gt;
I use mahout seqdirectory in my env but it still report &quot;File not exists&quot; errors.&lt;br/&gt;
My Env:&lt;br/&gt;
Mahout 0.9&lt;br/&gt;
Ubuntu 14.04&lt;br/&gt;
Hadoop 1.2.1&lt;/p&gt;

&lt;p&gt;Command: mahout seqdirectory -i 20news-bydate-train/ -o 20news-bydate-train-seq -ow&lt;/p&gt;

&lt;p&gt;I already add mahout into system env var. &lt;br/&gt;
After I turn to mahout 0.7 and the same command works.&lt;/p&gt;</comment>
                            <comment id="14060250" author="smarthi" created="Mon, 14 Jul 2014 01:56:12 +0100"  >&lt;p&gt;Wenjun, the difference in seqdirectory between Mahout 0.7 and 0.9 is that in 0.7 seqdirectory was running in sequential mode only; while in 0.9 it runs in MR mode by default and is expecting to read input files from HDFS (which doesn&apos;t seem to exist in ur case). If u r trying to run 0.9 seqdirectory try the following :-&lt;/p&gt;

&lt;p&gt;mahout seqdirectory -i 20news-bydate-train/ -o 20news-bydate-train-seq -ow -xm sequential&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619503" name="MAHOUT-1319-custom-filter.patch" size="2097" author="tharindu_rusira" created="Thu, 19 Dec 2013 07:26:23 +0000"/>
                            <attachment id="12619771" name="MAHOUT-1319.patch" size="16229" author="smarthi" created="Fri, 20 Dec 2013 08:11:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 7 Dec 2013 09:31:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzhfa7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345806</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>