<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:16:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-195/MAHOUT-195.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-195] doubt about SlopeOneRecommender</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-195</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;Looking through the SlopeOne code in order to make some changes, I am having some doubts about how MemoryDiffStorage handles things.&lt;/p&gt;

&lt;p&gt;It looks to me like buildAverageDiffs(), or rather processOneUser() inserts the item pairs in the order they appear in userPreferences, as obtained from dataModel.getPreferencesFromUser(userID).&lt;/p&gt;

&lt;p&gt;So if user A has items (X,Y,Z) we obtain the pairs (X,Y),(X,Z),(Y,Z) and update their averages,&lt;br/&gt;
if user B has items (Z,X,Y) we obtain (Z,X),(Z,Y),(X,Y).&lt;/p&gt;

&lt;p&gt;When using getDiff for (Y,Z) it will not look for the (Z,Y) average that user B contributes to, as the average for (Y,Z) is not null.&lt;/p&gt;

&lt;p&gt;Unless we know that preferences are always ordered, e.g. by itemID, this seems like a bug.  I have not found any mention of it being ordered in the documentation of DataModel or PreferenceArray.  If the items are ordered it would seem to be easier to check the order in getDiff(x,y) instead of trying one, then the other.&lt;/p&gt;

&lt;p&gt;P.s.: I tried to ask on mahout-users, but my message never appeared on the list. There might be some kind of filter rejecting the plus sign in my address or something like that, but it&apos;s the one where I receive the list messages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12439943">MAHOUT-195</key>
            <summary>doubt about SlopeOneRecommender</summary>
                <type id="11" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Question</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srowen">Sean Owen</assignee>
                                    <reporter username="jg">Jens Grivolla</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2009 14:17:07 +0000</created>
                <updated>Sat, 21 May 2011 04:24:09 +0100</updated>
                            <resolved>Thu, 5 Nov 2009 20:51:14 +0000</resolved>
                                                    <fixVersion>0.3</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12773955" author="srowen" created="Thu, 5 Nov 2009 15:54:13 +0000"  >&lt;p&gt;You&apos;re right about how diffs are computed. Since the Y,Z diff is just the negative of Z,Y, only one is stored internally, and it&apos;s always stored in smaller,bigger order. However, this should be transparent to you. You can ask for the Y,Z or Z,Y diff and get the right answer.&lt;/p&gt;

&lt;p&gt;Yes, prefs and IDs must be ordered in some cases in the API. I think the only one that matters is the result of DataModel.getPreferencesFromUser(). It is ordered but yeah I am not sure the docs say the return value is ordered. I can clarify that. So that much should work.&lt;/p&gt;

&lt;p&gt;I agree with your other optimization. Actually, not sure why it was written that way to begin with, unless I forget something. It may have made more sense way way back when item IDs were not necessarily comparable.&lt;/p&gt;</comment>
                            <comment id="12773959" author="jg" created="Thu, 5 Nov 2009 16:16:50 +0000"  >&lt;p&gt;Ok, I finally found a prefs.sortByItem() somewhat hidden in the constructor of GenericDataModel.  It probably should be documented that other implementations of DataModel need to guarantee this.&lt;/p&gt;

&lt;p&gt;This also means that it is dangerous to use PreferenceArray.sortByX() on an existing PreferenceArray.  AFAICS, if you do a getPreferencesFromUser(id) and call sortByValue() on it, e.g. to get the top items, you will seriously mess up your DataModel.  What saves you right now is that you usually build the diffs on a freshly created DataModel, and I see that RecommenderServlet clones the PreferenceArray before sorting it anyway.&lt;/p&gt;

&lt;p&gt;I seem to remember that there were problems with results changing over time a while back, don&apos;t know if it could be related.&lt;/p&gt;</comment>
                            <comment id="12773965" author="srowen" created="Thu, 5 Nov 2009 16:40:21 +0000"  >&lt;p&gt;Yes I will add that to the javadoc. Yes you are right, you can&apos;t mess with these objects much. The tradeoff is performance, and performance is so important. Copying data structures is expensive.&lt;/p&gt;

&lt;p&gt;Anyway I&apos;m working on a few things here since the diff storage can probably be improved in a few places to actually use this assumption.&lt;/p&gt;</comment>
                            <comment id="12774071" author="srowen" created="Thu, 5 Nov 2009 20:51:14 +0000"  >&lt;p&gt;OK committed my javadoc change, and getDiff() improvement. TYVM&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Nov 2009 15:54:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy6m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>