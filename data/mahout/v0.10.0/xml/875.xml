<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:24:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-875/MAHOUT-875.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-875] Allow to obtain Mahout version information through the Java API</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-875</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;It would be nice to be able to obtain the used Mahout version through the Java API. This enables users to output the version information for debugging purposes or simple to document which Mahout version is used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530520">MAHOUT-875</key>
            <summary>Allow to obtain Mahout version information through the Java API</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tdunning">Ted Dunning</assignee>
                                    <reporter username="o.b.fischer">Oliver B. Fischer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Nov 2011 23:55:58 +0000</created>
                <updated>Sat, 31 Dec 2011 18:34:31 +0000</updated>
                            <resolved>Fri, 30 Dec 2011 18:20:25 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13145168" author="o.b.fischer" created="Mon, 7 Nov 2011 00:31:02 +0000"  >&lt;p&gt;This patch illustrates how the Maven version information could be used to provide it via the Java API of Mahout.&lt;/p&gt;</comment>
                            <comment id="13153147" author="isabel" created="Fri, 18 Nov 2011 21:43:14 +0000"  >&lt;p&gt;Patch applies cleanly, however I do not quite get how this is supposed to work. It seems like the patch adds support for generating version information as part of the maven build cycle? Which maven command do I need to issue to do this generation? Do you plan to also add integration of this into the ./bin/mahout script?&lt;/p&gt;</comment>
                            <comment id="13153469" author="o.b.fischer" created="Sat, 19 Nov 2011 12:38:07 +0000"  >&lt;p&gt;That is right. I use the usual ways Maven processes resources and substitutes parameters. Currently &lt;tt&gt;MahoutVersion.java&lt;/tt&gt; contains only a placeholder like {{public final static String VERSION = &quot;$&lt;/p&gt;
{project.version}
&lt;p&gt;&quot;;}}. Maven will replace it by the version value in the POM.&lt;/p&gt;

&lt;p&gt;Of cource, I can apply this solution also to the &lt;tt&gt;./bin/mahout&lt;/tt&gt; script. Would it be engough to add support for an option &lt;tt&gt;--version&lt;/tt&gt; which forces the script to output a string like &lt;tt&gt;Apache Mahout xyz&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="13153478" author="tdunning" created="Sat, 19 Nov 2011 13:01:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Of course, I can apply this solution also to the &lt;tt&gt;./bin/mahout&lt;/tt&gt; script. Would it be enough to add support for an option --version which forces the script to output a string like &lt;tt&gt;Apache Mahout xyz&lt;/tt&gt;?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That seems like plenty for now.  We can add a resource and version API later if people want it in addition.&lt;/p&gt;</comment>
                            <comment id="13153479" author="tdunning" created="Sat, 19 Nov 2011 13:02:28 +0000"  >&lt;p&gt;Also, I believe that Package in the context of maven already provides something like that in the jar meta-data.&lt;/p&gt;</comment>
                            <comment id="13153480" author="o.b.fischer" created="Sat, 19 Nov 2011 13:03:07 +0000"  >&lt;p&gt;Ok, I will enhence the patch during the next days.&lt;/p&gt;</comment>
                            <comment id="13153481" author="o.b.fischer" created="Sat, 19 Nov 2011 13:03:45 +0000"  >&lt;p&gt;I will provide a new patch within the next days with support for &lt;tt&gt;./bin/mahout&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13153484" author="frankscholten" created="Sat, 19 Nov 2011 13:18:54 +0000"  >&lt;p&gt;What about adding $&lt;/p&gt;
{project.version}
&lt;p&gt; to driver.classes.props? This way you can get the version via MahoutDriver, which loads this file.&lt;/p&gt;</comment>
                            <comment id="13153493" author="o.b.fischer" created="Sat, 19 Nov 2011 13:57:40 +0000"  >&lt;p&gt;I had a rough look at &lt;tt&gt;driver.classes.props&lt;/tt&gt; and it seems that this properties has an different use. It seems so, that is is only used to translate message keys into a more meaningfull string.&lt;/p&gt;</comment>
                            <comment id="13153501" author="tdunning" created="Sat, 19 Nov 2011 14:31:31 +0000"  >&lt;p&gt;Sure.  But it is reasonable to have a message key that translates into the version string.&lt;/p&gt;</comment>
                            <comment id="13154113" author="o.b.fischer" created="Mon, 21 Nov 2011 10:46:32 +0000"  >&lt;p&gt;I can add it to &lt;tt&gt;driver.classes.props&lt;/tt&gt; without any problem. &lt;/p&gt;

&lt;p&gt;Applying the same mechanism to the &lt;tt&gt;./bin/mahout&lt;/tt&gt; script and to &lt;tt&gt;driver.classes.props&lt;/tt&gt; means to move the to the directories for resources. This is easily done for the &lt;tt&gt;driver.classes.props&lt;/tt&gt; but not for the script. This would require a much more radical change to the build infrastructure. &lt;/p&gt;</comment>
                            <comment id="13154137" author="frankscholten" created="Mon, 21 Nov 2011 12:50:57 +0000"  >&lt;p&gt;The driver.classes.default.props file (renamed from driver.classes.props by the ant-run plugin) may not be a good location after all since it won&apos;t be used if there is a user provided driver.classes.props on the classpath. &lt;/p&gt;

&lt;p&gt;Maybe a &apos;version&apos; program with a version.props file? This way you can run &apos;bin/mahout version&apos; and the script does not need to be filtered or modified.&lt;/p&gt;</comment>
                            <comment id="13154140" author="o.b.fischer" created="Mon, 21 Nov 2011 12:52:03 +0000"  >&lt;p&gt;I would like to create a second separate issue for adding the version information to the &lt;tt&gt;./bin/mahout&lt;/tt&gt; script since it requires more effort than adding the same information to the Java API. Any objections?&lt;/p&gt;</comment>
                            <comment id="13154584" author="isabel" created="Mon, 21 Nov 2011 22:15:25 +0000"  >&lt;p&gt;No problem - go ahead and move the discussion on adding the version number information to the shell script to a new issue.&lt;/p&gt;</comment>
                            <comment id="13155055" author="o.b.fischer" created="Tue, 22 Nov 2011 12:40:30 +0000"  >&lt;p&gt;I just created &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-892&quot; title=&quot;Allow to obtain used Mahout version via ./bin/mahout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-892&quot;&gt;&lt;del&gt;MAHOUT-892&lt;/del&gt;&lt;/a&gt;. This issue addresses the requested changes to the &lt;tt&gt;mahout&lt;/tt&gt; script below &lt;tt&gt;bin&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13156288" author="o.b.fischer" created="Wed, 23 Nov 2011 21:17:46 +0000"  >&lt;p&gt;This version of the patch adds also a version string to &lt;tt&gt;driver.classes.props&lt;/tt&gt;.&lt;/p&gt;
</comment>
                            <comment id="13156293" author="o.b.fischer" created="Wed, 23 Nov 2011 21:24:03 +0000"  >&lt;p&gt;To test the patch simply enter the directory &lt;tt&gt;core&lt;/tt&gt; and enter &lt;tt&gt;mvn compile&lt;/tt&gt;. The patch enhences the POM to copy the &lt;tt&gt;MahoutVersion.java&lt;/tt&gt; file to &lt;tt&gt;target\generated-sources\version&lt;/tt&gt;. While copying the file, Maven replaces all known properties in the file.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;driver.classes.props&lt;/tt&gt; contains now the key &lt;tt&gt;org.apache.mahout.version&lt;/tt&gt;. It is set to the value of &lt;tt&gt;project.version&lt;/tt&gt;. To replace the property by its value, I use the filterchain feature of Ant.&lt;/p&gt;</comment>
                            <comment id="13156354" author="tdunning" created="Wed, 23 Nov 2011 22:35:01 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&lt;tt&gt;driver.classes.props&lt;/tt&gt; contains now the key &lt;tt&gt;org.apache.mahout.version&lt;/tt&gt;. It is set to the value of &lt;tt&gt;project.version&lt;/tt&gt;. To replace the property by its value, I use the filterchain feature of Ant.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It would be better to not depend on ant and use the property replacement capabilities of Maven.  In particular, resources already get this treatment by default so you can put references to the properties you care about in a resource and simply read that resource when you want the version info.&lt;/p&gt;

&lt;p&gt;In addition, the version of Mahout is to be found in the META-INF directory in the jar.  This allows this code to get the desired version.  Resources can also be used.&lt;/p&gt;

&lt;p&gt;Here is sample code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class Version {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; version() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Version.class.getPackage().getImplementationVersion();
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; versionFromResource() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Resources.toString(Resources.getResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;version&quot;&lt;/span&gt;), Charsets.UTF_8);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, the standard method based on Package.getImplementationVersion will not work with our current job jar because of some non-standardness in the build process.  It does work on the mahout-core jar itself.  Also, it doesn&apos;t work in debugging since it depends on META-INF appearing in the right jar.&lt;/p&gt;

&lt;p&gt;The resources approach will work regardless of how the code is packaged.  To interpolate variables into a resource, the following needs to be added to the pom:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;resources&amp;gt;
  &amp;lt;resource&amp;gt;
    &amp;lt;directory&amp;gt;src/main/resources&amp;lt;/directory&amp;gt;
    &amp;lt;filtering&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/filtering&amp;gt;
  &amp;lt;/resource&amp;gt;
&amp;lt;/resources&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This should be added to the &amp;lt;build&amp;gt; element.&lt;/p&gt;

&lt;p&gt;The following needs to be put into a file in core/src/main/resources/version&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
${project.version}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;See also&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/javase/tutorial/deployment/jar/packageman.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/tutorial/deployment/jar/packageman.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/versioning/spec/versioning2.html#wp89936&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/7/docs/technotes/guides/versioning/spec/versioning2.html#wp89936&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13157152" author="o.b.fischer" created="Fri, 25 Nov 2011 13:47:55 +0000"  >&lt;p&gt;@Ted: I will overhaul the patch and resubmit it in some days.&lt;/p&gt;</comment>
                            <comment id="13163768" author="o.b.fischer" created="Tue, 6 Dec 2011 19:40:00 +0000"  >&lt;p&gt;I provided a new version of the patch which takes Teds suggestions into consideration.&lt;/p&gt;</comment>
                            <comment id="13167871" author="o.b.fischer" created="Mon, 12 Dec 2011 22:21:10 +0000"  >&lt;p&gt;Can someone please review my patch?&lt;/p&gt;</comment>
                            <comment id="13174872" author="tdunning" created="Thu, 22 Dec 2011 16:05:03 +0000"  >&lt;p&gt;This looks simple and sweet to me.  &lt;/p&gt;

&lt;p&gt;It works my having maven insert the version into a resource and then a method method reads the resource.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t give information about included libraries, but knowing the Mahout version should give you that.&lt;/p&gt;</comment>
                            <comment id="13177716" author="tdunning" created="Fri, 30 Dec 2011 18:20:25 +0000"  >&lt;p&gt;Committed patch.&lt;/p&gt;</comment>
                            <comment id="13177784" author="hudson" created="Fri, 30 Dec 2011 21:58:23 +0000"  >&lt;p&gt;Integrated in Mahout-Quality #1283 (See &lt;a href=&quot;https://builds.apache.org/job/Mahout-Quality/1283/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Mahout-Quality/1283/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-875&quot; title=&quot;Allow to obtain Mahout version information through the Java API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-875&quot;&gt;&lt;del&gt;MAHOUT-875&lt;/del&gt;&lt;/a&gt; - Added version object with associated resource.&lt;/p&gt;

&lt;p&gt;tdunning : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1225885&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1225885&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/java/org/apache/mahout/Version.java&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/core/src/main/resources/version&lt;/li&gt;
	&lt;li&gt;/mahout/trunk/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13177997" author="o.b.fischer" created="Sat, 31 Dec 2011 13:11:37 +0000"  >&lt;p&gt;Thank you Ted.&lt;/p&gt;</comment>
                            <comment id="13178001" author="o.b.fischer" created="Sat, 31 Dec 2011 13:27:30 +0000"  >&lt;p&gt;Applied to the source repository.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12504266">MAHOUT-670</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12532323">MAHOUT-892</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12506297" name="MAHOUT-875.patch" size="3681" author="o.b.fischer" created="Tue, 6 Dec 2011 19:38:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Nov 2011 21:43:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216258</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy2fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>