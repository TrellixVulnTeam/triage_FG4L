<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:16:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/MAHOUT-648/MAHOUT-648.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[MAHOUT-648] API-changes for optimizing recommender performance in some usecases</title>
                <link>https://issues.apache.org/jira/browse/MAHOUT-648</link>
                <project id="12310751" key="MAHOUT">Mahout</project>
                    <description>&lt;p&gt;I&apos;d like to propose a set of small API changes in our recommender code. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add a method &lt;b&gt;allSimilarItemIDs(long itemID)&lt;/b&gt; to ItemSimilarity, which returns the ids of all similar items&lt;/li&gt;
	&lt;li&gt;make sure that &lt;b&gt;GenericItemBasedRecommender.recommend(...)&lt;/b&gt; only makes &lt;b&gt;a single call to the DataModel&lt;/b&gt; with which it retrieves all preferences for the user to recommend items for&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add &lt;b&gt;a new strategy for finding candidate items&lt;/b&gt; for the most-similar-items and recommendation computation that only calls ItemSimilarity.allSimilarItemIDs(...) and doesn&apos;t need to call anything on the DataModel&lt;/li&gt;
	&lt;li&gt;and an option to GenericItemSimilarity to make it create an in-memory-index to allow &lt;b&gt;retrieval of all similar items per item in constant time&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;The purpose of these changes is to make it possible to run a very efficient recommender for usecases, where the major purpose of the recommender is to answer requests for most-similar-items and it you only have to compute &quot;real&quot; recommendations from time to time. A typical scenario where these conditions are met is e-commerce, you have lots of most-similar-items calls as users browse product pages and fill their shopping carts and for the minority of users that log in you have to provide personalized product recommendations.&lt;/p&gt;

&lt;p&gt;With the proposed changes, you need to precompute the item-similarities and load them into memory, either from a file with FileItemSimilarity or from a database with the new MySQLJDBCInMemoryItemSimilarity and use a GenericItemBasedRecommender with the AllSimilarItemsCandidateItemsStrategy. Requests for most-similar-items can be completely answered from memory (in nearly constant time) without having to touch the DataModel. Answering 100 requests per second on a single machine are no problem using this approach.&lt;/p&gt;

&lt;p&gt;We can then use &lt;b&gt;a DataModel that does not need to reside in memory&lt;/b&gt; because its only task is to act as a repository for the users&apos; preferences. When we compute personalized recommendations we need to do exactly one single call to the datastore to retrieve all the preferences for the user we wanna compute recommendations for. This single call should be very fast with our already existing jdbc-backed DataModel&apos;s and it should be easy to implement it equally fast in other datastores like Solr for example. One could even start thinking about sharded DataModels with this approach.&lt;/p&gt;

&lt;p&gt;Another very big advantage of this approach is that &lt;b&gt;user preferences can now be updated in realtime&lt;/b&gt; as we never need to refresh the datamodel. We only need to refresh the item-similarities from time to time. Memory requirements for the recommender machines would drop drastically as we &lt;b&gt;only have to store the item-similarities in RAM&lt;/b&gt; whose number should be orders of magnitude smaller than the number of preferences.&lt;/p&gt;

&lt;p&gt;The API changes in the patch should be fully backwards compatible, so that this new approach is only an additional way to use our recommender code and all currently existing approaches still work as before.&lt;/p&gt;

&lt;p&gt;Here is an example how such a setup would work using a MySQL database:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DataSource dataSource = ...
DataModel dataModel = new MySQLJDBCDataModel(dataSource);

/* load all item-similarities into memory, create an index for fast retrieval of all-similar-item-ids */
ItemSimilarity itemSimilarity = MySQLJDBCInMemoryItemSimilarity(dataSource, true);

/* the candidate items for recommendation and most-similar-items are only fetched from our in-memory data structures by this strategy*/
AllSimilarItemsCandidateItemsStrategy allSimilarItemsStrategy = new AllSimilarItemsCandidateItemsStrategy(itemSimilarity);

ItemBasedRecommender recommender = new GenericItemBasedRecommender(dataModel, itemSimilarity, allSimilarItemsStrategy, allSimilarItemsStrategy);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12503194">MAHOUT-648</key>
            <summary>API-changes for optimizing recommender performance in some usecases</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ssc">Sebastian Schelter</assignee>
                                    <reporter username="ssc">Sebastian Schelter</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Apr 2011 08:05:12 +0100</created>
                <updated>Sat, 21 May 2011 04:18:50 +0100</updated>
                            <resolved>Sat, 2 Apr 2011 17:41:10 +0100</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>Collaborative Filtering</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13014980" author="srowen" created="Sat, 2 Apr 2011 11:03:38 +0100"  >&lt;p&gt;I think it&apos;s broadly OK. It&apos;s not changing the caller&apos;s existing APIs, is mostly adding new functionality and reworking internals. I have some small comments for your consideration.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The small thing I don&apos;t like about FastIDSet(long...) is that it&apos;s maybe too easy to call &quot;new FastIDSet(1)&quot; or something which would not resolve to this constructor. Since it looks like it&apos;s called with long[] really, just make its signature take a long[]?&lt;/li&gt;
	&lt;li&gt;GenericBooleanPrefItemBasedRecommender &amp;#8211; don&apos;t think it&apos;s actually using the new prefs object that&apos;s passed in. Just remove the now-redundant lookup in the method?&lt;/li&gt;
	&lt;li&gt;GenericItemSimilarity: I&apos;d probably say don&apos;t bother asking the user to decide whether to make this &apos;index&apos; or not. Just add the index for performance. Yes it costs memory.&lt;/li&gt;
	&lt;li&gt;Same with the JDBC-backed versions&lt;/li&gt;
	&lt;li&gt;(You might run the unused import checker before you commit, there are a number)&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13015049" author="ssc" created="Sat, 2 Apr 2011 17:41:10 +0100"  >&lt;p&gt;reworked the patch to match the points mentioned and committed.&lt;/p&gt;</comment>
                            <comment id="13015064" author="hudson" created="Sat, 2 Apr 2011 19:17:15 +0100"  >&lt;p&gt;Integrated in Mahout-Quality #713 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/Mahout-Quality/713/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/Mahout-Quality/713/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MAHOUT-648&quot; title=&quot;API-changes for optimizing recommender performance in some usecases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAHOUT-648&quot;&gt;&lt;del&gt;MAHOUT-648&lt;/del&gt;&lt;/a&gt; API-changes for optimizing recommender performance in some usecases&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475279" name="MAHOUT-648.patch" size="83560" author="ssc" created="Sat, 2 Apr 2011 08:20:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 2 Apr 2011 10:03:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxy3tr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>