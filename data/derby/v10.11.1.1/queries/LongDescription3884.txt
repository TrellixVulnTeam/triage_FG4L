The dblook utility produces a script which can be used to recreate the schema of a database. Permissions are added in one big block at the end of this script. However, the faithful recreation of some objects (like views) may depend on the creator being a specific user having specific privileges. Faithfully recreating the schema may require the ability to change user and sort, by dependency, the statements which dblook emits--so that  permission grants may be interleaved with object declarations. For a discussion of this problem, please see the commentary by Dag, dated 25/Sep/08, on DERBY-3877.

This problem was introduced when we added GRANT/REVOKE to Derby. The addition of SQL Roles creates more problem cases.