You get a ClassNotFoundException when you try to invoke a table function which lives in a jar file stored inside the database. This is because FromVTI.implementsDerbyStyleVTICosting() looks up the class using Class.forName() rather than using the session classloader. A similar bug is in FromVTI.getVTICosting(). This bug was reported by Krzysztof N in the following user list thread: http://www.nabble.com/Uinable-to-use-Table-function-due-to-java.lang.ClassNotFoundException--while-class-is-clearly-reachable..-td22478383.html#a22699492