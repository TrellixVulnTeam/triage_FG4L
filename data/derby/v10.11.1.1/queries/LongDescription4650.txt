If you perform a query with an aggregate function against a restricted table function, the predicates in the HAVING clause are not pushed down to the table function.