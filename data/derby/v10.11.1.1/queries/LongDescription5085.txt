If you shutdown the engine specifying deregister=false, then get a new connection, then shutdown the engine again without specifying any value for the deregister attribute, Derby acts as though you specified deregister=false again. I will attach a test program which shows this problem.