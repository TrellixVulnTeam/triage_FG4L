Reply incorrectly handles read() returning -1