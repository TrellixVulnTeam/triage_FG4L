In DERBY-4653, Kristian suggested we have a test that parse the trace file to detect round-trip Connection.flowcommit() instead of calling getClientTransactionID() method. The existing test for DERBY-4653 is in J2EEDataSourceTest.testConnectionFlowCommit(). When this issue get fixed, the call for getClientTransactionID can be replace with trace file parsing.