If the network connection to the slave is lost, ObjectOutputStream#writeObject may be blocked for 2 minutes before failing (not configurable TCP property). 

Currently, ALS#forceFlush sends a chunk of log to the slave using the client thread. The client thread cannot be blocked for 2 minutes before giving up. Rather, it should notify the log shipper that it has to send log immediately, and then wait for a short while (until notified or e.g. maximum 5 seconds). If the log shipper has not been able to empty some space in the log buffer by then, replication should be stopped.