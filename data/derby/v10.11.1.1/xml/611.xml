<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-611/DERBY-611.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-611] Network client: updateRow() causes a commit when autoCommit = true</title>
                <link>https://issues.apache.org/jira/browse/DERBY-611</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;On the network client driver, the ResultSet method updateRow makes the transaction commit, when autocommit is true. The correct behavior is to commit only when the result set is closed. This works correctly in the embedded driver.&lt;/p&gt;

&lt;p&gt;The repro case is uploaded as an attachment &quot;testCSUpdateRowCommits.java&quot;.&lt;/p&gt;

&lt;p&gt;Output (repro case):&lt;br/&gt;
	updateRow() should not commit&lt;br/&gt;
	Value: 16, expected value 1. Should not have committed updateRow()&lt;/p&gt;</description>
                <environment>Java Version:    1.5.0_01&lt;br/&gt;
Java Vendor:     Sun Microsystems Inc.&lt;br/&gt;
Java home:       /usr/jdk/instances/jdk1.5.0/jre&lt;br/&gt;
Java classpath:  classes&lt;br/&gt;
OS name:         SunOS&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version:      5.10&lt;br/&gt;
</environment>
        <key id="12317763">DERBY-611</key>
            <summary>Network client: updateRow() causes a commit when autoCommit = true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="fernanda">Fernanda Pizzorno</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2005 18:05:53 +0100</created>
                <updated>Tue, 20 Dec 2005 10:40:07 +0000</updated>
                            <resolved>Mon, 19 Dec 2005 19:09:12 +0000</resolved>
                                    <version>10.0.2.2</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12357978" author="dagw" created="Sat, 19 Nov 2005 00:18:50 +0000"  >&lt;p&gt;deleteRow has the same problem. In both cases (updateRow and deleteRow), there is explicit code&lt;br/&gt;
to make a commit happen is autocommit is on.&lt;/p&gt;</comment>
                            <comment id="12360271" author="dagw" created="Tue, 13 Dec 2005 10:08:58 +0000"  >&lt;p&gt;I have uploaded a fix for this problem (611.&lt;/p&gt;
{stat,diff}
&lt;p&gt;), and added a&lt;br/&gt;
new test (look for &quot;Positive Test34&quot;) to lang/updatableResultSet.java.&lt;br/&gt;
The network client driver canons are also changed in the case of three&lt;br/&gt;
error messages due to the changed behavior, in addition to the change&lt;br/&gt;
due to new test.&lt;/p&gt;

&lt;p&gt;The patch removes the explicit (auto)commit code in the network client&lt;br/&gt;
driver in deleteRow and updateRow, making it behave as the embedded&lt;br/&gt;
driver in this respect (modulo error messages).&lt;/p&gt;

&lt;p&gt;I have run lang/updatableResultSet.java successfully with Sun jdk 1.3,&lt;br/&gt;
1.4 and 1.5 (the two latter has another canon) on Solaris&lt;br/&gt;
10/x86. Also, there is a separate canon under j9_13 for this test,&lt;br/&gt;
which I have updated, but not been able to test.&lt;/p&gt;

&lt;p&gt;I have also run derbyall successfully with jdk 1.4, also on Solaris&lt;br/&gt;
10/x86, albeit with some errors in unrelated tests (lang/dcl,&lt;br/&gt;
store/OnlineBackupTest1.java) &lt;/p&gt;</comment>
                            <comment id="12360295" author="dagw" created="Tue, 13 Dec 2005 22:26:16 +0000"  >&lt;p&gt;An updated diff, which removes a spurious blank line introduced by the&lt;br/&gt;
first version of the patch.&lt;/p&gt;

&lt;p&gt;The reviewer (Bernt) asked for explanation of the removed usage of the&lt;br/&gt;
variable &apos;chainAutoCommit&apos;: It was used to be able to potentially&lt;br/&gt;
append an commit action onto the update/delete row action to be sent&lt;br/&gt;
to the server over DRDA, in the case that autocommit is in force, and&lt;br/&gt;
to anticipate a reply from that commit action.  Since the intention of&lt;br/&gt;
the patch is to remove this commit, the variable is no longer in use&lt;br/&gt;
and has been removed.&lt;/p&gt;</comment>
                            <comment id="12360340" author="dagw" created="Wed, 14 Dec 2005 04:16:36 +0000"  >&lt;p&gt;Uploaded a new version of the patch which adds an extra test case as&lt;br/&gt;
suggested by Mamta in this mail:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://article.gmane.org/gmane.comp.apache.db.derby.devel/11222&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.apache.db.derby.devel/11222&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12321311" name="611.diff.3" size="15003" author="dagw" created="Wed, 14 Dec 2005 04:16:36 +0000"/>
                            <attachment id="12321312" name="611.stat.3" size="642" author="dagw" created="Wed, 14 Dec 2005 04:16:36 +0000"/>
                            <attachment id="12314789" name="testCSUpdateRowCommits.java" size="1982" author="fernanda" created="Mon, 10 Oct 2005 18:06:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Nov 2005 00:18:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22045</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy17gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>