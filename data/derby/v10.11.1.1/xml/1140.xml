<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1140/DERBY-1140.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1140] Provide JDBC4 SQLException subclasses support in network driver</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1140</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment>jdk1.6 </environment>
        <key id="12330561">DERBY-1140</key>
            <summary>Provide JDBC4 SQLException subclasses support in network driver</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12311752">DERBY-401</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anurag">Anurag Shekhar</assignee>
                                    <reporter username="anurag">Anurag Shekhar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Mar 2006 01:45:10 +0000</created>
                <updated>Fri, 21 Jan 2011 18:09:16 +0000</updated>
                            <resolved>Sat, 8 Apr 2006 04:07:09 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12371441" author="anurag" created="Thu, 23 Mar 2006 02:01:39 +0000"  >&lt;p&gt;This patch is similar to 819. &lt;br/&gt;
I have introduced a SQLExceptionFactory40 for network client.&lt;br/&gt;
SqlException has a static field which is called to create java.sql.SQLException.&lt;br/&gt;
 The field is initialized with SQLexceptionFactory. &lt;br/&gt;
constructor of ClientJDBCObjectFactoryImpl40 (This class is first created by ClientDriver) overwrites&lt;br/&gt;
the static factory field in SqlException by SQLExceptionFactory40. &lt;br/&gt;
SQLExceptionFactory calls out org.apache.derby.shared.common.error.ExceptionUtil40.getSQLExceptionFromState &lt;br/&gt;
to get the jdbc4.0 SQLException or its subclass for the SQLState.&lt;/p&gt;

&lt;p&gt;I have modified SQLExceptionFactory40 of Embedded Driver to call the same method to create SQLException.&lt;/p&gt;</comment>
                            <comment id="12371445" author="anurag" created="Thu, 23 Mar 2006 02:11:00 +0000"  >&lt;p&gt;This patch is not ready to be considered for commit yet. I have uploaded it to get comments about it and to discuss the SecurityException I am getting while running the test suite.&lt;/p&gt;

&lt;p&gt;The class org.apache.derby.shared.common.error.ExceptionUtil40.getSQLExceptionFromState is present in derby.jar and derbyclient.jar. While running the test suite with framework set to DerbyNetClient both of the jars needs to be in classpath. When harness tries to execute the test case its loading the class from derby.jar and gets SecurityException because the package is sealed. Changing the order of jar files also doesn&apos;t help (in that case the starting network framework fails because of same exception).&lt;/p&gt;

&lt;p&gt;I am getting this problem while running the test suite only. The standalone network client  connecting to a network server works fine.&lt;/p&gt;

&lt;p&gt;I can&apos;t think of any good solution to solve this problem but I have two bad solutions&lt;/p&gt;

&lt;p&gt;1.Drop the Exception40 and move the code to individual exception factories&lt;br/&gt;
2.Mark the package as not sealed (I am sure this shouldn&apos;t be done specially because the problem exist while running the test suite only.)&lt;/p&gt;</comment>
                            <comment id="12371448" author="davidvc" created="Thu, 23 Mar 2006 02:38:24 +0000"  >&lt;p&gt;org.apache.derby.shared classes at this point should NOT be in derby.jar.  We are not ready to do code sharing like this.  The shared directory at this point is intended only for use by the client packages.  I named it shared with the intention of making it shareable in the future, but this does cause expected confusion. &lt;/p&gt;

&lt;p&gt;At this point if you have functionality that you want to use in both client and engine, unlesss the class is &lt;b&gt;only&lt;/b&gt; constants so that the class does not need to be in the jar file, you need to do cut-and-paste.&lt;/p&gt;

&lt;p&gt;This issue keeps coming up, so it is raising the priority of solving our shared issue sooner rather than later.&lt;/p&gt;
</comment>
                            <comment id="12371636" author="anurag" created="Fri, 24 Mar 2006 04:24:57 +0000"  >&lt;p&gt;I have moved the code to create exceptions from shared class to SQLException40 of client driver. &lt;/p&gt;

&lt;p&gt;Description of this patch&lt;br/&gt;
added a new static field in SqlException to hold SQLException factory. This field is initialized with SQLExceptionFactory class&lt;br/&gt;
ClientJDBCObjectFactoryImpl40 overwrites this field by SQLExceptionFactory40.&lt;br/&gt;
SQLExceptionFactory40 over writes getSQLException method SQLExceptionFacotory to create jdbc4.0 exception &lt;br/&gt;
based on the sqlstate&lt;/p&gt;

&lt;p&gt;This patch changes output of some of the test cases. I have attached changes in out files as a seperate patch (derby-1140_2-outfiles.diff) to make&lt;br/&gt;
it easier to see the code changes &lt;/p&gt;</comment>
                            <comment id="12371639" author="davidvc" created="Fri, 24 Mar 2006 04:57:59 +0000"  >&lt;p&gt;I did a very quick glance at this, and it looks good.  The comment in the constructor for ClientJDBCObjectFactory40 has a couple of typos.&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="12371695" author="anurag" created="Fri, 24 Mar 2006 17:44:10 +0000"  >&lt;p&gt;Fixed typos&lt;/p&gt;</comment>
                            <comment id="12371746" author="rhillegas" created="Fri, 24 Mar 2006 23:18:50 +0000"  >&lt;p&gt;I have committed rev 2 of the patch as revision 388558. The jdbc4 tests ran cleanly for me. Derbyall had the following error in sysinfo and sysinfo_withproperties, but I also saw this error in a clean client just torn off the mainline:&lt;/p&gt;

&lt;p&gt;15d14&lt;br/&gt;
&amp;lt; Unable to analyze class path: access denied (java.util.PropertyPermission java.class.path read)&lt;br/&gt;
43d41&lt;br/&gt;
&amp;lt; Unable to analyze class path: access denied (java.util.PropertyPermission java.class.path read)&lt;br/&gt;
72d69&lt;br/&gt;
&amp;lt; Unable to analyze class path: access denied (java.util.PropertyPermission java.class.path read)&lt;br/&gt;
Test Failed.&lt;/p&gt;</comment>
                            <comment id="12371854" author="rhillegas" created="Sun, 26 Mar 2006 00:04:35 +0000"  >&lt;p&gt;I am attaching patch bug1140_magic.diff, which eliminates magic strings in the JDBC4 SQLException factories for both the Network and the embedded clients:&lt;/p&gt;

&lt;p&gt;M      java\engine\org\apache\derby\impl\jdbc\SQLExceptionFactory40.java&lt;br/&gt;
M      java\shared\org\apache\derby\shared\common\reference\SQLState.java&lt;br/&gt;
M      java\client\org\apache\derby\client\am\SQLExceptionFactory40.java&lt;/p&gt;

&lt;p&gt;The jdbc4 tests run cleanly me for except for the known regression in StatementTest.&lt;/p&gt;</comment>
                            <comment id="12371855" author="rhillegas" created="Sun, 26 Mar 2006 00:08:29 +0000"  >&lt;p&gt;Committed bug1140_magic.diff at subversion revision 388778.&lt;/p&gt;</comment>
                            <comment id="12371892" author="anurag" created="Sun, 26 Mar 2006 17:48:29 +0100"  >&lt;p&gt;Dan had specificly asked for using string in factory methods. To makeit easy to understand and to match with jdbc4.0 spec docs. &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-819#action_12363193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-819#action_12363193&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12372005" author="rhillegas" created="Tue, 28 Mar 2006 03:06:28 +0100"  >&lt;p&gt;Thanks, Anurag. I think that your excellent header comments make it easy to match the behavior with the jdbc4 documentation.&lt;/p&gt;</comment>
                            <comment id="12372247" author="anurag" created="Wed, 29 Mar 2006 23:00:29 +0100"  >&lt;p&gt;i entered wrong jira id in my privious coment its 1140 not 1137&lt;/p&gt;</comment>
                            <comment id="12551328" author="fuzzylogic" created="Thu, 13 Dec 2007 09:04:52 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12329864">DERBY-1081</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12324581" name="bug1140_magic.diff" size="7889" author="rhillegas" created="Sun, 26 Mar 2006 00:04:35 +0000"/>
                            <attachment id="12324455" name="derby-1140.diff" size="15818" author="anurag" created="Thu, 23 Mar 2006 02:01:36 +0000"/>
                            <attachment id="12324522" name="derby-1140_2-outfiles.diff" size="41114" author="anurag" created="Fri, 24 Mar 2006 04:24:57 +0000"/>
                            <attachment id="12324521" name="derby-1140_2.diff" size="8098" author="anurag" created="Fri, 24 Mar 2006 04:24:57 +0000"/>
                            <attachment id="12324543" name="derby-1140_3.diff" size="7919" author="anurag" created="Fri, 24 Mar 2006 17:44:09 +0000"/>
                            <attachment id="12324523" name="svnstat.out" size="827" author="anurag" created="Fri, 24 Mar 2006 04:24:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Mar 2006 02:38:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29871</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0khb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>