<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:24:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6259/DERBY-6259.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6259] Collapse the level 2 optimizer into its parent module.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6259</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Right now there are 2 optimizer implementations, only one of which is ever loaded. The other implementation was disabled by the following comment in modules.properties:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;use level1 optimizer for small configurations&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;can&apos;t do this in the codeline because with 2 implementations, it is entirely&lt;/li&gt;
	&lt;li&gt;by chance which get picked.  So we may be running with different modules&lt;/li&gt;
	&lt;li&gt;depending on which jdk&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;to be resolve by Siuling and Dan&lt;br/&gt;
#&lt;br/&gt;
#derby.module.optimizerSmall=org.apache.derby.impl.sql.compile.OptimizerFactoryImpl&lt;br/&gt;
#cloudscape.config.optimizerSmall=cloud,cloudtarget&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Since we have deprecated support for the small CDC configuration, I don&apos;t think that we need further resolution by Siuling and Dan. Collapsing the two optimizers together should slightly reduce our static footprint.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12652469">DERBY-6259</key>
            <summary>Collapse the level 2 optimizer into its parent module.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jun 2013 20:29:12 +0100</created>
                <updated>Fri, 14 Jun 2013 19:20:41 +0100</updated>
                            <resolved>Fri, 14 Jun 2013 19:20:34 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13681568" author="rhillegas" created="Wed, 12 Jun 2013 20:57:55 +0100"  >&lt;p&gt;Attaching derby-6259-01-aa-collapseOptimizers.diff. This patch collapses the two optimizers together. I will run tests.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/sql/compile/OptimizerFactoryImpl.java&lt;br/&gt;
D       java/engine/org/apache/derby/impl/sql/compile/Level2CostEstimateImpl.java&lt;br/&gt;
D       java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java&lt;br/&gt;
D       java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerFactoryImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/compile/CostEstimateImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/modules.properties&lt;br/&gt;
M       java/testing/org/apache/derbyTesting/functionTests/harness/Sed.java&lt;/p&gt;</comment>
                            <comment id="13681675" author="mikem" created="Wed, 12 Jun 2013 22:47:25 +0100"  >&lt;p&gt;I am ok with this change, but want to voice concern that we should not give up on running on small devices just&lt;br/&gt;
because we have given up on support for the small CDC configuration.  I still think a configurable small footprint&lt;br/&gt;
is valuable and still hope for either a full JVM that runs on a device or work to make current derby run on available&lt;br/&gt;
jvm&apos;s on current device os&apos;s like android.&lt;/p&gt;</comment>
                            <comment id="13682177" author="rhillegas" created="Thu, 13 Jun 2013 13:28:24 +0100"  >&lt;p&gt;Thanks for voicing those concerns, Mike. I think we&apos;re still committed to running Derby on small devices. That, at least, was the intent of all the work Dag put into implementing the Compact Profile 2 DataSources in release 10.10. +1 to running on Android too.&lt;/p&gt;</comment>
                            <comment id="13682179" author="rhillegas" created="Thu, 13 Jun 2013 13:29:33 +0100"  >&lt;p&gt;Tests passed cleanly for me on derby-6259-01-aa-collapseOptimizers.diff.&lt;/p&gt;</comment>
                            <comment id="13682181" author="jira-bot" created="Thu, 13 Jun 2013 13:30:36 +0100"  >&lt;p&gt;Commit 1492641 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;Rick Hillegas&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1492641&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1492641&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6259&quot; title=&quot;Collapse the level 2 optimizer into its parent module.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6259&quot;&gt;&lt;del&gt;DERBY-6259&lt;/del&gt;&lt;/a&gt;: Commit derby-6259-01-aa-collapseOptimizers.diff, eliminating the level 2 optimizer.&lt;/p&gt;</comment>
                            <comment id="13682304" author="rhillegas" created="Thu, 13 Jun 2013 15:50:46 +0100"  >&lt;p&gt;Attaching derby-6259-02-aa-increasePrivacy.diff. This patch reduces the visibility of optimizer fields. I am running tests now.&lt;/p&gt;

&lt;p&gt;Now that the optimizer doesn&apos;t have a subclass, it is possible to make its protected fields private. I did that and discovered that TableOperatorNode was reaching inside the optimizer in order to get specific optimizables. So I added a method to the Optimizer interface to make this possible cleanly.&lt;/p&gt;

&lt;p&gt;I also noticed that there were two methods in the optimizer which had package protection because they were called by other code in the impl compilation package. When I added them to the Optimizer interface, I discovered why one of them wasn&apos;t there already: it mentions a complicated impl type (PredicateList). Fixing this mis-factoring is a bigger job which falls outside the scope of a cleanup patch. So I have logged &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6260&quot; title=&quot;Move the addScopedPredicatesToList() method to the Optimizer interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6260&quot;&gt;DERBY-6260&lt;/a&gt; for moving the addScopedPredicatesToList() method to the Optimizer interface.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java&lt;/p&gt;</comment>
                            <comment id="13682428" author="jira-bot" created="Thu, 13 Jun 2013 18:06:02 +0100"  >&lt;p&gt;Commit 1492766 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;Rick Hillegas&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1492766&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1492766&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6259&quot; title=&quot;Collapse the level 2 optimizer into its parent module.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6259&quot;&gt;&lt;del&gt;DERBY-6259&lt;/del&gt;&lt;/a&gt;: Make optimizer fields private: tests passed cleanly on derby-6259-02-aa-increasePrivacy.diff.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12652672">DERBY-6260</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12587496" name="derby-6259-01-aa-collapseOptimizers.diff" size="15822" author="rhillegas" created="Wed, 12 Jun 2013 20:57:55 +0100"/>
                            <attachment id="12587645" name="derby-6259-02-aa-increasePrivacy.diff" size="8341" author="rhillegas" created="Thu, 13 Jun 2013 15:50:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Jun 2013 21:47:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332793</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzf947:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>