<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:14:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2514/DERBY-2514.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2514] convert lang/closed.java to junit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2514</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment>convert lang/closed.java to junit</environment>
        <key id="12366426">DERBY-2514</key>
            <summary>convert lang/closed.java to junit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sveinelo">Svein Erik L&#248;vland</assignee>
                                    <reporter username="ramand">Ramandeep Kaur</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Apr 2007 00:13:30 +0100</created>
                <updated>Wed, 1 Jul 2009 00:40:23 +0100</updated>
                            <resolved>Thu, 18 Sep 2008 22:44:19 +0100</resolved>
                                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12486171" author="kmarsden" created="Tue, 3 Apr 2007 00:28:57 +0100"  >&lt;p&gt;found while converting procedure.java&lt;/p&gt;</comment>
                            <comment id="12486173" author="djd" created="Tue, 3 Apr 2007 00:37:00 +0100"  >&lt;p&gt;Some of the existing JUNit tests added for JDBC 4 do extensive testing of closed objects, you may want to check if coverage already exists.&lt;/p&gt;</comment>
                            <comment id="12486181" author="ramand" created="Tue, 3 Apr 2007 00:59:26 +0100"  >&lt;p&gt;Dan, when you said &quot;if coverage already exists&quot;, did you mean by code coverage. Thanks.&lt;/p&gt;</comment>
                            <comment id="12486362" author="djd" created="Tue, 3 Apr 2007 14:57:03 +0100"  >&lt;p&gt;Not code coverage, but test coverage. closed.java says &quot;Test execution of closed JDBC objects&quot;. There is an existing JUnit test jdbcapi.ClosedObjectTest that seems to do the same thing.&lt;/p&gt;
</comment>
                            <comment id="12488868" author="myrna" created="Sat, 14 Apr 2007 15:40:31 +0100"  >&lt;p&gt;I looked a bit more closely at closed test, and I think there may be 2 small areas that are not covered by the testing of ClosedObjectTest:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-62&quot; title=&quot;TableName not serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-62&quot;&gt;&lt;del&gt;DERBY-62&lt;/del&gt;&lt;/a&gt; test case&lt;br/&gt;
    I undid the changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-62&quot; title=&quot;TableName not serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-62&quot;&gt;&lt;del&gt;DERBY-62&lt;/del&gt;&lt;/a&gt; (revision 110114) to iapi/error/StandardException and impl/jdbc/EmbedSQLException, and indeed, the closed.java test shows a difference, but the problem is not detected by ClosedObjectTest&lt;/li&gt;
	&lt;li&gt;I don&apos;t see ClosedObjectTest testing reading of DatabaseMetaData obtained earlier, after a connection is closed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I don&apos;t see an easy/pretty way to put either of these two small test cases into the ClosedObjectTest.&lt;/p&gt;

&lt;p&gt;Maybe it&apos;s best to create a separate junit test with just those two small issues. Or can they be put into some other (which) test? Maybe the DatabaseMetaData case can be put into DatabaseMetaDataTest?&lt;br/&gt;
But I don&apos;t see a good place for the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-62&quot; title=&quot;TableName not serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-62&quot;&gt;&lt;del&gt;DERBY-62&lt;/del&gt;&lt;/a&gt; test case.&lt;/p&gt;</comment>
                            <comment id="12502076" author="myrna" created="Wed, 6 Jun 2007 21:14:11 +0100"  >&lt;p&gt;unassigning from 10.3, doesn&apos;t look like anyone&apos;s working this&lt;/p&gt;</comment>
                            <comment id="12598644" author="sveinelo" created="Wed, 21 May 2008 14:47:41 +0100"  >&lt;p&gt;I&apos;m looking at this, but atm. I&apos;m reading, learning and getting familiar with the classes in org.apache.derbyTesting.junit. Also reading the JUnit sections on the wiki.&lt;/p&gt;

&lt;p&gt;I&apos;m having a little challenge when it comes to understanding ClosedObjectTest.java, but that will probably change soon. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Just wanted to let you know.&lt;/p&gt;</comment>
                            <comment id="12598656" author="narayanan" created="Wed, 21 May 2008 15:28:34 +0100"  >&lt;p&gt;This link gives tips on converting tests to junit &lt;a href=&quot;http://wiki.apache.org/db-derby/ConvertOldTestToJunitTips&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/ConvertOldTestToJunitTips&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="12599565" author="sveinelo" created="Sat, 24 May 2008 10:30:34 +0100"  >&lt;p&gt;Output from svn stat:&lt;br/&gt;
A      java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\Derby2514.java&lt;/p&gt;

&lt;p&gt;Does the two tests-cases cover Myrna van Lunteren comments?&lt;/p&gt;

&lt;p&gt;Any other feedback would also be appreciated . &lt;/p&gt;
</comment>
                            <comment id="12600402" author="narayanan" created="Wed, 28 May 2008 09:48:24 +0100"  >&lt;p&gt;Sorry for the late reply. Thank you for the patch. I will look at it and shall give a commit if everything is OK.&lt;/p&gt;</comment>
                            <comment id="12600404" author="narayanan" created="Wed, 28 May 2008 09:54:20 +0100"  >&lt;p&gt;A few comments at first look&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;new files in derby need to have a license header, the file added seems to be missing a license header&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Can you please assign this issue to yourself&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Can you please confirm that your icla is filed.If it is not can the community advise on whether this patch is small enough to be committed without one?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12600405" author="narayanan" created="Wed, 28 May 2008 09:57:36 +0100"  >&lt;p&gt;Taking the liberty of assigning this issue to Svien Erik since he has contributed&lt;br/&gt;
the patch attached to this issue.&lt;/p&gt;</comment>
                            <comment id="12600412" author="sveinelo" created="Wed, 28 May 2008 10:33:02 +0100"  >&lt;p&gt;Thanks for assigning me. Attaching a new .diff with license and some changes &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2514&quot; title=&quot;convert lang/closed.java to junit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2514&quot;&gt;&lt;del&gt;DERBY-2514&lt;/del&gt;&lt;/a&gt;_2.diff.&lt;/p&gt;

&lt;p&gt;I have not removed lang/closed.java because I do not know if all the tests now are covered by JUnit tests. The name of the file &quot;Derby2514.java&quot; might not be ideal either, but I do not know where the two tests could be put.&lt;/p&gt;

&lt;p&gt;About the ICLA, I have not signed one, but IMO it is not needed for this small patch. Half of the code is a rewrite of the last test in lang/closed.java&lt;/p&gt;</comment>
                            <comment id="12600419" author="narayanan" created="Wed, 28 May 2008 10:45:48 +0100"  >&lt;p&gt;Not removing lang/closed.java is OK, No problem, It can be removed later also once people are happy with coverage.&lt;/p&gt;

&lt;p&gt;I personally have no qualms about the name Derby2514.java either. I am OK with you having used a junit test case&lt;br/&gt;
to add these tests and I think Myrna will be Ok also from what I read of her comments.&lt;/p&gt;

&lt;p&gt;About the ICLA, I think this patch is small too, I will commit it once I review it in detail&lt;/p&gt;

&lt;p&gt;It is just that this is my first commit and I am a little tensed about it and want to give it a detailed look. I think&lt;br/&gt;
at first look you have done a great job with the coding. It looks very neat and organized.&lt;/p&gt;

&lt;p&gt;Thank you for the re attach.&lt;/p&gt;</comment>
                            <comment id="12600442" author="knutanders" created="Wed, 28 May 2008 12:34:08 +0100"  >&lt;p&gt;It looks like the test cases in the attached patch cover the two cases identified by Myrna. Some (mainly cosmetic) comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When there&apos;s an expected SQLException, like in testDMDconnClosed(), we normally check that the SQL state is the expected one by calling the assertSQLState() method.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Instead of calling fail() from within a catch clause when there&apos;s an unexpected exception, the exception should be thrown by the test method. That way JUnit is able to report the stack trace of the original exception, which makes it easier to debug problems if the test fails.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Perhaps testDMDconnClosed() could be moved to the existing jdbcapi/DatabaseMetaDataTest?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The test case testSerializedException() in derbynet/SqlExceptionTest already tests that an SQLException thrown by the embedded driver is serializable (based on the comments, I think it intends to tests a client exception, but that&apos;s not what it does), so testDerby62() doesn&apos;t actually add test coverage. Perhaps it&apos;s better to clean up SqlExceptionTest rather than adding a new test?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12600443" author="narayanan" created="Wed, 28 May 2008 12:36:42 +0100"  >&lt;p&gt;The patch looks very good. I ran the the mentioned test alone and it passed fine.&lt;/p&gt;

&lt;p&gt;java junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.jdbcapi.Derby2514&lt;br/&gt;
..&lt;br/&gt;
Time: 1.622&lt;/p&gt;

&lt;p&gt;OK (2 tests)&lt;/p&gt;

&lt;p&gt;I took the liberty of making a few cosmetic changes, I am enumerating them below.&lt;/p&gt;

&lt;p&gt;Also just as a matter of keeping to rules I am running all the tests. This step is unnecessary I know.&lt;/p&gt;

&lt;p&gt;Cosmetic Changes made&lt;br/&gt;
-------------------------------&lt;/p&gt;

&lt;p&gt; Added a class level comment explaining what the test does&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I checked ParameterMappingTest and HoldabilityTest to see what is the comment given&lt;br/&gt;
  to the test constructor it says&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  /** Creates a new instance of HoldabilityTest */&lt;/p&gt;

&lt;p&gt;  But I think I like what you have written, so decided to let it be as is.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;There were some lines going beyond 80 characters so changed them to keep to 80 characters&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Removed the whitespace between testDerby62() and the javadoc.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;There was some inconsistenct in the space between try and the parenthesis following it&lt;br/&gt;
  between the methods testDMDconnClosed(), testDerby62(). I have changed them to consistently&lt;br/&gt;
  use a space.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;changed these comments to use the // comments and also removed some spurious tabs there&lt;br/&gt;
  //&apos;DROP TABLE&apos; cannot be performed on &apos;APP.DERBY62_DAIN_SUNDSTROM&apos;&lt;br/&gt;
            //because it does not exist.&lt;br/&gt;
  There were a few spurious tabs in other lines also. Removed them too.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Removed the &apos;^M&apos; characters that were appearing on the _2 patch. Not sure how I removed this&lt;br/&gt;
  They were not there in the patch I generated atleast.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I also did a svn propset svn:eol-style native on the new file, it is mentioned&lt;br/&gt;
  &lt;a href=&quot;http://db.apache.org/derby/derby_comm.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/derby_comm.html&lt;/a&gt; that you should do this for&lt;br/&gt;
  new files being added.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12600463" author="narayanan" created="Wed, 28 May 2008 14:08:14 +0100"  >&lt;p&gt;I think Knut has some very valid points, sorry for my overlooking those important points in my review Svien Erik,&lt;br/&gt;
I understand it can be frustrating receiving multiple comments and redoing the patch initially. But I think&lt;br/&gt;
your patch looked really good and knut&apos;s comments are mostly minor changes that need some code moving, and a commit&lt;br/&gt;
on the issue is very close.&lt;/p&gt;

&lt;p&gt;Thank you for the effort and the quick response to my earlier comments.&lt;/p&gt;</comment>
                            <comment id="12600489" author="johnemb" created="Wed, 28 May 2008 15:34:02 +0100"  >&lt;p&gt;Narayanan wrote:&lt;/p&gt;

&lt;p&gt;&amp;gt; Also just as a matter of keeping to rules I am running all the tests. This step is unnecessary I know. &lt;/p&gt;

&lt;p&gt;Actually, I think running &quot;all&quot; tests in most situations is a healthy practice. I have seen several times in the past that some test is influenced (read: fails) as a side-effect of a test running earlier in a larger test suite, such as suites.All. Examples are security policy issues, cleanup problems, wrong assumptions in new test, etc. It would be good to catch such issues prior to commit.&lt;/p&gt;</comment>
                            <comment id="12600708" author="sveinelo" created="Thu, 29 May 2008 09:57:37 +0100"  >&lt;p&gt;svn stat for derby2514_dmd.diff:&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\DatabaseMetaDataTest.java&lt;/p&gt;

&lt;p&gt;I moved testDMDconnClosed() to DatabaseMetaDataTest.java and ran just that test suite.&lt;br/&gt;
Hope that SQLState &quot;XCL16&quot; is the right one to assert?&lt;/p&gt;

&lt;p&gt;I will look into testDerby62() and testSerializedException() in derbynet/SqlExceptionTest and run all the tests when/if I find a solution.&lt;/p&gt;

&lt;p&gt;Thanks for all the great feedback!&lt;/p&gt;

&lt;p&gt;(Hope the patch don&apos;t have trailing ^M&apos;s this time. Unsure how to check if the file is in unix or windows format.)&lt;/p&gt;</comment>
                            <comment id="12600709" author="sveinelo" created="Thu, 29 May 2008 09:59:32 +0100"  >&lt;p&gt;Think I added wrong file.&lt;/p&gt;</comment>
                            <comment id="12600744" author="narayanan" created="Thu, 29 May 2008 12:28:03 +0100"  >&lt;p&gt;starting tests, shall commit as soon as completed&lt;/p&gt;</comment>
                            <comment id="12601022" author="narayanan" created="Fri, 30 May 2008 07:12:20 +0100"  >&lt;p&gt;I ran junit all on the patch yesterday night and found some failures unrelated to the&lt;br/&gt;
issue in hand. Committed the patch.&lt;/p&gt;

&lt;p&gt;Sending        java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DatabaseMetaDataTest.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 661574.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Svien Erik!&lt;/p&gt;

&lt;p&gt;Thank you for the reviews Knut!&lt;/p&gt;</comment>
                            <comment id="12619350" author="myrna" created="Sun, 3 Aug 2008 18:09:39 +0100"  >&lt;p&gt;It&apos;s been a while since this saw any activity. Is a patch on SqlExceptionTest still forthcoming?&lt;/p&gt;</comment>
                            <comment id="12623206" author="sveinelo" created="Sun, 17 Aug 2008 17:42:07 +0100"  >&lt;p&gt;I don&apos;t have time to work further on this issue.&lt;/p&gt;</comment>
                            <comment id="12629261" author="myrna" created="Mon, 8 Sep 2008 20:12:14 +0100"  >&lt;p&gt;I&apos;m attaching a patch that &lt;br/&gt;
1. changes derbynet/SqlExceptionTest to run defaultSuite (i.e. embedded &amp;amp; NetworkServer/Client)&lt;br/&gt;
2. changes the fixture testSerializedException to additionally have the test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-62&quot; title=&quot;TableName not serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-62&quot;&gt;&lt;del&gt;DERBY-62&lt;/del&gt;&lt;/a&gt; in it.&lt;/p&gt;

&lt;p&gt;Do we need the additional test (for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-62&quot; title=&quot;TableName not serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-62&quot;&gt;&lt;del&gt;DERBY-62&lt;/del&gt;&lt;/a&gt;)? I looked at &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-62&quot; title=&quot;TableName not serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-62&quot;&gt;&lt;del&gt;DERBY-62&lt;/del&gt;&lt;/a&gt; and it mentions TABLENAME specifically, and the existing test generates an Exception which is different between Embedded and DerbyNetClient, and on DerbyNetClient it doesn&apos;t reflect tablename, so I thought it best to copy the test case...&lt;/p&gt;

&lt;p&gt;If there are no comments I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="12632403" author="myrna" created="Thu, 18 Sep 2008 22:44:19 +0100"  >&lt;p&gt;committed final patch &amp;amp; removed closed.java &amp;amp; related files with revision 696820. &lt;br/&gt;
Assigning to Svein Erik L&#248;vland, although a number of people contributed to this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12389698" name="DERBY-2514_sqlExceptionTest.diff" size="1946" author="myrna" created="Mon, 8 Sep 2008 20:12:14 +0100"/>
                            <attachment id="12383001" name="Derby2514_2.diff" size="3827" author="sveinelo" created="Thu, 29 May 2008 09:57:37 +0100"/>
                            <attachment id="12382920" name="Derby2514_3.diff" size="4266" author="narayanan" created="Wed, 28 May 2008 12:36:42 +0100"/>
                            <attachment id="12383002" name="derby2514_dmd.diff" size="1096" author="sveinelo" created="Thu, 29 May 2008 09:59:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Apr 2007 23:28:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0u07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>