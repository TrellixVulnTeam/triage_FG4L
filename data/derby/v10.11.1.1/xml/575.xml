<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:50:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-575/DERBY-575.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-575] test blobclob4BLOB fails on OS 390</title>
                <link>https://issues.apache.org/jira/browse/DERBY-575</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The subtest clobNegativeTest_Derby265 in test jdbcapi/blobclob4BLOB assumes that the length of the file used (aclob.txt) is 300000 but on OS 390 (z/OS), after conversion to EBCDIC, the length is 297000. The test should be modified to not use a hardcoded size.&lt;/p&gt;
</description>
                <environment>OS/390 (z/OS 1.06; IBM j2RE 1.4.2)</environment>
        <key id="12317041">DERBY-575</key>
            <summary>test blobclob4BLOB fails on OS 390</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Sep 2005 21:57:16 +0100</created>
                <updated>Wed, 12 Jul 2006 02:40:39 +0100</updated>
                            <resolved>Wed, 3 May 2006 03:50:40 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12329609" author="djd" created="Sun, 18 Sep 2005 00:48:31 +0100"  >&lt;p&gt;Or should the test read the file with a fixed encoding so that the size remains as the test expects.&lt;/p&gt;

&lt;p&gt;Not sure though what is doing the conversion to EBCDIC, when you run on OS 390, hopefully you don&apos;t have to covert evryrthing before running the tests.&lt;/p&gt;</comment>
                            <comment id="12329842" author="myrna" created="Mon, 19 Sep 2005 23:22:56 +0100"  >&lt;p&gt;Unfortunately, you &lt;b&gt;do&lt;/b&gt; have to convert most of the text files used by the various tests.&lt;br/&gt;
Certainly all master files, and for instance text files for import/export.&lt;/p&gt;

&lt;p&gt;I unraveled derbyTesting.jar,  used native2ascii  -reverse in a script on the os390 machine to convert to Cp1047 and jar-ed it back up (for space).&lt;/p&gt;
</comment>
                            <comment id="12329859" author="djd" created="Tue, 20 Sep 2005 00:44:29 +0100"  >&lt;p&gt;I would see the need to convert as a bug in the test harness. I think the harness should be reading the text files in a fixed format so that the test pass regardless of the default encoding of the platform.&lt;/p&gt;</comment>
                            <comment id="12356156" author="myrna" created="Fri, 28 Oct 2005 10:50:43 +0100"  >&lt;p&gt;Logging a new bug for the test harness adjustment, and when that is done I&apos;ll see if the test needs further adjustments.&lt;/p&gt;</comment>
                            <comment id="12366182" author="myrna" created="Mon, 13 Feb 2006 19:37:06 +0000"  >&lt;p&gt;After doing work following from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-903&quot; title=&quot;Remove use of String(byte[]) and String(byte[], int, int) constructors in testing leading to non-portable behaviour&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-903&quot;&gt;&lt;del&gt;DERBY-903&lt;/del&gt;&lt;/a&gt; and working with the test harness improvement suggested with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt;, I now better understand what was the problem with this subtest of blobclob4BLOB is.&lt;br/&gt;
It&apos;s the following section:&lt;br/&gt;
            FileReader fr = new FileReader(fileName&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;);&lt;br/&gt;
            ps.setInt(1, i);&lt;br/&gt;
            ....&lt;br/&gt;
            ps.setCharacterStream(6, new java.io.BufferedReader(fr),300000);&lt;br/&gt;
            ps.executeUpdate();&lt;br/&gt;
The api doc says: &lt;br/&gt;
&quot; The constructors of this class assume that the default character encoding and the default byte-buffer size are appropriate. To specify these values yourself, construct an InputStreamReader on a FileInputStream. &quot;&lt;br/&gt;
Thus, to make blobclob4BLOB pass with -DderbyTesting.encoding=UTF-16 (you need the improved patch for test harness from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt; to run tests like that) I think this section needs to be changed to:&lt;br/&gt;
            File file = new File(fileName&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;);&lt;br/&gt;
            InputStream fileIS = new FileInputStream(file);&lt;br/&gt;
            Reader fr = new InputStreamReader(fileIS, &quot;US-ASCII&quot;);&lt;br/&gt;
            ps.setInt(1, i);&lt;br/&gt;
           ...&lt;br/&gt;
            ps.setCharacterStream(6, fr, 300000);&lt;/p&gt;

&lt;p&gt;This then passes with -DderbyTesting.encoding=UTF-16 with embedded (after also fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-902&quot; title=&quot;Remove use of String(byte[]) and String(byte[], int, int) constructors in engine leading to non-portable behaviour&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-902&quot;&gt;&lt;del&gt;DERBY-902&lt;/del&gt;&lt;/a&gt;) and DerbyNet. DerbyNetClient has some problem which I think may be due to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-901&quot; title=&quot;Remove use of String(byte[]) constructors in network server leading to non-portable behaviour&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-901&quot;&gt;&lt;del&gt;DERBY-901&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will run some more tests, then submit a patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-903&quot; title=&quot;Remove use of String(byte[]) and String(byte[], int, int) constructors in testing leading to non-portable behaviour&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-903&quot;&gt;&lt;del&gt;DERBY-903&lt;/del&gt;&lt;/a&gt;; if that proves ok &amp;amp; gets committed, this particular bug can be closed and unlinked from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-658&quot; title=&quot;test harness improvements required for running on non-ASCII systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-658&quot;&gt;&lt;del&gt;DERBY-658&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12367298" author="myrna" created="Wed, 22 Feb 2006 10:48:13 +0000"  >&lt;p&gt;This has now been fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-903&quot; title=&quot;Remove use of String(byte[]) and String(byte[], int, int) constructors in testing leading to non-portable behaviour&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-903&quot;&gt;&lt;del&gt;DERBY-903&lt;/del&gt;&lt;/a&gt;, revision 379643&lt;/p&gt;</comment>
                            <comment id="12374478" author="myrna" created="Fri, 14 Apr 2006 14:59:28 +0100"  >&lt;p&gt;reopening issue to follow up on further work needed - the test still fails on zOS with ibm15 after fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-658&quot; title=&quot;test harness improvements required for running on non-ASCII systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-658&quot;&gt;&lt;del&gt;DERBY-658&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I need to analyse it further.&lt;/p&gt;

&lt;p&gt;Also, the test lobStreams.java fails (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt;), and it seems to me the failures may be similar.&lt;/p&gt;</comment>
                            <comment id="12376155" author="myrna" created="Tue, 25 Apr 2006 11:01:51 +0100"  >&lt;p&gt;Attached is a patch for this issue - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-575&quot; title=&quot;test blobclob4BLOB fails on OS 390&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-575&quot;&gt;&lt;del&gt;DERBY-575&lt;/del&gt;&lt;/a&gt;_102_20060424.*&lt;/p&gt;

&lt;p&gt;It contains changes to and for the tests:&lt;br/&gt;
jdbcapi/blobclob4BLOB.java&lt;br/&gt;
jdbcapi/lobStreams.java&lt;br/&gt;
tools/ieptests.sql&lt;/p&gt;

&lt;p&gt;The changes boil down to ensuring that appropriate mechanisms are used to accessing supported files - and in the case of blobclob4BLOB and lobStreams, I ended up copying the supportfiles because they were used by other tests with another encoding. So now, the .utf tests are copied unchanged, i.e. in UTF-8 encoding, and the .txt files are copied into local encoding.&lt;/p&gt;
</comment>
                            <comment id="12376156" author="myrna" created="Tue, 25 Apr 2006 11:03:00 +0100"  >&lt;p&gt;Patch for 10.2 is attached, a patch for 10.1 will follow.&lt;/p&gt;</comment>
                            <comment id="12376369" author="fuzzylogic" created="Wed, 26 Apr 2006 08:27:43 +0100"  >&lt;p&gt;Committed to trunk with revision 397028.&lt;/p&gt;</comment>
                            <comment id="12377453" author="myrna" created="Wed, 3 May 2006 03:36:47 +0100"  >&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-575&quot; title=&quot;test blobclob4BLOB fails on OS 390&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-575&quot;&gt;&lt;del&gt;DERBY-575&lt;/del&gt;&lt;/a&gt;_101_20060502.* is the 10.1 patch for this issue. I really did an svn rename for the .txt files to .utf files, but that&apos;s not obvious. So, applying &amp;amp; committing this patch may need some extra care.&lt;/p&gt;</comment>
                            <comment id="12377456" author="fuzzylogic" created="Wed, 3 May 2006 03:50:40 +0100"  >&lt;p&gt;Thanks for making the patch for 10.1, as I was unable to svn merge it. Committed to 10.1 with revision 399021.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12325106">DERBY-658</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12328367">DERBY-903</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12326173" name="DERBY-575_101_20060502.diff" size="341623" author="myrna" created="Wed, 3 May 2006 03:36:47 +0100"/>
                            <attachment id="12326172" name="DERBY-575_101_20060502.stat" size="2119" author="myrna" created="Wed, 3 May 2006 03:36:47 +0100"/>
                            <attachment id="12325795" name="DERBY-575_102_20060424.diff" size="345759" author="myrna" created="Tue, 25 Apr 2006 11:01:51 +0100"/>
                            <attachment id="12325794" name="DERBY-575_102_20060424.stat" size="1981" author="myrna" created="Tue, 25 Apr 2006 11:01:51 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 Sep 2005 23:48:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>