<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:45:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4668/DERBY-4668.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4668] Derby stored procedures with DriverManager.getConnection(&quot;jdbc:default:connection&quot;) fail if JCC 4.x (db2jcc4.jar) is in the classpath or any version jcc is explicitly loaded</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4668</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Executing a Derby stored procedure with JCC 4.x in the classpath will error because JCC recognizes the jdbc:default:connection url and tries to make a connection. With JDK 1.6 and JCC 4.x the JCC Driver is autoloaded so simply having it in the classpath can cause the error.&lt;/p&gt;

&lt;p&gt;To reproduce, put db2jcc4.jar in your classpath and run the test, lang.LangProcedureTest which will fail with errors like:&lt;br/&gt;
Caused by: java.lang.ExceptionInInitializerError&lt;br/&gt;
	at java.lang.J9VMInternals.initialize(J9VMInternals.java:222)&lt;br/&gt;
	at com.ibm.db2.jcc.t2.T2Configuration.&amp;lt;clinit&amp;gt;(T2Configuration.java:78)&lt;br/&gt;
	at java.lang.J9VMInternals.initializeImpl(Native Method)&lt;br/&gt;
	at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)&lt;br/&gt;
	at com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:420)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:317)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:273)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.LangProcedureTest.DERBY_3304(LangProcedureTest.java:287)&lt;br/&gt;
	at org.apache.derby.exe.ac05550069x0128xb447xd1b2x00002461cbf40.g0(Unknown Source)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:600)&lt;br/&gt;
	at org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMethod.java:46)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallStatementResultSet.java:75)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1232)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:625)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(EmbedStatement.java:152)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.LangProcedureTest.testMethodSignatureDerby258(LangProcedureTest.java:268)&lt;br/&gt;
	... 23 more&lt;br/&gt;
Caused by: java.security.AccessControlException: Access denied (java.util.PropertyPermission * read,write)&lt;br/&gt;
	at java.security.AccessControlException.&amp;lt;init&amp;gt;(AccessControlException.java:62)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:68)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:533)&lt;br/&gt;
	at java.lang.SecurityManager.checkPropertiesAccess(SecurityManager.java:1253)&lt;br/&gt;
	at java.lang.System.getProperties(System.java:323)&lt;br/&gt;
	at com.ibm.db2.jcc.am.md.run(md.java:37)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(AccessController.java:202)&lt;br/&gt;
	at com.ibm.db2.jcc.t2.c.&amp;lt;clinit&amp;gt;(c.java:38)&lt;br/&gt;
	at java.lang.J9VMInternals.initializeImpl(Native Method)&lt;br/&gt;
	at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)&lt;br/&gt;
	... 43 more&lt;br/&gt;
used 109 ms .&lt;br/&gt;
testParameterTypes used 188 ms E.&lt;br/&gt;
testOutparams used 94 ms .&lt;br/&gt;
testSQLControl used 234 ms E.&lt;br/&gt;
testCreateRoutineErrors used 203 ms .&lt;br/&gt;
testMethodSignatureDerby258 used 203 ms E.&lt;br/&gt;
testDelayedClassChecking used 32 ms .&lt;br/&gt;
testDuplicates used 171 ms .&lt;br/&gt;
testAmbigiousMethods used 157 ms E.&lt;br/&gt;
testZeroArgProcedures used 31 ms .&lt;br/&gt;
testSqlProcedures used 203 ms E.&lt;br/&gt;
testDynamicResultSets used 203 ms E.&lt;br/&gt;
testResultSetsWithLobs FAIL: Encountered exception:&lt;br/&gt;
java.sql.SQLException: The exception &apos;java.lang.NoClassDefFoundError: com.ibm.db2.jcc.t2.T2Configuration (initialization failure)&apos; was thrown while evaluating an expression.&lt;br/&gt;
	at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:96)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)&lt;br/&gt;
	at org.apache.derby.client.am.PreparedStatement.execute(PreparedStatement.java:1574)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.LangProcedureTest.testResultSetsWithLobs(LangProcedureTest.java:899)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:600)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at junit.textui.TestRunner.doRun(TestRunner.java:116)&lt;br/&gt;
	at junit.textui.TestRunner.start(TestRunner.java:172)&lt;br/&gt;
	at junit.textui.TestRunner.main(TestRunner.java:138)&lt;/p&gt;

&lt;p&gt;I will post a smaller reproduction.&lt;/p&gt;

&lt;p&gt;I think JCC needs to be smarter about it&apos;s context and avoid hijacking  the connection when not running inside a DB2 stored procedure.    The problem can also with previous JCC versions if the driver is explicitly loaded. Autoloading aggravates the problem and may regress Derby users when they upgrade their JCC. The &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4664&quot; title=&quot;Change Derby internal stored procedures to avoid DriverManager.getConnection(&amp;quot;jdbc:default:connection&amp;quot;) as it may be recognized by other Drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4664&quot;&gt;&lt;del&gt;DERBY-4664&lt;/del&gt;&lt;/a&gt; fix will mitigate the issue for internal procedures but does not solve the problem for user procedures.  I think the fix will have to come from JCC but am filing it here as it may impact users.&lt;/p&gt;

&lt;p&gt;One workaround would be to remove JCC from the classpath if possible.&lt;/p&gt;

</description>
                <environment>JDK 1.6, JCC 4.x (db2jcc4.jar) in the classpath&lt;br/&gt;
$ java -version&lt;br/&gt;
java version &amp;quot;1.6.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr7-20091217_01(SR7))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr7-200912&lt;br/&gt;
14_49398 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20091214_049398&lt;br/&gt;
JIT  - r9_20091123_13891&lt;br/&gt;
GC   - 20091111_AA)&lt;br/&gt;
JCL  - 20091202_01&lt;br/&gt;
&lt;br/&gt;
</environment>
        <key id="12464996">DERBY-4668</key>
            <summary>Derby stored procedures with DriverManager.getConnection(&quot;jdbc:default:connection&quot;) fail if JCC 4.x (db2jcc4.jar) is in the classpath or any version jcc is explicitly loaded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 May 2010 07:07:47 +0100</created>
                <updated>Wed, 12 Jan 2011 22:24:41 +0000</updated>
                            <resolved>Thu, 24 Jun 2010 21:05:42 +0100</resolved>
                                    <version>10.6.1.0</version>
                                                    <component>Miscellaneous</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12869513" author="knutanders" created="Thu, 20 May 2010 08:54:25 +0100"  >&lt;p&gt;If I understand this issue correctly, we&apos;ll see the problem regardless of Derby version. Should we remove the regression flag?&lt;/p&gt;

&lt;p&gt;I agree with the analysis that the fix will have to be come from JCC. Derby does check if it&apos;s running inside another Derby connection before it returns a connection for jdbc:default:connection. If JCC did the same, we would probably not have this problem.&lt;/p&gt;</comment>
                            <comment id="12869667" author="myrna" created="Thu, 20 May 2010 17:40:03 +0100"  >&lt;p&gt;If it&apos;s not something actually wrong in derby, perhaps this should be closed as &apos;invalid&apos;?&lt;br/&gt;
It&apos;s been logged so users can find it; there&apos;s an explanation here and the &apos;workaround&apos; is documented here...&lt;br/&gt;
(Otherwise, this&apos;ll stay open and &apos;critical&apos; forever).&lt;/p&gt;</comment>
                            <comment id="12869678" author="kmarsden" created="Thu, 20 May 2010 18:10:33 +0100"  >&lt;p&gt;Thanks Myrna, that is a good point.&lt;/p&gt;

&lt;p&gt;I am going to work for a bit to get a more complete filing of the issue with a smaller reproduction,  do some experiments and see if I can come up with a workaround that does not involve changing the classpath.   I will keep it open for maybe a week for this purpose and then close Invalid as you suggest.&lt;/p&gt;</comment>
                            <comment id="12869714" author="kmarsden" created="Thu, 20 May 2010 19:36:37 +0100"  >&lt;p&gt;Attached is a Reproduction for this issue Repro4668.  If I put db2jcc4.jar in my classpath it fails because the JCC driver takes the connection away from the Derby stored procedure before the Derby drier sees it:&lt;br/&gt;
javac -d . -g Repro4668.java&lt;/p&gt;

&lt;p&gt;$ java com.mycode.Repro4668&lt;br/&gt;
Exception in thread &quot;main&quot; java.sql.SQLException: The exception &apos;com.ibm.db2.jcc&lt;br/&gt;
.am.SqlException: &lt;span class=&quot;error&quot;&gt;&amp;#91;jcc&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;10216&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;11231&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;4.11.29&amp;#93;&lt;/span&gt; Required property &quot;databaseName&quot;&lt;br/&gt;
is not set. ERRORCODE=-4462, SQLSTATE=null&apos; was thrown while evaluating an expre&lt;br/&gt;
ssion.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE&lt;br/&gt;
xceptionFactory40.java:95)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException&lt;br/&gt;
(TransactionResourceImpl.java:398)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Tr&lt;br/&gt;
ansactionResourceImpl.java:346)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConne&lt;br/&gt;
ction.java:2269)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Connection&lt;br/&gt;
Child.java:81)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState&lt;br/&gt;
ment.java:1321)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java&lt;br/&gt;
:625)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java&lt;br/&gt;
:555)&lt;br/&gt;
        at com.mycode.Repro4668.main(Repro4668.java:27)&lt;br/&gt;
Caused by: java.sql.SQLException: The exception &apos;com.ibm.db2.jcc.am.SqlException&lt;br/&gt;
: &lt;span class=&quot;error&quot;&gt;&amp;#91;jcc&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;10216&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;11231&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;4.11.29&amp;#93;&lt;/span&gt; Required property &quot;databaseName&quot; is not set. ERRO&lt;br/&gt;
RCODE=-4462, SQLSTATE=null&apos; was thrown while evaluating an expression.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExc&lt;br/&gt;
eptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransport&lt;br/&gt;
AcrossDRDA(SQLExceptionFactory40.java:119)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE&lt;br/&gt;
xceptionFactory40.java:70)&lt;br/&gt;
        ... 10 more&lt;br/&gt;
Caused by: com.ibm.db2.jcc.am.SqlException: &lt;span class=&quot;error&quot;&gt;&amp;#91;jcc&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;10216&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;11231&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;4.11.29&amp;#93;&lt;/span&gt; Require&lt;br/&gt;
d property &quot;databaseName&quot; is not set. ERRORCODE=-4462, SQLSTATE=null&lt;br/&gt;
        at com.ibm.db2.jcc.am.fd.a(fd.java:660)&lt;br/&gt;
        at com.ibm.db2.jcc.am.fd.a(fd.java:60)&lt;br/&gt;
        at com.ibm.db2.jcc.am.fd.a(fd.java:103)&lt;br/&gt;
        at com.ibm.db2.jcc.uw.UWConnection.Md(UWConnection.java:353)&lt;br/&gt;
        at com.ibm.db2.jcc.uw.UWConnection.&amp;lt;init&amp;gt;(UWConnection.java:271)&lt;br/&gt;
        at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(DB2SimpleDataSource&lt;br/&gt;
.java:220)&lt;br/&gt;
        at com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:456)&lt;br/&gt;
        at java.sql.DriverManager.getConnection(DriverManager.java:317)&lt;br/&gt;
        at java.sql.DriverManager.getConnection(DriverManager.java:273)&lt;br/&gt;
        at com.mycode.Repro4668.myproc(Repro4668.java:39)&lt;br/&gt;
        at org.apache.derby.exe.acf81e0010x0128xb6f7xc8f5x0000002a48300.g0(Unkno&lt;br/&gt;
wn Source)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:48)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:37)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:600)&lt;br/&gt;
        at org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMe&lt;br/&gt;
thod.java:46)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallSta&lt;br/&gt;
tementResultSet.java:75)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Generi&lt;br/&gt;
cPreparedStatement.java:436)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPre&lt;br/&gt;
paredStatement.java:317)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState&lt;br/&gt;
ment.java:1232)&lt;br/&gt;
        ... 3 more&lt;/p&gt;

&lt;p&gt;kmarsden@IBM-93AE43E63C0 ~/repro/derby-4668&lt;br/&gt;
$&lt;/p&gt;

&lt;p&gt;The expected output and output without db2jcc4.jar in the claspath is:&lt;/p&gt;

&lt;p&gt;$ java com.mycode.Repro4668&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;Start stored procedure. Default Connection:Apache Derby&lt;br/&gt;
MYPROC visits:&lt;br/&gt;
2010-05-20 11:26:07.64&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;




















































</comment>
                            <comment id="12869723" author="kmarsden" created="Thu, 20 May 2010 20:00:31 +0100"  >&lt;p&gt;I neglected to mention. The db2jcc4.jar file can be downloaded from : &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www-01.ibm.com/support/docview.wss?rs=71&amp;amp;uid=swg27007053&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www-01.ibm.com/support/docview.wss?rs=71&amp;amp;uid=swg27007053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Go into DB2 9.7 FP1 -&amp;gt; Your platform --&amp;gt; BM Data Server Driver for JDBC and SQLJ&lt;/p&gt;

&lt;p&gt;As an aside, I would be interested to hear if having db2jcc4.jar  in the system classpath interferes with other database products&apos; stored procedures if it is in the system classpath.&lt;/p&gt;</comment>
                            <comment id="12869743" author="kmarsden" created="Thu, 20 May 2010 20:29:29 +0100"  >&lt;p&gt;The following really ugly workaround seems to work even with authentication.  Instead of DriverManager.getConnection, I used DriverManager.getDriver to make sure I pick up the Derby driver and then connect,.&lt;/p&gt;

&lt;p&gt;   Connection conn = DriverManager.getDriver(&quot;jdbc:derby:default&quot;).connect(&quot;jdbc:default:connection&quot;,new Properties()); &lt;/p&gt;</comment>
                            <comment id="12882306" author="kmarsden" created="Thu, 24 Jun 2010 21:05:42 +0100"  >&lt;p&gt;Closing invalid since this looks like a JCC bug.  JCC needs to recognize that they are not in a DB2 stored procedure context when evaluating the jdbc:default:connection url.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445091" name="Repro4668.java" size="1477" author="kmarsden" created="Thu, 20 May 2010 19:36:37 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 May 2010 07:54:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    <customfieldvalue key="10427"><![CDATA[Workaround attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>