<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:19:52 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5816/DERBY-5816.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5816] store.ServicePropertiesFileTest fails on z/OS</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5816</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;store.ServicePropertiesFileTest fails on z/OS with two failures below. Looks like likely test encoding issue &lt;/p&gt;

&lt;p&gt;1) testSevicePropertiesFileWithBackup(org.apache.derbyTesting.functionTests.tests.store.ServicePropertiesFileTest)junit.&lt;br/&gt;
framework.AssertionFailedError&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.store.ServicePropertiesFileTest.assertEOFToken(ServicePropertiesF&lt;br/&gt;
ileTest.java:275)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.store.ServicePropertiesFileTest.testSevicePropertiesFileWithBacku&lt;br/&gt;
p(ServicePropertiesFileTest.java:178)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:88)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:424)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:441)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
2) testSevicePropertiesFileCorruptedWithBackup(org.apache.derbyTesting.functionTests.tests.store.ServicePropertiesFileTe&lt;br/&gt;
st)junit.framework.ComparisonFailure: expected:&amp;lt;&lt;a href=&quot;#--- last line, don&amp;#39;t put anything after this line ---&quot;&gt;&amp;#8212; last line, don&apos;t put anything after this line &amp;#8212;&lt;/a&gt;&amp;gt; but was:&amp;lt;[&lt;/p&gt;
{```
@    @    k@   }
&lt;p&gt; @   @        @     @    @    @```&#167;]&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.store.ServicePropertiesFileTest.removeEOFToken(ServicePropertiesF&lt;br/&gt;
ileTest.java:301)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.store.ServicePropertiesFileTest.testSevicePropertiesFileCorrupted&lt;br/&gt;
WithBackup(ServicePropertiesFileTest.java:199)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:88)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:424)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:441)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 290,  Failures: 2,  Errors: 0&lt;/p&gt;</description>
                <environment>z/os&lt;br/&gt;
java version &amp;quot;1.7.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pmz6470-20110827_01)&lt;br/&gt;
IBM J9 VM (build 2.6, JRE 1.7.0 z/OS s390x-64 20110810_88604 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - R26_Java726_GA_20110810_1208_B88592&lt;br/&gt;
JIT  - r11_20110810_20466&lt;br/&gt;
GC   - R26_Java726_GA_20110810_1208_B88592&lt;br/&gt;
J9CL - 20110810_88604)&lt;br/&gt;
JCL - 20110809_01 based on Oracle 7b147&lt;br/&gt;
$</environment>
        <key id="12560553">DERBY-5816</key>
            <summary>store.ServicePropertiesFileTest fails on z/OS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jun 2012 21:12:35 +0100</created>
                <updated>Wed, 3 Sep 2014 09:31:39 +0100</updated>
                            <resolved>Tue, 26 Jun 2012 00:03:11 +0100</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.2.2</fixVersion>
                                    <component>Store</component>
                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13294712" author="kmarsden" created="Thu, 14 Jun 2012 00:15:28 +0100"  >&lt;p&gt;ATtached is a patch for this issue. I think that there is a product issue as well as a test issue.  The new marker at the the end of service.properties should have been written out in US-ASCII to match the encoding of the rest of the service.properties file that was written with Propoerties.store().&lt;/p&gt;

&lt;p&gt;Please review.  I think/hope the issue with the wrong encoding for the end of file marker is not a regression from 10.8, but just means that the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5283&quot; title=&quot;Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5283&quot;&gt;&lt;del&gt;DERBY-5283&lt;/del&gt;&lt;/a&gt; won&apos;t work on z/os in 10.9.&lt;/p&gt;


&lt;p&gt;Note: In order to test encoding sensitive changes on Windows you can run with -Dfile.encoding=&quot;UTF-16&quot;&lt;/p&gt;</comment>
                            <comment id="13294838" author="kristwaa" created="Thu, 14 Jun 2012 07:44:42 +0100"  >&lt;p&gt;I think you&apos;re right about this being a product issue as well as a test issue, but the consequences are small.&lt;br/&gt;
In the normal case where there is just the service properties file and no backup file present, Derby won&apos;t even look at the marker line. The only time this can go wrong is if both the service properties file and the backup file are present &lt;b&gt;and&lt;/b&gt; the backup file has been corrupted.&lt;/p&gt;

&lt;p&gt;Note that according to the Java API the encoding used in Properties.store(OutputStream,String) is ISO-8859-1, not US-ASCII (&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;).&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13295046" author="kmarsden" created="Thu, 14 Jun 2012 15:10:51 +0100"  >&lt;p&gt;Thanks Kristian. Here is the updated patch.  I will commit in a bit unless I hear other comments.&lt;/p&gt;
</comment>
                            <comment id="13295967" author="dagw" created="Fri, 15 Jun 2012 23:30:37 +0100"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;+    //Service Properties File is always encoded in US-ASCII&lt;br/&gt;
+    // because it is written with Properties.store&lt;br/&gt;
+    private static final String SPF_ENCODING = &quot;ISO-8859-1&quot;;&lt;/p&gt;

&lt;p&gt;Guess the comment should say &quot;ISO-8859-1&quot;, too.&lt;/p&gt;</comment>
                            <comment id="13401007" author="kmarsden" created="Tue, 26 Jun 2012 00:03:11 +0100"  >&lt;p&gt;This issue does not exist in 10.8, so backported only to 10.9&lt;/p&gt;</comment>
                            <comment id="13707089" author="kmarsden" created="Fri, 12 Jul 2013 18:02:06 +0100"  >&lt;p&gt;This issue needs to be backported with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5283&quot; title=&quot;Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5283&quot;&gt;&lt;del&gt;DERBY-5283&lt;/del&gt;&lt;/a&gt;. Removing backport reject label&lt;/p&gt;</comment>
                            <comment id="13711269" author="jira-bot" created="Wed, 17 Jul 2013 17:52:37 +0100"  >&lt;p&gt;Commit 1504199 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kmarsden&quot; class=&quot;user-hover&quot; rel=&quot;kmarsden&quot;&gt;Kathey Marsden&lt;/a&gt; in branch &apos;code/branches/10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1504199&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1504199&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5283&quot; title=&quot;Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5283&quot;&gt;&lt;del&gt;DERBY-5283&lt;/del&gt;&lt;/a&gt; Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken &lt;/p&gt;

&lt;p&gt;Merge from trunk also includes the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5816&quot; title=&quot;store.ServicePropertiesFileTest fails on z/OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5816&quot;&gt;&lt;del&gt;DERBY-5816&lt;/del&gt;&lt;/a&gt; which was a test failure caused by the original change. The message files had to be manually merged.&lt;/p&gt;

&lt;p&gt;revisions merged were:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5283&quot; title=&quot;Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5283&quot;&gt;&lt;del&gt;DERBY-5283&lt;/del&gt;&lt;/a&gt; 1188109 1188828&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5816&quot; title=&quot;store.ServicePropertiesFileTest fails on z/OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5816&quot;&gt;&lt;del&gt;DERBY-5816&lt;/del&gt;&lt;/a&gt; 1350361 1353764&lt;/p&gt;</comment>
                            <comment id="13711271" author="jira-bot" created="Wed, 17 Jul 2013 17:52:39 +0100"  >&lt;p&gt;Commit 1504199 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kmarsden&quot; class=&quot;user-hover&quot; rel=&quot;kmarsden&quot;&gt;Kathey Marsden&lt;/a&gt; in branch &apos;code/branches/10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1504199&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1504199&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5283&quot; title=&quot;Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5283&quot;&gt;&lt;del&gt;DERBY-5283&lt;/del&gt;&lt;/a&gt; Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken &lt;/p&gt;

&lt;p&gt;Merge from trunk also includes the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5816&quot; title=&quot;store.ServicePropertiesFileTest fails on z/OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5816&quot;&gt;&lt;del&gt;DERBY-5816&lt;/del&gt;&lt;/a&gt; which was a test failure caused by the original change. The message files had to be manually merged.&lt;/p&gt;

&lt;p&gt;revisions merged were:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5283&quot; title=&quot;Crash / process termination during SYSCS_DISABLE_LOG_ARCHIVE_MODE can leave service.properties broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5283&quot;&gt;&lt;del&gt;DERBY-5283&lt;/del&gt;&lt;/a&gt; 1188109 1188828&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5816&quot; title=&quot;store.ServicePropertiesFileTest fails on z/OS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5816&quot;&gt;&lt;del&gt;DERBY-5816&lt;/del&gt;&lt;/a&gt; 1350361 1353764&lt;/p&gt;</comment>
                            <comment id="14119620" author="knutanders" created="Wed, 3 Sep 2014 09:31:39 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12656863">DERBY-6289</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12532085" name="DERBY-5816_diff.txt" size="6472" author="kmarsden" created="Thu, 14 Jun 2012 15:10:51 +0100"/>
                            <attachment id="12532022" name="DERBY-5816_diff.txt" size="6365" author="kmarsden" created="Thu, 14 Jun 2012 00:15:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jun 2012 06:44:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ban:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>