<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:45:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5005/DERBY-5005.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5005] Error when fully qualifying a field from a view in an ORDER BY clause</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5005</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I have a strange issue that can be reproduced easily with the following objects in schema &quot;test&quot;:&lt;/p&gt;

&lt;p&gt;create table a (a integer);&lt;br/&gt;
insert into a (a) values(1);&lt;br/&gt;
create view v as select * from a;&lt;/p&gt;

&lt;p&gt;This works:&lt;br/&gt;
select test.a.a from test.a where test.a.a &amp;lt;&amp;gt; 2 order by test.a.a asc;&lt;/p&gt;

&lt;p&gt;This doesn&apos;t work:&lt;br/&gt;
select test.v.a from test.v where test.v.a &amp;lt;&amp;gt; 2 order by test.v.a asc;&lt;/p&gt;

&lt;p&gt;But this does:&lt;br/&gt;
select test.v.a from test.v where test.v.a &amp;lt;&amp;gt; 2 order by v.a asc;&lt;/p&gt;

&lt;p&gt;This is the error I get:&lt;br/&gt;
Error: &apos;TEST.V&apos; is not an exposed table name in the scope in which it appears.&lt;br/&gt;
SQLState:  42X10&lt;br/&gt;
ErrorCode: -1&lt;/p&gt;

&lt;p&gt;I&apos;ve tried quite a few SELECT clauses, and I think the ORDER BY clause is the only one having this issue.&lt;/p&gt;</description>
                <environment>Windows 7</environment>
        <key id="12497745">DERBY-5005</key>
            <summary>Error when fully qualifying a field from a view in an ORDER BY clause</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="lukas.eder">Lukas Eder</reporter>
                        <labels>
                            <label>order</label>
                            <label>sql</label>
                            <label>syntax</label>
                            <label>views</label>
                    </labels>
                <created>Sat, 5 Feb 2011 09:04:41 +0000</created>
                <updated>Sat, 14 May 2011 23:36:24 +0100</updated>
                            <resolved>Fri, 11 Feb 2011 02:08:41 +0000</resolved>
                                    <version>10.0.2.0</version>
                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                    <version>10.3.1.4</version>
                    <version>10.3.2.1</version>
                    <version>10.3.3.0</version>
                    <version>10.4.1.3</version>
                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                    <version>10.5.2.0</version>
                    <version>10.5.3.0</version>
                    <version>10.6.1.0</version>
                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.2.4</fixVersion>
                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12991388" author="rhillegas" created="Mon, 7 Feb 2011 14:23:02 +0000"  >&lt;p&gt;Attaching 5005.sql, a script for the problem which Lukas found. I can verify that this fails for me too.&lt;/p&gt;</comment>
                            <comment id="12992255" author="dagw" created="Wed, 9 Feb 2011 00:44:48 +0000"  >&lt;p&gt;Uploading a patch that makes the query work. It makes FromSubquery&lt;br/&gt;
implement its own getFromTableByName instead of using the abstract&lt;br/&gt;
superclass FromTable&apos;s implementation which returns null when an&lt;br/&gt;
explicit schema is used (a view is represented a FromSubquery here),&lt;br/&gt;
cf. the comment in the default implementation:&lt;/p&gt;

&lt;p&gt;&quot;Only FromBaseTables have schema names&quot;&lt;/p&gt;

&lt;p&gt;which isn&apos;t quite true; views can have them, too.&lt;/p&gt;

&lt;p&gt;Added a new test, lang.Derby5005Test instead of adding to the harness test&lt;br/&gt;
orderby.sql. Made a note in orderby.sql to merge with Derby5005Test&lt;br/&gt;
when that test gets rewritten to JUnit.&lt;/p&gt;

&lt;p&gt;Running regressions.&lt;/p&gt;</comment>
                            <comment id="12992470" author="dagw" created="Wed, 9 Feb 2011 13:01:29 +0000"  >&lt;p&gt;Regressions ran OK, please review.&lt;/p&gt;</comment>
                            <comment id="12992505" author="rhillegas" created="Wed, 9 Feb 2011 14:38:41 +0000"  >&lt;p&gt;Thanks for the patch, Dag. It looks good to me. I have verified that 5005.sql now behaves as expected. +1&lt;/p&gt;</comment>
                            <comment id="12992506" author="lukas.eder" created="Wed, 9 Feb 2011 14:41:47 +0000"  >&lt;p&gt;Excellent guys! That was really quick! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12993302" author="dagw" created="Fri, 11 Feb 2011 02:07:28 +0000"  >&lt;p&gt;Uploaded derby-5005b, which just cleans up the first version a bit. Committed as svn 1069661, resolving.&lt;/p&gt;</comment>
                            <comment id="12993303" author="dagw" created="Fri, 11 Feb 2011 02:08:41 +0000"  >&lt;p&gt;Resolving this issue. If you are OK with the fix, please close the Lukas. Thanks!&lt;/p&gt;</comment>
                            <comment id="12993323" author="dagw" created="Fri, 11 Feb 2011 03:07:41 +0000"  >&lt;p&gt;Should be easy to backport.&lt;/p&gt;</comment>
                            <comment id="12994245" author="lukas.eder" created="Mon, 14 Feb 2011 09:38:39 +0000"  >&lt;p&gt;Should I verify the correctness of the fix before closing it? I&apos;d have to wait for a release (10.8, I guess) before I could close it. What&apos;s your preferred process?&lt;/p&gt;</comment>
                            <comment id="12994303" author="rhillegas" created="Mon, 14 Feb 2011 14:09:22 +0000"  >&lt;p&gt;Hi Lukas,&lt;/p&gt;

&lt;p&gt;It&apos;s fine to verify the fix using the trunk. But that requires that you set up a development environment. It&apos;s also ok to wait until 10.8 to verify the fix. From a process point of view, it doesn&apos;t matter much: resolving the feature means that our JIRA filters will sweep this issue into the release notes for 10.8. Thanks.&lt;/p&gt;</comment>
                            <comment id="13008694" author="kmarsden" created="Sat, 19 Mar 2011 00:15:54 +0000"  >&lt;p&gt;For 10.5 there was a slight manual merge. Attached is the patch derby-5005_10_5_diff.txt&lt;/p&gt;
</comment>
                            <comment id="13008725" author="kmarsden" created="Sat, 19 Mar 2011 03:44:23 +0000"  >&lt;p&gt;Running Suites.All the 10.5 patch I see this failure. I don&apos;t think it is related to the change and don&apos;t immediately see an issue filed but will take a closer look&lt;br/&gt;
1) SecureServerTest( Opened = false, Authenticated= true, CustomDerbyProperties=&lt;br/&gt;
 null, WildCardHost= 0.00.000.0 )junit.framework.AssertionFailedError: SecureSer&lt;br/&gt;
verTest( Opened = false, Authenticated= true, CustomDerbyProperties= null, WildC&lt;br/&gt;
ardHost= 0.00.000.0 )&lt;br/&gt;
Expected: Security manager installed using the Basic server security policy.&lt;br/&gt;
But saw:&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.derbynet.SecureServerTest&lt;br/&gt;
.testServerStartup(SecureServerTest.java:345)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:60)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:37)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
109)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 11318,  Failures: 1,  Errors: 1&lt;/p&gt;

&lt;p&gt;jvm is:&lt;br/&gt;
$ java -version&lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr9-20101125_01(SR9))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr9-201011&lt;br/&gt;
24_69295 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20101124_069295&lt;br/&gt;
JIT  - r9_20101028_17488ifx2&lt;br/&gt;
GC   - 20101027_AA)&lt;br/&gt;
JCL  - 20101119_01&lt;/p&gt;</comment>
                            <comment id="13008854" author="kmarsden" created="Sun, 20 Mar 2011 00:26:08 +0000"  >&lt;p&gt;finished backporting to 10.5&lt;/p&gt;</comment>
                            <comment id="13033611" author="lukas.eder" created="Sat, 14 May 2011 23:35:38 +0100"  >&lt;p&gt;Works for me in 10.8. Thanks guys&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12470452" name="5005.sql" size="419" author="rhillegas" created="Mon, 7 Feb 2011 14:23:02 +0000"/>
                            <attachment id="12470642" name="derby-5005.diff" size="7869" author="dagw" created="Wed, 9 Feb 2011 00:44:48 +0000"/>
                            <attachment id="12470643" name="derby-5005.stat" size="474" author="dagw" created="Wed, 9 Feb 2011 00:44:48 +0000"/>
                            <attachment id="12474047" name="derby-5005_10_5_diff.txt" size="2236" author="kmarsden" created="Sat, 19 Mar 2011 00:15:54 +0000"/>
                            <attachment id="12470820" name="derby-5005b.diff" size="7222" author="dagw" created="Fri, 11 Feb 2011 02:07:28 +0000"/>
                            <attachment id="12470821" name="derby-5005b.stat" size="474" author="dagw" created="Fri, 11 Feb 2011 02:07:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Feb 2011 14:23:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    <customfieldvalue key="10427"><![CDATA[Workaround attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0gav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>