<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:09:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4260/DERBY-4260.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4260] Make derbynet/NetworkServerControlClientCommandTest run regardless of the locale</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4260</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The NetworkServerControlClientCommandTest has in it a check that will only run the test if the locale is set to &apos;en&apos;.&lt;/p&gt;

&lt;p&gt;It is open to suggestion the how to achieve this and whether it should be done. Since the test is a pretty generic one, I think it should be ran regardless of the locale.&lt;/p&gt;

&lt;p&gt;Knut suggested we&apos;d force the locale to &apos;en&apos; on the setUp() and back to its previous value on the tearDown(). On a first analysis this seems like the ideal method to go about it. Just removing the check for the locale altogether might not be wise because of the calls to assertFailedPing() that involve some hardcoded strings.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427269">DERBY-4260</key>
            <summary>Make derbynet/NetworkServerControlClientCommandTest run regardless of the locale</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houxzhang">Houx Zhang</assignee>
                                    <reporter username="espinha">Tiago R. Espinha</reporter>
                        <labels>
                            <label>gsoc</label>
                            <label>gsoc2011</label>
                    </labels>
                <created>Sat, 6 Jun 2009 08:44:33 +0100</created>
                <updated>Tue, 25 Oct 2011 18:09:33 +0100</updated>
                            <resolved>Mon, 15 Aug 2011 18:52:11 +0100</resolved>
                                    <version>10.6.1.0</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12717303" author="knutanders" created="Mon, 8 Jun 2009 16:55:18 +0100"  >&lt;p&gt;I don&apos;t think setting the locale in setUp() is going to work, at least not if we set it with Locale.setDefault(Locale.US) as I suggested on derby-dev, since the ping command is executed as a separate process. Perhaps we could make assertFailedPing() pass -Dderby.ui.locale=en_US to the forked process so that it always prints English error messages.&lt;/p&gt;</comment>
                            <comment id="13011725" author="houxzhang" created="Sun, 27 Mar 2011 05:53:06 +0100"  >&lt;p&gt;In my testing on NetworkServerControlClientCommandTest.testPing(), it&apos;s useless to use LocaleTestSetup. The assertExecJavaCmdAsExpected() runs in a separate process. &lt;/p&gt;

&lt;p&gt;In my patch, &quot;-Dderby.ui.locale=en_US&quot; has been included in command args, and the testcase passed in Chinese Platform, while failed when reverted into default state.&lt;/p&gt;

&lt;p&gt;Furthermore, as the old testcase tests five situations in just one function testPing(), I have splitted it into five funcstions to make it more readable and maintainable.&lt;/p&gt;

&lt;p&gt;Wish for your comments, thanks!&lt;/p&gt;</comment>
                            <comment id="13011729" author="houxzhang" created="Sun, 27 Mar 2011 06:13:25 +0100"  >&lt;p&gt;Derby-4260 relates to Derby-5155, but isn&apos;t part of them, as in Derby-4260, English locale is set to a separate java command rather than to a test case.&lt;/p&gt;</comment>
                            <comment id="13011818" author="bryanpendleton" created="Sun, 27 Mar 2011 17:24:27 +0100"  >&lt;p&gt;Is it necessary to split the testPing test up as part of this? It seems like it would be&lt;br/&gt;
a simpler patch if we just addressed the locale issue for now.&lt;/p&gt;</comment>
                            <comment id="13012065" author="houxzhang" created="Mon, 28 Mar 2011 15:02:50 +0100"  >&lt;p&gt;Hi, Bryan. IMHO, derbynet/NetworkServerControlClientCommandTest can not been applied a general resolution on. As in the testing, some new processes are created to run the java command, and a new locale must be set in the new processes.&lt;/p&gt;</comment>
                            <comment id="13012983" author="houxzhang" created="Wed, 30 Mar 2011 15:24:52 +0100"  >&lt;p&gt;Hi, Bryan. As we have discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5155&quot; title=&quot;Make testcases pass in non-English locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5155&quot;&gt;&lt;del&gt;DERBY-5155&lt;/del&gt;&lt;/a&gt;, it should be dealt with individually and it&apos;s also part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5155&quot; title=&quot;Make testcases pass in non-English locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5155&quot;&gt;&lt;del&gt;DERBY-5155&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Please check the patch for the separate modification on locale, please. Thanks!&lt;/p&gt;</comment>
                            <comment id="13021377" author="bryanpendleton" created="Tue, 19 Apr 2011 03:21:25 +0100"  >&lt;p&gt;The patch builds and the tests pass in my environment:&lt;/p&gt;


&lt;p&gt;bpendleton@bpendleton-laptop:~/tests$ java junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest&lt;br/&gt;
.....&lt;br/&gt;
Time: 2.004&lt;/p&gt;

&lt;p&gt;OK (5 tests)&lt;/p&gt;
</comment>
                            <comment id="13021610" author="houxzhang" created="Tue, 19 Apr 2011 15:42:52 +0100"  >&lt;p&gt;Thanks for your checking, Bryan. And could you commit this patch, please?&lt;/p&gt;</comment>
                            <comment id="13021886" author="bryanpendleton" created="Wed, 20 Apr 2011 01:59:58 +0100"  >&lt;p&gt;Yes, I think this patch is ready to commit.&lt;/p&gt;

&lt;p&gt;Committed to the trunk as revision 1095247.&lt;/p&gt;

&lt;p&gt;Thanks for the contribution to Derby!&lt;/p&gt;</comment>
                            <comment id="13022140" author="houxzhang" created="Wed, 20 Apr 2011 15:05:04 +0100"  >&lt;p&gt;Hehe, thanks for your encourage, Bryan!&lt;/p&gt;

&lt;p&gt;As to this issue, I still have a question.&lt;/p&gt;

&lt;p&gt;I have done big refatoring on this test class, then changed it to support non-English locale. Is it better to provide two patches, one for refactoring and one for non-Endlish locale supporting, please? By this way, the change will be more clear to read in SVN repository.&lt;/p&gt;

&lt;p&gt; As I will do many similiar testing work, I think the answer is useful.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13022154" author="bryanpendleton" created="Wed, 20 Apr 2011 15:36:48 +0100"  >&lt;p&gt;Typically, the Derby community prefers to work on multiple smaller patches, rather than a single larger patch.&lt;br/&gt;
Each patch should address a single problem. We agree with you that this makes the SVN history easier&lt;br/&gt;
to comprehend. &lt;/p&gt;

&lt;p&gt;So, in the cases that you identify, we&apos;d prefer to address the test case refactoring separately&lt;br/&gt;
from the non-English locale issues, as two patches rather than one.&lt;/p&gt;

&lt;p&gt;Similarly, we try to avoid doing things like removing unneeded &quot;import&quot; statements or changing whitespace&lt;br/&gt;
or formatting/indentation of the code as part of a patch. The Derby code unfortunately has a significant&lt;br/&gt;
number of whitespace issues, as it is a old and mature codebase that has been worked on by many&lt;br/&gt;
programmers over the years, so we just accept those problems and try to avoid those changes in our patches.&lt;/p&gt;

&lt;p&gt;Meanwhile, Tiago, if you get a chance, can you confirm that this test now works properly for you in&lt;br/&gt;
a non-English locale? Then I think you could close this job?&lt;/p&gt;</comment>
                            <comment id="13022172" author="houxzhang" created="Wed, 20 Apr 2011 16:26:30 +0100"  >&lt;p&gt;OK, I&apos;ve got it , thanks, Bryan. It&apos;s reasonable and helpful!&lt;/p&gt;</comment>
                            <comment id="13085201" author="myrna" created="Mon, 15 Aug 2011 18:48:09 +0100"  >&lt;p&gt;reopen to document backport to 10.8&lt;/p&gt;</comment>
                            <comment id="13085208" author="myrna" created="Mon, 15 Aug 2011 18:52:11 +0100"  >&lt;p&gt;backported to 10.8 branch with revision 1156856.&lt;/p&gt;</comment>
                            <comment id="13085211" author="myrna" created="Mon, 15 Aug 2011 18:55:42 +0100"  >&lt;p&gt;oops, got the revision for wrong in my comment; backported to 10.8 branch with revision 1157923. The automatic revision reflect tool&apos;s got it right.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12502490">DERBY-5155</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12502490">DERBY-5155</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12474718" name="4260-1.patch" size="8388" author="houxzhang" created="Sun, 27 Mar 2011 05:53:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Jun 2009 15:55:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ez3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10053"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>