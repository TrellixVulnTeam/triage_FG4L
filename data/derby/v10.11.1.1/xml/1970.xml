<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:14:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1970/DERBY-1970.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1970] Add framework for performance tests in derby using Junit.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1970</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Add a framework for performance tests to be added in derby. &lt;/p&gt;

&lt;p&gt;Some goals are : &lt;br/&gt;
&amp;#8211; use Junit, thus will serve double duty as both functional tests as well as performance tests.&lt;br/&gt;
&amp;#8211; builds upon the existing infrastructure available to run functional tests &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;for example, getting connections is handled in a single way allowing the performance tests to run with J2ME, DriverManager, DataSource, single leg of an XA transaction etc.
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;be able to run using Junit directly.&lt;/li&gt;
		&lt;li&gt;easy for developers to add these tests and run them.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12353422">DERBY-1970</key>
            <summary>Add framework for performance tests in derby using Junit.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="skambha">Sunitha Kambhampati</assignee>
                                    <reporter username="skambha">Sunitha Kambhampati</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Oct 2006 18:09:35 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:25 +0100</updated>
                            <resolved>Tue, 8 Jun 2010 09:50:43 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12443137" author="skambha" created="Wed, 18 Oct 2006 02:30:08 +0100"  >&lt;p&gt;Attaching a patch derby1970.draft.1.diff.txt and the notes.html for only  feedback.   It is a work in progress. &lt;/p&gt;

&lt;p&gt;I have added Derby1862 test as a performance test case and I have run this only using Junit directly. &lt;/p&gt;

&lt;p&gt;java -Dderby.system.home=$PWD junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.perf.JunitPerfDerby1862&lt;/p&gt;

&lt;p&gt;Please see the Derby1970_Notes.html for more details.  I&apos;ll add more comments/ wiki on other ideas on how we can add to the JDBCPerfTestCase. &lt;/p&gt;

&lt;p&gt;Thanks. &lt;/p&gt;</comment>
                            <comment id="12443639" author="djd" created="Thu, 19 Oct 2006 21:21:21 +0100"  >&lt;p&gt;With the base performance class JDBCPerfTestCase it would be good to clarify how the test is run in terms of number of executions of the setUp, fixture and  tearDown methods.&lt;/p&gt;

&lt;p&gt;For a standard JUnit test then the each method is run once.&lt;/p&gt;

&lt;p&gt;For JDBCPerfTestCase  with R repeats and I iterations then is this the case?&lt;/p&gt;

&lt;p&gt;This cycle is repeated R times&lt;/p&gt;
       {
            setUp run once
            fixture method is run I times (and timed)
            tearDown is run once
       }



</comment>
                            <comment id="12443641" author="skambha" created="Thu, 19 Oct 2006 21:29:38 +0100"  >&lt;p&gt;Yes.  Thats correct. &lt;/p&gt;

&lt;p&gt;For JDBCPerfTestCase with R repeats and I iterations&lt;/p&gt;

&lt;p&gt;This cycle is repeated R times&lt;/p&gt;
       {
            setUp run once
            fixture method is run I times (and timed)
            tearDown is run once
       } 

&lt;p&gt;I&apos;ll update the javadoc for the JDBCPerfTestCase.   Thanks.&lt;/p&gt;</comment>
                            <comment id="12443961" author="skambha" created="Fri, 20 Oct 2006 23:48:56 +0100"  >&lt;p&gt;Currently the results get printed to System.out.  If you try to run using the Junit runner that comes with Eclipse, the results will all go to Console window in Eclipse. &lt;/p&gt;</comment>
                            <comment id="12444465" author="skambha" created="Tue, 24 Oct 2006 20:32:14 +0100"  >&lt;p&gt;Thanks Dan for the feedback on the earlier draft patch.  I am attaching the following patch (derby1970.p1.diff.txt) to add only the JDBCPerfTestCase related changes. &lt;/p&gt;

&lt;p&gt;svn stat:&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\junit\BaseTestCase.java&lt;br/&gt;
A      java\testing\org\apache\derbyTesting\junit\JDBCPerfTestCase.java&lt;/p&gt;

&lt;p&gt;This patch does the following&lt;br/&gt;
&amp;#8211; Adds JDBCPerfTestCase which is an extension of the BaseJDBCTestCase. This class provides a initial framework to ease development of performance tests. &lt;/p&gt;

&lt;p&gt;It is useful for a performance test framework to have ability to run a test for I iterations , and repeat the test R times. This class provides this functionality of timing the test for I iterations and repeating the test in the same jvm for R number of times. New performance tests can be added by extending the JDBCPerfTestCase. &lt;br/&gt;
Also see class level javadoc for more info.&lt;/p&gt;

&lt;p&gt;Note:  This patch will not affect the derbyall runs. &lt;br/&gt;
_________________________&lt;/p&gt;

&lt;p&gt;The following changes to JDBCPerfTestCase were made in this patch compared to draft patch(derby1970.draft.1.diff.txt)&lt;/p&gt;

&lt;p&gt;&amp;#8211; Remove the unused methods setIterations and setRepeats&lt;br/&gt;
&amp;#8211; Cleanup and improve class level javadoc comments.&lt;br/&gt;
&amp;#8211; remove the instance variable avg which is not needed.&lt;/p&gt;

&lt;p&gt;Can someone please take a look at this patch.  Thanks.&lt;/p&gt;

&lt;p&gt;_______________________&lt;br/&gt;
My plan is &lt;br/&gt;
1) Get this patch with the JDBCPerfTestCase into the trunk. This will allow the community to look more closely at this and anyone can feel free to extend the functionality etc.&lt;br/&gt;
2) Per the discussions on the list, it seems appropriate to add a new directory for the performance tests. Create a new directory and add build.xml for derbyTesting/perf.&lt;br/&gt;
3) Move the existing tests in functionTests/tests/perf &lt;br/&gt;
4) Add the derby1862 testcase that makes use of JDBCPerfTestCase.  &lt;br/&gt;
(In the previous draft (derby1970.draft.1.diff.txt)patch, you can see an example of how the JDBCPerfTestCase can be used.  )&lt;/p&gt;

&lt;p&gt;I&apos;ll address the remaining tasks (2,3,4) as one or two patches to this issue.   &lt;/p&gt;</comment>
                            <comment id="12444757" author="skambha" created="Thu, 26 Oct 2006 00:53:34 +0100"  >&lt;p&gt;Thanks to Suresh and Andrew for your feedback on location for the performance tests  (&lt;a href=&quot;http://www.nabble.com/Location-for-performance-tests.-tf2483748.html#a6927831&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Location-for-performance-tests.-tf2483748.html#a6927831&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;I am attaching a patch (derby1970.p2.diff.txt) and the corresponding derby1970.p2.stat.txt to address #2 and #4 in my previous comment.&lt;/p&gt;

&lt;p&gt;This patch &lt;br/&gt;
&amp;#8211; Adds a new directory to add performance tests.  java/testing/org/apache/derbyTesting/perf&lt;br/&gt;
&amp;#8211; Add build related changes for the derbyTesting/perf.&lt;br/&gt;
&amp;#8211; Adds a new performance test called ValuesTest using the JDBCPerfTestCase into derbyTesting/perf/basic/JDBC. &lt;br/&gt;
The ValuesTest adds two test fixtures:&lt;br/&gt;
1) fetchByColumnName&lt;br/&gt;
2) fetchByColumnNumber&lt;br/&gt;
The fetchByColumnName is taken from the derby-1862.java test.&lt;br/&gt;
&amp;#8211; Add a new _Suite class in derbyTesting/perf/basic. This _Suite class will run all performance tests in the basic performance suite. &lt;/p&gt;

&lt;p&gt;To run this specific test, do:&lt;br/&gt;
java junit.textui.TestRunner org.apache.derbyTesting.perf.basic.jdbc.ValuesTest&lt;/p&gt;

&lt;p&gt;To run the basic perf suite, do:&lt;br/&gt;
java junit.textui.TestRunner org.apache.derbyTesting.perf.basic._Suite&lt;/p&gt;

&lt;p&gt;Can someone please take a look at this patch.  Thanks. &lt;/p&gt;

&lt;p&gt;Please note, this patch requires the derby1970.p1.diff.txt patch to be committed first.&lt;/p&gt;</comment>
                            <comment id="12444943" author="skambha" created="Thu, 26 Oct 2006 19:07:13 +0100"  >&lt;p&gt;Note: currently the ValuesTest runs both in embedded and clientserver mode.  Currently from the test name printed out in the output, you cannot know which mode it is running in. I am thinking for performance tests, we should probably have a _ClientSuite to run all tests in client-server mode and _EmbedSuite to run all tests in embedded mode.  If a test should not (cannot)  be run in a paritcular framework, then the test should take care of not adding itself when running in that particular framework ( make use of the isDerbyNetClient methods in JDBCClient).&lt;/p&gt;
</comment>
                            <comment id="12444945" author="skambha" created="Thu, 26 Oct 2006 19:14:31 +0100"  >&lt;p&gt;Actually, existing methods in BaseJDBCTestCase  like usingDerbyNet(), usingEmbedded,usingDerbyNetClient() can be used to omit a particular test  from running in a particular framework. &lt;/p&gt;</comment>
                            <comment id="12445981" author="djd" created="Tue, 31 Oct 2006 18:09:05 +0000"  >&lt;p&gt;Patches derby1970.p1.diff.txt  and derby1970.p2.stat.txt committed. Thanks Sunitha.&lt;br/&gt;
I made a minor change to the ValuesTest to ensure that an &quot;unamed&quot; suite did not exist.&lt;/p&gt;</comment>
                            <comment id="12446454" author="fuzzylogic" created="Thu, 2 Nov 2006 05:32:07 +0000"  >&lt;p&gt;Sunitha, is this issue now complete? Please resolve and close if so.&lt;/p&gt;</comment>
                            <comment id="12446645" author="skambha" created="Thu, 2 Nov 2006 16:37:59 +0000"  >&lt;p&gt;The initial framework patches are all committed, but I think there is more room for improvement, specially in the area of reporting. I was hoping to keep this issue open to attach any further patches for this.   &lt;/p&gt;</comment>
                            <comment id="12468757" author="skambha" created="Tue, 30 Jan 2007 19:47:26 +0000"  >&lt;p&gt;Adding link to the wiki page here.  Please feel free to edit... &lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/db-derby/DerbyPerfTesting&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/DerbyPerfTesting&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12876601" author="knutanders" created="Tue, 8 Jun 2010 09:50:43 +0100"  >&lt;p&gt;I&apos;m resolving this issue since all the patches have been committed and there has been no activity for more than three years. We can open new JIRA issues if further improvement is required.&lt;/p&gt;</comment>
                            <comment id="13685233" author="knutanders" created="Mon, 17 Jun 2013 10:19:25 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12330375">DERBY-1122</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12343130" name="Derby1970_Notes.html" size="12993" author="skambha" created="Wed, 18 Oct 2006 05:23:37 +0100"/>
                            <attachment id="12343119" name="Derby1970_Notes.html" size="10207" author="skambha" created="Wed, 18 Oct 2006 02:30:08 +0100"/>
                            <attachment id="12343120" name="derby1970.draft.1.diff.txt" size="19179" author="skambha" created="Wed, 18 Oct 2006 02:30:08 +0100"/>
                            <attachment id="12343573" name="derby1970.p1.diff.txt" size="7653" author="skambha" created="Tue, 24 Oct 2006 20:32:14 +0100"/>
                            <attachment id="12343659" name="derby1970.p2.diff.txt" size="12453" author="skambha" created="Thu, 26 Oct 2006 00:53:34 +0100"/>
                            <attachment id="12343660" name="derby1970.p2.stat.txt" size="448" author="skambha" created="Thu, 26 Oct 2006 00:53:34 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Oct 2006 20:21:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0q33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>