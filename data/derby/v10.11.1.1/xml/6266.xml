<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6266/DERBY-6266.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6266] Add ability to print a Derby execution ResultSet as xml.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6266</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Add a method for printing an org.apache.derby.iapi.sql.ResultSet as xml. The idea is to get a quick snapshot of a plan shape without all of the overhead of PlanExporter and runtimestatistics. This method could be used by our tests to verify plan shapes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653233">DERBY-6266</key>
            <summary>Add ability to print a Derby execution ResultSet as xml.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Mon, 17 Jun 2013 18:54:25 +0100</created>
                <updated>Wed, 21 Jan 2015 00:23:39 +0000</updated>
                            <resolved>Fri, 30 May 2014 15:56:22 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13685796" author="rhillegas" created="Mon, 17 Jun 2013 19:18:00 +0100"  >&lt;p&gt;Attaching derby-6266-01-aa-toXML.diff. This patch adds an xml-printing method to the Derby execution ResultSet interface. I am running tests now.&lt;/p&gt;

&lt;p&gt;This patch makes the following changes:&lt;/p&gt;

&lt;p&gt;1) Adds a toXML() method to org.apache.derby.iapi.sql.ResultSet. The caller is responsible for creating a document and passing in a root Element to which xml sub-nodes can be appended.&lt;/p&gt;

&lt;p&gt;2) Adds a default implementation of toXML() to BasicNoPutResultSetImpl. The default implementation uses reflection to loop through all of the fields of a ResultSet which are also ResultSets. For each field, an element is created whose tag is the field name. The child element has a type attribute whose value is the refined type of the child ResultSet (e.g., &quot;ProjectRestrictResultSet&quot;).&lt;/p&gt;

&lt;p&gt;3) Makes ScanResultSet add extra tableName and indexName information to the childElement.&lt;/p&gt;

&lt;p&gt;I am attaching z.java, a little program which exercises this code. The program compiles the following query:&lt;/p&gt;

&lt;p&gt;select tablename from sys.systables t, sys.syscolumns c, sys.sysaliases a, sys.syssequences s&lt;br/&gt;
where t.tablename = c.columnname and c.columnname = a.alias and a.alias = s.sequencename;&lt;/p&gt;

&lt;p&gt;...and extracts the following xml printout of the ResultSet graph:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;planTrace&amp;gt;&lt;br/&gt;
    &amp;lt;top type=&quot;ProjectRestrictResultSet&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;source type=&quot;HashJoinResultSet&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;leftResultSet type=&quot;HashJoinResultSet&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;leftResultSet type=&quot;HashJoinResultSet&quot;&amp;gt;&lt;br/&gt;
                    &amp;lt;leftResultSet tableName=&quot;SYSCOLUMNS&quot; type=&quot;BulkTableScanResultSet&quot;/&amp;gt;&lt;br/&gt;
                    &amp;lt;rightResultSet indexName=&quot;SYSTABLES_INDEX1&quot; tableName=&quot;SYSTABLES&quot; type=&quot;HashScanResultSet&quot;/&amp;gt;&lt;br/&gt;
                &amp;lt;/leftResultSet&amp;gt;&lt;br/&gt;
                &amp;lt;rightResultSet indexName=&quot;SYSALIASES_INDEX1&quot; tableName=&quot;SYSALIASES&quot; type=&quot;HashScanResultSet&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;/leftResultSet&amp;gt;&lt;br/&gt;
            &amp;lt;rightResultSet indexName=&quot;SYSSEQUENCES_INDEX2&quot; tableName=&quot;SYSSEQUENCES&quot; type=&quot;HashScanResultSet&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/source&amp;gt;&lt;br/&gt;
    &amp;lt;/top&amp;gt;&lt;br/&gt;
&amp;lt;/planTrace&amp;gt;&lt;/p&gt;


&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;---------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/iapi/sql/ResultSet.java&lt;/p&gt;

&lt;p&gt;One new debug/testing method added to the Derby execution ResultSet interface.&lt;/p&gt;

&lt;p&gt;---------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java&lt;/p&gt;

&lt;p&gt;The default implementation of ResultSet.toXML(). The real logic is in BasicNoPutResultSetImpl. The other two classes just forward toXML() to the static machinery in BasicNoPutResultSetImpl.&lt;/p&gt;

&lt;p&gt;---------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/sql/execute/ScanResultSet.java&lt;/p&gt;

&lt;p&gt;Adds indexName and tableName attributes to the scan elements.&lt;/p&gt;

&lt;p&gt;---------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java&lt;br/&gt;
M       java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java&lt;/p&gt;

&lt;p&gt;All of the subclasses of ScanResultSet have public indexName and tableName fields. These were moved into ScanResultSet so that a single toXML() implementation could handle all scan nodes.&lt;/p&gt;</comment>
                            <comment id="13685907" author="rhillegas" created="Mon, 17 Jun 2013 20:55:35 +0100"  >&lt;p&gt;Tests passed cleanly for me on derby-6266-01-aa-toXML.diff except for the following failure. This failure looks like it was introduced by JDK 8&apos;s addition of a new SQLPermission to guard driver de-registration. This probably indicates that I will need to upgrade my JDK 8 installation at some point:&lt;/p&gt;

&lt;p&gt;There was 1 failure:&lt;br/&gt;
1) testShutdownWithoutPermission(org.apache.derbyTesting.functionTests.tests.engine.ShutdownWithoutDeregisterPermissionTest)junit.framework.AssertionFailedError: Expected driver to be registered&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.engine.ShutdownWithoutDeregisterPermissionTest.testShutdownWithoutPermission(ShutdownWithoutDeregisterPermissionTest.java:78)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;/p&gt;</comment>
                            <comment id="13686647" author="jira-bot" created="Tue, 18 Jun 2013 13:29:58 +0100"  >&lt;p&gt;Commit 1494115 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;Rick Hillegas&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1494115&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1494115&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6266&quot; title=&quot;Add ability to print a Derby execution ResultSet as xml.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6266&quot;&gt;&lt;del&gt;DERBY-6266&lt;/del&gt;&lt;/a&gt;: Add ability to print Derby execution ResultSet graph as xml.&lt;/p&gt;</comment>
                            <comment id="13692722" author="mamtas" created="Tue, 25 Jun 2013 04:39:09 +0100"  >&lt;p&gt;Rick, thanks for working on this jira. I went ahead and assigned this jira to you as part of 10.11 triage since you are actively working on it. I hope that was the right thing to do. &lt;/p&gt;</comment>
                            <comment id="13692970" author="rhillegas" created="Tue, 25 Jun 2013 13:21:54 +0100"  >&lt;p&gt;Thanks, Mamta. That sounds good. I&apos;m keeping the issue open for a while in case I need to tweak the summary xml. Thanks.&lt;/p&gt;</comment>
                            <comment id="14013725" author="rhillegas" created="Fri, 30 May 2014 15:56:22 +0100"  >&lt;p&gt;I have not needed to make any changes in this area for a long time. Resolving.&lt;/p&gt;</comment>
                            <comment id="14284836" author="myrna" created="Wed, 21 Jan 2015 00:23:39 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12588175" name="derby-6266-01-aa-toXML.diff" size="10319" author="rhillegas" created="Mon, 17 Jun 2013 19:18:00 +0100"/>
                            <attachment id="12588176" name="z.sql" size="1414" author="rhillegas" created="Mon, 17 Jun 2013 19:18:00 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Jun 2013 12:29:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333556</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzfdtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>