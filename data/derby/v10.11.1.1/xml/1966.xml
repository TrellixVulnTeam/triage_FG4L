<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:41:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1966/DERBY-1966.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1966] NetworkServer startup can take 50+ seconds if a client holds an open connection to the previous server booted within the same vm</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1966</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Seen when a client in the same jvm held a open connection to a previously booted network server within the same jvm.&lt;/p&gt;

&lt;p&gt;Order would be:&lt;/p&gt;

&lt;p&gt;boot server&lt;br/&gt;
client connect to server (hold onto connection and don&apos;t close)&lt;br/&gt;
shutdown server&lt;br/&gt;
boot server  &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;------ this boot will take 50+ seconds&lt;/p&gt;</description>
                <environment>Windows XP - IBM JVM 1.4.2</environment>
        <key id="12353342">DERBY-1966</key>
            <summary>NetworkServer startup can take 50+ seconds if a client holds an open connection to the previous server booted within the same vm</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                            <label>derby_triage10_9</label>
                    </labels>
                <created>Tue, 17 Oct 2006 04:57:53 +0100</created>
                <updated>Tue, 21 Feb 2012 19:35:14 +0000</updated>
                                            <version>10.3.1.4</version>
                                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12450772" author="djd" created="Fri, 17 Nov 2006 15:35:43 +0000"  >&lt;p&gt;Also occurs if a reference to the NetworkServerControl used to start the server is kept.&lt;br/&gt;
Can reproduce this by not nulling out networkServerController in the tearDown method of NetworkServerTestSetup and then run a JUnit test that uses the decorator repeatably within the same JVM. Using the MathTrigFunctionsTest in the swingui (just keep clicking run once the test completes) I saw about 2 failures to start the network server every 15 runs.&lt;/p&gt;</comment>
                            <comment id="12475194" author="djd" created="Thu, 22 Feb 2007 23:13:26 +0000"  >&lt;p&gt;the interaction between NetworkServerControlImpl and DRDAServerStarter is overly complex and convoluted. &lt;br/&gt;
It results in the method startNetworkServer in NetworkServerControlImpl being called twice on two different instances of NetworkServerControlImpl. Strangely enough both are required (but it&apos;s not obvious why from casual reading,&lt;br/&gt;
it is due to some ordering issues) and it&apos;s further confused by the fact that the method startNetworkServer does not&lt;br/&gt;
in fact start the server. Not sure of its exact role &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Separating out some of the code in DRDAServerStarter into separate methods (and adding comments) allows&lt;br/&gt;
a more natural interface between these two classes. Will submit a patch for this soon. Probably does not solve the 60+&lt;br/&gt;
second issue, but makes the code more understandable.&lt;/p&gt;</comment>
                            <comment id="12475200" author="bryanpendleton" created="Thu, 22 Feb 2007 23:38:47 +0000"  >&lt;p&gt;I completely agree with your observations regarding the complexity. Deepa and Knut Anders and I wrestled with this code a bunch as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1219&quot; title=&quot;jdbcapi/checkDataSource.java and jdbcapi/checkDataSource30.java hang intermittently with client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1219&quot;&gt;&lt;del&gt;DERBY-1219&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1326&quot; title=&quot;Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1326&quot;&gt;&lt;del&gt;DERBY-1326&lt;/del&gt;&lt;/a&gt;. See e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1326#action_12415277&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-1326#action_12415277&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if any of the comments in those issues are of much help; just wanted to chime in and agree with your comments.&lt;/p&gt;</comment>
                            <comment id="12475211" author="djd" created="Fri, 23 Feb 2007 00:22:59 +0000"  >&lt;p&gt;Thanks Bryan, I see some of the same thoughts came up, I&apos;ll look through them in more detail before submitting a patch.&lt;/p&gt;</comment>
                            <comment id="12728662" author="knutanders" created="Wed, 8 Jul 2009 13:46:38 +0100"  >&lt;p&gt;Triaged for 10.5.2.&lt;/p&gt;</comment>
                            <comment id="12861816" author="kristwaa" created="Wed, 28 Apr 2010 15:40:03 +0100"  >&lt;p&gt;Unable to reproduce on OpenSolaris with the procedure described above.&lt;br/&gt;
Is this a Windows-only bug, or has it been observed on another operating system too?&lt;/p&gt;</comment>
                            <comment id="13212783" author="kmarsden" created="Tue, 21 Feb 2012 18:37:01 +0000"  >&lt;p&gt;I attempted to reproduce this problem with the attached program AttemptReproDerby1966 against the reported version 10.3.1.4 on Windows with IBM 1.4.2 (although probably a later version of IBM 1.4.2)&lt;/p&gt;

&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.4.2&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)&lt;br/&gt;
Classic VM (build 1.4.2, J2RE 1.4.2 IBM Windows 32 build cn142ifx-20110211 (SR13 FP8+PM31983) (JIT enabled: jitc))&lt;/p&gt;

&lt;p&gt;Kristian also said he had trouble reproducing with the steps provided. I think unless someone has other ideas, we should close this one Cannot Reproduce&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12368720">DERBY-2616</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12515460" name="AttemptReproDerby1966.java" size="3184" author="kmarsden" created="Tue, 21 Feb 2012 18:37:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Feb 2007 23:38:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0d5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>