<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:34:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4436/DERBY-4436.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4436] Refactor existing in-memory back end tests and add new tests for dropping database</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4436</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;To make it easier to write new in-memory back end tests, a class with a few convenience methods would be helpful.&lt;br/&gt;
I will add such a class, rewrite existing tests to use it (where appropriate) and finally add some new tests for dropping in-memory databases.&lt;/p&gt;

&lt;p&gt;The tests will be disabled until the drop mechanism is implemented.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12440014">DERBY-4436</key>
            <summary>Refactor existing in-memory back end tests and add new tests for dropping database</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12439397">DERBY-4428</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2009 09:57:11 +0000</created>
                <updated>Thu, 29 Apr 2010 13:10:16 +0100</updated>
                            <resolved>Thu, 29 Apr 2010 13:10:16 +0100</resolved>
                                    <version>10.6.1.0</version>
                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12774288" author="kristwaa" created="Fri, 6 Nov 2009 13:28:52 +0000"  >&lt;p&gt;Attaching version 1a of the patch.&lt;/p&gt;

&lt;p&gt;Patch description:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added MemoryDbManager&lt;br/&gt;
  Contains convenience methods for working with in-memory databases. Reimplements some of the same functionality provided by BaseJDBCTestCase / TestConfiguration.&lt;br/&gt;
  Note that the deleteDatabase method has been short-circuited for the time being, until the drop mechanism has been implemented.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Changed BasicInMemoryDbTest&lt;br/&gt;
  Adjusted the class to use the new MemorDbManager.&lt;br/&gt;
  Added a few more tests, some of which have been disabled for now (awaiting drop).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Changed MogTest&lt;br/&gt;
  Adjusted the class to use the new MemorDbManager.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added DropWhileConnectingTest&lt;br/&gt;
  New multi threaded test for testing what happens when a lot of connections are connecting or  executing against a database being dropped.&lt;br/&gt;
  Must await the drop functionality before it can be used, and I don&apos;t know if this should be part of the regression test suite or not.&lt;br/&gt;
  Can be tweaked with derby.tests.[&lt;span class=&quot;error&quot;&gt;&amp;#91;noWait=true|false&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;threadCount=thread#&amp;#93;&lt;/span&gt;]&lt;br/&gt;
  Using this test I have been able to verify that a access block feature I have prototyped has value (see post on derby-dev regarding this feature).&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12776955" author="kristwaa" created="Thu, 12 Nov 2009 11:20:41 +0000"  >&lt;p&gt;Attached patch 1b, and committed it to trunk with revision 835334.&lt;/p&gt;

&lt;p&gt;I expect that most of the work for this issue has been done with patch 1b, but some adjustments must be made when the drop database functionality has been added.&lt;br/&gt;
To ensure things get done:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove short-circuiting from MemoryDbManager.dropDatabase.&lt;/li&gt;
	&lt;li&gt;enable tests in BasicInMemoryDbTest&lt;/li&gt;
	&lt;li&gt;remove disabled method call in MogTest&lt;/li&gt;
	&lt;li&gt;potentially add DropWhileConnectingTest to the suite&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll keep this issue open until the above items have been taken care of.&lt;/p&gt;</comment>
                            <comment id="12782882" author="kristwaa" created="Thu, 26 Nov 2009 12:51:50 +0000"  >&lt;p&gt;The items above got addressed by patch 2b under &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4428&quot; title=&quot;Add proper delete mechanism for in-memory databases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4428&quot;&gt;&lt;del&gt;DERBY-4428&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if DropWhileConnectingTest should be wired in to the suite yet, although it would be good to run the test on a variety of machines / platforms. I&apos;ll reconsider test more and reconsider when the access block mechanism is in place.&lt;/p&gt;</comment>
                            <comment id="12862174" author="kristwaa" created="Thu, 29 Apr 2010 13:10:16 +0100"  >&lt;p&gt;Closing issue.&lt;/p&gt;

&lt;p&gt;The test stressing concurrent boot/access/shutdown/drop should be added under &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4447&quot; title=&quot;Add internal block mechanism to reject new database connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4447&quot;&gt;DERBY-4447&lt;/a&gt; if appropriate.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12424200" name="derby-4436-1a-inmem_test_changes.diff" size="38741" author="kristwaa" created="Fri, 6 Nov 2009 13:28:52 +0000"/>
                            <attachment id="12424201" name="derby-4436-1a-inmem_test_changes.stat" size="380" author="kristwaa" created="Fri, 6 Nov 2009 13:28:52 +0000"/>
                            <attachment id="12424715" name="derby-4436-1b-inmem_test_changes.diff" size="40843" author="kristwaa" created="Thu, 12 Nov 2009 11:20:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31237</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0qon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>