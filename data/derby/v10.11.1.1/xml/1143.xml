<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1143/DERBY-1143.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1143] derbynet/prepStmt.java fails with JCC2.6</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1143</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;derbynet/prepStmt.java fails on Windows and Linux with Sun JDK 1.5 and JCC 2.6. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: prepStmt jdk1.5.0_02 DerbyNet derbynetmats:derbynetmats 2006-03-22 19:46:37 ***&lt;br/&gt;
82 del&lt;br/&gt;
&amp;lt; prepStmt Test Ends&lt;br/&gt;
82 add&lt;br/&gt;
&amp;gt; com.ibm.db2.jcc.a.DisconnectException: More than 0x7FF chained requests not allowed.  This error may be due to a batch that is greater than 32k.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   prepStmt jdk1.5.0_02 DerbyNet derbynetmats:derbynetmats 2006-03-22 19:46:59 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The test passed for me with Sun JDK1.5, JCC 2.4 on Windows XP. The tinderbox runs do not show this failure. It looks like this failure is occuring only with JCC2.6. &lt;/p&gt;</description>
                <environment>JCC 2.6</environment>
        <key id="12330613">DERBY-1143</key>
            <summary>derbynet/prepStmt.java fails with JCC2.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Mar 2006 02:19:49 +0000</created>
                <updated>Wed, 1 Jul 2009 01:09:09 +0100</updated>
                            <resolved>Thu, 30 Mar 2006 03:10:48 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12371815" author="bryanpendleton" created="Sat, 25 Mar 2006 06:26:58 +0000"  >&lt;p&gt;The failure occurs as part of the new test added for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-428&quot; title=&quot;NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-428&quot;&gt;&lt;del&gt;DERBY-428&lt;/del&gt;&lt;/a&gt;. That regression test is attempting to create a JDBC batch containing as many batch elements as it can. I determined the number of batch elements to put into the test by experimenting with the Derby Network Client and with JCC 2.4, but apparently JCC 2.6 supports a smaller number of batch elements than JCC 2.4 did.&lt;/p&gt;

&lt;p&gt;Deepa is researching what the JCC 2.6 limit on number of elements in a batch is. Once we know that, we can change the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-428&quot; title=&quot;NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-428&quot;&gt;&lt;del&gt;DERBY-428&lt;/del&gt;&lt;/a&gt; regression test routine in prepStmt.java so that it runs min(C, C24, C26) number of elements, where:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;C is the number of elements supported by the Derby Network Client, which is 65534&lt;/li&gt;
	&lt;li&gt;C24 is the number of elements supported by the JCC 2.4 driver, which is 65532&lt;/li&gt;
	&lt;li&gt;C26 is the number of elements supported by the JCC 2.6 driver (which Deepa is researching).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;0x7FF is 2047 in decimal. It would be somewhat surprising if JCC 2.4 supported almost 64K batch elements in a single batch and JCC 2.6 reduced that to 2047, and it would certainly weaken the test to reduce the counter from 65532 down to 2047, but that may be the simplest solution. Since the original &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-428&quot; title=&quot;NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-428&quot;&gt;&lt;del&gt;DERBY-428&lt;/del&gt;&lt;/a&gt; bug only occurred when at least 9000 elements were in a single batch, setting the test limit down to 2047 would no longer test the original bug. If JCC 2.6 really supports only 2047 elements in a single batch, then we may want to enhance TestUtil so that we can tell whether we are running with JCC 2.4 or JCC 2.6, and then have the test use a different value depending on the driver in use, so that when we are running the test with the Derby Network Client we can still test that we support a large number of batch elements.&lt;/p&gt;</comment>
                            <comment id="12372148" author="deepa" created="Wed, 29 Mar 2006 06:44:40 +0100"  >&lt;p&gt;Attaching a patch &apos;derby-1143.diff&apos; which reduces the number of batch elements in the test derbynet/prepStmt.java so that it can run successfully with jcc2.6. &lt;/p&gt;

&lt;p&gt;I checked with the JCC folks who told me that JCC2.6 driver supports less than 32K batch elements. When I ran the test, I found that maximum number supported is 32765. As mentioned by Bryan, any number greater than 9000 will provoke the bug. So this number will still allow us to test &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-428&quot; title=&quot;NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-428&quot;&gt;&lt;del&gt;DERBY-428&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;With this patch, I have also run the test with client framework. This patch modifies only one test file (derbynet/prepStmt.java). It would be good if someone can take a look at this patch.&lt;/p&gt;</comment>
                            <comment id="12372150" author="bryanpendleton" created="Wed, 29 Mar 2006 07:28:41 +0100"  >&lt;p&gt;Thank you for following up with the JCC team, Deepa.&lt;/p&gt;

&lt;p&gt;Your patch looks great to me. I applied and confirmed the test results without incident. I also temporarily regressed the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-428&quot; title=&quot;NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-428&quot;&gt;&lt;del&gt;DERBY-428&lt;/del&gt;&lt;/a&gt; fix and verified that this test still provokes the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-428&quot; title=&quot;NetworkClient PreparedStatement.executeBatch() hangs if batch is too large (ArrayIndexOutOfBoundsException in Network Server)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-428&quot;&gt;&lt;del&gt;DERBY-428&lt;/del&gt;&lt;/a&gt; problem.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this patch to subversion tomorrow, unless any other reviewer notices anything else before then.&lt;/p&gt;</comment>
                            <comment id="12372283" author="bryanpendleton" created="Thu, 30 Mar 2006 03:10:46 +0100"  >&lt;p&gt;Patch committed to subversion:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewcvs?rev=389836&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs?rev=389836&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12372463" author="deepa" created="Fri, 31 Mar 2006 02:11:57 +0100"  >&lt;p&gt;Verified test passes with JCC 2.6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12324685" name="derby-1143.diff" size="1542" author="deepa" created="Wed, 29 Mar 2006 06:44:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Mar 2006 06:26:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>