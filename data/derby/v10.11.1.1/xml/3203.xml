<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:18:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3203/DERBY-3203.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3203] Convert jdbcapi/statementJdbc20.java to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3203</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This issue is creates for converting jdbcapi/statementJdbc20.java to JUnit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12382408">DERBY-3203</key>
            <summary>Convert jdbcapi/statementJdbc20.java to JUnit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="moazeni">Ramin Moazeni</assignee>
                                    <reporter username="moazeni">Ramin Moazeni</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Nov 2007 09:08:14 +0000</created>
                <updated>Wed, 1 Jul 2009 00:40:20 +0100</updated>
                            <resolved>Thu, 27 Mar 2008 16:17:17 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12542189" author="moazeni" created="Tue, 13 Nov 2007 18:18:29 +0000"  >&lt;p&gt;Hello&lt;/p&gt;

&lt;p&gt;I am attaching the patch to this issue.&lt;br/&gt;
I appreciate your review/comments.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Ramin&lt;/p&gt;</comment>
                            <comment id="12544006" author="kmarsden" created="Tue, 20 Nov 2007 18:47:24 +0000"  >&lt;p&gt;Hi Ramin, I realize this is probably just carry over from the previous test, but I wonder if it makes more sense to use ResultSet.FETCH_REVERSE instead of 1001.&lt;/p&gt;

&lt;p&gt;assertEquals(stmt.getFetchDirection(), 1001);&lt;/p&gt;</comment>
                            <comment id="12545509" author="moazeni" created="Mon, 26 Nov 2007 17:06:01 +0000"  >&lt;p&gt;Hi Kathey&lt;/p&gt;

&lt;p&gt;Thanks for the comment. I am attaching a new&lt;br/&gt;
patch with this issue.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Ramin&lt;/p&gt;</comment>
                            <comment id="12548377" author="dyret" created="Tue, 4 Dec 2007 19:42:06 +0000"  >&lt;p&gt;Committed revision 601058.&lt;/p&gt;</comment>
                            <comment id="12548404" author="djd" created="Tue, 4 Dec 2007 20:53:25 +0000"  >&lt;p&gt;Test has several try/catch blocks where I think a failure is expected but the test will pass if the try portion succeeds as there is no fail() assert.&lt;br/&gt;
E.g.&lt;/p&gt;

&lt;p&gt;        try&lt;/p&gt;
{
            rs.setFetchDirection(ResultSet.FETCH_FORWARD);
        }
&lt;p&gt;catch(SQLException e)&lt;/p&gt;
{
            
            if (usingEmbedded())
                assertSQLState(&quot;XJ061&quot;, e);
            else
                assertSQLState(&quot;XJ125&quot;, e);
        }
</comment>
                            <comment id="12548724" author="dyret" created="Wed, 5 Dec 2007 16:44:00 +0000"  >&lt;p&gt;Hi Ramin, &lt;/p&gt;

&lt;p&gt;I think Dan is making a very good point about the missing fail()&lt;br/&gt;
asserts in some of the try-blocks. &lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch (v3) which adds the missing fail()-asserts. &lt;br/&gt;
Unfortunately, it also reveals that one of the test&lt;br/&gt;
cases is not throwing the expected exception &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;The statement that doesn&apos;t fail is &apos;rs.setFetchSize(100)&apos; in&lt;br/&gt;
&apos;testLocalValuesOfResultSet()&apos; in client mode. In v3 I have&lt;br/&gt;
enclosed the fail()-assert in an usingEmbedded()-test just to&lt;br/&gt;
make the test pass, but I don&apos;t know if this is expected&lt;br/&gt;
behavior or a bug. What do you think?&lt;/p&gt;</comment>
                            <comment id="12549354" author="dyret" created="Fri, 7 Dec 2007 09:49:59 +0000"  >&lt;p&gt;I briefly checked what the javadoc and the JDBC tutorial says about ResultSet.setFetchSize(), and I cannot see anything which suggests that rs.setFetchSize(100) is illegal in this context, and the error message &quot;XJ062.S=Invalid parameter value &apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos; for ResultSet.setFetchSize(int rows).&quot; doesn&apos;t provide any clues either. So does anyone know why this fails in embedded mode?&lt;/p&gt;</comment>
                            <comment id="12549477" author="dyret" created="Fri, 7 Dec 2007 17:16:43 +0000"  >&lt;p&gt;I think I have resolved the apparent mystery here. The requirement that the argument to ResultSet.setFetchSize(int) be less than Statement.getMaxRows() was dropped in Java 6/JDBC 4, (it is not present in the Java 6 javadoc, but can still be seen in the Java 5 javadoc).&lt;/p&gt;

&lt;p&gt;The reason why the client driver doesn&apos;t throw an exception in this case is because am.ResultSet incorrectly checks against ResultSet.maxRows_ and NOT am.Statement.getMaxRows(). So when am.Statement.setMaxRows(int) is called after a result set has already been created, am.ResultSet.setFechSize(int) will check against a stale value.&lt;/p&gt;

&lt;p&gt;The question is what to do about this. The client driver clearly has a bug, but should we fix it by duplicating the old behavior found in the embedded driver, or change both drivers to comply with latest spec which allows any non-negative value as argument to ResultSet.setFetchSize(int)?&lt;/p&gt;</comment>
                            <comment id="12563819" author="bryanpendleton" created="Wed, 30 Jan 2008 04:09:02 +0000"  >&lt;p&gt;I believe that the 4-Dec commit (revision 601058) had a small mistake&lt;br/&gt;
in it; I believe that the intent of the patch was to delete statementJdbc20.java&lt;br/&gt;
and statementJdbc20.out, as shown by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3203&quot; title=&quot;Convert jdbcapi/statementJdbc20.java to JUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3203&quot;&gt;&lt;del&gt;DERBY-3203&lt;/del&gt;&lt;/a&gt;v0.stat. However, the&lt;br/&gt;
actual commit left those files present and empty (0 bytes).&lt;/p&gt;

&lt;p&gt;I propose to run &lt;br/&gt;
  svn delete java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/statementJdbc20.java&lt;br/&gt;
  svn delete java/testing/org/apache/derbyTesting/functionTests/master/statementJdbc20.out&lt;br/&gt;
and commit those deletions to the trunk.&lt;/p&gt;

&lt;p&gt;Please let me know if I&apos;m misunderstanding the issue.&lt;/p&gt;</comment>
                            <comment id="12564118" author="bryanpendleton" created="Wed, 30 Jan 2008 18:33:18 +0000"  >&lt;p&gt;Committed the two deletes to the trunk as revision 616834.&lt;/p&gt;</comment>
                            <comment id="12568282" author="dyret" created="Tue, 12 Feb 2008 18:49:06 +0000"  >&lt;p&gt;Sorry Bryan, I&apos;m a bit behind on my Jira mail. Yes I think you are right. Thanks for fixing this.&lt;/p&gt;</comment>
                            <comment id="12582200" author="dyret" created="Wed, 26 Mar 2008 09:29:06 +0000"  >&lt;p&gt;Can this issue be resloved/closed now?&lt;/p&gt;</comment>
                            <comment id="12582716" author="dyret" created="Thu, 27 Mar 2008 16:17:17 +0000"  >&lt;p&gt;Resolving since the problem with ResultSet.setFetchSize() has been factored out in a separate issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3573&quot; title=&quot;Argument checking for ResultSet.setFetchSize(int) is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3573&quot;&gt;&lt;del&gt;DERBY-3573&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12392463">DERBY-3573</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12369457" name="DERBY-3203v0.diff" size="20708" author="moazeni" created="Tue, 13 Nov 2007 23:03:01 +0000"/>
                            <attachment id="12369440" name="DERBY-3203v0.stat" size="626" author="moazeni" created="Tue, 13 Nov 2007 18:18:29 +0000"/>
                            <attachment id="12370220" name="DERBY-3203v2.diff" size="20861" author="moazeni" created="Mon, 26 Nov 2007 17:06:01 +0000"/>
                            <attachment id="12371050" name="DERBY-3203v3.diff" size="4476" author="dyret" created="Wed, 5 Dec 2007 16:44:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Nov 2007 18:47:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0u4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>