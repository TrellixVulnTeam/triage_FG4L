<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:35:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-885/DERBY-885.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-885] Test harness aborts with exception when running nist test suite in J2ME</title>
                <link>https://issues.apache.org/jira/browse/DERBY-885</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The first test in nist suite (schema1.sql) fails with following exception:&lt;/p&gt;

&lt;p&gt;RunIJ --&amp;gt; java.security.AccessControlException: Access denied (java.io.FilePermission C:\deepa\Derby\derby_testing\j9foun_nist\nist\schema1_app.properties read)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.io.FilePermission C:\deepa\Derby\derby_testing\j9foun_nist\nist\schema1_app.properties read)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:74)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:612)&lt;br/&gt;
	at java.lang.SecurityManager.checkRead(SecurityManager.java:395)&lt;br/&gt;
	at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:90)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.util.getPropertyArg(util.java:120)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:91)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:56)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunIJ.run(RunIJ.java:44)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:795)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.util.PropertyPermission * read,write)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:74)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:612)&lt;br/&gt;
	at java.lang.SecurityManager.checkPropertiesAccess(SecurityManager.java:353)&lt;br/&gt;
	at java.lang.System.getProperties(System.java:252)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunTest.execTestNoProcess(RunTest.java:2324)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunTest.testRun(RunTest.java:442)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunTest.main(RunTest.java:301)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunList.runTests(RunList.java:550)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunList.runSuites(RunList.java:306)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunList.&amp;lt;init&amp;gt;(RunList.java:160)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunSuite.getSuitesList(RunSuite.java:186)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.RunSuite.main(RunSuite.java:146)&lt;/p&gt;

&lt;p&gt;I think this is happening after the change to install a SecurityManager when useprocess=false is specified. This property is specified in the properties file for nist suite. Before this change, security manager was not used when running tests in J2ME.&lt;/p&gt;

&lt;p&gt;Since this exception causes the test harness to exit, derbyall cannot be completed in this environment.&lt;/p&gt;</description>
                <environment>IBM WCTME 5.7 j9 foundation VM</environment>
        <key id="12328196">DERBY-885</key>
            <summary>Test harness aborts with exception when running nist test suite in J2ME</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jan 2006 04:53:20 +0000</created>
                <updated>Wed, 1 Jul 2009 01:13:00 +0100</updated>
                            <resolved>Wed, 15 Feb 2006 05:21:57 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12364271" author="djd" created="Sat, 28 Jan 2006 07:32:05 +0000"  >&lt;p&gt;Disabled running with the security manager for useProcess=false&lt;br/&gt;
for j9 vms. Causes some unexpected execption that needs to be investigated&lt;br/&gt;
and halts test runs. This is a workaround that will cause dml160 to fail&lt;br/&gt;
with j9 vms, as it checks to see a security manager is installed.&lt;br/&gt;
Will be investigating, but this will allow derbyall runs to complete.&lt;/p&gt;</comment>
                            <comment id="12364282" author="djd" created="Sat, 28 Jan 2006 09:16:04 +0000"  >&lt;p&gt;The issue is that when a SecurityManager is installed with the J9 virutal machine it  does not pick up grants of permissions from the file defined by the system property java.security.policy unless that property is set on the command line, whereas other jvm&apos;s do.&lt;/p&gt;

&lt;p&gt;This fails with a security exception&lt;/p&gt;

&lt;p&gt;j9 -Dabcd.efgh=hello x&lt;/p&gt;

&lt;p&gt;but this one completes ok&lt;/p&gt;

&lt;p&gt;j9 -Djava.security.policy=my.policy -Dabcd.efgh=hello x&lt;/p&gt;

&lt;p&gt;Now, I have to admit I haven&apos;t been able to find a good defintion of the relationship of the system property java.security.policy to the SecurityManager class, or any description what is the exact defined behaviour for:&lt;/p&gt;

&lt;p&gt;System.setSecurityManager(new SecurityManager());&lt;/p&gt;

&lt;p&gt;There seems to be no good documentation (that I can find) saying exactly where this security manager will pick its permissions from.&lt;/p&gt;

&lt;p&gt;x.java&lt;br/&gt;
=====&lt;br/&gt;
public class x&lt;br/&gt;
{&lt;br/&gt;
  public static void main(String[] args)&lt;/p&gt;
  {
      System.setProperty(&quot;java.security.policy&quot;, &quot;my.policy&quot;);
      System.out.println(&quot;abcd.efgh=&quot; + System.getProperty(&quot;abcd.efgh&quot;));
      System.setSecurityManager(new SecurityManager());
      System.out.println(&quot;installed security manager&quot;);
      System.out.println(&quot;abcd.efgh=&quot; + System.getProperty(&quot;abcd.efgh&quot;));
     

  }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;my.policy&lt;br/&gt;
=======&lt;br/&gt;
grant &lt;/p&gt;
{
    permission java.util.PropertyPermission &quot;abcd.*&quot;, &quot;read&quot;;
}
&lt;p&gt;;&lt;/p&gt;</comment>
                            <comment id="12364759" author="mikem" created="Wed, 1 Feb 2006 10:26:07 +0000"  >&lt;p&gt;This test also failed under  wssd5.6 on 1/27, it passed on 1/13 - I have no other data points:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: dml160 jdk1.3.1 subset - 2.1 derbyall:nist 2006-01-29 21:19:48 ***&lt;br/&gt;
290 del&lt;br/&gt;
&amp;lt; 1          &lt;br/&gt;
290a290&lt;br/&gt;
&amp;gt; 0          &lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   dml160 jdk1.3.1 subset - 2.1 derbyall:nist 2006-01-29 21:19:49 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12364973" author="djd" created="Fri, 3 Feb 2006 03:12:36 +0000"  >&lt;p&gt;I&apos;ve reported the bug to the IBM JVM team for the WCTME virtual machines, it will be fixed in a future release.&lt;/p&gt;

&lt;p&gt;Best way forward would be to have a specific canon for dml160 for the j9 vms.&lt;/p&gt;</comment>
                            <comment id="12365157" author="deepa" created="Sat, 4 Feb 2006 09:44:45 +0000"  >&lt;p&gt;Ataching a patch &apos;derby-885.diff&apos; which adds new j9 masters for nist/dml160.sql test. With this patch, I ran nist suite with j9 vms and Sun JDK 1.4.2.  Please review/commit this patch. Thanks&lt;/p&gt;</comment>
                            <comment id="12365488" author="mikem" created="Wed, 8 Feb 2006 06:26:17 +0000"  >&lt;p&gt;I committed the attached patch as :&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\master\j9_13\d&lt;br/&gt;
ml160.out&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\master\j9_22\d&lt;br/&gt;
ml160.out&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\master\j9_foun&lt;br/&gt;
dation\dml160.out&lt;br/&gt;
Transmitting file data ...&lt;br/&gt;
Committed revision 375717.&lt;/p&gt;</comment>
                            <comment id="12366379" author="deepa" created="Wed, 15 Feb 2006 05:21:57 +0000"  >&lt;p&gt;Patches committed as svn revisions 373011 and 375717&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12322638" name="derby-885.diff" size="38513" author="deepa" created="Sat, 4 Feb 2006 09:44:45 +0000"/>
                            <attachment id="12322639" name="derby-885.status" size="257" author="deepa" created="Sat, 4 Feb 2006 09:44:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Jan 2006 07:32:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22187</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>