<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:31:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2760/DERBY-2760.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2760] Clean-up issues for UTF8Util.java</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2760</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2646&quot; title=&quot;Cleanup of Clob control/support structures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2646&quot;&gt;&lt;del&gt;DERBY-2646&lt;/del&gt;&lt;/a&gt;, some improvements to org.apache.derby.iapi.util.UTF8Util were suggested:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove unused private method isDerbyEOFMarker(), or possibly rewrite it to fit into skipInternal()&lt;/li&gt;
	&lt;li&gt;skipInternal() should return an instance of a private inner class instead of an array&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12370911">DERBY-2760</key>
            <summary>Clean-up issues for UTF8Util.java</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jun 2007 12:44:07 +0100</created>
                <updated>Wed, 30 Jan 2008 15:35:06 +0000</updated>
                            <resolved>Wed, 30 Jan 2008 15:31:40 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12501538" author="kristwaa" created="Tue, 5 Jun 2007 13:12:55 +0100"  >&lt;p&gt;&apos;derby-2760-1a-remove_unused_method.diff&apos; removes the unused method &apos;isDerbyEOFMarker&apos;.&lt;br/&gt;
It didn&apos;t contain anything important, so I decided to just remove it at once.&lt;br/&gt;
However, it should still be considered if a new method should be written to make skipInternal cleaner.&lt;/p&gt;

&lt;p&gt;Committed &apos;derby-2760-1a-remove_unused_method.diff&apos; to trunk with revision 544463.&lt;/p&gt;</comment>
                            <comment id="12541742" author="kristwaa" created="Mon, 12 Nov 2007 11:18:50 +0000"  >&lt;p&gt;&apos;derby-2760-2a-inner_class.diff&apos; changes UTF8Util to use an inner class and also adds a test to verify the basic behavior of the skip-methods.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12541751" author="kristwaa" created="Mon, 12 Nov 2007 11:45:52 +0000"  >&lt;p&gt;Forgot to mention that I ran derbyall and suites.All. I only saw lang/triggerGeneral.sql fail, which I believe is unrelated (&quot;com.ibm.db2.jcc.c.SqlException: Failure in loading T2 native library db2jcct2&quot;).&lt;/p&gt;</comment>
                            <comment id="12542286" author="dagw" created="Wed, 14 Nov 2007 00:03:08 +0000"  >&lt;p&gt;Patch looks good and ran cleanly.&lt;br/&gt;
Some comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Test had some magic numbers that could be explained:&lt;br/&gt;
is there some threshold or not to test &quot;large&quot; here?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;some missing javadoc for public methods.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The skipping of 2 characters from the ReaderToUTF8Stream were not obvious;&lt;br/&gt;
the format in that module could have been better documented, but not part of this patch, I know.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;A typo in indentifier name: testSkipFullyOnInalidStreamCJK&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I did not check coverage more than superficially here since I am not familiar with the module under test.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12552743" author="kristwaa" created="Tue, 18 Dec 2007 12:58:13 +0000"  >&lt;p&gt;&apos;derby-2760-2b-inner_class.diff&apos; addresses the comments from Dag, and deprecates revision 2a:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I added a comment (in the class JavaDoc) explaining that the &quot;large&quot; streams are just large enough to pass buffer boundaries.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I did not add JavaDoc on all public methods, as the names are pretty explanatory. Comments can be added in another patch if wanted.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I commented the &quot;encoded length bytes&quot; in the class JavaDoc a bit better.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fixed typo.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Test coverage is pretty good, but all error situations for the decoding routine are not exercised. I hope to add this in a later patch. This requires some &quot;hand coded&quot; invalid UTF-8 sequences.&lt;br/&gt;
In addition I added a sanity test and fixed the incorrect package name in the license header.&lt;/p&gt;


&lt;p&gt;thanks,&lt;/p&gt;</comment>
                            <comment id="12553350" author="kristwaa" created="Wed, 19 Dec 2007 13:11:28 +0000"  >&lt;p&gt;Committed &apos;derby-2760-2b-inner_class.diff&apos; to trunk with revision 605531.&lt;br/&gt;
suites.All and derbyall ran successfully.&lt;/p&gt;

&lt;p&gt;Clearing patch available flag, but keeping issue open for a little while longer in hope to get in the last tests (see earlier comment).&lt;/p&gt;</comment>
                            <comment id="12563111" author="kristwaa" created="Mon, 28 Jan 2008 10:25:23 +0000"  >&lt;p&gt;&apos;derby-2760-3a-extra_tests.diff&apos; adds a few more tests for UTF8Util.&lt;/p&gt;

&lt;p&gt;Of special interest is that using UTF8Util to skip characters from an invalid byte sequence with UTF-8 encoding will/might succeed, depending on the encoding error and the character boundaries. See the test &apos;testSkippingInvalidEncodingWorks&apos; for an example.&lt;/p&gt;

&lt;p&gt;I do not know if this will ever be a problem, because I assume the data has been verified at an earlier stage. If this is not the case, several problems can arise, such as incorrect positioning and a false positive for incorrect encoding (if you end up inside a correctly encoded multi byte character after skipping).&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12564046" author="kristwaa" created="Wed, 30 Jan 2008 15:25:21 +0000"  >&lt;p&gt;Committed &apos;derby-2760-3a-extra_tests.diff&apos; to trunk with revision 616786.&lt;/p&gt;</comment>
                            <comment id="12564050" author="kristwaa" created="Wed, 30 Jan 2008 15:31:40 +0000"  >&lt;p&gt;I committed some trivial changes to trunk with revision 616788 (added 4 lines of comments).&lt;br/&gt;
This concludes my work on this issue, and I believe it can be closed.&lt;/p&gt;</comment>
                            <comment id="12564053" author="knutanders" created="Wed, 30 Jan 2008 15:35:06 +0000"  >&lt;p&gt;Thanks for fixing these issues, Kristian.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12369355">DERBY-2646</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12358957" name="derby-2760-1a-remove_unused_method.diff" size="613" author="kristwaa" created="Tue, 5 Jun 2007 13:12:54 +0100"/>
                            <attachment id="12369363" name="derby-2760-2a-inner_class.diff" size="12473" author="kristwaa" created="Mon, 12 Nov 2007 11:18:50 +0000"/>
                            <attachment id="12371858" name="derby-2760-2b-inner_class.diff" size="13633" author="kristwaa" created="Tue, 18 Dec 2007 12:58:13 +0000"/>
                            <attachment id="12374174" name="derby-2760-3a-extra_tests.diff" size="4658" author="kristwaa" created="Mon, 28 Jan 2008 10:25:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Jun 2007 12:12:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>