<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-648/DERBY-648.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-648] ij &apos;show connections&apos; statement does not work in JSR169</title>
                <link>https://issues.apache.org/jira/browse/DERBY-648</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;&apos;show connections&apos; statement throws the following exception when run in CDC/FP with JSR169: &quot;JAVA ERROR: java.lang.NoSuchMethodError: java/sql/DatabaseMetaData.getURL()Ljava/lang/String;&quot;&lt;/p&gt;

&lt;p&gt;This is because java/sql/DatabaseMetaData.getURL() method is not available in JSR169. In JSR169, DataSource has to be used to get a connection and this does not use a URL. So this method is not available.&lt;/p&gt;

&lt;p&gt;Currently, &apos;show connections&apos; displays connection names along with the URLs used to get the connections. When DataSource is used to get connection (ij.dataSource property is set), I plan to change this to display only connection names. With this change, around 7 tests can be enabled to run in CDC/FP.&lt;/p&gt;
</description>
                <environment>J2ME/CDC/Foundation Profile with JSR169</environment>
        <key id="12325029">DERBY-648</key>
            <summary>ij &apos;show connections&apos; statement does not work in JSR169</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2005 09:51:46 +0100</created>
                <updated>Wed, 9 Nov 2005 06:36:55 +0000</updated>
                            <resolved>Wed, 9 Nov 2005 06:36:21 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12356024" author="deepa" created="Thu, 27 Oct 2005 08:55:21 +0100"  >&lt;p&gt;Attaching a patch &apos;derby-648.diff&apos; for this. The patch does the following:&lt;/p&gt;

&lt;p&gt;1. Checks if ij.dataSource property is set in &apos;showConnectionsMethod&apos; in ij. If it is set, URLs are not displayed. Only connection names are displayed. When DataSource is used to get a connection, there will not be an associated URL.&lt;br/&gt;
2. Enables 2 tests in J2ME which pass with this change. Creates new master files for these tests.&lt;/p&gt;

&lt;p&gt;Ran derbyall on Windows XP with Sun JDK 1.4.2 and IBM WCTME5.7 j9_foundation VM. No new failures.&lt;/p&gt;

&lt;p&gt;&quot;Show Connections&quot; command is documented in Derby Tools and Utilities Guide. However, ij.dataSource property is not yet documented. &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-391&quot; title=&quot;Tools and Utilities guide does not document ij.datasource, ij.user, nor ij.password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-391&quot;&gt;&lt;del&gt;DERBY-391&lt;/del&gt;&lt;/a&gt; is open for this. I will add doc information for this change to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-391&quot; title=&quot;Tools and Utilities guide does not document ij.datasource, ij.user, nor ij.password&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-391&quot;&gt;&lt;del&gt;DERBY-391&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12356031" author="kmarsden" created="Thu, 27 Oct 2005 09:57:05 +0100"  >&lt;p&gt;This change looks good except that there seems to be a formatting issue with the new code in the ij.jj file.  Could you fix that up and I&apos;ll commit.&lt;br/&gt;
                      row.append(&apos;*&apos;);&lt;br/&gt;
                      haveCurrent=true;&lt;br/&gt;
                   }&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;row.append(&quot; -       &quot;);&lt;/li&gt;
	&lt;li&gt;row.append(s.getConnection().getMetaData().getURL());&lt;br/&gt;
+&lt;br/&gt;
+                         //If ij.dataSource property is set, show only connection names.&lt;br/&gt;
+                         //In this case, URL is not used to get connection, so do not append URL&lt;br/&gt;
+                         String dsName = util.getSystemProperty(&quot;ij.dataSource&quot;);&lt;br/&gt;
+                                 if(dsName == null)
{
+                         row.append(&quot; -        &quot;);
+                     row.append(s.getConnection().getMetaData().getURL());
+                 }
&lt;p&gt;                   // save the warnings from these connections&lt;br/&gt;
                   w = appendWarnings(w,s.getConnection().getWarnings());&lt;br/&gt;
                   s.getConnection().clearWarnings();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12356033" author="deepa" created="Thu, 27 Oct 2005 10:38:35 +0100"  >&lt;p&gt;Thanks Kathey for looking into this. I am attaching &apos;derby-648-v2.diff&apos; after formatting showConnections method in ij.jj.&lt;/p&gt;</comment>
                            <comment id="12356638" author="kmarsden" created="Thu, 3 Nov 2005 03:13:03 +0000"  >&lt;p&gt;Deepa, I am sorry I didn&apos;t get this in before the eol changes and now there are conflicts.  Can I bother you for one more patch?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12357083" author="deepa" created="Wed, 9 Nov 2005 06:36:21 +0000"  >&lt;p&gt;Verified by running tests jdbcapi/users2.sql and jdbcapi/secureUsers.sql.  Fixed by svn revisions 330547 and 331885.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12320341" name="derby-648-v2.diff" size="26916" author="deepa" created="Thu, 27 Oct 2005 10:38:35 +0100"/>
                            <attachment id="12320339" name="derby-648.status" size="438" author="deepa" created="Thu, 27 Oct 2005 08:55:21 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Oct 2005 08:57:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy17kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>