<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:39:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4841/DERBY-4841.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4841] Improve projecthelp for the top level Derby build script</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4841</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Ant scripts are supposed to be self-describing. The following command is supposed to describe the public targets in the current directory:&lt;/p&gt;

&lt;p&gt;    ant -projecthelp&lt;/p&gt;

&lt;p&gt;Here is the output of this command for the top level build script today:&lt;/p&gt;

&lt;p&gt;Main targets:&lt;/p&gt;

&lt;p&gt; checkCompilerLevel     Make sure compiler level is Java 5 level or higher.&lt;br/&gt;
 class_size_catalog     create the class size catalog &amp;#8211; a java file&lt;br/&gt;
 createBranch           Create a new branch (both docs and code)&lt;br/&gt;
 parsers                Build the parsers&lt;br/&gt;
 release                Build the release distributions&lt;br/&gt;
 setCompilerProperties  Set the ant variables which identify the compiler classpaths. Remove the autosetProps logic when this target becomes mandatory.&lt;br/&gt;
 setInitialProperties   Set the initial properties for this build script. This duplicates the property setting block in setCompilerProperties. Once we make setCompilerProperties mandatory, this target should be removed.&lt;br/&gt;
 state                  Build SanityState.java&lt;br/&gt;
Default target: buildsource&lt;/p&gt;

&lt;p&gt;That does not seem like the list of public targets to me. This JIRA can be used as a place to anchor work which we do on improving the user documentation for our top level build script.&lt;/p&gt;

&lt;p&gt;I propose to make some changes to build.xml. Others are welcome to pile on. Here&apos;s how it works:&lt;/p&gt;

&lt;p&gt;1) The public targets are the ones which have &quot;description&quot; attributes.&lt;/p&gt;

&lt;p&gt;2) So to make a target public, fill in a &quot;description&quot; attribute for it.&lt;/p&gt;

&lt;p&gt;3) And to hide a target, move its &quot;description&quot; text into an introductory comment bracketed by &quot;&amp;lt;!-&lt;del&gt;&quot; and &quot;&lt;/del&gt;-&amp;gt;&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477150">DERBY-4841</key>
            <summary>Improve projecthelp for the top level Derby build script</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Oct 2010 16:32:41 +0100</created>
                <updated>Fri, 15 Mar 2013 13:50:36 +0000</updated>
                            <resolved>Fri, 15 Mar 2013 13:50:31 +0000</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Build tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12920246" author="rhillegas" created="Tue, 12 Oct 2010 17:17:26 +0100"  >&lt;p&gt;Attaching derby-4841-01-aa-ricksPicks.diff. This adjusts the public api exposed by &quot;ant -projecthelp&quot; for our top level build script. The new public api is simply my guess about what makes sense. Committed at subversion revision 1021827.&lt;/p&gt;

&lt;p&gt;After applying this patch, the output of &quot;ant -projecthelp&quot; is:&lt;/p&gt;

&lt;p&gt;Main targets:&lt;/p&gt;

&lt;p&gt; all           Compile all of the source, including tests as well as production code.&lt;br/&gt;
 buildjars     Build all of the Derby jar files.&lt;br/&gt;
 buildsource   Compile the product source (does not build the tests).&lt;br/&gt;
 clobber       Remove all build artifacts.&lt;br/&gt;
 createBranch  Create a new branch (both docs and code).&lt;br/&gt;
 javadoc       Build all of the javadoc, including the public api, the production javadoc, and the testing javadoc.&lt;br/&gt;
 junit-all     Run the JUnit tests.&lt;br/&gt;
 junit-clean   Remove the output produced by the JUnit tests.&lt;br/&gt;
 release       Build the release distributions.&lt;br/&gt;
Default target: buildsource&lt;/p&gt;


&lt;p&gt;Feel free to expose more targets if you think they are worth declaring in this top level project description.&lt;/p&gt;


&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M      build.xml&lt;/p&gt;</comment>
                            <comment id="12920382" author="dagw" created="Tue, 12 Oct 2010 23:29:25 +0100"  >&lt;p&gt;Seems about right to me. &lt;br/&gt;
In the past, I seem to remember there was some issue with running all three &quot;clobber all buildjars&quot; in one ant invocation. Is that safe to do now? &quot;all&quot; is also buggy, in that it doesn&apos;t always detect modified sources. Should such caveats be mentioned in this help, or is it sufficient to mention it in BUILDING.html?&lt;/p&gt;</comment>
                            <comment id="12920509" author="knutanders" created="Wed, 13 Oct 2010 13:10:23 +0100"  >&lt;p&gt;&amp;gt; In the past, I seem to remember there was some issue with running&lt;br/&gt;
&amp;gt; all three &quot;clobber all buildjars&quot; in one ant invocation. Is that&lt;br/&gt;
&amp;gt; safe to do now?&lt;/p&gt;

&lt;p&gt;I&apos;m not sure which issue you&apos;re referring to, but I have noticed that&lt;/p&gt;

&lt;p&gt;  ant insane&lt;br/&gt;
  ant clobber all buildjars&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;  ant insane&lt;br/&gt;
  ant clobber&lt;br/&gt;
  ant all buildjars&lt;/p&gt;

&lt;p&gt;behave differently. The first sequence of commands will result in a&lt;br/&gt;
non-debug build, whereas the second sequence of commands will result&lt;br/&gt;
in a debug build, even though they both invoke insane, clobber, all&lt;br/&gt;
and buildjars in the same order.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if it&apos;s a bug or intended behaviour, but if this is the&lt;br/&gt;
issue you&apos;re referring to, it is still present on trunk.&lt;/p&gt;

&lt;p&gt;&amp;gt; &quot;all&quot; is also buggy, in that it doesn&apos;t always detect modified&lt;br/&gt;
&amp;gt; sources. Should such caveats be mentioned in this help, or is it&lt;br/&gt;
&amp;gt; sufficient to mention it in BUILDING.html?&lt;/p&gt;

&lt;p&gt;If there are problems with the dependency tracking in &quot;all&quot;, it would&lt;br/&gt;
be good to have those tracked in a JIRA issue. Incremental builds are&lt;br/&gt;
still significantly faster than full builds, so I think it&apos;s important&lt;br/&gt;
to have that working reliably.&lt;/p&gt;</comment>
                            <comment id="12920552" author="rhillegas" created="Wed, 13 Oct 2010 14:47:52 +0100"  >&lt;p&gt;Thanks for the additional analysis, Dag and Knut. Although ant lets you put multiple targets on the command line, the resulting behavior is not clear to me. For instance, ant handles property overrides in a very idiosyncratic way and off the top of my head I don&apos;t know how property overriding behaves when you put multiple targets on the command line. This is all I could find in the ant documentation (from the &quot;Command Line&quot; section of the ant manual):&lt;/p&gt;

&lt;p&gt;&quot;It is also possible to specify one or more targets that should be executed. When omitted, the target that is specified in the default attribute of the project tag is used.&quot;&lt;/p&gt;

&lt;p&gt;From what you are saying, it seems that&lt;/p&gt;

&lt;p&gt;ant foo bar&lt;/p&gt;

&lt;p&gt;is not in general equivalent to&lt;/p&gt;

&lt;p&gt;ant foo&lt;br/&gt;
ant bar&lt;/p&gt;

&lt;p&gt;Perhaps our documentation will be less brittle (and more accurate) if we always phrase it in terms of separate commands rather than composite ones. That, at least, is the approach taken in BUILDING.html.&lt;/p&gt;

&lt;p&gt;I have logged a new issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4845&quot; title=&quot;Improve the dependency tracking for our build targets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4845&quot;&gt;DERBY-4845&lt;/a&gt;) to track the broken dependencies in our build scripts.&lt;/p&gt;</comment>
                            <comment id="13603379" author="rhillegas" created="Fri, 15 Mar 2013 13:50:31 +0000"  >&lt;p&gt;I think that the work on this issue is done.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12477235">DERBY-4845</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12456979" name="derby-4841-01-aa-ricksPicks.diff" size="9018" author="rhillegas" created="Tue, 12 Oct 2010 17:17:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Oct 2010 22:29:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ogn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>