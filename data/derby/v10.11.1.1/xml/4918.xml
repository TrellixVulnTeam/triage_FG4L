<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:45:47 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4918/DERBY-4918.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4918] Minor refactoring of SPSDescriptor</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4918</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The class SPSDescriptor is kind of hard to understand, and doesn&apos;t quite follow the pattern used by other tuple descriptors. Parts of the code don&apos;t agree with the documentation (i.e. SPS_TYPE_TRIGGER marked as not implemented)&lt;br/&gt;
This issue tracks work to make the class easier to understand and to modify.&lt;br/&gt;
The critical part that may need to be changed is the use of synchronized (this). The problem is that database locks are obtained within the critical regions, and in some special cases this causes deadlocks. I&apos;m not yet certain this can be fixed at this level (only), but I&apos;ll continue investigation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480900">DERBY-4918</key>
            <summary>Minor refactoring of SPSDescriptor</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Nov 2010 10:49:14 +0000</created>
                <updated>Tue, 19 Apr 2011 13:38:56 +0100</updated>
                            <resolved>Fri, 25 Feb 2011 21:13:01 +0000</resolved>
                                    <version>10.8.1.2</version>
                                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12935749" author="kristwaa" created="Thu, 25 Nov 2010 13:08:38 +0000"  >&lt;p&gt;Attaching patch 1a.&lt;/p&gt;

&lt;p&gt;Regression tests passed. Ready for review.&lt;/p&gt;</comment>
                            <comment id="12965883" author="kristwaa" created="Wed, 1 Dec 2010 22:26:01 +0000"  >&lt;p&gt;Committed patch 1a to trunk with revision 1041192.&lt;/p&gt;</comment>
                            <comment id="12966502" author="kristwaa" created="Fri, 3 Dec 2010 12:04:46 +0000"  >&lt;p&gt;Attaching patch 2a, which removes the method setUUID.&lt;/p&gt;

&lt;p&gt;I made the getUUID-method synchronized as part of patch 1a. Turns out this caused a Java deadlock in one test when running with the automatic index statistics update feature.&lt;br/&gt;
Investigation revealed that this method can actually be removed, which makes the uuid variable final. This allows for keeping getUUID unsynchronized.&lt;br/&gt;
I did add code to fail if null is passed in as null in the constructor, where a NullPointerException will be thrown.&lt;/p&gt;

&lt;p&gt;suites.All passed, will run derbyall too.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12966513" author="knutanders" created="Fri, 3 Dec 2010 12:45:05 +0000"  >&lt;p&gt;Patch 2a looks like a nice cleanup. +1&lt;/p&gt;

&lt;p&gt;One small nit is that some people (for instance these guys: &lt;a href=&quot;http://pmd.sourceforge.net/rules/strictexception.html#AvoidThrowingNullPointerException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pmd.sourceforge.net/rules/strictexception.html#AvoidThrowingNullPointerException&lt;/a&gt; ) claim that throwing a NullPointerException is confusing and recommend using IllegalArgumentException instead. Not that it&apos;s supposed to ever happen...&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;comment edited: added a space so that JIRA doesn&amp;#39;t garble the URL&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="12966724" author="kristwaa" created="Fri, 3 Dec 2010 23:16:02 +0000"  >&lt;p&gt;Thanks, Knut.&lt;/p&gt;

&lt;p&gt;Attached patch 2b, which replaces the NPE with an IAE.&lt;br/&gt;
Committed to trunk with revision 1042048.&lt;/p&gt;</comment>
                            <comment id="12969389" author="kristwaa" created="Wed, 8 Dec 2010 17:42:30 +0000"  >&lt;p&gt;The deadlock I saw was actually a problem with BasicDependencyManager, not SPSDescriptor (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4928&quot; title=&quot;Deadlock-prone synchronization in BasicDependencyManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4928&quot;&gt;&lt;del&gt;DERBY-4928&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
This may mean that there is nothing more to do for this issue, I&apos;ll keep the issue open for a while to see if anything more pops up.&lt;/p&gt;</comment>
                            <comment id="12999574" author="kristwaa" created="Fri, 25 Feb 2011 21:13:01 +0000"  >&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12471534">DERBY-4771</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12460446" name="derby-4918-1a-misc.diff" size="10659" author="kristwaa" created="Thu, 25 Nov 2010 13:08:58 +0000"/>
                            <attachment id="12460445" name="derby-4918-1a-misc.stat" size="307" author="kristwaa" created="Thu, 25 Nov 2010 13:08:38 +0000"/>
                            <attachment id="12465227" name="derby-4918-2a-remove_setUUID.diff" size="2094" author="kristwaa" created="Fri, 3 Dec 2010 12:04:46 +0000"/>
                            <attachment id="12465286" name="derby-4918-2b-remove_setUUID.diff" size="2118" author="kristwaa" created="Fri, 3 Dec 2010 23:16:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Dec 2010 12:45:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0grz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>