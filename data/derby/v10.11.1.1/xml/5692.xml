<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5692/DERBY-5692.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5692] intermittent test failure in storetests/st_derby715.java</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5692</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I am seeing an irregularly occurring failure with ibm 1.4.2 on one machine - which happens to be the only 4 CPU machine and the only one running Windows 2008...And I&apos;ve got 10.8 nightly tests running on it.&lt;/p&gt;

&lt;p&gt;I have not seen this with other jvms on the same machine.&lt;br/&gt;
It&apos;s possible this would also happen on trunk, but we stopped supporting 1.4.2 with trunk and so I do not run tests against trunk with (ibm) 1.4.2.&lt;/p&gt;

&lt;p&gt;When the test passes, the output contains 5 identical lines &apos;Got a Deadlock&apos;.&lt;br/&gt;
The test failures are of 2 kinds:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1 (or more?) of the &apos;Got a Deadlock&apos; lines is missing&lt;/li&gt;
	&lt;li&gt;we get a &apos;40XL1&apos; error (timeout) instead of a deadlock.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As the second situation seems to match what &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-715&quot; title=&quot;lock deadlocks sometimes reported as lock timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-715&quot;&gt;&lt;del&gt;DERBY-715&lt;/del&gt;&lt;/a&gt; was about, I thought it worthwhile reporting as a separate JIRA. We should check it&apos;s not somehow a regression.&lt;/p&gt;</description>
                <environment>Windows 2008, 4 CPU, ibm 1.4.2.</environment>
        <key id="12551276">DERBY-5692</key>
            <summary>intermittent test failure in storetests/st_derby715.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Apr 2012 19:16:58 +0100</created>
                <updated>Wed, 22 Oct 2014 20:17:48 +0100</updated>
                            <resolved>Thu, 19 Apr 2012 19:50:05 +0100</resolved>
                                    <version>10.8.3.0</version>
                                    <fixVersion>10.8.3.0</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13255835" author="mikem" created="Tue, 17 Apr 2012 20:01:59 +0100"  >&lt;p&gt;Is it likely the machine is heavily loaded with other stuff running while the derbyall for 1.4.2 is running?  I think that timeout&lt;br/&gt;
could be returned in this case.  I would suggest changing the defaults for that test to make deadlock checking something like&lt;br/&gt;
1 second and timeout testing something like 1 minute, to make sure machine load does not adversely affect results.  &lt;/p&gt;

&lt;p&gt;Can you run that test 100 times alone on the machine and see any failures?&lt;/p&gt;</comment>
                            <comment id="13256135" author="myrna" created="Wed, 18 Apr 2012 02:48:05 +0100"  >&lt;p&gt;Thanks for your input, Mike,&lt;/p&gt;

&lt;p&gt;Yes, the machine is &lt;b&gt;very&lt;/b&gt; busy while running the derbyall for 1.4.2, although likely not more heavily than while running derbyall for the other jvms...&lt;br/&gt;
I forgot that this test needs to be run as part of the storetests suite, so only managed to run it 25 times by now, but if timeout is to be expected &lt;b&gt;only&lt;/b&gt; during heavy load, then I don&apos;t think running 100 times will pop it either.&lt;/p&gt;

&lt;p&gt;The default for the storetests (as per ...tests/storetests/default_derby.properties) is currently:&lt;br/&gt;
     derby.locks.deadlockTimeout=1&lt;br/&gt;
     derby.locks.waitTimeout=3&lt;/p&gt;

&lt;p&gt;I was contemplating disabling the run of this test for ibm 1.4.2 (by adding an st_derby715_app.properties file with content: runwithibm14=false).&lt;/p&gt;

&lt;p&gt;But if this is expected behavior on a busy machine, I can instead add a st_derby715_derby.properties that sets:&lt;br/&gt;
     derby.locks.deadlockTimeout=1&lt;br/&gt;
     derby.locks.waitTimeout=60&lt;br/&gt;
Is that what you meant?&lt;/p&gt;
</comment>
                            <comment id="13256630" author="mikem" created="Wed, 18 Apr 2012 16:08:39 +0100"  >&lt;p&gt;without a reliable repro hard to say what is going on, which is why I suggested running just that test/suite to see if it pops&lt;br/&gt;
easily in that environment.   I am just guessing at why it happens on that platform and not others.  I think the way the locking&lt;br/&gt;
code works we don&apos;t really know why we have woken up when we sleep waiting for a lock.   If we have not gotten the lock then&lt;br/&gt;
we check how long we have waited and if it is under timeout we do the dealock check.&lt;/p&gt;

&lt;p&gt;Yes I am suggesting the kind of change you have, but would see how much longer if at all the storetests suite takes with&lt;br/&gt;
it.  I don&apos;t know how many expected lock timeouts, if any the suite has.&lt;/p&gt;</comment>
                            <comment id="13257440" author="knutanders" created="Thu, 19 Apr 2012 12:53:07 +0100"  >&lt;p&gt;Don&apos;t know if that&apos;s why the test behaves differently, but Derby uses a different implementation of the lock manager on 1.4.2 (since java.util.concurrent.* is only available on 1.5 and later).&lt;/p&gt;</comment>
                            <comment id="13257684" author="myrna" created="Thu, 19 Apr 2012 19:50:05 +0100"  >&lt;p&gt;Thanks Knut for that theory/explanation.&lt;br/&gt;
I followed Mike&apos;s suggestion and ran storetests with, and without the additional st_derby715_derby.properties file, and did not see any change in performance on my machine; the entire suite took between 1 and 2 minutes, and the st_derby715 test took 11 or 12 minutes, either way. I ran each with both ibm 142 and 1.6, each with and without the new properties file, and each combination 3 times.&lt;br/&gt;
(In passing, I noted that the suite seemed to take about 10 seconds longer with ibm 142 than with 1.6).&lt;/p&gt;

&lt;p&gt;I committed the change with revision 1328061 on trunk, and backported to 10.8 with revision 1328075.&lt;/p&gt;

&lt;p&gt;I&apos;m resolving this issue; but because without a repro this is a bit of a guess, it can be reopened if the test fails again.&lt;/p&gt;</comment>
                            <comment id="13433639" author="mamtas" created="Mon, 13 Aug 2012 23:12:34 +0100"  >&lt;p&gt;Saw following failure on trunk run on Windows/VMWare using ibm jdk1.6&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: st_derby715 jdk1.6.0 storeall:storetests 2012-08-13 01:36:24 ***&lt;br/&gt;
3 del&lt;br/&gt;
&amp;lt; Got a Deadlock.&lt;br/&gt;
&amp;lt; Got a Deadlock.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_derby715 jdk1.6.0 storeall:storetests 2012-08-13 01:37:24 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13766743" author="mamtas" created="Fri, 13 Sep 2013 19:12:48 +0100"  >&lt;p&gt;The test failed again. This time on 10.10.1.3 - (1522131)IBM jdk 1.6 on Windows machine. &lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm16/1522131-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm16/1522131-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: st_derby715 jdk1.6.0 storeall:storetests 2013-09-11 20:55:59 ***&lt;br/&gt;
4 del&lt;br/&gt;
&amp;lt; Got a Deadlock.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_derby715 jdk1.6.0 storeall:storetests 2013-09-11 20:56:14 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13767985" author="mamtas" created="Mon, 16 Sep 2013 02:22:49 +0100"  >&lt;p&gt;Failed on 10.10.1.3 this time with weme6.2&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/weme6.2/1523178-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/weme6.2/1523178-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13876894" author="myrna" created="Mon, 20 Jan 2014 22:00:13 +0000"  >&lt;p&gt;failed 1/17/2014 on windows 2208, with 10.8.3.3 (1559308) with ibm1.6:&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_8/windows/testlog/ibm16/1559308-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_8/windows/testlog/ibm16/1559308-derbyall_diff.txt&lt;/a&gt;&lt;br/&gt;
diff:&lt;br/&gt;
4 del&lt;br/&gt;
&amp;lt; Got a Deadlock.&lt;/p&gt;</comment>
                            <comment id="13885636" author="jira-bot" created="Wed, 29 Jan 2014 18:38:21 +0000"  >&lt;p&gt;Commit 1562542 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.9&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1562542&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1562542&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3624&quot; title=&quot;testfailure in storetests/st_derby715 with ibm 1.5 on iseries machine; one deadlock message missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3624&quot;&gt;&lt;del&gt;DERBY-3624&lt;/del&gt;&lt;/a&gt;; testfailure in storetests/st_derby715 with ibm 1.5 on iseries machine; one deadlock message missing&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5692&quot; title=&quot;intermittent test failure in storetests/st_derby715.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5692&quot;&gt;&lt;del&gt;DERBY-5692&lt;/del&gt;&lt;/a&gt;; intermittent test failure in storetests/st_derby715.java&lt;br/&gt;
   merge of revision 1530796 from 10.10 branch&lt;/p&gt;</comment>
                            <comment id="13885642" author="jira-bot" created="Wed, 29 Jan 2014 18:44:48 +0000"  >&lt;p&gt;Commit 1562544 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1562544&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1562544&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3624&quot; title=&quot;testfailure in storetests/st_derby715 with ibm 1.5 on iseries machine; one deadlock message missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3624&quot;&gt;&lt;del&gt;DERBY-3624&lt;/del&gt;&lt;/a&gt;; testfailure in storetests/st_derby715 with ibm 1.5 on iseries machine; one deadlock message missing&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5692&quot; title=&quot;intermittent test failure in storetests/st_derby715.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5692&quot;&gt;&lt;del&gt;DERBY-5692&lt;/del&gt;&lt;/a&gt;; intermittent test failure in storetests/st_derby715.java&lt;br/&gt;
   merge of revision 1530796 from 10.10 branch&lt;/p&gt;</comment>
                            <comment id="13916158" author="myrna" created="Fri, 28 Feb 2014 18:40:36 +0000"  >&lt;p&gt;Looks like there is still some instability in this test?&lt;br/&gt;
It failed here, with jdk 1.8: &lt;a href=&quot;http://download.java.net/javadesktop/derby/request_5588265/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.java.net/javadesktop/derby/request_5588265/&lt;/a&gt;&lt;br/&gt;
Date:             2014-02-28 11:55:50 UTC &lt;br/&gt;
Svn branch:  trunk &lt;br/&gt;
Svn revision: 1572665 &lt;br/&gt;
diff:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: st_derby715 jdk1.8.0_05 storeall:storetests 2014-02-28 14:05:15 ***&lt;br/&gt;
4 del&lt;br/&gt;
&amp;lt; Got a Deadlock.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_derby715 jdk1.8.0_05 storeall:storetests 2014-02-28 14:06:31 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14180356" author="myrna" created="Wed, 22 Oct 2014 20:17:48 +0100"  >&lt;p&gt;close all resolved issues with myself as reporter and assignee.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12394043">DERBY-3624</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Apr 2012 19:01:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0afb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>