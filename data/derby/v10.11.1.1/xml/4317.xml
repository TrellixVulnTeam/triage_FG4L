<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4317/DERBY-4317.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4317] convert columnDefaults.sql to JUNIT</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4317</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Conversion of the columnDefaults.sql to JUNIT&lt;/p&gt;</description>
                <environment></environment>
        <key id="12430941">DERBY-4317</key>
            <summary>convert columnDefaults.sql to JUNIT</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eranda">Eranda Sooriyabandara</assignee>
                                    <reporter username="eranda">Eranda Sooriyabandara</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jul 2009 17:26:23 +0100</created>
                <updated>Thu, 6 Aug 2009 07:30:23 +0100</updated>
                            <resolved>Thu, 6 Aug 2009 02:41:32 +0100</resolved>
                                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12733319" author="eranda" created="Mon, 20 Jul 2009 20:04:16 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
I make some little changes to the test and after that test ran successfully&lt;br/&gt;
ran in my platform.&lt;br/&gt;
Here I am attaching the patch file.&lt;/p&gt;</comment>
                            <comment id="12735778" author="eranda" created="Mon, 27 Jul 2009 22:12:15 +0100"  >&lt;p&gt;Hi Bryan/Kathey,I did complete the test conversion and testing.&lt;br/&gt;
Here is my final patch for your concern. I think this can commit as a&lt;br/&gt;
revision.&lt;/p&gt;</comment>
                            <comment id="12736798" author="mamtas" created="Wed, 29 Jul 2009 21:24:02 +0100"  >&lt;p&gt;Thanks, Eranda,  for working on the test conversion.&lt;/p&gt;

&lt;p&gt;One comment I had is rather than have the each test do the table creation as part of the test fixture, which makes the test code intermingle with setup code and hence takes some focus away from the actual test. Instead, may be you can consider using CleanDatabaseTestSetup decorator. One example of this usage of this decorator can be found in GroupByExpression test but there are many other tests who use this decorator. Using this decorator will allow you to overload decorateSQL method in which you can put all the create table/view/function etc sqls. &lt;/p&gt;

&lt;p&gt;If I have any further feedback on the rest of the converted junit test, I will post another comment but thanks again for converting the test into junit. &lt;/p&gt;</comment>
                            <comment id="12736829" author="mamtas" created="Wed, 29 Jul 2009 22:01:22 +0100"  >&lt;p&gt;Eranda, I just finished reviewing the test conversion and it looks good. After reviewing the test, I think there are quite a few create tables that you probably just need to keep in your test fixtures since we are testing default at create table time for some of those tests. There may be handful of other table creation which can be moved into decorateSQL since they test defaults at insert/update time. I will leave it to your judgement call if you want to leave all the table creations in their test fixtures for clarity purpose since we are mainly testing for defaults at create and right after create table times.&lt;/p&gt;</comment>
                            <comment id="12736956" author="eranda" created="Thu, 30 Jul 2009 03:01:16 +0100"  >&lt;p&gt;Hi Mamta,&lt;br/&gt;
Thanks for looking at my tests and your comments. I do understand what you&lt;br/&gt;
said.  I&apos;ll make the test as you said.&lt;/p&gt;</comment>
                            <comment id="12737613" author="eranda" created="Fri, 31 Jul 2009 18:45:17 +0100"  >&lt;p&gt;Hi Bryan, Mamta,&lt;br/&gt;
I try to use a decorator to overload decorateSQL method in which you can put&lt;br/&gt;
all the create table/view/function. But the problem is if I use that method&lt;br/&gt;
some of the create table must leave as it is now,&lt;/p&gt;

&lt;p&gt;1.assertStatementError(&quot;42894&quot;, st,&quot; create table neg(c1 int default&lt;br/&gt;
asdf(0))&quot;);&lt;br/&gt;
These are asserting errors so we can keep them as they are now.&lt;/p&gt;

&lt;p&gt;2. some times the same table names used by dropping the table.&lt;br/&gt;
   st.executeUpdate(&quot; drop table neg&quot;);&lt;br/&gt;
   st.executeUpdate(&quot;create table neg(c1 int default 10)&quot;);&lt;br/&gt;
This can recover by using other name for the table.&lt;/p&gt;

&lt;p&gt;But the biggest problem is the when we move the create table statements in&lt;br/&gt;
a separate method the readability is reduced(I think), because it is&lt;br/&gt;
checking the default values of the columns.&lt;br/&gt;
We can use alter table add column for this as a solution.&lt;/p&gt;

&lt;p&gt;So the problem  what can I do?&lt;/p&gt;</comment>
                            <comment id="12737712" author="bryanpendleton" created="Fri, 31 Jul 2009 22:12:18 +0100"  >&lt;p&gt;Hi Eranda,&lt;/p&gt;

&lt;p&gt;I think you are right, it may be better to keep most of the create table statements in the test cases themselves,&lt;br/&gt;
since as you say the test is specifically testing the create table statement behavior.&lt;/p&gt;

&lt;p&gt;We often use the decorateSQL pattern for tests which set up some sample data, and then test the&lt;br/&gt;
behavior of the system with the sample data.&lt;/p&gt;

&lt;p&gt;But here we are testing the create table statement itself, so this is a special case.&lt;/p&gt;

&lt;p&gt;If you think that the test is more readable in its current state, then that is fine, I think Mamta agreed&lt;br/&gt;
that this is an unusual situation and the decorateSQL technique may or may not be applicable:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4317?focusedCommentId=12736829&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12736829&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-4317?focusedCommentId=12736829&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12736829&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12738829" author="eranda" created="Tue, 4 Aug 2009 06:13:17 +0100"  >&lt;p&gt;Hi Bryan,According to me patch is ready to commit.&lt;br/&gt;
If Mamta agree with us you can take a look and can commit the patch.&lt;br/&gt;
Thanks&lt;br/&gt;
Eranda&lt;/p&gt;</comment>
                            <comment id="12738853" author="mamtas" created="Tue, 4 Aug 2009 07:24:08 +0100"  >&lt;p&gt;Yes, I agree that majority of the table creation is for testing default functionality and hence they need to be in the fixture rather than decorateSQL. &lt;/p&gt;</comment>
                            <comment id="12738985" author="bryanpendleton" created="Tue, 4 Aug 2009 15:19:16 +0100"  >&lt;p&gt;Thanks Mamta, Eranda. I intend to move ahead with reviewing and committing this patch.&lt;/p&gt;</comment>
                            <comment id="12739342" author="bryanpendleton" created="Wed, 5 Aug 2009 06:11:37 +0100"  >&lt;p&gt;I made two small changes:&lt;br/&gt;
1) Removed columnDefaults.sql from derbylang.runall&lt;br/&gt;
2) Renamed a couple test methods in ColumnDefaultsTest.java so that their&lt;br/&gt;
names start &quot;testXXX&quot; so that JUnit will find them by default.&lt;/p&gt;

&lt;p&gt;I&apos;m re-running the regression suites to verify that the new tests pass. Everything else looks good to me.&lt;/p&gt;</comment>
                            <comment id="12739664" author="eranda" created="Wed, 5 Aug 2009 19:33:18 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
Thanks for the changes that you did in appropriate places.&lt;br/&gt;
I think we can close this issue soon.&lt;br/&gt;
Thanks&lt;br/&gt;
Eranda&lt;/p&gt;</comment>
                            <comment id="12739865" author="bryanpendleton" created="Thu, 6 Aug 2009 02:41:32 +0100"  >&lt;p&gt;Committed the patch to the trunk as svn revision 801492.&lt;/p&gt;

&lt;p&gt;Thank you very much for this contribution, Eranda!&lt;/p&gt;

&lt;p&gt;Please confirm that the updated code looks correct on your machine, and then close this issue at your convenience.&lt;/p&gt;</comment>
                            <comment id="12739908" author="eranda" created="Thu, 6 Aug 2009 07:17:17 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
Thanks for committing the patch. I update the trunk and run&lt;br/&gt;
ColumnDefaultsTest successfully.&lt;br/&gt;
I am closing this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12414663" name="ASF.LICENSE.NOT.GRANTED--ColumnDefaultsTest.diff" size="36994" author="eranda" created="Mon, 27 Jul 2009 22:12:16 +0100"/>
                            <attachment id="12414027" name="ASF.LICENSE.NOT.GRANTED--ColumnDefaultsTest.diff" size="36707" author="eranda" created="Mon, 20 Jul 2009 20:04:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jul 2009 20:24:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0rxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>