<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:48:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2959/DERBY-2959.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2959] create table ... as select ... from systemtable with no data fails even when there is no character string type involved. This happens in a territory based database</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2959</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Following query should fail because we are trying to create a user table with UCS_BASIC character columns when the user schema has collation of territory based.&lt;br/&gt;
CREATE TABLE T AS SELECT TABLENAME FROM SYS.SYSTABLES WITH NO DATA&lt;/p&gt;

&lt;p&gt;But the following query should not fail because there are no character string columns involved. This jira entry is to fix the exception that is getting thrown for the query below&lt;br/&gt;
CREATE TABLE T AS SELECT COLUMNNUMBER FROM SYS.SYSCOLUMNS WITH NO DATA&lt;/p&gt;

&lt;p&gt;I have put in a fix for this in main using revision 557693. The commit comments were as follows &lt;/p&gt;

&lt;p&gt;This commit has 2 simple fixes (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2951&quot; title=&quot;BatchUpdateTest.testAssociatedParams test fails with collation with exception: Java exception: &amp;#39;ASSERT FAILED type of inserted column[0] = org.apache.derby.iapi.types.CollatorSQLChartype of template column[0] = org.apache.derby.iapi.types.SQLChar: &quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2951&quot;&gt;&lt;del&gt;DERBY-2951&lt;/del&gt;&lt;/a&gt; which gives assert failure and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2656&quot; title=&quot;Run suites.All against a collated database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2656&quot;&gt;&lt;del&gt;DERBY-2656&lt;/del&gt;&lt;/a&gt; The table will have collation type UCS_BASIC which is different than the collation of the schema TERRITORY_BASED hence this operation is not supported.) &lt;/p&gt;

&lt;p&gt;The failure in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2951&quot; title=&quot;BatchUpdateTest.testAssociatedParams test fails with collation with exception: Java exception: &amp;#39;ASSERT FAILED type of inserted column[0] = org.apache.derby.iapi.types.CollatorSQLChartype of template column[0] = org.apache.derby.iapi.types.SQLChar: &quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2951&quot;&gt;&lt;del&gt;DERBY-2951&lt;/del&gt;&lt;/a&gt; is because in store, we were not using correct format id and hence collation information was not getting written out and read from disk. Added a test case for this in CollationTest. &lt;/p&gt;

&lt;p&gt;The failure in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2656&quot; title=&quot;Run suites.All against a collated database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2656&quot;&gt;&lt;del&gt;DERBY-2656&lt;/del&gt;&lt;/a&gt; was because of the bug that we were comparing collation type for non-character types. Collation is only applicable to character types and hence we should check for character types before comparing the collation info. Added a test case for this one too. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12374180">DERBY-2959</key>
            <summary>create table ... as select ... from systemtable with no data fails even when there is no character string type involved. This happens in a territory based database</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jul 2007 18:53:58 +0100</created>
                <updated>Mon, 23 Jul 2007 18:05:45 +0100</updated>
                            <resolved>Sat, 21 Jul 2007 20:47:38 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12513963" author="mamtas" created="Thu, 19 Jul 2007 19:01:47 +0100"  >&lt;p&gt;This issue was found while doing testing in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2656&quot; title=&quot;Run suites.All against a collated database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2656&quot;&gt;&lt;del&gt;DERBY-2656&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12513966" author="mamtas" created="Thu, 19 Jul 2007 19:15:08 +0100"  >&lt;p&gt;Merged change into 10.3 codeline using revision 557716&lt;/p&gt;</comment>
                            <comment id="12514104" author="mamtas" created="Fri, 20 Jul 2007 06:49:15 +0100"  >&lt;p&gt;Not sure if this made it into 10.3.1.3 but the fix is in main and 10.3 codeline.&lt;/p&gt;</comment>
                            <comment id="12514437" author="myrna" created="Sat, 21 Jul 2007 20:47:38 +0100"  >&lt;p&gt;yes, revision 557716 is older 557799, so it&apos;s in 10.3.1.3. You may consider correcting the commit comment in revision 557716, it says it&apos;s fixing the problem of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2656&quot; title=&quot;Run suites.All against a collated database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2656&quot;&gt;&lt;del&gt;DERBY-2656&lt;/del&gt;&lt;/a&gt;, but that bug actually is the task of running the tests against a collated database. If you propedit the revision comment, the change would show up with this bug.&lt;/p&gt;</comment>
                            <comment id="12514684" author="mamtas" created="Mon, 23 Jul 2007 18:05:45 +0100"  >&lt;p&gt;Changed the commit comments for the fixes that went into main and 10.3.1.3 to include the proper jira entry rather than &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2656&quot; title=&quot;Run suites.All against a collated database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2656&quot;&gt;&lt;del&gt;DERBY-2656&lt;/del&gt;&lt;/a&gt;. Thanks to Myrna for pointing it out.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12369433">DERBY-2656</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Jul 2007 19:47:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy11ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>