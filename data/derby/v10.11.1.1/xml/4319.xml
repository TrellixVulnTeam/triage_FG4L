<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:21:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4319/DERBY-4319.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4319] hang in suites.all with ibm 1.5 on AIX after ttestDefaultProperties</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4319</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The test run for 10.5.2.0 hung in suites.All. The console output (the run was with -Dderby.tests.trace=true) showed ttestDefaultProperties had successfully completed but the run was halted.&lt;br/&gt;
ps -eaf | grep java showed the process that kicked off suites.All, and a networkserver process with the following flags:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;classpath &amp;lt;classpath including derby.jar, derbytools.jar, derbyclient.jar, derbynet.jar, derbyTesting.jar, derbyrun.jar, derbyTesting.jar and junit.jar&amp;gt; -Dderby.drda.logConnections= -Dderby.drda.traceAll= -Dderby.drda.traceDirectory= -Dderby.drda.keepAlive= -Dderby.drda.timeSlice= -Dderby.drda.host= -Dderby.drda.portNumber= -derby.drda.minThreads= -Dderby.drda.maxThreads= -Dderby.drda.startNetworkServer= -Dderby.drda.debug= org.apache.derby.drda.NetworkServerControl start -h localhost -p 1527&lt;br/&gt;
This process had been sitting for 2 days.&lt;br/&gt;
After killing the NetworkServerControl process, the test continued successfully (except for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4186&quot; title=&quot;After master stop, test fails when it succeeds in connecting (rebooting) shut-down ex-slave&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4186&quot;&gt;&lt;del&gt;DERBY-4186&lt;/del&gt;&lt;/a&gt;, fixed in trunk), but the following was put out to the console:&lt;br/&gt;
 START-SPAWNED:SpawnedNetworkServer STANDARD OUTPUT: exit code=137&lt;br/&gt;
2009-07-18 03:16:07.157 GMT : Security manager installed using the Basic server&lt;br/&gt;
security policy.&lt;br/&gt;
2009-07-18 03:16:09.169 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
started and ready to accept connections on port 1527&lt;br/&gt;
END-SPAWNED  :SpawnedNetworkServer STANDARD OUTPUT:&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment>ibm jvm 1.5 SR9-0 on IBM AIX 3.5</environment>
        <key id="12430960">DERBY-4319</key>
            <summary>hang in suites.all with ibm 1.5 on AIX after ttestDefaultProperties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                            <label>derby_backport_reject_10_5</label>
                    </labels>
                <created>Mon, 20 Jul 2009 22:06:45 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:12 +0100</updated>
                            <resolved>Tue, 6 Mar 2012 18:04:50 +0000</resolved>
                                    <version>10.5.2.0</version>
                                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12733357" author="myrna" created="Mon, 20 Jul 2009 22:15:16 +0100"  >&lt;p&gt;system/derby.log  at the time of the hang had 1 start ( on port 1531) and 3 shutdowns.&lt;br/&gt;
2009-07-18 03:15:51.865 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
started and ready to accept connections on port 1531&lt;br/&gt;
2009-07-18 03:15:58.988 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
shutdown&lt;br/&gt;
2009-07-18 03:15:59.101 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
shutdown&lt;br/&gt;
2009-07-18 03:15:59.257 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
shutdown&lt;/p&gt;

&lt;p&gt;logs/serverConsoleOutput.log had this: &lt;br/&gt;
2009-07-18 03:15:03.669 GMT : Could not connect to Derby Network Server on host&lt;br/&gt;
127.0.0.1, port 1528: A remote host refused an attempted connect operation.&lt;br/&gt;
2009-07-18 03:15:04.177 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
started and ready to accept connections on port 1528&lt;br/&gt;
2009-07-18 03:15:04.259 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
shutdown&lt;br/&gt;
2009-07-18 03:15:04.361 GMT : Could not connect to Derby Network Server on host &lt;br/&gt;
127.0.0.1, port 1528: A remote host refused an attempted connect operation.&lt;br/&gt;
2009-07-18 03:15:04.445 GMT : Could not connect to Derby Network Server on host&lt;br/&gt;
127.0.0.1, port 1527: A remote host refused an attempted connect operation.&lt;br/&gt;
2009-07-18 03:15:04.548 GMT : Could not connect to Derby Network Server on host&lt;br/&gt;
127.0.0.1, port 1527: A remote host refused an attempted connect operation.&lt;br/&gt;
2009-07-18 03:15:04.658 GMT : Could not connect to Derby Network Server on host&lt;br/&gt;
127.0.0.1, port 1527: A remote host refused an attempted connect operation.&lt;br/&gt;
2009-07-18 03:15:04.768 GMT : Could not connect to Derby Network Server on host&lt;br/&gt;
127.0.0.1, port 1527: A remote host refused an attempted connect operation.&lt;br/&gt;
2009-07-18 03:15:04.848 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
started and ready to accept connections on port 1527&lt;br/&gt;
2009-07-18 03:15:40.465 GMT : Apache Derby Network Server - 10.5.2.0 - (794445)&lt;br/&gt;
shutdown&lt;/p&gt;

&lt;p&gt;I don&apos;t find any further helpful info.&lt;/p&gt;</comment>
                            <comment id="12734620" author="myrna" created="Thu, 23 Jul 2009 16:39:36 +0100"  >&lt;p&gt;This reproduces when I just run ServerPropertiesTest.&lt;br/&gt;
The log/serverConsoleOutput.log must be from a different test - when I just run the ServerPropertiesTest it doesn&apos;t get created.&lt;br/&gt;
I&apos;ll do some more experiments (newer jvm, redo 10.5.1.1, insane, latest 10.5 build) and report.&lt;/p&gt;</comment>
                            <comment id="12734625" author="kmarsden" created="Thu, 23 Jul 2009 16:53:32 +0100"  >&lt;p&gt;It would be useful to see the thread dump to see if this might be another shutdown issue or something different.&lt;/p&gt;</comment>
                            <comment id="12734636" author="myrna" created="Thu, 23 Jul 2009 17:28:45 +0100"  >&lt;p&gt;I went back over my 10.5.1 testing notes, and I &lt;b&gt;have&lt;/b&gt; seen this before - with 10.5.1.0 with  IBM 1.6 SR4 (and I thought it was a jvm issue as I didn&apos;t see it that time with IBM 1.5); then with 10.5.1.1 I saw it with IBM 1.5 and IBM 1.6 SR3, but I couldn&apos;t reproduce anymore after I rebooted  the machine...&lt;/p&gt;</comment>
                            <comment id="12734640" author="myrna" created="Thu, 23 Jul 2009 17:54:45 +0100"  >&lt;p&gt;Attaching the javacore files obtained with kill -QUIT of the test hung (with just running the 1 test).&lt;br/&gt;
25380 was the pid of the NetworkServerControl start process; &lt;br/&gt;
24726 was the pid of the junit.textui.TestRunner ...ServerPropertiesTest process.&lt;/p&gt;</comment>
                            <comment id="12735742" author="myrna" created="Mon, 27 Jul 2009 20:51:44 +0100"  >&lt;p&gt;I ran the test with 10.4.2.0 and IBM 1.5, and it hung too!&lt;br/&gt;
Then I couldn&apos;t log on anymore, and booted the machine, and now there is no more hang.&lt;/p&gt;

&lt;p&gt;I&apos;d blame it on the machine but it&apos;s odd that it&apos;s only in this particular test...&lt;br/&gt;
No one else works on this machine, there are no long-running processes...&lt;/p&gt;</comment>
                            <comment id="12746935" author="myrna" created="Mon, 24 Aug 2009 17:03:34 +0100"  >&lt;p&gt;I did not see this during the 10.5.3.0 test run.&lt;br/&gt;
(doesn&apos;t mean it&apos;s gone, I don&apos;t think there was a related change between 10.5.2.0 and 10.5.3.0).&lt;/p&gt;</comment>
                            <comment id="12770248" author="myrna" created="Mon, 26 Oct 2009 23:03:55 +0000"  >&lt;p&gt;I&apos;ve tried to get this error, but it&apos;s not reproducing for me.&lt;br/&gt;
If I see it again, I can reopen and attempt further research.&lt;/p&gt;</comment>
                            <comment id="12915361" author="myrna" created="Mon, 27 Sep 2010 18:05:29 +0100"  >&lt;p&gt;I saw this while testing 10.6.2.1, insane jars, once with ibm15 (SR12, FP1) (passed second run) and once with ibm16 (SR8, FP1), running suites.All with -Xmx512M -Xms512M (and -Dderby.tests.trace=true).&lt;/p&gt;

&lt;p&gt;I&apos;lll try to gather more info.&lt;/p&gt;</comment>
                            <comment id="12994478" author="kmarsden" created="Mon, 14 Feb 2011 20:41:40 +0000"  >&lt;p&gt;Triage for 10.8. Marking urgent as it is generally not good to have hanging tests that prevent the rest of the test run from completing.&lt;/p&gt;</comment>
                            <comment id="13000595" author="kmarsden" created="Mon, 28 Feb 2011 23:10:12 +0000"  >&lt;p&gt;I ran the test and saw it hang on AIX.&lt;br/&gt;
When I think tried to ping the server manually once hung I saw a connection reset error:&lt;/p&gt;

&lt;p&gt;$ java org.apache.derby.drda.NetworkServerControl ping&lt;br/&gt;
Mon Feb 28 14:52:49 PST 2011 : Error on client socket:&lt;br/&gt;
 Connection reset&lt;br/&gt;
Mon Feb 28 14:52:49 PST 2011 : Connection reset&lt;br/&gt;
java.net.SocketException: Connection reset&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:197)&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:116)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(N&lt;br/&gt;
etworkServerControlImpl.java:2873)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Networ&lt;br/&gt;
kServerControlImpl.java:2817)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Ne&lt;br/&gt;
tworkServerControlImpl.java:1253)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(NetworkServe&lt;br/&gt;
rControlImpl.java:1228)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.executeWork(Netwo&lt;br/&gt;
rkServerControlImpl.java:2260)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl.main(NetworkServerControl.&lt;br/&gt;
java:320)&lt;/p&gt;

&lt;p&gt;After that occurred, any attempt to ping or shutdown the server hung and looking at the javacore, the ClientThread was no longer running&lt;/p&gt;

&lt;p&gt;Since in the original trace from the hang was in SpawnedProcess.complete() called from NetworkServerTestSetup.teardown() this is what I think has happened:&lt;/p&gt;

&lt;p&gt;In NetworkServerTestSetup.tearDown we have&lt;br/&gt;
  if (networkServerController != null) {&lt;br/&gt;
            boolean running = false;&lt;br/&gt;
            try &lt;/p&gt;
{
                networkServerController.ping();
                running = true;
            }
&lt;p&gt; catch (Exception e) {&lt;br/&gt;
            }&lt;/p&gt;

&lt;p&gt;Assuming the ping returned the connection reset, even though the process was still running it made teardown think that the server was actually down. It did not attempt to shutdown, but  called spawnedServer.complete(failedShutdown != null); with false as its argument so did not try to destroy the process either, so remains hung waiting for the process to enter.&lt;/p&gt;

&lt;p&gt;There seem to be a few issues here.&lt;br/&gt;
1)  How does the server get into this state for this particular test?&lt;br/&gt;
2) How can we ensure that the server is brought down or destroyed no matter what?&lt;/p&gt;

&lt;p&gt;I think I will focus on the second aspect first, so we don&apos;t have the risk of full runs getting held up and then try to understand the root cause for the network server state after that.&lt;/p&gt;

</comment>
                            <comment id="13001161" author="kmarsden" created="Tue, 1 Mar 2011 22:42:39 +0000"  >&lt;p&gt;The attached patch changes NetworkServerControl.tearDown() to print the stack trace and destroy the server process if the test ping fails to some error other than the standard Cannot Connect error that happens if the server is not up. Before the patch if the ping failed for any reason the assumption was that the server was down.&lt;/p&gt;

&lt;p&gt;This doesn&apos;t eliminate the possibility for a hang entirely as if the test ping itself were to hang, then we would still have the problem.  &lt;/p&gt;

&lt;p&gt;Note this patch does not get at the root cause of the Connection reset error on aix, but will hopefully get the tests to finish their run. Currently if the the process destruction is required, it won&apos;t result in the failure of a test, just the print of the stacktrace to system.out.&lt;/p&gt;
</comment>
                            <comment id="13001171" author="kmarsden" created="Tue, 1 Mar 2011 23:08:01 +0000"  >&lt;p&gt;Well this patch isn&apos;t quite right yet  for the german tests, but I&apos;ll fix that up.&lt;/p&gt;
</comment>
                            <comment id="13003245" author="kmarsden" created="Mon, 7 Mar 2011 03:13:26 +0000"  >&lt;p&gt;Well I want to try to get something checked in to get the tests to complete on aix before we cut the release candidate. I believe the attached patch which adds a timeout to the SpawnedProcess.complete() method should do that and should do no harm.  I am still not totally happy with it and unfortunately the aix machine does not feel like hanging right now.  I am running suites.All on Windows and AIX now and will checkin before tomorrow mornings rc if all goes well.&lt;/p&gt;</comment>
                            <comment id="13003262" author="kmarsden" created="Mon, 7 Mar 2011 04:56:17 +0000"  >&lt;p&gt;I got an out of memory error on the aix run. I don&apos;t know that it is related to this change but won&apos;t chance it. I am sorry it won&apos;t make it by tomorrow morning.&lt;/p&gt;</comment>
                            <comment id="13004220" author="kmarsden" created="Tue, 8 Mar 2011 21:20:43 +0000"  >&lt;p&gt;It ended up that aix has always required -Xmx512M which I added and got through the run. I did two runs on AIX and two on windows getting different known intermittent failures each time, but none I think related to this change. Committed revision 1079548.&lt;/p&gt;</comment>
                            <comment id="13004827" author="kmarsden" created="Wed, 9 Mar 2011 22:10:50 +0000"  >&lt;p&gt;There was some network maintenance that seems to be what got the aix machine out of its problematic  state.   Myrna said in the past after reboot (this time it wasn&apos;t reboot but reboot of the router) it will work for a while and then start to consistently fail.  I kicked of fifty runs of the derbynet suite to see if I can get the machine back into the problematic state.&lt;/p&gt;
</comment>
                            <comment id="13005332" author="kmarsden" created="Thu, 10 Mar 2011 21:03:21 +0000"  >&lt;p&gt;I have the machine back in the state where this reproduces and am sorry to say that there is still a hang in a different method, even with my prior attempt to get past it, but since I can reproduce now, I should be able to make some progress on this issue.    I&apos;ll record some info here in case it becomes hard to reproduce again.&lt;/p&gt;


&lt;p&gt;The current state of hang is that the launched network server process which seems to specify all the drda parameters without values:&lt;br/&gt;
cloudtst 6488248 4390978   0 14:41:38      -  0:20 /local1/IBM_JDK/15sr13/sdk/jr&lt;br/&gt;
e/bin/java -classpath /local1/kmarsden/repro/derby-4319/jars//derby.jar:/local1/&lt;br/&gt;
kmarsden/repro/derby-4319/jars//derbyrun.jar:/local1/kmarsden/repro/derby-4319/j&lt;br/&gt;
ars//derbyTesting.jar:/local1/kmarsden/repro/derby-4319/jars//junit.jar -Dderby.&lt;br/&gt;
drda.logConnections= -Dderby.drda.traceAll= -Dderby.drda.traceDirectory= -Dderby&lt;br/&gt;
.drda.keepAlive= -Dderby.drda.timeSlice= -Dderby.drda.host= -Dderby.drda.portNum&lt;br/&gt;
ber= -Dderby.drda.minThreads= -Dderby.drda.maxThreads= -Dderby.drda.startNetwork&lt;br/&gt;
Server= -Dderby.drda.debug= org.apache.derby.drda.NetworkServerControl start -h&lt;br/&gt;
localhost -p 1527&lt;/p&gt;

&lt;p&gt;I will attach the javacore with thread dump as LaunchedNetworkServer.javacore.20110309.160148.6488248.0001.txt&lt;/p&gt;

&lt;p&gt;The server threads look pretty normal with a ClientThread running waiting to accept requests.&lt;/p&gt;

&lt;p&gt;The test process is hung in NetworkServerTestSetup.complete(). I am not sure if it is later or if the change I made just did not work.  I will attach the test process file as:&lt;br/&gt;
TestProcess.javacore.20110310.123703.4390978.0001.txt&lt;/p&gt;

&lt;p&gt;If I try to ping the server from the command line I get a ConnectionReset error:&lt;br/&gt;
$ java org.apache.derby.drda.NetworkServerControl ping&lt;br/&gt;
Thu Mar 10 12:47:39 PST 2011 : Error on client socket:&lt;br/&gt;
 Connection reset&lt;br/&gt;
Thu Mar 10 12:47:39 PST 2011 : Connection reset&lt;br/&gt;
java.net.SocketException: Connection reset&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:197)&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:116)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.fillReplyBuffer(N&lt;br/&gt;
etworkServerControlImpl.java:2873)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.readResult(Networ&lt;br/&gt;
kServerControlImpl.java:2817)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.pingWithNoOpen(Ne&lt;br/&gt;
tworkServerControlImpl.java:1253)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(NetworkServe&lt;br/&gt;
rControlImpl.java:1228)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.executeWork(Netwo&lt;br/&gt;
rkServerControlImpl.java:2260)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl.main(NetworkServerControl.&lt;br/&gt;
java:320)&lt;/p&gt;


&lt;p&gt;Then after that subsequent ping attempts hang and a new thread dump on the Network Server process shows that the ClientThread is no longer there.   I think this should never happen. I think a lot of work has been put into making sure that the ClientThread always survives any type of error in order host more connections. see attachment  LaunchedNetworkServerAfterPing.javacore.20110310.124948.6488248.0002.txt&lt;/p&gt;


&lt;p&gt;Another thing to note is that prior to the defaultProperties test there was actually a stack trace in the setPortPriorty test with a Connection reset  which did not cause failure. see TestOutput2011-03-09.txt .out&lt;/p&gt;


&lt;p&gt;This issue actually has many facets that are worth working on:&lt;/p&gt;

&lt;p&gt;1) How do we make sure a spawned network server process is destroyed if it  hangs the whole suite?&lt;/p&gt;

&lt;p&gt;2)  Under  what circumstances can the Network Server ClientThread that loops accepting new connections be destroyed?&lt;/p&gt;

&lt;p&gt;3) What sort of problem is being caused on AIX by starting network server with these odd options?  I am thinking maybe it is related to soTimeout or keepalive getting set to an unexpected option but am not sure.&lt;/p&gt;

&lt;p&gt;I have been holding off on working on 3, because it provides a good reproduction for issue one and two but think that at this point, the best thing to do would be to disable the problematic fixture on AIX whether it is testSetpPortPriority or testDefaultProperties.    Then I can work on all three issues in a logical order and pace without release concerns.  I&apos;ll look into doing that.&lt;/p&gt;

</comment>
                            <comment id="13005334" author="kmarsden" created="Thu, 10 Mar 2011 21:08:02 +0000"  >&lt;p&gt;Attaching files per previous comment.&lt;/p&gt;</comment>
                            <comment id="13005855" author="kmarsden" created="Fri, 11 Mar 2011 21:37:14 +0000"  >&lt;p&gt;I am looking at disabling this test and see that currently we have methods like isSunJVM() isIBMJVM()  etc are in BaseTestCase.  I will be adding isAIXPlatform() isJava5() and  with other issues for disabling tests there will probably be isMacPlatform() etc.  Is BaseTestCase() the right place for these kind of methods?&lt;/p&gt;

&lt;p&gt;For the platforms, one option might be to have new class  OsName.java that has String constants for  all the os.name values and then just have an isPlatform(String) method in BaseTestCase.  (sorry accidentally put this in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5096&quot; title=&quot;DisconnectException: &amp;quot;Connection was refused because the database DB was not found&amp;quot; when creating db for first time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5096&quot;&gt;&lt;del&gt;DERBY-5096&lt;/del&gt;&lt;/a&gt; at first.)&lt;/p&gt;</comment>
                            <comment id="13005965" author="kmarsden" created="Sat, 12 Mar 2011 01:36:08 +0000"  >&lt;p&gt;The Attached patch derby-4319_disable_SetPortPriorty_diff.txt disables the ttestsetPortPriorityTest  on AIX JDK 1.5 which seems to be the test that get us into a state where we might hang although the actual hang happens in the subsequent test ttestDefaultProperties.&lt;/p&gt;

&lt;p&gt;I added the OsName class with the os.name values that I know.  Still missing are Solaris,  HP, and I am not sure on Windows if Windows 7, 2008 etc have different variations, but this is a start.  &lt;/p&gt;

&lt;p&gt;I am looping derbynet on AIX now and doing a suites.All run on Windows.&lt;/p&gt;</comment>
                            <comment id="13006425" author="kmarsden" created="Mon, 14 Mar 2011 14:25:16 +0000"  >&lt;p&gt;I ended up having to disable both ttestSetPortPriority and ttestDefaultProperties.  With this patch I got through 35 runs of derbynet on AIX.  I&apos;ll check this in today.&lt;/p&gt;

</comment>
                            <comment id="13021354" author="myrna" created="Tue, 19 Apr 2011 01:23:12 +0100"  >&lt;p&gt;I now saw the hang with ibm 1.6 SR9 FP1 (during the 10.8.1.1 platform tests).&lt;br/&gt;
I guess we should stop them from running with ibm 1.6 also.&lt;/p&gt;</comment>
                            <comment id="13021457" author="knutanders" created="Tue, 19 Apr 2011 08:57:55 +0100"  >&lt;p&gt;I&apos;m wondering if this could have the same root cause as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5192&quot; title=&quot;Setting up network server for management tests hangs intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5192&quot;&gt;&lt;del&gt;DERBY-5192&lt;/del&gt;&lt;/a&gt; (fixed after 10.8.1.1). That could prevent server shutdown from terminating the server, which would leave the server process running forever. Since NetworkServerTestSetup waits until the external process terminates, the test will just hang there. What Kathey observed when she pinged the hanging server on AIX is also consistent with what I saw when I pinged a server that hung because of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5192&quot; title=&quot;Setting up network server for management tests hangs intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5192&quot;&gt;&lt;del&gt;DERBY-5192&lt;/del&gt;&lt;/a&gt; (see comment &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5192?focusedCommentId=13020264&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13020264&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-5192?focusedCommentId=13020264&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13020264&lt;/a&gt; ).&lt;/p&gt;</comment>
                            <comment id="13021598" author="myrna" created="Tue, 19 Apr 2011 15:10:34 +0100"  >&lt;p&gt;Thanks for that comment; I saw the link, but hadn&apos;t noticed there was a fix. I was contemplating skipping running the 10.8.1.2 RC on this OS, but now I&apos;ll at least run the 1.6 with it, and uncomment the skipped tests and run with ibm 1.5. &lt;/p&gt;</comment>
                            <comment id="13025419" author="myrna" created="Tue, 26 Apr 2011 21:36:43 +0100"  >&lt;p&gt;I got the hang again with 10.7.1.1 and then tested same with 10.8.1.2 (with modified derbyTesting.jar) and indeed,  this appears now fixed. I reinstated the testing with revision 1096875 on trunk, and with revision 1096895 on 10.8.&lt;/p&gt;</comment>
                            <comment id="13223480" author="kmarsden" created="Tue, 6 Mar 2012 18:04:50 +0000"  >&lt;p&gt;I marked this derby_backport_reject_10_5, not because of any risk but this issue  has  just test changes made during the diagnosis of this issue. The real fix it seems  came under &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5192&quot; title=&quot;Setting up network server for management tests hangs intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5192&quot;&gt;&lt;del&gt;DERBY-5192&lt;/del&gt;&lt;/a&gt;, so there is no real value to backporting to 10.5&lt;/p&gt;

&lt;p&gt;If someone ever wants these changes in older releases for some reason it should be fine to do so.&lt;/p&gt;
</comment>
                            <comment id="13685159" author="knutanders" created="Mon, 17 Jun 2013 10:19:12 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12423430">DERBY-4176</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12501033">DERBY-5122</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12504344">DERBY-5192</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12473327" name="LaunchedNetworkServer.javacore.20110309.160148.6488248.0001.txt" size="142763" author="kmarsden" created="Thu, 10 Mar 2011 21:08:02 +0000"/>
                            <attachment id="12473329" name="LaunchedNetworkServerAfterPing.javacore.20110310.124948.6488248.0002.txt" size="141960" author="kmarsden" created="Thu, 10 Mar 2011 21:08:02 +0000"/>
                            <attachment id="12473330" name="TestOutput2011-03-09.txt" size="10360" author="kmarsden" created="Thu, 10 Mar 2011 21:08:02 +0000"/>
                            <attachment id="12473328" name="TestProcess.javacore.20110310.123703.4390978.0001.txt" size="375438" author="kmarsden" created="Thu, 10 Mar 2011 21:08:02 +0000"/>
                            <attachment id="12472797" name="derby-4317_timeout_for_complete_diff.txt" size="2800" author="kmarsden" created="Mon, 7 Mar 2011 03:13:26 +0000"/>
                            <attachment id="12473568" name="derby-4319_disableSetPortPriorityAndDefaultProperties_diff.txt" size="5195" author="kmarsden" created="Mon, 14 Mar 2011 14:25:16 +0000"/>
                            <attachment id="12473459" name="derby-4319_disable_setPortPriorty_diff.txt" size="4398" author="kmarsden" created="Sat, 12 Mar 2011 01:36:08 +0000"/>
                            <attachment id="12472366" name="derby-4319_teardown_kill_on_bad_ping.txt" size="1868" author="kmarsden" created="Tue, 1 Mar 2011 22:42:39 +0000"/>
                            <attachment id="12414352" name="javacore.20090723.093837.25380.0001.txt" size="133699" author="myrna" created="Thu, 23 Jul 2009 17:54:45 +0100"/>
                            <attachment id="12414353" name="javacore.20090723.093909.24726.0001.txt" size="133633" author="myrna" created="Thu, 23 Jul 2009 17:54:45 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jul 2009 15:53:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24181</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0cr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>