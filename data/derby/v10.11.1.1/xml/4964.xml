<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4964/DERBY-4964.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4964] Client driver fails to convert string to boolean with setObject(col, str, Types.BIT)</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4964</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The following code&lt;/p&gt;

&lt;p&gt;        PreparedStatement ps = c.prepareStatement(&quot;values cast(? as boolean)&quot;);&lt;br/&gt;
        ps.setObject(1, &quot;true&quot;, Types.BIT);&lt;br/&gt;
        ResultSet rs = ps.executeQuery();&lt;br/&gt;
        rs.next();&lt;br/&gt;
        System.out.println(rs.getString(1));&lt;/p&gt;

&lt;p&gt;executes successfully using the embedded driver, but fails when using the client driver:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.sql.SQLDataException: Invalid character string format for type INTEGER.&lt;br/&gt;
	at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.am.PreparedStatement.setObject(Unknown Source)&lt;br/&gt;
	at Test.main(Test.java:8)&lt;br/&gt;
Caused by: org.apache.derby.client.am.SqlException: Invalid character string format for type INTEGER.&lt;br/&gt;
	at org.apache.derby.client.am.CrossConverters.setObject(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.am.CrossConverters.setObject(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.am.PreparedStatement.setObjectX(Unknown Source)&lt;br/&gt;
	... 2 more&lt;br/&gt;
Caused by: java.lang.NumberFormatException: For input string: &quot;true&quot;&lt;br/&gt;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)&lt;br/&gt;
	at java.lang.Integer.parseInt(Integer.java:449)&lt;br/&gt;
	at java.lang.Integer.valueOf(Integer.java:554)&lt;br/&gt;
	... 5 more&lt;/p&gt;

&lt;p&gt;This issue was found when running the Java EE CTS with Derby 10.7.1.1.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495174">DERBY-4964</key>
            <summary>Client driver fails to convert string to boolean with setObject(col, str, Types.BIT)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jan 2011 21:46:40 +0000</created>
                <updated>Tue, 29 May 2012 09:52:06 +0100</updated>
                            <resolved>Mon, 17 Jan 2011 16:53:39 +0000</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12979784" author="knutanders" created="Mon, 10 Jan 2011 21:47:31 +0000"  >&lt;p&gt;We have the same problem if Types.BIT is replaced with Types.BOOLEAN.&lt;/p&gt;</comment>
                            <comment id="12981238" author="knutanders" created="Thu, 13 Jan 2011 13:08:08 +0000"  >&lt;p&gt;Attaching a patch that makes ParameterMappingTest expose the bug. ParameterMappingTest only tested setObject(int,Object) before. The patch adds testing of setObject(int,Object,int), which is where the problem is seen. The test passes with the embedded driver and fails on the client driver when the patch is applied.&lt;/p&gt;</comment>
                            <comment id="12981800" author="knutanders" created="Fri, 14 Jan 2011 15:46:54 +0000"  >&lt;p&gt;Attaching a patch to fix this bug. This patch contains more tests. All the new test cases pass with no changes needed when run against the embedded driver. With the fix applied, they also pass when run against the client driver.&lt;/p&gt;

&lt;p&gt;ParameterMappingTest.java: Add testing of setObject(int,Object,int) for all types (same as mapping-test.diff).&lt;/p&gt;

&lt;p&gt;BooleanValuesTest.java: Add more specific tests for boolean with a wider range of input values.&lt;/p&gt;

&lt;p&gt;CrossConverters.java: Add separate cases for converting to boolean and stop handling boolean conversions as integer conversions.&lt;/p&gt;

&lt;p&gt;Types.java: Add handling of Types.BIT, so that error messages say &quot;BOOLEAN&quot; instead of &quot;&amp;lt;UNKNOWN&amp;gt;&quot; when attempting invalid conversions like setObject(col, &quot;test&quot;, Types.BIT).&lt;/p&gt;

&lt;p&gt;All the regression tests ran cleanly with the patch.&lt;/p&gt;</comment>
                            <comment id="12982600" author="knutanders" created="Mon, 17 Jan 2011 11:35:50 +0000"  >&lt;p&gt;Committed revision 1059888.&lt;/p&gt;</comment>
                            <comment id="12982735" author="knutanders" created="Mon, 17 Jan 2011 16:53:39 +0000"  >&lt;p&gt;Merged to 10.7 and committed revision 1059984.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12558335">DERBY-5788</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12468380" name="derby-4964-1a.diff" size="14414" author="knutanders" created="Fri, 14 Jan 2011 15:46:54 +0000"/>
                            <attachment id="12468250" name="mapping-test.diff" size="4496" author="knutanders" created="Thu, 13 Jan 2011 13:08:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    <customfieldvalue key="10363"><![CDATA[Embedded/Client difference]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0biv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>