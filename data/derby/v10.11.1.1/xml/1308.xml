<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1308/DERBY-1308.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1308] Tests jdbcapi/HoldabilityTest.junit, jdbcapi/UpdateXXXTest.junit,jdbcapi/SURTest.junit fail on wctme5.7_foundation</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1308</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;05/05/2006 regression test run of derbyall shows the following test failure with wctme5.7_foundation, &lt;/p&gt;

&lt;p&gt;derbyall/derbyall.fail:jdbcapi/HoldabilityTest.junit&lt;br/&gt;
derbyall/derbyall.fail:jdbcapi/UpdateXXXTest.junit&lt;br/&gt;
derbyall/derbyall.fail:jdbcapi/SURTest.junit&lt;/p&gt;

&lt;p&gt;Diff is a CNFE with ConnectionPoolDataSource.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/jdbcapi/HoldabilityTest.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: HoldabilityTest jdkJ2ME Foundation Specification v1.0 derbyall:jdbcapi 2006-05-07 11:31:05 ***&lt;br/&gt;
0 add&lt;br/&gt;
&amp;gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax.sql.ConnectionPoolDataSource&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   HoldabilityTest jdkJ2ME Foundation Specification v1.0 derbyall:jdbcapi 2006-05-07 11:31:06 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My guess is these tests need to excluded from running in this environment. Can someone please confirm.  Thanks. &lt;/p&gt;</description>
                <environment>derby jars used - 10.2.0.0 alpha - (400220), machine is a win2000.</environment>
        <key id="12333438">DERBY-1308</key>
            <summary>Tests jdbcapi/HoldabilityTest.junit, jdbcapi/UpdateXXXTest.junit,jdbcapi/SURTest.junit fail on wctme5.7_foundation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="skambha">Sunitha Kambhampati</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 May 2006 05:22:07 +0100</created>
                <updated>Mon, 29 Jun 2009 23:43:01 +0100</updated>
                            <resolved>Tue, 30 May 2006 20:54:26 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12378852" author="andreask" created="Wed, 10 May 2006 16:18:06 +0100"  >&lt;p&gt;I think this could be a regression, since as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-993&quot; title=&quot;junitTests cannot be run with J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-993&quot;&gt;&lt;del&gt;DERBY-993&lt;/del&gt;&lt;/a&gt;, Myrna was able to run the following tests:&lt;/p&gt;

&lt;p&gt;&amp;gt;With the changes in place, I can successfully run with both jdk142 and wctme5.7_foundation the &amp;gt;following tests:&lt;br/&gt;
&amp;gt;junitTests/lang/LangSuite.java&lt;br/&gt;
&amp;gt;jdbcapi/SURTest.junit&lt;br/&gt;
&amp;gt;jdbcapi/SURQueryMixTest.junit&lt;br/&gt;
&amp;gt;jdbcapi/ConcurrencyTest.junit &lt;/p&gt;
</comment>
                            <comment id="12413122" author="myrna" created="Wed, 24 May 2006 22:09:38 +0100"  >&lt;p&gt;I&apos;m attaching a patch - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1308&quot; title=&quot;Tests jdbcapi/HoldabilityTest.junit, jdbcapi/UpdateXXXTest.junit,jdbcapi/SURTest.junit fail on wctme5.7_foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1308&quot;&gt;&lt;del&gt;DERBY-1308&lt;/del&gt;&lt;/a&gt;_20060524.* - for this issue.&lt;br/&gt;
I&apos;d like to get some feedback on the approach I have taken.&lt;br/&gt;
The problem is that the j9 jvms do not contain some of the classes available in a full-fledged jvm. &lt;br/&gt;
For j9_foundation, there is no java.sql.Driver. For the other versions, there is no support for javax.sql.DataSource, XADataSource, nor ConnectionPooledDataSource.&lt;/p&gt;

&lt;p&gt;What was happening is that after the contribution of adding a number of methods returning these various datasources in util/BaseJDBCTestCase.java these j9-jvms would fall over with a ClassDefNotFoundError. Apparently this happened as soon as a method was added that returned one of these not-available classes, even though the tests in question did not actually use those methods.&lt;/p&gt;

&lt;p&gt;So, I have 2 questions:&lt;br/&gt;
1. could that be a jvm bug - i.e. when should a ClassDefNotFoundError get thrown? In this case, it gets thrown when the superclass is returning a non-available class...&lt;br/&gt;
2. Either way, is it acceptable to split the BaseJDBCTestClass in two in the way I did with this patch?&lt;/p&gt;</comment>
                            <comment id="12413127" author="andreask" created="Wed, 24 May 2006 22:35:52 +0100"  >&lt;p&gt;I think you may have forgotten to add the new file SubBaseJDBCTestCase using svn add, so it is not showing up in the diff / stat file.&lt;/p&gt;

&lt;p&gt;1. I guess some code refers to a class which is not part of the runtime library for the VM. Do you know if  javax.sql.ConnectionPoolDataSource is part of the class library for the VM ? &lt;br/&gt;
2. I guess it could be ok, however I have not seen the code yet.&lt;/p&gt;

&lt;p&gt;Do you have a stack trace for the error ? I think it could be in the .tmp file for the test.&lt;/p&gt;</comment>
                            <comment id="12413143" author="myrna" created="Thu, 25 May 2006 00:36:17 +0100"  >&lt;p&gt;Attaching a patch - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1308&quot; title=&quot;Tests jdbcapi/HoldabilityTest.junit, jdbcapi/UpdateXXXTest.junit,jdbcapi/SURTest.junit fail on wctme5.7_foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1308&quot;&gt;&lt;del&gt;DERBY-1308&lt;/del&gt;&lt;/a&gt;_2_20060524.* - that actually has the SubBaseJDBCTestCase.java in it.&lt;/p&gt;

&lt;p&gt;There never is a stack trace - the only output one sees is like this:&lt;br/&gt;
for wctme5.7 (j9 2.2) jvm: &lt;br/&gt;
&amp;gt; Failed to invoke suite():java.lang.NoClassDefFoundError: javax.sql.DataSource&lt;br/&gt;
for wctme5.7_foundation:&lt;br/&gt;
&amp;gt; Failed to invoke suite():java.lang.NoClassDefFoundError: javax.sql.ConnectionPoolDataSource&lt;/p&gt;

&lt;p&gt;And that is the complete contents of the .tmp also.&lt;/p&gt;

&lt;p&gt;If anyone has a suggestion on where I can add a printStack trace so I can see more please let me know.&lt;/p&gt;

&lt;p&gt;If this is ok, how about the name, any quick suggestions for something more meaningful than SubBaseJDBCTestCase.java?&lt;br/&gt;
I didn&apos;t want to change the name for BaseJDBCTestCase.java because it would involve changing various jdbc4 tests...&lt;/p&gt;</comment>
                            <comment id="12413162" author="andreask" created="Thu, 25 May 2006 02:55:54 +0100"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;What was happening is that after the contribution of adding a number of methods returning these various datasources in &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;util/BaseJDBCTestCase.java these j9-jvms would fall over with a ClassDefNotFoundError. Apparently this happened as soon as a &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;method was added that returned one of these not-available classes, even though the tests in question did not actually use those &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;methods.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;I think that the methods added, should not be part of BaseJDBCTestCase. BaseJDBCTestCase should be usable in all environments, and if some special methods are needed, they could be made part of a subclass of BaseJDBCTestCase.&lt;/p&gt;

&lt;p&gt;Therefore: instead of introducing a new super class (called SubBaseJDBCTestCase), BaseJDBCTestCase should be simplified to only contain the methods which can be used in all environments. &lt;br/&gt;
Since the added methods are static anyway, they do not even need to be part of the BaseTestCase hierarchy, i.e they could be in a utiltity class, however if you prefer to use inheritance, you could add a subclass of BaseJDBCTestCase with these methods (i.e if the methods are JDBC4 specific, the new subclass could be named BaseJDBC4TestCase). Then you would not need to change the SURTest, UpdateXXTest, .., to run in J2ME environment, however some of the JDBC4 testcase classes would need to be changed to inherit from BaseJDBC4TestCase.&lt;/p&gt;</comment>
                            <comment id="12413579" author="myrna" created="Sat, 27 May 2006 21:50:25 +0100"  >&lt;p&gt;Attaching patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1308&quot; title=&quot;Tests jdbcapi/HoldabilityTest.junit, jdbcapi/UpdateXXXTest.junit,jdbcapi/SURTest.junit fail on wctme5.7_foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1308&quot;&gt;&lt;del&gt;DERBY-1308&lt;/del&gt;&lt;/a&gt;_3_20060527.&lt;b&gt;. In this patch, I moved the get*DataSource&lt;/b&gt; methods from functionTests/util/BaseJDBCTestCase.java to a new file, functionTests/util/TestDataSourceFactory.java, and the method getDefaultSourceProperties into functionTests/util/TestConfiguration.java.&lt;br/&gt;
I adjusted affected tests that I could find, and verified the affected tests where applicable  with wctme5.7, wsdd5.6, wctme5.7_foundation. jdk142 and jdk16.&lt;/p&gt;</comment>
                            <comment id="12413781" author="andreask" created="Tue, 30 May 2006 16:39:12 +0100"  >&lt;p&gt;The patch looks good. I have tested it on the jdbc40 test suite, and got no failures in the junit tests.&lt;br/&gt;
A minor comment: utility classes like TestDataSourceFactory and TestUtil should have a private constructor to enforce noninstantiabilit, since these classes are not designed to be instantiated. Do not need to add it as part of this patch, it could be handled in a separate jira.&lt;/p&gt;</comment>
                            <comment id="12413822" author="knutanders" created="Tue, 30 May 2006 20:54:26 +0100"  >&lt;p&gt;Committed revision 410267.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12334512" name="DERBY-1308_20060524.diff" size="8136" author="myrna" created="Wed, 24 May 2006 22:09:38 +0100"/>
                            <attachment id="12334511" name="DERBY-1308_20060524.stat" size="438" author="myrna" created="Wed, 24 May 2006 22:09:38 +0100"/>
                            <attachment id="12334525" name="DERBY-1308_2_20060524.diff" size="15995" author="myrna" created="Thu, 25 May 2006 00:36:17 +0100"/>
                            <attachment id="12334524" name="DERBY-1308_2_20060524.stat" size="527" author="myrna" created="Thu, 25 May 2006 00:36:17 +0100"/>
                            <attachment id="12334655" name="DERBY-1308_3_20060527.diff" size="21375" author="myrna" created="Sat, 27 May 2006 21:50:25 +0100"/>
                            <attachment id="12334654" name="DERBY-1308_3_20060527.stat" size="1077" author="myrna" created="Sat, 27 May 2006 21:50:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 May 2006 15:18:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22425</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0w5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>