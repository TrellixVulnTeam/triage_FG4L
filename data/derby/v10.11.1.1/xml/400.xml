<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:38:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-400/DERBY-400.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-400] Network client message strings not internationalized</title>
                <link>https://issues.apache.org/jira/browse/DERBY-400</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In investigating &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-254&quot; title=&quot;SQLStates for SQLExceptions thrown from the client should not be null and should match embedded where possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-254&quot;&gt;&lt;del&gt;DERBY-254&lt;/del&gt;&lt;/a&gt;, I discovered that all SQLExceptions are thrown with hardcoded English error messages.  This needs to be modified to use message string resource bundles similar to the embedded code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12311751">DERBY-400</key>
            <summary>Network client message strings not internationalized</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidvc">David Van Couvering</assignee>
                                    <reporter username="davidvc">David Van Couvering</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2005 08:49:23 +0100</created>
                <updated>Wed, 12 Jul 2006 05:10:57 +0100</updated>
                            <resolved>Thu, 22 Jun 2006 07:39:03 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                            <comments>
                            <comment id="12315636" author="davidvc" created="Wed, 13 Jul 2005 08:04:01 +0100"  >&lt;p&gt;Internationalizing error messages can&apos;t be done without common code framework without a lot of code duplication.&lt;/p&gt;</comment>
                            <comment id="12318690" author="davidvc" created="Sat, 13 Aug 2005 09:35:05 +0100"  >&lt;p&gt;I am attaching the initial changes I have made for this.  This includes the i18n framework for the client and the conversion of a few exceptions along with the associated unit test.  THIS IS NOT FOR INCLUSION IN THE PROJECT.  I am posting this for review to make sure I am on the right track and there are no concerns before I go ahead and convert a bunch of error messages.&lt;/p&gt;

&lt;p&gt;Things to note:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;As Dan suggested, I am building a new i18n framework rather than trying to create a common jar file&lt;/li&gt;
	&lt;li&gt;I am adding support for SQL States at the same time by using the SQL State as the message id for the message properties file.  This is the same model as in the engine&lt;/li&gt;
	&lt;li&gt;I am using &quot;XN&quot; for implementation-defined SQL State to indicate client SQL states&lt;/li&gt;
	&lt;li&gt;I am using standard SQL States where they apply&lt;/li&gt;
	&lt;li&gt;I am using static methods to &quot;encapsulate&quot; messages with the appropriate parameter list.  This is the same approach as used in the tools&lt;/li&gt;
	&lt;li&gt;The LocalizedResource class is a cut-and-paste from the tools directory, with a lot of code that did not apply removed (code used for formatting, etc., by ij)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Your comments are much appreciated; I do hope to avoid making a lot of changes and then realizing my approach was flawed in some way.  So far it looks to be working pretty well... &lt;/p&gt;</comment>
                            <comment id="12319402" author="davidvc" created="Sat, 20 Aug 2005 02:56:25 +0100"  >&lt;p&gt;I am attaching a patch to show the work in progress.  In particular, I discovered that there were some exceptions that had the same SQL State but different message texts.  As a result I constructed the MessageId class, which encapsulates a specific message id and lets you have unique message ids with the same SQL state.  This encapsulation also has other advantages: you can detect duplicate use of the same id, and test code can ensure that all message ids declared are actually tested.&lt;/p&gt;

&lt;p&gt;I also am defining the SQLException error code from network client exceptions to be more in line with the error codes coming from the server.  I did this by adding a new value to org.apache.derby.engine.iapi.error.ExceptionSeverity.java called NETWORK_CLIENT_SEVERITY.  In the past this error code was hardcoded to -99999.&lt;/p&gt;

&lt;p&gt;I would appreciate any feedback.with this approach before I forge ahead too much farther.  I would also like to suggest that, after running full tests, I take a snapshot and get it checked in.  These changes should be fully backward compatible; the only visible change is that some SQL Exceptions will have a SQL state defined now, while others will still have a null SQL State.&lt;/p&gt;</comment>
                            <comment id="12363004" author="davidvc" created="Wed, 18 Jan 2006 02:35:54 +0000"  >&lt;p&gt;This patch includes the following changes.  I know I have the karma to check this in directly, but I would like it to be reviewed if someone has the inclination.  I am in the middle of running tests.  I can check it in once tests pass and the review comments have been addressed.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Based on Dan&apos;s review comments for the last incarnation of this patch, org.apache.derby.client.am.SqlException no longer extends java.sql.SQLException in preparation for JDBC4 support.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;All public JDBC methods now throw SQLException instead of SqlException.  They generally catch SqlException and convert this to SQLException using a utility routine on SqlException.  This was a &lt;b&gt;lot&lt;/b&gt; of work and the diff is quite large.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Some internal methods call public JDBC methods.  These methods need to continue throwing SqlException or you end up with the majority of internal code having to handle and/or throw SQLException.  So these internal methods take SQLExceptions and wrap them in a SqlException.  The underlying SQLException is then &quot;unwrapped&quot; prior to throwing the exception to the application code&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I have added new constructors on SqlException that take a message id instead of a hardcoded string.  I use a simple wrapper class, MessageId, to hold the message id, otherwise the old constructors for SqlException have matching signatures and the compiler complains (as well it should).  This wrapper class can be refactored out once the i18n conversion is complete.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I have added code in org.apache.derby.shared.common that provides utility routines for i18n and exception management.  This code is currently only used by the client side.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I have migrated about a dozen client-side messages to be internationalized&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12363758" author="davidvc" created="Tue, 24 Jan 2006 08:06:23 +0000"  >&lt;p&gt;The SQL States will be fixed as part of internationalizing the client messages&lt;/p&gt;</comment>
                            <comment id="12363876" author="davidvc" created="Wed, 25 Jan 2006 05:35:04 +0000"  >&lt;p&gt;For those of you working on internationalizing the network client messages, you need to take care when choosing a SQL State for a new client messages (e.g. one that is not duplicated or closely duplicated in the engine&apos;s messages.properties file).&lt;/p&gt;

&lt;p&gt;In most cases you can use &quot;XN&quot; which means a vendor-specific SQL State.  However, if the error matches a predefined SQL State (either a class, subclass, or entire state) in the SQL2003 spec, you should use that.  For example, an exception that affects the connection should use the prefix 08.  A connection failure must be exactly 08006, connection does not exist 08003.  The SQL State definitions can be found in section 23.1 of the SQL 2003 spec.&lt;/p&gt;

&lt;p&gt;Somebody correct me if I&apos;m missing something, but there is also an entire set of SQLStates required by DRDA which (in general) are currently not being set by the client code.  These SQLStates are defined in Chapter 8 (Volume 1) of the DRDA spec.  We will need to set the SQL State appropriately based on this spec in the org/apache/derby/client/net classes.   I know this code is hard to parse through if you&apos;re new to DRDA, so please do send out email if you need help/guidance.&lt;/p&gt;

&lt;p&gt;Note that doing this as correctly as possible is important for portability and also for future JDBC4 work where you create the appropriate SQLException subclass based on the SQL State...&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;David &lt;/p&gt;</comment>
                            <comment id="12363877" author="davidvc" created="Wed, 25 Jan 2006 05:38:06 +0000"  >&lt;p&gt;By the way, the SQL 2003 spec states that there is a specific SQL State class for Remote Database Access, which is &quot;HZ&quot;.  It refers to table 33, &quot;SQLState Class Codes for RDA&quot;, which is a zen moment, because the table is empty.&lt;/p&gt;

&lt;p&gt;Can anyone explain the relationship between the &quot;HZ&quot; class for RDA and the SQL States defined in the DRDA spec, which do not make any reference or use of the &quot;HZ&quot; class?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="12374436" author="kmarsden" created="Fri, 14 Apr 2006 07:26:40 +0100"  >&lt;p&gt;I was wondering if there was a document describing the  new SQLStates and SQLState changes  that are being  made as part of this effort that users could use in preparation for the change.&lt;/p&gt;
</comment>
                            <comment id="12374438" author="davidvc" created="Fri, 14 Apr 2006 07:37:55 +0100"  >&lt;p&gt;A document does not currently exist, but I can write something up, that would be good.  Can you describe what it is you think would be valuable &amp;#8211; not only in terms of content but also in terms of layout?  That would be really helpful.  &lt;/p&gt;

&lt;p&gt;I&apos;m assuming this should be part of the official documentation, not just a Wiki page, right?&lt;/p&gt;</comment>
                            <comment id="12374443" author="kmarsden" created="Fri, 14 Apr 2006 08:44:12 +0100"  >&lt;p&gt;For the documentation I would guess this page would be  updated:&lt;br/&gt;
&lt;a href=&quot;http://db.apache.org/derby/docs/10.1/ref/rrefexcept71493.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.1/ref/rrefexcept71493.html&lt;/a&gt;&lt;br/&gt;
and that would be a great start.&lt;/p&gt;

&lt;p&gt;But in addition  I am looking for  something that would help users prepare to move to 10.2 so would  separate out the  new SQLStates,  any changes that were made that were not just a move from a null SQLState to a new SQLState, any error code changes etc.  A Wiki page would be fine for that. Ultimately I  think some rendition of  it would go in the release notes.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12417212" author="davidvc" created="Thu, 22 Jun 2006 07:39:03 +0100"  >&lt;p&gt;Resolved, all sub-tasks completed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="32161">DERBY-254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12322033" name="DERBY-400.diff" size="888764" author="davidvc" created="Wed, 18 Jan 2006 02:35:54 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12327893">DERBY-838</subtask>
                            <subtask id="12327906">DERBY-839</subtask>
                            <subtask id="12327907">DERBY-840</subtask>
                            <subtask id="12327908">DERBY-841</subtask>
                            <subtask id="12327909">DERBY-842</subtask>
                            <subtask id="12327910">DERBY-843</subtask>
                            <subtask id="12327911">DERBY-844</subtask>
                            <subtask id="12327912">DERBY-845</subtask>
                            <subtask id="12327913">DERBY-846</subtask>
                            <subtask id="12327916">DERBY-847</subtask>
                            <subtask id="12327917">DERBY-848</subtask>
                            <subtask id="12327918">DERBY-849</subtask>
                            <subtask id="12327919">DERBY-850</subtask>
                            <subtask id="12327920">DERBY-851</subtask>
                            <subtask id="12327921">DERBY-852</subtask>
                            <subtask id="12328023">DERBY-860</subtask>
                            <subtask id="12331736">DERBY-1185</subtask>
                            <subtask id="12331737">DERBY-1186</subtask>
                            <subtask id="12343534">DERBY-1349</subtask>
                            <subtask id="12343535">DERBY-1350</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Apr 2006 06:26:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>