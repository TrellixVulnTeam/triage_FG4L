<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1245/DERBY-1245.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1245] Add o.a.derby.client.am.ClobWriter test coverage</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1245</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;org.apache.derby.client.am.ClobWriter.java is currently not covered by functional tests. I&apos;ll patch something up in jdbcapi/lobStreams.java and stick a diff here when it works. =)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12332520">DERBY-1245</key>
            <summary>Add o.a.derby.client.am.ClobWriter test coverage</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="31584">DERBY-209</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andersmo">Anders Morken</assignee>
                                    <reporter username="andersmo">Anders Morken</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Apr 2006 07:16:13 +0100</created>
                <updated>Sat, 27 May 2006 02:31:12 +0100</updated>
                            <resolved>Sat, 27 May 2006 02:28:51 +0100</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12375828" author="andersmo" created="Sun, 23 Apr 2006 06:19:48 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1245&quot; title=&quot;Add o.a.derby.client.am.ClobWriter test coverage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1245&quot;&gt;&lt;del&gt;DERBY-1245&lt;/del&gt;&lt;/a&gt;-lobStream-v1.patch adds testcases for o.a.derby.client.am.ClobWriter.java to the jdbcapi/lobStreams.java test. The new tests are mostly copied from the old ones, with a few minimal comments thrown in for good measure. The master file has also been updated.&lt;/p&gt;

&lt;p&gt;A bug in ClobWriter was discovered and fixed when writing this, I&apos;ll attach a separate (even if it is trivial) patch for that.&lt;/p&gt;</comment>
                            <comment id="12375830" author="andersmo" created="Sun, 23 Apr 2006 06:29:10 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1245&quot; title=&quot;Add o.a.derby.client.am.ClobWriter test coverage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1245&quot;&gt;&lt;del&gt;DERBY-1245&lt;/del&gt;&lt;/a&gt;-collateraldamage-v1.patch fixes a little bug in o.a.d.client.am.ClobWriter.java&apos;s write(int c) method. In it&apos;s original implementation the int parameter was passed directly to the StringBuffer.append() method, resulting in the int being converted to it&apos;s string representation and then appended. (i.e. passing the char &apos;a&apos; to write(int c) would append the string &quot;97&quot; to the StringBuffer and thus the Clob. 97 is the ASCII code for the character &apos;a&apos;.)&lt;/p&gt;

&lt;p&gt;This patch should go in along with the other &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1245&quot; title=&quot;Add o.a.derby.client.am.ClobWriter test coverage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1245&quot;&gt;&lt;del&gt;DERBY-1245&lt;/del&gt;&lt;/a&gt; patch if we want tests to pass.  =)&lt;/p&gt;</comment>
                            <comment id="12375832" author="andersmo" created="Sun, 23 Apr 2006 06:36:15 +0100"  >&lt;p&gt;By the way, there&apos;s a public constructor in ClobWriter.java that takes no arguments. I can&apos;t see that it is used anywhere, and any ClobWriter objects initalized with it will throw NullPointerExceptions as soon as anyone tries to use them, so I&apos;d suggest removing it?&lt;/p&gt;</comment>
                            <comment id="12412246" author="kmarsden" created="Thu, 18 May 2006 06:00:57 +0100"  >&lt;p&gt;I took a brief look at the patch  and was concerned about encoding safety, but maybe it is ok based on the java.io.Writer definition for write.  I am not really sure.&lt;/p&gt;

&lt;p&gt;     public void write(int c) {&lt;br/&gt;
         StringBuffer sb = new StringBuffer(clob_.string_.substring(0, (int) offset_ - 1));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sb.append(c);&lt;br/&gt;
+        sb.append((char)c);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Perhaps you could add this test to encodingTests suite and maybe someone else could take a look at this too.&lt;/p&gt;</comment>
                            <comment id="12413486" author="andersmo" created="Fri, 26 May 2006 23:29:32 +0100"  >&lt;p&gt;I and Kathey have discussed this a bit on IRC, and since java.io.Writer#write(int c) also just casts the int to a char, we haven&apos;t come up with anything better. Also: The lobStreams patch is already included in the encodingTests suite, and the encodingTests suite still passes.&lt;br/&gt;
Weirdness: The encodingTests insisted on being run with the IBM jvm, but skipped all the individual tests then, because they require sun java 1.5+. Running the suite using IBM&apos;s java with Sun&apos;s 1.5 java first in $PATH worked. =)&lt;/p&gt;</comment>
                            <comment id="12413492" author="kmarsden" created="Sat, 27 May 2006 00:20:02 +0100"  >&lt;p&gt;Submitted to the trunk:&lt;/p&gt;

&lt;p&gt;Date: Fri May 26 09:08:48 2006&lt;br/&gt;
New Revision: 409688&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=409688&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=409688&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1245&quot; title=&quot;Add o.a.derby.client.am.ClobWriter test coverage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1245&quot;&gt;&lt;del&gt;DERBY-1245&lt;/del&gt;&lt;/a&gt; Add o.a.derby.client.am.ClobWriter test coverage&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1354&quot; title=&quot;Writer.write(int c) to writer from Clob.setCharacterStream(long pos) appends integer value, not character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1354&quot;&gt;&lt;del&gt;DERBY-1354&lt;/del&gt;&lt;/a&gt; Writer.write(int c) to writer from Clob.setCharacterStream(long pos) appends integer value, not character&lt;/p&gt;

&lt;p&gt;Thank you Anders for your tremendous patience waiting for commit on this patch.  Patches to add code coverage are very valuable. &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1354&quot; title=&quot;Writer.write(int c) to writer from Clob.setCharacterStream(long pos) appends integer value, not character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1354&quot;&gt;&lt;del&gt;DERBY-1354&lt;/del&gt;&lt;/a&gt; will also make a great addtion to 10.1.3.   For 10.1.3 port instructions see:&lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/db-derby/TenOneThreeRelease#head-5c8ce405978fa523af8eeb4bf4c4231d0faf7770&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/TenOneThreeRelease#head-5c8ce405978fa523af8eeb4bf4c4231d0faf7770&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12413519" author="andersmo" created="Sat, 27 May 2006 02:31:12 +0100"  >&lt;p&gt;Thanks to Kathey for help and advice, and patiently waiting for my slow reply while I&apos;ve been playing with other things. =)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12343574">DERBY-1354</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12325723" name="DERBY-1245-collateraldamage-v1.patch" size="683" author="andersmo" created="Sun, 23 Apr 2006 06:29:10 +0100"/>
                            <attachment id="12325722" name="DERBY-1245-lobStream-v1.patch" size="17269" author="andersmo" created="Sun, 23 Apr 2006 06:19:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 May 2006 05:00:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy169b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>