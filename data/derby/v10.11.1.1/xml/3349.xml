<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:09:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3349/DERBY-3349.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3349] Nested WHERE EXISTS queries need improved testing</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3349</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3301&quot; title=&quot;Incorrect result from query with nested EXIST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3301&quot;&gt;&lt;del&gt;DERBY-3301&lt;/del&gt;&lt;/a&gt; reported an error in subquery flattening of nested WHERE EXISTS clauses, or WHERE EXISTS subqueries. The query returned the wrong number of rows. &lt;/p&gt;

&lt;p&gt;There is currently some tests for WHERE EXISTS, but none for nested WHERE EXISTS clauses.&lt;br/&gt;
See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3301&quot; title=&quot;Incorrect result from query with nested EXIST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3301&quot;&gt;&lt;del&gt;DERBY-3301&lt;/del&gt;&lt;/a&gt; for a full sql repro.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12387028">DERBY-3349</key>
            <summary>Nested WHERE EXISTS queries need improved testing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomanie">Thomas Nielsen</assignee>
                                    <reporter username="thomanie">Thomas Nielsen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jan 2008 11:50:58 +0000</created>
                <updated>Mon, 18 Feb 2008 13:12:24 +0000</updated>
                            <resolved>Mon, 18 Feb 2008 12:52:04 +0000</resolved>
                                    <version>10.2.2.0</version>
                    <version>10.3.2.1</version>
                                    <fixVersion>10.3.3.0</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12563229" author="thomanie" created="Mon, 28 Jan 2008 18:23:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3301&quot; title=&quot;Incorrect result from query with nested EXIST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3301&quot;&gt;&lt;del&gt;DERBY-3301&lt;/del&gt;&lt;/a&gt; adds a test with two variations over the repro script, but there are other combinations that needs testing:&lt;/p&gt;

&lt;p&gt;Army&amp;gt; I think a minimal list of combinations to check should be:&lt;br/&gt;
Army &amp;gt;  * WHERE EXISTS ... WHERE EXISTS (done with test-1.diff &amp;#8211; thanks!)&lt;br/&gt;
Army &amp;gt;  * WHERE EXISTS ... WHERE IN (done with test-2.diff &amp;#8211; thanks!)&lt;br/&gt;
Army &amp;gt;  * WHERE EXISTS .. WHERE ANY&lt;br/&gt;
Army &amp;gt;  * WHERE IN ... WHERE IN (I posted an example in my previous post, but it&apos;s not included in the tests)&lt;br/&gt;
Army &amp;gt;  * WHERE ANY ... WHERE ANY &lt;/p&gt;</comment>
                            <comment id="12564159" author="thomanie" created="Wed, 30 Jan 2008 20:06:17 +0000"  >&lt;p&gt;There are 4 more variations of problematic queries in the &apos;derby-3301-extra.sql&apos; script attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3301&quot; title=&quot;Incorrect result from query with nested EXIST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3301&quot;&gt;&lt;del&gt;DERBY-3301&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12566644" author="thomanie" created="Thu, 7 Feb 2008 15:46:53 +0000"  >&lt;p&gt;I added the 5 other queries in the sql repro posted in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3301&quot; title=&quot;Incorrect result from query with nested EXIST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3301&quot;&gt;&lt;del&gt;DERBY-3301&lt;/del&gt;&lt;/a&gt; to the new junit NestedWhereSubqueryTest.&lt;br/&gt;
The updated test pass with the 1 patch applied.&lt;/p&gt;

&lt;p&gt;I think this update should be commited to be on the safe side. But there is still more work to be done to complete this issue, mainly around covering all the combinations Army listed earlier in 3301. &lt;/p&gt;</comment>
                            <comment id="12566661" author="thomanie" created="Thu, 7 Feb 2008 16:12:20 +0000"  >&lt;p&gt;Army had added the WHERE IN ... WHERE IN variant earlier in 3301.&lt;/p&gt;

&lt;p&gt;With the 2 patch applied we currently test these combinations:&lt;br/&gt;
WHERE EXISTS ... WHERE EXISTS&lt;br/&gt;
WHERE EXISTS ... WHERE IN&lt;br/&gt;
WHERE EXISTS ... WHERE EXISTS ... WHERE &lt;br/&gt;
WHERE EXISTS ... WHERE 1=1 AND EXISTS&lt;br/&gt;
WHERE IN ... WHERE IN&lt;/p&gt;

&lt;p&gt;Still left to do:&lt;br/&gt;
WHERE EXISTS ... WHERE ANY&lt;br/&gt;
WHERE ANY ... WHERE ANY&lt;/p&gt;</comment>
                            <comment id="12569553" author="thomanie" created="Sat, 16 Feb 2008 13:13:57 +0000"  >&lt;p&gt;Attaching updated d3349-3.diff that runs the last two combinations &lt;br/&gt;
WHERE EXISTS ... WHERE ANY&lt;br/&gt;
WHERE ANY ... WHERE ANY&lt;/p&gt;

&lt;p&gt;The test was made part of the suite as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3301&quot; title=&quot;Incorrect result from query with nested EXIST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3301&quot;&gt;&lt;del&gt;DERBY-3301&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
The updated test passes when run against the trunk.&lt;/p&gt;</comment>
                            <comment id="12569858" author="dyret" created="Mon, 18 Feb 2008 11:32:30 +0000"  >&lt;p&gt;Committed revision 628686.&lt;/p&gt;</comment>
                            <comment id="12569862" author="dyret" created="Mon, 18 Feb 2008 11:43:12 +0000"  >&lt;p&gt;Updating fix version in preparation for merge to 10.3&lt;/p&gt;</comment>
                            <comment id="12569881" author="dyret" created="Mon, 18 Feb 2008 12:37:08 +0000"  >&lt;p&gt;Merged to 10.3 in revision 628704.&lt;/p&gt;</comment>
                            <comment id="12569886" author="thomanie" created="Mon, 18 Feb 2008 12:52:04 +0000"  >&lt;p&gt;Thanks Dyre&lt;/p&gt;</comment>
                            <comment id="12569893" author="thomanie" created="Mon, 18 Feb 2008 13:12:24 +0000"  >&lt;p&gt;Closing the issue now that the updated test has been added/merged to trunk (10.4) and 10.3.&lt;/p&gt;

&lt;p&gt;Please feel free to reopen if you think there are more queries that needs to be tested.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12385521">DERBY-3301</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12374980" name="d3349-1.diff" size="5392" author="thomanie" created="Thu, 7 Feb 2008 15:46:53 +0000"/>
                            <attachment id="12374979" name="d3349-1.stat" size="98" author="thomanie" created="Thu, 7 Feb 2008 15:46:53 +0000"/>
                            <attachment id="12374989" name="d3349-2.diff" size="6358" author="thomanie" created="Thu, 7 Feb 2008 16:12:20 +0000"/>
                            <attachment id="12375749" name="d3349-3.diff" size="8498" author="thomanie" created="Sat, 16 Feb 2008 13:13:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Feb 2008 11:32:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>