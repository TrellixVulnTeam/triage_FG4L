<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1597/DERBY-1597.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1597] Scripts in frameworks direcotry needs to be revisted to set up CLASSPATH properly</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1597</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Need to revisit scripts in directory frameworks/embedded/bin and frameworks/NetworkServer/bin for setting up CLASSPATH properly. The current problem is as following:&lt;/p&gt;

&lt;p&gt;If user already has a CLASSPATH set on their system, the CLASSPATH is not set again within the script. Therefore, there are no derby classes in the CLASSPATH which results in java command failing as it can not find the derby class it is calling. Basically, to make the scripts work, user has to either issue  command &quot;set CLASSPATH=&quot; or have derby jar files be appended to their system CLASSPATH before running any frameworks batch script.&lt;/p&gt;

&lt;p&gt;In ksh scripts, there is same problem except that the user has to issue  command &quot;export CLASSPATH=&quot; or have derby jar files be appended to their system CLASSPATH only once as whatever CLASSPATH is set up by scripts is not visible once the script is done.&lt;/p&gt;

&lt;p&gt;So I am proposing the following solution so that frameworks scripts work properly without interfering with system classpath or without any setup from user.&lt;/p&gt;

&lt;p&gt;In batch scripts:-&lt;br/&gt;
----------------------&lt;br/&gt;
1.  Before line &quot;call &quot;%DERBY_INSTALL%&quot;/frameworks/embedded/bin/setEmbeddedCP.bat&quot;, save the current classpath as follows:&lt;br/&gt;
set SAVED_CLASSPATH=%CLASSPATH%&lt;/p&gt;

&lt;p&gt;2.  Replace  the following lines:&lt;br/&gt;
@if &lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (&amp;quot;%CLASSPATH%&amp;quot;==) not found.&lt;/span&gt; call &quot;%DERBY_INSTALL%&quot;/frameworks/embedded/bin/setEmbeddedCP.bat&lt;br/&gt;
@if &quot;%CLASSPATH%&quot; == &quot;&quot; call &quot;%DERBY_INSTALL%&quot;/frameworks/embedded/bin/setEmbeddedCP.bat&lt;br/&gt;
with&lt;br/&gt;
call &quot;%DERBY_INSTALL%&quot;/frameworks/embedded/bin/setEmbeddedCP.bat&lt;/p&gt;

&lt;p&gt;Note: I have given the above as example only. The name of script that is getting called may be different.&lt;/p&gt;

&lt;p&gt;3. At the end of script, reset the CLASSPATH to system CLASSPATH as follows:&lt;br/&gt;
set CLASSPATH=%SAVED_CLASSPATH%&lt;/p&gt;

&lt;p&gt;In korn scripts:-&lt;br/&gt;
----------------------&lt;br/&gt;
In ksh script, even though system classpath is only modified within the script and is not effective once script exits, to be consistent with batch scripts, do the following:&lt;/p&gt;

&lt;p&gt;1.  Before line  &quot;. &quot;$DERBY_HOME&quot;/frameworks/embedded/bin/setEmbeddedCP.ksh&quot; save the current classpath as follows:&lt;br/&gt;
export SAVED_CLASSPATH=$CLASSPATH&lt;/p&gt;

&lt;p&gt;2.  Replace  the following lines:&lt;/p&gt;

&lt;p&gt;[ -z &quot;$CLASSPATH&quot; ] &amp;amp;&amp;amp; {&lt;br/&gt;
  . &quot;$DERBY_HOME&quot;/frameworks/embedded/bin/setEmbeddedCP.ksh&lt;br/&gt;
}&lt;br/&gt;
with&lt;br/&gt;
. &quot;$DERBY_HOME&quot;/frameworks/embedded/bin/setEmbeddedCP.ksh&lt;/p&gt;

&lt;p&gt;Note: I have given the above as example only. The name of script that is getting called may be different.&lt;/p&gt;

&lt;p&gt;3. At the end of script, reset the CLASSPATH to system CLASSPATH as follows:&lt;br/&gt;
export CLASSPATH=$SAVED_CLASSPATH&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12346725">DERBY-1597</key>
            <summary>Scripts in frameworks direcotry needs to be revisted to set up CLASSPATH properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fuzzylogic">Andrew McIntyre</assignee>
                                    <reporter username="ramank">Ramandeep Kaur</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jul 2006 23:45:38 +0100</created>
                <updated>Thu, 13 Dec 2007 09:05:06 +0000</updated>
                            <resolved>Fri, 11 Aug 2006 06:27:36 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Demos/Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12425010" author="ramank" created="Tue, 1 Aug 2006 21:54:56 +0100"  >&lt;p&gt;Actually, after thinking about it more, I am proposing the following solution:-&lt;/p&gt;

&lt;p&gt;Give classpath while invoking java classes as following:&lt;br/&gt;
&quot;%JAVA_HOME%/bin/java&quot; -cp %MYCLASSPATH% org.apache.derby.tools.ij&lt;/p&gt;

&lt;p&gt;Where MYCLASSPATH will include derby jar files along with system classpath appended to it.&lt;/p&gt;

&lt;p&gt;Will submit patch.&lt;/p&gt;
</comment>
                            <comment id="12426264" author="ramank" created="Mon, 7 Aug 2006 16:56:39 +0100"  >&lt;p&gt;Submitting patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1597&quot; title=&quot;Scripts in frameworks direcotry needs to be revisted to set up CLASSPATH properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1597&quot;&gt;&lt;del&gt;DERBY-1597&lt;/del&gt;&lt;/a&gt;. Please review it.&lt;/p&gt;</comment>
                            <comment id="12426438" author="fuzzylogic" created="Tue, 8 Aug 2006 06:08:25 +0100"  >&lt;p&gt;The attached patch is ok, but I think that we should put $CLASSPATH first in the list of arguments to -cp, in case the user wants to override the Derby jars in their installation with another set that they have put into their classpath. Comments?&lt;/p&gt;</comment>
                            <comment id="12427138" author="fuzzylogic" created="Thu, 10 Aug 2006 09:35:03 +0100"  >&lt;p&gt;Marking 10.2.0.0, patch is available, minor edits needed before commit.&lt;/p&gt;</comment>
                            <comment id="12427424" author="fuzzylogic" created="Fri, 11 Aug 2006 06:24:52 +0100"  >&lt;p&gt;I retract the previous comment, the patch as-is provides the same behavior as today without the need to call the set*CP scripts. I will commit this patch shortly.&lt;/p&gt;</comment>
                            <comment id="12427425" author="fuzzylogic" created="Fri, 11 Aug 2006 06:27:36 +0100"  >&lt;p&gt;Committed to trunk with revision 430681.&lt;/p&gt;</comment>
                            <comment id="12551385" author="fuzzylogic" created="Thu, 13 Dec 2007 09:05:06 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12338296" name="DERBY-1597.diff" size="20889" author="ramank" created="Mon, 7 Aug 2006 16:56:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Aug 2006 05:08:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22587</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy103z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>