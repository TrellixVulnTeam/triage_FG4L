<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2000/DERBY-2000.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2000] A SecurityManager is not always installed when running JUnit tests/suites</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2000</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;A SecurityManager is not always installed (early enough) when running JUnit tests/suites.&lt;br/&gt;
For instance, when running &apos;jdbcapi.BlobClob4Blob&apos; a SecurityManager was installed during database boot and revealed problems with the policy file, but when the same test was run as part of &apos;suites.All&apos;, no errors were seen.&lt;br/&gt;
BTW: There is nothing wrong with BlobClob4Blob.&lt;/p&gt;

&lt;p&gt;It seems that &apos;BaseTestCase.runBare&apos;, which installs a SecurityManager, is bypassed when running code in decorators (most importantly setUp).&lt;br/&gt;
Since a SecurityManager is installed as soon as a test method is run, this bug is not that severe.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12353965">DERBY-2000</key>
            <summary>A SecurityManager is not always installed when running JUnit tests/suites</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djd">Daniel John Debrunner</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Oct 2006 18:29:34 +0100</created>
                <updated>Fri, 15 Jun 2007 15:18:19 +0100</updated>
                            <resolved>Wed, 23 May 2007 20:50:17 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12444917" author="djd" created="Thu, 26 Oct 2006 17:31:07 +0100"  >&lt;p&gt;I don&apos;t think the code in BaseTestCase.runBare is being by-passed but instead decorators have no code to install a security manager since they do not extend  BaseTestCase. &lt;/p&gt;</comment>
                            <comment id="12444924" author="djd" created="Thu, 26 Oct 2006 18:04:42 +0100"  >&lt;p&gt;If I run BlobClob4BlobTest standalone or part of All I always see a security manager installed in its setUp method.&lt;/p&gt;</comment>
                            <comment id="12445137" author="kristwaa" created="Fri, 27 Oct 2006 11:01:47 +0100"  >&lt;p&gt;My comments were a bit imprecise. &lt;br/&gt;
You are correct that a security manager will be installed when running the tests themselves, as I wrote in the description. However, a security manager might not have been installed when running setUp in the first TestSetup, depending on whether a subclass of BaseTestCase has been run before or not.&lt;/p&gt;

&lt;p&gt;Since the setUp-method of a TestSetup (or more generally, the run-method of TestDecorator) can potentially do a lot, for instance boot the Derby engine or start a network server, I think it should be run with a security manager.&lt;/p&gt;

&lt;p&gt;How do we ensure this is happening?&lt;br/&gt;
Should we write a BaseTestDecorator/BaseTestSetup, in the same style as BaseTestCase?&lt;/p&gt;</comment>
                            <comment id="12447752" author="kristwaa" created="Tue, 7 Nov 2006 11:24:50 +0000"  >&lt;p&gt;&apos;derby-2000-1a.diff&apos; is a workaround to allow all out JUnit tests to be able to create derby.system.home (defaults to &apos;&amp;lt;current_working_directory&amp;gt;/system&apos; for the tests). The only change is adding the &apos;write&apos; permission for the derby.system.home directory itself, and a comment.&lt;/p&gt;

&lt;p&gt;Briefly stated, some tests fail because the code is run under a security manager, while the rest succeed because the decorator/setup code runs without a security manager (and Derby is normally booted here).&lt;br/&gt;
Further, the reason why failing tests do not fail when run as part of a larger suite, is that derby.system.home has already been created then.&lt;/p&gt;

&lt;p&gt;I ran all JUnit tests individually and the All suite. Only known problems spotted. An example test to run to see the effect of the patch, is &apos;jdbcapi/UpdateXXXTest&apos;.&lt;/p&gt;

&lt;p&gt;Patch ready for review/commit.&lt;/p&gt;</comment>
                            <comment id="12448427" author="knutanders" created="Thu, 9 Nov 2006 11:08:58 +0000"  >&lt;p&gt;I think it is reasonable that derby.jar is granted permission to create derby.system.home. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12448502" author="kristwaa" created="Thu, 9 Nov 2006 15:17:18 +0000"  >&lt;p&gt;Committed &apos; derby-2000-1a.diff&apos; with revision 472902.&lt;br/&gt;
Not resolving/closing, as the issue of whether or not to run decorator/test-setup code under a security manager hasn&apos;t been decided yet.&lt;/p&gt;</comment>
                            <comment id="12498340" author="djd" created="Wed, 23 May 2007 20:50:16 +0100"  >&lt;p&gt;COmmitted revision 541044.&lt;/p&gt;

&lt;p&gt;Created a new BaseTestSetup class that installs the SecurityManager like BaseTestCase, modified several decorators to extend this new class rather than TestSetup.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12344464" name="derby-2000-1a.diff" size="986" author="kristwaa" created="Tue, 7 Nov 2006 11:24:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Oct 2006 16:31:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy11rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39937</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>