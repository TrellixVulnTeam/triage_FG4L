<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:19:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2466/DERBY-2466.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2466] Allow dynamic reloading of the security policy file</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2466</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The spec attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2109&quot; title=&quot;System privileges&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2109&quot;&gt;DERBY-2109&lt;/a&gt; describes how to allow the policy file to be dynamically reloaded while a server is running: We add a getPolicy permission to the Basic policy and we add a DBA-owned system procedure, SYSCS_UTIL.SYSCS_REFRESH_SECURITY_POLICY(), which reloads the policy file. This JIRA tracks that work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12365287">DERBY-2466</key>
            <summary>Allow dynamic reloading of the security policy file</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2007 19:27:16 +0000</created>
                <updated>Fri, 21 Jan 2011 18:53:31 +0000</updated>
                            <resolved>Tue, 10 Apr 2007 16:57:45 +0100</resolved>
                                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Miscellaneous</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12482192" author="djd" created="Mon, 19 Mar 2007 19:39:32 +0000"  >&lt;p&gt;Shouldn&apos;t the name be SYSCS_RELOAD_SECURITY_POLICY, not refresh? Refresh implies that the actual policy file is being changed by this procedure.&lt;/p&gt;</comment>
                            <comment id="12482206" author="rhillegas" created="Mon, 19 Mar 2007 20:34:41 +0000"  >&lt;p&gt;I&apos;m fine with SYSCS_RELOAD_SECURITY_POLICY. I will update the spec later to reflect this.&lt;/p&gt;</comment>
                            <comment id="12483669" author="rhillegas" created="Fri, 23 Mar 2007 17:38:30 +0000"  >&lt;p&gt;Attaching patch for this feature. This patch adds a system procedure for reloading the security policy file. This patch also adds a regression test which verifies that only the DBA can reload the policy file and only if the getPolicy() permission has been granted by the already-loaded policy.&lt;/p&gt;

&lt;p&gt;This patch touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java&lt;br/&gt;
M      java/engine/org/apache/derby/impl/jdbc/Util.java&lt;br/&gt;
M      java/engine/org/apache/derby/catalog/SystemProcedures.java&lt;/p&gt;

&lt;p&gt;  Wire the new procedure into our SQL machinery.&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/loc/messages.xml&lt;br/&gt;
M      java/shared/org/apache/derby/shared/common/reference/SQLState.java&lt;/p&gt;

&lt;p&gt;   Add a new error message, provoked when the procedure is called but getPolicy() wasn&apos;t granted.&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/drda/server.policy&lt;/p&gt;

&lt;p&gt;   Add getPolicy() privilege to the Basic policy file loaded by the secure server.&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.modified.policy&lt;br/&gt;
A      java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.unreloadable.policy&lt;br/&gt;
A      java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/_Suite.java&lt;br/&gt;
A      java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy&lt;/p&gt;

&lt;p&gt;   Wire the new unit test into our JUnit machinery.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/util/derby_tests.policy&lt;/p&gt;

&lt;p&gt;   Add getPolicy() permission to the default testing policy.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/junit/BaseTestCase.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/junit/SecurityManagerSetup.java&lt;/p&gt;

&lt;p&gt;   Make it possible for the decorators to unload the security manager and load a new one with a different policy file.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/junit/TestConfiguration.java&lt;/p&gt;

&lt;p&gt;   Replace some magic strings with a constant and make the DBO;s name public. Also add a privilege execution block around a case exposed by the new test.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/junit/SupportFilesSetup.java&lt;/p&gt;

&lt;p&gt;   Replace some magic strings with constants and make them public.&lt;/p&gt;

</comment>
                            <comment id="12483686" author="djd" created="Fri, 23 Mar 2007 18:09:35 +0000"  >&lt;p&gt;M      java/drda/org/apache/derby/drda/server.policy&lt;/p&gt;

&lt;p&gt;   Add getPolicy() privilege to the Basic policy file loaded by the secure server.&lt;/p&gt;


&lt;p&gt;Why is this needed. The builtin policy cannot change, so why is there any need to re-load it?&lt;/p&gt;</comment>
                            <comment id="12483693" author="rhillegas" created="Fri, 23 Mar 2007 18:25:08 +0000"  >&lt;p&gt;Hi Dan,&lt;/p&gt;

&lt;p&gt;In my mind, the Basic server policy has two purposes:&lt;/p&gt;

&lt;p&gt;1) It captures the basic permissions needed to run the server under a security  manager.&lt;/p&gt;

&lt;p&gt;2) It is the customizable template which users copy then edit in order to fit Derby into their secure runtime environment.&lt;/p&gt;

&lt;p&gt;I agree that the getPolicy() permission is not needed for the first purpose. However, it&apos;s good to have it for the second purpose because it brings this issue to customer&apos;s attention: they will need this permission if they want to change their customized policies on the fly.&lt;/p&gt;</comment>
                            <comment id="12483715" author="djd" created="Fri, 23 Mar 2007 19:18:33 +0000"  >&lt;p&gt;I think having the same policy file for a secure environment and a template is not a good approach.&lt;/p&gt;

&lt;p&gt;It leads to additional security analysis for the secure environment, e.g. in this case how does the getPolicy permission affect security? If it isn&apos;t there, then there&apos;s no need to worry about it.&lt;br/&gt;
It can lead to lower security for the secure environment if the entries only for template purposes can somehow be abused.&lt;/p&gt;

&lt;p&gt;It&apos;s not like there&apos;s a huge amount of effort in creating a different template file, the contents are not that complex.&lt;/p&gt;</comment>
                            <comment id="12483723" author="rhillegas" created="Fri, 23 Mar 2007 19:46:52 +0000"  >&lt;p&gt;I can separate (1) from (2) and create a different template file. As we add new Derby permissions, we will have to remember to add them to both files.&lt;/p&gt;

&lt;p&gt;In the interests of not muddying this initial patch, I propose to make these changes in follow-on submissions:&lt;/p&gt;

&lt;p&gt;1) Create the new template file.&lt;/p&gt;

&lt;p&gt;2) Adjust the release-build scripts so that the template policy rather than the Basic policy is copied to demo/templates/server.policy&lt;/p&gt;

&lt;p&gt;3) Make appropriate changes to the Secure Server spec (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2196&quot; title=&quot;Run standalone network server with security manager by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2196&quot;&gt;&lt;del&gt;DERBY-2196&lt;/del&gt;&lt;/a&gt;) and System Privileges (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2109&quot; title=&quot;System privileges&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2109&quot;&gt;DERBY-2109&lt;/a&gt;) spec.&lt;/p&gt;

&lt;p&gt;4) Adjust the user guides to reflect the separation of (1) from (2).&lt;/p&gt;</comment>
                            <comment id="12484130" author="rhillegas" created="Mon, 26 Mar 2007 14:58:35 +0100"  >&lt;p&gt;Committed the first patch at subversion revision 522515.&lt;/p&gt;</comment>
                            <comment id="12484170" author="rhillegas" created="Mon, 26 Mar 2007 18:48:38 +0100"  >&lt;p&gt;Commit derby-2466-02.diff at subversion revision 522579. This creates a separate template policy file exposed when we build a release. This patch removes the getPolicy() permission from the server&apos;s Basic policy.&lt;/p&gt;</comment>
                            <comment id="12484491" author="rhillegas" created="Tue, 27 Mar 2007 17:15:02 +0100"  >&lt;p&gt;Committed derby-2466-03.diff at subversion revision 522982. This causes the SecurityPolicyReloadingTest to only run against jar files. Touches the following file:&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.java&lt;/p&gt;</comment>
                            <comment id="12484919" author="rhillegas" created="Wed, 28 Mar 2007 17:31:38 +0100"  >&lt;p&gt;Committed derby-2466-04.diff at subversion revision 523399.. This adds an upgrade test for the creation of the new policy-reloading procedure. Test runs successfully when upgrading from the following releases: 10.1.1.0  10.1.2.1  10.1.3.1  10.2.1.6  10.2.2.0.&lt;/p&gt;</comment>
                            <comment id="12485625" author="rhillegas" created="Fri, 30 Mar 2007 20:52:41 +0100"  >&lt;p&gt;Attaching derby-2466-05.diff, which I committed at subversion revision 524252. This attempts to fix an NPE in the SecurityPolicyReloadingTest setup, which I am unable to reproduce but which turns up in some environments, including the tinderbox.&lt;/p&gt;</comment>
                            <comment id="12487803" author="rhillegas" created="Tue, 10 Apr 2007 16:57:45 +0100"  >&lt;p&gt;I believe this work is done.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12365830">DERBY-2489</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12356374">DERBY-2109</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12354096" name="derby-2466-01.diff" size="37784" author="rhillegas" created="Fri, 23 Mar 2007 17:38:30 +0000"/>
                            <attachment id="12354235" name="derby-2466-02.diff" size="3923" author="rhillegas" created="Mon, 26 Mar 2007 18:48:38 +0100"/>
                            <attachment id="12354332" name="derby-2466-03.diff" size="950" author="rhillegas" created="Tue, 27 Mar 2007 17:15:01 +0100"/>
                            <attachment id="12354452" name="derby-2466-04.diff" size="2586" author="rhillegas" created="Wed, 28 Mar 2007 17:31:38 +0100"/>
                            <attachment id="12354633" name="derby-2466-05.diff" size="1059" author="rhillegas" created="Fri, 30 Mar 2007 20:52:41 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Mar 2007 19:39:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0jgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>