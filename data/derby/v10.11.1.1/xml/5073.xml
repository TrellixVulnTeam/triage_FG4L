<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:20:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5073/DERBY-5073.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5073] Derby deadlocks without recourse on simultaneous correlated subqueries</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5073</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When the following two queries are run against tables that contain the necessary fields, using multiple threads, Derby deadlocks and none of the queries ever returns.  Derby apparently detects no deadlock condition, either.&lt;/p&gt;

&lt;p&gt;SELECT t0.* FROM jobqueue t0 WHERE EXISTS(SELECT &apos;x&apos; FROM carrydown t1 WHERE t1.parentidhash IN &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid) AND t0.jobid=?&lt;br/&gt;
SELECT t0.* FROM jobqueue t0 WHERE EXISTS(SELECT &apos;x&apos; FROM carrydown t1 WHERE t1.parentidhash IN &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.newField=?) AND t0.jobid=?&lt;/p&gt;

&lt;p&gt;This code comes from Apache ManifoldCF, and has occurred when there are five or more threads trying to execute these two queries at the same time.  Originally we found this on 10.5.3.0.  It was hoped that 10.7.1.1 would fix the problem, but it hasn&apos;t.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12499864">DERBY-5073</key>
            <summary>Derby deadlocks without recourse on simultaneous correlated subqueries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="kwright@metacarta.com">Karl Wright</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 Feb 2011 16:31:10 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:45 +0100</updated>
                            <resolved>Wed, 23 Mar 2011 12:27:32 +0000</resolved>
                                    <version>10.0.2.1</version>
                    <version>10.1.2.1</version>
                    <version>10.2.2.0</version>
                    <version>10.3.3.0</version>
                    <version>10.4.2.0</version>
                    <version>10.5.3.0</version>
                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                    <version>10.8.1.2</version>
                                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12999989" author="kwright@metacarta.com" created="Sun, 27 Feb 2011 16:38:25 +0000"  >&lt;p&gt;A thread dump on 10.5.3.0 yielded multiple threads waiting with stack frames looking like this:&lt;/p&gt;

&lt;p&gt;&quot;Thread-1100&quot; daemon prio=6 tid=0x03be9800 nid=0xd70 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x05a5e000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.lang.Object.wait(Object.java:485)&lt;br/&gt;
        at org.apache.derby.impl.services.locks.ActiveLock.waitForGrant(Unknown Source)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x285dc400&amp;gt; (a org.apache.derby.impl.services.locks.ActiveLock)&lt;br/&gt;
        at org.apache.derby.impl.services.locks.ConcurrentLockSet.lockObject(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.services.locks.ConcurrentLockSet.zeroDurationLockObject(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.services.locks.AbstractPool.zeroDurationlockObject(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.services.locks.ConcurrentPool.zeroDurationlockObject(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.raw.xact.RowLocking2nohold.lockRecordForRead(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.heap.HeapController.lockRow(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.heap.HeapController.lockRow(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockRowOnPage(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScanRow(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.btree.index.B2IRowLockingRR.lockScanRow(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.store.access.btree.BTreeScan.fetchNextGroup(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.BulkTableScanResultSet.reloadArray(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.BulkTableScanResultSet.getNextRowCore(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.IndexRowToBaseRowResultSet.getNextRowCore(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.NestedLoopJoinResultSet.getNextRowCore(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x2858b388&amp;gt; (a org.apache.derby.impl.jdbc.EmbedConnection40)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13000324" author="knutanders" created="Mon, 28 Feb 2011 15:17:12 +0000"  >&lt;p&gt;Has the application set derby.locks.waitTimeout? The Object.wait() call in the stack trace should have a timeout, unless derby.locks.waitTimeout is negative, so I don&apos;t understand how it could be hanging there forever.&lt;/p&gt;

&lt;p&gt;Are there any threads updating the database in parallel with the threads that perform these queries, or are the SELECT threads the only threads working on the database?&lt;/p&gt;</comment>
                            <comment id="13000338" author="kwright@metacarta.com" created="Mon, 28 Feb 2011 15:29:23 +0000"  >&lt;p&gt;(1) Yes, the wait timeout is set to infinity.&lt;br/&gt;
(2) Database updating is happening at the same time by other threads, but I could not find any thread that was blocking in an update when this block occurred.  However, I should note that these queries &lt;b&gt;are&lt;/b&gt; likely to be taking place within a transaction, and it is possible that writes occurred in the same transaction already, but I cannot confirm that from the thread dump.&lt;/p&gt;</comment>
                            <comment id="13000406" author="knutanders" created="Mon, 28 Feb 2011 17:02:06 +0000"  >&lt;p&gt;Is derby.locks.deadlockTimeout also set to infinity? If so, that would explain why the deadlock isn&apos;t reported, if a deadlock is the underlying problem here.&lt;/p&gt;

&lt;p&gt;Note that a thread doesn&apos;t need to be blocked in an update in order to hold an exclusive lock. It&apos;s enough that it has performed an update without committing or aborting the transaction after on. You can connect to the database and execute the statement &quot;select * from syscs_diag.lock_table&quot; to find out if some transaction is holding an exclusive lock.&lt;/p&gt;</comment>
                            <comment id="13000409" author="kwright@metacarta.com" created="Mon, 28 Feb 2011 17:08:17 +0000"  >&lt;p&gt;The deadlock timeout is NOT set to infinity, but to 60 seconds.  It would be perfectly OK if Derby returned the appropriate SQL exception indicating deadlock under this circumstance.&lt;/p&gt;

&lt;p&gt;The suggestion to connect to the database is great but unfortunately this is using the embedded JDBC driver, so trying to connect while it&apos;s hung probably won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="13000411" author="kwright@metacarta.com" created="Mon, 28 Feb 2011 17:16:39 +0000"  >&lt;p&gt;Also, just to make it very clear, I am already certain that a transaction IS holding an exclusive lock.  The issue is that deadlock is never detected by Derby, and it must be detected.  If it is not, there is no possibility of recovery from this situation, other than relying on the lock timeout, which then limits the longest running transaction I can have.&lt;/p&gt;</comment>
                            <comment id="13000564" author="knutanders" created="Mon, 28 Feb 2011 22:14:05 +0000"  >&lt;p&gt;Note that Derby will only detect a deadlock if the thread holding the exclusive lock is also waiting for a lock itself. That is, there has to be a cycle in the wait graph. It&apos;s not enough that a transaction is simply holding an exclusive lock for a very long time without committing. I&apos;m not sure if that&apos;s what&apos;s happening here, but that situation is supposed to be handled by the lock timeout.&lt;/p&gt;

&lt;p&gt;One way to connect to the embedded database while the system is hung, is to set the system property derby.drda.startNetworkServer=true - &lt;a href=&quot;http://db.apache.org/derby/docs/10.7/adminguide/radminconfigstartnetworkserver.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.7/adminguide/radminconfigstartnetworkserver.html&lt;/a&gt; - and connect to the database with ij using the client driver.&lt;/p&gt;</comment>
                            <comment id="13000605" author="kwright@metacarta.com" created="Mon, 28 Feb 2011 23:27:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;Note that Derby will only detect a deadlock if the thread holding the exclusive lock is also waiting for a lock itself.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Of course.  I see no reason why that should not be the case here.  There are no threads with a transaction open that are waiting on anything else.&lt;/p&gt;</comment>
                            <comment id="13001385" author="kwright@metacarta.com" created="Wed, 2 Mar 2011 11:52:12 +0000"  >&lt;p&gt;The locks table at the time of a hang looks like this:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from syscs_diag.lock_table;&lt;/p&gt;


&lt;p&gt;XID            |TYPE |MODE|TABLENAME&lt;br/&gt;
303942         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303956         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303959         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303962         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;304018         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303974         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303987         |TABLE|IX  |JOBS&lt;/p&gt;

&lt;p&gt;303962         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303965         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303968         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303971         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303974         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303977         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303987         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;304018         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303942         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303956         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303959         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303962         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303965         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303968         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303971         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303974         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303977         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;304018         |TABLE|IS  |CARRYDOWN&lt;/p&gt;

&lt;p&gt;303942         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303956         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303959         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303962         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303965         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303968         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303971         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303974         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303977         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;304018         |TABLE|IX  |PREREQEVENTS&lt;/p&gt;

&lt;p&gt;303956         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303977         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303968         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303965         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303959         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303971         |ROW  |X   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303942         |ROW  |S   |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303942         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303942         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303956         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303956         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303959         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303959         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303962         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303962         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303965         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303965         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303968         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303968         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303971         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303971         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303974         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303974         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303977         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303977         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;303987         |TABLE|IS  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;304018         |TABLE|IX  |JOBQUEUE&lt;/p&gt;

&lt;p&gt;304018         |TABLE|IS  |JOBQUEUE&lt;/p&gt;


&lt;p&gt;63 rows selected&lt;/p&gt;

&lt;p&gt;Since the process is still active, other threads that the ones that get hung may well be active.  I have confirmed that all blocked threads are blocked due to database, and for no other reason.&lt;/p&gt;
</comment>
                            <comment id="13001558" author="kwright@metacarta.com" created="Wed, 2 Mar 2011 19:14:03 +0000"  >&lt;p&gt;Is there anything else that would be helpful to diagnose why Derby does not detect a deadlock here?  I am not certain how to read this output, nor am I sure it will help because it doesn&apos;t tell us what lock the code is TRYING to grab.&lt;/p&gt;</comment>
                            <comment id="13001687" author="knutanders" created="Wed, 2 Mar 2011 21:46:50 +0000"  >&lt;p&gt;Hi Karl,&lt;/p&gt;

&lt;p&gt;It might be useful to include the STATE column from the diagnostic table, so that we see which locks are granted and which are being waited for. Then we may be able to reconstruct the wait graph and see if it contains any cycles that the deadlock detection algorithm has missed.&lt;/p&gt;</comment>
                            <comment id="13001724" author="kwright@metacarta.com" created="Wed, 2 Mar 2011 22:27:32 +0000"  >&lt;p&gt;I&apos;m sorry - which diagnostic table has a STATE column you wish to see?  I&apos;ve printed all columns from the Locks diagnostic table, as you can see, and there is no STATE column.&lt;/p&gt;</comment>
                            <comment id="13001911" author="knutanders" created="Thu, 3 Mar 2011 08:29:03 +0000"  >&lt;p&gt;That&apos;s odd... When I execute &quot;select * from syscs_diag.lock_table&quot; in ij, I see the following columns: XID, TYPE, MODE, TABLENAME, LOCKNAME, STATE, TABLETYPE, LOCKCOUNT, INDEXNAME.&lt;/p&gt;</comment>
                            <comment id="13001957" author="kwright@metacarta.com" created="Thu, 3 Mar 2011 11:07:22 +0000"  >&lt;p&gt;It looks to me like this is getting truncated.  I&apos;m confirming; the guy with this problem who I am in communication with may have inadvertantly done something funny with cut-and-paste. When I do the same thing here, I get the columns you describe.  Stay tuned.&lt;/p&gt;</comment>
                            <comment id="13001989" author="kwright@metacarta.com" created="Thu, 3 Mar 2011 13:39:29 +0000"  >&lt;p&gt;Ok, this is better:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from syscs_diag.lock_table;&lt;br/&gt;
XID            |TYPE |MODE|TABLENAME                                                                                                                       |LOCKNAME            |STATE|TABLETYPE|LOCK&amp;amp;|INDEXNAME&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br/&gt;
---------------------------&lt;br/&gt;
319444         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,279)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319447         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319450         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319453         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319459         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319456         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319462         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319553         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,279)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319435         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,306)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319447         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,304)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319435         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319440         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319444         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319447         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319450         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319453         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319459         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319456         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319462         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319553         |TABLE|IS  |CARRYDOWN                                                                                                                       |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;

&lt;p&gt;319435         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319440         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319444         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319447         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319450         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319453         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319456         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319459         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319462         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319553         |TABLE|IX  |PREREQEVENTS                                                                                                                    |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319459         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,308)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;323231         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,308)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319456         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,307)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319440         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,295)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319435         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,295)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319444         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,295)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319450         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,297)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319553         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,300)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319462         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,301)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319440         |ROW  |S   |JOBQUEUE                                                                                                                        |(3,301)             |WAIT |T        |0    |NULL&lt;/p&gt;

&lt;p&gt;319453         |ROW  |X   |JOBQUEUE                                                                                                                        |(3,302)             |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319440         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319435         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319435         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319440         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319444         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319444         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319447         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319447         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319450         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319450         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319453         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319453         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319456         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319459         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319459         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319456         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319462         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319462         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;319553         |TABLE|IX  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |11   |NULL&lt;/p&gt;

&lt;p&gt;319553         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |2    |NULL&lt;/p&gt;

&lt;p&gt;323231         |TABLE|IS  |JOBQUEUE                                                                                                                        |Tablelock           |GRANT|T        |1    |NULL&lt;/p&gt;


&lt;p&gt;62 rows selected&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13002003" author="bryanpendleton" created="Thu, 3 Mar 2011 14:32:39 +0000"  >&lt;p&gt;It looks like there is indeed a cycle:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;319462 is waiting on 319444&lt;/li&gt;
	&lt;li&gt;319444 is waiting on 319440&lt;/li&gt;
	&lt;li&gt;319440 is waiting on 319462&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13002004" author="kwright@metacarta.com" created="Thu, 3 Mar 2011 14:47:52 +0000"  >&lt;p&gt;So, am I wrong to expect that Derby should detect this deadlock, and throw the appropriate SQLException?&lt;/p&gt;</comment>
                            <comment id="13004573" author="knutanders" created="Wed, 9 Mar 2011 14:34:10 +0000"  >&lt;p&gt;Hi Karl,&lt;/p&gt;

&lt;p&gt;Yes, that looks like a cycle, and Derby should have been able to detect it and throw an SQLException.&lt;/p&gt;</comment>
                            <comment id="13004662" author="knutanders" created="Wed, 9 Mar 2011 17:15:58 +0000"  >&lt;p&gt;I think I&apos;m able to reproduce the problem. At least, I&apos;ve been able to construct a deadlock that looks similar to the one in the lock dump Karl provided. See the attached Java program (Derby5073.java). There&apos;s a cycle involving three transactions, as well as some other transactions that wait on the same locks without actually being part of the cycle themselves.&lt;/p&gt;

&lt;p&gt;When disabling waitTimeout, the program runs forever, whereas it should have been terminated with a deadlock error. Even when it&apos;s stuck, it keeps one CPU fully occupied. Perhaps an infinite loop in the deadlock detection?&lt;/p&gt;</comment>
                            <comment id="13004666" author="knutanders" created="Wed, 9 Mar 2011 17:26:40 +0000"  >&lt;p&gt;Seen all the way back to 10.0.&lt;/p&gt;</comment>
                            <comment id="13005042" author="knutanders" created="Thu, 10 Mar 2011 12:08:29 +0000"  >&lt;p&gt;I took a look at this in the debugger. The deadlock is indeed detected, and a victim is chosen and woken up. The victim rechecks that there still is a deadlock, so that it doesn&apos;t have to give up if it&apos;s no longer part of a deadlock. When rechecking, it finds that there is a deadlock, and picks another victim, whereas it goes back to sleep waiting for the lock again itself. The new victim will do the same, and pick yet another victim. And so it goes on.&lt;/p&gt;

&lt;p&gt;There is code in place to prevent a victim from picking another victim when rechecking the deadlock, but for some reason that code doesn&apos;t work in this scenario.&lt;/p&gt;</comment>
                            <comment id="13005090" author="bryanpendleton" created="Thu, 10 Mar 2011 14:54:39 +0000"  >&lt;p&gt;For those of us vicariously following along, where is this code?&lt;/p&gt;</comment>
                            <comment id="13005128" author="knutanders" created="Thu, 10 Mar 2011 16:07:07 +0000"  >&lt;p&gt;The code is in Deadlock.handle():&lt;/p&gt;

&lt;p&gt;			// See if the checker is in the deadlock and we&lt;br/&gt;
			// already picked as a victim&lt;br/&gt;
			if ((checker.equals(space)) &amp;amp;&amp;amp; (deadlockWake == Constants.WAITING_LOCK_DEADLOCK)) &lt;/p&gt;
{
				victim = checker;
				break;
			}

&lt;p&gt;It never kicks in, and instead it goes further down in the method and wakes another victim:&lt;/p&gt;

&lt;p&gt;		ActiveLock victimLock = (ActiveLock) waiters.get(victim);&lt;/p&gt;

&lt;p&gt;		victimLock.wakeUp(Constants.WAITING_LOCK_DEADLOCK);&lt;/p&gt;

&lt;p&gt;The new victim wakes up from it&apos;s waiting state in ActiveLock.waitForGrant()/ConcurrentLockSet.lockObject(), calls checkDeadlock() and ends up Deadlock.handle() again.&lt;/p&gt;

&lt;p&gt;I think the problem may be caused by the following piece of code in Deadlock.look():&lt;/p&gt;

&lt;p&gt;				} else &lt;/p&gt;
{
					// simply waiting on another waiter
					space = waitingLock.getCompatabilitySpace();
				}

&lt;p&gt;As far as I can see, this code doesn&apos;t make any sense. space will already have the same value as waitingLock.getCompatabilitySpace(), so the operation is actually a no-op. (waitingLock is obtained by calling waiters.get(space), and the waiters Map is built up by (waitingLock.getCompatabilitySpace(), waitingLock) value pairs, see LockControl.addWaiters().) Furthermore, this leads to &quot;space&quot; being considered twice in a row by the deadlock detection, so that it thinks that the transaction owning that compatibility space is waiting for one of its own locks. It therefore detects the deadlock prematurely, and before it has seen all transactions involved in it, and incorrectly concludes that the original victim wasn&apos;t involved.&lt;/p&gt;

&lt;p&gt;By changing that last piece of code from a no-op to actually moving one step ahead in the wait graph, the repro does fail with a deadlock error. That is, change the assignment to:&lt;/p&gt;

&lt;p&gt;    space = ((ActiveLock) waitOn).getCompatabilitySpace();&lt;/p&gt;

&lt;p&gt;I tried running the regression tests with that change, and they all passed. I do find the deadlock detection code a bit hard to follow, so I&apos;m not totally convinced this is the right change.&lt;/p&gt;</comment>
                            <comment id="13005129" author="knutanders" created="Thu, 10 Mar 2011 16:09:47 +0000"  >&lt;p&gt;Here&apos;s the patch I tested.&lt;/p&gt;</comment>
                            <comment id="13005401" author="mikem" created="Thu, 10 Mar 2011 23:38:02 +0000"  >&lt;p&gt;I have stared at this code before and also find it hard to understand.  There are hardly any tests in the code for deadlocks so passing does not mean much.&lt;br/&gt;
A long time ago I looked at &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt; and did not get very far, I wonder if it related.  your comments there and here seem similar.&lt;/p&gt;</comment>
                            <comment id="13005556" author="knutanders" created="Fri, 11 Mar 2011 08:49:52 +0000"  >&lt;p&gt;With the patch applied, the repro attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt; indeed fails with the expected deadlock exception, so those two issues may be related.&lt;/p&gt;</comment>
                            <comment id="13005558" author="knutanders" created="Fri, 11 Mar 2011 08:56:02 +0000"  >&lt;p&gt;When running the repro attached here, I do get a deadlock with the patch. However, typically three or four of the six threads get a deadlock exception, whereas it should be enough with one victim. Not sure if that&apos;s something caused by my change, or if it&apos;s a general problem with our algorithm that it just picks one random transaction that happens to be waiting for a lock in the cycle, even if the transaction isn&apos;t necessarily part of the cycle itself.&lt;/p&gt;</comment>
                            <comment id="13005564" author="knutanders" created="Fri, 11 Mar 2011 09:16:23 +0000"  >&lt;p&gt;To illustrate the point in my previous comment, here&apos;s the first deadlock error when running the attached repro:&lt;/p&gt;

&lt;p&gt;A lock could not be obtained due to a deadlock, cycle of locks and waiters is:&lt;br/&gt;
Lock : ROW, T, (1,7)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{182, S}
&lt;p&gt; , APP, select x from t where x = 1&lt;br/&gt;
  Granted XID : &lt;/p&gt;
{162, X}
&lt;p&gt; &lt;br/&gt;
Lock : ROW, T, (1,8)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{162, S}
&lt;p&gt; , APP, select x from t where x = 2&lt;br/&gt;
  Granted XID : &lt;/p&gt;
{166, X}
&lt;p&gt; &lt;br/&gt;
Lock : ROW, T, (1,9)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{166, S}
&lt;p&gt; , APP, select x from t where x = 3&lt;br/&gt;
  Granted XID : &lt;/p&gt;
{170, X}
&lt;p&gt; &lt;br/&gt;
Lock : ROW, T, (1,7)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{170, S}
&lt;p&gt; , APP, select x from t where x = 1&lt;br/&gt;
. The selected victim is XID : 182.&lt;/p&gt;

&lt;p&gt;No one is waiting for tx 182, so aborting it doesn&apos;t really resolve the deadlock, and therefore other transactions will have to be aborted later. Also note that the data for row (1,7) has been split in two in the output.&lt;/p&gt;</comment>
                            <comment id="13005590" author="knutanders" created="Fri, 11 Mar 2011 10:37:53 +0000"  >&lt;p&gt;It looks to me as if the problem is that the deadlock detection gets confused by the threads that wait for shared locks on the same rows as the transactions involved in the deadlock are waiting for shared locks on.&lt;/p&gt;

&lt;p&gt;Those transactions are not really involved in the deadlock. But because they started waiting for the locks earlier than the threads actually involved in the deadlock, they are first in the queue of waiters. The deadlock detection algorithm incorrectly assumes that these transactions are blocking for the transactions involved in the deadlock.&lt;/p&gt;

&lt;p&gt;The assumption is incorrect because they are all waiting for shared locks, so once the first waiter in the queue gets it, the second waiter will also get it. This means that the second waiter isn&apos;t waiting for the first waiter here, but they&apos;re both waiting for some other lock that is blocking them both.&lt;/p&gt;

&lt;p&gt;The attached modified patch (1b) changes the algorithm so that it skips past chains of waiters that have compatible lock requests. That made the repro fail with exactly one deadlock exception.&lt;/p&gt;</comment>
                            <comment id="13005591" author="knutanders" created="Fri, 11 Mar 2011 10:41:02 +0000"  >&lt;p&gt;The deadlock reported with the 1b patch looks like this:&lt;/p&gt;

&lt;p&gt;A lock could not be obtained due to a deadlock, cycle of locks and waiters is:&lt;br/&gt;
Lock : ROW, T, (1,8)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{162, S}
&lt;p&gt; , APP, select x from t where x = 2&lt;br/&gt;
  Granted XID : &lt;/p&gt;
{166, X}
&lt;p&gt; &lt;br/&gt;
Lock : ROW, T, (1,9)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{166, S}
&lt;p&gt; , APP, select x from t where x = 3&lt;br/&gt;
  Granted XID : &lt;/p&gt;
{170, X}
&lt;p&gt; &lt;br/&gt;
Lock : ROW, T, (1,7)&lt;br/&gt;
  Waiting XID : &lt;/p&gt;
{170, S}
&lt;p&gt; , APP, select x from t where x = 1&lt;br/&gt;
  Granted XID : &lt;/p&gt;
{162, X}
&lt;p&gt; &lt;br/&gt;
. The selected victim is XID : 162.&lt;/p&gt;

&lt;p&gt;This looks more reasonable than what the 1a patch reported, I think.&lt;/p&gt;</comment>
                            <comment id="13005667" author="bryanpendleton" created="Fri, 11 Mar 2011 14:58:57 +0000"  >&lt;p&gt;Your analysis makes a lot of sense to me. Thank you for taking the time to&lt;br/&gt;
walk us through the code and your thought process, it has been very illuminating.&lt;/p&gt;

&lt;p&gt;I think you have identified a real problem and your approach is good.&lt;/p&gt;</comment>
                            <comment id="13005722" author="kmarsden" created="Fri, 11 Mar 2011 17:07:43 +0000"  >&lt;p&gt;Thank you Knut for working on this issue.  I stared at the deadlock code a very long time n the context of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt;  before giving up and so am thrilled to see you are able to get your head around it.   I want to ask a favor while you are in there.  If there is any insight in the form of comments that you can add to the deadlock code, I think that would be extremely educational and helpful to anyone that has to visit the deadlock  code again.&lt;/p&gt;</comment>
                            <comment id="13005764" author="knutanders" created="Fri, 11 Mar 2011 18:19:33 +0000"  >&lt;p&gt;Thanks for the feedback, Bryan and Kathey. I&apos;ll polish the patch and incorporate the repros attached to this issue and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt; into a JUnit test that can run as part of the regression test suite.&lt;/p&gt;

&lt;p&gt;Since we don&apos;t know for sure that the repro I attached reproduces the exact same problem as originally reported, we should probably check in the fix under &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt; and mark that issue as resolved. When Karl gets a chance to verify that this also fixes the problem he saw, we can close this issue as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And, yes, I&apos;ll annotate the deadlock detection code with comments reflecting my understanding of what it does and how it should work. Good idea. Thanks!&lt;/p&gt;</comment>
                            <comment id="13005768" author="kwright@metacarta.com" created="Fri, 11 Mar 2011 18:22:55 +0000"  >&lt;p&gt;I&apos;ll keep my eyes open for the final patch, and be ready to try it out.&lt;/p&gt;</comment>
                            <comment id="13006509" author="knutanders" created="Mon, 14 Mar 2011 16:49:42 +0000"  >&lt;p&gt;Hi Karl,&lt;/p&gt;

&lt;p&gt;I&apos;ve posted a patch over at &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt; (derby-3980-1a.diff) and also committed it to the subversion repository. It would be great if you could test if the fix also solves the problem you&apos;re seeing.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13006584" author="kwright@metacarta.com" created="Mon, 14 Mar 2011 19:21:42 +0000"  >&lt;p&gt;I built Derby trunk and checked it in, and notified the field that a fix may possibly be had for the problem they&apos;ve been seeing.  I expect they will respond in about 12 hours, and then I will let you know.&lt;/p&gt;</comment>
                            <comment id="13007399" author="kwright@metacarta.com" created="Wed, 16 Mar 2011 10:10:38 +0000"  >&lt;p&gt;The tests at the client site have passed, so the fix is working.&lt;/p&gt;</comment>
                            <comment id="13007709" author="kwright@metacarta.com" created="Wed, 16 Mar 2011 22:07:49 +0000"  >&lt;p&gt;Hmm.  I merged the fix into 10.7.1.1, and ran a test, and got a deadlock hang again. Strange.&lt;br/&gt;
I&apos;m going to have to try the same case with a straight trunk build just to be sure I didn&apos;t mess anything up.&lt;/p&gt;</comment>
                            <comment id="13007722" author="kwright@metacarta.com" created="Wed, 16 Mar 2011 23:00:36 +0000"  >&lt;p&gt;A trunk build does the same thing on my test case.  I got a thread dump when I thought it had locked itself up.  There were a whole pile of threads all waiting for grants, and then there was this thread:&lt;/p&gt;

&lt;p&gt;Thread-24341&quot; daemon prio=6 tid=0x05934400 nid=0x1cd4 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0816e000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
	at java.util.Hashtable.get(Hashtable.java:333)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x29280528&amp;gt; (a java.util.Hashtable)&lt;br/&gt;
	at org.apache.derby.shared.common.sanity.SanityManager.DEBUG_ON(SanityManager.java:229)&lt;br/&gt;
	at org.apache.derby.impl.services.locks.AbstractPool.lockObject(AbstractPool.java:101)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.RowLocking2.lockRecordForRead(RowLocking2.java:165)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapController.lockRow(HeapController.java:520)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapController.lockRow(HeapController.java:638)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockRowOnPage(B2IRowLocking3.java:280)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScanRow(B2IRowLocking3.java:599)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.index.B2IRowLockingRR.lockScanRow(B2IRowLockingRR.java:105)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(BTreeForwardScan.java:305)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.BTreeScan.fetchNext(BTreeScan.java:1599)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TableScanResultSet.getNextRowCore(TableScanResultSet.java:577)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(ProjectRestrictResultSet.java:261)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.JoinResultSet.reopenCore(JoinResultSet.java:181)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.reopenCore(ProjectRestrictResultSet.java:218)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.reopenCore(ProjectRestrictResultSet.java:218)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.AnyResultSet.reopenCore(AnyResultSet.java:139)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.AnyResultSet.openCore(AnyResultSet.java:103)&lt;br/&gt;
	at org.apache.derby.exe.ac74f89535x012exc0d8x72ccx000000d1a4e011.g0(Unknown Source)&lt;br/&gt;
	at org.apache.derby.exe.ac74f89535x012exc0d8x72ccx000000d1a4e011.e1(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGeneratedClass.java:141)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(ProjectRestrictResultSet.java:273)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.NormalizeResultSet.getNextRowCore(NormalizeResultSet.java:185)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.DMLWriteResultSet.getNextRowCore(DMLWriteResultSet.java:127)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateResultSet.collectAffectedRows(UpdateResultSet.java:440)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateResultSet.open(UpdateResultSet.java:264)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x29b139f0&amp;gt; (a org.apache.derby.impl.jdbc.EmbedConnection40)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1686)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(EmbedPreparedStatement.java:308)&lt;br/&gt;
	at org.apache.manifoldcf.core.database.Database.execute(Database.java:606)&lt;br/&gt;
	at org.apache.manifoldcf.core.database.Database$ExecuteQueryThread.run(Database.java:421)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A thread dump a couple of minutes later was identical, except for that one thread, which now looked like this:&lt;/p&gt;

&lt;p&gt;&quot;Thread-24341&quot; daemon prio=6 tid=0x05934400 nid=0x1cd4 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0816e000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: RUNNABLE&lt;br/&gt;
	at java.lang.Object.hashCode(Native Method)&lt;br/&gt;
	at org.apache.derby.impl.services.locks.Lock.hashCode(Lock.java:145)&lt;br/&gt;
	at java.util.HashMap.removeEntryForKey(HashMap.java:548)&lt;br/&gt;
	at java.util.HashMap.remove(HashMap.java:538)&lt;br/&gt;
	at org.apache.derby.impl.services.locks.ConcurrentLockSet.unlockReference(ConcurrentLockSet.java:799)&lt;br/&gt;
	at org.apache.derby.impl.services.locks.LockSpace.unlockReference(LockSpace.java:276)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x29b14878&amp;gt; (a org.apache.derby.impl.services.locks.LockSpace)&lt;br/&gt;
	at org.apache.derby.impl.services.locks.AbstractPool.unlock(AbstractPool.java:181)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.RowLocking2.unlockRecordAfterRead(RowLocking2.java:185)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapController.unlockRowAfterRead(HeapController.java:668)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking2.unlockScanRecordAfterRead(B2IRowLocking2.java:96)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(BTreeForwardScan.java:221)&lt;br/&gt;
	at org.apache.derby.impl.store.access.btree.BTreeScan.fetchNext(BTreeScan.java:1599)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TableScanResultSet.getNextRowCore(TableScanResultSet.java:577)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(ProjectRestrictResultSet.java:261)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.JoinResultSet.reopenCore(JoinResultSet.java:181)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.reopenCore(ProjectRestrictResultSet.java:218)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.reopenCore(ProjectRestrictResultSet.java:218)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.AnyResultSet.reopenCore(AnyResultSet.java:139)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.AnyResultSet.openCore(AnyResultSet.java:103)&lt;br/&gt;
	at org.apache.derby.exe.ac74f89535x012exc0d8x72ccx000000d1a4e011.g0(Unknown Source)&lt;br/&gt;
	at org.apache.derby.exe.ac74f89535x012exc0d8x72ccx000000d1a4e011.e1(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGeneratedClass.java:141)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(ProjectRestrictResultSet.java:273)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.NormalizeResultSet.getNextRowCore(NormalizeResultSet.java:185)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.DMLWriteResultSet.getNextRowCore(DMLWriteResultSet.java:127)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateResultSet.collectAffectedRows(UpdateResultSet.java:440)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateResultSet.open(UpdateResultSet.java:264)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x29b139f0&amp;gt; (a org.apache.derby.impl.jdbc.EmbedConnection40)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1686)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(EmbedPreparedStatement.java:308)&lt;br/&gt;
	at org.apache.manifoldcf.core.database.Database.execute(Database.java:606)&lt;br/&gt;
	at org.apache.manifoldcf.core.database.Database$ExecuteQueryThread.run(Database.java:421)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This &lt;b&gt;could&lt;/b&gt; just be a very-long-running query, blocking lots of other stuff. I&apos;ll have to run with the standard tricks to see what the locks wind up looking like.  Stay tuned.&lt;/p&gt;</comment>
                            <comment id="13007741" author="kwright@metacarta.com" created="Wed, 16 Mar 2011 23:36:18 +0000"  >&lt;p&gt;Doesn&apos;t act like a very long running query; just doesn&apos;t make any progress at all, but nevertheless still uses a CPU.&lt;/p&gt;

&lt;p&gt;Here&apos;s the locks table now, apologies for the formatting:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from syscs_diag.lock_table;&lt;br/&gt;
XID            |TYPE |MODE|TABLENAME&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;LOCK&lt;br/&gt;
NAME            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;STATE&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TABLETYPE&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;LOCK&amp;amp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;INDEXNAME&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;--------------------------------------------------------------------------------&lt;br/&gt;
--------------------------------------------------------------------------------&lt;br/&gt;
--------------------------------------------------------------------------------&lt;br/&gt;
--------------------------------------------------------------------------------&lt;br/&gt;
-------&lt;br/&gt;
43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(409&lt;br/&gt;
,16)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
48)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43704          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
48)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,60)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(409&lt;br/&gt;
,24)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,61)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(409&lt;br/&gt;
,23)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,58)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(36,&lt;br/&gt;
73)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,59)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,62)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,63)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
60)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |TABLE|IS  |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |TABLE|IX  |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,53)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(409&lt;br/&gt;
,32)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
59)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,52)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,51)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
58)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,50)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
57)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,57)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,56)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,55)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,54)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
61)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
52)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
51)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
50)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
49)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,49)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
56)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(288&lt;br/&gt;
,48)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
55)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
54)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(65,&lt;br/&gt;
53)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(160&lt;br/&gt;
,11)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,9)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,10)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |TABLE|IX  |HOPCOUNT&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,11)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(160&lt;br/&gt;
,12)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,12)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,13)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,14)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,15)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,16)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,6)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,7)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,8)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(410&lt;br/&gt;
,21)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |X   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43127          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43258          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43268          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43283          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43284          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43290          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43542          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |ROW  |S   |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(46,&lt;br/&gt;
42)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(200&lt;br/&gt;
,70)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(200&lt;br/&gt;
,71)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |TABLE|IX  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43127          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43258          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43268          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43283          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43284          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43290          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43542          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |TABLE|IS  |CARRYDOWN&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |TABLE|IX  |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |TABLE|IX  |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;56   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |TABLE|IX  |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(411&lt;br/&gt;
,24)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(411&lt;br/&gt;
,24)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WAIT &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |U   |HOPCOUNT&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(52,&lt;br/&gt;
16)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |ROW  |X   |PREREQEVENTS&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(289&lt;br/&gt;
,17)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(408&lt;br/&gt;
,7)             &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |ROW  |S   |INTRINSICLINK&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;(411&lt;br/&gt;
,15)            &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43048          |TABLE|IX  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43127          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43258          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43268          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43283          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43284          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43290          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43542          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43619          |TABLE|IX  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;174  &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |TABLE|IX  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43629          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;43704          |TABLE|IS  |JOBQUEUE&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Tabl&lt;br/&gt;
elock           &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;GRANT&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;T        &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1    &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;




&lt;p&gt;94 rows selected&lt;/p&gt;</comment>
                            <comment id="13007749" author="kwright@metacarta.com" created="Thu, 17 Mar 2011 00:00:44 +0000"  >&lt;p&gt;More research confirms absolutely no progress of any kind over tens of minutes.  The ManifoldCF reports queries running longer than 60 seconds and there have been no such reports, which would have been expected if we were running progressively slower queries.  The number of rows in the involved tables is not that high either ( about 64000 in the biggest, 12000 in the second biggest).&lt;br/&gt;
The data is hard to explain WITHOUT deadlock because of the persistence of threads waiting on the database; there is no churn here.  And yet if I read the lock dump there&apos;s no obvious deadlock, although I am not sure I&apos;m reading it right.  Anybody see anything that might be of use?&lt;/p&gt;

&lt;p&gt;By the way, this is a trunk build now.&lt;/p&gt;
</comment>
                            <comment id="13007756" author="kwright@metacarta.com" created="Thu, 17 Mar 2011 00:28:06 +0000"  >&lt;p&gt;Hey, it looks like it unwedged itself after some 30 minutes.  ManifoldCF then complained about a lot of long-running queries.  Some were long running because they were blocked, obviously, but at least one of them is the cause.&lt;/p&gt;

&lt;p&gt;So this is cleared up; it&apos;s not a deadlock apparently, just a bad plan.&lt;/p&gt;

&lt;p&gt;Found a query that took more than a minute (1533032 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;F1C0F5CC2ED7A5D0B4AB58A8F202F025AA3BD133&apos;&lt;br/&gt;
Found a query that took more than a minute (1521069 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE intrinsiclink SET isnew=? WHERE jobid=? AND linktype=? AND parentidhash=? AND childidhash=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;E&apos;&lt;br/&gt;
  Parameter 1: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 2: &apos;link&apos;&lt;br/&gt;
  Parameter 3: &apos;5AD2BBC595BA81D08B9C0FBF7C435692E255154B&apos;&lt;br/&gt;
  Parameter 4: &apos;F75CCB0A5B55E281A506712D331CDD44F0D10F04&apos;&lt;br/&gt;
Found a query that took more than a minute (1531593 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;F13204EB47B99ACE783AC62341763D4DEA64DAD3&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1535056 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;C4FA1B2511EB16B47891A614290D7EFDC542EFB3&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1529958 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;01A734A295128E67F823F4371F084312EF9DBDFD&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1529928 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;F27D1DB1C2E2927F7DD5BD7B8B613008CF0FEA52&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1530203 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;F20EB42B4BDDBD5FE94C20873B5F06DC285F04D0&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1514744 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE t1.parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;A36704A5DEB0591D5044DA8C0AF92997B8DCDA12&apos;&lt;br/&gt;
  Parameter 1: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1526832 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
Found a query that took more than a minute (1524210 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;F8848399A2AE8C7C613E55AAC80054ED6D4C4996&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 0: &apos;037C78E60C534C68924C36E80D6A469B7371987C&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1627441 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash AND t1.isnew=?))&amp;#93;&lt;/span&gt;&lt;br/&gt;
Found a query that took more than a minute (1627444 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;01A734A295128E67F823F4371F084312EF9DBDFD&apos;&lt;br/&gt;
  Parameter 3: &apos;A36704A5DEB0591D5044DA8C0AF92997B8DCDA12&apos;&lt;br/&gt;
  Parameter 4: &apos;B&apos;&lt;br/&gt;
Found a query that took more than a minute (1627445 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash AND t1.isnew=?))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;F8848399A2AE8C7C613E55AAC80054ED6D4C4996&apos;&lt;br/&gt;
  Parameter 4: &apos;B&apos;&lt;br/&gt;
Found a query that took more than a minute (1627427 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash AND t1.isnew=?))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;F27D1DB1C2E2927F7DD5BD7B8B613008CF0FEA52&apos;&lt;br/&gt;
  Parameter 4: &apos;B&apos;&lt;br/&gt;
Found a query that took more than a minute (1627444 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash AND t1.isnew=?))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;F13204EB47B99ACE783AC62341763D4DEA64DAD3&apos;&lt;br/&gt;
  Parameter 4: &apos;B&apos;&lt;br/&gt;
Found a query that took more than a minute (1627445 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash AND t1.isnew=?))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;C4FA1B2511EB16B47891A614290D7EFDC542EFB3&apos;&lt;br/&gt;
  Parameter 4: &apos;B&apos;&lt;br/&gt;
Found a query that took more than a minute (1627429 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;UPDATE hopcount SET deathmark=?,distance=? WHERE id IN(SELECT ownerid FROM hopdeletedeps t0 WHERE ((t0.jobid=? AND t0.childidhash=?)) AND EXISTS(SELECT &amp;#39;x&amp;#39; FROM intrinsiclink t1 WHERE t1.linktype=t0.linktype AND t1.jobid=t0.jobid AND t1.parentidhash=t0.parentidhash AND t1.childidhash=t0.childidhash AND t1.isnew=?))&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;D&apos;&lt;br/&gt;
  Parameter 1: &apos;-1&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
  Parameter 3: &apos;037C78E60C534C68924C36E80D6A469B7371987C&apos;&lt;br/&gt;
  Parameter 4: &apos;B&apos;&lt;br/&gt;
Found a query that took more than a minute (3095263 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT jobid,CAST(COUNT(dochash) AS BIGINT) AS doccount FROM jobqueue t1 GROUP BY jobid&amp;#93;&lt;/span&gt;&lt;br/&gt;
Found a query that took more than a minute (1622113 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;035F0D4F860F38F039F3C0D4D642D0CA2F83D349&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1627657 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;F75CCB0A5B55E281A506712D331CDD44F0D10F04&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;br/&gt;
Found a query that took more than a minute (1622790 ms): &lt;span class=&quot;error&quot;&gt;&amp;#91;SELECT t0.id,t0.dochash,t0.docid FROM jobqueue t0 WHERE EXISTS(SELECT &amp;#39;x&amp;#39; FROM carrydown t1 WHERE parentidhash IN (?) AND t1.childidhash=t0.dochash AND t0.jobid=t1.jobid AND t1.isnew=?) AND t0.jobid=?&amp;#93;&lt;/span&gt;&lt;br/&gt;
  Parameter 0: &apos;01595CFF50BEE46E068F5AEBB539483F73C672AC&apos;&lt;br/&gt;
  Parameter 1: &apos;B&apos;&lt;br/&gt;
  Parameter 2: &apos;1300315252437&apos;&lt;/p&gt;
</comment>
                            <comment id="13007843" author="kwright@metacarta.com" created="Thu, 17 Mar 2011 07:51:20 +0000"  >&lt;p&gt;Turning on query plan output had some interesting results.  The following queries are doing full table scans.  In all cases, I cannot see why the planner does not use an existing index that was created specifically to support the query.  The other interesting thing to note is that NONE of these queries appeared in my list of &quot;long running queries&quot; above, so they were not involved in the 30-minute stall recorded there.  But maybe the underlying cause is similar?&lt;/p&gt;

&lt;p&gt;SELECT parentidhash FROM intrinsiclink WHERE (jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?) OR(jobid=? AND linktype=? AND parentidhash=? AND childidhash=?)&lt;br/&gt;
(identical index exists: intrinsiclink: (jobid,linktype,parentidhash,childidhash) )&lt;/p&gt;

&lt;p&gt;SELECT id,distance,linktype FROM hopcount WHERE (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?)&lt;br/&gt;
(identical index exists: hopcount: (jobid,linktype,parentidhash) )&lt;/p&gt;

&lt;p&gt;SELECT id FROM jobqueue WHERE (jobid=? AND status=?) OR (jobid=? AND status=?) OR (jobid=? AND status=?) OR (jobid=? AND status=?) OR (jobid=? AND status=?) OR (jobid=? AND status=?)&lt;br/&gt;
(identical index exists: jobqueue: (jobid,status) )&lt;/p&gt;

&lt;p&gt;SELECT parentidhash,linktype,distance FROM hopcount WHERE  (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?) OR (jobid=? AND linktype=? AND parentidhash=?)&lt;br/&gt;
(identical index exists: hopcount: (jobid,linktype,parentidhash) )&lt;/p&gt;

&lt;p&gt;FWIW, all of these queries use the corresponding index when run under PostgreSQL.&lt;br/&gt;
I&apos;m happy to create a new ticket for this problem, if appropriate.  Comments?&lt;/p&gt;

</comment>
                            <comment id="13007854" author="knutanders" created="Thu, 17 Mar 2011 09:23:35 +0000"  >&lt;p&gt;Thanks for verifying that the infinite waiting has been fixed, Karl. I think it would be better to file a separate issue for investigating the bad plan. I&apos;m not sure we have any good way of using indexes for the above query currently, though. Except doing a range scan of the index using the smallest and largest value of (jobid,linktype,parentidhash) in the supplied list of predicates, but that may very well degenerate to a full scan in many cases, depending on the actual values. We do have something called multi-probe scans that might be useful for such queries, but it is my understanding that they are only used for single-column keys.&lt;/p&gt;

&lt;p&gt;One quick check that might indicate whether the problem is the optimizer or we&apos;re just lacking the proper access methods to use the indexes efficiently, would be to add an optimizer override to force the use of the index - &lt;a href=&quot;http://db.apache.org/derby/docs/10.7/tuning/ctundepthoptover.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.7/tuning/ctundepthoptover.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You may also want to make sure that the optimizer has up to date statistics for the indexes by calling SYSCS_UTIL.SYSCS_UPDATE_STATISTICS on the tables involved in the query - &lt;a href=&quot;http://db.apache.org/derby/docs/10.7/ref/rrefupdatestatsproc.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.7/ref/rrefupdatestatsproc.html&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13007966" author="kwright@metacarta.com" created="Thu, 17 Mar 2011 16:02:45 +0000"  >&lt;p&gt;The update statistics macro I cannot get to run.  For all schemas I give it, except SYS, it tells me the schema is not found, even though I have explicitly created it.  It doesn&apos;t accept APP either.  For SYS, it complains that ALTER TABLE is not allowed.&lt;/p&gt;

&lt;p&gt;In ij, &quot;SHOW SCHEMAS&quot; does not list all the schemas I&apos;ve created either:&lt;/p&gt;

&lt;p&gt;TABLE_SCHEM&lt;br/&gt;
------------------------------&lt;br/&gt;
APP&lt;br/&gt;
NULLID&lt;br/&gt;
SQLJ&lt;br/&gt;
SYS&lt;br/&gt;
SYSCAT&lt;br/&gt;
SYSCS_DIAG&lt;br/&gt;
SYSCS_UTIL&lt;br/&gt;
SYSFUN&lt;br/&gt;
SYSIBM&lt;br/&gt;
SYSPROC&lt;br/&gt;
SYSSTAT&lt;/p&gt;

&lt;p&gt;11 rows selected&lt;/p&gt;

&lt;p&gt;.... so I am not sure what is going on with this.&lt;/p&gt;</comment>
                            <comment id="13007975" author="kwright@metacarta.com" created="Thu, 17 Mar 2011 16:19:50 +0000"  >&lt;p&gt;More research shows that the problem is that you cannot calculate statistics for tables that are part of the app or default schema.  Tables part of any other schema are OK.  &lt;/p&gt;
</comment>
                            <comment id="13007989" author="kwright@metacarta.com" created="Thu, 17 Mar 2011 16:37:01 +0000"  >&lt;p&gt;Never mind; it cares about case for the table name.  Converting to upper case fixed the problem.&lt;/p&gt;</comment>
                            <comment id="13008736" author="kwright@metacarta.com" created="Sat, 19 Mar 2011 07:04:20 +0000"  >&lt;p&gt;Created a new ticket for the optimizer problem, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5142&quot; title=&quot;Optimizer uses table scan when it could use index when multiple OR clauses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5142&quot;&gt;DERBY-5142&lt;/a&gt;.  As far as I&apos;m concerned, this current ticket is resolved.&lt;/p&gt;</comment>
                            <comment id="13010091" author="knutanders" created="Wed, 23 Mar 2011 12:21:28 +0000"  >&lt;p&gt;I&apos;ve added some more comments to the Deadlock class (see the patch comments.diff):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a high level description of the algorithm in the class javadoc&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;more javadoc for the methods&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;expanded on the comments inside the actual detection algorithm in Deadlock.look()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Committed revision 1084561.&lt;/p&gt;</comment>
                            <comment id="13010094" author="knutanders" created="Wed, 23 Mar 2011 12:27:32 +0000"  >&lt;p&gt;Thanks for all the help with tracking this down, Karl, and for verifying the the fix! I&apos;m resolving the issue as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3980&quot; title=&quot;Conflicting select then update with REPEATABLE_READ gives lock timeout instead of deadlock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3980&quot;&gt;&lt;del&gt;DERBY-3980&lt;/del&gt;&lt;/a&gt; since the two issues turned out to be caused by the same underlying bug(s) in the deadlock detection algorithm.&lt;/p&gt;</comment>
                            <comment id="13685349" author="knutanders" created="Mon, 17 Jun 2013 10:19:45 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12499867">CONNECTORS-166</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12410236">DERBY-3980</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12372507">DERBY-2877</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12473163" name="Derby5073.java" size="2604" author="knutanders" created="Wed, 9 Mar 2011 17:15:58 +0000"/>
                            <attachment id="12474387" name="comments.diff" size="13312" author="knutanders" created="Wed, 23 Mar 2011 12:21:28 +0000"/>
                            <attachment id="12473279" name="derby-5073-1a.diff" size="563" author="knutanders" created="Thu, 10 Mar 2011 16:09:47 +0000"/>
                            <attachment id="12473378" name="derby-5073-1b.diff" size="1631" author="knutanders" created="Fri, 11 Mar 2011 10:37:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    <customfieldvalue key="10421"><![CDATA[Seen in production]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 28 Feb 2011 15:17:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0gfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>