<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:07:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2031/DERBY-2031.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2031] Convert derbynet/testProtocol.java to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2031</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;testProtocol.java executes DRDA commands from a file written in a special-purpose language. The statements are very much like assertions, so it should be fairly easy to convert the test to JUnit.&lt;/p&gt;

&lt;p&gt;Suggested approach: Change the interpreter (TestProto.java) so that is uses Assert.fail() instead of System.err.println() and System.exit(), and BaseTestCase.println() instead of System.out.println(). It should also use TestConfiguration to get the host name and port number.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12354588">DERBY-2031</key>
            <summary>Convert derbynet/testProtocol.java to JUnit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Nov 2006 16:53:38 +0000</created>
                <updated>Thu, 2 May 2013 03:29:03 +0100</updated>
                            <resolved>Tue, 17 Apr 2012 12:45:49 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Network Server</component>
                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12458815" author="julo" created="Fri, 15 Dec 2006 15:03:23 +0000"  >&lt;p&gt;Attaching a proposed patch.&lt;/p&gt;

&lt;p&gt;I moved the implementation of the test from the org.apache.derby.impl.drda package to org.apache.derbyTesting.functionTests.tests.derbynet.DRDAProtocolTest class.&lt;/p&gt;

&lt;p&gt;This required to change the visibility of some classes and methods in the drda to be accessible by the test.&lt;/p&gt;

&lt;p&gt;Actually I had two choices how to handle the test:&lt;/p&gt;

&lt;p&gt;1.) Write a test inside the drda package as it was before using the junit.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this will require the junit jar files to build a derby and som classes in derby.jar will be linked against junit.jar.&lt;/li&gt;
	&lt;li&gt;the location of test will be non standard&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2.) Change the visibility of some methods of drda protocol implementation to public&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The instances of som of these classes might be created somewhere else however the instances created in derby network server are still hidden for other packages. Simply said, one can create DDMReader or DDMWriter instances and call some of their methods, however it is not possible to access the corresponding instances of these classes used by the server.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I implemented the patch according the option 2.)&lt;/p&gt;

&lt;p&gt;I am interested in your comments on this.&lt;/p&gt;

&lt;p&gt;I ran derbyall and suites.All suites without failures.&lt;/p&gt;</comment>
                            <comment id="12459049" author="bryanpendleton" created="Sat, 16 Dec 2006 17:07:00 +0000"  >&lt;p&gt;It seems undesirable to have to change the visibility of the actual code.&lt;br/&gt;
I remember that we&apos;ve had some similar discussions on the mailing&lt;br/&gt;
list recently. For example, &lt;a href=&quot;http://www.nabble.com/Re%3A-JUnit-unit-tests---parallel-test-three--p5711307.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Re%3A-JUnit-unit-tests---parallel-test-three--p5711307.html&lt;/a&gt;&lt;br/&gt;
Unfortunately, I can&apos;t remember what we decided was the best technique&lt;br/&gt;
for situations such as yours.&lt;/p&gt;</comment>
                            <comment id="12482941" author="myrna" created="Wed, 21 Mar 2007 22:46:03 +0000"  >&lt;p&gt;switching off patch available, as Bryan said, it may not be proper to change the visibility. In the mean time, this test is running as a junit test vai the JavaHarnessTest. Not exactly a conversion, but a step in the direction.&lt;/p&gt;</comment>
                            <comment id="12541780" author="kristwaa" created="Mon, 12 Nov 2007 14:12:48 +0000"  >&lt;p&gt;I hijacked this issue, since there has been no activity on it for a long time.&lt;/p&gt;

&lt;p&gt;I&apos;m taking another stab at rewriting the test into JUnit.&lt;br/&gt;
I will utilize the package-private test &quot;framework&quot;, and because this is far from complete I will develop the JUnit version in parallel to the existing one.&lt;/p&gt;

&lt;p&gt;The main problems are still running the package private tests in a Jar-file environment due to package sealing.&lt;/p&gt;</comment>
                            <comment id="12541784" author="kristwaa" created="Mon, 12 Nov 2007 14:24:50 +0000"  >&lt;p&gt;As a first step I copied the existing file to another location with revision 594156 and replaced all tab-characters and added some blank lines with revision 594157.&lt;/p&gt;</comment>
                            <comment id="12604523" author="kristwaa" created="Thu, 12 Jun 2008 15:21:39 +0100"  >&lt;p&gt;Renamed the file TestProto to ProtocolTest with revision 667099.&lt;/p&gt;</comment>
                            <comment id="12605577" author="kristwaa" created="Tue, 17 Jun 2008 13:53:46 +0100"  >&lt;p&gt;&apos;derby-2031-1a-grammar_enum.diff&apos; adds a grammar enum, describing the &quot;protocol test language&quot;. There is no description of the arguments each command take.&lt;/p&gt;

&lt;p&gt;My plan is to convert TestProto to a package-private test first. We can decide what to do with it later.&lt;br/&gt;
I have chosen to use Java SE 5.0 features for this test. Note that the test is being run today as part of derbyall (testProtocol), and my work on this issue will not affect that.&lt;/p&gt;

&lt;p&gt;Besides from the test conversion itself, I know there are some issues:&lt;br/&gt;
 a) Security manager (permissions, different codebase)&lt;br/&gt;
 b) Only runnable from classes (sealing, packaging, special VM options)&lt;/p&gt;</comment>
                            <comment id="12606652" author="kristwaa" created="Fri, 20 Jun 2008 08:14:21 +0100"  >&lt;p&gt;Committed &apos;derby-2031-1a-grammar_enum.diff&apos; to trunk with revision 669810.&lt;br/&gt;
This only adds a grammar class, which will be used by the test.&lt;/p&gt;</comment>
                            <comment id="12606775" author="kristwaa" created="Fri, 20 Jun 2008 15:24:11 +0100"  >&lt;p&gt;&apos;derby-2031-2a-test.diff&apos; is the first attempt of a conversion.&lt;/p&gt;

&lt;p&gt;To run it under a security manager, the following permissions must be granted (or just grant all for testing purposes):&lt;br/&gt;
//grant codeBase &quot;$&lt;/p&gt;
{derbyTesting.ppcodeclasses}
&lt;p&gt;&quot; { // Commented out, not yet in trunk&lt;br/&gt;
grant {&lt;/p&gt;

&lt;p&gt;  // Allow connection to a server.&lt;br/&gt;
  permission java.net.SocketPermission &quot;127.0.0.1&quot;, &quot;connect,resolve&quot;;&lt;br/&gt;
  permission java.net.SocketPermission &quot;localhost&quot;, &quot;connect,resolve&quot;;&lt;br/&gt;
  permission java.net.SocketPermission &quot;$&lt;/p&gt;
{derbyTesting.serverhost}
&lt;p&gt;&quot;, &quot;connect,resolve&quot;;&lt;/p&gt;

&lt;p&gt;  // Import/export and other support files from these locations in tests&lt;br/&gt;
  permission java.io.FilePermission &quot;$&lt;/p&gt;
{user.dir}
&lt;p&gt;$&lt;/p&gt;
{/}extin${/}
&lt;p&gt;-&quot;, &quot;read&quot;;&lt;br/&gt;
};&lt;/p&gt;


&lt;p&gt;This patch will add 150 tests to the package-private test suite (followup patch), base on the current &apos;protocol.tests&apos; file.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12607194" author="kristwaa" created="Mon, 23 Jun 2008 12:55:01 +0100"  >&lt;p&gt;Committed &apos;derby-2031-2a-test.diff&apos; to trunk with revision 670526.&lt;br/&gt;
Another patch will follow to enable the test as part of the package-private test ant target.&lt;/p&gt;</comment>
                            <comment id="12608360" author="kristwaa" created="Thu, 26 Jun 2008 10:42:49 +0100"  >&lt;p&gt;&apos;derby-2031-3a-enable_test.diff&apos; enables ProtocolTest as part of the package private test suite.&lt;br/&gt;
To run it, execute &quot;ant junit-pptesting&quot; (at the moment it should run 250 tests with the patch applied).&lt;/p&gt;

&lt;p&gt;The only thing out of the ordinary with this patch, is that I had to do some changes to SecurityMangerSetup. I would like to know if people find the change ok.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12609197" author="knutanders" created="Mon, 30 Jun 2008 11:03:37 +0100"  >&lt;p&gt;The changes look OK to me. Perhaps a small comment could be added in SecurityManagerTestSetup to explain when ppTesting is null and non-null. I tried the junit-pptesting target and all the tests ran successfully.&lt;/p&gt;</comment>
                            <comment id="12609236" author="kristwaa" created="Mon, 30 Jun 2008 15:07:31 +0100"  >&lt;p&gt;Thanks for looking at the patch Knut Anders &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Attached and committed patch 3b to trunk with revision 672770.&lt;br/&gt;
Revision 3b added a comment as suggested by Knut Anders.&lt;/p&gt;

&lt;p&gt;I have not yet resolved this issue nor deleted the old test, because I don&apos;t believe anyone is running the package-private tests on a regular basis.&lt;br/&gt;
I&apos;m wondering what it takes to make that happen...&lt;/p&gt;</comment>
                            <comment id="12617546" author="kmarsden" created="Mon, 28 Jul 2008 22:15:13 +0100"  >&lt;p&gt;Can the package-private tests be pullled into suites.All or do they have to be run separately?&lt;/p&gt;</comment>
                            <comment id="12617569" author="kmarsden" created="Mon, 28 Jul 2008 22:44:56 +0100"  >&lt;p&gt;I played with this a little bit and see &lt;br/&gt;
1) You can only run with classes and classes.pptesting.  It doesn&apos;t seem to work with jars.&lt;br/&gt;
2) I am getting a failure on Windows XP trying to remove a file.&lt;br/&gt;
 Derby DRDA protocol testsjunit.framework.AssertionFailedError: extin\connect.inc&lt;br/&gt;
        at org.apache.derbyTesting.junit.DropDatabaseSetup.removeDir(DropDatabaseSetup.java:130)&lt;br/&gt;
        at org.apache.derbyTesting.junit.DropDatabaseSetup.access$000(DropDatabaseSetup.java:35)&lt;br/&gt;
        at org.apache.derbyTesting.junit.DropDatabaseSetup$1.run(DropDatabaseSetup.java:105)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at org.apache.derbyTesting.junit.DropDatabaseSetup.removeDirectory(DropDatabaseSetup.java:102)&lt;br/&gt;
        at org.apache.derbyTesting.junit.DropDatabaseSetup.removeDirectory(DropDatabaseSetup.java:98)&lt;br/&gt;
        at org.apache.derbyTesting.junit.SupportFilesSetup.tearDown(SupportFilesSetup.java:127)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:20)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;</comment>
                            <comment id="12617776" author="kristwaa" created="Tue, 29 Jul 2008 13:32:28 +0100"  >&lt;p&gt;Currently it is only possible to easily run the tests from classes.&lt;/p&gt;

&lt;p&gt;Technically it is possible to run from jars in at least three ways, all with some disadvantages:&lt;br/&gt;
 a) Use unsealed jars.&lt;br/&gt;
 b) Include the tests in the production jars.&lt;br/&gt;
 c) Run with the jars in the boot classpath.&lt;/p&gt;

&lt;p&gt;Note that these approaches can be used &quot;temporarily&quot;, i.e. only to run the tests and not for the distribution jars.&lt;/p&gt;

&lt;p&gt;Regarding the failure, I haven&apos;t tested on Windows. Wasn&apos;t there a similar problem with another test reported not so long ago?&lt;/p&gt;</comment>
                            <comment id="12617778" author="kmarsden" created="Tue, 29 Jul 2008 13:44:26 +0100"  >&lt;p&gt;There was a problem with the new StressMultiTest removing the database directory because of  &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3789&quot; title=&quot;Shutting down encrypted database with ResultSet open does not allow directory to be deleted on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3789&quot;&gt;&lt;del&gt;DERBY-3789&lt;/del&gt;&lt;/a&gt;.  Erlend was able to workaround that problem by making sure all the result sets were closed.  In this case it was not the database directory I think, but rather the test include file connect.inc. There must be a problem with the protocol test that it leaves a file handle open to the include file.&lt;/p&gt;</comment>
                            <comment id="12618346" author="kristwaa" created="Wed, 30 Jul 2008 15:10:10 +0100"  >&lt;p&gt;&apos;derby-2031-4a-close_streams.diff&apos; closes the opened readers/inputstreams.&lt;br/&gt;
I haven&apos;t tested the patch on Windows, but hopefully it fixes the failure seen there.&lt;/p&gt;</comment>
                            <comment id="12618625" author="kristwaa" created="Thu, 31 Jul 2008 09:43:45 +0100"  >&lt;p&gt;Committed patch 4a to trunk with revision 681302.&lt;br/&gt;
I verified the fix with Cygwin on Windows XP; the test failed without the patch and succeeded after it was applied.&lt;/p&gt;

&lt;p&gt;Thanks for brining up the issue, Kathey.&lt;/p&gt;</comment>
                            <comment id="12688202" author="myrna" created="Mon, 23 Mar 2009 03:24:18 +0000"  >&lt;p&gt;I&apos;d like to close this one as fixed in 10.5. Objections?&lt;/p&gt;</comment>
                            <comment id="12688247" author="kristwaa" created="Mon, 23 Mar 2009 08:57:09 +0000"  >&lt;p&gt;I think we are still running two versions of the test; one with an adapter in the drda package (to avoid making a set of methods public), and the new JUnit test.&lt;br/&gt;
The reason why the latter hasn&apos;t replaced the old test, is the packaging problem. Due to this, the test is only run when running against classes, and it isn&apos;t run as part of suites.All.&lt;br/&gt;
Changes done to the protocol test file will affect both versions of the test.&lt;/p&gt;

&lt;p&gt;One way forward could be to write a smaller adapter and have the new JUnit test use it to be able to run the test against the JARs (I haven&apos;t investigated this approach).&lt;/p&gt;</comment>
                            <comment id="13103805" author="kristwaa" created="Tue, 13 Sep 2011 18:33:32 +0100"  >&lt;p&gt;This issue is starting to annoy me...&lt;br/&gt;
Since we already have one adapter, would it be okay to rewrite the JUnit test to use it, and potentially rewrite the adapter itself to make it smaller?&lt;br/&gt;
Obviously we won&apos;t get rid of the adapter, which will make available some methods that shouldn&apos;t be public, but we can then finally ditch the old version of the test.&lt;/p&gt;

&lt;p&gt;Opinions?&lt;/p&gt;</comment>
                            <comment id="13103813" author="kristwaa" created="Tue, 13 Sep 2011 18:38:53 +0100"  >&lt;p&gt;And of course, the main point about dropping the old test and making the new test run against the jar files is that we can include it in suites.All such that it is run &quot;all the time&quot;.&lt;/p&gt;</comment>
                            <comment id="13208673" author="kristwaa" created="Wed, 15 Feb 2012 18:55:03 +0000"  >&lt;p&gt;Attaching a partial patch showing what this would look like with an adapter in the production jars.&lt;br/&gt;
How to evaluate:&lt;br/&gt;
Take a look at the class ProtocolTestAdapter and consider if you&apos;re comfortable distributing this code with the production derbynet.jar file. Remember to take into account the files that are removed from the same jar (TestFile and TestProto) too.&lt;/p&gt;

&lt;p&gt;The patch isn&apos;t complete, there&apos;s still some cleanup to do in the code running the tests (i.e. the test will no longer be run with junit-pptesting). Note also that the test code used Java 5 features, but I&apos;m under the impression this test can&apos;t run with J2ME anyway?&lt;/p&gt;</comment>
                            <comment id="13217232" author="kristwaa" created="Mon, 27 Feb 2012 15:51:43 +0000"  >&lt;p&gt;Attaching patch 5a, which adds a new adapter, moves (or more correctly copies) the test to the derbynet package, and adds it to the derbynet suite.&lt;/p&gt;

&lt;p&gt;Follow-up patches will delete the old harness test and the package-private test.&lt;br/&gt;
The patch is dependent on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5631&quot; title=&quot;Extend SecurityManagerSetup to add extra privileges to the set of default privileges (merge two policy files)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5631&quot;&gt;&lt;del&gt;DERBY-5631&lt;/del&gt;&lt;/a&gt;, so it&apos;ll have to sit around for a little while.&lt;/p&gt;

&lt;p&gt;To apply you need to do some svn stuff:&lt;br/&gt;
svn cp  java/testing/org/apache/derby/impl/drda/ProtcolTest.java java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.java &amp;amp;&amp;amp;  cp  /dev/null java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.java&lt;br/&gt;
svn cp java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/testProtocol.policy java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.policy &amp;amp;&amp;amp; cp /dev/null java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.policy&lt;/p&gt;

&lt;p&gt;I intend to commit this as soon as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5631&quot; title=&quot;Extend SecurityManagerSetup to add extra privileges to the set of default privileges (merge two policy files)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5631&quot;&gt;&lt;del&gt;DERBY-5631&lt;/del&gt;&lt;/a&gt; is in.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="13219732" author="dagw" created="Thu, 1 Mar 2012 02:16:03 +0000"  >&lt;p&gt;Looked briefly at the new test. Typo: &quot;adatper&quot;. Btw, shouldn&apos;t the TestProtocolAdapter#close method be called somewhere in the test lest the socket remain open? Maybe in a finally block in testProtocolSequence? (not a full review yet)&lt;/p&gt;</comment>
                            <comment id="13219738" author="dagw" created="Thu, 1 Mar 2012 02:21:42 +0000"  >&lt;p&gt;Also: TestProtocolAdapter#getCodePointValueTable isnt&apos;t used. Could it be removed?&lt;/p&gt;</comment>
                            <comment id="13223308" author="kristwaa" created="Tue, 6 Mar 2012 15:07:20 +0000"  >&lt;p&gt;Thanks for the comments, Dag.&lt;br/&gt;
I&apos;ve addressed the issues (fixed type in variable name, calling close, removed unused method), and also added a little more comments, fixed some typos / whitespace / formatting issues, added an assert for the shutdown exception, and renamed and made cpNames static.&lt;/p&gt;

&lt;p&gt;In case it&apos;s unclear, this is a svn copy followed by a bunch of modifications. I plan to delete the two old tests running when we see that the new test runs without issues.&lt;/p&gt;

&lt;p&gt;ProtocolTest is now added to suites.All as part of derbynet._Suite. It contains 155 test cases and the whole test runs in less than 10 seconds on my system.&lt;/p&gt;

&lt;p&gt;Committed patch 5b to trunk with revision 1297517.&lt;/p&gt;</comment>
                            <comment id="13223327" author="kristwaa" created="Tue, 6 Mar 2012 15:29:59 +0000"  >&lt;p&gt;Disabled test with revision 1297524 while investigating a permission issue.&lt;/p&gt;</comment>
                            <comment id="13226011" author="kristwaa" created="Fri, 9 Mar 2012 11:07:25 +0000"  >&lt;p&gt;Re-enabled the test with revision 1298789 (backed out revision 1297524).&lt;/p&gt;</comment>
                            <comment id="13228582" author="kristwaa" created="Tue, 13 Mar 2012 18:50:06 +0000"  >&lt;p&gt;The new test seems to be running without failures. I&apos;ll soon remove the old style harness version of the test and the assoicated support files.&lt;/p&gt;

&lt;p&gt;Attaching patch 6a, which removes the package-private version of the test.&lt;br/&gt;
The number of tests in &apos;ant junit-pptesting&apos; went down from 222 to 67 after removing ProtocolTest. This fits nicely, as that test has 155 test cases.&lt;/p&gt;

&lt;p&gt;Committed patch 6a to trunk with revision 1300285.&lt;/p&gt;</comment>
                            <comment id="13246068" author="kristwaa" created="Wed, 4 Apr 2012 07:41:46 +0100"  >&lt;p&gt;Attaching patch 7a, which removes the old harness test.&lt;br/&gt;
See the stat-file, several files are being removed by this change.&lt;br/&gt;
I ran suites.All and derbyall without errors.&lt;/p&gt;

&lt;p&gt;I plan to commit this shortly.&lt;/p&gt;</comment>
                            <comment id="13255490" author="kristwaa" created="Tue, 17 Apr 2012 12:45:49 +0100"  >&lt;p&gt;Committed patch 7a, including the deletions, to trunk with revision 1327050.&lt;br/&gt;
I fixed a few lines in the patch where I had used a mix of tabs and spaces for indentation.&lt;/p&gt;

&lt;p&gt;This finally concludes the work for this JIRA - there is now only one version of the test, and it is being run as part of suites.All.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12416700">DERBY-4090</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12326783">DERBY-763</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12365113">DERBY-2460</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12347287" name="d2031.diff" size="131946" author="julo" created="Fri, 15 Dec 2006 15:03:23 +0000"/>
                            <attachment id="12347288" name="d2031.stat" size="970" author="julo" created="Fri, 15 Dec 2006 15:03:23 +0000"/>
                            <attachment id="12384126" name="derby-2031-1a-grammar_enum.diff" size="5356" author="kristwaa" created="Tue, 17 Jun 2008 13:53:46 +0100"/>
                            <attachment id="12384127" name="derby-2031-1a-grammar_enum.stat" size="161" author="kristwaa" created="Tue, 17 Jun 2008 13:53:46 +0100"/>
                            <attachment id="12384384" name="derby-2031-2a-test.diff" size="55716" author="kristwaa" created="Fri, 20 Jun 2008 15:24:11 +0100"/>
                            <attachment id="12384750" name="derby-2031-3a-enable_test.diff" size="4689" author="kristwaa" created="Thu, 26 Jun 2008 10:42:49 +0100"/>
                            <attachment id="12384751" name="derby-2031-3a-enable_test.stat" size="283" author="kristwaa" created="Thu, 26 Jun 2008 10:42:49 +0100"/>
                            <attachment id="12384955" name="derby-2031-3b-enable_test.diff" size="5202" author="kristwaa" created="Mon, 30 Jun 2008 15:07:31 +0100"/>
                            <attachment id="12387186" name="derby-2031-4a-close_streams.diff" size="1429" author="kristwaa" created="Wed, 30 Jul 2008 15:10:10 +0100"/>
                            <attachment id="12516169" name="derby-2031-5a-new_adapter.diff" size="47969" author="kristwaa" created="Mon, 27 Feb 2012 15:51:43 +0000"/>
                            <attachment id="12516170" name="derby-2031-5a-new_adapter.stat" size="943" author="kristwaa" created="Mon, 27 Feb 2012 15:51:43 +0000"/>
                            <attachment id="12517245" name="derby-2031-5b-new_adapter.diff" size="48803" author="kristwaa" created="Tue, 6 Mar 2012 15:07:20 +0000"/>
                            <attachment id="12518216" name="derby-2031-6a-pptesting_removal.diff" size="38479" author="kristwaa" created="Tue, 13 Mar 2012 18:50:06 +0000"/>
                            <attachment id="12518217" name="derby-2031-6a-pptesting_removal.stat" size="241" author="kristwaa" created="Tue, 13 Mar 2012 18:50:06 +0000"/>
                            <attachment id="12521284" name="derby-2031-7a-old_harness_test_removal.diff" size="64290" author="kristwaa" created="Wed, 4 Apr 2012 07:41:45 +0100"/>
                            <attachment id="12521285" name="derby-2031-7a-old_harness_test_removal.stat" size="1065" author="kristwaa" created="Wed, 4 Apr 2012 07:41:45 +0100"/>
                            <attachment id="12514680" name="derby-2031-pre_with_git.diff" size="104099" author="kristwaa" created="Wed, 15 Feb 2012 18:55:03 +0000"/>
                            <attachment id="12514681" name="derby-2031-pre_with_git.stat" size="1535" author="kristwaa" created="Wed, 15 Feb 2012 18:55:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Dec 2006 15:03:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0apz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>