<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4042/DERBY-4042.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4042] org.apache.derby.impl.load.Import needs to escape single quotes</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4042</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The code that builds the SQL statement that invokes the Import VTI doesn&apos;t properly escape single quotes. This causes problems for users, see: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-user/200901.mbox/%3c21754463.post@talk.nabble.com%3e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-user/200901.mbox/%3c21754463.post@talk.nabble.com%3e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Import.performImport() is the method that needs to be fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413688">DERBY-4042</key>
            <summary>org.apache.derby.impl.load.Import needs to escape single quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Jan 2009 09:31:02 +0000</created>
                <updated>Tue, 30 Jun 2009 17:12:57 +0100</updated>
                            <resolved>Tue, 17 Mar 2009 12:16:31 +0000</resolved>
                                    <version>10.4.2.0</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12669170" author="knutanders" created="Sat, 31 Jan 2009 10:29:50 +0000"  >&lt;p&gt;There are users who have come across this issue and have found out how to trick Derby into accepting strings with quotes in them, so I&apos;m flagging the issue with &quot;Existing Application Impact&quot; and &quot;Release Note Needed&quot;, since those users will have to remove the extra escape characters from their applications after the issue has been fixed.&lt;/p&gt;</comment>
                            <comment id="12669367" author="knutanders" created="Sun, 1 Feb 2009 11:01:32 +0000"  >&lt;p&gt;Attached is a patch (d4042-1.diff) that makes the export and import procedures quote arguments correctly by using helper methods in IdUtil and StringUtil instead of just putting quotes around them. The patch also adds a test case to ImportExportTest (the test case is small, but the test diff is somewhat big because many helper methods had to be changed to allow another schema than APP to be used).&lt;/p&gt;

&lt;p&gt;I have only run the tools test so far, but I will start the full regression suite soon.&lt;/p&gt;

&lt;p&gt;I also believe there are some problems in ColumnInfo if the column names in the table to export/import contain double quotes, but I&apos;ll defer that to a followup patch.&lt;/p&gt;</comment>
                            <comment id="12669395" author="bryanpendleton" created="Sun, 1 Feb 2009 15:43:59 +0000"  >&lt;p&gt;The patch looks great, Knut. Thank goodness for IdUtil and StringUtil, they&lt;br/&gt;
are very useful. I had a little bit of struggle with the test, because I could see&lt;br/&gt;
where you added a test for quotes in schema name / table name (the IdUtil case),&lt;br/&gt;
but I couldn&apos;t see where you added a test for quotes in the file name (the StringUtil case).&lt;/p&gt;

&lt;p&gt;Did I simply overlook that test?&lt;/p&gt;</comment>
                            <comment id="12669435" author="knutanders" created="Sun, 1 Feb 2009 20:16:48 +0000"  >&lt;p&gt;Thanks for looking at the patch, Bryan!&lt;/p&gt;

&lt;p&gt;There is only one added test case (testQuotesInArguments) and it actually does test quotes in the file name, although somewhat indirectly. The helper method doExport() exports a table to a file whose name is tableName + &quot;.dat&quot;, and doImportAndVerify() imports a file with the same name. So since the table name contains both a single quote and a double quote, the name of the exported file should contain those characters too. It&apos;s probably worth a comment in the test case to make it clearer.&lt;/p&gt;</comment>
                            <comment id="12669438" author="bryanpendleton" created="Sun, 1 Feb 2009 20:28:07 +0000"  >&lt;p&gt;Thanks for the clarification. That seems fine to me. Yes, a comment in the test case would be worthwhile.&lt;/p&gt;</comment>
                            <comment id="12669442" author="knutanders" created="Sun, 1 Feb 2009 20:48:10 +0000"  >&lt;p&gt;Added the following comment and committed revision 739830:&lt;/p&gt;

&lt;p&gt;        // Create schema names and table names containing both single quotes&lt;br/&gt;
        // and double quotes to expose bugs both for internally generated&lt;br/&gt;
        // string literals (enclosed in single quotes) and SQL identifiers&lt;br/&gt;
        // (enclosed in double quotes). This will also indirectly test that&lt;br/&gt;
        // the export/import system procedures handle those characters in&lt;br/&gt;
        // file names (which they didn&apos;t do very well before the fix for&lt;br/&gt;
        // &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4042&quot; title=&quot;org.apache.derby.impl.load.Import needs to escape single quotes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4042&quot;&gt;&lt;del&gt;DERBY-4042&lt;/del&gt;&lt;/a&gt;), as doExport() and doImportAndVerify() use a file name&lt;br/&gt;
        // derived from the table name.&lt;/p&gt;</comment>
                            <comment id="12670018" author="myrna" created="Tue, 3 Feb 2009 17:17:12 +0000"  >&lt;p&gt;It appears the commit caused failures on windows platforms, see for instance: &lt;a href=&quot;http://dbtg.thresher.com/derby/test/Daily/jvm1.5/testing/Limited/testSummary-740039.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.thresher.com/derby/test/Daily/jvm1.5/testing/Limited/testSummary-740039.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can you investigate?&lt;/p&gt;</comment>
                            <comment id="12670301" author="knutanders" created="Wed, 4 Feb 2009 10:50:10 +0000"  >&lt;p&gt;I don&apos;t have a Windows box to test it on, but it looks like Windows isn&apos;t too happy with double quotes in file names. The bug only involved file names with single quotes, so I guess it would be fine to rewrite the test to test file names with single quotes only.&lt;/p&gt;</comment>
                            <comment id="12670306" author="knutanders" created="Wed, 4 Feb 2009 11:22:58 +0000"  >&lt;p&gt;The attached patch changes the test so that it doesn&apos;t use a double quote in the file name. I haven&apos;t tested it on Windows, but I hope that this will make the test pass on that platform too.&lt;/p&gt;

&lt;p&gt;Committed revision 740698.&lt;/p&gt;</comment>
                            <comment id="12670309" author="myrna" created="Wed, 4 Feb 2009 11:39:02 +0000"  >&lt;p&gt;It passes for me on XP. &lt;br/&gt;
I was thinking maybe we could add some os-switching logic, but this is ok.&lt;/p&gt;</comment>
                            <comment id="12670334" author="jrgchip" created="Wed, 4 Feb 2009 13:53:23 +0000"  >&lt;p&gt;Windows does not all any of the following characters in file names:  \ / : * ? &quot; | &amp;lt; &amp;gt;&lt;/p&gt;

&lt;p&gt;Addressing the apost is sufficient for me, at least.&lt;/p&gt;</comment>
                            <comment id="12682652" author="knutanders" created="Tue, 17 Mar 2009 12:15:14 +0000"  >&lt;p&gt;Here&apos;s an attempt on a release note for this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399231" name="d4042-1.diff" size="13959" author="knutanders" created="Sun, 1 Feb 2009 11:01:32 +0000"/>
                            <attachment id="12402385" name="releaseNote.html" size="5447" author="knutanders" created="Tue, 17 Mar 2009 12:15:13 +0000"/>
                            <attachment id="12399447" name="testfix.diff" size="5207" author="knutanders" created="Wed, 4 Feb 2009 11:22:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 1 Feb 2009 15:43:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23987</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ubr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38731</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>