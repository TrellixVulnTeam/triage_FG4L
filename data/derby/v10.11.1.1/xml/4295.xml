<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4295/DERBY-4295.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4295] SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE cannot be executed after granting permission for execute. </title>
                <link>https://issues.apache.org/jira/browse/DERBY-4295</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When using derby.properties file from mailjdbc tests, call SYSCS_UTIL.SYCS_INPLACE_COMPRESs_TABLE is fine user &apos;BACKUP&apos; with the following operation. Please see below:&lt;br/&gt;
ij version 10.3&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:tpri;user=BACKUP;password=Backup&apos;;&lt;br/&gt;
ij&amp;gt; create table a (col1 int, col2 clob);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into a values (1, &apos;1&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into a values (2, &apos;2&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; grant execute on procedure SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE to BACKUP;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij version 10.3&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:tpri;user=BACKUP;password=Backup&apos;;&lt;br/&gt;
ij&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;REFRESH&apos;,&apos;A&apos;,1,1,1);&lt;br/&gt;
0 rows inserted/updated/deleted              &amp;lt;&amp;lt;&amp;lt;====Operation successful=====&lt;/p&gt;

&lt;p&gt;However, on 10.5, the same operation result ERROR 38000&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:tpri;create=true;user=REFRESH;password=Refresh&apos;;&lt;br/&gt;
ij&amp;gt; create table a (col1 int, col2 clob);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into a values (1, &apos;1&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into a values (1, &apos;2&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; grant execute on procedure SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE to BACKUP;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; exit;&lt;/p&gt;

&lt;p&gt;ij version 10.5&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:tpri;user=BACKUP;password=Backup&apos;;&lt;br/&gt;
ij&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;REFRESH&apos;,&apos;A&apos;,1,1,1);&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: User &apos;BACKUP&apos; can not perform&lt;br/&gt;
 the operation in schema &apos;REFRESH&apos;.&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR 42507: User &apos;BACKUP&apos; can not perform the operation in schema &apos;REFRESH&apos;.  &amp;lt;&amp;lt;&amp;lt;====Operation result with ERROR 38000&lt;br/&gt;
ERROR 42507: User &apos;BACKUP&apos; can not perform the operation in schema &apos;REFRESH&apos;.^M&lt;br/&gt;
        at org.apache.derby.iapi.error.StandardException.newException(StandardEx&lt;br/&gt;
ception.java:303)^M&lt;br/&gt;
        at org.apache.derby.iapi.sql.dictionary.StatementSchemaPermission.check(&lt;br/&gt;
StatementSchemaPermission.java:83)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.conn.GenericAuthorizer.authorize(GenericAut&lt;br/&gt;
horizer.java:186)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.GenericResultSetFactory.getDDLResul&lt;br/&gt;
tSet(GenericResultSetFactory.java:1073)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.ConstantActionActivation.execute(Co&lt;br/&gt;
nstantActionActivation.java:61)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericActivationHolder.execute(GenericActi&lt;br/&gt;
vationHolder.java:352)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Generi&lt;br/&gt;
cPreparedStatement.java:414)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPre&lt;br/&gt;
paredStatement.java:297)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState&lt;br/&gt;
ment.java:1235)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Em&lt;br/&gt;
bedPreparedStatement.java:1648)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Embed&lt;br/&gt;
PreparedStatement.java:294)^M&lt;br/&gt;
        at org.apache.derby.catalog.SystemProcedures.SYSCS_INPLACE_COMPRESS_TABL&lt;br/&gt;
E(SystemProcedures.java:1145)^M&lt;br/&gt;
        at org.apache.derby.exe.ac83ba410fx0122x159fx9a84x0000004261f80.g0(Unkno&lt;br/&gt;
wn Source)^M&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)^M&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)^M&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)^M&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Unknown Source)^M&lt;br/&gt;
        at org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMe&lt;br/&gt;
thod.java:46)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallSta&lt;br/&gt;
tementResultSet.java:76)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Generi&lt;br/&gt;
cPreparedStatement.java:416)^M&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPre&lt;br/&gt;
paredStatement.java:297)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState&lt;br/&gt;
ment.java:1235)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Em&lt;br/&gt;
bedPreparedStatement.java:1648)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedCallableStatement.executeStatement(Em&lt;br/&gt;
bedCallableStatement.java:117)^M&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute(EmbedPrepar&lt;br/&gt;
edStatement.java:1303)^M&lt;br/&gt;
        at org.apache.derbyTesting.system.mailjdbc.utils.DbTasks.compressTable(D&lt;br/&gt;
bTasks.java:618)^M&lt;br/&gt;
        at org.apache.derbyTesting.system.mailjdbc.tasks.Backup.DoCompress(Backu&lt;br/&gt;
p.java:79)^M&lt;br/&gt;
        at org.apache.derbyTesting.system.mailjdbc.tasks.Backup.doWork(Backup.ja&lt;br/&gt;
va:68)^M&lt;br/&gt;
        at org.apache.derbyTesting.system.mailjdbc.tasks.Backup.run(Backup.java:&lt;br/&gt;
46)^M&lt;br/&gt;
Cleanup action completed^M&lt;/p&gt;

&lt;p&gt;       I will add the test to test/langGrantRevokeDDLTest.java.&lt;/p&gt;
</description>
                <environment>Windows Vista</environment>
        <key id="12429312">DERBY-4295</key>
            <summary>SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE cannot be executed after granting permission for execute. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lilywei">Lily Wei</reporter>
                        <labels>
                            <label>derby_triage10_5_2</label>
                    </labels>
                <created>Wed, 1 Jul 2009 19:28:07 +0100</created>
                <updated>Wed, 10 Sep 2014 22:53:59 +0100</updated>
                                            <version>10.5.1.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12726198" author="lilywei" created="Wed, 1 Jul 2009 20:42:59 +0100"  >&lt;p&gt;I add the tests for this issue on GrantRevokeDDLTest.java. Please help me review it. &lt;br/&gt;
This is my test result:&lt;br/&gt;
$ java junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.lang&lt;br/&gt;
.GrantRevokeDDLTest&lt;br/&gt;
....&lt;br/&gt;
Time: 17.082&lt;/p&gt;

&lt;p&gt;OK (4 tests)&lt;/p&gt;</comment>
                            <comment id="12726552" author="mamtas" created="Thu, 2 Jul 2009 17:48:02 +0100"  >&lt;p&gt;I looked at this more and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1062&quot; title=&quot;Change the internal implemetation of SYSCS_INPLACE_COMPRESS_TABLE to share existing alter table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1062&quot;&gt;&lt;del&gt;DERBY-1062&lt;/del&gt;&lt;/a&gt; and the existing tests in GrantRevokeDDLTest and actually this was an intentional behavior change. Have copied couple comments from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1062&quot; title=&quot;Change the internal implemetation of SYSCS_INPLACE_COMPRESS_TABLE to share existing alter table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1062&quot;&gt;&lt;del&gt;DERBY-1062&lt;/del&gt;&lt;/a&gt; here in regarding to the table permission&lt;br/&gt;
********************&lt;br/&gt;
Kathey Marsden added a comment - 13/May/08 12:37 PM &lt;br/&gt;
I didn&apos;t take a close look at the patch, but this diff caught my eye. Is there a case that used to compress that now throws an error?&lt;/p&gt;

&lt;p&gt;&quot;SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SWIPER&apos;, &quot;&lt;br/&gt;
             + &quot;&apos;MYTAB&apos;, 1, 1, 1)&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;assertUpdateCount(cSt, 0);&lt;br/&gt;
+ assertStatementError(&quot;38000&quot;, cSt);&lt;br/&gt;
         cSt.close();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Mamta A. Satoor added a comment - 13/May/08 12:57 PM &lt;br/&gt;
Thanks for taking a look at the patch, Kathey. The test was testing to compress a table that is not owned by the user issuing SYSCS_INPLACE_COMPRESS_TABLE. After the fix for this jira entry, we correctly throw &quot;38000&quot; just like what we do for SYSCS_COMPRESS_TABLE. I hope that answers your question. I have fixed the comment in GrantRevokeDDLTest which said that SYSCS_INPLACE_COMPRESS_TABLE will not behave correctly until &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1062&quot; title=&quot;Change the internal implemetation of SYSCS_INPLACE_COMPRESS_TABLE to share existing alter table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1062&quot;&gt;&lt;del&gt;DERBY-1062&lt;/del&gt;&lt;/a&gt; is fixed. The comment fix went in as revision 655990. &lt;br/&gt;
**************************&lt;/p&gt;

&lt;p&gt;So, Lily, what you are experiencing is the expected behavior. I wonder if we made any changes to the doc to reflect this change in behavior which went in Derby 10.5 I will look into the docs. &lt;/p&gt;

&lt;p&gt;Also, thanks for working on adding the test but we already have coverage for it in GrantRevokeDDLTest. Following existing test does the table ownership check&lt;/p&gt;

&lt;p&gt;        // Try compressing tables not owned.&lt;/p&gt;

&lt;p&gt;        cSt = samConnection.prepareCall(&lt;br/&gt;
            &quot;call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SWIPER&apos;, &apos;MYTAB&apos;, 1)&quot;);&lt;br/&gt;
        assertStatementError(&quot;38000&quot;, cSt);&lt;br/&gt;
        cSt.close();&lt;/p&gt;

&lt;p&gt;        cSt = samConnection.prepareCall(&lt;br/&gt;
            &quot; call &quot;&lt;br/&gt;
            + &quot;SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SWIPER&apos;, &quot;&lt;br/&gt;
            + &quot;&apos;MYTAB&apos;, 1, 1, 1)&quot;);&lt;br/&gt;
        assertStatementError(&quot;38000&quot;, cSt);&lt;br/&gt;
        cSt.close();&lt;/p&gt;</comment>
                            <comment id="12726568" author="lilywei" created="Thu, 2 Jul 2009 18:30:46 +0100"  >&lt;p&gt;Thanks Mamta for looking at the issue and point out our intenstion is to throw the error. Yes, there is a test in GrantRevokeDDLTest as user sam try to do SYSCS_UTIL.SYSCS_COMPRESS_TABLE on table SWIPER.MYTAB that is owned by SWIPER.  Please disregard my changes. Will users ever want to be able to grant execute permission to another user? I guess we are saying we don&apos;t allow such case. I will vote for having this mention in the documentation.&lt;/p&gt;

&lt;p&gt;I will change mailjdbc test to reflect this behavior. Thanks.&lt;/p&gt;</comment>
                            <comment id="12726611" author="mamtas" created="Thu, 2 Jul 2009 19:34:57 +0100"  >&lt;p&gt;I looked through the documentation and didn&apos;t see any privilege granting being mentioned for various procedures. &lt;/p&gt;

&lt;p&gt;For instance, in the example above, if user BACKUP was granted execute privilege on SYSCS_EXPORT_TABLE but not access to table a, then that user will not be able to execute following.&lt;br/&gt;
call SYSCS_UTIL.SYSCS_EXPORT_TABLE(&apos;REFRESH&apos;,&apos;A&apos;,&apos;a&apos;,null,null,null); &lt;br/&gt;
Caused by: java.sql.SQLException: User &apos;BACKUP&apos; does not have SELECT permission on column &apos;COL1&apos; of table &apos;REFRESH&apos;.&apos;A&apos;.&lt;/p&gt;

&lt;p&gt;But there is no mention on this privilege requirement in Derby Reference Manual where we discuss SYSCS_EXPORT_TABLE. &lt;/p&gt;

&lt;p&gt;It seems like Derby Reference Manual might be the correct place to document what are various privilege requirements for different procedures. Alternative place could be where Grant/Revoke are discussed. Would appreciate any feedback on the right doc that should be changed.&lt;/p&gt;</comment>
                            <comment id="12726624" author="mamtas" created="Thu, 2 Jul 2009 19:49:32 +0100"  >&lt;p&gt;While researching on this jira, I found that Derby is not requiring a user to have execute privileges on SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE which I think should be required before a user can use it to try compressing a table. At least, that is what we require for SYSCS_UTIL.SYSCS_EXPORT_TABLE. I have entered &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4296&quot; title=&quot;Derby should require EXECUTE privilege on SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE before allowing users to execute it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4296&quot;&gt;DERBY-4296&lt;/a&gt; regarding the requirement of execute privilege on SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE. May be there are other procedures too for which we do not do this check. That research can be done when we decide to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4296&quot; title=&quot;Derby should require EXECUTE privilege on SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE before allowing users to execute it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4296&quot;&gt;DERBY-4296&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12726682" author="lilywei" created="Thu, 2 Jul 2009 22:09:18 +0100"  >&lt;p&gt;For user BACKUP, it can not perform SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE after getting all the privileges from owner of the table. I think &apos;BACKUP&apos; user should be able to perform SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE if it has the privileges. For example, if user &apos;REFRESH&apos; perform &apos;grant all privileges on REFERSH.INBOX to BACKUP&apos;, user BACKUP should be able to do call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE. I talked to Kathey. She seems to like this idea too. What do you think? Right now, with this check:&lt;br/&gt;
 if (!authid.equals(sd.getAuthorizationId()))&lt;br/&gt;
	throw StandardException.newException(&lt;br/&gt;
	SQLState.AUTH_NO_ACCESS_NOT_OWNER, authid, schemaName);&lt;/p&gt;

&lt;p&gt;Only owner of the table can compress the table. &lt;/p&gt;</comment>
                            <comment id="12726687" author="mamtas" created="Thu, 2 Jul 2009 22:22:36 +0100"  >&lt;p&gt;I am surprised that even with correct privileges, we do not allow inplace compress by non-table owner. I can&apos;t recall if we decided to implement it this way. If no one has objection, i think we should allow a user with correct privileges to compress the table.&lt;/p&gt;</comment>
                            <comment id="12726714" author="kmarsden" created="Thu, 2 Jul 2009 23:33:00 +0100"  >&lt;p&gt;From a practical perspective, I think it is common for a single administrative user to compress the tables and backup the database, so it is important to be able to grant this privilege for all tables to a single user. I personally think that permission to execute the procedure should be sufficient since compress is not really DELETE, INSERT or UPDATE or SELECT.  It could be that we just want our backup user to perform this task but not see or change the data.&lt;/p&gt;</comment>
                            <comment id="12726958" author="dagw" created="Fri, 3 Jul 2009 14:28:22 +0100"  >&lt;p&gt;Triaged for 10.5.2: checked &quot;security&quot;. Is it a regression as well?&lt;/p&gt;</comment>
                            <comment id="12726960" author="dagw" created="Fri, 3 Jul 2009 14:29:49 +0100"  >&lt;p&gt;Checked &quot;repro attached&quot;.&lt;/p&gt;</comment>
                            <comment id="12727527" author="mamtas" created="Mon, 6 Jul 2009 14:50:10 +0100"  >&lt;p&gt;Kathey, since the user can&apos;t see/alter the actual data, it should probably be fine to have just the execute privilege for this particular procedure. The only other thing I can think of is it will be little confusing for users to need table level privileges for other procedures(which involve tables) and not to require those privileges for this compress procedure. Maybe we can avoid this confusion with proper documentation right under each procedure which will provide the necesarry privilege requirement.&lt;/p&gt;</comment>
                            <comment id="12727530" author="mamtas" created="Mon, 6 Jul 2009 14:52:46 +0100"  >&lt;p&gt;Dag, the current behavior of 10.5 is surely different than the one in 10.3. Depending on what we decide to do, the behavior may end up being same again (ie if we decide to require just the execute privilege and not individual table level privileges).&lt;/p&gt;</comment>
                            <comment id="12730528" author="kmarsden" created="Mon, 13 Jul 2009 22:34:44 +0100"  >&lt;p&gt;I talked to Mike who felt that compress should require the same permissions as alter table.  I checked the SQL spec and found this about ALTER TABLE.&lt;br/&gt;
The enabled authorization identifiers shall include the &amp;lt;authorization identifier&amp;gt; that owns the schema&lt;br/&gt;
identified by the &amp;lt;schema name&amp;gt; of the table identified by &amp;lt;table name&amp;gt;.&lt;/p&gt;

&lt;p&gt;I verified that this is how it is currently implemented as follows.&lt;br/&gt;
derby.properties:&lt;br/&gt;
derby.database.sqlAuthorization=true&lt;br/&gt;
derby.connection.requireAuthentication=true&lt;br/&gt;
derby.infolog.append=true&lt;br/&gt;
derby.authentication.provider=BUILTIN&lt;br/&gt;
derby.stream.error.logSeverityLevel=0&lt;/p&gt;

&lt;p&gt;#derby.language.logStatementText=true&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;User&apos;s Definitions&lt;br/&gt;
derby.user.DBO=Dbo&lt;br/&gt;
derby.user.SCHAOWNER=SCHAOwner&lt;br/&gt;
derby.user.SCHBOWNER=SCHBOwner&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:wombat;create=true;user=DBO;password=Dbo&apos;;&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:wombat;user=SCHAOWNER;password=SCHAOwner&apos;;&lt;br/&gt;
ij(CONNECTION1)&amp;gt; create table atab (i int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION1)&amp;gt; call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION1)&amp;gt; call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SCHBOWNER&apos;, &apos;BTAB&apos;, 1);&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: Schema &apos;SCHBOWNER&apos; does not exist&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR 42Y07: Schema &apos;SCHBOWNER&apos; does not exist&lt;br/&gt;
ij(CONNECTION1)&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1, 1, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION1)&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1, 1, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION1)&amp;gt; connect &apos;jdbc:derby:wombat;user=SCHBOWNER;password=SCHBOwner&apos;;&lt;br/&gt;
ij(CONNECTION2)&amp;gt; create table btab (i int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION2)&amp;gt; call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1);&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: User &apos;SCHBOWNER&apos; can not perform the operation in schema &apos;SCHAOWNER&apos;.&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR 42507: User &apos;SCHBOWNER&apos; can not perform the operation in schema &apos;SCHAOWNER&apos;.&lt;br/&gt;
ij(CONNECTION2)&amp;gt; call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SCHBOWNER&apos;, &apos;BTAB&apos;, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION2)&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1, 1, 1);&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: User &apos;SCHBOWNER&apos; can not perform the operation in schema &apos;SCHAOWNER&apos;.&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR 42507: User &apos;SCHBOWNER&apos; can not perform the operation in schema &apos;SCHAOWNER&apos;.&lt;br/&gt;
ij(CONNECTION2)&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1, 1, 1);&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: User &apos;SCHBOWNER&apos; can not perform the operation in schema &apos;SCHAOWNER&apos;.&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR 42507: User &apos;SCHBOWNER&apos; can not perform the operation in schema &apos;SCHAOWNER&apos;.&lt;br/&gt;
ij(CONNECTION2)&amp;gt; connect &apos;jdbc:derby:wombat;user=DBO;password=Dbo&apos;;&lt;br/&gt;
ij(CONNECTION3)&amp;gt; call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION3)&amp;gt; call SYSCS_UTIL.SYSCS_COMPRESS_TABLE(&apos;SCHBOWNER&apos;, &apos;BTAB&apos;, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION3)&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1, 1, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION3)&amp;gt; call SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE(&apos;SCHAOWNER&apos;, &apos;ATAB&apos;, 1, 1, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij(CONNECTION3)&amp;gt; &lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;At least the DBO can perform the operation. As Lily reported  earlier  no level of grant privilege will make a difference.   I still would prefer that only grant execute priv be required on the procedure because even though our code passes through ALTER TABLE, it is not really an ALTER TABLE from the user perspective.&lt;/p&gt;
</comment>
                            <comment id="12885741" author="mamtas" created="Wed, 7 Jul 2010 00:43:46 +0100"  >&lt;p&gt;I am unassigning myself from this jira for now. We need to conside backward compatibility, SQL standards when we decide to look at this jira again.&lt;/p&gt;</comment>
                            <comment id="13212734" author="mamtas" created="Tue, 21 Feb 2012 16:56:20 +0000"  >&lt;p&gt;Went through the jira and it doesn&apos;t look like we came to any conclusion on what is the right behavior. We would need to decide on the correct behavior when we work on this jira again,&lt;/p&gt;</comment>
                            <comment id="14129195" author="chaase3" created="Wed, 10 Sep 2014 22:53:59 +0100"  >&lt;p&gt;Seems to me this is an issue of the system procedure&apos;s behavior rather than of documentation, at this stage. I&apos;m not sure what component system procedures belong in, so I&apos;m leaving it in &quot;No component&quot; for the time being.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412305" name="derby4295.diff" size="1203" author="lilywei" created="Wed, 1 Jul 2009 20:42:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Jul 2009 16:48:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24163</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0daf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>