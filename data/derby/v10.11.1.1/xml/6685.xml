<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6685/DERBY-6685.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6685] Permission problems when running JUnit tests with Ant 1.9.4</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6685</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I saw many permission problems when I set up a build job for the 10.11 branch. See for example this log: &lt;a href=&quot;https://builds.apache.org/job/Derby-10.11-suites.All/1/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Derby-10.11-suites.All/1/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;First stack trace:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Running org.apache.derby.PackagePrivateTestSuite
    [junit] Tests run: 67, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.662 sec
    [junit] Exception in thread &quot;main&quot; java.security.AccessControlException: access denied (&quot;java.io.FilePermission&quot; &quot;/home/jenkins/jenkins-slave/workspace/Derby-10.11-suites.All/10.11-head/junit_20140804_1122/TEST-org.apache.derby.PackagePrivateTestSuite.xml&quot; &quot;write&quot;)
    [junit] 	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:457)
    [junit] 	at java.security.AccessController.checkPermission(AccessController.java:884)
    [junit] 	at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    [junit] 	at java.lang.SecurityManager.checkWrite(SecurityManager.java:979)
    [junit] 	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:194)
    [junit] 	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:156)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.FormatterElement$DelayedFileOutputStream.write(FormatterElement.java:381)
    [junit] 	at java.io.OutputStream.write(OutputStream.java:116)
    [junit] 	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
    [junit] 	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
    [junit] 	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
    [junit] 	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
    [junit] 	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
    [junit] 	at java.io.BufferedWriter.flush(BufferedWriter.java:254)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.openElement(DOMElementWriter.java:371)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.write(DOMElementWriter.java:209)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.write(DOMElementWriter.java:222)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.write(DOMElementWriter.java:222)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.XMLJUnitResultFormatter.endTestSuite(XMLJUnitResultFormatter.java:188)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.fireEndTestSuite(JUnitTestRunner.java:840)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:575)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1179)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:1030)
    [junit] Running org.apache.derby.PackagePrivateTestSuite
    [junit] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0 sec
    [junit] Test org.apache.derby.PackagePrivateTestSuite FAILED (crashed)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can reproduce these failures in my environment by running the junit-single target with Ant 1.9.4. For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant -Dderby.junit.testclass=org.apache.derbyTesting.unitTests.junit.FormatableBitSetTest junit-single
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I use an older Ant version (I&apos;ve tried 1.9.0 and 1.8.2) it does not fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12731737">DERBY-6685</key>
            <summary>Permission problems when running JUnit tests with Ant 1.9.4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Aug 2014 14:59:45 +0100</created>
                <updated>Thu, 7 Aug 2014 13:31:41 +0100</updated>
                            <resolved>Thu, 7 Aug 2014 13:30:39 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.9.2.2</fixVersion>
                    <fixVersion>10.10.2.1</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                    <fixVersion>10.12.0.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14084679" author="knutanders" created="Mon, 4 Aug 2014 15:04:25 +0100"  >&lt;p&gt;The stack trace contains the following lines:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.openElement(DOMElementWriter.java:371)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.write(DOMElementWriter.java:209)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.write(DOMElementWriter.java:222)
    [junit] 	at org.apache.tools.ant.util.DOMElementWriter.write(DOMElementWriter.java:222)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The DOMElementWriter class lives in ant.jar. The default policy for the tests grants permissions to junit.jar and ant-junit.jar, but not to ant.jar. Maybe we need to grant similar permissions to ant.jar in order to get the tests to pass with Ant 1.9.4.&lt;/p&gt;</comment>
                            <comment id="14084705" author="knutanders" created="Mon, 4 Aug 2014 15:32:07 +0100"  >&lt;p&gt;It fails with Ant 1.9.3 too. With 1.9.2 it succeeds.&lt;/p&gt;</comment>
                            <comment id="14086107" author="knutanders" created="Tue, 5 Aug 2014 11:50:35 +0100"  >&lt;p&gt;The attached patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12659874/12659874_d6685-1a.diff&quot; title=&quot;d6685-1a.diff attached to DERBY-6685&quot;&gt;d6685-1a.diff&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; adds the missing permission to ant.jar. I&apos;ve run the junit-all target successfully with Ant 1.9.4 with the patch. Also, suites.All passed when I ran it outside of Ant.&lt;/p&gt;</comment>
                            <comment id="14087342" author="jira-bot" created="Wed, 6 Aug 2014 07:53:41 +0100"  >&lt;p&gt;Commit 1616111 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1616111&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1616111&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6685&quot; title=&quot;Permission problems when running JUnit tests with Ant 1.9.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6685&quot;&gt;&lt;del&gt;DERBY-6685&lt;/del&gt;&lt;/a&gt;: Permission problems when running JUnit tests with Ant 1.9.4&lt;/p&gt;

&lt;p&gt;Grant write permission to ant.jar so that test results can be written&lt;br/&gt;
to a file.&lt;/p&gt;</comment>
                            <comment id="14087444" author="knutanders" created="Wed, 6 Aug 2014 10:05:43 +0100"  >&lt;p&gt;I&apos;ll see if the fix can be backported. The suites.All jobs on builds.apache.org are currently configured to use the latest version of Ant, so they will run into this problem (they apparently haven&apos;t run after Ant was upgraded on the Jenkins server). We have build jobs for branches back to 10.9.&lt;/p&gt;</comment>
                            <comment id="14087465" author="jira-bot" created="Wed, 6 Aug 2014 10:42:52 +0100"  >&lt;p&gt;Commit 1616139 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/branches/10.11&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1616139&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1616139&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6685&quot; title=&quot;Permission problems when running JUnit tests with Ant 1.9.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6685&quot;&gt;&lt;del&gt;DERBY-6685&lt;/del&gt;&lt;/a&gt;: Permission problems when running JUnit tests with Ant 1.9.4&lt;/p&gt;

&lt;p&gt;Merged revision 1616111 from trunk.&lt;/p&gt;</comment>
                            <comment id="14089169" author="jira-bot" created="Thu, 7 Aug 2014 13:18:40 +0100"  >&lt;p&gt;Commit 1616477 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1616477&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1616477&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6685&quot; title=&quot;Permission problems when running JUnit tests with Ant 1.9.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6685&quot;&gt;&lt;del&gt;DERBY-6685&lt;/del&gt;&lt;/a&gt;: Permission problems when running JUnit tests with Ant 1.9.4&lt;/p&gt;

&lt;p&gt;Merged revision 1616111 from trunk.&lt;/p&gt;</comment>
                            <comment id="14089175" author="jira-bot" created="Thu, 7 Aug 2014 13:31:41 +0100"  >&lt;p&gt;Commit 1616479 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/branches/10.9&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1616479&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1616479&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6685&quot; title=&quot;Permission problems when running JUnit tests with Ant 1.9.4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6685&quot;&gt;&lt;del&gt;DERBY-6685&lt;/del&gt;&lt;/a&gt;: Permission problems when running JUnit tests with Ant 1.9.4&lt;/p&gt;

&lt;p&gt;Merged revision 1616477 from 10.10.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12659874" name="d6685-1a.diff" size="2167" author="knutanders" created="Tue, 5 Aug 2014 11:50:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Aug 2014 06:53:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409766</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzsd0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>