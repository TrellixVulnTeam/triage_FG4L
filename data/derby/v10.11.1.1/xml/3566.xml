<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3566/DERBY-3566.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3566] Alter column set data type not allowed in soft upgrade with unique constraint</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3566</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In 10.3 I can do this:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t0 (i int not null, v varchar(1) not null, constraint  uq unique(v,i));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; alter table t0 alter v set data type varchar(2);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;


&lt;p&gt;In 10.4 soft upgrade mode I cannot:&lt;br/&gt;
ij&amp;gt; create table t0 (i int not null, v varchar(1) not null, constraint  uq unique(v,i));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; alter table t0 alter v set data type varchar(2);&lt;br/&gt;
ERROR 42Z20: Column &apos;V&apos; cannot be made nullable. It is part of a primary key or unique constraint, which cannot have any&lt;br/&gt;
nullable columns.&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12392180">DERBY-3566</key>
            <summary>Alter column set data type not allowed in soft upgrade with unique constraint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anurag">Anurag Shekhar</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Mar 2008 16:14:20 +0000</created>
                <updated>Tue, 30 Jun 2009 16:55:51 +0100</updated>
                            <resolved>Thu, 3 Apr 2008 17:24:33 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12582981" author="anurag" created="Fri, 28 Mar 2008 10:53:46 +0000"  >&lt;p&gt;While splitting the condition to check if primary or unique constraint &lt;br/&gt;
column is being set to null I had missed out one condition which &lt;br/&gt;
resulted in any alter on column is wrongly assumed as making the &lt;br/&gt;
column to null able.&lt;/p&gt;

&lt;p&gt;I have fixed this problem and also added a test in upgrade suite to&lt;br/&gt;
change the data type in soft upgrade mode.&lt;/p&gt;</comment>
                            <comment id="12585169" author="kmarsden" created="Thu, 3 Apr 2008 17:24:33 +0100"  >&lt;p&gt;committed to trunk and 10.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12378782" name="derby-3566_v1.diff" size="2951" author="anurag" created="Fri, 28 Mar 2008 10:53:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Mar 2008 10:53:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0usn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>