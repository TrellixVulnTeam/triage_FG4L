<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:45:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-235/DERBY-235.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-235] unable to create a database using a different storage factory than the one provided by default with the engine</title>
                <link>https://issues.apache.org/jira/browse/DERBY-235</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;java -Dderby.subSubProtocol.csf=org.apache.derbyTesting.functionTests.util.corruptio.CorruptDiskStorageFactory org.apache.derby.tools.ij&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:csf:wombat1;create=true&apos;;&lt;br/&gt;
ERROR XJ001: Java exception: &apos;ASSERT FAILED mismatched canonical names csf:C:\suresht\databases\wombat1 != C:\suresht\databases\wombat1: org.apache.derby.iapi.s&lt;br/&gt;
ervices.sanity.AssertFailure&apos;.&lt;br/&gt;
Stack :&lt;br/&gt;
============= begin nested exception, level (1) ===========&lt;br/&gt;
org.apache.derby.iapi.services.sanity.AssertFailure: ASSERT FAILED mismatched canonical names csf:C:\suresht\databases\wombat1 != C:\suresht\databases\wombat1&lt;br/&gt;
       at org.apache.derby.iapi.services.sanity.SanityManager.ASSERT(SanityManager.java:121)&lt;br/&gt;
       at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1773)&lt;br/&gt;
       at org.apache.derby.impl.services.monitor.BaseMonitor.createPersistentService(BaseMonitor.java:1018)&lt;br/&gt;
       at org.apache.derby.iapi.services.monitor.Monitor.createPersistentService(Monitor.java:578)&lt;br/&gt;
       at org.apache.derby.impl.jdbc.EmbedConnection.createDatabase(EmbedConnection.java:1509)&lt;br/&gt;
       at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:220)&lt;br/&gt;
       at org.apache.derby.impl.jdbc.EmbedConnection30.&amp;lt;init&amp;gt;(EmbedConnection30.java:72)&lt;br/&gt;
       at org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:73)&lt;br/&gt;
       at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:183)&lt;br/&gt;
       at java.sql.DriverManager.getConnection(DriverManager.java:512)&lt;br/&gt;
       at java.sql.DriverManager.getConnection(DriverManager.java:140)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:838)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:700)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:528)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:289)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.Main.go(Main.java:209)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:175)&lt;br/&gt;
       at org.apache.derby.impl.tools.ij.Main14.main(Main14.java:55)&lt;br/&gt;
       at org.apache.derby.tools.ij.main(ij.java:60)&lt;br/&gt;
============= end nested exception, level (1) ===========&lt;br/&gt;
Cleanup action completed &lt;br/&gt;
&amp;#8211;&lt;/p&gt;

&lt;p&gt;By Briefly looking the code what I found:&lt;br/&gt;
getCanonicalServiceName() calls return the service name add sub protocol name&lt;br/&gt;
(eg : csf)  in the beginning like csf:C:\suresht\databases\wombat1 . Where as&lt;br/&gt;
createServiceRoot(..) return canonical name without the protocol like &lt;br/&gt;
C:\suresht\databases\wombat1.&lt;/p&gt;

&lt;p&gt;Related code:&lt;br/&gt;
org.apache.derby.impl.services.monitor.BaseMonitor.java&lt;br/&gt;
bootService(..)&lt;br/&gt;
{...&lt;/p&gt;

&lt;p&gt;if(create)&lt;/p&gt;
{
...
serviceName = provider.createServiceRoot(serviceName,
				Boolean.valueOf(properties.getProperty(Property.DELETE_ON_CREATE)).booleanValue());

}
&lt;p&gt;					SanityManager.ASSERT(provider.getCanonicalServiceName(serviceName).equals(serviceName),&lt;br/&gt;
						&quot;mismatched canonical names provider.getCanonicalServiceName(serviceName)&lt;br/&gt;
						+ &quot; != &quot; + serviceName);&lt;br/&gt;
&amp;#8211;&lt;/p&gt;

&lt;p&gt;getCanonicalServiceName() calls return the service name add sub protocol name&lt;br/&gt;
(eg : csf)  in the beginning like csf:C:\suresht\databases\wombat1 . Where as&lt;br/&gt;
createServiceRoot(..) return canonical name without the protocol like &lt;br/&gt;
C:\suresht\databases\wombat1.&lt;/p&gt;


&lt;p&gt;One thing I could not understand is why service name is reset to  the value that is returned from the createServiceRoot(..) ? Is it expected to be different&lt;br/&gt;
than the one that is passed to it in some scenario ?&lt;/p&gt;





</description>
                <environment>Windows , jdk142</environment>
        <key id="31993">DERBY-235</key>
            <summary>unable to create a database using a different storage factory than the one provided by default with the engine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsuresh">Suresh Thalamati</assignee>
                                    <reporter username="tsuresh">Suresh Thalamati</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Apr 2005 11:24:00 +0100</created>
                <updated>Tue, 7 Jun 2005 09:56:16 +0100</updated>
                            <resolved>Tue, 3 May 2005 06:32:19 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="64296" author="tsuresh" created="Tue, 3 May 2005 06:32:19 +0100"  >&lt;p&gt;patch is commiteed for this problem with svn 165645&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy184f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>