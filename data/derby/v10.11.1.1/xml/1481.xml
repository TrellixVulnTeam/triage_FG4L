<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:21:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1481/DERBY-1481.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1481] Client driver: ResultSet.beforeFirst() gives protocol error on scrollable, updatable result sets that are downgraded to read-only</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1481</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When a statement that produces scrollable, updatable result sets executes a query which cannot produce an updatable result set (a join for instance), ResultSet.beforeFirst() fails with the following error:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.sql.SQLException: A network protocol error was encountered and the connection has been terminated: Network protocol exception: DSS length not 0 at end of same id chain parse.  The connection has been terminated.&lt;br/&gt;
        at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:344)&lt;br/&gt;
        at org.apache.derby.client.am.ResultSet.beforeFirst(ResultSet.java:2101)&lt;br/&gt;
        at Repro.main(Repro.java:16)&lt;br/&gt;
Caused by: org.apache.derby.client.am.DisconnectException: A network protocol error was encountered and the connection has been terminated: Network protocol exception: DSS length not 0 at end of same id chain parse.  The connection has been terminated.&lt;br/&gt;
        at org.apache.derby.client.am.ResultSet.flowPositioningFetch(ResultSet.java:3888)&lt;br/&gt;
        at org.apache.derby.client.am.ResultSet.moveToBeforeFirst(ResultSet.java:4149)&lt;br/&gt;
        at org.apache.derby.client.am.ResultSet.beforeFirstX(ResultSet.java:2118)&lt;br/&gt;
        at org.apache.derby.client.am.ResultSet.beforeFirst(ResultSet.java:2096)&lt;br/&gt;
        ... 1 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12345486">DERBY-1481</key>
            <summary>Client driver: ResultSet.beforeFirst() gives protocol error on scrollable, updatable result sets that are downgraded to read-only</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fernanda">Fernanda Pizzorno</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Jul 2006 19:17:32 +0100</created>
                <updated>Fri, 14 Jul 2006 13:20:35 +0100</updated>
                            <resolved>Fri, 14 Jul 2006 13:20:35 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12419483" author="knutanders" created="Thu, 6 Jul 2006 19:20:19 +0100"  >&lt;p&gt;Attached Repro.java which reproduces the error.&lt;/p&gt;</comment>
                            <comment id="12421098" author="knutanders" created="Fri, 14 Jul 2006 13:20:35 +0100"  >&lt;p&gt;Thanks for fixing this bug, Fernanda! The patch looks good and I have verified that it fixes the problem. Committed revision 421887.&lt;/p&gt;</comment>
                            <comment id="12421033" author="fernanda" created="Fri, 14 Jul 2006 15:56:41 +0100"  >&lt;p&gt;When the result set is downgraded from updatable to read-only because the query generating the result set cannot produce an updatable result set, the result set will be downgraded on the server side, and a warning (SQLCARD) indicating the downgrade will be sent to the client. Warnings on the server side are not cleared after they are sent to the client causing the server to send the same warning several times.&lt;/p&gt;

&lt;p&gt;Positioning commands like ResultSet.beforeFirst() that do not return any data also do not expect warnings to be returned. The protocol error was being caused by this downgrade warning that was being sent several times, one of them being in a response to a ResultSet.beforeFirst() command.&lt;/p&gt;

&lt;p&gt;The attached patch (derby-1481.diff) fixed the problem by clearing the warnings after they are sent so that the same warning will not be sent more than once.&lt;/p&gt;

&lt;p&gt;I have successfully run derbyall with this patch. Can someone please review it?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12336420" name="Repro.java" size="738" author="knutanders" created="Thu, 6 Jul 2006 19:20:19 +0100"/>
                            <attachment id="12336849" name="derby-1481.diff" size="2245" author="fernanda" created="Fri, 14 Jul 2006 15:56:41 +0100"/>
                            <attachment id="12336850" name="derby-1481.stat" size="215" author="fernanda" created="Fri, 14 Jul 2006 15:56:41 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Jul 2006 14:56:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22531</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy159r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>