<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:24:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3/DERBY-3.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3] Identity column not filled consecutively with &quot;insert ... select distinct&quot;</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When an &quot;insert ... select distinct&quot; is used to fill a table with an identity column, gaps occur in the identity column. The caps correspond to the rows of the source table that have been suppressed with &quot;distinct&quot;.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;create table temp1 (&lt;br/&gt;
   s varchar(10));&lt;br/&gt;
insert into temp1 values &apos;a&apos;,&apos;a&apos;,&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;c&apos;,&apos;c&apos;,&apos;d&apos;;&lt;/p&gt;

&lt;p&gt;create table temp2 (&lt;br/&gt;
   i integer not null&lt;br/&gt;
      generated always as identity&lt;br/&gt;
      primary key,&lt;br/&gt;
   s varchar(10));&lt;/p&gt;

&lt;p&gt;insert into temp2 (s)&lt;br/&gt;
   select distinct s from temp1;&lt;br/&gt;
select * from temp2;&lt;/p&gt;

&lt;p&gt;output:&lt;br/&gt;
 1   a&lt;br/&gt;
 4   b&lt;br/&gt;
 5   c&lt;br/&gt;
 8   d&lt;/p&gt;</description>
                <environment>Derby Snapshot svnversion 46005&lt;br/&gt;
or Cloudscape 10.0 GA&lt;br/&gt;
Derby 10.2beta</environment>
        <key id="27481">DERBY-3</key>
            <summary>Identity column not filled consecutively with &quot;insert ... select distinct&quot;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chdh@inventec.ch">Christian d&apos;Heureuse</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Sep 2004 18:32:23 +0100</created>
                <updated>Fri, 21 Jan 2011 17:48:07 +0000</updated>
                            <resolved>Mon, 30 Nov 2009 13:49:47 +0000</resolved>
                                    <version>10.2.1.6</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="64528" author="bandaram" created="Thu, 5 May 2005 08:38:06 +0100"  >&lt;p&gt;While it may be desirable not to have gaps in identity values, the current implementation does match required uniqueness.&lt;/p&gt;</comment>
                            <comment id="12360473" author="kmarsden" created="Thu, 15 Dec 2005 10:17:57 +0000"  >&lt;p&gt;Per Satheesh&apos;s comment in May this does not appear to be a  bug&lt;/p&gt;</comment>
                            <comment id="12360491" author="djd" created="Thu, 15 Dec 2005 17:05:19 +0000"  >&lt;p&gt;While I agree it&apos;s not a bug, I could see this as an improvement.  It would be more natural to have consective values in this case.&lt;/p&gt;</comment>
                            <comment id="12360505" author="chdh@inventec.ch" created="Fri, 16 Dec 2005 00:28:15 +0000"  >&lt;p&gt;I used this technique within an SQL script to create consecutive numbers for some tables. I had to use temporary intermediate tables to circumvent this effect.&lt;/p&gt;

&lt;p&gt;I agree that it&apos;s not a real &quot;bug&quot;, but it&apos;s an undesirable effect.&lt;br/&gt;
 Kathey, could you please change the issue type from &quot;bug&quot; to &quot;improvement&quot; and the status back to &quot;open&quot;?&lt;/p&gt;</comment>
                            <comment id="12363668" author="kristwaa" created="Mon, 23 Jan 2006 22:41:22 +0000"  >&lt;p&gt;Ran test script on Derby 10.2beta. The behavior is still the same, you do not get consequtive ids for the given query (with &quot;insert ... select distinct&quot;).&lt;br/&gt;
Recategorized issue, as the current behavior is not a bug.&lt;/p&gt;</comment>
                            <comment id="12712767" author="knutanders" created="Mon, 25 May 2009 19:35:33 +0100"  >&lt;p&gt;Just to add another data point, the identity values are consecutive if you put another query around the select distinct:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; insert into temp2 (s) select * from (select distinct s from temp1) t;&lt;br/&gt;
4 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from temp2;&lt;br/&gt;
I          |S         &lt;br/&gt;
----------------------&lt;br/&gt;
1          |d         &lt;br/&gt;
2          |b         &lt;br/&gt;
3          |c         &lt;br/&gt;
4          |a         &lt;/p&gt;

&lt;p&gt;4 rows selected&lt;/p&gt;

&lt;p&gt;For some reason, the ordering is different too.&lt;/p&gt;</comment>
                            <comment id="12774408" author="knutanders" created="Fri, 6 Nov 2009 21:16:04 +0000"  >&lt;p&gt;The gaps are probably caused by the early evaluation of identity columns mentioned in Dag&apos;s comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4&quot; title=&quot;&amp;quot;order by&amp;quot; is not supported for &amp;quot;insert ... select&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4&quot;&gt;&lt;del&gt;DERBY-4&lt;/del&gt;&lt;/a&gt;, dated 28/Oct/09. A fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4&quot; title=&quot;&amp;quot;order by&amp;quot; is not supported for &amp;quot;insert ... select&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4&quot;&gt;&lt;del&gt;DERBY-4&lt;/del&gt;&lt;/a&gt; will likely fix this issue too.&lt;/p&gt;</comment>
                            <comment id="12777535" author="dagw" created="Fri, 13 Nov 2009 16:03:16 +0000"  >&lt;p&gt;I agree with that analysis, Knut.&lt;/p&gt;</comment>
                            <comment id="12783660" author="knutanders" created="Mon, 30 Nov 2009 13:49:47 +0000"  >&lt;p&gt;This issue has now been fixed by the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4442&quot; title=&quot;Evaluation of default value and identity in an INSERT result set evaluated too early.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4442&quot;&gt;&lt;del&gt;DERBY-4442&lt;/del&gt;&lt;/a&gt;, so I&apos;m marking it as a duplicate of that issue and resolving it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12440634">DERBY-4442</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12440634">DERBY-4442</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 May 2005 07:38:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29361</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37616</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>