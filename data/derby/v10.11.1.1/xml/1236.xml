<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:18:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1236/DERBY-1236.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1236] Verify that applications can&apos;t manipulate the transaction state while inside a distributed transaction.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1236</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The next rev of the JDBC4 spec will clarify that applications may not call the following methods while inside distributed transactions: setAutoCommit( true ), commit(), rollback(), and setSavepoint(). We should verify that we conform.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12332441">DERBY-1236</key>
            <summary>Verify that applications can&apos;t manipulate the transaction state while inside a distributed transaction.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dyret">Dyre Tjeldvoll</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Apr 2006 01:14:30 +0100</created>
                <updated>Tue, 15 Feb 2011 17:11:55 +0000</updated>
                            <resolved>Tue, 25 Apr 2006 22:12:25 +0100</resolved>
                                    <version>10.1.2.1</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12376235" author="dyret" created="Tue, 25 Apr 2006 19:26:52 +0100"  >&lt;p&gt;setAutoCommit(), commit() and rollback() inside a global transaction is tested in jdbcapi/XATest.java (and others). &lt;/p&gt;

&lt;p&gt;setSavepoint() and setSavepoint(String) are NOT tested, but I have verfied that they throw an exception in a global transaction.&lt;/p&gt;

&lt;p&gt;The exceptions thrown are (note that the setSavepoint methods uses the same Exception/error message as rollback):&lt;/p&gt;

&lt;p&gt;commit():&lt;br/&gt;
SQL Exception: Cannot commit a global transaction using the Connection, commit p&lt;br/&gt;
rocessing must go thru XAResource interface.&lt;/p&gt;

&lt;p&gt;rollback():&lt;br/&gt;
SQL Exception: Cannot rollback a global transaction using the Connection, commit&lt;br/&gt;
 processing must go thru XAResource interface.&lt;/p&gt;

&lt;p&gt;setAutoCommit(true):&lt;br/&gt;
SQL Exception: Cannot set AUTOCOMMIT ON when in an XA connection.&lt;/p&gt;

&lt;p&gt;setSavepoint():&lt;br/&gt;
SQL Exception: Cannot rollback a global transaction using the Connection, commit&lt;br/&gt;
 processing must go thru XAResource interface.&lt;/p&gt;

&lt;p&gt;setSavepoint(String):&lt;br/&gt;
SQL Exception: Cannot rollback a global transaction using the Connection, commit&lt;br/&gt;
 processing must go thru XAResource interface.&lt;/p&gt;

&lt;p&gt;I plan to add setSavepoint() and setSavepoint(String) as test cases in XATest.java.&lt;/p&gt;</comment>
                            <comment id="12376238" author="dyret" created="Tue, 25 Apr 2006 20:07:16 +0100"  >&lt;p&gt;Attiching patch (v1) that adds (negative) testcases for setSavePoint() inside a global transaction.&lt;br/&gt;
I have not run derbyall, but I have run XATest.java with java 1.4, 1.5, and 1.6 in embedded and DerbyNetClient. The test appears to be disabled in 1.3 and fails on trunk in DerbyNet.&lt;/p&gt;

&lt;p&gt;Please review&lt;/p&gt;</comment>
                            <comment id="12376256" author="rhillegas" created="Tue, 25 Apr 2006 21:38:56 +0100"  >&lt;p&gt;Thanks, Dyre. I&apos;ll take a look at this patch.&lt;/p&gt;</comment>
                            <comment id="12376262" author="rhillegas" created="Tue, 25 Apr 2006 22:05:01 +0100"  >&lt;p&gt;Committed at subversion revision 396889.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12456526">DERBY-4552</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12325818" name="derby-1236.v1.diff" size="1269" author="dyret" created="Tue, 25 Apr 2006 20:07:16 +0100"/>
                            <attachment id="12325819" name="derby-1236.v1.stat" size="467" author="dyret" created="Tue, 25 Apr 2006 20:07:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Apr 2006 18:26:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29908</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0j0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36900</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>