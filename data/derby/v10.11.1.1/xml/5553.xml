<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:51:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5553/DERBY-5553.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5553] System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5553</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The client system property -Dderby.client.traceDirectory does not work with ClientXADataSource. No trace files are created if this property is set when making XA Connections.&lt;/p&gt;

&lt;p&gt;I am sure it works fine with DriverManager connections and also checked tracing works fine using connection attributes and XA with.  ds.setConnectionAttributes(&quot;traceDirectory=./traceDir&quot;);&lt;/p&gt;

&lt;p&gt;I have not checked  ClientDataSource or ClientConnectionPoolDataSource.&lt;/p&gt;

&lt;p&gt;Attached is a reproduction for this issue.&lt;br/&gt;
mkdir ./traceDir&lt;/p&gt;

&lt;p&gt;javac -g XATemplate.java  utilXid.java&lt;br/&gt;
java -Dderby.client.traceDirectory=&quot;./traceDir&quot; XATemplate&lt;/p&gt;

&lt;p&gt;You will see that traceDir is empty.&lt;br/&gt;
This came up when debugging &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5552&quot; title=&quot;Derby threads hanging when using ClientXADataSource and a deadlock or lock timeout occurs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5552&quot;&gt;&lt;del&gt;DERBY-5552&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12536233">DERBY-5553</key>
            <summary>System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                            <label>derby_backport_reject_10_9</label>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Fri, 23 Dec 2011 00:59:17 +0000</created>
                <updated>Wed, 21 Jan 2015 00:23:09 +0000</updated>
                            <resolved>Wed, 4 Sep 2013 20:20:06 +0100</resolved>
                                    <version>10.8.2.2</version>
                    <version>10.9.1.0</version>
                                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13175208" author="kmarsden" created="Fri, 23 Dec 2011 01:00:23 +0000"  >&lt;p&gt;Linking to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5552&quot; title=&quot;Derby threads hanging when using ClientXADataSource and a deadlock or lock timeout occurs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5552&quot;&gt;&lt;del&gt;DERBY-5552&lt;/del&gt;&lt;/a&gt; as this issue came up when debugging that one.&lt;/p&gt;</comment>
                            <comment id="13175210" author="kmarsden" created="Fri, 23 Dec 2011 01:03:59 +0000"  >&lt;p&gt;Attaching reproduction. See description for run instructions.&lt;/p&gt;</comment>
                            <comment id="13210428" author="kmarsden" created="Fri, 17 Feb 2012 18:30:07 +0000"  >&lt;p&gt;Triage for 10.9. Marking Newcomer and High Value Fix as  it should be straight forward and as Brett discovered, it can be quite frustrating when diagnosing a problem to find the diagnostics don&apos;t work.&lt;/p&gt;</comment>
                            <comment id="13741563" author="kmarsden" created="Thu, 15 Aug 2013 23:13:54 +0100"  >&lt;p&gt;Here is a patch for the code changes for this issue. DataSources were looking only at the attributes and not system properties. I tested the change with the reproduction and also with ConnectionPoolDataSource. I will look at writing tests. I don&apos;t think we have existing tests for testing the tracing system properties.&lt;/p&gt;</comment>
                            <comment id="13741973" author="kmarsden" created="Fri, 16 Aug 2013 07:28:35 +0100"  >&lt;p&gt;Attached is an updated patch derby-5553_diff_withtests.txt which adds tests to ClientSideSystemPropertiesTest for the DataSources.  Also fixes a couple bugs with the initial patch which might have caused NPE&apos;s and corrected the default traceLevel if no traceLevel is set. Running tests.&lt;/p&gt;
</comment>
                            <comment id="13742382" author="kmarsden" created="Fri, 16 Aug 2013 17:53:41 +0100"  >&lt;p&gt;Tests passed. Marking patch available. Ready for review.&lt;/p&gt;</comment>
                            <comment id="13743726" author="knutanders" created="Mon, 19 Aug 2013 12:11:52 +0100"  >&lt;p&gt;The fix and the test cases look good to me. You may want to change the comment in updateDataSourceValues() so that it describes what the code does instead of the symptoms of the fixed bug. For example something along these lines:&lt;/p&gt;

&lt;p&gt;    // Trace level and trace directory will be read from system&lt;br/&gt;
    // properties if they are not specified in the Properties&lt;br/&gt;
    // argument, so we check for them first to avoid getting cut&lt;br/&gt;
    // off by the (prop == null) check below.&lt;/p&gt;</comment>
                            <comment id="13753948" author="jira-bot" created="Thu, 29 Aug 2013 20:07:34 +0100"  >&lt;p&gt;Commit 1518766 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kmarsden&quot; class=&quot;user-hover&quot; rel=&quot;kmarsden&quot;&gt;Kathey Marsden&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1518766&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1518766&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5553&quot; title=&quot;System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5553&quot;&gt;&lt;del&gt;DERBY-5553&lt;/del&gt;&lt;/a&gt; System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource&lt;/p&gt;</comment>
                            <comment id="13755287" author="jira-bot" created="Sat, 31 Aug 2013 01:14:08 +0100"  >&lt;p&gt;Commit 1519123 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kmarsden&quot; class=&quot;user-hover&quot; rel=&quot;kmarsden&quot;&gt;Kathey Marsden&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1519123&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1519123&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5553&quot; title=&quot;System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5553&quot;&gt;&lt;del&gt;DERBY-5553&lt;/del&gt;&lt;/a&gt; System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource &lt;/p&gt;

&lt;p&gt;merge revision  1518766 from trunk.&lt;/p&gt;</comment>
                            <comment id="13758226" author="kmarsden" created="Wed, 4 Sep 2013 20:19:47 +0100"  >&lt;p&gt;Marking derby_backport_reject_10_19 as the client datasource structure is different on earlier branches and this would be a manual merge. The fix could be manually backported if specifically required on an earlier branch.&lt;/p&gt;</comment>
                            <comment id="14284755" author="myrna" created="Wed, 21 Jan 2015 00:23:09 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12536170">DERBY-5552</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12508474" name="XATemplate.java" size="3457" author="kmarsden" created="Fri, 23 Dec 2011 01:03:58 +0000"/>
                            <attachment id="12598309" name="derby-5553_codediff.txt" size="2093" author="kmarsden" created="Thu, 15 Aug 2013 23:13:54 +0100"/>
                            <attachment id="12598372" name="derby-5553_diff_withtests.txt" size="5458" author="kmarsden" created="Fri, 16 Aug 2013 07:28:35 +0100"/>
                            <attachment id="12508475" name="utilXid.java" size="1591" author="kmarsden" created="Fri, 23 Dec 2011 01:03:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Aug 2013 11:11:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221916</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0dlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>