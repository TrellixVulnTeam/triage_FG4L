<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:51:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3187/DERBY-3187.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3187] SimpleApp (demo) does not work in a client setting</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3187</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Since J2ME support was added to the simple demo (bin-releases: demo/programs/simple/SimpleApp.java) in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2216&quot; title=&quot;Allow demo SimpleApp to work in J2ME environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2216&quot;&gt;&lt;del&gt;DERBY-2216&lt;/del&gt;&lt;/a&gt; (first available in 10.3.1.4), the demo has not worked in a pure client setting as described in the documentation (bin-releases: demo/programs/simple/example.html). This is a regression from 10.2.2.0.&lt;/p&gt;

&lt;p&gt;$ export CLASSPATH=.:$DERBY_INSTALL/lib/derbyclient.jar&lt;br/&gt;
$ cd $DERBY_INSTALL/demo/programs/simple&lt;/p&gt;

&lt;p&gt;10.2.2.0:&lt;/p&gt;

&lt;p&gt;$ java SimpleApp derbyclient&lt;br/&gt;
SimpleApp starting in derbyclient mode.&lt;br/&gt;
Loaded the appropriate driver.&lt;br/&gt;
Connected to and created database derbyDB&lt;br/&gt;
Created table derbyDB&lt;br/&gt;
Inserted 1956 Webster&lt;br/&gt;
Inserted 1910 Union&lt;br/&gt;
Updated 1956 Webster to 180 Grand&lt;br/&gt;
Updated 180 Grand to 300 Lakeshore&lt;br/&gt;
Verified the rows&lt;br/&gt;
Dropped table derbyDB&lt;br/&gt;
Closed result set and statement&lt;br/&gt;
Committed transaction and closed connection&lt;br/&gt;
SimpleApp finished&lt;/p&gt;


&lt;p&gt;10.3.1.4:&lt;/p&gt;

&lt;p&gt;$ java SimpleApp derbyclient&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/derby/jdbc/EmbeddedSimpleDataSource&lt;/p&gt;
</description>
                <environment>derbyclient (no derby.jar in the classpath)</environment>
        <key id="12382012">DERBY-3187</key>
            <summary>SimpleApp (demo) does not work in a client setting</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12379958">DERBY-3118</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johnemb">John H. Embretsen</assignee>
                                    <reporter username="johnemb">John H. Embretsen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2007 15:02:07 +0000</created>
                <updated>Tue, 30 Jun 2009 16:55:48 +0100</updated>
                            <resolved>Tue, 20 Nov 2007 19:36:30 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Demos/Scripts</component>
                        <due>Sat, 24 Nov 2007 08:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12540763" author="johnemb" created="Wed, 7 Nov 2007 15:21:07 +0000"  >&lt;p&gt;I&apos;m wondering how the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2216&quot; title=&quot;Allow demo SimpleApp to work in J2ME environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2216&quot;&gt;&lt;del&gt;DERBY-2216&lt;/del&gt;&lt;/a&gt; J2ME change was tested in a J2ME environment in the first place. Wouldn&apos;t the statement &quot;import java.sql.DriverManager&quot; cause an error in a CDC environment? At least it fails (with NoClassDefFoundError: java.sql.DriverManager) with the phoneME cvm (CDC/FP), even if I make sure the check for J2ME (which in its current state is inadequate) is true.&lt;/p&gt;

&lt;p&gt;Anyway, I am planning to fix this for 10.3.2 as part of a major overhaul of the simple demo (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3118&quot; title=&quot;Simple demo is out of date&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3118&quot;&gt;&lt;del&gt;DERBY-3118&lt;/del&gt;&lt;/a&gt;). I&apos;m currently considering two options:&lt;/p&gt;

&lt;p&gt;1) Revert the J2ME changes introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2216&quot; title=&quot;Allow demo SimpleApp to work in J2ME environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2216&quot;&gt;&lt;del&gt;DERBY-2216&lt;/del&gt;&lt;/a&gt;. Instead, we may create a separate simple demo for the mobile platform.&lt;/p&gt;

&lt;p&gt;2) Always keep the datasource&apos;s static type as javax.sql.DataSource, which is available in all environments. When access to methods in EmbeddedSimpleDataSource is required (only in Java ME environments), do a cast from DataSource to EmbeddedSimpleDataSource, e.g. like this:&lt;/p&gt;

&lt;p&gt;((org.apache.derby.jdbc.EmbeddedSimpleDataSource)ds).setCreateDatabase(&quot;create&quot;);&lt;/p&gt;

&lt;p&gt;instead of this:&lt;/p&gt;

&lt;p&gt;ds.setCreateDatabase(&quot;create&quot;);&lt;/p&gt;


&lt;p&gt;Option 2 works (runtime errors in non-mobile environments are avoided), at least in the JVM&apos;s I&apos;ve tried so far, but:&lt;br/&gt;
  a) I&apos;m not sure it will work in all &quot;supported&quot; JVMs (need to refresh and extend my Java spec knowledge a bit I guess).&lt;br/&gt;
  b) The code looks less elegant, which partly defeats the purpose of a &lt;b&gt;simple&lt;/b&gt; demo.&lt;/p&gt;

&lt;p&gt;So I&apos;m inclined to go for option 1.&lt;/p&gt;

&lt;p&gt;Any opinions? Or does anyone have any other options we could use to solve this?&lt;/p&gt;</comment>
                            <comment id="12540820" author="myrna" created="Wed, 7 Nov 2007 18:06:35 +0000"  >&lt;p&gt;I tested that code, with IBM&apos;s implementation (weme6.1 - which is CDCFoundation 1.1), and it worked fine.&lt;br/&gt;
I don&apos;t think an import statement by itself could cause a ClassDefNotFound, but the DriverManager class is referenced in the demo...&lt;br/&gt;
I understand it&apos;s up to the JVM to delay loading of classes or not.&lt;/p&gt;

&lt;p&gt;So, to make this safe in all JVMs, I think a separate simple demo for the mobile platform sounds appropriate.&lt;/p&gt;</comment>
                            <comment id="12541063" author="johnemb" created="Thu, 8 Nov 2007 15:25:58 +0000"  >&lt;p&gt;Thanks Myrna for clarifying the difference in behavior between the VMs. Based on this information, I have decided to pursue option 1 for fixing this issue.&lt;/p&gt;

&lt;p&gt;Attaching a patch d3187-v01.diff which reverts revision 497686, i.e. the changes introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2216&quot; title=&quot;Allow demo SimpleApp to work in J2ME environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2216&quot;&gt;&lt;del&gt;DERBY-2216&lt;/del&gt;&lt;/a&gt; to enable J2ME support in SimpleApp.java. The patch also updates LAST-MODIFIED meta information in java/demo/simple/example.html.&lt;/p&gt;

&lt;p&gt;With this patch, the simple demo works in both the &quot;embedded&quot; and &quot;derbyclient&quot; environments as described in example.html.&lt;/p&gt;

&lt;p&gt;I will create another Jira issue for adding a simple demo suitable for J2ME/Java ME platforms.&lt;br/&gt;
Please review/commit &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12541069" author="johnemb" created="Thu, 8 Nov 2007 15:55:18 +0000"  >&lt;p&gt;Note: The patch is for trunk, but I would like to get this into the 10.3 branch as well.&lt;/p&gt;</comment>
                            <comment id="12541462" author="myrna" created="Fri, 9 Nov 2007 22:32:31 +0000"  >&lt;p&gt;I applied the patch to trunk with revision 593673, trusting that an overhaul of the demo will also address having a demo for the J2ME platform.&lt;/p&gt;

&lt;p&gt;However, I have some concern applying it to 10.3 because the J2ME support was added on request and there&apos;s no alternative...&lt;br/&gt;
I think documentation on how to do client/server is more readily available than how to do J2ME, and would therefore to leave this in place in 10.3, even though it is not fully working.&lt;/p&gt;</comment>
                            <comment id="12541574" author="johnemb" created="Sat, 10 Nov 2007 19:01:02 +0000"  >&lt;p&gt;Absolutely, I agree that we should have some kind of demo with support for J2ME in 10.3 as well. I have a variant of SimpleApp for J2ME in my sandbox, and expect to attach it as a patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3190&quot; title=&quot;New simple demo suitable for supported Java ME platforms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3190&quot;&gt;&lt;del&gt;DERBY-3190&lt;/del&gt;&lt;/a&gt; soon. Would it be acceptable to get the new J2ME-demo into both trunk and 10.3, and then apply the modification to SimpleApp (this Jira issue) to 10.3 as well? No need to answer until the patch is posted... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks for committing!&lt;/p&gt;</comment>
                            <comment id="12544021" author="myrna" created="Tue, 20 Nov 2007 19:36:30 +0000"  >&lt;p&gt;Backported the fix to 10.3 with revision 596793 (together with the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3190&quot; title=&quot;New simple demo suitable for supported Java ME platforms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3190&quot;&gt;&lt;del&gt;DERBY-3190&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12544042" author="johnemb" created="Tue, 20 Nov 2007 20:13:16 +0000"  >&lt;p&gt;Awesome, Myrna, thanks! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ll verify the commit and (hopefully) close this issue tomorrow. The same goes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3190&quot; title=&quot;New simple demo suitable for supported Java ME platforms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3190&quot;&gt;&lt;del&gt;DERBY-3190&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12544826" author="johnemb" created="Thu, 22 Nov 2007 15:12:55 +0000"  >&lt;p&gt;Verified the commit, and that SImpleApp now works in a pure client setting in 10.3. Case closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12382103">DERBY-3190</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12369177" name="d3187-v01.diff" size="8628" author="johnemb" created="Thu, 8 Nov 2007 15:25:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Nov 2007 18:06:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0uuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>