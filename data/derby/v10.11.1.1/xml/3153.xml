<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:47:10 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3153/DERBY-3153.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3153] AccessControlException when running junit tests under the ant harness in ant 1.7.0</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3153</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The following AccessControlException occurs on junit tests run under the ant harness if the ant version is 1.7.0:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.derbyTesting.functionTests.tests.jdbcapi.AutoloadTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 3, Failures: 0, Errors: 1, Time elapsed: 1.029 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception in thread &quot;main&quot; java.security.AccessControlException: access denied (java.io.FilePermission /Users/rh161140/derby/mainline/trunk/junitvmwatcher520156310.properties write)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:264)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessController.checkPermission(AccessController.java:427)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.SecurityManager.checkWrite(SecurityManager.java:962)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:169)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:70)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.io.FileWriter.&amp;lt;init&amp;gt;(FileWriter.java:46)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.registerNonCrash(JUnitTestRunner.java:924)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:772)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.derbyTesting.functionTests.tests.jdbcapi.AutoloadTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec&lt;/p&gt;

&lt;p&gt;I haven&apos;t looked at the ant source, but here is my theory about what is going on:&lt;/p&gt;

&lt;p&gt;1) Ant 1.7.0 is trying to write a file to the directory where the ant script lives&lt;/p&gt;

&lt;p&gt;2) The write is not wrapped in a privileged block&lt;/p&gt;

&lt;p&gt;3) So all code domains above it on the stack need to be granted write permission on the directory where the ant script lives&lt;/p&gt;

&lt;p&gt;I will attach a modified version of derby_tests.policy which allows me to start up the tests without tripping across this security exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12381250">DERBY-3153</key>
            <summary>AccessControlException when running junit tests under the ant harness in ant 1.7.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vemund">Vemund &#216;stgaard</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Oct 2007 15:31:08 +0100</created>
                <updated>Thu, 27 Mar 2008 15:26:35 +0000</updated>
                            <resolved>Wed, 5 Mar 2008 14:28:09 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12537974" author="rhillegas" created="Fri, 26 Oct 2007 15:35:24 +0100"  >&lt;p&gt;Attaching derby-3153-sampleFix-aa.diff. This adds some more permissions to the default test policy, derby_tests.policy. With those permissions, I am able to start up the junit tests under the ant harness under ant 1.7.0 and they start out running without errors. That is, I don&apos;t see any initial security exceptions.&lt;/p&gt;

&lt;p&gt;I think this could be the basis of a fix for this bug. The additional permissions would need to be propagated to the other policy files used by the tests and, of course, some time would have to be spent verifying that the tests run cleanly.&lt;/p&gt;</comment>
                            <comment id="12572123" author="vemund" created="Mon, 25 Feb 2008 16:53:35 +0000"  >&lt;p&gt;As part of work on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3445&quot; title=&quot;Make it easier to use the EMMA tool to measure the code coverage of the Derby testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3445&quot;&gt;&lt;del&gt;DERBY-3445&lt;/del&gt;&lt;/a&gt; I have submitted a patch to that Jira that I believe also addresses the problem seen in this report. It is possible this report can be closed if the patches for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3445&quot; title=&quot;Make it easier to use the EMMA tool to measure the code coverage of the Derby testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3445&quot;&gt;&lt;del&gt;DERBY-3445&lt;/del&gt;&lt;/a&gt; are committed.&lt;/p&gt;</comment>
                            <comment id="12572159" author="djd" created="Mon, 25 Feb 2008 18:53:34 +0000"  >&lt;p&gt;Alternate version of a fix extracted from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3445&quot; title=&quot;Make it easier to use the EMMA tool to measure the code coverage of the Derby testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3445&quot;&gt;&lt;del&gt;DERBY-3445&lt;/del&gt;&lt;/a&gt;. Grants a more specific set of permissions to the ant and junit code.&lt;br/&gt;
Makes the junit targets in top-level build.xml have the same temp folder as the current directory (junit_timestamp).&lt;/p&gt;</comment>
                            <comment id="12575359" author="vemund" created="Wed, 5 Mar 2008 14:28:09 +0000"  >&lt;p&gt;I believe this issue can be closed now, as the patches checked in as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3445&quot; title=&quot;Make it easier to use the EMMA tool to measure the code coverage of the Derby testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3445&quot;&gt;&lt;del&gt;DERBY-3445&lt;/del&gt;&lt;/a&gt; also covered this problem. &lt;/p&gt;

&lt;p&gt;I&apos;ve verified that updated code from trunk works when testing with ant 1.7 in my sandbox at least.&lt;/p&gt;

&lt;p&gt;Not sure what the procedure is when closing a report that was fixed as part of work on a different report, I hope I&apos;m not breaking any rules by just closing it now.&lt;/p&gt;</comment>
                            <comment id="12582561" author="dyret" created="Thu, 27 Mar 2008 09:29:22 +0000"  >&lt;p&gt;Assigning to Dan and setting fix version to 10.4&lt;/p&gt;</comment>
                            <comment id="12582689" author="djd" created="Thu, 27 Mar 2008 15:26:35 +0000"  >&lt;p&gt;Assign to Vemund, since that is who contributed the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12376424" name="d3153_from3445_diff.txt" size="2137" author="djd" created="Mon, 25 Feb 2008 18:53:34 +0000"/>
                            <attachment id="12368489" name="derby-3153-sampleFix-aa.diff" size="1859" author="rhillegas" created="Fri, 26 Oct 2007 15:35:24 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Feb 2008 16:53:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0z1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>