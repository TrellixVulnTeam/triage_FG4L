<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:41:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1042/DERBY-1042.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1042] store/OnlineBackupTest3.java intermittently hangs</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1042</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;store/OnlineBackupTest3.java hangs.&lt;/p&gt;

&lt;p&gt;More info:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://article.gmane.org/gmane.comp.apache.db.derby.devel/15336&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.apache.db.derby.devel/15336&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.multinet.no/~solberg/public/Apache/DerbyJvm1.4/Limited/testSummary-379835.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.multinet.no/~solberg/public/Apache/DerbyJvm1.4/Limited/testSummary-379835.html&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Linux-2.6.14-1.1644 FC4&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt; ERROR XSRS5: Error copying file (during backup) from /export/home/tmp/os136789/testingDerbyJvm1.4/Linux-2.6.14-1.1644_FC4_i686-i686/derbyall/derbyall/storeall/storemore/OnlineBackupTest3/wombat/jar/APP to extinout/onlinebackuptest/wombat/jar/APP.&lt;/p&gt;</description>
                <environment>OS: Linux RedHat 4(Stentz 2.6.14-1.1644_FC4 i686) - Linux 2.6.14-1.1644_FC4 #1 Sun Nov 27 03:25:11 EST 2005, JVM: Sun Microsystems Inc. 1.4.2_10&lt;br/&gt;
OS: Linux 2.6.13-1.1532_FC4 #1 Thu Oct 20 01:30:08 EDT 2005 i686 i686 i386 GNU/Linux, JVM: Java HotSpot(TM) Client VM (1.4.2_02-b03 mixed mode)</environment>
        <key id="12329400">DERBY-1042</key>
            <summary>store/OnlineBackupTest3.java intermittently hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tsuresh">Suresh Thalamati</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Feb 2006 05:14:33 +0000</created>
                <updated>Tue, 20 Mar 2007 20:57:09 +0000</updated>
                            <resolved>Tue, 14 Mar 2006 08:34:57 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12369706" author="tsuresh" created="Fri, 10 Mar 2006 02:40:00 +0000"  >&lt;p&gt;I could not reproduce this problem on my machine. By looking at the code I&lt;br/&gt;
found backup is getting unblocked before the post commit work is done. &lt;br/&gt;
This may cause the error that is reported, if the jar files to copied to the&lt;br/&gt;
backup is deleted by the post commit.  Attached patch unblocks the backup&lt;br/&gt;
only after the post commit work that is schedules to run in the same&lt;br/&gt;
transaction is done. While scanning the code for this problem, I also noticed &lt;br/&gt;
couple of other small issues, this patch addresses them also. &lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1042&quot; title=&quot;store/OnlineBackupTest3.java intermittently hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1042&quot;&gt;&lt;del&gt;DERBY-1042&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&amp;#8211; unblock the backup only after the post commit work to be done on the same&lt;br/&gt;
   transaction is complete. &lt;br/&gt;
&amp;#8211; when backup is in progress drop stub files are not deleted during&lt;br/&gt;
   checkpoint. These are necessary to perform recovery starting from the &lt;br/&gt;
   backup checkpoint. &lt;br/&gt;
&amp;#8211; synchronized getContaineNames() that gets the containers to be written to&lt;br/&gt;
   the backup. This method need to be synchronized so that other privileged&lt;br/&gt;
   actions does not run in parallel and vice versa. &lt;/p&gt;

&lt;p&gt;&amp;#8211; Modified the OnlineBackupTest1.java and OnlineBackupTest3.java  tests to&lt;br/&gt;
   abort if there is a error during the backup instead of waiting incorrectly&lt;br/&gt;
   for the failed backup to complete forever. &lt;/p&gt;


&lt;p&gt;TESTS : derbyall test suite passed on Windows XP/JDK142&lt;/p&gt;

&lt;p&gt;It would be great if some can review and commit this patch. &lt;/p&gt;

&lt;p&gt;svn stat:&lt;br/&gt;
M      java\engine\org\apache\derby\impl\store\raw\xact\Xact.java&lt;br/&gt;
M      java\engine\org\apache\derby\impl\store\raw\log\LogToFile.java&lt;br/&gt;
M      java\engine\org\apache\derby\impl\store\raw\data\BaseDataFileFactory.java&lt;/p&gt;

&lt;p&gt;M      java\testing\org\apache\derbyTesting\functionTests\tests\store\OnlineBackup.java&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\store\OnlineBackupTest1.java&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\store\OnlineBackupTest3.java&lt;/p&gt;</comment>
                            <comment id="12369765" author="mikem" created="Fri, 10 Mar 2006 09:00:55 +0000"  >&lt;p&gt;I tested/reviewed/committed the submitted patch:&lt;/p&gt;

&lt;p&gt;m1_142:70&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\BaseDataFileFact&lt;br/&gt;
ory.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\impl\store\raw\log\LogToFile.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\impl\store\raw\xact\Xact.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\store\On&lt;br/&gt;
lineBackup.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\store\On&lt;br/&gt;
lineBackupTest1.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\store\On&lt;br/&gt;
lineBackupTest3.java&lt;br/&gt;
Transmitting file data ......&lt;br/&gt;
Committed revision 384661.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12323340" name="OnlineBackupTest3.tar.gz" size="1934293" author="olesolberg" created="Fri, 24 Feb 2006 05:33:43 +0000"/>
                            <attachment id="12323983" name="derby-1042.diff" size="14309" author="tsuresh" created="Fri, 10 Mar 2006 02:39:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Mar 2006 02:40:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy134v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>