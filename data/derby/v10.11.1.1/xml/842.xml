<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-842/DERBY-842.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-842] Internationalize messages in PreparedStatement to Section in org.apache.derby.client.am</title>
                <link>https://issues.apache.org/jira/browse/DERBY-842</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12327909">DERBY-842</key>
            <summary>Internationalize messages in PreparedStatement to Section in org.apache.derby.client.am</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12311751">DERBY-400</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidvc">David Van Couvering</assignee>
                                    <reporter username="davidvc">David Van Couvering</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Jan 2006 02:27:01 +0000</created>
                <updated>Fri, 21 Jan 2011 18:09:06 +0000</updated>
                            <resolved>Thu, 1 Jun 2006 06:47:47 +0100</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12363851" author="davidvc" created="Wed, 25 Jan 2006 03:33:54 +0000"  >&lt;p&gt;XN200 - XN250&lt;/p&gt;</comment>
                            <comment id="12373395" author="davidvc" created="Thu, 6 Apr 2006 01:42:45 +0100"  >&lt;p&gt;Resolved with this last commit, revision 391667.&lt;/p&gt;

&lt;p&gt;Will close once I verify that regression tests pass&lt;/p&gt;</comment>
                            <comment id="12373400" author="davidvc" created="Thu, 6 Apr 2006 02:23:52 +0100"  >&lt;p&gt;Resolved the wrong issue, it should have been &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-839&quot; title=&quot;Internationalize messages CallableStatement40 to Cursor.java in org.apache.derby.client.am&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-839&quot;&gt;&lt;del&gt;DERBY-839&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12374435" author="davidvc" created="Fri, 14 Apr 2006 07:21:02 +0100"  >&lt;p&gt;Committed revision 393967&lt;/p&gt;</comment>
                            <comment id="12374607" author="dyret" created="Sat, 15 Apr 2006 17:18:09 +0100"  >&lt;p&gt;It looks like revision 393967 breaks a number of tests in the jdbc4 suite.&lt;/p&gt;

&lt;p&gt;Anurag Shekar writes:&lt;/p&gt;

&lt;p&gt;All wrapper tests are failing because of a change in SQLState for &lt;br/&gt;
failing to unwrap. (from XJ120 to XJ128). &lt;br/&gt;
org.apache.derbyTesting.functionTests.util.SQLStateConstants.java still &lt;br/&gt;
have the XJ120 for this state.&lt;br/&gt;
anurag&lt;br/&gt;
Dyre.Tjeldvoll@sun.com wrote:&lt;br/&gt;
&amp;gt; When I try to run TestDbMetaData.java on a clean trunk (compile and&lt;br/&gt;
&amp;gt; run with b80) I get:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; java.sql.SQLException: Unable to unwrap for &apos;interface java.sql.PreparedStatement&apos;&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:44)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:136)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:87)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:93)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:172)        at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(EmbedConnection.java:1939)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.ConnectionChild.newSQLException(ConnectionChild.java:150)&lt;br/&gt;
&amp;gt;         at org.apache.derby.impl.jdbc.EmbedDatabaseMetaData40.unwrap(EmbedDatabaseMetaData40.java:113)&lt;br/&gt;
&amp;gt;         at org.apache.derbyTesting.functionTests.tests.jdbc4.TestDbMetaData.t_wrapper(TestDbMetaData.java:377)&lt;br/&gt;
&amp;gt;         at org.apache.derbyTesting.functionTests.tests.jdbc4.TestDbMetaData.testDatabaseMetaDataMethods(TestDbMetaData.java:173)&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Can anyone shed some light on this? &lt;/p&gt;

&lt;p&gt;This is a bit of a problem since the primary test suite for the jdbc4 work is now broken.&lt;/p&gt;</comment>
                            <comment id="12374684" author="knutanders" created="Sun, 16 Apr 2006 17:08:48 +0100"  >&lt;p&gt;jdbc4/TestResultSetMethods.java fails too since on the client&lt;br/&gt;
ResultSet.checkForClosedResultSet() uses SQL state XJ012&lt;br/&gt;
(ALREADY_CLOSED) whereas EmbedResultSet.checkIfClosed() uses XCL16&lt;br/&gt;
(LANG_RESULT_SET_NOT_OPEN).&lt;/p&gt;

&lt;p&gt;By the way, would it be a good idea that patches of this size were&lt;br/&gt;
uploaded on JIRA for review before they were committed?&lt;/p&gt;</comment>
                            <comment id="12374777" author="davidvc" created="Tue, 18 Apr 2006 00:32:04 +0100"  >&lt;p&gt;Hi, all.  I ran derbyall on JDK 14, and didn&apos;t run the jdbc4 tests.  I am making a note to start running those.  I am assuming it is not yet time to use JDK16 as the base JDK to run derbyall on.  Someone let me know if you have other opinions.  But I&apos;ll start running the jdbc4 suite.&lt;/p&gt;

&lt;p&gt;I&apos;ll run jdbc4 on this patch and fix the discrepancies.  I have noted Kathey&apos;s comments that the SQL States should match and I agree.  It&apos;s very hard to do this manually so I am looking to all of you when you find a discrepancy like this to log a bug and I&apos;ll fix it.&lt;/p&gt;

&lt;p&gt;Although the patch was large, the changes made are fairly basic and I assumed non-controversial.   I can start making these patches available for review, if there is a desire for this.&lt;/p&gt;</comment>
                            <comment id="12374799" author="davidvc" created="Tue, 18 Apr 2006 03:27:58 +0100"  >&lt;p&gt;Knut comments:&lt;br/&gt;
&amp;lt;quote&amp;gt;&lt;br/&gt;
 jdbc4/TestResultSetMethods.java fails too since on the client&lt;br/&gt;
ResultSet.checkForClosedResultSet() uses SQL state XJ012&lt;br/&gt;
(ALREADY_CLOSED) whereas EmbedResultSet.checkIfClosed() uses XCL16&lt;br/&gt;
(LANG_RESULT_SET_NOT_OPEN).&lt;br/&gt;
&amp;lt;/quote&amp;gt;  &lt;/p&gt;

&lt;p&gt;and Kathey mentions on email that we should strive for the SQL States to be the same on embedded and network client drivers, to which I wholeheartedly agree.&lt;/p&gt;

&lt;p&gt;The problem is, fixing this is turning out to be a bit tricky, because the message for XCL16 is&lt;/p&gt;

&lt;p&gt;XCL16.S=ResultSet not open. Operation &apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos; not permitted. Verify that autocommit is OFF.&lt;/p&gt;


&lt;p&gt;The reason this is a problem is becuase ResultSet.checkForClosedResultSet()  is a generic method called by many (about 30) methods of ResultSet, and the particular operation being attempted is not specified.&lt;/p&gt;

&lt;p&gt;So, I could fix this by &lt;/p&gt;

&lt;p&gt;(a) changing the message for XCL16 to not specify the operation&lt;br/&gt;
(b) use the string &quot;&amp;lt;unspecified&amp;gt;&quot; in the client code (I&apos;d internationalize the string so it can be translated)&lt;/p&gt;

&lt;p&gt;Any opinions?  Otherwise I&apos;ll go with option (b)&lt;/p&gt;</comment>
                            <comment id="12374801" author="rhillegas" created="Tue, 18 Apr 2006 03:54:27 +0100"  >&lt;p&gt;If you wanted to be fancy: checkForClosedResultSet() could use Throwable.getStackTrace() to look at the stack above it and find the first method name which appears in the public api for ResultSet. That name could then be included in the error message.&lt;/p&gt;

&lt;p&gt;As a practical matter, I don&apos;t see much value to the &quot;Operation &lt;/p&gt;
{0}
&lt;p&gt; not permitted&quot; clause. The application code knows which ResultSet method it just called.&lt;/p&gt;</comment>
                            <comment id="12374986" author="davidvc" created="Wed, 19 Apr 2006 03:38:30 +0100"  >&lt;p&gt;I committed a fix that should resolve the jdbc40 failures (at least it does on my machine).  Let me know if you&apos;re still seeing issues.&lt;/p&gt;</comment>
                            <comment id="12377776" author="knutanders" created="Thu, 4 May 2006 20:08:37 +0100"  >&lt;p&gt;One message in am/ResultSet.java has not been internationalized yet:&lt;/p&gt;

&lt;p&gt;    private SQLException jdbc3MethodNotSupported()&lt;/p&gt;
    {
        // This will get internationalized in another patch
        return new SqlException(agent_.logWriter_, 
            &quot;JDBC 3 method called - not yet supported&quot;).getSQLException();
    }

&lt;p&gt;Is this one logged in another issue?&lt;/p&gt;</comment>
                            <comment id="12377838" author="davidvc" created="Fri, 5 May 2006 00:36:32 +0100"  >&lt;p&gt;I will fix this, I am not aware of a bugid that covers this.  I&apos;ll reopen the bug&lt;/p&gt;</comment>
                            <comment id="12377839" author="davidvc" created="Fri, 5 May 2006 00:36:55 +0100"  >&lt;p&gt;Missed an internationalization change.  This may have been added later, but I&apos;ll fix it.&lt;/p&gt;</comment>
                            <comment id="12377971" author="knutanders" created="Fri, 5 May 2006 15:17:54 +0100"  >&lt;p&gt;If you insist... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks! The SQL state should be 0A000 so that SQLFeatureNotSupportedException is raised in JDBC 4.&lt;/p&gt;</comment>
                            <comment id="12414168" author="davidvc" created="Thu, 1 Jun 2006 06:47:47 +0100"  >&lt;p&gt;Fixed missed hardcoded string, revision 410695.  Passes derbynetclientmats and jdbc40 suites.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 15 Apr 2006 16:18:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0kj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>