<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6067/DERBY-6067.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6067] JaCoCo fails with missing permissions when writing results</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6067</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The JaCoCo targets fail on most platforms due to missing permissions, i.e. &quot;ant jacoco-junit&quot;:&lt;/p&gt;

&lt;p&gt;junit-pptesting:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.derby.PackagePrivateTestSuite&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 67, Failures: 0, Errors: 0, Time elapsed: 22,858 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.security.AccessControlException: access denied (&quot;java.io.FilePermission&quot; &quot;trunk\junit_20130211_1216\jacoco.exec&quot; &quot;write&quot;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.security.AccessController.checkPermission(AccessController.java:555)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.SecurityManager.checkWrite(SecurityManager.java:979)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:203)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.jacoco.agent.rt.internal_5d10cad.output.FileOutput.openFile(FileOutput.java:67)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.jacoco.agent.rt.internal_5d10cad.output.FileOutput.writeExecutionData(FileOutput.java:53)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.jacoco.agent.rt.internal_5d10cad.Agent.shutdown(Agent.java:143)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.jacoco.agent.rt.internal_5d10cad.Agent$1.run(Agent.java:60)&lt;/p&gt;</description>
                <environment>most platforms (hopefully more details later)</environment>
        <key id="12631710">DERBY-6067</key>
            <summary>JaCoCo fails with missing permissions when writing results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Feb 2013 11:22:10 +0000</created>
                <updated>Wed, 16 Apr 2014 03:41:20 +0100</updated>
                                            <version>10.10.1.1</version>
                                    <fixVersion>10.10.2.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13578252" author="kristwaa" created="Thu, 14 Feb 2013 09:06:49 +0000"  >&lt;p&gt;Attaching patch 1a, which fixes the permission problems.&lt;/p&gt;

&lt;p&gt;The patch is pretty much doing the same as has already been done for EMMA. I considered merging a few methods and properties, but left it out for now. If we add explicit support for yet another tool we probably need a few higher-level utility methods.&lt;/p&gt;

&lt;p&gt;I still see one error when running jacoco-complete, but that is related to transforming a Derby class and is probably a bug in ASM.&lt;/p&gt;

&lt;p&gt;I also thought about building a JUnit report as part of the JaCoCo target, but that failed when processing XML. I don&apos;t remember the work-around for that problem and decided to leave the change out for now.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="13579060" author="dagw" created="Fri, 15 Feb 2013 09:40:11 +0000"  >&lt;p&gt;Thanks for fixing this. What&apos;s the purpose of this line in the patch to BaseTestCase, Kristian?&lt;/p&gt;

&lt;p&gt;+            //cmdlist.add(&quot;-Djacoco.active=\&quot;\&quot;&quot;);&lt;/p&gt;</comment>
                            <comment id="13579330" author="kristwaa" created="Fri, 15 Feb 2013 17:09:59 +0000"  >&lt;p&gt;Thanks, Dag!&lt;br/&gt;
That&apos;s a left-over statement from testing - I have deleted it.&lt;/p&gt;

&lt;p&gt;Attaching patch 1b, which additionally includes a change to the getURL-method (it now swallows NoClassDefFoundError too) and which removes one of the places where jacoco.active is set to the empty string.&lt;/p&gt;

&lt;p&gt;Need to run tests before commit.&lt;/p&gt;</comment>
                            <comment id="13580708" author="kristwaa" created="Mon, 18 Feb 2013 16:51:18 +0000"  >&lt;p&gt;Committed patch 1b to trunk with revision 1447388.&lt;/p&gt;

&lt;p&gt;Test run (executing) at &lt;a href=&quot;https://builds.apache.org/job/Derby-trunk-JaCoCo/15/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/Derby-trunk-JaCoCo/15/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13623955" author="mikem" created="Fri, 5 Apr 2013 20:06:31 +0100"  >&lt;p&gt;is this done?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12633109">DERBY-6079</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569330" name="derby-6067-1a-fix_privileges.diff" size="11067" author="kristwaa" created="Thu, 14 Feb 2013 09:06:49 +0000"/>
                            <attachment id="12569564" name="derby-6067-1b-fix_privileges.diff" size="10762" author="kristwaa" created="Fri, 15 Feb 2013 17:09:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Feb 2013 09:40:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312206</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzbq8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312552</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>