<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-258/DERBY-258.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-258] Incorrect method resolution with explicit method signature</title>
                <link>https://issues.apache.org/jira/browse/DERBY-258</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If an explicit method signature has Java type that does not match the correct SQL to Java mapping as defined by JDBC, then method resolution seems to try and pick the incorrect method.&lt;/p&gt;

&lt;p&gt;With this example an attempt is made to force an INT procedure parameter to resolve to a java.lang.String, which is not supported. However the engine trys to resolve to a method with an Integr parameter.&lt;/p&gt;


&lt;p&gt;ij&amp;gt; CREATE PROCEDURE SIGNATURE_BUG_1(IN A INT)&lt;br/&gt;
  LANGUAGE JAVA PARAMETER STYLE JAVA&lt;br/&gt;
  EXTERNAL NAME &apos;java.lang.System.load(java.lang.String)&apos;;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; CALL SIGNATURE_BUG_1(4);&lt;br/&gt;
ERROR 38000: The exception &apos;java.lang.NoSuchMethodError: java.lang.System.load(Ljava/lang/Integer;)V&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR XJ001: Java exception: &apos;java.lang.System.load(Ljava/lang/Integer;)V: java.lang.NoSuchMethodError&apos;.&lt;/p&gt;

&lt;p&gt;I believe that the resolution should fail with an illegal conversion error if the supplied Java type is not a match for the SQL type according to JDBC, in this case int or java.lang.Integer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="32211">DERBY-258</key>
            <summary>Incorrect method resolution with explicit method signature</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djd">Daniel John Debrunner</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 May 2005 07:55:07 +0100</created>
                <updated>Wed, 12 Jul 2006 07:43:37 +0100</updated>
                            <resolved>Tue, 14 Jun 2005 07:21:36 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12312553" author="djd" created="Sat, 4 Jun 2005 05:04:42 +0100"  >&lt;p&gt;Other example that lead to incorrect resolution (all cause issues when called)&lt;/p&gt;

&lt;p&gt;&amp;#8211; function with more types in signature than parameters, tries to resolve to&lt;br/&gt;
&amp;#8211; int toString(int, int) &lt;span class=&quot;error&quot;&gt;&amp;#91;note return type should be String&amp;#93;&lt;/span&gt;&lt;br/&gt;
CREATE FUNCTION SIGNATURE_BUG_DERBY_258_B(A INT) RETURNS VARCHAR(128) &lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA&lt;br/&gt;
EXTERNAL NAME &apos;java.lang.Integer.toString(int, int)&lt;/p&gt;

&lt;p&gt;&amp;#8211; procedure with less types in signature than arguments, causes an array out of bounds exception&lt;br/&gt;
CREATE PROCEDURE SIGNATURE_BUG_DERBY_258_C(IN A INT)&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA &lt;br/&gt;
EXTERNAL NAME &apos;java.lang.System.gc()&apos;&lt;/p&gt;

&lt;p&gt;&amp;#8211; any method signature that  leads to a method that does not exist&lt;br/&gt;
&amp;#8211; causes a null pointer exception&lt;br/&gt;
CREATE FUNCTION SIGNATURE_BUG_DERBY_258_E(P_VAL INT, P_RADIX INT) RETURNS VARCHAR(20)&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA EXTERNAL NAME &apos;java.lang.Integer.toXXString()&apos;;&lt;/p&gt;

&lt;p&gt;&amp;#8211; this valid first function defintion fails to resolve where as rhe second (with no signature) succeeds&lt;br/&gt;
CREATE FUNCTION SIGNATURE_BUG_DERBY_258_D(P_VAL INT, P_RADIX INT) RETURNS VARCHAR(20)&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA EXTERNAL NAME &apos;java.lang.Integer.toString(int, int)&apos;;&lt;br/&gt;
CREATE FUNCTION SIGNATURE_BUG_DERBY_258_NS(P_VAL INT, P_RADIX INT) RETURNS VARCHAR(20)&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA EXTERNAL NAME &apos;java.lang.Integer.toString&apos;;&lt;/p&gt;</comment>
                            <comment id="12312931" author="djd" created="Wed, 8 Jun 2005 05:42:34 +0100"  >&lt;p&gt;Changes to parse the signature in the context of the parameter types of the function or procedure.&lt;br/&gt;
Ensures declared signature Java types are mappable to the parameter types, as specified in the SQL2003 spec part 13&lt;br/&gt;
Checks for various invalid formats as well.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this in a couple of days addressing any review comments. PAtch is missing master file updates for procedure.java with JCC and the derbyt client, will address those in the commit.&lt;/p&gt;</comment>
                            <comment id="12312932" author="djd" created="Wed, 8 Jun 2005 05:43:39 +0100"  >&lt;p&gt;Forgot to add the svn status&lt;/p&gt;

&lt;p&gt;M      java\engine\org\apache\derby\impl\sql\compile\MethodCallNode.java&lt;br/&gt;
M      java\engine\org\apache\derby\iapi\services\loader\ClassInspector.java&lt;br/&gt;
M      java\engine\org\apache\derby\iapi\reference\SQLState.java&lt;br/&gt;
M      java\engine\org\apache\derby\loc\messages_en.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\lang\procedure.java&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\lang\functions.sql&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\master\functions.out&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\master\procedure.out&lt;/p&gt;</comment>
                            <comment id="12313515" author="djd" created="Tue, 14 Jun 2005 07:21:33 +0100"  >&lt;p&gt;Committed revision 190508. Included updating the client and JCC master files for procedure.java test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12310578" name="derby258_20050607.txt" size="21853" author="djd" created="Wed, 8 Jun 2005 05:42:33 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>