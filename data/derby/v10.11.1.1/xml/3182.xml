<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:51:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3182/DERBY-3182.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3182] fifth parameter (boolean isNullable) in DatabaseMetaData.getBestRowIdentifier(.....)  has no effect</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3182</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The fifth parameter in a call to DatabaseMetaData.getBestRowIdentifier(String catalog, String schema, String table, int scope, boolean nullable) is getting ignored.&lt;/p&gt;

&lt;p&gt;Thus, in the following situation:&lt;br/&gt;
        s.execute(&quot;create table a (i int not null, j int not null, k int, unique (i,j))&quot;);&lt;br/&gt;
        s.execute(&quot;insert into a values (1,1,1)&quot;);  &lt;br/&gt;
        DatabaseMetaData dmd = conn.getMetaData(); &lt;/p&gt;

&lt;p&gt;The call:&lt;br/&gt;
            ResultSet rs = dmd.getBestRowIdentifier(null,&quot;APP&quot;,&quot;A&quot;,0,true);&lt;br/&gt;
gives the same results(columns i &amp;amp; j) as&lt;br/&gt;
            ResultSet rs = dmd.getBestRowIdentifier(null,&quot;APP&quot;,&quot;A&quot;,0,false);&lt;/p&gt;

&lt;p&gt;This has been documented as incorrect in the test bestrowidentifier.sql but I could not find any bug logged.&lt;br/&gt;
The text in bestrowidentifier was:&lt;br/&gt;
&amp;#8211; REMIND: we aren&apos;t handling nullOk flag correctly&lt;br/&gt;
&amp;#8211; we just drop nullable cols, we should skip an answer&lt;br/&gt;
&amp;#8211; that has nullable cols in it instead and look for another one.&lt;br/&gt;
create table t13 (i int not null, j int not null, k int, unique (i,j));&lt;/p&gt;

&lt;p&gt;&amp;#8211; result: columns i, j (WRONG) &lt;br/&gt;
&amp;#8211; the correct answer is k: the non-null columns of the table&lt;br/&gt;
execute bestrow using &apos;values(&apos;&apos;APP&apos;&apos;,&apos;&apos;T13&apos;&apos;,0,&apos;&apos;false&apos;&apos;)&apos;;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12381978">DERBY-3182</key>
            <summary>fifth parameter (boolean isNullable) in DatabaseMetaData.getBestRowIdentifier(.....)  has no effect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2007 01:39:20 +0000</created>
                <updated>Sun, 11 Nov 2007 17:16:04 +0000</updated>
                            <resolved>Sun, 11 Nov 2007 17:13:36 +0000</resolved>
                                    <version>10.0.2.0</version>
                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                    <version>10.3.1.4</version>
                                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12541329" author="knutanders" created="Fri, 9 Nov 2007 14:22:53 +0000"  >&lt;p&gt;I think the comment which says that the correct answer is k, is wrong. Since the column k is not declared as unique, it does not uniquely identify a row. Derby doesn&apos;t support the unique constraint on a nullable column, but it did at some point (although the implementation was not SQL compliant and therefore was disabled). Could it be that this test was written before unique on nullable columns was disabled, and it used to declared k as a unique column? Possibly, the test was updated but the comment wasn&apos;t.&lt;/p&gt;</comment>
                            <comment id="12541390" author="myrna" created="Fri, 9 Nov 2007 18:01:04 +0000"  >&lt;p&gt;Interesting.&lt;br/&gt;
I looked at what I could find for this test in the old Cloudscape version control system, and the oldest I found, dating from early 1999, was a little different, but still does not specify k as unique. This is from the .out:&lt;br/&gt;
:----------------------------------------:&lt;br/&gt;
ij&amp;gt; &amp;#8211; REMIND: we aren&apos;t handling nullOk flag correctly&lt;br/&gt;
&amp;#8211; we just drop nullable cols, we should skip an answer&lt;br/&gt;
&amp;#8211; that has nullable cols in it instead and look for another one.&lt;br/&gt;
create table t13 (i int, j int not null, k int, unique (i,j));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8211; result: columns j (WRONG) &lt;br/&gt;
&amp;#8211; the correct answer is i, k: the non-null columns of the table&lt;br/&gt;
values (class COM.cloudscape.internalUtil.DatabaseMetaDataUtil).getBestRowIdentifier(&lt;br/&gt;
getCurrentConnection(),&apos;&apos;,&apos;APP&apos;,&apos;T13&apos;,0,false);&lt;br/&gt;
SQLCol1        &lt;br/&gt;
---------------&lt;br/&gt;
ResultSet #0   &lt;/p&gt;

&lt;p&gt;++++++++++++++++&lt;br/&gt;
+ResultSet #0 +&lt;br/&gt;
++++++++++++++++&lt;br/&gt;
SCOPE          |COLUMN_NAME                                                                                                                     |DATA_TYPE      |TYPE_NAME                                                                                                                       |COLUMN_SIZE    |BUFFER_LENGTH  |DECIMAL_DIGITS |PSEUDO_COLUMN  &lt;br/&gt;
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br/&gt;
2              |J          &lt;br/&gt;
:----------------------------------------:&lt;/p&gt;</comment>
                            <comment id="12541647" author="myrna" created="Sun, 11 Nov 2007 17:13:36 +0000"  >&lt;p&gt;I&apos;ve marked this as invalid, and a test issue.&lt;br/&gt;
I adjusted the test comments, and modified the test case to verify that the result changes if the parameter is changed on a simple table like this:&lt;br/&gt;
st.execute(&quot;create table brit13 (i int not null, j int)&quot;);&lt;/p&gt;

&lt;p&gt;and the test cases now are:&lt;br/&gt;
// result: column i, should&apos;ve ignored null column&lt;br/&gt;
rs = dmd.getBestRowIdentifier(null,&quot;APP&quot;,&quot;BRIT13&quot;,0,false);&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...verifyresults...&amp;#93;&lt;/span&gt;&lt;br/&gt;
// result: columns i, j&lt;br/&gt;
rs = dmd.getBestRowIdentifier(null,&quot;APP&quot;,&quot;BRIT13&quot;,0,true);&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...verifyresults...&amp;#93;&lt;/span&gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12369072" name="repro.java" size="4969" author="myrna" created="Wed, 7 Nov 2007 01:42:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Nov 2007 14:22:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23484</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy10sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>