<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:18:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4359/DERBY-4359.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4359] Make UpgradeTrajectoryTest run on JVM 1.6</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4359</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When running the UpgradeTrajectoryTest on JVM 1.6 I see the following failures:&lt;/p&gt;

&lt;p&gt;10.0.2.1&lt;br/&gt;
10.1.3.1&lt;br/&gt;
10.2.2.1&lt;br/&gt;
10.3.3.0&lt;br/&gt;
10.4.2.0&lt;br/&gt;
10.4.2.1&lt;br/&gt;
10.5.1.1&lt;br/&gt;
10.5.3.0&lt;br/&gt;
DEBUG: Found 7 trajectories.&lt;br/&gt;
.&lt;br/&gt;
testTrajectory DEBUG: Testing trajectory: 10.0.2.1 -&amp;gt; 10.1.3.1 -&amp;gt; 10.2.2.1 -&amp;gt; 10.3.3.0 -&amp;gt; 10.4.2.0 -&amp;gt; 10.4.2.1 -&amp;gt; 10.5.1.1 -&amp;gt; 10.5.3.0 ( hard, hard, hard, hard, hard, hard, hard, hard )&lt;br/&gt;
used 1900 ms F.&lt;br/&gt;
testTrajectory DEBUG: Testing trajectory: 10.1.3.1 -&amp;gt; 10.2.2.1 -&amp;gt; 10.3.3.0 -&amp;gt; 10.4.2.0 -&amp;gt; 10.4.2.1 -&amp;gt; 10.5.1.1 -&amp;gt; 10.5.3.0 ( hard, hard, hard, hard, hard, hard, hard )&lt;br/&gt;
used 570 ms F.&lt;br/&gt;
testTrajectory DEBUG: Testing trajectory: 10.2.2.1 -&amp;gt; 10.3.3.0 -&amp;gt; 10.4.2.0 -&amp;gt; 10.4.2.1 -&amp;gt; 10.5.1.1 -&amp;gt; 10.5.3.0 ( hard, hard, hard, hard, hard, hard )&lt;br/&gt;
used 9008 ms .&lt;/p&gt;


&lt;p&gt;1) testTrajectory(org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest)junit.framework.ComparisonFailure: 10.0.2.1 -&amp;gt; 10.1.3.1 -&amp;gt; 10.2.2.1 -&amp;gt; 10.3.3.0 -&amp;gt; 10.4.2.0 -&amp;gt; 10.4.2.1 -&amp;gt; 10.5.1.1 -&amp;gt; 10.5.3.0 ( hard, hard, hard, hard, hard, hard, hard, hard ) expected:&amp;lt;10.&lt;span class=&quot;error&quot;&gt;&amp;#91;0.2.1&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;10.&lt;span class=&quot;error&quot;&gt;&amp;#91;6.0.0&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest.vetDBVersion(UpgradeTrajectoryTest.java:904)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest.createDatabase(UpgradeTrajectoryTest.java:800)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest.testTrajectory(UpgradeTrajectoryTest.java:468)&lt;/p&gt;

&lt;p&gt;2) testTrajectory(org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest)junit.framework.ComparisonFailure: 10.1.3.1 -&amp;gt; 10.2.2.1 -&amp;gt; 10.3.3.0 -&amp;gt; 10.4.2.0 -&amp;gt; 10.4.2.1 -&amp;gt; 10.5.1.1 -&amp;gt; 10.5.3.0 ( hard, hard, hard, hard, hard, hard, hard ) expected:&amp;lt;10.&lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.1&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;10.&lt;span class=&quot;error&quot;&gt;&amp;#91;6.0.0&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest.vetDBVersion(UpgradeTrajectoryTest.java:904)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest.createDatabase(UpgradeTrajectoryTest.java:800)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTrajectoryTest.testTrajectory(UpgradeTrajectoryTest.java:468)&lt;/p&gt;


&lt;p&gt;Running with JVM 1.5 the test passes.&lt;/p&gt;</description>
                <environment>JVM: &lt;br/&gt;
Sun Microsystems Inc.&lt;br/&gt;
java version &amp;quot;1.6.0_14&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_14-b08)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 14.0-b16 mixed mode 64-bit)&lt;br/&gt;
</environment>
        <key id="12433941">DERBY-4359</key>
            <summary>Make UpgradeTrajectoryTest run on JVM 1.6</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12433939">DERBY-4358</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Aug 2009 14:17:31 +0100</created>
                <updated>Wed, 18 Nov 2009 20:51:42 +0000</updated>
                            <resolved>Tue, 15 Sep 2009 13:54:16 +0100</resolved>
                                    <version>10.6.1.0</version>
                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12754303" author="rhillegas" created="Fri, 11 Sep 2009 20:52:25 +0100"  >&lt;p&gt;I can verify that the test fails for me on Java 6 as well. I believe this is the reason:&lt;/p&gt;

&lt;p&gt;1) The test uses JDBCDataSource to get a data source.&lt;/p&gt;

&lt;p&gt;2) On Java 6 JDBCDataSource tries to create an instance of Derby&apos;s JDBC4 data source.&lt;/p&gt;

&lt;p&gt;3) That data source does not exist in Derby versions before 10.2.2.0.&lt;/p&gt;

&lt;p&gt;4) The class loader looks for classes first in the jar files of the old Derby version which the test is trying to use. If the class loader doesn&apos;t find a class in those jar files, then the class loader defaults to look on the vm classpath.&lt;/p&gt;

&lt;p&gt;5) So for Derby versions before 10.2.2.0, on Java 6 the class loader falls through and returns a 10.6 version of Derby&apos;s JDBC4 data source.&lt;/p&gt;

&lt;p&gt;6) That then causes the test to create the database with the wrong version, viz. 10.6.&lt;/p&gt;

&lt;p&gt;The fix would be to use Derby&apos;s JDBC3 data source for Derby versions before 10.2.2.0.&lt;/p&gt;</comment>
                            <comment id="12755109" author="rhillegas" created="Mon, 14 Sep 2009 18:59:04 +0100"  >&lt;p&gt;Attaching derby-4359-01-aa-use30driver.diff. This patch makes the UpgradeTrajectoryTest use the embedded 30 driver if running on Java 6 while testing a trajectory which starts at a version before 10.2.2.0. With this patch, on Java 6, I can successfully test trajectories starting with releases which don&apos;t have JDBC4 drivers.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/UpgradeTrajectoryTest.java&lt;/p&gt;

&lt;p&gt;Use the embedded 30 driver if running on Java 6 on a trajectory which starts before 10.2.2.0.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/junit/JDBCClient.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/junit/JDBCClientSetup.java&lt;/p&gt;

&lt;p&gt;Make some decorator logic public so that it can be used by UpgradeTrajectoryTest.&lt;/p&gt;</comment>
                            <comment id="12755192" author="rhillegas" created="Mon, 14 Sep 2009 21:54:16 +0100"  >&lt;p&gt;Tests passed cleanly for me.&lt;/p&gt;</comment>
                            <comment id="12755470" author="rhillegas" created="Tue, 15 Sep 2009 13:54:16 +0100"  >&lt;p&gt;Checked in fix at subversion revision 815303.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12419551" name="derby-4359-01-aa-use30driver.diff" size="3165" author="rhillegas" created="Mon, 14 Sep 2009 18:59:04 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Sep 2009 19:52:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0rk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>