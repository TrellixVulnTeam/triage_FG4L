<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:50:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2935/DERBY-2935.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2935] DDMReader.readLengthAndCodePoint() decodes long integer incorrectly</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2935</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;DDMReader.readLengthAndCodePoint() contains code to decode a long integer from a byte array. This code is broken since it uses int operations and not long operations in the decoding. The long might be encoded using four, six or eight bytes, and since Derby currently always uses the four bytes encoding, the bug is not exposed in the current code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12373727">DERBY-2935</key>
            <summary>DDMReader.readLengthAndCodePoint() decodes long integer incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jul 2007 10:35:02 +0100</created>
                <updated>Wed, 30 Apr 2008 02:15:11 +0100</updated>
                            <resolved>Thu, 19 Jul 2007 08:50:26 +0100</resolved>
                                    <version>10.1.3.1</version>
                    <version>10.2.2.0</version>
                    <version>10.3.1.4</version>
                    <version>10.4.1.3</version>
                                    <fixVersion>10.3.3.0</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12512416" author="knutanders" created="Fri, 13 Jul 2007 10:37:53 +0100"  >&lt;p&gt;The attached patch fixes the decoding by forcing promotion of the operands to long. The regression tests ran cleanly.&lt;/p&gt;</comment>
                            <comment id="12512720" author="bryanpendleton" created="Sat, 14 Jul 2007 16:41:07 +0100"  >&lt;p&gt;Is it possible to write a new regression test, with some Long values which &lt;br/&gt;
require 6 and/or 8 bytes to encode, which demonstrates the bug and the fix?&lt;/p&gt;</comment>
                            <comment id="12512873" author="knutanders" created="Mon, 16 Jul 2007 07:54:53 +0100"  >&lt;p&gt;I don&apos;t think it&apos;s possible to test the fix with a JDBC test, at least, since Derby doesn&apos;t support data types with length &amp;gt;= 2^31, but it might be possible to force 6 and 8 byte values in derbynet/testProtocol.java. I&apos;ll see if I can come up with something.&lt;/p&gt;</comment>
                            <comment id="12512894" author="knutanders" created="Mon, 16 Jul 2007 09:42:59 +0100"  >&lt;p&gt;Adding a test which used 8 bytes for the length wasn&apos;t that difficult, but since there is no way of sending data that needs the high four bytes of the length field, the test passes regardless of the fix. So I guess the best way to demonstrate the bug and the fix is by running this program:&lt;/p&gt;

&lt;p&gt;public class ll {&lt;br/&gt;
    public static void main(String[] args) &lt;/p&gt;
{
        long l1 = ((byte) 1 &amp;amp; 0xFF) &amp;lt;&amp;lt; 56;
        long l2 = ((byte) 1 &amp;amp; 0xFFL) &amp;lt;&amp;lt; 56;
        System.out.println(&quot;l1 = &quot; + l1);
        System.out.println(&quot;l2 = &quot; + l2);
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Which prints:&lt;/p&gt;

&lt;p&gt;l1 = 16777216&lt;br/&gt;
l2 = 72057594037927936&lt;/p&gt;</comment>
                            <comment id="12512896" author="knutanders" created="Mon, 16 Jul 2007 09:45:43 +0100"  >&lt;p&gt;Attaching a test which uses 8 bytes for the length. The test passes both with and without the fix. I&apos;m only attaching it in case someone wants to experiment with it to find ways to expose the bug.&lt;/p&gt;</comment>
                            <comment id="12513843" author="knutanders" created="Thu, 19 Jul 2007 08:50:26 +0100"  >&lt;p&gt;Committed revision 557513.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361764" name="decode-long.diff" size="1954" author="knutanders" created="Fri, 13 Jul 2007 10:37:52 +0100"/>
                            <attachment id="12361879" name="test.diff" size="1770" author="knutanders" created="Mon, 16 Jul 2007 09:45:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 14 Jul 2007 15:41:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0yvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39469</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>