<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:47:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3392/DERBY-3392.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3392] Performing failover on a database not being replicated should give a more meaningful error message.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3392</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Oystein says&lt;/p&gt;

&lt;p&gt;&quot;If I do failover on a database where replication has not been started, I get the following:&lt;/p&gt;

&lt;p&gt;ij version 10.4&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:masterDB;user=oystein;password=pass&apos;;&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:masterDB;user=oystein;password=pass;failover=true&apos;;&lt;br/&gt;
ERROR XRE21: Error occurred while performing failover for database &apos;masterDB&apos;, Failover attempt was aborted.&lt;/p&gt;

&lt;p&gt;I think I should rather get an error that says that database is not being replicated. (I get that if I try to stop replication on a non-replicated database).&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12387952">DERBY-3392</key>
            <summary>Performing failover on a database not being replicated should give a more meaningful error message.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="narayanan">V.Narayanan</assignee>
                                    <reporter username="narayanan">V.Narayanan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Feb 2008 10:43:42 +0000</created>
                <updated>Thu, 14 Feb 2008 05:44:51 +0000</updated>
                            <resolved>Thu, 14 Feb 2008 05:44:28 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12566076" author="narayanan" created="Wed, 6 Feb 2008 10:53:51 +0000"  >&lt;p&gt;The appropriate error messages are thrown in the RawStore when a&lt;br/&gt;
findServiceModule to find the Master Factory module fails indicating&lt;br/&gt;
that the database was not replicated in the first place.&lt;/p&gt;

&lt;p&gt;I can either follow the suggestion given by Jorgen on this issue&lt;/p&gt;

&lt;p&gt;1) &quot;I think SQLState.REPLICATION_UNABLE_TO_STOP_MASTER would give a better &lt;br/&gt;
    error message than REPLICATION_FAILOVER_UNSUCCESSFUL in RawStore#failover&lt;br/&gt;
    if that message was slightly changed to &quot;Could not perform replication operation &lt;br/&gt;
    because... &quot;. &lt;br/&gt;
        In this case I will change REPLICATION_UNABLE_TO_STOP_MASTER to &lt;br/&gt;
    something more generic like REPLICATION_UNABLE_TO_PERFORM_OPERATION.&lt;br/&gt;
        I will have to change other places where the former message was being used.&lt;/p&gt;

&lt;p&gt;2) or add another message specific to Failover and use that.&lt;/p&gt;

&lt;p&gt;Unless I contradicted I will go for 2) which requires lesser changes.&lt;/p&gt;</comment>
                            <comment id="12566895" author="narayanan" created="Fri, 8 Feb 2008 02:49:28 +0000"  >&lt;p&gt;I decided to go by 1) since I felt we would not need&lt;br/&gt;
specific messages for each replication operation. &lt;/p&gt;

&lt;p&gt;I tried the following&lt;/p&gt;

&lt;p&gt;ij&amp;gt;  connect &apos;jdbc:derby:mydb;failover=true&apos;;&lt;br/&gt;
ERROR XRE07: Could not perform operation because the database is not in replication master mode.&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;

&lt;p&gt;Now I get the desired message.&lt;/p&gt;

&lt;p&gt;I request this patch to be considered for reviews and comments and of everything is OK&lt;br/&gt;
a commit too.&lt;/p&gt;

&lt;p&gt;I am running tests on this patch and shall post the results of the test&lt;br/&gt;
runs as soon as the tests complete.&lt;/p&gt;</comment>
                            <comment id="12567698" author="oysteing" created="Mon, 11 Feb 2008 16:41:20 +0000"  >&lt;p&gt;Patch looks very good, Narayanan.&lt;br/&gt;
Committed patch,Derby_3392_v1.diff,  as revision 620522.&lt;/p&gt;</comment>
                            <comment id="12568804" author="narayanan" created="Thu, 14 Feb 2008 05:44:51 +0000"  >&lt;p&gt;All relevant patches have been committed! Closing issue!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12375031" name="Derby_3392_v1.diff" size="2506" author="narayanan" created="Fri, 8 Feb 2008 02:49:28 +0000"/>
                            <attachment id="12375032" name="Derby_3392_v1.stat" size="192" author="narayanan" created="Fri, 8 Feb 2008 02:49:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Feb 2008 16:41:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>