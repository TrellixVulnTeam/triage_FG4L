<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2941/DERBY-2941.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2941] With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2941</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Making a subtask for the 10.2 fix for this issue as the fix for 10.3 will be different.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12373904">DERBY-2941</key>
            <summary>With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12372921">DERBY-2892</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Jul 2007 16:21:19 +0100</created>
                <updated>Fri, 17 Aug 2007 23:31:23 +0100</updated>
                            <resolved>Tue, 17 Jul 2007 20:26:17 +0100</resolved>
                                    <version>10.2.2.0</version>
                                    <fixVersion>10.2.2.1</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12512963" author="kmarsden" created="Mon, 16 Jul 2007 16:27:56 +0100"  >&lt;p&gt;Attaching a patch for this issue. Patch only differs from patch attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2892&quot; title=&quot;Closing a resultset after retrieving a large &amp;gt; 32665 bytes value with Network Server does not release locks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2892&quot;&gt;&lt;del&gt;DERBY-2892&lt;/del&gt;&lt;/a&gt; in that it has some corrections to javadoc.&lt;/p&gt;

&lt;p&gt;-Changes EXTDTAInputStream to use ResultSet.getCharacterStream, ResultSet.getBinaryStream instead of getClob(), getBlob..&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Alters EngineResult for getLenth(int columnIndex) and isNull(int columnIndex) methods&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-Enables LargeDataLocksTest&lt;/p&gt;

&lt;p&gt;derbyall passed with only known failures.&lt;/p&gt;

&lt;p&gt;I would most appreciate review. If I hear no objections I will commit tomorrow.&lt;/p&gt;
</comment>
                            <comment id="12513224" author="oysteing" created="Tue, 17 Jul 2007 13:23:24 +0100"  >&lt;p&gt;I have looked at the patch, and I think the patch looks very good.&lt;br/&gt;
I only have some minor comments/questions:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Did you intend to leave the changes to DDMWriter in there?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;You have added a comment that says &quot;Stream is initialized on the&lt;br/&gt;
   first read&quot;.  It is not quite clear to me what stream you are&lt;br/&gt;
   referring to.  It looks to me that the caller has to initialize the&lt;br/&gt;
   stream (call initInputStream) BEFORE it is to be read.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There seem to be some indentation differences in the&lt;br/&gt;
   EXTDTAInputStream constructor.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I do not understand the javadoc for EXTDTAInputStream.isNUll.  What&lt;br/&gt;
   do you mean by &quot;determined in the constructor&quot;?  It seems like the&lt;br/&gt;
   only thing the constructor does is to register the parameter&lt;br/&gt;
   values.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+1 to commit, but would prefer that the comments discussed about is made clearer.&lt;/p&gt;</comment>
                            <comment id="12513231" author="naka" created="Tue, 17 Jul 2007 13:52:02 +0100"  >&lt;p&gt;I remember that I had trouble to retrieve length of stored data in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-326&quot; title=&quot;Improve streaming of large objects for network server and client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-326&quot;&gt;&lt;del&gt;DERBY-326&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200512.mbox/%3C43A975F5.3090904@basil.ocn.ne.jp%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200512.mbox/%3C43A975F5.3090904@basil.ocn.ne.jp%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;At that point, it seems that length information might be missing in some cases....&lt;/p&gt;

&lt;p&gt;My understanding is that the engine was improved and &lt;br/&gt;
it became always possible to retrieve length of stored data via DataValueDescriptor#getLength().&lt;/p&gt;</comment>
                            <comment id="12513335" author="kmarsden" created="Tue, 17 Jul 2007 20:26:17 +0100"  >&lt;p&gt;Fixed in 10.2 and ported to trunk and 10.3 and verified with 10.2 client.  &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2892&quot; title=&quot;Closing a resultset after retrieving a large &amp;gt; 32665 bytes value with Network Server does not release locks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2892&quot;&gt;&lt;del&gt;DERBY-2892&lt;/del&gt;&lt;/a&gt; still needs to be fixed for server working with 10.3+ client&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12513748" author="myrna" created="Thu, 19 Jul 2007 00:15:10 +0100"  >&lt;p&gt;I know you checked in the test to 10.3 branch, but I&apos;m doubting that this issue should be marked fixed for 10.3.1.2?&lt;/p&gt;</comment>
                            <comment id="12513751" author="kmarsden" created="Thu, 19 Jul 2007 00:30:25 +0100"  >&lt;p&gt;I checked the fix into the 10.3 branch as well, so hopefully the fix version is ok.  It only fixes 10.2 client with 10.3. It does not fix 2892 10.3 client with 10.3.&lt;/p&gt;
</comment>
                            <comment id="12520702" author="kmarsden" created="Fri, 17 Aug 2007 23:31:23 +0100"  >&lt;p&gt;Closing this issue for the fix with 10.2 and lower clients. The problem still exists with 10.3 clients which use the lob locator code path. &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2892&quot; title=&quot;Closing a resultset after retrieving a large &amp;gt; 32665 bytes value with Network Server does not release locks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2892&quot;&gt;&lt;del&gt;DERBY-2892&lt;/del&gt;&lt;/a&gt; remains open for that issue.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12361897" name="DERBY-2941_diff.txt" size="14221" author="kmarsden" created="Mon, 16 Jul 2007 16:27:56 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 Jul 2007 12:23:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy119z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39857</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>