<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:52:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3768/DERBY-3768.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3768] Make EmbedBlob.length use skip instead of read</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3768</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;EmbedBlob.length uses read to process the whole Blob when the length has not been encoded at the head of the stream.&lt;br/&gt;
Using skip instead of read can lead to better performance.&lt;/p&gt;

&lt;p&gt;I also plan to make some minor cleanups under this issue; JavaDoc and to rename a variable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12399894">DERBY-3768</key>
            <summary>Make EmbedBlob.length use skip instead of read</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jul 2008 12:26:08 +0100</created>
                <updated>Mon, 4 May 2009 19:22:30 +0100</updated>
                            <resolved>Thu, 17 Jul 2008 14:21:53 +0100</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.4.2.0</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12611988" author="kristwaa" created="Wed, 9 Jul 2008 12:28:52 +0100"  >&lt;p&gt;&apos;derby-3768-1a-length_skip.diff&apos; replaces the read loop with a skip loop to determine the stream length. Also removes unused imports.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12612062" author="kristwaa" created="Wed, 9 Jul 2008 13:57:04 +0100"  >&lt;p&gt;suites.All and derbyall ran without failures with Solaris 10 and Sun JDK 1.6.&lt;/p&gt;</comment>
                            <comment id="12612066" author="dagw" created="Wed, 9 Jul 2008 13:58:14 +0100"  >&lt;p&gt;Patch look good to me. I only did code inspection, since I am not sure which test&lt;br/&gt;
best exercises this code.&lt;/p&gt;

&lt;p&gt;The skip semantics in Java input streams is a bit broken (it may return 0 bytes&lt;br/&gt;
skipped more or less at will and still be compliant,&lt;br/&gt;
cf. &lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/io/InputStream.html#skip(long&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/javase/6/docs/api/java/io/InputStream.html#skip(long&lt;/a&gt;)),&lt;br/&gt;
but I see you have coded it safely here, maybe it would be a good idea&lt;br/&gt;
to make a utility method for skipping input streams (&quot;skipFully&quot;).&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12612117" author="kristwaa" created="Wed, 9 Jul 2008 14:53:03 +0100"  >&lt;p&gt;Committed revision 1b of the patch, in which the only change over 1a is the addition of an else-block, to trunk with revision 675169.&lt;/p&gt;

&lt;p&gt;Thanks for the review Dag. &lt;br/&gt;
I agree the InputStream.skip contract is somewhat difficult. We already have a utility class for UTF8 streams (iapi.util.UTF8Util), so adding one for generic InputStreams is a good idea.&lt;br/&gt;
I created &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3770&quot; title=&quot;Create a utility class for skipping data in an InputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3770&quot;&gt;&lt;del&gt;DERBY-3770&lt;/del&gt;&lt;/a&gt; for this task.&lt;/p&gt;</comment>
                            <comment id="12612125" author="kristwaa" created="Wed, 9 Jul 2008 15:42:11 +0100"  >&lt;p&gt;&apos;derby-3768-2a-misc_fixes.diff&apos; contains a set of small fixes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JavaDoc improvements&lt;/li&gt;
	&lt;li&gt;set locator value explicitly to indicate default value (must not be a valid locator)&lt;/li&gt;
	&lt;li&gt;renamed &apos;myLength&apos; to &apos;streamLength&apos;&lt;/li&gt;
	&lt;li&gt;keep variables &apos;materialized&apos; and &apos;streamLength&apos; in sync&lt;/li&gt;
	&lt;li&gt;throw exception in second constructor (mistakenly swallowed)&lt;/li&gt;
	&lt;li&gt;only clear LOB mapping if a mapping has been created&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Awaiting test run completion.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12613276" author="kristwaa" created="Mon, 14 Jul 2008 10:46:12 +0100"  >&lt;p&gt;suites.All and derbyall ran without failures.&lt;/p&gt;</comment>
                            <comment id="12613309" author="kristwaa" created="Mon, 14 Jul 2008 13:33:21 +0100"  >&lt;p&gt;Committed &apos;derby-3768-2a-misc_fixes.diff&apos; to trunk with revision 676571.&lt;br/&gt;
I plan to backport these changes, and some related performance issues, to 10.4.&lt;/p&gt;</comment>
                            <comment id="12614327" author="kristwaa" created="Thu, 17 Jul 2008 14:21:53 +0100"  >&lt;p&gt;Backported patches 1b and 2a to 10.4 with revision 677578.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385619" name="derby-3768-1a-length_skip.diff" size="1963" author="kristwaa" created="Wed, 9 Jul 2008 12:28:52 +0100"/>
                            <attachment id="12385626" name="derby-3768-1b-length_skip.diff" size="2033" author="kristwaa" created="Wed, 9 Jul 2008 14:53:03 +0100"/>
                            <attachment id="12385631" name="derby-3768-2a-misc_fixes.diff" size="4758" author="kristwaa" created="Wed, 9 Jul 2008 15:42:11 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Jul 2008 12:58:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0xkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>