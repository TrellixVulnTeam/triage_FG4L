<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:54:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2461/DERBY-2461.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2461] Convert lang/procedure.java to junit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2461</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt; Convert the lang/procedure.java  test from the old harness to junit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12365135">DERBY-2461</key>
            <summary>Convert lang/procedure.java to junit</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="jta">Jean T. Anderson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Mar 2007 17:14:25 +0000</created>
                <updated>Wed, 3 Sep 2014 09:31:25 +0100</updated>
                            <resolved>Sat, 5 Jan 2013 03:18:40 +0000</resolved>
                                                    <fixVersion>10.3.1.4</fixVersion>
                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12483356" author="jta" created="Thu, 22 Mar 2007 23:33:54 +0000"  >&lt;p&gt;I need to focus attention elsewhere for a while, so can&apos;t work on converting this test right now and will unassign myself.&lt;/p&gt;

&lt;p&gt;I attached a patch with how far I got so far just in case somebody else is interested in picking it up. You&apos;re welcome to use it as a starting point (or toss it and start over). If nobody has picked it up by the time I can focus time on it again, I&apos;ll pick it back up.&lt;/p&gt;

&lt;p&gt;The patch sets up the JUnit framework and converts just the first two tests in lang/procedure.java: testNegative and testDelayedClassChecking, and it splits testNegative, which I thought was kind of long, into two methods:&lt;/p&gt;

&lt;p&gt;  testCreateRoutineErrors&lt;br/&gt;
  testMethodSignatureDerby258&lt;/p&gt;

&lt;p&gt;testCreateRoutineErrors still uses the old statementExceptionExpected() method from procedure.java, but with arguments swapped around to match assertStatementError. It should be able to use the BaseJDBCTestCase assertStatementError method (testMethodSignatureDerby258 uses it just fine, as does the XMLTypeAndOpsTest suite). The cause is probably staring me right in the face and I&apos;m not seeing it.&lt;/p&gt;</comment>
                            <comment id="12483714" author="kmarsden" created="Fri, 23 Mar 2007 19:14:48 +0000"  >&lt;p&gt;Instead of making a new lang/ProcedureTest class, I think I&apos;ll   add the tests to the existing jdbcapi/ProcedureTest and then move util/ProcedureTest to junit/TestingProcedures, so we are left with only one ProcedureTest.  Please let me know if this does not sound like a reasonable approach,&lt;/p&gt;</comment>
                            <comment id="12483757" author="djd" created="Fri, 23 Mar 2007 21:22:05 +0000"  >&lt;p&gt;I don&apos;t think junit is the correct location for procedures used in functional tests. The junit package is for classes associated with running tests,&lt;br/&gt;
utilitly assert methods and decorators.&lt;/p&gt;

&lt;p&gt;A better approach may be to make the methods part of the same class as the actual test that uses them, or even a separate but related class, e.g. for the test XXXTest a class XXXRoutines.&lt;/p&gt;
</comment>
                            <comment id="12483768" author="kmarsden" created="Fri, 23 Mar 2007 21:49:50 +0000"  >&lt;p&gt;The test also makes use of util/Formatters.  I had planned to move the methods from this class to junit/Utilities but perhaps junit/Utilities is not where they belong either.  Where should shared utility methods go?&lt;/p&gt;</comment>
                            <comment id="12483773" author="djd" created="Fri, 23 Mar 2007 22:12:44 +0000"  >&lt;p&gt;Just a thought on the single procedure test.&lt;/p&gt;

&lt;p&gt;One existing test (jdbcapi) is testing the JDBC api aspect of calling procedures (e.g. multiple result set handling)&lt;/p&gt;

&lt;p&gt;The other is testing the SQL aspect of procedures, create syntax, sql control (read-only etc.) SQL parameter passing.&lt;/p&gt;

&lt;p&gt;There&apos;s probably some overlap but they are two different areas.&lt;/p&gt;</comment>
                            <comment id="12486075" author="kmarsden" created="Mon, 2 Apr 2007 18:12:19 +0100"  >&lt;p&gt;In converting this test I found what I think may be a bug, but I am not sure. In testing commit with multiple resultset I see the following lock counts&lt;/p&gt;

&lt;p&gt;           	              Embedded				                          Network Server&lt;br/&gt;
                              autocommit|noautocommit|statement	  autocommit|noautocommit|statement&lt;br/&gt;
after execution                   1                   1                   1                              8                        8                8&lt;br/&gt;
after next on rs                   3                   3                   3                              8                        8                8&lt;br/&gt;
after values 1                                                                0                                                                           8&lt;br/&gt;
after getMoreResults         2                   2                  0                               7                        7               7&lt;br/&gt;
after next on 2nd rs            7                   7                  0                               7                        7               7&lt;br/&gt;
after getMoreResults         0                   7                  0                               7                        7               7&lt;/p&gt;

&lt;p&gt;I think the increase in number of locks held after execution and after the first next is ok because of prefetch, but I think that the locks not being released after the values 1 statement execution for Network Server  and after the final getMoreResults is a bug.  I am not totally sure however and would appreciate other opinions. The reason that network server holds these locks is because it retrieves and saves all the resultsets and specifies getMoreResults(JDBC30Translation.KEEP_CURRENT_RESULT).&lt;/p&gt;


</comment>
                            <comment id="12486477" author="kmarsden" created="Tue, 3 Apr 2007 20:56:12 +0100"  >&lt;p&gt;Attaching a patch for this issue.  It was a fairly large test to convert so I would appreciate review.  Per Dan&apos;s suggestion I moved the stored procedure methods to the new test LangProcedureTest.java &lt;/p&gt;
</comment>
                            <comment id="12486482" author="djd" created="Tue, 3 Apr 2007 21:17:56 +0100"  >&lt;p&gt;Several of these fixtures could work in J2ME/JSR 169. Only procedures that need to execute SQL cannot work in J2ME (ie. those that require the jdbc:default:connection). This could be a followup cleanup in a separate issue if required.&lt;/p&gt;</comment>
                            <comment id="13475753" author="dagw" created="Sun, 14 Oct 2012 03:50:25 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2927&quot; title=&quot;Procedures can&amp;#39;t return values other than ResultSets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2927&quot;&gt;DERBY-2927&lt;/a&gt; contains a patch which wakes up this test again (for embedded only, cf. Kathey&apos;s observation of the lock differences with the client driver).&lt;/p&gt;</comment>
                            <comment id="13476092" author="dagw" created="Mon, 15 Oct 2012 12:57:21 +0100"  >&lt;p&gt;Kathey, I see you had closed this issue. Did you decide to not complete this conversion? If so, why is the source still in there? In any case, I resuscicated it, cf &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2927&quot; title=&quot;Procedures can&amp;#39;t return values other than ResultSets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2927&quot;&gt;DERBY-2927&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5945&quot; title=&quot;Inappropriate error message when calling a procedure as a function (as if it had a return value)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5945&quot;&gt;&lt;del&gt;DERBY-5945&lt;/del&gt;&lt;/a&gt;. Do you think it would be valuable to retain it now that it works?&lt;/p&gt;</comment>
                            <comment id="13476190" author="kmarsden" created="Mon, 15 Oct 2012 16:14:21 +0100"  >&lt;p&gt;I don&apos;t remember much about this but I did check in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=525332&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=525332&lt;/a&gt; for  this test conversion which included removing procedure.java.  I would think now the thing to do would be re-resolve this issue and then open up a new one to enable the test on client or is there more work to be done?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;

</comment>
                            <comment id="13476247" author="dagw" created="Mon, 15 Oct 2012 17:32:12 +0100"  >&lt;p&gt;Thanks! I&apos;ll resolve this as soon as I commit the changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5945&quot; title=&quot;Inappropriate error message when calling a procedure as a function (as if it had a return value)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5945&quot;&gt;&lt;del&gt;DERBY-5945&lt;/del&gt;&lt;/a&gt;, and make a new issue for enabling this test for the client.&lt;/p&gt;</comment>
                            <comment id="13544552" author="dagw" created="Sat, 5 Jan 2013 03:18:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5945&quot; title=&quot;Inappropriate error message when calling a procedure as a function (as if it had a return value)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5945&quot;&gt;&lt;del&gt;DERBY-5945&lt;/del&gt;&lt;/a&gt; enables LangProceduresTest as part of the lang suite for both embedded and client.&lt;/p&gt;</comment>
                            <comment id="14119558" author="knutanders" created="Wed, 3 Sep 2014 09:31:25 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12366419">DERBY-2510</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12366428">DERBY-2515</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12366429">DERBY-2516</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12373599">DERBY-2927</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12611402">DERBY-5945</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12354879" name="DERBY-2461_diff.txt" size="536658" author="kmarsden" created="Tue, 3 Apr 2007 20:56:12 +0100"/>
                            <attachment id="12354880" name="DERBY-2461_stat.txt" size="1137" author="kmarsden" created="Tue, 3 Apr 2007 20:56:41 +0100"/>
                            <attachment id="12354012" name="derby-2461-pre.diff" size="15967" author="jta" created="Thu, 22 Mar 2007 23:33:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Mar 2007 19:14:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30457</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>