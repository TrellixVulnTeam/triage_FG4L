<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:40:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6456/DERBY-6456.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6456] Infinite loop in NetworkServerControlImpl when reply &gt;= 32k</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6456</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When size of reply in NetworkServerControlImpl  equals to 32k (max size for short) ensureDataInBuffer is in infinite loop. clientIs.read(..., replyBuffer.length - replyBufferCount) return 0 because &apos;replyBuffer.length - replyBufferCount&apos; is 0 (bytes to read).&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
Open many connections (for me 34) with at least 1 SELECT query. and call getRuntimeInfo(). Runtime info string.length &amp;gt; 32kB. Leading to infinite loop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688576">DERBY-6456</key>
            <summary>Infinite loop in NetworkServerControlImpl when reply &gt;= 32k</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="jandam@crcdata.cz">Martin JANDA</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2014 17:01:31 +0000</created>
                <updated>Wed, 21 Jan 2015 00:23:27 +0000</updated>
                            <resolved>Wed, 22 Jan 2014 13:11:02 +0000</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13872074" author="knutanders" created="Wed, 15 Jan 2014 13:45:28 +0000"  >&lt;p&gt;This may be a fallout from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5236&quot; title=&quot;Client driver silently truncates strings that exceed 32KB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5236&quot;&gt;&lt;del&gt;DERBY-5236&lt;/del&gt;&lt;/a&gt;, which changed DDMWriter.writeLDString() so that the maximum message length was increased from ~32KB to 64KB. The client driver was adjusted accordingly, but it seems like we overlooked that NetworkServerControl also could act as a client, and it still only allocates a large enough buffer to hold ~32KB.&lt;/p&gt;</comment>
                            <comment id="13874612" author="knutanders" created="Fri, 17 Jan 2014 10:04:19 +0000"  >&lt;p&gt;The attached patch fixes the infinite loop by adjusting NetworkServerControlImpl.MAXREPLY so that the reply buffer is large enough to hold the largest possible reply. The largest reply would contain four bytes in the reply header, a single status byte, two bytes for the length field, and 2&#185;&#8310;-1 bytes of payload. Which sums up to 65542 bytes.&lt;/p&gt;

&lt;p&gt;The patch also contains a regression test case that verifies that such a large reply can be read. The test case never completes without the fix.&lt;/p&gt;

&lt;p&gt;I&apos;m running the full regression test suite on the patch now.&lt;/p&gt;</comment>
                            <comment id="13874650" author="knutanders" created="Fri, 17 Jan 2014 10:48:04 +0000"  >&lt;p&gt;All tests passed with the patch.&lt;/p&gt;</comment>
                            <comment id="13874740" author="jandam@crcdata.cz" created="Fri, 17 Jan 2014 13:02:23 +0000"  >&lt;p&gt;Thank you very much for the fix.&lt;/p&gt;</comment>
                            <comment id="13877340" author="jira-bot" created="Tue, 21 Jan 2014 08:58:14 +0000"  >&lt;p&gt;Commit 1559943 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1559943&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1559943&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6456&quot; title=&quot;Infinite loop in NetworkServerControlImpl when reply &amp;gt;= 32k&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6456&quot;&gt;&lt;del&gt;DERBY-6456&lt;/del&gt;&lt;/a&gt;: Infinite loop in NetworkServerControlImpl when reply &amp;gt;= 32k&lt;/p&gt;

&lt;p&gt;Make sure the reply buffer in NetworkServerControlImpl is able to hold&lt;br/&gt;
the longest possible reply that it could see.&lt;/p&gt;</comment>
                            <comment id="13878585" author="jira-bot" created="Wed, 22 Jan 2014 12:15:47 +0000"  >&lt;p&gt;Commit 1560329 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1560329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1560329&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6456&quot; title=&quot;Infinite loop in NetworkServerControlImpl when reply &amp;gt;= 32k&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6456&quot;&gt;&lt;del&gt;DERBY-6456&lt;/del&gt;&lt;/a&gt;: Infinite loop in NetworkServerControlImpl when reply &amp;gt;= 32k&lt;/p&gt;

&lt;p&gt;Merged revision 1559943 from trunk.&lt;/p&gt;</comment>
                            <comment id="14284805" author="myrna" created="Wed, 21 Jan 2015 00:23:27 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12506420">DERBY-5220</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12688558">DERBY-6455</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12507507">DERBY-5236</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12623619" name="d6456-1a.diff" size="5386" author="knutanders" created="Fri, 17 Jan 2014 10:04:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jan 2014 13:45:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzl7mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>