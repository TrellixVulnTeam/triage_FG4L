<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:20:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4509/DERBY-4509.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4509] Convert autoincrement.sql to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4509</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The task is to convert existing autoincrement.sql to JUnit&lt;/p&gt;</description>
                <environment>Apache Derby</environment>
        <key id="12444990">DERBY-4509</key>
            <summary>Convert autoincrement.sql to JUnit</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsjay1976">Jayaram Subramanian</assignee>
                                    <reporter username="rsjay1976">Jayaram Subramanian</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jan 2010 03:23:35 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:45 +0100</updated>
                            <resolved>Mon, 5 Apr 2010 18:41:05 +0100</resolved>
                                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12797893" author="rsjay1976" created="Fri, 8 Jan 2010 03:25:42 +0000"  >&lt;p&gt;Partial patch for JUnit conversion of autoincrement.sql&lt;/p&gt;</comment>
                            <comment id="12804123" author="rsjay1976" created="Sat, 23 Jan 2010 18:42:08 +0000"  >&lt;p&gt;Interim patch for AutoIncrement Test conversion&lt;/p&gt;</comment>
                            <comment id="12828443" author="rsjay1976" created="Tue, 2 Feb 2010 04:52:56 +0000"  >&lt;p&gt;Complete converted code of autoincrement.sql&lt;/p&gt;</comment>
                            <comment id="12829423" author="rsjay1976" created="Thu, 4 Feb 2010 03:45:24 +0000"  >&lt;p&gt;All changes related to conversion of autoincrementTest.sql file to autoincrementTest.java junit file have been included in this patch.  &lt;/p&gt;</comment>
                            <comment id="12829946" author="rsjay1976" created="Fri, 5 Feb 2010 03:43:59 +0000"  >&lt;p&gt;Patch updated after discussion and review comments from Kathy&lt;/p&gt;</comment>
                            <comment id="12831202" author="kmarsden" created="Tue, 9 Feb 2010 00:05:13 +0000"  >&lt;p&gt;Thank you Jayaram for the patch.&lt;br/&gt;
My first general comment would be for the creation and cleanup of schema objects, you use CleanDatabaseTestSetup and decorateSQL to create the objects such as tables and views up front and then let them get cleaned up automatically at the end of the test.   You can then remove the drop statements from the test.  If any table names are reused in the test you will have to choose distinct names so there is no collision.   One big advantage of doing it this way is that if the test fails for some reason we are assured that things get cleaned up properly and also declutters the test.   Take a look at GroupByTest for an example of how to do this.&lt;/p&gt;

&lt;p&gt;My second would be that it would be good to break the test up into multiple fixtures instead of just one big one, for example maybe testIdentity  testIdentityWithStartValue, testIdentityWithIncrement, etc.    Just go down through the autoincrement.out file and group it into logical chunks and make sure each fixture has javadoc comments.&lt;/p&gt;

&lt;p&gt;I did not check the out file against the new test, but noticed that the lock checking seems to be missing.  You need to add the creation of the lock_table view and  check the locks where they are being checked in the original test.  The master/autoincrement.out file has the expected output.  &lt;/p&gt;

&lt;p&gt;Also a small thing, instead of doing:&lt;br/&gt;
Connection conn = getConnection();&lt;br/&gt;
		Statement s = conn.createStatement();&lt;br/&gt;
to get a statement, just do &lt;br/&gt;
   Statement s - getStatement();&lt;/p&gt;

&lt;p&gt;Here again the statement will get cleaned up automatically, so you don&apos;t have to put the cleanup code in the test.&lt;/p&gt;

&lt;p&gt;There are other built in helper methods too, like&lt;br/&gt;
conn.commit();   -&amp;gt; commit()&lt;br/&gt;
conn.setAutoCommit(true); -&amp;gt; setAutoCommit(true);&lt;/p&gt;

&lt;p&gt;Take a look at BaseJDBCTestCase to see what is available.&lt;/p&gt;

&lt;p&gt;Thanks &lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;

</comment>
                            <comment id="12838706" author="rsjay1976" created="Fri, 26 Feb 2010 04:34:16 +0000"  >&lt;p&gt;Attaching the autoincrement revised file based on the review comments from Kathy.&lt;/p&gt;</comment>
                            <comment id="12841544" author="kmarsden" created="Thu, 4 Mar 2010 21:43:42 +0000"  >&lt;p&gt;I spoke with Jayaram on the phone and IRC about the Autoincrementrevised.txt patch.&lt;br/&gt;
The main thing was that he needs to review the new test and compare it to  autoincrement.out and make sure everything is included. I put suggested he put it in the same general order  and copy the comments exactly so we don&apos;t miss anything and it is easy to check.   Besides that, I had the following  details:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;suite.addTest(OrderByAndOffsetFetchInSubqueries.suite()); seems to be missing now from lang/_Suite.java&lt;/li&gt;
	&lt;li&gt;autoincrement.sql is still in derbylang.runall and needs to be removed.&lt;/li&gt;
	&lt;li&gt;test name in AutoIncrementTest in licence header should be changed from SimpleTest&lt;/li&gt;
	&lt;li&gt;use local variables for rs and expectedRows in each fixture instead of fields.  Fields tend to leak memory in Junit tests.&lt;/li&gt;
	&lt;li&gt;make sure lock_table queries are being executed as they were in autoincrement.sql. The view creation is there but I didn&apos;t see the queries to check for locking behavior.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12846282" author="rsjay1976" created="Wed, 17 Mar 2010 03:40:00 +0000"  >&lt;p&gt;Update AutoIncrementTest as per interim review comments from Kathy.. &lt;/p&gt;</comment>
                            <comment id="12849288" author="kmarsden" created="Wed, 24 Mar 2010 17:17:50 +0000"  >&lt;p&gt;I looked at the autoincrement_March162010.txt  patch and it looks good except that there seem to be some extra commented out statements that should be removed, e.g as I think they must be something superfluous from your work converting the test e.g after //-with unique index you have.&lt;/p&gt;

&lt;p&gt;		//s.execute(&quot;insert into uniquet4&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; values(3)&quot;);&lt;br/&gt;
		//s.execute(&quot;insert into uniquet4&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; values(4)&quot;);&lt;br/&gt;
		//s.execute(&quot;insert into uniquet4&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; values(5)&quot;);		&lt;br/&gt;
		//assertStatementError(&quot;23505&quot;,s,&quot;insert into uniquet4(i,uniquet4_autogen) values(1,0)&quot;);&lt;br/&gt;
		//assertStatementError(&quot;23505&quot;,s,&quot;insert into uniquet4(i,uniquet4_autogen) values(1,0)&quot;);&lt;/p&gt;

&lt;p&gt;Please remove those and post a new patch and I will commit it.  I will be out next week, so hopefully you can do this today or tomorrow.&lt;/p&gt;

&lt;p&gt;After commit,  It might be nice too as extra credit, to  make an additional patch in which you add javadoc comments to the fixtures.  In Eclipse, you can just click on the method name and then right click -&amp;gt; Source -&amp;gt; Generate element comment and then add a brief comment of what the fixture is testing, just to make things tidy, but first just remove the superfluous commented code and then follow up with this if you want to.&lt;/p&gt;
</comment>
                            <comment id="12849555" author="rsjay1976" created="Thu, 25 Mar 2010 00:47:05 +0000"  >&lt;p&gt;Submitting the patch as per the latest review comments from Kathy&lt;/p&gt;</comment>
                            <comment id="12852857" author="myrna" created="Fri, 2 Apr 2010 17:22:14 +0100"  >&lt;p&gt;I ran the tests with ibm 1.6 on windows, and derbyall and suites.All both passed for me.&lt;br/&gt;
Committed patch autoincrement_March24.txt to trunk with revision 930311. &lt;br/&gt;
I suggest we leave this open for a day or so until the tinderbox tests have passed.&lt;br/&gt;
Thanks for the contribution and congratulations on getting your first patch committed Jayaram!&lt;/p&gt;</comment>
                            <comment id="12853456" author="myrna" created="Mon, 5 Apr 2010 18:41:05 +0100"  >&lt;p&gt;Looks fine from the nightly tests from IBM (not sure what&apos;s up with the ones from Sun/Oracle, but likely unrelated to this issue), so resolving. The reporter can close this, I think.&lt;/p&gt;</comment>
                            <comment id="13685346" author="knutanders" created="Mon, 17 Jun 2013 10:19:45 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12429709" name="AutoIncrementDO-NOT_COMMIT_diff.txt" size="2694" author="rsjay1976" created="Fri, 8 Jan 2010 03:25:42 +0000"/>
                            <attachment id="12434502" name="AutoIncrementDO_NOT_COMMIT_diff.txt" size="59361" author="rsjay1976" created="Tue, 2 Feb 2010 04:52:56 +0000"/>
                            <attachment id="12431219" name="AutoIncrementDO_NOT_COMMIT_diff.txt" size="30936" author="rsjay1976" created="Sat, 23 Jan 2010 18:42:08 +0000"/>
                            <attachment id="12437112" name="AutoIncrementrevised.txt" size="197047" author="rsjay1976" created="Fri, 26 Feb 2010 04:34:16 +0000"/>
                            <attachment id="12439002" name="autoincrement_March162010.txt" size="204770" author="rsjay1976" created="Wed, 17 Mar 2010 03:40:00 +0000"/>
                            <attachment id="12439742" name="autoincrement_March24.txt" size="204032" author="rsjay1976" created="Thu, 25 Mar 2010 00:47:05 +0000"/>
                            <attachment id="12434780" name="jira4509.txt" size="103277" author="rsjay1976" created="Thu, 4 Feb 2010 03:45:24 +0000"/>
                            <attachment id="12434925" name="jira4509feb4.txt" size="197724" author="rsjay1976" created="Fri, 5 Feb 2010 03:43:59 +0000"/>
                            <attachment id="12434926" name="jira4509feb4stat.txt" size="535" author="rsjay1976" created="Fri, 5 Feb 2010 03:43:59 +0000"/>
                            <attachment id="12434781" name="jira4509stat.txt" size="666" author="rsjay1976" created="Thu, 4 Feb 2010 03:45:24 +0000"/>
                            <attachment id="12439003" name="stat_March162010.txt" size="535" author="rsjay1976" created="Wed, 17 Mar 2010 03:40:00 +0000"/>
                            <attachment id="12439741" name="stat_March24.txt" size="535" author="rsjay1976" created="Thu, 25 Mar 2010 00:47:05 +0000"/>
                            <attachment id="12437113" name="statrevised.txt" size="535" author="rsjay1976" created="Fri, 26 Feb 2010 04:34:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Feb 2010 00:05:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0qw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38175</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>