<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:41:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1046/DERBY-1046.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1046] JVMInfo is duplicated in derbyclient.jar</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1046</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The JVMInfo class is included twice in derbyclient.jar, as&lt;br/&gt;
org.apache.derby.iapi.services.info.JVMInfo and&lt;br/&gt;
org.apache.derby.shared.common.info.JVMInfo. The only one of them&lt;br/&gt;
actually used by the client code is the one found in&lt;br/&gt;
org.apache.derby.shared.common.info.&lt;/p&gt;

&lt;p&gt;org.apache.derby.iapi.services.info.JVMInfo is also included in&lt;br/&gt;
derby.jar, so one could run into problems if the classpath contains&lt;br/&gt;
derbyclient.jar and derby.jar with different versions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12329415">DERBY-1046</key>
            <summary>JVMInfo is duplicated in derbyclient.jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Feb 2006 17:53:23 +0000</created>
                <updated>Tue, 24 Jul 2012 18:26:09 +0100</updated>
                            <resolved>Fri, 30 Sep 2011 20:17:40 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Build tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                            <comments>
                            <comment id="12369343" author="fuzzylogic" created="Wed, 8 Mar 2006 09:11:14 +0000"  >&lt;p&gt;Patch for this issue attached. Just need to exclude JVMInfo from the fileset, since it included all of iapi/services/info. Might want to consider moving to use classlister to generate a dependency list, but that also may be more trouble than its worth.&lt;/p&gt;</comment>
                            <comment id="12369351" author="davidvc" created="Wed, 8 Mar 2006 09:30:23 +0000"  >&lt;p&gt;It looks like ProductVersionHolder has the same potential issues around shadowing as JVMInfo.  Perhaps we should (for now) make a copy of this class as well into shared and exclude iapi/services/ProductVersionHolder from the client jar file.&lt;/p&gt;</comment>
                            <comment id="12369362" author="fuzzylogic" created="Wed, 8 Mar 2006 10:38:05 +0000"  >&lt;p&gt;Except that, unlike JVMInfo, ProductVersionHolder and the other files in iapi.services.info haven&apos;t changed from 10.1 (yet). Seems like it would be ok to leave them for now.&lt;/p&gt;</comment>
                            <comment id="12372721" author="knutanders" created="Sat, 1 Apr 2006 06:11:28 +0100"  >&lt;p&gt;Seems like this has been fixed. Closing the issue.&lt;/p&gt;</comment>
                            <comment id="13114802" author="kmarsden" created="Mon, 26 Sep 2011 18:17:21 +0100"  >&lt;p&gt;This issue was closed as fixed but the patch was actually not checked in. It looks like sysinfo does use JVMInfo at least in 10.8, but doesn&apos;t need too really, so perhaps Andrew&apos;s solution of excluding JVMInfo is a good one but some other minor changes to sysinfo would also be needed.&lt;/p&gt;

</comment>
                            <comment id="13115970" author="kmarsden" created="Tue, 27 Sep 2011 23:12:51 +0100"  >&lt;p&gt;Attached is a patch for this issue which removes the call to JVMInfo.derbyVMLevel() in tools.sysinfo.Main and replaces it with a local method.  The new local method is simpler than the initialization in JVMInfo, but I think it is sufficient for sysinfo.  &lt;/p&gt;

&lt;p&gt;I tried sysinfo with the  with IBM and Sun JDK&apos;s 1.4.2, 1.5, 1.6, and 1.7 as well as weme 6.2. I verified that it fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5431&quot; title=&quot;If 10.7 or greater derbyclient.jar is in the classpath before an older release&amp;#39;s server jars, derby fails to boot with NoSuchFieldError for JVMInfo.JAVA_SQL_TYPES_BOOLEAN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5431&quot;&gt;&lt;del&gt;DERBY-5431&lt;/del&gt;&lt;/a&gt;. I am running tests now.&lt;/p&gt;

&lt;p&gt;I would appreciate if someone could try sysinfo with  patch with phoneME and Oracle embedded ME client.&lt;/p&gt;
</comment>
                            <comment id="13116411" author="knutanders" created="Wed, 28 Sep 2011 14:02:01 +0100"  >&lt;p&gt;Perhaps we could just remove that line from the sysinfo output to avoid having to maintain duplicated code? Before, it used to tell exactly what Derby recognized the current platform as and which JDBC level it was running at. Now, it just tells what sysinfo thinks the engine recognized the platform as, and that information could just as easily and reliably be taken directly from the Java Information section of the sysinfo output.&lt;/p&gt;

&lt;p&gt;There&apos;s a small typo in the patch: The Java SE 7 string lacks a hyphen (for consistency with the other versions).&lt;/p&gt;</comment>
                            <comment id="13116419" author="rhillegas" created="Wed, 28 Sep 2011 14:10:23 +0100"  >&lt;p&gt;Thanks for the patch, Kathey. Before applying it, I saw JVMInfo in the following jar files:&lt;/p&gt;

&lt;p&gt;derby.jar&lt;br/&gt;
derbyclient.jar&lt;br/&gt;
derbytools.jar&lt;/p&gt;

&lt;p&gt;After applying the patch, I see JVMInfo in the following jar files:&lt;/p&gt;

&lt;p&gt;derby.jar&lt;br/&gt;
derbytools.jar&lt;/p&gt;

&lt;p&gt;In all cases, JVMInfo appears in this directory:&lt;/p&gt;

&lt;p&gt;org/apache/derby/iapi/services/info&lt;/p&gt;

&lt;p&gt;So this patch achieves what this JIRA wants to accomplish. I believe that the presence of JVMInfo in derbytools.jar means that &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5431&quot; title=&quot;If 10.7 or greater derbyclient.jar is in the classpath before an older release&amp;#39;s server jars, derby fails to boot with NoSuchFieldError for JVMInfo.JAVA_SQL_TYPES_BOOLEAN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5431&quot;&gt;&lt;del&gt;DERBY-5431&lt;/del&gt;&lt;/a&gt; is still possible.&lt;/p&gt;

&lt;p&gt;I would recommend the following improvement to this patch: The cloned code warns the user to propagate changes to JVMInfo as well. I think that there should be a similar warning in JVMInfo, advising people to propagate changes to org.apache.derby.impl.tools.sysinfo.Main.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Rick&lt;/p&gt;</comment>
                            <comment id="13116443" author="rhillegas" created="Wed, 28 Sep 2011 14:18:42 +0100"  >&lt;p&gt;After applying the patch, I ran sysinfo on phoneME. It produced the following version info, which looks right to me:&lt;/p&gt;

&lt;p&gt;JRE - JDBC: J2ME - JDBC for CDC/FP 1.1&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Rick&lt;/p&gt;</comment>
                            <comment id="13116548" author="kmarsden" created="Wed, 28 Sep 2011 16:43:38 +0100"  >&lt;p&gt;Thank you Knut for your comments.&lt;br/&gt;
II think it is fine to remove the line in trunk, but was hesitant to do so in 10.8.2 as we recently had a report from a user reporting the JDBC version wasn&apos;t what he expected, so I was concerned that perhaps he/others are parsing  sysinfo for this information.   I will make a separate trunk patch and release note for trunk but keep the duplicate code in the 10.8 branch.  Also will fix the typo.&lt;/p&gt;

&lt;p&gt;Thank you Rick for your comments. I will definitely look at the derbytools issue as well. Thank you for catching tha. I will also add the comment to JVMInfo  for the 10.8 patch which will keep some duplicate code.&lt;/p&gt;
</comment>
                            <comment id="13116719" author="kmarsden" created="Wed, 28 Sep 2011 20:29:45 +0100"  >&lt;p&gt;Sorry previous upload had some cruft from another patch.&lt;br/&gt;
Here is a  patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1046&quot; title=&quot;JVMInfo is duplicated in derbyclient.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1046&quot;&gt;&lt;del&gt;DERBY-1046&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5431&quot; title=&quot;If 10.7 or greater derbyclient.jar is in the classpath before an older release&amp;#39;s server jars, derby fails to boot with NoSuchFieldError for JVMInfo.JAVA_SQL_TYPES_BOOLEAN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5431&quot;&gt;&lt;del&gt;DERBY-5431&lt;/del&gt;&lt;/a&gt;.  It removes the line with JDBC information from sysinfo and also removes JDKInfo calls from the xahelper class which lives in derbytools.jar. This is for trunk. For 10.8 we will keep the line in case someone is using it .&lt;/p&gt;
</comment>
                            <comment id="13116880" author="kmarsden" created="Wed, 28 Sep 2011 23:59:32 +0100"  >&lt;p&gt;Here is the 10.8 patch with the changes from the  comments from the first patch. &lt;/p&gt;</comment>
                            <comment id="13117101" author="knutanders" created="Thu, 29 Sep 2011 08:54:15 +0100"  >&lt;p&gt;On Java 5 in my environment, the following code throws an UnsupportedClassVersionError, not a ClassNotFoundException:&lt;/p&gt;

&lt;p&gt;    Class.forName(&quot;org.apache.derby.jdbc.ClientXADataSource40&quot;);&lt;/p&gt;

&lt;p&gt;So I think the xaHelper changes on trunk won&apos;t work as expected.&lt;/p&gt;

&lt;p&gt;Apart from that, the patches look fine to me.&lt;/p&gt;</comment>
                            <comment id="13117729" author="kmarsden" created="Fri, 30 Sep 2011 00:14:49 +0100"  >&lt;p&gt;Here is an updated 10.8 patch with changes review comments. Fixes xaHelper on &amp;lt; JDK 1.6. Running tests.&lt;/p&gt;</comment>
                            <comment id="13117754" author="kmarsden" created="Fri, 30 Sep 2011 00:52:59 +0100"  >&lt;p&gt;Here is the trunk patch which removes the JRE/JDBC line all together. The JDBCMBean test was comparing the driver level to sysinfo. That test was changed to compare to DatabaseMetaData JDBC version values.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12524760">DERBY-5431</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12523076">DERBY-5410</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12323890" name="derby-1046.diff" size="1152" author="fuzzylogic" created="Wed, 8 Mar 2006 09:11:14 +0000"/>
                            <attachment id="12497089" name="derby-1046_derby-5431_10_8_diff.txt" size="9165" author="kmarsden" created="Fri, 30 Sep 2011 00:14:49 +0100"/>
                            <attachment id="12496944" name="derby-1046_derby-5431_10_8_diff.txt" size="4358" author="kmarsden" created="Wed, 28 Sep 2011 23:59:31 +0100"/>
                            <attachment id="12497092" name="derby-1046_derby-5431_trunk_diff.txt" size="11734" author="kmarsden" created="Fri, 30 Sep 2011 00:52:59 +0100"/>
                            <attachment id="12496912" name="derby-1046_derby-5431_trunk_diff.txt" size="4355" author="kmarsden" created="Wed, 28 Sep 2011 20:33:14 +0100"/>
                            <attachment id="12496806" name="derby-1046_diff.txt" size="3101" author="kmarsden" created="Tue, 27 Sep 2011 23:12:51 +0100"/>
                    </attachments>
                <subtasks>
                            <subtask id="12525352">DERBY-5439</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Mar 2006 09:11:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0awv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35586</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>