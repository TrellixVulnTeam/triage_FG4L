<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1547/DERBY-1547.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1547] Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1547</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;getDatabaseProductVersion and getDriverVersion() report only the four digit Derby version number and not the svn build number.   It would be useful to return  the full version including the build number  as sysinfo does: e.g. &quot;10.1.2.4 - (392472)&quot;, That way it will be clear from application logs that collect this information exactly what revision level they are running if they are using rolled up fixes on the maintenance branch between releases.&lt;/p&gt;

&lt;p&gt;There may be risk in doing this however if applications are parsing the version information, but hopefully they will use getDatabaseMajorVersion() , getDatbaseMinorVersion, getDriverMajorVersion, and getDriverMinorVersion for such proccessing.  &lt;/p&gt;


</description>
                <environment></environment>
        <key id="12346342">DERBY-1547</key>
            <summary>Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="narayanan">V.Narayanan</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jul 2006 14:10:28 +0100</created>
                <updated>Tue, 30 Jun 2009 17:12:52 +0100</updated>
                            <resolved>Wed, 23 May 2007 02:16:04 +0100</resolved>
                                    <version>10.1.3.2</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12424396" author="kmarsden" created="Sun, 30 Jul 2006 16:58:24 +0100"  >&lt;p&gt;Changing this to Normal Urgency. It would be a huge supportability improvement, and can only happen in a feature release, so it would be good to get in now.&lt;/p&gt;
</comment>
                            <comment id="12426832" author="fuzzylogic" created="Wed, 9 Aug 2006 05:58:03 +0100"  >&lt;p&gt;I think this is as simple as:&lt;/p&gt;

&lt;p&gt;Index: java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java   (revision 429937)&lt;br/&gt;
+++ java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java   (working copy)&lt;br/&gt;
@@ -283,7 +283,7 @@&lt;br/&gt;
        public String getDatabaseProductVersion() &lt;/p&gt;
{
                ProductVersionHolder myPVH = Monitor.getMonitor().getEngineVersion();
 
-               return myPVH.getVersionBuildString(false);
+               return myPVH.getVersionBuildString(true);
        }

&lt;p&gt;     /**&lt;/p&gt;

&lt;p&gt;as well as updating metadata_test.java to not chomp the build string returned from getDatabaseProductVersion() and then updating the appropriate test masters. I&apos;d love to assign myself to this and fix it, but I feel I may already be overcommitted to 10.2 issues at this point. Hopefully someone else can pick this up and carry it to completion.&lt;/p&gt;</comment>
                            <comment id="12426992" author="stan" created="Wed, 9 Aug 2006 18:47:32 +0100"  >&lt;p&gt;In response to an email request for impact assessment =&amp;gt; Excerpt:  ..Does anyone see any issues with this change?..might affect existing applications..&lt;/p&gt;

&lt;p&gt;My Response:&lt;/p&gt;

&lt;p&gt;+1 - My two cents is; It is important to report the build number.  10.2 is a feature release so I feel such a change is not out of scope.  In addition I believe that adjusting code that works with the output of the call will not be odious.&lt;/p&gt;</comment>
                            <comment id="12427056" author="fuzzylogic" created="Thu, 10 Aug 2006 00:47:23 +0100"  >&lt;p&gt;No, it was not intended. I thought I had reverted the file. Thank you very much for spotting that, Deepa! Backed out with revision 430189.&lt;/p&gt;</comment>
                            <comment id="12427254" author="narayanan" created="Thu, 10 Aug 2006 16:45:31 +0100"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Attached are the patches for this issue. I HAVE NOT run derbyall on the whole patch as yet.&lt;/p&gt;

&lt;p&gt;1) I ran derbyall first after making changes to embedded side&lt;br/&gt;
2) fixed the issues in tests that failed(all these tests were in jdbcapi).&lt;br/&gt;
3) Ran jdbcapi on embedded side. All of these tests passed.&lt;/p&gt;

&lt;p&gt;4) Made changes to Client side&lt;br/&gt;
5) Ran tests that had failed on embedded side alone. These passed.&lt;/p&gt;

&lt;p&gt;My expectation is that no tests should fail in this patch. But will anyway run derbyall and submit another patch tomorrow. I thought I could the patches up for review anyway.&lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12427793" author="narayanan" created="Mon, 14 Aug 2006 03:45:21 +0100"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;contrary to my expectations there were quite a few failures in the tests. Most of the failures are due to the following&lt;/p&gt;


&lt;p&gt;&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha started and ready to accept connections on port 20000 at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
2a2&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (431279M) started and ready to accept connections on port 20000 at xxxxxxFIL&lt;/p&gt;

&lt;p&gt;I have failures in the Upgrade_10_1_10_2 test as well. It fails because of a caseVersion check. I haven&apos;t looked at this in detail. But a look at the out files suggested that pattern replacement in not the solution to these.&lt;/p&gt;

&lt;p&gt;10.3.0.0 alpha has been replaced by 10.3.0.0 alpha - (431279M) in the current patch. According to me the following are the ways available to resolve this issue&lt;/p&gt;

&lt;p&gt;1) Adding a  _sed.properties to each of these tests. But this results in the following _sed.properties files&lt;br/&gt;
     metadata_sed.properties            (which was already present)&lt;br/&gt;
     odbc_metadata_sed.properties (which was already present)&lt;br/&gt;
     dbMetaDataJdbc30_sed.properties&lt;br/&gt;
     NSinSameJVM_sed.properties&lt;br/&gt;
     testProperties_sed.properties&lt;/p&gt;

&lt;p&gt;2) I read in the README.html in the java/testing directory that adding an entry in Sed.java would help me in masking these. I guess in Sed.java I would do two things&lt;br/&gt;
    2.a) Add an entry for substitution of the pattern&lt;br/&gt;
    2.b) Add an entry for deletion of the pattern&lt;/p&gt;

&lt;p&gt;Is there someone who has worked with the sed masking before? Can someone pls advice me on the best way to proceed here?&lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12427927" author="deepa" created="Mon, 14 Aug 2006 17:16:52 +0100"  >&lt;p&gt;Hi Narayanan,&lt;br/&gt;
The failures in the above tests do not look related to your patch. These set of tests explicitly check the version and are expected to get modified when a new release is created. They are listed in &quot;regex.masters&quot; target in tools/release/build.xml. I think there was a problem in the execution of this target (which is already fixed) when the new branch was created. The above tests are now passing. We should not add sed files to sed out the version checks for the above tests. I do not know if this information is documented anywhere. Anyone else know?&lt;/p&gt;

&lt;p&gt;For upgrade test failure, I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1689&quot; title=&quot;Remove Upgrade_10_1_10_2 test from 10.3 and add new upgrade tests for 10.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1689&quot;&gt;&lt;del&gt;DERBY-1689&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Deepa&lt;/p&gt;</comment>
                            <comment id="12428354" author="narayanan" created="Wed, 16 Aug 2006 09:58:49 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
Thanx a ton for taking a look at the issue. &lt;/p&gt;

&lt;p&gt;But if u look at the failure the specific failure in this case is due to the Subversion number being added along with the version number. The subversion number keeps changing very often. It would be difficult to update out files each time. I thought I could add sed masks to mask the subversion number. But I see that it is not right to do so.&lt;/p&gt;

&lt;p&gt;Can anyone pls offer me some guidance here?&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12428380" author="kmarsden" created="Wed, 16 Aug 2006 13:06:16 +0100"  >&lt;p&gt;I always thought instead of  masters with the version output it would be good to have a test properties file that had the current release information.  So bump versions would just update that file and tests could read from the property  file and compare the expected values and check them. For the build number perhaps it is just good enough to verify manually and in the test check the expected format.  Alternately the test build could generate the svn number into the test properties file as well for checking.&lt;/p&gt;</comment>
                            <comment id="12428400" author="narayanan" created="Wed, 16 Aug 2006 15:19:36 +0100"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Thanx for taking time to look at the issue and offering guidance.&lt;/p&gt;

&lt;p&gt;In relation to the suggestion for having a property file containing the version along with the subversion number which gets updated each time we build tests pls consider the following scenario and the questions that follow.&lt;/p&gt;

&lt;p&gt;SCENARIO DESCRIPTION&lt;br/&gt;
--------------------&lt;br/&gt;
1) I do a svn update on an workspace and get a suversion version as X.&lt;/p&gt;

&lt;p&gt;2) Now I do an ant all &amp;amp;&amp;amp; ant buildjarsclean&lt;/p&gt;

&lt;p&gt;3) Now I have another workspace on which I do an svn update and get subversion number X+1.&lt;/p&gt;

&lt;p&gt;   I do an ant all &amp;amp;&amp;amp; ant buildjarsclean on this&lt;/p&gt;

&lt;p&gt;   (or)&lt;/p&gt;

&lt;p&gt;   I use the same workspace and do an svn update and get svn version X+1. &lt;/p&gt;

&lt;p&gt;   I do an ant testing &amp;amp;&amp;amp; ant buildjarsclean on this.&lt;/p&gt;

&lt;p&gt;   In both of the above cases we would have the properties file having a subversion number as X+1.&lt;/p&gt;

&lt;p&gt;4) To run tests I use the combination of derby.jar from 2) and derbyTesting.jar from 3).&lt;/p&gt;

&lt;p&gt;QUESTIONS RELATED TO THIS SCENARIO&lt;br/&gt;
----------------------------------&lt;/p&gt;

&lt;p&gt;1) Is the above scenario valid?&lt;/p&gt;

&lt;p&gt;2) Is it right to expect the user to do an svn all each time he runs tests as expected of him in&lt;br/&gt;
   the above case?&lt;/p&gt;</comment>
                            <comment id="12428405" author="kmarsden" created="Wed, 16 Aug 2006 15:38:56 +0100"  >&lt;p&gt;I agree that the need to regenerate could cause potential issues. I think for the build number it may be good enough to just do manual testing  and have the test check the output format and not the number directly. For checking the other version numbers I think the property file in the testing jar is a valid approach.&lt;/p&gt;</comment>
                            <comment id="12428408" author="kmarsden" created="Wed, 16 Aug 2006 15:55:38 +0100"  >&lt;p&gt;Looking back at your original post asking about  using the sed test harness capability, if you go that route.   I do not think adding a global pattern to Sed.java is a safe thing to do.  One thing I always wondered was why we   need to test the same metadata calls in so many tests.   If we just tested it in one place, you would need only one sed file for jdbc and one for odbc.  But I am not sure of the reasons why we test the same calls so many times.  I think I can safely say NSInSameJVM doesn&apos;t need it.&lt;/p&gt;
</comment>
                            <comment id="12428414" author="deepa" created="Wed, 16 Aug 2006 16:28:08 +0100"  >&lt;p&gt;Narayanan, Sorry for the confusion. I had seen the same failures which you reported when I ran derbyall in the new trunk but now I realize those failures had a different diff. And I mixed this with your report thinking you are reporting the same diffs. So my previous comment is not valid.&lt;/p&gt;

&lt;p&gt;Just want to add that NSinSameJVM is testing the message printed out by Network server at startup and shutdown. This was added as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-515&quot; title=&quot;Network Server should log server start and shutdown time to derby.log&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-515&quot;&gt;&lt;del&gt;DERBY-515&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12428566" author="narayanan" created="Thu, 17 Aug 2006 04:59:44 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
Absolutely no problem! Thanx a ton for taking time off to look at the issue and give ur invaluable comments. Thanx to everyone for the comments and reviews. I will in a following attachment place a design of what I have in mind as a solution for further reviews.&lt;/p&gt;

&lt;p&gt;thanx again,&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12428985" author="narayanan" created="Fri, 18 Aug 2006 12:32:38 +0100"  >&lt;p&gt;Possible solution&lt;br/&gt;
-----------------&lt;/p&gt;

&lt;p&gt;1) Find out in the tests where the input stream returned upon starting the NetworkServer is being&lt;br/&gt;
     flushed.&lt;/p&gt;

&lt;p&gt;2) Instead of flushing this input stream directly pass it on to a Util class that will search for&lt;br/&gt;
     the subversion number pattern in the stream and&lt;/p&gt;

&lt;p&gt;   2.a) Check if the pattern is right&lt;/p&gt;

&lt;p&gt;   2.b) Remove the pattern and return the pattern string&lt;/p&gt;

&lt;p&gt;        2.b.1) So JDBC Driver &apos;Apache Derby Embedded JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha -&lt;br/&gt;
                    (344567M)) would be replaced by&lt;/p&gt;

&lt;p&gt;                    Apache Derby Embedded JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha)&lt;/p&gt;

&lt;p&gt;3) Find the place where the getDatabaseProductVersion and getDriverVersion o/p are being printed.&lt;br/&gt;
   Again search and replace the subversion number.&lt;/p&gt;
</comment>
                            <comment id="12429383" author="narayanan" created="Mon, 21 Aug 2006 11:46:36 +0100"  >&lt;p&gt;The four kinds of pattern strings that need to be searched for in the tests output while solving this are the following&lt;/p&gt;

&lt;p&gt;1) JDBC Driver &apos;Apache Derby Embedded JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha - (433210M))&lt;/p&gt;

&lt;p&gt;2) Apache Derby Network Server - 10.3.0.0 - (433210M) alpha started and ready to accept connections&lt;br/&gt;
   on port 20000 at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;/p&gt;

&lt;p&gt;3) Apache Derby Network Server - 10.3.0.0 - (433210M) alpha shutdown at xxxxxxFILTERED&lt;br/&gt;
   -TIMESTAMPxxxxxGMT&lt;/p&gt;

&lt;p&gt;4) getDatabaseProductVersion(): 10.3.0.0 - (433210M) alpha&lt;/p&gt;

&lt;p&gt;5) getDriverVersion(): 10.3.0.0 - (433210M) alpha&lt;/p&gt;


&lt;p&gt;2) and 3) are the log messages printed by NetworkServerControlImpl class upon server startup and shutdown. The start method of the NetworkServerControlImpl class accepts a PrintWriter object to which it writes the log message.&lt;/p&gt;

&lt;p&gt;1) , 4) and 5) are built from the getDatabaseProductVersion(),getDriverVersion,getDriverMajorVersion(),getDriverMinorVersion().&lt;/p&gt;

&lt;p&gt;Solution Steps&lt;br/&gt;
--------------&lt;/p&gt;

&lt;p&gt;1) To write a util class VersionInformationParser in the org.apache.derbyTesting.functionTests.util&lt;br/&gt;
   package. &lt;/p&gt;

&lt;p&gt;2) To add a properties file to the same package with the following contents&lt;br/&gt;
   major=10&lt;br/&gt;
   minor=3&lt;br/&gt;
   version=10.3.0.0\ alpha&lt;/p&gt;

&lt;p&gt;3) The VersionInformationParser will have 4 verification functions and 4 replace functions&lt;br/&gt;
   3.a) verification functions&lt;br/&gt;
        3.a.1) verifyJDBCDriverVersionString - for string type 1)&lt;br/&gt;
        3.a.2) verifyApacheDerbyNetworkServerString - for types 2) and 3)&lt;br/&gt;
        3.a.3) verifyProductVersion - for type 4)&lt;br/&gt;
        3.a.4) verifyDriverVersion  - for type 5)&lt;br/&gt;
   3.b) The replace functions will replace the version information &lt;br/&gt;
        for e.g. &lt;br/&gt;
        10.3 (10.3.0.0 alpha - (433210M)) will be replaced by &lt;br/&gt;
        XXXXXEXPECTED VERSION INFOXXXXXXX&lt;/p&gt;

&lt;p&gt;4) The above util class will be used in the tests that print the version information ,to verify and&lt;br/&gt;
   mask the version information if it is found to be correct.&lt;/p&gt;

&lt;p&gt;5) I will implement the verification and replace functions using substring and strcmp functions.&lt;/p&gt;


&lt;p&gt;The above solution has been based on the suggestions received for this issue in using a property file as the point where the version information will be stored so that we no more need to update multiple master files when bumping version information but only replace one property file.&lt;/p&gt;</comment>
                            <comment id="12429478" author="fuzzylogic" created="Mon, 21 Aug 2006 18:57:31 +0100"  >&lt;p&gt;&quot;The above solution has been based on the suggestions received for this issue in using a property file as the point where the version information will be stored so that we no more need to update multiple master files when bumping version information but only replace one property file.&quot;&lt;/p&gt;

&lt;p&gt;We already have one properties file that contains the version number: tools/ant/properties/release.properties. We should not have another that needs updating when changing the version. I suggest that you generate your properties file from that file at build time. &lt;/p&gt;

&lt;p&gt;If the goal for this issue is now to completely remove the need to update master files when bumping the version, then the metadata tests that call getMajor/MinorVersion() and only output that part of the version would also need to be accounted for. That seems outside of the scope of this issue&apos;s description, though.&lt;/p&gt;</comment>
                            <comment id="12429677" author="narayanan" created="Tue, 22 Aug 2006 12:36:22 +0100"  >&lt;p&gt;Thank you for the comments on the patch. Going by your comments of using existing property files would it be possible to take a clue from the way this is done in the EmbeddedServer and client currently and get the product version the following way&lt;/p&gt;

&lt;p&gt;The class ProductVersionHolder is used to get derby product information in Embedded Server,Client and tools as a result of which it is a part of derby.jar,derbyclient.jar and derbytools.jar. The property files using which the information is constructed for each Genus or each product category are &lt;/p&gt;

&lt;p&gt;Embedded - DBMS.properties&lt;br/&gt;
Client           - dnc.properties&lt;br/&gt;
tools             - tools.properties&lt;/p&gt;

&lt;p&gt;1) In the tests I would need the driver versions in the embedded and the network client case. &lt;/p&gt;

&lt;p&gt;   I can get the product version in both the cases using the ProductVersionHolder class. For this&lt;br/&gt;
   I would need to have ProductVersionHolder class and files DBMS.properties and tools.properties&lt;br/&gt;
   in derbyTesting.jar. &lt;/p&gt;

&lt;p&gt;2) When I need to get the version string for the EmbeddedServer I would do the following&lt;/p&gt;

&lt;p&gt;    InputStream versionStream = getClass().getResourceAsStream(ProductGenusNames.DBMS_INFO);&lt;br/&gt;
    engineVersion = ProductVersionHolder.getProductVersionHolderFromMyEnv(versionStream);&lt;/p&gt;</comment>
                            <comment id="12432697" author="kmarsden" created="Wed, 6 Sep 2006 01:04:06 +0100"  >&lt;p&gt;Hello Narayan,&lt;/p&gt;

&lt;p&gt;I am back from vacation and see the testing conversation on this issue is holding it up. I think the latest suggestion actually creates a cyclical testing scenario where we would be using ProductVersionHolder to test the call to ProductVersion holder.&lt;/p&gt;

&lt;p&gt;I think this issue has become time critical as it really needs to go into a a feature release, so I think we may need to try to look at the most expedient route to get it into 10.2 and then focus on ideal testing strategies later when we have leisure to do so.  To me, your original proposal to add  a _sed.properties for  each of the tests would be that route?  Would you agree?&lt;/p&gt;




</comment>
                            <comment id="12432737" author="narayanan" created="Wed, 6 Sep 2006 05:24:41 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
You would&apos;nt know how glad I am to see u back. I was totally held up trying the ProductVersionHolder way and was on the verge of giving up. I was praying that by some magic you would come back to give me advice on this issue.&lt;/p&gt;

&lt;p&gt;I understand the situation. I had rolled back the sed changes but agree that it would be a good standby to get the patch in first. I will do it this right away.&lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12432857" author="narayanan" created="Wed, 6 Sep 2006 15:26:10 +0100"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;NOTE: I AM YET TO RUN derbyall ON THE PATCH AND IT IS NOT MEANT FOR A COMMIT&lt;/p&gt;

&lt;p&gt;I had run derbyall prior in order to find out possible test failures with this change so that I can fix the test master files. I have fixed the master files but have to again run derbyall after this change. I however thought I should post the patch so that you could give ur comments on it.&lt;/p&gt;

&lt;p&gt;Pls note that the subversion number that would be displayed has been replaced with a pattern -(EXPECTED SUBVERSION NUMBER)&lt;/p&gt;

&lt;p&gt;I hope to finish running derbyall by tommorrow and post a final patch by tommorrow. In the mean time please do give me ur comments on any possible issue that u think might be present in this patch.&lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12433080" author="narayanan" created="Thu, 7 Sep 2006 12:03:33 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
derbyall just finished and there were two failures.&lt;/p&gt;

&lt;p&gt;derbyall/derbyall.fail:tools/derbyrunjartest.java&lt;br/&gt;
derbyall/derbynetclientmats/derbynetclientmats.fail:jdbcapi/checkDataSource.java&lt;/p&gt;

&lt;p&gt;The first one has failed because I missed adding derbyrun.jar in my classpath and the second one is a expected failure that seems to be part of the nightly test runs.&lt;/p&gt;

&lt;p&gt;I am attaching the derby_fail.txt also. &lt;/p&gt;

&lt;p&gt;I request the patch I attached yesterday &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed.diff to be considered for review and comments and if everything is found alright a commit also.&lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;
</comment>
                            <comment id="12433298" author="kmarsden" created="Fri, 8 Sep 2006 03:36:04 +0100"  >&lt;p&gt;Hi Narayan,&lt;/p&gt;

&lt;p&gt;Thank you for the patch. I have a question about the changes to NetworkServerControlImpl.&lt;/p&gt;

&lt;p&gt;I am not clear on the changes from StandardException to EmbedSQLException and how they are related to this change.&lt;br/&gt;
Could you explain?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12433301" author="narayanan" created="Fri, 8 Sep 2006 03:59:34 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
Thank You for the review on the patch&lt;/p&gt;

&lt;p&gt;The patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed.diff has this diff for NetworkServerControlImpl.java&lt;/p&gt;

&lt;p&gt;Index: java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java	(revision 440712)&lt;br/&gt;
+++ java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java	(working copy)&lt;br/&gt;
@@ -336,7 +336,7 @@&lt;br/&gt;
 		att_extnam = ATT_SRVNAM + &quot; &quot; + java.lang.Thread.currentThread().getName();&lt;/p&gt;

&lt;p&gt; 		att_srvclsnm = myPVH.getProductName();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;versionString = myPVH.getVersionBuildString(false);&lt;br/&gt;
+		versionString = myPVH.getVersionBuildString(true);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; 		String majorStr = String.valueOf(myPVH.getMajorVersion());&lt;br/&gt;
 		String minorStr = String.valueOf(myPVH.getMinorVersion());&lt;br/&gt;
@@ -360,7 +360,7 @@&lt;br/&gt;
 		prdId += minorStr;&lt;/p&gt;

&lt;p&gt; 		prdId += drdaMaintStr;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;att_srvrlslv = prdId + &quot;/&quot; + myPVH.getVersionBuildString(false);&lt;br/&gt;
+		att_srvrlslv = prdId + &quot;/&quot; + myPVH.getVersionBuildString(true);&lt;br/&gt;
                 // Precompute this to save some cycles&lt;br/&gt;
                 prdIdBytes_ = prdId.getBytes(DEFAULT_ENCODING);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The only changes are &lt;/p&gt;

&lt;p&gt;+		versionString = myPVH.getVersionBuildString(true);&lt;br/&gt;
+		att_srvrlslv = prdId + &quot;/&quot; + myPVH.getVersionBuildString(true);&lt;/p&gt;

&lt;p&gt;There are no exception related changes. I tried a find on the editor for the phrases StandardException and EmbedSQLException on the patch. The phrases don&apos;t seem to exist. Or maybe that I am doing something wrong here. I tried twice to recheck the above in the patch.&lt;/p&gt;</comment>
                            <comment id="12433303" author="kmarsden" created="Fri, 8 Sep 2006 04:08:44 +0100"  >&lt;p&gt;My bad, I was diffing with the head of trunk after applying the patch and had not yet  synched up with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1710&quot; title=&quot;Unchecked casts from SQLException to EmbedSQLException cause ClassCastException in NetworkServerControlImpl when running Java SE 6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1710&quot;&gt;&lt;del&gt;DERBY-1710&lt;/del&gt;&lt;/a&gt; so was seeing those differences.&lt;/p&gt;</comment>
                            <comment id="12433435" author="kmarsden" created="Fri, 8 Sep 2006 17:47:10 +0100"  >&lt;p&gt;Hi Narayan, Is there a problem running pointing to the  classes directory instead of jars with the sed files?&lt;br/&gt;
I am getting&lt;br/&gt;
derby.language.statementCacheSize=1000&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: metadata jdk1.4.2_07 DerbyNetClient 2006-09-08 09:45:57 ***&lt;br/&gt;
Initialize for framework: DerbyNetClient&lt;br/&gt;
java -Duser.language=en -Duser.country=US -Dderby.system.home=C:\work\testout\DerbyNetClient\metadata -Djava.security.manager -Djava.security.policy=C:\work\testout\derby_tests.policy -DderbyTesting.c&lt;br/&gt;
odeclasses=&lt;a href=&quot;file:/C:/p4/marsden_patch/classes/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/C:/p4/marsden_patch/classes/&lt;/a&gt; -DderbyTesting.codedir=C:\p4\marsden_patch\classes -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost org.apache.derby.drda.NetworkSe&lt;br/&gt;
rverControl start&lt;br/&gt;
Attempt to shutdown framework: DerbyNetClient&lt;br/&gt;
16 del&lt;br/&gt;
&amp;lt; JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha-(EXPECTED SUBVERSION INFO))&lt;br/&gt;
16a16&lt;br/&gt;
&amp;gt; JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha - (1))&lt;br/&gt;
152 del&lt;br/&gt;
&amp;lt; getDatabaseProductVersion(): 10.3.0.0 alpha-(EXPECTED SUBVERSION INFO)&lt;br/&gt;
153 del&lt;br/&gt;
&amp;lt; getDriverVersion(): 10.3.0.0 alpha-(EXPECTED SUBVERSION INFO)&lt;br/&gt;
153a152,153&lt;br/&gt;
&amp;gt; getDatabaseProductVersion(): 10.3.0.0 alpha - (1)&lt;br/&gt;
&amp;gt; getDriverVersion(): 10.3.0.0 alpha - (1)&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   metadata jdk1.4.2_07 DerbyNetClient 2006-09-08 09:46:40 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12433768" author="narayanan" created="Mon, 11 Sep 2006 06:26:35 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
It passed for me. I have enumerated the details of the settings I use to run the tests below pls point out in case you notice anything wrong in my environment.&lt;/p&gt;

&lt;p&gt;I did the following to point it to the classes directory and run the tests&lt;/p&gt;

&lt;p&gt;My script that sets the classpath has the following&lt;/p&gt;

&lt;p&gt;export CLASSPATH=/home/guest/Narayanan/derby_workspaces/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed/trunk/classes&lt;br/&gt;
:/home/guest/Narayanan/derby_workspaces/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed/trunk/tools/java/jakarta-oro-2.0.8.jar&lt;br/&gt;
:/home/guest/Narayanan/derby_workspaces/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed/trunk/tools/java/junit.jar&lt;br/&gt;
:/home/guest/Narayanan/derby_workspaces/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed/trunk/tools/java/db2jcc.jar&lt;br/&gt;
:/home/guest/Narayanan/derby_workspaces/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed/trunk/tools/java/db2jcc_license_c.jar&lt;/p&gt;

&lt;p&gt;then I ran the tests with the following commands&lt;/p&gt;

&lt;p&gt;java org.apache.derbyTesting.functionTests.harness.RunTest jdbcapi/odbc_metadata.java&lt;br/&gt;
java -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest jdbcapi/odbc_metadata.java&lt;br/&gt;
java -Dframework=DerbyNet org.apache.derbyTesting.functionTests.harness.RunTest jdbcapi/odbc_metadata.java&lt;/p&gt;

&lt;p&gt;doing a java -version gives me the following&lt;/p&gt;

&lt;p&gt;&apos;java version &quot;1.4.2&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2-b28)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 1.4.2-b28, mixed mode)&lt;/p&gt;</comment>
                            <comment id="12434012" author="deepa" created="Tue, 12 Sep 2006 00:00:10 +0100"  >&lt;p&gt;Hi Narayanan,&lt;/p&gt;

&lt;p&gt;I applied your &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed.diff&quot; patch. I am also seeing the same failure seen by Kathey when running jdbcapi/metadata.java with classes folder. I ran the test using Sun JDK 1.4.2 on Windows XP. Wondering what could be different in the environments?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Deepa&lt;/p&gt;</comment>
                            <comment id="12434062" author="narayanan" created="Tue, 12 Sep 2006 06:23:00 +0100"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;If you notice the failure pointed out (i.e.)&lt;/p&gt;

&lt;p&gt;The sed scripts are working fine because the subversion number has been masked as EXPECTED SUBVERSION INFO. This requires a corresponding change in the .out master files so that it would&apos;nt fail on comparison.&lt;/p&gt;

&lt;p&gt;I however notice that in the .out files the text has been changed to &lt;/p&gt;

&lt;p&gt;JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha - (1))&lt;/p&gt;

&lt;p&gt;instead of&lt;/p&gt;

&lt;p&gt;JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha-(EXPECTED SUBVERSION INFO))&lt;/p&gt;

&lt;p&gt;But the patch I submitted seems to contain the expected changes only (i.e.)&lt;/p&gt;

&lt;p&gt;-JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha)&lt;br/&gt;
+JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha-(EXPECTED SUBVERSION INFO))&lt;/p&gt;

&lt;p&gt;when I try to apply the patch to a new workspace it works fine for me. I however have not tried applying this patch in a windows environment.&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12434066" author="narayanan" created="Tue, 12 Sep 2006 06:45:52 +0100"  >&lt;p&gt;I am sorry for my previous comment. I got confused. I am able to reproduce the error u are seeing if I change the sed scripts to the following&lt;/p&gt;

&lt;p&gt;I go the sed scripts and modify them as&lt;/p&gt;

&lt;p&gt;substitute=....&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Z&amp;#93;&lt;/span&gt;.;-(1),version &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;..&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;?&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;?.&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Za-z &amp;#93;&lt;/span&gt;&lt;/b&gt;.$;version (EXPECTED VERSION),version &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;..&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;.&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;.&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;? Test Build.$;version (EXPECTED VERSION),getDriverVersion....&lt;span class=&quot;error&quot;&gt;&amp;#91;2-3&amp;#93;&lt;/span&gt;.*$;getDriverVersion(): EXPECTED VERSION&lt;/p&gt;

&lt;p&gt;If u notice the first regular expression change&lt;/p&gt;

&lt;p&gt;....&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;*&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Z&amp;#93;&lt;/span&gt;.;-(1)&lt;/p&gt;

&lt;p&gt;&amp;#8211; listing properties &amp;#8211;&lt;br/&gt;
derby.language.statementCacheSize=1000&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: metadata jdk1.4.2 DerbyNetClient 2006-09-12 11:15:24 ***&lt;br/&gt;
Initialize for framework: DerbyNetClient&lt;br/&gt;
java -Duser.language=en -Duser.country=US -Dderby.system.home=/home/guest/Narayanan/tests/run1/DerbyNetClient/metadata -Djava.security.manager -Djava.security.policy=/home/guest/Narayanan/tests/run1/derby_tests.policy -DderbyTesting.codeclasses=&lt;a href=&quot;file:/home/guest/Narayanan/derby_workspaces/DERBY-1547-sed-patch-applied/trunk/classes/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/guest/Narayanan/derby_workspaces/DERBY-1547-sed-patch-applied/trunk/classes/&lt;/a&gt; -DderbyTesting.codedir=/home/guest/Narayanan/derby_workspaces/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed-patch-applied/trunk/classes -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost org.apache.derby.drda.NetworkServerControl start&lt;br/&gt;
Attempt to shutdown framework: DerbyNetClient&lt;br/&gt;
16 del&lt;br/&gt;
&amp;lt; JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha-(EXPECTED SUBVERSION INFO))&lt;br/&gt;
16a16&lt;br/&gt;
&amp;gt; JDBC Driver &apos;Apache Derby Network Client JDBC Driver&apos;, version 10.3 (10.3.0.0 alpha-(1))&lt;br/&gt;
152 del&lt;br/&gt;
&amp;lt; getDatabaseProductVersion(): 10.3.0.0 alpha-(EXPECTED SUBVERSION INFO)&lt;br/&gt;
153 del&lt;br/&gt;
&amp;lt; getDriverVersion(): 10.3.0.0 alpha-(EXPECTED SUBVERSION INFO)&lt;br/&gt;
153a152,153&lt;br/&gt;
&amp;gt; getDatabaseProductVersion(): 10.3.0.0 alpha-(1)&lt;br/&gt;
&amp;gt; getDriverVersion(): 10.3.0.0 alpha-(1)&lt;br/&gt;
Test Failed.&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Can you please answer the following questions for me&lt;/p&gt;

&lt;p&gt;1) Is this behaviour observed by you when running only with the classes directory or when running with the jars also?&lt;br/&gt;
2) After applying the patch can you please open the metadata_sed.properties to see if the replacement pattern is (EXPECTED SUBVERSION INFO) or (1)&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12434097" author="narayanan" created="Tue, 12 Sep 2006 10:05:12 +0100"  >&lt;p&gt;thanx for the email Andrew. I will fix this one.&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12434403" author="narayanan" created="Wed, 13 Sep 2006 11:27:41 +0100"  >&lt;p&gt;Attaching patch for the above pointed failure. &lt;/p&gt;

&lt;p&gt;I have overcome the failure by using the using the easiest possible way of a regular expression in _sed.properties. Ran derbyall with the pointing to the classes directory and without running the buildjars ant target so  that svn version will be set as 1. &lt;/p&gt;

&lt;p&gt;parameterMetaDataJdbc30 seemed to fail but it passed when I ran it seperately. &lt;/p&gt;
</comment>
                            <comment id="12434416" author="johnemb" created="Wed, 13 Sep 2006 12:42:09 +0100"  >&lt;p&gt;Narayanan, I was curious about the regular expressions and decided to take a look. I&apos;m wondering, why are you using brackets around single characters? For example in this substitution pattern:&lt;/p&gt;

&lt;p&gt;[ ]&lt;span class=&quot;error&quot;&gt;&amp;#91;-&amp;#93;&lt;/span&gt;[ ]&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;;-(EXPECTED SUBVERSION INFO)&lt;/p&gt;

&lt;p&gt;I&apos;m no regEx guru, but I&apos;m ready to learn more, and understanding (and perhaps improving) this seding seemed like a good way to do that...&lt;/p&gt;

</comment>
                            <comment id="12434419" author="narayanan" created="Wed, 13 Sep 2006 13:05:30 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
Thank you for taking a look at the patch and taking care to watch the regEx patters also. &lt;/p&gt;

&lt;p&gt;The brackets are not necessary. I works without them.&lt;/p&gt;

&lt;p&gt;The regEx was a search for the specific pattern &amp;lt;space&amp;gt;&amp;lt;open parenthesis &amp;gt;&amp;lt;digit 1&amp;gt;&amp;lt;closed parenthesis&amp;gt;&amp;lt;space&amp;gt; (i.e.) the subversion number (1) when you don&apos;t do a buildjars. I thought it looked clearer this way. &lt;/p&gt;

&lt;p&gt;I am not an expert in sed scripts either. Also I agree with the community in that this sed solution is just a filler since this patch has become time critical. &lt;/p&gt;

&lt;p&gt;If you think a better way is to remove the parenthesis or you think a better regular expression should have been in place pls do guide me so. I will do it promptly. &lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;
</comment>
                            <comment id="12434435" author="johnemb" created="Wed, 13 Sep 2006 14:04:05 +0100"  >&lt;p&gt;No problem... since this is a &quot;time critical&quot; fix, and the sed patterns work (I have not tried the patch yet, though), removing the unnecessary brackets should be optional at this point (I just think it looks clearer without the brackets). So don&apos;t let my comment slow down the process to get this fix committed!&lt;/p&gt;

&lt;p&gt;I have not had time to &quot;interpret&quot; the other patterns fully yet, since I do not know exactly which strings they are supposed to match, and I have other things on my to-do list. But when/if I do, I&apos;ll let the community know if I find anything worth mentioning. Thanks for making the patch!&lt;/p&gt;</comment>
                            <comment id="12435003" author="johnemb" created="Fri, 15 Sep 2006 16:05:23 +0100"  >&lt;p&gt;I looked a bit closer at some of the substitution patterns in the latest patch, &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;-sed-v1.diff &apos;, and my conclusion is that they most likely will match &lt;em&gt;most&lt;/em&gt; of the expected strings (there is one issue I think will cause problems, see below), but that they will also match strings that are potentially very different from an SVN revision number. &lt;/p&gt;

&lt;p&gt;I don&apos;t think this is a major issue, but having as restrictive regular expressions as possible will reduce the chance of unintentionally masking regressions in this area. Perhaps there is not much chance of regressions in version strings like this, but I thought I&apos;d report my findings anyway.&lt;/p&gt;

&lt;p&gt;I have mostly examined patterns related to jdbcapi/metadata.java, but patterns for other tests look very similar.&lt;/p&gt;

&lt;p&gt;I&apos;ve based most of my RegEx interpretations on explanations provided on this website:&lt;br/&gt;
&lt;a href=&quot;http://www.regular-expressions.info/quickstart.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.regular-expressions.info/quickstart.html&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Issues that should be fixed before committing:&lt;br/&gt;
====================================&lt;/p&gt;

&lt;p&gt;The new pattern that I think needs to be changed is:&lt;/p&gt;

&lt;p&gt;....&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;*&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Z&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;This will match the SVN rev 446536M, but not 446536. As far as I know, the M means that a modified version (i.e. uncommitted changes) is being used. Tests of unmodified versions of Derby will not include the M in the SVN revision number, and the test will fail. Please correct me if I am wrong.&lt;/p&gt;

&lt;p&gt;For this reason, I think the above pattern should be changed to the following:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;/p&gt;
{5,}&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Z&amp;#93;&lt;/span&gt;?&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;br/&gt;
This also incorporates other changes, which are described further below. Perhaps even &lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;{5,}
&lt;p&gt;M?&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt; will match in all cases, but I&apos;m not entirely sure (SVN gurus will have to confirm or deny). The &quot;&lt;/p&gt;
{5,}&quot; means &quot;5 or more repetitions of the preceding token&quot;.&lt;br/&gt;
&lt;br/&gt;
The patch includes this pattern in the following files:&lt;br/&gt;
    jdbcapi/dbMetaDataJdbc30_sed.properties&lt;br/&gt;
    jdbcapi/odbc_metadata_sed.properties&lt;br/&gt;
    jdbcapi/metadata_sed.properties&lt;br/&gt;
&lt;br/&gt;
A similar pattern, only with an extra &quot;dot&quot; at the end, is included in&lt;br/&gt;
    derbynet/NSinSameJVM_sed.properties&lt;br/&gt;
    derbynet/testProperties_sed.properties&lt;br/&gt;
&lt;br/&gt;
These derbynet patterns should be changed the same way as the jdbcapi patterns, provided my reasoning above is correct. Also, the extra &quot;dot&quot; does not seems to make much of a difference. Why is it there? I think if the trailing space in the replacement string (&quot;-(EXPECTED SUBVERSION INFO) &quot;) is removed, then the extra &quot;dot&quot; can be removed too.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Minor issues (the patch may be committed without fixing them):&lt;br/&gt;
===========================================&lt;br/&gt;
&lt;br/&gt;
* Some of the new replacement strings modify more of the output than just the SVN revision number. I think only the revision number should be replaced. For example, the output&lt;br/&gt;
&lt;br/&gt;
version 10.3 (10.3.0.0 alpha - (446536M))&lt;br/&gt;
&lt;br/&gt;
will end up as&lt;br/&gt;
&lt;br/&gt;
version 10.3 (10.3.0.0 alpha-(EXPECTED SUBVERSION INFO))&lt;br/&gt;
&lt;br/&gt;
I think it would be better to have it like this:&lt;br/&gt;
&lt;br/&gt;
version 10.3 (10.3.0.0 alpha - (EXPECTED SUBVERSION INFO))&lt;br/&gt;
&lt;br/&gt;
or perhaps like this:&lt;br/&gt;
&lt;br/&gt;
version 10.3 (10.3.0.0 alpha - (xxxxxxFILTERED-SVN-REVISIONxxxxx))&lt;br/&gt;
&lt;br/&gt;
(the latter makes it more clear that something has been filtered out).&lt;br/&gt;
The following pattern will do that, I believe:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;{5,}
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Z&amp;#93;&lt;/span&gt;?&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;;(xxxxxxFILTERED-SVN-REVISIONxxxxx)&lt;/p&gt;


&lt;p&gt;Other comments:&lt;/p&gt;

&lt;p&gt;New patterns added by the patch:&lt;br/&gt;
------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;The new patterns are supposed to match subversion revision numbers. For example, the regEx&lt;/p&gt;

&lt;p&gt;....&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;*&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Z&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;will match the revision number in the string&lt;/p&gt;

&lt;p&gt;version 10.3 (10.3.0.0 alpha - (446536M))&lt;/p&gt;

&lt;p&gt;This is OK, but a bit too liberal. The &quot;dot&quot; (.) in a Java regEx matches almost any character, unless it is inside a character class, []. This, and the use of the * character, means that the regEx will also match the following string:&lt;/p&gt;

&lt;p&gt;version FAIL99999999999999999999999999AA&lt;/p&gt;


&lt;p&gt;Existing patterns (not changed by the patch):&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
It seems to me that the existing patterns for the tests touched by this patch are supposed to match JCC versions when running in the DerbyNet framework. For example, the regEx&lt;/p&gt;

&lt;p&gt;version &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;..&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;.&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;?&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;?.&lt;span class=&quot;error&quot;&gt;&amp;#91;A-Za-z &amp;#93;&lt;/span&gt;*.$&lt;/p&gt;

&lt;p&gt;will match the string&lt;/p&gt;

&lt;p&gt;version 2.4 (2.4.17)&lt;/p&gt;

&lt;p&gt;This is OK, but a bit too liberal. The &quot;dot&quot; (.) in a Java regEx matches almost any character, unless it is inside a character class, []. This, and the use of the * character, means that the regEx will also match the following string:&lt;/p&gt;

&lt;p&gt;version 0.0 v9.9.9-someInvalidVersionString&lt;/p&gt;


&lt;p&gt;Perhaps the patterns (i.e., the minor issues) should be changed, but I think it would be more useful to spend time converting such tests to JUnit tests instead of tweaking the sed patterns (I&apos;m not saying I volunteer to do that at this point in time, though). If anyone disagrees, I can create a new Jira issue for improving these substitution patterns.&lt;/p&gt;
</comment>
                            <comment id="12435064" author="fuzzylogic" created="Fri, 15 Sep 2006 18:49:23 +0100"  >&lt;p&gt;Since svn versions can be of the form &lt;/p&gt;
{rev} or {rev}
&lt;p&gt;:&lt;/p&gt;
{rev}
&lt;p&gt; where rev is an integer, and the M may or may not be attached, I think the following regex should match all possible values in context, allowing for only one regex to be added instead of two:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;+:&lt;b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;*M&lt;/b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And yes, the other ones could use improvement, but that&apos;s outside the scope of this issue.&lt;/p&gt;</comment>
                            <comment id="12435247" author="johnemb" created="Sat, 16 Sep 2006 17:52:56 +0100"  >&lt;p&gt;&amp;gt; Andrew McIntyre commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1547&quot; title=&quot;Add svn version  number to DatabaseMetaData getDatabaseProductVersion and getDriverVersion()  to improve supportability&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1547&quot;&gt;&lt;del&gt;DERBY-1547&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
&amp;gt; ----------------------------------------&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Since svn versions can be of the form &lt;/p&gt;
{rev} or {rev}
&lt;p&gt;:&lt;/p&gt;
{rev}
&lt;p&gt; where rev is an integer, and the M may or may not be attached, I think the following regex should match all possible values in context, allowing for only one regex to be added instead of two:&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  - &lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;+:&lt;b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;*M&lt;/b&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Thanks, this is great to know. Good suggestion to combine the to patterns to one. I have only one comment:&lt;br/&gt;
Any reason why we should use * instead of ? for the optional characters that will (as I understand it) occur maximum once, specifically : and M?&lt;/p&gt;</comment>
                            <comment id="12435259" author="fuzzylogic" created="Sat, 16 Sep 2006 19:54:44 +0100"  >&lt;p&gt;Bad habits die hard. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Good point, John, &apos; - &lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;+:?&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;*M?&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;&apos;  is more specific to the pattern we are trying to match, since we know the colon and M should only appear once, if at all. So, better to use the question marks than to overuse the asterisk.&lt;/p&gt;</comment>
                            <comment id="12435448" author="narayanan" created="Mon, 18 Sep 2006 11:00:59 +0100"  >&lt;p&gt;Thanx a ton for reviews and comments on the patch. Pls accept my apologies for the late response. Attaching the patch with proposed changes. &lt;/p&gt;

&lt;p&gt;Thanx once again,&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12435458" author="johnemb" created="Mon, 18 Sep 2006 11:56:12 +0100"  >&lt;p&gt;Thanks for uploading a new patch so quickly, Narayanan! &lt;/p&gt;

&lt;p&gt;The only comment I have from reading the diff is that you seem to have missed one of Andrew&apos;s points, namely the fact that the new regEx pattern will actually replace two old patterns. Specifically, this means that all instances of the &quot;[ ]&lt;span class=&quot;error&quot;&gt;&amp;#91;-&amp;#93;&lt;/span&gt;[ ]&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;)&amp;#93;&lt;/span&gt;;-(EXPECTED SUBVERSION INFO)&quot; substitution may be removed from the patch, and it should still work, both when running with jars and when running with the classes directory in the classpath.&lt;/p&gt;</comment>
                            <comment id="12435460" author="narayanan" created="Mon, 18 Sep 2006 12:03:22 +0100"  >&lt;p&gt;Thanx a ton for pointing it out john! sorry! will do and post it! &lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12435852" author="narayanan" created="Tue, 19 Sep 2006 16:03:31 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
Have made changes to the sed files and uploading with the same. Ran derbyall without failures.&lt;/p&gt;

&lt;p&gt;thanx&lt;br/&gt;
Narayanan&lt;/p&gt;</comment>
                            <comment id="12435943" author="fuzzylogic" created="Tue, 19 Sep 2006 18:33:24 +0100"  >&lt;p&gt;Committed sed_v3 patch to trunk with revision 447922. Leaving open until merged to 10.2. Thanks for the patch Narayanan!&lt;/p&gt;</comment>
                            <comment id="12436030" author="mikem" created="Tue, 19 Sep 2006 23:25:02 +0100"  >&lt;p&gt;It looks like the tinderbox runs caught a few problems with the version change sed stuff:&lt;br/&gt;
&lt;a href=&quot;http://www.multinet.no/~solberg/public/Apache/TinderBox_Derby/testlog/SunOS-5.10_i86pc-i386/447926-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.multinet.no/~solberg/public/Apache/TinderBox_Derby/testlog/SunOS-5.10_i86pc-i386/447926-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Failure Details:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetmats/DerbyNet/derbynetmats/NSinSameJVM.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: NSinSameJVM jdk1.5.0_04 DerbyNet derbynetmats:derbynetmats 2006-09-19 21:04:33 ***&lt;br/&gt;
2 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  started and ready to accept connections on port 20000 at xxxxxxFILTERED-TIMESTAMPxxxxxGMT &lt;br/&gt;
2a2&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) started and ready to accept connections on port 20000 at xxxxxxFILTERED-TIMESTAMPxxxxxGMT &lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
6 add&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   NSinSameJVM jdk1.5.0_04 DerbyNet derbynetmats:derbynetmats 2006-09-19 21:04:44 ***
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetmats/DerbyNet/derbynetmats/testProperties.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: testProperties jdk1.5.0_04 DerbyNet derbynetmats:derbynetmats 2006-09-19 21:08:53 ***&lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
6a6&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
11 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
11a11&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
16 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
16a16&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
20 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
20a20&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
61 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
61a61&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   testProperties jdk1.5.0_04 DerbyNet derbynetmats:derbynetmats 2006-09-19 21:09:12 ***
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetmats/DerbyNet/derbynetmats/updatableResultSet.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetclientmats/DerbyNetClient/derbynetmats/derbynetmats/NSinSameJVM.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: NSinSameJVM jdk1.5.0_04 DerbyNetClient derbynetmats:derbynetmats 2006-09-19 22:28:01 ***&lt;br/&gt;
2 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  started and ready to accept connections on port 20000 at xxxxxxFILTERED-TIMESTAMPxxxxxGMT &lt;br/&gt;
2a2&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) started and ready to accept connections on port 20000 at xxxxxxFILTERED-TIMESTAMPxxxxxGMT &lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
6 add&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   NSinSameJVM jdk1.5.0_04 DerbyNetClient derbynetmats:derbynetmats 2006-09-19 22:28:14 ***
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetclientmats/DerbyNetClient/derbynetmats/derbynetmats/testProperties.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: testProperties jdk1.5.0_04 DerbyNetClient derbynetmats:derbynetmats 2006-09-19 22:32:34 ***&lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
6a6&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
11 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
11a11&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
16 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
16a16&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
20 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
20a20&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
61 del&lt;br/&gt;
&amp;lt; Apache Derby Network Server - 10.3.0.0 alpha -(EXPECTED SUBVERSION INFO)  shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
61a61&lt;br/&gt;
&amp;gt; Apache Derby Network Server - 10.3.0.0 alpha - (447926) shutdown at xxxxxxFILTERED-TIMESTAMPxxxxxGMT&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   testProperties jdk1.5.0_04 DerbyNetClient derbynetmats:derbynetmats 2006-09-19 22:32:54 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12436038" author="fuzzylogic" created="Tue, 19 Sep 2006 23:40:57 +0100"  >&lt;p&gt;Missed two files on the checkin. Committed with revision 448003.&lt;/p&gt;</comment>
                            <comment id="12436117" author="narayanan" created="Wed, 20 Sep 2006 06:16:51 +0100"  >&lt;p&gt;Thanx for the commit Andrew!!! Thanx for the guidance and reviews Everyone!!!&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12439758" author="johnemb" created="Wed, 4 Oct 2006 08:59:21 +0100"  >&lt;p&gt;When using the &quot;primary&quot; 10.2.1.6 release (i.e. the -src distribution, built by the user), 12 tests in derbyall fail because we forgot to have the seding patterns (added for this Jira issue) to also match the word &quot;exported&quot; instead of the SVN revision number:&lt;/p&gt;

&lt;p&gt;derbyall/derbyall.fail:jdbcapi/metadata.java&lt;br/&gt;
derbyall/derbyall.fail:jdbcapi/odbc_metadata.java&lt;br/&gt;
derbyall/derbyall.fail:jdbcapi/dbMetaDataJdbc30.java&lt;br/&gt;
derbyall/derbynetmats/derbynetmats.fail:derbynet/NSinSameJVM.java&lt;br/&gt;
derbyall/derbynetmats/derbynetmats.fail:derbynet/testProperties.java&lt;br/&gt;
derbyall/derbynetmats/derbynetmats.fail:jdbcapi/metadata.java&lt;br/&gt;
derbyall/derbynetmats/derbynetmats.fail:jdbcapi/odbc_metadata.java&lt;br/&gt;
derbyall/derbynetclientmats/derbynetmats.fail:derbynet/NSinSameJVM.java&lt;br/&gt;
derbyall/derbynetclientmats/derbynetmats.fail:derbynet/testProperties.java&lt;br/&gt;
derbyall/derbynetclientmats/derbynetmats.fail:jdbcapi/metadata.java&lt;br/&gt;
derbyall/derbynetclientmats/derbynetmats.fail:jdbcapi/odbc_metadata.java&lt;br/&gt;
derbyall/derbynetclientmats/derbynetmats.fail:jdbcapi/dbMetaDataJdbc30.java&lt;/p&gt;


&lt;p&gt;Example diff:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbylang/metadata.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: metadata jdk1.6.0-rc derbyall:derbylang 2006-10-03 16:40:26 ***&lt;br/&gt;
16 del&lt;br/&gt;
&amp;lt; JDBC Driver &apos;Apache Derby Embedded JDBC Driver&apos;, version 10.2 (10.2.1.6 -(EXPECTED SUBVERSION INFO))&lt;br/&gt;
16a16&lt;br/&gt;
&amp;gt; JDBC Driver &apos;Apache Derby Embedded JDBC Driver&apos;, version 10.2 (10.2.1.6 - (exported))&lt;br/&gt;
152 del&lt;br/&gt;
&amp;lt; getDatabaseProductVersion(): 10.2.1.6 -(EXPECTED SUBVERSION INFO)&lt;br/&gt;
153 del&lt;br/&gt;
&amp;lt; getDriverVersion(): 10.2.1.6 -(EXPECTED SUBVERSION INFO)&lt;br/&gt;
153a152,153&lt;br/&gt;
&amp;gt; getDatabaseProductVersion(): 10.2.1.6 - (exported)&lt;br/&gt;
&amp;gt; getDriverVersion(): 10.2.1.6 - (exported)&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   metadata jdk1.6.0-rc derbyall:derbylang 2006-10-03 16:40:40 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is clearly not important to fix for the current (10.2.1.6) RC, but we should try to fix it before the next release or RC.&lt;/p&gt;</comment>
                            <comment id="12439787" author="narayanan" created="Wed, 4 Oct 2006 11:11:52 +0100"  >&lt;p&gt;Thanx for pointing this out john. I will generate a patch for this.&lt;/p&gt;</comment>
                            <comment id="12498069" author="myrna" created="Wed, 23 May 2007 02:08:20 +0100"  >&lt;p&gt;Apart from the issue reported  last it appears this bug was fixed in 10.2.1.6.&lt;br/&gt;
Even the last issue must&apos;ve gotten fixed at some point because we don&apos;t see that failure anymore. As there&apos;s no further disucssion of that fix here I&apos;m disregarding that for the fix version for this bug &amp;amp; adding 10.2.1.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12340721" name="DERBY-1547-sed-v1.diff" size="21578" author="narayanan" created="Wed, 13 Sep 2006 11:27:41 +0100"/>
                            <attachment id="12340722" name="DERBY-1547-sed-v1.stat" size="1876" author="narayanan" created="Wed, 13 Sep 2006 11:27:41 +0100"/>
                            <attachment id="12341037" name="DERBY-1547-sed-v2.diff" size="21466" author="narayanan" created="Mon, 18 Sep 2006 11:00:59 +0100"/>
                            <attachment id="12341038" name="DERBY-1547-sed-v2.stat" size="1876" author="narayanan" created="Mon, 18 Sep 2006 11:00:59 +0100"/>
                            <attachment id="12341127" name="DERBY-1547-sed-v3.diff" size="21264" author="narayanan" created="Tue, 19 Sep 2006 16:03:31 +0100"/>
                            <attachment id="12341128" name="DERBY-1547-sed-v3.stat" size="1876" author="narayanan" created="Tue, 19 Sep 2006 16:03:31 +0100"/>
                            <attachment id="12340266" name="DERBY-1547-sed.diff" size="21343" author="narayanan" created="Wed, 6 Sep 2006 15:26:10 +0100"/>
                            <attachment id="12340267" name="DERBY-1547-sed.stat" size="1876" author="narayanan" created="Wed, 6 Sep 2006 15:26:10 +0100"/>
                            <attachment id="12338603" name="DERBY-1547_v1.diff" size="8658" author="narayanan" created="Thu, 10 Aug 2006 16:45:31 +0100"/>
                            <attachment id="12338604" name="DERBY-1547_v1.stat" size="793" author="narayanan" created="Thu, 10 Aug 2006 16:45:31 +0100"/>
                            <attachment id="12340355" name="derbyall_fail.txt" size="131" author="narayanan" created="Thu, 7 Sep 2006 12:03:33 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Aug 2006 04:58:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ug7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>