<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:25:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1729/DERBY-1729.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1729] Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1729</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In Derby SQL authorization mode, invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL from a  trigger should fail but in the following test, it successfully executed the trigger action.  &lt;br/&gt;
Attaching repro patch for trunk.&lt;/p&gt;

&lt;p&gt;i.e.:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; connect &apos;triggerProcSQLAuth;create=true&apos; user &apos;APP&apos; as app;&lt;br/&gt;
WARNING 01J14: SQL authorization is being used without first enabling authentication.&lt;br/&gt;
ij&amp;gt; &amp;#8212; setup the environment&lt;br/&gt;
&amp;#8212; table used in the procedures&lt;br/&gt;
create table t1 (i int primary key, b char(15));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t1 values (1, &apos;XYZ&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t1 values (2, &apos;XYZ&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8212; table used in this test&lt;br/&gt;
create table t2 (x integer, y integer);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create procedure grant_select_proc() &lt;br/&gt;
       parameter style java&lt;br/&gt;
       dynamic result sets 0 language java &lt;br/&gt;
       contains sql&lt;br/&gt;
       external name &apos;org.apache.derbyTesting.functionTests.util.ProcedureTest.grantSelect&apos;;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create procedure revoke_select_proc() &lt;br/&gt;
       parameter style java&lt;br/&gt;
       dynamic result sets 0 language java &lt;br/&gt;
       contains sql&lt;br/&gt;
       external name &apos;org.apache.derbyTesting.functionTests.util.ProcedureTest.revokeSelect&apos;;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8212; tests&lt;br/&gt;
create trigger grant_select_trig AFTER delete on t1 &lt;br/&gt;
	for each STATEMENT mode db2sql call grant_select_proc();&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8212; should fail&lt;br/&gt;
delete from t1 where i = 1;&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8212; check delete failed&lt;br/&gt;
select * from t1;&lt;br/&gt;
I          |B              &lt;br/&gt;
---------------------------&lt;br/&gt;
2          |XYZ            &lt;br/&gt;
1 row selected&lt;br/&gt;
ij&amp;gt; &amp;#8212; check if there are rows in sys.systableperms, should be 0&lt;br/&gt;
select count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from SYS.SYSTABLEPERMS;&lt;br/&gt;
1          &lt;br/&gt;
-----------&lt;br/&gt;
1          &lt;br/&gt;
1 row selected&lt;br/&gt;
ij&amp;gt; drop trigger grant_select_trig;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
	for each STATEMENT mode db2sql call revoke_select_proc();&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8212; should fail&lt;br/&gt;
delete from t1 where i = 2;&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &amp;#8212; check delete failed&lt;br/&gt;
select * from t1;&lt;br/&gt;
I          |B              &lt;br/&gt;
---------------------------&lt;br/&gt;
0 rows selected&lt;br/&gt;
ij&amp;gt; &amp;#8212; check if there are rows in sys.systableperms, should be 0&lt;br/&gt;
select count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from SYS.SYSTABLEPERMS;&lt;br/&gt;
1          &lt;br/&gt;
-----------&lt;br/&gt;
0          &lt;br/&gt;
1 row selected&lt;br/&gt;
ij&amp;gt; drop trigger revoke_select_trig;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; &lt;/p&gt;


&lt;p&gt;------------------ Java Information ------------------&lt;br/&gt;
Java Version:    1.4.2_12&lt;br/&gt;
Java Vendor:     Sun Microsystems Inc.&lt;br/&gt;
Java home:       C:\Program Files\Java\j2re1.4.2_12&lt;br/&gt;
Java classpath:  derby.jar;derbytools.jar&lt;br/&gt;
OS name:         Windows XP&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version:      5.1&lt;br/&gt;
Java user name:  Yip&lt;br/&gt;
Java user home:  C:\Documents and Settings\Yip&lt;br/&gt;
Java user dir:   C:\work3\derby\trunk\jars\sane&lt;br/&gt;
java.specification.name: Java Platform API Specification&lt;br/&gt;
java.specification.version: 1.4&lt;br/&gt;
--------- Derby Information --------&lt;br/&gt;
JRE - JDBC: J2SE 1.4.2 - JDBC 3.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\work3\derby\trunk\jars\sane\derby.jar&amp;#93;&lt;/span&gt; 10.3.0.0 alpha - (432670M)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\work3\derby\trunk\jars\sane\derbytools.jar&amp;#93;&lt;/span&gt; 10.3.0.0 alpha - (432670M)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
----------------- Locale Information -----------------&lt;br/&gt;
Current Locale :  [English/United States &lt;span class=&quot;error&quot;&gt;&amp;#91;en_US&amp;#93;&lt;/span&gt;]&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;de_DE&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;es&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;fr&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;it&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;ja_JP&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;ko_KR&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;pt_BR&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_CN&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_TW&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.3.0.0 alpha - (432670M)&lt;br/&gt;
------------------------------------------------------&lt;/p&gt;</description>
                <environment>Sun JDK 1.4.2</environment>
        <key id="12348251">DERBY-1729</key>
            <summary>Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yipng">Yip Ng</assignee>
                                    <reporter username="yipng">Yip Ng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Aug 2006 22:41:11 +0100</created>
                <updated>Thu, 13 Dec 2007 09:05:11 +0000</updated>
                            <resolved>Mon, 18 Sep 2006 17:51:31 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12429169" author="bandaram" created="Sat, 19 Aug 2006 02:31:47 +0100"  >&lt;p&gt;Hmm... I have to think about this some more, but not sure why the trigger should fail.&lt;/p&gt;</comment>
                            <comment id="12429171" author="yipng" created="Sat, 19 Aug 2006 03:14:40 +0100"  >&lt;p&gt;Hmm... shouldn&apos;t it?  GRANT and REVOKE performs modification to the database and the above Java stored procedure  grant_select_proc is declared with only CONTAINS SQL.&lt;/p&gt;</comment>
                            <comment id="12429173" author="bandaram" created="Sat, 19 Aug 2006 04:10:38 +0100"  >&lt;p&gt;Hmm... Correct. It should fail. Guess just invoking the procedure itself (outside a trigger) should fail. I was thinking about the link to trigger and GRANT statement. The problem is that procedure should always fail. Another missed negative test in the code.&lt;/p&gt;</comment>
                            <comment id="12432213" author="djd" created="Fri, 1 Sep 2006 20:33:37 +0100"  >&lt;p&gt;For the record: SQL standard 2003&lt;/p&gt;

&lt;p&gt;4.33.2.1 lists grant and revoke as SQL-schema statements&lt;/p&gt;

&lt;p&gt;4.33.3 defines SQL-schema statements as those that possibly modify SQL-data&lt;/p&gt;

&lt;p&gt;Thus GRANT/REVOKE within a procedure requires that MODIFIES SQL DATA.&lt;/p&gt;</comment>
                            <comment id="12432215" author="djd" created="Fri, 1 Sep 2006 20:48:32 +0100"  >&lt;p&gt;I think this is because the GrantNode and RevokeNode should extend DDLStatementNode and not MiscellaneousStatementNode.&lt;/p&gt;</comment>
                            <comment id="12432444" author="yipng" created="Mon, 4 Sep 2006 08:49:47 +0100"  >&lt;p&gt;Yes, the GrantNode and RevokeNode should have derived from DDLStatementNode instead of MiscellaneousStatementNode.  Subclassing DDLStatementNode will generate a call to GenericResultSetFactory&apos;s getDDLResultSet() in the activation class and invokes the GenericAuthorizer&apos;s&lt;br/&gt;
authorize() method with the proper parameters to enforce the correct semantics.&lt;/p&gt;

&lt;p&gt;public ResultSet getDDLResultSet (Activation activation) throws StandardException&lt;/p&gt;
{
	getAuthorizer(activation).authorize(activation, Authorizer.SQL_DDL_OP);
	return getMiscResultSet( activation);
}</comment>
                            <comment id="12432539" author="yipng" created="Mon, 4 Sep 2006 20:12:50 +0100"  >&lt;p&gt;Attaching patch derby1729-trunk-diff01.txt for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1729&quot; title=&quot;Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1729&quot;&gt;&lt;del&gt;DERBY-1729&lt;/del&gt;&lt;/a&gt;.  This patch applies what I stated on my previous comment + additional sql file for derbylang.  The reason I didn&apos;t include this in grantRevokeDDL.sql is because of name collision and this testcase is one of the many additonal grant/revoke tests that I wrote and I&apos;ll like to append the rest of those testcases to this file(grantRevokeDDL2.sql) when I submit my patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1736&quot; title=&quot;Additonal Grant and Revoke tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1736&quot;&gt;&lt;del&gt;DERBY-1736&lt;/del&gt;&lt;/a&gt;. Running derbyall now, please review.&lt;/p&gt;</comment>
                            <comment id="12432552" author="yipng" created="Tue, 5 Sep 2006 00:24:44 +0100"  >&lt;p&gt;derbyall passes.&lt;/p&gt;</comment>
                            <comment id="12432760" author="mamtas" created="Wed, 6 Sep 2006 07:17:54 +0100"  >&lt;p&gt;Yip, I am still reviewing the patch. The engine code changes look good. But grantRevokeDDL2.sql has following&lt;br/&gt;
+connect &apos;grantRevokeDDL2;create=true&apos; user &apos;user1&apos; as user1;&lt;br/&gt;
+connect &apos;grantRevokeDDL2;create=true&apos; user &apos;user1&apos; as user3;&lt;br/&gt;
+connect &apos;grantRevokeDDL2;create=true&apos; user &apos;user1&apos; as user3;&lt;br/&gt;
+&lt;/p&gt;

&lt;p&gt;Did you intend to have same user name &quot;as user3&quot; for last 2 connections?&lt;/p&gt;</comment>
                            <comment id="12432767" author="mamtas" created="Wed, 6 Sep 2006 07:48:01 +0100"  >&lt;p&gt;Yip, I just finished reviewing the patch fully. &lt;/p&gt;

&lt;p&gt;Further looking at the test, it seems like you were planning on creating another connection with user name as user2 and have the procedures grant and revoke privileges from that user. &lt;/p&gt;

&lt;p&gt;Some feedback on the test code changes&lt;br/&gt;
1)Have a connection with user2 and test in the code that user2 can look at user1.t1 only after successful execution of grant_select_proc4() through the trigger code. Next, test that user2 can&apos;t look at user1.t1 anymore after successful execution of revoke_select_proc4()  through the trigger code.&lt;/p&gt;

&lt;p&gt;2)Some comments in the test code will be useful, explaining why 6 out of 8 procedure invocatiions from trigger will fail. It makes sense in the mind frame of this jira entry but it will be beneficial for future new users of this test to know what exactly the test is testing w/o having to go through &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1729&quot; title=&quot;Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1729&quot;&gt;&lt;del&gt;DERBY-1729&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;3)Comments in the test code explaining why we are checking SYSTABLEPERMS will be useful ie a row in SYSTABLEPERMS after delete means that grant statement inside the procedure worked correctly and user2 now has the SELECT privileges on user1.t1 Also, comment saying that the row in SYSTABLEPERMS should disappear after successful run of procedure with revoke statement in it.&lt;/p&gt;

&lt;p&gt;And finally, I think we should consider changing the description of this jira entry to remove excess information about triggers. Like Satheesh mentioned, procedure failure is not related to invocation from trigger. This would happen with stand alone procedures too.&lt;/p&gt;
</comment>
                            <comment id="12432840" author="djd" created="Wed, 6 Sep 2006 14:14:52 +0100"  >&lt;p&gt;Mamta wrote:&lt;/p&gt;

&lt;p&gt;&quot;3)Comments in the test code explaining why we are checking SYSTABLEPERMS will be useful ie a row in SYSTABLEPERMS after delete means that grant statement inside the procedure worked correctly and user2 now has the SELECT privileges on user1.t1 Also, comment saying that the row in SYSTABLEPERMS should disappear after successful run of procedure with revoke statement in it. &quot;&lt;/p&gt;

&lt;p&gt;Why use SYSTABLEPERMS  as the test mechanism, this is an indirect test of the expected behaviour? Why not perform the actual test of seeing if the user can or cannot access the table etc, along with checking the expected successful or exception thrown by the procedure?&lt;/p&gt;</comment>
                            <comment id="12432898" author="yipng" created="Wed, 6 Sep 2006 17:45:16 +0100"  >&lt;p&gt;Thanks Mamta and Dan for your comments, I&apos;ll update the testcase and resubmit the patch with your suggestions.&lt;/p&gt;</comment>
                            <comment id="12432907" author="yipng" created="Wed, 6 Sep 2006 18:33:14 +0100"  >&lt;p&gt;Attaching derby1729-trunk-diff02.txt to addresses Mamta and Dan&apos;s suggestions on the testcase.  Please review.&lt;/p&gt;</comment>
                            <comment id="12432936" author="mamtas" created="Wed, 6 Sep 2006 19:58:12 +0100"  >&lt;p&gt;Yip, I see that test changes still have the SYSTABLEPERMS checks to see if the test is behaving as expected. I think we should remove it especially now that we check the test validity by connecting as user2 and checking select privilege on user1.t1&lt;/p&gt;

&lt;p&gt;Also, I wondered if you could address &quot;Some comments in the test code will be useful, explaining why 6 out of 8 procedure invocatiions from trigger will fail. It makes sense in the mind frame of this jira entry but it will be beneficial for future new users of this test to know what exactly the test is testing w/o having to go through &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1729&quot; title=&quot;Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1729&quot;&gt;&lt;del&gt;DERBY-1729&lt;/del&gt;&lt;/a&gt;. &quot;? I do see an overall comment at the beginning of the test saying grant or revoke require MODIFIES SQL DATA, which is great, but a little more comments within the test explaining the reasons behind why something should fail or pass would be very nice.&lt;/p&gt;
</comment>
                            <comment id="12432948" author="yipng" created="Wed, 6 Sep 2006 20:42:59 +0100"  >&lt;p&gt;Attaching derby1729-trunk-diff03.txt, add additional test comment + removing the sys.systableperms check since now we check the permission directly from another user connection.&lt;/p&gt;
</comment>
                            <comment id="12432959" author="mamtas" created="Wed, 6 Sep 2006 21:37:21 +0100"  >&lt;p&gt;Yip, the changes look fine. +1 for commit&lt;/p&gt;</comment>
                            <comment id="12433001" author="mikem" created="Thu, 7 Sep 2006 01:03:06 +0100"  >&lt;p&gt;I am going to run tests and look at committing this patch.  If anyone else plans on reviewing the latest patch let me know - for this work I am counting on the review of others, but will verify that patch passes full set of tests before committing. &lt;/p&gt;</comment>
                            <comment id="12433166" author="mikem" created="Thu, 7 Sep 2006 17:53:11 +0100"  >&lt;p&gt;committed derby1729-trunk-diff03.txt patch to the trunk.  Ran full set of tests successfully on XP, sun 1.4.2 jvm.  &lt;/p&gt;

&lt;p&gt;m1_142:20&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\sql\compile\GrantNode.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\impl\sql\compile\RevokeNode.java&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\master\grantRevokeDDL2.out&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\suites\derbylang.runall&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\tests\lang\grantRevokeDDL2.sql&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\tests\lang\grantRevokeDDL2_app.properties&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\tests\lang\grantRevokeDDL2_sed.properties&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\util\ProcedureTest.java&lt;br/&gt;
Transmitting file data ........&lt;br/&gt;
Committed revision 441140.&lt;/p&gt;</comment>
                            <comment id="12433434" author="mikem" created="Fri, 8 Sep 2006 17:46:18 +0100"  >&lt;p&gt;The nightly tests at:&lt;br/&gt;
&lt;a href=&quot;http://www.multinet.no/~solberg/public/Apache/DerbyJDK16/testlog/JDK16Jvm1.6SunOS-5.10_i86pc-i386/441155-derbylang_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.multinet.no/~solberg/public/Apache/DerbyJDK16/testlog/JDK16Jvm1.6SunOS-5.10_i86pc-i386/441155-derbylang_diff.txt&lt;/a&gt;&lt;br/&gt;
Failed in the new regression test added here.  I have included the diff below.  I never saw the diff and it has passed in a number of environments since checked in.  It may be 1.6 specific or environment specific .  Let me know if it should be treated as a &lt;br/&gt;
separate issue.&lt;/p&gt;

&lt;p&gt;Failure Details:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbylang/derbylang/grantRevokeDDL2.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: grantRevokeDDL2 jdk1.6.0-rc derbylang:derbylang 2006-09-07 20:28:40 ***&lt;br/&gt;
98d97&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
118d116&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
138d135&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
179d175&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
202d197&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
225d219&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   grantRevokeDDL2 jdk1.6.0-rc derbylang:derbylang 2006-09-07 20:28:46 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12433937" author="yipng" created="Mon, 11 Sep 2006 20:03:42 +0100"  >&lt;p&gt;It looks like this is something specific to jdk16.  If I run the same grantRevokeDDL2.sql test&lt;br/&gt;
on jdk142, I don&apos;t see any diffs.  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: grantRevokeDDL2 jdk1.6.0-beta2 2006-09-11 11:59:36 ***&lt;br/&gt;
98d97&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
118d116&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
138d135&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
179d175&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
202d197&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
225d219&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   grantRevokeDDL2 jdk1.6.0-beta2 2006-09-11 11:59:49 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12433940" author="deepa" created="Mon, 11 Sep 2006 20:18:16 +0100"  >&lt;p&gt;This is an issue with exception handling in jdk16. Reported as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1629&quot; title=&quot;Exceptions thrown by code in procedures or triggers are not handled/thrown correctly by Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1629&quot;&gt;&lt;del&gt;DERBY-1629&lt;/del&gt;&lt;/a&gt;. To temporarily resolve the regression test failure, we can add a new master file for jdk16. This was what was done for procedureInTrigger test.&lt;/p&gt;</comment>
                            <comment id="12433988" author="yipng" created="Mon, 11 Sep 2006 22:41:06 +0100"  >&lt;p&gt;Thanks Deepa for the info.  Attaching jdk16 specifc master file for grantRevokeDDL2.sql to temporarily resolve the diff issue. &lt;/p&gt;</comment>
                            <comment id="12435025" author="mikem" created="Fri, 15 Sep 2006 17:33:05 +0100"  >&lt;p&gt;linking to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1629&quot; title=&quot;Exceptions thrown by code in procedures or triggers are not handled/thrown correctly by Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1629&quot;&gt;&lt;del&gt;DERBY-1629&lt;/del&gt;&lt;/a&gt;, adding jdk16 specific master to work around &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1629&quot; title=&quot;Exceptions thrown by code in procedures or triggers are not handled/thrown correctly by Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1629&quot;&gt;&lt;del&gt;DERBY-1629&lt;/del&gt;&lt;/a&gt;.  These jdk specific masters add future maintenance workload to getting clean test runs in all environments in the future, so would be good to get rid of the specific master when &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1629&quot; title=&quot;Exceptions thrown by code in procedures or triggers are not handled/thrown correctly by Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1629&quot;&gt;&lt;del&gt;DERBY-1629&lt;/del&gt;&lt;/a&gt; is resolved.&lt;/p&gt;</comment>
                            <comment id="12435027" author="mikem" created="Fri, 15 Sep 2006 17:38:47 +0100"  >&lt;p&gt;committed the jdk16 specific master:&lt;/p&gt;

&lt;p&gt;m3_16:81&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Adding         java\testing\org\apache\derbyTesting\functionTests\master\jdk16\grantRevokeDDL2.out&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 446652.&lt;/p&gt;</comment>
                            <comment id="12551407" author="fuzzylogic" created="Thu, 13 Dec 2007 09:05:11 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12347114">DERBY-1629</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12312336">DERBY-464</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12314102">DERBY-551</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12340605" name="derby1729-jdk16-master-diff.txt" size="10436" author="yipng" created="Mon, 11 Sep 2006 22:41:06 +0100"/>
                            <attachment id="12340161" name="derby1729-trunk-diff01.txt" size="27024" author="yipng" created="Mon, 4 Sep 2006 20:12:50 +0100"/>
                            <attachment id="12340281" name="derby1729-trunk-diff02.txt" size="29912" author="yipng" created="Wed, 6 Sep 2006 18:33:14 +0100"/>
                            <attachment id="12340290" name="derby1729-trunk-diff03.txt" size="21873" author="yipng" created="Wed, 6 Sep 2006 20:42:59 +0100"/>
                            <attachment id="12340160" name="derby1729-trunk-stat01.txt" size="779" author="yipng" created="Mon, 4 Sep 2006 20:12:50 +0100"/>
                            <attachment id="12340280" name="derby1729-trunk-stat02.txt" size="779" author="yipng" created="Wed, 6 Sep 2006 18:33:14 +0100"/>
                            <attachment id="12340289" name="derby1729-trunk-stat03.txt" size="779" author="yipng" created="Wed, 6 Sep 2006 20:42:59 +0100"/>
                            <attachment id="12339146" name="repro-trunk-diff01.txt" size="3816" author="yipng" created="Fri, 18 Aug 2006 22:42:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Aug 2006 01:31:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy100n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>