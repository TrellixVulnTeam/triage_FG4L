<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:17:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5040/DERBY-5040.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5040] On Windows, cascade of errors after failed test AutomaticIndexStatisticsTest</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5040</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Cf log here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://dbtg.foundry.sun.com/derby/test/Daily/jvm1.6/testing/Limited/testSummary-1070264.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.foundry.sun.com/derby/test/Daily/jvm1.6/testing/Limited/testSummary-1070264.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not sure if this is distinct (or not) from other errors we have seen after the enabling of the statistics auto-refresh patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498592">DERBY-5040</key>
            <summary>On Windows, cascade of errors after failed test AutomaticIndexStatisticsTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                            <label>derby_backport_reject_10_5</label>
                    </labels>
                <created>Mon, 14 Feb 2011 23:47:44 +0000</created>
                <updated>Fri, 15 Nov 2013 08:15:07 +0000</updated>
                            <resolved>Thu, 13 Sep 2012 00:20:04 +0100</resolved>
                                    <version>10.8.1.2</version>
                                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12995346" author="kristwaa" created="Wed, 16 Feb 2011 15:46:02 +0000"  >&lt;p&gt;I see that the first test that failed was AutomaticIndexStatisticsTest.testStatsCreatedOnGrowthThenDeleteDb. The problem was that one of the data files in the seg0 directory could not be deleted. Since all the other files got deleted, this is now basically a very corrupt database... Derby is not, or rather has not been made, capable of deleting an existing directory structure in the default case, and thus all tests accessing the default database wombat fails.&lt;/p&gt;

&lt;p&gt;Again this intermittent &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; delete issue causes trouble, and I believe it happens only on Windows. I&apos;ve seen something similar with the upgrade test on my machine (Windows Vista).&lt;br/&gt;
I&apos;m not sure if the istat daemon can cause Derby to keep file handles open after shutdown, but maybe it can if the timing is right (i.e. calling a path that involves reopening a container if it has already been closed).&lt;/p&gt;

&lt;p&gt;I see at least two ways to progress on this problem:&lt;br/&gt;
 a) Make the delete method more persistent by adding a sleep after the first iteration of deletes, and then try to delete all remaining files in a second pass. Could also repeat if required. If the files cannot be deleted after X iterations, there must be a real resource handling bug.&lt;br/&gt;
 b) If easily reproducible, debug to find out if there are open file handles and if so figure out why. I don&apos;t know if you can easily map a file handle to something inside the Java process though, so this may involve a fair amount of code inspection and debugging.&lt;/p&gt;</comment>
                            <comment id="12996067" author="kristwaa" created="Thu, 17 Feb 2011 20:58:37 +0000"  >&lt;p&gt;Attaching patch 1a, which makes the failing test use a separate database instead of the default database wombat.&lt;br/&gt;
This should eliminate the cascade of errors.&lt;/p&gt;

&lt;p&gt;Note that this patch doesn&apos;t address the underlying cause for not being able to delete the database directory.&lt;/p&gt;</comment>
                            <comment id="12996070" author="kristwaa" created="Thu, 17 Feb 2011 21:00:30 +0000"  >&lt;p&gt;Committed to trunk with revision 1071783.&lt;/p&gt;</comment>
                            <comment id="12996547" author="rhillegas" created="Fri, 18 Feb 2011 18:22:43 +0000"  >&lt;p&gt;This issue may be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5026&quot; title=&quot;testStatsCreatedOnGrowthThenDeleteDb failing with ibm15 on trunk. The revision on trunk is 1069665 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5026&quot;&gt;&lt;del&gt;DERBY-5026&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13001628" author="kristwaa" created="Wed, 2 Mar 2011 20:56:47 +0000"  >&lt;p&gt;The cascade-effect has been fixed by switching from using the default db to a separate db.&lt;br/&gt;
The test failure itself is hopefully adressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4915&quot; title=&quot;test failure in OSReadOnlyTest in assertDirectoryDeleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4915&quot;&gt;&lt;del&gt;DERBY-4915&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I don&apos;t expect more work for this issue.&lt;/p&gt;</comment>
                            <comment id="13823390" author="knutanders" created="Fri, 15 Nov 2013 08:15:07 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12498403">DERBY-5026</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12492660">DERBY-4939</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12498403">DERBY-5026</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12471331" name="derby-5040-1a-use_separate_db.diff" size="1957" author="kristwaa" created="Thu, 17 Feb 2011 20:58:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Feb 2011 15:46:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0a0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>