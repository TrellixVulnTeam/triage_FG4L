<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1384/DERBY-1384.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1384] Increase default BLOB/CLOB length to maximum supported (2G?)</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1384</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Default BLOB/CLOB length should be the maximum length supported by Derby (2G?)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12344063">DERBY-1384</key>
            <summary>Increase default BLOB/CLOB length to maximum supported (2G?)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bernt">Bernt M. Johnsen</assignee>
                                    <reporter username="bernt">Bernt M. Johnsen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jun 2006 20:02:26 +0100</created>
                <updated>Fri, 19 Jan 2007 10:12:22 +0000</updated>
                            <resolved>Mon, 19 Jun 2006 21:37:50 +0100</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12415318" author="bernt" created="Thu, 8 Jun 2006 18:54:16 +0100"  >&lt;p&gt;The maximum value supported by Derby is not 2G, but 2G-1, which the user have to write as 2147483647, which again is pretty inconvenient.&lt;/p&gt;</comment>
                            <comment id="12415335" author="djd" created="Thu, 8 Jun 2006 20:15:34 +0100"  >&lt;p&gt;I thought 2G can be written (and means 2G -1).&lt;/p&gt;

&lt;p&gt;Changing the default can change the behaviour of exisitng applications thus needs to be considered carefully.&lt;/p&gt;

&lt;p&gt;An application that used BLOB will current reject values greater than 1M, changing the default means the application will now silently accept those values.&lt;/p&gt;</comment>
                            <comment id="12415339" author="bernt" created="Thu, 8 Jun 2006 20:29:07 +0100"  >&lt;p&gt;2G is 2G, not 2G-1. See ISO/IEC 9075-2:2003 (E) 6.1 &amp;lt;data type&amp;gt;:&lt;/p&gt;

&lt;p&gt;If &amp;lt;large object length&amp;gt; immediately contains &amp;lt;large object length token&amp;gt; or immediately contains&lt;br/&gt;
&amp;lt;unsigned integer&amp;gt; and &amp;lt;multiplier&amp;gt;, then let D be the value of the specified &amp;lt;unsigned integer&amp;gt; or&lt;br/&gt;
the numeric value of the sequence of &amp;lt;digit&amp;gt;s of &amp;lt;large object length token&amp;gt; interpreted as an &amp;lt;unsigned&lt;br/&gt;
integer&amp;gt;. The numeric value of &amp;lt;large object length&amp;gt; is the numeric value resulting from the multiplication&lt;br/&gt;
of D and MS, then MS is:&lt;br/&gt;
i) If &amp;lt;multiplier&amp;gt; is K, then 1,024.&lt;br/&gt;
ii) If &amp;lt;multiplier&amp;gt; is M, then 1,048,576.&lt;br/&gt;
iii) If &amp;lt;multiplier&amp;gt; is G, then 1,073,741,824.&lt;/p&gt;

&lt;p&gt;I agree that this might change the behaviour of existing applications, but that the increased usability is  worth the change.&lt;/p&gt;</comment>
                            <comment id="12415347" author="andreask" created="Thu, 8 Jun 2006 20:44:18 +0100"  >&lt;p&gt;Maybe the  Release Note Required checkbox should be checked for this change.&lt;/p&gt;

&lt;p&gt;My understanding is that after an upgrade (from a version without this improvement), an application which continues to use the schemas/tables as they were initially created, will not be affected by the change. An application which recreates the schemas/tables after an upgrade, may be affected if it depends on Derby rejecting Blobs with sizes bigger than 1M.&lt;/p&gt;</comment>
                            <comment id="12415348" author="djd" created="Thu, 8 Jun 2006 20:52:05 +0100"  >&lt;p&gt;Bernt wrote:&lt;br/&gt;
    2G is 2G, not 2G-1. See ISO/IEC 9075-2:2003 (E) 6.1 &amp;lt;data type&amp;gt;: &lt;/p&gt;

&lt;p&gt;In Derby, at the moment, BLOB(2G) does mean BLOB(2147483647). Does not agree with the standard but it is the current behaviour.&lt;/p&gt;</comment>
                            <comment id="12415351" author="bernt" created="Thu, 8 Jun 2006 21:20:11 +0100"  >&lt;p&gt;I admit that to interpret 2G as 2147483647 is user-friendly, but that should be reflected in the docs which currently says &quot;one of the suffixes K, M, or G is given, relating to the multiples of 1024, 1024*1024, 1024*1024*1024 respectively&quot; without describing the exception for 2G (or 2048M and  1048576K frmo which Derby today subtracts 1).&lt;/p&gt;</comment>
                            <comment id="12415387" author="bandaram" created="Fri, 9 Jun 2006 01:49:24 +0100"  >&lt;p&gt;While I still don&apos;t know if this change is good or not for Derby at this time, change in max length, if applied, should probably be prevented in soft-upgrade mode. When Derby is running in soft-upgrade mode in 10.2, it is best to avoid increasing default max length, as it could cause problems after any downgrade.&lt;/p&gt;</comment>
                            <comment id="12415394" author="andreask" created="Fri, 9 Jun 2006 02:11:29 +0100"  >&lt;p&gt;I do not see how the improvement would cause any problems after an downgrade, since it is about changing the default size for Blob columns within the range of what is supported in 10.1. If it was about changing the maximum size of a blob column, I agree that this could cause a downgrade problem.&lt;/p&gt;</comment>
                            <comment id="12415400" author="skambha" created="Fri, 9 Jun 2006 02:40:16 +0100"  >&lt;p&gt;Please note: that our interfaces like DataTypeDescriptor.getMaximumWidth() etc currently return an int . Any change to the clob/blob to be actually 2G (ie 2147483648) means we exceed the max value possible for int and it might be necessary to change the interfaces to take long instead of  int. &lt;/p&gt;</comment>
                            <comment id="12415410" author="bandaram" created="Fri, 9 Jun 2006 03:10:48 +0100"  >&lt;p&gt;Here is one situation where changing default max length would cause problem. In soft upgrade, if some one creates a default length BLOB/CLOB, if the default is changed, they could successfully create larger than 1MB blob/clob. On downgrade, statements like this would fail:&lt;/p&gt;

&lt;p&gt;INSERT INTO TAB SELECT * FROM BLOBTAB;&lt;/p&gt;

&lt;p&gt;where all blob/clob instances are created using default size, just some are created on soft-upgrade to 10.2.&lt;/p&gt;

&lt;p&gt;Soft upgrade checks are cheap and are designed to maintain same behavior across versions.&lt;/p&gt;</comment>
                            <comment id="12415413" author="djd" created="Fri, 9 Jun 2006 03:56:59 +0100"  >&lt;p&gt;I would say strictly speaking that this is not a concern for soft-upgrade. The data written to disk (if the default for BLOB was changed) does not result in a on-disk format that is mis-understood by 10.0 or 10.1. The column would be processed correctly and have the correct meta data.&lt;/p&gt;

&lt;p&gt;This is like the previous change where the max identifier lengths for certain objects was increased in 10.1.&lt;br/&gt;
The change didn&apos;t need soft-upgrade checks as any larger identifiers were understood by 10.0.&lt;/p&gt;

&lt;p&gt;Satheesh, I&apos;m not sure what you are trying to say with your SELECT statement that would fail. In what  exact situations would that fail?&lt;/p&gt;</comment>
                            <comment id="12415433" author="bandaram" created="Fri, 9 Jun 2006 05:20:53 +0100"  >&lt;p&gt;This is the case I was thinking about. I have coded my application without specifying lengths for BLOB/CLOB. I would normally expect this to work:&lt;/p&gt;

&lt;p&gt;INSERT INTO tblob select * from tblob; OR&lt;br/&gt;
INSERT INTO tblob select * from myblobTab;&lt;/p&gt;

&lt;p&gt;My concern was on soft-update, it would be possible to insert larger than 1MB and later on downgrade, same operations like above will not work as some instances of BLOB could now be larger than 1MB. (and hence above operations could fail on 10.1)&lt;/p&gt;

&lt;p&gt;May be this is extreme case and may not be worth protecting... but one could look at 10.1 BLOB (without size) datatype to be between 1-1MB and is being changed to 1-2GB.&lt;/p&gt;
</comment>
                            <comment id="12415856" author="andreask" created="Mon, 12 Jun 2006 20:57:34 +0100"  >
&lt;p&gt;&amp;gt; This is the case I was thinking about. I have coded my application without specifying lengths for BLOB/CLOB. I would normally expect this to work:&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; INSERT INTO tblob select * from tblob; OR&lt;br/&gt;
&amp;gt; INSERT INTO tblob select * from myblobTab;&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; My concern was on soft-update, it would be possible to insert larger than 1MB and later on downgrade, same operations like above will not work as some instances of BLOB could now be larger than 1MB. (and hence above operations could fail on 10.1)&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;I do not see how this would be a problem on downgrade. If the operations worked in soft-upgrade, downgrade will not redefine the size of the blob-columns of existing tables.  This issue is about changing the default max size of columns when doing &quot;CREATE TABLE ..&quot;, so unless the scenario contains a create table somewhere, it should not be an issue.&lt;/p&gt;

&lt;p&gt;&amp;gt; May be this is extreme case and may not be worth protecting... but one could look at 10.1 BLOB (without size) datatype to be between 1-1MB and is being changed to 1-2GB.&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;An extreme case is that the user applications recreates some of its tables, and not other tables during soft-upgrade. This means that some of the tables may allow 1MB blob columns and other tables 2GB blob columns. This should then only be a problem if the application suddenly starts using blobs with size &amp;gt; 1MB, and do similar queries as you gave. These will now fail. If the applications had been running only on 10.1 it would have failed once it started inserting blobs with size &amp;gt;1M into the tables.&lt;br/&gt;
I do not think this extreme case is a soft-upgrade problem, as the same problem could be constructed in a hard-upgrade scenario. Therefore, I do not think it is worth adding any logic in soft-upgrade mode.&lt;/p&gt;</comment>
                            <comment id="12416762" author="bernt" created="Mon, 19 Jun 2006 21:37:50 +0100"  >&lt;p&gt;Committed revision 415328.&lt;/p&gt;</comment>
                            <comment id="12416763" author="bernt" created="Mon, 19 Jun 2006 21:38:51 +0100"  >&lt;p&gt;Docs Committed revision 415329.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12335200" name="derby-1384-code.diff" size="535" author="bernt" created="Thu, 8 Jun 2006 19:57:32 +0100"/>
                            <attachment id="12335201" name="derby-1384-code.stat" size="133" author="bernt" created="Thu, 8 Jun 2006 19:58:01 +0100"/>
                            <attachment id="12335202" name="derby-1384-docs.diff" size="1525" author="bernt" created="Thu, 8 Jun 2006 19:59:00 +0100"/>
                            <attachment id="12335203" name="derby-1384-docs.stat" size="58" author="bernt" created="Thu, 8 Jun 2006 19:59:00 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Jun 2006 19:15:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy13lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>