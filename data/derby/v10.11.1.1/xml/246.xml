<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-246/DERBY-246.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-246] XA end() fails with Connection is closed error</title>
                <link>https://issues.apache.org/jira/browse/DERBY-246</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I am testing ClientXADataSource.&lt;br/&gt;
It fails when end() is called - here is the output fromn my test program.&lt;/p&gt;

&lt;p&gt;Running test org.simplejta.xatests.common.Test1&lt;br/&gt;
autocommit = false&lt;br/&gt;
No of rows Affected 1&lt;br/&gt;
autocommit = true&lt;br/&gt;
No of rows Affected 1&lt;br/&gt;
org.apache.derby.client.am.XaException: XAER_RMFAIL : Connection is Closed.&lt;br/&gt;
	at org.apache.derby.client.net.NetXAResource.throwXAException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetXAResource.throwXAException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetXAResource.connectionClosedFailure(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetXAResource.end(Unknown Source)&lt;br/&gt;
	at org.simplejta.xatests.common.Test1.doTest(Test1.java:52)&lt;br/&gt;
	at org.simplejta.tests.DerbyClientTests.main(DerbyClientTests.java:66)&lt;br/&gt;
Caused by: org.apache.derby.client.am.SqlException: Connection is Closed.&lt;br/&gt;
	... 4 more&lt;br/&gt;
Test org.simplejta.xatests.common.Test1 failed&lt;/p&gt;

&lt;p&gt;The test program is:&lt;/p&gt;

&lt;p&gt;/*&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Test case for multiple logical connections between start() and end().&lt;br/&gt;
 */&lt;br/&gt;
package org.simplejta.xatests.common;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;import java.sql.Connection;&lt;br/&gt;
import java.sql.SQLException;&lt;br/&gt;
import java.sql.Statement;&lt;/p&gt;

&lt;p&gt;import javax.sql.XAConnection;&lt;br/&gt;
import javax.sql.XADataSource;&lt;br/&gt;
import javax.transaction.xa.XAResource;&lt;br/&gt;
import javax.transaction.xa.Xid;&lt;/p&gt;

&lt;p&gt;public class Test1 extends TestCase {&lt;/p&gt;

&lt;p&gt;    public void doTest(XADataSource ds) throws Exception &lt;/p&gt;
{

            // Get a XA connection to the underlying data source
            XAConnection pc1 = ds.getXAConnection();

            // Get the XA Resource
            XAResource xar1 = pc1.getXAResource();

            // Create an Xid
            Xid xid1 = Utils.createXid(1);

            // Start the XA transaction
            xar1.start(xid1, XAResource.TMNOFLAGS);

            // Get a Logical Connection
            Connection conn1 = pc1.getConnection();
            System.out.println(&quot;autocommit = &quot; + conn1.getAutoCommit());

            // Do something with conn1
            doSomeWork1(conn1, 50);

            // Close the logical connection
            conn1.close();

            // Get another logical connection
            conn1 = pc1.getConnection();
            System.out.println(&quot;autocommit = &quot; + conn1.getAutoCommit());

            // Do something with conn1
            doSomeWork1(conn1, 51);

            // Close the logical connection
            conn1.close();

            // END the branche
            xar1.end(xid1, XAResource.TMSUCCESS);

            // Prepare the RMs
            int prp1 = xar1.prepare(xid1);

            // Commit transaction
            xar1.commit(xid1, false);

            // Close physical connection
            pc1.close();
    }

&lt;p&gt;    private void doSomeWork1(Connection conn, int deptno) throws SQLException &lt;/p&gt;
{
        Statement stmt = conn.createStatement();
        int cnt = stmt
                .executeUpdate(&quot;INSERT INTO dept VALUES (&quot; + deptno + &quot;, &apos;BSD&apos;, &apos;LONDON&apos;)&quot;);
        System.out.println(&quot;No of rows Affected &quot; + cnt);
        stmt.close();
        stmt = null;
    }
&lt;p&gt;}&lt;/p&gt;


&lt;p&gt;This test works fine with EmbeddedXADataSource. It also works fine with Oracle.&lt;/p&gt;

&lt;p&gt;Also, note that this error seems similar to the error I am getting with DB2 using the DB2 type 4 driver.&lt;/p&gt;

&lt;p&gt;Running test org.simplejta.xatests.common.Test1&lt;br/&gt;
autocommit = false&lt;br/&gt;
No of rows Affected 1&lt;br/&gt;
autocommit = false&lt;br/&gt;
No of rows Affected 1&lt;br/&gt;
com.ibm.db2.jcc.b.de: XAER_RMFAIL : Connection is Closed. : Exception from native code during XA&lt;br/&gt;
	at com.ibm.db2.jcc.uw.UWXAResource.a(UWXAResource.java:695)&lt;br/&gt;
	at com.ibm.db2.jcc.uw.UWXAResource.a(UWXAResource.java:709)&lt;br/&gt;
	at com.ibm.db2.jcc.uw.UWXAResource.end(UWXAResource.java:227)&lt;br/&gt;
	at org.simplejta.xatests.common.Test1.doTest(Test1.java:52)&lt;br/&gt;
	at org.simplejta.tests.DB2Tests.main(DB2Tests.java:65)&lt;br/&gt;
Caused by: com.ibm.db2.jcc.b.SqlException: Connection is Closed.&lt;br/&gt;
	at com.ibm.db2.jcc.uw.UWXAResource.a(UWXAResource.java:705)&lt;br/&gt;
	... 3 more&lt;br/&gt;
Test org.simplejta.xatests.common.Test1 failed&lt;/p&gt;



&lt;p&gt;Curiously, the error appears to corrupt the database. Subsequent attempts to start the database gives an error.&lt;/p&gt;


&lt;p&gt;org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ040, SQLERRMC: tca&lt;span class=&quot;error&quot;&gt;&amp;#91;..snip..&amp;#93;&lt;/span&gt;XJ040.C..&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;..STB0:XSTB0.M..&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;..led to start database &apos;tca&apos;, see the next exception for details...&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;..An exception was thrown during transaction abort...&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;..(server log:c:\derby\databases\derby.log)&lt;br/&gt;
	at org.apache.derby.client.am.Connection.completeSqlca(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnectionReply.parseRdbAccessFailed(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnectionReply.parseAccessRdbError(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnectionReply.parseACCRDBreply(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnectionReply.readAccessDatabase(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessRdb(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessRdb(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.flowUSRIDPWDconnect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.flowConnect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.initialize(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetConnection.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.net.NetXAConnection.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.ClientPooledConnection.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.ClientXAConnection.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientXADataSource.getXAConnection(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientXADataSource.getXAConnection(Unknown Source)&lt;/p&gt;


</description>
                <environment>I am using the 10.1.0 alpha build.</environment>
        <key id="32119">DERBY-246</key>
            <summary>XA end() fails with Connection is closed error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="dibyendumajumdar">Dibyendu Majumdar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Apr 2005 09:57:24 +0100</created>
                <updated>Fri, 21 Jan 2011 17:48:14 +0000</updated>
                            <resolved>Tue, 7 Jun 2005 02:35:26 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="64796" author="myrna" created="Tue, 10 May 2005 12:25:29 +0100"  >&lt;p&gt;removing some non-printable characters spewed out by networkserver - JIRA cannot properly generate XML with them in a CDATA field...(JRA-5660 was logged). replaced the troublesome characters with &apos;..&lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;..&apos;&lt;/p&gt;</comment>
                            <comment id="65415" author="kmarsden" created="Sun, 15 May 2005 08:58:43 +0100"  >&lt;p&gt;There are basically three issues with Derby-246&lt;/p&gt;

&lt;p&gt;Issue  1 - xa_end  will throw an exception if the logical connection is closed. If the logical connection is not yet closed when xa_end is called, the transaction ends properly.&lt;/p&gt;

&lt;p&gt;AException.errorcode: XAER_RMFAIL&lt;br/&gt;
XAER_RMFAIL : Connection is Closed.&lt;br/&gt;
org.apache.derby.client.am.XaException: XAER_RMFAIL : Connection is Closed.&lt;br/&gt;
        at org.apache.derby.client.net.NetXAResource.throwXAException(NetXAResource.java:736)&lt;br/&gt;
        at org.apache.derby.client.net.NetXAResource.throwXAException(NetXAResource.java:631)&lt;br/&gt;
        at org.apache.derby.client.net.NetXAResource.connectionClosedFailure(NetXAResource.java:926)&lt;br/&gt;
        at org.apache.derby.client.net.NetXAResource.end(NetXAResource.java:252)&lt;/p&gt;



&lt;p&gt;Issue 2 - A Lock timeout occurs when trying to  reconnect with the same user after the connection is closed error, because the automatic  schema creation is not complete.  You can reconnect with user &quot;APP&quot; because that schema exists.&lt;/p&gt;

&lt;p&gt;ERROR 40XL1: A lock could not be obtained within the time requested&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:301)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.services.locks.LockSet.lockObject(LockSet.java:414)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.services.locks.SinglePool.lockAnObject(SinglePool.java:174)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.services.locks.SinglePool.lockObject(SinglePool.java:226)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.raw.xact.RowLocking3.lockRecordForRead(RowLocking3.java:187)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.heap.HeapController.lockRow(HeapController.java:518)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.heap.HeapController.lockRow(HeapController.java:636)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockRowOnPage(B2IRowLocking3.java:332)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScanRow(B2IRowLocking3.java:574)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.btree.index.B2IRowLockingRR.lockScanRow(B2IRowLockingRR.java:119)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(BTreeForwardScan.java:380)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.store.access.btree.BTreeScan.next(BTreeScan.java:1696)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaIndex(DataDictionaryImpl.java:7124)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.locateSchemaRow(DataDictionaryImpl.java:1386)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getSchemaDescriptor(DataDictionaryImpl.java:1296)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.initDefaultSchemaDescriptor(GenericLanguageConnectionContext.java:350)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.initialize(GenericLanguageConnectionContext.java:332)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.db.BasicDatabase.setupConnection(BasicDatabase.java:272)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.TransactionResourceImpl.startTransaction(TransactionResourceImpl.java:188)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:242)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection30.&amp;lt;init&amp;gt;(EmbedConnection30.java:72)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:73)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:183)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.Database.makeConnection(Database.java:248)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.getConnFromDatabaseName(DRDAConnThread.java:1132)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.verifyUserIdPassword(DRDAConnThread.java:1110)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.parseSECCHK(DRDAConnThread.java:2648)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.parseDRDAConnection(DRDAConnThread.java:973)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:816)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:226)&lt;/p&gt;




&lt;p&gt;Issue 3 - A lock timeout hoses the connection.  But I seem to recall that this was determined to not be a bug at one point.  Need to double check on that.&lt;/p&gt;

</comment>
                            <comment id="66198" author="kmarsden" created="Wed, 25 May 2005 06:58:07 +0100"  >&lt;p&gt;The workaround for this issue leave logical connections that participate in a global transaction openned until the transaction completes.&lt;/p&gt;
</comment>
                            <comment id="67011" author="kmarsden" created="Fri, 3 Jun 2005 23:39:18 +0100"  >&lt;p&gt;Attached is a patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For the client there were multiple problems associated with the tracking&lt;br/&gt;
of XA_STATE in the client.  The approach for this patch is to remove as&lt;br/&gt;
much of the client state  as possible.&lt;/p&gt;

&lt;p&gt;This patch removes all the client XA state except for&lt;br/&gt;
    XA_GLOBAL - In an active  global transaction    &lt;br/&gt;
    XA_LOCAL    - No active global transaction.&lt;/p&gt;

&lt;p&gt;For Network Server there was a bug that the connection was not being&lt;br/&gt;
reset properly when a connection&lt;br/&gt;
reset request came from the  client.   Changed it so that  if an ACCRDB&lt;br/&gt;
is sent and a connection has already been established it will reset.&lt;/p&gt;

&lt;p&gt;There is still a fair amount of cleanup to do for xa in the client.   Including&lt;br/&gt;
changing the values above to a single boolean value.&lt;br/&gt;
 That will come in follow up patches.   I will also file bugs for some&lt;br/&gt;
other client XA issues I am looking at.&lt;/p&gt;

&lt;p&gt;I will commit this probably at noon today, but would appreciate review before or&lt;br/&gt;
after checkin. &lt;/p&gt;</comment>
                            <comment id="12312623" author="kmarsden" created="Sat, 4 Jun 2005 16:17:25 +0100"  >&lt;p&gt;Philip reviewed my change for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt; and commented that an instance of  if (!open_ &amp;amp;&amp;amp; !availableForReuse_) &lt;br/&gt;
 could be changed to &lt;br/&gt;
if (isPhysicallyClosed())&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Talked about how in the client the public api calls such as close() and next() have tracing but the corresponding internal calls closeX() and nextX() don&apos;t.&lt;br/&gt;
  Internal code should call closeX() instead of close().&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Talked about general approach of fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt;, to rip out as much of the XA state in the client as possible.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12312768" author="kmarsden" created="Tue, 7 Jun 2005 02:35:24 +0100"  >&lt;p&gt;The fix for this issue was checked in.&lt;/p&gt;

&lt;p&gt;r179867 | kmarsden | 2005-06-03 12:35:33 -0700 (Fri, 03 Jun 2005) | 17 lines&lt;/p&gt;

&lt;p&gt;XA end() fails with Connection is closed error&lt;/p&gt;

&lt;p&gt;For the client there were multiple problems associated with the tracking&lt;br/&gt;
of XA_STATE in the client. The approach for this patch is to remove as&lt;br/&gt;
much of the client state as possible.&lt;/p&gt;

&lt;p&gt;This patch removes all the client XA state except for&lt;br/&gt;
    XA_GLOBAL - In an active global transaction&lt;br/&gt;
    XA_LOCAL - No active global transaction.&lt;/p&gt;

&lt;p&gt;For Network Server there was a bug that the connection was not being&lt;br/&gt;
reset properly when a connection&lt;br/&gt;
reset request came from the client. Changed it so that if an ACCRDB&lt;br/&gt;
is sent and a connection has already been established it will reset.&lt;/p&gt;

&lt;p&gt;Additional work in this area will bechecked in with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-339&quot; title=&quot;Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be deferred to the server.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-339&quot;&gt;&lt;del&gt;DERBY-339&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12312769" author="kmarsden" created="Tue, 7 Jun 2005 02:39:08 +0100"  >&lt;p&gt;Additional cleanup of the xaState is required and &lt;br/&gt;
has been filed as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-339&quot; title=&quot;Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be deferred to the server.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-339&quot;&gt;&lt;del&gt;DERBY-339&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12313118" author="davidvc" created="Thu, 9 Jun 2005 10:21:56 +0100"  >&lt;p&gt;I  tried applying this patch to a fresh tree and got an error:&lt;/p&gt;

&lt;p&gt;bash-2.05$ patch -p0 &amp;lt; derby246.diff&lt;br/&gt;
(Stripping trailing CRs from patch.)&lt;br/&gt;
patching file java/drda/org/apache/derby/impl/drda/XADatabase.java&lt;br/&gt;
patch: **** malformed patch at line 30: Index: java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/netxaPositive.sql&lt;/p&gt;

&lt;p&gt;I looked at the line but can&apos;t figure out what&apos;s up. &lt;/p&gt;</comment>
                            <comment id="12479575" author="julo" created="Fri, 9 Mar 2007 12:41:50 +0000"  >&lt;p&gt;From the XA Transaction Specification from the OpenGroup:&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
It is an error, &lt;span class=&quot;error&quot;&gt;&amp;#91;XAER_PROTO&amp;#93;&lt;/span&gt;, for a transaction manager to call xa_close () within a&lt;br/&gt;
thread of control that is associated with a transaction branch (that is, the transaction&lt;br/&gt;
manager must call xa_end() before calling xa_close ()). &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12311101">DERBY-339</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12364458">DERBY-2420</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12310528" name="DERBY-246_irc_6_3_2005" size="4402" author="kmarsden" created="Sat, 4 Jun 2005 16:17:25 +0100"/>
                            <attachment id="20421" name="derby246.diff" size="29115" author="kmarsden" created="Fri, 3 Jun 2005 23:39:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 May 2005 11:25:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ncv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37602</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>