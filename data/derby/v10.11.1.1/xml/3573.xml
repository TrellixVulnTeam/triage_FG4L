<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:50:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3573/DERBY-3573.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3573] Argument checking for ResultSet.setFetchSize(int) is incorrect</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3573</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The requirement that the argument to ResultSet.setFetchSize(int) be less than Statement.getMaxRows() was dropped in Java 6/JDBC 4, (it is not present in the Java 6 javadoc, but can still be seen in the Java 5 javadoc).&lt;/p&gt;

&lt;p&gt;The reason why the client driver doesn&apos;t throw an exception in this case is because am.ResultSet incorrectly checks against ResultSet.maxRows_ and NOT am.Statement.getMaxRows(). So when am.Statement.setMaxRows(int) is called after a result set has already been created, am.ResultSet.setFechSize(int) will check against a stale value.&lt;/p&gt;

&lt;p&gt;The question is what to do about this. The client driver clearly has a bug, but should we fix it by duplicating the old behavior found in the embedded driver, or change both drivers to comply with latest spec which allows any non-negative value as argument to ResultSet.setFetchSize(int)?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12392463">DERBY-3573</key>
            <summary>Argument checking for ResultSet.setFetchSize(int) is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nirmal">Nirmal Fernando</assignee>
                                    <reporter username="dyret">Dyre Tjeldvoll</reporter>
                        <labels>
                            <label>derby_backport_reject_10_10</label>
                            <label>derby_triage10_8</label>
                    </labels>
                <created>Thu, 27 Mar 2008 16:13:42 +0000</created>
                <updated>Mon, 3 Mar 2014 22:52:20 +0000</updated>
                            <resolved>Mon, 14 Oct 2013 12:14:37 +0100</resolved>
                                    <version>10.3.1.4</version>
                    <version>10.3.2.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>JDBC</component>
                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12727346" author="espinha" created="Sun, 5 Jul 2009 16:57:23 +0100"  >&lt;p&gt;Triaged for 10.5.2. No changes made.&lt;/p&gt;</comment>
                            <comment id="12994483" author="kmarsden" created="Mon, 14 Feb 2011 20:46:48 +0000"  >&lt;p&gt;Triage for 10.8.  I think  it makes sense to change both drivers to comply with latest spec which allows any non-negative value as argument to ResultSet.setFetchSize(int). Does this mean that it will override setMaxRows()?&lt;/p&gt;</comment>
                            <comment id="12994608" author="dagw" created="Tue, 15 Feb 2011 01:12:00 +0000"  >&lt;p&gt;+1 to making  both drivers comply. I think setFetchSize and setMaxRows are orthogonal, but if setFetchSize is set greater than setMaxRows, I think the setting in setMaxRows still apply: the &quot;fetch size&quot; (a &quot;hint&quot;) is about how many rows to fetch at a time from the server to the client (trade-off between network round-tips, client memory size, latency for first rows) as far as I understand it. &quot;Max size&quot; is a hard limit for how many rows are visible as part of the result set, no matter whether this is enforced on server or client side.&lt;/p&gt;</comment>
                            <comment id="12994641" author="nirmal" created="Tue, 15 Feb 2011 03:15:29 +0000"  >&lt;p&gt;Attaching a diff! &lt;br/&gt;
Is there a way to find test files related to this change?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12994726" author="knutanders" created="Tue, 15 Feb 2011 09:42:11 +0000"  >&lt;p&gt;StatementJdbc20Test.java has some tests for rs.setFetchSize().&lt;/p&gt;</comment>
                            <comment id="13793438" author="dyret" created="Sat, 12 Oct 2013 19:39:23 +0100"  >&lt;p&gt;Patch a no longer applied cleanly, so attaching an identical patch against the latest trunk. Junit and harness tests passed.&lt;/p&gt;</comment>
                            <comment id="13793441" author="dyret" created="Sat, 12 Oct 2013 19:59:10 +0100"  >&lt;p&gt;StatementJdbc20Test passed, but only because there was no fail() after setting a fetchSize larger than maxRows. Attaching a test patch to get the new behavior tested.&lt;/p&gt;</comment>
                            <comment id="13794061" author="jira-bot" created="Mon, 14 Oct 2013 12:12:48 +0100"  >&lt;p&gt;Commit 1531854 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dyret&quot; class=&quot;user-hover&quot; rel=&quot;dyret&quot;&gt;Dyre Tjeldvoll&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531854&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1531854&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3573&quot; title=&quot;Argument checking for ResultSet.setFetchSize(int) is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3573&quot;&gt;&lt;del&gt;DERBY-3573&lt;/del&gt;&lt;/a&gt;: Remove incorrect check against maxRows when setting fetchSize. Patch contributed by Nirmal Fernando.&lt;/p&gt;</comment>
                            <comment id="13913300" author="mikem" created="Wed, 26 Feb 2014 18:45:25 +0000"  >&lt;p&gt;consider for 10.10 backport&lt;/p&gt;</comment>
                            <comment id="13913627" author="mikem" created="Wed, 26 Feb 2014 22:33:10 +0000"  >&lt;p&gt;Marking not for backport.  Change seems like it might affect existing applications, so better to introduce the change to implement the new standard only in a new release.  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12382408">DERBY-3203</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12471057" name="derby-3573-a.diff" size="1682" author="nirmal" created="Tue, 15 Feb 2011 03:15:29 +0000"/>
                            <attachment id="12608165" name="derby-3573-b.diff" size="1911" author="dyret" created="Sat, 12 Oct 2013 19:39:23 +0100"/>
                            <attachment id="12608166" name="derby-3573-test.diff" size="1056" author="dyret" created="Sat, 12 Oct 2013 19:59:10 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Jul 2009 15:57:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0htj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10053"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>