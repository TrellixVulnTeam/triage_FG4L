<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:26:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3913/DERBY-3913.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3913] mismatch between error XCL30 and 22003.S.4 and parameters in usage</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3913</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I found a script, trunk/tools/testing/i18nTestGenerator/generateClientMessageTest.sh, intended to create a test to verify correctness of client error messages(trunk/java/testing/org/apache/derbyTesting/functionTests/tests/i18n/TestClientMessages.java ). &lt;br/&gt;
The script is broken (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1567&quot; title=&quot;generateClientMessageTest.sh is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1567&quot;&gt;DERBY-1567&lt;/a&gt;) but after fixing up the resulting test and running it, it did show two messages which look a little odd in their usage (plus some messages for which the usage looked fine):&lt;/p&gt;

&lt;p&gt;XCL30 - LANG_STREAMING_COLUMN_I_O_EXCEPTION: &lt;br/&gt;
messages.xml: &lt;br/&gt;
            &amp;lt;msg&amp;gt;&lt;br/&gt;
                &amp;lt;name&amp;gt;XCL30.S&amp;lt;/name&amp;gt;&lt;br/&gt;
                &amp;lt;text&amp;gt;An IOException was thrown when reading a &apos;&lt;/p&gt;
{0}&apos; from an InputStream.&amp;lt;/text&amp;gt;&lt;br/&gt;
                &amp;lt;arg&amp;gt;value&amp;lt;/arg&amp;gt;&lt;br/&gt;
            &amp;lt;/msg&amp;gt;&lt;br/&gt;
apparently correct number of parameters, but odd...doesn&apos;t look like ioe fits the usage in the message text.&lt;br/&gt;
EmbedBlob:&lt;br/&gt;
            } catch (IOException ioe) {
                throw StandardException.newException(
                        SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION, ioe);
            }&lt;br/&gt;
has a second parameter:&lt;br/&gt;
client.am.Lob:&lt;br/&gt;
            throw new SqlException(null,&lt;br/&gt;
                        new ClientMessageId(&lt;br/&gt;
                            SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION),&lt;br/&gt;
                        typeDesc,&lt;br/&gt;
                        ioe&lt;br/&gt;
                    );&lt;br/&gt;
looks like second parameter fits the {0}
&lt;p&gt;:&lt;br/&gt;
SQLBinary: &lt;br/&gt;
		throw StandardException.&lt;br/&gt;
			newException(SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION,&lt;br/&gt;
						 ioe, getTypeName());&lt;br/&gt;
SQLChar:&lt;br/&gt;
		throw StandardException.&lt;br/&gt;
			newException(SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION,&lt;br/&gt;
						 ioe, getTypeName());&lt;/p&gt;

&lt;p&gt;                   throw StandardException.newException(&lt;br/&gt;
                            SQLState.LANG_STREAMING_COLUMN_I_O_EXCEPTION, &lt;br/&gt;
                            ioe, &lt;br/&gt;
                            &quot;java.sql.String&quot;);&lt;br/&gt;
--------------------------------------------------------------&lt;br/&gt;
22003.S.4 - CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE&lt;br/&gt;
            &amp;lt;msg&amp;gt;&lt;br/&gt;
                &amp;lt;name&amp;gt;22003.S.4&amp;lt;/name&amp;gt;&lt;br/&gt;
                &amp;lt;text&amp;gt;The length (&lt;/p&gt;
{0}
&lt;p&gt;) exceeds the maximum length for the data type (&lt;/p&gt;
{1}
&lt;p&gt;).&amp;lt;/text&amp;gt;&lt;br/&gt;
                &amp;lt;arg&amp;gt;number&amp;lt;/arg&amp;gt;&lt;br/&gt;
                &amp;lt;arg&amp;gt;datatypeName&amp;lt;/arg&amp;gt;&lt;br/&gt;
            &amp;lt;/msg&amp;gt;&lt;/p&gt;

&lt;p&gt;correct number of parameters, but new Integer(Integer.MAX_VALUE) returns a number, not a datatype name:             &lt;br/&gt;
client.am.PreparedStatement:&lt;br/&gt;
		throw new SqlException(&lt;br/&gt;
                        agent_.logWriter_,&lt;br/&gt;
                        new ClientMessageId(&lt;br/&gt;
                            SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),&lt;br/&gt;
                        new Long(length),&lt;br/&gt;
                        new Integer(Integer.MAX_VALUE)&lt;br/&gt;
                    ).getSQLException();&lt;br/&gt;
client.am.ResultSet:&lt;br/&gt;
                throw new SqlException(agent_.logWriter_,&lt;br/&gt;
                    new ClientMessageId(SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),&lt;br/&gt;
                    new Long(length), new Integer(Integer.MAX_VALUE)).getSQLException();&lt;br/&gt;
                throw new SqlException(agent_.logWriter_,&lt;br/&gt;
                    new ClientMessageId(SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),&lt;br/&gt;
                    new Long(length), new Integer(Integer.MAX_VALUE)).getSQLException();                &lt;br/&gt;
		throw new SqlException(agent_.logWriter_,&lt;br/&gt;
                    new ClientMessageId(SQLState.CLIENT_LENGTH_OUTSIDE_RANGE_FOR_DATATYPE),&lt;br/&gt;
                    new Long(length), new Integer(Integer.MAX_VALUE)).getSQLException();&lt;/p&gt;

&lt;p&gt;-------------------------------------------&lt;/p&gt;</description>
                <environment></environment>
        <key id="12406442">DERBY-3913</key>
            <summary>mismatch between error XCL30 and 22003.S.4 and parameters in usage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                            <label>derby_backport_reject_10_8</label>
                            <label>derby_triage10_5_2</label>
                    </labels>
                <created>Tue, 14 Oct 2008 22:06:25 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:29 +0100</updated>
                            <resolved>Fri, 17 Jun 2011 01:56:39 +0100</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Miscellaneous</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12726917" author="kristwaa" created="Fri, 3 Jul 2009 12:49:27 +0100"  >&lt;p&gt;Triaged July 3, 2009: Assigned normal urgency.&lt;/p&gt;</comment>
                            <comment id="13048985" author="mamtas" created="Tue, 14 Jun 2011 06:36:02 +0100"  >&lt;p&gt;The script generateClientMessageTest.sh which is supposed to generate a test to verify the correctness of the error messages is preety badly broken.I tried fixing the errors in the generated test but there were just too many problems in the generated test. &lt;/p&gt;

&lt;p&gt;I have checked in the fixes for the mismatch between error XCL30 and 22003.S.4 and parameters in usage though and hence this jira can be closed. There is another jira &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1567&quot; title=&quot;generateClientMessageTest.sh is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1567&quot;&gt;DERBY-1567&lt;/a&gt; to fix the script when generates the test.&lt;/p&gt;</comment>
                            <comment id="13049055" author="knutanders" created="Tue, 14 Jun 2011 09:19:43 +0100"  >&lt;p&gt;The problem with XCL30.S seems to have been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3970&quot; title=&quot;PositionedStoreStream doesn&amp;#39;t initialize itself properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3970&quot;&gt;&lt;del&gt;DERBY-3970&lt;/del&gt;&lt;/a&gt;, so now all exceptions with that message id are passed one argument and linked to the underlying IOException.&lt;/p&gt;

&lt;p&gt;The fix committed here seems to have broken this in client.am.Lob. By changing the order of the arguments, we now pass two message arguments, and the generated SqlException is not linked to the underlying IOException. I suppose the confusion comes from the different signatures for the methods that create exceptions in the client and in the engine. In the engine, the cause should be passed before the message arguments, whereas it should be the last argument in the client.&lt;/p&gt;

&lt;p&gt;The attached patch reverts that part of the fix for this issue.&lt;/p&gt;

&lt;p&gt;Committed revision 1135404.&lt;/p&gt;</comment>
                            <comment id="13057373" author="myrna" created="Wed, 29 Jun 2011 19:02:13 +0100"  >&lt;p&gt;Added a reject backport 10.8 because the remaining change changed the construction of the message, and the translations were recently contributed for 10.8.&lt;br/&gt;
Normally when we change a message we ought to remove it from the non-English locales (until a new translation) so the English gets picked up at run-time, but I don&apos;t think it&apos;s necessary in this case, because the behavior for those other languages remains the same as it was before the change. &lt;/p&gt;</comment>
                            <comment id="13685257" author="knutanders" created="Mon, 17 Jun 2013 10:19:29 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12409692">DERBY-3970</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12482529" name="exception-args.diff" size="631" author="knutanders" created="Tue, 14 Jun 2011 09:19:43 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Jul 2009 11:49:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23915</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0fzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>