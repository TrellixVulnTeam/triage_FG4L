<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:19:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6438/DERBY-6438.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6438] Explicitly grant SocketPermission &quot;listen&quot; in default server policy</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6438</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The network server needs SocketPermission &quot;listen&quot; on the port that it listens to, but this permission is not granted by the basic server policy that&apos;s installed by default. This doesn&apos;t cause any problems in most cases, since the JVM&apos;s default policy grants all code bases SocketPermission &quot;listen&quot; on a range of ports, and Derby&apos;s network server port is within that range.&lt;/p&gt;

&lt;p&gt;Still, the network server should not rely on this fact. It is possible to run the network server on any port, not only those ports that happen be in the range that&apos;s given carte blanche by the platform&apos;s default policy. The network server will however not be able to run on those ports with the basic policy currently, only with a custom policy or with the security manager disabled.&lt;/p&gt;

&lt;p&gt;The default policy should make this permission explicit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685558">DERBY-6438</key>
            <summary>Explicitly grant SocketPermission &quot;listen&quot; in default server policy</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2013 10:51:27 +0000</created>
                <updated>Wed, 21 Jan 2015 00:23:16 +0000</updated>
                            <resolved>Mon, 19 May 2014 17:53:08 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.3.3.1</fixVersion>
                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.2.4</fixVersion>
                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.2.2</fixVersion>
                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                            <comments>
                            <comment id="13852810" author="knutanders" created="Thu, 19 Dec 2013 10:58:02 +0000"  >&lt;p&gt;For example, if you attempt to start a network server that listens to a port number lower than 1024 (given that the user has the required OS privileges to listen to such ports), the network server will fail on startup:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ java -jar derbynet.jar start -p 1000
Thu Dec 19 11:56:26 CET 2013 : Security manager installed using the Basic server security policy.
Thu Dec 19 11:56:27 CET 2013 : access denied (&quot;java.net.SocketPermission&quot; &quot;localhost:1000&quot; &quot;listen,resolve&quot;)
java.security.AccessControlException: access denied (&quot;java.net.SocketPermission&quot; &quot;localhost:1000&quot; &quot;listen,resolve&quot;)
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:372)
	at java.security.AccessController.checkPermission(AccessController.java:559)
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
	at java.lang.SecurityManager.checkListen(SecurityManager.java:1137)
	at java.net.ServerSocket.bind(ServerSocket.java:375)
	at java.net.ServerSocket.&amp;lt;init&amp;gt;(ServerSocket.java:237)
	at javax.net.DefaultServerSocketFactory.createServerSocket(ServerSocketFactory.java:231)
	at org.apache.derby.impl.drda.NetworkServerControlImpl.createServerSocket(NetworkServerControlImpl.java:698)
	at org.apache.derby.impl.drda.NetworkServerControlImpl.access$000(NetworkServerControlImpl.java:94)
	at org.apache.derby.impl.drda.NetworkServerControlImpl$1.run(NetworkServerControlImpl.java:748)
	at org.apache.derby.impl.drda.NetworkServerControlImpl$1.run(NetworkServerControlImpl.java:745)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(NetworkServerControlImpl.java:744)
	at org.apache.derby.impl.drda.NetworkServerControlImpl.executeWork(NetworkServerControlImpl.java:2277)
	at org.apache.derby.drda.NetworkServerControl.main(NetworkServerControl.java:353)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13853804" author="knutanders" created="Fri, 20 Dec 2013 09:08:54 +0000"  >&lt;p&gt;The attached patch d6438-1a.diff adds the following permission to the default server policy:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-comment&quot;&gt;// Allow the server to listen to the socket on the port specified with the
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// -p option to &lt;span class=&quot;code-quote&quot;&gt;&quot;NetworkServerControl start&quot;&lt;/span&gt; on the command line, or with
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// the portNumber parameter to the NetworkServerControl constructor in the
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// API, or with the property derby.drda.portNumber. The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; is 1527.
&lt;/span&gt;  permission java.net.SocketPermission &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:${derby.security.port}&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;listen&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It also adds some code to NetworkServerControl so that &lt;tt&gt;${derby.security.port&lt;/tt&gt;} gets replaced by the actual port that the network server is going to listen on.&lt;/p&gt;

&lt;p&gt;This change made it possible to start a network server on any port in my environment.&lt;/p&gt;

&lt;p&gt;Additionally, the patch states the listen permission explicitly in the test policy files. With that change, I was able to run suites.All with derby.tests.basePort=1000, which would fail miserably without the patch.&lt;/p&gt;

&lt;p&gt;I&apos;ve also verified that the full regression test suite runs cleanly without the derby.tests.basePort property.&lt;/p&gt;</comment>
                            <comment id="13853946" author="rhillegas" created="Fri, 20 Dec 2013 13:12:03 +0000"  >&lt;p&gt;Thanks, Knut. These changes look good to me. +1&lt;/p&gt;</comment>
                            <comment id="13855457" author="jira-bot" created="Mon, 23 Dec 2013 07:08:16 +0000"  >&lt;p&gt;Commit 1553081 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1553081&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1553081&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;: Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;/p&gt;</comment>
                            <comment id="13861106" author="jira-bot" created="Fri, 3 Jan 2014 02:18:19 +0000"  >&lt;p&gt;Commit 1554997 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1554997&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1554997&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
   backport of revision 1553081 from trunk&lt;/p&gt;</comment>
                            <comment id="13861193" author="myrna" created="Fri, 3 Jan 2014 04:26:43 +0000"  >&lt;p&gt;It is my understanding that it is up to the JVM to decide what range of ports to specify - is that correct?&lt;br/&gt;
In any case, I needed this backported to 10.10, so I did. Would there be an objection to backporting it further?&lt;/p&gt;</comment>
                            <comment id="13861310" author="knutanders" created="Fri, 3 Jan 2014 07:52:39 +0000"  >&lt;blockquote&gt;
&lt;p&gt;It is my understanding that it is up to the JVM to decide what range of ports to specify - is that correct?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s my understanding too.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In any case, I needed this backported to 10.10, so I did. Would there be an objection to backporting it further?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t see any problems with that.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13863629" author="jira-bot" created="Mon, 6 Jan 2014 23:31:04 +0000"  >&lt;p&gt;Commit 1556068 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.9&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556068&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1556068&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
   backport of revision 1554997 from 10.10&lt;/p&gt;</comment>
                            <comment id="13864373" author="jira-bot" created="Tue, 7 Jan 2014 16:41:44 +0000"  >&lt;p&gt;Commit 1556267 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556267&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1556267&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
   backport of revision 1556068 from 10.9&lt;/p&gt;</comment>
                            <comment id="13864725" author="jira-bot" created="Tue, 7 Jan 2014 21:50:39 +0000"  >&lt;p&gt;Commit 1556368 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.7&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556368&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1556368&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
  backport of revision 1556267 from 10.8&lt;/p&gt;</comment>
                            <comment id="13866610" author="jira-bot" created="Thu, 9 Jan 2014 12:48:00 +0000"  >&lt;p&gt;Commit 1556796 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/branches/10.6&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556796&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1556796&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;: Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;/p&gt;

&lt;p&gt;Merged revision 1556368 from 10.7.&lt;/p&gt;</comment>
                            <comment id="13866612" author="knutanders" created="Thu, 9 Jan 2014 12:49:55 +0000"  >&lt;p&gt;Thanks for backporting the fix, Myrna. I got a request for this fix on 10.6, so I did that backport myself (it merged cleanly from 10.7).&lt;/p&gt;

&lt;p&gt;Are you planning to backport it any further? If not, I&apos;ll mark the issue as resolved.&lt;/p&gt;</comment>
                            <comment id="13866894" author="jira-bot" created="Thu, 9 Jan 2014 18:41:33 +0000"  >&lt;p&gt;Commit 1556909 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.5&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556909&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1556909&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
  merge of revision 1556796 from 10.6&lt;/p&gt;</comment>
                            <comment id="13866903" author="myrna" created="Thu, 9 Jan 2014 18:51:39 +0000"  >&lt;p&gt;Backported to 10.5, which is as far as I intend to take it.&lt;/p&gt;</comment>
                            <comment id="13872475" author="myrna" created="Wed, 15 Jan 2014 19:27:30 +0000"  >&lt;p&gt;I would like to see a release note for this one. There is an (Oracle, and picked up by IBM) JVM security change that requests or suggests removal or limitation of the &apos;range of ports&apos; on which JVMS by default grant the &quot;listen&quot; permission. I cannot find details about this JVM change, but as a result of it, users that have (unknowingly) relied on this in the past will now have to modify their policy files, or Network Server will no longer work.&lt;/p&gt;

&lt;p&gt;I think a release note will be useful to draw attention to it.&lt;/p&gt;</comment>
                            <comment id="13873317" author="knutanders" created="Thu, 16 Jan 2014 12:20:58 +0000"  >&lt;p&gt;The JVM security change is described in the JDK 7u51 release notes under the header &quot;Change in Default Socket Permissions&quot;: &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/7u51-relnotes-2085002.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.oracle.com/technetwork/java/javase/7u51-relnotes-2085002.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The JDK release notes also have a more specific section about the problems this change causes for the Derby network server (look for &quot;Additional permission needed to run Java DB network server&quot;) and how to resolve them. The Derby release note for this issue could probably contain much of the same information.&lt;/p&gt;</comment>
                            <comment id="13874385" author="myrna" created="Fri, 17 Jan 2014 03:29:02 +0000"  >&lt;p&gt;Thanks for that link, Knut...Here&apos;s an attempt at a release note for this issue.&lt;br/&gt;
Review will be appreciated.&lt;br/&gt;
If OK, this issue can be resolved again.&lt;/p&gt;</comment>
                            <comment id="13874622" author="knutanders" created="Fri, 17 Jan 2014 10:17:37 +0000"  >&lt;p&gt;Thanks for writing the release note, Myrna. It looks good to me.&lt;/p&gt;

&lt;p&gt;I&apos;m uploading an updated version with some small adjustments: I replaced a couple of occurrences of &quot;Java DB&quot; with &quot;Derby&quot;, and also fixed up some minor issues with nesting of UL and LI elements reported by org.apache.derbyBuild.ReleaseNoteReader.&lt;/p&gt;</comment>
                            <comment id="13875030" author="myrna" created="Fri, 17 Jan 2014 18:05:39 +0000"  >&lt;p&gt;Attaching a copy of the updated server.policy (renamed to 1010_server.policy) as convenience for users using 10.10 and hitting this issue.&lt;/p&gt;</comment>
                            <comment id="13875031" author="myrna" created="Fri, 17 Jan 2014 18:06:46 +0000"  >&lt;p&gt;Thanks Knut, I didn&apos;t get around to running the release note checker yet... The updated file looks good to me. I&apos;ll resolve this issue again.&lt;/p&gt;</comment>
                            <comment id="13878652" author="rhillegas" created="Wed, 22 Jan 2014 13:45:08 +0000"  >&lt;p&gt;Attaching an updated version of the 1010_server.policy. I have confirmed that the old version flunks the server boot on JDK 7 and higher as reported on this derby-user thread: &lt;a href=&quot;http://apache-database.10148.n7.nabble.com/Network-Server-Access-Permissions-and-Java-1-7-0-51-td136583.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://apache-database.10148.n7.nabble.com/Network-Server-Access-Permissions-and-Java-1-7-0-51-td136583.html&lt;/a&gt;. The old version was missing a permissions block which is needed for managing extra file access controls on JDK 7 and higher. With the new policy file, I am able to boot the server and create an in-memory database using Java 1.8.0-ea-b121.&lt;/p&gt;</comment>
                            <comment id="13878669" author="rhillegas" created="Wed, 22 Jan 2014 14:02:49 +0000"  >&lt;p&gt;Attaching a third version of 1010_server.policy. The previous version included customizations to point the codebases at my file system. The third version uses variables to point at the codebases instead.&lt;/p&gt;</comment>
                            <comment id="13878684" author="rhillegas" created="Wed, 22 Jan 2014 14:24:39 +0000"  >&lt;p&gt;Attaching another version of 1010_server.policy. I found that the previous version allowed me to boot the server and create on-disk databases using Derby 10.10.1.1. However, when I tried to bring down the server like this...&lt;/p&gt;

&lt;p&gt;java  org.apache.derby.drda.NetworkServerControl shutdown -p 8246 -user \&quot;rick\&quot; -password rickspassword&lt;/p&gt;

&lt;p&gt;...the server crashed with this error...&lt;/p&gt;

&lt;p&gt;java.security.AccessControlException: access denied (&quot;java.sql.SQLPermission&quot; &quot;deregisterDriver&quot;)&lt;br/&gt;
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:457)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:884)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)&lt;br/&gt;
	at java.sql.DriverManager.deregisterDriver(DriverManager.java:402)&lt;br/&gt;
	at org.apache.derby.jdbc.AutoloadedDriver.unregisterDriverModule(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver20.stop(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.stop(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.shutdown(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver20.connect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDriver.connect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.drda.NetworkServerControlImpl.blockingStart(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.drda.NetworkServerControlImpl.executeWork(Unknown Source)&lt;br/&gt;
	at org.apache.derby.drda.NetworkServerControl.main(Unknown Source)&lt;/p&gt;

&lt;p&gt;The &quot;deregisterDriver&quot; permission is needed if you are running on JDK 8. The new version of 1010_server.policy adds the following permission to the derby engine and the derby server. With this extra permission, the 10.10.1.1 server comes down gracefully on JDK 8...&lt;/p&gt;

&lt;p&gt;  permission java.sql.SQLPermission &quot;deregisterDriver&quot;;&lt;/p&gt;</comment>
                            <comment id="13878752" author="chaase3" created="Wed, 22 Jan 2014 15:16:05 +0000"  >&lt;p&gt;I should reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6448&quot; title=&quot;Document new SocketPermission in Network Server policy file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6448&quot;&gt;&lt;del&gt;DERBY-6448&lt;/del&gt;&lt;/a&gt; and add that deregisterDriver permission to the policy, right? Currently it&apos;s only in the Dev Guide for the embedded driver. &lt;/p&gt;</comment>
                            <comment id="13878869" author="rhillegas" created="Wed, 22 Jan 2014 17:28:26 +0000"  >&lt;p&gt;Hi Kim: That sounds right to me. Thanks.&lt;/p&gt;</comment>
                            <comment id="13878905" author="myrna" created="Wed, 22 Jan 2014 17:56:02 +0000"  >&lt;p&gt;Thanks Rick, for updating the policy file...&lt;br/&gt;
John, I hope you can let us know if this now works.&lt;/p&gt;

&lt;p&gt;Kim, It seems to me that the documenting of the deregister policy as something needed also for network server belongs with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6239&quot; title=&quot;Document optional permission SQLPermission(&amp;quot;deregisterDriver&amp;quot;)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6239&quot;&gt;&lt;del&gt;DERBY-6239&lt;/del&gt;&lt;/a&gt;, I think you should add it there...&lt;/p&gt;

&lt;p&gt;I think the JVM vendors are wrong in requiring permissions within the live of a version, but I guess that&apos;s just me.&lt;/p&gt;

&lt;p&gt;And that opens up the question if we should leave this discussion at this bug, modify the default policy file in 10.10 to match the changes Rick made, or backport &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6224&quot; title=&quot;Issues with latest JDK 8 EA build because of missing SQLPermission&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6224&quot;&gt;&lt;del&gt;DERBY-6224&lt;/del&gt;&lt;/a&gt; altogether. And back to what version - presumably 10.8 when we started supporting Java 7. Or is this functionality also affecting older Derby versions?&lt;/p&gt;

&lt;p&gt;Opinions?&lt;/p&gt;</comment>
                            <comment id="13878944" author="chaase3" created="Wed, 22 Jan 2014 18:17:48 +0000"  >&lt;p&gt;You&apos;re right, Myrna &amp;#8211; I reopened &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6239&quot; title=&quot;Document optional permission SQLPermission(&amp;quot;deregisterDriver&amp;quot;)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6239&quot;&gt;&lt;del&gt;DERBY-6239&lt;/del&gt;&lt;/a&gt;. Thanks.&lt;/p&gt;</comment>
                            <comment id="13878959" author="rhillegas" created="Wed, 22 Jan 2014 18:26:27 +0000"  >&lt;p&gt;Hi Myrna,&lt;/p&gt;

&lt;p&gt;The &quot;deregisterDriver&quot; permission was introduced in Java 8. It looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6224&quot; title=&quot;Issues with latest JDK 8 EA build because of missing SQLPermission&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6224&quot;&gt;&lt;del&gt;DERBY-6224&lt;/del&gt;&lt;/a&gt; was backported to 10.9. I suppose that it makes sense backporting &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6224&quot; title=&quot;Issues with latest JDK 8 EA build because of missing SQLPermission&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6224&quot;&gt;&lt;del&gt;DERBY-6224&lt;/del&gt;&lt;/a&gt; to older Derby branches if we think that releases from those branches will be run on Java 8. Thanks.&lt;/p&gt;</comment>
                            <comment id="13878968" author="myrna" created="Wed, 22 Jan 2014 18:32:34 +0000"  >&lt;p&gt;Thanks for checking on that Rick...&lt;br/&gt;
I am confused though - John Moore did not have Java 8, he used Java 7 with u7_51 (&apos; 1.7.0_51&apos;), right?&lt;br/&gt;
So, maybe he did not need the deregister permission after all?&lt;/p&gt;</comment>
                            <comment id="13879043" author="rhillegas" created="Wed, 22 Jan 2014 19:09:43 +0000"  >&lt;p&gt;Hi Myrna,&lt;/p&gt;

&lt;p&gt;That&apos;s right. John didn&apos;t need the deregisterDriver permission on Java 7. But I noticed that I needed it when I ran 10.10.1.1 on Java 8. 10.10.1.1 is supposed to run on Java 8. The change to the JVM which broke Derby will appear in Java 8 also. To keep things simple for our users, I think we should stick to your original plan of publishing one 1010_server.policy which works on all JVMs. Thanks.&lt;/p&gt;</comment>
                            <comment id="13879223" author="mikem" created="Wed, 22 Jan 2014 21:48:00 +0000"  >&lt;p&gt;I also agree we should put out a single server policy file in 10.10 that works for as many jvms as possible.  If policy files allow, it would be nice to add a comment in the file noting the param is new for jdk18 and above but should be ok to include when using releases previous to jdk18 and will have no affect (i assume).  This will be good to get into the upcoming 10.10 apache release will be targeted at full support of jdk18 when it is actually released.&lt;/p&gt;

&lt;p&gt;the question for those of us wanting to support the newest pre-jdk18 releases coming from oracle now (and from dependent vendors in the near future) on derby releases prior to 10.10, is what exactly do we need to backport to address this new issue.  &lt;/p&gt;</comment>
                            <comment id="13879334" author="myrna" created="Wed, 22 Jan 2014 23:19:50 +0000"  >&lt;p&gt;The file attached to this issue is only intended as a convenience for our users using jdk 1.7 u51 - or jdk 18, until we have an official Apache 10.10.(2) release with the fixes in the default policyfile in it. &lt;/p&gt;

&lt;p&gt;I admit I did not test before attaching the file straight from the codebase, I &lt;b&gt;assumed&lt;/b&gt; it would work because I thought this is the same policy file that works as the default policy file included in derbynet.jar&lt;/p&gt;

&lt;p&gt;But it was not working as work-around, when you issue the command suggested:&lt;br/&gt;
     java -Djava.security.manager -Djava.security.policy=&lt;span class=&quot;error&quot;&gt;&amp;#91;filename&amp;#93;&lt;/span&gt; org.apache.derby.drda.NetworkServerControl start&amp;amp; &lt;br/&gt;
you got this error: &lt;br/&gt;
java.security.AccessControlException: access denied (&quot;java.util.PropertyPermission&quot; &quot;derby.__serverStartedFromCmdLine&quot; &quot;write&quot;)&lt;/p&gt;

&lt;p&gt;This permission is apparently not needed in the default policy file.&lt;/p&gt;

&lt;p&gt;Rick modified the 1010_server.policy workaround file by adding this permission, and then went on to add some further permissions needed to get it working under jdk18 - specifically the deregister permission. This puzzles me too - it seemed from the original notes that this was only needed for embedded.&lt;/p&gt;

&lt;p&gt;And I am still puzzled, I now also got myself jdk17u51, but I cannot get the command to work with the policy file, even though it has the &quot;derby.__serverStartedFromCmdLine&quot; permission that it&apos;s complaining about...I have tried modifying my CLASSPATH to have just derbyrun.jar, and to have derbyclient.jar;derbynet.jar, but I get the same effect...?&lt;br/&gt;
I added the permission to the various codebases in the workaround file (derbyclient.jar, derby.jar, derbytools.jar, derbynet.jar) and still get the same...&lt;br/&gt;
I must be doing something wrong, but what...&lt;/p&gt;</comment>
                            <comment id="13879865" author="knutanders" created="Thu, 23 Jan 2014 11:26:08 +0000"  >&lt;blockquote&gt;
&lt;p&gt;But it was not working as work-around, when you issue the command suggested:&lt;br/&gt;
     java -Djava.security.manager -Djava.security.policy=[filename] org.apache.derby.drda.NetworkServerControl start&amp;amp; &lt;br/&gt;
you got this error: &lt;br/&gt;
java.security.AccessControlException: access denied (&quot;java.util.PropertyPermission&quot; &quot;derby.__serverStartedFromCmdLine&quot; &quot;write&quot;)&lt;/p&gt;

&lt;p&gt;This permission is apparently not needed in the default policy file.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s correct. This property is set by NetworkServerControl&apos;s main() method &lt;b&gt;before&lt;/b&gt; the default security policy is installed, so it doesn&apos;t need any permissions to set the property in that case. In the case where we enable the security manager on the command line, the security manager is already installed when this code gets executed, and the permission is required in order to set the property.&lt;/p&gt;

&lt;p&gt;So it seems as if this permission is needed if and only if all of the following statements are true:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The server is started from the command line&lt;/li&gt;
	&lt;li&gt;A custom security policy is installed&lt;/li&gt;
	&lt;li&gt;The Java version is 1.7 or higher&lt;/li&gt;
&lt;/ol&gt;


&lt;blockquote&gt;
&lt;p&gt;Rick modified the 1010_server.policy workaround file by adding this permission, and then went on to add some further permissions needed to get it working under jdk18 - specifically the deregister permission. This puzzles me too - it seemed from the original notes that this was only needed for embedded.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;On head of trunk and the branches to which &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6224&quot; title=&quot;Issues with latest JDK 8 EA build because of missing SQLPermission&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6224&quot;&gt;&lt;del&gt;DERBY-6224&lt;/del&gt;&lt;/a&gt; has been backported, the deregisterDriver permission should not be needed by the network server policy, since server shutdown uses the deregister=false attribute when it shuts down the engine. Furthermore, the engine shutdown code was changed so that the lack of this permission did not make shutdown fail. Instead, it just writes a message to derby.log saying it couldn&apos;t deregister the driver.&lt;/p&gt;

&lt;p&gt;Since 10.10.1.1 doesn&apos;t have any of those fixes, it sounds reasonable to add that permission to the suggested custom policy attached to this issue. I don&apos;t think it should be added to the default server policy in future versions, though.&lt;/p&gt;</comment>
                            <comment id="13879902" author="knutanders" created="Thu, 23 Jan 2014 12:49:48 +0000"  >&lt;blockquote&gt;
&lt;p&gt;And I am still puzzled, I now also got myself jdk17u51, but I cannot get the command to work with the policy file, even though it has the &quot;derby.__serverStartedFromCmdLine&quot; permission that it&apos;s complaining about...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The 1010_server.policy file cannot be used directly as it is. It has to be customized for the environment in which it is used. One has to replace occurrences of ${derby.install.url} with the actual location of the jar files (on the form &lt;a href=&quot;file:///path/to/derby&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///path/to/derby&lt;/a&gt;) and ${derby.security.port} with the port that the network server will be listening on (typically 1527).&lt;/p&gt;</comment>
                            <comment id="13880392" author="myrna" created="Thu, 23 Jan 2014 21:37:16 +0000"  >&lt;p&gt;Thanks Knut for the explanations. &lt;/p&gt;

&lt;p&gt;I probably should have grabbed the template.policy file from the source code anyway - that one works without changes if I pass the correct parameter for derby.install.url.&lt;/p&gt;

&lt;p&gt;And I did figure out what I was doing wrong, mostly mistyping the url path for the &apos;derby.install.url&apos; property. For a while I missed the final &apos;/&apos;, in a long path i.e., in the end I passed in&lt;br/&gt;
-Dderby.install.url=&lt;a href=&quot;file:///c:/[blahblahetc]/1010jars&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/[blahblahetc]/1010jars&lt;/a&gt;&lt;br/&gt;
instead of &lt;br/&gt;
-Dderby.install.url=&lt;a href=&quot;file:///c:/[blahblahetc]/1010jars/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/[blahblahetc]/1010jars/&lt;/a&gt;&lt;br/&gt;
so it never found the jar files.&lt;/p&gt;

&lt;p&gt;Also, I had trouble with the number of slashes after the file url protocol identifier.&lt;br/&gt;
One, or three worked:&lt;br/&gt;
  -Dderby.install.url=&lt;a href=&quot;file:///c:/jars/1010jars/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/jars/1010jars/&lt;/a&gt; &lt;br/&gt;
  -Dderby.install.url=&lt;a href=&quot;file:/c:/jars/1010jars/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/c:/jars/1010jars/&lt;/a&gt;&lt;br/&gt;
but two did not. &lt;/p&gt;

&lt;p&gt;One more warning for possible users picking  up the 1010_server.policy file attached to this issue; if you have tracing on, you may need to resolve/pass in the property derby.drda.traceDirectory. &lt;/p&gt;

&lt;p&gt;Finally, this just a note, if I successfully started the server using the command identified:&lt;br/&gt;
     java -Djava.security.manager -Djava.security.policy=c:/policytst/1010_server.policy -Dderby.security.port=1527 -Dderby.install.url=&lt;a href=&quot;file:///c:/jars/1010jars/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/jars/1010jars/&lt;/a&gt; org.apache.derby.drda.NetworkServerControl start &amp;amp;&lt;br/&gt;
I could shutdown the server with just:&lt;br/&gt;
     java org.apache.derby.drda.NetworkServerControl shutdown&lt;br/&gt;
But when I tried to use the same policy file for the shutdown, I needed to add &quot;connect, resolve&quot; for the localhost:$&lt;/p&gt;
{derby.security.port}
&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="13881140" author="chaase3" created="Fri, 24 Jan 2014 16:53:02 +0000"  >&lt;p&gt;I&apos;m on a Unix system (Solaris) and am having trouble starting the network server too. My Derby jars ARE in /export/home/chaase/db-derby-10.10.1.1-bin/lib/.&lt;/p&gt;

&lt;p&gt;java -Djava.security.manager -Djava.security.policy=/home/cbhaase/1010_server.policy -Dderby.security.port=1527 -Dderby.install.url=/export/home/chaase/db-derby-10.10.1.1-bin/lib/ org.apache.derby.drda.NetworkServerControl start&lt;br/&gt;
java.security.policy: error adding Entry:&lt;br/&gt;
        java.net.MalformedURLException: no protocol: /export/home/chaase/db-derby-10.10.1.1-bin/lib/derby.jar&lt;br/&gt;
java.security.policy: error adding Entry:&lt;br/&gt;
        java.net.MalformedURLException: no protocol: /export/home/chaase/db-derby-10.10.1.1-bin/lib/derbynet.jar&lt;br/&gt;
java.security.policy: error adding Entry:&lt;br/&gt;
        java.net.MalformedURLException: no protocol: /export/home/chaase/db-derby-10.10.1.1-bin/lib/derbytools.jar&lt;br/&gt;
java.security.policy: error adding Entry:&lt;br/&gt;
        java.net.MalformedURLException: no protocol: /export/home/chaase/db-derby-10.10.1.1-bin/lib/derbyclient.jar&lt;br/&gt;
Fri Jan 24 11:41:37 EST 2014 : access denied (&quot;java.util.PropertyPermission&quot; &quot;derby.__serverStartedFromCmdLine&quot; &quot;write&quot;)&lt;br/&gt;
java.security.AccessControlException: access denied (&quot;java.util.PropertyPermission&quot; &quot;derby.__serverStartedFromCmdLine&quot; &quot;write&quot;)&lt;br/&gt;
        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:372)&lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:559)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)&lt;br/&gt;
        at java.lang.System.setProperty(System.java:783)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl$1.run(Unknown Source)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl$1.run(Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl.main(Unknown Source)&lt;/p&gt;</comment>
                            <comment id="13881147" author="rhillegas" created="Fri, 24 Jan 2014 17:01:52 +0000"  >&lt;p&gt;Hi Kim,&lt;/p&gt;

&lt;p&gt;It looks to me as though you have pointed derby.install.url at a directory specification instead of an URL. What is needed is a value which begins with the &quot;file:&quot; literal. See the experiments which Myrna recorded in the previous comment. You may need to play around with the number of /&apos;s which follow the file: literal.&lt;/p&gt;</comment>
                            <comment id="13881160" author="chaase3" created="Fri, 24 Jan 2014 17:13:41 +0000"  >&lt;p&gt;Oh silly me. One / and it started right up. Thanks!&lt;/p&gt;

&lt;p&gt;java -Djava.security.manager -Djava.security.policy=./1010_server.policy -Dderby.security.port=1527 -Dderby.install.url=&lt;a href=&quot;file:/export/home/chaase/db-derby-10.10.1.1-bin/lib/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/export/home/chaase/db-derby-10.10.1.1-bin/lib/&lt;/a&gt; org.apache.derby.drda.NetworkServerControl start&lt;br/&gt;
Fri Jan 24 12:12:50 EST 2014 : Apache Derby Network Server - 10.10.1.1 - (1458268) started and ready to accept connections on port 1527&lt;/p&gt;</comment>
                            <comment id="13901080" author="jamdiazdiaz" created="Fri, 14 Feb 2014 03:30:16 +0000"  >&lt;p&gt;I am in mac os x, using NB 7.4, glassfish 4, and get it error&lt;/p&gt;

&lt;p&gt;java -Djava.security.manager -Djava.security.policy=/Users/josediaz/Downloads/1010_server.policy -Dderby.security.port=1527 -Dderby.install.url=&lt;a href=&quot;file://Applications/NetBeans/glassfish-4.0/javadb/lib/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file://Applications/NetBeans/glassfish-4.0/javadb/lib/&lt;/a&gt; org.apache.derby.drda.NetworkServerControl start&lt;br/&gt;
Error: Could not find or load main class org.apache.derby.drda.NetworkServerControl&lt;/p&gt;</comment>
                            <comment id="13901443" author="rhillegas" created="Fri, 14 Feb 2014 13:32:36 +0000"  >&lt;p&gt;Hi Jose,&lt;/p&gt;

&lt;p&gt;That&apos;s the error you get when you try to boot a nonexistent class. It looks like the JVM can&apos;t find the derby jar files on your classpath. Try a simpler boot command without the security settings:&lt;/p&gt;

&lt;p&gt;java org.apache.derby.drda.NetworkServerControl start&lt;/p&gt;

&lt;p&gt;Hope this helps,&lt;br/&gt;
-Rick&lt;/p&gt;
</comment>
                            <comment id="13909961" author="danielstocker" created="Mon, 24 Feb 2014 01:20:26 +0000"  >&lt;p&gt;Environment: &lt;br/&gt;
OS: Windows 7 Pro SP1&lt;br/&gt;
JAVA: java version &quot;1.7.0_51&quot;, Java(TM) SE Runtime Environment (build 1.7.0_51-b13),Java HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)&lt;br/&gt;
DERBY: 10.10.1.1 (April 15, 2013 / SVN 1458268)&lt;/p&gt;

&lt;p&gt;Hi, I&apos;m experiencing the issue described here:&lt;br/&gt;
C:\derby\db-derby-10.10.1.1-bin\bin&amp;gt;startNetworkServer&lt;br/&gt;
Mon Feb 24 13:06:16 NZDT 2014 : Security manager installed using the Basic server security policy.&lt;br/&gt;
Mon Feb 24 13:06:19 NZDT 2014 : access denied (&quot;java.net.SocketPermission&quot; &quot;localhost:1527&quot; &quot;listen,resolve&quot;)&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve tried working around the issue by using the methods described, but get the same issue as others previously described:&lt;br/&gt;
C:\derby\db-derby-10.10.1.1-bin\bin&amp;gt;java -Djava.security.manager -Djava.security.policy=c:/derby/db-derby-10.10.1.1-bin/bin/1010_server.policy -Dderby.security.port=1527 -Dderby.install.url=&lt;a href=&quot;file:///c:/derby/db-derby-10.10.1.1-bin&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/derby/db-derby-10.10.1.1-bin&lt;/a&gt; org.apache.derby.drda.NetworkServerControl start&lt;br/&gt;
Mon Feb 24 13:10:39 NZDT 2014 : access denied (&quot;java.util.PropertyPermission&quot; &quot;derby.__serverStartedFromCmdLine&quot; &quot;write&quot;)&lt;br/&gt;
java.security.AccessControlException: access denied (&quot;java.util.PropertyPermission&quot; &quot;derby.__serverStartedFromCmdLine&quot; &quot;write&quot;)&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;/p&gt;

&lt;p&gt;I tried both the earliest (17/Jan/14 18:05) and latest policy file (22/Jan/14 14:24).&lt;br/&gt;
I also tried 1, 2 and 3 slashes after file: under derby.install.url parameter.&lt;br/&gt;
I also tried including and excluding the trailing slash at the end of derby.install.url parameter.&lt;br/&gt;
I also tried: java -Djava.security.manager -Djava.security.policy=c:/derby/db-derby-10.10.1.1-bin/bin/1010_server.policy -Dderby.security.port=1527 -Dderby.install.url=&lt;a href=&quot;file:///c:/derby/db-derby-10.10.1.1-bin&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/derby/db-derby-10.10.1.1-bin&lt;/a&gt; -jar derbyrun.jar server start&lt;br/&gt;
However I get the same error for all variations and am unable to get the network server running.&lt;br/&gt;
I notice there are a couple of other variables inside the policy file (derby.system.home and derby.drda.traceDirectory), do I have to provide parameters for those also?&lt;br/&gt;
As this is a local dev environment, perhaps the solution is to install an old version of Java SDK? In this case, which would be suitable?&lt;br/&gt;
Any help would be very much appreciated &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13910278" author="rhillegas" created="Mon, 24 Feb 2014 13:14:42 +0000"  >&lt;p&gt;Hi Daniel,&lt;/p&gt;

&lt;p&gt;The url which worked for Kim pointed at a directory which contains the Derby jars: &lt;a href=&quot;file:///c:/jars/1010jars/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/jars/1010jars/&lt;/a&gt; . It looks to me as though your url is pointing at the directory above the jar directory. Try...&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;file:///c:/derby/db-derby-10.10.1.1-bin/lib/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/derby/db-derby-10.10.1.1-bin/lib/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...instead of&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;file:///c:/derby/db-derby-10.10.1.1-bin&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///c:/derby/db-derby-10.10.1.1-bin&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The derby.system.home variable will be set by the Derby network server before it installs a security manager. The other variable, derby.drda.traceDirectory is not automatically set; but you only need to set it if you are tracing a network protocol handshake.&lt;/p&gt;

&lt;p&gt;If you need to downgrade your java version, 7u45 should work.&lt;/p&gt;

&lt;p&gt;If this is just a problem you&apos;re experiencing in development, you can turn off the security manager by setting the -noSecurityManager flag as described here: &lt;a href=&quot;http://db.apache.org/derby/docs/10.10/adminguide/tadminnetservopen.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.10/adminguide/tadminnetservopen.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hope this helps,&lt;br/&gt;
-Rick&lt;/p&gt;</comment>
                            <comment id="13910730" author="danielstocker" created="Mon, 24 Feb 2014 19:50:19 +0000"  >&lt;p&gt;Legend! Cheers Rick, much appreciated, all sorted, easy as that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13999469" author="jira-bot" created="Fri, 16 May 2014 01:44:25 +0100"  >&lt;p&gt;Commit 1595085 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.4&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1595085&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1595085&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
  merge of revision 1556909 from 10.5&lt;/p&gt;</comment>
                            <comment id="13999470" author="myrna" created="Fri, 16 May 2014 01:44:39 +0100"  >&lt;p&gt;I&apos;m reopening for backport to 10.4 and 10.3 after all.&lt;/p&gt;</comment>
                            <comment id="14001293" author="jira-bot" created="Mon, 19 May 2014 01:42:15 +0100"  >&lt;p&gt;Commit 1595710 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.3&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1595710&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1595710&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6438&quot; title=&quot;Explicitly grant SocketPermission &amp;quot;listen&amp;quot; in default server policy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6438&quot;&gt;&lt;del&gt;DERBY-6438&lt;/del&gt;&lt;/a&gt;; Explicitly grant SocketPermission &quot;listen&quot; in default server policy&lt;br/&gt;
   merge of revision 1595085 from 10.4&lt;/p&gt;</comment>
                            <comment id="14001976" author="myrna" created="Mon, 19 May 2014 17:53:08 +0100"  >&lt;p&gt;Resolving again. &lt;br/&gt;
Note that this permission is also needed with the latest ibm 1.5 fix packs - so even for 10.1 and 10.2. &lt;br/&gt;
I have frozen my saved test environments for 10.1 and 10.2 at ibm1.5.SR16 fp3, where the listen permission was not yet needed.&lt;/p&gt;</comment>
                            <comment id="14284773" author="myrna" created="Wed, 21 Jan 2015 00:23:16 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624351" name="1010_server.policy" size="10461" author="rhillegas" created="Wed, 22 Jan 2014 14:24:39 +0000"/>
                            <attachment id="12624348" name="1010_server.policy" size="10137" author="rhillegas" created="Wed, 22 Jan 2014 14:02:49 +0000"/>
                            <attachment id="12624343" name="1010_server.policy" size="10239" author="rhillegas" created="Wed, 22 Jan 2014 13:45:08 +0000"/>
                            <attachment id="12623696" name="1010_server.policy" size="9840" author="myrna" created="Fri, 17 Jan 2014 18:05:39 +0000"/>
                            <attachment id="12619781" name="d6438-1a.diff" size="23850" author="knutanders" created="Fri, 20 Dec 2013 09:08:54 +0000"/>
                            <attachment id="12623621" name="releaseNote.html" size="7967" author="knutanders" created="Fri, 17 Jan 2014 10:17:37 +0000"/>
                            <attachment id="12623567" name="releaseNote.html" size="7975" author="myrna" created="Fri, 17 Jan 2014 03:29:02 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12687652">DERBY-6448</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Dec 2013 13:12:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzkp1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364933</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>