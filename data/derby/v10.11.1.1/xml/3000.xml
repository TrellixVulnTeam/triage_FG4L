<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:25:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3000/DERBY-3000.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3000] getTables() call with 10.3 causes java.sql.SQLException: The parameter position &apos;8&apos; is out of range.  The number of parameters for this prepared  statement is &apos;7&apos;.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3000</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The DatabaseMetaData.getTables() call below causes this error with 10.3.  10.2 is fine.&lt;/p&gt;

&lt;p&gt;import java.sql.*;&lt;/p&gt;

&lt;p&gt;public class GetTables {&lt;/p&gt;

&lt;p&gt;    public static void main(String[] args) throws Exception {&lt;br/&gt;
	Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);&lt;br/&gt;
	Connection conn = DriverManager.getConnection(&quot;jdbc:derby:wombat;create=true&quot;);&lt;br/&gt;
	ResultSet tableRS = conn.getMetaData().getTables(null,&lt;br/&gt;
							 null, null, new String[]&lt;/p&gt;
{&quot;TABLE&quot;, &quot;GLOBAL TEMPORARY&quot;, &quot;LOCAL TEMPORARY&quot;, &quot;ALIAS&quot;, &quot;SYNONYM&quot;}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;	tableRS.close();&lt;br/&gt;
	conn.close();&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/kmarsden/repro/2976&amp;#93;&lt;/span&gt; java GetTables&lt;br/&gt;
Exception in thread &quot;main&quot; java.sql.SQLException: The parameter position &apos;8&apos; is out of range.  The number of parameters&lt;br/&gt;
for this prepared  statement is &apos;7&apos;.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:202)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedResultSet.noStateChangeException(EmbedResultSet.java:4414)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.setString(EmbedPreparedStatement.java:495)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedDatabaseMetaData.getTables(EmbedDatabaseMetaData.java:1766)&lt;br/&gt;
        at GetTables.main(GetTables.java:8)&lt;br/&gt;
Caused by: ERROR XCL13: The parameter position &apos;8&apos; is out of range.  The number of parameters for this prepared  stateme&lt;br/&gt;
nt is &apos;7&apos;.&lt;br/&gt;
        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:301)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericParameterValueSet.checkPosition(GenericParameterValueSet.java:317)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericParameterValueSet.getParameterForSet(GenericParameterValueSet.java:174)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.setString(EmbedPreparedStatement.java:492)&lt;br/&gt;
        ... 2 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12375774">DERBY-3000</key>
            <summary>getTables() call with 10.3 causes java.sql.SQLException: The parameter position &apos;8&apos; is out of range.  The number of parameters for this prepared  statement is &apos;7&apos;.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Aug 2007 19:42:30 +0100</created>
                <updated>Tue, 30 Jun 2009 16:55:47 +0100</updated>
                            <resolved>Thu, 16 Aug 2007 13:54:18 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12519121" author="kmarsden" created="Fri, 10 Aug 2007 22:11:56 +0100"  >&lt;p&gt;If this issue requires changing the metadata statements, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1107&quot; title=&quot;For existing databases JDBC metadata queries do not get updated properly  between maintenance versions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1107&quot;&gt;&lt;del&gt;DERBY-1107&lt;/del&gt;&lt;/a&gt; will also need to be fixed to allow metadata statements to be updated with maintenance releases.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12519165" author="kmarsden" created="Sat, 11 Aug 2007 00:31:33 +0100"  >&lt;p&gt;The workaround for this issue is to only pass table types returned by getTableTypes:&lt;br/&gt;
Table Types:&lt;br/&gt;
        SYNONYM&lt;br/&gt;
        SYSTEM TABLE&lt;br/&gt;
        TABLE&lt;br/&gt;
        VIEW&lt;/p&gt;

&lt;p&gt;or just pass null to the types argument to get all the types.&lt;/p&gt;

&lt;p&gt;The javadoc for getTables actually says:&lt;br/&gt;
types - a list of table types, which must be from the list of table types returned from getTableTypes(),to include; null returns all types.  So, I suppose it could be argued that this is incorrect usage, but I think it should still work since it did before.&lt;/p&gt;</comment>
                            <comment id="12519478" author="kmarsden" created="Mon, 13 Aug 2007 18:35:51 +0100"  >&lt;p&gt;My plan is to create a connection level warning if an invalid type is passed. Please let me know if that is not ok.  The alternative is to continue to throw an error but a more meaningful one. I hesitate to do that as it may impact existing apps.&lt;br/&gt;
I am open to opinions though.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;
</comment>
                            <comment id="12519480" author="djd" created="Mon, 13 Aug 2007 18:59:10 +0100"  >&lt;p&gt;I&apos;m not sure a warning is worth it. The table types must be from getTableTypes() is a new comment in JDK 6 (and hence JDBC4). JDBC 3 users will not be expecting such a warning to be issued. Also maybe such a change (to add a warning) should be under a new issue?&lt;/p&gt;</comment>
                            <comment id="12520056" author="kmarsden" created="Wed, 15 Aug 2007 19:26:06 +0100"  >&lt;p&gt;Here is a patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3000&quot; title=&quot;getTables() call with 10.3 causes java.sql.SQLException: The parameter position &amp;#39;8&amp;#39; is out of range.  The number of parameters for this prepared  statement is &amp;#39;7&amp;#39;.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3000&quot;&gt;&lt;del&gt;DERBY-3000&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1790&quot; title=&quot;DatabaseMetaData.getTables() with passed in table type of SYNONYM returns system tables and not SYNONYMS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1790&quot;&gt;&lt;del&gt;DERBY-1790&lt;/del&gt;&lt;/a&gt;.   The new behavior is that the table types are no longer just determined by the first letter but expect a match to the table types in getTableTypes()&lt;/p&gt;

&lt;p&gt;One possible concern about the patch is that applications that have used the workaround of passing a table type starting with &apos;A&apos; to  get Synonyms  will need to be changed.  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12330229">DERBY-1107</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12363871" name="DERBY-3000__DERBY_1790_diff.txt" size="7217" author="kmarsden" created="Wed, 15 Aug 2007 19:26:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Aug 2007 17:59:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0uv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>