<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:39:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2966/DERBY-2966.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2966] rs.moveToInsertRow() causes loss of connection with TERRITORY_BASED collation.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2966</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In the attached test case, rs.moveToInsertRow()  causes loss of the connection with a TERRITORY_BASED collation database. With UCS_BASIC it is fine.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12374298">DERBY-2966</key>
            <summary>rs.moveToInsertRow() causes loss of connection with TERRITORY_BASED collation.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jul 2007 21:56:26 +0100</created>
                <updated>Thu, 26 Jul 2007 17:34:00 +0100</updated>
                            <resolved>Tue, 24 Jul 2007 18:45:43 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12514333" author="kmarsden" created="Fri, 20 Jul 2007 22:01:42 +0100"  >&lt;p&gt;java NoConnectionBug&lt;/p&gt;


&lt;p&gt; UCS_BASIC collation&lt;br/&gt;
  Testing updateShort on SQL type SMALLINT&lt;br/&gt;
PASS: moveInsertRow did not cause loss of connection&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;snip all ok for UCSBASIC&amp;#93;&lt;/span&gt;&lt;/p&gt;



&lt;p&gt; Territory no_NO&lt;br/&gt;
  Testing updateShort on SQL type SMALLINT&lt;br/&gt;
Exception in thread &quot;main&quot; java.sql.SQLException: No current connection.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:104)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.noCurrentConnection(Util.java:208)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.checkExecStatus(EmbedStatement.java:1396)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1649)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeQuery(EmbedPreparedStatement.java:275)&lt;br/&gt;
        at NoConnectionBug.runTestUpdateXXXAllDataTypesInsertRow(NoConnectionBug.java:171)&lt;br/&gt;
        at NoConnectionBug.testUpdateXXXAllDataTypesInsertRow(NoConnectionBug.java:202)&lt;br/&gt;
        at NoConnectionBug.main(NoConnectionBug.java:110)&lt;/p&gt;</comment>
                            <comment id="12514334" author="kmarsden" created="Fri, 20 Jul 2007 22:03:17 +0100"  >&lt;p&gt;This was found during collation tessting the test testUpdateXXXAllDataTypesInsertRow(org.apache.derbyTesting.functionTests.tests.lang.UpdatableResultSetTest failed with  No current connection.&lt;/p&gt;</comment>
                            <comment id="12515044" author="mamtas" created="Tue, 24 Jul 2007 18:45:23 +0100"  >&lt;p&gt;Commited a patch in main (Revision: 559125) and migrated it into 10.3 codeline (Revision: 559133) . Commit comments were as follows&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2966&quot; title=&quot;rs.moveToInsertRow() causes loss of connection with TERRITORY_BASED collation.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2966&quot;&gt;&lt;del&gt;DERBY-2966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We need to have context set up inside a moveToInsertRow code because that code tries to do DTD.getNull and getNull needs to find RuleBasedCollator which is found by relying on the context. Putting the context fixed the problem.&lt;/p&gt;
</comment>
                            <comment id="12515133" author="kmarsden" created="Wed, 25 Jul 2007 02:59:24 +0100"  >&lt;p&gt;Thanks Mamta,&lt;/p&gt;

&lt;p&gt;The tests that were failing with no connection and no current row are passing now.&lt;/p&gt;</comment>
                            <comment id="12515764" author="kmarsden" created="Thu, 26 Jul 2007 17:34:00 +0100"  >&lt;p&gt;verified fix&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12369433">DERBY-2656</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12362268" name="NoConnectionBug.java" size="7617" author="kmarsden" created="Fri, 20 Jul 2007 22:01:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Jul 2007 17:45:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy11en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>