<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:35:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3970/DERBY-3970.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3970] PositionedStoreStream doesn&apos;t initialize itself properly</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3970</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When a PositionedStoreStream is created on top of a stream from store, it must properly initialize itself.&lt;br/&gt;
Proper initialization consists of initializing and resetting the stream to make sure the states of the streams are in sync.&lt;/p&gt;

&lt;p&gt;A case of out of sync stream states was detected in a test where the Clob reference wasn&apos;t kept, but a new Clob object was created for each operation, i.e:&lt;br/&gt;
  rs.getClob(1).length();&lt;br/&gt;
  rs.getClob(1).getSubString(...);&lt;/p&gt;

&lt;p&gt;A symptom of out of sync stream states is EOFException on a valid request.&lt;br/&gt;
I don&apos;t think the access style above is supposed to work, but the proper initialization should be performed anyway.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409692">DERBY-3970</key>
            <summary>PositionedStoreStream doesn&apos;t initialize itself properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Dec 2008 22:06:17 +0000</created>
                <updated>Tue, 14 Jun 2011 09:20:51 +0100</updated>
                            <resolved>Thu, 8 Jan 2009 11:27:52 +0000</resolved>
                                    <version>10.3.3.0</version>
                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12652536" author="kristwaa" created="Tue, 2 Dec 2008 22:09:46 +0000"  >&lt;p&gt;Patch 1a performs the initialization in the constructor and adjusts the calling code.&lt;br/&gt;
It also removed the resetting of the position variable in initStream, as only the first call will actually ensure the position of the underlying stream is set to zero. Subsequent calls are no-ops.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12652721" author="kristwaa" created="Wed, 3 Dec 2008 08:55:35 +0000"  >&lt;p&gt;Tests ran without errors (derbyall, suites.All).&lt;/p&gt;

&lt;p&gt;Committed patch 1a to trunk with revision 722812.&lt;/p&gt;</comment>
                            <comment id="12655205" author="kristwaa" created="Wed, 10 Dec 2008 14:03:47 +0000"  >&lt;p&gt;Backported fix 1a to 10.4 with revision 725286.&lt;br/&gt;
Regression tests ran cleanly on the 10.4 branch.&lt;/p&gt;</comment>
                            <comment id="12655215" author="kristwaa" created="Wed, 10 Dec 2008 14:12:52 +0000"  >&lt;p&gt;The patch cannot be backported cleanly to 10.3, and I suggest not to hand merge to get the fix into the branch.&lt;br/&gt;
If anyone disagrees, I think a manual merge is relatively easy. In general, the LOB machinery has now changed so much that it&apos;s getting hard to backport the fixes to 10.3.&lt;/p&gt;

&lt;p&gt;Unless I hear anything, I will close the issue in a few days.&lt;/p&gt;</comment>
                            <comment id="12661941" author="kristwaa" created="Thu, 8 Jan 2009 11:27:52 +0000"  >&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12406442">DERBY-3913</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12395135" name="derby-3970-1a-PositionedStoreStream_init.diff.txt" size="4486" author="kristwaa" created="Tue, 2 Dec 2008 22:09:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0g1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36419</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>