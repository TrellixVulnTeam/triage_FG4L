<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2302/DERBY-2302.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2302] AccessControlException for &apos;user.dir read&apos; in ClientSideSystemPropertiesTest.testConnection</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2302</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;See e.g. &lt;a href=&quot;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/Limited/testSummary-504492.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/Limited/testSummary-504492.html&lt;/a&gt;&lt;br/&gt;
Seen on TinderBox_Derby since svn r504394.&lt;/p&gt;

&lt;p&gt;1) testConnection(org.apache.derbyTesting.functionTests.tests.derbynet.ClientSideSystemPropertiesTest)java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)&lt;br/&gt;
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:546)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)&lt;br/&gt;
	at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)&lt;br/&gt;
	at java.lang.System.getProperty(System.java:652)&lt;br/&gt;
	at java.io.UnixFileSystem.resolve(UnixFileSystem.java:118)&lt;br/&gt;
	at java.io.File.getCanonicalPath(File.java:559)&lt;br/&gt;
	at org.apache.derby.client.am.LogWriter$1.run(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at org.apache.derby.client.am.LogWriter.getPrintWriter(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientBaseDataSource.computePrintWriter(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientBaseDataSource.computeDncLogWriter(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientBaseDataSource.computeDncLogWriterForNewConnection(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.ClientDriver.connect(Unknown Source)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:582)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:185)&lt;br/&gt;
	at org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:76)&lt;br/&gt;
	at org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:43)&lt;br/&gt;
	at org.apache.derbyTesting.junit.TestConfiguration.openDefaultConnection(TestConfiguration.java:764)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.openDefaultConnection(BaseJDBCTestCase.java:195)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.getConnection(BaseJDBCTestCase.java:84)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.ClientSideSystemPropertiesTest.testConnection(ClientSideSystemPropertiesTest.java:42)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:76)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;/p&gt;
</description>
                <environment>Java Version:    1.6.0&lt;br/&gt;
Java Vendor:     Sun Microsystems Inc.&lt;br/&gt;
Java home:       /usr/local/java/jdk1.6.0_01/jre&lt;br/&gt;
Java classpath:  /home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derby.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyclient.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbytools.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbynet.jar:/home/os136789/Apache/TinderBox_Derby/db2jcc/lib/db2jcc.jar:/home/os136789/Apache/TinderBox_Derby/db2jcc/lib/db2jcc_license_c.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyTesting.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyrun.jar:/home/os136789/Apache/TinderBox_Derby/trunk/tools/java/jakarta-oro-2.0.8.jar:/home/os136789/Apache/TinderBox_Derby/trunk/tools/java/junit.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_de_DE.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_es.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_fr.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_it.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_ja_JP.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_ko_KR.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_pt_BR.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_zh_CN.jar:/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyLocale_zh_TW.jar&lt;br/&gt;
OS name:         SunOS&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version:      5.10&lt;br/&gt;
Java user name:  os136789&lt;br/&gt;
Java user home:  /home/os136789&lt;br/&gt;
Java user dir:   /export/home/tmp/os136789/testingDerbyTinderBox/SunOS-5.10_i86pc-i386/org.apache.derbyTesting.functionTests.suites.All&lt;br/&gt;
java.specification.name: Java Platform API Specification&lt;br/&gt;
java.specification.version: 1.6&lt;br/&gt;
--------- Derby Information --------&lt;br/&gt;
JRE - JDBC: Java SE 6 - JDBC 4.0&lt;br/&gt;
[/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derby.jar] 10.3.0.0 alpha - (504492)&lt;br/&gt;
[/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbytools.jar] 10.3.0.0 alpha - (504492)&lt;br/&gt;
[/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbynet.jar] 10.3.0.0 alpha - (504492)&lt;br/&gt;
[/home/os136789/Apache/TinderBox_Derby/trunk/jars/insane/derbyclient.jar] 10.3.0.0 alpha - (504492)&lt;br/&gt;
[/home/os136789/Apache/TinderBox_Derby/db2jcc/lib/db2jcc.jar] 2.4 - (17)&lt;br/&gt;
[/home/os136789/Apache/TinderBox_Derby/db2jcc/lib/db2jcc_license_c.jar] 2.4 - (17)</environment>
        <key id="12362200">DERBY-2302</key>
            <summary>AccessControlException for &apos;user.dir read&apos; in ClientSideSystemPropertiesTest.testConnection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Feb 2007 14:17:44 +0000</created>
                <updated>Tue, 30 Jun 2009 16:55:50 +0100</updated>
                            <resolved>Mon, 14 May 2007 17:21:12 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12471339" author="mamtas" created="Thu, 8 Feb 2007 14:29:40 +0000"  >&lt;p&gt;The fix for the problem required granting derbyClient.jar 2 additional set of permissions&lt;br/&gt;
1)Property read permission for user.dir since that&apos;s where the Junit test wants to have the client tracing done. &lt;br/&gt;
   permission java.util.PropertyPermission &quot;user.dir&quot;, &quot;read&quot;;&lt;br/&gt;
2)Also, in order to read/write in user.dir directory, the client jar needs following additional permission&lt;br/&gt;
permission java.io.FilePermission &quot;$&lt;/p&gt;
{user.dir}
&lt;p&gt;$&lt;/p&gt;
{/}
&lt;p&gt;-&quot;, &quot;read,write&quot;;&lt;/p&gt;

&lt;p&gt;I am attaching the svn diff as DERBY2302_PolicyFileChange_diff_v1.txt&lt;/p&gt;

&lt;p&gt;The only file that changed is &lt;br/&gt;
java\testing\org\apache\derbyTesting\functionTests\util\derby_tests.policy&lt;/p&gt;

&lt;p&gt;Please let me know if anyone has any comments on this change.&lt;/p&gt;</comment>
                            <comment id="12471366" author="djd" created="Thu, 8 Feb 2007 15:34:16 +0000"  >&lt;p&gt;The comments you have in these Jira notes as to why these permissions are required would be very useful in the policy file.&lt;br/&gt;
Otherwise at somepoint in the future someone will have to figure out why such permissions are needed.&lt;/p&gt;

&lt;p&gt;Also the fact that only policy files were changed seems to imply that &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-811&quot; title=&quot;Creating trace files in derbytclient fails when running with a SecurityManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-811&quot;&gt;&lt;del&gt;DERBY-811&lt;/del&gt;&lt;/a&gt; has been fixed, would require some checking to confirm though.&lt;/p&gt;</comment>
                            <comment id="12471383" author="mamtas" created="Thu, 8 Feb 2007 16:09:16 +0000"  >&lt;p&gt;I have commited the policy file with comments in it (revision 504938). Next, I will verify if &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-811&quot; title=&quot;Creating trace files in derbytclient fails when running with a SecurityManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-811&quot;&gt;&lt;del&gt;DERBY-811&lt;/del&gt;&lt;/a&gt; has been fixed by this change.&lt;/p&gt;</comment>
                            <comment id="12471473" author="olesolberg" created="Thu, 8 Feb 2007 20:15:58 +0000"  >&lt;p&gt;Verified fixed in &lt;a href=&quot;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/Limited/testSummary-504938.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/Limited/testSummary-504938.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12350664" name="DERBY2302_PolicyFileChange_diff_v1.txt" size="597" author="mamtas" created="Thu, 8 Feb 2007 14:29:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Feb 2007 14:29:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ut3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38809</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>