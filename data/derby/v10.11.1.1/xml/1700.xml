<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1700/DERBY-1700.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1700] Remove passing of closeCleanup method to every ResultSet type since only the top ResultSet requires it.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1700</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;A UNION node will generate byte code to call this method:&lt;/p&gt;

&lt;p&gt;NoPutResultSet getUnionResultSet(NoPutResultSet source1,&lt;br/&gt;
NoPutResultSet source2,&lt;br/&gt;
Activation activation,&lt;br/&gt;
int resultSetNumber,&lt;br/&gt;
double optimizerEstimatedRowCount,&lt;br/&gt;
double optimizerEstimatedCost,&lt;br/&gt;
GeneratedMethod closeCleanup)&lt;/p&gt;

&lt;p&gt;The closeCleanup method is passed in as null for all result sets in a tree except the top one. Instead of passing it on each new result set, it would be much more efficient to have a setCloseMethod() that is only called once for the top result set.  Could also look at having an closeCleanup method in the interface and call it directly, rather than through reflection.&lt;/p&gt;

&lt;p&gt;This applies to any node that takes a closeCleanup method.&lt;/p&gt;

&lt;p&gt;Split out from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-766&quot; title=&quot;Improve code generation to handle 5000 unions in a select the  union test  in largeCodeGen&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-766&quot;&gt;&lt;del&gt;DERBY-766&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12348028">DERBY-1700</key>
            <summary>Remove passing of closeCleanup method to every ResultSet type since only the top ResultSet requires it.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djd">Daniel John Debrunner</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Aug 2006 21:22:27 +0100</created>
                <updated>Tue, 20 Mar 2007 23:34:12 +0000</updated>
                            <resolved>Fri, 22 Sep 2006 20:03:31 +0100</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12432250" author="djd" created="Fri, 1 Sep 2006 23:27:12 +0100"  >&lt;p&gt;E-mail thread on the actual fact that the close cleanup method is overly complex and provides basically no benefit.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200608.mbox/%3c44F766E2.4000304@apache.org%3e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/200608.mbox/%3c44F766E2.4000304@apache.org%3e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Will attach a series of patches that address this incrementally.&lt;/p&gt;</comment>
                            <comment id="12432251" author="djd" created="Fri, 1 Sep 2006 23:34:31 +0100"  >&lt;p&gt;Patch that removes the generation of the close cleanup method in the generated class.&lt;br/&gt;
Always pass null to the ResultSetFactoryMethods to indicate no cleanup method (so none is ever called)&lt;/p&gt;

&lt;p&gt;Cleanup method is not required as the execute method has generated code to reset/forgt the current time handling.&lt;br/&gt;
Only benefit is to null out three objects for possible early garbage collection.&lt;/p&gt;

&lt;p&gt;This is a first patch using incremental development. I will commit soon, all tests have passed.&lt;/p&gt;</comment>
                            <comment id="12433240" author="djd" created="Thu, 7 Sep 2006 22:25:39 +0100"  >&lt;p&gt;Patch the removes closeCleanup from ResultSet implementations:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove any field storing the reference to a close cleanup method&lt;/li&gt;
	&lt;li&gt;remove any calling of the method&lt;/li&gt;
	&lt;li&gt;remove passing the reference to the method in the constructor.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Will commit soon, tests all pass.&lt;/p&gt;

&lt;p&gt;next step will be to remove the passing of the null reference into the ResultSetFactory interface.&lt;/p&gt;</comment>
                            <comment id="12436293" author="djd" created="Wed, 20 Sep 2006 19:18:21 +0100"  >&lt;p&gt;Patch derby1700_diff_p3.txt - will commit soon, all tests pass.&lt;/p&gt;

&lt;p&gt;Next step that changes the methods in ResultSetFactory not to have a closeCleanup method parameter which due to the previous patches was always being passed in as null. Changed all callers to not pass the null and thus remove the closeMethodArgument in ResultSetNode.&lt;/p&gt;

&lt;p&gt;Since most of the calls are to ResultSetFactory  methods are by generated code cannot rely on compile time checks to ensure all callers are correct. Needed to reduced the argument count by one for the generated method call for any getXXXResultSet that no longer passes the closeCleanup (null) argument.  Have confidence in the change as derbyall passes and the code coverage numbers at &lt;a href=&quot;http://wiki.apache.org/db-derby/CodeCoverage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/CodeCoverage&lt;/a&gt; show complete coverage of these factory methods except for ones related to VTIs.&lt;/p&gt;</comment>
                            <comment id="12436975" author="djd" created="Fri, 22 Sep 2006 20:03:31 +0100"  >&lt;p&gt;Fixed in trunk and merged to 10.2 by Rick.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12340083" name="derby1700_diff_p1.txt" size="4158" author="djd" created="Fri, 1 Sep 2006 23:34:31 +0100"/>
                            <attachment id="12340414" name="derby1700_diff_p2.txt" size="58235" author="djd" created="Thu, 7 Sep 2006 22:25:39 +0100"/>
                            <attachment id="12341230" name="derby1700_diff_p3.txt" size="41899" author="djd" created="Wed, 20 Sep 2006 19:18:21 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30112</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>