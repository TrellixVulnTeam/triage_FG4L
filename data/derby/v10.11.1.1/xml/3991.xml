<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:07:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3991/DERBY-3991.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3991] Clob.truncate(0) throws exception</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3991</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Truncating a Clob to zero length is allowed according to the JDBC specification, which says the following about the len argument (in the @throws tag):&lt;br/&gt;
&quot;SQLException - if there is an error accessing the CLOB value or if len is less than 0 &quot;&lt;/p&gt;

&lt;p&gt;Derby throws an exception if zero is passed to truncate.&lt;/p&gt;

&lt;p&gt;A quick inspection of the code suggests that truncating a Clob to the empty string is easy to support.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12410702">DERBY-3991</key>
            <summary>Clob.truncate(0) throws exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yunlee">Yun Lee</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Dec 2008 12:48:54 +0000</created>
                <updated>Thu, 16 Jul 2009 22:24:22 +0100</updated>
                            <resolved>Fri, 8 May 2009 14:32:52 +0100</resolved>
                                    <version>10.3.3.1</version>
                    <version>10.4.2.1</version>
                    <version>10.6.1.0</version>
                                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.2.0</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12656615" author="kristwaa" created="Mon, 15 Dec 2008 12:52:02 +0000"  >&lt;p&gt;&apos;derby-3991-1a-ClobTruncateZeroTest.diff&apos; adds two tests demonstrating the issue. When run, you should get 4 failures.&lt;/p&gt;</comment>
                            <comment id="12689976" author="yunlee" created="Fri, 27 Mar 2009 17:31:02 +0000"  >&lt;p&gt;Hi,  all. I&apos;m a prospective student for GSOC, Yun Lee. I have posted a patch for this issue, wish for your comments. &lt;/p&gt;

&lt;p&gt;At this moment, I&apos;m in the user group, without the permission to assign this issue to myself. How to apply for the developer group, please?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12690165" author="yunlee" created="Sat, 28 Mar 2009 03:35:35 +0000"  >&lt;p&gt;The patch derby-3991-2a.diff adopts the test cases in derby-3991-1a-ClobTruncateZeroTest.diff provided by Kristian, and contains a change on  java/engine/org/apache/derby/impl/jdbc/EmbedClob.java. With the patch, Test cases can run without any problem. Please check it. Thanks!&lt;/p&gt;</comment>
                            <comment id="12693715" author="kristwaa" created="Mon, 30 Mar 2009 11:19:58 +0100"  >&lt;p&gt;The patch looks good to me.&lt;/p&gt;

&lt;p&gt;You could consider trying to access the empty string using a stream too (currently the test I wrote originally only uses getSubString).&lt;br/&gt;
Users will also see a different error message with the embedded driver now. Does this warrant a release note?&lt;br/&gt;
The new error message is both more specific and it is the same as the one thrown by the client driver, which is justification enough for the change.&lt;/p&gt;

&lt;p&gt;I&apos;ll kick off a test run.&lt;/p&gt;</comment>
                            <comment id="12693746" author="kristwaa" created="Mon, 30 Mar 2009 13:44:43 +0100"  >&lt;p&gt;derbyall and suites.All ran without failures in my sandbox (Solaris 10, Sun JDK 1.6).&lt;/p&gt;</comment>
                            <comment id="12694119" author="yunlee" created="Tue, 31 Mar 2009 15:02:05 +0100"  >&lt;p&gt;Kistian, thanks for your comments. &lt;/p&gt;

&lt;p&gt;&amp;gt;You could consider trying to access the empty string using a stream too (currently the test I wrote originally only uses getSubString). &lt;br/&gt;
I will do it later.&lt;/p&gt;

&lt;p&gt;&amp;gt;Users will also see a different error message with the embedded driver now. Does this warrant a release note? &lt;br/&gt;
&amp;gt;The new error message is both more specific and it is the same as the one thrown by the client driver, which is justification enough for the change.&lt;br/&gt;
I&apos;m not sure. Do you mean I replaced &apos;SQLState.BLOB_BAD_POSITION&apos; with &apos;SQLState.BLOB_NONPOSITIVE_LENGTH&apos; in EmbedClob.java? If you do, I just want to give a clearer exception message.As a new comer, I don&apos;t know whether it&apos;s proper to do so, and don&apos;t know what it does with &apos; a release note&apos;. Wish for your explanation.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;
</comment>
                            <comment id="12694129" author="kristwaa" created="Tue, 31 Mar 2009 15:34:09 +0100"  >&lt;p&gt;Regarding the error message, I&apos;m just wondering if the users should be notified about the change through a release note &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. We have a release note template under &quot;trunk/tools/release/templates/releaseNote.html&quot;, if you want to take a look.&lt;br/&gt;
I agree the change is a good one, but I don&apos;t know if the change requires that the community notifies the users about the changed error message.&lt;br/&gt;
Maybe someone else in the community has a stronger opinion about this?&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; FYI, here are the release notes for 10.4: &lt;a href=&quot;http://db.apache.org/derby/releases/release-10.4.2.0.cgi#Release%20Notes%20for%20Derby%2010.4.2.0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/releases/release-10.4.2.0.cgi#Release%20Notes%20for%20Derby%2010.4.2.0&lt;/a&gt;&lt;br/&gt;
    Note especially under &quot;Issues&quot; and the &quot;Note for DERBY-X&quot; paragraphs.&lt;/p&gt;</comment>
                            <comment id="12694187" author="dagw" created="Tue, 31 Mar 2009 18:22:17 +0100"  >&lt;p&gt;I think if the error message is documented for the usage case (often they are not..), then it is a API change and we should have &lt;br/&gt;
a release note. If the actual error message is not documented in the user docs, it is less clear to me that a release note is needed..&lt;br/&gt;
It may still be prudent do add one, though. I would not object to it.&lt;/p&gt;</comment>
                            <comment id="12697543" author="yunlee" created="Thu, 9 Apr 2009 16:50:19 +0100"  >&lt;p&gt;Thanks for your detailed advice, Kristian and Dag.&lt;/p&gt;

&lt;p&gt;I have added Stream test for empty String. &lt;/p&gt;

&lt;p&gt;Besides, I provide a release note for the change on truncate(). It addresses two changes:&lt;br/&gt;
1.Accept zero length. &lt;br/&gt;
2.Give a more specific error message for nonpositive length.&lt;/p&gt;

&lt;p&gt;I think accepting zero length is more important than giving a more specific error message. As the type of this issue is &apos;Bug&apos;.&lt;/p&gt;

&lt;p&gt;Wish for your comments!&lt;/p&gt;

&lt;p&gt;Yun&lt;/p&gt;
</comment>
                            <comment id="12698802" author="kristwaa" created="Tue, 14 Apr 2009 16:18:05 +0100"  >&lt;p&gt;Thank you, Yun.&lt;/p&gt;

&lt;p&gt;I have committed patch 3 to trunk with revision 764800.&lt;br/&gt;
I think the release note needs some more work. For instance, do we want to describe two issues in one release note (zero length allowed, and the change of error message), or would it be better with a release note for each issue?&lt;/p&gt;</comment>
                            <comment id="12698805" author="kristwaa" created="Tue, 14 Apr 2009 16:27:46 +0100"  >&lt;p&gt;As a start, I tried to rewrite the release note, but I&apos;m not sure if it is acceptable. Please review.&lt;/p&gt;

&lt;p&gt;The file is now attached as &apos;releaseNote.html&apos; to allow the release note generator to pick it up.&lt;/p&gt;</comment>
                            <comment id="12699716" author="yunlee" created="Thu, 16 Apr 2009 15:25:36 +0100"  >&lt;p&gt;I&apos;m sorry to make some mistake in operating on the &apos;edit&apos; option of the issue, now just restore it to the old state.&lt;/p&gt;</comment>
                            <comment id="12700587" author="yunlee" created="Sun, 19 Apr 2009 14:16:31 +0100"  >&lt;p&gt;&amp;gt;I think the release note needs some more work. For instance, do we want to describe two issues in one release note (zero length allowed, and the change of error message), or would it be better with a release note for each issue?&lt;/p&gt;

&lt;p&gt;Kristian, thanks for your committing, it&apos;s a good message. And  I would love to provide two release notes for the two change points. &lt;/p&gt;

&lt;p&gt;However, I have some questions about the name of release notes. You have said &apos;The file is now attached as &apos;releaseNote.html&apos; to allow the release note generator to pick it up&apos;, do you mean a release note must have the identical name of &apos;releaseNote.html&apos;? If so, should I post the two release notes in two times with the same name of &apos;releaseNote.html&apos;?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12700687" author="knutanders" created="Mon, 20 Apr 2009 08:48:50 +0100"  >&lt;p&gt;Do we actually need to mention that truncate(0) no longer throws an exception? We don&apos;t normally write release notes for that kind of changes (&quot;something that didn&apos;t work now works&quot;). Mentioning the changed SQLState is sufficient, in my opinion.&lt;/p&gt;</comment>
                            <comment id="12700694" author="kristwaa" created="Mon, 20 Apr 2009 09:24:09 +0100"  >&lt;p&gt;Yun,&lt;br/&gt;
&amp;gt; However, I have some questions about the name of release notes. You have said &apos;The file is now attached as &apos;releaseNote.html&apos; to allow the release note generator to pick it up&apos;, do you mean a release note must have the identical name of &apos;releaseNote.html&apos;? If so, should I post the two release notes in two times with the same name of &apos;releaseNote.html&apos;?&lt;/p&gt;

&lt;p&gt;I don&apos;t think we can attach two release notes to the same issue and have the release notes generator pick them both up. If we end up with such a scenario, I think we have to split the issue into two (or create a sub-issue).&lt;/p&gt;

&lt;p&gt;The only feedback from the community so far has been to write a release note for the changed SQLState only. If you agree, you can start rewriting the release note again.&lt;br/&gt;
You can attach the next version of the release note as &apos;releaseNote.html&apos; as well. The release notes generator will pick up the newest version.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="12700814" author="yunlee" created="Mon, 20 Apr 2009 15:57:38 +0100"  >&lt;p&gt;OK, Kristian. I&apos;ve got it, and will post a new releasenote on SQLState later.&lt;/p&gt;

&lt;p&gt;Good luck&lt;br/&gt;
Yun&lt;/p&gt;</comment>
                            <comment id="12701146" author="yunlee" created="Tue, 21 Apr 2009 13:49:02 +0100"  >&lt;p&gt;Kristian, after receiving your and Knut&apos;s advice, I have provided a new releaseNote.html to focus on the change on SQLException message, it&apos;s clearer  indeed. Please check it! Thanks!&lt;/p&gt;


&lt;p&gt;Yun&lt;/p&gt;</comment>
                            <comment id="12701511" author="kristwaa" created="Wed, 22 Apr 2009 13:44:14 +0100"  >&lt;p&gt;The release note looks good to me.&lt;br/&gt;
I&apos;ll start the work on backporting the patch to older branches.&lt;/p&gt;</comment>
                            <comment id="12703088" author="kristwaa" created="Mon, 27 Apr 2009 12:58:51 +0100"  >&lt;p&gt;Backported patch 3 to 10.5 with revision 768939 and to 10.4 with revision 768940.&lt;/p&gt;</comment>
                            <comment id="12707340" author="kmarsden" created="Fri, 8 May 2009 14:32:52 +0100"  >&lt;p&gt;Looks like this has been resolved.&lt;/p&gt;</comment>
                            <comment id="12711126" author="kristwaa" created="Wed, 20 May 2009 13:47:56 +0100"  >&lt;p&gt;Closing this issue.&lt;br/&gt;
Thanks for doing the work, Yun!&lt;/p&gt;</comment>
                            <comment id="12716008" author="myrna" created="Wed, 3 Jun 2009 18:54:21 +0100"  >&lt;p&gt;The releaseNote.html failed the checks performed by the ReleaseNoteReader (java org.apache.derbyBuild.ReleaseNoteReader) because of a missing &amp;lt;/p&amp;gt; tag, so I fixed that up.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396088" name="derby-3991-1a-ClobTruncateZeroTest.diff" size="1627" author="kristwaa" created="Mon, 15 Dec 2008 12:52:02 +0000"/>
                            <attachment id="12403825" name="derby-3991-2a.diff" size="2583" author="yunlee" created="Fri, 27 Mar 2009 17:31:02 +0000"/>
                            <attachment id="12405078" name="derby-3991-3.diff" size="2659" author="yunlee" created="Thu, 9 Apr 2009 16:50:19 +0100"/>
                            <attachment id="12405080" name="derby-3991-3.releaseNote.html" size="4433" author="yunlee" created="Thu, 9 Apr 2009 16:50:19 +0100"/>
                            <attachment id="12405079" name="derby-3991-3.stat" size="149" author="yunlee" created="Thu, 9 Apr 2009 16:50:19 +0100"/>
                            <attachment id="12409798" name="releaseNote.html" size="4359" author="myrna" created="Wed, 3 Jun 2009 18:54:21 +0100"/>
                            <attachment id="12406028" name="releaseNote.html" size="4353" author="yunlee" created="Tue, 21 Apr 2009 13:49:02 +0100"/>
                            <attachment id="12405427" name="releaseNote.html" size="4832" author="kristwaa" created="Tue, 14 Apr 2009 16:27:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Mar 2009 17:31:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0s3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38370</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>