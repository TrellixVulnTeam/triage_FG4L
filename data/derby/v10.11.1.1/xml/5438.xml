<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5438/DERBY-5438.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5438] Empty MAPS table in toursdb</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5438</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The toursdb that&apos;s bundled with 10.7.1.1 and 10.8.1.2 (and the 10.8.2.1 release candidate) has no rows in the MAPS table. Version 10.6.2.1 had three rows in that table:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from maps;&lt;br/&gt;
MAP_ID     |MAP_NAME                |REGION                    |AREA      |PHOTO_FORMAT              |PICTURE                                                                                                                         &lt;br/&gt;
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br/&gt;
1          |North Ocean             |Cup Island                |1776.1100 |gif                       |4749463839613601fe00f70000000000800000008000808000000080800080008080808080c0c0c0ff000000ff00ffff000000ffff00ff00ffffffffff00000&amp;amp;&lt;br/&gt;
2          |Middle Ocean            |Small Island              |1166.7700 |gif                       |47494638396192008e00f70000000000800000008000808000000080800080008080808080c0c0c0ff000000ff00ffff000000ffff00ff00ffffffffff00000&amp;amp;&lt;br/&gt;
3          |South Ocean             |Witch Island              |9117.9000 |gif                       |474946383961f602f301f70000000000800000008000808000000080800080008080808080c0c0c0ff000000ff00ffff000000ffff00ff00ffffffffff00000&amp;amp;&lt;/p&gt;

&lt;p&gt;3 rows selected&lt;/p&gt;

&lt;p&gt;Building it on a clean trunk and looking at generated/toursdb/toursdb.out gives the following hint:&lt;/p&gt;

&lt;p&gt;FAIL &amp;#8211; unexpected exception: java.sql.SQLException: Database &apos;toursDB&apos; not found.&lt;br/&gt;
java.sql.SQLException: Database &apos;toursDB&apos; not found.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:148)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:227)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(EmbedConnection.java:3085)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(EmbedConnection.java:735)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:414)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection30.&amp;lt;init&amp;gt;(EmbedConnection30.java:73)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection40.&amp;lt;init&amp;gt;(EmbedConnection40.java:51)&lt;br/&gt;
        at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:70)&lt;br/&gt;
        at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:248)&lt;br/&gt;
        at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:146)&lt;br/&gt;
        at java.sql.DriverManager.getConnection(DriverManager.java:582)&lt;br/&gt;
        at java.sql.DriverManager.getConnection(DriverManager.java:207)&lt;br/&gt;
        at toursdb.insertMaps.main(insertMaps.java:51)&lt;br/&gt;
Caused by: java.sql.SQLException: Database &apos;toursDB&apos; not found.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)&lt;br/&gt;
        ... 14 more&lt;/p&gt;

&lt;p&gt;I suspect this was introduced by the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3986&quot; title=&quot;Stop dropping build artifacts in the subversion-controlled source tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3986&quot;&gt;DERBY-3986&lt;/a&gt; when the destination directory for toursdb was changed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525177">DERBY-5438</key>
            <summary>Empty MAPS table in toursdb</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Sep 2011 13:08:13 +0100</created>
                <updated>Tue, 24 Jul 2012 18:26:09 +0100</updated>
                            <resolved>Fri, 30 Sep 2011 12:05:26 +0100</resolved>
                                    <version>10.7.1.1</version>
                    <version>10.8.1.2</version>
                    <version>10.8.2.2</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Demos/Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13117245" author="knutanders" created="Thu, 29 Sep 2011 13:35:01 +0100"  >&lt;p&gt;Actually, the exception isn&apos;t caused by the moving, but rather because insertMaps uses the url jdbc:derby:toursDB (mixed case), whereas the ij script that creates the database uses jdbc:derby:toursdb (lower case). It might have worked before on case-insensitive file systems. After adjusting the URL to match the one in the script, I see this exception instead:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.io.FileNotFoundException: cupisle.gif (No such file or directory)&lt;br/&gt;
        at java.io.FileInputStream.open(Native Method)&lt;br/&gt;
        at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:120)&lt;br/&gt;
        at toursdb.insertMaps.insertRows(insertMaps.java:74)&lt;br/&gt;
        at toursdb.insertMaps.main(insertMaps.java:51)&lt;/p&gt;</comment>
                            <comment id="13117340" author="knutanders" created="Thu, 29 Sep 2011 15:55:37 +0100"  >&lt;p&gt;Attaching a patch that makes the following changes:&lt;/p&gt;

&lt;p&gt;1) Stop catching and printing exceptions in insertMaps.main(). Instead let the method throw the exception so that the exit status of the Java process reflects that it failed, and the build stops. With this change only, &quot;ant all&quot; fails with this message:&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
/code/derby/trunk/build.xml:625: The following error occurred while executing this line:&lt;br/&gt;
/code/derby/trunk/java/demo/build.xml:125: The following error occurred while executing this line:&lt;br/&gt;
/code/derby/trunk/java/demo/toursdb/build.xml:92: Java returned: 1&lt;/p&gt;

&lt;p&gt;Then we&apos;ll notice if similar problems are introduced later.&lt;/p&gt;

&lt;p&gt;2) Change the URL used by insertMaps to match the one used in build.xml (toursDB -&amp;gt; toursdb) to fix the database not found error.&lt;/p&gt;

&lt;p&gt;3) Change the directory for the Java process that runs insertMaps to java/demo/toursdb, to avoid the FileNotFoundExceptions, and instead set derby.system.home to make derby.log and the database end up in generated/toursdb.&lt;/p&gt;

&lt;p&gt;With these changes, the MAPS table gets populated when I run &quot;ant all&quot; in my environment.&lt;/p&gt;</comment>
                            <comment id="13117973" author="knutanders" created="Fri, 30 Sep 2011 12:05:26 +0100"  >&lt;p&gt;Committed revision 1177589.&lt;br/&gt;
Merged to 10.8 and committed revision 1177591.&lt;/p&gt;</comment>
                            <comment id="13118154" author="dagw" created="Fri, 30 Sep 2011 16:59:45 +0100"  >&lt;p&gt;Changes look good to me. +1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12497002" name="d5438.diff" size="3036" author="knutanders" created="Thu, 29 Sep 2011 15:55:37 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Sep 2011 15:59:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0awf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35584</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>