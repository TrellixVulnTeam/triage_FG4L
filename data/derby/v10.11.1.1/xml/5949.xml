<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:41:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5949/DERBY-5949.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5949] Fix PropertySetter to take account of Java 8</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5949</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Early access versions of Java SE 8 are available.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12611663">DERBY-5949</key>
            <summary>Fix PropertySetter to take account of Java 8</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Oct 2012 03:38:04 +0100</created>
                <updated>Tue, 9 Apr 2013 17:55:20 +0100</updated>
                                                                            <component>Build tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13568854" author="rhillegas" created="Fri, 1 Feb 2013 16:32:04 +0000"  >&lt;p&gt;Attaching derby-5949-01-aa-addJava8.diff. This patch adds PropertySetter support for Java 8 environments. I am running regression tests on Java 7 now.&lt;/p&gt;

&lt;p&gt;After applying this patch, I can build Derby on my mac using Open JDK 8 by setting the java18compile.classpath property like this:&lt;/p&gt;

&lt;p&gt;java18compile.classpath=/Library/Java/JavaVirtualMachines/jdk1.8.0/classes&lt;/p&gt;

&lt;p&gt;However, the build still fails during the generation of toursdb because of VerifyErrors, as described on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6000&quot; title=&quot;Implement support for JDBC 4.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6000&quot;&gt;&lt;del&gt;DERBY-6000&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;If the tests pass, I intend to commit this patch. This will allow me to continue work on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6000&quot; title=&quot;Implement support for JDBC 4.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6000&quot;&gt;&lt;del&gt;DERBY-6000&lt;/del&gt;&lt;/a&gt;. However, this issue needs to remain open until we verify that we can build cleanly on Open JDK 8 after the VerifyErrors are fixed there.&lt;/p&gt;


&lt;p&gt;Touches the following files:&lt;/p&gt;


&lt;p&gt;--------------&lt;/p&gt;

&lt;p&gt;M       java/build/org/apache/derbyPreBuild/PropertySetter.java&lt;br/&gt;
M       build.xml&lt;/p&gt;</comment>
                            <comment id="13568933" author="rhillegas" created="Fri, 1 Feb 2013 18:21:08 +0000"  >&lt;p&gt;Tests passed cleanly for me on derby-5949-01-aa-addJava8.diff. Committed at subversion revision 1441568.&lt;/p&gt;</comment>
                            <comment id="13572636" author="rhillegas" created="Wed, 6 Feb 2013 18:21:51 +0000"  >&lt;p&gt;Attaching derby-5949-02-aa-noverify.diff. This patch adds a -noverify switch to the toursdb targets in order to hack around &lt;a href=&quot;http://bugs.sun.com/view_bug.do?bug_id=8004967&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/view_bug.do?bug_id=8004967&lt;/a&gt; . This allows us to build Derby on Open JDK 8. Committed at subversion revision 1443109.&lt;/p&gt;

&lt;p&gt;Without this patch, the build dies while trying to generate toursdb. That is because merely connecting to a database trips a VerifyError when running on Java 8. This patch can be backed out after &lt;a href=&quot;http://bugs.sun.com/view_bug.do?bug_id=8004967&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/view_bug.do?bug_id=8004967&lt;/a&gt; is fixed.&lt;/p&gt;

&lt;p&gt;With this patch, I can build on Java 8 on my mac provided that I set the following ant property:&lt;/p&gt;

&lt;p&gt;  java18compile.classpath=/Library/Java/JavaVirtualMachines/jdk1.8.0/classes&lt;/p&gt;



&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M       java/demo/toursdb/build.xml&lt;/p&gt;</comment>
                            <comment id="13578455" author="rhillegas" created="Thu, 14 Feb 2013 16:11:33 +0000"  >&lt;p&gt;Attaching derby-5949-03-aa-revertNoverify.diff. This patch reverts the previous derby-5949-02-aa-noverify.diff patch. The Open JDK tl repository ( &lt;a href=&quot;http://hg.openjdk.java.net/jdk8/tl&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hg.openjdk.java.net/jdk8/tl&lt;/a&gt; ) now contains the fix to the verification bug which was choking the Derby build during the generation of toursdb ( &lt;a href=&quot;http://bugs.sun.com/view_bug.do?bug_id=8004967&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/view_bug.do?bug_id=8004967&lt;/a&gt; ). After applying this reverting patch, Derby builds cleanly on an Open JDK 8 built from the tl repository. Committed at subversion revision 1446255.&lt;/p&gt;

&lt;p&gt;I suggest that we leave this issue open for a while in case other people need to make changes to allow Derby to build in other Java 8 environments.&lt;/p&gt;


&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M       java/demo/toursdb/build.xml&lt;/p&gt;</comment>
                            <comment id="13579725" author="dagw" created="Sat, 16 Feb 2013 06:13:06 +0000"  >&lt;p&gt;Using ant 1.8.4 I found I had to specify ANT_OPTS=&quot;-Dbuild.compiler=modern&quot; to avoid this error:&lt;/p&gt;

&lt;p&gt;   $ ant all&lt;br/&gt;
   Buildfile: C:\cygwin\home\dwanvik\java\sb\sb0\build.xml&lt;/p&gt;

&lt;p&gt;   checkCompilerLevel:&lt;/p&gt;

&lt;p&gt;   BUILD FAILED&lt;br/&gt;
   C:\cygwin\home\dwanvik\java\sb\sb0\build.xml:161: Class not found: javac1.8&lt;/p&gt;

&lt;p&gt;I found this bug report for ant which may be relevant: &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=53347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=53347&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13612946" author="rhillegas" created="Mon, 25 Mar 2013 18:20:46 +0000"  >&lt;p&gt;Ported derby-5949-01-aa-addJava8.diff from trunk to 10.9 branch at subversion revision 1460804.&lt;/p&gt;</comment>
                            <comment id="13626815" author="rhillegas" created="Tue, 9 Apr 2013 17:54:49 +0100"  >&lt;p&gt;Porting this fix to 10.8 would be tricky because PropertySetter was substantially reorganized in 10.9 (see DERBY-54850). Porting the PropertySetter reorganization to 10.8 is probably tricky because 10.9 stopped supporting Java 1.4. More than a simple port is probably required if people want to build the 10.8 branch with a Java 8 compiler.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12528876">DERBY-5485</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12616758">DERBY-6000</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12567593" name="derby-5949-01-aa-addJava8.diff" size="1611" author="rhillegas" created="Fri, 1 Feb 2013 16:32:04 +0000"/>
                            <attachment id="12568267" name="derby-5949-02-aa-noverify.diff" size="917" author="rhillegas" created="Wed, 6 Feb 2013 18:21:51 +0000"/>
                            <attachment id="12569350" name="derby-5949-03-aa-revertNoverify.diff" size="917" author="rhillegas" created="Thu, 14 Feb 2013 16:11:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Feb 2013 16:32:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy3gyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>54065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>