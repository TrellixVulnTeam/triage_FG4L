<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:17:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6230/DERBY-6230.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6230] Use the JVM&apos;s cache of Number instances in ReuseFactory</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6230</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;ReuseFactory has a cache of Byte, Short, Integer and Long instances to avoid excessive allocation of such instances.&lt;/p&gt;

&lt;p&gt;As of Java 5, the JVM has a cache of its own, available through static valueOf() methods in these classes.&lt;/p&gt;

&lt;p&gt;The JVM&apos;s cache is guaranteed to have at least all values in the range &lt;span class=&quot;error&quot;&gt;&amp;#91;-128, 127&amp;#93;&lt;/span&gt;. ReuseFactory currently caches Integer instances in the range &lt;span class=&quot;error&quot;&gt;&amp;#91;-1, 18&amp;#93;&lt;/span&gt; plus a few special values, and Byte, Short and Long instances in the range &lt;span class=&quot;error&quot;&gt;&amp;#91;0, 10&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;If we change ReuseFactory so that it uses the JVM&apos;s cache, the number of cache misses will be lower, and the code will become shorter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12649679">DERBY-6230</key>
            <summary>Use the JVM&apos;s cache of Number instances in ReuseFactory</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 May 2013 12:16:17 +0100</created>
                <updated>Wed, 3 Sep 2014 09:31:27 +0100</updated>
                            <resolved>Thu, 30 May 2013 08:20:28 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13668249" author="knutanders" created="Tue, 28 May 2013 12:43:42 +0100"  >&lt;p&gt;All tests ran cleanly with derby-6230-01-a.diff, which changes ReuseFactory so that it calls &lt;/p&gt;
{Byte,Short,Integer,Long}
&lt;p&gt;.valueOf() instead of maintaining its own cache.&lt;/p&gt;

&lt;p&gt;With one exception, all values that were previously available from the cache are still returned without allocating a new instance. The exception is Integer.MAX_VALUE, which was one of the special cases in the original code. That value is not guaranteed to be cached by Integer.valueOf(int).&lt;/p&gt;

&lt;p&gt;I chose to not add a special case for Integer.MAX_VALUE in the patch, as I&apos;m fine with leaving it to the JVM to decide which values are worthwhile caching, and the net effect of the change is that more values are taken from the cache even though it&apos;s not a superset of the old values. However, if someone thinks ReuseFactory.getInteger() should still have a special case for Integer.MAX_VALUE, I&apos;m fine with reintroducing it too.&lt;/p&gt;</comment>
                            <comment id="13670121" author="knutanders" created="Thu, 30 May 2013 08:20:28 +0100"  >&lt;p&gt;Committed revision 1487773.&lt;/p&gt;</comment>
                            <comment id="14119569" author="knutanders" created="Wed, 3 Sep 2014 09:31:27 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585018" name="derby-6230-01-a.diff" size="3291" author="knutanders" created="Tue, 28 May 2013 12:43:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzerzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330341</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>