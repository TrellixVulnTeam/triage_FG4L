<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:54:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6546/DERBY-6546.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6546] Database can&apos;t be dropped on Windows using the decoration of LuceneSupportPermsTest</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6546</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;LuceneSupportPermsTest piles on sql authorization, sql authentication, custom policy file, custom locale, and single use decorators. With this combination, the database cannot be removed at test termination on Windows machines. The problem may be that the authentication hurdle prevents the decorator machinery from getting a connection to the database in order to shut it down. So files are left open and Windows can&apos;t delete the database directory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709557">DERBY-6546</key>
            <summary>Database can&apos;t be dropped on Windows using the decoration of LuceneSupportPermsTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Apr 2014 15:46:49 +0100</created>
                <updated>Wed, 21 Jan 2015 00:23:24 +0000</updated>
                            <resolved>Thu, 24 Apr 2014 08:44:13 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13976627" author="knutanders" created="Tue, 22 Apr 2014 11:44:44 +0100"  >&lt;p&gt;Probably, one of the decorators needs to connect to the database in its tearDown() method. Since the decorators&apos; tearDown() methods execute after the tearDown() method of the test case, that will cause the database to be rebooted after the engine was shut down.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="13976731" author="knutanders" created="Tue, 22 Apr 2014 14:12:54 +0100"  >&lt;p&gt;I think the DatabasePropertyTestSetup.builtinAuthentication() decorator is the culprit. It reboots the database so that it can reset the properties. Since the database is dropped when the test is done anyway, I suppose we could have used DatabasePropertyTestSetup.builtinAuthenticationNoTeardown(), which skips resetting the properties.&lt;/p&gt;

&lt;p&gt;The attached patch (d6546-1a.diff) takes a different approach and moves the shutdown of the database from the test case and into DropDatabaseTestSetup. This way, it doesn&apos;t matter what the other decorators do, since DropDatabaseTestSetup will shut down the database immediately before it is dropped.&lt;/p&gt;

&lt;p&gt;LuceneSupportPermsTest runs cleanly for me on Windows with the patch, and the database is removed when it&apos;s done.&lt;/p&gt;</comment>
                            <comment id="13976774" author="rhillegas" created="Tue, 22 Apr 2014 14:44:30 +0100"  >&lt;p&gt;Thanks, Knut. This looks cleaner and simpler.&lt;/p&gt;</comment>
                            <comment id="13979403" author="jira-bot" created="Thu, 24 Apr 2014 08:43:37 +0100"  >&lt;p&gt;Commit 1589624 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1589624&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1589624&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6546&quot; title=&quot;Database can&amp;#39;t be dropped on Windows using the decoration of LuceneSupportPermsTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6546&quot;&gt;&lt;del&gt;DERBY-6546&lt;/del&gt;&lt;/a&gt;: Database can&apos;t be dropped on Windows using the decoration of LuceneSupportPermsTest&lt;/p&gt;

&lt;p&gt;Move database shutdown from the tearDown() method of the test case to&lt;br/&gt;
DropDatabaseTestSuite so that no intermediate decorators reboot the&lt;br/&gt;
database before it is dropped.&lt;/p&gt;</comment>
                            <comment id="14284795" author="myrna" created="Wed, 21 Jan 2015 00:23:24 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12708743">DERBY-6544</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12641234" name="d6546-1a.diff" size="7456" author="knutanders" created="Tue, 22 Apr 2014 14:12:54 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Apr 2014 10:44:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzoo87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>