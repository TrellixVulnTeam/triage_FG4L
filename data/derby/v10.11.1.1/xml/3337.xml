<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3337/DERBY-3337.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3337] convert jdbcapi/derbyStress.java to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3337</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Convert derbyStress to JUnit. Framework will have to be setup for running in a low memory profile.  Temporarily moved the test back to derbyall. See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3336&quot; title=&quot;jdbcapi/derbyStress.java no longer runs with low memory heap so does not provide testing for leak scenarios &quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3336&quot;&gt;&lt;del&gt;DERBY-3336&lt;/del&gt;&lt;/a&gt; for details and possible options moving forward.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12386656">DERBY-3337</key>
            <summary>convert jdbcapi/derbyStress.java to JUnit</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Jan 2008 23:47:34 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:19 +0100</updated>
                            <resolved>Tue, 5 Jul 2011 18:24:57 +0100</resolved>
                                                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.2.4</fixVersion>
                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12703907" author="kmarsden" created="Wed, 29 Apr 2009 01:26:56 +0100"  >&lt;p&gt;Unassigning Christopher. We haven&apos;t heard from him in over a year. Christopher, please reassign yourself if you would like to continue working on this issue.&lt;/p&gt;</comment>
                            <comment id="13050639" author="kmarsden" created="Thu, 16 Jun 2011 19:39:22 +0100"  >&lt;p&gt;In working on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4200&quot; title=&quot;client side OutOfMemoryError running derbnetclientmats:jdbcapi/derbyStress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4200&quot;&gt;&lt;del&gt;DERBY-4200&lt;/del&gt;&lt;/a&gt;, I decided finally that it makes most sense to first convert this test to JUnit and add it to the memory suite and then add in a property for the periodic sleeps where needed for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4200&quot; title=&quot;client side OutOfMemoryError running derbnetclientmats:jdbcapi/derbyStress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4200&quot;&gt;&lt;del&gt;DERBY-4200&lt;/del&gt;&lt;/a&gt;. I think I will rename the test to MemoryLeakFixesTest and move it to the memory directory and suite.&lt;/p&gt;

&lt;p&gt;Although the test currently runs with 64MB, I found that at least on Windows it runs fine with 16MB like the other memory tests so I think can be pulled into memory._Suite&lt;/p&gt;



</comment>
                            <comment id="13057806" author="kmarsden" created="Thu, 30 Jun 2011 14:09:28 +0100"  >&lt;p&gt;This patch converts  derbyStress to junit and moves  it to memory.MemoryLeakFixesTest and adds it to the memory suite so it will get picked up by lowmem testing.&lt;/p&gt;

&lt;p&gt;The test has a system property derby.tests.waitforfinalizermillis which can be set to put in arbitrary waits to catch up in case it is needed for the finalizer to catch up. I am thinking I might try to modify it further to call Runtime.freememMemory() and only sleep if we are running short, but I think I will check this in first if nobody objects.&lt;/p&gt;

&lt;p&gt;I still need to run tests.&lt;/p&gt;</comment>
                            <comment id="13057985" author="knutanders" created="Thu, 30 Jun 2011 19:55:30 +0100"  >&lt;p&gt;The changes look fine to me, although it might be better to keep the handling of the derby.tests.waitforfinalizermillis property localized to the test (I&apos;m assuming it&apos;s not meant to be used by other tests as a general mechanism?).&lt;/p&gt;

&lt;p&gt;In sleepForFinalizer(), we should probably let the InterruptedException propagate up to the caller rather than printing it.&lt;/p&gt;</comment>
                            <comment id="13058062" author="kmarsden" created="Thu, 30 Jun 2011 21:40:26 +0100"  >&lt;p&gt;Thanks Knut for the review. I had the property in the test at first, but then decided it would be better to keep the various properties centralized as much as possible rather than scattered about.  I suppose if other tests had this problem, they could use it.&lt;/p&gt;

&lt;p&gt;I am not a big fan of the property actually as it has to be tuned and can cause unneeded sleeps.    I just realized there is a Runtime.runFinalization() method.  Maybe I could just  make the test by default run finalazation if  freeMemory()  runs low.  Do you think that is too much of an inteference with the test?   I keep thinking this is something the jvm&apos;s should do.&lt;/p&gt;

&lt;p&gt;I will definitely make the change to throw the  InterruptedException.&lt;/p&gt;</comment>
                            <comment id="13058097" author="kmarsden" created="Thu, 30 Jun 2011 22:53:32 +0100"  >&lt;p&gt;Here is a patch with the property removed.  Instead of the sleep, we call runFinalization() if there is less than a half MB of free memory.&lt;/p&gt;

&lt;p&gt;On IBM JDK 1.6 where (with the first patch), I was seeing the test fail intermittently with 16MB and the property not set, it now seems to pass consistently, just calling runFinalization() a few times (as can be seen with -Dderby.tests.debug=true&lt;/p&gt;

&lt;p&gt;I think I like this approach better and think it still tests that Derby does not leak.&lt;/p&gt;
</comment>
                            <comment id="13058242" author="knutanders" created="Fri, 1 Jul 2011 08:44:41 +0100"  >&lt;p&gt;+1. The updated patch looks cleaner, and I agree that it still tests that Derby doesn&apos;t leak.&lt;/p&gt;</comment>
                            <comment id="13685202" author="knutanders" created="Mon, 17 Jun 2013 10:19:19 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12424185">DERBY-4200</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12484767" name="derby-3337_diff.txt" size="22516" author="kmarsden" created="Thu, 30 Jun 2011 14:09:28 +0100"/>
                            <attachment id="12484832" name="derby-3337_noprop_diff.txt" size="20378" author="kmarsden" created="Thu, 30 Jun 2011 22:53:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jun 2011 18:55:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0epz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>