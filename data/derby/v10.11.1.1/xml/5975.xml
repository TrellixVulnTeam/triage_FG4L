<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:37:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5975/DERBY-5975.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5975] intermittent nightly test failure across releases in Derby5937SlaveShutdownTest.testSlaveFailoverLeak</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5975</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Across multiple versions nightly tests have failed in Derby5937SlaveShutdownTest.testSlaveFailoverLeak.&lt;br/&gt;
Subsequent to this no other test runs and thus we get no info printed to the log, and the ibm test&lt;br/&gt;
reporter does not post anything other than a red box if the tests do not finish.  Not sure if the&lt;br/&gt;
tests are hanging as part of trying to clean up the failure or if the next test is hanging.  Will post &lt;br/&gt;
test runs that have failed in additional comments.&lt;/p&gt;

&lt;p&gt;So far I have only seen this on weme6.2 windows runs.  Likely there is a timing issue that causes the&lt;br/&gt;
test to fail and then bad cleanup of this test leads to hang.  In the one stack I see as thread stuck&lt;br/&gt;
in shutdown and a thread stuck waiting on the log.  &lt;/p&gt;

&lt;p&gt;If no easy fixes for this it may make sense to disable this test in this one environment until someone&lt;br/&gt;
wants to work on this one.  Then we can at least get the rest of the testing to procede.&lt;/p&gt;

&lt;p&gt;(emb)jdbcapi.DatabaseMetaDataTest.testGetColumns_DERBY5274 used 343 ms .&lt;br/&gt;
(emb)jdbcapi.DatabaseMetaDataTest.testDMDconnClosed used 79 ms  Test upgrade done.&lt;br/&gt;
Test upgrade from: 10.9.1.0, phase: POST UPGRADE&lt;br/&gt;
.&lt;br/&gt;
(emb)upgradeTests.BasicSetup.noConnectionAfterHardUpgrade used 156 ms  Test upgrade done.&lt;br/&gt;
.&lt;br/&gt;
(emb)replicationTests.Derby5937SlaveShutdownTest.testSlaveFailoverLeak used 24221 ms F&lt;/p&gt;</description>
                <environment>windows weme6.2</environment>
        <key id="12614200">DERBY-5975</key>
            <summary>intermittent nightly test failure across releases in Derby5937SlaveShutdownTest.testSlaveFailoverLeak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="mikem">Mike Matrigali</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Oct 2012 16:37:33 +0000</created>
                <updated>Wed, 19 Jun 2013 18:17:20 +0100</updated>
                            <resolved>Mon, 26 Nov 2012 21:57:17 +0000</resolved>
                                    <version>10.8.3.0</version>
                    <version>10.9.2.2</version>
                    <version>10.10.1.1</version>
                                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13487933" author="mikem" created="Wed, 31 Oct 2012 16:41:18 +0000"  >&lt;p&gt;failed twice against trunk, windows/vmware,  weme6.2 on 10/27/12 and 10/28/12 and then worked on 10/29  - builds 1403143&lt;br/&gt;
and 1402922&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/main/windows/suites.All_history.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/main/windows/suites.All_history.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13487956" author="mikem" created="Wed, 31 Oct 2012 16:57:42 +0000"  >&lt;p&gt;failed on 10/27 and 10/29 against 10.9, windows/vmware, weme6.2, worked on 10/28&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_9/windows/suites.All_history.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_9/windows/suites.All_history.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On 10/29 got some dump to the result log:&lt;/p&gt;

&lt;p&gt;(emb)replicationTests.Derby5937SlaveShutdownTest.testSlaveFailoverLeak used 20252 ms F&lt;br/&gt;
Stack Traces of Threads:&lt;/p&gt;


&lt;p&gt;ThreadName=Triggered DumpAgent Thread(239B3234)&lt;br/&gt;
Status=Running&lt;/p&gt;

&lt;p&gt;ThreadName=main(003353CC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23956EC0 (Object monitor for org/apache/derby/impl/store/raw/log/LogToFile @ 02704A60)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(00223700)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.flush(JJ)V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.flush(Lorg/apache/derby/iapi/store/raw/log/LogInstant;)V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.checkpointWithTran(Lorg/apache/derby/iapi/store/raw/xact/RawTransaction;Lorg/apache/derby/iapi/store/raw/RawStoreFactory;Lorg/apache/derby/iapi/store/raw/data/DataFactory;Lorg/apache/derby/iapi/store/raw/xact/TransactionFactory;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.checkpoint(Lorg/apache/derby/iapi/store/raw/RawStoreFactory;Lorg/apache/derby/iapi/store/raw/data/DataFactory;Lorg/apache/derby/iapi/store/raw/xact/TransactionFactory;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/store/raw/RawStore.stop()V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/TopService.stop(Ljava/lang/Object;)V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/TopService.shutdown()Z&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/BaseMonitor.shutdown(Ljava/lang/Object;)V&lt;br/&gt;
	In org/apache/derby/impl/db/DatabaseContextImpl.cleanupOnError(Ljava/lang/Throwable;)V&lt;br/&gt;
	In org/apache/derby/iapi/services/context/ContextManager.cleanupOnError(Ljava/lang/Throwable;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/jdbc/TransactionResourceImpl.cleanupOnError(Ljava/lang/Throwable;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/jdbc/EmbedConnection.&amp;lt;init&amp;gt;(Lorg/apache/derby/jdbc/InternalDriver;Ljava/lang/String;Ljava/util/Properties;)V&lt;br/&gt;
	In org/apache/derby/jdbc/Driver169.getNewEmbedConnection(Ljava/lang/String;Ljava/util/Properties;)Lorg/apache/derby/impl/jdbc/EmbedConnection;&lt;br/&gt;
	In org/apache/derby/jdbc/InternalDriver.connect(Ljava/lang/String;Ljava/util/Properties;)Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derby/jdbc/EmbeddedSimpleDataSource.getConnection(Ljava/lang/String;Ljava/lang/String;)Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derby/jdbc/EmbeddedSimpleDataSource.getConnection()Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derbyTesting/junit/JDBCDataSource.shutdownDatabase(Ljavax/sql/DataSource;)V&lt;br/&gt;
	In org/apache/derbyTesting/junit/DropDatabaseSetup.tearDown()V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In org/apache/derbyTesting/junit/BaseTestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestDecorator.basicRun(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestDecorator.basicRun(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/textui/TestRunner.doRun(Ljunit/framework/Test;Z)Ljunit/framework/TestResult;&lt;br/&gt;
	In junit/textui/TestRunner.start([Ljava/lang/String;)Ljunit/framework/TestResult;&lt;br/&gt;
	In junit/textui/TestRunner.main([Ljava/lang/String;)V&lt;/p&gt;

&lt;p&gt;ThreadName=JIT Compilation Thread(0033562C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=003350D8 (System monitor)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(00223C00)&lt;/p&gt;

&lt;p&gt;ThreadName=Finalizer thread(00335FAC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=0033D090 (System monitor)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(2163EE00)&lt;/p&gt;

&lt;p&gt;ThreadName=Thread-73(0033F02C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23970F10 (Object monitor for java/util/Timer$TimerImpl @ 011DD260)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22B26000)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In java/util/Timer$TimerImpl.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.rawStoreDaemon(0033EDCC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23955F60 (Object monitor for org/apache/derby/impl/services/daemon/BasicDaemon @ 0126CD40)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(24B55100)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait(J)V&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.rest()Z&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.antiGC(0033EB6C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=239598C0 (Object monitor for org/apache/derby/impl/services/monitor/AntiGC @ 01352128)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22D47F00)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/AntiGC.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=Thread-361(0033E90C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=2395CC70 (Object monitor for java/util/Timer$TimerImpl @ 0220D490)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(23E25500)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In java/util/Timer$TimerImpl.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.rawStoreDaemon(239B28B4)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=2397CD50 (Object monitor for org/apache/derby/impl/services/daemon/BasicDaemon @ 027134C0)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22374200)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait(J)V&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.rest()Z&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.slave.ping-d5937-slave-db(239B2D74)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23958A50 (Object monitor for java/lang/Object @ 02713510)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(24B55C00)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/store/replication/net/ReplicationMessageReceive$SlavePingThread.run()V&lt;/p&gt;

&lt;p&gt;Stack Traces of Threads:&lt;/p&gt;


&lt;p&gt;ThreadName=Triggered DumpAgent Thread(239B3234)&lt;br/&gt;
Status=Running&lt;/p&gt;

&lt;p&gt;ThreadName=main(003353CC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23956EC0 (Object monitor for org/apache/derby/impl/store/raw/log/LogToFile @ 02704A60)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(00223700)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.flush(JJ)V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.flush(Lorg/apache/derby/iapi/store/raw/log/LogInstant;)V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.checkpointWithTran(Lorg/apache/derby/iapi/store/raw/xact/RawTransaction;Lorg/apache/derby/iapi/store/raw/RawStoreFactory;Lorg/apache/derby/iapi/store/raw/data/DataFactory;Lorg/apache/derby/iapi/store/raw/xact/TransactionFactory;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.checkpoint(Lorg/apache/derby/iapi/store/raw/RawStoreFactory;Lorg/apache/derby/iapi/store/raw/data/DataFactory;Lorg/apache/derby/iapi/store/raw/xact/TransactionFactory;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/store/raw/RawStore.stop()V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/TopService.stop(Ljava/lang/Object;)V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/TopService.shutdown()Z&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/BaseMonitor.shutdown(Ljava/lang/Object;)V&lt;br/&gt;
	In org/apache/derby/impl/db/DatabaseContextImpl.cleanupOnError(Ljava/lang/Throwable;)V&lt;br/&gt;
	In org/apache/derby/iapi/services/context/ContextManager.cleanupOnError(Ljava/lang/Throwable;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/jdbc/TransactionResourceImpl.cleanupOnError(Ljava/lang/Throwable;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/jdbc/EmbedConnection.&amp;lt;init&amp;gt;(Lorg/apache/derby/jdbc/InternalDriver;Ljava/lang/String;Ljava/util/Properties;)V&lt;br/&gt;
	In org/apache/derby/jdbc/Driver169.getNewEmbedConnection(Ljava/lang/String;Ljava/util/Properties;)Lorg/apache/derby/impl/jdbc/EmbedConnection;&lt;br/&gt;
	In org/apache/derby/jdbc/InternalDriver.connect(Ljava/lang/String;Ljava/util/Properties;)Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derby/jdbc/EmbeddedSimpleDataSource.getConnection(Ljava/lang/String;Ljava/lang/String;)Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derby/jdbc/EmbeddedSimpleDataSource.getConnection()Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derbyTesting/junit/JDBCDataSource.shutdownDatabase(Ljavax/sql/DataSource;)V&lt;br/&gt;
	In org/apache/derbyTesting/junit/DropDatabaseSetup.tearDown()V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In org/apache/derbyTesting/junit/BaseTestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestDecorator.basicRun(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestDecorator.basicRun(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/textui/TestRunner.doRun(Ljunit/framework/Test;Z)Ljunit/framework/TestResult;&lt;br/&gt;
	In junit/textui/TestRunner.start([Ljava/lang/String;)Ljunit/framework/TestResult;&lt;br/&gt;
	In junit/textui/TestRunner.main([Ljava/lang/String;)V&lt;/p&gt;

&lt;p&gt;ThreadName=JIT Compilation Thread(0033562C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=003350D8 (System monitor)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(00223C00)&lt;/p&gt;

&lt;p&gt;ThreadName=Finalizer thread(00335FAC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=0033D090 (System monitor)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(2163EE00)&lt;/p&gt;

&lt;p&gt;ThreadName=Thread-73(0033F02C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23970F10 (Object monitor for java/util/Timer$TimerImpl @ 011DD260)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22B26000)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In java/util/Timer$TimerImpl.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.rawStoreDaemon(0033EDCC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23955F60 (Object monitor for org/apache/derby/impl/services/daemon/BasicDaemon @ 0126CD40)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(24B55100)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait(J)V&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.rest()Z&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.antiGC(0033EB6C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=239598C0 (Object monitor for org/apache/derby/impl/services/monitor/AntiGC @ 01352128)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22D47F00)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/AntiGC.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=Thread-361(0033E90C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=2395CC70 (Object monitor for java/util/Timer$TimerImpl @ 0220D490)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(23E25500)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In java/util/Timer$TimerImpl.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.rawStoreDaemon(239B28B4)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=2397CD50 (Object monitor for org/apache/derby/impl/services/daemon/BasicDaemon @ 027134C0)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22374200)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait(J)V&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.rest()Z&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.slave.ping-d5937-slave-db(239B2D74)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23958A50 (Object monitor for java/lang/Object @ 02713510)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(24B55C00)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/store/replication/net/ReplicationMessageReceive$SlavePingThread.run()V&lt;/p&gt;

&lt;p&gt;Stack Traces of Threads:&lt;/p&gt;


&lt;p&gt;ThreadName=Triggered DumpAgent Thread(239B3234)&lt;br/&gt;
Status=Running&lt;/p&gt;

&lt;p&gt;ThreadName=main(003353CC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23956EC0 (Object monitor for org/apache/derby/impl/store/raw/log/LogToFile @ 02704A60)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(00223700)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.flush(JJ)V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.flush(Lorg/apache/derby/iapi/store/raw/log/LogInstant;)V&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.checkpointWithTran(Lorg/apache/derby/iapi/store/raw/xact/RawTransaction;Lorg/apache/derby/iapi/store/raw/RawStoreFactory;Lorg/apache/derby/iapi/store/raw/data/DataFactory;Lorg/apache/derby/iapi/store/raw/xact/TransactionFactory;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/store/raw/log/LogToFile.checkpoint(Lorg/apache/derby/iapi/store/raw/RawStoreFactory;Lorg/apache/derby/iapi/store/raw/data/DataFactory;Lorg/apache/derby/iapi/store/raw/xact/TransactionFactory;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/store/raw/RawStore.stop()V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/TopService.stop(Ljava/lang/Object;)V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/TopService.shutdown()Z&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/BaseMonitor.shutdown(Ljava/lang/Object;)V&lt;br/&gt;
	In org/apache/derby/impl/db/DatabaseContextImpl.cleanupOnError(Ljava/lang/Throwable;)V&lt;br/&gt;
	In org/apache/derby/iapi/services/context/ContextManager.cleanupOnError(Ljava/lang/Throwable;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/jdbc/TransactionResourceImpl.cleanupOnError(Ljava/lang/Throwable;Z)Z&lt;br/&gt;
	In org/apache/derby/impl/jdbc/EmbedConnection.&amp;lt;init&amp;gt;(Lorg/apache/derby/jdbc/InternalDriver;Ljava/lang/String;Ljava/util/Properties;)V&lt;br/&gt;
	In org/apache/derby/jdbc/Driver169.getNewEmbedConnection(Ljava/lang/String;Ljava/util/Properties;)Lorg/apache/derby/impl/jdbc/EmbedConnection;&lt;br/&gt;
	In org/apache/derby/jdbc/InternalDriver.connect(Ljava/lang/String;Ljava/util/Properties;)Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derby/jdbc/EmbeddedSimpleDataSource.getConnection(Ljava/lang/String;Ljava/lang/String;)Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derby/jdbc/EmbeddedSimpleDataSource.getConnection()Ljava/sql/Connection;&lt;br/&gt;
	In org/apache/derbyTesting/junit/JDBCDataSource.shutdownDatabase(Ljavax/sql/DataSource;)V&lt;br/&gt;
	In org/apache/derbyTesting/junit/DropDatabaseSetup.tearDown()V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In org/apache/derbyTesting/junit/BaseTestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestDecorator.basicRun(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestDecorator.basicRun(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/extensions/TestSetup$1.protect()V&lt;br/&gt;
	In junit/framework/TestResult.runProtected(Ljunit/framework/Test;Ljunit/framework/Protectable;)V&lt;br/&gt;
	In junit/extensions/TestSetup.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.runTest(Ljunit/framework/Test;Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/framework/TestSuite.run(Ljunit/framework/TestResult;)V&lt;br/&gt;
	In junit/textui/TestRunner.doRun(Ljunit/framework/Test;Z)Ljunit/framework/TestResult;&lt;br/&gt;
	In junit/textui/TestRunner.start([Ljava/lang/String;)Ljunit/framework/TestResult;&lt;br/&gt;
	In junit/textui/TestRunner.main([Ljava/lang/String;)V&lt;/p&gt;

&lt;p&gt;ThreadName=JIT Compilation Thread(0033562C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=003350D8 (System monitor)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(00223C00)&lt;/p&gt;

&lt;p&gt;ThreadName=Finalizer thread(00335FAC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=0033D090 (System monitor)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(2163EE00)&lt;/p&gt;

&lt;p&gt;ThreadName=Thread-73(0033F02C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23970F10 (Object monitor for java/util/Timer$TimerImpl @ 011DD260)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22B26000)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In java/util/Timer$TimerImpl.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.rawStoreDaemon(0033EDCC)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23955F60 (Object monitor for org/apache/derby/impl/services/daemon/BasicDaemon @ 0126CD40)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(24B55100)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait(J)V&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.rest()Z&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.antiGC(0033EB6C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=239598C0 (Object monitor for org/apache/derby/impl/services/monitor/AntiGC @ 01352128)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22D47F00)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/services/monitor/AntiGC.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=Thread-361(0033E90C)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=2395CC70 (Object monitor for java/util/Timer$TimerImpl @ 0220D490)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(23E25500)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In java/util/Timer$TimerImpl.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.rawStoreDaemon(239B28B4)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=2397CD50 (Object monitor for org/apache/derby/impl/services/daemon/BasicDaemon @ 027134C0)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(22374200)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait(J)V&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.rest()Z&lt;br/&gt;
	In org/apache/derby/impl/services/daemon/BasicDaemon.run()V&lt;br/&gt;
	In java/lang/Thread.run()V&lt;/p&gt;

&lt;p&gt;ThreadName=derby.slave.ping-d5937-slave-db(239B2D74)&lt;br/&gt;
Status=Waiting&lt;br/&gt;
Monitor=23958A50 (Object monitor for java/lang/Object @ 02713510)&lt;br/&gt;
Count=0&lt;br/&gt;
Owner=(24B55C00)&lt;br/&gt;
	In java/lang/Object.wait(JI)V&lt;br/&gt;
	In java/lang/Object.wait()V&lt;br/&gt;
	In org/apache/derby/impl/store/replication/net/ReplicationMessageReceive$S&lt;/p&gt;</comment>
                            <comment id="13488001" author="mikem" created="Wed, 31 Oct 2012 17:42:30 +0000"  >&lt;p&gt;failed against 10.8, windows, weme 6.2, non-vmware - on 10/16, 10/22, 10/24, 10/28, 10/30.  &lt;/p&gt;

&lt;p&gt;All failed with Derby5937SlaveShutdownTest.testSlaveFailoverLeak failed as last test in result and nothing else in result, indicating test hung and then eventually harness killed test&lt;/p&gt;</comment>
                            <comment id="13488150" author="knutanders" created="Wed, 31 Oct 2012 19:36:49 +0000"  >&lt;p&gt;Is there a fail directory with an error-stacktrace.out file that could tell why the test failed?&lt;/p&gt;</comment>
                            <comment id="13488261" author="mikem" created="Wed, 31 Oct 2012 21:48:38 +0000"  >&lt;p&gt;attaching fail.zip which is the fail directory from the 10.9 failure on 10/29&lt;/p&gt;</comment>
                            <comment id="13488567" author="knutanders" created="Thu, 1 Nov 2012 09:26:32 +0000"  >&lt;p&gt;Thanks, Mike.&lt;/p&gt;

&lt;p&gt;It looks like replication failover fails with a NullPointerException:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at java.io.ObjectOutputStream.drain(ObjectOutputStream.java:258)&lt;br/&gt;
	at java.io.ObjectOutputStream.flush(ObjectOutputStream.java:331)&lt;br/&gt;
	at java.io.ObjectOutputStream.close(ObjectOutputStream.java:220)&lt;br/&gt;
	at org.apache.derby.impl.store.replication.net.SocketConnection.tearDown(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.replication.net.ReplicationMessageTransmit.tearDown(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.replication.master.MasterController.teardownNetwork(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.replication.master.MasterController.startFailover(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.RawStore.failover(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.access.RAMAccessManager.failover(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.failover(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.handleFailoverMaster(Unknown Source)&lt;br/&gt;
	... 41 more&lt;/p&gt;

&lt;p&gt;Since the NPE happens inside java.io.ObjectOutputStream.drain(), and not in Derby code called from drain(), I&apos;d expect this to be a JVM bug. At least I have convinced myself that this NPE is impossible in OpenJDK by looking at the source for the ObjectOutputStream class. The argument I used to convince myself, goes like this: In OpenJDK, ObjectOutputStream&apos;s drain() method simply forwards the call to bout.drain(), so any NPE in drain must be caused by the bout field being null. bout is a final field which is always initialized to a non-null value in the ObjectOutputStream constructor we use in replication.net.SocketConnection, so it&apos;s guaranteed to be non-null in drain(), and the NPE can&apos;t happen.&lt;/p&gt;

&lt;p&gt;I think it&apos;s OK to disable this test on weme for now. Note that this is the only replication test that runs on weme (or any of the JSR-169/CDC FP platforms), so this code has never been exercised on weme before. All the other replication tests use separate network servers and the client driver to communicate with them, and are therefore disabled on those platforms.&lt;/p&gt;</comment>
                            <comment id="13502489" author="myrna" created="Thu, 22 Nov 2012 00:38:15 +0000"  >&lt;p&gt;attaching a patch which disables this test for weme.&lt;/p&gt;</comment>
                            <comment id="13502491" author="myrna" created="Thu, 22 Nov 2012 00:41:13 +0000"  >&lt;p&gt;I disabled the test as per the patch with revision 1412392: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412392&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412392&lt;/a&gt;&lt;br/&gt;
I intend to backport this to 10.9 and 10.8.&lt;/p&gt;</comment>
                            <comment id="13504056" author="myrna" created="Mon, 26 Nov 2012 20:15:49 +0000"  >&lt;p&gt;I accidentally added an unneeded import in my previous commit, removed it again with revision 1413812 (&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1413812&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1413812&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13504167" author="myrna" created="Mon, 26 Nov 2012 21:56:29 +0000"  >&lt;p&gt;merged revision 1412392 and 1413812 to 10.9 with revision 1413885 and to 10.8 with revision 1413886 (&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1413885&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1413885&lt;/a&gt; and &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1413886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1413886&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13504168" author="myrna" created="Mon, 26 Nov 2012 21:57:17 +0000"  >&lt;p&gt;Marking invalid as this appears to be a jvm issue for this particular jvm.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12554613" name="DERBY-5975.diff" size="1581" author="myrna" created="Thu, 22 Nov 2012 00:38:15 +0000"/>
                            <attachment id="12551630" name="fail.zip" size="80406" author="mikem" created="Wed, 31 Oct 2012 21:48:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Oct 2012 19:36:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy7i13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77731</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>