<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6423/DERBY-6423.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6423] The expression syntax in CASE&apos;s THEN clause doesn&apos;t accept boolean value expression</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6423</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This syntax gives an error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; VALUES CASE WHEN 1=1 THEN (1=2) OR (3!=4) ELSE true END;
ERROR 42X01: Syntax error: Encountered &quot;OR&quot; at line 1, column 33.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, this works:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; VALUES CASE WHEN 1=1 THEN ((1=2) OR (3!=4)) ELSE true END;
1    
-----
true 
1 row selected
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;According to the standard, the syntax after THEN should be &amp;lt;result&amp;gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;result&amp;gt; ::=
   &amp;lt;result expression&amp;gt;
   | NULL

&amp;lt;result expression&amp;gt; ::=
   &amp;lt;value expression&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which should give us the full value syntax. sqlgrammar.jj uses the corresponding production &quot;thenElseExpression&quot; which allows NULL or aditiveExpression. I believe it should be orExpression.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681591">DERBY-6423</key>
            <summary>The expression syntax in CASE&apos;s THEN clause doesn&apos;t accept boolean value expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Nov 2013 14:54:19 +0000</created>
                <updated>Fri, 10 Oct 2014 18:48:28 +0100</updated>
                            <resolved>Fri, 10 Oct 2014 18:48:28 +0100</resolved>
                                                    <fixVersion>10.10.2.1</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13835773" author="knutanders" created="Sat, 30 Nov 2013 16:33:57 +0000"  >&lt;p&gt;The ELSE clause seems to have the same problem:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ij&amp;gt; values case when true then false else true or false end;
ERROR 42X01: Syntax error: Encountered &quot;or&quot; at line 1, column 44.
Issue the &apos;help&apos; command for general information on IJ command syntax.
Any unrecognized commands are treated as potential SQL commands and executed directly.
Consult your DBMS server reference documentation for details of the SQL syntax supported by your server.
ij&amp;gt; values case when true then false else (true or false) end;
1    
-----
false

1 row selected
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13835775" author="knutanders" created="Sat, 30 Nov 2013 16:36:45 +0000"  >&lt;p&gt;We fixed some similar problems in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5972&quot; title=&quot;Grammar doesn&amp;#39;t accept OR operator without parentheses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5972&quot;&gt;&lt;del&gt;DERBY-5972&lt;/del&gt;&lt;/a&gt;. CASE expressions were discussed, but only the WHEN clause. The THEN and ELSE clauses were overlooked, apparently.&lt;/p&gt;</comment>
                            <comment id="13987705" author="knutanders" created="Fri, 2 May 2014 14:48:14 +0100"  >&lt;p&gt;NULLIF has the same problem:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ij&amp;gt; values nullif(true or false, true and false);
ERROR 42X01: Syntax error: Encountered &quot;or&quot; at line 1, column 20.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13987768" author="knutanders" created="Fri, 2 May 2014 16:10:34 +0100"  >&lt;p&gt;The attached patch, d6423-1a.diff, fixes the problem in a similar way as in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5972&quot; title=&quot;Grammar doesn&amp;#39;t accept OR operator without parentheses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5972&quot;&gt;&lt;del&gt;DERBY-5972&lt;/del&gt;&lt;/a&gt;, by using the valueExpression() production rule. It also adds test cases.&lt;/p&gt;

&lt;p&gt;I&apos;m running the full regression test suite now.&lt;/p&gt;</comment>
                            <comment id="13987834" author="knutanders" created="Fri, 2 May 2014 16:56:40 +0100"  >&lt;p&gt;All regression tests passed.&lt;/p&gt;</comment>
                            <comment id="13989351" author="jira-bot" created="Mon, 5 May 2014 09:10:52 +0100"  >&lt;p&gt;Commit 1592465 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592465&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1592465&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6423&quot; title=&quot;The expression syntax in CASE&amp;#39;s THEN clause doesn&amp;#39;t accept boolean value expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6423&quot;&gt;&lt;del&gt;DERBY-6423&lt;/del&gt;&lt;/a&gt;: The expression syntax in CASE&apos;s THEN clause doesn&apos;t accept boolean value expression&lt;/p&gt;

&lt;p&gt;Allow boolean value expressions in CASE and NULLIF expressions.&lt;/p&gt;</comment>
                            <comment id="13995098" author="chaase3" created="Mon, 12 May 2014 14:56:26 +0100"  >&lt;p&gt;Sorry, I accidentally assigned myself to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6423&quot; title=&quot;The expression syntax in CASE&amp;#39;s THEN clause doesn&amp;#39;t accept boolean value expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6423&quot;&gt;&lt;del&gt;DERBY-6423&lt;/del&gt;&lt;/a&gt; instead of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6424&quot; title=&quot;Document thenExpression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6424&quot;&gt;&lt;del&gt;DERBY-6424&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14164263" author="mikem" created="Wed, 8 Oct 2014 23:05:42 +0100"  >&lt;p&gt;reopening to work on 10.10  backport.  temp assigning myself.&lt;/p&gt;</comment>
                            <comment id="14165285" author="jira-bot" created="Thu, 9 Oct 2014 16:47:10 +0100"  >&lt;p&gt;Commit 1630516 from mikem@apache.org in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1630516&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1630516&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6423&quot; title=&quot;The expression syntax in CASE&amp;#39;s THEN clause doesn&amp;#39;t accept boolean value expression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6423&quot;&gt;&lt;del&gt;DERBY-6423&lt;/del&gt;&lt;/a&gt;: The expression syntax in CASE&apos;s THEN clause doesn&apos;t accept boolean value expression&lt;/p&gt;

&lt;p&gt;backported change #r1592465 from trunk to 10.10 branch.&lt;/p&gt;

&lt;p&gt;Allow boolean value expressions in CASE and NULLIF expressions.&lt;/p&gt;</comment>
                            <comment id="14167195" author="mikem" created="Fri, 10 Oct 2014 18:48:28 +0100"  >&lt;p&gt;backported to 10.10.  setting original owner and resolving.  Do not plan more backporting of this issue at this time.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12614163">DERBY-5972</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12313704">DERBY-532</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12746192">DERBY-6759</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12681607">DERBY-6424</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643049" name="d6423-1a.diff" size="5782" author="knutanders" created="Fri, 2 May 2014 16:10:34 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 30 Nov 2013 16:33:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzk1tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361154</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>