<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:38:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2564/DERBY-2564.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2564] ContextService.notifyAllActiveThreads()  and network server code need a privileged block around the calls to Thread.interrupt()</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2564</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;It looks to me as though the call to interrupt() can raise a SecurityException. I think this may give rise to another permission that we need to add to our template policy file and to our security documentation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12367505">DERBY-2564</key>
            <summary>ContextService.notifyAllActiveThreads()  and network server code need a privileged block around the calls to Thread.interrupt()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Apr 2007 17:24:43 +0100</created>
                <updated>Wed, 12 Jan 2011 21:52:48 +0000</updated>
                            <resolved>Mon, 19 Nov 2007 19:41:50 +0000</resolved>
                                    <version>10.0.2.0</version>
                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Network Server</component>
                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12542853" author="kmarsden" created="Thu, 15 Nov 2007 19:21:03 +0000"  >&lt;p&gt;I noticed looking at code coverage that this code is indeed covered by our tests, but  presumably some test that does not run under security manager. Does anyone have an idea what test is covering this code?&lt;/p&gt;</comment>
                            <comment id="12542897" author="knutanders" created="Thu, 15 Nov 2007 22:06:10 +0000"  >&lt;p&gt;Thread.interrupt() calls Thread.checkAccess() which calls&lt;br/&gt;
SecurityManager.checkAccess(Thread).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/lang/SecurityManager.html#checkAccess(java.lang.Thread&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/javase/6/docs/api/java/lang/SecurityManager.html#checkAccess(java.lang.Thread&lt;/a&gt;) says:&lt;/p&gt;

&lt;p&gt;&amp;gt; If the thread argument is a system thread (belongs to the thread&lt;br/&gt;
&amp;gt; group with a null parent) then this method calls checkPermission&lt;br/&gt;
&amp;gt; with the RuntimePermission(&quot;modifyThread&quot;) permission. If the thread&lt;br/&gt;
&amp;gt; argument is not a system thread, this method just returns silently.&lt;/p&gt;

&lt;p&gt;My guess is that none of Derby&apos;s threads are system threads, and&lt;br/&gt;
therefore no permissions are needed with a default security manager.&lt;/p&gt;</comment>
                            <comment id="12542899" author="knutanders" created="Thu, 15 Nov 2007 22:09:58 +0000"  >&lt;p&gt;That doesn&apos;t mean we don&apos;t need to wrap the call in a privileged block, though. A SecurityManager implementation is free to override the checkAccess(Thread) method and perform stricter checks.&lt;/p&gt;</comment>
                            <comment id="12542909" author="kmarsden" created="Thu, 15 Nov 2007 23:31:50 +0000"  >&lt;p&gt;So I guess in summary we do need a privilege block, but we don&apos;t need to modify our template policy file for this issue.  Is that correct?&lt;/p&gt;</comment>
                            <comment id="12542989" author="knutanders" created="Fri, 16 Nov 2007 08:03:48 +0000"  >&lt;p&gt;Yes, that&apos;s my understanding. Thread.interrupt() is also called from NetworkServerControlImpl (three times) and DRDAServerStarter (once). We should probably fix those calls as well while we&apos;re at it.&lt;/p&gt;</comment>
                            <comment id="12543160" author="kmarsden" created="Fri, 16 Nov 2007 18:37:56 +0000"  >&lt;p&gt;Attached is a patch for this issue. suites.All passed, derbyall is finishing up. It does not have the network server changes Knut suggested. I will make those changes and check them in as a separate commit.&lt;/p&gt;

&lt;p&gt;I wanted to check on the exception handling for the change. I just am letting the Security exception if any be thrown.  I can&apos;t test for that case so I want to make sure that is the right thing to do.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;

</comment>
                            <comment id="12543172" author="knutanders" created="Fri, 16 Nov 2007 19:12:04 +0000"  >&lt;p&gt;The patch looks good! Letting the exception propagate out to the caller is the correct thing to do, so that should be fine. Since SecurityException is a RuntimeException, you could even skip the &quot;throws SecurityException&quot; part. Two of the imports are unused, by the way (Policy and PrivilegedActionException). Other than that, +1 to commit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12369682" name="derby-2564_diff.txt" size="1287" author="kmarsden" created="Fri, 16 Nov 2007 18:37:56 +0000"/>
                            <attachment id="12369683" name="derby-2564_stat.txt" size="79" author="kmarsden" created="Fri, 16 Nov 2007 18:37:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Nov 2007 19:21:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23105</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0o4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37728</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>