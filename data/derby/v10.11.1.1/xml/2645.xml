<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2645/DERBY-2645.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2645] upgrade test failures with weme 6.1.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2645</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Since activating the upgrade tests for weme6.1 (and resolving some of the failures) I can now see 1 new error and 13 new failures. Some of these may warrant their own bug; some are probably caused by the initial problem.&lt;/p&gt;

&lt;p&gt;(In the section below, I&apos;m skipping the junit.extensions.* part of the stack.)&lt;/p&gt;

&lt;p&gt;error:&lt;br/&gt;
2)&lt;br/&gt;
 testProcedureSignature(org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_1)java.sql.SQLException: PROCEDURE &apos;GC&apos; already exists.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.CreateAliasConstantAction.executeConstantAction(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.MiscResultSet.open(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_1.testProcedureSignature(Changes10_1.java:87)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                      ....&lt;br/&gt;
------------------&lt;/p&gt;

&lt;p&gt;failures: &lt;br/&gt;
6) testProcedureSignature(org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_1)junit.framework.AssertionFailedError: Expected error &apos;XCL47&apos; but no error was thrown.&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertStatementError(BaseJDBCTestCase.java:703)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_1.testProcedureSignature(Changes10_1.java:82)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at &amp;lt;unknown class&amp;gt;.&amp;lt;unknown method&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                     ...&lt;/p&gt;


&lt;p&gt;2) and, 11) &lt;br/&gt;
testOldVersion(org.apache.derbyTesting.functionTests.tests.upgradeTests.BasicSetup)junit.framework.AssertionFailedError: Old minor (driver):  expected:&amp;lt;0&amp;gt; but was:&amp;lt;3&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.BasicSetup.testOldVersion(BasicSetup.java:61)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at &amp;lt;unknown class&amp;gt;.&amp;lt;unknown method&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                     ...&lt;br/&gt;
--------------------&lt;/p&gt;

&lt;p&gt;3), 7) and 12), with a variation in originating line number in Changes10_2:(marked (#) in the stack below).&lt;br/&gt;
and expected error number&lt;/p&gt;

&lt;p&gt;testGrantRevokeStatements(org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2)&lt;br/&gt;
(3, 12) junit.framework.ComparisonFailure: Unexpected SQL state. expected:&amp;lt;...X01&amp;gt; but was:&amp;lt;...Z60&amp;gt;&lt;br/&gt;
(7)junit.framework.ComparisonFailure: Unexpected SQL state. expected:&amp;lt;XCL47&amp;gt; but was:&amp;lt;42Z60&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDBCTestCase.java:523)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDBCTestCase.java:585)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertStatementError(BaseJDBCTestCase.java:706)&lt;br/&gt;
(3, 12) 	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2.testGrantRevokeStatements(Changes10_2.java:241)&lt;br/&gt;
(7)                at &lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2.testGrantRevokeStatements(Changes10_2.java:250)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at &amp;lt;unknown class&amp;gt;.&amp;lt;unknown method&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                     ...&lt;br/&gt;
Caused by: java.sql.SQLException: GRANT not allowed unless database property derby.database.sqlAuthorization has value &apos;TRUE&apos;.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.SQLParser.checkSqlStandardAccess(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.SQLParser.grantStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.SQLParser.StatementPart(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.SQLParser.Statement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertStatementError(BaseJDBCTestCase.java:701)&lt;br/&gt;
(3, 12) 	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2.testGrantRevokeStatements(Changes10_2.java:241)&lt;br/&gt;
(7)	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2.testGrantRevokeStatements(Changes10_2.java:250)&lt;br/&gt;
	at 	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	... 64 more&lt;br/&gt;
------------------&lt;/p&gt;

&lt;p&gt;4), 8) and 13)&lt;br/&gt;
 testDatabaseOwnerChange(org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2)junit.framework.ComparisonFailure: AUTHORIZATIONID not valid for SYSIBM expected:&amp;lt;DBA&amp;gt; but was:&amp;lt;APP&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2.checkSystemSchemasOwner(Changes10_2.java:300)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_2.testDatabaseOwnerChange(Changes10_2.java:282)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at &amp;lt;unknown class&amp;gt;.&amp;lt;unknown method&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                     ...&lt;br/&gt;
------------------&lt;/p&gt;

&lt;p&gt;5) , 10) and 14)&lt;br/&gt;
testPolicyReloadingProcedure(org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_3)junit.framework.AssertionFailedError: Reloading results. expected:&amp;lt;false&amp;gt; but was:&amp;lt;true&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_3.tryReloading(Changes10_3.java:362)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_3.assertPolicyReloaderDoesNotExist(Changes10_3.java:340)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_3.testPolicyReloadingProcedure(Changes10_3.java:311)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at &amp;lt;unknown class&amp;gt;.&amp;lt;unknown method&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                     ...&lt;/p&gt;

&lt;p&gt;------------------&lt;/p&gt;

&lt;p&gt;9) testImportExportLobsProcedures(org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_3)junit.framework.AssertionFailedError: Expected error &apos;42Y03&apos; but no error was thrown.&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertStatementError(BaseJDBCTestCase.java:703)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Changes10_3.testImportExportLobsProcedures(Changes10_3.java:252)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at &amp;lt;unknown class&amp;gt;.&amp;lt;unknown method&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
                     ...&lt;br/&gt;
------------------&lt;/p&gt;</description>
                <environment>windows 2000, weme6.1 (j2ME/CDCFoundation/JSR169)</environment>
        <key id="12369304">DERBY-2645</key>
            <summary>upgrade test failures with weme 6.1.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 May 2007 20:01:58 +0100</created>
                <updated>Mon, 29 Jun 2009 23:57:45 +0100</updated>
                            <resolved>Mon, 4 Jun 2007 00:52:01 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12500017" author="myrna" created="Wed, 30 May 2007 04:58:04 +0100"  >&lt;p&gt;The problem only happens when upgrading from 10.0.2.1&lt;/p&gt;</comment>
                            <comment id="12501064" author="myrna" created="Mon, 4 Jun 2007 00:52:01 +0100"  >&lt;p&gt;I didn&apos;t fully debug this, but I theorize that what happens, is that the test framework attempts to create an EmbeddedSimpleDataSource, but instead of finding this with the 10.0 derby.jar, it finds the 10.3 version and uses that. Hence, the db is really created with 10.3 and the test fails.&lt;/p&gt;

&lt;p&gt;I did a manual simple test, and created a 10.0.2.1 database (with one very simple table) using jdk15, then used JSR169 to upgrade to 10.3 with soft upgrade, then went back at it with jdk15 and that was fine. Then I used the simple 10.0 database with very simple table and did a hard upgrade to 10.3 with JSR169 and that was fine too.&lt;/p&gt;

&lt;p&gt;I don&apos;t think we should automate that test, it was just to make sure upgrade from 10.0 works also for JSR169.&lt;/p&gt;

&lt;p&gt;Prevented test from running upgrade from 10.0 with JSR169 with revisions:&lt;br/&gt;
 &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=542984&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=542984&lt;/a&gt;&lt;br/&gt;
 &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=543809&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=543809&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0vwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10053"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>