<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3936/DERBY-3936.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3936] Add CharacterStreamDescriptor</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3936</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;A set of state information is required about byte streams representing characters to be able to handle them properly.&lt;/p&gt;

&lt;p&gt;The basic pieces of information are:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;is bufferable&lt;/li&gt;
	&lt;li&gt;is position aware&lt;/li&gt;
	&lt;li&gt;data offset&lt;/li&gt;
	&lt;li&gt;current byte position&lt;/li&gt;
	&lt;li&gt;current char position&lt;/li&gt;
	&lt;li&gt;byte length&lt;/li&gt;
	&lt;li&gt;char length&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Additional info:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;encoding&lt;/li&gt;
	&lt;li&gt;max allowed length&lt;/li&gt;
	&lt;li&gt;bytes per char information&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The information is chosen with UTF8Reader in mind, and the plan is to pass a CharacterStreamDescriptor instance to the constructor to allow the reader to configure itself appropriately. The information is expected to be valid only at a specific point in time, as some of it will change as soon as the reader starts working with the underlying stream.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12407845">DERBY-3936</key>
            <summary>Add CharacterStreamDescriptor</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12407840">DERBY-3934</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Nov 2008 11:02:43 +0000</created>
                <updated>Mon, 4 May 2009 19:22:36 +0100</updated>
                            <resolved>Thu, 11 Dec 2008 10:20:17 +0000</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12645440" author="kristwaa" created="Thu, 6 Nov 2008 09:43:15 +0000"  >&lt;p&gt;&apos;derby-3936-1a-CharacterStreamDescriptor.diff&apos; is the first revision of the CharacterStreamDescriptor class.&lt;/p&gt;

&lt;p&gt;There is no code showing how it will be used yet, but I plan to pass it to UTF8Reader so that it can properly configure itself.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;

&lt;p&gt;What you people think of the builder pattern used?&lt;br/&gt;
The reasons I tried it are to avoid a constructor with a load of arguments, avoid having a set of many constructors and a wish to keep the descriptor object immutable.&lt;/p&gt;</comment>
                            <comment id="12645763" author="knutanders" created="Fri, 7 Nov 2008 13:54:50 +0000"  >&lt;p&gt;I agree that the builder pattern is cleaner than having many constructors and/or a constructor with a dozen parameters when immutability is a goal. But doesn&apos;t Builder&apos;s two-arg constructor break the pattern? Isn&apos;t it clearer to have methods for those two fields as well?&lt;/p&gt;</comment>
                            <comment id="12645780" author="kristwaa" created="Fri, 7 Nov 2008 14:56:37 +0000"  >&lt;p&gt;The reason I added a constructor to the builder is because I regarded those two pieces of information to be mandatory because of their performance implications.&lt;br/&gt;
If we let them have default values of false, I agree they should follow the pattern - for instance by adding isBufferable(boolean), or maybe just isBufferable().&lt;/p&gt;

&lt;p&gt;There are also other details, like if the first character is at position zero or one. I chose one, and also added a notion of &quot;before first&quot;, as a stream with a header at byte position zero is positioned before the first character.&lt;/p&gt;

&lt;p&gt;I don&apos;t feel to strongly on this issue, I&apos;ll be happy to comply with any wishes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12645792" author="knutanders" created="Fri, 7 Nov 2008 15:27:55 +0000"  >&lt;p&gt;Having default values of false and adding the methods sounds fine to me. I think&lt;br/&gt;
  new Builder().bufferable(true).positionAware(true).dataOffset(100).build()&lt;br/&gt;
may be easier to read than&lt;br/&gt;
  new Builder(true, true).dataOffset(100).build()&lt;/p&gt;

&lt;p&gt;As to the position issue, since the class is in iapi.jdbc I guess it makes some sense to follow the JDBC convention of saying that the first character is at position 1. If it turns out that it makes the calculations more complex, it can always be changed later.&lt;/p&gt;</comment>
                            <comment id="12647391" author="kristwaa" created="Thu, 13 Nov 2008 20:47:46 +0000"  >&lt;p&gt;Clearing patch available flag, a new patch is in the pipeline.&lt;/p&gt;</comment>
                            <comment id="12648140" author="kristwaa" created="Mon, 17 Nov 2008 11:23:19 +0000"  >&lt;p&gt;Attached version 1b.&lt;br/&gt;
Reworked the builder according to suggestions. All parameters/settings are now considered optional.&lt;br/&gt;
Validation is still being done in sane builds only.&lt;/p&gt;</comment>
                            <comment id="12648970" author="knutanders" created="Wed, 19 Nov 2008 10:25:38 +0000"  >&lt;p&gt;1b looks fine to me. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12648998" author="kristwaa" created="Wed, 19 Nov 2008 11:47:48 +0000"  >&lt;p&gt;Thanks Knut Anders.&lt;br/&gt;
I committed patch 1b to trunk with revision 718936.&lt;/p&gt;

&lt;p&gt;Depending on how things play out, I might consider adding a reference to the stream in the descriptor object.&lt;br/&gt;
I&apos;ll leave the issue open until I have a clearer view of how, and where,  the descriptor object will be used.&lt;br/&gt;
If anyone has opinions on keeping a reference to the described stream in the descriptor, please add a comment.&lt;/p&gt;</comment>
                            <comment id="12649356" author="kristwaa" created="Thu, 20 Nov 2008 12:47:57 +0000"  >&lt;p&gt;Attached &apos;derby-3936-2a-temp_fix.diff&apos;, which is a temporary fix to include the class file(s) in derby.jar.&lt;/p&gt;

&lt;p&gt;Committed to trunk with revision 719217.&lt;br/&gt;
Note that this is a temporary fix that should be backed out when &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3934&quot; title=&quot;Improve performance of reading modified Clobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3934&quot;&gt;&lt;del&gt;DERBY-3934&lt;/del&gt;&lt;/a&gt; has been fully resolved.&lt;/p&gt;</comment>
                            <comment id="12651370" author="kristwaa" created="Thu, 27 Nov 2008 15:29:56 +0000"  >&lt;p&gt;&apos;derby-3936-3a-javadoc-1.diff&apos; adds and corrects some JavaDoc in CharacterStreamDescriptor.&lt;/p&gt;

&lt;p&gt;Committed to trunk with revision 721200.&lt;/p&gt;</comment>
                            <comment id="12652330" author="kristwaa" created="Tue, 2 Dec 2008 10:21:38 +0000"  >&lt;p&gt;&apos;derby-3936-4a-streamref_and_copy.diff&apos; adds the following new &quot;features&quot;;&lt;br/&gt;
 o adds a stream reference to the descriptor&lt;br/&gt;
 o adds a method to return a PositionedStream reference to the InputStream&lt;br/&gt;
 o adds a method to the builder to copy the values of another builder&lt;br/&gt;
 o adds a few more sanity checks (sane builds only)&lt;br/&gt;
 o updated tests&lt;/p&gt;

&lt;p&gt;I think the descriptor is getting close to finished now. Optimization information described in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3907&quot; title=&quot;Save useful length information for Clobs in store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3907&quot;&gt;&lt;del&gt;DERBY-3907&lt;/del&gt;&lt;/a&gt; might be added later.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12652351" author="kristwaa" created="Tue, 2 Dec 2008 12:49:33 +0000"  >&lt;p&gt;Committed patch 4b to trunk with revision 722443.&lt;br/&gt;
The only changes between 4a and 4b are JavaDoc.&lt;/p&gt;</comment>
                            <comment id="12655595" author="kristwaa" created="Thu, 11 Dec 2008 10:20:17 +0000"  >&lt;p&gt;Backed out temporary fix to get the class included in the product jars with revision 725639.&lt;/p&gt;

&lt;p&gt;Resolving issue, any bugs and new features will be handled under separate issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393431" name="derby-3936-1a-CharacterStreamDescriptor.diff" size="15626" author="kristwaa" created="Thu, 6 Nov 2008 09:43:15 +0000"/>
                            <attachment id="12394060" name="derby-3936-1b-CharacterStreamDescriptor.diff" size="16100" author="kristwaa" created="Mon, 17 Nov 2008 11:23:18 +0000"/>
                            <attachment id="12394345" name="derby-3936-2a-temp_fix.diff" size="570" author="kristwaa" created="Thu, 20 Nov 2008 12:47:57 +0000"/>
                            <attachment id="12394853" name="derby-3936-3a-javadoc-1.diff" size="4960" author="kristwaa" created="Thu, 27 Nov 2008 15:29:56 +0000"/>
                            <attachment id="12395085" name="derby-3936-4a-streamref_and_copy.diff" size="12836" author="kristwaa" created="Tue, 2 Dec 2008 10:21:38 +0000"/>
                            <attachment id="12395089" name="derby-3936-4b-streamref_and_copy.diff" size="13204" author="kristwaa" created="Tue, 2 Dec 2008 12:49:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 Nov 2008 13:54:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31068</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0xin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>