<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:07:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5989/DERBY-5989.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5989] Stop producing byte code for non-existent qualifiers</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5989</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;For all result set nodes that have predicate lists, Derby&apos;s compiler lays out byte code for fields to hold qualifiers, and also code to reinitialize the values in those fields on every execution. It does this even if there are no qualifiers. See PredicateList.generateQualifiers(). That method does actually check whether there are qualifiers, and it skips some of the code generation if there are none. It should be changed so that it skips all the code generation if there are no qualifiers.&lt;/p&gt;

&lt;p&gt;For an example, see the decompiled generated class for a natural join attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5947&quot; title=&quot;Factor out common code from generated classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5947&quot;&gt;&lt;del&gt;DERBY-5947&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12549514/natural-join-after-3a.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12549514/natural-join-after-3a.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That class contains three Qualifier[][] fields:&lt;/p&gt;

&lt;p&gt;    private Qualifier[][] e1;&lt;br/&gt;
    private Qualifier[][] e3;&lt;br/&gt;
    private Qualifier[][] e4;&lt;/p&gt;

&lt;p&gt;Only one of them (e4) is ever set to a non-null value. Still, the reinit() method, which is called on every execution, has code for each of the fields:&lt;/p&gt;

&lt;p&gt;    protected void reinit() throws StandardException &lt;/p&gt;
{
	BaseActivation.reinitializeQualifiers(e1);
	BaseActivation.reinitializeQualifiers(e3);
	BaseActivation.reinitializeQualifiers(e4);
    }</description>
                <environment></environment>
        <key id="12615684">DERBY-5989</key>
            <summary>Stop producing byte code for non-existent qualifiers</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Nov 2012 08:21:38 +0000</created>
                <updated>Mon, 17 Jun 2013 10:27:17 +0100</updated>
                            <resolved>Wed, 14 Nov 2012 08:59:28 +0000</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13495237" author="knutanders" created="Mon, 12 Nov 2012 13:06:26 +0000"  >&lt;p&gt;Attaching a patch, d5989-1a.diff, that makes PredicateList.generateQualifier() return immediately and just lay out code for pushing null onto the stack if there are no qualifiers in the predicate list. Before, it would create a field that was always null, add code to reset the field on each execution, and push the field value (always null) onto the stack. The end result should be the same, just with less code.&lt;/p&gt;

&lt;p&gt;Most of the changes in the patch are whitespace changes because some conditionals could be removed, and the body of the original if statements had to be reindented. To make it easier to see exactly what was changed, I&apos;ve attached d5989-1a-no-whitespace.diff which was produced by passing flags that told svn diff to ignore whitespace changes.&lt;/p&gt;

&lt;p&gt;I&apos;ve also attached before.txt and after.txt which show the decompiled class files for &quot;SELECT * FROM SYSIBM.SYSDUMMY1&quot; before and after the patch. After the patch, the e1 field and the reinit() method are not in the generated class. Also, references to the e1 field have been replaced with null.&lt;/p&gt;

&lt;p&gt;All the regression tests ran cleanly with the patch.&lt;/p&gt;</comment>
                            <comment id="13496958" author="knutanders" created="Wed, 14 Nov 2012 08:59:28 +0000"  >&lt;p&gt;Committed revision 1409120.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553108" name="after.txt" size="1606" author="knutanders" created="Mon, 12 Nov 2012 13:06:26 +0000"/>
                            <attachment id="12553107" name="before.txt" size="1797" author="knutanders" created="Mon, 12 Nov 2012 13:06:26 +0000"/>
                            <attachment id="12553106" name="d5989-1a-no-whitespace.diff" size="1884" author="knutanders" created="Mon, 12 Nov 2012 13:06:26 +0000"/>
                            <attachment id="12553105" name="d5989-1a.diff" size="4527" author="knutanders" created="Mon, 12 Nov 2012 13:06:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hycvt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>109130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>