<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:18:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5267/DERBY-5267.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5267] Shut down engine for old versions in upgrade tests to save memory</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5267</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The memory requirements for the upgrade tests seem to go up each time we add a new release. Lately, they&apos;ve started failing on phoneME with the error message saying &quot;Number of class names exceeds vm limit.&quot; It looks to me as if the problem is that we don&apos;t shut down the engine when we&apos;ve finished testing a version, so we eventually end up with 19 different versions of the engine loaded in the same process. I think it would be good to shut down the old engines when we&apos;re done with them to free up resources.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509722">DERBY-5267</key>
            <summary>Shut down engine for old versions in upgrade tests to save memory</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jun 2011 15:39:16 +0100</created>
                <updated>Wed, 6 Jul 2011 19:52:13 +0100</updated>
                            <resolved>Tue, 14 Jun 2011 10:27:25 +0100</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13046589" author="knutanders" created="Thu, 9 Jun 2011 15:48:19 +0100"  >&lt;p&gt;The attached patch makes PhaseChanger shut down the engine, instead of shutting down each database individually, at the end of each phase. This made the upgrade test run again on phoneME in my environment.&lt;/p&gt;

&lt;p&gt;I had hoped that a change like this would reduce the memory usage on Java SE too, but that doesn&apos;t seem to be the case, because the old versions of the driver (and thereby all the engine classes) is still referenced from the DriverManager. (There&apos;s no DriverManager in JSR-169, that&apos;s why it&apos;s not a problem on phoneME.) It might possibly be solved by deregistering the driver manually, but there&apos;s some trickiness involved because of the upgrade tests&apos; use of special class loaders to load the old Derby versions and DriverManager not allowing the deregistering of drivers registered in other class loaders, so I&apos;m not addressing that issue right now.&lt;/p&gt;</comment>
                            <comment id="13049075" author="knutanders" created="Tue, 14 Jun 2011 10:27:25 +0100"  >&lt;p&gt;Committed revision 1135432.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12513022">DERBY-5316</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12481939" name="shutdown-engine.diff" size="2267" author="knutanders" created="Thu, 9 Jun 2011 15:48:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0fq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>