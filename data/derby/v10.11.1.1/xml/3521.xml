<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3521/DERBY-3521.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3521] Functionality for skipping testsuites on certain platforms fails for the new management testsuite on phoneME advanced </title>
                <link>https://issues.apache.org/jira/browse/DERBY-3521</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;It is not possible to run suites.All on phoneME advanced, junit will just exit with an InvocationTargetException when trying to invoke the suites.All.suite() method. Unwrapping the exception shows that the underlying reason is a NoClassDefFoundError from the invoke() call in AllPackages.addSuiteByReflection() when trying to load the new management testsuite.&lt;/p&gt;

&lt;p&gt;Now, this suite is compiled into 1.5 classfiles, so the Class.forName() call before the invoke() is expected to fail with UnsupportedClassVersionError on Java ME and Java SE 1.4. It does fail as expected when running with jdk 1.4, but on phoneME advanced it does not, possibly a bug in phoneME advanced.&lt;/p&gt;

&lt;p&gt;A fix/workaround in the testinfrastructure may be to catch InvocationTargetException from the try block below, unwrap it and see if it is an instance of LinkageError and if so skip the testsuite. This would make it possible to run the tests on phoneME advanced.&lt;/p&gt;

&lt;p&gt;private static Test addSuiteByReflection(String className) throws Exception&lt;br/&gt;
   {&lt;br/&gt;
       try &lt;/p&gt;
{
           Class clz = Class.forName(className);
                      Method sm = clz.getMethod(&quot;suite&quot;, null);
                            return (Test) sm.invoke(null, null);
       }
&lt;p&gt; catch (LinkageError  e) &lt;/p&gt;
{
           return new TestSuite(&quot;SKIPPED: &quot; + className + &quot; - &quot; +
                   e.getMessage());
       }
&lt;p&gt;   } &lt;/p&gt;</description>
                <environment>phoneME advanced platform</environment>
        <key id="12390761">DERBY-3521</key>
            <summary>Functionality for skipping testsuites on certain platforms fails for the new management testsuite on phoneME advanced </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vemund">Vemund &#216;stgaard</assignee>
                                    <reporter username="vemund">Vemund &#216;stgaard</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Mar 2008 15:05:00 +0000</created>
                <updated>Wed, 1 Jul 2009 00:55:07 +0100</updated>
                            <resolved>Wed, 12 Mar 2008 09:03:08 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12577472" author="vemund" created="Tue, 11 Mar 2008 15:13:41 +0000"  >&lt;p&gt;Attaching simple fix, 3521-fix-diff, which unwraps the InvocationTargetException and cheks if it contains an instanceof LinkageError.&lt;/p&gt;
</comment>
                            <comment id="12577763" author="knutanders" created="Wed, 12 Mar 2008 09:03:08 +0000"  >&lt;p&gt;Committed revision 636256.&lt;/p&gt;

&lt;p&gt;Should the fix also be merged into the 10.4 branch?&lt;/p&gt;</comment>
                            <comment id="12577770" author="vemund" created="Wed, 12 Mar 2008 09:16:23 +0000"  >&lt;p&gt;It would be good to get it merged to 10.4, so I can test the RCs on phoneME advanced.&lt;/p&gt;</comment>
                            <comment id="12577779" author="knutanders" created="Wed, 12 Mar 2008 09:58:47 +0000"  >&lt;p&gt;Merged to 10.4 and committed revision 636268.&lt;/p&gt;

&lt;p&gt;(JIRA is down, so I&apos;ll have to update the fix version later.)&lt;/p&gt;</comment>
                            <comment id="12578689" author="vemund" created="Fri, 14 Mar 2008 11:21:13 +0000"  >&lt;p&gt;Closing this issue as there is no more work to do, thank you Knut.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12377622" name="3521-fix-diff" size="1051" author="vemund" created="Tue, 11 Mar 2008 15:13:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Mar 2008 09:03:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0twf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>