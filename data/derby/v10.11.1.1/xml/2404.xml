<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2404/DERBY-2404.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2404] BadConnectionTest.java hardcodes port 1527</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2404</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This test references port 1527; it should use the current test&lt;br/&gt;
configuration&apos;s method getPort instead, to make it possible to run&lt;br/&gt;
several tests on the same machine concurrently.&lt;/p&gt;

&lt;p&gt;When I experimented and changed TestConfiguration.DEFAULT_PORT to&lt;br/&gt;
something else but 1527, running suites.All crashed in&lt;br/&gt;
BadConnectionTest.java, and also crashed the JUnit textui.TestRunner&lt;br/&gt;
with this message: &quot;Couldn&apos;t get I/O for the connection to:&lt;br/&gt;
localhost&quot;.  No failure explanation or stack trace was printed on the&lt;br/&gt;
console. Not sure why...&lt;/p&gt;

&lt;p&gt;Running the test separately, the testrunner survived to show the&lt;br/&gt;
failures.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12364197">DERBY-2404</key>
            <summary>BadConnectionTest.java hardcodes port 1527</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fuzzylogic">Andrew McIntyre</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Mar 2007 04:07:10 +0000</created>
                <updated>Wed, 7 Mar 2007 01:45:39 +0000</updated>
                            <resolved>Tue, 6 Mar 2007 20:54:07 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12478280" author="fuzzylogic" created="Tue, 6 Mar 2007 06:28:47 +0000"  >&lt;p&gt;Patch to BadConnectionTest.java which gets the default host and port from the TestConfiguration at the time the test is instantiated.&lt;/p&gt;</comment>
                            <comment id="12478344" author="kristwaa" created="Tue, 6 Mar 2007 10:26:09 +0000"  >&lt;p&gt;I tried the patch, and it works fine.&lt;/p&gt;

&lt;p&gt;However, would it be more appropriate to use the methods TestConfiguration.getPort and TestConfiguration.getHostName instead of the static fields for the default values?&lt;/p&gt;

&lt;p&gt;The reason I ask, is because if we make it possible to configure the port/hostname, the test will still use the defaults even though the user specified her own values.&lt;/p&gt;

&lt;p&gt;The modifiers were changed in revision 509693 (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2196&quot; title=&quot;Run standalone network server with security manager by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2196&quot;&gt;&lt;del&gt;DERBY-2196&lt;/del&gt;&lt;/a&gt;; secure server test). I think we should check out if the server test really needs to use the defaults directly. If not, my opinion is that the two variables in TestConfiguration should be made private again.&lt;/p&gt;</comment>
                            <comment id="12478431" author="rhillegas" created="Tue, 6 Mar 2007 14:49:00 +0000"  >&lt;p&gt;Hi Kristian,&lt;/p&gt;

&lt;p&gt;The SecureServerTest doesn&apos;t rely on those particular defaults. It checks some error messages but they don&apos;t contain hostname or ports. I think it&apos;s safe for you to make the change you&apos;re suggesting.&lt;/p&gt;</comment>
                            <comment id="12478441" author="dagw" created="Tue, 6 Mar 2007 15:21:01 +0000"  >&lt;p&gt;&amp;gt; Kristian: However, would it be more appropriate to use the methods&lt;br/&gt;
&amp;gt; TestConfiguration.getPort and TestConfiguration.getHostName instead&lt;br/&gt;
&amp;gt; of the static fields for the default values?&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I was thinking of:&lt;/p&gt;

&lt;p&gt;Connection c = DriverManager.getConnection(&quot;jdbc:derby://localhost:&quot; + &lt;br/&gt;
                            + TestConfiguration.getCurrent().getPort() + &lt;br/&gt;
                            + &quot;/testbase&quot;)&lt;/p&gt;</comment>
                            <comment id="12478533" author="fuzzylogic" created="Tue, 6 Mar 2007 19:38:45 +0000"  >&lt;p&gt;Are the host and port really likely to change between fixtures? Attaching a patch which gets the host and port at setUp time, I can move this into the individual fixtures if you think the host and port are likely to change between fixtures. &lt;/p&gt;
</comment>
                            <comment id="12478566" author="dagw" created="Tue, 6 Mar 2007 20:39:50 +0000"  >&lt;p&gt;Looks good to me! I agree setUp time is fine here.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12478572" author="fuzzylogic" created="Tue, 6 Mar 2007 20:54:07 +0000"  >&lt;p&gt;Thanks, Dag. Committed to trunk with revision 515297.&lt;/p&gt;</comment>
                            <comment id="12478666" author="dagw" created="Wed, 7 Mar 2007 01:45:39 +0000"  >&lt;p&gt;Thanks for the quick fix, Andrew!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12352713" name="derby-2404-v1.diff" size="1843" author="fuzzylogic" created="Tue, 6 Mar 2007 06:28:47 +0000"/>
                            <attachment id="12352779" name="derby-2404-v2.diff" size="2069" author="fuzzylogic" created="Tue, 6 Mar 2007 19:38:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Mar 2007 06:28:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy137b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>