<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:36:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3129/DERBY-3129.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3129] Create Demo code, showing how to create and use table functions.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3129</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Create some useful, sample table functions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380267">DERBY-3129</key>
            <summary>Create Demo code, showing how to create and use table functions.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Oct 2007 21:34:53 +0100</created>
                <updated>Fri, 21 Jan 2011 18:17:02 +0000</updated>
                            <resolved>Mon, 28 Apr 2008 17:41:37 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Demos/Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12534417" author="rhillegas" created="Fri, 12 Oct 2007 22:44:50 +0100"  >&lt;p&gt;Attaching derby-3129-sampleTableFunctions-aa.diff. This contains&lt;br/&gt;
useful, sample table functions for&lt;/p&gt;

&lt;p&gt;1) making a table out of a property file&lt;/p&gt;

&lt;p&gt;2) making a table out of an XML file&lt;/p&gt;

&lt;p&gt;3) making tables out of subversion logs, apache web server logs, and&lt;br/&gt;
JIRA reports.&lt;/p&gt;

&lt;p&gt;In addition, this demo provides machinery for declaring and refreshing&lt;br/&gt;
paramaterized subscriptions to data from foreign SQL databases.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/VTITemplate.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/StringColumnVTI.java&lt;/p&gt;

&lt;p&gt;Ancestor classes of most of the table functions in this demo. These&lt;br/&gt;
classes factor out most of the boilerplate code needed for table&lt;br/&gt;
functions.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;


&lt;p&gt;A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/VTIHelper.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/example/VTIs.java&lt;/p&gt;

&lt;p&gt;Machinery showing how Annotations help  abstract out some of the&lt;br/&gt;
routine chores of creating table functions.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/XmlVTI.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/XMLRow.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/example/ApacheServerLogVTI.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/example/DerbyJiraReportVTI.java&lt;/p&gt;

&lt;p&gt;Machinery for making a table out of an XML file plus sample table&lt;br/&gt;
functions wrapping apache web server logs and JIRA reports.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/FlatFileVTI.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/example/SubversionLogVTI.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/example/PropertyFileVTI.java&lt;/p&gt;

&lt;p&gt;Machinery for tabularizing a text file of records plus sample table&lt;br/&gt;
functions wrapping subversion logs and property files.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/QueryVTIHelper.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/core/QueryRow.java&lt;/p&gt;

&lt;p&gt;Machinery for creating a table function out of a query against a&lt;br/&gt;
foreign database.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/demo/vtis/java/org/apache/derbyDemo/vtis/snapshot/Subscription.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/snapshot/SnapshotQuery.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/snapshot/SubscriptionSignature.java&lt;br/&gt;
A      java/demo/vtis/java/org/apache/derbyDemo/vtis/example/WorldDBSnapshot.java&lt;/p&gt;

&lt;p&gt;Machinery for declaring/refreshing parameterized subscriptions of&lt;br/&gt;
foreign data plus an example subscription to the MySQL sample &quot;world&quot;&lt;br/&gt;
database.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/demo/vtis/vtiDemo.sql&lt;br/&gt;
A      java/demo/vtis/data/svn_log.txt&lt;br/&gt;
A      java/demo/vtis/data/DerbyJiraReport.xml&lt;br/&gt;
A      java/demo/vtis/data/ApacheServerLog.xml&lt;br/&gt;
A      java/demo/vtis/README&lt;/p&gt;

&lt;p&gt;Script, data, and instructions explaining how to build and use this&lt;br/&gt;
demo code.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;M      java/demo/build.xml&lt;br/&gt;
M      build.xml&lt;/p&gt;

&lt;p&gt;Build machinery.&lt;/p&gt;</comment>
                            <comment id="12535200" author="johnemb" created="Tue, 16 Oct 2007 09:39:56 +0100"  >&lt;p&gt;I applied the patch and took the vtiDemo.sql script for a quick test drive. Although I probably didn&apos;t get half of what these sample table functions are able to do and how they work during my brief encounter, my impression is that they demonstrate some very useful and powerful features!&lt;/p&gt;

&lt;p&gt;Is this demo supposed to be included in our (future) released bin-distributions? If so, more detailed instructions for compiling the Java classes and running the demo should be included, as well as references to more information/documentation (I probably didn&apos;t have to mention this, but I did it just in case... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;

&lt;p&gt;For Derby developers the demo seems to work fine, at least after tuning the SQL script a little (paths, urls) and making sure the MySQL example database is available as expected. A minor inconvenience was that MySQL calls this database &quot;world&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, not &quot;worlddb&quot; as the URLs in the script say, so I had to do another round of changing the MySQL connection URLs (or recreate the db in MySQL).&lt;/p&gt;

&lt;p&gt;I also found a minor inconsistency when changing the paths to the derby trunk: The script comments say that it assumes to find the derby code at &apos;/opt/DerbyTrunk&apos;, but the script also referred to &apos;./trunk&apos; at one point (at line 144, in the query for &quot;how active were the committers in 2006?&quot;). After updating all path references to trunk, everything went fine.&lt;/p&gt;

&lt;p&gt;Well done!&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;http://dev.mysql.com/doc/world-setup/en/world-setup.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dev.mysql.com/doc/world-setup/en/world-setup.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12535751" author="rhillegas" created="Wed, 17 Oct 2007 22:19:55 +0100"  >&lt;p&gt;Thanks for taking a look at this patch, John! I have attached a second rev, derby-3129-sampleTableFunctions-ab.diff. This patch makes some changes:&lt;/p&gt;

&lt;p&gt;1) Splits the vtiDemo.sql script into two scripts. The first, demoFileVtis.sql, tests the file-based VTIs which don&apos;t depend on having a MySQL installation. The second script, demoForeignDbmsVtis.sql tests the machinery which depends on a MySQL installation.&lt;/p&gt;

&lt;p&gt;2) Thanks for catching the lingering reference to a relative path in the first script. I have fixed this.&lt;/p&gt;

&lt;p&gt;3) Thanks for pointing out that the MySQL database name was confusing. I have changed the second script to expect that the database will be named &quot;world&quot; as you recommended.&lt;/p&gt;

&lt;p&gt;4) I added a bit more verbiage to the README file.&lt;/p&gt;</comment>
                            <comment id="12537134" author="rhillegas" created="Tue, 23 Oct 2007 21:54:54 +0100"  >&lt;p&gt;Committed derby-3129-sampleTableFunctions-ab.diff at subversion revision 587652.&lt;/p&gt;</comment>
                            <comment id="12537342" author="rhillegas" created="Wed, 24 Oct 2007 16:10:12 +0100"  >&lt;p&gt;Committed derby-3129-02-buildfix-aa.diff. This is meant to fix the build problems introduced by the previous submission. The previous submission caused the build to fail when run from a Java 6 environment. This is because JDBC4 introduces additional methods into the ResultSet interface implemented by demo classes--those methods are not implemented in the demo.&lt;/p&gt;</comment>
                            <comment id="12545047" author="johnemb" created="Fri, 23 Nov 2007 15:19:15 +0000"  >&lt;p&gt;As mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3225&quot; title=&quot;Some demo programs in -bin distributions are not mentioned in demo/programs/readme.html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3225&quot;&gt;&lt;del&gt;DERBY-3225&lt;/del&gt;&lt;/a&gt;, I don&apos;t think vtis/README is suitable for -bin distributions as-is, basically because build.xml files are not included (by default) in -bin distributions. The README says:&lt;/p&gt;

&lt;p&gt;&amp;lt;quote&amp;gt;&lt;br/&gt;
To build the code, invoke the vti-demo build target in the&lt;br/&gt;
top level build script. To build the javadoc, invoke the demodocs&lt;br/&gt;
target in the top level build script.&lt;br/&gt;
&amp;lt;/quote&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12548790" author="rhillegas" created="Wed, 5 Dec 2007 19:54:29 +0000"  >&lt;p&gt;Attaching derby-3129-03-lineList.diff and committing it at subversion revision 601492. This adds another demo vti: LineListVTI. This vti just reads a text file and turns each line into a row with a single column containing the line&apos;s trimmed contents.&lt;/p&gt;</comment>
                            <comment id="12559460" author="dyret" created="Wed, 16 Jan 2008 12:05:49 +0000"  >&lt;p&gt;Hi Rick, can this issue be resolved/closed, now?&lt;/p&gt;</comment>
                            <comment id="12563203" author="rhillegas" created="Mon, 28 Jan 2008 17:04:05 +0000"  >&lt;p&gt;Attaching derby-3129-04-propertyFileParsing.diff. This prevents the property file vti from choking on lines which don&apos;t have an &quot;=&quot; in them. Committed at subversion revision 615953.&lt;/p&gt;</comment>
                            <comment id="12564424" author="rhillegas" created="Thu, 31 Jan 2008 17:48:45 +0000"  >&lt;p&gt;Attaching derby-3129-05-propertyFileContinuationLines.diff. This makes the following changes:&lt;/p&gt;

&lt;p&gt;1) Make the property-file reading VTI handle continuation lines&lt;/p&gt;

&lt;p&gt;2) Adjust the message column in that VTI so that the &quot;=&quot; is not included&lt;/p&gt;

&lt;p&gt;3) Fix a typo in the script which runs that VTI&lt;/p&gt;

&lt;p&gt;4) Also make the script select all of the columns from that VTI, not just the messageID column.&lt;/p&gt;

&lt;p&gt;Committed at subversion revision 617170.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12325788">DERBY-716</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12368299" name="derby-3129-02-buildfix-aa.diff" size="3488" author="rhillegas" created="Wed, 24 Oct 2007 16:10:12 +0100"/>
                            <attachment id="12371066" name="derby-3129-03-lineList.diff" size="4542" author="rhillegas" created="Wed, 5 Dec 2007 19:54:29 +0000"/>
                            <attachment id="12374195" name="derby-3129-04-propertyFileParsing.diff" size="1041" author="rhillegas" created="Mon, 28 Jan 2008 17:04:01 +0000"/>
                            <attachment id="12374477" name="derby-3129-05-propertyFileContinuationLines.diff" size="2771" author="rhillegas" created="Thu, 31 Jan 2008 17:48:45 +0000"/>
                            <attachment id="12367661" name="derby-3129-sampleTableFunctions-aa.diff" size="978224" author="rhillegas" created="Fri, 12 Oct 2007 22:44:50 +0100"/>
                            <attachment id="12367912" name="derby-3129-sampleTableFunctions-ab.diff" size="980315" author="rhillegas" created="Wed, 17 Oct 2007 22:19:55 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Oct 2007 08:39:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30734</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0k07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37059</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>