<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:15:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5271/DERBY-5271.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5271] Client may hang if the server crashes due to a java.lang.Error</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5271</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When certain types of errors are raised while the network server is processing a client request, the server is left in a semi-degraded state. The problem this issue is concerned with, is that the client socket is kept open even though the server in a kind of degraded state (server JVM still alive). This causes the client to hang, until the server JVM is killed, in a read-call on the socket.&lt;/p&gt;

&lt;p&gt;I&apos;m able to reproduce this with an OOME being raised on the server.&lt;/p&gt;

&lt;p&gt;In my opinion, hanging when there is no chance of progression is bad behavior. Furthermore, it causes trouble for automated testing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509808">DERBY-5271</key>
            <summary>Client may hang if the server crashes due to a java.lang.Error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2011 10:02:29 +0100</created>
                <updated>Wed, 14 Mar 2012 12:34:07 +0000</updated>
                            <resolved>Mon, 5 Mar 2012 19:02:45 +0000</resolved>
                                    <version>10.1.3.1</version>
                    <version>10.2.2.0</version>
                    <version>10.3.3.0</version>
                    <version>10.4.2.0</version>
                    <version>10.5.3.0</version>
                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                    <version>10.8.1.2</version>
                    <version>10.9.1.0</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13047092" author="kristwaa" created="Fri, 10 Jun 2011 10:14:02 +0100"  >&lt;p&gt;Attaching an initial fix proposal with patch 1a to get the discussion started.&lt;br/&gt;
It addresses the problem I encountered, where the client hung due to an OOME on the server (same machine/JVM). This was part of a test run, and I had to manually kill the JVM to get the test script to continue (I think the first time this happened the process was left untouched for more than 12 hours).&lt;/p&gt;</comment>
                            <comment id="13047142" author="knutanders" created="Fri, 10 Jun 2011 12:20:18 +0100"  >&lt;p&gt;This looks like a reasonable fix. +1&lt;/p&gt;</comment>
                            <comment id="13048225" author="dagw" created="Sun, 12 Jun 2011 05:28:48 +0100"  >&lt;p&gt;Agreed. Just wondering, I haven&apos;t studied the code: if there a chance that trying to close the session might make the &lt;b&gt;server&lt;/b&gt; hang (and not get to throw Error)? &lt;/p&gt;</comment>
                            <comment id="13085575" author="kristwaa" created="Tue, 16 Aug 2011 08:15:17 +0100"  >&lt;p&gt;Committed patch 1a to trunk with revision 1158108.&lt;br/&gt;
I plan to backport this fix.&lt;/p&gt;

&lt;p&gt;Regarding making the server hang, I can&apos;t guarantee that it won&apos;t happen. If it happens it would hopefully affect only the worker thread that crashed. Most of the Error subclasses are pretty serious and the JVM will come down in many cases. OOME isn&apos;t necessarily one of these - what happens depends on the nature of the shortage and in which threads an OOME is raised. Further, a single hung ClientThread may not be a problem, assuming that database resources (like locks) have been released.&lt;/p&gt;</comment>
                            <comment id="13089359" author="kristwaa" created="Tue, 23 Aug 2011 10:09:58 +0100"  >&lt;p&gt;Backported to 10.8 with revision 1160590.&lt;br/&gt;
Resolving issue.&lt;/p&gt;</comment>
                            <comment id="13089429" author="kristwaa" created="Tue, 23 Aug 2011 13:50:49 +0100"  >&lt;p&gt;Added two extra comments with revision 1160667.&lt;/p&gt;</comment>
                            <comment id="13097136" author="kristwaa" created="Mon, 5 Sep 2011 14:03:53 +0100"  >&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                            <comment id="13222509" author="kmarsden" created="Mon, 5 Mar 2012 19:01:17 +0000"  >&lt;p&gt;reopen to fix affects version. I think this goes all the way back.&lt;/p&gt;</comment>
                            <comment id="13229149" author="kristwaa" created="Wed, 14 Mar 2012 12:34:07 +0000"  >&lt;p&gt;Re-closing issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12482044" name="derby-5271-1a-inital_fix_proposal.diff" size="1074" author="kristwaa" created="Fri, 10 Jun 2011 10:14:02 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jun 2011 11:20:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0cq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>