<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:17:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3783/DERBY-3783.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3783] LOBStreamControl shouldn&apos;t throw SQLException</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3783</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;LOBStreamControl throws three types of exceptions: IOException, SQLException and StandardException.&lt;br/&gt;
All the SQLException are generated/thrown from the code in LOBStreamControl.&lt;br/&gt;
At this level of the code, SQLException should not be thrown, as it is more tedious to handle both SQLException and StandardException at higher levels.&lt;/p&gt;


&lt;p&gt;I propose to replace SQLException with StandardException in LOBStreamControl. The purpose of this change is consistency, and also results it slightly less code at higher levels.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12400453">DERBY-3783</key>
            <summary>LOBStreamControl shouldn&apos;t throw SQLException</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jul 2008 09:49:01 +0100</created>
                <updated>Mon, 4 May 2009 19:22:25 +0100</updated>
                            <resolved>Mon, 21 Jul 2008 12:13:05 +0100</resolved>
                                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                                    <fixVersion>10.4.2.0</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12614279" author="kristwaa" created="Thu, 17 Jul 2008 10:16:42 +0100"  >&lt;p&gt;&apos;derby-3783-1a-dont_throw_sqlexception.diff&apos; makes LOBStreamControl throw StandardException instead of SQLException.&lt;br/&gt;
I&apos;ve tried to change as little as possible, but there was logic in some of the catch blocks that had to be moved.&lt;/p&gt;

&lt;p&gt;I&apos;ve run jdbcapi._Suite without failures, running suites.All and derbyall now.&lt;br/&gt;
I plan to commit (or post a new patch) once the tests have completed. Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12614678" author="knutanders" created="Fri, 18 Jul 2008 10:16:08 +0100"  >&lt;p&gt;One small suggestion, while you&apos;re at it:&lt;/p&gt;

&lt;p&gt;LOBInputStream.java:&lt;br/&gt;
+            } else &lt;/p&gt;
{
+                throw new IOException(se.getMessage());
+            }

&lt;p&gt;To preserve the stack trace: throw (IOException) new IOException(se.getMessage()).initCause(se);&lt;/p&gt;

&lt;p&gt;Perhaps we should have a helper method for this, since we seem to need it multiple places in these classes.&lt;/p&gt;</comment>
                            <comment id="12614684" author="kristwaa" created="Fri, 18 Jul 2008 11:13:14 +0100"  >&lt;p&gt;That&apos;s a good idea Knut Anders!&lt;br/&gt;
Preserving the stack traces is important.&lt;/p&gt;

&lt;p&gt;I forgot to add a comment that I committed patch &apos;derby-3783-1a-dont_throw_sqlexception.diff&apos; yesterday:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;trunk : revision 677623&lt;/li&gt;
	&lt;li&gt;10.4 : revision 677628&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m leaving the issue open for now.&lt;/p&gt;</comment>
                            <comment id="12615025" author="knutanders" created="Sat, 19 Jul 2008 18:44:31 +0100"  >&lt;p&gt;I have created a patch which adds a method newIOException(Throwable cause) to the Util class in impl.jdbc and changes all occurrences of new IOException(e.getMessages()) in that package to use the utility method. All tests in derbyall and suites.All passed with the patch.&lt;/p&gt;</comment>
                            <comment id="12615107" author="kristwaa" created="Sun, 20 Jul 2008 18:32:16 +0100"  >&lt;p&gt;+1 to commit &apos; d3783-initCause.diff&apos;.&lt;/p&gt;</comment>
                            <comment id="12615208" author="knutanders" created="Mon, 21 Jul 2008 12:13:05 +0100"  >&lt;p&gt;Committed d3783-initCause.diff with revision 678388.&lt;/p&gt;</comment>
                            <comment id="12619959" author="kristwaa" created="Tue, 5 Aug 2008 18:12:48 +0100"  >&lt;p&gt;Backported &apos;d3783-initCause.diff&apos; to 10.4 with revision 682803. It went in with the patches for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3766&quot; title=&quot;EmbedBlob.setPosition is highly ineffective for streams&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3766&quot;&gt;&lt;del&gt;DERBY-3766&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12399881">DERBY-3766</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12386477" name="d3783-initCause.diff" size="7316" author="knutanders" created="Sat, 19 Jul 2008 18:44:31 +0100"/>
                            <attachment id="12386276" name="derby-3783-1a-dont_throw_sqlexception.diff" size="14131" author="kristwaa" created="Thu, 17 Jul 2008 10:16:42 +0100"/>
                            <attachment id="12386277" name="derby-3783-1a-dont_throw_sqlexception.stat" size="279" author="kristwaa" created="Thu, 17 Jul 2008 10:16:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 18 Jul 2008 09:16:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0xof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>