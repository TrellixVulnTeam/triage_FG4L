<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6147/DERBY-6147.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6147] ClosedObjectTest fails on the 10.9 branch when running on Java 8</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6147</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/201304.mbox/%3CCADjEm_WJjDwDJ-vE-swq6XXvKD018ZZFFKgapF%3DTchPU9H3Pug%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/201304.mbox/%3CCADjEm_WJjDwDJ-vE-swq6XXvKD018ZZFFKgapF%3DTchPU9H3Pug%40mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12640459">DERBY-6147</key>
            <summary>ClosedObjectTest fails on the 10.9 branch when running on Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Apr 2013 09:28:30 +0100</created>
                <updated>Wed, 16 Apr 2014 03:41:21 +0100</updated>
                            <resolved>Thu, 4 Apr 2013 10:17:21 +0100</resolved>
                                    <version>10.9.2.2</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.2.2</fixVersion>
                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13621929" author="knutanders" created="Thu, 4 Apr 2013 09:39:14 +0100"  >&lt;p&gt;The new JDBC 4.2 methods in Java 8 have default methods that try to do something slightly more useful than throwing AbstractMethodError. However, the default methods don&apos;t behave quite like the test expect. There are three kinds of failures:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;NullPointerException: These happen because we check if the SQLState starts with &quot;0A&quot;. That is, whether or not it&apos;s an SQLFeatureNotSupportedException. However, the exceptions thrown by the default methods don&apos;t have an SQLState. It is null, and the check fails with NPE.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;UnsupportedOperationException: The default methods for the mandatory JDBC 4.2 methods throw these rather than SQLFeatureNotSupportedException. The test is not prepared for this.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The default method for Statement.getLargeMaxRows() returns 0, also if the statement is closed. The test expects the method to throw an exception if the statement is closed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The test should only test the methods that we actually implement, and we could skip those methods that lack an implementation.&lt;/p&gt;

&lt;p&gt;The attached patch makes the test skip those methods that don&apos;t have an implementation in the Derby classes. It uses reflection and the isSynthetic() method to check this.&lt;/p&gt;

&lt;p&gt;I&apos;ve verified that the patch skips the 252 previously failing test cases (and only those) when running with Java 8 on the 10.9 branch. The test also passes on trunk with the patch.&lt;/p&gt;

&lt;p&gt;This fix should theoretically make the test work with no changes on later JDBC versions as well. We&apos;ll see how that plays out in practice when we get there...&lt;/p&gt;

&lt;p&gt;Colour diff: &lt;a href=&quot;https://github.com/kahatlen/derby/commit/b22ca3b4526222987ff134b7230f51ddd1940b18&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/kahatlen/derby/commit/b22ca3b4526222987ff134b7230f51ddd1940b18&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13621949" author="knutanders" created="Thu, 4 Apr 2013 10:06:12 +0100"  >&lt;p&gt;Committed to trunk with revision 1464367.&lt;br/&gt;
Merged to 10.10 and committed revision 1464372.&lt;br/&gt;
Merged to 10.9 and committed revision 1464373.&lt;/p&gt;

&lt;p&gt;The patch does not compile on 10.8, so I&apos;ll just disable the test for Java 8 and later on that branch. The test is already disabled for Java 7 and newer on 10.7.&lt;/p&gt;</comment>
                            <comment id="13621956" author="knutanders" created="Thu, 4 Apr 2013 10:16:47 +0100"  >&lt;p&gt;The attached patch, d6147-10.8.diff, disables ClosedObjectTest on the 10.8 branch when running Java 8 or higher.&lt;/p&gt;

&lt;p&gt;Committed to the 10.8 branch with revision 1464382.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12576950" name="d6147-10.8.diff" size="1387" author="knutanders" created="Thu, 4 Apr 2013 10:16:47 +0100"/>
                            <attachment id="12576942" name="d6147-1a.diff" size="3451" author="knutanders" created="Thu, 4 Apr 2013 09:39:14 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzd7zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>