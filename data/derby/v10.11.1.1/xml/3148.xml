<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:47 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3148/DERBY-3148.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3148] IllegalArgumentException: Malformed \uxxxx encoding while trying to find Xalan version running tests via ant</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3148</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Following stack trace after executing:&lt;/p&gt;

&lt;p&gt;ant -propertyfile ant.properties junit-all-codeline-jars&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Unexpected exception while trying to find Xalan version:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.IllegalArgumentException: Malformed \uxxxx encoding.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.util.Properties.loadConvert(Properties.java:531)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.util.Properties.load(Properties.java:370)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.derbyTesting.junit.XML.checkXalanVersion(XML.java:&lt;br/&gt;
329)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.derbyTesting.junit.XML.&amp;lt;clinit&amp;gt;(XML.java:116)&lt;/p&gt;</description>
                <environment>ant 1.7.0&lt;br/&gt;
IBM JVM 1.5&lt;br/&gt;
Windows XP</environment>
        <key id="12381098">DERBY-3148</key>
            <summary>IllegalArgumentException: Malformed \uxxxx encoding while trying to find Xalan version running tests via ant</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="army">A B</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2007 22:00:16 +0100</created>
                <updated>Fri, 21 Jan 2011 17:50:59 +0000</updated>
                            <resolved>Fri, 26 Oct 2007 17:16:37 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12537428" author="djd" created="Wed, 24 Oct 2007 22:20:34 +0100"  >&lt;p&gt;The issue is that org.apache.derbyTesting.junit.XML.checkXalanVersion() assumes that&lt;/p&gt;

&lt;p&gt;org.apache.xalan.xslt.EnvironmentCheck.checkEnvironment()&lt;/p&gt;

&lt;p&gt;writes its output in a format that the java.util.Properties.load() will support and it doesn&apos;t. Its javadoc says a format similar to the Properties file format.&lt;/p&gt;

&lt;p&gt;I tried changing the code to ensure the output encoding was ISO-8859-1 (rather than the platform default by doing this in checkXalanVersion() but it makes no difference.&lt;/p&gt;

&lt;p&gt;            PrintWriter pW = new PrintWriter(&lt;br/&gt;
                    new OutputStreamWriter(bos, &quot;ISO-8859-1&quot;));&lt;/p&gt;

&lt;p&gt;I&apos;m seeing a failure because my classpath (on windows) has elements which include &apos;\utils&apos; which Properties.load is trying to interpret as a unicode escape sequence (\uxxxx).&lt;/p&gt;</comment>
                            <comment id="12537452" author="army" created="Thu, 25 Oct 2007 00:11:46 +0100"  >&lt;p&gt;Attaching a simple patch which moves away from parsing the EnvironmentCheck output as Properties and instead just does a plain old string search for the line containing the target property.  This seems to have solved the problem...&lt;/p&gt;

&lt;p&gt;Is this too naive of a solution?&lt;/p&gt;</comment>
                            <comment id="12537453" author="army" created="Thu, 25 Oct 2007 00:22:47 +0100"  >&lt;p&gt;Actually, I guess it is too naive.  If the string &quot;version.xalan2_2&quot; shows up in the classpath, that&apos;ll fail, too.&lt;/p&gt;</comment>
                            <comment id="12537471" author="djd" created="Thu, 25 Oct 2007 02:03:30 +0100"  >&lt;p&gt;With the patch the byte array is written using the default encoding of the platform, and then read using ISO-8859-1.&lt;br/&gt;
Whichever encoding is used, it needs to be consistent on read and write.&lt;/p&gt;</comment>
                            <comment id="12537472" author="djd" created="Thu, 25 Oct 2007 02:04:26 +0100"  >&lt;p&gt;maybe checking for indexOf(&quot;version.xalan2_2=&quot;) &lt;span class=&quot;error&quot;&gt;&amp;#91;note the equals&amp;#93;&lt;/span&gt; would be safer?&lt;/p&gt;</comment>
                            <comment id="12537640" author="army" created="Thu, 25 Oct 2007 16:43:08 +0100"  >&lt;p&gt;Thank you for the feedback, Dan.  I&apos;m attaching a _v2 patch that incorporates your suggestions.  There is still a chance for failure if the a user has  &quot;version.xalan2_2=&quot; in his/her classpath, but this is hopefully an improvement over the current behavior...&lt;/p&gt;</comment>
                            <comment id="12537719" author="djd" created="Thu, 25 Oct 2007 21:36:53 +0100"  >&lt;p&gt;Patch worked for me.&lt;/p&gt;</comment>
                            <comment id="12538006" author="army" created="Fri, 26 Oct 2007 17:16:37 +0100"  >&lt;p&gt;Thanks for verifying the patch, Dan.&lt;/p&gt;

&lt;p&gt;I ran suites.All as a sanity check on my Winows laptop and the only two failures are known issues.  So committed the _v2 patch with svn # 588698:&lt;/p&gt;

&lt;p&gt;  URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=588698&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=588698&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And I&apos;m marking the issue as RESOLVED in trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12368333" name="d3148_v1.patch" size="1682" author="army" created="Thu, 25 Oct 2007 00:11:46 +0100"/>
                            <attachment id="12368388" name="d3148_v2.patch" size="2418" author="army" created="Thu, 25 Oct 2007 16:43:08 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Oct 2007 23:11:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0lyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37377</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>