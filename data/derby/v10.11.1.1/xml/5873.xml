<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5873/DERBY-5873.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5873] Avoid unnecessary allocation of Number instances in client/server</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5873</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Java 5 introduced some new static factory methods (called valueOf()) in the Number sub-classes, to be used in preference of the constructors unless a fresh instance is required. The valueOf() methods are allowed to cache and reuse objects, possibly reducing the allocation/gc cost and the memory footprint. For example, Integer.valueOf(int) uses a pre-allocated cache for values between -128 and +127 by default (the cache size can be tuned with JVM flags).&lt;/p&gt;

&lt;p&gt;Now that the server and client code is compiled against Java 5 libraries, we should use the valueOf() methods  to get those benefits. Note also that Java 5 auto-boxing of numbers uses these methods implicitly, so in many cases we can just remove the calls to the constructor and the compiler will automatically insert the calls for us.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12599830">DERBY-5873</key>
            <summary>Avoid unnecessary allocation of Number instances in client/server</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jul 2012 10:59:44 +0100</created>
                <updated>Thu, 24 Oct 2013 10:55:36 +0100</updated>
                            <resolved>Mon, 13 Aug 2012 13:57:08 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Network Client</component>
                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13421231" author="knutanders" created="Tue, 24 Jul 2012 08:08:49 +0100"  >&lt;p&gt;The attached patch replaces all calls to constructors for classes in the java.lang.Number class hierarchy or java.lang.Boolean with static factory methods, or with auto-boxing where that&apos;s possible and more convenient, in the client and drda code trees.&lt;/p&gt;

&lt;p&gt;All the regression tests passed with the patch.&lt;/p&gt;</comment>
                            <comment id="13422040" author="knutanders" created="Wed, 25 Jul 2012 07:48:07 +0100"  >&lt;p&gt;Committed revision 1365468.&lt;/p&gt;</comment>
                            <comment id="13422092" author="knutanders" created="Wed, 25 Jul 2012 09:57:19 +0100"  >&lt;p&gt;In the first patch, I forgot about the BigDecimal and BigInteger classes, which are also sub-classes of Number. I see that Java 5 introduced the following valueOf() factory methods for BigDecimal that we could use:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;valueOf(double) - replaces the &quot;new BigDecimal(Double.toString(&amp;lt;double&amp;gt;))&quot; idiom used to convert a double to BigDecimal without changing the precision&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;valueOf(long, int) - could be used to create a BigDecimal value directly instead of going via a BigInteger and/or byte[], if the unscaled value is known to fit in a long&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Will post a followup patch.&lt;/p&gt;</comment>
                            <comment id="13422991" author="knutanders" created="Thu, 26 Jul 2012 10:47:25 +0100"  >&lt;p&gt;The 2a patch makes CrossConverters and Cursor use BigDecimal.valueOf(double) when converting a double to a BigDecimal. It also makes Decimal and DDMReader use BigDecimal.valueOf(double,int) when parsing a BigDecimal with precision up to 18 sent over the wire.&lt;/p&gt;

&lt;p&gt;All the regression tests passed.&lt;/p&gt;</comment>
                            <comment id="13433115" author="knutanders" created="Mon, 13 Aug 2012 13:57:08 +0100"  >&lt;p&gt;Committed revision 1372405.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12675322">DERBY-6391</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12537658" name="d5873-1a.diff" size="133379" author="knutanders" created="Tue, 24 Jul 2012 08:08:49 +0100"/>
                            <attachment id="12537979" name="d5873-2a-bigdec.diff" size="6365" author="knutanders" created="Thu, 26 Jul 2012 10:47:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0afz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>