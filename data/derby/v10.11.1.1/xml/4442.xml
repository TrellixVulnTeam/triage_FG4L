<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:38:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4442/DERBY-4442.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4442] Evaluation of default value and identity in an INSERT result set evaluated too early.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4442</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In contrast to generated column, which are evaluated when the next row from the result set to be inserted, currently default values and identity columns are generated &quot;early&quot;, that is as part of avaluating the subquery (SELECT or VALUES as the case may be). &lt;br/&gt;
This does not currently cause a user visible bug in Derby, but it lies behind &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3&quot; title=&quot;Identity column not filled consecutively with &amp;quot;insert ... select distinct&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3&quot;&gt;&lt;del&gt;DERBY-3&lt;/del&gt;&lt;/a&gt; and the effect Bryan observed in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4&quot; title=&quot;&amp;quot;order by&amp;quot; is not supported for &amp;quot;insert ... select&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4&quot;&gt;&lt;del&gt;DERBY-4&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Additionally, &quot;early&quot; computation has given rise to much special handling and ensuing bugs, cf. &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1644&quot; title=&quot;NPE when inserting values to a table that has a column declared as generated by default as identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1644&quot;&gt;&lt;del&gt;DERBY-1644&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4413&quot; title=&quot;INSERT from SELECT DISTINCT gives assertFailure (sane), or  NPE (insane) in presence of generated columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4413&quot;&gt;&lt;del&gt;DERBY-4413&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4419&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and identity columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4419&quot;&gt;&lt;del&gt;DERBY-4419&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4425&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and columns generated from expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4425&quot;&gt;&lt;del&gt;DERBY-4425&lt;/del&gt;&lt;/a&gt; and others.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4397&quot; title=&quot;Allow ORDER BY in subqueries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4397&quot;&gt;&lt;del&gt;DERBY-4397&lt;/del&gt;&lt;/a&gt; requires this fix for correct behaviour with INSERT.&lt;/p&gt;

&lt;p&gt;See also&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4413?focusedCommentId=12769532&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12769532&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-4413?focusedCommentId=12769532&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12769532&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12440634">DERBY-4442</key>
            <summary>Evaluation of default value and identity in an INSERT result set evaluated too early.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Nov 2009 17:17:00 +0000</created>
                <updated>Thu, 13 Jan 2011 17:32:48 +0000</updated>
                            <resolved>Tue, 6 Jul 2010 19:57:26 +0100</resolved>
                                    <version>10.5.3.0</version>
                                    <fixVersion>10.5.3.1</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12780525" author="knutanders" created="Fri, 20 Nov 2009 11:22:38 +0000"  >&lt;p&gt;I took the prn3 patch attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4433&quot; title=&quot;Cannot insert from EXCEPT/INTERSECT when target table has more columns than the source&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4433&quot;&gt;&lt;del&gt;DERBY-4433&lt;/del&gt;&lt;/a&gt;, which ensures that generated/identity columns are added in a ProjectRestrictNode on top of the source result set if the source is a SetOperatorNode, and moved the PRN generation from SetOperatorNode to ResultSetNode so that it applies to all kinds of result sets (except table constructors, which need special handling). See the attached always_prn patch.&lt;/p&gt;

&lt;p&gt;With that patch, the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3&quot; title=&quot;Identity column not filled consecutively with &amp;quot;insert ... select distinct&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3&quot;&gt;&lt;del&gt;DERBY-3&lt;/del&gt;&lt;/a&gt; repro does no longer produce gaps in the identity values, so the approach looks promising. I also tried it in combination with the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4&quot; title=&quot;&amp;quot;order by&amp;quot; is not supported for &amp;quot;insert ... select&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4&quot;&gt;&lt;del&gt;DERBY-4&lt;/del&gt;&lt;/a&gt; patch (derby-4_dhw), but then it unfortunately produced an assert error:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t3(id int generated always as identity, i int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t3&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; select * from t1 order by x;&lt;br/&gt;
ERROR XJ001: Java exception: &apos;ASSERT FAILED bindExpressions() is not expected to be called for class org.apache.derby.impl.sql.compile.ProjectRestrictNode: org.apache.derby.shared.common.sanity.AssertFailure&apos;.&lt;/p&gt;</comment>
                            <comment id="12780565" author="dagw" created="Fri, 20 Nov 2009 14:23:54 +0000"  >&lt;p&gt;Thanks for trying the patch with the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4&quot; title=&quot;&amp;quot;order by&amp;quot; is not supported for &amp;quot;insert ... select&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4&quot;&gt;&lt;del&gt;DERBY-4&lt;/del&gt;&lt;/a&gt; patch. Here is a slightly&lt;br/&gt;
modified InsertNode.java which (with your patch + a modified&lt;br/&gt;
contribution from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4&quot; title=&quot;&amp;quot;order by&amp;quot; is not supported for &amp;quot;insert ... select&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4&quot;&gt;&lt;del&gt;DERBY-4&lt;/del&gt;&lt;/a&gt;) which seems to work.&lt;/p&gt;

&lt;p&gt;As you can see, I moved the ORDER BY pulling and binding to happen&lt;br/&gt;
before the enhancement (not a problem any longer since we can&apos;t sort a&lt;br/&gt;
VALUES in the insert context), and dropped the use of the column map.&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from t4;&lt;br/&gt;
I          |J          &lt;br/&gt;
-----------------------&lt;br/&gt;
1          |200        &lt;br/&gt;
2          |100        &lt;br/&gt;
3          |300&lt;/p&gt;

&lt;p&gt;ij&amp;gt; insert into t3&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; select j from t4 order by j;&lt;br/&gt;
ij&amp;gt; select * from t3;&lt;br/&gt;
ID         |I          &lt;br/&gt;
-----------------------&lt;br/&gt;
34         |100        &lt;br/&gt;
35         |200        &lt;br/&gt;
36         |300        &lt;/p&gt;</comment>
                            <comment id="12780601" author="knutanders" created="Fri, 20 Nov 2009 15:37:19 +0000"  >&lt;p&gt;Thanks, Dag. That&apos;s good news. I ran derbyall and suites.All with always_prn.diff, and only one test failed: DistinctTest.testDistinctInsertWithGeneratedColumn(). That test case is intended to fail if &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3&quot; title=&quot;Identity column not filled consecutively with &amp;quot;insert ... select distinct&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3&quot;&gt;&lt;del&gt;DERBY-3&lt;/del&gt;&lt;/a&gt; is fixed, according to its comments, so that should be fine:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3&quot; title=&quot;Identity column not filled consecutively with &amp;quot;insert ... select distinct&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3&quot;&gt;&lt;del&gt;DERBY-3&lt;/del&gt;&lt;/a&gt;. If that bug is fixed, the first query after the comment&lt;/li&gt;
	&lt;li&gt;below will fail.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll try to clean up the patch and get it into a committable shape.&lt;/p&gt;</comment>
                            <comment id="12780619" author="knutanders" created="Fri, 20 Nov 2009 16:10:19 +0000"  >&lt;p&gt;The patch does break some statements that used to work, for instance this:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t2(x int generated by default as identity);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t2 values 1 union values default;&lt;br/&gt;
ERROR XJ001: Java exception: &apos;: java.lang.NullPointerException&apos;.&lt;/p&gt;

&lt;p&gt;However, I don&apos;t think this statement should have been accepted in the first place. VALUES DEFAULT is not accepted in a subquery unless it&apos;s part of a UNION, it seems:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; insert into t2 select * from (values default) v;&lt;br/&gt;
ERROR 42Y85: The DEFAULT keyword is only allowed in a VALUES clause when the VALUES clause appears within an INSERT statement.&lt;/p&gt;</comment>
                            <comment id="12780632" author="knutanders" created="Fri, 20 Nov 2009 16:34:08 +0000"  >&lt;p&gt;Dag&apos;s comments in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4426&quot; title=&quot;With generated columns,  INSERT with DEFAULT inside a VALUES clause inside a UNION fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4426&quot;&gt;&lt;del&gt;DERBY-4426&lt;/del&gt;&lt;/a&gt; suggest that the statement that causes NPE is non-standard.&lt;/p&gt;</comment>
                            <comment id="12780766" author="knutanders" created="Fri, 20 Nov 2009 21:21:22 +0000"  >&lt;p&gt;Here&apos;s an updated patch (d4442-1a.diff). I&apos;ve added comments to the new methods, updated the existing comments to better match the current state of the code, updated the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3&quot; title=&quot;Identity column not filled consecutively with &amp;quot;insert ... select distinct&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3&quot;&gt;&lt;del&gt;DERBY-3&lt;/del&gt;&lt;/a&gt; test case to expect the new behaviour, and also added a test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4433&quot; title=&quot;Cannot insert from EXCEPT/INTERSECT when target table has more columns than the source&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4433&quot;&gt;&lt;del&gt;DERBY-4433&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12783120" author="knutanders" created="Fri, 27 Nov 2009 15:33:14 +0000"  >&lt;p&gt;Here&apos;s a new revision of the patch (1b) with one small change:&lt;/p&gt;

&lt;p&gt;The comment in InsertNode.enhanceAndCheckForAutoincrement() only explained why it was OK to skip the call to forbidOverrides() on the top-level RCL for a multi-row table constructor. Now it also explains why it &lt;b&gt;should&lt;/b&gt; be skipped, to make it clear that the check is actually needed and not some kind of optimization.&lt;/p&gt;</comment>
                            <comment id="12783123" author="knutanders" created="Fri, 27 Nov 2009 15:42:13 +0000"  >&lt;p&gt;The patch is ready for review, so I&apos;m setting &quot;Patch Available&quot;. We should probably wait for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4426&quot; title=&quot;With generated columns,  INSERT with DEFAULT inside a VALUES clause inside a UNION fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4426&quot;&gt;&lt;del&gt;DERBY-4426&lt;/del&gt;&lt;/a&gt; to be fixed before the patch is committed to prevent exposing the NPEs mentioned earlier.&lt;/p&gt;</comment>
                            <comment id="12783189" author="dagw" created="Sat, 28 Nov 2009 00:07:04 +0000"  >&lt;p&gt;Patch looks good to me; +1 to commit (before or after &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4426&quot; title=&quot;With generated columns,  INSERT with DEFAULT inside a VALUES clause inside a UNION fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4426&quot;&gt;&lt;del&gt;DERBY-4426&lt;/del&gt;&lt;/a&gt;, your call).&lt;/p&gt;</comment>
                            <comment id="12783656" author="knutanders" created="Mon, 30 Nov 2009 13:44:35 +0000"  >&lt;p&gt;Thanks Dag. I&apos;ve committed the patch to trunk with revision 885421, since it looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4426&quot; title=&quot;With generated columns,  INSERT with DEFAULT inside a VALUES clause inside a UNION fails.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4426&quot;&gt;&lt;del&gt;DERBY-4426&lt;/del&gt;&lt;/a&gt; is more or less ready for commit too.&lt;/p&gt;

&lt;p&gt;I&apos;ll leave this issue open until I&apos;ve investigated if we can back out the fixes for some of the other issues linked to this one now. I think at least there were some asserts that were loosened to accept untyped nulls (placeholders for the identity values) at odd places in the code, and these could now be made stricter again to potentially catch other errors.&lt;/p&gt;</comment>
                            <comment id="12784028" author="dagw" created="Tue, 1 Dec 2009 03:08:21 +0000"  >&lt;p&gt;Backed out the assert relaxation introduced for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4413&quot; title=&quot;INSERT from SELECT DISTINCT gives assertFailure (sane), or  NPE (insane) in presence of generated columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4413&quot;&gt;&lt;del&gt;DERBY-4413&lt;/del&gt;&lt;/a&gt;, no longer needed.&lt;/p&gt;</comment>
                            <comment id="12785940" author="knutanders" created="Fri, 4 Dec 2009 14:09:28 +0000"  >&lt;p&gt;It looks like the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4419&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and identity columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4419&quot;&gt;&lt;del&gt;DERBY-4419&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4425&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and columns generated from expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4425&quot;&gt;&lt;del&gt;DERBY-4425&lt;/del&gt;&lt;/a&gt; can also be backed out now, because a placeholder for an autoincrement column or a generated column cannot appear in a result column list that far down in the node tree anymore. I&apos;m running the full regression test suite now.&lt;/p&gt;</comment>
                            <comment id="12786881" author="knutanders" created="Mon, 7 Dec 2009 11:54:46 +0000"  >&lt;p&gt;The attached patch backs out the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4425&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and columns generated from expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4425&quot;&gt;&lt;del&gt;DERBY-4425&lt;/del&gt;&lt;/a&gt; (except the tests), since it&apos;s not needed anymore. All the regression tests ran cleanly.&lt;/p&gt;</comment>
                            <comment id="12787395" author="knutanders" created="Tue, 8 Dec 2009 10:25:27 +0000"  >&lt;p&gt;Committed revision 888311. I&apos;m not aware of any more work required for this issue. Marking as resolved.&lt;/p&gt;</comment>
                            <comment id="12884445" author="lilywei" created="Thu, 1 Jul 2010 22:59:08 +0100"  >&lt;p&gt;Reopen to 10.5 back port&lt;/p&gt;</comment>
                            <comment id="12884937" author="mikem" created="Sat, 3 Jul 2010 16:39:41 +0100"  >&lt;p&gt;working on backporting this issue to 10.5.  &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4419&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and identity columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4419&quot;&gt;&lt;del&gt;DERBY-4419&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4413&quot; title=&quot;INSERT from SELECT DISTINCT gives assertFailure (sane), or  NPE (insane) in presence of generated columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4413&quot;&gt;&lt;del&gt;DERBY-4413&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4425&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and columns generated from expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4425&quot;&gt;&lt;del&gt;DERBY-4425&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4442&quot; title=&quot;Evaluation of default value and identity in an INSERT result set evaluated too early.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4442&quot;&gt;&lt;del&gt;DERBY-4442&lt;/del&gt;&lt;/a&gt; all seem related.  I am going to apply and checkin the backported changes to these issues in order.  I think the changes necessary are:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4413&quot; title=&quot;INSERT from SELECT DISTINCT gives assertFailure (sane), or  NPE (insane) in presence of generated columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4413&quot;&gt;&lt;del&gt;DERBY-4413&lt;/del&gt;&lt;/a&gt; #829410&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4419&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and identity columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4419&quot;&gt;&lt;del&gt;DERBY-4419&lt;/del&gt;&lt;/a&gt; #831304&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4425&quot; title=&quot;NullPointerException with INSERT INTO ... from UNION and columns generated from expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4425&quot;&gt;&lt;del&gt;DERBY-4425&lt;/del&gt;&lt;/a&gt; #831319&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4442&quot; title=&quot;Evaluation of default value and identity in an INSERT result set evaluated too early.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4442&quot;&gt;&lt;del&gt;DERBY-4442&lt;/del&gt;&lt;/a&gt; #885421&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4413&quot; title=&quot;INSERT from SELECT DISTINCT gives assertFailure (sane), or  NPE (insane) in presence of generated columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4413&quot;&gt;&lt;del&gt;DERBY-4413&lt;/del&gt;&lt;/a&gt; #885659&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4442&quot; title=&quot;Evaluation of default value and identity in an INSERT result set evaluated too early.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4442&quot;&gt;&lt;del&gt;DERBY-4442&lt;/del&gt;&lt;/a&gt; #888311&lt;/p&gt;</comment>
                            <comment id="12885368" author="mikem" created="Tue, 6 Jul 2010 00:17:34 +0100"  >&lt;p&gt;backporting change #885421 from trunk to 10.5 branch.&lt;/p&gt;

&lt;p&gt;m105_jdk16:76&amp;gt;svn commit&lt;br/&gt;
Sending        .&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/InsertNode.java&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/UnionNode.java&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/intersect.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/tests/lang/DistinctTest.java&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/tests/lang/intersect.sql&lt;br/&gt;
Transmitting file data .......&lt;br/&gt;
Committed revision 960731.&lt;/p&gt;</comment>
                            <comment id="12885557" author="mikem" created="Tue, 6 Jul 2010 16:10:39 +0100"  >&lt;p&gt;backporting svn #888311 from trunk to 10.5 branch.&lt;/p&gt;

&lt;p&gt;m105_jdk16:111&amp;gt;svn commit&lt;br/&gt;
Sending        .&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 960910.&lt;/p&gt;</comment>
                            <comment id="12885639" author="mikem" created="Tue, 6 Jul 2010 19:57:26 +0100"  >&lt;p&gt;backported all changes for this issue from trunk to 10.5 branch, resolving as fixed in 10.5, and resetting original owner.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12439750">DERBY-4433</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="27481">DERBY-3</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12438441">DERBY-4413</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12438889">DERBY-4419</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12439061">DERBY-4425</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12439750">DERBY-4433</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12442061">DERBY-4457</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12442131">DERBY-4460</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12347287">DERBY-1644</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12439197">DERBY-4426</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="27481">DERBY-3</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="27482">DERBY-4</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12468384">DERBY-4728</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12425601" name="always_prn.diff" size="11571" author="knutanders" created="Fri, 20 Nov 2009 11:22:38 +0000"/>
                            <attachment id="12427160" name="backout-derby-4425.diff" size="602" author="knutanders" created="Mon, 7 Dec 2009 11:54:46 +0000"/>
                            <attachment id="12425661" name="d4442-1a.diff" size="17485" author="knutanders" created="Fri, 20 Nov 2009 21:21:21 +0000"/>
                            <attachment id="12425660" name="d4442-1a.stat" size="540" author="knutanders" created="Fri, 20 Nov 2009 21:21:21 +0000"/>
                            <attachment id="12426282" name="d4442-1b.diff" size="17673" author="knutanders" created="Fri, 27 Nov 2009 15:33:14 +0000"/>
                            <attachment id="12425607" name="insert.diff" size="7651" author="dagw" created="Fri, 20 Nov 2009 14:23:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Nov 2009 11:22:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24257</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>