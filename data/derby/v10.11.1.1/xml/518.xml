<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:22:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-518/DERBY-518.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-518] Data type mismatch error for boolean to DECIMAL conversion in J2ME</title>
                <link>https://issues.apache.org/jira/browse/DERBY-518</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The test jdbcapi/resultset.java gives the following error when run in J2ME/CDC/FP :&lt;/p&gt;

&lt;p&gt;Testing nullif(?,DECIMAL(10,5)) with setBoolean&lt;br/&gt;
ERROR XCL12: An attempt was made to put a data value of type &apos;boolean&apos; into a data value of type &apos;DECIMAL&apos;.&lt;/p&gt;

&lt;p&gt;I found that setValue(boolean) is not implemented in BigIntegerDecimal, which is the class used for DECIMAL in J2ME. This is implemented in SQLDecimal and a similar implementation can be provided in BigIntegerDecimal.&lt;/p&gt;

&lt;p&gt;On looking at the setValue methods in these classes, I also found that setValue(Object) is implemented in SQLDecimal but not in BigIntegerDecimal.&lt;/p&gt;</description>
                <environment>J2ME/CDC/Foundation Profile</environment>
        <key id="12313552">DERBY-518</key>
            <summary>Data type mismatch error for boolean to DECIMAL conversion in J2ME</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2005 09:36:00 +0100</created>
                <updated>Fri, 30 Sep 2005 03:29:32 +0100</updated>
                            <resolved>Fri, 30 Sep 2005 03:29:32 +0100</resolved>
                                                    <fixVersion>10.1.2.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12319812" author="deepa" created="Wed, 24 Aug 2005 11:57:05 +0100"  >&lt;p&gt;This patch fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-518&quot; title=&quot;Data type mismatch error for boolean to DECIMAL conversion in J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-518&quot;&gt;&lt;del&gt;DERBY-518&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-453&quot; title=&quot;Create a test wrapper to run tests using BigDecimal in J2ME/CDC/Foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-453&quot;&gt;&lt;del&gt;DERBY-453&lt;/del&gt;&lt;/a&gt; (Create a test wrapper to run tests using BigDecimal in J2ME/CDC/Foundation).  The patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-518&quot; title=&quot;Data type mismatch error for boolean to DECIMAL conversion in J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-518&quot;&gt;&lt;del&gt;DERBY-518&lt;/del&gt;&lt;/a&gt; can be verified only with the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-453&quot; title=&quot;Create a test wrapper to run tests using BigDecimal in J2ME/CDC/Foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-453&quot;&gt;&lt;del&gt;DERBY-453&lt;/del&gt;&lt;/a&gt; and viceversa. So I am submitting it as one patch.&lt;/p&gt;

&lt;p&gt;Kathey, I have addressed your comments for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-453&quot; title=&quot;Create a test wrapper to run tests using BigDecimal in J2ME/CDC/Foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-453&quot;&gt;&lt;del&gt;DERBY-453&lt;/del&gt;&lt;/a&gt; in this patch. &lt;/p&gt;

&lt;p&gt;Ran derbyall with Sun J2SE 1.4.2 and IBM&apos;s WCTME 5.7 J2ME/CDC/FP. 1 failure in J2ME,  which  is not related to this change.&lt;/p&gt;

&lt;p&gt;Please review/commit this patch.&lt;/p&gt;</comment>
                            <comment id="12319928" author="kmarsden" created="Thu, 25 Aug 2005 07:58:11 +0100"  >&lt;p&gt;Looking at SQLDecimal there are also setValue methods for the other primatives, such as setValue(float) and setValue(int).&lt;/p&gt;

&lt;p&gt;Should these be added too?&lt;br/&gt;
If so I can go ahead and commit this patch and those can be added later, but I just want to clarify whether all these setValue methods should be there.&lt;/p&gt;
</comment>
                            <comment id="12319935" author="deepa" created="Thu, 25 Aug 2005 08:54:36 +0100"  >&lt;p&gt;Thanks Kathey for looking at the patch. &lt;/p&gt;

&lt;p&gt;In case of BigIntergerDecimal,  the setValue methods for other primitives are implemented in the parent class BinaryDecimal. As I understand, all valid conversions for DECIMAL type specified in the JDBC spec have to be covered.&lt;/p&gt;</comment>
                            <comment id="12319950" author="djd" created="Thu, 25 Aug 2005 10:32:46 +0100"  >&lt;p&gt;setValue(Object) should not be implemented in BigIntegerDecimal.&lt;/p&gt;

&lt;p&gt;This is because there is no mapping from an Object type to a DECIMAL with JSR169.&lt;/p&gt;</comment>
                            <comment id="12319956" author="kmarsden" created="Thu, 25 Aug 2005 11:33:37 +0100"  >&lt;p&gt;Oops, sorry I didn&apos;t look more closely.&lt;/p&gt;

&lt;p&gt;Would it make sense for setValue(boolean) to live in BinaryDecimal as well and not be dependent on BigInteger like setValue(int) and the other setValue(primitive) methods?&lt;/p&gt;

</comment>
                            <comment id="12320023" author="deepa" created="Fri, 26 Aug 2005 04:17:36 +0100"  >&lt;p&gt;Thanks Kathey and Dan for your comments.&lt;/p&gt;

&lt;p&gt;Kathey, I see the advantage in moving setValue(boolean) to BinaryDecimal and not making it depend on BigInteger - It can be used with all CDC implementations.  I&apos;ll change this and submit a new patch.&lt;/p&gt;

&lt;p&gt;Dan, I will remove setValue(Object) from my patch. I had opened this JIRA issue only for boolean type and I think I should not have overloaded this patch. However, one thing I am not clear about is the data type conversions in JSR169. Is there a table or some section in JSR169 for data type conversions?  As it is a subset of JDBC3.0, I have been referring to JDBC3.0 spec and the subset API mentioned in JSR169. My understanding is that objects which are instances of Number or its subclass(other than BigDecimal) can be converted to DECIMAL type in JSR169. I will appreciate any pointers on this.&lt;/p&gt;</comment>
                            <comment id="12320024" author="djd" created="Fri, 26 Aug 2005 04:28:10 +0100"  >&lt;p&gt;Deepa, can you give a section number from JDBC 3.0 indicating any instance of Number can be converted to DECIMAL?&lt;/p&gt;

&lt;p&gt;I know SQLDecimal has that code in there (conversion of Number) but I believe it is dead code and cannot/willnot be called.&lt;/p&gt;</comment>
                            <comment id="12320040" author="deepa" created="Fri, 26 Aug 2005 06:06:17 +0100"  >&lt;p&gt;I am referring to &quot;TABLE B-5 Conversions Performed by setObject Between Java Object Types and Target JDBC Types&quot;. I change my previous statement to instances of Double,Long, Float,Integer can be converted to DECIMAL. I was also basing on SQLDecimal methods and trying to match as closely as possible. As you mentioned, the code for conversion of Number looks like dead code.&lt;/p&gt;</comment>
                            <comment id="12320042" author="djd" created="Fri, 26 Aug 2005 06:12:39 +0100"  >&lt;p&gt;OK - I see B-5, but that is handled by the setObject() method of PreparedStatement. It does not get through to the setValue(Object) call of SQLDecimal or BigIntegerDecimal.&lt;/p&gt;
</comment>
                            <comment id="12320170" author="deepa" created="Sat, 27 Aug 2005 03:59:11 +0100"  >&lt;p&gt;I have deleted my old patch and uploaded the new patch for this. I have moved setValue(boolean) to BinaryDecimal and removed setValue(Object). This patch can be applied to 10.1 branch too.&lt;/p&gt;

&lt;p&gt;Ran derbyall with Sun J2SE 1.4.2 and IBM&apos;s WCTME 5.7 J2ME/CDC/FP. 1 failure in J2ME, which is not related to this change.  The testcase unit/T_RawStoreFactory.unit fails intermittently on J2ME. I will open a  JIRA issue for this.&lt;/p&gt;</comment>
                            <comment id="12320638" author="deepa" created="Wed, 31 Aug 2005 09:02:52 +0100"  >&lt;p&gt;I noticed that my patch became invalid because of a commit in between for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-213&quot; title=&quot;ResultSet.next() after last row of FORWARD_ONLY cursor throws an SQL Exception with Network Server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-213&quot;&gt;&lt;del&gt;DERBY-213&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I am submitting a new patch (derby-518_3.diff) with the same set of changes except for the following: The test resultset.java is still excluded from J2ME. It fails because of additions to the test which use a procedure that uses DriverManager. It would be good if this patch can be reviewed/committed. The problem with the test in J2ME can be tracked separately using &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-453&quot; title=&quot;Create a test wrapper to run tests using BigDecimal in J2ME/CDC/Foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-453&quot;&gt;&lt;del&gt;DERBY-453&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12320663" author="deepa" created="Wed, 31 Aug 2005 15:24:41 +0100"  >&lt;p&gt;Since the comments for this patch are at different places, I am summarising the changes below:&lt;/p&gt;

&lt;p&gt;1. Added setValue(boolean) to BinaryDecimal. This fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-518&quot; title=&quot;Data type mismatch error for boolean to DECIMAL conversion in J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-518&quot;&gt;&lt;del&gt;DERBY-518&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
2. Created a wrapper class BigDecimalHandler to be used in tests.&lt;br/&gt;
3. Test jdbcapi/resultset.java modified to call the wrapper methods in BigDecimalHandler&lt;br/&gt;
4. resultset.out master files modified&lt;br/&gt;
5. Comment in resultsetapp_properties modified. resultset test still fails in J2ME because of additions to the test. This will be tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-453&quot; title=&quot;Create a test wrapper to run tests using BigDecimal in J2ME/CDC/Foundation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-453&quot;&gt;&lt;del&gt;DERBY-453&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Please review/commit this patch.&lt;/p&gt;</comment>
                            <comment id="12320665" author="kmarsden" created="Wed, 31 Aug 2005 15:28:31 +0100"  >&lt;p&gt;Committed revision 264945 to the trunk.&lt;/p&gt;</comment>
                            <comment id="12320666" author="kmarsden" created="Wed, 31 Aug 2005 15:32:37 +0100"  >&lt;p&gt;I changed a couple minor things when committing this patch with r264945&lt;/p&gt;

&lt;p&gt;1) I updated the canon for the derbynet  framework (JCC). Please check the diff.&lt;br/&gt;
2) I added the Apache license comment to BigDecimalHandler.&lt;/p&gt;

</comment>
                            <comment id="12320691" author="kmarsden" created="Thu, 1 Sep 2005 00:06:15 +0100"  >&lt;p&gt;second checkin for missed file.&lt;br/&gt;
Committed revision 265043.&lt;/p&gt;</comment>
                            <comment id="12320693" author="kmarsden" created="Thu, 1 Sep 2005 00:09:24 +0100"  >&lt;p&gt;Part of the resolution for this issue was checked in with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-518&quot; title=&quot;Data type mismatch error for boolean to DECIMAL conversion in J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-518&quot;&gt;&lt;del&gt;DERBY-518&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12320712" author="deepa" created="Thu, 1 Sep 2005 04:24:58 +0100"  >&lt;p&gt;Thanks for looking into the patch.  The update to the canon for derbynet is okay. &lt;/p&gt;

&lt;p&gt;I will upload another patch for 10.1 branch.&lt;/p&gt;


</comment>
                            <comment id="12329500" author="deepa" created="Fri, 16 Sep 2005 09:01:29 +0100"  >&lt;p&gt;I merged the changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-518&quot; title=&quot;Data type mismatch error for boolean to DECIMAL conversion in J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-518&quot;&gt;&lt;del&gt;DERBY-518&lt;/del&gt;&lt;/a&gt; to 10.1 branch. &lt;/p&gt;

&lt;p&gt;264945 : Initial check-in &lt;br/&gt;
265043: second check-in&lt;br/&gt;
279926: check-in to enable test resultset.java in J2ME&lt;/p&gt;

&lt;p&gt;derbyall ran successfully with SUN jdk 1.4.2. The command I used for merge is:&lt;/p&gt;

&lt;p&gt;svn merge -r 264944:264945 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk&lt;/a&gt;&lt;br/&gt;
svn merge -r 265042:265043 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk&lt;/a&gt;&lt;br/&gt;
svn merge -r 279925:279926 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please update 10.1 branch with this patch.&lt;/p&gt;</comment>
                            <comment id="12329590" author="kmarsden" created="Sat, 17 Sep 2005 08:29:16 +0100"  >&lt;p&gt;Submitted to the 10.1 branch.&lt;/p&gt;

&lt;p&gt;Date: Fri Sep 16 15:25:39 2005&lt;br/&gt;
New Revision: 289667&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewcvs?rev=289667&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs?rev=289667&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12329594" author="deepa" created="Sat, 17 Sep 2005 08:54:45 +0100"  >&lt;p&gt;Fixed by revisions 264945, 265043, 279926 in trunk and revision 289667 in 10.1 branch&lt;/p&gt;</comment>
                            <comment id="12330839" author="deepa" created="Fri, 30 Sep 2005 03:29:09 +0100"  >&lt;p&gt;reopening to fix fix version&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12312147">DERBY-453</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12312021" name="ASF.LICENSE.NOT.GRANTED--derby-518_2.diff" size="13726" author="deepa" created="Sat, 27 Aug 2005 03:59:11 +0100"/>
                            <attachment id="12312022" name="ASF.LICENSE.NOT.GRANTED--derby-518_2.status" size="551" author="deepa" created="Sat, 27 Aug 2005 03:59:11 +0100"/>
                            <attachment id="12312096" name="derby-518_3.diff" size="13709" author="deepa" created="Wed, 31 Aug 2005 09:02:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 25 Aug 2005 06:58:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy17pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>