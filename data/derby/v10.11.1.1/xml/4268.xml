<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:23:10 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4268/DERBY-4268.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4268] &quot;SECURITY&quot; is reserved as SQL keyword.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4268</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The word &quot;SECURITY&quot; is NOT described in SQL reserved words section of Derby Reference Manual.&lt;br/&gt;
I think that it should be able to use this word without quotes in SQL statement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427678">DERBY-4268</key>
            <summary>&quot;SECURITY&quot; is reserved as SQL keyword.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lilywei">Lily Wei</assignee>
                                    <reporter username="super-creek">Kan Ogawa</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Jun 2009 20:46:05 +0100</created>
                <updated>Fri, 21 Jan 2011 17:52:26 +0000</updated>
                            <resolved>Tue, 23 Jun 2009 01:21:56 +0100</resolved>
                                    <version>10.2.2.0</version>
                    <version>10.3.3.0</version>
                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                    <version>10.6.1.0</version>
                                    <fixVersion>10.2.2.1</fixVersion>
                    <fixVersion>10.3.3.1</fixVersion>
                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.2.0</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12718627" author="rhillegas" created="Thu, 11 Jun 2009 21:17:30 +0100"  >&lt;p&gt;For the record, SECURITY is a non-reserved keyword according to the 2008 version of the SQL Standard, part 2, section 5.2 (&amp;lt;token&amp;gt; and &amp;lt;separator&amp;gt;). &lt;/p&gt;</comment>
                            <comment id="12718630" author="kmarsden" created="Thu, 11 Jun 2009 21:34:02 +0100"  >&lt;p&gt;It appears that this changed in 10.2 with the addition of GRANT/REVOKE. Looking briefly at sqlgrammar.jj it would appear the intention was to make it non-reserved but perhaps it just wasn&apos;t added to nonReservedKeyword().  &lt;/p&gt;</comment>
                            <comment id="12718631" author="kmarsden" created="Thu, 11 Jun 2009 21:35:12 +0100"  >&lt;p&gt;This problem was introduced with the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-464&quot; title=&quot;Enhance Derby by adding grant/revoke support. Grant/Revoke provide finner level of privileges than currently provided by Derby that is especially useful in network configurations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-464&quot;&gt;&lt;del&gt;DERBY-464&lt;/del&gt;&lt;/a&gt;.  Linking the issue.&lt;/p&gt;</comment>
                            <comment id="12719798" author="lilywei" created="Mon, 15 Jun 2009 22:47:20 +0100"  >&lt;p&gt;Attach is a prelimiary patch for this issue.&lt;/p&gt;

&lt;p&gt;Security needed to be added to the non-reserved keywords. Also, add regression test to nonservered.sql. I am running tests now.&lt;/p&gt;</comment>
                            <comment id="12719819" author="lilywei" created="Mon, 15 Jun 2009 23:20:27 +0100"  >&lt;p&gt;I update the patch to correct tab/space issue (derby-4268-diff.txt).&lt;/p&gt;</comment>
                            <comment id="12720168" author="lilywei" created="Tue, 16 Jun 2009 15:52:34 +0100"  >&lt;p&gt;Run Suites.all tests (I have inconsisent failed result on replicationTests.ReplicationRun_Local, testReplication_Local_StateTest_part1), the rest are passing.&lt;br/&gt;
Run derbyall, all tests passed.&lt;/p&gt;</comment>
                            <comment id="12720186" author="kmarsden" created="Tue, 16 Jun 2009 16:21:52 +0100"  >&lt;p&gt;Hi Lily, &lt;/p&gt;

&lt;p&gt;Thanks for the patch!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3719&quot; title=&quot;&amp;#39;...replication.buffer.LogBufferFullException&amp;#39; causes failover to fail w/ &amp;#39;XRE07, SQLERRMC: Could not perform operation because the database is not in replication master mode.&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3719&quot;&gt;&lt;del&gt;DERBY-3719&lt;/del&gt;&lt;/a&gt; is marked fixed, but I don&apos;t see how your change could have impacted that test.  I will go ahead and look at committing this patch.  The change looks good to me.&lt;/p&gt;

&lt;p&gt;Please post the trace from the failure you saw in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3719&quot; title=&quot;&amp;#39;...replication.buffer.LogBufferFullException&amp;#39; causes failover to fail w/ &amp;#39;XRE07, SQLERRMC: Could not perform operation because the database is not in replication master mode.&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3719&quot;&gt;&lt;del&gt;DERBY-3719&lt;/del&gt;&lt;/a&gt; if it looks like the same thing to see if perhaps that issue needs to be reopened.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12720210" author="lilywei" created="Tue, 16 Jun 2009 17:13:15 +0100"  >&lt;p&gt;ReplictionRun_Local_StateTest_part1 looks like a similar issue as Derby-3719. This is the Exception trace:&lt;br/&gt;
2) testReplication_Local_StateTest_part1(org.apache.derbyTesting.functionTests.t&lt;br/&gt;
ests.replicationTests.ReplicationRun_Local_StateTest_part1)junit.framework.Compa&lt;br/&gt;
risonFailure: Unexpected SQL state. expected:&amp;lt;...20&amp;gt; but was:&amp;lt;...07&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDB&lt;br/&gt;
CTestCase.java:762)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(BaseJDB&lt;br/&gt;
CTestCase.java:811)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat&lt;br/&gt;
ionRun.failOver_direct(ReplicationRun.java:1381)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat&lt;br/&gt;
ionRun.failOver(ReplicationRun.java:1302)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat&lt;br/&gt;
ionRun_Local_StateTest_part1.testReplication_Local_StateTest_part1(ReplicationRu&lt;br/&gt;
n_Local_StateTest_part1.java:160)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
106)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
Caused by: java.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XRE07,&lt;br/&gt;
 SQLERRMC: Could not perform operation because the database is not in replicatio&lt;br/&gt;
n master mode.&lt;br/&gt;
        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLE&lt;br/&gt;
xceptionFactory40.java:96)&lt;br/&gt;
        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.&lt;br/&gt;
java:358)&lt;br/&gt;
        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:149)&lt;br/&gt;
        at java.sql.DriverManager.getConnection(Unknown Source)&lt;br/&gt;
        at java.sql.DriverManager.getConnection(Unknown Source)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat&lt;br/&gt;
ionRun.failOver_direct(ReplicationRun.java:1368)&lt;br/&gt;
        ... 28 more&lt;br/&gt;
Caused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1&lt;br/&gt;
, SQLSTATE: XRE07, SQLERRMC: Could not perform operation because the database is&lt;br/&gt;
 not in replication master mode.&lt;br/&gt;
        at org.apache.derby.client.am.Connection.completeSqlca(Connection.java:2&lt;br/&gt;
075)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnectionReply.parseRdbAccessFailed(N&lt;br/&gt;
etConnectionReply.java:540)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnectionReply.parseAccessRdbError(Ne&lt;br/&gt;
tConnectionReply.java:433)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnectionReply.parseACCRDBreply(NetCo&lt;br/&gt;
nnectionReply.java:297)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnectionReply.readAccessDatabase(Net&lt;br/&gt;
ConnectionReply.java:121)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessR&lt;br/&gt;
db(NetConnection.java:835)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessR&lt;br/&gt;
db(NetConnection.java:759)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection.flowUSRIDONLconnect(NetConn&lt;br/&gt;
ection.java:592)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection.flowConnect(NetConnection.j&lt;br/&gt;
ava:399)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection.&amp;lt;init&amp;gt;(NetConnection.java:2&lt;br/&gt;
19)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection40.&amp;lt;init&amp;gt;(NetConnection40.ja&lt;br/&gt;
va:77)&lt;br/&gt;
        at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConne&lt;br/&gt;
ction(ClientJDBCObjectFactoryImpl40.java:269)&lt;br/&gt;
        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:140)&lt;/p&gt;

&lt;p&gt;I am not totally sure this is the same issue as 3719. However, it feel some issue are coming from similar issue.&lt;/p&gt;</comment>
                            <comment id="12720214" author="kmarsden" created="Tue, 16 Jun 2009 17:16:52 +0100"  >&lt;p&gt;Hi Lily, I committed your patch  for this issue:&lt;br/&gt;
Date: Tue Jun 16 16:01:58 2009&lt;br/&gt;
New Revision: 785271&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=785271&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=785271&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4268&quot; title=&quot;&amp;quot;SECURITY&amp;quot; is reserved as SQL keyword.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4268&quot;&gt;&lt;del&gt;DERBY-4268&lt;/del&gt;&lt;/a&gt; &quot;SECURITY&quot; is reserved as SQL keyword.&lt;br/&gt;
Made security unreserved and added a regression test.&lt;/p&gt;

&lt;p&gt;Contributed by Lily Wei (lilywei at yahoo dot com)&lt;/p&gt;

&lt;p&gt;The replication tests passed for me with your patch, so I do think that failure was unrelated.&lt;/p&gt;

&lt;p&gt;Please keep an eye on the regression tests for any issues.&lt;/p&gt;

&lt;p&gt;Would you be willing to test this on 10.5?  It would be great to get it in for the upcoming 10.5.2 release.  Instructions for backporting are at &lt;a href=&quot;http://wiki.apache.org/db-derby/MoveAChangeBetweenBranches&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/MoveAChangeBetweenBranches&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am also interested in porting it all the way back to 10.2 where the regression was introduced. I can take care of this unless you are particularly interested in setting up all those workspaces and dealing with getting your environment setup to handle all the old releases. &lt;/p&gt;

&lt;p&gt;Thanks again for the contribution.&lt;/p&gt;</comment>
                            <comment id="12720252" author="lilywei" created="Tue, 16 Jun 2009 18:30:47 +0100"  >&lt;p&gt;derby.log for ReplicationRun_Local and ReplicationRun_Local_StateTest_part1. &lt;/p&gt;</comment>
                            <comment id="12720506" author="lilywei" created="Wed, 17 Jun 2009 06:52:30 +0100"  >&lt;p&gt;The back port to 10.5 is ready. I run derbyall and suites.all tests. No failure.&lt;/p&gt;</comment>
                            <comment id="12720748" author="kmarsden" created="Wed, 17 Jun 2009 17:33:25 +0100"  >&lt;p&gt;I committed revision 785707 to 10.5. In the future if your merge is just an automatic merge with no changes needed, you can just post the merge command and your test results instead of attaching a patch.&lt;/p&gt;

&lt;p&gt;I will continue to leave this issue open and backport to 10.4, 10.3, and 10.2 when I get a chance.&lt;/p&gt;

&lt;p&gt;Thanks again Lily for the fix!&lt;/p&gt;</comment>
                            <comment id="12722768" author="kmarsden" created="Mon, 22 Jun 2009 20:14:43 +0100"  >&lt;p&gt;checked into 10.4 and 10.3. It will still go to 10.2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12312336">DERBY-464</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12410904" name="derby-4268-10dot5_diff.txt" size="2857" author="lilywei" created="Wed, 17 Jun 2009 06:52:30 +0100"/>
                            <attachment id="12410721" name="derby-4268-diff.txt" size="2695" author="lilywei" created="Mon, 15 Jun 2009 23:20:27 +0100"/>
                            <attachment id="12410716" name="derby-4268-diff.txt" size="2701" author="lilywei" created="Mon, 15 Jun 2009 22:47:20 +0100"/>
                            <attachment id="12410831" name="derby-log.zipx" size="44579" author="lilywei" created="Tue, 16 Jun 2009 18:30:47 +0100"/>
                            <attachment id="12410823" name="error-stacktrace-ReplicationRun_Local.out" size="4453" author="lilywei" created="Tue, 16 Jun 2009 17:13:15 +0100"/>
                            <attachment id="12410822" name="error-stacktrace-ReplicationRun_Local_StateTest_part1.out" size="4477" author="lilywei" created="Tue, 16 Jun 2009 17:13:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Jun 2009 20:17:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0l2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>