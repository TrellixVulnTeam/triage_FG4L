<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:49:52 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2065/DERBY-2065.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2065] Network and embedded difference in SQLSTATE and message when Connection.close() with open transaction.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2065</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Network and embedded difference in SQLSTATE and message when Connection.close() with open transaction.&lt;br/&gt;
----------- NetworkClient --------------&lt;br/&gt;
Message: Cannot close a connection while a transaction is still active.&lt;br/&gt;
SQLState: 25001&lt;br/&gt;
----------- Embedded --------------&lt;br/&gt;
Message: Invalid transaction state.&lt;br/&gt;
SQLState: 25000&lt;/p&gt;</description>
                <environment></environment>
        <key id="12355142">DERBY-2065</key>
            <summary>Network and embedded difference in SQLSTATE and message when Connection.close() with open transaction.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jorgenlo">J&#248;rgen L&#248;land</assignee>
                                    <reporter username="bernt">Bernt M. Johnsen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Nov 2006 09:31:09 +0000</created>
                <updated>Tue, 30 Jun 2009 17:12:55 +0100</updated>
                            <resolved>Tue, 30 Oct 2007 11:54:23 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Network Client</component>
                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12533116" author="dagw" created="Mon, 8 Oct 2007 13:33:29 +0100"  >&lt;p&gt;See repro attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3114&quot; title=&quot;Harmonize sql state thrown when closing a connection with pending transaction between net end embedded drivers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3114&quot;&gt;&lt;del&gt;DERBY-3114&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Also reproducing my comments attached to that JIRA (a duplicate of this):&lt;/p&gt;

&lt;p&gt;The standard says about disconnect statement, section 17.3, general&lt;br/&gt;
rule 6: If any SQL-connection in L is active, then an exception&lt;br/&gt;
condition is raised: invalid transaction state - active SQL-transaction.&lt;/p&gt;

&lt;p&gt;According to section 23.1 SQLSTATE (p.1075):&lt;/p&gt;

&lt;p&gt;Subcondition: Active SQL transaction&lt;br/&gt;
subclass: 001&lt;/p&gt;

&lt;p&gt;so, in this case, so it would appear that the use of 25001 is correct,&lt;br/&gt;
not 25000. I suggest we change embedded to use 25001 also, and release&lt;br/&gt;
note it, since it has application impact. &lt;/p&gt;</comment>
                            <comment id="12534273" author="jorgenlo" created="Fri, 12 Oct 2007 12:52:06 +0100"  >&lt;p&gt;The attached patch, v1, changes the SQLState to 25001 for both connection types. As argued by Dag, this is in accordance with the SQL spec.&lt;/p&gt;

&lt;p&gt;Suites.all and derbyall run cleanly. &lt;/p&gt;</comment>
                            <comment id="12536219" author="dagw" created="Fri, 19 Oct 2007 14:43:41 +0100"  >&lt;p&gt;Thanks, J&#248;rgen! Patch looks good to me. Will commit it when I have run tests.&lt;/p&gt;

&lt;p&gt;Would you be willing to produce a release note attachment as well (using the&lt;br/&gt;
template in tools/release/templates/releaseNote.html) ?&lt;/p&gt;</comment>
                            <comment id="12536591" author="jorgenlo" created="Mon, 22 Oct 2007 08:54:36 +0100"  >&lt;p&gt;Release note attached.&lt;/p&gt;</comment>
                            <comment id="12536601" author="dagw" created="Mon, 22 Oct 2007 09:56:52 +0100"  >&lt;p&gt;Committed patch derby-2065_1 at svn 587040. I added this note to the commit message:&lt;/p&gt;

&lt;p&gt;As a result of this patch SQLState.LANG_INVALID_TRANSACTION_STATE and&lt;br/&gt;
the testing framework&apos;s equivalent&lt;br/&gt;
SQLStateConstants.INVALID_TRANSACTION_STATE_NO_SUBCLASS are now&lt;br/&gt;
unused, but I leave them declared since the constant 25000 is defined&lt;br/&gt;
in the standard and may find some future use.&lt;/p&gt;</comment>
                            <comment id="12536605" author="dagw" created="Mon, 22 Oct 2007 10:16:12 +0100"  >&lt;p&gt;Thanks for the release note, J&#248;rgen!&lt;br/&gt;
Looks good, some comments!&lt;/p&gt;

&lt;p&gt;&amp;gt;Summary of Change&lt;br/&gt;
&amp;gt;Error code changed for embedded connection when a connection with an open transaction is closed.&lt;/p&gt;

&lt;p&gt;The connection is not actually closed, so I would say &quot;attempted&lt;br/&gt;
closed&quot;.&lt;/p&gt;

&lt;p&gt;&amp;gt;Incompatibilities with Previous Release&lt;/p&gt;

&lt;p&gt;I&apos;d try to be a little more precise in this section, for example:&lt;/p&gt;

&lt;p&gt;Embedded applications that are dependent on the error code&lt;br/&gt;
&amp;lt;it&amp;gt;ever&amp;lt;/it&amp;gt; being &quot;25000&quot; could start failing.&lt;/p&gt;

&lt;p&gt;Embedded applications that are dependent on the error code&lt;br/&gt;
&amp;lt;it&amp;gt;never&amp;lt;/it&amp;gt; being &quot;25001&quot; could start failing.&lt;/p&gt;



&lt;p&gt;&amp;gt; Rationale for Change&lt;br/&gt;
&amp;gt; Harmonize error codes raised by the client and embedded drivers. &lt;/p&gt;

&lt;p&gt;(suggest add) .. thereby also making the embedded driver compatible&lt;br/&gt;
with the SQL standard.&lt;/p&gt;
</comment>
                            <comment id="12536608" author="knutanders" created="Mon, 22 Oct 2007 10:21:35 +0100"  >&lt;p&gt;&amp;gt; SQLStateConstants.INVALID_TRANSACTION_STATE_NO_SUBCLASS are now&lt;br/&gt;
&amp;gt; unused, but I leave them declared since the constant 25000 is defined&lt;br/&gt;
&amp;gt; in the standard and may find some future use. &lt;/p&gt;

&lt;p&gt;Wouldn&apos;t it be better to remove the unused constants and their&lt;br/&gt;
messages? Keeping them in case one may find future use for them might&lt;br/&gt;
make sense when you look at a single case in isolation, but I think&lt;br/&gt;
keeping unused code in general makes the code harder to maintain. For&lt;br/&gt;
instance, it gets harder to translate Derby&apos;s messages to a new locale&lt;br/&gt;
since the translators waste time translating unused messages.&lt;/p&gt;</comment>
                            <comment id="12536638" author="jorgenlo" created="Mon, 22 Oct 2007 13:02:28 +0100"  >&lt;p&gt;Good suggestions, Dag. Incorporated in the latest releaseNote.html&lt;/p&gt;</comment>
                            <comment id="12536650" author="dagw" created="Mon, 22 Oct 2007 13:46:25 +0100"  >&lt;p&gt;Knut, I admit I was of two minds about leaving the message, for the&lt;br/&gt;
reason you quote.  I eventually decided to leave it, in part to save&lt;br/&gt;
translation&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; again later, But I am happy to remove it!&lt;/p&gt;

&lt;p&gt;If nobody voices an opinion to keep it, I will remove it. Cleaning&lt;br/&gt;
away unused code is (almost?) always good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12536652" author="dagw" created="Mon, 22 Oct 2007 13:49:03 +0100"  >&lt;p&gt;Thanks for the revision, J&#248;rgen! I think the release notes look good now.&lt;br/&gt;
I will resolve the issue after a few days, to allow for any feedback on Knut&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="12538575" author="dagw" created="Mon, 29 Oct 2007 20:20:18 +0000"  >&lt;p&gt;Uploading a patch which removes the now unused error message,&lt;br/&gt;
running tests now.&lt;/p&gt;</comment>
                            <comment id="12538747" author="dagw" created="Tue, 30 Oct 2007 11:54:23 +0000"  >&lt;p&gt;Committed patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2065&quot; title=&quot;Network and embedded difference in SQLSTATE and message when Connection.close() with open transaction.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2065&quot;&gt;&lt;del&gt;DERBY-2065&lt;/del&gt;&lt;/a&gt;-2, which removes the unused error message at svn 590046.&lt;br/&gt;
Resolving.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12330866">DERBY-1166</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12379857">DERBY-3114</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="32841">DERBY-310</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12368619" name="DERBY-2065-2.diff" size="10516" author="dagw" created="Mon, 29 Oct 2007 20:20:18 +0000"/>
                            <attachment id="12368620" name="DERBY-2065-2.stat" size="1050" author="dagw" created="Mon, 29 Oct 2007 20:20:18 +0000"/>
                            <attachment id="12367633" name="derby-2065_1.diff" size="1586" author="jorgenlo" created="Fri, 12 Oct 2007 12:52:06 +0100"/>
                            <attachment id="12367632" name="derby-2065_1.stat" size="156" author="jorgenlo" created="Fri, 12 Oct 2007 12:52:04 +0100"/>
                            <attachment id="12368135" name="releaseNote.html" size="4215" author="jorgenlo" created="Mon, 22 Oct 2007 13:02:27 +0100"/>
                            <attachment id="12368120" name="releaseNote.html" size="3974" author="jorgenlo" created="Mon, 22 Oct 2007 08:53:30 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Oct 2007 12:33:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ucv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>