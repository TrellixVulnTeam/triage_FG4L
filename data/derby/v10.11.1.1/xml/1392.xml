<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:18:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1392/DERBY-1392.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1392] Corner case behaviour in RAFContainer#writePage() can cause invalid data to be written to data files</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1392</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java#writePage(...) will&lt;br/&gt;
attempt to retry a write if an IOException is thrown on the first attempt. However, the next &lt;br/&gt;
attempt does not add container header data to the first page, nor does it encrypt the data &lt;br/&gt;
if the database is encrypted.&lt;/p&gt;

&lt;p&gt;I&apos;d expect this bug to be case silent corruption of encrypted databases if the code path &lt;br/&gt;
was actually exercised. The fact that this bug still lives and nobody has discovered it is&lt;br/&gt;
possibly an indication of how uncommon this code path is. Since the comment in the code&lt;br/&gt;
says nothing about exactly what platforms the workaround was intended for, I don&apos;t know if&lt;br/&gt;
these platforms are still supported for Derby. There&apos;s also a workaround for an EPOC Java&lt;br/&gt;
bug earlier in the code - EPOC only had a Java 1.1 VM, which is no longer supported.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a patch for the issue, but I wonder if we might as well remove the &quot;retry code path&quot;&lt;br/&gt;
if it is never used?&lt;/p&gt;

&lt;p&gt;(If you&apos;re paranoid, this could also be considered a security issue. If someone could&lt;br/&gt;
cause IO errors for Derby at will, they could make Derby write the database without &lt;br/&gt;
encryption - but there are far easier ways to attack Derby if you&apos;ve got that kind of &lt;br/&gt;
access, so I&apos;m discounting that. =)&lt;/p&gt;</description>
                <environment>Platforms that throw an IOException when writing beyond the EOF, but permit the write to proceed if the file is padded, then written.</environment>
        <key id="12344208">DERBY-1392</key>
            <summary>Corner case behaviour in RAFContainer#writePage() can cause invalid data to be written to data files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andersmo">Anders Morken</assignee>
                                    <reporter username="andersmo">Anders Morken</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jun 2006 02:43:58 +0100</created>
                <updated>Wed, 12 Jul 2006 02:30:20 +0100</updated>
                            <resolved>Fri, 16 Jun 2006 23:58:40 +0100</resolved>
                                    <version>10.1.2.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12415609" author="andersmo" created="Sat, 10 Jun 2006 04:38:47 +0100"  >&lt;p&gt;M      java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1392&quot; title=&quot;Corner case behaviour in RAFContainer#writePage() can cause invalid data to be written to data files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1392&quot;&gt;&lt;del&gt;DERBY-1392&lt;/del&gt;&lt;/a&gt;-1.patch moves the updatePageArray call outside the try/catch block around the writes, so both writes can write the same data. storeall passes.&lt;/p&gt;</comment>
                            <comment id="12416244" author="mikem" created="Thu, 15 Jun 2006 03:21:47 +0100"  >&lt;p&gt;i am looking at reviewing this change, if anyone else is reviewing let me know and I will wait  before commit.&lt;/p&gt;</comment>
                            <comment id="12416369" author="mikem" created="Fri, 16 Jun 2006 02:19:17 +0100"  >&lt;p&gt;I reviewed this patch, ran full derbyall, and committed it to the trunk with following svn:&lt;br/&gt;
m1_142:129&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\RAFContainer.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 414647.&lt;/p&gt;</comment>
                            <comment id="12416541" author="mikem" created="Fri, 16 Jun 2006 23:58:40 +0100"  >&lt;p&gt;I merged/resolved conflicts from this change in the trunk to the 10.1 branch and committed&lt;br/&gt;
as follows:&lt;br/&gt;
m101_142:56&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\RAFContainer.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 414853.&lt;/p&gt;</comment>
                            <comment id="12420395" author="andersmo" created="Wed, 12 Jul 2006 02:30:20 +0100"  >&lt;p&gt;Time to close this one. Thanks for the help, Mike. =)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12335280" name="DERBY-1392-1.patch" size="2310" author="andersmo" created="Sat, 10 Jun 2006 04:38:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Jun 2006 02:21:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22474</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>