<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1507/DERBY-1507.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1507] lang/xmlBinding.java fails with Security Expression</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1507</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I recently tried to run the lang/xmlBinding.java test and I noticed that the test fails with a Security Exception:&lt;/p&gt;

&lt;p&gt;&amp;gt; FAIL: Unexpected exception:&lt;br/&gt;
&amp;gt; ERROR 2200L: XMLPARSE operand is not an XML document; see next exception for details.&lt;br/&gt;
&amp;gt; java.security.AccessControlException: access denied (java.io.FilePermission &lt;/p&gt;
{user.dir}/personal.dtd read)&lt;br/&gt;
&amp;gt;       at java.security.AccessControlContext.checkPermission(AccessControlContext.java(Compiled Code))&lt;br/&gt;
&amp;gt;       at java.security.AccessController.checkPermission(AccessController.java(Compiled Code))&lt;br/&gt;
&amp;gt;       at java.lang.SecurityManager.checkPermission(SecurityManager.java(Compiled Code))&lt;br/&gt;
&amp;gt;       at java.lang.SecurityManager.checkRead(SecurityManager.java(Compiled Code))&lt;br/&gt;
&lt;br/&gt;
This failure does not show up in the nightlies because the XML tests are not currently run as part of derbyall (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-563&quot; title=&quot;Create an XML test suite in the Derby harness to allow testing of the basic XML datatype and related operators.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-563&quot;&gt;&lt;del&gt;DERBY-563&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-567&quot; title=&quot;Improve Derby XML support to use XML parser found in JVM instead of using a hard-coded parser name (Xerces).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-567&quot;&gt;&lt;del&gt;DERBY-567&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
&lt;br/&gt;
I looked a this a bit and eventually realized that the test itself has all the permission it needs, but Xerces, which Derby uses to parse XML documents, does not.  More specifically, and XML document can include a pointer to a schema document, which Xerces will then try to read.  In order for that to work the Xerces classes would have to have read permission on user.dir, but we can&apos;t add that permission to the derby_tests.policy file because the Xerces classes could be in a Xerces jar anywhere on the system, or they could be included the JVM&apos;s own jar (ex. IBM 1.4).  And further, when &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-567&quot; title=&quot;Improve Derby XML support to use XML parser found in JVM instead of using a hard-coded parser name (Xerces).&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-567&quot;&gt;&lt;del&gt;DERBY-567&lt;/del&gt;&lt;/a&gt; is fixed the parser that is used could vary from JVM to JVM, so it might not be Xerces but some other parser that needs read permission. &lt;br/&gt;
&lt;br/&gt;
One workaround would be to grant read FilePermission on {user.dir}
&lt;p&gt; to &quot;all&quot; (when I did that the test ran cleanly), but it seems to me like that would defeat the purpose of much of the security manager testing.  So until a better&lt;br/&gt;
option arises, I think the only (or at least, the easiest) option is to just run this specific test with no security manager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12345887">DERBY-1507</key>
            <summary>lang/xmlBinding.java fails with Security Expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="army">A B</assignee>
                                    <reporter username="army">A B</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Jul 2006 04:45:17 +0100</created>
                <updated>Thu, 13 Jul 2006 07:48:59 +0100</updated>
                            <resolved>Thu, 13 Jul 2006 07:48:50 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12420728" author="army" created="Thu, 13 Jul 2006 04:47:04 +0100"  >&lt;p&gt;Attaching a simple patch to disable security manager for lang/xmlBinding.java.  If anyone has any better alternatives, please let me know.  Otherwise, this is a one-line change so if someone could commit, that&apos;d be great.&lt;/p&gt;</comment>
                            <comment id="12420737" author="fuzzylogic" created="Thu, 13 Jul 2006 05:49:15 +0100"  >&lt;p&gt;Instead of disabling the security manager, why not grant permission to read user.dir to all in a test-specific policy file for this test?&lt;/p&gt;

&lt;p&gt;i.e. add an xmlBinding.policy that contains:&lt;/p&gt;

&lt;p&gt;grant {&lt;br/&gt;
  permission java.io.FilePermission &quot;$&lt;/p&gt;
{user.dir}
&lt;p&gt;/personal.dtd&quot; &quot;read&quot;;&lt;br/&gt;
};&lt;/p&gt;</comment>
                            <comment id="12420739" author="army" created="Thu, 13 Jul 2006 05:53:41 +0100"  >&lt;p&gt;Thanks for the suggestion Andrew; I overlooked the test-specific policy file option.  I&apos;ll try that and post another patch.&lt;/p&gt;</comment>
                            <comment id="12420742" author="army" created="Thu, 13 Jul 2006 06:18:31 +0100"  >&lt;p&gt;Attaching a second version of the patch (d1507_v2.patch) that creates a test-specific policy file instead of turning security manager off.  Thanks to Andrew and Myrna for the suggestion!&lt;/p&gt;</comment>
                            <comment id="12420744" author="fuzzylogic" created="Thu, 13 Jul 2006 06:38:22 +0100"  >&lt;p&gt;Committed d1507_v2.patch with revision 421448. Please resolve and close this issue if there is no further work to be done.&lt;/p&gt;</comment>
                            <comment id="12420753" author="army" created="Thu, 13 Jul 2006 07:48:49 +0100"  >&lt;p&gt;Verified fix by running lang/xmlBinding.java after the commit.  Thanks Andrew.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12336766" name="d1507_v1.patch" size="1433" author="army" created="Thu, 13 Jul 2006 04:47:04 +0100"/>
                            <attachment id="12336777" name="d1507_v2.patch" size="1758" author="army" created="Thu, 13 Jul 2006 06:18:31 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Jul 2006 04:49:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22545</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15a7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>