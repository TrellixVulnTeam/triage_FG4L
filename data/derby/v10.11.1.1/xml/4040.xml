<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4040/DERBY-4040.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4040] SQLChar.getLength returns wrong length for some data values</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4040</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;SQLChar.getLength() returns the wrong length of the data value in some cases.&lt;br/&gt;
For the bug to be triggered, the value must contain characters that are represented by two or three bytes, and Derby must store the value as a stream.&lt;/p&gt;

&lt;p&gt;In my ad-hoc testing, I found that a value of length 10886 with CJK characters doesn&apos;t trigger the bug, but 10887 does trigger the bug. Further, for a range of lengths the bug can also been observed for CLOB columns (when doing &apos;select length(clobcolumn)&apos;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413606">DERBY-4040</key>
            <summary>SQLChar.getLength returns wrong length for some data values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jan 2009 12:04:08 +0000</created>
                <updated>Wed, 1 Jul 2009 17:25:56 +0100</updated>
                            <resolved>Thu, 19 Feb 2009 10:47:02 +0000</resolved>
                                    <version>10.3.3.1</version>
                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                                    <fixVersion>10.3.3.1</fixVersion>
                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12668837" author="kristwaa" created="Fri, 30 Jan 2009 12:10:49 +0000"  >&lt;p&gt;Bug was introduced by a checkin for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3741&quot; title=&quot;SQL LENGTH function materializes CLOB into memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3741&quot;&gt;&lt;del&gt;DERBY-3741&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12669935" author="kristwaa" created="Tue, 3 Feb 2009 12:09:07 +0000"  >&lt;p&gt; &apos;derby-4040-1a-SQLChar_length_and_test.diff&apos; fixes the bug by always decoding the stream is the data value is stored as a stream, and it also adds a few more tests (adjusted existing test).&lt;br/&gt;
The bug was that the byte length was used as a character length. Since these two lengths are the same for ASCII data values, it wasn&apos;t detected earlier. The limited range of the length information in the header helped conceal the bug too.&lt;/p&gt;

&lt;p&gt;Ran regression tests without failures. I&apos;ll look at backporting the fix when it has made it into trunk.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12671781" author="kristwaa" created="Mon, 9 Feb 2009 09:42:07 +0000"  >&lt;p&gt;Committed patch 1a to trunk with revision 742357.&lt;/p&gt;</comment>
                            <comment id="12674697" author="kristwaa" created="Wed, 18 Feb 2009 17:02:04 +0000"  >&lt;p&gt;Attached the diff for the backport, &apos;derby-4040-2a-backport.diff&apos;.&lt;br/&gt;
I had to do a manual merge, as the method InputStreamUtil.skipFully doesn&apos;t exist on the 10.4 and 10.3 branches. Instead of using that method, I simply chose to use InputStream.skip.&lt;br/&gt;
Regression tests ran successfully.&lt;/p&gt;

&lt;p&gt;Committed to the 10.4 branch with revision 745571.&lt;/p&gt;</comment>
                            <comment id="12674961" author="kristwaa" created="Thu, 19 Feb 2009 10:47:02 +0000"  >&lt;p&gt;Backported the fix from 10.4 to the 10.3 branch with revision 745811.&lt;/p&gt;

&lt;p&gt;The tinderbox test for 10.4 ran cleanly.&lt;br/&gt;
I&apos;m resolving the issue, and will await the tinderbox results from 10.3 before I close.&lt;/p&gt;</comment>
                            <comment id="12675280" author="kristwaa" created="Fri, 20 Feb 2009 08:32:58 +0000"  >&lt;p&gt;10.3 tinderbox ran without any new failures (lang/subquery did fail).&lt;/p&gt;

&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12399203">DERBY-3741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12399352" name="derby-4040-1a-SQLChar_length_and_test.diff" size="8942" author="kristwaa" created="Tue, 3 Feb 2009 12:09:07 +0000"/>
                            <attachment id="12399353" name="derby-4040-1a-SQLChar_length_and_test.stat" size="158" author="kristwaa" created="Tue, 3 Feb 2009 12:09:07 +0000"/>
                            <attachment id="12400429" name="derby-4040-2a-backport.diff" size="8575" author="kristwaa" created="Wed, 18 Feb 2009 17:02:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    <customfieldvalue key="10366"><![CDATA[Wrong query result]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0sf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>