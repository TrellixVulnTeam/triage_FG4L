<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:34:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3595/DERBY-3595.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3595] TableFunctionTest.SpecialCollation and NoSpecialCollation fail with IBM iseries in checkGetXXXCalls</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3595</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Two TableFunctionTest fixtures failed with the 10.4.1.0 beta:&lt;/p&gt;

&lt;p&gt;12) noSpecialCollation(org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest)junit.framework.ComparisonFailure: expected:&amp;lt;...Long getBlob getString getBytes getString getDate getBigDecimal getDouble getDouble getFloat getDouble getInt getString getBytes getBigDecimal getFloat getShort getTime getTimestamp getString getBytes...&amp;gt; but was:&amp;lt;...String getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString...&amp;gt;&lt;br/&gt;
	at java.lang.Throwable.&amp;lt;init&amp;gt;(Throwable.java:196)&lt;br/&gt;
	at java.lang.Error.&amp;lt;init&amp;gt;(Error.java:49)&lt;br/&gt;
	at junit.framework.AssertionFailedError.&amp;lt;init&amp;gt;(AssertionFailedError.java:11)&lt;br/&gt;
	at junit.framework.ComparisonFailure.&amp;lt;init&amp;gt;(ComparisonFailure.java:19)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.checkGetXXXCalls(TableFunctionTest.java:1282)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.allLegalDatatypesVTIResults(TableFunctionTest.java:1211)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.tableFunctionTest(TableFunctionTest.java:921)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.noSpecialCollation(TableFunctionTest.java:897)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)&lt;br/&gt;
13) specialCollation(org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest)junit.framework.ComparisonFailure: expected:&amp;lt;...Long getBlob getString getBytes getString getDate getBigDecimal getDouble getDouble getFloat getDouble getInt getString getBytes getBigDecimal getFloat getShort getTime getTimestamp getString getBytes...&amp;gt; but was:&amp;lt;...String getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString getString...&amp;gt;&lt;br/&gt;
	at java.lang.Throwable.&amp;lt;init&amp;gt;(Throwable.java:196)&lt;br/&gt;
	at java.lang.Error.&amp;lt;init&amp;gt;(Error.java:49)&lt;br/&gt;
	at junit.framework.AssertionFailedError.&amp;lt;init&amp;gt;(AssertionFailedError.java:11)&lt;br/&gt;
	at junit.framework.ComparisonFailure.&amp;lt;init&amp;gt;(ComparisonFailure.java:19)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.checkGetXXXCalls(TableFunctionTest.java:1282)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.allLegalDatatypesVTIResults(TableFunctionTest.java:1211)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.tableFunctionTest(TableFunctionTest.java:921)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.specialCollation(TableFunctionTest.java:907)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;</description>
                <environment>IBM iseries, sun jdk 1.4.2. or ibm 1.6 jvm</environment>
        <key id="12393097">DERBY-3595</key>
            <summary>TableFunctionTest.SpecialCollation and NoSpecialCollation fail with IBM iseries in checkGetXXXCalls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Apr 2008 08:25:43 +0100</created>
                <updated>Mon, 29 Jun 2009 23:57:55 +0100</updated>
                            <resolved>Tue, 10 Jun 2008 20:00:18 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.2.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12585432" author="myrna" created="Fri, 4 Apr 2008 08:27:05 +0100"  >&lt;p&gt;I need to check if this test existed with 10.3.2.1 before I mark it as a regression, but 10.3.2.1. did not have this failure.&lt;/p&gt;</comment>
                            <comment id="12585547" author="rhillegas" created="Fri, 4 Apr 2008 15:27:40 +0100"  >&lt;p&gt;Thanks for logging this issue, Myrna. The test is failing a check which ensures that Derby is calling the expected getXXX() methods on the table function, as described by our user guides. The check involves examining the call stack and it appears that in your environment, the call stack is not what the test expects. Maybe your compiler or vm has inlined some method calls.&lt;/p&gt;

&lt;p&gt;I have attached two patches and would be grateful if you could test drive them by running TableFunctionTest standalone:&lt;/p&gt;

&lt;p&gt;1) derby-3595-disableStackChecking.diff - This turns off the checking of getXXX() calls. This will allow us to see if there are other problems in this environment which are masked by this early failure.&lt;/p&gt;

&lt;p&gt;2) derby-3595-printStack.diff - This prints out some diagnostic information to help us understand what the stack looks like in this environment.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Rick&lt;/p&gt;</comment>
                            <comment id="12585822" author="myrna" created="Sat, 5 Apr 2008 00:11:07 +0100"  >&lt;p&gt;With 10.5 (revision 644823) and the disableStackChecking patch both tests pass...&lt;br/&gt;
I&apos;ll attach the results with the other patch shortly...&lt;/p&gt;</comment>
                            <comment id="12585828" author="myrna" created="Sat, 5 Apr 2008 00:15:32 +0100"  >&lt;p&gt;Attaching the test&apos;s output and derby.log files with the &apos;printStack&apos; patch. &lt;/p&gt;</comment>
                            <comment id="12592827" author="rhillegas" created="Mon, 28 Apr 2008 16:07:27 +0100"  >&lt;p&gt;Attaching derby-3595-01-smarterStackChecking.diff. This makes the stack checking done by TableFunctionTest more flexible. Regression tests run cleanly for me. It would be great if someone could test-drive this patch on the platform which shows the problem. Thanks.&lt;/p&gt;

&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/StringArrayVTI.java&lt;/p&gt;</comment>
                            <comment id="12592877" author="myrna" created="Mon, 28 Apr 2008 20:16:40 +0100"  >&lt;p&gt;The latest patch works like a charm on the iseries machine (tested with ibm16 only; and only the TableFunctionTest test; both fixtures passed).&lt;br/&gt;
+1 from me to commit. Thx Rick.&lt;/p&gt;</comment>
                            <comment id="12592879" author="myrna" created="Mon, 28 Apr 2008 20:17:50 +0100"  >&lt;p&gt;please also backport to 10.4, if feasible.&lt;/p&gt;</comment>
                            <comment id="12592884" author="rhillegas" created="Mon, 28 Apr 2008 20:41:48 +0100"  >&lt;p&gt;Thanks for the quick sanity-check,  Myrna. I will commit this to the trunk and port it to 10.4 after subversion comes back online.&lt;/p&gt;</comment>
                            <comment id="12593108" author="rhillegas" created="Tue, 29 Apr 2008 21:44:41 +0100"  >&lt;p&gt;Committed derby-3595-01-smarterStackChecking.diff to trunk at subversion revision 652092 and ported to 10.4 branch at revision 652095.&lt;/p&gt;</comment>
                            <comment id="12619699" author="rhillegas" created="Mon, 4 Aug 2008 21:55:02 +0100"  >&lt;p&gt;Marking as Fix Version 10.4.2 because this has been ported to 10.4.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12325788">DERBY-716</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12381036" name="derby-3595-01-smarterStackChecking.diff" size="4651" author="rhillegas" created="Mon, 28 Apr 2008 16:07:27 +0100"/>
                            <attachment id="12379392" name="derby-3595-disableStackChecking.diff" size="566" author="rhillegas" created="Fri, 4 Apr 2008 15:27:40 +0100"/>
                            <attachment id="12379393" name="derby-3595-printStack.diff" size="2533" author="rhillegas" created="Fri, 4 Apr 2008 15:27:40 +0100"/>
                            <attachment id="12379362" name="env_report.txt" size="2401" author="myrna" created="Fri, 4 Apr 2008 08:27:30 +0100"/>
                            <attachment id="12379445" name="noSpecialCollation.derby.log" size="87758" author="myrna" created="Sat, 5 Apr 2008 00:15:32 +0100"/>
                            <attachment id="12379444" name="specialCollation.derby.log" size="195827" author="myrna" created="Sat, 5 Apr 2008 00:15:32 +0100"/>
                            <attachment id="12379443" name="tablefunctiontest.out_withprintstack" size="7620" author="myrna" created="Sat, 5 Apr 2008 00:15:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Apr 2008 14:27:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0vrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>