<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2458/DERBY-2458.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2458] Convert lang/unaryArithmeticDynamicParamter.java to junit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2458</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Place holder to convert lang/unaryArithmeticDynamicParameter.java to junit&lt;/p&gt;</description>
                <environment></environment>
        <key id="12365071">DERBY-2458</key>
            <summary>Convert lang/unaryArithmeticDynamicParamter.java to junit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mkutty">Manjula Kutty</assignee>
                                    <reporter username="mkutty">Manjula Kutty</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Mar 2007 00:46:13 +0000</created>
                <updated>Wed, 1 Jul 2009 00:40:20 +0100</updated>
                            <resolved>Wed, 21 Mar 2007 23:10:52 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12481399" author="mkutty" created="Fri, 16 Mar 2007 00:51:05 +0000"  >&lt;p&gt;Attaching the first patch for this conversion&lt;/p&gt;</comment>
                            <comment id="12481751" author="mkutty" created="Fri, 16 Mar 2007 20:20:41 +0000"  >&lt;p&gt;Forgot to add the changes in the _Suite.java file. Please find the same and if everything looks fine please commit&lt;/p&gt;
</comment>
                            <comment id="12481772" author="jta" created="Fri, 16 Mar 2007 22:07:56 +0000"  >&lt;p&gt;I took a look at your patch and have several comments.&lt;/p&gt;

&lt;p&gt;I like your addition of a assertColumnTypes method to JDBC.java. And I really like your use of assertions. Your usage of JDBC.assertFullResultSet, assertCompileError, and other methods is a good reminder to me to check where I should be using more of what others have already defined.&lt;/p&gt;

&lt;p&gt;Here are a couple things I think could be changed:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;setUp() needs a stmt.close()&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Two test methods create a SQL function, but don&apos;t drop it. I didn&apos;t encounter problems when I ran your suite (both client and embedded), but I wonder if that might create a problem in some context.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Take a pass through the code and verify that the javadoc comments match the code; I know how easy it is for them to get out of sync while developing.&lt;br/&gt;
For example, the javadoc comment for setUp() doesn&apos;t match what it does. You might consider simplifying the description to something like &quot;Create and populate test tables.&quot;.   That would reduce maintenance later if more tables get added, their names change,  or more rows get inserted.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12481779" author="mkutty" created="Fri, 16 Mar 2007 22:49:11 +0000"  >&lt;p&gt;Thanks for the comments, Jean. I&apos;m attaching the new patch which will take care of the closing issue and drop functions. Please review and if looks fine please commit&lt;/p&gt;</comment>
                            <comment id="12482129" author="djd" created="Mon, 19 Mar 2007 15:54:10 +0000"  >&lt;p&gt;Patch doesn&apos;t compile for me,&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; C:&amp;#95;work\svn_clean4\trunk\java\testing\org\apache\derbyTesting\funct&lt;br/&gt;
ionTests\tests\lang\UnaryArithmeticParameterTest.java:262: assertColumnTypes(jav&lt;br/&gt;
a.sql.ResultSet,int[]) in org.apache.derbyTesting.junit.JDBC cannot be applied t&lt;br/&gt;
o (java.sql.PreparedStatement,int[])&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                     JDBC.assertColumnTypes(ps,expectedTypes);&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                             ^&lt;/p&gt;

&lt;p&gt;Seems like some other changes are missing.&lt;/p&gt;

&lt;p&gt;The comments don&apos;t indicate why this test requires JDBC 3? I couldn&apos;t see anything obvious that would stop this running on JSR169.&lt;/p&gt;

&lt;p&gt;FYI  - a single patch file is much more convienent, than a separate one for the change to the suite file.&lt;/p&gt;

&lt;p&gt;For code like this:&lt;br/&gt;
+			Object[][] expectedRows = new Object[][]&lt;tt&gt;new String(&quot;-2&quot;),new String(&quot;2&quot;)},{new String(&quot;-2&quot;),new String(&quot;2&quot;)&lt;/tt&gt;;&lt;br/&gt;
+			JDBC.assertFullResultSet(ps.executeQuery(), expectedRows, true);&lt;/p&gt;

&lt;p&gt;it can be cleaned up a couple of ways:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new String(&quot;-2&quot;) is kind of pointless, &quot;-2&quot; is a String object, just it can be used directly.&lt;/li&gt;
	&lt;li&gt;a utility assertFullResultSet method exists that takes strings, so the code could be:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; +			String[][] expectedRows = new String[][]&lt;tt&gt;&quot;-2&quot;, &quot;2&quot;},{-2&quot;,&quot;2&quot;&lt;/tt&gt;;&lt;br/&gt;
+			JDBC.assertFullResultSet(ps.executeQuery(), expectedRows);&lt;/p&gt;


&lt;p&gt;It looks like the suite method runs the fixtures twice in embedded, once adding them directly and once through defaultSuite&lt;/p&gt;</comment>
                            <comment id="12482190" author="mkutty" created="Mon, 19 Mar 2007 19:34:35 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;Patch doesn&apos;t compile for me, &lt;br/&gt;
&amp;gt;&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; C:&amp;#95;work\svn_clean4\trunk\java\testing\org\apache\derbyTesting\funct &lt;br/&gt;
&amp;gt;&amp;gt;nTests\tests\lang\UnaryArithmeticParameterTest.java:262: assertColumnTypes(jav &lt;br/&gt;
&amp;gt;&amp;gt;a.sql.ResultSet,int[]) in org.apache.derbyTesting.junit.JDBC cannot be applied t &lt;br/&gt;
&amp;gt;&amp;gt;o (java.sql.PreparedStatement,int[]) &lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; JDBC.assertColumnTypes(ps,expectedTypes); &lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; ^ &lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;Seems like some other changes are missing. &lt;br/&gt;
Sorry  that in the last patch I forgot to include the changes I made in the junit/JDBC.java&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;The comments don&apos;t indicate why this test requires JDBC 3? I couldn&apos;t see anything obvious that would stop this running on JSR169. &lt;br/&gt;
Added comments to to reason why we need JDBC3. Also if I do specify only about JDBC3, I thought the test will run in JSR 169 (I may be wrong here...Please clear me if I&apos;m wrong).&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;FYI - a single patch file is much more convienent, than a separate one for the change to the suite file. &lt;br/&gt;
Sure I will be attaching the recent patch in a single set.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;For code like this: &lt;br/&gt;
&amp;gt;&amp;gt;+ Object[][] expectedRows = new Object[][]&lt;tt&gt;new String(&quot;-2&quot;),new String(&quot;2&quot;)},{new String(&quot;-2&quot;),new String(&quot;2&quot;)&lt;/tt&gt;; &lt;br/&gt;
&amp;gt;&amp;gt;+ JDBC.assertFullResultSet(ps.executeQuery(), expectedRows, true); &lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;it can be cleaned up a couple of ways: &lt;br/&gt;
&amp;gt;&amp;gt;   - new String(&quot;-2&quot;) is kind of pointless, &quot;-2&quot; is a String object, just it can be used directly. &lt;br/&gt;
&amp;gt;&amp;gt;   - a utility assertFullResultSet method exists that takes strings, so the code could be: &lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; + String[][] expectedRows = new String[][]&lt;tt&gt;&quot;-2&quot;, &quot;2&quot;},{-2&quot;,&quot;2&quot;&lt;/tt&gt;; &lt;br/&gt;
&amp;gt;&amp;gt;+ JDBC.assertFullResultSet(ps.executeQuery(), expectedRows); &lt;/p&gt;

&lt;p&gt;Will be fxing this in the next patch&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;It looks like the suite method runs the fixtures twice in embedded, once adding them directly and once through defaultSuite &lt;br/&gt;
I thought I give &lt;br/&gt;
return   TestConfiguration.defaultSuite(UnaryArithmeticParameterTest.class);&lt;br/&gt;
The test will run both embedded and n/w server mode. (Please correct me if I&apos;m wrong)&lt;/p&gt;</comment>
                            <comment id="12482237" author="mkutty" created="Mon, 19 Mar 2007 21:37:20 +0000"  >&lt;p&gt;Thanks for the review, Dan. &lt;/p&gt;

&lt;p&gt;Attaching new patch in which I tried to take care of Dan&apos;s comments&lt;/p&gt;</comment>
                            <comment id="12482275" author="djd" created="Tue, 20 Mar 2007 00:02:20 +0000"  >&lt;p&gt;Patch generally looks good but it&apos;s good to have clear &amp;amp; logical naming. The new utility method you&apos;ve added JDBC.assertColumnTypes is not checking column types, it&apos;s checking parameter types. That&apos;s the danger of copying other code, as I see it see has comments in its javadoc related to DatabaseMetaData which is not relevant here.&lt;/p&gt;

&lt;p&gt;And then I would be more explicit on the JDBC3 requirement, just stating the test requires ParameterMetaData I think would be clearer than &quot;it relies on jdk14 jdbc metadata calls&quot;&lt;/p&gt;
</comment>
                            <comment id="12482424" author="jta" created="Tue, 20 Mar 2007 16:11:01 +0000"  >&lt;p&gt;So I&apos;m a little confused by the &quot;Patch generally looks good but it&apos;s good to have clear &amp;amp; logical naming.&quot;&lt;/p&gt;

&lt;p&gt;Is this patch ready to commit? If so, I&apos;ll go ahead and do so,&lt;/p&gt;

&lt;p&gt;Or do you want the naming changed first? Would it be sufficient for me to change the JDBC.assertColumnTypes to JDBC.assertParameterTypes when it&apos;s committed?&lt;/p&gt;</comment>
                            <comment id="12482454" author="jta" created="Tue, 20 Mar 2007 17:26:48 +0000"  >&lt;p&gt;Actually, I can&apos;t apply the latest patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2458&quot; title=&quot;Convert lang/unaryArithmeticDynamicParamter.java to junit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2458&quot;&gt;&lt;del&gt;DERBY-2458&lt;/del&gt;&lt;/a&gt;_diff_03_19.txt), I get this error:&lt;/p&gt;

&lt;p&gt;patching file java/testing/org/apache/derbyTesting/functionTests/tests/lang/_Suite.java&lt;br/&gt;
patch: **** malformed patch at line 377: Index: java/testing/org/apache/derbyTesting/junit/JDBC.java&lt;/p&gt;

&lt;p&gt;I&apos;m not spotting what the problem is in the patch file.&lt;/p&gt;

&lt;p&gt;Manjula, I suggest that you sync up to the latest svn revision, take care of the remaining comments, and upload a final patch.&lt;/p&gt;</comment>
                            <comment id="12482492" author="mkutty" created="Tue, 20 Mar 2007 19:17:40 +0000"  >&lt;p&gt;Jean and Dan thanks for reviewing the patch. Your comments are really very helpful.&lt;/p&gt;

&lt;p&gt;Attaching the new patch (hopefully the final one). I took care of most of Dan&apos;s comments. &lt;/p&gt;

&lt;p&gt;Please review it and if everything looks good please commit&lt;/p&gt;</comment>
                            <comment id="12482527" author="jta" created="Tue, 20 Mar 2007 20:43:12 +0000"  >&lt;p&gt;Almost there ... unfortunately &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2458&quot; title=&quot;Convert lang/unaryArithmeticDynamicParamter.java to junit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2458&quot;&gt;&lt;del&gt;DERBY-2458&lt;/del&gt;&lt;/a&gt;_diff_03_20.txt  gets a Hunk failure at 77 &amp;#8211; the problem is with _Suite.java. Please be sure to do an &apos;svn up&apos;. For a tricky patch, especially if your svn working copy has a lot going on and your patch applies to just some of those changes, it might make sense to do a fresh checkout and apply your patch there to make sure it will work.&lt;/p&gt;</comment>
                            <comment id="12482623" author="mkutty" created="Wed, 21 Mar 2007 00:24:12 +0000"  >&lt;p&gt;Attaching the new patch.&lt;/p&gt;</comment>
                            <comment id="12482633" author="jta" created="Wed, 21 Mar 2007 02:18:11 +0000"  >&lt;p&gt;Committed patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2458&quot; title=&quot;Convert lang/unaryArithmeticDynamicParamter.java to junit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2458&quot;&gt;&lt;del&gt;DERBY-2458&lt;/del&gt;&lt;/a&gt;_diff_03_20_ver2.txt, revision 520709. Thanks, Manjula!&lt;/p&gt;</comment>
                            <comment id="12482807" author="jta" created="Wed, 21 Mar 2007 15:47:57 +0000"  >&lt;p&gt;One step that remains is to delete the old test. A checklist is at &lt;a href=&quot;http://wiki.apache.org/db-derby/ConvertOldTestToJunitTips#DeleteOldHarnessFiles&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/ConvertOldTestToJunitTips#DeleteOldHarnessFiles&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="12482869" author="mkutty" created="Wed, 21 Mar 2007 18:50:33 +0000"  >&lt;p&gt;Thanks for the commit Jean. Here is the additional patch that will take care of the deletion on old test and update to the derbylang.runall file. Please review and if looks good please commit&lt;/p&gt;</comment>
                            <comment id="12482948" author="jta" created="Wed, 21 Mar 2007 23:00:39 +0000"  >&lt;p&gt;Committed patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2458&quot; title=&quot;Convert lang/unaryArithmeticDynamicParamter.java to junit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2458&quot;&gt;&lt;del&gt;DERBY-2458&lt;/del&gt;&lt;/a&gt;_diff_03_21.txt, revision 521036 with one additional change that removed unaryArithmeticDynamicParameter.java from suites/derbynetmats.runall. Thanks, Manjula!&lt;/p&gt;</comment>
                            <comment id="12482952" author="mkutty" created="Wed, 21 Mar 2007 23:10:52 +0000"  >&lt;p&gt;Thanks for the commit , Jean&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12353775" name="DERBY-2458__stat_03_20.txt" size="247" author="mkutty" created="Tue, 20 Mar 2007 19:17:40 +0000"/>
                            <attachment id="12353541" name="DERBY-2458_diff_03_16.txt" size="938" author="mkutty" created="Fri, 16 Mar 2007 20:20:41 +0000"/>
                            <attachment id="12353549" name="DERBY-2458_diff_03_16_ver2.txt" size="15503" author="mkutty" created="Fri, 16 Mar 2007 22:49:11 +0000"/>
                            <attachment id="12353696" name="DERBY-2458_diff_03_19.txt" size="18138" author="mkutty" created="Mon, 19 Mar 2007 21:37:20 +0000"/>
                            <attachment id="12353776" name="DERBY-2458_diff_03_20.txt" size="17975" author="mkutty" created="Tue, 20 Mar 2007 19:17:40 +0000"/>
                            <attachment id="12353806" name="DERBY-2458_diff_03_20_ver2.txt" size="17685" author="mkutty" created="Wed, 21 Mar 2007 00:24:12 +0000"/>
                            <attachment id="12353879" name="DERBY-2458_diff_03_21.txt" size="569" author="mkutty" created="Wed, 21 Mar 2007 18:50:33 +0000"/>
                            <attachment id="12353460" name="DERBY-2458_diff_ver1.txt" size="17119" author="mkutty" created="Fri, 16 Mar 2007 00:51:05 +0000"/>
                            <attachment id="12353695" name="DERBY-2458_stat_03_19.txt" size="315" author="mkutty" created="Mon, 19 Mar 2007 21:37:20 +0000"/>
                            <attachment id="12353878" name="DERBY-2458_stat_03_21.txt" size="559" author="mkutty" created="Wed, 21 Mar 2007 18:50:33 +0000"/>
                            <attachment id="12353459" name="DERBY-2458_stat_ver1.txt" size="233" author="mkutty" created="Fri, 16 Mar 2007 00:51:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 Mar 2007 22:07:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0u5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>