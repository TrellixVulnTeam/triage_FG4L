<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:20:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3400/DERBY-3400.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3400] testgetTypeInfo Fails with ibm16 while running the UpgradeTests</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3400</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I can reproduce the test with the just one old version(10.2.2.0)&lt;/p&gt;

&lt;p&gt;Here is the junit stack trace&lt;/p&gt;

&lt;p&gt;1) testGetTypeInfo(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest)junit.framework.AssertionFailedError: Column nullability do not match for column 16 expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
at org.apache.derbyTesting.junit.JDBC.assertNullability(JDBC.java:741)&lt;/p&gt;

&lt;p&gt;at org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.assertMetaDataResultSet(DatabaseMetaDataTest.java:2348)&lt;/p&gt;

&lt;p&gt;at org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetTypeInfo(DatabaseMetaDataTest.java:2230)&lt;/p&gt;

&lt;p&gt;at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;

&lt;p&gt;at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)&lt;/p&gt;

&lt;p&gt;at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;/p&gt;

&lt;p&gt;at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:99)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;/p&gt;

&lt;p&gt;at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;More info can be found at &lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;http://people.apache.org/~fuzzylogic/derby_test_results/main/linux/testlog/ibm16/617742-suites.All_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~fuzzylogic/derby_test_results/main/linux/testlog/ibm16/617742-suites.All_diff.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment>java version &amp;quot;1.6.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr1-20080108_02)&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20080102&lt;br/&gt;
_15870 (JIT enabled)&lt;br/&gt;
J9VM - 20080102_015870_lHdSMr&lt;br/&gt;
JIT  - r9_20080101_1821&lt;br/&gt;
GC   - 20071224_AA)&lt;br/&gt;
JCL  - 20071219_01&lt;br/&gt;
&lt;br/&gt;
sysinfo&lt;br/&gt;
-----------------&lt;br/&gt;
[C:/derbydev/trunk/test] java org.apache.derby.tools.sysinfo&lt;br/&gt;
------------------ Java Information ------------------&lt;br/&gt;
Java Version:    1.6.0&lt;br/&gt;
Java Vendor:     IBM Corporation&lt;br/&gt;
Java home:       c:\p4client\mkutty_main\ibm16\jre&lt;br/&gt;
Java classpath:  c:/derbydev/trunk/classes;c:/derbydev/trunk/tools/java/junit.ja&lt;br/&gt;
r;.&lt;br/&gt;
OS name:         Windows XP&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version:      5.1 build 2600 Service Pack 2&lt;br/&gt;
Java user name:  mkutty&lt;br/&gt;
Java user home:  C:\Documents and Settings\Administrator&lt;br/&gt;
Java user dir:   C:\derbydev\trunk\test&lt;br/&gt;
java.specification.name: Java Platform API Specification&lt;br/&gt;
java.specification.version: 1.6&lt;br/&gt;
--------- Derby Information --------&lt;br/&gt;
JRE - JDBC: Java SE 6 - JDBC 4.0&lt;br/&gt;
[C:\derbydev\trunk\classes] 10.4.0.0 alpha - (1)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
----------------- Locale Information -----------------&lt;br/&gt;
Current Locale :  [English/United States [en_US]]&lt;br/&gt;
Found support for locale: [cs]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [de_DE]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [es]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [fr]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [hu]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [it]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [ja_JP]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [ko_KR]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [pl]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [pt_BR]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [ru]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [zh_CN]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: [zh_TW]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.4.0.0 alpha - (1)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
</environment>
        <key id="12388229">DERBY-3400</key>
            <summary>testgetTypeInfo Fails with ibm16 while running the UpgradeTests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="mkutty">Manjula Kutty</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Feb 2008 19:59:55 +0000</created>
                <updated>Fri, 21 Jan 2011 18:44:17 +0000</updated>
                            <resolved>Fri, 15 Feb 2008 19:37:13 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12567182" author="mkutty" created="Fri, 8 Feb 2008 20:04:37 +0000"  >&lt;p&gt;And here is the answer I got when I posted the same in the derby_dev list&lt;/p&gt;

&lt;p&gt;Manjula Kutty wrote:&lt;br/&gt;
&amp;gt; The getTypeInfo Fails with ibm16 while running the UpgradeTests. Here is&lt;br/&gt;
&amp;gt; junit stack trace&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; 1)&lt;br/&gt;
&amp;gt; testGetTypeInfo(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest)junit.framework.AssertionFailedError:&lt;br/&gt;
&amp;gt; Column nullability do not match for column 16 expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; at org.apache.derbyTesting.junit.JDBC.assertNullability(JDBC.java:741)&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.assertMetaDataResultSet(DatabaseMetaDataTest.java:2348)&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetTypeInfo(DatabaseMetaDataTest.java:2230)&lt;/p&gt;



&lt;p&gt;&amp;gt; Does it look like derby issue or a jvm problem?&lt;/p&gt;


&lt;p&gt;Looks like a jvm issue:&lt;/p&gt;

&lt;p&gt; DatabaseMetaDataTest passes on the same vm standalone.&lt;/p&gt;

&lt;p&gt; This test passes on other virtual machines.&lt;/p&gt;

&lt;p&gt; The expected and correct nullability for the column is non-null which&lt;br/&gt;
is a zero in the assert above. The the engine is returning the correct&lt;br/&gt;
value (0) but the assert is expecting (1).&lt;/p&gt;

&lt;p&gt; At line 2220 of DatabaseMetaDataTest is where the expected value for&lt;br/&gt;
this column is set:&lt;br/&gt;
  ODBC_COLUMN_NULLABILITY&lt;span class=&quot;error&quot;&gt;&amp;#91;16 - 1&amp;#93;&lt;/span&gt; = false;&lt;/p&gt;

&lt;p&gt;The false would map to a zero in the expected value. It&apos;s as though that&lt;br/&gt;
line was not being executed by the virtual machine.&lt;/p&gt;

&lt;p&gt;HTH,&lt;br/&gt;
Dan.&lt;/p&gt;</comment>
                            <comment id="12567204" author="myrna" created="Fri, 8 Feb 2008 21:08:20 +0000"  >&lt;p&gt;Although this looks like a jvm issue, this first was with the build from on 1/30/08, revision 616990.&lt;br/&gt;
Note that ibm16 results first were reported on &lt;a href=&quot;http://people.apache.org/~fuzzylogic/derby_test_results/main/linux/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~fuzzylogic/derby_test_results/main/linux/index.html&lt;/a&gt;&lt;br/&gt;
on 1/31/08, but I&apos;ve run test tests with that jvm version previously without these failures; records show they didn&apos;t occur on 1/29/08 (revision 616596), although that test run did not complete successfully. Note also, that somehow the build of 1/30/08 is not listed on &lt;a href=&quot;http://people.apache.org/~fuzzylogic/derby_test_results/main/linux/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~fuzzylogic/derby_test_results/main/linux/index.html&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Changes between 616596 (1/29/08) where these didn&apos;t occur, and 616990 (1/30/08) where they did, were:&lt;/p&gt;

&lt;p&gt;SUBVERSION LOG FROM 616596 TO 616990:&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r616982 | myrnavl | 2008-01-30 17:53:07 -0800 (Wed, 30 Jan 2008) | 9 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3088&quot; title=&quot;convert to junit, or otherwise eliminate version in tests which require an update of the master in the release management process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3088&quot;&gt;&lt;del&gt;DERBY-3088&lt;/del&gt;&lt;/a&gt; - (partial) follow up patch to convert testProperties to junit test&lt;br/&gt;
  ServerPropertiesTest.&lt;br/&gt;
  This change reworks the first fixture (ttestSetPortPriority) to take advantage&lt;br/&gt;
  of NetworkServerTestSetup; to do so there are changes to&lt;br/&gt;
  NetworkServerTestSetup. Also modified method execJavaCmd in junit.Utilities to&lt;br/&gt;
  do something in addition to the assertExecJavaCmdAsExpected in BaseTestCase&lt;br/&gt;
  and made use if it.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r616924 | djd | 2008-01-30 14:24:12 -0800 (Wed, 30 Jan 2008) | 2 lines&lt;/p&gt;

&lt;p&gt;Complete the set of utility methods that return JDBC statements in BaseJDBCTestC&lt;br/&gt;
ase.&lt;br/&gt;
Ensure all the statement utility methods close the statement at teardown time.&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r616908 | djd | 2008-01-30 13:13:05 -0800 (Wed, 30 Jan 2008) | 1 line&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2775&quot; title=&quot;DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2775&quot;&gt;DERBY-2775&lt;/a&gt; Remove setNullability methods on TypeDescriptorImpl and DataTypeDescr&lt;br/&gt;
iptor to make the types actually immutable wrt nullability.&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r616873 | djd | 2008-01-30 11:57:38 -0800 (Wed, 30 Jan 2008) | 1 line&lt;/p&gt;

&lt;p&gt;Add some test cases for nullability of the value from a CASE expression. One of&lt;br/&gt;
the cases failed before revision 616853 for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2775&quot; title=&quot;DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2775&quot;&gt;DERBY-2775&lt;/a&gt;.&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r616853 | djd | 2008-01-30 11:36:14 -0800 (Wed, 30 Jan 2008) | 2 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2775&quot; title=&quot;DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2775&quot;&gt;DERBY-2775&lt;/a&gt; Remove last use of DataTypeDescriptor.setNullability() to make DTD&apos;s&lt;br/&gt;
use immutable wrt nullability. Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3346&quot; title=&quot;DatabaseMetaData.getIndexInfo returns the wrong nullabilty for column 4 NON_UNIQUE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3346&quot;&gt;&lt;del&gt;DERBY-3346&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3342&quot; title=&quot;DatabaseMetaData.getProcedureColumns() returns incorrect nullability for column 9 LENGTH&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3342&quot;&gt;&lt;del&gt;DERBY-3342&lt;/del&gt;&lt;/a&gt; which were cases&lt;br/&gt;
when a query was getting the incorrect nullability for some columns due to the m&lt;br/&gt;
utability of DTD when shared across nodes.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r616834 | bpendleton | 2008-01-30 10:32:36 -0800 (Wed, 30 Jan 2008) | 8 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3203&quot; title=&quot;Convert jdbcapi/statementJdbc20.java to JUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3203&quot;&gt;&lt;del&gt;DERBY-3203&lt;/del&gt;&lt;/a&gt;: Convert jdbcapi/statementJdbc20.java to JUnit&lt;/p&gt;

&lt;p&gt;This change deletes statementJdbc20.java and statementJdbc20.out. It is&lt;br/&gt;
a follow-on to revision 601058, which deleted all the content of those&lt;br/&gt;
files but didn&apos;t delete the actual files themselves.&lt;/p&gt;

&lt;p&gt;Patch contributed by Ramin Moazeni (rmoazeni at gmail dot com)&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r616788 | kristwaa | 2008-01-30 07:30:39 -0800 (Wed, 30 Jan 2008) | 3 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2760&quot; title=&quot;Clean-up issues for UTF8Util.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2760&quot;&gt;&lt;del&gt;DERBY-2760&lt;/del&gt;&lt;/a&gt;: Clean-up issues for UTF8Util.java. Added 4 lines of comments, adding&lt;br/&gt;
 binary representations for the hexadecimal numbers.&lt;br/&gt;
Patch file: n/a&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r616786 | kristwaa | 2008-01-30 07:24:44 -0800 (Wed, 30 Jan 2008) | 3 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2760&quot; title=&quot;Clean-up issues for UTF8Util.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2760&quot;&gt;&lt;del&gt;DERBY-2760&lt;/del&gt;&lt;/a&gt;: Clean-up issues for UTF8Util.java. Added a few more tests to improve&lt;br/&gt;
 test coverage.&lt;br/&gt;
Patch file: derby-2760-3a-extra_tests.diff&lt;/p&gt;
</comment>
                            <comment id="12567209" author="djd" created="Fri, 8 Feb 2008 21:27:59 +0000"  >&lt;p&gt;I think it is a jvm issue. The test changed with those commits, so a version of the test passed previously with the ibm 6.0 jvm. Now a different version of the test fails with the ibm 6.0 jvm on linux, but passes on every other platform including ibm 6 on windows and passes on ibm 6.0 on linux when run outside of the upgrade tests.&lt;/p&gt;

&lt;p&gt;The issue is that at a low level the test is coded to be:&lt;/p&gt;

&lt;p&gt;    assertEquals(0, 0);&lt;/p&gt;

&lt;p&gt;but on ibm16 on linux at runtime what is actually being executed is:&lt;/p&gt;

&lt;p&gt;  assertEquals(1,0);&lt;/p&gt;
</comment>
                            <comment id="12567211" author="kmarsden" created="Fri, 8 Feb 2008 21:33:17 +0000"  >&lt;p&gt;Does the problem occur with JIT turned off?  &lt;/p&gt;</comment>
                            <comment id="12567803" author="mkutty" created="Mon, 11 Feb 2008 20:21:47 +0000"  >&lt;p&gt;Yes, it does. Reproduced with -Xjit:count=0 option&lt;/p&gt;</comment>
                            <comment id="12567807" author="djd" created="Mon, 11 Feb 2008 20:32:09 +0000"  >&lt;p&gt;Is -Xjit:count=0 the same as -Xnojit?&lt;/p&gt;

&lt;p&gt;I see -Xnojit when I use -X to show all the non-standard options, but I don&apos;t see -Xjit:count described.&lt;/p&gt;</comment>
                            <comment id="12567815" author="mkutty" created="Mon, 11 Feb 2008 21:00:43 +0000"  >&lt;p&gt;To make things clear,&lt;/p&gt;

&lt;p&gt;The test passed with the following options&lt;br/&gt;
1. -Xint&lt;br/&gt;
2. -Xnojit&lt;/p&gt;

&lt;p&gt;But failed with -Xjit:count=0&lt;/p&gt;


&lt;p&gt;So I think this problem is a JIT issue&lt;/p&gt;</comment>
                            <comment id="12567821" author="kmarsden" created="Mon, 11 Feb 2008 21:30:05 +0000"  >&lt;p&gt;-Xjit:count=0 forces JIT on the first invokation.  For count=n, n is the number of times a method is invoked before it is compiled.  theThe -Xjit options are described in the diagnostics guilde&lt;br/&gt;
&lt;a href=&quot;http://download.boulder.ibm.com/ibmdl/pub/software/dw/jdk/diagnosis/diag60.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.boulder.ibm.com/ibmdl/pub/software/dw/jdk/diagnosis/diag60.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12567827" author="djd" created="Mon, 11 Feb 2008 21:42:27 +0000"  >&lt;p&gt;With -Xjit:count=0 DatabaseMetaDataTest fails by itself, that is outside of the upgrade tests.&lt;/p&gt;</comment>
                            <comment id="12567838" author="djd" created="Mon, 11 Feb 2008 22:07:24 +0000"  >&lt;p&gt;Just to clarify, the original thread on derby-dev said the test failed on linux, this issue says windows.&lt;/p&gt;

&lt;p&gt;Does it fail on both for you?&lt;/p&gt;

&lt;p&gt;I see failures on both linux &amp;amp; windows with just DatabaseMetaDataTest and -Xjit:count=0 but I seem to be running an older vm on windows:&lt;/p&gt;

&lt;p&gt;Java(TM) SE Runtime Environment (build pwi3260-20071123_01)&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20071121&lt;br/&gt;
_15015 (JIT enabled)&lt;br/&gt;
J9VM - 20071121_015015_lHdSMR&lt;br/&gt;
JIT  - r9_20071121_1330&lt;br/&gt;
GC   - 20071031_AA)&lt;br/&gt;
JCL  - 20071118_01&lt;/p&gt;</comment>
                            <comment id="12567844" author="kmarsden" created="Mon, 11 Feb 2008 22:13:22 +0000"  >&lt;p&gt;It also reproduces on Windows with -Xjit:count=0&lt;br/&gt;
I&apos;ll try to narrow it down into something smaller for the JVM team to work with and file a bug.&lt;/p&gt;
</comment>
                            <comment id="12567875" author="kmarsden" created="Mon, 11 Feb 2008 23:29:07 +0000"  >&lt;p&gt;Here is a small repro for this issue outside of Derby and the harness.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/kmarsden/repro/DERBY-3400&amp;#93;&lt;/span&gt; java TestDerby3400&lt;br/&gt;
ODBC_COLUMN_NULLABILITY&lt;span class=&quot;error&quot;&gt;&amp;#91;16 -1&amp;#93;&lt;/span&gt;=false Should be false&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/kmarsden/repro/DERBY-3400&amp;#93;&lt;/span&gt; java -Xjit:count=0 TestDerby3400&lt;br/&gt;
ODBC_COLUMN_NULLABILITY&lt;span class=&quot;error&quot;&gt;&amp;#91;16 -1&amp;#93;&lt;/span&gt;=true Should be false&lt;/p&gt;</comment>
                            <comment id="12567877" author="kmarsden" created="Mon, 11 Feb 2008 23:39:46 +0000"  >&lt;p&gt;I logged an IBM internal bug for this The defect number is 497430. Please ask me if you need status.&lt;/p&gt;</comment>
                            <comment id="12568372" author="mikem" created="Wed, 13 Feb 2008 00:12:58 +0000"  >&lt;p&gt;I believe the same error happened in the ibm j2me jvm - on 2/11 testrun&lt;br/&gt;
6) testGetTypeInfo(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest)junit.framework.AssertionFailedError: Column nullability do not match for column 16 expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.junit.JDBC.assertNullability(JDBC.java:742)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.assertMetaDataResultSet(DatabaseMetaDataTest.java:2348)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetTypeInfo(DatabaseMetaDataTest.java:2230)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:99)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 3546,  Failures: 6,  Errors: 0&lt;/p&gt;

&lt;p&gt;Here is the full version:&lt;br/&gt;
Java Version: J2ME Foundation Specification v1.1&lt;br/&gt;
Java Vendor: IBM Corporation&lt;br/&gt;
Java home: c:\jartest\weme6.1&lt;br/&gt;
Java classpath: c:/jartest/classes/derby.jar;c:/jartest/classes/derbyLocale_zh_TW.jar;c:/jartest/classes/derbyLocale_zh_CN.jar;c:/jartest/classes/derbyLocale_ru.jar;c:/jartest/classes/derbyLocale_pt_BR.jar;c:/jartest/classes/derbyLocale_pl.jar;c:/jartest/classes/derbyLocale_ko_KR.jar;c:/jartest/classes/derbyLocale_ja_JP.jar;c:/jartest/classes/derbyLocale_it.jar;c:/jartest/classes/derbyLocale_hu.jar;c:/jartest/classes/derbyLocale_fr.jar;c:/jartest/classes/derbyLocale_es.jar;c:/jartest/classes/derbyLocale_de_DE.jar;c:/jartest/classes/derbyLocale_cs.jar;c:/jartest/tools/java/junit.jar;c:/jartest/classes/derbytools.jar;c:/jartest/classes/derbyrun.jar;c:/jartest/classes/derbyTesting.jar;c:/jartest/classes/functionTests.jar&lt;br/&gt;
OS name: Windows XP&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version: 5.1 build 2600 Service Pack 2&lt;br/&gt;
Java user name: cloudtest&lt;br/&gt;
Java user home: C:\Documents and Settings\cloudtest&lt;br/&gt;
Java user dir: C:\jartest\JarResults.2008-02-11\weme6.1_derbyall&lt;br/&gt;
java.specification.name: J2ME Foundation Specification&lt;br/&gt;
java.specification.version: 1.1&lt;/p&gt;


&lt;p&gt;from the j9 -version command:&lt;br/&gt;
m1_jdk9:11&amp;gt;j9 -?&lt;br/&gt;
Licensed Materials - Property of IBM&lt;/p&gt;

&lt;p&gt;J9 - VM for the Java(TM) platform, Version 2.3&lt;br/&gt;
(c) Copyright IBM Corp. 1991, 2006  All Rights Reserved&lt;br/&gt;
Target: 20061023_08962_lHdSMR (Windows XP 5.1 build 2600 Service Pack 2 x86)&lt;br/&gt;
JIT  - 20060629_1804ifx1_r8&lt;/p&gt;
</comment>
                            <comment id="12568636" author="kmarsden" created="Wed, 13 Feb 2008 17:15:03 +0000"  >&lt;p&gt;Attached is a patch that changes the test to have a workaround for this issue.  We create a separate array for ODBC nullability instead of doing arrayCopy and reassignment of values that are different.  I am not sure how folks feel about checking in workarounds for JVM issues, so I will let this patch sit for a few days before I check in to see if there are any comments.&lt;/p&gt;</comment>
                            <comment id="12569384" author="kmarsden" created="Fri, 15 Feb 2008 19:37:13 +0000"  >&lt;p&gt;Resolving as invalid because this is a jvm issue.&lt;/p&gt;</comment>
                            <comment id="12577264" author="kmarsden" created="Tue, 11 Mar 2008 00:53:07 +0000"  >&lt;p&gt;Fixed with the following jvm version&lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr1-20080309_01)&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20080308_17822 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20080308_017822_lHdSMr&lt;br/&gt;
JIT  - r9_20080307_1821&lt;br/&gt;
GC   - 20080305_AB)&lt;br/&gt;
JCL  - 20080301_01&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/svn3/trunk&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12375280" name="TestDerby3400.java" size="1090" author="kmarsden" created="Mon, 11 Feb 2008 23:29:06 +0000"/>
                            <attachment id="12375507" name="derby-3400_diff.txt" size="2910" author="kmarsden" created="Wed, 13 Feb 2008 17:15:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Feb 2008 21:08:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0jj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36982</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>