<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:47:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-517/DERBY-517.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-517] ResultSet - relative(int rows) behaves different in embedded and client/server mode when the positioning before the first row or after the last row.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-517</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;RecordSet - relative(int rows) behaves different in embedded and client/server mode when the positioning before the first row or after the last row.&lt;/p&gt;

&lt;p&gt;The embedded driver shows the behaviour described in the JDBC 3.0 specification, returning false and postitioning in either before first or after last. While the client/server driver returns true and incrementing/decrementing the current row by &quot;rows&quot; and not setting the position to either before first of after last.&lt;/p&gt;

&lt;p&gt;I have run a test with a result set with 10 rows, where I positioned in row 5 and moved +20 and - 20 using relative(int rows). With the embedded driver the method returned false, the current row was set to 0 and isAfterLast() and isBeforeFirst() returned true (for +20 and -20 respectively). With the client/server driver the method returned true, the current row was set to 25 and -15 (for +20 and -20 respectively) and isAfterLast() and isBeforeFirst() returned false.&lt;/p&gt;

&lt;p&gt;I have also run a test as the first one but running next() 5 times instead of absolute(5) for postitioning in row 5, and then relative(20) produced the expected results with the client/server driver.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12313528">DERBY-517</key>
            <summary>ResultSet - relative(int rows) behaves different in embedded and client/server mode when the positioning before the first row or after the last row.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fernanda">Fernanda Pizzorno</assignee>
                                    <reporter username="fernanda">Fernanda Pizzorno</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2005 00:41:51 +0100</created>
                <updated>Thu, 24 Nov 2005 17:58:51 +0000</updated>
                            <resolved>Wed, 23 Nov 2005 01:33:19 +0000</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12357977" author="fernanda" created="Sat, 19 Nov 2005 00:00:18 +0000"  >&lt;p&gt;This patch changes the behaviour of relative(int) in the client driver so that when positioning outside a resultset it will return false and depending on whether the position is before the first row or after the last row, isAfterLast() or isBeforeFirst will return true. It also enables the test &quot;lang/scrollCursors2.java&quot; for the client driver.&lt;/p&gt;

&lt;p&gt;When running the test &quot;lang/scrollCursors2.java&quot; for the client driver I realized that Statement.setMaxRows() did not behave as expected for the client driver, so this patch also addresses this issue. The test has also been extended so that it will run one of the tests with different combinations of maxRows and fetchSize.&lt;/p&gt;

&lt;p&gt;I have run derbyall successfully, except for store/encryptionKey.sql that failed, but I don&apos;t think it was related to my patch.&lt;/p&gt;

&lt;p&gt;Can someone please review the patch?&lt;/p&gt;</comment>
                            <comment id="12358144" author="fernanda" created="Mon, 21 Nov 2005 21:30:38 +0000"  >&lt;p&gt;I seems like I had forgotten a &quot;svn add&quot;, sorry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="12358349" author="fernanda" created="Wed, 23 Nov 2005 21:29:21 +0000"  >&lt;p&gt;There is also another problem that has been fixed by this patch. When positioning with rs.afterLast() and moving backwards (using rs.previous()) the client driver would only access fetchSize rows and not all rows in the result set. The attached repro case (testPositionLastPrev.java) shows this behaviour. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Output of testPositionLastPrev.java before patch:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Show all rows.&lt;br/&gt;
Forward - Row: 1: Testing 1&lt;br/&gt;
Forward - Row: 2: Testing 2&lt;br/&gt;
Forward - Row: 3: Testing 3&lt;br/&gt;
Forward - Row: 4: Testing 4&lt;br/&gt;
Forward - Row: 5: Testing 5&lt;br/&gt;
Forward - Row: 6: Testing 6&lt;br/&gt;
Forward - Row: 7: Testing 7&lt;br/&gt;
Forward - Row: 8: Testing 8&lt;br/&gt;
Forward - Row: 9: Testing 9&lt;br/&gt;
Forward - Row: 10: Testing 10&lt;/p&gt;

&lt;p&gt;Position after the last row and show all rows backwards.&lt;br/&gt;
Backward - Row: 5: Testing 5&lt;br/&gt;
Backward - Row: 4: Testing 4&lt;br/&gt;
Backward - Row: 3: Testing 3&lt;br/&gt;
Backward - Row: 2: Testing 2&lt;br/&gt;
Backward - Row: 1: Testing 1&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Output after patch:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Show all rows.&lt;br/&gt;
Forward - Row: 1: Testing 1&lt;br/&gt;
Forward - Row: 2: Testing 2&lt;br/&gt;
Forward - Row: 3: Testing 3&lt;br/&gt;
Forward - Row: 4: Testing 4&lt;br/&gt;
Forward - Row: 5: Testing 5&lt;br/&gt;
Forward - Row: 6: Testing 6&lt;br/&gt;
Forward - Row: 7: Testing 7&lt;br/&gt;
Forward - Row: 8: Testing 8&lt;br/&gt;
Forward - Row: 9: Testing 9&lt;br/&gt;
Forward - Row: 10: Testing 10&lt;/p&gt;

&lt;p&gt;Position after the last row and show all rows backwards.&lt;br/&gt;
Backward - Row: 10: Testing 10&lt;br/&gt;
Backward - Row: 9: Testing 9&lt;br/&gt;
Backward - Row: 8: Testing 8&lt;br/&gt;
Backward - Row: 7: Testing 7&lt;br/&gt;
Backward - Row: 6: Testing 6&lt;br/&gt;
Backward - Row: 5: Testing 5&lt;br/&gt;
Backward - Row: 4: Testing 4&lt;br/&gt;
Backward - Row: 3: Testing 3&lt;br/&gt;
Backward - Row: 2: Testing 2&lt;br/&gt;
Backward - Row: 1: Testing 1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12320826" name="DERBY-517-2.diff" size="36420" author="fernanda" created="Mon, 21 Nov 2005 21:30:38 +0000"/>
                            <attachment id="12320827" name="DERBY-517-2.stat" size="401" author="fernanda" created="Mon, 21 Nov 2005 21:30:38 +0000"/>
                            <attachment id="12320900" name="testPositionLastPrev.java" size="2864" author="fernanda" created="Wed, 23 Nov 2005 21:29:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy17iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40869</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>