<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:49:22 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2465/DERBY-2465.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2465] Clob data type should use getCharacterStream() to read a column  data from a VTI instead of getString(). </title>
                <link>https://issues.apache.org/jira/browse/DERBY-2465</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Currently clob data is read as String. This can consume lot of memory when lot &lt;br/&gt;
of rows read from a VTI resultset. I think it would consume less memory if &lt;br/&gt;
data is read using streams. &lt;/p&gt;

&lt;p&gt;org.apache.derby.iapi.types.SQLClob.java does not implement&lt;br/&gt;
setValueFromResultSet() that is used by the VTI to read the data, it defaults&lt;br/&gt;
to super class SQLChar.java implementation, which reads the data using &lt;br/&gt;
getString(). &lt;/p&gt;

&lt;p&gt;One case I  noticed  the current implementation  uses lot of memory  is  when doing import of clobs(&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-378&quot; title=&quot;support for  import/export  of  tables with clob/blob and the other binary data types   will be good addition to derby,&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-378&quot;&gt;&lt;del&gt;DERBY-378&lt;/del&gt;&lt;/a&gt;). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12365276">DERBY-2465</key>
            <summary>Clob data type should use getCharacterStream() to read a column  data from a VTI instead of getString(). </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tsuresh">Suresh Thalamati</reporter>
                        <labels>
                            <label>CLOB</label>
                            <label>derby_triage10_10</label>
                    </labels>
                <created>Mon, 19 Mar 2007 17:28:20 +0000</created>
                <updated>Tue, 2 Oct 2012 06:24:20 +0100</updated>
                                            <version>10.3.1.4</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12482239" author="tsuresh" created="Mon, 19 Mar 2007 21:39:02 +0000"  >&lt;p&gt;Following the similar code in the SQLBlob data type, I made small changes to&lt;br/&gt;
SQLClob.java as in the attached patch to make clob datatype read using &lt;br/&gt;
getCharacterStream(). &lt;/p&gt;

&lt;p&gt;When I ran the tests, lang/TriggerTest Failied with following error:&lt;br/&gt;
1) testTypesInActionStatement(org.apache.derbyTesting.functionTests.tests.lang.T&lt;br/&gt;
riggerTest)ERROR XSDA7: Restore of a serializable or SQLData object of class , a&lt;br/&gt;
ttempted to read more data than was originally stored&lt;/p&gt;

&lt;p&gt;I wonder if I am doing something stupid  or just hit a bug ?&lt;/p&gt;</comment>
                            <comment id="12482243" author="djd" created="Mon, 19 Mar 2007 21:45:08 +0000"  >&lt;p&gt;Could be similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2349&quot; title=&quot;Accessing a BLOB column twice in an INSERT trigger leads to errors in the value on-disk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2349&quot;&gt;&lt;del&gt;DERBY-2349&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12482466" author="tsuresh" created="Tue, 20 Mar 2007 18:32:40 +0000"  >&lt;p&gt;Thanks Dan.   Stack I am seeing is also similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2349&quot; title=&quot;Accessing a BLOB column twice in an INSERT trigger leads to errors in the value on-disk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2349&quot;&gt;&lt;del&gt;DERBY-2349&lt;/del&gt;&lt;/a&gt;.  I will  hold the fix for this issue  until &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2349&quot; title=&quot;Accessing a BLOB column twice in an INSERT trigger leads to errors in the value on-disk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2349&quot;&gt;&lt;del&gt;DERBY-2349&lt;/del&gt;&lt;/a&gt; is fixed.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12353698" name="derby.log" size="148286" author="tsuresh" created="Mon, 19 Mar 2007 21:39:02 +0000"/>
                            <attachment id="12353697" name="derby2465_v1.diff" size="1781" author="tsuresh" created="Mon, 19 Mar 2007 21:39:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Mar 2007 21:45:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy08cv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>