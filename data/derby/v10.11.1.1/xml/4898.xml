<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4898/DERBY-4898.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4898] testGetURL test fails in nightly runs.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4898</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I saw this failure while running a test with some changes to print better diagnostics on checksum failure, so pretty&lt;br/&gt;
sure had nothing to do with my change.  Just from looking at the message it looks likely to be a test issue with something changing the order of the properties.&lt;/p&gt;

&lt;p&gt;There was 1 failure:&lt;br/&gt;
1) testGetURL(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDa&lt;br/&gt;
taTest)junit.framework.ComparisonFailure: getURL match expected:&amp;lt;...territory=en&lt;br/&gt;
;collation=TERRITORY_BASED&amp;gt; but was:&amp;lt;...collation=TERRITORY_BASED;territory=en&amp;gt;&lt;br/&gt;
    at java.lang.Throwable.&amp;lt;init&amp;gt;(Throwable.java:67)&lt;br/&gt;
    at junit.framework.AssertionFailedError.&amp;lt;init&amp;gt;(AssertionFailedError.java:11)&lt;br/&gt;
    at junit.framework.ComparisonFailure.&amp;lt;init&amp;gt;(ComparisonFailure.java:19)&lt;br/&gt;
    at org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.&lt;br/&gt;
testGetURL(DatabaseMetaDataTest.java:717)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java&lt;br/&gt;
:48)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI&lt;br/&gt;
mpl.java:37)&lt;br/&gt;
    at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;</description>
                <environment>trunk, on a windows xp laptop, against ibm16 jvm, sane build running against classes.&lt;br/&gt;
my java version:&lt;br/&gt;
s1_ibm16:5&amp;gt;java -version&lt;br/&gt;
java version &amp;quot;1.6.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr6-20090925_01(SR6))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr6-200909&lt;br/&gt;
23_42924 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20090923_042924&lt;br/&gt;
JIT  - r9_20090902_1330ifx1&lt;br/&gt;
GC   - 20090817_AA)&lt;br/&gt;
JCL  - 20090924_01&lt;br/&gt;
</environment>
        <key id="12479618">DERBY-4898</key>
            <summary>testGetURL test fails in nightly runs.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="mikem">Mike Matrigali</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Nov 2010 18:29:10 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:08 +0100</updated>
                            <resolved>Thu, 11 Nov 2010 09:26:39 +0000</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12930722" author="kmarsden" created="Wed, 10 Nov 2010 19:16:52 +0000"  >&lt;p&gt;Whoever is working on this issue may want to make note of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4886&quot; title=&quot;Client and embedded don&amp;#39;t agree on connection attributes in DatabaseMetaData.getURL()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4886&quot;&gt;DERBY-4886&lt;/a&gt;: Embedded and client differ on whether they return attributes.  I am not actually sure which behavior is correct.  Also in the past I have seen ordering differences in Properties objects because they extend Hashtable.  Different implementations may order these differently. I don&apos;t know if in this case the properties on the url are extracted into a Properties object and reconstructed. If so that might explain the order change. It  would be good to know  the java -version on which this failed.&lt;/p&gt;

</comment>
                            <comment id="12930752" author="knutanders" created="Wed, 10 Nov 2010 20:06:34 +0000"  >&lt;p&gt;This failure was likely caused by the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4884&quot; title=&quot;DatabasePropertyTestSetup cannot change static properties in encrypted databases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4884&quot;&gt;&lt;del&gt;DERBY-4884&lt;/del&gt;&lt;/a&gt;, and happens when DatabaseMetaDataTest is run as part of CollationTest. Not sure why the attributes end up with different order, though. ClientDriver.appendDatabaseAttributes() and TestConfiguration.getConnectionAttributesString() appear to build the attributes part of the URL the same way, and I thought Properties.propertyNames() would order the properties consistently on a single platform.&lt;/p&gt;</comment>
                            <comment id="12930758" author="knutanders" created="Wed, 10 Nov 2010 20:18:13 +0000"  >&lt;p&gt;Ah, right... It&apos;s not the same Properties object in the two cases. The framework always adds user=APP and password=APP before connecting (but ClientDriver.appendDatabaseAttributes() suppresses those properties &amp;#8211; &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-559&quot; title=&quot;With Network Client, user and password attriubtes specified in the url should not  be sent to hte server with the RDBNAM or print with getURL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-559&quot;&gt;&lt;del&gt;DERBY-559&lt;/del&gt;&lt;/a&gt; &amp;#8211; so they don&apos;t show up in getURL()), so the two objects represent different sets of properties and the ordering may differ.&lt;/p&gt;</comment>
                            <comment id="12930861" author="mamtas" created="Thu, 11 Nov 2010 00:32:46 +0000"  >&lt;p&gt;Seems like we are close to finding the root of the problem. I just wanted to share that I saw the same failure repeatedly on my windows xp laptop running against trunk with ibm16 jvm&lt;/p&gt;

&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr6-20090925_01(SR6))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr6-200909&lt;br/&gt;
23_42924 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20090923_042924&lt;br/&gt;
JIT  - r9_20090902_1330ifx1&lt;br/&gt;
GC   - 20090817_AA)&lt;br/&gt;
JCL  - 20090924_01&lt;/p&gt;</comment>
                            <comment id="12930966" author="knutanders" created="Thu, 11 Nov 2010 09:24:59 +0000"  >&lt;p&gt;I haven&apos;t been able to reproduce this failure in my environment, but I believe the attached patch solves the problem with the ordering. Committed revision 1033851.&lt;/p&gt;</comment>
                            <comment id="13685134" author="knutanders" created="Mon, 17 Jun 2013 10:19:08 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12479079">DERBY-4884</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12459333" name="d4898.diff" size="5012" author="knutanders" created="Thu, 11 Nov 2010 09:24:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Nov 2010 19:16:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0p1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37875</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>