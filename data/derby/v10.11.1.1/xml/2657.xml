<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2657/DERBY-2657.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2657] Performance regression after check-in of svn 531971</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2657</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;After check-in of svn 531971 on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2537&quot; title=&quot;implement pushing collation info to store, storing collation info in store metadata, and creating templates based on store metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2537&quot;&gt;&lt;del&gt;DERBY-2537&lt;/del&gt;&lt;/a&gt; it seems like there for&lt;br/&gt;
some loads are a performance regression of about 10-15 percent.&lt;/p&gt;

&lt;p&gt;For more info about this issue see the following mail thread:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/Performance-regression-after-check-in-on-DERBY-2537-(SVN-531971)-t3651494.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Performance-regression-after-check-in-on-DERBY-2537-(SVN-531971)-t3651494.html&lt;/a&gt;&lt;/p&gt;
</description>
                <environment>Solaris/Linux, Sun JDK 5 &amp;amp; 6, IBM 1.5</environment>
        <key id="12369447">DERBY-2657</key>
            <summary>Performance regression after check-in of svn 531971</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="olav">Olav Sandstaa</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2007 01:08:58 +0100</created>
                <updated>Fri, 21 Jan 2011 17:50:10 +0000</updated>
                            <resolved>Tue, 12 Jun 2007 10:50:15 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12496163" author="olav" created="Wed, 16 May 2007 01:12:34 +0100"  >&lt;p&gt;Test client that can be used to show that there has been a performance regression.&lt;/p&gt;

&lt;p&gt;This test is  based on a slightly modified version of the test client found in&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1961&quot; title=&quot;Investigate resource usage for different types of load on an in-memory database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1961&quot;&gt;&lt;del&gt;DERBY-1961&lt;/del&gt;&lt;/a&gt;. The main change is to add a secondary index to&lt;br/&gt;
it that is used for the queries.&lt;/p&gt;

&lt;p&gt;To run this client do:&lt;/p&gt;

&lt;p&gt;1. Create and initialize database:&lt;/p&gt;

&lt;p&gt;    java  TestClient2 -a initdb -u &quot;jdbc:derby:/tmp/tulldb;create=true&quot;&lt;/p&gt;

&lt;p&gt;2. Run test (which does SELECT * FROM ... WHERE SEC_ID= X) with two&lt;br/&gt;
client threads:&lt;/p&gt;

&lt;p&gt;    java TestClient2 -a select -r 60 -c 2 -u &quot;jdbc:derby:/tmp/tulldb&quot;&lt;/p&gt;
</comment>
                            <comment id="12503467" author="rhillegas" created="Mon, 11 Jun 2007 17:47:07 +0100"  >&lt;p&gt;Marking this issue as a blocker for 10.3. We are caught between 2 major focus areas for the 10.3 release: performance improvements and language senstitive ordering. A performance regression is serious enough by itself, but it is particularly serious for a release which is trying to boost Derby performance.&lt;/p&gt;</comment>
                            <comment id="12503786" author="knutanders" created="Tue, 12 Jun 2007 10:07:23 +0100"  >&lt;p&gt;I ran Olav&apos;s test client against revision 531970 and revision 531971, and used DTrace to monitor object allocations. What jumped out, was that revision 531971 allocated a large number of ProtocolKey objects. It turns out this is caused by Xact.getDataValueFactory() which was introduced in that revision. Instead of returning the value of its dataValueFactory field, it invokes Monitor.findServiceModule() which creates a ProtocolKey object that is used in a Hashtable look-up. When I changed that method so that it just returned dataValueFactory, I didn&apos;t see the difference in performance between the two revisions any more.&lt;/p&gt;</comment>
                            <comment id="12503792" author="knutanders" created="Tue, 12 Jun 2007 10:17:14 +0100"  >&lt;p&gt;By the way, the number of allocations of ProtocolKey objects is much smaller on head of trunk, because the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-827&quot; title=&quot;Performance can be improved by re-using language ResultSets across Activation executions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-827&quot;&gt;&lt;del&gt;DERBY-827&lt;/del&gt;&lt;/a&gt; patch started reusing some of them. Still, I think it would be good to have this fixed.&lt;/p&gt;</comment>
                            <comment id="12503796" author="knutanders" created="Tue, 12 Jun 2007 10:25:03 +0100"  >&lt;p&gt;Attaching a patch (d2657.diff) which makes Xact.getDataValueFactory() return the field value directly instead of going through the Hashtable in BaseMonitor. Derbyall and suites.All ran cleanly.&lt;/p&gt;</comment>
                            <comment id="12503808" author="knutanders" created="Tue, 12 Jun 2007 10:50:15 +0100"  >&lt;p&gt;Committed revision 546440.&lt;/p&gt;</comment>
                            <comment id="12503937" author="mikem" created="Tue, 12 Jun 2007 18:32:14 +0100"  >&lt;p&gt;Thanks knut, this is definitely the right fix.  I had done the changes to get the dataValueFactory into the class and then forgot to use it rather than looking it up.  It is interesting that looking up the factory made such a big difference.  I had wondered when I made the change whether it was worth passing the factory down on Xact initialization was worth it - seems it was.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12366919">DERBY-2537</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12357432" name="TestClient2.java" size="8231" author="olav" created="Wed, 16 May 2007 01:12:33 +0100"/>
                            <attachment id="12359484" name="d2657.diff" size="988" author="knutanders" created="Tue, 12 Jun 2007 10:25:03 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Jun 2007 16:47:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0mf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10050"><![CDATA[Blocker]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>