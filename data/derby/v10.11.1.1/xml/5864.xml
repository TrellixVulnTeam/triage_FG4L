<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5864/DERBY-5864.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5864] weme 6.2 (J2ME) runs fail to start with Failed to invoke class org.apache.derbyTesting.functionTests.tests.derbynet._Suite java.lang.reflect.InvocationTargetException</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5864</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;As in:&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testSummary-1362330.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testSummary-1362330.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;All J2ME tests fail to start with the exception below loading the .derbynet._Suite.&lt;br/&gt;
The root cause  java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version for class=org/apache/derby/drda/NetworkServerControl, offset=6&lt;/p&gt;

&lt;p&gt;The derbynet tests do not need to run with J2ME but I think the tests need to be changed to not load derbynet._Suite at all now that network server compiles with the higher version.&lt;/p&gt;


&lt;p&gt;Failed to invoke class org.apache.derbyTesting.functionTests.tests.derbynet._Suite&lt;br/&gt;
java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:205)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:252)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.suites.AllPackages.invokeSuite(AllPackages.java:176)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.suites.AllPackages.suite(AllPackages.java:63)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.suites.All.suite(All.java:51)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:203)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:252)&lt;br/&gt;
	at junit.runner.BaseTestRunner.getTest(BaseTestRunner.java:126)&lt;br/&gt;
	at junit.textui.TestRunner.start(TestRunner.java:184)&lt;br/&gt;
	at junit.textui.TestRunner.main(TestRunner.java:143)&lt;br/&gt;
Caused by: java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=org/apache/derby/drda/NetworkServerControl, offset=6&lt;br/&gt;
	at java.lang.ClassLoader.defineClassImpl(Native Method)&lt;br/&gt;
	at java.lang.ClassLoader.defineClass(ClassLoader.java:239)&lt;br/&gt;
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:109)&lt;br/&gt;
	at java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1073)&lt;br/&gt;
	at java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1078)&lt;br/&gt;
	at java.net.URLClassLoader$LoadContext.run(URLClassLoader.java:570)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(AccessController.java:227)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:586)&lt;br/&gt;
	at com.ibm.oti.vm.URLSystemClassLoader.findClass(URLSystemClassLoader.java:26)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:641)&lt;br/&gt;
	at com.ibm.oti.vm.URLAppClassLoader.loadClass(URLAppClassLoader.java:146)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:607)&lt;br/&gt;
	at java.lang.Class.forNameImpl(Native Method)&lt;br/&gt;
	at java.lang.Class.forName(Class.java:127)&lt;br/&gt;
	at org.apache.derbyTesting.junit.SecurityManagerSetup.getURL(SecurityManagerSetup.java:427)&lt;br/&gt;
	at org.apache.derbyTesting.junit.Derby.hasCorrectJar(Derby.java:97)&lt;br/&gt;
	at org.apache.derbyTesting.junit.Derby.hasServer(Derby.java:60)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlApiTest.suite(NetworkServerControlApiTest.java:315)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet._Suite.suite(_Suite.java:49)&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:203)&lt;br/&gt;
	... 9 more&lt;br/&gt;
Failed to invoke suite():java.lang.reflect.InvocationTargetException&lt;/p&gt;

&lt;p&gt;I marked critical as it blocks all J2ME tests&lt;/p&gt;</description>
                <environment>Windows weme 6.2 &lt;br/&gt;
noticed trunk at revision  136330.</environment>
        <key id="12599458">DERBY-5864</key>
            <summary>weme 6.2 (J2ME) runs fail to start with Failed to invoke class org.apache.derbyTesting.functionTests.tests.derbynet._Suite java.lang.reflect.InvocationTargetException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jul 2012 13:56:10 +0100</created>
                <updated>Mon, 24 Mar 2014 23:16:17 +0000</updated>
                            <resolved>Thu, 19 Jul 2012 21:01:56 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13418276" author="kmarsden" created="Thu, 19 Jul 2012 14:16:58 +0100"  >&lt;p&gt;My guess is this issue is related to this checkin for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5840&quot; title=&quot;Clean up compiler warnings introduced by using Java 5 language features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5840&quot;&gt;&lt;del&gt;DERBY-5840&lt;/del&gt;&lt;/a&gt;. I have not confirmed.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r1361925 | kahatlen | 2012-07-16 00:22:45 -0700 (Mon, 16 Jul 2012) | 1 line&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5840&quot; title=&quot;Clean up compiler warnings introduced by using Java 5 language features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5840&quot;&gt;&lt;del&gt;DERBY-5840&lt;/del&gt;&lt;/a&gt;: Compile network server code with source and target level 1.5&lt;/p&gt;</comment>
                            <comment id="13418292" author="knutanders" created="Thu, 19 Jul 2012 14:53:23 +0100"  >&lt;p&gt;That sounds like a likely culprit. I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="13418423" author="knutanders" created="Thu, 19 Jul 2012 17:40:37 +0100"  >&lt;p&gt;The problem is that the test framework loads some classes from the client and the server while deciding which tests to run. Since the client and server now are compiled with target level 1.5, they won&apos;t load on most J2ME platforms.&lt;/p&gt;

&lt;p&gt;The attached patch makes the tests start again in OJEC 1.1 in my environment. It makes the following changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;tests/derbynet/_Suite.java:&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Utf8CcsidManagerClientTest has references to many classes in the client driver, so I moved it to the section guarded by Derby.hasClient() to prevent its suite() method from being called when the client driver is not available.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;junit/Derby.java:&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Made hasServer() return false immediately when running on J2ME, since the server isn&apos;t supported on that platform.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Reordered the checks in hasClient() so that it always returns false when running on J2ME. It already had logic for this, but it only worked as intended when the tests were running from jars.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13418582" author="kmarsden" created="Thu, 19 Jul 2012 20:02:53 +0100"  >&lt;p&gt;+1 to the patch and thanks Knut for fixing this.&lt;br/&gt;
weme 6.2 derbynet._Suite seems to run run fine with the patch with no tests run. &lt;/p&gt;

&lt;p&gt;++ &apos;c:\cygwin\ibmsvn\ntsoftware\weme6.2/bin/j9&apos; -Dderby.tests.trace=true -jcl:foun11 -DderbyTesting.serverhost=localhost&lt;br/&gt;
 -DderbyTesting.clienthost=localhost -Demma.active= &apos;-Xbootclasspath/a:c:\cygwin\ibmsvn\ntsoftware\weme6.2/lib/jdbc.jar&apos;&lt;br/&gt;
 &apos;-Dbootcp=c:\cygwin\ibmsvn\ntsoftware\weme6.2/lib/jdbc.jar&apos; junit.textui.TestRunner org.apache.derbyTesting.functionTes&lt;br/&gt;
ts.tests.derbynet._Suite&lt;/p&gt;

&lt;p&gt;Time: 9.676&lt;/p&gt;

&lt;p&gt;OK (0 tests)&lt;/p&gt;

&lt;p&gt;I did not run all of suites.All but did verify it kicks off.&lt;/p&gt;</comment>
                            <comment id="13418623" author="knutanders" created="Thu, 19 Jul 2012 21:01:56 +0100"  >&lt;p&gt;Thanks for testing the patch on weme, Kathey. I started suites.All on OJEC. Unfortunately, I took the startup flags from memory, and probably missed some, so the process eventually fell over. In any case, it seems to behave better than before, and a suites.All run I started in parallel on Java 7 ran successfully, so I checked in the patch.&lt;/p&gt;

&lt;p&gt;Committed revision 1363508.&lt;/p&gt;</comment>
                            <comment id="13823455" author="knutanders" created="Fri, 15 Nov 2013 08:15:18 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12597240">DERBY-5840</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12537209" name="d5864-1a.diff" size="3028" author="knutanders" created="Thu, 19 Jul 2012 17:40:37 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 19 Jul 2012 13:53:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0b2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>