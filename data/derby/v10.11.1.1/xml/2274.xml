<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2274/DERBY-2274.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2274] Implement testing for SSL communication</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2274</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12361332">DERBY-2274</key>
            <summary>Implement testing for SSL communication</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12356362">DERBY-2108</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bernt">Bernt M. Johnsen</assignee>
                                    <reporter username="bernt">Bernt M. Johnsen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jan 2007 14:32:45 +0000</created>
                <updated>Fri, 21 Jan 2011 17:49:41 +0000</updated>
                            <resolved>Wed, 13 Jun 2007 14:19:39 +0100</resolved>
                                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Network Client</component>
                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12502673" author="myrna" created="Fri, 8 Jun 2007 06:38:27 +0100"  >&lt;p&gt;No effort seems to be underway for this. However, the functionality went in for 10.3&lt;br/&gt;
Is there any testing scheduled by anyone?&lt;/p&gt;</comment>
                            <comment id="12503825" author="bernt" created="Tue, 12 Jun 2007 11:47:26 +0100"  >&lt;p&gt;Attached a simple SSL test. Should be enough for some basic regression check. This is new territory to me, so it would be nice if someone with test framework experience could have a look at it.&lt;/p&gt;</comment>
                            <comment id="12503871" author="johnemb" created="Tue, 12 Jun 2007 15:28:24 +0100"  >&lt;p&gt;I&apos;m afraid I&apos;m not able to say whether or not you&apos;ve done the right thing wrt. the JUnit framework stuff (it looks OK to me), but I do have one comment about the test itself (SSLTest.java).&lt;/p&gt;

&lt;p&gt;In the public void sslTest() method, there is the following code&lt;/p&gt;

&lt;p&gt;+        try &lt;/p&gt;
{
+            // Should fail
+            Connection c2 = DriverManager.getConnection(plain);
+            c2.close();
+        }
&lt;p&gt; catch (SQLException e) {&lt;br/&gt;
+            if (e.getCause() != null &amp;amp;&amp;amp; &lt;br/&gt;
+                e.getCause() instanceof org.apache.derby.client.am.DisconnectException) &lt;/p&gt;
{
+                // Assumes protocol fail due to SSL on the other end
+            }
&lt;p&gt; else &lt;/p&gt;
{
+                throw e;
+            }
&lt;p&gt;+        }&lt;/p&gt;

&lt;p&gt;What if the plaintext connection attempt actually succeeds, although it is supposed to fail. Won&apos;t this just slip through without causing a test failure? Would adding a fail(message) statement after c2.close(); be more appropriate?&lt;/p&gt;</comment>
                            <comment id="12504167" author="knutanders" created="Wed, 13 Jun 2007 09:45:43 +0100"  >&lt;p&gt;The patch looks fine to me. A couple of comments, though:&lt;/p&gt;

&lt;p&gt;1) The new copy constructor in TestConfiguration could perhaps use the existing copy constructor, like this:&lt;br/&gt;
    this(copy);&lt;br/&gt;
    this.ssl = ssl;&lt;br/&gt;
Actually, when I think more about it, perhaps a static copy method would be better. If we want another copy constructor that changes one string property later, we are kind of lost. What about:&lt;br/&gt;
  public static TestConfiguration copyConfigurationForSSL(TestConfiguration template, String ssl) &lt;/p&gt;
{
    TestConfiguration copy = new TestConfiguration(template);
    copy.ssl = ssl;
    return copy;
  }

&lt;p&gt;2) In NetworkServerTestSetup.getDefaultStartupArgs(), I was wondering whether it would be more correct to pass in &quot;-ssl off&quot; when getSsl().equals(&quot;off&quot;) rather than skipping those arguments.&lt;/p&gt;

&lt;p&gt;3) Same as (2) for getNetworkServerControl().&lt;/p&gt;

&lt;p&gt;4) I&apos;m not sure whether it is OK to call Class.forName() and DriverManager.getConnection() directly from the test method. What about using JDBCDataSource.getDataSource() and JDBCDataSource.setBeanProperty() instead?&lt;/p&gt;

&lt;p&gt;5) Should SSLTest also have test cases for other SSL modes?&lt;/p&gt;

&lt;p&gt;6) What about splitting the test method into to separate test cases (one positive and one negative)?&lt;/p&gt;

&lt;p&gt;7) The boxes which are drawn around the comments exceed 80 characters (which should be unneccessary since the comments are very short).&lt;/p&gt;

&lt;p&gt;8) In NetworkServerTestSetup.getNetworkServerControl(), would it be better to restore the derby.drda.sslMode property to its old value rather than always removing it?&lt;/p&gt;</comment>
                            <comment id="12504195" author="bernt" created="Wed, 13 Jun 2007 12:04:06 +0100"  >&lt;p&gt;Thanks to Knut &amp;amp; John for the input. New patch V2 attached (the key file is unchanged).&lt;br/&gt;
@Knut: 1) done, 2) done, 2) done, 4) done, 5) yes, but not now 6) done, 7) done, 8) done.&lt;/p&gt;</comment>
                            <comment id="12504196" author="bernt" created="Wed, 13 Jun 2007 12:09:05 +0100"  >&lt;p&gt;Another comment on Knut&apos;s #1). Since overloaded constructures where used, I decided to stick with that, but generally agree that properly named static copy methods actually would be better.&lt;/p&gt;</comment>
                            <comment id="12504226" author="bernt" created="Wed, 13 Jun 2007 14:19:39 +0100"  >&lt;p&gt;Committed revision 546861.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12359587" name="DERBY-2274-v2.diff" size="17277" author="bernt" created="Wed, 13 Jun 2007 12:04:06 +0100"/>
                            <attachment id="12359588" name="DERBY-2274-v2.stat" size="569" author="bernt" created="Wed, 13 Jun 2007 12:04:06 +0100"/>
                            <attachment id="12359493" name="DERBY-2274.diff" size="18253" author="bernt" created="Tue, 12 Jun 2007 11:47:25 +0100"/>
                            <attachment id="12359494" name="DERBY-2274.stat" size="569" author="bernt" created="Tue, 12 Jun 2007 11:47:26 +0100"/>
                            <attachment id="12359495" name="SSLTestServerKey.key" size="1264" author="bernt" created="Tue, 12 Jun 2007 11:47:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Jun 2007 05:38:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0mpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>