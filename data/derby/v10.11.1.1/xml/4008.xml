<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:48:22 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4008/DERBY-4008.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4008] Only send RDBNAM on ACCSEC if EBCDIC conversion is possible</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4008</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;As part of the change for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-728&quot; title=&quot;Unable to create databases whose name containg Chinese characters through the client driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-728&quot;&gt;&lt;del&gt;DERBY-728&lt;/del&gt;&lt;/a&gt; we will implement UNICODEMGR which will require ACCSEC be sent in EBCDIC.  After &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4004&quot; title=&quot; Remove required RDBNAM from ACCSEC. Use SECCHK RDBNAM if none is provided on ACCSEC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4004&quot;&gt;&lt;del&gt;DERBY-4004&lt;/del&gt;&lt;/a&gt; is fixed the client should send the RDBNAM on ACCSEC only if EBCDIC conversion is possible.  This will maintain compatibility with old servers for database names that can be converted but will allow us to defer sending the database name to SECCHK so that we can send the RDBNAM in UTF-8 with new servers when UNICODEMGR is active.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12411968">DERBY-4008</key>
            <summary>Only send RDBNAM on ACCSEC if EBCDIC conversion is possible</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12326016">DERBY-728</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Jan 2009 19:38:05 +0000</created>
                <updated>Mon, 4 May 2009 19:22:58 +0100</updated>
                            <resolved>Mon, 26 Jan 2009 17:31:26 +0000</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12664699" author="kmarsden" created="Fri, 16 Jan 2009 22:04:49 +0000"  >&lt;p&gt;As discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-728&quot; title=&quot;Unable to create databases whose name containg Chinese characters through the client driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-728&quot;&gt;&lt;del&gt;DERBY-728&lt;/del&gt;&lt;/a&gt;,  this change while necessary to move forward on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-728&quot; title=&quot;Unable to create databases whose name containg Chinese characters through the client driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-728&quot;&gt;&lt;del&gt;DERBY-728&lt;/del&gt;&lt;/a&gt; will cause a regression when a new client tries to connect to an old server with a database name that can&apos;t be converted.  If connecting with a Chinese database name with a new client and an old server, the server console will show an exception:&lt;br/&gt;
Execution failed because of a Distributed Protocol Error:  DRDA_Proto_SYNTAXRM; CODPNT arg  = 2110; Error Code Value = e&lt;br/&gt;
. Plaintext connection attempt from an SSL enabled client?&lt;/p&gt;


&lt;p&gt;At the client we can save off the conversion exception that prevented us from sending the RDBNAM on ACCSEC and do one of two things.  &lt;br/&gt;
  1)  Report the SYNTAXRM on the client but chain the conversion exception, so it is clear the root cause of the problem.&lt;br/&gt;
  2) Gobble up the SYNTAXRM and just throw the conversion exception, so it looks like there was no SYNTXRM on the client and the client behavior matches the current behavior.&lt;/p&gt;

&lt;p&gt;I am a bit wary of throwing away the exception so I am planning to go with option 1 which would be less compatible but have a cleaner implementation and wouldn&apos;t cause the SYNTAXRM to mysteriously disappear between server and client.  I will backport &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4004&quot; title=&quot; Remove required RDBNAM from ACCSEC. Use SECCHK RDBNAM if none is provided on ACCSEC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4004&quot;&gt;&lt;del&gt;DERBY-4004&lt;/del&gt;&lt;/a&gt; so that folks using newer 10.3 and 10.4 servers won&apos;t be affected. I&apos;ll post a patch soon with my proposal. Please post if you have any concerns or other ideas.&lt;/p&gt;

</comment>
                            <comment id="12665944" author="kmarsden" created="Wed, 21 Jan 2009 20:01:48 +0000"  >&lt;p&gt;Attached is a patch for this issue.  It changes the client to not send the RDBNAM on ACCSEC if EBCDIC conversion is not possible. For a 10.5 client to 10.5 server there is no behavior change except that the exception for conversion exception comes a bit later (on SECCHK) instead of ACCSEC.  &lt;/p&gt;

&lt;p&gt;As discussed, for 10.5 client talking to older servers, this will cause a change in the exception when trying to connect with a non-convertible database name. Users will instead get a SYTAXRM with a chained conversion exception.  I will backport &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4004&quot; title=&quot; Remove required RDBNAM from ACCSEC. Use SECCHK RDBNAM if none is provided on ACCSEC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4004&quot;&gt;&lt;del&gt;DERBY-4004&lt;/del&gt;&lt;/a&gt; to mitigate this and also make a release note for this issue.&lt;/p&gt;

&lt;p&gt;Also added tests for connection attempts with Chinse database name, user and password with DriverManager, Simple DataSource, XADataSource, and ConnectionPoolDataSource.&lt;/p&gt;

&lt;p&gt;Running tests now.&lt;/p&gt;




</comment>
                            <comment id="12666010" author="kmarsden" created="Thu, 22 Jan 2009 00:02:33 +0000"  >&lt;p&gt;Regression tests passed.  Please review&lt;/p&gt;</comment>
                            <comment id="12666307" author="kmarsden" created="Thu, 22 Jan 2009 21:36:06 +0000"  >&lt;p&gt;I&apos;ll commit this patch Monday if there are no comments.&lt;/p&gt;</comment>
                            <comment id="12666315" author="kmarsden" created="Thu, 22 Jan 2009 22:03:25 +0000"  >&lt;p&gt;The database directories created in the tests were not getting removed properly. This patch corrects that.&lt;/p&gt;</comment>
                            <comment id="12666618" author="kmarsden" created="Fri, 23 Jan 2009 17:39:21 +0000"  >&lt;p&gt;Ataching a release note for this issue, which won&apos;t be entirely true until I backport derby-4004 to 10.4 and 10.3&lt;/p&gt;</comment>
                            <comment id="12683189" author="myrna" created="Wed, 18 Mar 2009 21:47:56 +0000"  >&lt;p&gt;10.5 rel mgr work - replacing &amp;lt;br&amp;gt; with &amp;lt;br/&amp;gt; so the releaseNotesGenerator can chew it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398426" name="derby-4008_diff.txt" size="21284" author="kmarsden" created="Wed, 21 Jan 2009 20:01:48 +0000"/>
                            <attachment id="12398512" name="derby-4008_diff_2.txt" size="22065" author="kmarsden" created="Thu, 22 Jan 2009 22:03:25 +0000"/>
                            <attachment id="12402517" name="releaseNote.html" size="4310" author="myrna" created="Wed, 18 Mar 2009 21:47:56 +0000"/>
                            <attachment id="12398591" name="releaseNote.html" size="4304" author="kmarsden" created="Fri, 23 Jan 2009 17:39:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Mar 2009 21:47:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0x7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>