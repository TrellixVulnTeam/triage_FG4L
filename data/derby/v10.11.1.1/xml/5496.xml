<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5496/DERBY-5496.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5496] The JUnit infrastructure package should be compiled against the small device classpath, not the JDK 1.4 classpath</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5496</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The org.apache.derbyTesting.junit package currently compiles against the JDK 1.4 classpath. Since these classes need to run on CDC/FP 1.1 platforms, they should be compiled against the small device classpath. That will make the compiler raise an error when the JUnit infrastructure references methods which are not present on small devices.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530587">DERBY-5496</key>
            <summary>The JUnit infrastructure package should be compiled against the small device classpath, not the JDK 1.4 classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                            <label>derby_backport_reject_10_8</label>
                    </labels>
                <created>Mon, 7 Nov 2011 15:53:30 +0000</created>
                <updated>Mon, 8 Jul 2013 21:27:30 +0100</updated>
                            <resolved>Tue, 8 Nov 2011 13:30:05 +0000</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Build tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13145790" author="rhillegas" created="Mon, 7 Nov 2011 20:52:28 +0000"  >&lt;p&gt;Attaching derby-5496-01-ab-identify14classes.diff. This patch attempts to reduce the uncertainty about which test classes really will run on small devices.&lt;/p&gt;

&lt;p&gt;The following classes still need to be built using the JDK 1.4 libraries. These classes may raise method invocation errors at run time if they are used on small devices:&lt;/p&gt;

&lt;p&gt;    JAXPFinder.java&lt;br/&gt;
    ConnectionPoolDataSourceConnector.java&lt;br/&gt;
    J2EEDataSource.java&lt;br/&gt;
    DriverManagerConnector.java&lt;br/&gt;
    XADataSourceConnector.java&lt;br/&gt;
    XATestUtil.java&lt;br/&gt;
    BigDecimalHandler.java&lt;/p&gt;

&lt;p&gt;It may make sense to move these classes into a separate package so that it is clear that they require JDK 1.4.&lt;/p&gt;

&lt;p&gt;I am not sure what to do with BigDecimalHandler. From header comments in that class, it seems that people expect to use that class on small devices. But it calls ResultSet.getBigDecimal(), which is not a JSR 169 method. Maybe BigDecimalHandler should be re-coded to use reflection.&lt;/p&gt;

&lt;p&gt;The org.apache.derbyTesting.junit package is built in two phases now:&lt;/p&gt;

&lt;p&gt;1) First we build all of the classes which WILL compile against JSR 169 and CDC/FP 1.1.&lt;/p&gt;

&lt;p&gt;2) Then we build the classes listed above, which require JDK 1.4 or later.&lt;/p&gt;


&lt;p&gt;Touches the following files:&lt;/p&gt;


&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       build.xml&lt;/p&gt;

&lt;p&gt;Added a diagnostic message to describe the setting of compile.classpath.&lt;/p&gt;

&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/junit/build.xml&lt;/p&gt;

&lt;p&gt;Re-arranged the build of org.apache.derbyTesting.junit as described above.&lt;/p&gt;

&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/junit/JDBC.java&lt;/p&gt;

&lt;p&gt;Removed call to String.matches() which is not in CDC/FP 1.1. Recoded assertParameterTypes() to use reflection and to raise an error if you invoke it on a small device.&lt;/p&gt;


&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/junit/XML.java&lt;/p&gt;

&lt;p&gt;Used reflection to access JAXPFinder.&lt;/p&gt;


&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/junit/JAXPFinder.java&lt;br/&gt;
M       java/testing/org/apache/derbyTesting/junit/J2EEDataSource.java&lt;br/&gt;
M       java/testing/org/apache/derbyTesting/junit/XATestUtil.java&lt;/p&gt;

&lt;p&gt;Corrected the names of these classes in their Apache license headers.&lt;/p&gt;


&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/junit/RuntimeStatisticsParser.java&lt;/p&gt;

&lt;p&gt;Removed the calls to String.split(), which doesn&apos;t appear in CDC/FP 1.1.&lt;/p&gt;

&lt;p&gt;----------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/functionTests/tests/lang/UnaryArithmeticParameterTest.java&lt;/p&gt;

&lt;p&gt;Accounted for the additional Exceptions which JDBC.assertParameterTypes() can raise now.&lt;/p&gt;</comment>
                            <comment id="13145889" author="rhillegas" created="Mon, 7 Nov 2011 22:29:10 +0000"  >&lt;p&gt;Tests passed for me after building with this patch, except for the problems in the upgrade tests.&lt;/p&gt;</comment>
                            <comment id="13146293" author="rhillegas" created="Tue, 8 Nov 2011 13:25:24 +0000"  >&lt;p&gt;Committed derby-5496-01-ab-identify14classes.diff at subversion revision 1199234.&lt;/p&gt;</comment>
                            <comment id="13146302" author="rhillegas" created="Tue, 8 Nov 2011 13:30:05 +0000"  >&lt;p&gt;I think that more work could be done on clarifying which JUnit infrastructure classes are allowed to run on small platforms and which aren&apos;t. However, the problem identified by this JIRA has been addressed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12502802" name="derby-5496-01-ab-identify14classes.diff" size="17364" author="rhillegas" created="Mon, 7 Nov 2011 20:52:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0elr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>