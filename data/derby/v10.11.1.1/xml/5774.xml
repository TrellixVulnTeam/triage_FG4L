<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5774/DERBY-5774.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5774] Failures in UpdateStatisticsTest (order-dependent test cases)</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5774</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I see two failures in UpdateStatisticsTest. But only in some configurations. It looks like it&apos;s dependent on the order in which the test cases run, which may vary on JDK 7.&lt;/p&gt;

&lt;p&gt;Output which shows both the ordering of the test cases and the stack traces:&lt;/p&gt;

&lt;p&gt;(emb)lang.UpdateStatisticsTest.testIndexAndColumnNamedStatistics used 472 ms .&lt;br/&gt;
(emb)lang.UpdateStatisticsTest.testNoExclusiveLockOnTable used 81 ms .&lt;br/&gt;
(emb)lang.UpdateStatisticsTest.testParallelCompilationAndUpdate used 897 ms .&lt;br/&gt;
(emb)lang.UpdateStatisticsTest.testDisposableStatsEagerness used 1801 ms .&lt;br/&gt;
(emb)lang.UpdateStatisticsTest.testUpdateAndDropStatistics used 213 ms F.&lt;br/&gt;
(emb)lang.UpdateStatisticsTest.testDERBY5681 used 284 ms .&lt;br/&gt;
(net)lang.UpdateStatisticsTest.testIndexAndColumnNamedStatistics used 683 ms .&lt;br/&gt;
(net)lang.UpdateStatisticsTest.testNoExclusiveLockOnTable used 56 ms .&lt;br/&gt;
(net)lang.UpdateStatisticsTest.testParallelCompilationAndUpdate used 6173 ms .&lt;br/&gt;
(net)lang.UpdateStatisticsTest.testDisposableStatsEagerness used 1874 ms .&lt;br/&gt;
(net)lang.UpdateStatisticsTest.testUpdateAndDropStatistics used 381 ms F.&lt;br/&gt;
(net)lang.UpdateStatisticsTest.testDERBY5681 used 340 ms &lt;br/&gt;
Time: 21.12&lt;br/&gt;
There were 2 failures:&lt;br/&gt;
1) testUpdateAndDropStatistics(org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest)junit.framework.AssertionFailedError: Index statistics for &amp;lt;ALL TABLES&amp;gt;&lt;br/&gt;
1: &lt;/p&gt;
{tableId=22480241-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS_FK, indexName=SQL120521151402080, lcols=1, rows=1000, unique/card=1000, created=2012-05-21 15:14:02.358}
&lt;p&gt;2: &lt;/p&gt;
{tableId=85ad4247-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=SQL120521151402160, lcols=1, rows=1000, unique/card=1000, created=2012-05-21 15:14:02.342}
&lt;p&gt;3: &lt;/p&gt;
{tableId=85ad4247-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=SQL120521151402160, lcols=2, rows=1000, unique/card=1000, created=2012-05-21 15:14:02.342}
&lt;p&gt;4: &lt;/p&gt;
{tableId=85ad4247-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=NU_DISPOSABLE_STATS_EAGERNESS, lcols=1, rows=1000, unique/card=35, created=2012-05-21 15:14:02.382}
&lt;p&gt;5: &lt;/p&gt;
{tableId=85ad4247-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=SQL120521151402180, lcols=1, rows=1000, unique/card=1000, created=2012-05-21 15:14:02.351}
&lt;p&gt; expected:&amp;lt;0&amp;gt; but was:&amp;lt;5&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.junit.IndexStatsUtil.assertStats(IndexStatsUtil.java:132)&lt;br/&gt;
	at org.apache.derbyTesting.junit.IndexStatsUtil.assertNoStats(IndexStatsUtil.java:109)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest.testUpdateAndDropStatistics(UpdateStatisticsTest.java:153)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:423)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:440)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
2) testUpdateAndDropStatistics(org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest)junit.framework.AssertionFailedError: Index statistics for &amp;lt;ALL TABLES&amp;gt;&lt;br/&gt;
1: &lt;/p&gt;
{tableId=165f0eb9-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=SQL120521151412330, lcols=1, rows=1000, unique/card=1000, created=2012-05-21 15:14:12.445}
&lt;p&gt;2: &lt;/p&gt;
{tableId=165f0eb9-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=NU_DISPOSABLE_STATS_EAGERNESS, lcols=1, rows=1000, unique/card=35, created=2012-05-21 15:14:12.489}
&lt;p&gt;3: &lt;/p&gt;
{tableId=165f0eb9-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=SQL120521151412310, lcols=1, rows=1000, unique/card=1000, created=2012-05-21 15:14:12.442}
&lt;p&gt;4: &lt;/p&gt;
{tableId=165f0eb9-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS, indexName=SQL120521151412310, lcols=2, rows=1000, unique/card=1000, created=2012-05-21 15:14:12.442}
&lt;p&gt;5: &lt;/p&gt;
{tableId=a04eceb3-0137-6f88-5424-00000ee887c6, tableName=DISPOSABLE_STATS_EAGERNESS_FK, indexName=SQL120521151412290, lcols=1, rows=1000, unique/card=1000, created=2012-05-21 15:14:12.452}
&lt;p&gt; expected:&amp;lt;0&amp;gt; but was:&amp;lt;5&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.junit.IndexStatsUtil.assertStats(IndexStatsUtil.java:132)&lt;br/&gt;
	at org.apache.derbyTesting.junit.IndexStatsUtil.assertNoStats(IndexStatsUtil.java:109)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest.testUpdateAndDropStatistics(UpdateStatisticsTest.java:153)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:423)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:440)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 12,  Failures: 2,  Errors: 0&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556684">DERBY-5774</key>
            <summary>Failures in UpdateStatisticsTest (order-dependent test cases)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 May 2012 14:14:58 +0100</created>
                <updated>Sun, 30 Jun 2013 03:29:26 +0100</updated>
                                            <version>10.8.3.3</version>
                    <version>10.9.1.0</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13280138" author="kristwaa" created="Mon, 21 May 2012 14:25:14 +0100"  >&lt;p&gt;Patch 1a makes the asserts more focused (i.e. check for the table we&apos;re modifying), and it adds cleanup code to the test that interferes with the other test(s).&lt;/p&gt;

&lt;p&gt;I don&apos;t see the error on my system, so it would be nice if the patch can be tested on a system where the tests fail.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="13280141" author="knutanders" created="Mon, 21 May 2012 14:37:17 +0100"  >&lt;p&gt;Thanks, Kristian! The test passed in my environment with the patch, but the order of the test cases had changed again, so my test runs didn&apos;t really tell if the problem had been fixed. But it also passed when I modified the suite() method to force the same ordering as in the problematic run, so I think it&apos;s OK now. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="13280144" author="kristwaa" created="Mon, 21 May 2012 14:44:24 +0100"  >&lt;p&gt;Thanks for testing patch 1a, Knut Anders.&lt;br/&gt;
I committed it to trunk with revision 1341019.&lt;/p&gt;

&lt;p&gt;Resolving issue.&lt;/p&gt;</comment>
                            <comment id="13696242" author="jira-bot" created="Sun, 30 Jun 2013 03:24:58 +0100"  >&lt;p&gt;Commit 1498052 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mamtas&quot; class=&quot;user-hover&quot; rel=&quot;mamtas&quot;&gt;Mamta A. Satoor&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1498052&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1498052&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5774&quot; title=&quot;Failures in UpdateStatisticsTest (order-dependent test cases)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5774&quot;&gt;DERBY-5774&lt;/a&gt;: Failures in UpdateStatisticsTest (order-dependent test cases)&lt;/p&gt;

&lt;p&gt;The test has changed quite a bit between 10.8 and trunk and hence svn merge ran into conflict so I hand backported the changes to 10.8. Also, did some minor cleanup by dropping the tables at the end of the test fixtures.&lt;/p&gt;</comment>
                            <comment id="13696244" author="mamtas" created="Sun, 30 Jun 2013 03:28:04 +0100"  >&lt;p&gt;The test ran into same failures in 10.8 after it got backported there. So I am backporting(with revision 1498052) the changes for this jira to fix the test failures in10.8.3.1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12528422" name="derby-5774-1a-focused_asserts.diff" size="4161" author="kristwaa" created="Mon, 21 May 2012 14:25:14 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 May 2012 13:25:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0arr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>