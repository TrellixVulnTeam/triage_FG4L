<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:20:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3797/DERBY-3797.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3797] Convert jdbcapi/metadataMultiConn to JUnit.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3797</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12400962">DERBY-3797</key>
            <summary>Convert jdbcapi/metadataMultiConn to JUnit.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ebirkenes">Erlend Birkenes</assignee>
                                    <reporter username="ebirkenes">Erlend Birkenes</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jul 2008 00:02:12 +0100</created>
                <updated>Wed, 1 Jul 2009 00:40:21 +0100</updated>
                            <resolved>Wed, 13 Aug 2008 15:00:00 +0100</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12616965" author="ebirkenes" created="Fri, 25 Jul 2008 18:45:39 +0100"  >
&lt;p&gt;This is a pretty bad test if I understand it correctly. &lt;/p&gt;

&lt;p&gt;Take the method getTypeInfo for example. All this does is test that the result set has at least 15 columns. (It has 18..) &lt;/p&gt;

&lt;p&gt;What exactly is it this is supposed to test? &lt;/p&gt;</comment>
                            <comment id="12616968" author="ebirkenes" created="Fri, 25 Jul 2008 18:49:06 +0100"  >&lt;p&gt;If I do this:&lt;/p&gt;

&lt;p&gt;            int[] expectedTypes = &lt;/p&gt;
{Types.VARCHAR,
                                   Types.INTEGER,
                                   Types.INTEGER,
                                   Types.VARCHAR,
                                   Types.VARCHAR,
                                   Types.VARCHAR,
                                   Types.SMALLINT,
                                   Types.BOOLEAN,
                                   Types.SMALLINT,
                                   Types.BOOLEAN,
                                   Types.BOOLEAN,
                                   Types.BOOLEAN,
                                   Types.VARCHAR,
                                   Types.SMALLINT,
                                   Types.SMALLINT,
                                   Types.INTEGER,
                                   Types.INTEGER,
                                   Types.INTEGER}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;            JDBC.assertColumnTypes(rs, expectedTypes);&lt;/p&gt;

&lt;p&gt;is that what the last test was trying to do?&lt;/p&gt;</comment>
                            <comment id="12616979" author="kmarsden" created="Fri, 25 Jul 2008 19:01:38 +0100"  >&lt;p&gt;The test was originally added in a bug fix that metadata calls were taking too long a time when executed with mutiple connections.  This was the checkin comment:&lt;/p&gt;


&lt;p&gt;    if we do need to create SPS during metadata calls (eg., in SPS dynamic&lt;br/&gt;
    mode), we&apos;d better do it in nested transaction, to be consistent with&lt;br/&gt;
    our SPS recompile, although this has the disadvantage of the possibility&lt;br/&gt;
    of blocking in child transaction with parent, especially in &quot;serializable&quot;&apos;&lt;/p&gt;

&lt;p&gt;So I think the general intention of the test was to test metadata calls when executed with multiple connections, and perhaps the author was not thorough in checking the actual results.  Anything you add to improve that would be welcome.&lt;/p&gt;
</comment>
                            <comment id="12621386" author="ebirkenes" created="Mon, 11 Aug 2008 10:17:13 +0100"  >&lt;p&gt;Please review and commit if everything is ok.&lt;/p&gt;

&lt;p&gt;I hope I have understood the old test correctly and that this really does the same thing. &lt;br/&gt;
I ended up with just using assertDrainResults since the point was just to read the metadata from several different connections as I understand it.&lt;br/&gt;
So I just use assertDrainResults to read through the data and close the resultset and thets pretty much what the old test did too.&lt;/p&gt;

&lt;p&gt;I&apos;ve added it to jdbcapi/_Suite and removed the old test.&lt;/p&gt;

&lt;p&gt;I&apos;ve run the _Suite, but not All &lt;/p&gt;


&lt;p&gt;-Erlend&lt;/p&gt;</comment>
                            <comment id="12622217" author="myrna" created="Wed, 13 Aug 2008 15:00:00 +0100"  >&lt;p&gt;The new test looks ok to me. I committed patch Derby-3797_2.diff with revision 685553.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387936" name="Derby-3797_2.diff" size="22505" author="ebirkenes" created="Mon, 11 Aug 2008 10:17:13 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Jul 2008 18:01:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0u33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>