<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6167/DERBY-6167.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6167] Interrupt restarts clock for login timeout</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6167</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If a login takes time, and the thread that&apos;s blocked in Driver20.timeLogin() is interrupted, it will call Future.get() again with the same timeout value. This means that interrupting a getConnection() call will not make it terminate faster, as one might expect. Instead, it restarts the timeout clock and makes it terminate later than if it had not been interrupted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12642023">DERBY-6167</key>
            <summary>Interrupt restarts clock for login timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                            <label>derby_backport_reject_10_9</label>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Thu, 11 Apr 2013 13:12:42 +0100</created>
                <updated>Wed, 21 Jan 2015 00:23:24 +0000</updated>
                            <resolved>Tue, 9 Jul 2013 11:51:23 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13700026" author="knutanders" created="Thu, 4 Jul 2013 13:02:12 +0100"  >&lt;p&gt;Attaching a repro for the bug. The repro connects twice to a database with login timeout set to 10 seconds. An authenticator that blocks forever is installed, so that both attempts will have to give up and time out. The second connection attempt is interrupted after 8 seconds, and that makes it take 18 seconds to time out, rather than the expected 10 seconds.&lt;/p&gt;

&lt;p&gt;Output from a test run:&lt;/p&gt;

&lt;p&gt;failed to get connection: java.sql.SQLTimeoutException: Login timeout exceeded.&lt;br/&gt;
getConnection took 10257 ms&lt;br/&gt;
failed to get connection: java.sql.SQLTimeoutException: Login timeout exceeded.&lt;br/&gt;
getConnection took 18001 ms&lt;/p&gt;</comment>
                            <comment id="13700537" author="knutanders" created="Fri, 5 Jul 2013 09:46:26 +0100"  >&lt;p&gt;The attached patch makes the timeout argument passed to Future.get() the time remaining instead of the total timeout, so that it doesn&apos;t wait too long if it wakes up because of an interrupt.&lt;/p&gt;

&lt;p&gt;The repro now behaves more as one would expect:&lt;/p&gt;

&lt;p&gt;failed to get connection: java.sql.SQLTimeoutException: Login timeout exceeded.&lt;br/&gt;
getConnection took 10235 ms&lt;br/&gt;
failed to get connection: java.sql.SQLTimeoutException: Login timeout exceeded.&lt;br/&gt;
getConnection took 10002 ms&lt;/p&gt;

&lt;p&gt;All the existing regression tests ran cleanly with the patch.&lt;/p&gt;


&lt;p&gt;I&apos;m not planning to add a regression test case for this bug, for the following reasons:&lt;/p&gt;

&lt;p&gt;a) It&apos;s a corner case bug with small consequences (only timing, no errors or wrong results).&lt;/p&gt;

&lt;p&gt;b) Writing a test case that&apos;s able to reliably distinguish between the bug and the test machine being slow, requires the use of a relatively high login timeout. Adding, say, half a minute to every run of the regression test suite to verify the fix of such a minor issue seems too much to be justified.&lt;/p&gt;

&lt;p&gt;c) The test case will have to interrupt the thread that is waiting for a connection. Each time we add a test case that interrupts a thread, we have to spend much time stabilizing the test suite afterwards because of strange failures that start popping up on some platform/JVM combinations. I don&apos;t think a test case for this issue is worth that effort.&lt;/p&gt;</comment>
                            <comment id="13701808" author="jira-bot" created="Mon, 8 Jul 2013 07:16:19 +0100"  >&lt;p&gt;Commit 1500585 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1500585&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1500585&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6167&quot; title=&quot;Interrupt restarts clock for login timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6167&quot;&gt;&lt;del&gt;DERBY-6167&lt;/del&gt;&lt;/a&gt;: Interrupt restarts clock for login timeout&lt;/p&gt;</comment>
                            <comment id="13703160" author="jira-bot" created="Tue, 9 Jul 2013 11:50:25 +0100"  >&lt;p&gt;Commit 1501196 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1501196&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1501196&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6167&quot; title=&quot;Interrupt restarts clock for login timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6167&quot;&gt;&lt;del&gt;DERBY-6167&lt;/del&gt;&lt;/a&gt;: Interrupt restarts clock for login timeout&lt;/p&gt;

&lt;p&gt;Backported revision 1500585 from trunk.&lt;/p&gt;</comment>
                            <comment id="14284794" author="myrna" created="Wed, 21 Jan 2015 00:23:24 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12634415">DERBY-6094</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12590875" name="InterruptDuringConnect.java" size="1870" author="knutanders" created="Thu, 4 Jul 2013 13:02:12 +0100"/>
                            <attachment id="12590970" name="derby-6167-1a.diff" size="1849" author="knutanders" created="Fri, 5 Jul 2013 09:46:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Jul 2013 06:16:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322437</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzdhdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>