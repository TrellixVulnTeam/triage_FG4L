<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2551/DERBY-2551.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2551] Global Xid value garbled in syscs_diag.transaction_table.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2551</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The value of global xid is dumped without leading zeros on GlobalTransactionId and BranchQualifier byte arrays. Thus, it is impossible to reconstruct the xid value from the transaction_table.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12367259">DERBY-2551</key>
            <summary>Global Xid value garbled in syscs_diag.transaction_table.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="julo">Julius Stroffek</assignee>
                                    <reporter username="julo">Julius Stroffek</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Apr 2007 10:05:17 +0100</created>
                <updated>Thu, 17 May 2007 12:35:19 +0100</updated>
                            <resolved>Wed, 16 May 2007 23:56:53 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.2.2.1</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12489053" author="julo" created="Mon, 16 Apr 2007 10:28:29 +0100"  >&lt;p&gt;This simple patch dumps the leading zeros in a hex number in case when the corresponding byte of GlobalTRansactionId and BranchQualifier is less then 0x10.&lt;/p&gt;

&lt;p&gt;I ran derbyall and suites.All without failures.&lt;/p&gt;

&lt;p&gt;Please, review the patch and if you find it to be ok, please apply it to trunk and 10.2 branch also. I will provide an additional patch with a junit test for trunk only.&lt;/p&gt;</comment>
                            <comment id="12490859" author="knutanders" created="Mon, 23 Apr 2007 10:03:27 +0100"  >&lt;p&gt;The patch looks good to me. I&apos;ll run the tests and commit it.&lt;/p&gt;</comment>
                            <comment id="12490931" author="knutanders" created="Mon, 23 Apr 2007 15:08:28 +0100"  >&lt;p&gt;Committed d2551.diff to trunk with revision 531468 and to 10.2 with revision 531470.&lt;/p&gt;</comment>
                            <comment id="12490947" author="julo" created="Mon, 23 Apr 2007 15:42:25 +0100"  >&lt;p&gt;Great! Thanks Knut!&lt;/p&gt;</comment>
                            <comment id="12493950" author="mikem" created="Sun, 6 May 2007 22:34:25 +0100"  >&lt;p&gt;can this issue be resolved, looks like patch went in.&lt;/p&gt;</comment>
                            <comment id="12494990" author="julo" created="Fri, 11 May 2007 09:07:04 +0100"  >&lt;p&gt;I would like to provide also a test for the fix for trunk only. I&apos;ll do that in following days.&lt;/p&gt;</comment>
                            <comment id="12495164" author="julo" created="Fri, 11 May 2007 22:03:28 +0100"  >&lt;p&gt;The patch contains the junit test for the trunk.&lt;/p&gt;

&lt;p&gt;I ran derbyall and suites.All without failures.&lt;/p&gt;</comment>
                            <comment id="12495361" author="knutanders" created="Sun, 13 May 2007 14:31:28 +0100"  >&lt;p&gt;Hi Julo,&lt;/p&gt;

&lt;p&gt;The test looks good, but I have a couple of small comments:&lt;/p&gt;

&lt;p&gt;1) The new file (XATransactionTest.java) is tab free with the exception of two lines. It would be great if you could remove the tabs from them as well.&lt;br/&gt;
2) The test runs in both embedded and client/server mode, but it always uses ClientXid. Is that OK?&lt;br/&gt;
3) If parseXid() used assertNotNull(str) and assertTrue(str.matches(...)) instead of returning null, it would be easier to see the problem if the test fails.&lt;br/&gt;
4) Assert.assertTrue(xid.equals(rXid)) could be replaced with Assert.assertEquals(xid, rXid), which provides more information if the test fails.&lt;br/&gt;
5) rs, stm and conn aren&apos;t closed.&lt;br/&gt;
6) Using finally clauses to do clean-up might hide the actual error. If you remove try/finally, it will still do the clean-up when the test runs successfully (which it is supposed to do). If you think it&apos;s really needed to have the clean-up in a finally block, I would recommend moving it to the tearDown() method.&lt;/p&gt;</comment>
                            <comment id="12495517" author="julo" created="Mon, 14 May 2007 09:45:00 +0100"  >&lt;p&gt;Thanks, Knut!&lt;/p&gt;

&lt;p&gt;1, 3, 4, 6)&lt;br/&gt;
Thanks, I&apos;ll fix theese.&lt;/p&gt;

&lt;p&gt;2.) Using the ClientXid is ok since it only stores the transaction identification and does not contain any client driver related code. There is no Xid interface implementation for the embedded driver.&lt;/p&gt;

&lt;p&gt;5.) Shouldn&apos;t this happen when they got garbage collected? I have consulted the javadoc for Statement.close and Connection.close methods and prior to version 1.6 they should be closed when they get garbage collected. In version 1.6 this sentence disappeared. Shouldn&apos;t we write the tests more sloppy that also a garbage collection would be tested?&lt;/p&gt;</comment>
                            <comment id="12496081" author="knutanders" created="Tue, 15 May 2007 19:39:39 +0100"  >&lt;p&gt;&amp;gt; Using the ClientXid is ok since it only stores the transaction identification and does not contain any client driver related code.&lt;/p&gt;

&lt;p&gt;Sounds OK. Perhaps you could add a comment about that in the test.&lt;/p&gt;

&lt;p&gt;&amp;gt; Shouldn&apos;t we write the tests more sloppy that also a garbage collection would be tested?&lt;/p&gt;

&lt;p&gt;Definitely not! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; We have already tried that, and it only made the JUnit tests fail intermittently and randomly. The most common problem is that tearDown() is not allowed to drop a table because some open object depends on the table and hasn&apos;t been garbage collected yet. I think there are some tests for memory leaks which implicitly test that garbage collection work.&lt;/p&gt;</comment>
                            <comment id="12496422" author="julo" created="Wed, 16 May 2007 23:16:58 +0100"  >&lt;p&gt;I changed finally to catch with throwing the same exception further even if another one occurs (the new one would be ignored since it is not the one that failed the test). Is it ok to do it that way?I need to call at least rollback on that transaction because the CleanDatabaseSetup will not be able to clean the database because the transaction will keep holding locks.&lt;/p&gt;</comment>
                            <comment id="12496430" author="knutanders" created="Wed, 16 May 2007 23:56:53 +0100"  >&lt;p&gt;Thanks Julo! The latest patch looks good. Committed revision 538770.&lt;/p&gt;</comment>
                            <comment id="12496488" author="knutanders" created="Thu, 17 May 2007 07:46:45 +0100"  >&lt;p&gt;I forgot one thing in the review. I think the test needs to be disabled under J2ME since it uses XADataSource. The attached patch moves the test into the JDBC 3 section of jdbcapi._Suite and also makes the test itself check the JDBC version in its suite().&lt;br/&gt;
Committed revision 538818.&lt;/p&gt;</comment>
                            <comment id="12496539" author="julo" created="Thu, 17 May 2007 12:34:58 +0100"  >&lt;p&gt;Thanks, Knut. I did not know that something like your j2me patch is necessary.&lt;/p&gt;

&lt;p&gt;Thaks again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12357500" name="d2551-round2-try2.diff" size="9269" author="julo" created="Wed, 16 May 2007 23:16:57 +0100"/>
                            <attachment id="12357501" name="d2551-round2-try2.stat" size="416" author="julo" created="Wed, 16 May 2007 23:16:58 +0100"/>
                            <attachment id="12357136" name="d2551-round2.diff" size="8367" author="julo" created="Fri, 11 May 2007 22:03:28 +0100"/>
                            <attachment id="12357137" name="d2551-round2.stat" size="490" author="julo" created="Fri, 11 May 2007 22:03:28 +0100"/>
                            <attachment id="12355595" name="d2551.diff" size="1133" author="julo" created="Mon, 16 Apr 2007 10:28:29 +0100"/>
                            <attachment id="12357515" name="j2me.diff" size="2304" author="knutanders" created="Thu, 17 May 2007 07:46:45 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Apr 2007 09:03:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy125r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40000</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>