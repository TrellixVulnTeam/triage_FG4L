<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:36:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2983/DERBY-2983.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2983] The ResultSet returned by DatabaseMetaData.getFunctions() does not contain a required column named FUNCTION_TYPE.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2983</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The FUNCTION_TYPE column, sandwiched between REMARKS and SPECIFIC_NAME, is supposed to describe the return type of the function.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12375066">DERBY-2983</key>
            <summary>The ResultSet returned by DatabaseMetaData.getFunctions() does not contain a required column named FUNCTION_TYPE.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jul 2007 20:53:42 +0100</created>
                <updated>Tue, 13 Jul 2010 20:22:24 +0100</updated>
                            <resolved>Fri, 21 Mar 2008 16:53:19 +0000</resolved>
                                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                    <version>10.3.1.4</version>
                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12516793" author="kmarsden" created="Tue, 31 Jul 2007 21:04:08 +0100"  >&lt;p&gt;I believe this is a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2745&quot; title=&quot;DatabaseMetaData.getFunctions() is missing the FUNCTION_TYPE column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2745&quot;&gt;&lt;del&gt;DERBY-2745&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12516794" author="rhillegas" created="Tue, 31 Jul 2007 21:14:17 +0100"  >&lt;p&gt;Kathey points out that this bug report duplicates &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2745&quot; title=&quot;DatabaseMetaData.getFunctions() is missing the FUNCTION_TYPE column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2745&quot;&gt;&lt;del&gt;DERBY-2745&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12517570" author="rhillegas" created="Fri, 3 Aug 2007 17:24:58 +0100"  >&lt;p&gt;I believe that this issue needs a release note because we are inserting a new column in the middle of the old signature. I don&apos;t believe that this issue requires any upgrade logic. This is because the solution should not require adding any new system columns or procedures. See &lt;a href=&quot;http://wiki.apache.org/db-derby/MetadataUpgrade&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/MetadataUpgrade&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12517578" author="rhillegas" created="Fri, 3 Aug 2007 17:52:35 +0100"  >&lt;p&gt;Attaching a release note for this issue.&lt;/p&gt;</comment>
                            <comment id="12517579" author="djd" created="Fri, 3 Aug 2007 17:52:51 +0100"  >&lt;p&gt;I don&apos;t think this strictly needs a release note. This method is only documented by the JDBC javadoc, not by Derby&apos;s documentation.&lt;br/&gt;
If the application was fetching columns by name then the application sees no change.&lt;br/&gt;
If the application was fetching the SPECIFIC_NAME column by number then they would have realized that there was a bug in Derby and reported it. Also since SPECIFIC_NAME is not supported in Derby means an application was unlikely to be using it.&lt;/p&gt;</comment>
                            <comment id="12517587" author="rhillegas" created="Fri, 3 Aug 2007 18:12:50 +0100"  >&lt;p&gt;Just to be safe, I have attached a release note. This fix will affect users who are retrieving the result columns by position or who are handing the result set off to a generic data set reader and then relying on the current shape of the results.&lt;/p&gt;</comment>
                            <comment id="12517618" author="rhillegas" created="Fri, 3 Aug 2007 20:53:56 +0100"  >&lt;p&gt;Attaching derby-2983-01-newColumn.diff. This adds the FUNCTION_TYPE column to the ResultSet returned by DatabaseMetaData.getFunctions(). Touches the following files:&lt;/p&gt;


&lt;p&gt;M      java/engine/org/apache/derby/catalog/AliasInfo.java&lt;br/&gt;
M      java/engine/org/apache/derby/catalog/types/SynonymAliasInfo.java&lt;br/&gt;
M      java/engine/org/apache/derby/catalog/types/MethodAliasInfo.java&lt;br/&gt;
M      java/engine/org/apache/derby/catalog/types/RoutineAliasInfo.java&lt;/p&gt;

&lt;p&gt;Exposes a new method on AliasInfo. The method reports whether the Alias describes a TableFunction.&lt;/p&gt;


&lt;p&gt;M      java/engine/org/apache/derby/impl/jdbc/metadata.properties&lt;/p&gt;

&lt;p&gt;Adds the new column to the query which materializes the ResultSet for DatabaseMetaData.getFunctions(). The query invokes the new method on AliasInfo and uses a CASE expression in order to determine what value to assign to the FUNCTION_TYPE column.&lt;/p&gt;


&lt;p&gt;M      java/shared/org/apache/derby/shared/common/reference/JDBC40Translation.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/JDBC40TranslationTest.java&lt;/p&gt;

&lt;p&gt;Add the JDBC4 constants which are legal values for the new column.&lt;/p&gt;


&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/TestDbMetaData.java&lt;/p&gt;

&lt;p&gt;Update this unit test to account for the new column. Also verify that the columns returned by DatabaseMetaData.getFunctions() have the correct types.&lt;/p&gt;
</comment>
                            <comment id="12517969" author="rhillegas" created="Mon, 6 Aug 2007 16:43:50 +0100"  >&lt;p&gt;Committed derby-2983-01-newColumn.diff at subversion revision 563172. The regression tests ran cleanly for me on jdk1.4. The tests also ran cleanly under Java 6 except for the following two problems in ProcedureInTriggerTest. I reran that test by itself a couple times and could not reproduce the error.&lt;/p&gt;

&lt;p&gt;1) testTriggerNegative(org.apache.derbyTesting.functionTests.tests.lang.ProcedureInTriggerTest)java.sql.SQLException: Operation &apos;CREATE TRIGGER&apos; cannot be performed on object &apos;T1&apos; because there is an open ResultSet dependent on that object.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:202)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:1572)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1293)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:596)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:528)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.ProcedureInTriggerTest.testTriggerNegative(ProcedureInTriggerTest.java:394)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
Caused by: java.sql.SQLException: Operation &apos;CREATE TRIGGER&apos; cannot be performed on object &apos;T1&apos; because there is an open ResultSet dependent on that object.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:135)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)&lt;br/&gt;
	... 38 more&lt;br/&gt;
Caused by: ERROR X0X95: Operation &apos;CREATE TRIGGER&apos; cannot be performed on object &apos;T1&apos; because there is an open ResultSet dependent on that object.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:301)&lt;br/&gt;
	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.verifyNoOpenResultSets(GenericLanguageConnectionContext.java:1749)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.prepareToInvalidate(GenericPreparedStatement.java:694)&lt;br/&gt;
	at org.apache.derby.impl.sql.depend.BasicDependencyManager.coreInvalidateFor(BasicDependencyManager.java:382)&lt;br/&gt;
	at org.apache.derby.impl.sql.depend.BasicDependencyManager.invalidateFor(BasicDependencyManager.java:241)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.CreateTriggerConstantAction.executeConstantAction(CreateTriggerConstantAction.java:275)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.MiscResultSet.open(MiscResultSet.java:64)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:370)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1203)&lt;br/&gt;
	... 32 more&lt;br/&gt;
2) testTriggerNegative(org.apache.derbyTesting.functionTests.tests.lang.ProcedureInTriggerTest)java.sql.SQLException: Operation &apos;CREATE TRIGGER&apos; cannot be performed on object &apos;T1&apos; because there is an open ResultSet dependent on that object.&lt;br/&gt;
	at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:362)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.execute(Statement.java:819)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.ProcedureInTriggerTest.testTriggerNegative(ProcedureInTriggerTest.java:394)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
Caused by: org.apache.derby.client.am.SqlException: Operation &apos;CREATE TRIGGER&apos; cannot be performed on object &apos;T1&apos; because there is an open ResultSet dependent on that object.&lt;br/&gt;
	at org.apache.derby.client.am.Statement.completeSqlca(Statement.java:1708)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.completeExecuteImmediate(Statement.java:1317)&lt;br/&gt;
	at org.apache.derby.client.net.NetStatementReply.parseEXCSQLIMMreply(NetStatementReply.java:207)&lt;br/&gt;
	at org.apache.derby.client.net.NetStatementReply.readExecuteImmediate(NetStatementReply.java:58)&lt;br/&gt;
	at org.apache.derby.client.net.StatementReply.readExecuteImmediate(StatementReply.java:45)&lt;br/&gt;
	at org.apache.derby.client.net.NetStatement.readExecuteImmediate_(NetStatement.java:125)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.readExecuteImmediate(Statement.java:1313)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.flowExecute(Statement.java:2009)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.executeX(Statement.java:824)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.execute(Statement.java:810)&lt;br/&gt;
	... 39 more&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 9151,  Failures: 0,  Errors: 2&lt;/p&gt;</comment>
                            <comment id="12559467" author="dyret" created="Wed, 16 Jan 2008 12:17:22 +0000"  >&lt;p&gt;Should this be resloved/closed?&lt;/p&gt;</comment>
                            <comment id="12581120" author="kmarsden" created="Fri, 21 Mar 2008 16:53:19 +0000"  >&lt;p&gt;This looks fixed in 10.4. Per Dan&apos;s comments a release note is probably not needed, since it is unlikely a user would be dependent on the wrong behavior.&lt;/p&gt;

&lt;p&gt;If I am mistaken please reopen, remark Release Note Needed flag.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12370718">DERBY-2745</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12363146" name="derby-2983-01-newColumn.diff" size="10568" author="rhillegas" created="Fri, 3 Aug 2007 20:53:55 +0100"/>
                            <attachment id="12363141" name="releaseNote.html" size="4430" author="rhillegas" created="Fri, 3 Aug 2007 17:52:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Jul 2007 20:04:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23359</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0pfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>