<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:19:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4613/DERBY-4613.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4613] Make client driver treat BOOLEAN columns the same way as the embedded driver does.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4613</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The only operation currently allowed on BOOLEAN columns is to select them from the system tables. For instance, the following query selects BOOLEAN values:&lt;/p&gt;

&lt;p&gt;    select systemalias from sys.sysaliases;&lt;/p&gt;

&lt;p&gt;There are discrepancies in how the embedded and client drivers handle these BOOLEAN columns. The embedded behavior is correct and the client behavior should conform. I will attach a spec describing what needs to be done.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461883">DERBY-4613</key>
            <summary>Make client driver treat BOOLEAN columns the same way as the embedded driver does.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Apr 2010 19:14:28 +0100</created>
                <updated>Mon, 29 Nov 2010 14:22:05 +0000</updated>
                            <resolved>Wed, 12 May 2010 13:18:07 +0100</resolved>
                                    <version>10.6.1.0</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12856144" author="rhillegas" created="Mon, 12 Apr 2010 20:56:31 +0100"  >&lt;p&gt;Attaching functional spec for the work to be done here.&lt;/p&gt;</comment>
                            <comment id="12856327" author="knutanders" created="Tue, 13 Apr 2010 08:11:24 +0100"  >&lt;p&gt;Thanks for writing this clear spec, Rick. I agree that the embedded driver behaves correctly in these cases and that we should change the client driver to match, with the very reasonable exceptions mentioned in the spec. +1 from me.&lt;/p&gt;</comment>
                            <comment id="12865890" author="rhillegas" created="Mon, 10 May 2010 20:38:21 +0100"  >&lt;p&gt;Attaching derby-4613-01-ab-correctBehavior.diff. This patch implements the behavior described in the functional spec attached to this issue.  This makes the embedded and network drivers treat BOOLEAN values identically provided that both the client and the server are Derby code at version 10.7 or higher. Regression tests passed cleanly for me. Compatibility tests need to be written to verify that clients and servers play well with down-rev partners.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/iapi/reference/DRDAConstants.java&lt;/p&gt;

&lt;p&gt;Exposes the DRDA and DB2 constants for the BOOLEAN datatype, as described in table 5-11 of section 5.7 (FD:OCA Meta Data Summary) of Volume 1 of version 4 of the DRDA spec.&lt;/p&gt;


&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/impl/drda/AppRequester.java&lt;/p&gt;

&lt;p&gt;Server-side logic for determining whether the client-side of the connection is at 10.7 or higher.&lt;/p&gt;


&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/impl/drda/FdocaConstants.java&lt;br/&gt;
M      java/drda/org/apache/derby/impl/drda/SQLTypes.java&lt;br/&gt;
M      java/drda/org/apache/derby/impl/drda/DRDAConnThread.java&lt;/p&gt;

&lt;p&gt;Server-side logic for sending BOOLEAN values and their corresponding metadata.&lt;/p&gt;


&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/client/org/apache/derby/client/net/NetConnection.java&lt;br/&gt;
M      java/client/org/apache/derby/client/net/NetDatabaseMetaData.java&lt;br/&gt;
M      java/client/org/apache/derby/client/am/DatabaseMetaData.java&lt;/p&gt;

&lt;p&gt;Client-side logic determining whether the server-side of a connection is at 10.7 or higher. I found that I needed this logic in the abstract am package. While I was in there, I moved a number of similar methods out of the concrete net package up into the abstract am package. Ultimately, I think that the am package should be eliminated. See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4648&quot; title=&quot;Eliminate the org.apache.derby.client.am package of abstract classes in the client library.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4648&quot;&gt;DERBY-4648&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/client/org/apache/derby/client/net/Typdef.java&lt;br/&gt;
M      java/client/org/apache/derby/client/net/NetStatementRequest.java&lt;br/&gt;
M      java/client/org/apache/derby/client/am/Cursor.java&lt;br/&gt;
M      java/client/org/apache/derby/client/am/Types.java&lt;br/&gt;
M      java/client/org/apache/derby/client/am/SignedBinary.java&lt;br/&gt;
M      java/client/org/apache/derby/client/am/ColumnMetaData.java&lt;/p&gt;

&lt;p&gt;Client-side logic for reading BOOLEAN values and their corresponding metadata.&lt;/p&gt;


&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DatabaseMetaDataTest.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/master/showindex_client.out&lt;/p&gt;

&lt;p&gt;Changes to the tests to reflect the new behavior of the network client.&lt;/p&gt;</comment>
                            <comment id="12866287" author="rhillegas" created="Tue, 11 May 2010 20:22:57 +0100"  >&lt;p&gt;Attaching derby-4613-01-ac-correctBehavior.diff. This adds compatibility tests to the previous version of the patch.&lt;/p&gt;

&lt;p&gt;I verified the new tests by running them against combinations of the following client and server versions on jdk1.4, Java 5, and Java 6: I believe this patch is ready to be committed.&lt;/p&gt;

&lt;p&gt;10.0.2.1&lt;br/&gt;
10.1.1.0&lt;br/&gt;
10.2.2.0&lt;br/&gt;
10.4.2.1&lt;br/&gt;
10.6.1.0&lt;br/&gt;
Trunk (10.7.0.0)&lt;/p&gt;


&lt;p&gt;Touches the following additional files:&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/CompatibilitySuite.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/JDBCDriverTest.java&lt;/p&gt;</comment>
                            <comment id="12866552" author="rhillegas" created="Wed, 12 May 2010 13:17:09 +0100"  >&lt;p&gt;Committed derby-4613-01-ac-correctBehavior.diff at subversion revision 943465.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12313174">DERBY-499</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12441542" name="ASF.LICENSE.NOT.GRANTED--derby-4613-fs.html" size="24352" author="rhillegas" created="Mon, 12 Apr 2010 20:56:31 +0100"/>
                            <attachment id="12444141" name="derby-4613-01-ab-correctBehavior.diff" size="29737" author="rhillegas" created="Mon, 10 May 2010 20:38:21 +0100"/>
                            <attachment id="12444234" name="derby-4613-01-ac-correctBehavior.diff" size="34033" author="rhillegas" created="Tue, 11 May 2010 20:22:57 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10363"><![CDATA[Embedded/Client difference]]></customfieldvalue>
    <customfieldvalue key="10421"><![CDATA[Seen in production]]></customfieldvalue>
    <customfieldvalue key="10366"><![CDATA[Wrong query result]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Apr 2010 07:11:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31302</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0op3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37819</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>