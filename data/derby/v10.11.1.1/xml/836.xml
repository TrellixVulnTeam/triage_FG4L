<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:24:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-836/DERBY-836.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-836] ResultSetMetaData.getColumnDisplaySize sometimes returns wrong values for DECIMAL columns</title>
                <link>https://issues.apache.org/jira/browse/DERBY-836</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;DECIMAL(10,0)&lt;br/&gt;
max display width value:   -1234567890  length 11&lt;br/&gt;
embedded : 11 correct&lt;br/&gt;
client: 12 WRONG&lt;/p&gt;

&lt;p&gt;DECIMAL(10,10)&lt;br/&gt;
max display width value:   -0.1234567890  length 13&lt;br/&gt;
embedded : 13 correct&lt;br/&gt;
client: 12 WRONG&lt;/p&gt;

&lt;p&gt;DECIMAL(10,2)&lt;br/&gt;
max display width value:   -12345678.90  length 12&lt;br/&gt;
embedded : 13 WRONG&lt;br/&gt;
client: 12 correct&lt;/p&gt;

&lt;p&gt;I&apos;ve added output early on in jdbcapi/metadata_test.java (and hence the tests metadata.jar and odbc_metadata.java) to show this issue:&lt;br/&gt;
E.g. for embedded&lt;br/&gt;
DECIMAL(10,0) &amp;#8211; precision: 10 scale: 0 display size: 12 type name: DECIMAL&lt;br/&gt;
DECIMAL(10,10) &amp;#8211; precision: 10 scale: 10 display size: 12 type name: DECIMAL&lt;br/&gt;
DECIMAL(10,2) &amp;#8211; precision: 10 scale: 2 display size: 12 type name: DECIMAL&lt;/p&gt;

&lt;p&gt;I will add this test output once &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-829&quot; title=&quot;jdbcapi/metadata.java and lang/syscat.sql fail on jdk 1.5 with DerbyNet and DerbyNetClient frameworks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-829&quot;&gt;&lt;del&gt;DERBY-829&lt;/del&gt;&lt;/a&gt; is fixed so as not to cause conflicts.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12327876">DERBY-836</key>
            <summary>ResultSetMetaData.getColumnDisplaySize sometimes returns wrong values for DECIMAL columns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mayureshnirhali">Mayuresh Nirhali</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jan 2006 10:27:00 +0000</created>
                <updated>Mon, 29 Jun 2009 14:13:27 +0100</updated>
                            <resolved>Mon, 17 Jul 2006 13:49:02 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12363433" author="djd" created="Sat, 21 Jan 2006 04:23:13 +0000"  >&lt;p&gt;Committed revision 370886 for the additional tests cases in jdbcapi/metadata.java&lt;/p&gt;</comment>
                            <comment id="12373486" author="mayureshnirhali" created="Thu, 6 Apr 2006 15:48:28 +0100"  >&lt;p&gt;There are 3 possible cases with respect to finding the correct maximum width for DECIMAL type.&lt;/p&gt;

&lt;p&gt;1. If scale = 0, only sign should be added to precision to compute max width.&lt;br/&gt;
2. scale = precision, in this case 3 should be added to precision for sign, decimal and an additional char &apos;0&apos;.&lt;br/&gt;
3. precision &amp;gt; scale &amp;gt; 0, 2 shoud be added to precision for sign and decimal.&lt;/p&gt;

&lt;p&gt;In the embedded codepath, Only first and third is implemented. The second case is implemented in the fix attached.&lt;br/&gt;
With respect to netclient codepath, only the third case is implemented. The fix attached does attempt to cover all the three..&lt;br/&gt;
Also, all the required canon files are modified to now test the fix with correct values.&lt;/p&gt;</comment>
                            <comment id="12373831" author="mayureshnirhali" created="Mon, 10 Apr 2006 18:55:04 +0100"  >&lt;p&gt;Thanks to Bryan, for reviewing my earlier patch. &lt;/p&gt;

&lt;p&gt;As he has pointed out in the patch, previous patch has the master files under DerbyNet updated, which is wrong. These files are used for testing the JCC driver and this bug does exist in the JCC driver which needs to be fixed, hence the change to those master files are differed now and they must be done when the JCC driver is fixed.&lt;/p&gt;

&lt;p&gt;Also, I have updated the comments in the code (that I changed) to be more descriptive.&lt;/p&gt;

&lt;p&gt;The attached file, derby836-v2.diff is now the latest patch.&lt;/p&gt;</comment>
                            <comment id="12413380" author="mayureshnirhali" created="Fri, 26 May 2006 14:46:53 +0100"  >&lt;p&gt;This patch was reviewed but not yet commited since last month.&lt;/p&gt;

&lt;p&gt;In the past few weeks, some files which were part of this patch were removed from the trunk. I am updating the patch here and hoping that this will be committed soon.&lt;/p&gt;</comment>
                            <comment id="12414544" author="djd" created="Sat, 3 Jun 2006 08:15:45 +0100"  >&lt;p&gt;The code changes are fine but there are other tests, like odbc_metadata and upgrade, that use the same test code. Can you run the derbyall suite and provide a patch for the other master files that need to change?&lt;/p&gt;</comment>
                            <comment id="12414938" author="mayureshnirhali" created="Tue, 6 Jun 2006 18:00:10 +0100"  >&lt;p&gt;Thanks daniel for the review.&lt;/p&gt;

&lt;p&gt;As per the review comments, I have corrected the canon files for odbc_metadata and Upgrade tests.&lt;br/&gt;
The latest patch is now attached (version4) with this comment.&lt;/p&gt;

&lt;p&gt;Once committed, I plan to have this patch ready for 10.1 branch for the 10.1.3 release.&lt;/p&gt;</comment>
                            <comment id="12415069" author="djd" created="Wed, 7 Jun 2006 07:12:11 +0100"  >&lt;p&gt;Did you run derbyall to ensure there are no additional tests using the metadata class?&lt;/p&gt;</comment>
                            <comment id="12415118" author="mayureshnirhali" created="Wed, 7 Jun 2006 20:06:48 +0100"  >&lt;p&gt;I ran derbyall and found many failures. I ran it today again and still see some failures which does not seem related to derby-836. I also found 1 failure related to derby836 and have updated my patch (v5).&lt;/p&gt;

&lt;p&gt;The failures i still see (but not related to derby836) are as below,&lt;br/&gt;
lang/aggbuiltin.sql&lt;br/&gt;
lang/aggregate.sql&lt;br/&gt;
lang/cast.sql&lt;br/&gt;
lang/casting.java&lt;br/&gt;
lang/compressTable.sql&lt;br/&gt;
lang/consistencyChecker.sql&lt;br/&gt;
lang/ejbql.sql&lt;br/&gt;
lang/floattypes.sql&lt;br/&gt;
lang/functions.sql&lt;br/&gt;
lang/implicitConversions.sql&lt;br/&gt;
lang/lojreorder.sql&lt;br/&gt;
lang/orderby.sql&lt;br/&gt;
lang/partdml.sql&lt;br/&gt;
lang/specjPlans.sql&lt;br/&gt;
lang/supersimple.sql&lt;br/&gt;
lang/triggerGeneral.sql&lt;br/&gt;
lang/triggerRefClause.sql&lt;br/&gt;
tools/derbyrunjartest.java&lt;br/&gt;
tools/importExportThruIJ.sql&lt;br/&gt;
tools/ieptests.sql&lt;br/&gt;
i18n/I18NImportExport.sql&lt;br/&gt;
i18n/urlLocale.sql&lt;br/&gt;
i18n/messageLocale.sql&lt;br/&gt;
i18n/iepnegativetests_ES.sql&lt;br/&gt;
upgradeTests/Upgrade_10_1_10_2.java&lt;/p&gt;</comment>
                            <comment id="12419586" author="djd" created="Fri, 7 Jul 2006 03:23:17 +0100"  >&lt;p&gt;I believe the failures you are seeing are due to the change. It&apos;s probably because the change in metadata information for DECIMAL columns is causing ij to display its output differently, causing the changes.&lt;/p&gt;

&lt;p&gt;I ran functions.sql with and without the patch, it fails with the patch and passes without.&lt;/p&gt;</comment>
                            <comment id="12420791" author="mayureshnirhali" created="Thu, 13 Jul 2006 14:06:56 +0100"  >&lt;p&gt;Thanks Dan for pointing out the error.&lt;/p&gt;

&lt;p&gt;I have now added diffs for the master files which were failing due to this change and a complete patch is now attached as derby836-v6.diff.&lt;/p&gt;

</comment>
                            <comment id="12421129" author="djd" created="Fri, 14 Jul 2006 16:04:18 +0100"  >&lt;p&gt;Does derbyall run cleanly with derby836-v6.diff patch?&lt;/p&gt;</comment>
                            <comment id="12421143" author="djd" created="Fri, 14 Jul 2006 17:17:19 +0100"  >&lt;p&gt;Committed revision 421932.&lt;/p&gt;</comment>
                            <comment id="12421144" author="djd" created="Fri, 14 Jul 2006 17:23:12 +0100"  >&lt;p&gt;Thanks Mayuresh for fixing this bug and having the patience to work through the test changes.&lt;/p&gt;</comment>
                            <comment id="12421527" author="mayureshnirhali" created="Mon, 17 Jul 2006 07:08:26 +0100"  >&lt;p&gt;3 store tests and 5 nist tests fail due to minor canon file changes. Reopening this issue to make sure those issues are fixed.&lt;/p&gt;</comment>
                            <comment id="12421528" author="mayureshnirhali" created="Mon, 17 Jul 2006 07:11:31 +0100"  >&lt;p&gt;After the commit of derby-v6 patch, 3 store tests and 5 nist tests failed in the nightly testruns.&lt;/p&gt;

&lt;p&gt;These failures are due to missing canon file changes in the previous patch. I have created a new patch (not including the previous diffs) and is posted now.&lt;/p&gt;

&lt;p&gt;All the store and nist tests pass with derby-v7.diff and this patch is ready to commit.&lt;/p&gt;</comment>
                            <comment id="12421532" author="fuzzylogic" created="Mon, 17 Jul 2006 07:31:20 +0100"  >&lt;p&gt;I&apos;ve tried applying the -v7 patch on both Mac OS X and Cygwin, and in both cases, I get this:&lt;/p&gt;

&lt;p&gt;patching file java/testing/org/apache/derbyTesting/functionTests/master/onlineBackupTest4.out&lt;br/&gt;
patch: **** malformed patch at line 440:                                                             &amp;amp;^M&lt;/p&gt;

&lt;p&gt;I&apos;ve set svn:eol-style native for onlineBackupTest4.out. Could you please &apos;svn up&apos; and then regenerate your patch?&lt;/p&gt;</comment>
                            <comment id="12421540" author="mayureshnirhali" created="Mon, 17 Jul 2006 08:25:39 +0100"  >&lt;p&gt;regenerated the patch as per andrew&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="12421606" author="knutanders" created="Mon, 17 Jul 2006 13:49:02 +0100"  >&lt;p&gt;Thank you, Mayuresh! I have committed the v7_2 patch into trunk with revision 422706. Derbyall runs cleanly now.&lt;/p&gt;</comment>
                            <comment id="12551303" author="fuzzylogic" created="Thu, 13 Dec 2007 09:04:46 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12325131" name="derby836-v2.diff" size="6947" author="mayureshnirhali" created="Mon, 10 Apr 2006 18:55:04 +0100"/>
                            <attachment id="12334602" name="derby836-v3.diff" size="5612" author="mayureshnirhali" created="Fri, 26 May 2006 14:46:53 +0100"/>
                            <attachment id="12335076" name="derby836-v4.diff" size="9512" author="mayureshnirhali" created="Tue, 6 Jun 2006 18:00:10 +0100"/>
                            <attachment id="12336783" name="derby836-v6.diff" size="616612" author="mayureshnirhali" created="Thu, 13 Jul 2006 14:06:56 +0100"/>
                            <attachment id="12336990" name="derby836-v7.diff" size="24756" author="mayureshnirhali" created="Mon, 17 Jul 2006 07:11:31 +0100"/>
                            <attachment id="12336992" name="derby836-v7_2.diff" size="16977" author="mayureshnirhali" created="Mon, 17 Jul 2006 08:25:39 +0100"/>
                            <attachment id="12325006" name="derby836.diff" size="8583" author="mayureshnirhali" created="Thu, 6 Apr 2006 15:48:27 +0100"/>
                            <attachment id="12335137" name="derby836_v5.diff" size="11089" author="mayureshnirhali" created="Wed, 7 Jun 2006 20:06:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Apr 2006 14:48:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0wrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>