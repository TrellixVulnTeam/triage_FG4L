<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:37:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2296/DERBY-2296.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2296] getProperties method deprecated on ClientDataSource</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2296</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Not sure exactly where this was deprecated but on Client DataSources it appears that the getProperties method was made private.  In Geronimo we were using this to inquire and set whether a create=true was set for a database.  &lt;/p&gt;


&lt;p&gt;We are moving from 10.1.3.1 to 10.2.1.6 (or perhaps 10.2.2.0) for our next version which we are targetting for April of this year.&lt;/p&gt;

&lt;p&gt;Is it possible to add the following methods on the ClientDataSource:&lt;/p&gt;

&lt;p&gt; setCreateDatabase (String)&lt;br/&gt;
 getCreateDatabase()&lt;br/&gt;
 setShutdownDatabase (String)&lt;br/&gt;
 getShutdownDatabase()&lt;/p&gt;

&lt;p&gt;as they are on the EmbeddedDataSource?&lt;/p&gt;</description>
                <environment>All</environment>
        <key id="12362149">DERBY-2296</key>
            <summary>getProperties method deprecated on ClientDataSource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="hogstrom">Matt Hogstrom</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2007 22:37:01 +0000</created>
                <updated>Wed, 16 May 2007 17:59:59 +0100</updated>
                            <resolved>Wed, 16 May 2007 17:59:59 +0100</resolved>
                                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12488462" author="myrna" created="Thu, 12 Apr 2007 19:16:03 +0100"  >&lt;p&gt;attaching a patch that appends create=true for ds.setCreateDatabase, or shutdown=true for ds.setShutdownDatabase, to the connectionAttributes already getting send to the server.&lt;/p&gt;

&lt;p&gt;Also adds a junit test.&lt;/p&gt;

&lt;p&gt;Reviews are welcome.&lt;/p&gt;
</comment>
                            <comment id="12488764" author="djd" created="Fri, 13 Apr 2007 20:34:42 +0100"  >&lt;p&gt;I don&apos;t think this patch works as expected for a couple of reasons:&lt;/p&gt;

&lt;p&gt;1) If setConnectionAttributes() is called after setCreateDatabase or setShutdownDatabase then the create/shutdown state will be lost.&lt;/p&gt;

&lt;p&gt;2) If the order is reversed to 1) then getConnectionAttributes() will not return the same value as the one set by the application.&lt;/p&gt;

&lt;p&gt;3) Repeated calls to setCreateDatabase or setShutdownDatabase will continually add create=true/shutdown=true to connection attributes.&lt;/p&gt;


&lt;p&gt;why are the fields public?&lt;/p&gt;</comment>
                            <comment id="12488817" author="myrna" created="Sat, 14 Apr 2007 00:25:53 +0100"  >&lt;p&gt;Second attempt. I think this addresses Dan&apos;s comments (thx dan). Also added more test cases.&lt;/p&gt;</comment>
                            <comment id="12489572" author="djd" created="Tue, 17 Apr 2007 23:56:01 +0100"  >&lt;p&gt;+    public final void setCreateDatabase(String create) &lt;/p&gt;
{
+        if (create != null &amp;amp;&amp;amp; create.equalsIgnoreCase(&quot;create&quot;))
+            this.createDatabase = true;
+    }

&lt;p&gt;This doesn&apos;t reset the createDatabase state if a value is passed in that is not &quot;create&quot;.&lt;/p&gt;

&lt;p&gt;Same for shutdown.&lt;/p&gt;</comment>
                            <comment id="12489590" author="myrna" created="Wed, 18 Apr 2007 03:45:23 +0100"  >&lt;p&gt;Thx Dan for noticing that...&lt;/p&gt;

&lt;p&gt;I fixed this up, and added a test case, with revision 529838:&lt;br/&gt;
see: &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=529838&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=529838&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also added a description of the properties to the list in the server &amp;amp; admin guide with revision 529836.&lt;br/&gt;
see: &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=529836&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=529836&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I believe, that concludes the work for this. Unless there are further comments, I&apos;ll close this issue tomorrow.&lt;/p&gt;</comment>
                            <comment id="12490425" author="myrna" created="Fri, 20 Apr 2007 19:49:03 +0100"  >&lt;p&gt;I realized that there was one missing step - the incentive for me to fix this was that I had to add special if (usingDerbyNetClient()) code into the junit framework; and that could now be simplified.&lt;/p&gt;

&lt;p&gt;I also tried to write a test, similar to DSCreateShutdownDBTest, for ConnectionPoolDataSources and XADataSources, but ran into trouble - see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2576&quot; title=&quot;setCreateDatabase does not work for EmbeddedXADataSource or EmbeddedConnectionPoolDataSource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2576&quot;&gt;&lt;del&gt;DERBY-2576&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;With those last changes committed, I can close this particular issue.&lt;/p&gt;</comment>
                            <comment id="12490767" author="myrna" created="Mon, 23 Apr 2007 03:57:53 +0100"  >&lt;p&gt;Release Note text attempt:&lt;/p&gt;

&lt;p&gt;PROBLEM:&lt;br/&gt;
With version 10.2.1.6 an incompatibility with 10.1.1.0 was introduced - since revision 393003,  the undocumented, non-standard but previously public method, getProperties for Client DataSources was removed for security reasons. This leaves only the setConnectionAttributes method available for creating or shutting down a database. For instance, in Geronimo the getProperties method was previously used to inquire and set whether a create=true was set for a database. &lt;br/&gt;
It would be helpful if ClientDataSource could have the same methods available as EmbeddedDataSource:&lt;br/&gt;
 setCreateDatabase (String)&lt;br/&gt;
 getCreateDatabase()&lt;br/&gt;
 setShutdownDatabase (String)&lt;br/&gt;
 getShutdownDatabase()&lt;/p&gt;

&lt;p&gt;SYMPTOM&lt;br/&gt;
The getProperties() method is no longer available, nor are alternative methods except the setConnectionAttributes(String) and getConnectionAttributes() methods.&lt;/p&gt;

&lt;p&gt;CAUSE&lt;br/&gt;
The getProperties() method was removed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-446&quot; title=&quot;Client data source implementations cause security exception on storage to/from a Reference object&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-446&quot;&gt;&lt;del&gt;DERBY-446&lt;/del&gt;&lt;/a&gt;; make ClientDataSource use public getter and setter methods as standard for Java bean properties. It should not have been public.&lt;/p&gt;

&lt;p&gt;SOLUTION&lt;br/&gt;
4 new public methods were created for ClientDataSource:&lt;br/&gt;
 setCreateDatabase (String)&lt;br/&gt;
 getCreateDatabase()&lt;br/&gt;
 setShutdownDatabase (String)&lt;br/&gt;
 getShutdownDatabase()&lt;br/&gt;
These methods should behave similarly to the ones in Embedded, i.e. only valid value for setCreateDatabase is &quot;create&quot;, and for setShutdownDatabase is &quot;shutdown&quot;. In essence, at connection time, if set to a valid value, the property is passed on to the server side with the ConnectionAttributes.&lt;br/&gt;
Note, that the result for setting contradicting properties for createDatabase and ShutdownDatabase, whether through setCreateDatabase(&quot;create&quot;) and setShutdownDatabase(&quot;shutdown&quot;) or via setConnectionAttributes(&quot;create=true&quot;) or (&quot;shutdown=true&quot;) is undefined.&lt;/p&gt;

&lt;p&gt;WORKAROUND&lt;br/&gt;
set and get of ConnectionAttributes can be used to create or shutdown a database.&lt;/p&gt;

&lt;p&gt;INCOMPATIBILITIES: none from 10.2.1.6 to 10.3&lt;/p&gt;

&lt;p&gt;REQUIRED CHANGES TO EXISTING APPLICATIONS: there are no required changes. Applications can now use the setCreateDatabase, getCreateDatabase, setShutdownDatabase, and getShutdownDatabase methods with DerbyNetClient as well as with Embedded.&lt;/p&gt;</comment>
                            <comment id="12490768" author="myrna" created="Mon, 23 Apr 2007 03:59:56 +0100"  >&lt;p&gt;html version of release note. Attaching as file as well as in comment to hopefully facilitate possible release note generating tool.&lt;/p&gt;</comment>
                            <comment id="12490830" author="johnemb" created="Mon, 23 Apr 2007 08:20:40 +0100"  >&lt;p&gt;Just a small comment on the Release Note&apos;s section on &quot;REQUIRED CHANGES TO EXISTING APPLICATIONS&quot;:&lt;/p&gt;

&lt;p&gt;The term &quot;DerbyNetClient&quot; is as far as I know mostly used in Derby&apos;s testing framework(s), and may not be familiar to the average user. Would using the terms &quot;ClientDataSource&quot; and &quot;EmbeddedDataSource&quot; suffice?&lt;/p&gt;</comment>
                            <comment id="12490983" author="myrna" created="Mon, 23 Apr 2007 17:44:22 +0100"  >&lt;p&gt;good point, John. I changed the offending sentence as you suggested.&lt;br/&gt;
Attaching updated proposed release note with name &apos;relnoteDERBY-2296.html&apos;.&lt;/p&gt;</comment>
                            <comment id="12495486" author="myrna" created="Mon, 14 May 2007 07:44:27 +0100"  >&lt;p&gt;adding release note with releaseNote.html name.&lt;/p&gt;</comment>
                            <comment id="12495493" author="myrna" created="Mon, 14 May 2007 08:19:06 +0100"  >&lt;p&gt;this is the release note following the new release note template.&lt;/p&gt;</comment>
                            <comment id="12495785" author="rhillegas" created="Mon, 14 May 2007 22:16:29 +0100"  >&lt;p&gt;Amending release note so that it can be digested by the DOM parser used by the ReleaseNoteGenerator.&lt;/p&gt;</comment>
                            <comment id="12495789" author="rhillegas" created="Mon, 14 May 2007 22:40:07 +0100"  >&lt;p&gt;Attaching yet another rev of the release notes. The previous revs had long summary sections. The summary is supposed to be a 1 line precis.&lt;/p&gt;</comment>
                            <comment id="12495793" author="rhillegas" created="Mon, 14 May 2007 22:46:14 +0100"  >&lt;p&gt;Previous rev of the release notes had an unbalanced paragraph tag. Browsers forgive this sort of thing but xml parsers don&apos;t.&lt;/p&gt;</comment>
                            <comment id="12495794" author="djd" created="Mon, 14 May 2007 22:47:08 +0100"  >&lt;p&gt;Since this summary isn&apos;t very useful, e.g. I can&apos;t determine from the summary if this would concern me or not:&lt;/p&gt;

&lt;p&gt;&quot;4 new public methods were created for ClientDataSource:&quot;&lt;/p&gt;

&lt;p&gt;How about something like:&lt;/p&gt;

&lt;p&gt; &quot;ClientDataSource now supports the createDatabase and shutdownDatabase properties&quot;&lt;/p&gt;</comment>
                            <comment id="12495800" author="rhillegas" created="Mon, 14 May 2007 23:11:12 +0100"  >&lt;p&gt;Attaching a next rev of the release note with Dan&apos;s suggested summary.&lt;/p&gt;</comment>
                            <comment id="12496349" author="myrna" created="Wed, 16 May 2007 17:59:59 +0100"  >&lt;p&gt;I think this can be closed again now that the release note file has been molded some more.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12367698">DERBY-2576</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12356018" name="DERBY-2296.htm" size="3737" author="myrna" created="Mon, 23 Apr 2007 03:59:56 +0100"/>
                            <attachment id="12355446" name="DERBY-2296_20070412.diff" size="17653" author="myrna" created="Thu, 12 Apr 2007 19:16:03 +0100"/>
                            <attachment id="12355531" name="DERBY-2296_20070413.diff" size="20855" author="myrna" created="Sat, 14 Apr 2007 00:25:53 +0100"/>
                            <attachment id="12357320" name="releaseNote.html" size="3284" author="rhillegas" created="Mon, 14 May 2007 23:11:12 +0100"/>
                            <attachment id="12357319" name="releaseNote.html" size="3258" author="rhillegas" created="Mon, 14 May 2007 22:46:14 +0100"/>
                            <attachment id="12357317" name="releaseNote.html" size="3254" author="rhillegas" created="Mon, 14 May 2007 22:40:07 +0100"/>
                            <attachment id="12357314" name="releaseNote.html" size="3214" author="rhillegas" created="Mon, 14 May 2007 22:16:29 +0100"/>
                            <attachment id="12357227" name="releaseNote.html" size="4647" author="myrna" created="Mon, 14 May 2007 08:19:06 +0100"/>
                            <attachment id="12357223" name="releaseNote.html" size="3749" author="myrna" created="Mon, 14 May 2007 07:44:27 +0100"/>
                            <attachment id="12356064" name="relnoteDERBY-2296.html" size="3749" author="myrna" created="Mon, 23 Apr 2007 17:44:22 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Apr 2007 18:16:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22989</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy125z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40001</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>