<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:21:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3308/DERBY-3308.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3308] Broken synchronization for event handling in ClientPooledConnection40</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3308</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Access to the the list of event listeners is not synchronized properly.&lt;/p&gt;

&lt;p&gt;Taken the rather infrequent use of the relevant methods and the small critical sections, I mean it is sufficient to add synchronization to all the methods that access it at the method level. The same approach is taken in ClientPooledConnection (although not followed through consistently, some of the methods are unsynchronized).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12385864">DERBY-3308</key>
            <summary>Broken synchronization for event handling in ClientPooledConnection40</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jan 2008 13:15:17 +0000</created>
                <updated>Mon, 11 Feb 2008 13:28:17 +0000</updated>
                            <resolved>Wed, 23 Jan 2008 14:13:37 +0000</resolved>
                                    <version>10.2.2.0</version>
                    <version>10.3.2.1</version>
                    <version>10.4.1.3</version>
                                    <fixVersion>10.2.2.1</fixVersion>
                    <fixVersion>10.3.3.0</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JDBC</component>
                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                            <comments>
                            <comment id="12561655" author="kristwaa" created="Wed, 23 Jan 2008 12:30:43 +0000"  >&lt;p&gt;&apos;derby-3308-1a-eventlisteners_synchronization.diff&apos; synchronizes all methods accessing the list (a java.util.Vector) of statement event listeners.&lt;/p&gt;

&lt;p&gt;I ran derbyall/suites.All without errors. Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12561670" author="knutanders" created="Wed, 23 Jan 2008 13:33:28 +0000"  >&lt;p&gt;The patch looks fine to me.&lt;/p&gt;

&lt;p&gt;Since the list is now guarded by synchronization on the pooled connection, couldn&apos;t it be changed from Vector to ArrayList? (Should be safe to do with listeners_ in the parent class as well.)&lt;/p&gt;</comment>
                            <comment id="12561685" author="kristwaa" created="Wed, 23 Jan 2008 13:58:57 +0000"  >&lt;p&gt;Thanks for commenting on the patch Knut Anders.&lt;/p&gt;

&lt;p&gt;I have incorporated you suggestion about replacing Vector with ArrayList in revision 1b.&lt;/p&gt;

&lt;p&gt;Regarding the suggested changes in the parent class, there are some methods that are synchronized and some that are not. A patch could be attached to the subtask of this issue. Feel free to add it, or maybe I will if I get around to it.&lt;/p&gt;</comment>
                            <comment id="12561688" author="kristwaa" created="Wed, 23 Jan 2008 14:13:37 +0000"  >&lt;p&gt;Committed &apos;derby-3308-1b-eventlisteners_synchronization.diff&apos; to trunk with revision 614536.&lt;/p&gt;

&lt;p&gt;I don&apos;t expect there will be more work on this issue, will close in a few days.&lt;/p&gt;</comment>
                            <comment id="12565741" author="kristwaa" created="Tue, 5 Feb 2008 13:19:12 +0000"  >&lt;p&gt;Backported the fix (revision 614536):&lt;br/&gt;
10.2 -&amp;gt; revision 618639&lt;br/&gt;
10.3 -&amp;gt; revision 618640&lt;/p&gt;

&lt;p&gt;I ran all tests for both branches without errors, and both merges were clean.&lt;br/&gt;
Updated the fix versions accordingly.&lt;/p&gt;</comment>
                            <comment id="12567632" author="kristwaa" created="Mon, 11 Feb 2008 13:28:17 +0000"  >&lt;p&gt;Haven&apos;t seen any problems with the patch in the regression tests. Closing issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12373821" name="derby-3308-1a-eventlisteners_synchronization.diff" size="3586" author="kristwaa" created="Wed, 23 Jan 2008 12:30:43 +0000"/>
                            <attachment id="12373828" name="derby-3308-1b-eventlisteners_synchronization.diff" size="4231" author="kristwaa" created="Wed, 23 Jan 2008 13:58:56 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12385871">DERBY-3309</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Jan 2008 13:33:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>