<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:09:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-683/DERBY-683.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-683] Use correct encoding for ClobOutputStream on client</title>
                <link>https://issues.apache.org/jira/browse/DERBY-683</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In client, there is code in ClobOutputStream which uses this api - new String(byte[]).   Per the java api &lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html#String(byte[&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html#String(byte[&lt;/a&gt;]) ,this will construct a string by decoding the array of bytes using the platform&apos;s default character set. &lt;/p&gt;

&lt;p&gt;org.apache.derby.client.am.ClobOutputStream is used for Clob.setAsciiStream and the write methods  use the String(byte[]) which is incorrect because it will use the default platform encoding. Per the jdbcapi , this should use ascii encoding. &lt;/p&gt;

&lt;p&gt;In areas related to Clobs, also check for other places where  String(byte[]) is used,as it may not be the desired behavior. &lt;/p&gt;

&lt;p&gt;Dan pointed this problem here : &lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-463?page=comments#action_12356742&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-463?page=comments#action_12356742&lt;/a&gt;&lt;/p&gt;</description>
                <environment>all</environment>
        <key id="12325364">DERBY-683</key>
            <summary>Use correct encoding for ClobOutputStream on client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="skambha">Sunitha Kambhampati</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Nov 2005 10:55:31 +0000</created>
                <updated>Wed, 12 Jul 2006 02:49:24 +0100</updated>
                            <resolved>Thu, 18 May 2006 06:34:56 +0100</resolved>
                                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12364287" author="deepa" created="Sat, 28 Jan 2006 10:35:32 +0000"  >&lt;p&gt;The patch for this seems to be a small change but I am having trouble adding a test for this. I have been trying for some time to write a test for verifying that ascii encoding gets used when writing with OutputStream returned by Clob.setAsciiStream. I do not know how to add a test which can run with the test harness because the test will need to set the property &quot;file.encoding&quot;. I have been able to verify my changes using a java program which uses a test in jdbcapi/lobStreams.java. I am attaching the repro program and my patch (not ready for commit) to this JIRA. &lt;/p&gt;

&lt;p&gt;To run the repro,&lt;br/&gt;
1. Start network server on port 2222.&lt;br/&gt;
2. Using Sun JDK1.5, run: java -Dfile.encoding=UTF-16 clob&lt;/p&gt;

&lt;p&gt;Output without my patch:&lt;br/&gt;
   S t a r t   t e s t C l o b W r i t e 3 P a r a m&lt;br/&gt;
 F A I L   - -   w r o n g   c l o b   l e n g t h ;   o r i g i n a l :   9 4   c l o b   l e n g t&lt;br/&gt;
 h :   4 7&lt;br/&gt;
 t e s t C l o b W r i t e 3 P a r a m   f i n i s h e d&lt;/p&gt;

&lt;p&gt;Output with my patch:&lt;br/&gt;
   S t a r t   t e s t C l o b W r i t e 3 P a r a m&lt;br/&gt;
 C o m p a r i n g   f i l e   a n d   c l o b&lt;br/&gt;
 T e s t 3   -   P A S S   -   C l o b   a n d   f i l e   c o n t e n t s   m a t c h&lt;br/&gt;
 t e s t C l o b W r i t e 3 P a r a m   f i n i s h e d&lt;/p&gt;

&lt;p&gt;The output of the repro is not in a very good format as you can see above but this is the only charset I could find to repro this problem on my Windows machine. I have a few questions and I&apos;d appreciate if someone can answer them.&lt;/p&gt;

&lt;p&gt;1. Does my test cover the problem described in the JIRA?&lt;/p&gt;

&lt;p&gt;2. Is there some other charset I can use instead of UTF-16? I need a charset which will have different encoding for any ascii character than the ASCII encoding? I am using a Windows machine. To add to test harness, we will need a charset which is available on all platforms.&lt;/p&gt;

&lt;p&gt;3. How can I run this repro as a test inside the test harness? Test harness seems to treat file.encoding property differently and I see RunTest using it to set &quot;derby.ui.codeset&quot;. In my repro, I tried using &quot;System.setProperty(&quot;file.encoding&quot;, &quot;UTF-16&quot;);&quot; but that did not work. Only command-line &quot;-Dfile.encoding&quot; works. &lt;/p&gt;

&lt;p&gt;4. Is there some other way to test this? Maybe there is another way to test this and then rest of my questions are invalid.&lt;/p&gt;

&lt;p&gt;I&apos;d appreciate help in this. Thanks.&lt;/p&gt;</comment>
                            <comment id="12364868" author="deepa" created="Thu, 2 Feb 2006 05:26:44 +0000"  >&lt;p&gt;Attaching a patch &apos;derby-683.diff&apos;. &lt;/p&gt;

&lt;p&gt;The write methods in ClobOutputStream were using default encoding when constructing a String from bytes. ClobOutputStream is the output stream returned by call to Clob.setAsciiStream. This is meant to be a stream to which ascii encoded characters can be written. So the writes to this stream should not be using default encoding.  This patch changes the write methods to use String constructors with ascii encoding. &lt;/p&gt;

&lt;p&gt;Currently, I have a repro to test this. I am working on adding a test to the harness. This requires some changes to the test harness and I would like to submit this as a separate patch. To test this using the repro, run the following command on Windows with Sun JDK1.5:&lt;/p&gt;

&lt;p&gt;java -Dfile.encoding=UTF-16 -Doutput.encoding=Cp1252 clob&lt;/p&gt;

&lt;p&gt;With this patch, I have run derbyall on Windows with Sun JDK 1.4.2. No failures. It would be good if someone can look at this patch and commit the code changes if they are okay. I will submit the harness changes and a test in a separate patch.&lt;/p&gt;</comment>
                            <comment id="12364970" author="kmarsden" created="Fri, 3 Feb 2006 02:03:31 +0000"  >&lt;p&gt;Thanks Deepa, the patch looks good.   I think the harness problem is a hard one, especially for useprocess=false.  Post what  you have and I am sure folks will help out.  We all want you done with this and back on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-210&quot; title=&quot;Network Server will leak prepared statements if not explicitly closed by the user until the connection is closed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-210&quot;&gt;DERBY-210&lt;/a&gt; #&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12365038" author="deepa" created="Fri, 3 Feb 2006 13:16:09 +0000"  >&lt;p&gt;I am attaching a patch &apos;derby-683_tests.diff&apos; which adds testing for this issue. The patch changes the harness to enable running tests/suites using an encoding different from the default system encoding. &lt;/p&gt;

&lt;p&gt;------------------------------------&lt;br/&gt;
Background: &lt;br/&gt;
------------------------------------&lt;br/&gt;
To test &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt;, I wanted to run an existing test (jdbcapi/lobStreams.java) using an encoding which will have different representation for ASCII characters. I found that UTF-16 uses more number of bits and different representation for ASCII characters than the US-ASCII encoding. Also, UTF-16 is in the list of standard charsets supported by all jvms specified at &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/nio/charset/Charset.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/nio/charset/Charset.html&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;For this, I first tried using &apos;jvmflags&apos; property in the test harness. Harness uses this property to launch the jvm process to run tests. So it is possible to do this only when useprocess=true. I could run the test by specifying &quot;jvmflags=-Dfile.encoding=UTF-16&quot; in &amp;lt;test&amp;gt;_app.properties file. However, the test output gets written using UTF-16 encoding and it appears in strange format. To read the output, harness needs to know what encoding the test jvm used. For this, it has to parse the jvmflags, look for &quot;-Dfile.encoding=&quot;, get and store the encoding specified, launch the jvm using the encoding, and later use that encoding to read the test output. Since jvmflags property is used by harness for other purposes, I added a new property &apos;derbyTesting.encoding&apos; to the harness. Harness will read this property to get the encoding and internally change jvmflags before launching the jvm to run tests. As mentioned before, all this is possible only when useprocess=true. &lt;/p&gt;

&lt;p&gt;I don&apos;t think my changes cover all the things that harness needs to support to run tests with different encodings. So I am trying to list what we can/cannot do with these changes: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Can specify the encoding in &amp;lt;test&amp;gt;_app.properties file and run an individual test (not as part of a suite). If the encoding property is specified for a test, it gets used only if the test is run individually using RunTest. When the test gets run as part of a suite, useprocess is set to false in RunTest and no new jvm gets launched for the test. So the encoding property won&apos;t get used.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Can specify the encoding in &amp;lt;suite&amp;gt;.properties file and run the whole suite of tests using that encoding. In this case, a new jvm is launched for RunTest class and all tests are run with the encoding specified.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Cannot successfully run sql tests if the encoding property is specified. The sql files will get read using the specified encoding and may not be meaningful. If the sql files always get read using fixed encoding, this will not be a problem. I think this change is planned in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-658&quot; title=&quot;test harness improvements required for running on non-ASCII systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-658&quot;&gt;&lt;del&gt;DERBY-658&lt;/del&gt;&lt;/a&gt; by Myrna.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Can run tests/suites using encoding property and look for possible areas for cleanup.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Once the patch is reviewed and if it is okay, I will update the testing readme file with this information.  &lt;/p&gt;

&lt;p&gt;------------------------------------&lt;br/&gt;
Changes:&lt;br/&gt;
------------------------------------&lt;br/&gt;
This patch does the following: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Adds a new property &apos;derbyTesting.encoding&apos; to the test harness. This property can be specified as a suite in &amp;lt;suite&amp;gt;.properties file or as test property in &amp;lt;test&amp;gt;_app.properties file. If this property is set at suite level, it overrides the property set in the tests inside that suite. For this, I made changes to RunSuite.java, RunList.java and RunTest.java to read the property at each level only if it is not set at the higher level.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The patch uses the value specified in &apos;derbyTesting.encoding=&amp;lt;enc_value&amp;gt;&apos; for two things:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;1. To append to the jvmflags property used to start the child jvm process. Following is appended: -Dfile.encoding=&amp;lt;enc_value&amp;gt;. Currently, I have hard-coded the prefix &quot;-Dfile.encoding=&quot; in the code. In case any new jvm uses a different property name, the prefix can be specified for each jvm in the&lt;br/&gt;
corresponding jvm class and this can be retrieved and used.&lt;/p&gt;

&lt;p&gt;2. To read the test output: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;when using RunTest, ProcessStreamResult class is used to read the output of the jvm process and write to the output file. The patch changes this class to use InputStreamReader which is created using &amp;lt;enc_value&amp;gt; encoding. The OutputStreamWriter which writes to .out file is created using system default encoding. This needs to use the default encoding because the harness will compare the .out file to master using &amp;lt;default_enc&amp;gt;.&lt;/li&gt;
	&lt;li&gt;when using RunSuite, HandleResult class is used to read the test output. The patch changes this class to use InputStreamReader which is created using &amp;lt;enc_value&amp;gt; encoding.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Creates a new suite encodingTests with jdbcapi/lobStreams.java in .runall file. I created a new suite because I cannot specify the encoding property in a test and run it as part of a suite.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Adds derbyTesting.encoding=UTF-16 to encodingTests.properties file. Adds excludes for all jvms except Sun jdk1.5.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Adds the encodingTests suite to derbynetclientmats&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With this patch, I ran derbyall with Sun JDK1.4.2 on Windows XP. No failures. With Sun JDK1.5, I ran the new suite encodingTests and verified that the specified encoding is getting used to run the test. &lt;/p&gt;

&lt;p&gt;Please review this patch. Thanks&lt;/p&gt;</comment>
                            <comment id="12365367" author="myrna" created="Tue, 7 Feb 2006 09:34:53 +0000"  >&lt;p&gt;I looked at the deltas and it looks reasonable to me.&lt;/p&gt;

&lt;p&gt;I ran the suite on windows 2000 with &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jdk15 on windows 2000 - which was fine -&lt;/li&gt;
	&lt;li&gt;jdk14 - which was skipped, and failed when I commented that out&lt;/li&gt;
	&lt;li&gt;ibm15 - which should&apos;ve skipped, but seemed to work, except for plopping &apos;process exception: null&quot; to the console:&lt;br/&gt;
-----------------------&lt;br/&gt;
....lse^derbyTesting.encoding=UTF-16^runwithjdk13=false^runwithibm15=false^runwithjdk12=false^hostName=localhost^runwithibm13=false -Dsuitename=encodingTests:encodingTests -Dtopsuitename=encodingTests org.apache.derbyTesting.functionTests.harness.RunTest jdbcapi/lobStreams.java&lt;br/&gt;
Process exception: null&lt;br/&gt;
Generated report: encodingTests_report.txt&lt;br/&gt;
------------------------&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It doesn&apos;t look like this patch is to blame for the non-skipping of ibm15, I&apos;ll have a look at that.&lt;/p&gt;

&lt;p&gt;But I am wondering about why you tried to have that skipped, was that because of that Process exception? &lt;/p&gt;</comment>
                            <comment id="12365372" author="deepa" created="Tue, 7 Feb 2006 10:15:35 +0000"  >&lt;p&gt;Thanks Myrna for looking at the patch. &lt;/p&gt;

&lt;p&gt;When I ran the repro clob.java with UTF-16 encoding using ibm15, I got NoClassDefFoundError, same as what I get for jdk14. That is the reason I skipped the suite for ibm15. I had not tried running the suite with ibm15 and did not know the skipping was not working. Thanks for finding that. &lt;/p&gt;</comment>
                            <comment id="12365477" author="myrna" created="Wed, 8 Feb 2006 04:48:01 +0000"  >&lt;p&gt;Well, retried after ant clobber, and this time, the skipping worked, I must&apos;ve had a half-baked environment. &lt;/p&gt;</comment>
                            <comment id="12365497" author="kmarsden" created="Wed, 8 Feb 2006 09:04:58 +0000"  >&lt;p&gt;Do I need to  wait to commit this patch for the ibm15 skip to be fixed?&lt;/p&gt;</comment>
                            <comment id="12365646" author="myrna" created="Thu, 9 Feb 2006 07:50:56 +0000"  >&lt;p&gt;The ibm15 skip was a non-issue. However, I&apos;ve found that possibly the encoding setting may not get reset with subsequent tests.&lt;/p&gt;

&lt;p&gt;What I found is this:&lt;br/&gt;
when commenting out the &apos;runwithjdk14=false&apos; property, and running derbyall(not when running derbynetclientmats) with insane jars under DOS all subsequent derbynetclientmats tests fail with error like this in the diff:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: CompatibilityTest jdk1.4.2_03 DerbyNetClient derbynetclientmats:derbynetclientmats 2006-02-07 11:48:42 ***&lt;br/&gt;
0 add&lt;br/&gt;
&amp;gt; &#254;&#255; j a v a . l a n g . N o C l a s s D e f F o u n d E r r o r :  org.apache.derbyTesting.functionTests.tests.junitTests.derbyNet.CompatibilityTes&#255;&#253; &lt;br/&gt;
&amp;gt; Exception in thread &quot;main&quot; &lt;br/&gt;
Test Failed.&lt;br/&gt;
***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, there&apos;s something not entirely ok in this patch.&lt;/p&gt;

&lt;p&gt;One solution would be to put the encodingTests as the last suite in derbynetclientmats.properties, but that still leaves an unpleasant feeling.&lt;/p&gt;

&lt;p&gt;I suggest we do not commit the test work at this time, and I will look into it in line with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-658&quot; title=&quot;test harness improvements required for running on non-ASCII systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-658&quot;&gt;&lt;del&gt;DERBY-658&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12365652" author="deepa" created="Thu, 9 Feb 2006 08:12:53 +0000"  >&lt;p&gt;Harness changes are also needed to run tests using different encoding.  Please see &lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-683&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The patch &apos;derby-683_tests.diff&apos; solves this problem partially but has following problem found by Myrna &lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-683#action_12365038&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-683#action_12365038&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12365654" author="deepa" created="Thu, 9 Feb 2006 08:15:08 +0000"  >&lt;p&gt;Thanks Myrna for offering to work on the harness changes. I have added a link to this issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-658&quot; title=&quot;test harness improvements required for running on non-ASCII systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-658&quot;&gt;&lt;del&gt;DERBY-658&lt;/del&gt;&lt;/a&gt;. I will resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt; since the code changes have been committed and test changes will be done as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-658&quot; title=&quot;test harness improvements required for running on non-ASCII systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-658&quot;&gt;&lt;del&gt;DERBY-658&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="12365655" author="deepa" created="Thu, 9 Feb 2006 08:22:17 +0000"  >&lt;p&gt;Committed as svn revision 374469 to the trunk. Verified changes by running the attached repro.&lt;/p&gt;</comment>
                            <comment id="12366662" author="fuzzylogic" created="Fri, 17 Feb 2006 04:01:02 +0000"  >&lt;p&gt;Hi Myrna, I can&apos;t get this patch (derby-683_021006.diff) to apply cleanly due to changes in RunTest. Could you merge your changes and post an updated patch?&lt;/p&gt;</comment>
                            <comment id="12366809" author="myrna" created="Sat, 18 Feb 2006 01:40:15 +0000"  >&lt;p&gt;Attaching an updated patch for the test harness. (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt;_tstpatch03_2006_02_16.*)&lt;br/&gt;
This is close to what was created before. &lt;br/&gt;
Compared to deepa&apos;s original, it &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;skips any test run with derbyTesting.encoding if the jvm is not jdk15&lt;/li&gt;
	&lt;li&gt;does not set file.encoding in the RunSuite &amp;amp; thus will get set &amp;amp; unset for every test where it applies&lt;/li&gt;
	&lt;li&gt;includes a brief mention of the property in the java/testing/READEM.htm&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I also took advantage of touching up the README.htm to mention with the remote server functionality that &lt;br/&gt;
derby.jar needs to be available (although not in the classpath), and to list the junit tests as a valid test type.&lt;/p&gt;</comment>
                            <comment id="12367316" author="fuzzylogic" created="Wed, 22 Feb 2006 16:58:36 +0000"  >&lt;p&gt;Committed &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt;_tstpatch03 to trunk with revision 379723. Followup issue regarding running the encoding tests on JVMs besides Sun JDK 1.5 filed in JIRA as issue &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1027&quot; title=&quot;encodingTests suite cannot be run on JDK 1.4.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1027&quot;&gt;&lt;del&gt;DERBY-1027&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12367374" author="deepa" created="Thu, 23 Feb 2006 02:39:21 +0000"  >&lt;p&gt;Thanks Myrna and Andrew for working on this test patch. &lt;/p&gt;

&lt;p&gt;I was updating my workspace to see if my test for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt; runs fine when I noticed that the &quot;new&quot; files in the patch seem to have been added twice. The following files have repeated contents:&lt;br/&gt;
Added:&lt;br/&gt;
   db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/suites/encodingTests.properties   (with props)&lt;br/&gt;
   db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/suites/encodingTests.runall&lt;/p&gt;

&lt;p&gt;Andrew, can you please check this? Thanks.&lt;/p&gt;</comment>
                            <comment id="12367384" author="fuzzylogic" created="Thu, 23 Feb 2006 04:21:11 +0000"  >&lt;p&gt;Yes, I must have applied the patch twice and patch didn&apos;t catch that the new files had already been &apos;patched&apos;. Good catch, thanks Deepa!&lt;/p&gt;</comment>
                            <comment id="12378994" author="deepa" created="Thu, 11 May 2006 07:37:42 +0100"  >&lt;p&gt;Reopening to port this fix to 10.1 branch&lt;/p&gt;</comment>
                            <comment id="12412001" author="deepa" created="Tue, 16 May 2006 23:41:32 +0100"  >&lt;p&gt;To merge this fix, I have also ported the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-463&quot; title=&quot;Successive writes to a java.sql.Blob.setBinaryStream(long) seem to reset the file pointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-463&quot;&gt;&lt;del&gt;DERBY-463&lt;/del&gt;&lt;/a&gt; which is in the same area. The patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-463&quot; title=&quot;Successive writes to a java.sql.Blob.setBinaryStream(long) seem to reset the file pointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-463&quot;&gt;&lt;del&gt;DERBY-463&lt;/del&gt;&lt;/a&gt; is attached to &lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-463&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-463&lt;/a&gt;. This patch has to be applied before running the following merge command:&lt;/p&gt;

&lt;p&gt;svn merge -r 374468:374469 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-463&quot; title=&quot;Successive writes to a java.sql.Blob.setBinaryStream(long) seem to reset the file pointer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-463&quot;&gt;&lt;del&gt;DERBY-463&lt;/del&gt;&lt;/a&gt; and the merge for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-683&quot; title=&quot;Use correct encoding for ClobOutputStream on client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-683&quot;&gt;&lt;del&gt;DERBY-683&lt;/del&gt;&lt;/a&gt;, I verified that the attached repro passes with UTF-16 file encoding in v10.1. I also ran derbynetclientmats with Sun jdk 1.4.2 on Windows XP. Please take a look at these. Thanks.&lt;/p&gt;</comment>
                            <comment id="12412250" author="fuzzylogic" created="Thu, 18 May 2006 06:34:56 +0100"  >&lt;p&gt;Committed to 10.1 with revision 407391.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12329317">DERBY-1027</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12325106">DERBY-658</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12329317">DERBY-1027</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12323115" name="DERBY-683_tstpatch3_2006_02_16.diff" size="17343" author="myrna" created="Sat, 18 Feb 2006 01:40:15 +0000"/>
                            <attachment id="12323114" name="DERBY-683_tstpatch3_2006_02_16.stat" size="724" author="myrna" created="Sat, 18 Feb 2006 01:40:15 +0000"/>
                            <attachment id="12322440" name="ascii.txt" size="94" author="deepa" created="Sat, 28 Jan 2006 10:35:32 +0000"/>
                            <attachment id="12322548" name="clob.java" size="4595" author="deepa" created="Thu, 2 Feb 2006 05:26:44 +0000"/>
                            <attachment id="12322547" name="derby-683.diff" size="1555" author="deepa" created="Thu, 2 Feb 2006 05:26:44 +0000"/>
                            <attachment id="12322864" name="derby-683_021006.diff" size="14439" author="myrna" created="Sat, 11 Feb 2006 08:34:09 +0000"/>
                            <attachment id="12322863" name="derby-683_021006.stat" size="692" author="myrna" created="Sat, 11 Feb 2006 08:34:08 +0000"/>
                            <attachment id="12322598" name="derby-683_tests.diff" size="12926" author="deepa" created="Fri, 3 Feb 2006 13:16:09 +0000"/>
                            <attachment id="12322599" name="derby-683_tests.status" size="692" author="deepa" created="Fri, 3 Feb 2006 13:16:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Jan 2006 10:35:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22093</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15jj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>