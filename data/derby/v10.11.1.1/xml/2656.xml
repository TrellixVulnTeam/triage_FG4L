<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2656/DERBY-2656.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2656] Run suites.All against a collated database</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2656</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;It would be good to leverage the existing tests to exercise the collation code.  Investigate running all the tests against a collated database.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</description>
                <environment></environment>
        <key id="12369433">DERBY-2656</key>
            <summary>Run suites.All against a collated database</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 May 2007 21:34:27 +0100</created>
                <updated>Fri, 17 Aug 2007 23:37:16 +0100</updated>
                            <resolved>Wed, 25 Jul 2007 01:51:15 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12496426" author="kmarsden" created="Wed, 16 May 2007 23:44:05 +0100"  >&lt;p&gt;I ran the tests on a collated database with territory=no and got no new failures.  Attached is the patch that checks a system property derby.tests.TERRITORY  and connects with collation=TERRITORY_BASED;territory=&amp;lt;territory&amp;gt;.&lt;br/&gt;
This patch is really a hack in the Connector code. I don&apos;t think it is worth committing but I am attaching it here in case someone wants to do this again.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;

</comment>
                            <comment id="12496427" author="kmarsden" created="Wed, 16 May 2007 23:45:19 +0100"  >&lt;p&gt;completed testing and found no new issues.&lt;/p&gt;</comment>
                            <comment id="12496438" author="kmarsden" created="Thu, 17 May 2007 00:35:40 +0100"  >&lt;p&gt;I think ascii is the same as the default except for my favorite norwegian character &apos;aa&apos; which is one character and sorts after z in Norway and is two and sorts before z in the default encoding.&lt;/p&gt;

&lt;p&gt;ij&amp;gt; connect &apos;jdbc:derby:wombat;create=true;collation=TERRITORY_BASED;territory=no&apos;;&lt;br/&gt;
WARNING 01J01: Database &apos;wombat&apos; not created, connection made to existing database instead.&lt;br/&gt;
ij&amp;gt; create table t (vc varchar(30));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t values(&apos;acorn&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t values(&apos;aacorn&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t values(&apos;zebra&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from t order by vc;&lt;br/&gt;
VC&lt;br/&gt;
------------------------------&lt;br/&gt;
acorn&lt;br/&gt;
zebra&lt;br/&gt;
aacorn&lt;/p&gt;</comment>
                            <comment id="12496615" author="djd" created="Thu, 17 May 2007 17:37:34 +0100"  >&lt;p&gt;This was really a Task since it was just performed once and no code changes were made for Derby.&lt;br/&gt;
It would be good (under a separate issue) to permanently have a way to modify the default database&lt;br/&gt;
to allow runs of Suites.All (or any test) with different configurations. Eg. different locale, different collation,&lt;br/&gt;
encryption etc. etc.&lt;/p&gt;</comment>
                            <comment id="12511841" author="kmarsden" created="Wed, 11 Jul 2007 20:40:47 +0100"  >&lt;p&gt;Based on Dan&apos;s testing of DatabaseMetaData, I must have made an error in running these tests. Reopening to rerun.&lt;/p&gt;</comment>
                            <comment id="12511843" author="djd" created="Wed, 11 Jul 2007 20:57:56 +0100"  >&lt;p&gt;Or a bug was introduced after you ran the tests, or a new test case was added ...&lt;/p&gt;

&lt;p&gt;Rather than a one-off (two-off) task, I wonder if we could make this repeatable by adding more existing tests into the CollationTest.&lt;br/&gt;
Adding the DatabaseMetaDataTest is a good choice because meta data is where we know there might be issues given the different collations.&lt;br/&gt;
Are there any other potential areas that could be covered by existing tests?&lt;/p&gt;

&lt;p&gt;E.g. testing of the math funtions (sin cos etc.) is very unlikely to be affected by collation so little benefit in adding that test case but what about others?&lt;/p&gt;</comment>
                            <comment id="12511889" author="kmarsden" created="Wed, 11 Jul 2007 23:02:08 +0100"  >&lt;p&gt;I plan to check in a FullCollationTests test which will test all the tests with collation which can be run periodically, then hopefully that run will help identify likely candidates to run with the CollationTest all the time.    I am having trouble running the tests  now because of the getTables() bug &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2896&quot; title=&quot;DatabaseMetaData.getTables() fails in TERRORITY_BASED collation database with SQLState 42818: Comparisions between CHAR and CHAR not allowed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2896&quot;&gt;&lt;del&gt;DERBY-2896&lt;/del&gt;&lt;/a&gt;.  CleanDatabaseSetup calls getTables() and so it causes quite a lot of tests to fail and the tests are hanging (I think) because the database is not properly cleaned up.  I think the full run will have to wait until we have a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2896&quot; title=&quot;DatabaseMetaData.getTables() fails in TERRORITY_BASED collation database with SQLState 42818: Comparisions between CHAR and CHAR not allowed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2896&quot;&gt;&lt;del&gt;DERBY-2896&lt;/del&gt;&lt;/a&gt;.  Perhaps meanwhile I can try a few individual tests to see if I can pop more issues.&lt;/p&gt;



</comment>
                            <comment id="12513740" author="kmarsden" created="Wed, 18 Jul 2007 23:18:32 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2950&quot; title=&quot;BatchUpdateTest.testMinimalDDLInBatch Fails when run with collation with exception: java.sql.SQLException: Operand of LIKE predicate with type VARCHAR(128) and collation UCS_BASIC is not compatable with LIKE pattern operand with type CHAR(4) and collation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2950&quot;&gt;&lt;del&gt;DERBY-2950&lt;/del&gt;&lt;/a&gt; was found during this testing&lt;/p&gt;</comment>
                            <comment id="12513741" author="kmarsden" created="Wed, 18 Jul 2007 23:19:06 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2951&quot; title=&quot;BatchUpdateTest.testAssociatedParams test fails with collation with exception: Java exception: &amp;#39;ASSERT FAILED type of inserted column[0] = org.apache.derby.iapi.types.CollatorSQLChartype of template column[0] = org.apache.derby.iapi.types.SQLChar: &quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2951&quot;&gt;&lt;del&gt;DERBY-2951&lt;/del&gt;&lt;/a&gt; was found during this testing&lt;/p&gt;</comment>
                            <comment id="12513765" author="kmarsden" created="Thu, 19 Jul 2007 01:16:38 +0100"  >&lt;p&gt;Here are the results of running lang, jdbcapi and store suites on a collated database (running the test org.apache.derbyTesting.functionTests.tests.lang.FullCollationTests. &lt;/p&gt;

&lt;p&gt;I am investigating the failures and have started creating some bugs but thought I would post the full results in case anyone is interested.  &lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12513790" author="kmarsden" created="Thu, 19 Jul 2007 03:25:44 +0100"  >&lt;p&gt;I deleted FullCollation.out.  There seems to be a problem with the run.&lt;/p&gt;</comment>
                            <comment id="12513799" author="kmarsden" created="Thu, 19 Jul 2007 04:34:06 +0100"  >&lt;p&gt;Attaching new test output. There was a problem with the previous run.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12513965" author="mamtas" created="Thu, 19 Jul 2007 19:05:37 +0100"  >&lt;p&gt;Entered &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2959&quot; title=&quot;create table ... as select ... from systemtable with no data fails even when there is no character string type involved. This happens in a territory based database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2959&quot;&gt;&lt;del&gt;DERBY-2959&lt;/del&gt;&lt;/a&gt; for the issue discovered by Kathey in FullCollationTests_out.txt &lt;/p&gt;</comment>
                            <comment id="12515128" author="kmarsden" created="Wed, 25 Jul 2007 01:48:59 +0100"  >&lt;p&gt;Attached is the run of FullCollationTests when I completed this testing.  All issues are either reported, expected failures or are environmental issues where the database could not be found.&lt;/p&gt;
</comment>
                            <comment id="12515129" author="kmarsden" created="Wed, 25 Jul 2007 01:51:15 +0100"  >&lt;p&gt;Completed run of FullCollationTests and filed issues which are linked to this issue.  I also ran derbyall with modified properties to run against a  database with TERRITORY_BASED collation. Issues found are linked to this issue.&lt;/p&gt;

</comment>
                            <comment id="12515153" author="djd" created="Wed, 25 Jul 2007 05:12:43 +0100"  >&lt;p&gt;How repeatable is this task? Should some of the Junit tests that failed be added to CollationTest to run under a different collation?&lt;/p&gt;</comment>
                            <comment id="12515310" author="kmarsden" created="Wed, 25 Jul 2007 16:02:45 +0100"  >&lt;p&gt;In terms of repeatability,  one can run lang/FullCollationTests and compare with the results attached to this issue.  Yes, it would be good to add some of the tests to CollationTest.  I will do that soon, but am currently side-tracked with another task.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12515770" author="kmarsden" created="Thu, 26 Jul 2007 17:38:31 +0100"  >&lt;p&gt;Adding these tests to CollationTest adds about 10 minutes to suites.All&lt;br/&gt;
 suite.addTest(BatchUpdateTest.suite());&lt;br/&gt;
      suite.addTest(GroupByExpressionTest.suite());&lt;br/&gt;
      suite.addTest(UpdatableResultSetTest.suite());&lt;/p&gt;

&lt;p&gt;Would it make more sense for these tests to have a suiteForCollation() that is a subset of tests (the ones that failed) and run embedded only?&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12515792" author="djd" created="Thu, 26 Jul 2007 18:19:01 +0100"  >&lt;p&gt;&amp;gt; Would it make more sense for these tests to have a suiteForCollation() that is a subset of tests (the ones that failed) and run embedded only? &lt;/p&gt;

&lt;p&gt;I would think not, the fixtures that passed were probably also testing collation but didn&apos;t surface any bugs, ie everything was functioning correctly.&lt;br/&gt;
Keeping all of the fixtures would ensure no regressions in the future.&lt;/p&gt;

&lt;p&gt;I agree though that running only embedded makes sense.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12374298">DERBY-2966</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12369509">DERBY-2659</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374180">DERBY-2959</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12374476">DERBY-2973</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374108">DERBY-2950</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374109">DERBY-2951</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374153">DERBY-2955</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374155">DERBY-2956</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374192">DERBY-2960</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374206">DERBY-2961</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374289">DERBY-2964</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374471">DERBY-2972</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12357502" name="DERBY-2656_diff.txt" size="5600" author="kmarsden" created="Wed, 16 May 2007 23:44:05 +0100"/>
                            <attachment id="12362482" name="FullCollation.out" size="129323" author="kmarsden" created="Wed, 25 Jul 2007 01:48:59 +0100"/>
                            <attachment id="12362105" name="FullCollationTests_out.txt" size="1354400" author="kmarsden" created="Thu, 19 Jul 2007 04:34:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 May 2007 16:37:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30556</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy118n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>