<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:50:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1641/DERBY-1641.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1641] Conglomerate requested does not exist after syscs_import_table with FK</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1641</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I have a repeatable sequence that always causes the &quot;Conglomerate (X) requested does not exist&quot; error on my system.  There are several steps.  You can use &quot;ij&quot; as follows:&lt;/p&gt;

&lt;p&gt;1. Start with a new database, e.g. connect &apos;jdbc:derby:test;create=true&apos;;&lt;br/&gt;
2. create table y( pk integer primary key );&lt;br/&gt;
3. insert into y values (123);&lt;br/&gt;
4. create table z( pk integer not null primary key references y );&lt;br/&gt;
5. Create a file containing a single row of ASCII data with the number &quot;123&quot; (in ASCII) in it.  e.g. /tmp/z&lt;br/&gt;
6. call syscs_util.syscs_import_table( null, &apos;Z&apos;, &apos;/tmp/z&apos;, &apos;,&apos;, &apos;&apos;&apos;&apos;, null, 1 );&lt;br/&gt;
7. Try to access the &quot;Z&quot; table, e.g. SELECT * FROM z; or DROP TABLE z;&lt;/p&gt;

&lt;p&gt;At this point, I always get the error.  I can use this sequence in other contexts, but the difference, as far as I can tell, is that the table &quot;Z&quot; has a column that is both PK and FK.&lt;/p&gt;</description>
                <environment>Java 1.5.0_06-b05 Linux (CentOS 4)</environment>
        <key id="12347278">DERBY-1641</key>
            <summary>Conglomerate requested does not exist after syscs_import_table with FK</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mhfrantz">Matt Frantz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Aug 2006 01:07:13 +0100</created>
                <updated>Thu, 13 Dec 2007 09:05:07 +0000</updated>
                            <resolved>Fri, 22 Sep 2006 19:03:44 +0100</resolved>
                                    <version>10.1.3.1</version>
                                    <fixVersion>10.2.2.0</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>SQL</component>
                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12427286" author="kmarsden" created="Thu, 10 Aug 2006 18:53:17 +0100"  >&lt;p&gt;I verified this on 10.2 and verified that I still get the conglomerate does not exist error after exiting ij and reconnecting to the database. Bumping to critical and marking as 10.2 candidate.&lt;/p&gt;

&lt;p&gt;$ java org.apache.derby.tools.ij&lt;br/&gt;
ij version 10.2&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:wombat;create=true&apos;;&lt;br/&gt;
ij&amp;gt; create table y(pk integer primary key);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into y values(123);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create table z( pk integer not null primary key references y );&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_import_table( null, &apos;Z&apos;, &apos;/temp/z&apos;, &apos;,&apos;, &apos;&apos;&apos;&apos;, null,1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from z;&lt;br/&gt;
ERROR XSAI2: The conglomerate (1,009) requested does not exist.&lt;/p&gt;</comment>
                            <comment id="12427307" author="kmarsden" created="Thu, 10 Aug 2006 19:23:59 +0100"  >&lt;p&gt;put this as component store. Not sure if that is right.&lt;/p&gt;</comment>
                            <comment id="12427314" author="mikem" created="Thu, 10 Aug 2006 19:44:34 +0100"  >&lt;p&gt;Adding SQL as component.  Without debugging it is only a guess, but in my experience this kind of  problem is&lt;br/&gt;
almost always a SQL component problem either in datadictionary or  some sort of caching problem.  &lt;br/&gt;
The interesting point is that the import table command is likely using the &quot;bait/switch&quot; bulk load optimization which means that it is avoiding logging everything being imported by creating entirely new  tables and indexes as it &quot;knows&quot; that the existing table is empty and then at the end it switches the datadictionary to point Z at the new underlying store tables.  The bug has the feel that one of the datadictionary references for foreign key was not updated (or if that was not meant to be supported then maybe bait/switch should not have been allowed in this case).&lt;/p&gt;
</comment>
                            <comment id="12435796" author="rhillegas" created="Tue, 19 Sep 2006 15:24:10 +0100"  >&lt;p&gt;Moving to 10.2.2.0&lt;/p&gt;</comment>
                            <comment id="12436948" author="tsuresh" created="Fri, 22 Sep 2006 19:03:44 +0100"  >&lt;p&gt;This is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1854&quot; title=&quot;SYSCS_COMPRESS_TABLE corrupts table with a single column which is both a primary key and a foreign key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1854&quot;&gt;&lt;del&gt;DERBY-1854&lt;/del&gt;&lt;/a&gt; .   Fixed in 10.2 , revision 449013 and in 10.3.  revision  448758.&lt;/p&gt;</comment>
                            <comment id="12551390" author="fuzzylogic" created="Thu, 13 Dec 2007 09:05:07 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12349986">DERBY-1854</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12349986">DERBY-1854</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Aug 2006 17:53:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy103r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>