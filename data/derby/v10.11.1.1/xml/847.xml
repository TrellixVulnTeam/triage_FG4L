<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-847/DERBY-847.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-847] Internationalize NetIndoubtTransaction to NetSqlca in org.apache.derby.client.net</title>
                <link>https://issues.apache.org/jira/browse/DERBY-847</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12327916">DERBY-847</key>
            <summary>Internationalize NetIndoubtTransaction to NetSqlca in org.apache.derby.client.net</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12311751">DERBY-400</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidvc">David Van Couvering</assignee>
                                    <reporter username="davidvc">David Van Couvering</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Jan 2006 02:52:43 +0000</created>
                <updated>Fri, 21 Jan 2011 18:08:37 +0000</updated>
                            <resolved>Wed, 24 May 2006 10:18:17 +0100</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12363857" author="davidvc" created="Wed, 25 Jan 2006 03:37:12 +0000"  >&lt;p&gt;XN451 - XN500&lt;/p&gt;</comment>
                            <comment id="12412596" author="davidvc" created="Sat, 20 May 2006 06:06:42 +0100"  >&lt;p&gt;This is for review.  derbynetclientmats passes except for the locale error I am getting with sysinfo and a strange error in NSinSameVM which I am working on tracking down.&lt;/p&gt;

&lt;p&gt;Besides the i18n of messages for this range, I also added a new static method to SqlException to implement a singleton for the MessageUtil instance configured for the client, so I don&apos;t keep creating instances everywhere.  I also did a little reformatting of Messages.java so that things were better aligned.&lt;/p&gt;</comment>
                            <comment id="12412963" author="dagw" created="Wed, 24 May 2006 01:33:46 +0100"  >&lt;p&gt;I have looked at this patch.&lt;br/&gt;
It looks good, I have just some minor comments!&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I don&apos;t understand the reference to Messages.java; I can&apos;t seem to&lt;br/&gt;
  find that file in the diff.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;SQLException.java:&lt;br/&gt;
  new public method getMessageUtil() lacks java doc. Anyway, good to get rid of those&lt;br/&gt;
  unneccary objects!&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Utils.java:&lt;br/&gt;
   changed line &amp;gt; 80 long:&lt;br/&gt;
   SqlException.getMessageUtil().getTextMessage(MessageId.CONN_PRECISION_TOO_LARGE));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The way the SQLState constructors are invoked, say, in&lt;br/&gt;
  NetPackageRequest.java is hard to verify since constructors don&apos;t have&lt;br/&gt;
  javadoc describing how they should be used.  In this case an Integer&lt;br/&gt;
  object is being passed to  a constructor that takes an Object in that&lt;br/&gt;
  position. I would love to see some javadoc as to what objects are&lt;br/&gt;
  allowed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;NetResultReply.java:&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changed line &amp;gt; 80 characters:&lt;br/&gt;
  SqlException.getMessageUtil().getTextMessage(MessageId.CONN_CURSOR_NOT_OPEN)));&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;SQLState.java :&lt;br/&gt;
  I don&apos;t understand why the new SQLState DRDA_CURSOR_NOT_OPEN is not&lt;br/&gt;
  assigned in the 58 range since it is declared under the header:&lt;br/&gt;
  &quot;Messages whose SQL states are proscribed by DRDA&quot; and that seem to&lt;br/&gt;
  be what the range 58 is for; cf. this header in&lt;br/&gt;
  messages_en.properties:&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;57,58 - DRDA errors with SQLStates required by the spec&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;  and the most other states declared under the same header do have&lt;br/&gt;
  58... range states.  It is listed in messages_en.properties along&lt;br/&gt;
  with the 2D... range in stead, although with the allocated state&lt;br/&gt;
  24501.&lt;/p&gt;

&lt;p&gt;  Disclaimer: I am afraid I don&apos;t understand fully how the allocations&lt;br/&gt;
  are done yet.&lt;/p&gt;



</comment>
                            <comment id="12412971" author="davidvc" created="Wed, 24 May 2006 01:54:38 +0100"  >&lt;p&gt;Thanks, Dag, some responses below&lt;/p&gt;

&lt;p&gt;&amp;lt;DAG&amp;gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I don&apos;t understand the reference to Messages.java; I can&apos;t seem to&lt;br/&gt;
  find that file in the diff.&lt;br/&gt;
&amp;lt;/DAG&amp;gt;&lt;br/&gt;
Sorry, I meant MessageUtil.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;DAG&amp;gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;SQLException.java:&lt;br/&gt;
  new public method getMessageUtil() lacks java doc. Anyway, good to get rid of those&lt;br/&gt;
  unneccary objects!&lt;br/&gt;
&amp;lt;/DAG&amp;gt;&lt;br/&gt;
OK, I will add javadoc&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;DAG&amp;gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Utils.java:&lt;br/&gt;
   changed line &amp;gt; 80 long:&lt;br/&gt;
   SqlException.getMessageUtil().getTextMessage(MessageId.CONN_PRECISION_TOO_LARGE));&lt;br/&gt;
&amp;lt;/DAG&amp;gt;&lt;br/&gt;
OK, will fix&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;DAG&amp;gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The way the SQLState constructors are invoked, say, in&lt;br/&gt;
  NetPackageRequest.java is hard to verify since constructors don&apos;t have&lt;br/&gt;
  javadoc describing how they should be used. In this case an Integer&lt;br/&gt;
  object is being passed to a constructor that takes an Object in that&lt;br/&gt;
  position. I would love to see some javadoc as to what objects are&lt;br/&gt;
  allowed.&lt;br/&gt;
&amp;lt;/DAG&amp;gt;&lt;br/&gt;
Hm, this is pretty standard, it&apos;s the way StandardException in the engine works too.  Basically, &lt;b&gt;any&lt;/b&gt; Java object is acceptable.  The Java messge formatting code substitutes these objects into the localized message (marked with substitution parameters like 
{0}
&lt;p&gt; and &lt;/p&gt;
{1}
&lt;p&gt;) and invokes the toString() method on them.  I can javadoc this though &amp;#8211; but ony for the &quot;main&quot; constructor &amp;#8211; all the other constructors are syntactic sugar that simply delegate to the main constructor.  &lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;DAG&amp;gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;NetResultReply.java:&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changed line &amp;gt; 80 characters:&lt;br/&gt;
  SqlException.getMessageUtil().getTextMessage(MessageId.CONN_CURSOR_NOT_OPEN)));&lt;br/&gt;
&amp;lt;/DAG&amp;gt;&lt;br/&gt;
OK, I&apos;ll fix this.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;DAG&amp;gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;SQLState.java :&lt;br/&gt;
  I don&apos;t understand why the new SQLState DRDA_CURSOR_NOT_OPEN is not&lt;br/&gt;
  assigned in the 58 range since it is declared under the header:&lt;br/&gt;
  &quot;Messages whose SQL states are proscribed by DRDA&quot; and that seem to&lt;br/&gt;
  be what the range 58 is for; cf. this header in&lt;br/&gt;
  messages_en.properties:&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;57,58 - DRDA errors with SQLStates required by the spec&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;  and the most other states declared under the same header do have&lt;br/&gt;
  58... range states. It is listed in messages_en.properties along&lt;br/&gt;
  with the 2D... range in stead, although with the allocated state&lt;br/&gt;
  24501.&lt;/p&gt;

&lt;p&gt;  Disclaimer: I am afraid I don&apos;t understand fully how the allocations&lt;br/&gt;
  are done yet.&lt;br/&gt;
&amp;lt;/DAG&amp;gt;&lt;br/&gt;
Yes, this is all kind of abstruse, and I&apos;m not sure how much I&apos;m supposed to document in the code.  DRDA defines very specific SQL States, some starting with 58 and others not, for specific conditions.   DRDA requires that the &quot;cursor not open&quot; condition be set to 24501, whereas the &quot;no autocommit under XA&quot; must be set to 2D521.  Don&apos;t ask me why, I don&apos;t know why.  It&apos;s in the spec.  So, anyway, I grouped all SQL States required by the DRDA spec into a single area in SQLState.java.&lt;/p&gt;

&lt;p&gt;Is there more I should say in the comments to clarify this?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;
</comment>
                            <comment id="12412991" author="davidvc" created="Wed, 24 May 2006 04:53:16 +0100"  >&lt;p&gt;Updated patch which addresses Dag&apos;s concerns.  &lt;/p&gt;</comment>
                            <comment id="12413027" author="dagw" created="Wed, 24 May 2006 07:19:18 +0100"  >&lt;p&gt;Thanks for addressing my concerns! &lt;/p&gt;

&lt;p&gt;There is one remaining merge conflict section in&lt;br/&gt;
java/engine/org/apache/derby/loc/messages_en.properties:&lt;/p&gt;

&lt;p&gt;+&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; .mine&lt;br/&gt;
+J128=the cursor is not open&lt;br/&gt;
+=======&lt;br/&gt;
 J128=an Open Query command was issued for a query which was already open&lt;br/&gt;
 J129=A PROTOCOL Invalid FDOCA Description Error was detected&lt;br/&gt;
+&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; .r408974&lt;/p&gt;

&lt;p&gt;While you are at it, my patch checking script found this long line added &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
++ java/client/org/apache/derby/client/am/CloseFilterInputStream.java   (working copy)&lt;br/&gt;
            SqlException.getMessageUtil().getTextMessage(MessageId.CONN_ALREADY_CLOSED);&lt;/p&gt;

&lt;p&gt;As for the grouping, I guess you can just change the header a bit:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;2D - DRDA exceptions&lt;br/&gt;
-&amp;gt;&lt;/li&gt;
	&lt;li&gt;2D, 24 - DRDA exceptions&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Otherwise, I say it&apos;s ready to go!&lt;/p&gt;</comment>
                            <comment id="12413051" author="davidvc" created="Wed, 24 May 2006 10:18:17 +0100"  >&lt;p&gt;Resolved, revision 409037&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12334354" name="DERBY-847-1.diff" size="20306" author="davidvc" created="Sat, 20 May 2006 06:06:42 +0100"/>
                            <attachment id="12334460" name="DERBY-847-2.diff" size="24785" author="davidvc" created="Wed, 24 May 2006 04:53:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 May 2006 00:33:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0kqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>