<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2606/DERBY-2606.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2606] Derby should print the parameters to failed statements to the derby.log when it logs the error </title>
                <link>https://issues.apache.org/jira/browse/DERBY-2606</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;It would be good if when derby dumped an error to derby.log it printed the parameters for the failed statement.  Currently the default behaviour is that only the statement text will print.  Users have to set  derby.language.logStatementText=true if they want to see the parameters.  It would be useful if any errors included the parameters as well as the statement text.&lt;/p&gt;

&lt;p&gt;To reproduce &lt;/p&gt;

&lt;p&gt;put derby.stream.error.logSeverityLevel=0 in your derby.properties and run this script:&lt;/p&gt;

&lt;p&gt; connect &apos;jdbc:derby:wombat;create=true&apos;;&lt;br/&gt;
create table t (i int);&lt;br/&gt;
prepare p as &apos;insert into t values&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&apos;;&lt;/p&gt;

&lt;p&gt; execute p using &apos;values(1)&apos;;&lt;br/&gt;
execute p using &apos;values(10000000000000000000000000000000000000000000)&apos;;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12368590">DERBY-2606</key>
            <summary>Derby should print the parameters to failed statements to the derby.log when it logs the error </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 May 2007 22:35:57 +0100</created>
                <updated>Fri, 4 May 2007 21:56:57 +0100</updated>
                            <resolved>Fri, 4 May 2007 21:56:50 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.1.3.2</fixVersion>
                    <fixVersion>10.2.2.1</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12493534" author="djd" created="Thu, 3 May 2007 22:46:16 +0100"  >&lt;p&gt;For encrypted databases this would be an issue because the error log is not encrypted, so having user values appear in the log in clear could be undesirable.&lt;/p&gt;</comment>
                            <comment id="12493543" author="mikem" created="Thu, 3 May 2007 23:26:20 +0100"  >&lt;p&gt;I would like to see this change for as much default behavior as possible.  I find trying to support cases I often get  a database or derby.log and  need to help the user from the data there.  Having the parameters can help me help the user a lot.  For instance in a recent case posted the user is getting the following error in derby.log:&lt;/p&gt;

&lt;p&gt;Database Class Loader started - derby.database.classpath=&apos;&apos;&lt;br/&gt;
2007-05-02 17:41:59.626 GMT Thread &lt;span class=&quot;error&quot;&gt;&amp;#91;DefaultQuartzScheduler_Worker-1,5,main&amp;#93;&lt;/span&gt; (XID = 28872), (SESSIONID =  0), (DATABASE = /opt/jcr/repository/workspaces/default/db), (DRDAID =  null), Cleanup action starting&lt;br/&gt;
2007-05-02 17:41:59.626 GMT Thread &lt;span class=&quot;error&quot;&gt;&amp;#91;DefaultQuartzScheduler_Worker-1,5,main&amp;#93;&lt;/span&gt; (XID = 28872), (SESSIONID =  0), (DATABASE = /opt/jcr/repository/workspaces/default/db), (DRDAID =  null), Failed Statement is: select NODE_DATA from DEFAULT_NODE where  NODE_ID = ? &lt;/p&gt;

&lt;p&gt;What I would like to say  to the user is to make a copy of the db, and run this exact query to determine if the error is &lt;br/&gt;
persistent or runtime, but without the parameter there is no way to know which row is the problem.  I am not even sure&lt;br/&gt;
if check table will find this kind of error. &lt;/p&gt;

&lt;p&gt;Also note that if params were not being used then the data would have shown up in the log, so if we are concerned about &lt;br/&gt;
data showing up in derby.log then I believe there is an existing problem.  I think that if derby is allowed to print statements it should print the params also.  Maybe we need some other option whether it is allowed to print statements at all.  &lt;/p&gt;</comment>
                            <comment id="12493753" author="kmarsden" created="Fri, 4 May 2007 18:39:26 +0100"  >&lt;p&gt;Attaching a better java reproduction for this issue.&lt;/p&gt;</comment>
                            <comment id="12493756" author="kmarsden" created="Fri, 4 May 2007 18:52:36 +0100"  >&lt;p&gt;attaching a patch to print parameter info to derby.log with error reporting.  I agree with Mike that there is already exposure for encrypted databases when the data is part of the statement, so I think that it should be ok to go ahead and commit this patch.   Please let me know if you have objections.  Otherwise I will commit this afternoon.  I did not add a test case because it is a little awkward to parse the log file.  If someone thinks I should add one, please let me know that too.&lt;/p&gt;</comment>
                            <comment id="12493776" author="kristwaa" created="Fri, 4 May 2007 19:52:40 +0100"  >&lt;p&gt;The patch is very simple, and the change also seems like a very useful one to me.&lt;/p&gt;

&lt;p&gt;+1 to commit&lt;/p&gt;</comment>
                            <comment id="12493799" author="kmarsden" created="Fri, 4 May 2007 21:56:50 +0100"  >&lt;p&gt;committed to trunk, 10.1 and 10.2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12356794" name="DERBY_2606_diff.txt" size="640" author="kmarsden" created="Fri, 4 May 2007 18:52:36 +0100"/>
                            <attachment id="12356795" name="DERBY_2606_stat.txt" size="148" author="kmarsden" created="Fri, 4 May 2007 18:53:06 +0100"/>
                            <attachment id="12356793" name="d2602.java" size="1918" author="kmarsden" created="Fri, 4 May 2007 18:39:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 May 2007 21:46:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40055</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>