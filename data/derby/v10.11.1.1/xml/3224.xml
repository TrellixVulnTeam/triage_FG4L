<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:14:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3224/DERBY-3224.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3224] Get Suites.All to run on the phoneME advanced platform</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3224</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I&apos;m trying to get suites.All to run on the phoneME advanced platform.&lt;/p&gt;</description>
                <environment>Product: phoneME Advanced (phoneme_advanced_mr2-b34) &lt;br/&gt;
Profile: Foundation Profile Specification 1.1 &lt;br/&gt;
JVM:     CVM phoneme_advanced_mr2-b34 (interpreter loop) &lt;br/&gt;
</environment>
        <key id="12383104">DERBY-3224</key>
            <summary>Get Suites.All to run on the phoneME advanced platform</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vemund">Vemund &#216;stgaard</assignee>
                                    <reporter username="vemund">Vemund &#216;stgaard</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Nov 2007 10:03:03 +0000</created>
                <updated>Fri, 21 Jan 2011 18:16:51 +0000</updated>
                            <resolved>Fri, 15 Feb 2008 10:04:50 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12544963" author="vemund" created="Fri, 23 Nov 2007 10:10:01 +0000"  >&lt;p&gt;This patch changes &quot;https&quot; to &quot;http&quot; as there is not complete SSL support in phoneME advanced (when built with default settings):&lt;/p&gt;

&lt;p&gt;   static final String OLD_JAR_URL =&lt;br/&gt;
       &quot;https://svn.apache.org/repos/asf/db/derby/jars&quot;;&lt;/p&gt;

&lt;p&gt;in org.apache.derbyTesting.functionTests.tests.upgradeTests._Suite. &lt;/p&gt;</comment>
                            <comment id="12544971" author="johnemb" created="Fri, 23 Nov 2007 10:38:19 +0000"  >&lt;p&gt;Didn&apos;t Myrna fix the &quot;https&quot; issue yesterday?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/_Suite.java?r1=597467&amp;amp;r2=597466&amp;amp;pathrev=597467&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/_Suite.java?r1=597467&amp;amp;r2=597466&amp;amp;pathrev=597467&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12544977" author="vemund" created="Fri, 23 Nov 2007 10:49:05 +0000"  >&lt;p&gt;Oops, she did, I see I misunderstood the comment in her mail yesterday. I&apos;ll just keep this report open until I have the tests running successfully, in case there is anything else that needs to be done.&lt;/p&gt;</comment>
                            <comment id="12559555" author="vemund" created="Wed, 16 Jan 2008 16:11:36 +0000"  >&lt;p&gt;Attaching a new patch for this issue, where I have fixed all the issues I have found in the tests run by suites.All related to running phoneME advanced, and made a small change in ij. The changes are as follows:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;org/apache/derby/iapi/tools/i18n/LocalizedInput.java - The ij tests were running really slowly on this platform, I got a good performance increase from using a BufferedReader on top of the InputStreamReader when ij read from its scriptfiles. The reason is the use of some buffers when doing character conversion. Every time the buffer is full, an exception object would be created, thrown and caught. When ij read 1 char at a time from the InputStream, this would happen 1.5 million times during the LangScripts test. Using the BufferedReader reduced the number of exceptions to 92, and made the test run a lot faster on this platform.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;GrantRevokeTest - Added some code to clean up between tests, failed on phoneME advanced as the tests were run in opposite order.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;CollationTest.java and CollationTest2.java - Added code to not run the tests for non-english locales if the locales are not supported.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;ForBitDataTest.java - Added some clean up between tests, as tests got run in opposite order.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;ScrollCursors1Test.java - Added some clean up between tests, as tests got run in opposite order.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;ForUpdateTest.java - Moved code from a test to general setup as it was needed by more than one test and broke if tests were run in oposite order.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;UpdateCursorTest.java - Added some clean up between tests, as tests got run in opposite order.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;CallableTest.java - Changed some asserts to compare Strings instead of Time objects, as I couldn&apos;t find any evidence that the Time objects themselves are required to be equal.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;upgradeTests/_Suite.java -&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12559592" author="djd" created="Wed, 16 Jan 2008 17:17:22 +0000"  >&lt;p&gt;&amp;gt; CallableTest.java - Changed some asserts to compare Strings instead of Time objects, as I couldn&apos;t find any evidence that the Time objects themselves are required to be equal. &lt;/p&gt;

&lt;p&gt;This change worries me, I think it should not be part of this patch and instead separated out.  It may be the test is creating the Time objects incorrectly, or that there really is a bug on the PhoneME platform with Time objects. Changing a test just to make it pass it not always the best approach.&lt;/p&gt;</comment>
                            <comment id="12559594" author="djd" created="Wed, 16 Jan 2008 17:21:20 +0000"  >&lt;p&gt;Or it may require a special assertEquals for java.sql.Time objects, either way we need to be able to test the return value of ResultSet.getTime without having to convert it to a String.&lt;/p&gt;</comment>
                            <comment id="12559936" author="vemund" created="Thu, 17 Jan 2008 14:06:03 +0000"  >&lt;p&gt;It seems that the reason they are not equal is that they represent the same hour/minute/second, but different dates. AssertEquals in junit uses &amp;lt;object1&amp;gt;.equals(object2) which for java.sql.Time falls through to java.util.Date.equals(). This compares the output of getTime() from both objects, &lt;br/&gt;
&quot;thus, two Date objects are equal if and only if the getTime method returns the same long value for both&quot;. Comparing getTime() from my objects I see:&lt;/p&gt;

&lt;p&gt;Time1: -59958280437000 - toString(): 11:06:03&lt;br/&gt;
Time2: 36363000 - toString(): 11:06:03&lt;/p&gt;

&lt;p&gt;The first one is generated with Time.valueOf(&quot;11:06:03&quot;) the second is read from the callable statement. The second one seems to be 11:06:03 after epoch, first one I don&apos;t know.&lt;/p&gt;

&lt;p&gt;The javadoc for java.sql.Time in jsr169 says: &quot;The date components should be set to the &quot;zero epoch&quot; value of January 1, 1970 and should not be accessed.&quot; I am not sure if this is enough to consider it a bug that the date component seems to differ for the two Time objects. &lt;/p&gt;


&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="12559994" author="vemund" created="Thu, 17 Jan 2008 17:02:26 +0000"  >&lt;p&gt;Lance Andersen wrote:&lt;br/&gt;
&amp;gt; You are not going to want to consider the date portion of the Time object at all. Unfortunately how the various Database vendors handle this is something i am working to address as it does not line up with the current specs, and i partially understand why but am not happy about compatibility, even when switching JDBC drivers and utilizing the same database.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; I will be clarifying this in JDBC 4.1 and then working to get this addressed in JSR 169 which is an off-shoot of the JDBC specs.&lt;/p&gt;

&lt;p&gt;The only way I see to compare the Time objects without being influenced by the date portion is to compare what toString() returns.&lt;/p&gt;

&lt;p&gt;So, based on the feedback from Lance and Dan I think the best solution is to add an assertEquals method for Time objects to our test framework that compares the output from Time.toString().&lt;/p&gt;</comment>
                            <comment id="12559996" author="djd" created="Thu, 17 Jan 2008 17:08:36 +0000"  >&lt;p&gt;Did you report the bug to the phoneME people, Time.valueOf should return a TIme object with the data components set to zero?&lt;br/&gt;
While Derby and its tests cannot rely on that, I still think that phoneMe is buggy here.&lt;/p&gt;</comment>
                            <comment id="12560328" author="vemund" created="Fri, 18 Jan 2008 10:30:33 +0000"  >&lt;p&gt;I haven&apos;t reported the bug yet. Since java.sql.Time is in jsr169 and not in CDC/FP I&apos;m not sure if phoneME is the right address, I&apos;ll follow up on it and see where it goes. I&apos;ll make a new patch that fixes this for our testing as suggested above in any case.&lt;/p&gt;</comment>
                            <comment id="12561029" author="vemund" created="Mon, 21 Jan 2008 15:08:36 +0000"  >&lt;p&gt;Updated patch adding an assertEquals() method for Time objects to BaseJDBCTestCase.&lt;/p&gt;</comment>
                            <comment id="12564029" author="vemund" created="Wed, 30 Jan 2008 14:17:08 +0000"  >&lt;p&gt;Forgot to tick the &quot;patch available&quot; box when I uploaded the latest patch.&lt;/p&gt;</comment>
                            <comment id="12565622" author="myrna" created="Tue, 5 Feb 2008 01:45:14 +0000"  >&lt;p&gt;I committed patch 3224-diffv3 with revision 618507&lt;/p&gt;</comment>
                            <comment id="12569221" author="vemund" created="Fri, 15 Feb 2008 10:04:50 +0000"  >&lt;p&gt;Thanks Myrna, I don&apos;t have any more work left on this now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12370112" name="3224-diff" size="681" author="vemund" created="Fri, 23 Nov 2007 10:10:01 +0000"/>
                            <attachment id="12370113" name="3224-diff.stat" size="89" author="vemund" created="Fri, 23 Nov 2007 10:10:01 +0000"/>
                            <attachment id="12373285" name="3224-diffv2" size="12745" author="vemund" created="Wed, 16 Jan 2008 16:11:36 +0000"/>
                            <attachment id="12373286" name="3224-diffv2.stat" size="878" author="vemund" created="Wed, 16 Jan 2008 16:11:36 +0000"/>
                            <attachment id="12373683" name="3224-diffv3" size="12734" author="vemund" created="Mon, 21 Jan 2008 15:08:36 +0000"/>
                            <attachment id="12373684" name="3224-diffv3.stat" size="860" author="vemund" created="Mon, 21 Jan 2008 15:08:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Nov 2007 10:38:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0k2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>