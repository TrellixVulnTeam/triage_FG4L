<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:42 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2908/DERBY-2908.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2908] 10.3.1.0 / 1.1.0 Derby eclipse plugin gives security error referring to user.dir read permission because derby.system.home is set to &apos;.&apos;</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2908</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The Derby nature sets by default -Dderby.system.home=. (set in plugins/eclipse/org.apache.derby.ui/src/org/apache/derby/ui/properties/DerbyProperties.java and checked in plugins/eclipse/org.apache.derby.ui/src/org/apache/derby/uitl/DerbyServerUtils.java)&lt;br/&gt;
With the default security policy, however, such a setting for ij &amp;amp; NetworkServerControl results in a security error in ij.&lt;br/&gt;
(See stack in thread: &lt;a href=&quot;http://www.nabble.com/10.3.1.0b-eclipse-plugin---default-security-tf4030218.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/10.3.1.0b-eclipse-plugin---default-security-tf4030218.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;It&apos;s possible this is a bug in itself...&lt;br/&gt;
One work around is to add the following permission to the default policy file:&lt;br/&gt;
permission java.util.PropertyPermission &quot;user.dir&quot;, &quot;read&quot;;&lt;/p&gt;

&lt;p&gt;Another solution is to not set the derby.system.home to anything by default, and if it&apos;s not set to anything, not pass on -Dderby.system.home= to the networkserver process (specifying -Dderby.system.home= without a value fails to start networkserver).&lt;br/&gt;
This would mean increasing the version of the plugins. To 1.1.1?&lt;/p&gt;

&lt;p&gt;Yet another thing would be to adjust the plugin to handle adjusting the security policy...&lt;/p&gt;
</description>
                <environment>eclipse 3.2.1 with derby 10.3.1.0 core plugin, ui and doc plugin 1.1.0.</environment>
        <key id="12373125">DERBY-2908</key>
            <summary>10.3.1.0 / 1.1.0 Derby eclipse plugin gives security error referring to user.dir read permission because derby.system.home is set to &apos;.&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jul 2007 06:04:22 +0100</created>
                <updated>Tue, 30 Jun 2009 17:12:48 +0100</updated>
                            <resolved>Sun, 8 Jul 2007 16:53:32 +0100</resolved>
                                    <version>10.3.1.4</version>
                    <version>10.4.1.3</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Eclipse Plug-in</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12510688" author="rhillegas" created="Fri, 6 Jul 2007 15:13:57 +0100"  >&lt;p&gt;Attaching derby-2908-patchDefaultPolicy-01.diff. This adds permission to read the user.dir property to the server and template policies.&lt;/p&gt;

&lt;p&gt;I think that this is a reasonable, defensive move. Although the default behavior is to set derby.system.home to user.dir, nothing prevents the user from explicitly stating that they want this default behavior. It&apos;s a minority but not unreasonable usage.&lt;/p&gt;

&lt;p&gt;I am running regression tests just to be safe. If the tests pass, I&apos;m inclined to commit this patch unless someone objects.&lt;/p&gt;</comment>
                            <comment id="12510706" author="djd" created="Fri, 6 Jul 2007 16:26:03 +0100"  >&lt;p&gt;I&apos;d always assumed that derby.system.home had to be an absolute path, but I see there&apos;s nothing in the documentation that states that.&lt;/p&gt;

&lt;p&gt;Note that &apos;.&apos; (dot) has no meaning in Java, thus the eclipse plugin should not be using&lt;/p&gt;

&lt;p&gt;   -Dderby.system.home=. &lt;/p&gt;

&lt;p&gt;as it&apos;s technically non-portable, though likely to work on most operating systems that Derby will run on.&lt;/p&gt;</comment>
                            <comment id="12510732" author="fuzzylogic" created="Fri, 6 Jul 2007 17:41:25 +0100"  >&lt;p&gt;I think it is probably the dot that causes java.io.Win32FileSystem to access the property user.dir in order to get the canonical filename. The security exception is then thrown since the Derby code further up the stack does not have permission to read user.dir. I&apos;d have to look at the code for java.io.Win32FileSystem, but I don&apos;t have that handy right now.&lt;/p&gt;

&lt;p&gt;Clearly some other code path is taken when the dot is not present, since this works normally outside of eclipse (no security exception with no derby.system.home set). If I have some time later to day, I will try removing the default setting of the dot and build the plugin to see if that solves the problem.&lt;/p&gt;</comment>
                            <comment id="12510737" author="rhillegas" created="Fri, 6 Jul 2007 17:53:31 +0100"  >&lt;p&gt;Committed derby-2908-patchDefaultPolicy-01.diff to trunk at subversion revision 553949. Ported to 10.3 branch at revision 553952.&lt;/p&gt;</comment>
                            <comment id="12510949" author="myrna" created="Sun, 8 Jul 2007 03:26:40 +0100"  >&lt;p&gt;Attaching a patch which modifies the plugin to use &apos;null&apos; by default for derby.system.home. I put some extra if (&amp;lt;derby.system.home&amp;gt; != null) although I&apos;m not sure that was even necessary.&lt;br/&gt;
Also modified the doc to reflect a change in the default value.&lt;br/&gt;
Increased the plugin versions to 1.1.1. for this.&lt;/p&gt;

&lt;p&gt;If this looks ok, and someone checks tonight (California time) then I wonder if I should undo Rick&apos;s changes to the default policy file &amp;amp; documentation,...?&lt;/p&gt;</comment>
                            <comment id="12510950" author="myrna" created="Sun, 8 Jul 2007 03:27:21 +0100"  >&lt;p&gt;forgot to mention, I generated the patch on the 10.3 branch. But I don&apos;t think that matters at this point.&lt;/p&gt;</comment>
                            <comment id="12510952" author="myrna" created="Sun, 8 Jul 2007 03:40:42 +0100"  >&lt;p&gt;forgot to update the screen shot, removed older file.&lt;/p&gt;</comment>
                            <comment id="12510956" author="myrna" created="Sun, 8 Jul 2007 06:06:49 +0100"  >&lt;p&gt;attaching zip file for generated 1.1.1 plugins.&lt;/p&gt;</comment>
                            <comment id="12510981" author="myrna" created="Sun, 8 Jul 2007 16:46:15 +0100"  >&lt;p&gt;After some more thinking, I realized that even though the solution to modify the plugins is valid, we cannot do away with the user.dir read permissions...The change of the default would only affect new projects; existing projects (that did not have the default modified, which I would think are most) will still have the &apos;,&apos; as derby.system.home, thus causing the security error without the user.dir read permission.&lt;/p&gt;

&lt;p&gt;So, we&apos;ll live with the work-around of keeping the user.dir read permission in the default policy, and we can implement the change to the plugin e.g. in version 10.4...&lt;br/&gt;
At that time, it would probably be a good idea to add functionality to the plugin to enable editing the default policy.&lt;/p&gt;

&lt;p&gt;I&apos;ll log a new bug, and closing this one as fixed (and roll it into the release notes).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12373255">DERBY-2913</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12361367" name="DERBY-2908_plugin111.diff" size="4093" author="myrna" created="Sun, 8 Jul 2007 03:40:42 +0100"/>
                            <attachment id="12361366" name="DERBY-2908_plugin111.stat" size="1944" author="myrna" created="Sun, 8 Jul 2007 03:40:42 +0100"/>
                            <attachment id="12361303" name="derby-2908-patchDefaultPolicy-01.diff" size="1252" author="rhillegas" created="Fri, 6 Jul 2007 15:13:57 +0100"/>
                            <attachment id="12361368" name="derby_ecplipse_plugins_1.1.1_2908.zip" size="877589" author="myrna" created="Sun, 8 Jul 2007 06:06:49 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Jul 2007 14:13:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0uhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>