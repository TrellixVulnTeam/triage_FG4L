<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:30:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4148/DERBY-4148.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4148] NullPointerException in system.sttest run with 10.5.1.0</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4148</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I see the following stack trace on line 22615 of the redirected output:&lt;/p&gt;

&lt;p&gt;Thread finished: 1&lt;br/&gt;
complete initial data&lt;br/&gt;
total memory: 50713600 free: 3130088 Tue Mar 31 23:39:47 PDT 2009&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.utils.Datatypes.update_one_row(Datatypes.java:612)&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.Sttest.run(Sttest.java:387)&lt;br/&gt;
Exception in thread &quot;Thread-9&quot; java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.Sttest.run(Sttest.java:435)&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.utils.Datatypes.update_one_row(Datatypes.java:612)&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.Sttest.run(Sttest.java:387)&lt;br/&gt;
Exception in thread &quot;Thread-10&quot; java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.Sttest.run(Sttest.java:435)&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.utils.Datatypes.update_one_row(Datatypes.java:612)&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.Sttest.run(Sttest.java:387)&lt;br/&gt;
Exception in thread &quot;Thread-11&quot; java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derbyTesting.system.sttest.Sttest.run(Sttest.java:435)&lt;br/&gt;
quantity in pick_some is: 1&lt;br/&gt;
0 rows deleted&lt;/p&gt;

&lt;p&gt;Matching this up with the derby.log -  the first entry in derby.log is 2009-04-01 03:01:52.432 GMT, and ls -al shows 2009-03-31 20:01 PDT for the creation of testDB, so time diff was 7 hours - shows nothing of interest. The last entry in derby.log is at 2009-04-01 06:52:15.595 GMT, so only 3 hours later.&lt;/p&gt;

&lt;p&gt;I&apos;ve seen the same thing 3 times - this needs to be analyzed further.&lt;br/&gt;
I will also run on another machine, and run with sane jars to see if we get any stack trace of other help from derby.log.&lt;/p&gt;</description>
                <environment>Linux 2.6.16.60-0.34-bigsmp #1 SMP Fri Jan 16 14:59:01 UTC 2009 i686 i686 i386 GNU/Linux; &lt;br/&gt;
java -version:&lt;br/&gt;
java version &amp;quot;1.6.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pxi3260sr3-20081106_07(SR3))&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260-20081105_25433 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20081105_025433_lHdSMr&lt;br/&gt;
JIT  - r9_20081031_1330&lt;br/&gt;
GC   - 20081027_AB)&lt;br/&gt;
JCL  - 20081106_01</environment>
        <key id="12422149">DERBY-4148</key>
            <summary>NullPointerException in system.sttest run with 10.5.1.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Apr 2009 19:57:52 +0100</created>
                <updated>Mon, 4 May 2009 19:24:10 +0100</updated>
                            <resolved>Thu, 9 Apr 2009 18:55:44 +0100</resolved>
                                    <version>10.4.2.0</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12696654" author="myrna" created="Tue, 7 Apr 2009 18:57:56 +0100"  >&lt;p&gt;I see the same on another machine (both were linux, by the way) and with the sane build, but there was no more info in derby.log.&lt;/p&gt;</comment>
                            <comment id="12696731" author="myrna" created="Tue, 7 Apr 2009 21:32:17 +0100"  >&lt;p&gt;Based on a code inspection, it seems to me the problem is that in Datatypes.java, method update_one_row, the Reader StreamReader is always initialized to null, and always closed (in line 612), but only ever modified if the datatype is a CLOB.  So, it should give a NPE for all other datatypes.&lt;br/&gt;
The closing should be conditional for null.&lt;br/&gt;
As this test has been unchanged in the last 2 years, I&apos;d expect this to be the same with 10.4.&lt;br/&gt;
I&apos;ll start a 10.4 run and see.&lt;/p&gt;</comment>
                            <comment id="12697282" author="myrna" created="Wed, 8 Apr 2009 23:57:55 +0100"  >&lt;p&gt;I did see this with my 10.4 test run. I also spotted a similar issue with streamIn in the same method - it&apos;s only ever set when we&apos;re dealing with a blob.&lt;br/&gt;
Attaching a minor patch that addresses these two NPEs. Running a trial of the fixed up test now. If OK, I&apos;ll commit &amp;amp; backport this minor change to the test.&lt;/p&gt;</comment>
                            <comment id="12697575" author="myrna" created="Thu, 9 Apr 2009 18:55:44 +0100"  >&lt;p&gt;committed the patch with revision 763743 to trunk, backported to 10.5 with revision 763748.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12405023" name="DERBY-4148.diff" size="735" author="myrna" created="Wed, 8 Apr 2009 23:57:55 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24061</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0x5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>