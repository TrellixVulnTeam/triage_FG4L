<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3466/DERBY-3466.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3466] Investigate ability to run multiple Derby systems in same JVM with different sets of MBeans.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3466</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;One of the reasons for JMX was to move away from system properties (specifically derby.system.home) to allow multiple Derby systems running within the same virtual machine. It would be good to get some unique naming/attribute scheme in the ObjectNames up front rather than only have it in some later version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12389551">DERBY-3466</key>
            <summary>Investigate ability to run multiple Derby systems in same JVM with different sets of MBeans.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12344126">DERBY-1387</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2008 00:49:03 +0000</created>
                <updated>Fri, 7 Mar 2008 14:52:14 +0000</updated>
                            <resolved>Thu, 6 Mar 2008 21:19:34 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12572358" author="djd" created="Tue, 26 Feb 2008 05:06:36 +0000"  >&lt;p&gt;A simple initial scheme could be to have a system attribute for each MBean registered by Derby. The JMXManagamentService could automatically add this to the ObjectName when MBeans are registered with it. Initially a newly created UUID could be used as the system identifier. I have some code that does this, I&apos;ll submit a patch soon.&lt;/p&gt;

&lt;p&gt;Future options could allow the application to provide a system identifier in derby.properties.&lt;/p&gt;</comment>
                            <comment id="12572672" author="djd" created="Tue, 26 Feb 2008 21:41:07 +0000"  >&lt;p&gt;Patch that adds a runtime system identifier to the ObjectName Derby uses to register MBeans in the form of the key property system.&lt;/p&gt;

&lt;p&gt;ManagementMBean gains a getSystemIdentifier method which allows the application registered MBean to obtain the system identifier for the system it is monitoring.&lt;/p&gt;

&lt;p&gt;The tests are enhanced to have a utility method that returns a valid ObjectName for the system under test given a set of key properties.&lt;/p&gt;

&lt;p&gt;javadoc expanded to explain the system identifier.&lt;/p&gt;</comment>
                            <comment id="12575700" author="johnemb" created="Thu, 6 Mar 2008 13:38:57 +0000"  >&lt;p&gt;My first impression was that the 128-bit identifier kind of clutters the MBean view in JConsole (et. al.), and seems to provide little value as of yet. I&apos;m afraid users will ask themselves what the purpose of this number is. However, I agree it can be useful if a solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1228&quot; title=&quot;Make it possible to run multiple instances of Derby within the same VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1228&quot;&gt;DERBY-1228&lt;/a&gt; is provided*, and that adding such mandatory key properties to all object names later might be more problematic than doing it now.&lt;/p&gt;

&lt;p&gt;Making it possible to set a custom identifier (e.g. &quot;myDerbySystem2&quot; instead of a default such as &quot;c013800d-0118-8425-3abf-fffff03de2d0&quot;) as a property or something would provide users with an option to reduce the &quot;clutter&quot; somewhat, so I&apos;m all for that.&lt;/p&gt;

&lt;p&gt;*) &lt;br/&gt;
So the system identifiers that are now part of all of Derby MBeans&apos; ObjectNames are there in case &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1228&quot; title=&quot;Make it possible to run multiple instances of Derby within the same VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1228&quot;&gt;DERBY-1228&lt;/a&gt; (&quot;Make it possible to run multiple instances of Derby within the same VM&quot;) is resolved? Or is it possible to run multiple Derby systems in the same JVM today?&lt;/p&gt;</comment>
                            <comment id="12575717" author="djd" created="Thu, 6 Mar 2008 14:34:29 +0000"  >&lt;p&gt;&amp;gt; So the system identifiers that are now part of all of Derby MBeans&apos; ObjectNames are there in case &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1228&quot; title=&quot;Make it possible to run multiple instances of Derby within the same VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1228&quot;&gt;DERBY-1228&lt;/a&gt; (&quot;Make it possible to run multiple instances of Derby within the same VM&quot;) is resolved? Or is it possible to run multiple Derby systems in the same JVM today? &lt;/p&gt;


&lt;p&gt;It&apos;s possible to run multiple Derby systems today in the same virtual machine using different classloaders. The upgrade test does it.&lt;/p&gt;

&lt;p&gt;The key point about &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1228&quot; title=&quot;Make it possible to run multiple instances of Derby within the same VM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1228&quot;&gt;DERBY-1228&lt;/a&gt; is running in the same virtual machine with a different configuration, namely derby.system.home, not really the multiple classloader bit.&lt;/p&gt;</comment>
                            <comment id="12575885" author="djd" created="Thu, 6 Mar 2008 21:11:21 +0000"  >&lt;p&gt;&amp;gt; My first impression was that the 128-bit identifier kind of clutters the MBean view in JConsole (et. al.), &lt;/p&gt;

&lt;p&gt;We shouldn&apos;t lose sight of the fact that Derby&apos;s MBeans are there to provide a management and monitoring &lt;b&gt;api&lt;/b&gt; for Derby through a standard mechanism (JMX).&lt;/p&gt;

&lt;p&gt;Jconsole is just one way of providing a GUI to manipulate these MBeans and is just a general purpose tool, so we shouldn&apos;t get too caught up on how they appear in it.&lt;/p&gt;

&lt;p&gt;Applications that using Derby are unlikely to show direct representations of the MBeans, instead just making calls to their api attributes and operations. Those applications do need a way of ensuring they are calling the MBean for the correct Derby system, that&apos;s really what the system identifier is for, especially in the future when  it may be more typical to support multiple derby instances in a jvm, with the possibility of some of those being &quot;old 10.4&quot; versions.&lt;/p&gt;</comment>
                            <comment id="12575887" author="djd" created="Thu, 6 Mar 2008 21:19:34 +0000"  >&lt;p&gt;Simple newly created UUID scheme added as system identifier in the ObjectName for each MBean registered by Derby.&lt;br/&gt;
Further improvements can be separate issues.&lt;/p&gt;</comment>
                            <comment id="12576119" author="johnemb" created="Fri, 7 Mar 2008 10:26:44 +0000"  >&lt;p&gt;I agree we should not put too much effort into how the presentation of Derby&apos;s MBeans will look in generic tools without an additional abstraction layer, although I&apos;m sure a large portion of Derby&apos;s JMX users will access the beans directly this way, at least to begin with.&lt;/p&gt;

&lt;p&gt;One more question:&lt;br/&gt;
Other than by accessing Derby&apos;s MBeans, how can a user determine the value of the system identifier? Is it being exposed by some other public API as well?&lt;/p&gt;</comment>
                            <comment id="12576221" author="djd" created="Fri, 7 Mar 2008 14:52:14 +0000"  >&lt;p&gt;Currently the system identifier is only exposed through the ManagementMBean (see o.a.d.mbeans.package..html for info)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12376552" name="d3466_mbean_system_id.txt" size="11657" author="djd" created="Tue, 26 Feb 2008 21:41:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Mar 2008 13:38:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0z67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>