<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5445/DERBY-5445.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5445] Enhance existing concurrency test to stress sequence generators to also stress identity columns</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5445</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4565&quot; title=&quot;Create concurrency test to stress sequence generators.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4565&quot;&gt;&lt;del&gt;DERBY-4565&lt;/del&gt;&lt;/a&gt; added a concurrency test for sequence generators to test the possible race condition for allocating a new range of pre-allocated numbers for the sequence. I have been looking at enhancing that test to provide similar test for identity columns. I plan to add another command line parameter to the test which will run the concurrency test to stress identity column generator.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525736">DERBY-5445</key>
            <summary>Enhance existing concurrency test to stress sequence generators to also stress identity columns</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2011 22:26:42 +0100</created>
                <updated>Fri, 15 Nov 2013 08:15:18 +0000</updated>
                            <resolved>Wed, 5 Sep 2012 02:32:19 +0100</resolved>
                                    <version>10.8.2.2</version>
                    <version>10.9.1.0</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13121414" author="mamtas" created="Wed, 5 Oct 2011 21:05:41 +0100"  >&lt;p&gt;For some reason, my commit 1179374 for this jira has not yet been assoicated here. The commit had added means to stress test identity columns under concurrent thread. The commit comments are as follows&lt;/p&gt;

&lt;p&gt;DERBY--5445 (Enhance existing concurrency test to stress sequence generators to also stress identity columns)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4565&quot; title=&quot;Create concurrency test to stress sequence generators.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4565&quot;&gt;&lt;del&gt;DERBY-4565&lt;/del&gt;&lt;/a&gt; added a concurrency test to stress sequence generation. I am making simple modifications to that test to add identity column stress testing. Based on a command line parameter, the test will either do sequence generation testing or identity column testing. If no parameter is specified, it will default to doing sequene generation testing.&lt;/p&gt;

&lt;p&gt;The test already takes number of parameters. One of those parameters is load options parameter. Load option parameter is indicated by -load_opts on command line and it is followed by a comma separated list of sub-parameters. An eg of load option parameter is as follows&lt;br/&gt;
-load_opts debugging=1,numberOfGenerators=5,tablesPerGenerator=10,insertsPerTransaction=100&lt;br/&gt;
I am adding another pair to the comma separated sub-parameters,namely identityTest=aNumber. If identityTest is 1, then the test will do identity column stress testing. For any other value for identityTest, the test will do sequence generation testing. If the user doesn&apos;t specify identityTest in load options, the test will perform sequence generation testing.&lt;/p&gt;

&lt;p&gt;eg of asking the test to do identity column testing&lt;br/&gt;
java org.apache.derbyTesting.perf.clients.Runner -driver org.apache.derby.jdbc.EmbeddedDriver -init -load seq_gen -load_opts debugging=1,numberOfGenerators=5,tablesPerGenerator=10,insertsPerTransaction=100,identityTest=1 -gen b2b -threads 10&lt;/p&gt;

&lt;p&gt;Two possible way of asking the test to do sequence generation testing(identityTest set to a value other than 1 or identityTest is not specified)&lt;br/&gt;
java org.apache.derbyTesting.perf.clients.Runner -driver org.apache.derby.jdbc.EmbeddedDriver -init -load seq_gen -load_opts debugging=1,numberOfGenerators=5,tablesPerGenerator=10,insertsPerTransaction=100,identityTest=2 -gen b2b -threads 10&lt;br/&gt;
OR&lt;br/&gt;
java org.apache.derbyTesting.perf.clients.Runner -driver org.apache.derby.jdbc.EmbeddedDriver -init -load seq_gen -load_opts debugging=1,numberOfGenerators=5,tablesPerGenerator=10,insertsPerTransaction=100 -gen b2b -threads 10&lt;/p&gt;

&lt;p&gt;When I run the test for identity columns, I can consistently see it running into derby lock time out with nested sequencec contention error while trying to get current identity value and advancing(this is what we want to achieve from the test ie that it is able to stress the functionality enough to run into contention while trying to get next range for identity columns.) Additionally, there are some lock time out errors raised by store while trying to update system catalog(this is expected too because of multiple threads simulataneously trying to do inserts into a table with identity column). I also in my codeline reverted to changes before &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5426&quot; title=&quot;Improve the error raised by too much contention on a sequence/identity.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5426&quot;&gt;&lt;del&gt;DERBY-5426&lt;/del&gt;&lt;/a&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4526&quot; title=&quot;A query (bug1) or a view (bug2) from a smaller db is at least order of magnitude slower than from a larger db despite indexes; the smalller db stores a subset of data stored in the larger db; the databases were created using the same script.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4526&quot;&gt;&lt;del&gt;DERBY-4526&lt;/del&gt;&lt;/a&gt; is Improve the error raised by too much contention on a sequence/identity.) was fixed and saw sequence contention errors (without the lock time out error encapsulation).&lt;/p&gt;</comment>
                            <comment id="13121422" author="mamtas" created="Wed, 5 Oct 2011 21:08:01 +0100"  >&lt;p&gt;I was wondering how often does java org.apache.derbyTesting.perf.clients.Runner get run? Don&apos;t think it is part of junit suite. Does it get run as part of a new release process?&lt;/p&gt;</comment>
                            <comment id="13121447" author="kristwaa" created="Wed, 5 Oct 2011 21:32:38 +0100"  >&lt;p&gt;Every day?&lt;br/&gt;
See &lt;a href=&quot;http://home.online.no/~olmsan/derby/perf/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://home.online.no/~olmsan/derby/perf/&lt;/a&gt; , accessible from &lt;a href=&quot;http://dbtg.foundry.sun.com/derby/test/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.foundry.sun.com/derby/test/&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Since the results don&apos;t make sense without comparing them over time (on the same hardware, os, JVM, etc), I don&apos;t think they&apos;re well suited for running as part of suite.All. Note also that the results can be rather unstable, so to draw conclusions one has to look at the numbers for a longer period of time.&lt;br/&gt;
I don&apos;t know if there are any other performance test comparing performance over time for Derby.&lt;/p&gt;</comment>
                            <comment id="13125719" author="knutanders" created="Wed, 12 Oct 2011 12:19:25 +0100"  >&lt;p&gt;&amp;gt; For some reason, my commit 1179374 for this jira has not yet been&lt;br/&gt;
&amp;gt; assoicated here. The commit had added means to stress test identity&lt;br/&gt;
&amp;gt; columns under concurrent thread. The commit comments are as follows&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; DERBY--5445 (...)&lt;/p&gt;

&lt;p&gt;Probably the extra hyphen is why it didn&apos;t get associated with the issue.&lt;/p&gt;</comment>
                            <comment id="13125889" author="mamtas" created="Wed, 12 Oct 2011 15:43:10 +0100"  >&lt;p&gt;Knut, thanks for noticing that extra hyphen. I have editted the svn comment to fix it.&lt;/p&gt;</comment>
                            <comment id="13128746" author="knutanders" created="Mon, 17 Oct 2011 10:26:05 +0100"  >&lt;p&gt;The original &quot;initializing database...&quot; message was changed by this issue to &quot;initializing database for identity column testing...&quot; or &quot;initializing database for sequence generator testing...&quot;&lt;/p&gt;

&lt;p&gt;Although the new messages are more accurate when testing identity columns or sequence generators, they are wrong when running the other tests that don&apos;t use identity columns or sequence generators.&lt;/p&gt;

&lt;p&gt;The attached patch changes the message back to the original.&lt;/p&gt;

&lt;p&gt;Committed revision 1185056.&lt;/p&gt;</comment>
                            <comment id="13213102" author="myrna" created="Tue, 21 Feb 2012 23:21:44 +0000"  >&lt;p&gt;Is there more expected on this issue?&lt;/p&gt;</comment>
                            <comment id="13823457" author="knutanders" created="Fri, 15 Nov 2013 08:15:18 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12440016">DERBY-4437</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12457305">DERBY-4565</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12499274" name="fix-init-msg.diff" size="1491" author="knutanders" created="Mon, 17 Oct 2011 10:26:05 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Oct 2011 20:32:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0a7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35471</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>