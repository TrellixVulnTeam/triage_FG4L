<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5598/DERBY-5598.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5598] testStartWithPrintWriter(org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetNewServerTest)junit.framework.AssertionFailedError: Num of log item should add</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5598</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I saw this failure on 10.8 IBM 1.6 on Windows for Feb 1, 2012, build 1239450&lt;/p&gt;


&lt;p&gt;testStartWithPrintWriter(org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetNewServerTest)junit.framework.AssertionFailedError: Num of log item should add&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetNewServerTest.testStartWithPrintWriter(DerbyNetNewServerTest.java:95)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_8/windows/testlog/ibm16/1239450-suites.All_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_8/windows/testlog/ibm16/1239450-suites.All_diff.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541097">DERBY-5598</key>
            <summary>testStartWithPrintWriter(org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetNewServerTest)junit.framework.AssertionFailedError: Num of log item should add</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Feb 2012 16:15:59 +0000</created>
                <updated>Fri, 15 Nov 2013 08:15:11 +0000</updated>
                            <resolved>Wed, 8 Feb 2012 10:12:35 +0000</resolved>
                                    <version>10.8.3.0</version>
                                    <fixVersion>10.8.3.0</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Network Server</component>
                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13202507" author="knutanders" created="Tue, 7 Feb 2012 16:23:20 +0000"  >&lt;p&gt;This problem looks similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4201&quot; title=&quot;SecureServerTest AssertionFailedError: Timed out waiting for network server to start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4201&quot;&gt;&lt;del&gt;DERBY-4201&lt;/del&gt;&lt;/a&gt;, and it reproduces consistently in my environment with the repro.diff patch attached to that issue.&lt;/p&gt;

&lt;p&gt;The problem is that NetworkServerControl.shutdown() returns once the server socket stops responding, whereas NetworkServerControlImpl.blockingStart() doesn&apos;t print the message about successful shutdown until after the server socket has been closed. So it is possible that the test checks the contents of the log after the server socket has been closed, but before the message has actually been written to the log.&lt;/p&gt;

&lt;p&gt;The attached patch attempts to solve this race condition by making the test wait and re-read the log if the message doesn&apos;t show up immediately. This makes the test pass in my environment, also in combination with the repro patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4201&quot; title=&quot;SecureServerTest AssertionFailedError: Timed out waiting for network server to start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4201&quot;&gt;&lt;del&gt;DERBY-4201&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13203439" author="knutanders" created="Wed, 8 Feb 2012 10:12:35 +0000"  >&lt;p&gt;Committed revision 1241841.&lt;br/&gt;
Merged to 10.8 and committed revision 1241842.&lt;/p&gt;</comment>
                            <comment id="13823411" author="knutanders" created="Fri, 15 Nov 2013 08:15:11 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12535750">DERBY-5547</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12424187">DERBY-4201</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513627" name="d5598.diff" size="1334" author="knutanders" created="Tue, 7 Feb 2012 16:23:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2012 16:23:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0e67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36114</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>