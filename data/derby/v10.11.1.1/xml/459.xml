<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:47:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-459/DERBY-459.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-459] lang/errorStream.java fails intermittently on Windows 2003 server</title>
                <link>https://issues.apache.org/jira/browse/DERBY-459</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Philips spotted this problem on a Windows 2003 server:&lt;/p&gt;

&lt;p&gt;(mail quote):&lt;/p&gt;

&lt;p&gt;I ran derbyall on a new machine and the lang/errorStream.java test &lt;br/&gt;
fails. I&apos;ve run the same test successfully on 3 other machines and the &lt;br/&gt;
only discernable difference I am able to come up with is the operating &lt;br/&gt;
system (XP vs Windows 2003 Server on the failing machine). Also the &lt;br/&gt;
error in question seems to suggest that the problem is with an empty log &lt;br/&gt;
file, I&apos;ve also attached a copy of that non empty log file. At this &lt;br/&gt;
point I&apos;m open to suggestions.&lt;/p&gt;

&lt;p&gt;Philip&lt;br/&gt;
------------------ Java Information ------------------&lt;br/&gt;
Java Version:    1.4.2_08&lt;br/&gt;
Java Vendor:     Sun Microsystems Inc.&lt;br/&gt;
Java home:       c:\j2sdk1.4.2_08\jre&lt;br/&gt;
Java classpath:  .;c:\derby\derbyMain\classes;c:\derby\db2jcc.jar;c:\derby\db2jcc_license_c.jar;C:\derby\derbyMain\tools\java\jakarta-oro-2.0.8.jar;C:\derby\derbyMain\tools\java\geronimo-spec-servlet-2.4-rc4.jar;C:\j2sdk1.4.2_08\lib\tools.jar;.;C:\j2sdk1.4.2_08\lib;C:\IBM\SQLLIB\java\db2java.zip;C:\IBM\SQLLIB\java\db2jcc.jar;C:\IBM\SQLLIB\java\sqlj.zip;C:\IBM\SQLLIB\bin;C:\IBM\SQLLIB\java\common.jar&lt;br/&gt;
OS name:         Windows 2003&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version:      5.2&lt;br/&gt;
Java user name:  db2admin&lt;br/&gt;
Java user home:  C:\Documents and Settings\db2admin&lt;br/&gt;
Java user dir:   C:\Derby\derbyMain\singleTest&lt;br/&gt;
java.specification.name: Java Platform API Specification&lt;br/&gt;
java.specification.version: 1.4&lt;br/&gt;
--------- Derby Information --------&lt;br/&gt;
JRE - JDBC: J2SE 1.4.2 - JDBC 3.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\Derby\derbyMain\classes&amp;#93;&lt;/span&gt; 10.2.0.0 alpha - (1)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\Derby\db2jcc.jar&amp;#93;&lt;/span&gt; 2.4 - (17)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\Derby\db2jcc_license_c.jar&amp;#93;&lt;/span&gt; 2.4 - (17)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\IBM\SQLLIB\java\db2jcc.jar&amp;#93;&lt;/span&gt; 2.4 - (17)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
----------------- Locale Information -----------------&lt;br/&gt;
Current Locale :  [English/United States &lt;span class=&quot;error&quot;&gt;&amp;#91;en_US&amp;#93;&lt;/span&gt;]&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;de_DE&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;es&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;fr&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;it&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;ja_JP&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;ko_KR&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;pt_BR&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_CN&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_TW&amp;#93;&lt;/span&gt;&lt;br/&gt;
	 version: 10.2.0.0 alpha - (1)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
Framework: embedded&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: errorStream jdk1.4.2_08 2005-07-13 11:24:44 ***&lt;br/&gt;
4 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
5 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
7 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
8 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
9 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
10 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
11 del&lt;br/&gt;
&amp;lt; shutdown ok: XJ015:Derby system shutdown.&lt;br/&gt;
12 del&lt;br/&gt;
&amp;lt; Test errorStream finished successfully&lt;br/&gt;
12 add&lt;br/&gt;
&amp;gt; Test errorStream failed: assertNonEmpty failed:C:\Derby\derbyMain\singleTest\errorStream\VombatusUrsinusHirsutus-err-2.log&lt;br/&gt;
&amp;gt; org.apache.derbyTesting.functionTests.tests.lang.AssertException: assertNonEmpty failed:C:\Derby\derbyMain\singleTest\errorStream\VombatusUrsinusHirsutus-err-2.log&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   errorStream jdk1.4.2_08 2005-07-13 11:24:48 ***&lt;br/&gt;
2005-07-13 14:24:46.671 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; java.io.FileNotFoundException: C:\Derby\derbyMain\singleTest\errorStreamfoo\VombatusUrsinusHirsutus-file-2.log (The system cannot find the path specified)&lt;br/&gt;
----------------------------------------------------------------&lt;br/&gt;
2005-07-13 14:24:46.687 GMT:&lt;br/&gt;
 Booting Derby version The Apache Software Foundation - Apache Derby - 10.2.0.0 alpha - (1): instance c013800d-0105-1095-564f-00004167747a&lt;br/&gt;
on database directory C:\Derby\derbyMain\singleTest\errorStream\VombatusUrsinusHirsutus-2 &lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Database Class Loader started - derby.database.classpath=&apos;&apos;&lt;/p&gt;

&lt;p&gt;2005-07-13 14:24:47.468 GMT:&lt;br/&gt;
Shutting down instance c013800d-0105-1095-564f-00004167747a&lt;br/&gt;
----------------------------------------------------------------&lt;/p&gt;</description>
                <environment>Windows 2003 server, J2SE 1.4.2</environment>
        <key id="12312234">DERBY-459</key>
            <summary>lang/errorStream.java fails intermittently on Windows 2003 server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jul 2005 04:38:22 +0100</created>
                <updated>Thu, 6 Oct 2005 00:11:57 +0100</updated>
                            <resolved>Thu, 6 Oct 2005 00:11:57 +0100</resolved>
                                    <version>10.1.2.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.2.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12315772" author="dagw" created="Thu, 14 Jul 2005 04:47:41 +0100"  >&lt;p&gt;This a race condition. When the test closes the current log (on&lt;br/&gt;
System.err in this case) by redirecting it to&lt;br/&gt;
System.out., it seems the underlying file isnt closed immediately.&lt;br/&gt;
When the file is subsequently checked, the check for non-empty &lt;br/&gt;
races ahead of the actual closing of the file (notice in Philip&apos;s log the&lt;br/&gt;
 file is indeed not empty, it is just the assert which fails).&lt;/p&gt;

&lt;p&gt;An explicit close solved the problem on Philips machine. Posting the patch &lt;br/&gt;
as soon as i have run some more tests.&lt;/p&gt;
</comment>
                            <comment id="12315801" author="dagw" created="Thu, 14 Jul 2005 10:18:07 +0100"  >&lt;p&gt;Patch which fixes the problem; thanks to Philip for finding this and trying the patch.&lt;br/&gt;
It now works on Windows 2003.  I also ran derbyall on Solaris 9, JDK 1.4.2 (no errors) and Windows XP&lt;br/&gt;
to check against regression. The latter has several errors, but run correctly for this test.&lt;/p&gt;</comment>
                            <comment id="12315805" author="djd" created="Thu, 14 Jul 2005 11:30:09 +0100"  >&lt;p&gt;I don&apos;t think bugs should be marked as fixed until their patch is committed.&lt;/p&gt;</comment>
                            <comment id="12315848" author="dagw" created="Fri, 15 Jul 2005 01:17:18 +0100"  >&lt;p&gt;Keep open until committed.&lt;/p&gt;</comment>
                            <comment id="12315964" author="djd" created="Sat, 16 Jul 2005 09:57:39 +0100"  >&lt;p&gt;Committed revision 219265.&lt;/p&gt;</comment>
                            <comment id="12320809" author="acadia_student_01" created="Fri, 2 Sep 2005 02:19:45 +0100"  >&lt;p&gt;Any thought of porting this patch to 10.1? I just ran derbyall on the 10.1 branch and this came up.&lt;/p&gt;</comment>
                            <comment id="12322912" author="dagw" created="Thu, 8 Sep 2005 17:15:36 +0100"  >&lt;p&gt;Back-port patch to the 10.1 branch&lt;/p&gt;</comment>
                            <comment id="12322913" author="dagw" created="Thu, 8 Sep 2005 17:25:15 +0100"  >&lt;p&gt;uploaded a svn merge-command which will port the patch for this issue.&lt;br/&gt;
(assumed current directory is 10.1). I have run derby-all with no errors.&lt;/p&gt;</comment>
                            <comment id="12331371" author="dagw" created="Wed, 5 Oct 2005 20:48:29 +0100"  >&lt;p&gt;Ported to 10.1&lt;/p&gt;</comment>
                            <comment id="12331385" author="dagw" created="Thu, 6 Oct 2005 00:10:16 +0100"  >&lt;p&gt;correcting the &quot;Fixed in&quot; to include both trunk and 10.1&lt;/p&gt;</comment>
                            <comment id="12331386" author="dagw" created="Thu, 6 Oct 2005 00:11:55 +0100"  >&lt;p&gt;updated Fix Version to show bug has been fixed in both 10.1.2.0 and trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12312777" name="459.cmd" size="81" author="dagw" created="Thu, 8 Sep 2005 17:25:15 +0100"/>
                            <attachment id="12311227" name="459.diff" size="556" author="dagw" created="Thu, 14 Jul 2005 10:18:07 +0100"/>
                            <attachment id="12311226" name="459.stat" size="86" author="dagw" created="Thu, 14 Jul 2005 10:18:07 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Jul 2005 10:30:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy17o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>