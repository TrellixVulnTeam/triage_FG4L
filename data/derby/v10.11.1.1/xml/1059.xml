<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1059/DERBY-1059.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1059] call to stored procedure with out params fails in embedded driver</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1059</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;org.apache.derby.impl.jdbc.EmbeddedCallableStatement40 and org.apache.derby.client.am.CallableStatement40 are instantiating Preparewdstament in &lt;br/&gt;
constructor. Becasue of this call to stored procedure with out param fails.&lt;/p&gt;

&lt;p&gt;Instantiatiation of prepared was done to share the common method in prepared statement and callbale statement. But this aporach causes another issue of creating two instance of statement (one by calling super () and another by instantiating prepared statement). &lt;/p&gt;


&lt;p&gt;I can think of two solution of this problem &lt;br/&gt;
1. Create another class which handles the common methods in PrepardStatement40 and CallableStatement40 classes.&lt;br/&gt;
2. Duplicate the common method in both classes. &lt;/p&gt;

&lt;p&gt;I feel 1st one is better. It will will be easier to fix any issue in the common methods and chance to miss to fix in one of the classes will be eliminated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12329497">DERBY-1059</key>
            <summary>call to stored procedure with out params fails in embedded driver</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12328846">DERBY-955</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anurag">Anurag Shekhar</assignee>
                                    <reporter username="anurag">Anurag Shekhar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Feb 2006 22:15:02 +0000</created>
                <updated>Fri, 21 Jan 2011 18:08:30 +0000</updated>
                            <resolved>Sat, 18 Mar 2006 08:35:50 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12368273" author="anurag" created="Wed, 1 Mar 2006 21:00:06 +0000"  >&lt;p&gt;In this patch I have introduced tow new classes&lt;br/&gt;
EmbedPreparedStatmentMethod40&lt;br/&gt;
PreparedStatmentMethod40&lt;br/&gt;
These class have implementation of jdbc4.0 method for prepared statements.&lt;br/&gt;
Method class to Callablestatement40 and PreparedStatement40 classes will be passed on to these class to avoid duplication of code.&lt;/p&gt;

&lt;p&gt;Test case&lt;br/&gt;
No sperate test is provided for these change&lt;br/&gt;
jdbcapi/parameterMapping.java tests callable statment methods with out param.&lt;/p&gt;</comment>
                            <comment id="12368316" author="rhillegas" created="Thu, 2 Mar 2006 02:09:17 +0000"  >&lt;p&gt;Thanks, Anurag, this looks like an improvement. However, lots of useful javadoc has disappeared. Could you add appropriate javadoc to all of the methods in all of these classes?&lt;/p&gt;</comment>
                            <comment id="12369538" author="anurag" created="Thu, 9 Mar 2006 03:32:23 +0000"  >&lt;p&gt;added javadocs in newly added class (PreparedStatementMethods40 and EmbedPreparedStatementMethods40)&lt;/p&gt;</comment>
                            <comment id="12369740" author="davidvc" created="Fri, 10 Mar 2006 05:08:59 +0000"  >&lt;p&gt;It looks like you are using a delegation model rather than an inheritance model for your solution.  Why not have a superclass for EmbedCallableStatement40 and PreparedStatement40 both inherit from a common superclass that has all these shared methods? &lt;/p&gt;

&lt;p&gt;Sorry if I&apos;m missing something.&lt;/p&gt;

&lt;p&gt;Also, it looks like the javadoc for setBlob() and setClob() was removed, any reason for this?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="12369822" author="anurag" created="Fri, 10 Mar 2006 16:34:03 +0000"  >&lt;p&gt;CallableStatement40 and PreparedStatement40 needs to extend their respective 30 classes. &lt;br/&gt;
If we have a new common parent class will have to implement all prepared stament methods (including &lt;br/&gt;
the older methods) in addition to that PreparedStatement  40 and CallableStatement40 will have to redo &lt;br/&gt;
all the steps to create prepared/callable statment. I am assuming that you are not suggesting me to &lt;br/&gt;
change the inheritance structure of pre jdbc4.0 drivers. &lt;/p&gt;

&lt;p&gt;I will add the javadoc for setBlob and setClob. I have removed this by mistake thanks for pointing out.&lt;/p&gt;

&lt;p&gt;anurag&lt;/p&gt;</comment>
                            <comment id="12369868" author="djd" created="Fri, 10 Mar 2006 23:02:35 +0000"  >&lt;p&gt;The existing code uses the inheritence model, which has lead to a small number of duplicated methods.&lt;br/&gt;
Usually  these duplicated methods are very simple, so compilcated logic is not&lt;/p&gt;

&lt;p&gt;I think it would be wise to havea single model for the set of embedded jdbc prepared statement/callable statement&lt;br/&gt;
classes, rather than two models.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if it helps here, but traditionally we have pushed any new methods added in a new JDBC version&lt;br/&gt;
as far up the tree as possible. If there are no requirements on new JDBC 4.0/JSE 6 classes, then it&apos;s fine&lt;br/&gt;
for a JDBC 4.0 method to be in the base EmbePreparedStatement class.&lt;/p&gt;</comment>
                            <comment id="12370098" author="anurag" created="Mon, 13 Mar 2006 04:43:59 +0000"  >&lt;p&gt;So far We have only 4 implemented methods in EmbeddedPreparedStatement40. All these methods can be moved safely, to base class EmbeddedPreparedStatement&lt;/p&gt;

&lt;p&gt;I will move these class to the base class and remove the code from constructer which instantiates PreparedStatement. I will also change CallableStatement methods to not to call PreparedStatement in unimplemented methods but to throw Not implemented exception directorly. &lt;/p&gt;

&lt;p&gt;Based on the conplexity of the methods implemented in future we can take a call about replicating the code in two class.&lt;br/&gt;
I will do the same for network client&lt;/p&gt;</comment>
                            <comment id="12370241" author="anurag" created="Tue, 14 Mar 2006 05:35:00 +0000"  >&lt;p&gt;Move all the implemented methods of PreparedStatement40 and EmbedPreparedStatement40 to the base class PreparedStatement and EmbedPreparedStatement.&lt;/p&gt;

&lt;p&gt;Removed the instantiation of PreparedStatement40 and EmbedPreparedStatement40 from CallableStement40 and EmbedCallableStatement40&lt;/p&gt;

&lt;p&gt;The unimplemented methods in CallableStatement inherited from java.sql.PreparedStement throws NOT_IMPLEMENTED without calling respective PreparedStatement methods.&lt;/p&gt;

&lt;p&gt;derbyall will jdk1.4.2 runs with 7 failure but they are related to i18n. &lt;/p&gt;

&lt;p&gt;jdbcapi/parameterMapping.java still fails with jdk1.6 but now the failure is due to exception changed in 819. I am opening a new jira id to fix all message&lt;br/&gt;
related failure in jdk1.6&lt;/p&gt;</comment>
                            <comment id="12370242" author="anurag" created="Tue, 14 Mar 2006 05:35:48 +0000"  >&lt;p&gt;Move all the implemented methods of PreparedStatement40 and EmbedPreparedStatement40 to the base class PreparedStatement and EmbedPreparedStatement.&lt;/p&gt;

&lt;p&gt;Removed the instantiation of PreparedStatement40 and EmbedPreparedStatement40 from CallableStement40 and EmbedCallableStatement40&lt;/p&gt;

&lt;p&gt;The unimplemented methods in CallableStatement inherited from java.sql.PreparedStement throws NOT_IMPLEMENTED without calling respective PreparedStatement methods.&lt;/p&gt;

&lt;p&gt;derbyall will jdk1.4.2 runs with 7 failure but they are related to i18n. &lt;/p&gt;

&lt;p&gt;jdbcapi/parameterMapping.java still fails with jdk1.6 but now the failure is due to exception changed in 819. I am opening a new jira id to fix all message&lt;br/&gt;
related failure in jdk1.6&lt;/p&gt;</comment>
                            <comment id="12370243" author="anurag" created="Tue, 14 Mar 2006 05:38:09 +0000"  >&lt;p&gt;pleaseignore derby-1059_2.diff attached today its the same as privious patch.&lt;/p&gt;</comment>
                            <comment id="12370761" author="davidvc" created="Fri, 17 Mar 2006 06:30:24 +0000"  >&lt;p&gt;Thanks, Anurag, this looks pretty good.  I do have one question though.  What is the motivation to put the unimplemented methods within the 40 classes rather than in the base classes.  This means each time we implement a method we have to migrate it from the 40 class to the base class?  Is there a reason we can&apos;t put the unimplemented methods in the base class as well?&lt;/p&gt;</comment>
                            <comment id="12370814" author="anurag" created="Fri, 17 Mar 2006 20:03:17 +0000"  >&lt;p&gt;Many of the  Unimplemented method use class introduced in newer version of jdbc4.0. So mving them in base class will make it incompatible with jdk1.3 or jdk1.4. I could move these four class becuase they use class available from jdbc2 onwards.&lt;/p&gt;</comment>
                            <comment id="12370867" author="davidvc" created="Sat, 18 Mar 2006 03:00:55 +0000"  >&lt;p&gt;OK, seems reasonable.  I&apos;ll work on committing this.&lt;/p&gt;</comment>
                            <comment id="12370921" author="davidvc" created="Sat, 18 Mar 2006 08:35:50 +0000"  >&lt;p&gt;Submitted revision 386773&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12323554" name="derby-1059.diff" size="27775" author="anurag" created="Wed, 1 Mar 2006 21:00:06 +0000"/>
                            <attachment id="12324109" name="derby-1059_2.diff" size="38520" author="anurag" created="Tue, 14 Mar 2006 05:35:00 +0000"/>
                            <attachment id="12323948" name="derby-1059_2.diff" size="38520" author="anurag" created="Thu, 9 Mar 2006 03:32:23 +0000"/>
                            <attachment id="12324110" name="derby-1059_3.diff" size="24457" author="anurag" created="Tue, 14 Mar 2006 05:35:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Mar 2006 02:09:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0krz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>