<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3146/DERBY-3146.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3146] Adjust length restriction on user identifiers (authorization ids) to same as other identifiers</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3146</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;While working on roles, I notice that there is a max size of 30 on&lt;br/&gt;
user ids in derby (authorization identifiers), e.g. the check being&lt;br/&gt;
performed in the parser:&lt;/p&gt;

&lt;p&gt;private void checkAuthorizationLength( String authorization)&lt;br/&gt;
:&lt;br/&gt;
   checkIdentifierLengthLimit( authorization, Limits.DB2_MAX_USERID_LENGTH);&lt;br/&gt;
:&lt;/p&gt;

&lt;p&gt;where Limits.DB2_MAX_USERID_LENGTH == 30. I have checked, and I don&apos;t&lt;br/&gt;
think there are any fundamental reasons why Derby can&apos;t lift this DB2&lt;br/&gt;
restriction: Then authorization identifiers would have the same max&lt;br/&gt;
limit as other identifiers: 128 (Limits.MAX_IDENTIFIER_LENGTH).&lt;/p&gt;

&lt;p&gt;Currently, this limit of 30 is enforced for GRANT/REVOKE, i.e. for the&lt;br/&gt;
grantees.&lt;/p&gt;

&lt;p&gt;However, in the CREATE SCHEMA statement, the clause&lt;/p&gt;

&lt;p&gt;         AUTHORIZATION &amp;lt;authorization identifier&amp;gt;&lt;/p&gt;

&lt;p&gt;which allows specifying a schema&apos;s owner, is &lt;b&gt;not&lt;/b&gt; subject to this&lt;br/&gt;
restriction. This is also reflected in the reference documentation for&lt;br/&gt;
system tables:&lt;/p&gt;

&lt;p&gt;SYS.SYSCHEMAS:&lt;/p&gt;

&lt;p&gt;Column Name 	Type 	Length 	Nullability 	Contents&lt;br/&gt;
-------------------------------------------------------------------&lt;br/&gt;
AUTHORIZATIONID VARCHAR 128     false           the authorization&lt;br/&gt;
                                                identifier of the&lt;br/&gt;
                                                owner of the schema  &lt;/p&gt;

&lt;p&gt;SYS.SYSTABLEPERMS:&lt;/p&gt;

&lt;p&gt;Column Name 	Type 	Length 	Nullability 	Contents&lt;br/&gt;
-------------------------------------------------------------------&lt;br/&gt;
GRANTEE 	VARCHAR 30 	False 	        The authorization ID&lt;br/&gt;
                                                of the user to whom&lt;br/&gt;
                                                the privilege is&lt;br/&gt;
                                                granted.  &lt;/p&gt;

&lt;p&gt;Furthermore, the limit is enforced in the authorizer code&lt;br/&gt;
(AuthorizationServiceBase#authenticate). It is also reflected in the&lt;br/&gt;
metadata: EmbedDatabaseMetaData#getMaxUserNameLength.&lt;/p&gt;

&lt;p&gt;I think it would be good to harmonize these two different limits for&lt;br/&gt;
authorization identifier and change the limit to 128&lt;br/&gt;
(Limits.MAX_IDENTIFIER_LENGTH).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12381060">DERBY-3146</key>
            <summary>Adjust length restriction on user identifiers (authorization ids) to same as other identifiers</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2007 15:14:09 +0100</created>
                <updated>Thu, 21 Mar 2013 07:08:41 +0000</updated>
                            <resolved>Thu, 10 May 2012 17:21:17 +0100</resolved>
                                    <version>10.0.2.0</version>
                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                    <version>10.3.1.4</version>
                    <version>10.3.2.1</version>
                    <version>10.3.3.0</version>
                    <version>10.4.1.3</version>
                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                    <version>10.5.2.0</version>
                    <version>10.5.3.0</version>
                    <version>10.6.1.0</version>
                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                    <version>10.8.1.2</version>
                    <version>10.8.2.2</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>JDBC</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12537353" author="bryanpendleton" created="Wed, 24 Oct 2007 17:06:04 +0100"  >&lt;p&gt;This seems like a good idea to me, thanks for logging it!&lt;/p&gt;

&lt;p&gt;Are there upgrade issues with changing the length of system catalog column?&lt;/p&gt;</comment>
                            <comment id="12537555" author="dagw" created="Thu, 25 Oct 2007 10:51:20 +0100"  >&lt;p&gt;Hi Bryan,&lt;/p&gt;

&lt;p&gt;&amp;gt; Are there upgrade issues with changing the length of system catalog column? &lt;/p&gt;

&lt;p&gt;I don&apos;t believe so, because in the catalog code the length restriction is the same&lt;br/&gt;
as for other identifiers:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Permissions tables occurences of authorization id:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(Note that the documentation is slightly misleading here, indicating&lt;br/&gt;
 VARCHAR(30), but that is not what is implemented, apparently.)&lt;/p&gt;

&lt;p&gt;    ij&amp;gt; select cast(columnname as varchar(10)) as columnname, &lt;br/&gt;
               cast(columndatatype as varchar(30)) as columndatatype &lt;br/&gt;
               from sys.syscolumns where columnname like &apos;GRANTOR&apos;;&lt;/p&gt;

&lt;p&gt;    COLUMNNAME|COLUMNDATATYPE                &lt;br/&gt;
    -----------------------------------------&lt;br/&gt;
    GRANTOR   |VARCHAR(128) NOT NULL         &lt;br/&gt;
    GRANTOR   |VARCHAR(128) NOT NULL         &lt;br/&gt;
    GRANTOR   |VARCHAR(128) NOT NULL         &lt;br/&gt;
    GRANTOR   |VARCHAR(128) NOT NULL         &lt;/p&gt;

&lt;p&gt;    ij&amp;gt; select cast(columnname as varchar(10)) as columnname, &lt;br/&gt;
               cast(columndatatype as varchar(30)) as columndatatype &lt;br/&gt;
               from sys.syscolumns where columnname like &apos;GRANTEE&apos;;&lt;/p&gt;

&lt;p&gt;    COLUMNNAME|COLUMNDATATYPE                &lt;br/&gt;
    -----------------------------------------&lt;br/&gt;
    GRANTEE   |VARCHAR(128) NOT NULL         &lt;br/&gt;
    GRANTEE   |VARCHAR(128) NOT NULL         &lt;br/&gt;
    GRANTEE   |VARCHAR(128) NOT NULL         &lt;br/&gt;
    GRANTEE   |VARCHAR(128) NOT NULL         &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;SYSSCHEMA occurence of authorization id:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    ij&amp;gt; select cast(columnname as varchar(20)) as columnname, &lt;br/&gt;
               cast(columndatatype as varchar(30)) as columndatatype &lt;br/&gt;
               from sys.syscolumns where columnname like &apos;AUTHORIZATIONID&apos;;&lt;/p&gt;

&lt;p&gt;    COLUMNNAME          |COLUMNDATATYPE                &lt;br/&gt;
    ---------------------------------------------------&lt;br/&gt;
    AUTHORIZATIONID     |VARCHAR(128) NOT NULL         &lt;/p&gt;

</comment>
                            <comment id="13270704" author="dagw" created="Tue, 8 May 2012 19:49:31 +0100"  >&lt;p&gt;Uploading a patch to lift this restriction in the code. I&apos;ll file a separate patch for the documentation. Running regressions.&lt;/p&gt;</comment>
                            <comment id="13270708" author="dagw" created="Tue, 8 May 2012 19:51:34 +0100"  >&lt;p&gt;Marking release note needed since DataBaseMetaData#getMaxUserNameLength will now return a different number, i.e. 128.&lt;/p&gt;</comment>
                            <comment id="13270710" author="dagw" created="Tue, 8 May 2012 19:52:27 +0100"  >&lt;p&gt;Marking &quot;deviation from standard&quot; since the user name is an SQLIdentifier according to the spec.&lt;/p&gt;</comment>
                            <comment id="13271416" author="dagw" created="Wed, 9 May 2012 14:48:33 +0100"  >&lt;p&gt;Regressions passed, please review.&lt;/p&gt;</comment>
                            <comment id="13271466" author="kristwaa" created="Wed, 9 May 2012 15:51:21 +0100"  >&lt;p&gt;I had a look at the code changes, and they look good to me. +1&lt;/p&gt;

&lt;p&gt;Based on Bryan&apos;s question and Dag&apos;s reply, it seems that any upgrade issues have been considered. Also, since we are going from a smaller to a larger value there shouldn&apos;t be any problems with existing values.&lt;/p&gt;</comment>
                            <comment id="13271866" author="chaase3" created="Wed, 9 May 2012 23:06:08 +0100"  >&lt;p&gt;I&apos;m not sure that a documentation patch will be needed, since we have been documenting the relevant table columns as being VARCHAR(128) since (I think?) 10.5. (If there are any places where we say user names are limited to 30 characters, though, we&apos;d better fix them; I haven&apos;t found any.) &lt;/p&gt;

&lt;p&gt;I don&apos;t think we have ever documented the return value of DataBaseMetaData#getMaxUserNameLength, so we certainly don&apos;t need more than a release note for that.&lt;/p&gt;</comment>
                            <comment id="13272436" author="dagw" created="Thu, 10 May 2012 16:56:04 +0100"  >&lt;p&gt;Thanks, Kim! I didn&apos;t realize we had changed this doc already. Confirmed, I can see it has changed in the 10.5 docs.&lt;/p&gt;</comment>
                            <comment id="13272449" author="dagw" created="Thu, 10 May 2012 17:11:56 +0100"  >&lt;p&gt;Unticking release note needed, since we are more liberal and the metadata are meant to reflect current limits anyway: the API hasn&apos;t changed.&lt;/p&gt;</comment>
                            <comment id="13272456" author="dagw" created="Thu, 10 May 2012 17:18:44 +0100"  >&lt;p&gt;Committed patch at svn 1336775, closing.&lt;/p&gt;</comment>
                            <comment id="13604804" author="trejkaz" created="Sun, 17 Mar 2013 23:56:25 +0000"  >&lt;p&gt;Can we get this back-ported to the 10.8 series?&lt;/p&gt;</comment>
                            <comment id="13608712" author="dagw" created="Thu, 21 Mar 2013 07:08:41 +0000"  >&lt;p&gt;We don&apos;t usually backport functional changes/improvements to old branches, only bug fixes. If you need these changes, you could always consider building it yourself. I just checked and it merges cleanly to the head of the 10.8 branch (check that out first &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;) as&lt;/p&gt;

&lt;p&gt;svn merge -c 1336775 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; svn checkout &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/branches/10.8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/branches/10.8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12553954">DERBY-5744</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12526029" name="DERBY-3146.diff" size="2893" author="dagw" created="Tue, 8 May 2012 19:49:31 +0100"/>
                            <attachment id="12526030" name="DERBY-3146.stat" size="330" author="dagw" created="Tue, 8 May 2012 19:49:31 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Oct 2007 16:06:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0bx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>