<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:31:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4955/DERBY-4955.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4955] Prepared statement fails when GROUP BY and SELECT clause contain the same expression based on a parameter</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4955</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This query:&lt;/p&gt;

&lt;p&gt;conn.prepareStatement(&quot;SELECT &quot; +&lt;br/&gt;
            &quot;CASE WHEN (this.id = ?) THEN 1 ELSE 0 END &quot; +&lt;br/&gt;
            &quot;FROM request_line AS this &quot; +&lt;br/&gt;
            &quot;GROUP BY &quot; +&lt;br/&gt;
            &quot;CASE WHEN (this.id = ?) THEN 1 ELSE 0 END&quot;);&lt;/p&gt;

&lt;p&gt;Fails with the following exception:&lt;/p&gt;

&lt;p&gt;java.sql.SQLSyntaxErrorException: Column reference &apos;THIS.ID&apos; is invalid, or is part of an invalid expression.  For a SELECT list with a GROUP BY, the columns and expressions being selected may only contain valid grouping expressions and valid aggregate expressions.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement20.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement30.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement40.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)&lt;br/&gt;
	at org.wfp.rita.test.derby.DerbyCrashTest.testPrepareQueryWithGroupByParameterFails(DerbyCrashTest.java:82)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:164)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)&lt;br/&gt;
Caused by: java.sql.SQLException: Column reference &apos;THIS.ID&apos; is invalid, or is part of an invalid expression.  For a SELECT list with a GROUP BY, the columns and expressions being selected may only contain valid grouping expressions and valid aggregate expressions.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)&lt;br/&gt;
	... 32 more&lt;br/&gt;
Caused by: ERROR 42Y36: Column reference &apos;THIS.ID&apos; is invalid, or is part of an invalid expression.  For a SELECT list with a GROUP BY, the columns and expressions being selected may only contain valid grouping expressions and valid aggregate expressions.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.VerifyAggregateExpressionsVisitor.visit(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.QueryTreeNode.accept(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.BinaryOperatorNode.acceptChildren(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.QueryTreeNode.accept(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ConditionalNode.acceptChildren(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.QueryTreeNode.accept(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ResultColumn.acceptChildren(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.QueryTreeNode.accept(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.QueryTreeNodeVector.acceptChildren(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.QueryTreeNode.accept(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.SelectNode.bindExpressions(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.DMLStatementNode.bindExpressions(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.DMLStatementNode.bind(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.CursorNode.bindStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)&lt;br/&gt;
	... 26 more&lt;/p&gt;

&lt;p&gt;Derby doesn&apos;t know at SQL compile time whether the SELECT and the GROUP BY expression are equal, because it depends which value would be bound to them &lt;b&gt;after&lt;/b&gt; the statement is prepared. However, when using Hibernate all constant values in a query are bound using parameters, which hits this limitation.&lt;/p&gt;

&lt;p&gt;Test case:&lt;/p&gt;


&lt;p&gt;package org.wfp.rita.test.derby;&lt;/p&gt;

&lt;p&gt;import java.io.File;&lt;br/&gt;
import java.sql.Connection;&lt;br/&gt;
import java.sql.Statement;&lt;br/&gt;
import java.util.Properties;&lt;/p&gt;

&lt;p&gt;import junit.framework.TestCase;&lt;/p&gt;

&lt;p&gt;import org.apache.derby.jdbc.EmbeddedDriver;&lt;/p&gt;

&lt;p&gt;public class DerbyCrashTest extends TestCase&lt;br/&gt;
{    &lt;br/&gt;
    boolean useTempFile = true;&lt;br/&gt;
    Connection conn;&lt;br/&gt;
    Statement s;&lt;/p&gt;

&lt;p&gt;    public void setUp() throws Exception&lt;br/&gt;
    {&lt;br/&gt;
        if (useTempFile)&lt;/p&gt;
        {
            File t = File.createTempFile(&quot;DerbyCrashTest.testCrashOnSelectQuery&quot;,
                &quot;derby&quot;);
            t.delete();
            conn = new EmbeddedDriver().connect(&quot;jdbc:derby:&quot; +
                &quot;;databaseName=&quot; + t.getCanonicalPath() + &quot;;user=rita&quot; +
                &quot;;create=true&quot;, new Properties());
        }
&lt;p&gt;        else&lt;/p&gt;
        {
            conn = new EmbeddedDriver().connect(&quot;jdbc:derby:&quot; +
                &quot;;databaseName=/tmp/rita-copy/rita-test.derby;user=rita&quot;,
                new Properties());
        }        

&lt;p&gt;        s = conn.createStatement();&lt;/p&gt;

&lt;p&gt;        if (useTempFile)&lt;/p&gt;
        {
            s.execute(&quot;CREATE TABLE request_line (&quot; +
                &quot;request_site_id integer NOT NULL, &quot; +
                &quot;id integer NOT NULL, &quot; +
                &quot;request_id integer NOT NULL)&quot;);
            s.execute(&quot;CREATE TABLE request (&quot; +
                &quot;request_site_id integer NOT NULL, &quot; +
                &quot;id integer NOT NULL)&quot;);
            s.execute(&quot;ALTER TABLE request &quot; +
                &quot;ADD CONSTRAINT pk_request &quot; +
                &quot;PRIMARY KEY (request_site_id, id)&quot;);
            s.execute(&quot;ALTER TABLE request_line &quot; +
                &quot;ADD CONSTRAINT pk_request_line &quot; +
                &quot;PRIMARY KEY (id, request_site_id)&quot;);
            s.execute(&quot;ALTER TABLE request_line &quot; +
                &quot;ADD CONSTRAINT fk_tblreque_reference_tblrequ4 &quot; +
                &quot;FOREIGN KEY (request_site_id, request_id) &quot; +
                &quot;REFERENCES request(request_site_id, id) &quot; +
                &quot;ON UPDATE RESTRICT ON DELETE RESTRICT&quot;);
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;    public void tearDown() throws Exception&lt;/p&gt;
    {
        s.close();
        conn.close();
    }

&lt;p&gt;    public void testPrepareQueryWithGroupByParameterFails() throws Exception&lt;/p&gt;
    {
        conn.prepareStatement(&quot;SELECT &quot; +
            &quot;CASE WHEN (this.id = ?) THEN 1 ELSE 0 END &quot; +
            &quot;FROM request_line AS this &quot; +
            &quot;GROUP BY &quot; +
            &quot;CASE WHEN (this.id = ?) THEN 1 ELSE 0 END&quot;);
    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment>M2_REPO/javax/activation/activation/1.1/activation-1.1.jar&lt;br/&gt;
M2_REPO/javax/el/el-api/2.2/el-api-2.2.jar&lt;br/&gt;
M2_REPO/javax/xml/bind/jaxb-api/2.1/jaxb-api-2.1.jar&lt;br/&gt;
M2_REPO/javax/servlet/jsp/jsp-api/2.1.2/jsp-api-2.1.2.jar&lt;br/&gt;
M2_REPO/javax/transaction/jta/1.1/jta-1.1.jar&lt;br/&gt;
M2_REPO/javax/xml/soap/saaj-api/1.3/saaj-api-1.3.jar&lt;br/&gt;
M2_REPO/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar&lt;br/&gt;
M2_REPO/javax/xml/stream/stax-api/1.0-2/stax-api-1.0-2.jar&lt;br/&gt;
M2_REPO/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA.jar&lt;br/&gt;
M2_REPO/antlr/antlr/2.7.6/antlr-2.7.6.jar&lt;br/&gt;
M2_REPO/aopalliance/aopalliance/1.0/aopalliance-1.0.jar&lt;br/&gt;
M2_REPO/org/apache/james/apache-mime4j/0.6/apache-mime4j-0.6.jar&lt;br/&gt;
M2_REPO/asm/asm/2.2.3/asm-2.2.3.jar&lt;br/&gt;
M2_REPO/org/aspectj/aspectjrt/1.6.2/aspectjrt-1.6.2.jar&lt;br/&gt;
M2_REPO/bouncycastle/bcmail-jdk14/138/bcmail-jdk14-138.jar&lt;br/&gt;
M2_REPO/org/bouncycastle/bcmail-jdk14/1.38/bcmail-jdk14-1.38.jar&lt;br/&gt;
M2_REPO/bouncycastle/bcprov-jdk14/138/bcprov-jdk14-138.jar&lt;br/&gt;
M2_REPO/org/bouncycastle/bcprov-jdk14/1.38/bcprov-jdk14-1.38.jar&lt;br/&gt;
M2_REPO/org/bouncycastle/bctsp-jdk14/1.38/bctsp-jdk14-1.38.jar&lt;br/&gt;
M2_REPO/org/beanshell/bsh/2.0b4/bsh-2.0b4.jar&lt;br/&gt;
M2_REPO/c3p0/c3p0/0.9.1/c3p0-0.9.1.jar&lt;br/&gt;
M2_REPO/commons-beanutils/commons-beanutils/1.8.2/commons-beanutils-1.8.2.jar&lt;br/&gt;
M2_REPO/commons-codec/commons-codec/1.3/commons-codec-1.3.jar&lt;br/&gt;
M2_REPO/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar&lt;br/&gt;
M2_REPO/commons-digester/commons-digester/1.7/commons-digester-1.7.jar&lt;br/&gt;
M2_REPO/commons-io/commons-io/1.4/commons-io-1.4.jar&lt;br/&gt;
M2_REPO/commons-lang/commons-lang/2.4/commons-lang-2.4.jar&lt;br/&gt;
M2_REPO/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar&lt;br/&gt;
M2_REPO/net/sourceforge/cssparser/cssparser/0.9.5/cssparser-0.9.5.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-api/2.2.7/cxf-api-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-common-schemas/2.2.7/cxf-common-schemas-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-common-utilities/2.2.7/cxf-common-utilities-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-bindings-soap/2.2.7/cxf-rt-bindings-soap-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-bindings-xml/2.2.7/cxf-rt-bindings-xml-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-core/2.2.7/cxf-rt-core-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-databinding-aegis/2.2.7/cxf-rt-databinding-aegis-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-databinding-jaxb/2.2.7/cxf-rt-databinding-jaxb-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-frontend-jaxws/2.2.7/cxf-rt-frontend-jaxws-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-frontend-simple/2.2.7/cxf-rt-frontend-simple-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-javascript/2.2.7/cxf-rt-javascript-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-transports-http/2.2.7/cxf-rt-transports-http-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-transports-http-jetty/2.2.7/cxf-rt-transports-http-jetty-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-transports-local/2.2.7/cxf-rt-transports-local-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-rt-ws-addr/2.2.7/cxf-rt-ws-addr-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-tools-common/2.2.7/cxf-tools-common-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-tools-java2ws/2.2.7/cxf-tools-java2ws-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-tools-validator/2.2.7/cxf-tools-validator-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-tools-wsdlto-core/2.2.7/cxf-tools-wsdlto-core-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-tools-wsdlto-databinding-jaxb/2.2.7/cxf-tools-wsdlto-databinding-jaxb-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/cxf/cxf-tools-wsdlto-frontend-jaxws/2.2.7/cxf-tools-wsdlto-frontend-jaxws-2.2.7.jar&lt;br/&gt;
M2_REPO/org/apache/derby/derby/10.7.1.1/derby-10.7.1.1.jar&lt;br/&gt;
M2_REPO/org/apache/derby/derbytools/10.7.1.1/derbytools-10.7.1.1.jar&lt;br/&gt;
M2_REPO/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar&lt;br/&gt;
M2_REPO/org/glassfish/web/el-impl/2.2/el-impl-2.2.jar&lt;br/&gt;
M2_REPO/org/springframework/security/facelets-taglib/0.2_jsf-2.0_spring-2/facelets-taglib-0.2_jsf-2.0_spring-2.jar&lt;br/&gt;
M2_REPO/freemarker/freemarker/2.3.8/freemarker-2.3.8.jar&lt;br/&gt;
M2_REPO/org/apache/geronimo/specs/geronimo-annotation_1.0_spec/1.1.1/geronimo-annotation_1.0_spec-1.1.1.jar&lt;br/&gt;
M2_REPO/org/apache/geronimo/javamail/geronimo-javamail_1.4_mail/1.7/geronimo-javamail_1.4_mail-1.7.jar&lt;br/&gt;
M2_REPO/org/apache/geronimo/specs/geronimo-jaxws_2.1_spec/1.0/geronimo-jaxws_2.1_spec-1.0.jar&lt;br/&gt;
M2_REPO/org/apache/geronimo/specs/geronimo-ws-metadata_2.0_spec/1.1.2/geronimo-ws-metadata_2.0_spec-1.1.2.jar&lt;br/&gt;
M2_REPO/org/codehaus/groovy/groovy-all/1.7.5/groovy-all-1.7.5.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-annotations/3.5.6-Final/hibernate-annotations-3.5.6-Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-c3p0/3.5.6-Final/hibernate-c3p0-3.5.6-Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-commons-annotations/3.2.0.Final/hibernate-commons-annotations-3.2.0.Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-core/3.5.6-Final/hibernate-core-3.5.6-Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-entitymanager/3.5.3-Final/hibernate-entitymanager-3.5.3-Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-envers/3.5.3-Final/hibernate-envers-3.5.3-Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-tools/3.2.0.ga/hibernate-tools-3.2.0.ga.jar&lt;br/&gt;
M2_REPO/org/hibernate/hibernate-validator/4.1.0.Beta1/hibernate-validator-4.1.0.Beta1.jar&lt;br/&gt;
M2_REPO/net/sourceforge/htmlunit/htmlunit/2.8/htmlunit-2.8.jar&lt;br/&gt;
M2_REPO/net/sourceforge/htmlunit/htmlunit-core-js/2.8/htmlunit-core-js-2.8.jar&lt;br/&gt;
M2_REPO/org/apache/httpcomponents/httpclient/4.0.1/httpclient-4.0.1.jar&lt;br/&gt;
M2_REPO/org/apache/httpcomponents/httpcore/4.0.1/httpcore-4.0.1.jar&lt;br/&gt;
M2_REPO/org/apache/httpcomponents/httpmime/4.0.1/httpmime-4.0.1.jar&lt;br/&gt;
M2_REPO/com/lowagie/itext/2.1.7/itext-2.1.7.jar&lt;br/&gt;
M2_REPO/net/sf/jasperreports/jasperreports/3.7.2/jasperreports-3.7.2.jar&lt;br/&gt;
M2_REPO/javassist/javassist/3.8.0.GA/javassist-3.8.0.GA.jar&lt;br/&gt;
M2_REPO/com/sun/xml/bind/jaxb-impl/2.1.12/jaxb-impl-2.1.12.jar&lt;br/&gt;
M2_REPO/com/sun/xml/bind/jaxb-xjc/2.1.12/jaxb-xjc-2.1.12.jar&lt;br/&gt;
M2_REPO/jfree/jcommon/1.0.15/jcommon-1.0.15.jar&lt;br/&gt;
M2_REPO/eclipse/jdtcore/3.1.0/jdtcore-3.1.0.jar&lt;br/&gt;
M2_REPO/org/mortbay/jetty/jetty/6.1.21/jetty-6.1.21.jar&lt;br/&gt;
M2_REPO/org/eclipse/jetty/jetty-http/7.0.1.v20091125/jetty-http-7.0.1.v20091125.jar&lt;br/&gt;
M2_REPO/org/eclipse/jetty/jetty-io/7.0.1.v20091125/jetty-io-7.0.1.v20091125.jar&lt;br/&gt;
M2_REPO/org/eclipse/jetty/jetty-util/7.0.1.v20091125/jetty-util-7.0.1.v20091125.jar&lt;br/&gt;
M2_REPO/org/mortbay/jetty/jetty-util/6.1.21/jetty-util-6.1.21.jar&lt;br/&gt;
M2_REPO/jfree/jfreechart/1.0.12/jfreechart-1.0.12.jar&lt;br/&gt;
M2_REPO/com/sun/faces/jsf-api/2.0.2/jsf-api-2.0.2.jar&lt;br/&gt;
M2_REPO/com/sun/faces/jsf-impl/2.0.2/jsf-impl-2.0.2.jar&lt;br/&gt;
M2_REPO/jstl/jstl/1.2/jstl-1.2.jar&lt;br/&gt;
M2_REPO/org/hibernate/jtidy/r8-20060801/jtidy-r8-20060801.jar&lt;br/&gt;
M2_REPO/junit/junit/3.8.2/junit-3.8.2.jar&lt;br/&gt;
M2_REPO/log4j/log4j/1.2.13/log4j-1.2.13.jar&lt;br/&gt;
/rita/lib/migrate/migrate4j-svn-091117.jar&lt;br/&gt;
M2_REPO/mysql/mysql-connector-java/5.1.13/mysql-connector-java-5.1.13.jar&lt;br/&gt;
M2_REPO/org/apache/neethi/neethi/2.0.4/neethi-2.0.4.jar&lt;br/&gt;
M2_REPO/net/sourceforge/nekohtml/nekohtml/1.9.14/nekohtml-1.9.14.jar&lt;br/&gt;
M2_REPO/oro/oro/2.0.8/oro-2.0.8.jar&lt;br/&gt;
M2_REPO/org/apache/poi/poi/3.6/poi-3.6.jar&lt;br/&gt;
M2_REPO/com/sun/xml/messaging/saaj/saaj-impl/1.3.2/saaj-impl-1.3.2.jar&lt;br/&gt;
M2_REPO/org/w3c/css/sac/1.3/sac-1.3.jar&lt;br/&gt;
M2_REPO/xalan/serializer/2.7.1/serializer-2.7.1.jar&lt;br/&gt;
M2_REPO/org/slf4j/slf4j-api/1.5.8/slf4j-api-1.5.8.jar&lt;br/&gt;
M2_REPO/org/slf4j/slf4j-log4j12/1.5.8/slf4j-log4j12-1.5.8.jar&lt;br/&gt;
M2_REPO/org/springframework/spring-aop/2.0.8/spring-aop-2.0.8.jar&lt;br/&gt;
M2_REPO/org/springframework/spring-beans/2.0.8/spring-beans-2.0.8.jar&lt;br/&gt;
M2_REPO/org/springframework/spring-context/2.0.8/spring-context-2.0.8.jar&lt;br/&gt;
M2_REPO/org/springframework/spring-core/2.0.8/spring-core-2.0.8.jar&lt;br/&gt;
M2_REPO/org/springframework/security/spring-security-core/2.0.4/spring-security-core-2.0.4.jar&lt;br/&gt;
M2_REPO/org/springframework/spring-support/2.0.8/spring-support-2.0.8.jar&lt;br/&gt;
M2_REPO/org/springframework/spring-web/2.0.8/spring-web-2.0.8.jar&lt;br/&gt;
M2_REPO/org/apache/tomcat/tomcat-juli/7.0.5/tomcat-juli-7.0.5.jar&lt;br/&gt;
M2_REPO/org/apache/velocity/velocity/1.6.2/velocity-1.6.2.jar&lt;br/&gt;
M2_REPO/wsdl4j/wsdl4j/1.6.2/wsdl4j-1.6.2.jar&lt;br/&gt;
M2_REPO/org/codehaus/woodstox/wstx-asl/3.2.9/wstx-asl-3.2.9.jar&lt;br/&gt;
M2_REPO/xalan/xalan/2.7.1/xalan-2.7.1.jar&lt;br/&gt;
M2_REPO/xerces/xercesImpl/2.9.1/xercesImpl-2.9.1.jar&lt;br/&gt;
M2_REPO/xml-apis/xml-apis/1.3.02/xml-apis-1.3.02.jar&lt;br/&gt;
M2_REPO/xml-resolver/xml-resolver/1.2/xml-resolver-1.2.jar&lt;br/&gt;
M2_REPO/org/apache/ws/commons/schema/XmlSchema/1.4.5/XmlSchema-1.4.5.jar&lt;br/&gt;
/rita/lib/zxing/zxing13_core.jar&lt;br/&gt;
/rita/lib/zxing/zxing13_javase.jar</environment>
        <key id="12494450">DERBY-4955</key>
            <summary>Prepared statement fails when GROUP BY and SELECT clause contain the same expression based on a parameter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gcc">Chris Wilson</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Jan 2011 17:46:59 +0000</created>
                <updated>Fri, 15 Nov 2013 08:15:11 +0000</updated>
                            <resolved>Fri, 28 Sep 2012 17:54:07 +0100</resolved>
                                    <version>10.7.1.1</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12976677" author="knutanders" created="Mon, 3 Jan 2011 10:34:41 +0000"  >&lt;p&gt;Strictly speaking, SQL doesn&apos;t allow expressions in the group by clause (at least, that&apos;s how I read section 7.9 &amp;lt;group by clause&amp;gt; in SQL:2003, part 2), so a portable version of the query would have to look something like this:&lt;/p&gt;

&lt;p&gt;SELECT x FROM&lt;br/&gt;
  (SELECT CASE WHEN (this.id = ?) THEN 1 ELSE 0 END&lt;br/&gt;
    FROM request_line AS this) s&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
GROUP BY x&lt;/p&gt;

&lt;p&gt;Or, in this case, it could be even simpler:&lt;/p&gt;

&lt;p&gt;SELECT DISTINCT CASE WHEN (id = ?) THEN 1 ELSE 0 END FROM request_line&lt;/p&gt;

&lt;p&gt;I&apos;m not familiar with Hibernate, so I don&apos;t know if it&apos;s possible to tweak the generated SQL this way, but I think the most reasonable fix for this problem would be to make it generate conforming SQL.&lt;/p&gt;</comment>
                            <comment id="12978518" author="kmarsden" created="Thu, 6 Jan 2011 21:38:17 +0000"  >&lt;p&gt;It seems this is not a bug, so if there are no objections, we should close it invalid.  unchecking Newcomer as that is for issues appropriate for new developers and don&apos;t think this applies.&lt;/p&gt;</comment>
                            <comment id="13465728" author="mamtas" created="Fri, 28 Sep 2012 17:53:12 +0100"  >&lt;p&gt;Kathey, I will go ahead and close this as invalid since it seems like Derby is conforming to SQL standard.&lt;/p&gt;</comment>
                            <comment id="13823415" author="knutanders" created="Fri, 15 Nov 2013 08:15:11 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10421"><![CDATA[Seen in production]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 3 Jan 2011 10:34:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy092n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>