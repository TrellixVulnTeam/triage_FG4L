<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:31:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-857/DERBY-857.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-857] LDAP user authentication fails under a security manager</title>
                <link>https://issues.apache.org/jira/browse/DERBY-857</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Running the test jdbcapi/secureUsers1.sql with a security manager results in:&lt;/p&gt;

&lt;p&gt;&amp;gt; ERROR 08004: Connection refused : javax.naming.CommunicationException: noSuchMachine:389 &lt;span class=&quot;error&quot;&gt;&amp;#91;Root exception is java.security.AccessControlException: access denied (java.net.SocketPermission noSuchMachine resolve)&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Adding this permission to the policy file has no effect. which means a priv block is required around the LDAP call.&lt;br/&gt;
permission java.net.SocketPermission &quot;noSuchMachine&quot;, &quot;resolve&quot;;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12328012">DERBY-857</key>
            <summary>LDAP user authentication fails under a security manager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2006 04:22:24 +0000</created>
                <updated>Fri, 21 Jan 2011 17:48:30 +0000</updated>
                            <resolved>Fri, 19 Oct 2007 22:01:03 +0100</resolved>
                                    <version>10.0.2.0</version>
                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12435851" author="rhillegas" created="Tue, 19 Sep 2006 16:02:51 +0100"  >&lt;p&gt;Moving to 10.2.2.0.&lt;/p&gt;</comment>
                            <comment id="12456083" author="rhillegas" created="Wed, 6 Dec 2006 15:02:43 +0000"  >&lt;p&gt;Move to 10.2.3.0.&lt;/p&gt;</comment>
                            <comment id="12467579" author="fuzzylogic" created="Thu, 25 Jan 2007 20:36:48 +0000"  >&lt;p&gt;Unsetting Fix Version for unassigned issues.&lt;/p&gt;</comment>
                            <comment id="12535243" author="kmarsden" created="Tue, 16 Oct 2007 13:57:30 +0100"  >&lt;p&gt;This is the offending code  in LDAPAuthenticationSchemeImpl.  It is only an issue for a sane build and only with the property derby.debug.true=AuthenticationTrace set, which is probably why it hasn&apos;t come up on the user list.&lt;/p&gt;

&lt;p&gt;Interestingly, nothing shows up in this file, for successful or unsuccessful connections. Lastly the name  of the file CloudLDAP.out is not ideal.   I see three   options&lt;br/&gt;
1) Put a priv block around this code. Change the filename and make sure the bug  doesn&apos;t reproduce.&lt;br/&gt;
2) Remove the code altogether since it is not working.&lt;br/&gt;
3) Try to get LDAP tracing working.  Suggestions welcome.&lt;/p&gt;

&lt;p&gt;if (SanityManager.DEBUG)&lt;br/&gt;
		{&lt;br/&gt;
			if (SanityManager.DEBUG_ON(&lt;br/&gt;
						AuthenticationServiceBase.AuthenticationTrace)) {&lt;br/&gt;
				try &lt;/p&gt;
{
					initDirContextEnv.put(&quot;com.sun.naming.ldap.trace.ber&quot;,
								new java.io.FileOutputStream(&quot;CloudLDAP.out&quot;));
				}
&lt;p&gt; catch (java.io.IOException ie) {}&lt;br/&gt;
			}&lt;br/&gt;
		}&lt;/p&gt;</comment>
                            <comment id="12535254" author="bryanpendleton" created="Tue, 16 Oct 2007 15:28:35 +0100"  >&lt;p&gt;I&apos;m not sure how proposal (1) differs from proposal (3). Is there more&lt;br/&gt;
to the LDAP tracing than just setting this value? Is it correct to say that&lt;br/&gt;
(1) is the first step toward (3), but there may be more subsequent security&lt;br/&gt;
problems to be resolved?&lt;/p&gt;</comment>
                            <comment id="12535265" author="kmarsden" created="Tue, 16 Oct 2007 16:17:52 +0100"  >&lt;p&gt;Bryan said:&lt;/p&gt;

&lt;p&gt;&amp;gt;I&apos;m not sure how proposal (1) differs from proposal (3). Is there more&lt;br/&gt;
&amp;gt;to the LDAP tracing than just setting this value? Is it correct to say that&lt;br/&gt;
&amp;gt;(1) is the first step toward (3), but there may be more subsequent security&lt;br/&gt;
&amp;gt;problems to be resolved? &lt;/p&gt;

&lt;p&gt;1 is the first step toward 3 I suppose, but the problem is that the tracing does not seem to be working. Just an empty file gets created. I don&apos;t think it is security problems but something else,  I think I will do 1 and then open up another task to investigate LDAP tracing with derby.debug.true=AuthenticationTrace set. Does that sound ok?&lt;/p&gt;

</comment>
                            <comment id="12535368" author="kmarsden" created="Wed, 17 Oct 2007 00:10:31 +0100"  >&lt;p&gt;Well, putting the tracing in a priv block gets me further but there are still permission problems.&lt;br/&gt;
2007-10-16 21:49:44.968 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; Cleanup action starting&lt;/p&gt;

&lt;p&gt;java.sql.SQLException: Connection refused : javax.naming.CommunicationException: socket.usca.ibm.com:389 &lt;span class=&quot;error&quot;&gt;&amp;#91;Root exception is java.security.AccessControlException: access denied (java.net.SocketPermission socket.usca.ibm.com resolve)&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.authentication.JNDIAuthenticationSchemeBase.getLoginSQLException(JNDIAuthenticationSchemeBase.java:122)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.authentication.LDAPAuthenticationSchemeImpl.authenticateUser(LDAPAuthenticationSchemeImpl.java:196)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.authentication.AuthenticationServiceBase.authenticate(AuthenticationServiceBase.java:222)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection.checkUserCredentials(EmbedConnection.java:583)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:301)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection30.&amp;lt;init&amp;gt;(EmbedConnection30.java:73)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection40.&amp;lt;init&amp;gt;(EmbedConnection40.java:54)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:211)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;/p&gt;

&lt;p&gt;	at java.sql.DriverManager.getConnection(DriverManager.java:582)&lt;/p&gt;

&lt;p&gt;	at java.sql.DriverManager.getConnection(DriverManager.java:154)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1206)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1056)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:884)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:328)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:248)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.Main.go(Main.java:215)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:181)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.Main.main(Main.java:73)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.tools.ij.main(ij.java:59)&lt;/p&gt;

&lt;p&gt;Cleanup action completed&lt;/p&gt;

&lt;p&gt;The code that generates the exception is not a socket call directly but rather&lt;br/&gt;
			env.put(Context.SECURITY_PRINCIPAL, userDN);&lt;br/&gt;
			env.put(Context.SECURITY_CREDENTIALS, userPassword);&lt;/p&gt;

&lt;p&gt;			// Connect &amp;amp; authenticate (bind) to the LDAP server now&lt;/p&gt;

&lt;p&gt;			// it is happening right here&lt;br/&gt;
			DirContext ctx = new InitialDirContext(env);&lt;/p&gt;

&lt;p&gt;Wrapping this code in a priv block does no good because it is the root exception which is not exposed that is the problem.&lt;br/&gt;
I&apos;m not sure which jar to give the permission to.&lt;/p&gt;


&lt;p&gt;grant &lt;/p&gt;
{
  permission java.net.SocketPermission &quot;*&quot;, &quot;connect,resolve&quot;;
}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;works, but is more liberal than we want I think.&lt;/p&gt;</comment>
                            <comment id="12535628" author="kmarsden" created="Wed, 17 Oct 2007 18:20:29 +0100"  >&lt;p&gt;Running with  -Djava.security.debug=&quot;access,failure,jar,domain&quot; I get this more interesting trace, but still no clue as to who needs the socket permissions.   I am not sure that there is a fix for this.  I think maybe we have to document the workaround to  put &lt;/p&gt;

&lt;p&gt;grant &lt;/p&gt;
{
  permission java.net.SocketPermission &quot;&amp;lt;machine&amp;gt;&quot;, &quot;connect,resolve&quot;;
}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;in the policy file for LDAP. Anyone have thoughts on this?&lt;/p&gt;


&lt;p&gt;access: access denied (java.net.SocketPermission &amp;lt;machine&amp;gt; resolve)&lt;/p&gt;

&lt;p&gt;java.lang.Exception: Stack trace&lt;/p&gt;

&lt;p&gt;	at java.lang.Thread.dumpStack(Thread.java:1206)&lt;/p&gt;

&lt;p&gt;	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:313)&lt;/p&gt;

&lt;p&gt;	at java.security.AccessController.checkPermission(AccessController.java:546)&lt;/p&gt;

&lt;p&gt;	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)&lt;/p&gt;

&lt;p&gt;	at java.lang.SecurityManager.checkConnect(SecurityManager.java:1031)&lt;/p&gt;

&lt;p&gt;	at java.net.InetAddress.getAllByName0(InetAddress.java:1128)&lt;/p&gt;

&lt;p&gt;	at java.net.InetAddress.getAllByName0(InetAddress.java:1109)&lt;/p&gt;

&lt;p&gt;	at java.net.InetAddress.getAllByName(InetAddress.java:1072)&lt;/p&gt;

&lt;p&gt;	at java.net.InetAddress.getByName(InetAddress.java:969)&lt;/p&gt;

&lt;p&gt;	at java.net.InetSocketAddress.&amp;lt;init&amp;gt;(InetSocketAddress.java:124)&lt;/p&gt;

&lt;p&gt;	at java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:179)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.Connection.createSocket(Connection.java:349)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.Connection.&amp;lt;init&amp;gt;(Connection.java:184)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapClient.&amp;lt;init&amp;gt;(LdapClient.java:118)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapClient.getInstance(LdapClient.java:1580)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2616)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapCtx.&amp;lt;init&amp;gt;(LdapCtx.java:287)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:175)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(LdapCtxFactory.java:193)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(LdapCtxFactory.java:136)&lt;/p&gt;

&lt;p&gt;	at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(LdapCtxFactory.java:66)&lt;/p&gt;

&lt;p&gt;	at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:667)&lt;/p&gt;

&lt;p&gt;	at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)&lt;/p&gt;

&lt;p&gt;	at javax.naming.InitialContext.init(InitialContext.java:223)&lt;/p&gt;

&lt;p&gt;	at javax.naming.InitialContext.&amp;lt;init&amp;gt;(InitialContext.java:197)&lt;/p&gt;

&lt;p&gt;	at javax.naming.directory.InitialDirContext.&amp;lt;init&amp;gt;(InitialDirContext.java:82)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.authentication.LDAPAuthenticationSchemeImpl.getDNFromUID(LDAPAuthenticationSchemeImpl.java:442)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.authentication.LDAPAuthenticationSchemeImpl.authenticateUser(LDAPAuthenticationSchemeImpl.java:160)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.authentication.AuthenticationServiceBase.authenticate(AuthenticationServiceBase.java:222)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection.checkUserCredentials(EmbedConnection.java:583)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:301)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection30.&amp;lt;init&amp;gt;(EmbedConnection30.java:73)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.jdbc.EmbedConnection40.&amp;lt;init&amp;gt;(EmbedConnection40.java:54)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:211)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;/p&gt;

&lt;p&gt;	at java.sql.DriverManager.getConnection(DriverManager.java:582)&lt;/p&gt;

&lt;p&gt;	at java.sql.DriverManager.getConnection(DriverManager.java:154)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1206)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1056)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:884)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:328)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:248)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.Main.go(Main.java:215)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:181)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.tools.ij.Main.main(Main.java:73)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.tools.ij.main(ij.java:59)&lt;/p&gt;
</comment>
                            <comment id="12535642" author="djd" created="Wed, 17 Oct 2007 18:45:54 +0100"  >&lt;p&gt;How about just removing the code, since it&apos;s just sanity and isn&apos;t really a benefit?&lt;/p&gt;

&lt;p&gt;Or just catching the security exception and continuing?&lt;/p&gt;

&lt;p&gt;I think the code was probably put there during the original development of LDAP authentication, I doubt it&apos;s needed now.&lt;/p&gt;</comment>
                            <comment id="12535656" author="kmarsden" created="Wed, 17 Oct 2007 19:05:58 +0100"  >&lt;p&gt;Dan said&lt;br/&gt;
&amp;gt;How about just removing the code, since it&apos;s just sanity and isn&apos;t really a benefit?&lt;/p&gt;

&lt;p&gt;&amp;gt;Or just catching the security exception and continuing?&lt;/p&gt;

&lt;p&gt;&amp;gt;I think the code was probably put there during the original development of LDAP authentication, I doubt it&apos;s &amp;gt;needed now.&lt;br/&gt;
&amp;gt;&lt;/p&gt;

&lt;p&gt;The original security exception was for the tracing and I was able to resolve that by adding a privilege block around the code. (It could also be removed.) That got me further but the problem now is in the heart of the LDAP processing, in .LDAPAuthenticationSchemeImpl.authenticateUser where we call:&lt;/p&gt;

&lt;p&gt;// it is happening right here&lt;br/&gt;
 DirContext ctx = privInitialDirContext(env);&lt;/p&gt;


&lt;p&gt;and get&lt;br/&gt;
ERROR 08004: Connection refused : javax.naming.CommunicationException: socket.usca.ibm.com:389 &lt;span class=&quot;error&quot;&gt;&amp;#91;Root exception is java.security.AccessControlException: access denied (java.net.SocketPermission socket.usca.ibm.com resolve)&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I will go ahead and post the patch for the change to get us past the tracing file problem so that you can see the same failure I am seeing.  You can see it is a javax.naming.CommunicationException that is thrown not a Security Excepition, so wrapping this call in a privilege block is not helpful.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12535662" author="kmarsden" created="Wed, 17 Oct 2007 19:13:01 +0100"  >&lt;p&gt;This first patch adds a privilege block around creation of the tracing file. If creation of the tracing file fails, execution will continue.  It does not cause the core problem of making a connection to the LDAP server if we don&apos;t include &lt;/p&gt;

&lt;p&gt;grant &lt;/p&gt;
{
  permission java.net.SocketPermission &quot;&amp;lt;machine&amp;gt;&quot;, &quot;resolve,connect&quot;;
}
&lt;p&gt;;&lt;/p&gt;</comment>
                            <comment id="12535760" author="kmarsden" created="Wed, 17 Oct 2007 23:01:41 +0100"  >&lt;p&gt;Investigating this further I find that I need to give the permission to the top level program, for example if I use ij to connect I need to give the SocketPermission to derbytools.jar.  If I write a small program to connect. I need to give that program permission. e.g.&lt;/p&gt;

&lt;p&gt;grant codeBase &quot;file:c:/kmarsden/repro/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-857&quot; title=&quot;LDAP user authentication fails under a security manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-857&quot;&gt;&lt;del&gt;DERBY-857&lt;/del&gt;&lt;/a&gt;/-&quot; &lt;/p&gt;
{
  permission java.net.SocketPermission &quot;&amp;lt;machine&amp;gt;&quot;, &quot;resolve,connect&quot;;   

}
&lt;p&gt;;&lt;/p&gt;</comment>
                            <comment id="12535770" author="djd" created="Wed, 17 Oct 2007 23:31:22 +0100"  >&lt;p&gt;That&apos;s usually an indication that you are missing a priv block.&lt;br/&gt;
The last stack trace above (dated 10/17 10:20)  shows no priv block, thus I would expect a SecuityException,&lt;br/&gt;
but the previous comment says that adding a priv block makes no difference. Do you have the stack trace when that it is the case?&lt;/p&gt;</comment>
                            <comment id="12535783" author="kmarsden" created="Thu, 18 Oct 2007 00:24:06 +0100"  >&lt;p&gt;Thanks Dan for your time in looking at this.  There was indeed another call to InitialDirContext where I missed putting a privilege block.  It all works fine now.  I will prepare a patch with the full fix.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;
</comment>
                            <comment id="12536012" author="kmarsden" created="Thu, 18 Oct 2007 19:46:45 +0100"  >&lt;p&gt;I accidentally checked in my changes for this issue  revision 586052 a bit prematurely.  I think the changes are what I want them to be, so I will leave review to post commit and change whatever&apos;s needed.  I have been doing some manual testing with LDAP.  We can&apos;t have a regression test without having an LDAP server setup.&lt;/p&gt;
</comment>
                            <comment id="12536279" author="djd" created="Fri, 19 Oct 2007 18:24:13 +0100"  >&lt;p&gt;Minor question on the code change (revision 586052).&lt;/p&gt;

&lt;p&gt;Is there any reason for creating two extra methods, rather than performing the code in-line (which is the typical Java pattern) for the priv-blocks?&lt;/p&gt;</comment>
                            <comment id="12536288" author="kmarsden" created="Fri, 19 Oct 2007 18:38:40 +0100"  >&lt;p&gt;I just did it because to me it made the code easier to read.&lt;br/&gt;
privInitialDirContext is called twice so it seemed better to have one method than duplicate the code.  I can change them if you prefer.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12536335" author="djd" created="Fri, 19 Oct 2007 21:23:12 +0100"  >&lt;p&gt;If the priv block is used more than once in the same file then I agree it should probably be a method.&lt;/p&gt;

&lt;p&gt;For a single use I guess it&apos;s just a matter of preference, having the code in a separate method means that it&apos;s harder to read imho since one must look elsewhere instead of the code being right there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12367893" name="derby-857_diff.txt" size="3542" author="kmarsden" created="Wed, 17 Oct 2007 19:13:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Sep 2006 15:02:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22176</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0n8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37582</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>