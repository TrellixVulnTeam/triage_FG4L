<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6457/DERBY-6457.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6457] NetworkServerControl API breaks when username or password contains non-ascii characters</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6457</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If you pass a non-ascii username/password combination to a NetworkServerControl API command, such as&lt;/p&gt;

&lt;p&gt;  java -jar derbynet.jar shutdown -user Bj&#248;rn -password D&#230;hlie&lt;/p&gt;

&lt;p&gt;it will hang forever.&lt;/p&gt;

&lt;p&gt;The reason is that NetworkServerControlImpl.writeLDString() writes the length of the string in characters, whereas NetworkServerControlImpl.readLDString() expects the length to be in number of bytes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689834">DERBY-6457</key>
            <summary>NetworkServerControl API breaks when username or password contains non-ascii characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jan 2014 16:29:28 +0000</created>
                <updated>Wed, 21 Jan 2015 00:23:27 +0000</updated>
                            <resolved>Wed, 22 Jan 2014 10:50:49 +0000</resolved>
                                    <version>10.10.1.1</version>
                    <version>10.10.2.0</version>
                                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13877566" author="knutanders" created="Tue, 21 Jan 2014 16:09:04 +0000"  >&lt;p&gt;The attached patch fixes this bug and adds a regression test case to verify the fix. It makes the following changes:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Make writeLDString() write the length in number of bytes instead of number of characters.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.java:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Add a test case that shuts down the server using credentials that have non-ascii characters in them. The test case hangs indefinitely when run without the fix.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;java/testing/org/apache/derbyTesting/junit/SystemPropertyTestSetup.java:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Reorder how tearDown() restores the old state. Move the engine shutdown so that it&apos;s done before the system properties are reset. Since static properties are not re-read until the next time the engine is booted, it makes no difference for subsequent tests whether the properties were actually reset before or after the engine shutdown, as long as they are reset before the next test case boots the engine.&lt;/p&gt;

&lt;p&gt;The current ordering caused problems because the new test case used a SystemPropertyTestSetup for enabling system-wide BUILTIN authentication. If the system properties are cleared before the engine shutdown in this configuration, there will be no user that&apos;s authenticated to do the engine shutdown because all the derby.user.* properties are gone. This made SystemPropertyTestSetup.tearDown() fail with an &quot;invalid authentication&quot; error.&lt;/p&gt;

&lt;p&gt;All the regression tests ran cleanly with the patch.&lt;/p&gt;</comment>
                            <comment id="13878517" author="jira-bot" created="Wed, 22 Jan 2014 10:50:26 +0000"  >&lt;p&gt;Commit 1560311 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1560311&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1560311&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6457&quot; title=&quot;NetworkServerControl API breaks when username or password contains non-ascii characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6457&quot;&gt;&lt;del&gt;DERBY-6457&lt;/del&gt;&lt;/a&gt;: NetworkServerControl API breaks when username or password&lt;br/&gt;
contains non-ascii characters&lt;/p&gt;

&lt;p&gt;Make NetworkServerControlImpl.writeLDString() write the length in&lt;br/&gt;
bytes instead of characters to match how it is read by&lt;br/&gt;
NetworkServerControlImpl.readLDString().&lt;/p&gt;</comment>
                            <comment id="13913274" author="mikem" created="Wed, 26 Feb 2014 18:30:02 +0000"  >&lt;p&gt;consider for 10.10 backport&lt;/p&gt;</comment>
                            <comment id="13913768" author="myrna" created="Wed, 26 Feb 2014 23:58:25 +0000"  >&lt;p&gt;I&apos;ll take a look at backporting this.&lt;/p&gt;</comment>
                            <comment id="13913883" author="jira-bot" created="Thu, 27 Feb 2014 01:33:06 +0000"  >&lt;p&gt;Commit 1572384 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572384&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1572384&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6457&quot; title=&quot;NetworkServerControl API breaks when username or password contains non-ascii characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6457&quot;&gt;&lt;del&gt;DERBY-6457&lt;/del&gt;&lt;/a&gt;; NetworkServerControl API breaks when username or password contains non-ascii characters&lt;br/&gt;
   backport of revision 1560311 from trunk. Original fix / patch contributed by Knut Anders Hatlen&lt;/p&gt;</comment>
                            <comment id="13913895" author="myrna" created="Thu, 27 Feb 2014 01:40:55 +0000"  >&lt;p&gt;I confirmed that the behavior of the repro existed with 10.10.1.4, and was fixed after the merge, so added that to the affected versions list. Only ran NetworkServerControlApiTest after (which passed).&lt;br/&gt;
Updated fix in to add 10.10.1.4 after commit.&lt;/p&gt;</comment>
                            <comment id="14284806" author="myrna" created="Wed, 21 Jan 2015 00:23:27 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12695601">DERBY-6481</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624147" name="d6457-1a.diff" size="7026" author="knutanders" created="Tue, 21 Jan 2014 16:09:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Jan 2014 10:50:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzlezr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369105</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>