<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:47 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1963/DERBY-1963.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1963] Routine parameter names displayed by dblook are not escaped.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1963</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;After using this SQL to create a function with a delimited parameter name&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION FRED (&quot;paramOne&quot; INTEGER) RETURNS INTEGER&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA &lt;br/&gt;
EXTERNAL NAME &apos;fred.foo&apos; &lt;/p&gt;

&lt;p&gt;dblook will output a CREATE FUNCTION statement with the parameter name without quotes:&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;APP&quot;.&quot;FRED&quot; (paramOne INTEGER) RETURNS INTEGER&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA&lt;br/&gt;
READS SQL DATA CALLED ON NULL INPUT&lt;br/&gt;
EXTERNAL NAME &apos;fred.foo&apos;;&lt;/p&gt;

&lt;p&gt;Using the output from dblook to re-create the function will result in a function with a different parameter name.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12353308">DERBY-1963</key>
            <summary>Routine parameter names displayed by dblook are not escaped.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Oct 2006 17:44:56 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:41 +0100</updated>
                            <resolved>Fri, 15 Oct 2010 09:03:56 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12463865" author="sv204098" created="Thu, 11 Jan 2007 11:21:34 +0000"  >&lt;p&gt;I tried reproducing this, but while using the dblook output to create the function again, I got this error &quot;ERROR X0Y68: FUNCTION &apos;FRED&apos; already exists.&quot;&lt;br/&gt;
Did I missed any step.&lt;/p&gt;

&lt;p&gt;Comments/Suggestions ?&lt;/p&gt;

&lt;p&gt;Following are the steps I tried : &lt;/p&gt;

&lt;p&gt;fierro@~/JavaDB/NewTest$ java org.apache.derby.tools.ij&lt;br/&gt;
ij version 10.3&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:TestDB;create=true&apos;;&lt;br/&gt;
ij&amp;gt; CREATE FUNCTION FRED (&quot;paramOne&quot; INTEGER) RETURNS INTEGER&lt;br/&gt;
LANGUAGE JAVA PARAMETER STYLE JAVA&lt;br/&gt;
EXTERNAL NAME &apos;fred.foo&apos; ;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; exit;&lt;br/&gt;
fierro@~/JavaDB/NewTest$ java org.apache.derby.tools.dblook -d &apos;jdbc:derby:TestDB&apos;&lt;br/&gt;
&amp;#8211; Timestamp: 2007-01-11 16:44:49.285&lt;br/&gt;
&amp;#8211; Source database is: TestDB&lt;br/&gt;
&amp;#8211; Connection URL is: jdbc:derby:TestDB&lt;br/&gt;
&amp;#8211; appendLogs: false&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for functions&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;APP&quot;.&quot;FRED&quot; (paramOne INTEGER) RETURNS INTEGER LANGUAGE JAVA PARAMETER STYLE JAVA READS SQL DATA CALLED ON NULL INPUT EXTERNAL NAME &apos;fred.foo&apos; ;&lt;/p&gt;

&lt;p&gt;fierro@~/JavaDB/NewTest$ java org.apache.derby.tools.ij&lt;br/&gt;
ij version 10.3&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:TestDB&apos;;&lt;br/&gt;
ij&amp;gt; CREATE FUNCTION &quot;APP&quot;.&quot;FRED&quot; (paramOne INTEGER) RETURNS INTEGER LANGUAGE JAVA PARAMETER STYLE JAVA READS SQL DATA CALLED ON NULL INPUT EXTERNAL NAME &apos;fred.foo&apos; ;&lt;br/&gt;
ERROR X0Y68: FUNCTION &apos;FRED&apos; already exists.&lt;br/&gt;
ij&amp;gt; exit;&lt;/p&gt;</comment>
                            <comment id="12467217" author="mikem" created="Thu, 25 Jan 2007 01:16:06 +0000"  >&lt;p&gt;the issue being reported is a problem with the parameter name &quot;paramOne&quot;  - not the function name.  The problem will show up if you use a jdbc interface that requires the parameter name rather than a ordernal of the parameter.  Also I assume the metadata will be wrong.  &lt;/p&gt;</comment>
                            <comment id="12467602" author="fuzzylogic" created="Thu, 25 Jan 2007 20:38:26 +0000"  >&lt;p&gt;Unsetting Fix Version on unassigned issues.&lt;/p&gt;</comment>
                            <comment id="12728671" author="knutanders" created="Wed, 8 Jul 2009 13:49:28 +0100"  >&lt;p&gt;Triaged for 10.5.2.&lt;/p&gt;</comment>
                            <comment id="12920363" author="knutanders" created="Tue, 12 Oct 2010 22:42:16 +0100"  >&lt;p&gt;dblook uses the ALIASINFO column in SYS.SYSALIASES to produce the parameter list for procedures and functions. I found this comment in RoutineAliasInfo.toString():&lt;/p&gt;

&lt;p&gt;	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Get this alias info as a string.  NOTE: The &quot;ALIASINFO&quot; column&lt;/li&gt;
	&lt;li&gt;in the SYSALIASES table will return the result of this method&lt;/li&gt;
	&lt;li&gt;on a ResultSet.getString() call.  That said, since the dblook&lt;/li&gt;
	&lt;li&gt;utility uses ResultSet.getString() to retrieve ALIASINFO and&lt;/li&gt;
	&lt;li&gt;to generate the DDL, THIS METHOD MUST RETURN A STRING THAT&lt;/li&gt;
	&lt;li&gt;IS SYNTACTICALLY VALID, or else the DDL generated by dblook&lt;/li&gt;
	&lt;li&gt;will be incorrect.&lt;br/&gt;
	 */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;That method does however not escape the parameter names, and that&apos;s also why dblook doesn&apos;t.&lt;/p&gt;

&lt;p&gt;The attached patch makes RoutineAliasInfo.toString() escape parameter names using IdUtil.normalToDelimited(). It also adds a test case that demonstrates the bug in tools/dblook_test.java. I haven&apos;t run any other tests yet, and there will be other tests that need to be updated because of this change (at least all the variants of dblook_test, and there may be tests that check the SYSALIASES table and don&apos;t expect the quotes in the ALIASINFO column).&lt;/p&gt;</comment>
                            <comment id="12920938" author="knutanders" created="Thu, 14 Oct 2010 13:23:12 +0100"  >&lt;p&gt;Here&apos;s an updated patch that changes more canons. All the regression tests passed.&lt;/p&gt;

&lt;p&gt;Description of the patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;RoutineAliasInfo.java: Escape the parameter names.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;dblook_makeDB.sql: Add a procedure and a function that need escaping. Affects all variants of dblook_test.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;dblook_test.out, dblook_test_territory.out, DerbyNet/dblook_test_net.out, DerbyNet/dblook_test_net_territory.out, DerbyNetClient/dblook_test_net.out, DerbyNetClient/dblook_test_net_territory.out:&lt;br/&gt;
Expect extra output because of the added procedure and function, and expect all parameter names in existing test cases to have double quotes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;cast.out: Expect quoted identifiers when selecting ALIASINFO from SYS.SYSALIASES.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13685322" author="knutanders" created="Mon, 17 Jun 2013 10:19:41 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457153" name="d1963-2.diff" size="41843" author="knutanders" created="Thu, 14 Oct 2010 13:23:11 +0100"/>
                            <attachment id="12457016" name="d1963.diff" size="13180" author="knutanders" created="Tue, 12 Oct 2010 22:42:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Jan 2007 11:21:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0oxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>