<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:50:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4248/DERBY-4248.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4248] convert checkConstraint.sql to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4248</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Converting CheckConstraint.sql to JUnit under supervision of Bryan Pendleton.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426308">DERBY-4248</key>
            <summary>convert checkConstraint.sql to JUnit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eranda">Eranda Sooriyabandara</assignee>
                                    <reporter username="eranda">Eranda Sooriyabandara</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 May 2009 22:38:33 +0100</created>
                <updated>Thu, 2 May 2013 03:29:25 +0100</updated>
                            <resolved>Wed, 22 Jul 2009 23:22:13 +0100</resolved>
                                    <version>10.4.2.1</version>
                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due>Tue, 26 May 2009 07:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12712808" author="eranda" created="Mon, 25 May 2009 22:55:47 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
Here I add the patch with this, which produce by the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2151&quot; title=&quot;&amp;quot;Fixer-upper&amp;quot; utility to help convert ij canon-based tests to JUnit.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2151&quot;&gt;&lt;del&gt;DERBY-2151&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
ijToJUnit tool with some basic editing.&lt;/p&gt;</comment>
                            <comment id="12712810" author="eranda" created="Mon, 25 May 2009 23:27:48 +0100"  ></comment>
                            <comment id="12713133" author="bryanpendleton" created="Tue, 26 May 2009 18:26:46 +0100"  >&lt;p&gt;Hi Eranda, thanks for attaching the patch proposal.&lt;/p&gt;

&lt;p&gt;Your diff file also includes the AlterTableTest changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4187&quot; title=&quot;Convert altertable.sql to JUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4187&quot;&gt;&lt;del&gt;DERBY-4187&lt;/del&gt;&lt;/a&gt;. &lt;br/&gt;
It would be better to keep these separate. Can you construct a separate&lt;br/&gt;
source tree on your system containing only the CheckConstraint test changes&lt;br/&gt;
and provide a diff with only those contents? Thanks!&lt;/p&gt;</comment>
                            <comment id="12713227" author="eranda" created="Tue, 26 May 2009 21:19:46 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
Sorry for the mistake. Here I attach the patch. But I am not pretty&lt;br/&gt;
sure about the test contain all the tests which were in&lt;br/&gt;
checkConstraint.sql.Please make a comment on that.&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="12713792" author="eranda" created="Wed, 27 May 2009 23:59:47 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
Compilation was successful and here I attaching the patch. Working&lt;br/&gt;
further on it.&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="12713998" author="bryanpendleton" created="Thu, 28 May 2009 16:01:26 +0100"  >&lt;p&gt;Hi Eranda,&lt;/p&gt;

&lt;p&gt;The new patch looks good, it seems like the new test is taking shape nicely.&lt;/p&gt;

&lt;p&gt;I think that the conversion tool did not handle this section of the script very well:&lt;/p&gt;

&lt;p&gt;prepare p1 as &apos;insert into t1 values 1&apos;;&lt;br/&gt;
prepare p2 as &apos;update t1 set c1 = 3 where c1 = 4&apos;;&lt;br/&gt;
prepare p3 as &apos;select * from t1&apos;;&lt;br/&gt;
&amp;#8211; the insert and update should fail, select should succeed&lt;br/&gt;
execute p1;&lt;br/&gt;
execute p2;&lt;br/&gt;
execute p3;&lt;/p&gt;

&lt;p&gt;In the new JUnit test, this seemed to show up as:&lt;/p&gt;

&lt;p&gt;+        pSt = prepareStatement(&lt;br/&gt;
+            &quot;insert into t1 values 1&quot;);&lt;br/&gt;
+        &lt;br/&gt;
+        pSt = prepareStatement(&lt;br/&gt;
+            &quot;update t1 set c1 = 3 where c1 = 4&quot;);&lt;br/&gt;
+        &lt;br/&gt;
+        pSt = prepareStatement(&lt;br/&gt;
+            &quot;select * from t1&quot;);&lt;br/&gt;
+        &lt;br/&gt;
+        // the insert and update should fail, select should succeed&lt;br/&gt;
+        &lt;br/&gt;
+        assertStatementError(&quot;23505&quot;, pSt);&lt;br/&gt;
+        &lt;br/&gt;
+        assertStatementError(&quot;23505&quot;, pSt);&lt;br/&gt;
+        &lt;br/&gt;
+        rs = pSt.executeQuery();&lt;/p&gt;

&lt;p&gt;I think that we should not be using the same variable for these 3 prepared statements,&lt;br/&gt;
instead we need to have 3 separate PreparedStatement objects.&lt;/p&gt;</comment>
                            <comment id="12722422" author="eranda" created="Sun, 21 Jun 2009 21:57:08 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
I commented that part which consider as a new bug and make the test&lt;br/&gt;
complete. With the knowledge of working in AlterTableTest.&lt;br/&gt;
Here I send patch file with this.&lt;br/&gt;
Now what can we do? Can we proceed with the bug?&lt;br/&gt;
Thanks&lt;br/&gt;
Eranda&lt;/p&gt;</comment>
                            <comment id="12722893" author="bryanpendleton" created="Tue, 23 Jun 2009 00:17:52 +0100"  >&lt;p&gt;Hi Eranda, I will have a look at your latest version of CheckConstraintTest as soon as I can.&lt;/p&gt;</comment>
                            <comment id="12722955" author="bryanpendleton" created="Tue, 23 Jun 2009 05:17:19 +0100"  >&lt;p&gt;I successfully built and ran CheckConstraintTest, and the test passed.&lt;/p&gt;</comment>
                            <comment id="12732676" author="eranda" created="Fri, 17 Jul 2009 19:48:17 +0100"  >&lt;p&gt;Hi Bryan,I break the test into five separate methods,&lt;/p&gt;

&lt;p&gt;testNotAllowedInCheckConstraint()&lt;br/&gt;
testCheckConstriant()&lt;br/&gt;
testPositionalUpdate()&lt;br/&gt;
testBuiltInFunctions()&lt;br/&gt;
testJira2989()&lt;/p&gt;

&lt;p&gt;Here I am attaching the patch file with this, Are there more to do with&lt;br/&gt;
coding if any please let me know.&lt;br/&gt;
Now I think to compare checkConstraint.out and the CheckConstraintTest and&lt;br/&gt;
make a complete patch file.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Eranda&lt;/p&gt;</comment>
                            <comment id="12733047" author="eranda" created="Sun, 19 Jul 2009 20:20:16 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
I compared CheckContraintTest with the checkConstraint.sql and&lt;br/&gt;
I didn&apos;t find an error in this test and successfully ran in my platform.&lt;br/&gt;
Here is my final patch file attaching with this.&lt;br/&gt;
Thanks&lt;br/&gt;
Eranda&lt;/p&gt;</comment>
                            <comment id="12733064" author="bryanpendleton" created="Sun, 19 Jul 2009 22:11:27 +0100"  >&lt;p&gt;Hi Eranda, I don&apos;t see an updated diff file. Maybe the attachment did not go through?&lt;/p&gt;</comment>
                            <comment id="12734361" author="bryanpendleton" created="Wed, 22 Jul 2009 23:22:13 +0100"  >&lt;p&gt;The patch looks good to me. I ran a complete set of regression tests, and&lt;br/&gt;
submitted the patch to the trunk as revision 796893.&lt;/p&gt;

&lt;p&gt;Eranda, please update your subversion client and check that the patch&lt;br/&gt;
appears to have been applied correctly, and that the test still runs&lt;br/&gt;
correctly for you, and then please close this issue at your convenience.&lt;/p&gt;

&lt;p&gt;Thanks very much for this contribution to Derby!&lt;/p&gt;</comment>
                            <comment id="12734451" author="eranda" created="Thu, 23 Jul 2009 05:08:16 +0100"  >&lt;p&gt;Hi Bryan,&lt;br/&gt;
Thanks for submitting the patch. I am happy to about the update.&lt;br/&gt;
I am closing this issue.&lt;br/&gt;
Thanks&lt;br/&gt;
Eranda&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12428443">DERBY-4282</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12413839" name="ASF.LICENSE.NOT.GRANTED--CheckConstraintTest.diff" size="61292" author="eranda" created="Fri, 17 Jul 2009 19:48:18 +0100"/>
                            <attachment id="12411353" name="ASF.LICENSE.NOT.GRANTED--CheckConstraintTest.diff" size="61469" author="eranda" created="Sun, 21 Jun 2009 21:57:08 +0100"/>
                            <attachment id="12409222" name="ASF.LICENSE.NOT.GRANTED--CheckConstraintTest.diff" size="40160" author="eranda" created="Wed, 27 May 2009 23:59:48 +0100"/>
                            <attachment id="12409068" name="ASF.LICENSE.NOT.GRANTED--CheckConstraintTest.diff" size="25078" author="eranda" created="Tue, 26 May 2009 21:19:47 +0100"/>
                            <attachment id="12408970" name="ASF.LICENSE.NOT.GRANTED--CheckConstraintTest.java" size="13343" author="eranda" created="Mon, 25 May 2009 22:55:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 May 2009 17:26:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0pxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38019</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>