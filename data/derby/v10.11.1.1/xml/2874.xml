<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2874/DERBY-2874.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2874] NetworkServer not accepting connections with default security manager on Ipv6 machines</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2874</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;While running tests on Ipv6 machines using the 10.3 jars with the default security manager, I had the following findings/questions&lt;br/&gt;
I started the server like this java org.apache.derby.drda.NetworkServerControl start -h 2002:92a:8f7a:13:9:42:74:19&lt;br/&gt;
and the server started with the following command&lt;br/&gt;
Security manager installed using the Basic server security policy.&lt;br/&gt;
Apache Derby Network Server - 10.3.1.0 beta - (548006) started and ready to accept connections on port 1527 at 2007-06-25 23:44: 36.835 GMT&lt;/p&gt;

&lt;p&gt;So I think the server is using the default security manager. Then when I tried to get conenction though ij&lt;/p&gt;

&lt;p&gt;got the following error message&lt;br/&gt;
Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:218&amp;#93;&lt;/span&gt;:34016 accept,resolve)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:218&amp;#93;&lt;/span&gt;:34016 accept,resolve) &lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:104)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)&lt;br/&gt;
        at java.lang.SecurityManager.checkAccept (SecurityManager.java:1172)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:466)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:433)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread$1.run (Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:242)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)&lt;/p&gt;

&lt;p&gt;I had the derby.properties file like this&lt;/p&gt;

&lt;p&gt;derby.database.sqlAuthorization=true&lt;br/&gt;
derby.connection.requireAuthentication=true&lt;br/&gt;
derby.infolog.append=true&lt;br/&gt;
derby.authentication.provider=BUILTIN&lt;br/&gt;
derby.stream.error.logSeverityLevel=0&lt;/p&gt;

&lt;p&gt;#derby.language.logStatementText=true&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;User&apos;s Definitions&lt;br/&gt;
derby.user.user2=pass2&lt;/li&gt;
&lt;/ol&gt;


</description>
                <environment>Ipv6 machine with ibm jvm 15</environment>
        <key id="12372458">DERBY-2874</key>
            <summary>NetworkServer not accepting connections with default security manager on Ipv6 machines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="mkutty">Manjula Kutty</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jun 2007 19:16:29 +0100</created>
                <updated>Fri, 21 Jan 2011 18:51:17 +0000</updated>
                            <resolved>Tue, 3 Jul 2007 23:04:21 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12508281" author="rhillegas" created="Tue, 26 Jun 2007 19:41:34 +0100"  >&lt;p&gt;Attaching patch which removes the wildcarded port spec from the default socket permission. Would appreciate it if someone with access to an ipv6 machine could try this out. thanks.&lt;/p&gt;</comment>
                            <comment id="12508290" author="mkutty" created="Tue, 26 Jun 2007 20:13:36 +0100"  >&lt;p&gt;Here is the e-mail thread regarding this issue&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/Derby-on-Ipv6-tf3979831.html#a11298151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Derby-on-Ipv6-tf3979831.html#a11298151&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12508292" author="mkutty" created="Tue, 26 Jun 2007 20:17:42 +0100"  >&lt;p&gt;I tried with Rick&apos;s patch and Still has the problem. Here is the new stack trace&lt;/p&gt;

&lt;p&gt;2007-06-26 18:23:02.674 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; java.security.AccessControlException: Access denied (java.io.FilePermission derby.log read)&lt;br/&gt;
Apache Derby Network Server - 10.3.1.0 beta - (548006) started and ready to accept connections on port 1527 at 2007-06-26 18:23:02.730 GMT&lt;br/&gt;
Apache Derby Network Server - 10.3.1.0 beta - (548006) started and ready to accept connections on port 1527 at 2007-06-26 18:23:02.730 GMT&lt;br/&gt;
Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:218&amp;#93;&lt;/span&gt;:34040 ac            cept,resolve)&lt;br/&gt;
Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:218&amp;#93;&lt;/span&gt;:34040 ac            cept,resolve)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.net.SocketPermission [            2002:92a:8f7a:13:9:42:73:218]:34040 accept,resolve)&lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:            104)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)&lt;br/&gt;
        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:466)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:433)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:242            )&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.net.SocketPermission [            2002:92a:8f7a:13:9:42:73:218]:34040 accept,resolve)&lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:            104)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)&lt;br/&gt;
        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:466)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:433)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:242            )&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)&lt;/p&gt;



&lt;p&gt;After getting this error, to the same server (didn&apos;t restart), I tried connecting from another machine to the same server got communication error. Here is the error message on the client machine for that&lt;/p&gt;

&lt;p&gt;ERROR 58009: A communications error has been detected: Connection reset.&lt;/p&gt;</comment>
                            <comment id="12508294" author="mkutty" created="Tue, 26 Jun 2007 20:20:48 +0100"  >&lt;p&gt;Here is the policy file I used. Also this is the command I used to start the server&lt;/p&gt;

&lt;p&gt;[&lt;span class=&quot;error&quot;&gt;&amp;#91;root@incus mkutty&amp;#93;&lt;/span&gt;# java -Djava.security.manager -Djava.security.policy=/usr/mkutty/server.policy org.apache.derby.drda.NetworkServerControl start -h 2002:92a:            8f7a:13:9:42:74:19&lt;/p&gt;</comment>
                            <comment id="12508310" author="rhillegas" created="Tue, 26 Jun 2007 21:05:00 +0100"  >&lt;p&gt;Thanks for running this experiment, Manjula. I&apos;m a little unclear on what test you tried. The command line above indicates that you installed your own security manager and used your own policy file. The policy file you used has unsubstutited parameters in it. It doesn&apos;t appear as though any of those parameters are declared on your command line, so the VM won&apos;t substitute them. That would explain why you have now lost file permissions as well as the socket permission. Those parameters are forced to reasonable values by the server only if the server decides that it needs to install its own security manager and default policy file.&lt;/p&gt;

&lt;p&gt;Could you try the following experiments:&lt;/p&gt;

&lt;p&gt;1) In your server policy file, replace the parameters with good values. So for instance,&lt;/p&gt;

&lt;p&gt;  $&lt;/p&gt;
{derby.install.url}
&lt;p&gt; would be replaced with something like &lt;a href=&quot;file:///export/home/rh161140/derby/mainline/trunk/jars/sane/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///export/home/rh161140/derby/mainline/trunk/jars/sane/&lt;/a&gt;&lt;br/&gt;
  $&lt;/p&gt;
{derby.system.home}
&lt;p&gt; would be replaced with something like /export/home/rh161140/derby/mainline&lt;br/&gt;
  $&lt;/p&gt;
{derby.security.host}
&lt;p&gt; would be replaced with the host address you use as the -h argument on your command line&lt;/p&gt;

&lt;p&gt;Since you are running with your own policy file you will  probably also need to add the following permission to the rights granted to derby.jar:&lt;/p&gt;

&lt;p&gt;  permission java.util.PropertyPermission &quot;user.dir&quot;, &quot;read&quot;;&lt;/p&gt;

&lt;p&gt;2) In the second experiment, it would be great if you could apply the patch to your workspace and build the jar files. Then use those jar files to run the original test which you described in your first mail message--that is, just bring boot the server with your port specification but without declaring a security manager or policy file. This should force the server to install its own security manager and pick up the new default policy file (which is the only change introduced by the patch).&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12508332" author="mkutty" created="Tue, 26 Jun 2007 22:16:42 +0100"  >&lt;p&gt;Tried with the patch and using the default security manager.&lt;/p&gt;

&lt;p&gt;started the server with the command:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@incus pantry&amp;#93;&lt;/span&gt;# java org.apache.derby.drda.NetworkServerControl start -h 2002:92a:8f7a:13:9:42:74:19&lt;/p&gt;

&lt;p&gt;And the stack trace is&lt;/p&gt;

&lt;p&gt;Security manager installed using the Basic server security policy.&lt;br/&gt;
Apache Derby Network Server - 10.3.1.1 beta - (550927M) started and ready to accept connections on port 1527 at 2007-06-26 20:40:16.862 GMT&lt;br/&gt;
Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:218&amp;#93;&lt;/span&gt;:34047 accept,resolve)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:218&amp;#93;&lt;/span&gt;:34047 accept,resolve)&lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:104)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)&lt;br/&gt;
        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:466)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:433)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:242)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)&lt;br/&gt;
Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:115&amp;#93;&lt;/span&gt;:1241 accept,resolve)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:115&amp;#93;&lt;/span&gt;:1241 accept,resolve)&lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:104)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)&lt;br/&gt;
        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:466)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:433)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:242)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)&lt;br/&gt;
Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:115&amp;#93;&lt;/span&gt;:1242 accept,resolve)&lt;br/&gt;
java.security.AccessControlException: Access denied (java.net.SocketPermission &lt;span class=&quot;error&quot;&gt;&amp;#91;2002:92a:8f7a:13:9:42:73:115&amp;#93;&lt;/span&gt;:1242 accept,resolve)&lt;br/&gt;
        at java.security.AccessController.checkPermission(AccessController.java:104)&lt;br/&gt;
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)&lt;br/&gt;
        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)&lt;br/&gt;
        at java.net.ServerSocket.implAccept(ServerSocket.java:466)&lt;br/&gt;
        at java.net.ServerSocket.accept(ServerSocket.java:433)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:242)&lt;br/&gt;
        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)&lt;/p&gt;</comment>
                            <comment id="12508353" author="rhillegas" created="Tue, 26 Jun 2007 23:39:45 +0100"  >&lt;p&gt;Attaching derby-2874-wildcard-01.diff. This grants accept permission to the wildcard address &quot;*&quot;.&lt;/p&gt;

&lt;p&gt;Manjul, thanks for sticking with this issue. Could you try experiment (2) with this patch?&lt;/p&gt;</comment>
                            <comment id="12508359" author="mkutty" created="Wed, 27 Jun 2007 00:30:06 +0100"  >&lt;p&gt;Rick,&lt;/p&gt;

&lt;p&gt;With this patch I could get connection to the server using default security manager. But by looking at the policy file I got this doubt , are we giving permission to everyone? &lt;/p&gt;

&lt;p&gt;By removing the &quot;$&lt;/p&gt;
{derby.security.host}
&lt;p&gt; I feel now the server is less secure.&lt;/p&gt;

&lt;p&gt;I don&apos;t know much about the security and policy. This is what I felt. If we are not loosing any intended security by doing this patch, then I would like to get this fix done on the 10.3 release candidate.&lt;/p&gt;</comment>
                            <comment id="12508534" author="rhillegas" created="Wed, 27 Jun 2007 14:09:18 +0100"  >&lt;p&gt;Thanks for test-driving this patch, Manjula. It also works for me on my personal laptop, which runs a version of Suse with dual v4 and v6 protocol stacks.&lt;/p&gt;

&lt;p&gt;I think that it would be better to restrict the socket permission as much as possible just as it would be better to restrict the file permissions as much as possible. However, I think this more liberal socket permission is fine for the default policy just as the liberal file permission is ok. The liberal socket permission is only granted to derbynet.jar and the server limits itself to addresses specified at boot time. Socket permission continues to be denied to code outside the server, such as user-written functions and procedures.&lt;/p&gt;</comment>
                            <comment id="12508545" author="djd" created="Wed, 27 Jun 2007 14:52:16 +0100"  >&lt;p&gt;Is it not possible to set derby.security.host to the correct format for the policy file when using an IPv6 address?&lt;br/&gt;
From looking at the error message and some brief googling it looks like the address should be enclosed in square brackets.&lt;/p&gt;</comment>
                            <comment id="12508546" author="rhillegas" created="Wed, 27 Jun 2007 14:56:04 +0100"  >&lt;p&gt;Attaching new version of the patch, derby-2874-wildcard-02.diff. In addition to wildcarding the socket permission, this patch removes the now unused code which calculated a value for derby.security.host. Touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/iapi/reference/Property.java&lt;br/&gt;
M      java/drda/org/apache/derby/drda/NetworkServerControl.java&lt;/p&gt;

&lt;p&gt;   Removes logic which calculated a value for security.host.property.&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/drda/server.policy&lt;br/&gt;
M      java/drda/org/apache/derby/drda/template.policy&lt;/p&gt;

&lt;p&gt;  Wildcards the socket permission.&lt;/p&gt;</comment>
                            <comment id="12508567" author="rhillegas" created="Wed, 27 Jun 2007 15:58:57 +0100"  >&lt;p&gt;Dan asks:&lt;/p&gt;

&lt;p&gt;&amp;gt;Is it not possible to set derby.security.host to the correct format for the policy file when using an IPv6 address?&lt;br/&gt;
&amp;gt;From looking at the error message and some brief googling it looks like the address should be enclosed in square brackets.&lt;/p&gt;

&lt;p&gt;It&apos;s possible. I think the devil is in the details and I&apos;m worried about edge cases this close to the release date. We could log a new JIRA to improve this.&lt;/p&gt;</comment>
                            <comment id="12508586" author="djd" created="Wed, 27 Jun 2007 17:38:23 +0100"  >&lt;p&gt;&amp;gt; It&apos;s possible. I think the devil is in the details and I&apos;m worried about edge cases this close to the release date. We could log a new JIRA to improve this. &lt;/p&gt;

&lt;p&gt;Probably it&apos;s just me, but I&apos;d be more worried about a late security change with little security analysis rather than handling a formatting change that can be tested with a handful of cases (8?, hostname, ip address, localhost, all addresses for IPv4 &amp;amp; IPv6).&lt;/p&gt;</comment>
                            <comment id="12508592" author="rhillegas" created="Wed, 27 Jun 2007 18:01:21 +0100"  >&lt;p&gt;Regardless of whether we (1) log a follow-on JIRA or (2) try to set derby.security.host in this release, it would be good to understand what extra security holes are covered by (2). What are your thoughts?&lt;/p&gt;</comment>
                            <comment id="12508597" author="mkutty" created="Wed, 27 Jun 2007 18:22:42 +0100"  >&lt;p&gt;In my personal openion I will go for option 2. Also I have the access to the Ipv6 machines for a limited time. So even if we go for option 1 , we may not be able to test it on the Ipv6 machinessoon after the fix.&lt;/p&gt;</comment>
                            <comment id="12508612" author="rhillegas" created="Wed, 27 Jun 2007 19:23:32 +0100"  >&lt;p&gt;I am happy to write a new patch so that we can experiment with (2) as long as Manjula can help test this. First, I would like to figure out what the behavior should be. Is it the following? In this discussion originalHostAddress means the value of the -h option or the value of derby.drda.host.&lt;/p&gt;

&lt;p&gt;A) If originalHostAddress evaluates to the same socket as the wildcard &quot;0.0.0.0&quot; or is the ipv6 wildcard &quot;::&quot;, then set derby.security.host to the socket wildcard &quot;*&quot;&lt;/p&gt;

&lt;p&gt;B) Otherwise, if originalHostAddress is composed entirely of hex digits and colons and InetAddress.getByName( originalHostAddress ) is an Inet6Address, then bracket originalHostAddress with [] and set derby.security.host to that bracketed value.&lt;/p&gt;

&lt;p&gt;C) Otherwise, set derby.security.host to originalHostAddress.&lt;/p&gt;

</comment>
                            <comment id="12508618" author="djd" created="Wed, 27 Jun 2007 19:42:20 +0100"  >&lt;p&gt;What&apos;s the benefit of A), isn&apos;t the functionality covered by B) and C)?&lt;/p&gt;</comment>
                            <comment id="12508624" author="rhillegas" created="Wed, 27 Jun 2007 20:12:43 +0100"  >&lt;p&gt;We could eliminate (A) and see what happens. It&apos;s a case which was put in to handle &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2811&quot; title=&quot;Specifying -h 0.0.0.0 with default security manager bars clients from connecting from any host&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2811&quot;&gt;&lt;del&gt;DERBY-2811&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12508638" author="djd" created="Wed, 27 Jun 2007 21:01:30 +0100"  >&lt;p&gt;OK on A). I didn&apos;t know about the issue seen in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2811&quot; title=&quot;Specifying -h 0.0.0.0 with default security manager bars clients from connecting from any host&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2811&quot;&gt;&lt;del&gt;DERBY-2811&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12508662" author="rhillegas" created="Wed, 27 Jun 2007 22:28:05 +0100"  >&lt;p&gt;Attaching derby-2874-03.diff. This implements (2) as described in steps (A) - (C). Touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/drda/NetworkServerControl.java&lt;/p&gt;

&lt;p&gt;  Implements steps (A) - (C)&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/drda/server.policy&lt;br/&gt;
M      java/drda/org/apache/derby/drda/template.policy&lt;/p&gt;

&lt;p&gt;  Same as in derby-2874-02.diff, i.e., removes wildcarded port specification&lt;/p&gt;
</comment>
                            <comment id="12508934" author="djd" created="Thu, 28 Jun 2007 22:17:11 +0100"  >&lt;p&gt;Is there a reference for putting the ipv6 address in square brackets, apart from my comment above?&lt;br/&gt;
Just wondered if some research had gone in this or you just trusted my brief comment?&lt;br/&gt;
My searching was very quick, early morning &lt;b&gt;and&lt;/b&gt; before coffee &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12508948" author="rhillegas" created="Thu, 28 Jun 2007 23:54:52 +0100"  >&lt;p&gt;Right, I assumed you had swallowed more coffee than I had. There&apos;s the javadoc for SocketPermission: &lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/net/SocketPermission.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/net/SocketPermission.html&lt;/a&gt; It indicates that the address should be bracketed. However, it also calls for tacking on a port spec, after the bracketed address. I&apos;m wondering whether we need to wildcard the port spec and end up with something like &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;0:1:2:3:4&amp;#93;&lt;/span&gt;:0-&quot; I&apos;m out of my depth here.&lt;/p&gt;</comment>
                            <comment id="12508949" author="djd" created="Fri, 29 Jun 2007 00:05:41 +0100"  >&lt;p&gt;Thanks Rick, I never saw that. I may now have had more coffee than you, I don&apos;t see anything that calls for &quot;tacking on a port spec&quot;, seems optional in every thing I read there. Could you quote whatever leads you to believe that. Thanks.&lt;/p&gt;</comment>
                            <comment id="12509115" author="rhillegas" created="Fri, 29 Jun 2007 15:08:41 +0100"  >&lt;p&gt;Thanks, Dan. You&apos;re right, the javadoc says &quot;The port or portrange is optional.&quot; I don&apos;t see an explicit statement of what meaning is attached to a SocketPermission which doesn&apos;t have a port spec. However, I&apos;m having a hard time imagining any meaning other than &quot;all ports on that host&quot;.&lt;/p&gt;</comment>
                            <comment id="12509176" author="mkutty" created="Fri, 29 Jun 2007 19:46:50 +0100"  >&lt;p&gt;Thanks for the new patch Rick. But unfortunatly I&apos;m still getting the same error with the same stack trace. &lt;/p&gt;</comment>
                            <comment id="12509214" author="rhillegas" created="Fri, 29 Jun 2007 23:04:28 +0100"  >&lt;p&gt;Thanks for testing that last patch, Manjula. I&apos;m attaching another patch, derby-2874-04-bracketsAllPorts.diff. This patch adds &quot;:0-&quot; to the end of the bracketed host address on the off chance that the port spec needs to be wildcarded. I am running out of ideas!&lt;/p&gt;</comment>
                            <comment id="12509717" author="mkutty" created="Tue, 3 Jul 2007 01:17:17 +0100"  >&lt;p&gt;Hi Rick,&lt;/p&gt;

&lt;p&gt;No more ideas needed. This patch works fine... &lt;/p&gt;</comment>
                            <comment id="12509869" author="rhillegas" created="Tue, 3 Jul 2007 14:29:43 +0100"  >&lt;p&gt;Thanks for sticking with this, Manjula. Unless someone objects, I intend to commit the derby-2874-04-bracketsAllPorts.diff patch this afternoon (San Francisco time).&lt;/p&gt;</comment>
                            <comment id="12509997" author="rhillegas" created="Tue, 3 Jul 2007 21:58:06 +0100"  >&lt;p&gt;Committed derby-2874-bracketsAllPorts.diff at subversion revision 552977.&lt;/p&gt;</comment>
                            <comment id="12510000" author="rhillegas" created="Tue, 3 Jul 2007 22:06:31 +0100"  >&lt;p&gt;P:orted previous submission to 10.3 branch at subversion revision 552981.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12359060">DERBY-2196</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12360611" name="derby-2874-01.diff" size="519" author="rhillegas" created="Tue, 26 Jun 2007 19:41:34 +0100"/>
                            <attachment id="12360692" name="derby-2874-03.diff" size="3561" author="rhillegas" created="Wed, 27 Jun 2007 22:28:05 +0100"/>
                            <attachment id="12360850" name="derby-2874-04-bracketsAllPorts.diff" size="3564" author="rhillegas" created="Fri, 29 Jun 2007 23:04:27 +0100"/>
                            <attachment id="12360624" name="derby-2874-wildcard-01.diff" size="1002" author="rhillegas" created="Tue, 26 Jun 2007 23:39:45 +0100"/>
                            <attachment id="12360670" name="derby-2874-wildcard-02.diff" size="4478" author="rhillegas" created="Wed, 27 Jun 2007 14:56:04 +0100"/>
                            <attachment id="12360612" name="server.policy" size="1690" author="mkutty" created="Tue, 26 Jun 2007 20:20:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Jun 2007 18:41:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0jh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36973</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>