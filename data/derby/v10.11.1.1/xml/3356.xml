<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3356/DERBY-3356.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3356] &quot;Replication slave got a fatal error for database &apos;test&apos;. Replication will be stopped.&quot; on insert on master db.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3356</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;1)&lt;br/&gt;
startSlave and startMaster done.&lt;br/&gt;
2)&lt;br/&gt;
Insert on master:&lt;br/&gt;
 insert into t values (200,&apos;200&apos;),(201,&apos;201&apos;),(202,&apos;202&apos;),(203,&apos;203&apos;),(204,&apos;204&apos;);&lt;/p&gt;

&lt;p&gt;Slave derby.log get:&lt;br/&gt;
--------  BEGIN REPLICATION ERROR MESSAGE ---------&lt;br/&gt;
Replication slave got a fatal error for database &apos;test&apos;. Replication will be stopped.&lt;br/&gt;
ERROR XRE05: The log received from the master is not in synch with the local log for replicated database &apos;test&apos;. The received log instant is 4,295,058,963, whereas the local instant is 4,294,986,347. This is FATAL for replication - replication will be stopped.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:341)&lt;br/&gt;
	at org.apache.derby.impl.services.replication.slave.SlaveController$SlaveLogReceiverThread.handleLogChunk(SlaveController.java:532)&lt;br/&gt;
	at org.apache.derby.impl.services.replication.slave.SlaveController$SlaveLogReceiverThread.run(SlaveController.java:464)&lt;/p&gt;

&lt;p&gt;---------  END REPLICATION ERROR MESSAGE ----------&lt;/p&gt;

&lt;p&gt;Master derby.log: no change.&lt;/p&gt;

&lt;p&gt;3)&lt;br/&gt;
stopMaster:&lt;br/&gt;
Master derby.log:&lt;br/&gt;
Replication master role stopped for database &apos;null&apos;.&lt;/p&gt;


&lt;p&gt;Slave derby.log: no change.&lt;br/&gt;
I.e. slave has not got &quot;stopSlave&quot; from master.&lt;/p&gt;

&lt;p&gt;4)&lt;br/&gt;
Thus: Slave:&lt;br/&gt;
CONNECT &apos;jdbc:derby://atum11:9999/test&apos;;&lt;br/&gt;
ERROR 08004: DERBY SQL error: SQLCODE: -1, SQLSTATE: 08004, SQLERRMC: Connection refused to database &apos;test&apos; because it is in replication slave mode.&lt;/p&gt;


&lt;p&gt;Looks like after 2) master-slave communication is lost. But according to 4) slave still thinks it has connection to master?&lt;/p&gt;
</description>
                <environment>Trunk (615841) + patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3205&quot; title=&quot;Replication: Add connection url command options for starting, stopping slave and for failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3205&quot;&gt;&lt;strike&gt;DERBY-3205&lt;/strike&gt;&lt;/a&gt;/stopSlave_v1b</environment>
        <key id="12387352">DERBY-3356</key>
            <summary>&quot;Replication slave got a fatal error for database &apos;test&apos;. Replication will be stopped.&quot; on insert on master db.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jorgenlo">J&#248;rgen L&#248;land</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jan 2008 08:17:02 +0000</created>
                <updated>Thu, 7 Feb 2008 09:05:55 +0000</updated>
                            <resolved>Wed, 6 Feb 2008 10:05:16 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12563428" author="jorgenlo" created="Tue, 29 Jan 2008 08:52:40 +0000"  >&lt;p&gt;Good catch Ole - we need to shut down the slave database when this happens. That is, whenever the SlaveController gets a fatal exception, it needs to call stopSlave&lt;/p&gt;</comment>
                            <comment id="12566067" author="jorgenlo" created="Wed, 6 Feb 2008 10:05:16 +0000"  >&lt;p&gt;Fixed as part of patch derby-3361-1b.diff in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3361&quot; title=&quot;Specifying a non-existant slaveHost for startSlave seemingly succeeds in starting slave mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3361&quot;&gt;&lt;del&gt;DERBY-3361&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Jan 2008 08:52:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39564</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>