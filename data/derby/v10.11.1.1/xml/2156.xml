<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:10 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2156/DERBY-2156.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2156] message XSDB8 and 42Y32 have references to db2j</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2156</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;trunk/messages.xml shows two messages that incorrectly refer to db2j:&lt;/p&gt;

&lt;p&gt;42Y32=Aggregator class &apos;&apos;&lt;/p&gt;
{0}&apos;&apos; for aggregate &apos;&apos;{1}&apos;&apos; on type {2} does not implement com.ibm.db2j.aggregates.Aggregator. &lt;br/&gt;
There is now no class Aggregator in Derby. This message is generated from the class: &lt;br/&gt;
org.apache.derby.impl.sql.compile.AggregateNode.java.&lt;br/&gt;
          private void checkAggregatorClassName(String className) throws StandardException&lt;br/&gt;
          {&lt;br/&gt;
              className = verifyClassExist(className, false);&lt;br/&gt;
              if (!classInspector.assignableTo(className, &quot;org.apache.derby.iapi.sql.execute.ExecAggregator&quot;))&lt;br/&gt;
              {
                   throw StandardException.newException
                       (SQLState.LANG_BAD_AGGREGATOR_CLASS2, 
                         className, 
                         aggregateName,
	    operand.getTypeId().getSQLTypeName());
               }&lt;br/&gt;
           }&lt;br/&gt;
&lt;br/&gt;
The original in Cloudscape had a reference to an Aggregator class, the if looked like this:&lt;br/&gt;
&lt;br/&gt;
          if (!classInspector.assignableTo(className, &quot;com.ibm.db2j.aggregates.Aggregator&quot;) &amp;amp;&amp;amp;&lt;br/&gt;
              !classInspector.assignableTo &lt;br/&gt;
                   (className, &quot;com.ibm.db2j.protocol.Database.Language.Execution.ExecAggregator&quot;))&lt;br/&gt;
           {&lt;br/&gt;
                throw StandardException.newException(SQLState.LANG_BAD_AGGREGATOR_CLASS2, &lt;br/&gt;
                  ....&lt;br/&gt;
&lt;br/&gt;
Maybe the message now needs to mention org.apache.derby.iapi.sql.execute.ExecAggregator?&lt;br/&gt;
But, I think maybe this message cannot be obtained unless someone introduces a bug within the Derby code. I think the reference to another internal class should be removed. Or maybe the text of Cloudscape message 42Y31 can be used: 42Y31=LANG_BAD_AGGREGATOR_CLASS=&quot;Aggregator class &apos;&apos;{0}
&lt;p&gt;&apos;&apos; for aggregate &apos;&apos;&lt;/p&gt;
{1}&apos;&apos; on type {2} is inaccessable or does not exist.&quot;&lt;br/&gt;
&lt;br/&gt;
XSDB8.D=DATA_MULTIPLE_JBMS_FORCE_LOCK =&quot;WARNING: Derby (instance {0}) is attempting to boot the database {1}
&lt;p&gt; even though Derby (instance &lt;/p&gt;
{2}
&lt;p&gt;) may still be active.  Only one instance of Derby should boot a database at a time. Severe and non-recoverable corruption can result if 2 instances of Derby boot on the same database at the same time.  The db2j.database.forceDatabaseLock=true property has been set, so the database will not boot until the db.lck is no longer present.  Normally this file is removed when the first instance of Derby to boot on the database exits, but it may be left behind in some shutdowns.  It will be necessary to remove the file by hand in that case.  It is important to verify that no other VM is accessing the database before deleting the db.lck file by hand.&quot;&lt;/p&gt;

&lt;p&gt;John Embretsen commented on this in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1838&quot; title=&quot;Derby allows dual boot which  can cause corruption of databases with JVM&amp;#39;s lower than 1.4.2 on non-windows systems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1838&quot;&gt;&lt;del&gt;DERBY-1838&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1838#action_12434090&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-1838#action_12434090&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Indicating that not only should the message refer to derby.database.forceDatabaseLock, but the replacement of parameters is not happening either. &lt;br/&gt;
But I can not find a place where this message is generated, so maybe it can just be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12357917">DERBY-2156</key>
            <summary>message XSDB8 and 42Y32 have references to db2j</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Dec 2006 17:02:07 +0000</created>
                <updated>Thu, 13 Jan 2011 21:48:45 +0000</updated>
                            <resolved>Fri, 30 Apr 2010 17:18:12 +0100</resolved>
                                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>SQL</component>
                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12728131" author="knutanders" created="Tue, 7 Jul 2009 15:55:03 +0100"  >&lt;p&gt;Triaged for 10.5.2. 42Y32 was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2676&quot; title=&quot;Class name &amp;quot;com.ibm.db2j.aggregates.Aggregator&amp;quot; refered in error message is no longer correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2676&quot;&gt;&lt;del&gt;DERBY-2676&lt;/del&gt;&lt;/a&gt;, but the problem is still there for XSDB8.D.&lt;/p&gt;</comment>
                            <comment id="12862612" author="knutanders" created="Fri, 30 Apr 2010 10:51:01 +0100"  >&lt;p&gt;I don&apos;t see the problems with replacement of parameters that John saw. Here&apos;s the message I get when I run with derby.database.forceDatabaseLock=true on phoneME Advanced:&lt;/p&gt;

&lt;p&gt;ERROR XSDB8: WARNING: Derby (instance c013800d-0128-4e11-256e-000000122fa8) is attempting to boot the database /home/kah/derby/test/db even though Derby (instance c013800d-0128-4e10-fe16-000000123704) may still be active.  Only one instance of Derby should boot a database at a time. Severe and non-recoverable corruption can result if 2 instances of Derby boot on the same database at the same time.  The db2j.database.forceDatabaseLock=true property has been set, so the database will not boot until the db.lck is no longer present.  Normally this file is removed when the first instance of Derby to boot on the database exits, but it may be left behind in some shutdowns.  It will be necessary to remove the file by hand in that case.  It is important to verify that no other VM is accessing the database before deleting the db.lck file by hand.&lt;/p&gt;

&lt;p&gt;The problem John saw on Java 1.3.1 looked like if the JVM chose to invoke StandardException.newException(String,Object) instead of StandardException.newException(String,Object[]). Perhaps a JVM bug.&lt;/p&gt;</comment>
                            <comment id="12862621" author="knutanders" created="Fri, 30 Apr 2010 11:17:40 +0100"  >&lt;p&gt;The attached patch replaces db2j.database.forceDatabaseLock with derby.database.forceDatabaseLock in all the message files and in ErrorCodeTest. Running the regression tests now.&lt;/p&gt;</comment>
                            <comment id="12862734" author="knutanders" created="Fri, 30 Apr 2010 17:18:12 +0100"  >&lt;p&gt;Committed revision 939730.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12443278" name="forceDatabaseLock.diff" size="58988" author="knutanders" created="Fri, 30 Apr 2010 11:17:40 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jul 2009 14:55:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>