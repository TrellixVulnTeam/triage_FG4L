<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:34:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-180/DERBY-180.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-180] XCL47 SQLState duplicated in messages_en.properties?</title>
                <link>https://issues.apache.org/jira/browse/DERBY-180</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In the messages_en.properties file, there are two items that are similar:&lt;/p&gt;

&lt;p&gt;XCL47.S=Use of &apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos; requires database to be upgraded from version &lt;/p&gt;
{1}
&lt;p&gt; to version &lt;/p&gt;
{2}
&lt;p&gt; or later.&lt;br/&gt;
XCL478.S=The requested function can not reference tables in SESSION schema.&lt;/p&gt;

&lt;p&gt;SQLSTATEs are supposed to be 5 characters long. When I issue a CREATE VIEW on a SESSION table, I receive the proper error message:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; declare global temporary table x (a int) not logged;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create view z as (select * from session.x);&lt;br/&gt;
ERROR XCL47: The requested function can not reference tables in SESSION schema.&lt;/p&gt;

&lt;p&gt;So, was XCL478 truncated to XCL47? Does this mean that if I tried to do something that invokes the other version of XCL47 that I will get the wrong message? I suspect one of the message numbers needs to be changed and that the SQL error be fixed to be 5 characters long instead of 6.&lt;/p&gt;</description>
                <environment>Windows XP SP1 Professional</environment>
        <key id="31143">DERBY-180</key>
            <summary>XCL47 SQLState duplicated in messages_en.properties?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fuzzylogic">Andrew McIntyre</assignee>
                                    <reporter username="baklarz">George Baklarz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Mar 2005 06:07:46 +0000</created>
                <updated>Wed, 1 Jun 2005 04:38:00 +0100</updated>
                            <resolved>Wed, 1 Jun 2005 04:38:00 +0100</resolved>
                                    <version>10.0.2.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="66053" author="dyret" created="Mon, 23 May 2005 19:16:30 +0100"  >&lt;p&gt;Yes the messageId was truncated. I think you will get the correct message, because the full messageId is stored in the &lt;br/&gt;
Exception object. getSQLState() will only return a string made up of the first 5 characters. getMessageId() (not a part of &lt;br/&gt;
SQLException, but found in EmbedSQLException) will return the full string, including &quot;.S&quot;.&lt;/p&gt;

&lt;p&gt;I haven&apos;t figured out how ij finds the string to print, but by modifying SimpleApp.java (renamed Try.java) to trigger your exception you can see the that the full string is in the exception thrwon:&lt;/p&gt;

&lt;p&gt; dt136804@atum10~/java$ java -classpath $(find-jars.sh ~/derbyjars):. Try&lt;br/&gt;
Try starting in embedded mode.&lt;br/&gt;
Loaded the appropriate driver.&lt;br/&gt;
Connected to and created database derbyDB&lt;br/&gt;
Created table derbyDB&lt;br/&gt;
Inserted 1956 Webster&lt;br/&gt;
Inserted 1910 Union&lt;br/&gt;
Updated 1956 Webster to 180 Grand&lt;br/&gt;
Updated 180 Grand to 300 Lakeshore&lt;br/&gt;
Verified the rows&lt;br/&gt;
 Venturing into unknown territory...&lt;br/&gt;
exception thrown:&lt;br/&gt;
SQL Exception: The requested function can not reference tables in SESSION schema.&lt;br/&gt;
SQLState: XCL47 MessageId: XCL478.S&lt;br/&gt;
--&amp;gt; note the difference between SQLState and MessageId&lt;/p&gt;

&lt;p&gt;ERROR XCL47: The requested function can not reference tables in SESSION schema.&lt;br/&gt;
--&amp;gt; This looks very much like the string printed by ij, but I don&apos;t know if printStackTrace and ij use a common function --&amp;gt; for this&lt;/p&gt;

&lt;p&gt;       at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:301)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:281)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.CreateViewNode.bind(CreateViewNode.java:184)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:332)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:107)&lt;br/&gt;
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:688)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:501)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:475)&lt;br/&gt;
        at Try.go(Try.java:162)&lt;br/&gt;
        at Try.main(Try.java:64)&lt;br/&gt;
null&lt;br/&gt;
Try finished&lt;/p&gt;

&lt;p&gt;I think you&apos;re right about the MessageId for XCL478 being too long. I tried to use svn blame to see when this was done&lt;br/&gt;
(and perhaps why), but it looks like this was inherited from Cloudscape. From what I could see, there are only about 50 other XCLxx messages, so it should be easy to find a unique id. &lt;/p&gt;

&lt;p&gt;Of course, changing error codes/ids is dangerous, since you risk breaking existing client code that relies on the old (incorrect) behavior. Maybe some of the Derby/Cloudscape gurus can shed some more light on this?&lt;/p&gt;
</comment>
                            <comment id="66066" author="mamtas" created="Tue, 24 May 2005 01:26:18 +0100"  >&lt;p&gt;It seems to me that the MessageId XCL478 may have been an oversight when it was picked up to be 6 characters in length.&lt;/p&gt;</comment>
                            <comment id="66647" author="fuzzylogic" created="Wed, 1 Jun 2005 04:22:20 +0100"  >&lt;p&gt;attaching patch previously submitted to derby-dev&lt;/p&gt;</comment>
                            <comment id="66650" author="fuzzylogic" created="Wed, 1 Jun 2005 04:38:00 +0100"  >&lt;p&gt;Committed, revision 179260.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="20337" name="DERBY-180.diff" size="2104" author="fuzzylogic" created="Wed, 1 Jun 2005 04:22:20 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 May 2005 18:16:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21822</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy18dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41008</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>