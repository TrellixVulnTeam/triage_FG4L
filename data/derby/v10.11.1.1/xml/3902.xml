<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:23:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3902/DERBY-3902.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3902] some messages are referenced but never used - MessageBundleTest output</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3902</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;MessageBundleTest was taken out of derbyall because it only ran with classes, not with jars, and it was decided that it would be better to make this into a build check rather than a test...&lt;/p&gt;

&lt;p&gt;However, the build check - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1458&quot; title=&quot;Add MessageBundleTest to build script to verify that there are no orphaned message ids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1458&quot;&gt;&lt;del&gt;DERBY-1458&lt;/del&gt;&lt;/a&gt; - was never implemented, and so, the test has not been run.&lt;br/&gt;
When I ran, I got the following output:&lt;/p&gt;

&lt;p&gt;testSQLStateOrphanedIds ERROR: Message id 22003.S.4 in SQLState.java was not found in messages_en.properties&lt;br/&gt;
ERROR: Message id XCL32.S in SQLState.java was not found in messages_en.properties&lt;br/&gt;
ERROR: Message id X0RQ3.C in SQLState.java was not found in messages_en.properties&lt;br/&gt;
ERROR: Message id XSAX1 in SQLState.java was not found in messages_en.properties&lt;br/&gt;
used 188 ms .&lt;br/&gt;
testMessageIdOrphanedIds used 0 ms .&lt;br/&gt;
testMessageBundleOrphanedMessages WARNING: Message id 22004.S.4 in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id J106 in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id J107 in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id J108 in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id J109 in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id 08000.S.1 in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id XCL17.S in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
WARNING: Message id XJ102.S in messages_en.properties is not referenced in either SQLState.java or MessageId.java&lt;br/&gt;
used 0 ms &lt;/p&gt;

&lt;p&gt;Some of these are known issues, e.g. XCL32 - it&apos;s been in MessageBundleTest.out for a long time...&lt;br/&gt;
XSAX1 looks like a assumption mismatch in MessageBundleTest, see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1413&quot; title=&quot;SQL State STORE_XA_XAER_DUPID does not have a matching message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1413&quot;&gt;&lt;del&gt;DERBY-1413&lt;/del&gt;&lt;/a&gt;....&lt;/p&gt;

&lt;p&gt;But others need some minor code changes/cleanup, for instance, looks like the need for J106 was removed during &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2692&quot; title=&quot;Client driver doesn&amp;#39;t chain exceptions received from the server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2692&quot;&gt;&lt;del&gt;DERBY-2692&lt;/del&gt;&lt;/a&gt;, see &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=543428&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=543428&lt;/a&gt;, and should probably get removed from messages_en.properties/messages.xml.&lt;/p&gt;

&lt;p&gt;Needs further checking.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12405871">DERBY-3902</key>
            <summary>some messages are referenced but never used - MessageBundleTest output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Oct 2008 00:38:45 +0100</created>
                <updated>Thu, 13 Jan 2011 22:11:38 +0000</updated>
                            <resolved>Tue, 14 Oct 2008 02:22:26 +0100</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Miscellaneous</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12638399" author="myrna" created="Thu, 9 Oct 2008 22:24:29 +0100"  >&lt;p&gt;With revision 703170 for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1411&quot; title=&quot;DRDAConnThread uses SQLState.NO_SUCH_DATABASE, which has no matching message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1411&quot;&gt;&lt;del&gt;DERBY-1411&lt;/del&gt;&lt;/a&gt; removed the X0RQ3 unused sqlstate.&lt;br/&gt;
With revision 703259 I corrected the SQLState reference in messages.xml &amp;amp; all translated .properties files for 22003.S.4 / 22004.S.4 - should&apos;ve been 2004.S.4 both in SQLState.java &amp;amp; messages.xml (originally messages_en.properties) (See also a comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1567&quot; title=&quot;generateClientMessageTest.sh is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1567&quot;&gt;DERBY-1567&lt;/a&gt;).&lt;br/&gt;
I also fixed up the MessageBundleTest to ignore SQLStates XCL32 and XSAX1, which aren&apos;t exposed to end users and so do not need text. (See also &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1414&quot; title=&quot;SQL State LANG_STATEMENT_NEEDS_RECOMPILE has no message associated with it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1414&quot;&gt;&lt;del&gt;DERBY-1414&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1413&quot; title=&quot;SQL State STORE_XA_XAER_DUPID does not have a matching message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1413&quot;&gt;&lt;del&gt;DERBY-1413&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;
</comment>
                            <comment id="12638465" author="myrna" created="Fri, 10 Oct 2008 04:14:58 +0100"  >&lt;p&gt;Some further research:&lt;br/&gt;
J106, J107, J108 and J109 were added with revision 395484. &lt;br/&gt;
They were thrown in only one class (J106, J107 in client.am.SqlExcpetion; J108 &amp;amp; J109 in client.am.Version), and maybe that&apos;s why they weren&apos;t moved into MessageId.java?&lt;br/&gt;
Since then, the throwing of J106 has been removed, as I mentioned in an earlier comment, but the reference in SqlException still exist. That reference and the entries in messages.xml should get removed.&lt;/p&gt;

&lt;p&gt;What to do about J107, J108 and J109? Is there any reason why it&apos;s better to have these defined in individual classes rather than grouped in MessageId?&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;08000.S.1 (&quot;Cannot close a connection with an active transaction.  The transaction remains open and the connection was not closed&quot;) was added to messages_en.properties with revision 388309.&lt;br/&gt;
I think this might originally have been intended to replace this in client.am.Connection:&lt;br/&gt;
@@ -713,8 +711,7 @@&lt;br/&gt;
        // The following precondition matches CLI semantics, see SQLDisconnect()&lt;br/&gt;
        if (!autoCommit_ &amp;amp;&amp;amp; inUnitOfWork_ &amp;amp;&amp;amp; !allowCloseInUOW_()) &lt;/p&gt;
{
            throw new SqlException(agent_.logWriter_,
-                    &quot;java.sql.Connection.close() requested while a transaction is in progress on the connection.&quot; +
-                    &quot;The transaction remains active, and the connection cannot be closed.&quot;);
+                    new MessageId (SQLState.CANNOT_CLOSE_ACTIVE_XA_CONNECTION));
        }
&lt;p&gt;    }&lt;br/&gt;
But as per the svn diff, instead of a an entry in SQLState for 08000 it was mapped to CANNOT_CLOSE_ACTIVE_XA_CONNECTION (XJ059), later (revision 390176) and after discussion re &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1149&quot; title=&quot;&amp;#39;jdbc40/StatementTest.junit&amp;#39; fails under DerbyNetClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1149&quot;&gt;&lt;del&gt;DERBY-1149&lt;/del&gt;&lt;/a&gt;, this was changed to  CANNOT_CLOSE_ACTIVE_CONNECTION, which was added as SQLState 25001.S.1: Invalid transaction state: active SQL transaction&lt;/p&gt;

&lt;p&gt;So, what&apos;s best here - add a code for 08000 and see if that section still exists &amp;amp;  map it? Or is it ok as is an we can just remove 08000 from the messages.xml?&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;XCL17 is a left over of expired Cloudscape-source and should be removed.&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;XJ102 - &quot;Can not perform an insert at the current position&quot; in messages_en.properties since revision 393967.&lt;br/&gt;
Probably it was meant to replace the following in insertRowXXX in client.am.ResultSet:&lt;br/&gt;
         // if not on a valid row, then do not accept updateXXX calls&lt;br/&gt;
         if (!isValidCursorPosition_) &lt;/p&gt;
{
-            throw new SqlException(agent_.logWriter_, &quot;Invalid operation to &quot; +
-                    &quot;insert at current cursor position&quot;);
+            throw new SqlException(agent_.logWriter_, 
+                new MessageId(SQLState.CURSOR_INVALID_OPERATION_AT_CURRENT_POSITION));
         }
&lt;p&gt;(Note: the comment is probably the result of cut-and-paste-without-edit, should be insertXXX calls)&lt;br/&gt;
But as per the svn diff it was set to XJ121: &quot;Invalid operation at current cursor position&quot;.&lt;/p&gt;

&lt;p&gt;Again, what is best, leave it as is &amp;amp; remove XJ102 references from messages_en.properties or add an appropriate reference to SQLState?&lt;/p&gt;

&lt;p&gt;I&apos;ll remove the orphaned references to XCL17 and J106 now, but I&apos;ll wait a bit to see if anyone chimes in on the other issues.&lt;/p&gt;

</comment>
                            <comment id="12639268" author="myrna" created="Tue, 14 Oct 2008 02:22:26 +0100"  >&lt;p&gt;I addressed this by:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;moving J107, J108 and J109 to common.reference.MessageId.&lt;br/&gt;
  It seemed to me that there were no benefits from having them in the classes where they &lt;br/&gt;
  were used, and logically, they belong with the rest of the constant message ids.&lt;/li&gt;
	&lt;li&gt;removed 08000.S.1.&lt;br/&gt;
  Embedded throws error CANNOT_CLOSE_ACTIVE_CONNECTION (25001 - Cannot close a connection while a transaction is still active) in the similar situation, so it seemed better to leave this as is and remove the remove 08000.S.1 from messages.xml and the messages properties files.&lt;/li&gt;
	&lt;li&gt;removed XJ102&lt;br/&gt;
  The current message XJ121 refers to the cursor position - I think that&apos;s preferred over clarifying that it&apos;s an insert that fails (which is likely clear from the end-user&apos;s actions).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12864289" author="kristwaa" created="Wed, 5 May 2010 12:45:01 +0100"  >&lt;p&gt;Closing issue.&lt;br/&gt;
These checks are now run as part of the build.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12344406">DERBY-1411</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 May 2010 11:45:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ngf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>