<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:19:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4398/DERBY-4398.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4398] Allow OFFSET/FETCH in subqueries</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4398</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;SQL 2008 specifies that OFFSET/FETCH (&amp;lt;result offset clause&amp;gt;, &amp;lt;fetch&lt;br/&gt;
first clause&amp;gt;) may be used in subqueries.  Currently, Derby only&lt;br/&gt;
allows this at the outer (cursor) level. Cf. also &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4397&quot; title=&quot;Allow ORDER BY in subqueries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4397&quot;&gt;&lt;del&gt;DERBY-4397&lt;/del&gt;&lt;/a&gt; on&lt;br/&gt;
allowing ORDER BY in subqueries for this extension to be portable and&lt;br/&gt;
useful.&lt;/p&gt;

&lt;p&gt;SQL features: &lt;/p&gt;

&lt;p&gt;F856 Nested &amp;lt;fetch first clause&amp;gt; in &amp;lt;query expression&amp;gt;&lt;br/&gt;
F857 Top-level &amp;lt;fetch first clause&amp;gt; in &amp;lt;query expression&amp;gt; (already present in 10.5)&lt;br/&gt;
F858 &amp;lt;fetch first clause&amp;gt; in subqueries&lt;br/&gt;
F859 Top-level &amp;lt;fetch first clause&amp;gt; in views&lt;br/&gt;
F860 dynamic &amp;lt;fetch first row count&amp;gt; in &amp;lt;fetch first clause&amp;gt; (already present in 10.5)&lt;/p&gt;

&lt;p&gt;F861 Top-level &amp;lt;result offset clause&amp;gt; in &amp;lt;query expression&amp;gt; (already present in 10.5)&lt;br/&gt;
F862 &amp;lt;result offset clause&amp;gt; in subqueries&lt;br/&gt;
F863 Nested &amp;lt;result offset clause&amp;gt; in &amp;lt;query expression&amp;gt;&lt;br/&gt;
F864 Top-level &amp;lt;result offset clause&amp;gt; in views&lt;br/&gt;
F865 dynamic &amp;lt;offset row count&amp;gt; in &amp;lt;result offset clause&amp;gt; (already present in 10.5)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437333">DERBY-4398</key>
            <summary>Allow OFFSET/FETCH in subqueries</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Oct 2009 01:05:26 +0100</created>
                <updated>Tue, 11 May 2010 00:43:19 +0100</updated>
                            <resolved>Thu, 28 Jan 2010 15:58:44 +0000</resolved>
                                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12792771" author="dagw" created="Sat, 19 Dec 2009 03:17:55 +0000"  >&lt;p&gt;Uploading a first patch (derby-4398-insert) which enables offset/fetch&lt;br/&gt;
first in INSERT subquery context.  This modifies the previous&lt;br/&gt;
implementation for offset fetch which only had to consider a top level&lt;br/&gt;
cursor context. Instead of wrapping the row count result set node from&lt;br/&gt;
CursorNode#optimizeStatement, the offset/fetch info is now pushed to&lt;br/&gt;
the underlying result set, similar to what is done for order by.&lt;/p&gt;

&lt;p&gt;Added test cases to the now renamed test OrderByAndOffsetFetchInSubqueries.&lt;br/&gt;
The patch is not yet for commit, needs some cleanups still.&lt;/p&gt;

&lt;p&gt;Running regressions.&lt;/p&gt;</comment>
                            <comment id="12792887" author="dagw" created="Sat, 19 Dec 2009 19:10:50 +0000"  >&lt;p&gt;Regressions passed.&lt;/p&gt;</comment>
                            <comment id="12797584" author="dagw" created="Thu, 7 Jan 2010 10:31:54 +0000"  >&lt;p&gt;Uploading version 2 of this patch; which extends the support for offset/fetch to&lt;br/&gt;
all subqueries, and adds test cases.&lt;/p&gt;

&lt;p&gt;Missing is still informing the optimizer with hints on cardinality if offset/fetch is used.&lt;br/&gt;
I also need to investigate more if sort avoidance still works in presence of offset/fetch.&lt;br/&gt;
Flattening is prohibited in the presence of offset/fetch, similarly to what is done for order by in subqueries.&lt;/p&gt;

&lt;p&gt;Running regressions.&lt;/p&gt;</comment>
                            <comment id="12797651" author="dagw" created="Thu, 7 Jan 2010 15:19:07 +0000"  >&lt;p&gt;Regressions passed.&lt;/p&gt;</comment>
                            <comment id="12798652" author="dagw" created="Mon, 11 Jan 2010 12:41:35 +0000"  >&lt;p&gt;Uploading derby-4398-3, similar to rev 2, but cleaned up a little, including moving bindOffsetFetch to QueryTreeNode from CursorNode. Will commit this version if regression spass.&lt;/p&gt;</comment>
                            <comment id="12798721" author="dagw" created="Mon, 11 Jan 2010 16:54:11 +0000"  >&lt;p&gt;Committed rev 3 as svn 897934, and a followup fix for a javadoc error svn 897937.&lt;/p&gt;</comment>
                            <comment id="12805969" author="dagw" created="Thu, 28 Jan 2010 15:58:44 +0000"  >&lt;p&gt;Resolving this issue. Optimizer tie-in will be handled in a separate issue if/when we get to that.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12464192">DERBY-4649</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12445932">DERBY-4518</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12437331">DERBY-4397</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12429635" name="derby-4398-2.diff" size="88462" author="dagw" created="Thu, 7 Jan 2010 10:31:54 +0000"/>
                            <attachment id="12429636" name="derby-4398-2.stat" size="1638" author="dagw" created="Thu, 7 Jan 2010 10:31:54 +0000"/>
                            <attachment id="12429882" name="derby-4398-3.diff" size="91624" author="dagw" created="Mon, 11 Jan 2010 12:41:34 +0000"/>
                            <attachment id="12429883" name="derby-4398-3.stat" size="1711" author="dagw" created="Mon, 11 Jan 2010 12:41:35 +0000"/>
                            <attachment id="12428521" name="derby-4398-insert.diff" size="68337" author="dagw" created="Sat, 19 Dec 2009 03:17:55 +0000"/>
                            <attachment id="12428522" name="derby-4398-insert.stat" size="1416" author="dagw" created="Sat, 19 Dec 2009 03:17:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0qe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>