<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2727/DERBY-2727.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2727] convert lang/AggregateClassLoading to JUnit.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2727</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12370488">DERBY-2727</key>
            <summary>convert lang/AggregateClassLoading to JUnit.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="matra">Ugo Matrangolo</assignee>
                                    <reporter username="matra">Ugo Matrangolo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2007 23:25:01 +0100</created>
                <updated>Wed, 1 Jul 2009 00:40:21 +0100</updated>
                            <resolved>Sat, 30 Jun 2007 16:57:28 +0100</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12504000" author="matra" created="Tue, 12 Jun 2007 21:59:48 +0100"  >&lt;p&gt;Initial attempt to convert this test.&lt;/p&gt;

&lt;p&gt;At first sight it seems trivial to convert but, obviously, he doesn&apos;t work! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Running the test I get a security exception:&lt;/p&gt;

&lt;p&gt;java.security.AccessControlException: access denied (java.lang.RuntimePermission getProtectionDomain)&lt;br/&gt;
	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:269)&lt;br/&gt;
	at java.security.AccessController.checkPermission(AccessController.java:401)&lt;br/&gt;
	at java.lang.SecurityManager.checkPermission(SecurityManager.java:524)&lt;br/&gt;
	at java.lang.Class.getProtectionDomain(Class.java:1392)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.AggregateClassLoadingTest$1.decorateSQL(AggregateClassLoadingTest.java:106)&lt;br/&gt;
	at org.apache.derbyTesting.junit.CleanDatabaseTestSetup.setUp(CleanDatabaseTestSetup.java:70)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:20)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)&lt;/p&gt;

&lt;p&gt;Can someone point me toward the solution of this ??&lt;/p&gt;

&lt;p&gt;Thank you in advance,&lt;br/&gt;
&amp;#8211; Ugo.&lt;/p&gt;</comment>
                            <comment id="12504002" author="matra" created="Tue, 12 Jun 2007 22:01:36 +0100"  >&lt;p&gt;Followinf from the previous comment: the code that fails is :&lt;/p&gt;

&lt;p&gt;/*&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Find the location of the code for the Derby connection. The&lt;/li&gt;
	&lt;li&gt;rest of the engine will be at the same location!&lt;br/&gt;
 */			&lt;br/&gt;
derbyURL = s.getConnection().getClass().getProtectionDomain().getCodeSource().getLocation();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;borrowed from the old test. I suspect that the context is not the same of the old harness test.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Ugo.&lt;/p&gt;</comment>
                            <comment id="12504024" author="kmarsden" created="Tue, 12 Jun 2007 23:10:30 +0100"  >&lt;p&gt;I see that for the original test there is a AggregateClassLoading_app.properties&lt;br/&gt;
which has:&lt;/p&gt;


&lt;ol&gt;
	&lt;li&gt;this test creates a class loader, adding that permission to&lt;/li&gt;
	&lt;li&gt;derbyTesting.jar would mean that permission was granted all&lt;/li&gt;
	&lt;li&gt;the way up the stack to the derby engine. Thus increasing&lt;/li&gt;
	&lt;li&gt;the chance that incorrectly a privileged block could be dropped&lt;/li&gt;
	&lt;li&gt;but the tests continue to pass.&lt;br/&gt;
noSecurityManager=true&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The equivalant junit decorator is org.apache.derbyTesting.junit.SecurityManagerSetup.noSecurityManager(Test test);&lt;br/&gt;
&lt;a href=&quot;http://db.apache.org/derby/javadoc/testing/org/apache/derbyTesting/junit/SecurityManagerSetup.html#noSecurityManager(junit.framework.Test&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/javadoc/testing/org/apache/derbyTesting/junit/SecurityManagerSetup.html#noSecurityManager(junit.framework.Test&lt;/a&gt;)&lt;/p&gt;
</comment>
                            <comment id="12504161" author="matra" created="Wed, 13 Jun 2007 09:31:28 +0100"  >&lt;p&gt;Thank you Kathey. I will modify the code asap.&lt;/p&gt;

&lt;p&gt;Bye,&lt;br/&gt;
&amp;#8211; Ugo&lt;/p&gt;</comment>
                            <comment id="12507710" author="matra" created="Sun, 24 Jun 2007 21:03:33 +0100"  >&lt;p&gt;Code modified accordingly to the Kathey&apos;s comments.&lt;/p&gt;

&lt;p&gt;Please review,&lt;br/&gt;
&amp;#8211; Ugo.&lt;/p&gt;</comment>
                            <comment id="12507923" author="kmarsden" created="Mon, 25 Jun 2007 17:51:06 +0100"  >&lt;p&gt;I committed this patch with the following changes.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Removed old test files&lt;/li&gt;
	&lt;li&gt;Removed Database/System property setup for usedefaults.  usedefaults has no meaning outside the old test harness.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks  Ugo!&lt;/p&gt;</comment>
                            <comment id="12508348" author="djd" created="Tue, 26 Jun 2007 23:10:43 +0100"  >&lt;p&gt;I have a fix for this but cannot apply it because the patch was already reverted&lt;/p&gt;</comment>
                            <comment id="12508955" author="djd" created="Fri, 29 Jun 2007 00:22:49 +0100"  >&lt;p&gt;Renabled converted test with fixes for IBM 1.5. Committed revision 551732&lt;/p&gt;</comment>
                            <comment id="12509296" author="myrna" created="Sat, 30 Jun 2007 16:57:28 +0100"  >&lt;p&gt;It appears to me that this is fixed, now. Leaving to reporter to close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12359548" name="DERBY-2727_diff_120607.txt" size="7214" author="matra" created="Tue, 12 Jun 2007 21:59:48 +0100"/>
                            <attachment id="12360432" name="DERBY-2727_diff_240607.txt" size="7326" author="matra" created="Sun, 24 Jun 2007 21:04:04 +0100"/>
                            <attachment id="12359549" name="DERBY-2727_stat_120607.txt" size="263" author="matra" created="Tue, 12 Jun 2007 21:59:48 +0100"/>
                            <attachment id="12360433" name="DERBY-2727_stat_240607.txt" size="263" author="matra" created="Sun, 24 Jun 2007 21:04:04 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 12 Jun 2007 22:10:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0u27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>