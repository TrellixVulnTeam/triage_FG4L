<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4843/DERBY-4843.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4843] Consult isPoolable hint before caching prepared statement</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4843</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The Derby  JDBC client side statement cache should consult the value of the isPoolable hint before caching prepared statements.&lt;/p&gt;

&lt;p&gt;This will give users the ability to avoid that short-lived prepared statements push out more frequently used prepared statements in the case of a full statement cache.&lt;br/&gt;
The API JavaDoc says that it is up to the cache whether the hint is used or not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477231">DERBY-4843</key>
            <summary>Consult isPoolable hint before caching prepared statement</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Oct 2010 12:49:50 +0100</created>
                <updated>Mon, 6 Jun 2011 11:53:45 +0100</updated>
                            <resolved>Mon, 30 May 2011 13:19:48 +0100</resolved>
                                    <version>10.4.2.0</version>
                    <version>10.5.3.0</version>
                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12920510" author="knutanders" created="Wed, 13 Oct 2010 13:15:41 +0100"  >&lt;p&gt;Prepared statements are initialized with poolable == true, right? In that case it sounds reasonable to skip statements that have the hint set to false, since that means the user has explicitly called setPoolable(false).&lt;/p&gt;</comment>
                            <comment id="12920530" author="kristwaa" created="Wed, 13 Oct 2010 14:13:16 +0100"  >&lt;p&gt;That is correct.&lt;br/&gt;
&quot;Regular&quot; statements are initialized with poolable == false, but that doesn&apos;t matter for the internal Derby JDBC client side cache, as it doesn&apos;t cache those statements in any case.&lt;/p&gt;

&lt;p&gt;Attaching patch 1a, which addresses this issue.&lt;br/&gt;
suites.All passed, derbyall still running.&lt;/p&gt;

&lt;p&gt;I&apos;ll give testing this a few more thoughts...&lt;/p&gt;</comment>
                            <comment id="12920538" author="knutanders" created="Wed, 13 Oct 2010 14:31:22 +0100"  >&lt;p&gt;I think the patch looks fine. One small nit is that I think the code may be easier to read if we wrote the two if statements sequentially instead of nesting them:&lt;/p&gt;

&lt;p&gt;// Don&apos;t cache closed stmts&lt;br/&gt;
if (isClosed) &lt;/p&gt;
{
    return;
}

&lt;p&gt;// Don&apos;t cache non-poolable stmts&lt;br/&gt;
if (!isPoolable) &lt;/p&gt;
{
    ps.close();
    return;
}</comment>
                            <comment id="12920550" author="kristwaa" created="Wed, 13 Oct 2010 14:45:00 +0100"  >&lt;p&gt;Nit indeed, but here you go &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Attached 1b, which also features a new comment about why I&apos;m not using the accessor methods.&lt;br/&gt;
derbyall passed with patch 1a.&lt;/p&gt;

&lt;p&gt;Committed patch 1b to trunk with revision 1022099.&lt;/p&gt;</comment>
                            <comment id="13039099" author="kristwaa" created="Wed, 25 May 2011 13:53:23 +0100"  >&lt;p&gt;Attaching patch 2a, which tests that the isPoolable-hint is consulted when running with the JDBC client side statement cache enabled.&lt;/p&gt;

&lt;p&gt;I verified that cpTestIsPoolableHintFalse failed without the code fix (patch 1b).&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="13041107" author="kristwaa" created="Mon, 30 May 2011 13:19:48 +0100"  >&lt;p&gt;Committed the tests in patch 2a to trunk with revision 1129136.&lt;br/&gt;
Back-ports:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;10.8: r1129138&lt;/li&gt;
	&lt;li&gt;10.7: r1129140&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve set the fix version to 10.7.1.1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, since that&apos;s where the functionality was added.&lt;br/&gt;
I don&apos;t except more work on this issue.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; I guess that makes this JIRA disappear wrt release notes, since we don&apos;t have a process of updating the ones posted on the Derby site. The tool generating the release notes will trust JIRA, so it will exclude this issue when generating release notes for, say, 10.9.&lt;/p&gt;</comment>
                            <comment id="13044779" author="kristwaa" created="Mon, 6 Jun 2011 11:53:45 +0100"  >&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457063" name="derby-4843-1a-consult_isPoolable.diff" size="869" author="kristwaa" created="Wed, 13 Oct 2010 14:13:16 +0100"/>
                            <attachment id="12457065" name="derby-4843-1b-consult_isPoolable.diff" size="1028" author="kristwaa" created="Wed, 13 Oct 2010 14:45:00 +0100"/>
                            <attachment id="12480402" name="derby-4843-2a-test_isPoolable.diff" size="6183" author="kristwaa" created="Wed, 25 May 2011 13:53:23 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Oct 2010 12:15:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0g3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>