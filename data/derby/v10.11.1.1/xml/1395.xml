<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1395/DERBY-1395.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1395] Change the client SQLState to match that of embedded for the exception thrown on a closed statement whose connection is also closed</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1395</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Scenario: Both connection and statement are closed and an operation is performed on a closed statement. SQLStates are as follows:&lt;/p&gt;

&lt;p&gt;Embedded: SQLSTATE: XJ012, Message: Statement Closed&lt;br/&gt;
Client before &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-843&quot; title=&quot;Internationalize messages in SectionManager to XaException in org.apache.derby.client.am&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-843&quot;&gt;&lt;del&gt;DERBY-843&lt;/del&gt;&lt;/a&gt; fix: SQLSTATE = null, message = Statement closed&lt;br/&gt;
Client after &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-843&quot; title=&quot;Internationalize messages in SectionManager to XaException in org.apache.derby.client.am&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-843&quot;&gt;&lt;del&gt;DERBY-843&lt;/del&gt;&lt;/a&gt; fix: SQLSTATE: 08003, Message: connection closed&lt;/p&gt;

&lt;p&gt;This issue is related to the effort started in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-254&quot; title=&quot;SQLStates for SQLExceptions thrown from the client should not be null and should match embedded where possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-254&quot;&gt;&lt;del&gt;DERBY-254&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12344250">DERBY-1395</key>
            <summary>Change the client SQLState to match that of embedded for the exception thrown on a closed statement whose connection is also closed</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davidvc">David Van Couvering</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Jun 2006 06:20:25 +0100</created>
                <updated>Wed, 19 Jul 2006 01:26:29 +0100</updated>
                            <resolved>Wed, 19 Jul 2006 01:26:29 +0100</resolved>
                                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12415827" author="knutanders" created="Mon, 12 Jun 2006 15:40:05 +0100"  >&lt;p&gt;The SQL states are different when the statement is closed and the connection still open too:&lt;/p&gt;

&lt;p&gt;Embedded: SQLSTATE = XJ012&lt;br/&gt;
Client before: SQLSTATE = null&lt;br/&gt;
Client after: SQLSTATE = XCL31&lt;/p&gt;</comment>
                            <comment id="12417215" author="davidvc" created="Thu, 22 Jun 2006 08:10:35 +0100"  >&lt;p&gt;Deepa, is there a particular test that exemplifies this behavior?  I could poke around but if there are existing tests that demonstrate this that would be great.&lt;/p&gt;</comment>
                            <comment id="12417318" author="deepa" created="Thu, 22 Jun 2006 23:05:50 +0100"  >&lt;p&gt;I had seen the first scenario (both connection and statement closed) in jdbcapi/checkDataSource.java.This is in the checkConnection method. The scenario Knut mentions is covered in ClosedObjectTest.java.&lt;/p&gt;</comment>
                            <comment id="12420761" author="davidvc" created="Thu, 13 Jul 2006 08:26:36 +0100"  >&lt;p&gt;When the connection is closed, I think it&apos;s more informative on the client side, where it tells you that the connection is closed rather than just saying the statement is closed.  I would argue that I should fix the embedded side to return 08003 when the connection is closed, that would actually be more consistent with the standard.&lt;/p&gt;

&lt;p&gt;However, in the case when the connection is open and the statement is closed, I will fix the client to use XJ012 instead of XCL31.&lt;/p&gt;</comment>
                            <comment id="12421745" author="davidvc" created="Tue, 18 Jul 2006 01:09:51 +0100"  >&lt;p&gt;Attached is the patch, running derbyall right now.  Reviews appreciated.&lt;/p&gt;</comment>
                            <comment id="12421746" author="davidvc" created="Tue, 18 Jul 2006 01:10:42 +0100"  >&lt;p&gt;Note: this passes the jdbc40 suite for both embedded and network clients.&lt;/p&gt;</comment>
                            <comment id="12421766" author="knutanders" created="Tue, 18 Jul 2006 03:20:01 +0100"  >&lt;p&gt;Hi David,&lt;br/&gt;
I think the patch looks good. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12421903" author="davidvc" created="Tue, 18 Jul 2006 18:21:17 +0100"  >&lt;p&gt;Passes jdbc40 and derbyall test suites&lt;/p&gt;

&lt;p&gt;Sending        java/client/org/apache/derby/client/am/Statement.java&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/checkDataSource30.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/ClosedObjectTest.java&lt;br/&gt;
Transmitting file data .....&lt;br/&gt;
Committed revision 423141.&lt;/p&gt;</comment>
                            <comment id="12422006" author="deepa" created="Wed, 19 Jul 2006 01:24:29 +0100"  >&lt;p&gt;Re-opening to select fix version&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12337068" name="DERBY-1395.diff" size="2431" author="davidvc" created="Tue, 18 Jul 2006 01:09:51 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Jun 2006 14:40:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29980</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy157j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>