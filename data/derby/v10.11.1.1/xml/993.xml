<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:49:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-993/DERBY-993.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-993] junitTests cannot be run with J2ME</title>
                <link>https://issues.apache.org/jira/browse/DERBY-993</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The test suite junitTests/LangSuite, and the .junit tests jdbcapi/SURTest.java and jdbcapi/SURQueryMixTest.java fail with J2ME, because it uses java.sql.Driver.&lt;br/&gt;
There should be a way to use java.sql.DataSource instead of the Driver mechanism.&lt;/p&gt;


</description>
                <environment>using J2ME jvm </environment>
        <key id="12329019">DERBY-993</key>
            <summary>junitTests cannot be run with J2ME</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Feb 2006 05:02:36 +0000</created>
                <updated>Wed, 1 Jul 2009 01:16:28 +0100</updated>
                            <resolved>Wed, 22 Mar 2006 03:28:20 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12366551" author="myrna" created="Thu, 16 Feb 2006 07:15:51 +0000"  >&lt;p&gt;Patch adds runwithfoundation=false to default_app.properties in this dir, so that the test gets skipped with j9_foundation, for now.&lt;/p&gt;</comment>
                            <comment id="12366569" author="fuzzylogic" created="Thu, 16 Feb 2006 09:46:17 +0000"  >&lt;p&gt;Committed the skipwfoundation patch with revision 378129.  Leaving this bug open because I think DerbyJUnitTest should have a way to use DataSource in J2ME environments. Ideally, DerbyJUnitTest.getConnection() should try to detect a J2ME environment and adjust as needed. The code already in functionTests.util.TestUtil can probably be reused/adapted for this purpose.&lt;/p&gt;</comment>
                            <comment id="12367125" author="kartha" created="Tue, 21 Feb 2006 12:35:51 +0000"  >&lt;p&gt;I suggest the main issue of  providing a mechanism in DerbyJUnitTest to use DataSource, should be logged as a new JIRA entry. Hence this issue could be closed.&lt;/p&gt;</comment>
                            <comment id="12367130" author="myrna" created="Tue, 21 Feb 2006 12:54:24 +0000"  >&lt;p&gt;I disagree. The current patch was only an intermediate workaround to prevent the problem showing up in all nightly runs with J2ME. I maybe should change the title a bit, so it reads: test junitTest/LangSuite should be made to  run with J2ME&lt;br/&gt;
(instead of original: test junitTest/LangSuite cannot be run with J2ME)&lt;/p&gt;</comment>
                            <comment id="12367462" author="myrna" created="Thu, 23 Feb 2006 13:45:23 +0000"  >&lt;p&gt;I made this issue more generic to include the 2 jdbcapi/SUR*.java junit tests&lt;/p&gt;</comment>
                            <comment id="12370951" author="myrna" created="Sun, 19 Mar 2006 03:08:44 +0000"  >&lt;p&gt;svn stat for patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-993&quot; title=&quot;junitTests cannot be run with J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-993&quot;&gt;&lt;del&gt;DERBY-993&lt;/del&gt;&lt;/a&gt;_2006_03_18.diff is:&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\SURBaseTest.java&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\SURDataModelSetup.java&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\junitTests\lang\BooleanTest.java&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\tests\junitTests\lang\default_app.properties&lt;br/&gt;
M      java\testing\org\apache\derbyTesting\functionTests\util\BaseJDBCTestCase.java&lt;/p&gt;

&lt;p&gt;This change affects the following tests:&lt;br/&gt;
junitTests/lang/LangSuite.java  (currently only listing BooleanTest.java)&lt;br/&gt;
jdbcapi/SURTest.junit&lt;br/&gt;
jdbcapi/SURQueryMixTest.junit&lt;br/&gt;
lang/holdabilityTest.junit&lt;br/&gt;
lang/SqlException.junit&lt;/p&gt;

&lt;p&gt;After this change, support for JSR169 run is implemented in a basic way in the new junit base jdbc test class, BaseJDBCTestCase (see also &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1122&quot; title=&quot;Improve base JUnit testing classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1122&quot;&gt;&lt;del&gt;DERBY-1122&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
After this change, support for JSR169 is implemented for the junitTests/lang/LangSuite.java.&lt;/p&gt;

&lt;p&gt;As a side-effect, also, the SUR* tests are now dependent on the new ...util/BaseJDBCTestCase class rather&lt;br/&gt;
then the default junit TestCase. (See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1122&quot; title=&quot;Improve base JUnit testing classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1122&quot;&gt;&lt;del&gt;DERBY-1122&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
I also removed the dependency on util.DerbyJunitTest.java, after copying the println, printstacktrace and alarm methods into BaseJDBCTestCase.java.&lt;/p&gt;

&lt;p&gt;I tried to make the junitTests/lang/LangSuite.java use the BaseJDBCTestCase, but it was too involved for me to tackle at this time, I&apos;ll leave that to someone else. I had to modify junitTests/lang/BooleanTest.java further because in addition to using java.sql.Driver, it was also using java.math.BigDecimal.&lt;/p&gt;

&lt;p&gt;With the changes in place, I can successfully run with both jdk142 and wctme5.7_foundation the following tests:&lt;br/&gt;
junitTests/lang/LangSuite.java  &lt;br/&gt;
jdbcapi/SURTest.junit&lt;br/&gt;
jdbcapi/SURQueryMixTest.junit&lt;br/&gt;
jdbcapi/ConcurrencyTest.junit&lt;/p&gt;

&lt;p&gt;With the changes in place, the test &lt;br/&gt;
lang/holdabilityTest.junit&lt;br/&gt;
which is currently not in any suite, failed for me like this:&lt;br/&gt;
-----------------------&lt;br/&gt;
0 add&lt;br/&gt;
&amp;gt; ........E.......&lt;br/&gt;
&amp;gt; There was 1 error:&lt;br/&gt;
&amp;gt; 1) testHeldScrollableResultSetScanInProgress(org.apache.derbyTesting.functionT&lt;br/&gt;
ests.tests.jdbcapi.HoldabilityTest)ERROR XSCB8: The btree conglomerate 1,142,688&lt;br/&gt;
,750,742 is closed.&lt;br/&gt;
&amp;gt; FAILURES!!!&lt;br/&gt;
&amp;gt; Tests run: 15,  Failures: 0,  Errors: 1&lt;br/&gt;
---------------------------------&lt;br/&gt;
Hopefully someone can verify that this test is still running as expected after my change, it fails for me with &lt;br/&gt;
jdk14 with, or without my changes, although it seems the conglomerate number is different.&lt;br/&gt;
Note, that after my change, with wctme5.7_foundation this test passes, which I found peculiar, but I&apos;ll not look into that either.&lt;/p&gt;

&lt;p&gt;derbynet/SqlExceptionTest.junit passes with -Dframework=DerbyNetClient, but I have not run it with&lt;br/&gt;
wctme5.7_foundation, because we don&apos;t run networkserver with that setup.&lt;/p&gt;

&lt;p&gt;I have not looked at the junitTests/derbynet/Compatibility junit test, as they are only run in derbynetclientmats and thus, &lt;br/&gt;
do not run with wctme5.7_foundation like this; and I didn&apos;t change anything that the test depends on.&lt;/p&gt;</comment>
                            <comment id="12371062" author="andreask" created="Mon, 20 Mar 2006 18:22:28 +0000"  >&lt;p&gt;Review of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-993&quot; title=&quot;junitTests cannot be run with J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-993&quot;&gt;&lt;del&gt;DERBY-993&lt;/del&gt;&lt;/a&gt;-skipwfoundation.diff :&lt;br/&gt;
Patch looks good, however I hope the following could be addressed:&lt;/p&gt;

&lt;p&gt;1. In SURBaseTest you have removed the getConnection() method. However  getNewConnection() has been rewritten to use TestUtil instread of calling getConnection().. I think getNewConnection()  could be left unchanged, so that it uses the BaseJDBCTestCase&apos;s getConnection() method.&lt;br/&gt;
2. BaseTestCase: here methods for printing debug is added, which is good. I would like the _DEBUG flag removed from the class, and instead use CONFIG.verbose(). The _DEBUG flag does not seem to be initialized anywhere.&lt;/p&gt;

&lt;p&gt;The HoldabilityTest fails due to a bug in Derby. It should be enabled as part of fixing the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1058&quot; title=&quot;derby fails supporting holdable scrollable resultset: ERROR XSCB8: The btree conglomerate 1,141,037,436,752 is closed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1058&quot;&gt;&lt;del&gt;DERBY-1058&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12371063" author="andreask" created="Mon, 20 Mar 2006 18:24:43 +0000"  >&lt;p&gt;The above review was for :  &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-993&quot; title=&quot;junitTests cannot be run with J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-993&quot;&gt;&lt;del&gt;DERBY-993&lt;/del&gt;&lt;/a&gt;_2006_03_18.diff, not for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-993&quot; title=&quot;junitTests cannot be run with J2ME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-993&quot;&gt;&lt;del&gt;DERBY-993&lt;/del&gt;&lt;/a&gt;-skipwfoundation.diff .&lt;/p&gt;</comment>
                            <comment id="12371099" author="andreask" created="Mon, 20 Mar 2006 23:39:46 +0000"  >&lt;p&gt;Attached is a patch where I have addressed the review comments above.&lt;br/&gt;
The println, printStackTrace and alarm methods have been moved to BaseTestCase&lt;/p&gt;</comment>
                            <comment id="12371118" author="myrna" created="Tue, 21 Mar 2006 02:15:25 +0000"  >&lt;p&gt;The patch dated 3/20 gives the following with wctme5.7_foundation in test SURTest.junit:&lt;br/&gt;
------------&lt;br/&gt;
java.sql.SQLException: org.apache.derby.jdbc.EmbeddedDriver is not registered with the JDBC driver manager&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedSimpleDataSource.findDriver(EmbeddedSimpleDataSource.java:434)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedSimpleDataSource.getConnection(EmbeddedSimpleDataSource.java:405)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedSimpleDataSource.getConnection(EmbeddedSimpleDataSource.java:372)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.util.BaseJDBCTestCase.getConnection(BaseJDBCTestCase.java:84)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.SURDataModelSetup.getNewConnection(SURDataModelSetup.java:174)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.SURDataModelSetup.setUp(SURDataModelSetup.java:140)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:18)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at junit.textui.TestRunner.doRun(TestRunner.java:116)&lt;br/&gt;
	at junit.textui.TestRunner.start(TestRunner.java:172)&lt;br/&gt;
	at junit.textui.TestRunner.main(TestRunner.java:138)&lt;br/&gt;
-----------------------&lt;br/&gt;
let me see what I can do.&lt;br/&gt;
Also, it doesn&apos;t have the fix to TestUtil (which I erroneously added to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-949&quot; title=&quot;Clean up tests to use common method to get connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-949&quot;&gt;&lt;del&gt;DERBY-949&lt;/del&gt;&lt;/a&gt;), so I&apos;ll add that as well.&lt;/p&gt;</comment>
                            <comment id="12371169" author="myrna" created="Tue, 21 Mar 2006 08:55:04 +0000"  >&lt;p&gt;I tried supersimple in that environment with wctme5.7_foundation, and it failed too...&lt;br/&gt;
So I redid Andreas&apos; patch in another environment, and it all looked good. &lt;br/&gt;
I added my TestUtil change and removed the unused and incorrect classname from BaseJDBCTestCase.java.&lt;/p&gt;

&lt;p&gt;I reran the affected tests again and it all looks ok now - except HoldabilityTest which we identified was suffering from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1058&quot; title=&quot;derby fails supporting holdable scrollable resultset: ERROR XSCB8: The btree conglomerate 1,141,037,436,752 is closed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1058&quot;&gt;&lt;del&gt;DERBY-1058&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="12371280" author="fuzzylogic" created="Wed, 22 Mar 2006 02:51:07 +0000"  >&lt;p&gt;Patch 20_b looks good to me. I&apos;ll commit shortly. Thanks for working on this, Andreas and Myrna.&lt;/p&gt;</comment>
                            <comment id="12371286" author="fuzzylogic" created="Wed, 22 Mar 2006 03:28:20 +0000"  >&lt;p&gt;Committed revision 387605.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12328838">DERBY-949</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12329370">DERBY-1037</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12330375">DERBY-1122</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12323020" name="DERBY-993-skipwfoundation.diff" size="650" author="myrna" created="Thu, 16 Feb 2006 07:15:51 +0000"/>
                            <attachment id="12323019" name="DERBY-993-skipwfoundation.stat" size="104" author="myrna" created="Thu, 16 Feb 2006 07:15:51 +0000"/>
                            <attachment id="12324332" name="DERBY-993_2006_03_18.diff" size="14997" author="myrna" created="Sun, 19 Mar 2006 03:08:44 +0000"/>
                            <attachment id="12324378" name="DERBY-993_2006_03_20.diff" size="14480" author="andreask" created="Mon, 20 Mar 2006 23:39:46 +0000"/>
                            <attachment id="12324393" name="DERBY-993_2006_03_20_b.diff" size="15277" author="myrna" created="Tue, 21 Mar 2006 08:55:04 +0000"/>
                            <attachment id="12324392" name="DERBY-993_2006_03_20_b.stat" size="634" author="myrna" created="Tue, 21 Mar 2006 08:55:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Feb 2006 09:46:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0t7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38551</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>