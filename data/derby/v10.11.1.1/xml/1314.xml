<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:36:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1314/DERBY-1314.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1314] Differences between client and embedded when invoking stored procedures using Statement.executeUpdate()</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1314</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When invoking a stored procedure using Statement.executeUpdate(), the&lt;br/&gt;
client driver and the embedded driver behave differently.&lt;/p&gt;

&lt;p&gt;If the stored procedure does not return any result set, the embedded&lt;br/&gt;
driver returns 0, whereas the client returns -1.&lt;/p&gt;

&lt;p&gt;If the stored procedure returns one or more result sets, the embedded&lt;br/&gt;
driver returns -1, whereas the client fails with an exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12333480">DERBY-1314</key>
            <summary>Differences between client and embedded when invoking stored procedures using Statement.executeUpdate()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 May 2006 21:30:42 +0100</created>
                <updated>Mon, 18 Sep 2006 16:26:45 +0100</updated>
                            <resolved>Fri, 23 Jun 2006 20:23:22 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12378917" author="knutanders" created="Wed, 10 May 2006 21:31:49 +0100"  >&lt;p&gt;The JDBC 3.0 javadoc for Statement.executeUpdate() says:&lt;/p&gt;

&lt;p&gt;  Returns: either the row count for INSERT, UPDATE or DELETE&lt;br/&gt;
    statements, or 0 for SQL statements that return nothing&lt;/p&gt;

&lt;p&gt;  Throws: SQLException - if a database access error occurs or the&lt;br/&gt;
    given SQL statement produces a ResultSet object&lt;/p&gt;

&lt;p&gt;Embedded behaves correctly when no result sets are produced by the&lt;br/&gt;
stored procedure, and the client behaves correctly when result sets&lt;br/&gt;
are produced.&lt;/p&gt;</comment>
                            <comment id="12415997" author="knutanders" created="Tue, 13 Jun 2006 19:38:05 +0100"  >&lt;p&gt;The attached patch fixes the issue on the client. When executeUpdate() is used to invoke a stored procedure, an update count of -1 (indicating that no update count is returned) is changed to 0, as the javadoc for executeUpdate() says. With this patch, four more of the test cases in jdbcapi/ProcedureTest.junit succeed with the client driver (but the test will not be enabled until the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-501&quot; title=&quot;Client and embedded drivers differ on invoking a procedure that returns a single Dynamic resultSet using CallableStatement.executeQuery()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-501&quot;&gt;&lt;del&gt;DERBY-501&lt;/del&gt;&lt;/a&gt; is checked in).&lt;/p&gt;

&lt;p&gt;executeUpdate() on the embedded driver will be fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-501&quot; title=&quot;Client and embedded drivers differ on invoking a procedure that returns a single Dynamic resultSet using CallableStatement.executeQuery()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-501&quot;&gt;&lt;del&gt;DERBY-501&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Derbyall didn&apos;t show any failures with the patch. Please review. Thanks!&lt;/p&gt;</comment>
                            <comment id="12415999" author="knutanders" created="Tue, 13 Jun 2006 19:50:30 +0100"  >&lt;p&gt;Proposal for release note (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-501&quot; title=&quot;Client and embedded drivers differ on invoking a procedure that returns a single Dynamic resultSet using CallableStatement.executeQuery()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-501&quot;&gt;&lt;del&gt;DERBY-501&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1314&quot; title=&quot;Differences between client and embedded when invoking stored procedures using Statement.executeUpdate()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1314&quot;&gt;&lt;del&gt;DERBY-1314&lt;/del&gt;&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;The behaviour of executeQuery() and executeUpdate() has been modified&lt;br/&gt;
to follow the JDBC standard when executing stored procedures. For the&lt;br/&gt;
embedded driver, this means that&lt;/p&gt;

&lt;p&gt;  a) it is now possible to use executeQuery() to execute a stored&lt;br/&gt;
     procedure that returns exactly one ResultSet (this would fail in&lt;br/&gt;
     previous releases of Derby)&lt;/p&gt;

&lt;p&gt;  b) executeUpdate() will raise an exception if it is used to execute&lt;br/&gt;
     a stored procedure that returns one or more ResultSets (this&lt;br/&gt;
     would succeed in previous releases of Derby)&lt;/p&gt;

&lt;p&gt;For the client driver, the following has changed:&lt;/p&gt;

&lt;p&gt;  a) PreparedStatement.executeUpdate() will raise an exception if it&lt;br/&gt;
     is used to execute a stored procedure that returns one or more&lt;br/&gt;
     ResultSets (previously, it would succeed, whereas Statement and&lt;br/&gt;
     CallableStatement correctly raised an exception)&lt;/p&gt;

&lt;p&gt;  b) executeUpdate() will return 0 when executing a stored procedure&lt;br/&gt;
     which doesn&apos;t return a ResultSet (previously it would return -1)&lt;/p&gt;</comment>
                            <comment id="12417104" author="knutanders" created="Wed, 21 Jun 2006 21:25:38 +0100"  >&lt;p&gt;Does anyone have comments to the patch? If not, I plan to commit in a couple of days.&lt;/p&gt;</comment>
                            <comment id="12417476" author="knutanders" created="Fri, 23 Jun 2006 20:23:22 +0100"  >&lt;p&gt;Committed revision 416696.&lt;/p&gt;</comment>
                            <comment id="12435498" author="knutanders" created="Mon, 18 Sep 2006 16:26:45 +0100"  >&lt;p&gt;PROBLEM&lt;/p&gt;

&lt;p&gt;The behaviour of executeQuery() and executeUpdate() did not match the&lt;br/&gt;
JDBC specification when invoking stored procedures.&lt;/p&gt;

&lt;p&gt;SYMPTOMS&lt;/p&gt;

&lt;p&gt;(1) When invoking a stored procedure with executeQuery() or&lt;br/&gt;
    executeUpdate(), an exception was thrown indicating that the&lt;br/&gt;
    procedure did not return the correct number of ResultSet objects,&lt;br/&gt;
    although the correct number of ResultSet objects was in fact&lt;br/&gt;
    returned.&lt;/p&gt;

&lt;p&gt;(2) When invoking a stored procedure with executeQuery() or&lt;br/&gt;
    executeUpdate(), and the procedure did not return the correct&lt;br/&gt;
    number of ResultSet objects, the query executed successfully.&lt;/p&gt;

&lt;p&gt;(3) With the network client driver, when invoking a stored procedure&lt;br/&gt;
    with executeUpdate(), the return value was -1, whereas the JDBC&lt;br/&gt;
    specification says it should be 0.&lt;/p&gt;

&lt;p&gt;CAUSE&lt;/p&gt;

&lt;p&gt;The methods executeQuery() and executeUpdate() were not implemented in&lt;br/&gt;
compliance with the JDBC specification.&lt;/p&gt;

&lt;p&gt;SOLUTION&lt;/p&gt;

&lt;p&gt;In Derby 10.2, the behaviour of the methods executeQuery() and&lt;br/&gt;
executeUpdate() has been changed to match the JDBC specification.&lt;/p&gt;

&lt;p&gt;WORKAROUND&lt;/p&gt;

&lt;p&gt;Use execute() instead of executeUpdate()/executeQuery() to invoke a&lt;br/&gt;
stored procedure which does not return exactly 0 or 1 ResultSet&lt;br/&gt;
objects.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="31586">DERBY-211</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12335377" name="derby-1314-v1.diff" size="4514" author="knutanders" created="Tue, 13 Jun 2006 19:38:04 +0100"/>
                            <attachment id="12335378" name="derby-1314-v1.stat" size="221" author="knutanders" created="Tue, 13 Jun 2006 19:38:05 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy14m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>