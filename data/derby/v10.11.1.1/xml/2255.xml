<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:52:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2255/DERBY-2255.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2255] ij should indicate that it is waiting for more input in a multi-line interactive statement.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2255</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Many users have been confused by the lack of response from ij when they forget to end a statement with a semicolon, and believe that Derby is taking its sweet time answering their query, while ij is simply waiting for more input.&lt;/p&gt;

&lt;p&gt;This issue tries to address this by adding a short &quot;&amp;gt; &quot; prompt to the next line after a newline has been entered by the user without ending the statement with a semicolon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12360829">DERBY-2255</key>
            <summary>ij should indicate that it is waiting for more input in a multi-line interactive statement.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andersmo">Anders Morken</assignee>
                                    <reporter username="andersmo">Anders Morken</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jan 2007 23:06:56 +0000</created>
                <updated>Thu, 2 May 2013 03:29:14 +0100</updated>
                            <resolved>Tue, 6 Nov 2007 17:55:15 +0000</resolved>
                                    <version>10.2.2.0</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12465910" author="andersmo" created="Thu, 18 Jan 2007 23:09:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2255&quot; title=&quot;ij should indicate that it is waiting for more input in a multi-line interactive statement.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2255&quot;&gt;&lt;del&gt;DERBY-2255&lt;/del&gt;&lt;/a&gt;-1.diff is a first stab at adding &quot;line continuation prompts&quot; to interactive ij sessions. Probably needs a little kicking, reviews and testing on more platforms than Linux would be appreciated. I&apos;m a bit worried about the difference between line breaks between platforms. =)&lt;/p&gt;

&lt;p&gt; StatementFinder.java |   42 +++++++++++++++++++++++++++++++++++++++---&lt;br/&gt;
 utilMain.java        |   12 +++++++-----&lt;br/&gt;
 2 files changed, 46 insertions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/add.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, 8 deletions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12465998" author="johnemb" created="Fri, 19 Jan 2007 09:46:26 +0000"  >&lt;p&gt;I tried the patch on Windows XP. I get two continuation &quot;prompts&quot; instead of one:&lt;/p&gt;

&lt;p&gt;ij version 10.3&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:mydb;create=true&apos;;&lt;br/&gt;
ij&amp;gt; create table test&lt;br/&gt;
&amp;gt; &amp;gt; (a int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create table&lt;br/&gt;
&amp;gt; &amp;gt; test2&lt;br/&gt;
&amp;gt; &amp;gt; (b int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;

&lt;p&gt;But it is still useful &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12466003" author="bernt" created="Fri, 19 Jan 2007 10:09:30 +0000"  >&lt;p&gt;Works like a charm in Emacs on Linux in my IJ minor mode (in SQLi major mode). Works with multiple connections too.&lt;/p&gt;</comment>
                            <comment id="12466037" author="andersmo" created="Fri, 19 Jan 2007 12:47:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2255&quot; title=&quot;ij should indicate that it is waiting for more input in a multi-line interactive statement.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2255&quot;&gt;&lt;del&gt;DERBY-2255&lt;/del&gt;&lt;/a&gt;-2.diff is a revised patch, which tries to avoid double continuation prompts by swallowing the LF after CR in DOS/Windows line separators (CRLF). It appears to work on Linux and Windows now - are there any Mac users out there who can verify that this works for them as well? =)&lt;/p&gt;</comment>
                            <comment id="12466038" author="andersmo" created="Fri, 19 Jan 2007 13:03:29 +0000"  >&lt;p&gt;Oh, and yeah, derbyall seemed to run just fine, and here&apos;s the diffstat:&lt;/p&gt;

&lt;p&gt; StatementFinder.java |   52 +++++++++++++++++++++++++++++++++++++++++++++++++--&lt;br/&gt;
 utilMain.java        |    8 ++++---&lt;br/&gt;
 2 files changed, 55 insertions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/add.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, 5 deletions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12466188" author="jta" created="Sat, 20 Jan 2007 00:20:55 +0000"  >&lt;p&gt;This worked fine for me on max osx (10.4).&lt;/p&gt;

&lt;p&gt;It doesn&apos;t catch a  carriage return inside a quote (and I&apos;d argue it really shouldn&apos;t because a carriage return could be part of the data). For example, here&apos;s a query with a properly closed quote:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select&lt;br/&gt;
&amp;gt; *&lt;br/&gt;
&amp;gt; from&lt;br/&gt;
&amp;gt; bar&lt;br/&gt;
&amp;gt; where&lt;br/&gt;
&amp;gt; description =&lt;br/&gt;
&amp;gt; &apos;here is row 2&apos;;&lt;br/&gt;
ID         |DESCRIPTION&lt;br/&gt;
--------------------------------&lt;br/&gt;
2          |here is row 2&lt;/p&gt;

&lt;p&gt;1 row selected&lt;/p&gt;

&lt;p&gt;And here&apos;s a query without a close quote before the semicolon:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select *&lt;br/&gt;
&amp;gt; from bar&lt;br/&gt;
&amp;gt; where description=&apos;here is row 3;&lt;br/&gt;
=== hangs here with no continuation prompt ===&lt;/p&gt;

&lt;p&gt;I think users might still be confused &amp;#8211; but hopefully less confused because they can see the continuation prompt on the preceding lines.&lt;/p&gt;
</comment>
                            <comment id="12466218" author="fuzzylogic" created="Sat, 20 Jan 2007 07:00:48 +0000"  >&lt;p&gt;The changes in derby-2255-2.diff look good, though I found an issue with the change to readSingleLineComment(). With the derby-2255-2 patch, if you begin a &amp;#8211; comment in an interactive ij session, it is impossible to get out of the comment, at least on Mac OS X and I suspect Linux (haven&apos;t tried on Windows yet). &lt;/p&gt;

&lt;p&gt;There is something subtle going on with the input stream and prompting, because if I remove the single line:&lt;/p&gt;

&lt;p&gt;utilMain.doPrompt(false, promptwriter, &quot;&quot;);&lt;/p&gt;

&lt;p&gt;from readSingleLineComment then it behaves as I would suspect: comments are consumed up to the newline and normal processing is resumed. Originally I removed this line from readSingleLineComment() because we don&apos;t want to prompt after consuming the contents of a single line comment, we want to continue normal statement processing. I was surprised that just removing the prompt fixed the problem of being stuck in comment-mode though.&lt;/p&gt;

&lt;p&gt;Attaching a patch which includes the previously mentioned change, along with some improved comments. I would appreciate it if any interested parties could review the new and old patches and perhaps look into the unusual comment behavior.&lt;/p&gt;</comment>
                            <comment id="12499454" author="myrna" created="Mon, 28 May 2007 01:48:23 +0100"  >&lt;p&gt;I refreshed the patch (because various changes have gone in to utilMain since the last posting), then tried the two versions of StatementFinder.readSingleLineComment (as per attachements _2 and _3.diff).&lt;/p&gt;

&lt;p&gt;But I found strange behavior with the code of _3.diff; a commented line, (i.e. starting with --) followed by a return, would result in a line without a prompt.&lt;br/&gt;
Hitting return again, would give me a prompt again and I could go on...&lt;/p&gt;

&lt;p&gt;When I used the code of _2.diff I saw no such problem; no &apos;getting stuck&apos; in comment mode...&lt;/p&gt;

&lt;p&gt;I have no access to a Mac, is there someone who does &amp;amp; can  reconfirm this patch?&lt;/p&gt;
</comment>
                            <comment id="12501387" author="myrna" created="Mon, 4 Jun 2007 22:58:36 +0100"  >&lt;p&gt;Attaching another patch.&lt;/p&gt;

&lt;p&gt;This patch tries to figure out if a singlelinecomment just read is actually part of a statement started earlier.&lt;br/&gt;
If it is, it prints the continuation prompt (&apos;&amp;gt;&apos;). If it is not part of a statement it prints the ij prompt (&apos;ij&amp;gt;&apos;).&lt;/p&gt;

&lt;p&gt;I had alternatively thought of not providing any prompt after a single line comment, but I found myself wondering what ij was up to (we now get a prompt in all other situations).&lt;/p&gt;

&lt;p&gt;If someone could review this and indicate if this is acceptable?&lt;/p&gt;

&lt;p&gt;My one concern is that normally, if you start a second named connection for example, &apos;as me&apos;, the prompt turns into: ij (me)&amp;gt; for a new statement, instead of ij&amp;gt;.&lt;br/&gt;
Before the first patch, the next line would not get a prompt.&lt;br/&gt;
Now, (as with the first patch) you will see a &amp;gt; prompt, or (this patch) if the statement was a single line comment, you will see an ij&amp;gt; prompt on the next line. That is, you will not see the named connection.&lt;/p&gt;

&lt;p&gt;I&apos;ve run a number of tests, but it seems our tests are not affected by this...So, only interactively do you see a difference. I can not imagine how that could break anyone&apos;s application.&lt;/p&gt;

&lt;p&gt;The only incompatibility I can think of is that if before you used to try out a statement interactively and then cut-and-paste into a script, you may now have to remove some prompt characters...&lt;/p&gt;</comment>
                            <comment id="12540206" author="dyret" created="Mon, 5 Nov 2007 15:47:57 +0000"  >&lt;p&gt;IMHO it would be good to commit this patch, and let our esteemed Mac users report any problems that may surface. If those problems can&apos;t be easily fixed one can always back out the change.&lt;/p&gt;</comment>
                            <comment id="12540219" author="knutanders" created="Mon, 5 Nov 2007 17:08:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;This patch has waited too long already. Judging by the interest till now, it doesn&apos;t seem likely that we&apos;ll get more testing of it until it has been committed. And as you say, if there are problems that are too difficult to fix, we can always back it out.&lt;/p&gt;</comment>
                            <comment id="12540292" author="fuzzylogic" created="Mon, 5 Nov 2007 22:52:45 +0000"  >&lt;p&gt;Checked with the _6 patch and the current Mac OS JVMs and was unable to reproduce the previous behavior that I had noted, where semicolons were no longer accepted a statement and it was impossible to get out of comment mode.&lt;/p&gt;

&lt;p&gt;+1 to commit.&lt;/p&gt;</comment>
                            <comment id="12540313" author="myrna" created="Tue, 6 Nov 2007 00:24:37 +0000"  >&lt;p&gt;I intend to do some verifications and then commit.&lt;/p&gt;</comment>
                            <comment id="12540505" author="myrna" created="Tue, 6 Nov 2007 17:55:15 +0000"  >&lt;p&gt;I committed this with revision 592500. Thx, Anders, for the work, and thx Dyre, Knut Anders and Andrew for your review. &lt;/p&gt;</comment>
                            <comment id="12589731" author="mzaun" created="Wed, 16 Apr 2008 22:06:13 +0100"  >&lt;p&gt;I noticed that the continutation marker is not shown when just hitting Enter (or any whitespace followed by Enter) until a semicolon terminates the &quot;query&quot;:&lt;/p&gt;

&lt;p&gt;ij version 10.5&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;

&lt;p&gt;;&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;

&lt;p&gt;Contrast this with the Bash shell&apos;s behaviour, which shows a marker as long as the line&apos;s being continued:&lt;/p&gt;

&lt;p&gt;MD@sunny ~/derby/trunk&lt;br/&gt;
$  \&lt;br/&gt;
&amp;gt;  \&lt;br/&gt;
&amp;gt;  \&lt;br/&gt;
&amp;gt;&lt;/p&gt;

&lt;p&gt;My preference: ij should display a continuation marker until the terminating semicolon, regardless of what&apos;s been typed so far or not.&lt;/p&gt;

&lt;p&gt;Martin&lt;/p&gt;
</comment>
                            <comment id="12589736" author="myrna" created="Wed, 16 Apr 2008 22:38:08 +0100"  >&lt;p&gt;I admit, I never considered the &apos;empty&apos; command.&lt;br/&gt;
I&apos;d consider adjusting that a further improvement, but would suggest a new bug, leaving this bug as fixed.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12394175">DERBY-3628</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12394210">DERBY-3629</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12349219" name="DERBY-2255-1.diff" size="4932" author="andersmo" created="Thu, 18 Jan 2007 23:07:54 +0000"/>
                            <attachment id="12349253" name="DERBY-2255-2.diff" size="5047" author="andersmo" created="Fri, 19 Jan 2007 12:44:23 +0000"/>
                            <attachment id="12358344" name="DERBY-2255_4.diff" size="5448" author="myrna" created="Mon, 28 May 2007 01:48:23 +0100"/>
                            <attachment id="12358905" name="DERBY-2255_6.diff" size="6022" author="myrna" created="Mon, 4 Jun 2007 22:58:36 +0100"/>
                            <attachment id="12349309" name="derby-2255-3.diff" size="4910" author="fuzzylogic" created="Sat, 20 Jan 2007 07:17:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Jan 2007 09:46:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0mrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>