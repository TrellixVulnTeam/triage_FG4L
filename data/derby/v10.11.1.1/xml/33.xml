<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-33/DERBY-33.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-33] Connection.setTypeMap throws unimplemented exception with empty map</title>
                <link>https://issues.apache.org/jira/browse/DERBY-33</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;With some other unimplemented methods Derby accepts a default value or value that is in effect a no-op. In this case an empty map should be accepted. May want to apply the same logi to other JDBC methods that take a type map.&lt;/p&gt;

&lt;p&gt;Original bug discovered by Edward Rayl&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://nagoya.apache.org/eyebrowse/ReadMsg?listName=derby-user@db.apache.org&amp;amp;msgNo=43&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://nagoya.apache.org/eyebrowse/ReadMsg?listName=derby-user@db.apache.org&amp;amp;msgNo=43&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="27664">DERBY-33</key>
            <summary>Connection.setTypeMap throws unimplemented exception with empty map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Oct 2004 21:47:52 +0100</created>
                <updated>Sat, 8 Jul 2006 11:04:31 +0100</updated>
                            <resolved>Sun, 28 Nov 2004 05:04:20 +0000</resolved>
                                    <version>10.0.2.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="55614" author="shreyas" created="Thu, 18 Nov 2004 14:18:19 +0000"  >&lt;p&gt;I wrote a sample program using JdbcRowSet and found it to working perfectly with Derby. I am attaching the sample program here. &lt;/p&gt;

&lt;p&gt;It &lt;b&gt;did not&lt;/b&gt; throw up the error &lt;/p&gt;

&lt;p&gt;JdbcRowSet (setTypeMap) : null.&lt;/p&gt;

&lt;p&gt;This error appears becaus eof the fix suggested in the link that causes a NPE if the map is null ( map.isEmpty()) causes a NPE that appears as this problem. &lt;/p&gt;

&lt;p&gt;My suggested fix to handle this problem is :&lt;/p&gt;

&lt;p&gt;if((map != null)) &lt;/p&gt;
{
            if(!(map.isEmpty()))
		throw Util.notImplemented();
	}

&lt;p&gt;I also did not get the error when the connection is actually closed. The right way to clean up things when using the JdbcRowSet is to call close() method in the JdbcRowSet and then call the close method on the connection. &lt;/p&gt;

&lt;p&gt;Please have a look at this and let me know.&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Shreyas &lt;/p&gt;</comment>
                            <comment id="55615" author="shreyas" created="Thu, 18 Nov 2004 14:19:49 +0000"  >&lt;p&gt;I wrote a sample program using JdbcRowSet and found it to working perfectly with Derby. I am attaching the sample program here. &lt;/p&gt;

&lt;p&gt;It &lt;b&gt;did not&lt;/b&gt; throw up the error &lt;/p&gt;

&lt;p&gt;JdbcRowSet (setTypeMap) : null.&lt;/p&gt;

&lt;p&gt;This error appears becaus eof the fix suggested in the link that causes a NPE if the map is null ( map.isEmpty()) causes a NPE that appears as this problem. &lt;/p&gt;

&lt;p&gt;My suggested fix to handle this problem is :&lt;/p&gt;

&lt;p&gt;if((map != null)) &lt;/p&gt;
{
            if(!(map.isEmpty()))
		throw Util.notImplemented();
	}

&lt;p&gt;I also did not get the error when the connection is actually closed. The right way to clean up things when using the JdbcRowSet is to call close() method in the JdbcRowSet and then call the close method on the connection. &lt;/p&gt;

&lt;p&gt;Please have a look at this and let me know.&lt;/p&gt;

&lt;p&gt;PS: Please see below for the attached sample program&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Shreyas &lt;/p&gt;

&lt;p&gt;--------------------&lt;del&gt;Sample Program begins&lt;/del&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;import java.sql.*;&lt;br/&gt;
import javax.sql.rowset.*;&lt;br/&gt;
import com.sun.rowset.*;&lt;/p&gt;

&lt;p&gt;public class updateNull{&lt;/p&gt;

&lt;p&gt;   public static void main(String [] args) {&lt;/p&gt;

&lt;p&gt;      String strUrl = &quot;jdbc:derby:;databaseName=testdb;create=true&quot;;           &lt;br/&gt;
      try {&lt;br/&gt;
         Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);&lt;br/&gt;
         Connection con = DriverManager.getConnection(strUrl);&lt;/p&gt;

&lt;p&gt;         Statement stmt = con.createStatement();&lt;br/&gt;
         try &lt;/p&gt;
{
            stmt.executeUpdate(&quot;drop table test&quot;);
         }
&lt;p&gt; catch(SQLException ex) &lt;/p&gt;
{
            // Do nothing.
         }
&lt;p&gt;         con.commit();&lt;/p&gt;

&lt;p&gt;         Statement stmt1 = con.createStatement();&lt;br/&gt;
         stmt1.executeUpdate(&quot;create table test(i_val integer, s_val varchar(10))&quot;);&lt;br/&gt;
         stmt1.executeUpdate(&quot;insert into test values(1,&apos;shreyas&apos;)&quot;);&lt;br/&gt;
         con.commit();&lt;/p&gt;

&lt;p&gt;	 JdbcRowSet jrs = new JdbcRowSetImpl(con);&lt;br/&gt;
	 jrs.setCommand(&quot;select * from test&quot;);&lt;br/&gt;
	 jrs.execute();	 &lt;br/&gt;
	 jrs.close();&lt;/p&gt;

&lt;p&gt;	 con.close();&lt;/p&gt;

&lt;p&gt;      } catch(ClassNotFoundException cnfe) &lt;/p&gt;
{
         System.out.println(&quot;Class not found: &quot;+cnfe.getMessage());
      }
&lt;p&gt; catch(SQLException sqle) &lt;/p&gt;
{
         System.out.println(&quot;SQL:Caught: &quot;+sqle.getMessage());
         sqle.printStackTrace();
      }
&lt;p&gt; catch(Exception e) {&lt;/p&gt;

&lt;p&gt;      }&lt;/p&gt;

&lt;p&gt;   }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;-------------------&lt;del&gt;Sample Program Ends&lt;/del&gt;---------------------------------------&lt;/p&gt;
</comment>
                            <comment id="55947" author="djd" created="Sun, 28 Nov 2004 05:04:20 +0000"  >&lt;p&gt;Sending        java\engine\org\apache\derby\iapi\reference\SQLState.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\impl\jdbc\EmbedCallableStatement20.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\impl\jdbc\EmbedConnection20.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\impl\jdbc\EmbedResultSet20.java&lt;br/&gt;
Sending        java\engine\org\apache\derby\loc\messages_en.properties&lt;br/&gt;
Transmitting file data .....&lt;br/&gt;
Committed revision 106787.&lt;/p&gt;

&lt;p&gt;Fix for Derby-33 - not implemented exception when passing in empty type map to JBDC calls.&lt;/p&gt;

&lt;p&gt;Handling the map conditions the following way&lt;/p&gt;

&lt;p&gt;  null Map      --&amp;gt; throw a SQLException&lt;br/&gt;
  empty Map     --&amp;gt; no-op&lt;br/&gt;
  non-empty Map --&amp;gt; throw notImplemented.&lt;/p&gt;

&lt;p&gt;Patch contributed by Shreyas Kaushik (Shreyas.Kaushik@Sun.COM)&lt;/p&gt;</comment>
                            <comment id="12363674" author="kristwaa" created="Mon, 23 Jan 2006 23:25:59 +0000"  >&lt;p&gt;Verified fix by quick code inspection and minimalistic JDBC testing.&lt;br/&gt;
Closing the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Nov 2004 14:18:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21732</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>