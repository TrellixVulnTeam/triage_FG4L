<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1849/DERBY-1849.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1849] Tests lang/grantRevokeDDL.sql and lang/grantRevokeDDL2.sql fails on IBM WCTME 5.7 Foundation (jdkJ2ME Foundation Specification v1.0)</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1849</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The diff for grantRevokeDDL.sql is big, hence attaching. &lt;/p&gt;

&lt;p&gt;For  lang/grantRevokeDDL2.sql  the diff is as follows:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbylang/grantRevokeDDL2.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: grantRevokeDDL2 jdkJ2ME Foundation Specification v1.0 derbyall:derbylang 2006-09-10 11:42:23 ***&lt;br/&gt;
0a1&lt;br/&gt;
&amp;gt; java.lang.reflect.InvocationTargetException: java.lang.NullPointerException&lt;br/&gt;
99 del&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38001&lt;br/&gt;
99a100&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
119 del&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38002&lt;br/&gt;
119a120&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
139 del&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38002&lt;br/&gt;
139a140&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
158 del&lt;br/&gt;
&amp;lt; 1 row inserted/updated/deleted&lt;br/&gt;
158a159,160&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
163 del&lt;br/&gt;
&amp;lt; 0 rows selected&lt;br/&gt;
163a165,166&lt;br/&gt;
&amp;gt; 4          |XYZ            &lt;br/&gt;
&amp;gt; 1 row selected&lt;br/&gt;
168a172,182&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
&amp;gt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;gt; 	for each STATEMENT mode db2sql call revoke_select_proc1();&lt;br/&gt;
&amp;gt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;gt; delete from t1 where i = 5;&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; check delete failed&lt;br/&gt;
&amp;gt; select * from t1 where i = 5;&lt;br/&gt;
171,184d184&lt;br/&gt;
&amp;lt; 1          |XYZ            &lt;br/&gt;
&amp;lt; 1 row selected&lt;br/&gt;
&amp;lt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;lt; 	for each STATEMENT mode db2sql call revoke_select_proc1();&lt;br/&gt;
&amp;lt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;lt; delete from t1 where i = 5;&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38001&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; check delete failed&lt;br/&gt;
&amp;lt; select * from t1 where i = 5;&lt;br/&gt;
&amp;lt; I          |B              &lt;br/&gt;
&amp;lt; ---------------------------&lt;br/&gt;
191a192,202&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
&amp;gt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;gt; 	for each STATEMENT mode db2sql call revoke_select_proc2();&lt;br/&gt;
&amp;gt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;gt; delete from t1 where i = 6;&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; check delete failed&lt;br/&gt;
&amp;gt; select * from t1 where i = 6;&lt;br/&gt;
194,207d204&lt;br/&gt;
&amp;lt; 1          |XYZ            &lt;br/&gt;
&amp;lt; 1 row selected&lt;br/&gt;
&amp;lt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;lt; 	for each STATEMENT mode db2sql call revoke_select_proc2();&lt;br/&gt;
&amp;lt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;lt; delete from t1 where i = 6;&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38002&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; check delete failed&lt;br/&gt;
&amp;lt; select * from t1 where i = 6;&lt;br/&gt;
&amp;lt; I          |B              &lt;br/&gt;
&amp;lt; ---------------------------&lt;br/&gt;
214a212,222&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
&amp;gt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;gt; 	for each STATEMENT mode db2sql call revoke_select_proc3();&lt;br/&gt;
&amp;gt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;gt; delete from t1 where i = 7;&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; check delete failed&lt;br/&gt;
&amp;gt; select * from t1 where i = 7;&lt;br/&gt;
217,230d224&lt;br/&gt;
&amp;lt; 1          |XYZ            &lt;br/&gt;
&amp;lt; 1 row selected&lt;br/&gt;
&amp;lt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;lt; 	for each STATEMENT mode db2sql call revoke_select_proc3();&lt;br/&gt;
&amp;lt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;lt; delete from t1 where i = 7;&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 38002&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; check delete failed&lt;br/&gt;
&amp;lt; select * from t1 where i = 7;&lt;br/&gt;
&amp;lt; I          |B              &lt;br/&gt;
&amp;lt; ---------------------------&lt;br/&gt;
237a232,242&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
&amp;gt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;gt; 	for each STATEMENT mode db2sql call revoke_select_proc4();&lt;br/&gt;
&amp;gt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; ok&lt;br/&gt;
&amp;gt; delete from t1 where i = 8;&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 38000&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE XJ001&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; &amp;#8211; check delete &lt;br/&gt;
&amp;gt; select * from t1 where i = 8;&lt;br/&gt;
240 del&lt;br/&gt;
&amp;lt; 1          |XYZ            &lt;br/&gt;
240a245&lt;br/&gt;
&amp;gt; 8          |XYZ            &lt;br/&gt;
241a247,252&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; drop trigger revoke_select_trig;&lt;br/&gt;
&amp;gt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;gt; ij(USER1)&amp;gt; set connection user2;&lt;br/&gt;
&amp;gt; ij(USER2)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;gt; select * from user1.t1 where i = 1;&lt;br/&gt;
&amp;gt; ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
243,260d253&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; create trigger revoke_select_trig AFTER delete on t1 &lt;br/&gt;
&amp;lt; 	for each STATEMENT mode db2sql call revoke_select_proc4();&lt;br/&gt;
&amp;lt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; ok&lt;br/&gt;
&amp;lt; delete from t1 where i = 8;&lt;br/&gt;
&amp;lt; 1 row inserted/updated/deleted&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; &amp;#8211; check delete &lt;br/&gt;
&amp;lt; select * from t1 where i = 8;&lt;br/&gt;
&amp;lt; I          |B              &lt;br/&gt;
&amp;lt; ---------------------------&lt;br/&gt;
&amp;lt; 0 rows selected&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; drop trigger revoke_select_trig;&lt;br/&gt;
&amp;lt; 0 rows inserted/updated/deleted&lt;br/&gt;
&amp;lt; ij(USER1)&amp;gt; set connection user2;&lt;br/&gt;
&amp;lt; ij(USER2)&amp;gt; &amp;#8211; should fail&lt;br/&gt;
&amp;lt; select * from user1.t1 where i = 1;&lt;br/&gt;
&amp;lt; ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
&amp;lt; ij(USER2)&amp;gt; set connection user1;&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   grantRevokeDDL2 jdkJ2ME Foundation Specification v1.0 derbyall:derbylang 2006-09-10 11:42:33 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>Windows</environment>
        <key id="12349881">DERBY-1849</key>
            <summary>Tests lang/grantRevokeDDL.sql and lang/grantRevokeDDL2.sql fails on IBM WCTME 5.7 Foundation (jdkJ2ME Foundation Specification v1.0)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="kartha">Rajesh Kartha</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Sep 2006 02:09:33 +0100</created>
                <updated>Wed, 1 Jul 2009 01:09:09 +0100</updated>
                            <resolved>Sat, 18 Nov 2006 03:33:04 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.2.2.0</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12434574" author="kartha" created="Thu, 14 Sep 2006 02:10:47 +0100"  >&lt;p&gt;Diff files for both tests attached&lt;/p&gt;</comment>
                            <comment id="12438287" author="fuzzylogic" created="Thu, 28 Sep 2006 06:10:12 +0100"  >&lt;p&gt;Rajesh, it looks like this is still an issue for the J2ME runs. Can you prepare a patch? It is easier to review/commit a patch for this issue than inspecting diff files.&lt;/p&gt;</comment>
                            <comment id="12438340" author="myrna" created="Thu, 28 Sep 2006 08:11:18 +0100"  >&lt;p&gt;I do not think this is a simple master update. There are some really odd diffs, for instance, the section in grantRevokeDDL.sql where a trigger tr31t31TriggerTest is created:&lt;br/&gt;
-------------&lt;br/&gt;
ij(MAMTA3)&amp;gt; &amp;#8211; following should fail because not all the privileges are in place&lt;br/&gt;
create trigger tr31t31TriggerTest after insert on t31TriggerTest for each statement mode db2sql&lt;br/&gt;
	insert into t32TriggerTest values (select c111 from mamta2.v21ViewTest where c112=1);&lt;br/&gt;
------------&lt;br/&gt;
With foundation results in: &lt;br/&gt;
                  ERROR: Failed with SQLSTATE 28508&lt;br/&gt;
But it should just succeed.&lt;br/&gt;
(this then of course causes more diffs because there is no trigger to get fired)&lt;/p&gt;

&lt;p&gt;There may be some other genuine problem further down, it&apos;s hard to say because of the various inter-dependencies of objects in the test.&lt;/p&gt;

&lt;p&gt;I wonder if the same problems would show up with just DataSource testing (i.e. irrespective of j9_foundation)?&lt;/p&gt;

</comment>
                            <comment id="12438341" author="myrna" created="Thu, 28 Sep 2006 08:15:40 +0100"  >&lt;p&gt;The stack trace of that error:&lt;br/&gt;
2006-09-28 06:47:03.307 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; (XID = 872), (SESSIONID = 9), (DATABASE = grantRevokeDDL), (DRDAID = null), Failed Statement is: &amp;#8211; following should fail because not all the privileges are in place&lt;br/&gt;
create trigger tr31t31TriggerTest after insert on t31TriggerTest for each statement mode db2sql&lt;br/&gt;
	insert into t32TriggerTest values (select c111 from mamta2.v21ViewTest where c112=1)&lt;br/&gt;
ERROR 28508: User &apos;MAMTA3&apos; does not have select permission on column &apos;C111&apos; of table &apos;MAMTA2&apos;.&apos;V21VIEWTEST&apos;.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:396)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.StatementColumnPermission.check(StatementColumnPermission.java:127)&lt;br/&gt;
	at org.apache.derby.impl.sql.conn.GenericAuthorizer.authorize(GenericAuthorizer.java:159)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.GenericResultSetFactory.getDDLResultSet(GenericResultSetFactory.java:982)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ConstantActionActivation.execute(ConstantActionActivation.java:54)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericActivationHolder.execute(GenericActivationHolder.java:327)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:356)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1182)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:585)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:517)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:321)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:517)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:370)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:268)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:204)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:170)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:72)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:67)&lt;br/&gt;
Cleanup action completed&lt;br/&gt;
---------------&lt;/p&gt;</comment>
                            <comment id="12438344" author="myrna" created="Thu, 28 Sep 2006 08:18:58 +0100"  >&lt;p&gt;And grantRevokeDDL2 starts with a NPE. That can&apos;t be OK?&lt;/p&gt;</comment>
                            <comment id="12438349" author="myrna" created="Thu, 28 Sep 2006 08:23:59 +0100"  >&lt;p&gt;2006-09-28 06:47:03.307 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; (XID = 872), (SESSIONID = 9), (DATABASE = grantRevokeDDL), (DRDAID = null), Failed Statement is: &amp;#8211; following should fail because not all the privileges are in place&lt;br/&gt;
create trigger tr31t31TriggerTest after insert on t31TriggerTest for each statement mode db2sql&lt;br/&gt;
	insert into t32TriggerTest values (select c111 from mamta2.v21ViewTest where c112=1)&lt;br/&gt;
ERROR 28508: User &apos;MAMTA3&apos; does not have select permission on column &apos;C111&apos; of table &apos;MAMTA2&apos;.&apos;V21VIEWTEST&apos;.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:396)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.StatementColumnPermission.check(StatementColumnPermission.java:127)&lt;br/&gt;
	at org.apache.derby.impl.sql.conn.GenericAuthorizer.authorize(GenericAuthorizer.java:159)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.GenericResultSetFactory.getDDLResultSet(GenericResultSetFactory.java:982)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.ConstantActionActivation.execute(ConstantActionActivation.java:54)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericActivationHolder.execute(GenericActivationHolder.java:327)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:356)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1182)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:585)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:517)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:321)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:517)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:370)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:268)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:204)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:170)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:72)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:67)&lt;br/&gt;
Cleanup action completed&lt;/p&gt;</comment>
                            <comment id="12438799" author="mamtas" created="Fri, 29 Sep 2006 21:33:40 +0100"  >&lt;p&gt;I took a very quick look at couple postings from Myrna about create trigger tr31t31TriggerTest in grantRevokeDDL2.sql and as the comment (&quot;-- following should fail because not all the privileges are in place &quot;) before the create trigger says in the stack trace, this particular create trigger should indeed fail because all the privileges are not in place to successfully create the trigger at this point in the test.&lt;/p&gt;

&lt;p&gt;There might still be some genuine diffs (definitely including the NPE) that needs to be looked into for the 2 test files in question, but the particular stack trace printed by Myrna look like correct expected error.&lt;/p&gt;</comment>
                            <comment id="12438805" author="myrna" created="Fri, 29 Sep 2006 21:58:50 +0100"  >&lt;p&gt;I made a mistake - picked the first reference to that trigger from derby.log. Apologies for the confusion, and thx, for the actual stack trace makes more sense to cause a problem with the foundation classes, because it uses BigDecimal somewhere:&lt;/p&gt;

&lt;p&gt;2006-09-28 06:49:45.019 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; (XID = 1673), (SESSIONID = 9), (DATABASE = grantRevokeDDL), (DRDAID = null), Failed Statement is: &amp;#8211; following will pass because all the required privileges are in place for mamta3&lt;br/&gt;
create trigger tr31t31 after insert on t31TriggerTest for each statement mode db2sql&lt;br/&gt;
        insert into mamta1.t13TriggerTest values (values mamta1.selectFromSpecificSchema(1))&lt;br/&gt;
java.lang.NoClassDefFoundError: java.math.BigDecimal&lt;br/&gt;
	at java.lang.reflect.AccessibleObject.getParameterTypesImpl(Native Method)&lt;br/&gt;
	at java.lang.reflect.Method.getParameterTypes(Method.java:136)&lt;br/&gt;
	at org.apache.derby.iapi.services.loader.ClassInspector.resolveMethod(ClassInspector.java:601)&lt;br/&gt;
	at org.apache.derby.iapi.services.loader.ClassInspector.findPublicMethod(ClassInspector.java:316)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.MethodCallNode.resolveMethodCall(MethodCallNode.java:672)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.StaticMethodCallNode.bindExpression(StaticMethodCallNode.java:235)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.JavaToSQLValueNode.bindExpression(JavaToSQLValueNode.java:254)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ResultColumn.bindExpression(ResultColumn.java:580)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ResultColumnList.bindExpressions(ResultColumnList.java:638)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.RowResultSetNode.bindExpressions(RowResultSetNode.java:239)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.SubqueryNode.bindExpression(SubqueryNode.java:509)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ResultColumn.bindExpression(ResultColumn.java:580)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.ResultColumnList.bindExpressions(ResultColumnList.java:638)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.RowResultSetNode.bindExpressions(RowResultSetNode.java:239)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.DMLStatementNode.bindExpressions(DMLStatementNode.java:249)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.InsertNode.bind(InsertNode.java:308)&lt;br/&gt;
	at org.apache.derby.impl.sql.compile.CreateTriggerNode.bind(CreateTriggerNode.java:283)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:345)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:119)&lt;br/&gt;
	at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:745)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:568)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:517)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:321)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:517)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:370)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:268)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:204)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:170)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:72)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:67)&lt;/p&gt;</comment>
                            <comment id="12439311" author="myrna" created="Mon, 2 Oct 2006 21:48:16 +0100"  >&lt;p&gt;I&apos;m not sure I was clear in my previous comment.&lt;/p&gt;

&lt;p&gt;I think currently there are 2 problems with these tests:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;NullPointerException at the start of grantRevokeDDL2 when run with foundation&lt;br/&gt;
      this may be a test setup issue - not sure - where some essential property is not&lt;br/&gt;
      set when running with DataSource only.&lt;/li&gt;
	&lt;li&gt;create Trigger fails with foundation because something in the Derby source code accessed in this statement finds a call to BigDecimal, which we should not be doing to support JSR169. So this is a problem.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12439320" author="deepa" created="Mon, 2 Oct 2006 22:23:20 +0100"  >&lt;p&gt;Myrna said &quot;create Trigger fails with foundation because something in the Derby source code accessed in this statement finds a call to BigDecimal, which we should not be doing to support JSR169. So this is a problem. &quot;&lt;/p&gt;

&lt;p&gt;Reference manual states triggers are not supported with JSR169. See:&lt;br/&gt;
&lt;a href=&quot;http://db.apache.org/derby/docs/dev/ref/rrefjdbcjsr169.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/dev/ref/rrefjdbcjsr169.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So this may be a known limitation.&lt;/p&gt;
</comment>
                            <comment id="12450965" author="myrna" created="Sat, 18 Nov 2006 03:33:04 +0000"  >&lt;p&gt;committed the following change:&lt;/p&gt;

&lt;p&gt;r476425 | myrnavl | 2006-11-17 19:26:40 -0800 (Fri, 17 Nov 2006) | 6 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1849&quot; title=&quot;Tests lang/grantRevokeDDL.sql and lang/grantRevokeDDL2.sql fails on IBM WCTME 5.7 Foundation (jdkJ2ME Foundation Specification v1.0)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1849&quot;&gt;&lt;del&gt;DERBY-1849&lt;/del&gt;&lt;/a&gt; - grantRevokeDDL and grantRevokeDDL2.sql fail with ibm wctme5.7_found&lt;br/&gt;
ation (jdkJ2ME Spec v1.0)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;accepting that triggers are not supported with this jvm&lt;/li&gt;
	&lt;li&gt;updated masters to latest syntax changes in .sql files&lt;/li&gt;
	&lt;li&gt;stopped NPE by adding ij.dataSource properties to grantRevokeDDL2_app.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12451032" author="myrna" created="Sat, 18 Nov 2006 15:50:05 +0000"  >&lt;p&gt;merged to 10.2 with &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=476541&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=476541&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12340790" name="grantRevokeDDL.diff" size="143787" author="kartha" created="Thu, 14 Sep 2006 02:10:47 +0100"/>
                            <attachment id="12340791" name="grantRevokeDDL2.diff" size="5193" author="kartha" created="Thu, 14 Sep 2006 02:10:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Sep 2006 05:10:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>