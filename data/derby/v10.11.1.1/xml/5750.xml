<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:36:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5750/DERBY-5750.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5750] Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5750</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When empty string is passed for the index name to the update statistics procedure, it throws following exception(passing an empty string for table to compress table procedure also gives simiar exception). The new stored procedure being created through &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4115&quot; title=&quot;Provide a way to drop statistics information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4115&quot;&gt;&lt;del&gt;DERBY-4115&lt;/del&gt;&lt;/a&gt; for dropping the statistics also gave similar exception&lt;/p&gt;


&lt;p&gt;java -Dij.exceptionTrace=true org.apache.derby.tools.ij&lt;br/&gt;
connect &apos;jdbc:derby:db1;create=true&apos;; &lt;br/&gt;
create table t1(c11 int, statistics int not null);&lt;br/&gt;
call syscs_util.SYSCS_UPDATE_STATISTICS( &apos;APP&apos;, &apos;T1&apos;, &apos;&apos; );&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&apos; was thrown while evaluating an expression.&lt;br/&gt;
java.sql.SQLException: The exception &apos;java.sql.SQLException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&apos; was thrown while evaluating an expression.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:431)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2360)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1334)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:630)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:559)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:527)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:369)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
        at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
Caused by: java.sql.SQLException: The exception &apos;java.sql.SQLException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&apos; was thrown while evaluating an expression.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:42)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: java.sql.SQLException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:42)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:424)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2360)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.&amp;lt;init&amp;gt;(EmbedPreparedStatement.java:153)&lt;br/&gt;
        at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Driver40.java:107)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:1685)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:1513)&lt;br/&gt;
        at org.apache.derby.catalog.SystemProcedures.SYSCS_UPDATE_STATISTICS(SystemProcedures.java:753)&lt;br/&gt;
        at org.apache.derby.exe.acace4c0a3x0137x2f19xcc22x00000013e5704.g0(Unknown Source)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:611)&lt;br/&gt;
        at org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMethod.java:46)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallStatementResultSet.java:75)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:443)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:324)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242)&lt;br/&gt;
        ... 10 more&lt;br/&gt;
Caused by: ERROR 42X01: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&lt;br/&gt;
        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:278)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(ParserImpl.java:153)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:357)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)&lt;br/&gt;
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1103)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.&amp;lt;init&amp;gt;(EmbedPreparedStatement.java:134)&lt;br/&gt;
        ... 24 more&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&lt;br/&gt;
java.sql.SQLSyntaxErrorException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:92)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:424)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2360)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.&amp;lt;init&amp;gt;(EmbedPreparedStatement.java:153)&lt;br/&gt;
        at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Driver40.java:107)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:1685)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:1513)&lt;br/&gt;
        at org.apache.derby.catalog.SystemProcedures.SYSCS_UPDATE_STATISTICS(SystemProcedures.java:753)&lt;br/&gt;
        at org.apache.derby.exe.acace4c0a3x0137x2f19xcc22x00000013e5704.g0(Unknown Source)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:611)&lt;br/&gt;
        at org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMethod.java:46)&lt;br/&gt;
        at org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallStatementResultSet.java:75)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:443)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:324)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:630)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:559)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:527)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:369)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
        at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
Caused by: java.sql.SQLException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:42)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)&lt;br/&gt;
        ... 30 more&lt;br/&gt;
Caused by: ERROR 42X01: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 42.&lt;br/&gt;
        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:278)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(ParserImpl.java:153)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:357)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:99)&lt;br/&gt;
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:1103)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.&amp;lt;init&amp;gt;(EmbedPreparedStatement.java:134)&lt;br/&gt;
        ... 24 more&lt;br/&gt;
Issue the &apos;help&apos; command for general information on IJ command syntax.&lt;br/&gt;
Any unrecognized commands are treated as potential SQL commands and executed directly.&lt;br/&gt;
Consult your DBMS server reference documentation for details of the SQL syntax supported by your server.&lt;br/&gt;
ij&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554424">DERBY-5750</key>
            <summary>Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 May 2012 04:56:42 +0100</created>
                <updated>Wed, 3 Sep 2014 09:31:41 +0100</updated>
                            <resolved>Tue, 3 Jul 2012 04:39:18 +0100</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.2.2</fixVersion>
                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13396053" author="mamtas" created="Mon, 18 Jun 2012 18:33:47 +0100"  >&lt;p&gt;Attaching a patch which will have no table name information to compress table/drop statistics/update statistics procedures result in the same exception that a user would get when issuing the compress table sql directly without the table name&lt;br/&gt;
eg alter table compress sequential&lt;br/&gt;
Notice that the table name is missing in the compress sql above&lt;/p&gt;


&lt;p&gt;I have added few test cases for each of these procedures.&lt;/p&gt;</comment>
                            <comment id="13397463" author="knutanders" created="Wed, 20 Jun 2012 13:37:37 +0100"  >&lt;p&gt;The String.isEmpty() method was introduced in Java 6, so the patch won&apos;t compile in my environment:&lt;/p&gt;

&lt;p&gt;compile_catalog:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 1 source file to /code/derby/trunk/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /code/derby/trunk/java/engine/org/apache/derby/catalog/SystemProcedures.java:747: error: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         if (!StringUtil.trimTrailing(schemaname).isEmpty())&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                 ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   symbol:   method isEmpty()&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   location: class String&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /code/derby/trunk/java/engine/org/apache/derby/catalog/SystemProcedures.java:750: error: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;         if (!StringUtil.trimTrailing(tablename).isEmpty())&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                                                ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   symbol:   method isEmpty()&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   location: class String&lt;br/&gt;
(...)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 8 errors&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
/code/derby/trunk/build.xml:603: The following error occurred while executing this line:&lt;br/&gt;
/code/derby/trunk/java/engine/build.xml:67: The following error occurred while executing this line:&lt;br/&gt;
/code/derby/trunk/java/engine/org/apache/derby/catalog/build.xml:51: Compile failed; see the compiler error output for details.&lt;/p&gt;

&lt;p&gt;I couldn&apos;t test the patch because of this, but this check looks wrong to me:&lt;/p&gt;

&lt;p&gt;+        if (!StringUtil.trimTrailing(schemaname).isEmpty())&lt;br/&gt;
+        	query.append(IdUtil.normalToDelimited(schemaname) + &quot;.&quot;);&lt;/p&gt;

&lt;p&gt;I think the intention here is to check if the schema name is empty, whereas it actually checks if it&apos;s free for non-whitespace characters. So I suspect statements like these might stop working:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table &quot;   &quot;.&quot;   &quot; (x int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_compress_table(&apos;   &apos;, &apos;   &apos;, 1);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;/p&gt;

&lt;p&gt;Also, I think skipping the schema name in the internal ALTER TABLE statement if it&apos;s empty, will make the following statement compress the table T2 in the current schema instead of failing, which I believe is not the intention of the patch:&lt;/p&gt;

&lt;p&gt;    call syscs_util.syscs_compress_table(&apos;&apos;, &apos;T2&apos;, 1)&lt;/p&gt;</comment>
                            <comment id="13399026" author="mamtas" created="Fri, 22 Jun 2012 01:27:32 +0100"  >&lt;p&gt;Knut, thanks for reviewing the patch. Thanks for catching the isEmpty() usage. I have changed that in my codeline to instead use length() to determine if we are dealing with empty name.&lt;/p&gt;

&lt;p&gt;As for schema name, I did intentionally make the change to use the current schema, but we can determine if that is the right thing to do or not. While going through existing procedures, I have found that we have 2 flavors of procedures when it comes to dealing with empty or null schema name.&lt;/p&gt;

&lt;p&gt;For instance, when &apos;&apos; is passed for the schema name, SYSCS_UTIL.SYSCS_EXPORT_TABLE uses curent schema, syscs_util.SYSCS_INPLACE_COMPRESS_TABLE gives error schema &apos;&apos; does not exist. Top of the trunk(without my changes in the patch attached here) syscs_util.SYSCS_UPDATE_STATISTICS gives parser error(because we pass the schema name as &apos;&apos;).  &lt;br/&gt;
&amp;#8211; uses current schema&lt;br/&gt;
call SYSCS_UTIL.SYSCS_EXPORT_TABLE (&apos;&apos;, &apos;T1&apos; , &apos;t11.del&apos; , null, null, null);&lt;br/&gt;
&amp;#8211; gives parser error - Caused by: java.sql.SQLException: Syntax error: Encountered &quot;\&quot;&quot; at line 1, column 13.&lt;br/&gt;
call syscs_util.SYSCS_UPDATE_STATISTICS( &apos;&apos;, &apos;T1&apos;, &apos;&apos; ); &lt;br/&gt;
&amp;#8211; Caused by: ERROR 42Y07: Schema &apos;&apos; does not exist&lt;br/&gt;
call syscs_util.SYSCS_INPLACE_COMPRESS_TABLE( &apos;&apos;, &apos;T1&apos;, 1,1,1 ); &lt;/p&gt;

&lt;p&gt;When null is passed for the schema name, SYSCS_UTIL.SYSCS_EXPORT_TABLE uses curent schema, syscs_util.SYSCS_INPLACE_COMPRESS_TABLE gives error schema null doesn&apos;t exist, and top of the trunk, syscs_util.SYSCS_UPDATE_STATISTICS gives null pointer exception&lt;br/&gt;
&amp;#8211; uses current schema&lt;br/&gt;
call SYSCS_UTIL.SYSCS_EXPORT_TABLE (null, &apos;T1&apos; , &apos;t111.del&apos; , null, null, null);&lt;br/&gt;
&amp;#8211; gives null pointer exception&lt;br/&gt;
call syscs_util.SYSCS_UPDATE_STATISTICS( null, &apos;T1&apos;, &apos;&apos; ); &lt;br/&gt;
&amp;#8211; schema null doesn&apos;t exist - Caused by: ERROR 42Y07: Schema &apos;null&apos; does not exist&lt;br/&gt;
call syscs_util.SYSCS_INPLACE_COMPRESS_TABLE( null, &apos;T1&apos;, 1,1,1 ); &lt;/p&gt;

&lt;p&gt;So, we can have either of the two behaviors for SYSCS_UTIL.SYSCS_EXPORT_TABLE and &apos;&apos; or null for schema name &lt;br/&gt;
1)Use current schema or&lt;br/&gt;
2)Give parsing error (we internally generate ALTER TABLE sql here and parser will throw error before ALTER TABLE can throw exception for invalid schema name)&lt;/p&gt;

&lt;p&gt;No matter what we decide, we definitely need to take care of null pointer exception when null is passed for schema name.&lt;/p&gt;</comment>
                            <comment id="13399258" author="knutanders" created="Fri, 22 Jun 2012 11:58:43 +0100"  >&lt;p&gt;I&apos;d prefer some kind of error if an empty name is specified, since one way to specify current schema (NULL) is enough. Although a parse error isn&apos;t very helpful, I agree. The proposed patch introduces checks for empty names and changes the internal SQL based on that check. Couldn&apos;t these checks be changed to raise an error with a proper error message instead? I see that empty table names still cause parse errors with the patch.&lt;/p&gt;</comment>
                            <comment id="13400955" author="mamtas" created="Mon, 25 Jun 2012 23:06:30 +0100"  >&lt;p&gt;Attaching patch#2 (DERBY5750_patch2_diff.txt). This patch will provide following functionality &lt;br/&gt;
a)if schema name is provided as an empty string, we will throw SQLState.LANG_SCHEMA_DOES_NOT_EXIST&lt;br/&gt;
b)if table name is provided as an empty string, we will throw SQLState.LANG_TABLE_NOT_FOUND&lt;br/&gt;
c)if schema name is null, we will use current schema to resolve the table name&lt;br/&gt;
d)if table name is null, we will throw SQLState.LANG_TABLE_NOT_FOUND&lt;/p&gt;

&lt;p&gt;I have added few test cases for each of these procedures. &lt;/p&gt;</comment>
                            <comment id="13401351" author="knutanders" created="Tue, 26 Jun 2012 13:38:53 +0100"  >&lt;p&gt;Empty index name seems to be translated to all indexes in the latest patch. I think I&apos;d prefer to keep it consistent with table and schema name and raise an error in that case too.&lt;/p&gt;

&lt;p&gt;Some small nits:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;indentation seems to be a mix of tabs and spaces&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;method name &quot;basic_schema_table_validation&quot; should be camel-cased for consistency&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;javadoc for basic_schema_table_validation() has empty descriptions in @param and @throws&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;maybe use curly braces in the if/else statements for clarity&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;typos in comments (UpdateStatisticsTest.java): indedx, stiatistics&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;use of IdUtil.mkQualifiedName() would allow simplification of basic_schema_table_validation() (could eliminate the StringBuffer, the second &quot;if&quot; statement and the &quot;else&quot; branch of the last &quot;if&quot; statement)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13404176" author="mamtas" created="Fri, 29 Jun 2012 21:26:03 +0100"  >&lt;p&gt;Knut, I just committed a patch for this jira after taking care of of your comments.&lt;/p&gt;

&lt;p&gt;The commit comments are as follows&lt;br/&gt;
*********************************&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5750&quot; title=&quot;Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5750&quot;&gt;&lt;del&gt;DERBY-5750&lt;/del&gt;&lt;/a&gt; Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception. &lt;/p&gt;

&lt;p&gt;Committing changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5750&quot; title=&quot;Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5750&quot;&gt;&lt;del&gt;DERBY-5750&lt;/del&gt;&lt;/a&gt; which will provide following functionality &lt;br/&gt;
a)if schema name is provided as an empty string, we will throw SQLState.LANG_SCHEMA_DOES_NOT_EXIST&lt;br/&gt;
b)if table name is provided as an empty string, we will throw SQLState.LANG_TABLE_NOT_FOUND&lt;br/&gt;
c)if index name is provided as an empty string(this is for update and drop statistics procedures), we will throw &lt;br/&gt;
	SQLState.LANG_INDEX_NOT_FOUND&lt;br/&gt;
d)if schema name is null, we will use current schema to resolve the table name&lt;br/&gt;
e)if table name is null, we will throw SQLState.LANG_TABLE_NOT_FOUND&lt;br/&gt;
f)if index name is null, we will drop/update statisitcs for all the indexes for the given table.&lt;/p&gt;

&lt;p&gt;I have added few test cases for each of these procedures. &lt;br/&gt;
*********************************&lt;/p&gt;
</comment>
                            <comment id="13723269" author="mamtas" created="Tue, 30 Jul 2013 03:01:29 +0100"  >&lt;p&gt;I am working on backporting this jira to 10.9 and 10.8&lt;/p&gt;</comment>
                            <comment id="13723271" author="jira-bot" created="Tue, 30 Jul 2013 03:03:34 +0100"  >&lt;p&gt;Commit 1508273 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mamtas&quot; class=&quot;user-hover&quot; rel=&quot;mamtas&quot;&gt;Mamta A. Satoor&lt;/a&gt; in branch &apos;code/branches/10.9&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1508273&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1508273&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5750&quot; title=&quot;Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5750&quot;&gt;&lt;del&gt;DERBY-5750&lt;/del&gt;&lt;/a&gt;(Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.)&lt;/p&gt;

&lt;p&gt;Backporting to 10.9&lt;/p&gt;</comment>
                            <comment id="13727964" author="jira-bot" created="Fri, 2 Aug 2013 20:03:47 +0100"  >&lt;p&gt;Commit 1509814 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mamtas&quot; class=&quot;user-hover&quot; rel=&quot;mamtas&quot;&gt;Mamta A. Satoor&lt;/a&gt; in branch &apos;code/branches/10.8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1509814&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1509814&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5750&quot; title=&quot;Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5750&quot;&gt;&lt;del&gt;DERBY-5750&lt;/del&gt;&lt;/a&gt;(Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception.)&lt;/p&gt;

&lt;p&gt;Backporting to 10.8&lt;/p&gt;</comment>
                            <comment id="14119630" author="knutanders" created="Wed, 3 Sep 2014 09:31:41 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532430" name="DERBY5750_patch1_diff.txt" size="8975" author="mamtas" created="Mon, 18 Jun 2012 18:33:47 +0100"/>
                            <attachment id="12533386" name="DERBY5750_patch2_diff.txt" size="12253" author="mamtas" created="Mon, 25 Jun 2012 23:06:29 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jun 2012 12:37:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0b8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35638</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>