<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-415/DERBY-415.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-415] sysinfo with -cp client option should not print error saying DB2 jar file and driver class are missing</title>
                <link>https://issues.apache.org/jira/browse/DERBY-415</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If you run&lt;br/&gt;
  java org.apache.derby.tools.sysinfo -cp client SimpleApp.class&lt;/p&gt;

&lt;p&gt;you get&lt;/p&gt;

&lt;p&gt;FOUND IN CLASS PATH:&lt;/p&gt;

&lt;p&gt;    Derby Client libraries (derbyclient.jar)&lt;/p&gt;


&lt;p&gt;    user-specified class (SimpleApp)&lt;/p&gt;


&lt;p&gt;NOT FOUND IN CLASS PATH:&lt;/p&gt;

&lt;p&gt;    Derby Client libraries (db2jcc.jar)&lt;br/&gt;
    (com.ibm.db2.jcc.DB2Driver not found.)&lt;/p&gt;

&lt;p&gt;The &quot;NOT FOUND IN CLASSPATH&quot; output is confusing and invalid because we&apos;re testing the network client, not the DB2 JCC client.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12311793">DERBY-415</key>
            <summary>sysinfo with -cp client option should not print error saying DB2 jar file and driver class are missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanpendleton">Bryan Pendleton</assignee>
                                    <reporter username="davidvc">David Van Couvering</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jun 2005 09:28:16 +0100</created>
                <updated>Fri, 21 Jan 2011 17:48:22 +0000</updated>
                            <resolved>Wed, 16 Aug 2006 00:47:56 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12374445" author="bryanpendleton" created="Fri, 14 Apr 2006 09:05:33 +0100"  >&lt;p&gt;Since it&apos;s valid to use the db2jcc driver to access Derby, and since there are certainly users doing so, I think it&apos;s nice that sysinfo supports db2jcc, so I don&apos;t think we should remove that support entirely.&lt;/p&gt;

&lt;p&gt;What if we made it so that:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if you&apos;ve got both derbyclient.jar and db2jcc.jar in your classpath, -cp prints info about both of them&lt;/li&gt;
	&lt;li&gt;if you&apos;ve got neither of them, -cp prints the &quot;NOT FOUND IN CLASSPATH&quot; messages&lt;/li&gt;
	&lt;li&gt;if you&apos;ve got one of the drivers in your classpath, but not the other, then -cp prints info about the one you have, but is silent about the one you do not have.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;That is, we could make it print the alarming &quot;NOT FOUND IN CLASSPATH&quot; only if you have &lt;b&gt;neither&lt;/b&gt; driver in your classpath, but as long as you have at least one of the drivers in your classpath, we could omit the NOT FOUND messages for the other driver.&lt;/p&gt;

&lt;p&gt;Would that be an improvement?&lt;/p&gt;</comment>
                            <comment id="12374451" author="fuzzylogic" created="Fri, 14 Apr 2006 10:45:20 +0100"  >&lt;p&gt;+1. sounds like a good plan to me.&lt;/p&gt;</comment>
                            <comment id="12374645" author="bryanpendleton" created="Sun, 16 Apr 2006 00:52:12 +0100"  >&lt;p&gt;Attached is derby-415.diff, a patch proposal.&lt;/p&gt;

&lt;p&gt;This change modifies the behavior of -cp as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if you run &quot;java sysinfo -cp&quot;, then if you have either the jcc driver or the derby&lt;br/&gt;
   network client in your classpath, that is treated as success. If you have&lt;br/&gt;
   neither driver, then a failure is reporting listing both libraries as failed.&lt;/li&gt;
	&lt;li&gt;if you run &quot;java sysinfo -cp client&quot;, then we assume that you are specifically&lt;br/&gt;
   interested in the client JDBC drivers, so we report a failure for either missing&lt;br/&gt;
   library. The only way to have success with &quot;-cp client&quot; is to have both.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is not exactly what David asked for. In his case, he wanted &quot;-cp client&quot;&lt;br/&gt;
to treat the case where you have the Derby Network Client, but &lt;b&gt;not&lt;/b&gt; the JCC&lt;br/&gt;
driver, as a success.&lt;/p&gt;

&lt;p&gt;This patch behaves that way with plain old &quot;-cp&quot;, but not with &quot;-cp client&quot;. My feeling was that if you specifically said &quot;-cp client&quot;, you wanted to get all the details about the client JDBC library portion of your classpath, so such a person might well care about whether or not the JCC library was found. But maybe I&apos;m just being over-cautious here.&lt;/p&gt;

&lt;p&gt;Please have a look at this patch and tell me what you think.&lt;/p&gt;</comment>
                            <comment id="12426846" author="fuzzylogic" created="Wed, 9 Aug 2006 06:54:58 +0100"  >&lt;p&gt;Marking patch available, since there is one. I think this patch is an improvement as-is, although it takes a different approach to the issue than what was reported. Perhaps a complete fix would be to add a &apos;-cp db2driver&apos; option that separates the check for db2jcc.jar from the check for derbyclient.jar in ClasspathTester.&lt;/p&gt;</comment>
                            <comment id="12426847" author="fuzzylogic" created="Wed, 9 Aug 2006 07:02:20 +0100"  >&lt;p&gt;minor correction, code for this is in impl/tools/sysinfo/Main.java. RunClassPathTester.java, which is what I was thinking of when I wrote ClasspathTester in the last comment, is test code.&lt;/p&gt;</comment>
                            <comment id="12427067" author="bryanpendleton" created="Thu, 10 Aug 2006 01:57:22 +0100"  >&lt;p&gt;Thanks for having a look at this, Andrew. I like your suggestion about adding a new &apos;-cp db2driver&apos; option. I was not very happy with the previous patch&apos;s handling of the -cp client case.&lt;/p&gt;

&lt;p&gt;I&apos;ll have a renewed look at this over the weekend.&lt;/p&gt;</comment>
                            <comment id="12427727" author="bryanpendleton" created="Sat, 12 Aug 2006 22:41:54 +0100"  >&lt;p&gt;I think that Andrew&apos;s idea about adding a new argument: &apos;-cp db2driver&apos; is a very good one.&lt;/p&gt;

&lt;p&gt;Attached is derby-415-cp-db2driver.diff, which adds support for &quot;-cp db2driver&quot; and changes&lt;br/&gt;
&quot;-cp client&quot; so that it only refers to the Derby Network Client. Thus the new behavior is:&lt;br/&gt;
   java sysinfo -cp               ===&amp;gt; checks all the various components of the classpath&lt;br/&gt;
   java sysinfo -cp client    ===&amp;gt; just checks whether the network client is in the classpath&lt;br/&gt;
   java sysinfo -cp db2driver ==&amp;gt; just checks whether the JCC driver is in the classpath&lt;/p&gt;

&lt;p&gt;I think this patch provides a much better solution to the original problem observed by David.&lt;/p&gt;

&lt;p&gt;Please have a look.&lt;/p&gt;</comment>
                            <comment id="12428188" author="fuzzylogic" created="Tue, 15 Aug 2006 19:13:07 +0100"  >&lt;p&gt;This patch looks good to me, clean and simple. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12428267" author="bryanpendleton" created="Wed, 16 Aug 2006 00:47:56 +0100"  >&lt;p&gt;Committed derby-415-cp-db2driver.diff to  subversion as revision 431741, and marked this issue as resolved.&lt;/p&gt;

&lt;p&gt;David, if you get a chance, could you confirm the new behavior is acceptable and close this issue?&lt;/p&gt;

&lt;p&gt;I will write a release note and attach it to the issue as a comment to describe the new behavior.&lt;/p&gt;</comment>
                            <comment id="12428270" author="bryanpendleton" created="Wed, 16 Aug 2006 00:54:14 +0100"  >&lt;p&gt;Here&apos;s a short release note to describe the new behavior:&lt;/p&gt;

&lt;p&gt;PROBLEM: Scope of the &quot;-cp client&quot; argument to the Sysinfo tool was too broad.&lt;/p&gt;

&lt;p&gt;SYMPTOM: If you run &quot;java org.apache.derby.tools.sysinfo -cp client SimpleApp.class&quot; you get a message indicating that the DB2 JCC driver was not found in your classpath, even though you have the Derby Client library in your classpath.&lt;/p&gt;

&lt;p&gt;CAUSE: The implementation of the &quot;-cp client&quot; argument in the Sysinfo tool was checking for both the Derby Client jar and the DB2 JCC driver jar, and was reporting an error if either jar was missing. Since the Derby Client jar is the preferred client to use, the Sysinfo tool no longer needs to check for the presence of the DB2 JCC driver jar in this case.&lt;/p&gt;

&lt;p&gt;SOLUTION: The implementation of the &quot;-cp client&quot; argument has been modified to check only for the presence of the Derby Client jar. To check for the presence of the DB2 JCC driver jar, you can pass the new &quot;-cp db2driver&quot; argument.&lt;/p&gt;</comment>
                            <comment id="12496127" author="rhillegas" created="Tue, 15 May 2007 21:52:51 +0100"  >&lt;p&gt;Attaching a releaseNote.html which I ground out of the old-style release note that is included in the comments.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12338754" name="derby-415-cp-db2driver.diff" size="3516" author="bryanpendleton" created="Sat, 12 Aug 2006 22:41:54 +0100"/>
                            <attachment id="12325380" name="derby-415.diff" size="3455" author="bryanpendleton" created="Sun, 16 Apr 2006 00:52:12 +0100"/>
                            <attachment id="12357420" name="releaseNote.html" size="2249" author="rhillegas" created="Tue, 15 May 2007 21:52:51 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 14 Apr 2006 08:05:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10101"><![CDATA[Release Note Needed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37594</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>