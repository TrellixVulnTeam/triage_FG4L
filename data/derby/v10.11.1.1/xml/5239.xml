<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:28:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5239/DERBY-5239.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5239] Remove usages of DriverManager to obtain an Embedded Connection in Derby Server</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5239</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The Derby Network Server appears to look up the Derby Embedded Driver from the &lt;tt&gt;java.sql.DriverManager&lt;/tt&gt; in a couple of places in order to get the connection to the actual database.&lt;/p&gt;

&lt;p&gt;This means the network server cannot operate in environments where for whatever reason it is not OK to access the embedded driver from the DriverManager. Just in general this behavior is unexpected as it should be possible to directly load the embedded driver.&lt;/p&gt;

&lt;p&gt;I&apos;ve observed this issue in 10.6.1.0 and checked that the relevant usages are unchanged in trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12507557">DERBY-5239</key>
            <summary>Remove usages of DriverManager to obtain an Embedded Connection in Derby Server</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edc">Ed Costello</assignee>
                                    <reporter username="edc">Ed Costello</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 May 2011 04:53:06 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:30 +0100</updated>
                            <resolved>Mon, 23 May 2011 13:25:57 +0100</resolved>
                                    <version>10.6.1.0</version>
                    <version>10.8.1.2</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13035186" author="edc" created="Wed, 18 May 2011 04:54:07 +0100"  >&lt;p&gt;Attached is a patch replacing the two usages in Network Server with direct usage of the embedded driver.&lt;/p&gt;</comment>
                            <comment id="13035248" author="kristwaa" created="Wed, 18 May 2011 10:33:18 +0100"  >&lt;p&gt;Hi Ed,&lt;/p&gt;

&lt;p&gt;Thanks for the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
To allow the community to include your work in the code base, you have to grant a license to the ASF by ticking &quot;Grant license to ASF for inclusion in ASF works (as per the Apache License &#167;5)&quot; on the upload page.&lt;br/&gt;
For extra credit you could also generate the patch using &quot;svn diff&quot; from the root directory of the source code hierarchy.&lt;/p&gt;</comment>
                            <comment id="13035322" author="knutanders" created="Wed, 18 May 2011 12:52:51 +0100"  >&lt;p&gt;Do you have an example where the current code causes problems? It might be helpful for the reviewers to understand what kind of problem the patch fixes.&lt;/p&gt;</comment>
                            <comment id="13035329" author="knutanders" created="Wed, 18 May 2011 13:05:37 +0100"  >&lt;p&gt;Ah, I see that my question has already been answered in a thread on derby-dev: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/201105.mbox/%3C1305683326.2425.34.camel@edwardc%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/201105.mbox/%3C1305683326.2425.34.camel@edwardc%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13035636" author="edc" created="Wed, 18 May 2011 21:14:59 +0100"  >&lt;p&gt;Apologies for not ticking the box, I&apos;m too used to skimming the Jira Attach dialog.&lt;/p&gt;

&lt;p&gt;Attached is the same patch but generated from svn trunk &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12479643/12479643_svn-patch-Remove-Driver-Manager-Usage-from-Network-Server.patch&quot; title=&quot;svn-patch-Remove-Driver-Manager-Usage-from-Network-Server.patch attached to DERBY-5239&quot;&gt;svn-patch-Remove-Driver-Manager-Usage-from-Network-Server.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; Revision 1124404 &amp;amp; license box ticked.&lt;/p&gt;</comment>
                            <comment id="13035889" author="dagw" created="Thu, 19 May 2011 01:26:44 +0100"  >&lt;p&gt;The change looks ok to me. Can anybody see any issues with this change? I haven&apos;t really been much involved in this area...&lt;/p&gt;</comment>
                            <comment id="13036159" author="knutanders" created="Thu, 19 May 2011 13:44:05 +0100"  >&lt;p&gt;The change looks fine to me too. The server code may now start using a different instance of the driver than the one found returned by DriverManager.getDriver(), but since all the methods of EmbeddedDriver end up calling static methods in AutoloadedDriver anyway, I don&apos;t think that it would cause any problems (like booting two engine instances in the same JVM).&lt;/p&gt;</comment>
                            <comment id="13036421" author="edc" created="Thu, 19 May 2011 21:14:15 +0100"  >&lt;p&gt;As an aside, that exact scenario is happening in the environment that I&apos;ve patched this for, embedded driver is being explicitly initialized by the OSGi Service managing drivers &amp;amp; a second instance is initialized by the Network Server using this patch. I&apos;ve seen no ill affects from this though I haven&apos;t done more than trivial tests.&lt;/p&gt;</comment>
                            <comment id="13037906" author="knutanders" created="Mon, 23 May 2011 13:25:57 +0100"  >&lt;p&gt;All the regression tests ran cleanly with the patch.&lt;br/&gt;
Committed revision 1126468.&lt;/p&gt;

&lt;p&gt;Thanks for fix, Ed!&lt;/p&gt;</comment>
                            <comment id="13050377" author="knutanders" created="Thu, 16 Jun 2011 13:22:49 +0100"  >&lt;p&gt;As a follow-up I&apos;ve removed the (now unused) import statement that imports the DriverManager class in NetworkServerControlImpl. Committed revision 1136397.&lt;/p&gt;</comment>
                            <comment id="13053192" author="knutanders" created="Wed, 22 Jun 2011 12:41:27 +0100"  >&lt;p&gt;Merged to 10.8. Committed revision 1138412.&lt;/p&gt;</comment>
                            <comment id="13685265" author="knutanders" created="Mon, 17 Jun 2013 10:19:30 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12479643" name="svn-patch-Remove-Driver-Manager-Usage-from-Network-Server.patch" size="986" author="edc" created="Wed, 18 May 2011 21:14:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 May 2011 09:33:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0evb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>