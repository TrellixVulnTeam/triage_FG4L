<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1260/DERBY-1260.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1260] Investigate impact of infinite cost estimates on arithmetic operations/comparisons in the optimizer.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1260</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;For large, deeply nested queries and/or queries with a high number of FROM tables/expressions with high row count estimates, the the resultant cost estimates can be multiplied-&lt;del&gt;sometimes many times over&lt;/del&gt;-throughout the optimization process, which means that the overall query estimate can climb to a very large number very quickly.  If the query is big enough, this can actually cause the optimizer to reach an estimated cost of INFINITY.&lt;/p&gt;

&lt;p&gt;That said, the current optimizer logic for costing and comparing access paths does not expect-&lt;del&gt;and therefore does not account for&lt;/del&gt;-infinite cost estimates.  As a result the optimizer does comparisons of, and basic arithmetic with, cost estimates and row counts that, when applied to estimtes of Infinity, can give unexpected results.  One specific example of this is &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1259&quot; title=&quot;Optimizer plan consideration doesn&amp;#39;t account for infinite cost estimates and can therefore choose plans requiring excessive memory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1259&quot;&gt;DERBY-1259&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m filing this issue for the task of investigating the optimizer code more closely to see what other issues might exist when infinite cost estimates come into play.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12332771">DERBY-1260</key>
            <summary>Investigate impact of infinite cost estimates on arithmetic operations/comparisons in the optimizer.</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="army">A B</reporter>
                        <labels>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Thu, 27 Apr 2006 13:52:15 +0100</created>
                <updated>Tue, 25 Jun 2013 15:53:53 +0100</updated>
                                            <version>10.2.1.6</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12453442" author="bryanpendleton" created="Sun, 26 Nov 2006 16:45:42 +0000"  >&lt;p&gt;Another example of the problems of handling infinite cost estimates arises during&lt;br/&gt;
pushing and pulling of intermediate cost estimates as part of pushing and pulling&lt;br/&gt;
predicates. Specifically, there is the following code in OptimizerImpl:&lt;/p&gt;

&lt;p&gt;                double newCost = currentCost.getEstimatedCost();&lt;br/&gt;
                double pullCost = 0.0;&lt;br/&gt;
                CostEstimate pullCostEstimate =&lt;br/&gt;
                                pullMe.getBestAccessPath().getCostEstimate();&lt;br/&gt;
                if (pullCostEstimate != null)&lt;/p&gt;
                {
                    pullCost = pullCostEstimate.getEstimatedCost();

                    newCost -= pullCost;

                    /*
                    ** It&apos;s possible for newCost to go negative here due to
                    ** loss of precision.
                    */
                    if (newCost &amp;lt; 0.0)
                        newCost = 0.0;
                }

&lt;p&gt;Here are at least some of the interesting situations that can arise with this code:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If newCost is infinite, and pullCost is also infinite, then newCost will become NaN.&lt;/li&gt;
	&lt;li&gt;If newCost is infinite, but pullCost is finite, then newCost will remain infinite.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For more discussion about some of the possible behaviors of this&lt;br/&gt;
code, see &lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/Optimizer%3A-question-about-predicate-pushdown-and-handling-of-intermediate-costs-tf2689629.html#a7500315&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Optimizer%3A-question-about-predicate-pushdown-and-handling-of-intermediate-costs-tf2689629.html#a7500315&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12474981">DERBY-4818</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Nov 2006 16:45:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0p9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10053"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>