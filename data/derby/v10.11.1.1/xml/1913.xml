<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:35:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1913/DERBY-1913.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1913] storetests/st_reclaim_longcol.java fails intermittently</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1913</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I saw this diff when running derbyall:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.5.0_07 storeall:storetests 2006-10-02 18:11:13 ***&lt;br/&gt;
1a2,4&lt;br/&gt;
&amp;gt; Test failed, expected less than 32 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 25&lt;br/&gt;
&amp;gt; allocated pages: 20&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.5.0_07 storeall:storetests 2006-10-02 18:13:35 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A similar diff has also been seen in the nightlies: &lt;a href=&quot;http://www.multinet.no/~solberg/public/Apache/DerbyJvm1.4/testlog/SunOS-5.10_i86pc-i386/441833-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.multinet.no/~solberg/public/Apache/DerbyJvm1.4/testlog/SunOS-5.10_i86pc-i386/441833-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;</description>
                <environment>Seen on Solaris 10, 11, jdk1.4, jdk1.5 and jdk 1.6</environment>
        <key id="12352234">DERBY-1913</key>
            <summary>storetests/st_reclaim_longcol.java fails intermittently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikem">Mike Matrigali</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                            <label>derby_triage10_5_2</label>
                    </labels>
                <created>Mon, 2 Oct 2006 20:45:22 +0100</created>
                <updated>Thu, 1 Nov 2012 21:10:42 +0000</updated>
                            <resolved>Tue, 21 Feb 2012 07:36:16 +0000</resolved>
                                    <version>10.3.1.4</version>
                    <version>10.8.3.0</version>
                                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.2.2</fixVersion>
                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.3.0</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12586067" author="kmarsden" created="Sat, 5 Apr 2008 23:27:12 +0100"  >&lt;p&gt;I saw this on linux on  10.3.2.2 - (644993)&lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pxi3260sr1-20080402_01(SR1))&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Linux x86-32  (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20080403_018470_lHdSMr&lt;br/&gt;
JIT  - r9_20080403_0402&lt;br/&gt;
GC   - 20080402_AA)&lt;br/&gt;
JCL  - 20080331_01&lt;/p&gt;</comment>
                            <comment id="12664659" author="kmarsden" created="Fri, 16 Jan 2009 20:10:29 +0000"  >&lt;p&gt;Saw a similar diff 1/15/2009 on IBM 1.6 10.5.0.0 alpha - (734893)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.6.0 storeall:storetests 2009-01-16 05:34:10 ***&lt;br/&gt;
3a4,6&lt;br/&gt;
&amp;gt; Test failed, expected less than 150 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 123&lt;br/&gt;
&amp;gt; allocated pages: 55&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.6.0 storeall:storetests 2009-01-16 05:35:54 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;assuming it is the same thing. I hope that is a correct assumption.&lt;/p&gt;</comment>
                            <comment id="12728710" author="knutanders" created="Wed, 8 Jul 2009 15:13:44 +0100"  >&lt;p&gt;Triaged for 10.5.2.&lt;/p&gt;</comment>
                            <comment id="12912610" author="myrna" created="Mon, 20 Sep 2010 18:45:56 +0100"  >&lt;p&gt;I saw this while testing 10.6.2 with weme 6.2:&lt;br/&gt;
3a4,7&lt;br/&gt;
&amp;gt; Test 2 failed, expected less than 150 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 99&lt;br/&gt;
&amp;gt; allocated pages: 55&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;/p&gt;
</comment>
                            <comment id="13096755" author="dagw" created="Sat, 3 Sep 2011 21:08:28 +0100"  >&lt;p&gt;Saw this on trunk with JDK 1.6 on Solaris 11:&lt;/p&gt;

&lt;p&gt;&amp;gt; Test 2 failed, expected less than 150 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 96&lt;br/&gt;
&amp;gt; allocated pages: 73&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;/p&gt;</comment>
                            <comment id="13109138" author="kmarsden" created="Wed, 21 Sep 2011 01:46:23 +0100"  >&lt;p&gt;With 10.8.2.1 release  testing I saw this with both the regular and 64 bit JVM&lt;/p&gt;

&lt;p&gt;With:&lt;br/&gt;
Java(TM) SE Runtime Environment (build pmz3160sr9fp1-20110303_01(SR9 FP1))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 z/OS s390-31 jvmmz3160sr9-20110203_74623 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20110203_074623&lt;br/&gt;
JIT  - r9_20101028_17488ifx3&lt;br/&gt;
GC   - 20101027_AA)&lt;br/&gt;
JCL  - 20110203_01&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.6.0 storeall:storetests 2011-09-20 20:01:21 ***&lt;br/&gt;
3a4,7&lt;br/&gt;
&amp;gt; Test 2 failed, expected less than 150 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 296&lt;br/&gt;
&amp;gt; allocated pages: 55&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.6.0 storeall:storetests 2011-09-20 20:04:58 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;and with 64 bit:&lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pmz6460sr9fp1-20110303_01(SR9 FP1))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 z/OS s390x-64 jvmmz6460sr9-20110203_74623 (JIT enabled,&lt;br/&gt;
J9VM - 20110203_074623&lt;br/&gt;
JIT  - r9_20101028_17488ifx3&lt;br/&gt;
GC   - 20101027_AA)&lt;br/&gt;
JCL  - 20110203_01&lt;br/&gt;
$&lt;/p&gt;

&lt;p&gt;&amp;gt; Test 2 failed, expected less than 150 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 426&lt;br/&gt;
&amp;gt; allocated pages: 55&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/p&gt;</comment>
                            <comment id="13170300" author="dagw" created="Thu, 15 Dec 2011 15:52:05 +0000"  >&lt;p&gt;Saw this again with a slightly different signature (trunk, sane jars, Java 1.6.0_15, Solaris 11):&lt;/p&gt;

&lt;p&gt;&amp;gt; Test 1 failed, expected less than 32 pages - count is:                                           &lt;br/&gt;
&amp;gt; free pages     : 13                                                                              &lt;br/&gt;
&amp;gt; allocated pages: 20                                                                              &lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.                                                            &lt;/p&gt;</comment>
                            <comment id="13188708" author="mikem" created="Wed, 18 Jan 2012 21:21:21 +0000"  >&lt;p&gt;Saw again again: 10.8 current branch, windows, ibm1.4.2 jvm&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.4.2 storeall:storetests 2012-01-17 20:03:13 ***&lt;br/&gt;
1a2,5&lt;br/&gt;
&amp;gt; Test 1 failed, expected less than 32 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 29&lt;br/&gt;
&amp;gt; allocated pages: 20&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.4.2 storeall:storetests 2012-01-17 20:07:57 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13188815" author="mikem" created="Wed, 18 Jan 2012 23:50:30 +0000"  >&lt;p&gt;nightly&apos;s, linux, ibm15, 10.8 current branch&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_8/linux/testlog/ibm15/1231438-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_8/linux/testlog/ibm15/1231438-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Failure Details:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetclientmats/DerbyNetClient/encodingTests/TestEnc.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: TestEnc jdk1.5.0 DerbyNetClient derbynetclientmats:encodingTests 2012-01-13 22:13:02 ***&lt;br/&gt;
derbyTesting.encoding can only be used with jdk15, skipping test&lt;br/&gt;
Test skipped: test cannot run with jvm: ibm15.  TestEnc.java&lt;/li&gt;
			&lt;li&gt;End:   TestEnc jdk1.5.0 DerbyNetClient derbynetclientmats:encodingTests 2012-01-13 22:13:02 ***
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.5.0 storeall:storetests 2012-01-13 21:43:03 ***&lt;br/&gt;
1a2,5&lt;br/&gt;
&amp;gt; Test 1 failed, expected less than 32 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 16&lt;br/&gt;
&amp;gt; allocated pages: 20&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.5.0 storeall:storetests 2012-01-13 21:51:20 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13188816" author="mikem" created="Wed, 18 Jan 2012 23:51:39 +0000"  >&lt;p&gt;failed in nightly&apos;s, linux, ibm17, 10.8 current branch&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_8/linux/testlog/ibm17/1231438-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_8/linux/testlog/ibm17/1231438-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Failure Details:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetclientmats/DerbyNetClient/encodingTests/TestEnc.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: TestEnc jdk1.7.0 DerbyNetClient derbynetclientmats:encodingTests 2012-01-14 03:35:57 ***&lt;br/&gt;
derbyTesting.encoding can only be used with jdk15, skipping test&lt;/li&gt;
			&lt;li&gt;End:   TestEnc jdk1.7.0 DerbyNetClient derbynetclientmats:encodingTests 2012-01-14 03:35:57 ***
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.7.0 storeall:storetests 2012-01-14 02:58:00 ***&lt;br/&gt;
1a2,5&lt;br/&gt;
&amp;gt; Test 1 failed, expected less than 32 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 16&lt;br/&gt;
&amp;gt; allocated pages: 20&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.7.0 storeall:storetests 2012-01-14 03:10:00 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13195151" author="mikem" created="Fri, 27 Jan 2012 22:21:47 +0000"  >&lt;p&gt;failed in nightly&apos;s, windows, ibm15, 10.8 branch.  This seems to be failing more often in 10.8 and trunk than other&lt;br/&gt;
branches.  Maybe there is some unintended interaction with stat background thread.  &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/v10_8/windows/testlog/ibm15/1236501-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/v10_8/windows/testlog/ibm15/1236501-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.5.0 storeall:storetests 2012-01-26 21:47:14 ***&lt;br/&gt;
1a2,5&lt;br/&gt;
&amp;gt; Test 1 failed, expected less than 32 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 16&lt;br/&gt;
&amp;gt; allocated pages: 20&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.5.0 storeall:storetests 2012-01-26 21:51:27 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13195203" author="kmarsden" created="Fri, 27 Jan 2012 23:00:47 +0000"  >&lt;p&gt;I think it definitely makes sense to turn off statistics update for this test.&lt;/p&gt;</comment>
                            <comment id="13204039" author="mikem" created="Wed, 8 Feb 2012 21:56:19 +0000"  >&lt;p&gt;i don&apos;t think statistics are the problem, at least not the main issue. It looks like if the background task does not get a chance to run early in the test, then the assumptions on total&lt;br/&gt;
number of pages are wrong, and waiting at the end does not help.  The problem is most likely on machines with enough other work running such that the&lt;br/&gt;
background thread does not get a chance to run.  I think we are seeing a lot of these now in the ibm runs 10.8 runs because we have switched to running multiple jvms concurrently leaving less spare cpu cycles for background threads to run.  &lt;/p&gt;

&lt;p&gt;Unfortunately I am not having luck reproducing in my environment, but I think i understand at least the Test 1 problems - so will code and submit and see if nighltys work better.&lt;/p&gt;</comment>
                            <comment id="13204370" author="knutanders" created="Thu, 9 Feb 2012 08:55:19 +0000"  >&lt;p&gt;I could reproduce the Test 1 and Test 2 problems in my environment by making BasicDeamon sleep for a second before performing a background task. See the attached sleep.diff.&lt;/p&gt;

&lt;p&gt;Running the storetests suite with the patched version produced this result:&lt;/p&gt;

&lt;p&gt;Failure Details:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file storetests/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.6.0_26 storetests:storetests 2012-02-09 09:32:13 ***&lt;br/&gt;
1a2,5&lt;br/&gt;
&amp;gt; Test 1 failed, expected less than 32 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 152&lt;br/&gt;
&amp;gt; allocated pages: 20&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
3a8,11&lt;br/&gt;
&amp;gt; Test 2 failed, expected less than 150 pages - count is:&lt;br/&gt;
&amp;gt; free pages     : 873&lt;br/&gt;
&amp;gt; allocated pages: 3502&lt;br/&gt;
&amp;gt; Waited 100020ms. for background work.&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.6.0_26 storetests:storetests 2012-02-09 09:36:48 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13206475" author="dagw" created="Sun, 12 Feb 2012 18:36:45 +0000"  >&lt;p&gt;See this in nightlies:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/storeall/storetests/st_reclaim_longcol.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: st_reclaim_longcol jdk1.7.0_02 storeall:storetests 2012-02-12 16:03:38 ***&lt;br/&gt;
2 del&lt;br/&gt;
&amp;lt; Beginning test: test2:queue of 5 rows with blob(250000), total_work = 500&lt;br/&gt;
&amp;lt; Ending test: test2:queue of 5 rows with blob(250000), total_work = 500&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   st_reclaim_longcol jdk1.7.0_02 storeall:storetests 2012-02-12 16:03:45 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Missing master update?&lt;/p&gt;</comment>
                            <comment id="13207002" author="mikem" created="Mon, 13 Feb 2012 17:35:50 +0000"  >&lt;p&gt;i will fix the nightly problem.  thought running the suite passed for me.&lt;/p&gt;</comment>
                            <comment id="13212425" author="mikem" created="Tue, 21 Feb 2012 07:36:18 +0000"  >&lt;p&gt;changed test significantly to avoid timing issues.  backported fix from trunk to 10.8, 10.7, 10.6, and 10.5.  It can go farther if anyone is interested.  At this point test has changed significantly so if there are any new intermittent errors, lets file a new bug and track progress there.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12413577">DERBY-4037</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12513930" name="sleep.diff" size="520" author="knutanders" created="Thu, 9 Feb 2012 08:55:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 Apr 2008 22:27:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0asf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>