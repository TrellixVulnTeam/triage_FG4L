<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:21:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1953/DERBY-1953.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1953] Make FOR EACH clause and MODE DB2SQL in CREATE TRIGGER statement optional</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1953</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;According to SQL:2003 standard, section 11.39 &amp;lt;trigger definition&amp;gt;, under Syntax Rules item 8:&lt;/p&gt;

&lt;p&gt;If neither FOR EACH ROW nor FOR EACH STATEMENT is specified, then FOR EACH STATEMENT is implicit.&lt;/p&gt;

&lt;p&gt;[ FOR EACH &lt;/p&gt;
{ ROW | STATEMENT }
&lt;p&gt; ]&lt;/p&gt;</description>
                <environment>Any</environment>
        <key id="12352890">DERBY-1953</key>
            <summary>Make FOR EACH clause and MODE DB2SQL in CREATE TRIGGER statement optional</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yipng">Yip Ng</assignee>
                                    <reporter username="yipng">Yip Ng</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Oct 2006 18:22:34 +0100</created>
                <updated>Thu, 13 Dec 2007 09:05:16 +0000</updated>
                            <resolved>Sun, 12 Nov 2006 16:10:01 +0000</resolved>
                                    <version>10.2.1.6</version>
                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Documentation</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12441245" author="yipng" created="Tue, 10 Oct 2006 19:39:40 +0100"  >&lt;p&gt;Attaching patch derby1953-trunk-diff01.txt.  This patch makes the FOR EACH clause optional in CREATE TRIGGER statement.  Since the changes are mainly in the trigger definition of sqlgrammar.jj file and to make this backward compatibile with previous releases of Derby, I also addressed &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1770&quot; title=&quot;Make &amp;quot;mode db2sql&amp;quot; an optional phrase in the &amp;quot;create trigger&amp;quot; statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1770&quot;&gt;&lt;del&gt;DERBY-1770&lt;/del&gt;&lt;/a&gt;, Make MODE DB2SQL optional.  (Hope Bernt doesn&apos;t mind)  derbylang passes.  Running derbyall now.&lt;/p&gt;</comment>
                            <comment id="12441286" author="yipng" created="Tue, 10 Oct 2006 22:16:53 +0100"  >&lt;p&gt;Found a minor problem with the patch.  Unchecking patch available.  Will resubmit patch.&lt;/p&gt;</comment>
                            <comment id="12441295" author="yipng" created="Tue, 10 Oct 2006 23:19:09 +0100"  >&lt;p&gt;Resubmitting patch derby1953-trunk-diff02.txt for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1953&quot; title=&quot;Make FOR EACH clause and MODE DB2SQL in CREATE TRIGGER statement optional&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1953&quot;&gt;&lt;del&gt;DERBY-1953&lt;/del&gt;&lt;/a&gt;.  It is basically the same patch with more testcases.  derbyall passes.&lt;/p&gt;</comment>
                            <comment id="12441296" author="yipng" created="Tue, 10 Oct 2006 23:20:30 +0100"  >&lt;p&gt;Note that this patch have doc impact on CREATE TRIGGER statement syntax  which is described in the ref manual.&lt;/p&gt;</comment>
                            <comment id="12441312" author="tsuresh" created="Wed, 11 Oct 2006 00:07:41 +0100"  >&lt;p&gt;I reviewed the latest patch , it looks good. I will commit  it,  after running the  tests. &lt;/p&gt;
</comment>
                            <comment id="12441383" author="bernt" created="Wed, 11 Oct 2006 10:16:26 +0100"  >&lt;p&gt;No, I don&apos;t mind &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The change for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1770&quot; title=&quot;Make &amp;quot;mode db2sql&amp;quot; an optional phrase in the &amp;quot;create trigger&amp;quot; statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1770&quot;&gt;&lt;del&gt;DERBY-1770&lt;/del&gt;&lt;/a&gt; is trivial anyway. Two comments though:&lt;/p&gt;

&lt;p&gt;1) The standard syntax for &amp;lt;triggered action&amp;gt;:&lt;/p&gt;

&lt;p&gt;&amp;lt;triggered action&amp;gt; ::=&lt;br/&gt;
     [ FOR EACH &lt;/p&gt;
{ ROW | STATEMENT } ]&lt;br/&gt;
     [ WHEN &amp;lt;left paren&amp;gt; &amp;lt;search condition&amp;gt; &amp;lt;right paren&amp;gt; ]&lt;br/&gt;
     &amp;lt;triggered SQL statement&amp;gt;&lt;br/&gt;
&lt;br/&gt;
is now in Derby: &lt;br/&gt;
&lt;br/&gt;
&amp;lt;triggered action&amp;gt; ::=&lt;br/&gt;
     [ FOR EACH { ROW | STATEMENT }
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;MODE DB2SQL&amp;#93;&lt;/span&gt; ]&lt;br/&gt;
     [ WHEN &amp;lt;left paren&amp;gt; &amp;lt;search condition&amp;gt; &amp;lt;right paren&amp;gt; ]&lt;br/&gt;
     &amp;lt;triggered SQL statement&amp;gt;&lt;/p&gt;

&lt;p&gt;One could have considered&lt;br/&gt;
         [ FOR EACH &lt;/p&gt;
{ ROW | STATEMENT }
&lt;p&gt; ] &lt;span class=&quot;error&quot;&gt;&amp;#91;MODE DB2SQL&amp;#93;&lt;/span&gt;&lt;br/&gt;
instead.&lt;/p&gt;

&lt;p&gt;If MODE DB2SQL some time in the future ended up with some semantic meaning, it would have been nice to have it independent of the FOR EACH part of the statement. I&apos;m not sure if it natters very much.&lt;/p&gt;

&lt;p&gt;2) I was planning to change nearly all tests to go without MODE DB2SQL, and just keep the keywords in db2Compatility.sql. After all, it&apos;s harder to get the parser right without these keywords, so that should be the norm in the tests. I&apos;ll continue that part of my &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1770&quot; title=&quot;Make &amp;quot;mode db2sql&amp;quot; an optional phrase in the &amp;quot;create trigger&amp;quot; statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1770&quot;&gt;&lt;del&gt;DERBY-1770&lt;/del&gt;&lt;/a&gt; work, since Yip&apos;s patch just does some few test extensions.&lt;/p&gt;</comment>
                            <comment id="12441390" author="kristwaa" created="Wed, 11 Oct 2006 10:51:33 +0100"  >&lt;p&gt;Bernt,&lt;/p&gt;

&lt;p&gt;Are you sure the WHEN clause is supported by Derby?&lt;br/&gt;
Some time ago I entered &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-534&quot; title=&quot;Support use of the WHEN clause in CREATE TRIGGER statements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-534&quot;&gt;&lt;del&gt;DERBY-534&lt;/del&gt;&lt;/a&gt;, which asks for support for the WHEN clause. I looked up CREATE TRIGGER in the reference manual, but could not find anything about WHEN there.&lt;br/&gt;
Do we need to support WHEN to be in compliance with the SQL standard(s)?&lt;/p&gt;

&lt;p&gt;If we already support it, the reference manual should be updated and the Jira issue updated.&lt;/p&gt;</comment>
                            <comment id="12441405" author="bernt" created="Wed, 11 Oct 2006 11:47:23 +0100"  >&lt;p&gt;Sorry, that was a glitch. The syntax after Yip&apos;s patch has been applied will be:&lt;/p&gt;

&lt;p&gt;&amp;lt;triggered action&amp;gt; ::=&lt;br/&gt;
     [ FOR EACH &lt;/p&gt;
{ ROW | STATEMENT }
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;MODE DB2SQL&amp;#93;&lt;/span&gt; ]&lt;br/&gt;
     &amp;lt;triggered SQL statement&amp;gt; &lt;/p&gt;</comment>
                            <comment id="12441491" author="yipng" created="Wed, 11 Oct 2006 17:35:07 +0100"  >&lt;p&gt;Originally, I had MODE DB2SQL to be independent but there is a testcase in db2Compatibility.sql that expects failure when the MODE DB2SQL is specified without the FOR EACH part.  That was why I retain the failure with&lt;br/&gt;
the current syntax.  But after going through the most recent DB2 documentation, it appears that MODE DB2SQL can be optional and independent as well.  So I am going to make the correction and change to what Bernt suggested.  The syntax is now:&lt;/p&gt;

&lt;p&gt;&amp;lt;triggered action&amp;gt; ::=&lt;br/&gt;
     [ FOR EACH &lt;/p&gt;
{ ROW | STATEMENT }
&lt;p&gt; ]&lt;br/&gt;
     [ MODE DB2SQL ]&lt;br/&gt;
     &amp;lt;triggered SQL statement&amp;gt;&lt;/p&gt;

&lt;p&gt;Need to rerun derbyall.  =)&lt;/p&gt;
</comment>
                            <comment id="12441587" author="yipng" created="Thu, 12 Oct 2006 01:28:29 +0100"  >&lt;p&gt;Having problem submitting patch as attachment:&lt;/p&gt;

&lt;p&gt;Exception trying to establish attachment directory. Check that the application server and JIRA have permissions to write to it: com.atlassian.jira.web.util.AttachmentException: Cannot write to attachment directory. Check that the application server and JIRA have permissions to write to: /usr/local/tomcat/tomcat-jira/attachments/DERBY/&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1953&quot; title=&quot;Make FOR EACH clause and MODE DB2SQL in CREATE TRIGGER statement optional&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1953&quot;&gt;&lt;del&gt;DERBY-1953&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12441965" author="yipng" created="Fri, 13 Oct 2006 09:37:41 +0100"  >&lt;p&gt;Attaching patch derby1953-trunk-diff03.txt.  This patch makes the MODE DB2SQL independent of FOR EACH part.  derbyall passes.&lt;/p&gt;</comment>
                            <comment id="12442683" author="tsuresh" created="Mon, 16 Oct 2006 20:40:31 +0100"  >&lt;p&gt;Hi Yip , &lt;/p&gt;

&lt;p&gt;Thanks for enhancing  the patch , withe Bernt&apos;s suggestion.  I am not able to apply the patch cleanly,  the changes in this patch are conflicting with some other changes (most probably u&apos;r derby-630 fix).   Could  you please resolve the conflicts and post the patch again.&lt;/p&gt;

&lt;p&gt;if  there are no further  comments from any one else.  I will commit the patch. &lt;/p&gt;


&lt;p&gt;Thanks&lt;br/&gt;
-suresh&lt;/p&gt;</comment>
                            <comment id="12442695" author="yipng" created="Mon, 16 Oct 2006 21:44:38 +0100"  >&lt;p&gt;Attaching derby1953-trunk-diff04.txt.  Previous patch conflicted with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-183&quot; title=&quot;Parameter names required in CREATE FUNCTION&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-183&quot;&gt;&lt;del&gt;DERBY-183&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-630&quot; title=&quot;create trigger fails with null pointer exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-630&quot;&gt;&lt;del&gt;DERBY-630&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12443000" author="tsuresh" created="Tue, 17 Oct 2006 18:32:47 +0100"  >&lt;p&gt;Committed to trunk , revision 464970.  Thanks Yip . &lt;/p&gt;
</comment>
                            <comment id="12443010" author="yipng" created="Tue, 17 Oct 2006 18:48:52 +0100"  >&lt;p&gt;Thanks Suresh, Bernt and Kristian for the review.  &lt;/p&gt;</comment>
                            <comment id="12443011" author="yipng" created="Tue, 17 Oct 2006 18:50:06 +0100"  >&lt;p&gt;Unchecking patch available since it is already committed to trunk.&lt;/p&gt;

&lt;p&gt;The ref manual needs to be updated with the updated syntax in CREATE TRIGGER statement.&lt;/p&gt;</comment>
                            <comment id="12444290" author="bernt" created="Tue, 24 Oct 2006 12:44:27 +0100"  >&lt;p&gt;This patch removes MODE DB2SQL from all tests with the exception of db2compatability and the testing of DB2SQL as i keyword. &lt;/p&gt;</comment>
                            <comment id="12444789" author="knutanders" created="Thu, 26 Oct 2006 06:48:48 +0100"  >&lt;p&gt;Bernt, the test changes in derby-1770-tests.diff look good to me. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12445052" author="bryanpendleton" created="Fri, 27 Oct 2006 01:43:34 +0100"  >&lt;p&gt;With derby-1770-tests.diff applied to the current head of trunk, I&lt;br/&gt;
get a failure in the upgrade_10_1_10_3 test.&lt;/p&gt;

&lt;p&gt;I think that maybe the mode db2sql is still required when running&lt;br/&gt;
in the 10.1 portion of the upgrade test, or something like that?&lt;/p&gt;</comment>
                            <comment id="12445159" author="bernt" created="Fri, 27 Oct 2006 12:53:43 +0100"  >&lt;p&gt;Bryan is right. Changed UpgradeTester.java to take that into consideration. New patch uploaded.&lt;/p&gt;</comment>
                            <comment id="12445233" author="bryanpendleton" created="Fri, 27 Oct 2006 18:37:49 +0100"  >&lt;p&gt;Thanks Bernt! With your latest patch, the Upgrade test passes for me. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12445528" author="bernt" created="Mon, 30 Oct 2006 09:34:51 +0000"  >&lt;p&gt;Committed revision 469102.&lt;/p&gt;</comment>
                            <comment id="12448830" author="yipng" created="Fri, 10 Nov 2006 19:23:19 +0000"  >&lt;p&gt;I think this issue can be marked as resolved once the ref manual documentation&apos;s CREATE TRIGGER syntax is updated.&lt;/p&gt;

&lt;p&gt;&amp;lt;triggered action&amp;gt; ::=&lt;br/&gt;
     [ FOR EACH &lt;/p&gt;
{ ROW | STATEMENT }
&lt;p&gt; ]&lt;br/&gt;
     [ MODE DB2SQL ]&lt;br/&gt;
     &amp;lt;triggered SQL statement&amp;gt; &lt;/p&gt;</comment>
                            <comment id="12448861" author="yipng" created="Fri, 10 Nov 2006 21:23:22 +0000"  >&lt;p&gt;Attaching documentation patch derby1953-trunk-dita-diff01.txt for this jira.  The patch updates the ref manual - CREATE TRIGGER syntax and examples.  Please review.&lt;/p&gt;</comment>
                            <comment id="12449151" author="bryanpendleton" created="Sun, 12 Nov 2006 16:10:01 +0000"  >&lt;p&gt;Doc patch looks good, Yip, thanks for the patch! I built the doc successfully and viewed&lt;br/&gt;
the page and it looks fine. Committed the doc patch to subversion as revision 473979.&lt;/p&gt;</comment>
                            <comment id="12551430" author="fuzzylogic" created="Thu, 13 Dec 2007 09:05:16 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12348750">DERBY-1770</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12343777" name="derby-1770-tests-v2.diff" size="300959" author="bernt" created="Fri, 27 Oct 2006 12:53:43 +0100"/>
                            <attachment id="12343778" name="derby-1770-tests-v2.stat" size="6402" author="bernt" created="Fri, 27 Oct 2006 12:53:43 +0100"/>
                            <attachment id="12343531" name="derby-1770-tests.diff" size="300405" author="bernt" created="Tue, 24 Oct 2006 12:44:27 +0100"/>
                            <attachment id="12343532" name="derby-1770-tests.stat" size="6402" author="bernt" created="Tue, 24 Oct 2006 12:44:27 +0100"/>
                            <attachment id="12342676" name="derby1953-trunk-diff01.txt" size="4393" author="yipng" created="Tue, 10 Oct 2006 19:39:40 +0100"/>
                            <attachment id="12342682" name="derby1953-trunk-diff02.txt" size="5634" author="yipng" created="Tue, 10 Oct 2006 23:19:09 +0100"/>
                            <attachment id="12342865" name="derby1953-trunk-diff03.txt" size="8003" author="yipng" created="Fri, 13 Oct 2006 09:37:41 +0100"/>
                            <attachment id="12343030" name="derby1953-trunk-diff04.txt" size="8219" author="yipng" created="Mon, 16 Oct 2006 21:44:38 +0100"/>
                            <attachment id="12344779" name="derby1953-trunk-dita-diff01.txt" size="2273" author="yipng" created="Fri, 10 Nov 2006 21:23:22 +0000"/>
                            <attachment id="12344778" name="derby1953-trunk-dita-stat01.txt" size="35" author="yipng" created="Fri, 10 Nov 2006 21:23:22 +0000"/>
                            <attachment id="12342675" name="derby1953-trunk-stat01.txt" size="338" author="yipng" created="Tue, 10 Oct 2006 19:39:40 +0100"/>
                            <attachment id="12342681" name="derby1953-trunk-stat02.txt" size="338" author="yipng" created="Tue, 10 Oct 2006 23:19:09 +0100"/>
                            <attachment id="12342864" name="derby1953-trunk-stat03.txt" size="516" author="yipng" created="Fri, 13 Oct 2006 09:37:41 +0100"/>
                            <attachment id="12343029" name="derby1953-trunk-stat04.txt" size="516" author="yipng" created="Mon, 16 Oct 2006 21:44:38 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Oct 2006 23:07:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>