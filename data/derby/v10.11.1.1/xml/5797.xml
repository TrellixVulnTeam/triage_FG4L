<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5797/DERBY-5797.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5797] AssertionFailedError in functionTests.tests.lang.UpdateStatisticsTest.testDisposableStatsEagerness </title>
                <link>https://issues.apache.org/jira/browse/DERBY-5797</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I noticed a test failure in UpdateStatisticsTest.testDisposableStatsEagerness.&lt;/p&gt;

&lt;p&gt;The link is: &lt;a href=&quot;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1345812-suites.All_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1345812-suites.All_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The stack trace: &lt;/p&gt;

&lt;p&gt;testDisposableStatsEagerness(org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest)junit.framework.AssertionFailedError&lt;br/&gt;
		 at org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest.testDisposableStatsEagerness(UpdateStatisticsTest.java:594)&lt;br/&gt;
		 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
		 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)&lt;br/&gt;
		 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
		 at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;br/&gt;
		 at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:424)&lt;br/&gt;
		 at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:441)&lt;br/&gt;
		 at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
		 at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
		 at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
		 at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
		 at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
		 at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
		 at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
		 at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;/p&gt;</description>
                <environment>windows XP on vmware, ibm 1.6</environment>
        <key id="12559237">DERBY-5797</key>
            <summary>AssertionFailedError in functionTests.tests.lang.UpdateStatisticsTest.testDisposableStatsEagerness </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2012 19:03:51 +0100</created>
                <updated>Wed, 3 Sep 2014 09:31:26 +0100</updated>
                            <resolved>Mon, 18 Jun 2012 07:48:28 +0100</resolved>
                                    <version>10.9.2.2</version>
                    <version>10.10.1.1</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.2.2</fixVersion>
                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13288779" author="kristwaa" created="Mon, 4 Jun 2012 19:29:43 +0100"  >&lt;p&gt;This is likely a test defect, and I believe it is caused by the poorer timer/clock resolution &lt;span class=&quot;error&quot;&gt;&amp;#91;by default&amp;#93;&lt;/span&gt; on Windows and the unfortunate timestamp comparison in the test.&lt;br/&gt;
I&apos;ve been trying to reproduce this on the Windows systems I have easy access to, but I have been unable to do so this far. I see in the run mentioned above that there was only one failure, but it often comes as a pair (both embedded and client failing).&lt;/p&gt;

&lt;p&gt;I&apos;ll rewrite the test logic, either adding a sleep (say 100 ms) or verifying the results using UUIDs instead of timestamps.&lt;/p&gt;</comment>
                            <comment id="13290824" author="kristwaa" created="Thu, 7 Jun 2012 07:18:58 +0100"  >&lt;p&gt;Attaching patch 1a, which makes the test sleep at least one tick on the system timer in critical locations. This should ensure that the timestamps of the statistics entries should differ.&lt;/p&gt;

&lt;p&gt;The patch removes two other sleep-methods. Note that while the method in SecurityPolicyReloadingTest takes an argument of number of seconds to sleep, the method isn&apos;t used. My IDE claims that, and I also removed the method before adding the new one in BaseTestCase and the code compiled.&lt;/p&gt;

&lt;p&gt;As for the timer resolution issue, I got a 1ms resolution on the Windows 7 machine I have available, but on a Windows Vista machine I observed a resolution of 15/16ms. Starting Windows Media Player brought it down to 1ms &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
I found a paper at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, which states that the default timer resolution on Windows 7 is 15.6ms (it also discusses timer coalescing).&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://msdn.microsoft.com/en-us/windows/hardware/gg463266.aspx&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/windows/hardware/gg463266.aspx&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13290947" author="knutanders" created="Thu, 7 Jun 2012 12:48:09 +0100"  >&lt;p&gt;Looks like a good fix to me. +1&lt;/p&gt;</comment>
                            <comment id="13291569" author="kristwaa" created="Fri, 8 Jun 2012 07:20:53 +0100"  >&lt;p&gt;Thanks, Knut Anders.&lt;/p&gt;

&lt;p&gt;Committed patch 1a to trunk with revision 1347888. I&apos;ll backport it later today.&lt;/p&gt;</comment>
                            <comment id="13393692" author="kristwaa" created="Mon, 18 Jun 2012 07:48:28 +0100"  >&lt;p&gt;Forgot about this, but now it has been backported to 10.9 with revision 1351215.&lt;br/&gt;
Resolving issue.&lt;/p&gt;</comment>
                            <comment id="13709353" author="mamtas" created="Tue, 16 Jul 2013 02:54:27 +0100"  >&lt;p&gt;This failure was seen on 10.8 codeline. I will work on backporting it to 10.8&lt;br/&gt;
&lt;a href=&quot;http://download.java.net/javadesktop/derby/javadb-5579314-report/javadb-task-3689573.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.java.net/javadesktop/derby/javadb-5579314-report/javadb-task-3689573.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    junit.framework.AssertionFailedError&lt;br/&gt;
at org.apache.derbyTesting.functionTests.tests.lang.UpdateStatisticsTest.testDisposableStatsEagerness(UpdateStatisticsTest.java:481)&lt;br/&gt;
at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:113)&lt;br/&gt;
at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) &lt;/p&gt;</comment>
                            <comment id="13710347" author="jira-bot" created="Tue, 16 Jul 2013 23:01:47 +0100"  >&lt;p&gt;Commit 1503919 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mamtas&quot; class=&quot;user-hover&quot; rel=&quot;mamtas&quot;&gt;Mamta A. Satoor&lt;/a&gt; in branch &apos;code/branches/10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1503919&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1503919&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5797&quot; title=&quot;AssertionFailedError in functionTests.tests.lang.UpdateStatisticsTest.testDisposableStatsEagerness &quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5797&quot;&gt;&lt;del&gt;DERBY-5797&lt;/del&gt;&lt;/a&gt;: AssertionFailedError in functionTests.tests.lang.UpdateStatisticsTest.testDisposableStatsEagerness&lt;/p&gt;


&lt;p&gt;Backporting from trunk(revision 1347888) into 10.8. The fix was contributed by Knut.&lt;/p&gt;</comment>
                            <comment id="14119562" author="knutanders" created="Wed, 3 Sep 2014 09:31:26 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12656863">DERBY-6289</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12531226" name="derby-5797-1a-sleep_a_tick.diff" size="4366" author="kristwaa" created="Thu, 7 Jun 2012 07:18:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Jun 2012 18:29:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0bcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>