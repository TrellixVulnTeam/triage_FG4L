<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2015/DERBY-2015.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2015] NullPointerException in INSERT ... SELECT with self-joined table and IDENTITY column</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2015</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The following statements generate a NullPointerException:&lt;/p&gt;

&lt;p&gt;CREATE TABLE t1 (&lt;br/&gt;
   f1 INTEGER);&lt;/p&gt;

&lt;p&gt;CREATE TABLE t2 (&lt;br/&gt;
   f2 INTEGER GENERATED ALWAYS AS IDENTITY,&lt;br/&gt;
   f3 INTEGER);&lt;/p&gt;

&lt;p&gt;INSERT INTO t2 (f3)&lt;br/&gt;
   SELECT a.f1&lt;br/&gt;
      FROM t1 a&lt;br/&gt;
         INNER JOIN t1 b ON a.f1 = b.f1;&lt;/p&gt;

&lt;p&gt;Stack trace:&lt;br/&gt;
----------------------------------------------------------------&lt;br/&gt;
2006-10-28 21:29:17.937 GMT:&lt;br/&gt;
 Booting Derby version The Apache Software Foundation - Apache Derby - 10.2.1.6 - (452058): instance c013800d-010e-90d3-9ea6-00000012fd20&lt;br/&gt;
on database directory C:\temp_sys\temp_Derby_TestErr_db&lt;/p&gt;

&lt;p&gt;Database Class Loader started - derby.database.classpath=&apos;&apos;&lt;br/&gt;
2006-10-28 21:29:25.437 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; (XID = 125), (SESSIONID = 0), (DATABASE = c:\temp_sys\temp_Derby_TestErr_db), (DRDAID = null), Cleanup action starting&lt;br/&gt;
2006-10-28 21:29:25.437 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; (XID = 125), (SESSIONID = 0), (DATABASE = c:\temp_sys\temp_Derby_TestErr_db), (DRDAID = null), Failed Statement is: INSERT INTO t2 (f3)&lt;br/&gt;
   SELECT a.f1&lt;br/&gt;
      FROM t1 a&lt;br/&gt;
         INNER JOIN t1 b ON a.f1 = b.f1&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.ResultColumnList.remapColumnReferencesToExpressions(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.JoinNode.flatten(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.FromList.flattenFromTables(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.SelectNode.preprocess(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.SingleChildResultSetNode.preprocess(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.DMLStatementNode.optimize(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.DMLModStatementNode.optimize(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.go(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main14.main(Unknown Source)&lt;br/&gt;
        at org.apache.derby.tools.ij.main(Unknown Source)&lt;br/&gt;
Cleanup action completed&lt;br/&gt;
----------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;As with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1574&quot; title=&quot;NullPointerException in UPDATE with COALESCE and subquery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1574&quot;&gt;&lt;del&gt;DERBY-1574&lt;/del&gt;&lt;/a&gt;, any subsequent SQL statements produce an internal error in the RawStore module.&lt;/p&gt;</description>
                <environment>Java 1.5.0_06-b05 WinXP</environment>
        <key id="12354214">DERBY-2015</key>
            <summary>NullPointerException in INSERT ... SELECT with self-joined table and IDENTITY column</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chdh@inventec.ch">Christian d&apos;Heureuse</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Oct 2006 22:36:53 +0100</created>
                <updated>Thu, 13 Dec 2007 09:05:17 +0000</updated>
                            <resolved>Thu, 23 Nov 2006 17:36:15 +0000</resolved>
                                    <version>10.2.1.6</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12449531" author="bryanpendleton" created="Tue, 14 Nov 2006 00:50:21 +0000"  >&lt;p&gt;I think this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1089&quot; title=&quot;Derby fails inserting a join into a table with a generated column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1089&quot;&gt;&lt;del&gt;DERBY-1089&lt;/del&gt;&lt;/a&gt;. Christian, can you try the patch attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1089&quot; title=&quot;Derby fails inserting a join into a table with a generated column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1089&quot;&gt;&lt;del&gt;DERBY-1089&lt;/del&gt;&lt;/a&gt; and see if it resolves the problem for you?&lt;/p&gt;</comment>
                            <comment id="12452294" author="bryanpendleton" created="Thu, 23 Nov 2006 17:36:15 +0000"  >&lt;p&gt;Marking as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1089&quot; title=&quot;Derby fails inserting a join into a table with a generated column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1089&quot;&gt;&lt;del&gt;DERBY-1089&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12551435" author="fuzzylogic" created="Thu, 13 Dec 2007 09:05:17 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12329992">DERBY-1089</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Nov 2006 00:50:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>