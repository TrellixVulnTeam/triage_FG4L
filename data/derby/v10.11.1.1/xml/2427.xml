<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2427/DERBY-2427.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2427] jdbcapi/BlobStoredProcedureTest and jdbcapi/ClobStoredProcedureTest fail with weme6.1</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2427</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;BlobStoredProcedureTest and ClobStoredProcedureTest, introduced as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2257&quot; title=&quot;Implementing the stored procedures called by the LOB related JDBC methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2257&quot;&gt;&lt;del&gt;DERBY-2257&lt;/del&gt;&lt;/a&gt;, are failing when run with weme6.1.  The traces are all similar to the following:&lt;/p&gt;

&lt;p&gt;5) testBlobGetBytesSP(org.apache.derbyTesting.functionTests.tests.jdbcapi.BlobStoredProcedureTest)ERROR 38000: The exception &apos;java.lang.NoClassDefFoundError: java.sql.DriverManager&apos; was thrown while evaluating an expression.&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.unexpectedUserException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.reflect.DirectCall.invoke(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.RowResultSet.getNextRowCore(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedCallableStatement.executeStatement(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.BlobStoredProcedureTest.setUp(BlobStoredProcedureTest.java:80)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:80)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12364501">DERBY-2427</key>
            <summary>jdbcapi/BlobStoredProcedureTest and jdbcapi/ClobStoredProcedureTest fail with weme6.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="narayanan">V.Narayanan</assignee>
                                    <reporter username="army">A B</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Mar 2007 23:43:31 +0000</created>
                <updated>Wed, 1 Jul 2009 01:09:07 +0100</updated>
                            <resolved>Wed, 21 Mar 2007 15:11:56 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12479616" author="narayanan" created="Fri, 9 Mar 2007 15:28:58 +0000"  >&lt;p&gt;The problem as I understood it from the stack trace posted was in the getEmbedConnection() method in LOBStoredProcedure class. &lt;/p&gt;

&lt;p&gt;In this patch I have resorted to use the same way it is done in SystemProcedures and have moved this common code to Util.&lt;/p&gt;

&lt;p&gt;I have run the junit suite and had no failures.&lt;/p&gt;

&lt;p&gt;I have run derbyall and will be posting the result tomorrow.&lt;/p&gt;

&lt;p&gt;I haven&apos;t run the test on weme6.1 but am sure that this fix should resolve the issue.&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12479618" author="narayanan" created="Fri, 9 Mar 2007 15:32:13 +0000"  >&lt;p&gt;My derbyall just completed and I have a few failures. I will handle these in a subsequent submission to the issue. Pls ignore v1.&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12479662" author="army" created="Fri, 9 Mar 2007 17:40:20 +0000"  >&lt;p&gt;Thank you for picking this issue up so quickly.&lt;/p&gt;

&lt;p&gt;&amp;gt; I haven&apos;t run the test on weme6.1 but am sure that this fix should resolve the issue. &lt;/p&gt;

&lt;p&gt;For what it&apos;s worth, when I applied the _v1 patch locally and ran the two tests with weme6.1, they did indeed pass.  So it looks like you are on the right track...&lt;/p&gt;</comment>
                            <comment id="12479811" author="narayanan" created="Sat, 10 Mar 2007 07:08:21 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;There was a problem in my test environment yesterday as a result of which there were failures in derbyall. I switched to my regular machine and things ran fine. I however took the opportunity to do a minor fix&lt;/p&gt;

&lt;p&gt;Earlier I was returning a EmbedConnection from the method in the Util class. I changed this to return a Connection object. This avoided the casting to an EmbedConnection in Util and a recast back to Connection in SystemProcedure. &lt;/p&gt;

&lt;p&gt;Thank you for running this test with weme6.1 and giving the test output. Since this patch is along the same lines I expect this to pass.&lt;/p&gt;

&lt;p&gt;I request for this patch to be considered for reviews and comments.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Details Tests I ran for new patch&lt;br/&gt;
--------------------------------------------&lt;/p&gt;

&lt;p&gt;derbyall suite - (All except  Upgrade_10_1_10_3 passed. This failure was due to jars not bein found. I corrected this and the test passed.)&lt;/p&gt;

&lt;p&gt;I had run the junit test yesterday and everything had passed. Since the changes today were only minor. I ran the following to confirm&lt;/p&gt;

&lt;p&gt;jdbcapi/BlobStoredProcedureTest&lt;br/&gt;
jdbcapi/ClobStoredProcedureTest&lt;br/&gt;
jdbc4/TestDbMetaData&lt;/p&gt;

&lt;p&gt;All of them passed.&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12479812" author="narayanan" created="Sat, 10 Mar 2007 07:15:02 +0000"  >&lt;p&gt;Also if everything is fine I request for  FailureWithweme6_1_v2.diff  to be considered for a commit too.&lt;/p&gt;

&lt;p&gt;Narayanan&lt;/p&gt;</comment>
                            <comment id="12480131" author="djd" created="Mon, 12 Mar 2007 15:56:04 +0000"  >&lt;p&gt;I&apos;m a little unclear on which patches should be applied here. Most of the discussion has been about the v1 patch, but the last comment is to commit v2 as well.&lt;/p&gt;

&lt;p&gt;Are both patches required? v2 seems to be an updated version of v1, not an additional patch.&lt;/p&gt;</comment>
                            <comment id="12480275" author="narayanan" created="Tue, 13 Mar 2007 05:17:58 +0000"  >&lt;p&gt;I am sorry for being ambiguous here.  By saying &quot;Also if everything is fine I request for FailureWithweme6_1_v2.diff to be considered for a commit too. &quot;&lt;br/&gt;
I meant  &quot;FailureWithweme6_1_v2.diff &quot; in addition to being considered for reviews and comments (as mentioned in my previous comment) can be considered for commit too, since I have run all the tests and they passed.&lt;/p&gt;</comment>
                            <comment id="12480279" author="narayanan" created="Tue, 13 Mar 2007 05:29:14 +0000"  >&lt;p&gt; &quot;FailureWithweme6_1_v2.diff &quot;  is the latest patch and please apply that one. Both the patches are not required.&lt;/p&gt;</comment>
                            <comment id="12480505" author="djd" created="Tue, 13 Mar 2007 18:04:12 +0000"  >&lt;p&gt;These procedures just for use by the network server and client, right?&lt;/p&gt;

&lt;p&gt;So there&apos;s no requirement to test them on J2ME since the client and server are not supported there.&lt;/p&gt;

&lt;p&gt;So would a simpler approch just be not running these tests?&lt;/p&gt;

&lt;p&gt;The patch worries me a little because private methods that fetched connections specific to that class have now been moved into&lt;br/&gt;
a public method, meaning anyone can call it.&lt;/p&gt;</comment>
                            <comment id="12481111" author="narayanan" created="Thu, 15 Mar 2007 11:02:40 +0000"  >&lt;p&gt;&amp;gt;These procedures just for use by the network server and client, right?&lt;/p&gt;

&lt;p&gt;&amp;gt;So there&apos;s no requirement to test them on J2ME since the client and server are not supported there. &lt;/p&gt;

&lt;p&gt;Yes you are right. Guess I could then disable the tests in the Embedded case too. But that is out of the scope of this issue.&lt;/p&gt;

&lt;p&gt;The patch FailureWithweme6_1_v3.diff disables the test when running with JSR169.&lt;/p&gt;

&lt;p&gt;I ran BlobStoredProcedureTest and ClobStoredProcedureTest and both of them passed. I did not run any other tests.&lt;/p&gt;

&lt;p&gt;I have not run these tests on  weme6.1.&lt;/p&gt;</comment>
                            <comment id="12481792" author="army" created="Sat, 17 Mar 2007 00:03:33 +0000"  >&lt;p&gt;I confirmed that with the _v3 patch the two tests no longer run with weme6.1.  I also ran the tests with ibm142 as a sanity check and it passed as expected.  So committed the _v3 patch with svn# 519190:&lt;/p&gt;

&lt;p&gt;  URL: &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;rev=519190&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;rev=519190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you V. Narayanan!&lt;/p&gt;</comment>
                            <comment id="12481803" author="narayanan" created="Sat, 17 Mar 2007 03:49:44 +0000"  >&lt;p&gt;Thank you for raising this issue and the runs with with weme6.1 and also for the commit.&lt;/p&gt;</comment>
                            <comment id="12482791" author="army" created="Wed, 21 Mar 2007 15:11:56 +0000"  >&lt;p&gt;I verified that the tests are now being skipped when running suites.All with weme6.1.  So I&apos;m resolving and closing this issue.  Thanks again for addressing this so quickly!&lt;/p&gt;</comment>
                            <comment id="12483030" author="narayanan" created="Thu, 22 Mar 2007 06:27:17 +0000"  >&lt;p&gt;The pleasure was mine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; . Thank you for informing us about the suites.All run with weme6.1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; .&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12352989" name="FailureWithweme6_1_v1.diff" size="2720" author="narayanan" created="Fri, 9 Mar 2007 15:28:58 +0000"/>
                            <attachment id="12352990" name="FailureWithweme6_1_v1.stat" size="285" author="narayanan" created="Fri, 9 Mar 2007 15:28:58 +0000"/>
                            <attachment id="12353038" name="FailureWithweme6_1_v2.diff" size="2720" author="narayanan" created="Sat, 10 Mar 2007 07:08:21 +0000"/>
                            <attachment id="12353039" name="FailureWithweme6_1_v2.stat" size="285" author="narayanan" created="Sat, 10 Mar 2007 07:08:21 +0000"/>
                            <attachment id="12353366" name="FailureWithweme6_1_v3.diff" size="2210" author="narayanan" created="Thu, 15 Mar 2007 11:02:40 +0000"/>
                            <attachment id="12353367" name="FailureWithweme6_1_v3.stat" size="295" author="narayanan" created="Thu, 15 Mar 2007 11:02:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Mar 2007 15:28:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>