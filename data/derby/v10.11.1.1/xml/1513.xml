<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:51:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1513/DERBY-1513.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1513] Trial 1 for DERBY-550</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1513</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-550#action_12421280&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-550#action_12421280&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-550#action_12421282&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-550#action_12421282&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12346037">DERBY-1513</key>
            <summary>Trial 1 for DERBY-550</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12314092">DERBY-550</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="naka">Tomohito Nakayama</assignee>
                                    <reporter username="naka">Tomohito Nakayama</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Jul 2006 07:44:11 +0100</created>
                <updated>Fri, 21 Jan 2011 18:08:47 +0000</updated>
                            <resolved>Sat, 22 Jul 2006 10:37:04 +0100</resolved>
                                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12421285" author="naka" created="Sat, 15 Jul 2006 07:50:09 +0100"  >&lt;p&gt;The patch for trial 1 and the result.&lt;/p&gt;

&lt;p&gt;Additional information.&lt;br/&gt;
OutOfMemory happens again.&lt;/p&gt;
</comment>
                            <comment id="12421286" author="naka" created="Sat, 15 Jul 2006 07:56:32 +0100"  >&lt;p&gt;Comparing to the referential result in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1504&quot; title=&quot;Fix way to measure wasteful use of memory when LOB is communicated between network server and driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1504&quot;&gt;&lt;del&gt;DERBY-1504&lt;/del&gt;&lt;/a&gt;, there were no difference in the serverMemoryUsage.xls .....&lt;/p&gt;

&lt;p&gt;referential result in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1504&quot; title=&quot;Fix way to measure wasteful use of memory when LOB is communicated between network server and driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1504&quot;&gt;&lt;del&gt;DERBY-1504&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
   &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12336743/serverMemoryUsage.xls&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12336743/serverMemoryUsage.xls&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12421288" author="naka" created="Sat, 15 Jul 2006 08:04:33 +0100"  >&lt;p&gt;Using jdb, I found that MemorySavedByteArrayOutputStream newly introduced in this task could not save the memory ....&lt;/p&gt;

&lt;p&gt;Exception occurred: java.lang.OutOfMemoryError (uncaught)&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (uncaught)&quot;thread=DRDAConnThread_3&quot;, java.io.ByteArrayOutputStream.toByteArray(), line=136 bci=4&lt;/p&gt;

&lt;p&gt;DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; where&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; java.io.ByteArrayOutputStream.toByteArray (ByteArrayOutputStream.java:136)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader$MemorySavedByteArrayOutputStream.toByteArray (DDMReader.java:1,815)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader.getExtData (DDMReader.java:1,004)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader.getExtData (DDMReader.java:944)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.readAndSetExtParam (DRDAConnThread.java:4,355)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.readAndSetAllExtParams (DRDAConnThread.java:4,320)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTTobjects (DRDAConnThread.java:3,811)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT (DRDAConnThread.java:3,640)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:928)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:254)&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; eval java.lang.Runtime.getRuntime().maxMemory() &lt;br/&gt;
 java.lang.Runtime.getRuntime().maxMemory()  = 133234688&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;I suspect that java.io.ByteArrayOutputStream object allocated different size of memory at construction time from parameter of the constructor...&lt;/p&gt;</comment>
                            <comment id="12421290" author="naka" created="Sat, 15 Jul 2006 08:20:37 +0100"  >&lt;p&gt;At constructing time, prepare same size of byte[] buf as passed in parameter of constructor of MemorySavedByteArrayOutputStream.&lt;/p&gt;</comment>
                            <comment id="12421291" author="naka" created="Sat, 15 Jul 2006 08:24:36 +0100"  >&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1513&quot; title=&quot;Trial 1 for DERBY-550&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1513&quot;&gt;&lt;del&gt;DERBY-1513&lt;/del&gt;&lt;/a&gt;_2.patch, MemorySavedByteArrayOutputStream did not work as before.&lt;/p&gt;

&lt;p&gt;Using jdb, I found size of buf and count is not same value when toByteArray method was called.&lt;/p&gt;

&lt;p&gt;Exception occurred: java.lang.OutOfMemoryError (uncaught)&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (uncaught)&quot;thread=DRDAConnThread_3&quot;, java.io.ByteArrayOutputStream.toByteArray(), line=136 bci=4&lt;/p&gt;

&lt;p&gt;DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; where&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; java.io.ByteArrayOutputStream.toByteArray (ByteArrayOutputStream.java:136)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader$MemorySavedByteArrayOutputStream.toByteArray (DDMReader.java:1,816)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader.getExtData (DDMReader.java:1,004)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader.getExtData (DDMReader.java:944)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.readAndSetExtParam (DRDAConnThread.java:4,355)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.readAndSetAllExtParams (DRDAConnThread.java:4,320)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTTobjects (DRDAConnThread.java:3,811)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT (DRDAConnThread.java:3,640)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:928)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:254)&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; up&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; list&lt;br/&gt;
1,812    			if(buf.length == count)&lt;/p&gt;
{
1,813    				return buf;
1,814    				
1,815    			}
&lt;p&gt;else&lt;/p&gt;
{
1,816 =&amp;gt; 				return super.toByteArray();
1,817    
1,818    			}
&lt;p&gt;1,819    		}&lt;br/&gt;
1,820    		&lt;br/&gt;
1,821    		&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; eval count&lt;br/&gt;
 count = 67108864&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; eval buf.length&lt;br/&gt;
 buf.length = 67108865&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;This difference is mysterious ....&lt;/p&gt;</comment>
                            <comment id="12421373" author="naka" created="Sun, 16 Jul 2006 05:16:17 +0100"  >&lt;p&gt;The &quot;mystery&quot; seems to be additional count for writeNullByte ....&lt;/p&gt;</comment>
                            <comment id="12421378" author="naka" created="Sun, 16 Jul 2006 06:46:48 +0100"  >&lt;p&gt;Upload third patch and measured result in this trial.&lt;/p&gt;

&lt;p&gt;Difference in the patch is that new patch take nullbyte into consideration when calculating size of memory to be allocated.&lt;br/&gt;
The size of nullbyte is subtracted from memory to be allocated as buffer.&lt;/p&gt;

&lt;p&gt;Regretfully,there were no difference in measured result between before and after the patch.&lt;/p&gt;</comment>
                            <comment id="12421379" author="naka" created="Sun, 16 Jul 2006 06:57:48 +0100"  >&lt;p&gt;However,I found there were difference in behavior.&lt;/p&gt;

&lt;p&gt;I survey OutOfMemoryError of the program with configuration of -Xmx64m -Xmx128m -Xmx192m -Xmx256m.&lt;/p&gt;

&lt;p&gt;OutOfMemoryError happen in all of those configurations.&lt;br/&gt;
However, how OutOfMemoryError was thrown from program was not same between these configurations.&lt;/p&gt;

&lt;p&gt;Next was information captured by using jdb.&lt;/p&gt;

&lt;p&gt;-Xmx64m :&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (uncaught)&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (uncaught)&quot;thread=DRDAConnThread_3&quot;, org.apache.derby.impl.drda.DDMReader$MemorySavedByteArrayOutputStream.&amp;lt;init&amp;gt;(), line=1,807 bci=6&lt;br/&gt;
1,807    			buf = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;size&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; where&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader$MemorySavedByteArrayOutputStream.&amp;lt;init&amp;gt; (DDMReader.java:1,807)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader.getExtData (DDMReader.java:958)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DDMReader.getExtData (DDMReader.java:944)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.readAndSetExtParam (DRDAConnThread.java:4,355)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.readAndSetAllExtParams (DRDAConnThread.java:4,320)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTTobjects (DRDAConnThread.java:3,811)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT (DRDAConnThread.java:3,640)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:928)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:254)&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; eval  java.lang.Runtime.getRuntime().maxMemory() &lt;br/&gt;
  java.lang.Runtime.getRuntime().maxMemory()  = 66650112&lt;/p&gt;


&lt;p&gt;-Xmx128m :&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (to be caught at: org.apache.derby.impl.store.raw.data.StoredPage.logRow(), line=4,209 bci=1,370)&quot;thread=DRDAConnThread_3&quot;, org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream.expandBuffer(), line=243 bci=64&lt;br/&gt;
243    		byte[] newbuf = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;newsize&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; where&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream.expandBuffer (DynamicByteArrayOutputStream.java:243)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream.write (DynamicByteArrayOutputStream.java:88)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; java.io.DataOutputStream.write (DataOutputStream.java:85)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; org.apache.derby.iapi.types.SQLBinary.writeExternal (SQLBinary.java:282)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.StoredPage.logColumn (StoredPage.java:6,255)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.StoredPage.logRow (StoredPage.java:3,965)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.InsertOperation.writeOptionalDataToBuffer (InsertOperation.java:369)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.InsertOperation.&amp;lt;init&amp;gt; (InsertOperation.java:114)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.LoggableActions.actionInsert (LoggableActions.java:138)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insertNoOverflow (BasePage.java:664)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;11&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insertAtSlot (BasePage.java:585)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;12&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.StoredPage.insertAtSlot (StoredPage.java:6,735)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;13&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insert (BasePage.java:691)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;14&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.access.heap.HeapController.doInsert (HeapController.java:254)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;15&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.access.heap.HeapController.insert (HeapController.java:573)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;16&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow (RowChangerImpl.java:447)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;17&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore (InsertResultSet.java:995)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;18&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.InsertResultSet.open (InsertResultSet.java:522)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;19&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.GenericPreparedStatement.execute (GenericPreparedStatement.java:357)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;20&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedStatement.executeStatement (EmbedStatement.java:1,181)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;21&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement (EmbedPreparedStatement.java:1,512)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;22&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute (EmbedPreparedStatement.java:1,190)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;23&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAStatement.execute (DRDAStatement.java:556)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;24&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT (DRDAConnThread.java:3,655)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;25&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:928)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;26&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:254)&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; eval  java.lang.Runtime.getRuntime().maxMemory() &lt;br/&gt;
  java.lang.Runtime.getRuntime().maxMemory()  = 133234688&lt;/p&gt;


&lt;p&gt;-Xmx192m :&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (to be caught at: org.apache.derby.impl.store.raw.data.StoredPage.logRow(), line=4,209 bci=1,370)&quot;thread=DRDAConnThread_3&quot;, org.apache.derby.impl.store.raw.data.MemByteHolder.&amp;lt;init&amp;gt;(), line=68 bci=26&lt;br/&gt;
68    		this.curBuf = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;bufSize&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; where&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.MemByteHolder.&amp;lt;init&amp;gt; (MemByteHolder.java:68)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.StoredPage.logColumn (StoredPage.java:6,351)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.StoredPage.logRow (StoredPage.java:3,965)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.InsertOperation.writeOptionalDataToBuffer (InsertOperation.java:369)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.InsertOperation.&amp;lt;init&amp;gt; (InsertOperation.java:114)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.LoggableActions.actionInsert (LoggableActions.java:138)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insertNoOverflow (BasePage.java:664)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insertAtSlot (BasePage.java:585)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.StoredPage.insertAtSlot (StoredPage.java:6,735)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insert (BasePage.java:691)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;11&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.access.heap.HeapController.doInsert (HeapController.java:254)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;12&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.access.heap.HeapController.insert (HeapController.java:573)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;13&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow (RowChangerImpl.java:447)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;14&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore (InsertResultSet.java:995)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;15&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.InsertResultSet.open (InsertResultSet.java:522)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;16&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.GenericPreparedStatement.execute (GenericPreparedStatement.java:357)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;17&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedStatement.executeStatement (EmbedStatement.java:1,181)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;18&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement (EmbedPreparedStatement.java:1,512)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;19&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute (EmbedPreparedStatement.java:1,190)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;20&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAStatement.execute (DRDAStatement.java:556)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;21&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT (DRDAConnThread.java:3,655)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;22&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:928)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;23&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:254)&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; eval  java.lang.Runtime.getRuntime().maxMemory() &lt;br/&gt;
  java.lang.Runtime.getRuntime().maxMemory()  = 199819264&lt;/p&gt;


&lt;p&gt;-Xmx256m :&lt;br/&gt;
Exception occurred: java.lang.OutOfMemoryError (to be caught at: org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(), line=1,267 bci=498)&quot;thread=DRDAConnThread_3&quot;, org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream.&amp;lt;init&amp;gt;(), line=63 bci=12&lt;br/&gt;
63    		buf = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;cbuf.length&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; where&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream.&amp;lt;init&amp;gt; (DynamicByteArrayOutputStream.java:63)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insertAllowOverflow (BasePage.java:821)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.raw.data.BasePage.insert (BasePage.java:694)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.access.heap.HeapController.doInsert (HeapController.java:306)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; org.apache.derby.impl.store.access.heap.HeapController.insert (HeapController.java:573)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow (RowChangerImpl.java:447)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore (InsertResultSet.java:995)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.execute.InsertResultSet.open (InsertResultSet.java:522)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; org.apache.derby.impl.sql.GenericPreparedStatement.execute (GenericPreparedStatement.java:357)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedStatement.executeStatement (EmbedStatement.java:1,181)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;11&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement (EmbedPreparedStatement.java:1,512)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;12&amp;#93;&lt;/span&gt; org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute (EmbedPreparedStatement.java:1,190)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;13&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAStatement.execute (DRDAStatement.java:556)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;14&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.parseEXCSQLSTT (DRDAConnThread.java:3,655)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;15&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:928)&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;16&amp;#93;&lt;/span&gt; org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:254)&lt;br/&gt;
DRDAConnThread_3&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; eval  java.lang.Runtime.getRuntime().maxMemory() &lt;br/&gt;
  java.lang.Runtime.getRuntime().maxMemory()  = 266403840&lt;/p&gt;</comment>
                            <comment id="12421381" author="naka" created="Sun, 16 Jul 2006 07:04:31 +0100"  >&lt;p&gt;Seeing those informations, OutOfMemoryError happens from NetworkServer only in the configuration of -Xmx64m.&lt;br/&gt;
In other configurations, OutOfMemoryError happens from Engine.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what this means yet.&lt;/p&gt;

&lt;p&gt;I remember that some report says that OutOfMemoryError happens only when NetworkServer/Client were used and &lt;br/&gt;
does not happen when just Engine was used.&lt;/p&gt;

&lt;p&gt;Now I suspect that NetworkServer may use Engine inefficiently in the view of memory usage ....&lt;/p&gt;</comment>
                            <comment id="12551370" author="fuzzylogic" created="Thu, 13 Dec 2007 09:05:03 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12336925" name="DERBY-1513.patch" size="1732" author="naka" created="Sat, 15 Jul 2006 07:50:09 +0100"/>
                            <attachment id="12336929" name="DERBY-1513_2.patch" size="1756" author="naka" created="Sat, 15 Jul 2006 08:20:37 +0100"/>
                            <attachment id="12336957" name="DERBY-1513_3.patch" size="1817" author="naka" created="Sun, 16 Jul 2006 06:46:48 +0100"/>
                            <attachment id="12336926" name="serverMemoryUsage.xls" size="716288" author="naka" created="Sat, 15 Jul 2006 07:50:09 +0100"/>
                            <attachment id="12336958" name="serverMemoryUsage_3.xls" size="458752" author="naka" created="Sun, 16 Jul 2006 06:46:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Dec 2007 09:05:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0kon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>