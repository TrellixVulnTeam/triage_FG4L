<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-447/DERBY-447.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-447] getBoolean() throws data conversion exception for DECIMAL type in J2ME/CDC/Foundation</title>
                <link>https://issues.apache.org/jira/browse/DERBY-447</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The call to the ResultSet method getBoolean() for a DECIMAL value throws data conversion exception with J2ME/CDC/Foundation. The class BigIntegerDecimal, which is used for DECIMAL support in J2ME/CDC/Foundation, does not override the getBoolean() method from the class DataType. The getBoolean() method in DataType simply throws a data conversion exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12312058">DERBY-447</key>
            <summary>getBoolean() throws data conversion exception for DECIMAL type in J2ME/CDC/Foundation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jul 2005 07:32:22 +0100</created>
                <updated>Fri, 30 Sep 2005 03:18:49 +0100</updated>
                            <resolved>Fri, 30 Sep 2005 03:18:49 +0100</resolved>
                                    <version>10.1.1.0</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.2.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12315275" author="deepa" created="Fri, 8 Jul 2005 12:56:56 +0100"  >&lt;p&gt;This patch implements getBoolean() method in BigIntegerDecimal, which is the class used for DECIMAL support in J2ME/CDC/Foundation. The method returns false for zero or null values and true for all other values.&lt;/p&gt;

&lt;p&gt;Here is the method implementation:&lt;br/&gt;
	// 0 or null is false, all else is true&lt;br/&gt;
	public boolean	getBoolean()&lt;/p&gt;
	{
		String bigDecimalString = getString();
		if(bigDecimalString == null)
			return false;
		
		BigInteger bi = new BigInteger(data2c);
		return bi.compareTo(java.math.BigInteger.ZERO) != 0;
	}

&lt;p&gt;I ran the test jdbcapi/resultset.java using IBM WCTME5.7 Foundation profile. Before the change the output file resultset.out had the following output for calls to getBoolean() for DECIMAL values:&lt;/p&gt;

&lt;p&gt;getBoolean(10) got exception &lt;br/&gt;
Data Conversion SQLException&lt;br/&gt;
getBoolean(dc) got exception &lt;br/&gt;
Data Conversion SQLException&lt;/p&gt;

&lt;p&gt;After the change, getBoolean() for DECIMAL value does not throw data conversion exception. The output file now has:&lt;/p&gt;

&lt;p&gt;getBoolean(10): true&lt;br/&gt;
getBoolean(dc): true&lt;/p&gt;

&lt;p&gt;To verify that the getBoolean() method returns the right value, I also tested using the following DECIMAL values (-10.1, 0, -0, 0.00, -0.00, null).&lt;/p&gt;

&lt;p&gt;Note: The test jdbcapi/resultset.java is currently excluded for J2ME/Foundation. The following line &quot;runwithfoundation=false&quot; in resultset_app.properties has to be commented to be able to run the test. Also, the test will not be successful because of other BigDecimal methods. So the specific lines in output has to be checked in resultset.out. I am working on a test wrapper to make the test work in J2ME/Foundation and will submit this in a separate task.&lt;/p&gt;

&lt;p&gt;Please review this patch and commit it.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Deepa&lt;/p&gt;</comment>
                            <comment id="12315278" author="djd" created="Fri, 8 Jul 2005 15:15:46 +0100"  >&lt;p&gt;Rather than this code&lt;/p&gt;

&lt;p&gt; String bigDecimalString = getString();&lt;br/&gt;
if(bigDecimalString == null)&lt;br/&gt;
return false;&lt;/p&gt;

&lt;p&gt;to see if the value is NULL, you should use the isNull() method. e.g.&lt;/p&gt;

&lt;p&gt;if (isNull())&lt;br/&gt;
   return false;&lt;/p&gt;

&lt;p&gt;otherwise it looks good. Can you re-submit a patch?&lt;/p&gt;</comment>
                            <comment id="12315316" author="deepa" created="Sat, 9 Jul 2005 01:41:57 +0100"  >&lt;p&gt;Hi Dan,&lt;/p&gt;

&lt;p&gt;Thanks for pointing this out. I was using a round-about way to check if the value is null. Please look at the re-submitted patch.&lt;/p&gt;

&lt;p&gt;Deepa&lt;/p&gt;</comment>
                            <comment id="12315330" author="djd" created="Sat, 9 Jul 2005 03:29:52 +0100"  >&lt;p&gt;Committed revision 209845.&lt;/p&gt;</comment>
                            <comment id="12315962" author="djd" created="Sat, 16 Jul 2005 09:27:35 +0100"  >&lt;p&gt;Committed revision 219260 on 10.1 branch (merge of 209845)&lt;br/&gt;
svn merge -r 209844:209845 &lt;a href=&quot;https://svn.apache.org/repos/asf/incubator/derby/code/trunk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/incubator/derby/code/trunk/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12316321" author="djd" created="Thu, 21 Jul 2005 17:30:51 +0100"  >&lt;p&gt;Also marked fixed in 10.1 branch&lt;/p&gt;</comment>
                            <comment id="12329441" author="kmarsden" created="Fri, 16 Sep 2005 02:55:06 +0100"  >&lt;p&gt;reopening to fix fix in&lt;/p&gt;</comment>
                            <comment id="12330831" author="deepa" created="Fri, 30 Sep 2005 03:15:19 +0100"  >&lt;p&gt;reopening to fix fix version&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12311145" name="derby-447_2.diff" size="689" author="deepa" created="Sat, 9 Jul 2005 01:41:57 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Jul 2005 14:15:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy17pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40901</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>