<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:08:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2269/DERBY-2269.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2269] running tests (derbyall, or suites.All) with weme6.1 (or wctme5.7) with derbyrun.jar fails with NoClassDefFoundError: javax.naming.Referenceable</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2269</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When running any of the tests (e.g. &lt;br/&gt;
  j9 org.apache.derbyTesting.functionTests.harness.RunTest lang/supersimple.sql&lt;br/&gt;
    or&lt;br/&gt;
  j9 &lt;span class=&quot;error&quot;&gt;&amp;#91;-Dclienthost...-Dserverhost...&amp;#93;&lt;/span&gt; junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.tools._Suite)&lt;br/&gt;
with j9 and derbyrun.jar in the classpath, the tests (most - actually 5 tests out of derbyall will pass) will bail out, and no results will be returned. The stack trace (from RunTest lang/supersimple) is like this:&lt;br/&gt;
------------------------------&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax.naming.Referenceable&lt;br/&gt;
        at java.lang.ClassLoader.defineClassImpl(Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.defineClass(ClassLoader.java:226)&lt;br/&gt;
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:109)&lt;br/&gt;
        at java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1029)&lt;br/&gt;
        at java.net.URLClassLoader.findInExtensions(URLClassLoader.java:328)&lt;br/&gt;
        at java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1038)&lt;br/&gt;
        at java.net.URLClassLoader$4.run(URLClassLoader.java:549)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:213)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:547)&lt;br/&gt;
        at com.ibm.oti.vm.URLSystemClassLoader.findClass(URLSystemClassLoader.java:27)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:606)&lt;br/&gt;
        at com.ibm.oti.vm.URLSystemClassLoader.loadClass(URLSystemClassLoader.java:60)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:563)&lt;br/&gt;
        at java.lang.ClassLoader.defineClassImpl(Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.defineClass(ClassLoader.java:226)&lt;br/&gt;
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:109)&lt;br/&gt;
        at java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1029)&lt;br/&gt;
        at java.net.URLClassLoader.findInExtensions(URLClassLoader.java:328)&lt;br/&gt;
        at java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1038)&lt;br/&gt;
        at java.net.URLClassLoader$4.run(URLClassLoader.java:549)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(AccessController.java:213)&lt;br/&gt;
        at java.net.URLClassLoader.findClass(URLClassLoader.java:547)&lt;br/&gt;
        at com.ibm.oti.vm.URLSystemClassLoader.findClass(URLSystemClassLoader.java:27)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:606)&lt;br/&gt;
        at com.ibm.oti.vm.URLSystemClassLoader.loadClass(URLSystemClassLoader.java:60)&lt;br/&gt;
        at java.lang.ClassLoader.loadClass(ClassLoader.java:563)&lt;br/&gt;
        at java.lang.Class.forNameImpl(Native Method)&lt;br/&gt;
        at java.lang.Class.forName(Class.java:114)&lt;br/&gt;
        at org.apache.derbyTesting.junit.SecurityManagerSetup.getURL(SecurityManagerSetup.java:318)&lt;br/&gt;
        at org.apache.derbyTesting.junit.SecurityManagerSetup.determineClasspath(SecurityManagerSetup.java:280)&lt;br/&gt;
        at org.apache.derbyTesting.junit.SecurityManagerSetup.&amp;lt;clinit&amp;gt;(SecurityManagerSetup.java:57)&lt;br/&gt;
        at java.lang.J9VMInternals.initializeImpl(Native Method)&lt;br/&gt;
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:177)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.harness.jvm.getSecurityProps(jvm.java:385)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.harness.jvm.setSecurityProps(jvm.java:345)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.harness.RunTest.buildTestCommand(RunTest.java:2350)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.harness.RunTest.testRun(RunTest.java:498)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.harness.RunTest.main(RunTest.java:368)&lt;br/&gt;
------------------------&lt;/p&gt;

&lt;p&gt;I had been tracking down a similar problem when derbynet.jar is in the classpath, but derbynet.jar should not be in the classpath when running with this jvm, so that was irritating but understandable.&lt;/p&gt;

&lt;p&gt;But, to note, I had tracked that (new to me when I first noticed it about a week ago) failure down to probably related to a change in junit.SecurityManagerSetup.java with revision 492822, which changed the error to be caught with derbynet.jar/derbyclient.jar from NoClassDefFoundError to the more logical ClassNotFoundException.&lt;br/&gt;
Possibly this issue was exposed by the same change. &lt;/p&gt;

&lt;p&gt;Not sure what the solution is yet.&lt;/p&gt;</description>
                <environment>weme 6.1.(.1) or wctme5.7 (foundation)</environment>
        <key id="12361223">DERBY-2269</key>
            <summary>running tests (derbyall, or suites.All) with weme6.1 (or wctme5.7) with derbyrun.jar fails with NoClassDefFoundError: javax.naming.Referenceable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jan 2007 00:51:50 +0000</created>
                <updated>Mon, 14 May 2007 18:36:28 +0100</updated>
                            <resolved>Mon, 14 May 2007 18:36:28 +0100</resolved>
                                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12468143" author="myrna" created="Sun, 28 Jan 2007 19:54:36 +0000"  >&lt;p&gt;I&apos;m attaching two possible approaches to prevent this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2269&quot; title=&quot;running tests (derbyall, or suites.All) with weme6.1 (or wctme5.7) with derbyrun.jar fails with NoClassDefFoundError: javax.naming.Referenceable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2269&quot;&gt;&lt;del&gt;DERBY-2269&lt;/del&gt;&lt;/a&gt;_a.diff basically adds back the catch NoClassDefFoundError that used to happen before change 492822.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2269&quot; title=&quot;running tests (derbyall, or suites.All) with weme6.1 (or wctme5.7) with derbyrun.jar fails with NoClassDefFoundError: javax.naming.Referenceable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2269&quot;&gt;&lt;del&gt;DERBY-2269&lt;/del&gt;&lt;/a&gt;_b.diff puts an if !JDBC.vmSupportsJSR169() block around the getURL(&quot;org.apache.derby.jdbc.ClientDataSource&quot;) which was resulting in loading of javax.naming.Referenceable down the line.&lt;/p&gt;

&lt;p&gt;I&apos;d like input on which approach is preferable. &lt;br/&gt;
Once I get that, I&apos;ll (re)run derbyall &amp;amp; suites.All. If I don&apos;t get any input, I&apos;ll go with approach b.&lt;/p&gt;</comment>
                            <comment id="12468310" author="djd" created="Mon, 29 Jan 2007 15:49:22 +0000"  >&lt;p&gt;I agree that b) is the correct approach.&lt;br/&gt;
 a) I think is wrong because it will mask situations where the class can not be loaded due to a bug. E.g. ClientDataSource depends on a class in derbytools.jar.&lt;/p&gt;</comment>
                            <comment id="12468529" author="myrna" created="Tue, 30 Jan 2007 08:19:57 +0000"  >&lt;p&gt;The patch I had attached actually only resolved the problem for running derbyall, for running suites.All a similar if(!JDBC.supportsJSR169()) section was required in org.apache.derbyTesting.junit.Derby.java. &lt;br/&gt;
Made changes, tested with weme6.1 (j9 2.3/j2ME 1.1) and jdk14.&lt;br/&gt;
committed with revision 501337:  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=501337&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=501337&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12349765" name="DERBY-2269_a.diff" size="862" author="myrna" created="Sun, 28 Jan 2007 19:54:36 +0000"/>
                            <attachment id="12349766" name="DERBY-2269_b.diff" size="1080" author="myrna" created="Sun, 28 Jan 2007 19:54:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Jan 2007 15:49:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>