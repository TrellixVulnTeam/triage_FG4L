<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:34:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2576/DERBY-2576.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2576] setCreateDatabase does not work for EmbeddedXADataSource or EmbeddedConnectionPoolDataSource</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2576</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;After implementing setCreateDatabase for ClientDataSource, and creating a test (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2296&quot; title=&quot;getProperties method deprecated on ClientDataSource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2296&quot;&gt;&lt;del&gt;DERBY-2296&lt;/del&gt;&lt;/a&gt;) I realized there was no such test for XADataSource or ConnectionPoolDataSource.&lt;br/&gt;
However, the test I created failed with Embedded, because the database does not get created. A database &lt;b&gt;does&lt;/b&gt; get created using setConnectionAttributes(create=true). &lt;br/&gt;
Also, setShutdownDatabase does work (tested in XADSAuthenticationTest and PoolDSAuthenticationTest).&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12367698">DERBY-2576</key>
            <summary>setCreateDatabase does not work for EmbeddedXADataSource or EmbeddedConnectionPoolDataSource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Apr 2007 18:25:30 +0100</created>
                <updated>Mon, 15 Oct 2007 22:39:12 +0100</updated>
                            <resolved>Mon, 15 Oct 2007 22:39:12 +0100</resolved>
                                    <version>10.3.1.4</version>
                                                    <component>JDBC</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12490412" author="myrna" created="Fri, 20 Apr 2007 18:28:48 +0100"  >&lt;p&gt;test for ConnectionPoolDataSource and XADataSource that doesn&apos;t work because of this bug&lt;/p&gt;</comment>
                            <comment id="12490423" author="djd" created="Fri, 20 Apr 2007 19:45:55 +0100"  >&lt;p&gt;I think this is a bug because these classes extend EmbeddedDataSource and thus inherit the behaviour of that class which includes the setCreateDatabase() method and its intended behavior.&lt;/p&gt;</comment>
                            <comment id="12534334" author="kmarsden" created="Fri, 12 Oct 2007 17:27:03 +0100"  >&lt;p&gt;I tried this small test with EbmeddedXADataSource and it seems to create the database fine.&lt;br/&gt;
Am I doing something wrong to reproduce?&lt;/p&gt;

&lt;p&gt;import org.apache.derby.jdbc.EmbeddedXADataSource;&lt;br/&gt;
import java.sql.*;&lt;br/&gt;
import javax.sql.*;&lt;/p&gt;

&lt;p&gt;public class SetCreateTest {&lt;br/&gt;
    public static void main(String[] args) throws Exception &lt;/p&gt;
{
	EmbeddedXADataSource ds = new EmbeddedXADataSource();
	ds.setDatabaseName(&quot;newdb&quot;);
	ds.setCreateDatabase(&quot;create&quot;);
	XAConnection xaConn = ds.getXAConnection();
	Connection conn = xaConn.getConnection();
	Statement stmt = conn.createStatement();
	stmt.close();
	conn.close();
		
    }

&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="12534361" author="kmarsden" created="Fri, 12 Oct 2007 20:11:57 +0100"  >&lt;p&gt;I looked at the test and found that at the time the issue occurs, we have&lt;br/&gt;
connectionAttributes set to &quot;shutdown=true&quot;&lt;br/&gt;
shutdownDatabase = &quot;shutdown&quot;&lt;br/&gt;
and&lt;br/&gt;
createDatabase  = &quot;create&quot;&lt;/p&gt;

&lt;p&gt;If I clear connectionAttributes, and shutdown then the database will create properly and the test will get further but ultimately fails with an ArrayIndexOutOfBounds exception that I haven&apos;t investigated.  Since setting all three of these is not supported and it works with createDatabase only set, I would like to close this issue as invalid.  Is that ok?&lt;/p&gt;

</comment>
                            <comment id="12534649" author="kmarsden" created="Sun, 14 Oct 2007 18:23:24 +0100"  >&lt;p&gt;I modified the test to clear the bean properties before each case and also changed the getInterfaces() calls and comparison to use instanceof to avoid ArrayIndexOutOfBounds exception.&lt;/p&gt;
</comment>
                            <comment id="12534984" author="myrna" created="Mon, 15 Oct 2007 22:34:02 +0100"  >&lt;p&gt;The modified test passes for me...I agree, this can be closed as invalid. &lt;br/&gt;
The new test can be added, I think...Just not to be run with j2ME/JSR169 (XA datasource not supported).&lt;/p&gt;</comment>
                            <comment id="12534986" author="kmarsden" created="Mon, 15 Oct 2007 22:39:12 +0100"  >&lt;p&gt;Closing this issue as invalid, committed test contributed by Myrna with revision 584930.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12362149">DERBY-2296</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12355941" name="DERBY-2576_tst.diff" size="22171" author="myrna" created="Fri, 20 Apr 2007 18:28:48 +0100"/>
                            <attachment id="12367717" name="DERBY-2576_tst_mod_diff.txt" size="22004" author="kmarsden" created="Sun, 14 Oct 2007 18:23:23 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Apr 2007 18:45:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy10xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>