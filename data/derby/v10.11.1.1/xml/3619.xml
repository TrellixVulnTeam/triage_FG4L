<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:37:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3619/DERBY-3619.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3619] Implement more load types for org.apache.derbyTesting.perf.clients.Runner</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3619</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I&apos;m planning to add some more load types to org.apache.derbyTesting.perf.clients.Runner so that we can run tests whose load is roughly equivalent to the tests run in Olav&apos;s nightly performance regression tests - &lt;a href=&quot;http://home.online.no/~olmsan/derby/perf/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://home.online.no/~olmsan/derby/perf/&lt;/a&gt;. Having such tests available would make it easier to investigate performance regressions reported by those test runs. Currently, we have clients under o.a.dt.perf.clients that generate load that is similar to the single-record select and single-record update operations with primary key and the primary key join operations (in fact, the nightly regression tests have used the tests in derbyTesting.jar for these types of load for about a month now).&lt;/p&gt;

&lt;p&gt;For the following types of load, we don&apos;t have test clients in derbyTesting.jar:&lt;/p&gt;

&lt;p&gt;  1) tests for insert performance&lt;br/&gt;
  2) tests for delete performance&lt;br/&gt;
  3) single-record select + single-record update on secondary index&lt;br/&gt;
  4) single-record select + single-record update on non-indexed column&lt;br/&gt;
  5) TPC-B like transactions (should probably be called something else, but I think it&apos;s useful to have a test that uses the same schema and queries as described in the TPC-B spec)&lt;/p&gt;

&lt;p&gt;(3) and (4) are just variants over the existing single-record tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12393986">DERBY-3619</key>
            <summary>Implement more load types for org.apache.derbyTesting.perf.clients.Runner</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Apr 2008 14:22:46 +0100</created>
                <updated>Thu, 13 Jan 2011 17:09:41 +0000</updated>
                            <resolved>Thu, 12 Mar 2009 10:41:52 +0000</resolved>
                                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12589128" author="kmarsden" created="Tue, 15 Apr 2008 16:42:08 +0100"  >&lt;p&gt;It would be good to have a performance sanity check for lobs. We have been regressing. See:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3312&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DERBY-3312&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12589558" author="knutanders" created="Wed, 16 Apr 2008 14:49:36 +0100"  >&lt;p&gt;The single-record tests that are currently checked in fetch or update strings with 100 characters. We could easily add an option to replace the strings with Clobs or Blobs. I&apos;ll try to do that and also see if I can squeeze in an extra test in the nightly runs.&lt;/p&gt;</comment>
                            <comment id="12590453" author="knutanders" created="Fri, 18 Apr 2008 14:43:11 +0100"  >&lt;p&gt;The attached patch makes it possible to run the single-record select tests with a blob or clob column instead of a varchar column. &quot;-load sr_select&quot; uses VARCHAR(100), &quot;-load sr_select_blob&quot; uses BLOB(100) and &quot;-load sr_select_clob&quot; uses CLOB(100).&lt;/p&gt;</comment>
                            <comment id="12590894" author="knutanders" created="Mon, 21 Apr 2008 12:35:34 +0100"  >&lt;p&gt;Committed lob.diff with revision 650112.&lt;/p&gt;</comment>
                            <comment id="12591636" author="knutanders" created="Wed, 23 Apr 2008 14:07:52 +0100"  >&lt;p&gt;Now the CLOB test is part of the nightly regression suite and the results are published at &lt;a href=&quot;http://home.online.no/~olmsan/derby/perf/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://home.online.no/~olmsan/derby/perf/&lt;/a&gt;. The test doesn&apos;t show the above mentioned regression (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3312&quot; title=&quot;Local Network Server Performance degradation with 10.2 or later&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3312&quot;&gt;&lt;del&gt;DERBY-3312&lt;/del&gt;&lt;/a&gt;), probably because the nightly regression tests run the clients on a different machine than the server. In fact, the tests show a ~50X speedup for the client/server test from 10.2.2.0 to the current trunk when running a single-threaded test.&lt;/p&gt;</comment>
                            <comment id="12598304" author="knutanders" created="Tue, 20 May 2008 15:10:35 +0100"  >&lt;p&gt;The attached patch (no-pk.diff) adds some more variants of the sr_select and sr_update load types:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sr_update can now operate on a CLOB or a BLOB column instead of a VARCHAR column, just like sr_select&lt;/li&gt;
	&lt;li&gt;sr_select and sr_update can now be told to pick out the row by a non-indexed integer column or a column with a non-unique index instead of the primary key column&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I updated the help text printed by perf.clients.Runner to explain how to modify the load. If you&apos;re running sr_select or sr_update and add &quot;-load_opts blob,nonIndexed&quot; to the command line, the load is changed so that it retrieves/updates blobs instead of varchars and selects rows by the non-indexed column instead of the primary key column.&lt;/p&gt;</comment>
                            <comment id="12598574" author="knutanders" created="Wed, 21 May 2008 08:21:15 +0100"  >&lt;p&gt;Committed revision 658572.&lt;/p&gt;</comment>
                            <comment id="12604923" author="knutanders" created="Fri, 13 Jun 2008 17:30:28 +0100"  >&lt;p&gt;Here&apos;s the first increment on a test that can replace the TPC-B like test. This patch (create-accounts.diff) only adds code that creates and populates tables that can be used in the test. Will write test clients that perform operations on the tables later. I&apos;ve tried to make the schema and the contents of the tables follow the TPC-B specification, but it would be great if someone else could take a look and verify that it is implemented correctly.&lt;/p&gt;

&lt;p&gt;The code is located in the class org.apache.derbyTesting.perf.clients.BankAccountFiller, which I committed to the repository with revision 667586.&lt;/p&gt;</comment>
                            <comment id="12607666" author="knutanders" created="Tue, 24 Jun 2008 17:04:47 +0100"  >&lt;p&gt;The attached patch (bank-clients.diff) implements the clients that perform bank transactions. I haven&apos;t wired them into the Runner class yet, so they can&apos;t be run from command line, but I have tested them using the API in the o.a.derbyTesting.perf.clients package. I&apos;ll wire them into Runner in a follow-up. I have tried to make the transaction profile follow the TPC-B spec as closely as possible. Please let me know if you spot something that doesn&apos;t match the spec.&lt;/p&gt;</comment>
                            <comment id="12607889" author="knutanders" created="Wed, 25 Jun 2008 09:32:14 +0100"  >&lt;p&gt;Committed revision 671462&lt;/p&gt;</comment>
                            <comment id="12608389" author="knutanders" created="Thu, 26 Jun 2008 12:26:52 +0100"  >&lt;p&gt;The attached patch wires the bank transaction test into the Runner class. Committed revision 671861.&lt;/p&gt;</comment>
                            <comment id="12608763" author="kristwaa" created="Fri, 27 Jun 2008 14:07:59 +0100"  >&lt;p&gt;For what it&apos;s worth, I have tested the bank transaction client by using it as a benchmark to test the JDBC client side statement cache.&lt;br/&gt;
No problems discovered.&lt;/p&gt;</comment>
                            <comment id="12681251" author="knutanders" created="Thu, 12 Mar 2009 10:41:52 +0000"  >&lt;p&gt;I&apos;m not planning to add more test clients for now, so I&apos;m closing this issue.&lt;/p&gt;

&lt;p&gt;Most of Olav&apos;s nightly performance regression tests (&lt;a href=&quot;http://home.online.no/~olmsan/derby/perf/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://home.online.no/~olmsan/derby/perf/&lt;/a&gt;) now use org.apache.derbyTesting.perf.clients.Runner. The only exceptions are the insert and delete tests, as they don&apos;t really fit into the model used by Runner. For instance, the delete tests quickly run out of rows to delete and must stop, whereas Runner expects the test to go on for a certain amount of time. Similar issues with insert when the table is full.&lt;/p&gt;

&lt;p&gt;(It doesn&apos;t look like the graphs on Olav&apos;s site have been updated since January, but I know the tests are still running each night. Will look into that.)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384595" name="bank-clients.diff" size="14982" author="knutanders" created="Tue, 24 Jun 2008 17:04:47 +0100"/>
                            <attachment id="12383976" name="create-accounts.diff" size="10690" author="knutanders" created="Fri, 13 Jun 2008 17:30:28 +0100"/>
                            <attachment id="12380499" name="lob.diff" size="12688" author="knutanders" created="Fri, 18 Apr 2008 14:43:11 +0100"/>
                            <attachment id="12382381" name="no-pk.diff" size="24545" author="knutanders" created="Tue, 20 May 2008 15:10:35 +0100"/>
                            <attachment id="12384757" name="runner.diff" size="7188" author="knutanders" created="Thu, 26 Jun 2008 12:26:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Apr 2008 15:42:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>