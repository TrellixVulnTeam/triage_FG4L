<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:25:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1032/DERBY-1032.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1032] Create new scripts which follow common practice at Apache</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1032</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Scripts for Derby should be written to follow common practice at Apache. This means locating them in a bin directory, and self configuring from the minimum amount of information necessary: installation location and in our case, the location of Java, from the variables DERBY_HOME and JAVA_HOME respectively. If these variables are not set, we should report this to the user. Good examples are available in Ant, Forrest, and Maven, and much of the same setup code can be reused from those projects.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12329359">DERBY-1032</key>
            <summary>Create new scripts which follow common practice at Apache</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fuzzylogic">Andrew McIntyre</assignee>
                                    <reporter username="fuzzylogic">Andrew McIntyre</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Feb 2006 06:37:40 +0000</created>
                <updated>Thu, 23 Aug 2007 20:35:41 +0100</updated>
                            <resolved>Thu, 17 Aug 2006 06:50:05 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Demos/Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12416463" author="fuzzylogic" created="Fri, 16 Jun 2006 15:21:22 +0100"  >&lt;p&gt;For this change, I propose the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;create new scripts which replicate the functionality provided by the scripts in the frameworks directories with new scripts which all reside in a single new directory in the -bin distribution: /bin&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;use the environment variable DERBY_HOME to indicate the location of the Derby installation instead of DERBY_INSTALL. A check to verify that the value is valid, for example verifying that DERBY_HOME/lib/derby.jar exists, might be used. However there are some situation where a simple check may not be desired, for example, if NetworkServerControl is being used in an environment without derby.jar. I need to think about this check a little further.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;use the JAVA_HOME variable to determine the location of the Java installation, instead of relying on the java executable being in the path, and provide appropriate warnings if the variable is not set. If JAVA_HOME is not set or the java executable is not on the path, fail with an error.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;for maintainability, refactor setup and environment validation to a shared file used by all scripts, although there will be two of these files: one for the set of batch scripts and one for the set of shell scripts.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;remove the extension for the Unix shell scripts so that the utilities can be executed by their name. e.g. on a Unix system, instead of the current &apos;ij.ksh&apos;, only &apos;ij&apos; would need to be typed to execute ij if the PATH contains $DERBY_HOME/bin.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;provide a DERBY_OPTS variable that would allow overriding JVM options and setting Derby JVM properties in the use of the scripts, similar to the ANT_OPTS environment variable. (See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-345&quot; title=&quot;Need to add a property to startNetworkServer.* to specify be able to set the derby.system.home property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-345&quot;&gt;&lt;del&gt;DERBY-345&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The contents of the bin directory would include:&lt;/p&gt;

&lt;p&gt;dblook(.bat)&lt;br/&gt;
derby_common(.sh|.bat)&lt;br/&gt;
ij(.bat)&lt;br/&gt;
NetworkServerControl(.bat)&lt;br/&gt;
setEmbeddedCP(.bat)&lt;br/&gt;
setNetworkClientCP(.bat)&lt;br/&gt;
setNetworkServerCP(.bat)&lt;br/&gt;
startNetworkServer(.bat)&lt;br/&gt;
stopNetworkServer(.bat)&lt;br/&gt;
sysinfo(.bat)&lt;/p&gt;

&lt;p&gt;The (.bat) above indicates that for each Unix shell script without an extension, there will be a corresponding Windows batch file. The script which shares the common setup and environment validation logic, derby_common, will have the .sh extension on Unix to prevent accidental execution in Unix shell environments, even though such execution would be harmless.&lt;/p&gt;

&lt;p&gt;The portability goal for the shell scripts is that they be able to run in any fairly recent shell environment: bash, tcsh, ksh, and zsh on Solaris, Mac OS X, AIX, Linux, and Cygwin and MKS on Windows. Since batch files run only on Windows/DOS, it is only necessary that they meet the requirements listed above.&lt;/p&gt;

&lt;p&gt;Note that my plan is not to remove the scripts in the frameworks directory at this time, since there may be downstream projects that currently use the scripts. However, the scripts in the frameworks directory should be clearly marked as deprecated and that in the future downstream projects should use the scripts in the bin directory instead. It should also be suggested that the utilities can be invoked directly from a command line with &apos;java -jar&apos; via the new derbyrun.jar.&lt;/p&gt;

&lt;p&gt;Please let me know if you see any problems with this proposal. Otherwise, I will post a patch shortly that contains the new scripts for the top-level bin directory.&lt;/p&gt;</comment>
                            <comment id="12418527" author="fuzzylogic" created="Fri, 30 Jun 2006 05:13:33 +0100"  >&lt;p&gt;Attaching draft versions of new scripts for the bin directory. Batch files based on the current batch files are next.&lt;/p&gt;</comment>
                            <comment id="12425902" author="fuzzylogic" created="Sat, 5 Aug 2006 00:46:01 +0100"  >&lt;p&gt;Attached is a patch with new scripts as described in the previous large comment for this patch, to go into the bin directory. I&apos;m putting this here for discussion. If these scripts are seen as a valuable replacement, then they can be committed. A followup patch to add these to the -bin distribution will be needed. Also, there should be some discussion around the mechanics of deprecating the frameworks scripts if these scripts are accepted.&lt;/p&gt;</comment>
                            <comment id="12425905" author="davidvc" created="Sat, 5 Aug 2006 01:00:32 +0100"  >&lt;p&gt;I am sensitive to this right now for some odd reason &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  Shouldn&apos;t script files have the Apache license header?&lt;/p&gt;</comment>
                            <comment id="12425906" author="davidvc" created="Sat, 5 Aug 2006 01:02:14 +0100"  >&lt;p&gt;In bin/derby_common.sh:&lt;/p&gt;

&lt;p&gt;+#   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/p&gt;

&lt;p&gt;+#   WITHOUT WARRDERBYIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/p&gt;

&lt;p&gt;What&apos;s a WARRDERBY?&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12425907" author="davidvc" created="Sat, 5 Aug 2006 01:08:25 +0100"  >&lt;p&gt;At first glance these look good.  I don&apos;t have the time to actually test them...  Thanks for your work on this!&lt;/p&gt;</comment>
                            <comment id="12425927" author="fuzzylogic" created="Sat, 5 Aug 2006 04:16:42 +0100"  >&lt;p&gt;Attaching updated patch, which includes the new license headers.&lt;/p&gt;</comment>
                            <comment id="12427135" author="fuzzylogic" created="Thu, 10 Aug 2006 09:25:39 +0100"  >&lt;p&gt;I would love to hear some feedback on the latest patch for this. Do we want to deprecate the frameworks scripts and go with these new scripts in a top-level bin directory for the -bin distribution (and probably also the snapshots)?&lt;/p&gt;

&lt;p&gt;I&apos;m tempted to commit the patch as-is, simply adding the new scripts in the bin directory so that others can review/collaborate on the new scripts whether we decide to go with these for 10.2 or not. I admit, I haven&apos;t had the time to test these as extensively as I would have liked in different environments. But, a few months ago there was consensus that what we have now in the frameworks directory should eventually go away and be replaced by new scripts which follows the conventions set by other Apache projects and which are more portable to different shell environments.&lt;/p&gt;

&lt;p&gt;A complete fix would add these new scripts to the -bin distribution and snapshots, but due to the lack of feedback, I&apos;m not sure that&apos;s the right way to go. Please comment if you feel these are worthwhile and should replace what we have in the frameworks directory.&lt;/p&gt;

&lt;p&gt;If we do decide to include these scripts, then we also need to have a discussion about how we plan to mark the framework scripts as deprecated (release note? readme in the frameworks directory? something else? all of the above?). Considering where we are with the schedule currently proposed by our release manager for 10.2, there&apos;s not a lot of time for that discussion, so if you have an opinion, please speak up!&lt;/p&gt;</comment>
                            <comment id="12427412" author="fuzzylogic" created="Fri, 11 Aug 2006 06:03:03 +0100"  >&lt;p&gt;Linking &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-345&quot; title=&quot;Need to add a property to startNetworkServer.* to specify be able to set the derby.system.home property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-345&quot;&gt;&lt;del&gt;DERBY-345&lt;/del&gt;&lt;/a&gt; to this issue. These scripts allow setting a DERBY_OPTS variable which precedes the classname invoked, allowing the user to pass in settings such as -Dderby.system.home=&lt;/p&gt;
{dir}
&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="12427419" author="fuzzylogic" created="Fri, 11 Aug 2006 06:12:30 +0100"  >&lt;p&gt;Committed derby-1032-v2.diff to trunk with revision 430668 (unix scripts) and 430677 (windows scripts). Two commits were necessary so that the files have the proper native line endings. To resolve this issue completely, we would need to include the new scripts in the -bin distribution and the snapshots and mark the frameworks scripts as deprecated in all the appropriate locations. The frameworks scripts could probably be removed from the snapshots immediately.&lt;/p&gt;</comment>
                            <comment id="12428166" author="fuzzylogic" created="Tue, 15 Aug 2006 17:53:56 +0100"  >&lt;p&gt;Attaching a patch, derby-1032-addtodist.diff, which adds these scripts to the -bin distribution. I think if this patch is applied, then I think this issue can be closed and another JIRA filed for deprecating the frameworks scripts. &lt;/p&gt;</comment>
                            <comment id="12428167" author="fuzzylogic" created="Tue, 15 Aug 2006 17:57:53 +0100"  >&lt;p&gt;Attaching a second version of this patch that also removes the frameworks scripts from the snapshots.&lt;/p&gt;</comment>
                            <comment id="12428264" author="bryanpendleton" created="Wed, 16 Aug 2006 00:35:27 +0100"  >&lt;p&gt;derby-1032-addtodist2.diff looks fine to me.&lt;/p&gt;</comment>
                            <comment id="12428580" author="fuzzylogic" created="Thu, 17 Aug 2006 06:50:05 +0100"  >&lt;p&gt;Committed to trunk with revision 432159. Leaving closed as fix in 10.2, as I am assuming these changes will make it in to the 10.2 branch with an upcoming merge of recent changes.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12311247">DERBY-345</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12366108">DERBY-2501</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12376727">DERBY-3026</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12338903" name="derby-1032-addtodist.diff" size="1110" author="fuzzylogic" created="Tue, 15 Aug 2006 17:53:56 +0100"/>
                            <attachment id="12338904" name="derby-1032-addtodist2.diff" size="4331" author="fuzzylogic" created="Tue, 15 Aug 2006 17:57:53 +0100"/>
                            <attachment id="12336176" name="derby-1032-bin-sh.tgz" size="2517" author="fuzzylogic" created="Fri, 30 Jun 2006 05:13:33 +0100"/>
                            <attachment id="12338199" name="derby-1032-v1.diff" size="21487" author="fuzzylogic" created="Sat, 5 Aug 2006 00:46:01 +0100"/>
                            <attachment id="12338202" name="derby-1032-v2.diff" size="35917" author="fuzzylogic" created="Sat, 5 Aug 2006 04:16:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 Aug 2006 00:00:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29823</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy116v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39843</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10053"><![CDATA[Low]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>