<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-746/DERBY-746.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-746] NullPointerException when &apos;encryptionKey&apos; length is an odd number, or it contains invalid chars</title>
                <link>https://issues.apache.org/jira/browse/DERBY-746</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When booting/creating an encrypted database, a NullPointerException is thrown if the length of the connection string attribute &apos;encryptionKey&apos; is an odd number, or the encryption key contains invalid characters for hexadecimal numbers (char not in the set &lt;span class=&quot;error&quot;&gt;&amp;#91;0-9a-fA-F&amp;#93;&lt;/span&gt;).&lt;/p&gt;

&lt;p&gt;The reason for the exception being thrown, is that the method &apos;iapi.util.StringUtil.fromHexString(String, int, int)&apos; returns null for the cases described above. The code calling the method in &apos;JCECipherFactory.boot(boolean, Properties)&apos; does not check that the return value is not null.&lt;/p&gt;

&lt;p&gt;A related trivial issue is that &apos;fromHexString&apos; does not allow the caller to see the distinction between a string with invalid length and a string containing invalid characters (both cases return null).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;To reproduce&amp;#93;&lt;/span&gt;&lt;br/&gt;
(connection string copied from test &apos;store/encryptionKey.sql&apos; and then modified)&lt;br/&gt;
Supply the following connection string, for instance in ij:&lt;br/&gt;
connect &apos;jdbc:derby:encdbcbc_key;create=true;dataEncryption=true;encryptionAlgorithm=DES/CBC/NoPadding;encryptionKey=6162636465666768696162636465656&apos;;&lt;br/&gt;
(deleted the last digit in the encryption key)&lt;br/&gt;
&apos;jdbc:derby:encdbcbc_key;create=true;dataEncryption=true;encryptionAlgorithm=DES/CBC/NoPadding;encryptionKey=6162636465666768696162636465656X&apos;;&lt;br/&gt;
(replaced last digit with an X)&lt;/p&gt;</description>
                <environment>All environments.</environment>
        <key id="12326426">DERBY-746</key>
            <summary>NullPointerException when &apos;encryptionKey&apos; length is an odd number, or it contains invalid chars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2005 22:54:55 +0000</created>
                <updated>Tue, 30 Jun 2009 01:14:43 +0100</updated>
                            <resolved>Fri, 15 Sep 2006 14:06:47 +0100</resolved>
                                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12361631" author="kristwaa" created="Wed, 4 Jan 2006 00:05:21 +0000"  >&lt;p&gt;Stat and diff for the patch (against revision 365637).&lt;br/&gt;
No new files added.&lt;/p&gt;

&lt;p&gt;Derbyall ran without errors 32 bit (chroot) Gentoo Linux (6 suites skipped - no db2jcc).&lt;br/&gt;
The test will fail on Solaris 10 with J2SE 5.0 due to another problem, see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-788&quot; title=&quot;&amp;#39;store/encryptionKey.sql&amp;#39; fails on Solaris 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-788&quot;&gt;&lt;del&gt;DERBY-788&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Patch description:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;JCECipherFactory.boot() now checks the output from the fromHexString-method and throws an exception if it is invalid, instead of failing with NPE.&lt;/li&gt;
	&lt;li&gt;Added 2 new SQLStates and messages (only English)&lt;/li&gt;
	&lt;li&gt;Added 2 new test cases (invalid char in encryption key and encryption key of with odd length).&lt;/li&gt;
	&lt;li&gt;Updated master file.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12361778" author="kristwaa" created="Thu, 5 Jan 2006 03:47:41 +0000"  >&lt;p&gt;Original patch (derby-746.diff) applied to trunk revision 365785.&lt;br/&gt;
Sunhita Kambhampati pointed out a spelling error in the patch (thanks).&lt;br/&gt;
An &lt;b&gt;additional&lt;/b&gt; patch fixing the error in the message file and the test master file is attached as derby-746a.diff.&lt;br/&gt;
I reran &apos;store/encryptionKey.sql&apos; - no errors (Gentoo Linux, 64 bit, Sun JDK 1.4.2_10 Blackdown JDK 1.4.2-02 &amp;amp; IBM J9SE 2.2 (1.4.2)).&lt;/p&gt;</comment>
                            <comment id="12362435" author="kristwaa" created="Wed, 11 Jan 2006 22:00:11 +0000"  >&lt;p&gt;Spelling error fixed in revision 367712, thanks to Daniel John Debrunner.&lt;/p&gt;

&lt;p&gt;Verified changes by inspection, closing the issue.&lt;/p&gt;</comment>
                            <comment id="12376929" author="kristwaa" created="Fri, 28 Apr 2006 21:28:43 +0100"  >&lt;p&gt;Reopening to port to 10.1.3 maintenance release.&lt;/p&gt;

&lt;p&gt;Merge commands, executed from the 10.1 branch directory:&lt;br/&gt;
svn merge -r 365784:365785 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk/&lt;/a&gt;&lt;br/&gt;
svn merge -r 367711:367712 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I ran derbyall with JDK 1.5 (Solaris 10) and got 4 errors, of which I can account for 2 of them:&lt;br/&gt;
derbyall/derbynetclientmats/derbynetmats.fail:derbynet/dataSourcePermissions_net.java&lt;br/&gt;
derbyall/encryptionAll/encryptionAll.fail:store/aes.sql (due to JDK 1.5, ok with JDK 1.4)&lt;br/&gt;
derbyall/encryptionAll/encryptionAll.fail:store/encryptionKey.sql (ok, see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-788&quot; title=&quot;&amp;#39;store/encryptionKey.sql&amp;#39; fails on Solaris 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-788&quot;&gt;&lt;del&gt;DERBY-788&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
derbyall/derbyall.fail:unit/T_Diagnosticable.unit&lt;/p&gt;

&lt;p&gt;Don&apos;t think the other failures are related to the port, I see other people have gotten them as well.&lt;/p&gt;

&lt;p&gt;Should &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-788&quot; title=&quot;&amp;#39;store/encryptionKey.sql&amp;#39; fails on Solaris 10&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-788&quot;&gt;&lt;del&gt;DERBY-788&lt;/del&gt;&lt;/a&gt; BE PORTED as well? It is only a test fix.&lt;/p&gt;</comment>
                            <comment id="12376931" author="kristwaa" created="Fri, 28 Apr 2006 21:31:47 +0100"  >&lt;p&gt;Set fix version to indicate porting.&lt;/p&gt;</comment>
                            <comment id="12376975" author="fuzzylogic" created="Sat, 29 Apr 2006 02:08:16 +0100"  >&lt;p&gt;Committed to 10.1 with revision 397972.&lt;/p&gt;</comment>
                            <comment id="12434961" author="rhillegas" created="Fri, 15 Sep 2006 14:06:34 +0100"  >&lt;p&gt;Toggling off &quot;release note needed&quot; because this patch went into 10.1.3 and was described there.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12321655" name="derby-746.diff" size="6074" author="kristwaa" created="Wed, 4 Jan 2006 00:05:21 +0000"/>
                            <attachment id="12321656" name="derby-746.stat" size="375" author="kristwaa" created="Wed, 4 Jan 2006 00:05:21 +0000"/>
                            <attachment id="12321693" name="derby-746a.diff" size="2151" author="kristwaa" created="Thu, 5 Jan 2006 03:47:41 +0000"/>
                            <attachment id="12321692" name="derby-746a.stat" size="169" author="kristwaa" created="Thu, 5 Jan 2006 03:47:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Apr 2006 01:08:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0v5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>