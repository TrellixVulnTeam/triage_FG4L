<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:21:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3083/DERBY-3083.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3083] Network server demands a file called &quot;derbynet.jar&quot; in classpath</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3083</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The network server will not start if the derbynet jar is added under a different name than &quot;derbynet.jar&quot; to the classpath. This makes it impossible to use it in maven projects where the jar is renamed to &quot;derbynet-10.3.1.4.jar&quot;.&lt;/p&gt;

&lt;p&gt;This did work with 10.2.2.0&lt;/p&gt;</description>
                <environment></environment>
        <key id="12378633">DERBY-3083</key>
            <summary>Network server demands a file called &quot;derbynet.jar&quot; in classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="digulla">Aaron Digulla</reporter>
                        <labels>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Wed, 19 Sep 2007 10:03:05 +0100</created>
                <updated>Wed, 3 Jul 2013 16:26:42 +0100</updated>
                                            <version>10.3.1.4</version>
                                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12528951" author="kmarsden" created="Thu, 20 Sep 2007 00:16:01 +0100"  >&lt;p&gt;I have not confirmed but think this may be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2196&quot; title=&quot;Run standalone network server with security manager by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2196&quot;&gt;&lt;del&gt;DERBY-2196&lt;/del&gt;&lt;/a&gt; to install a security manager by default. I notice it does not display when I start with -noSecurityManager. A possible workaround may be to install your own security manager instead of using the default one.&lt;/p&gt;
</comment>
                            <comment id="12529028" author="digulla" created="Thu, 20 Sep 2007 09:59:08 +0100"  >&lt;p&gt;Thanks for the workaround. -noSecurityManager works for me, too.&lt;/p&gt;

&lt;p&gt;In that case, the security manager should be fixed not to rely on a fix jar name &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; What happens when I patch the JAR or feed Java a completely different JAR as &quot;derbynet.jar&quot;?&lt;/p&gt;</comment>
                            <comment id="12529492" author="kmarsden" created="Fri, 21 Sep 2007 17:53:24 +0100"  >&lt;p&gt;Aaron said:&lt;br/&gt;
&amp;gt;In that case, the security manager should be fixed not to rely on a fix jar name &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; What happens when I &amp;gt;patch the JAR or feed Java a completely different JAR as &quot;derbynet.jar&quot;?&lt;/p&gt;

&lt;p&gt;I agree. perhaps Rick has some ideas on how to achieve this since he implemented the functionality  For the sake of backward compatibility I think at least the start should not fail and perhaps just print a warning to derby.log that the security manager was not installed.&lt;/p&gt;</comment>
                            <comment id="12533552" author="djd" created="Wed, 10 Oct 2007 00:59:21 +0100"  >&lt;p&gt;The derby jars contain metadata (including &lt;span class=&quot;error&quot;&gt;&amp;#91;but not limited to&amp;#93;&lt;/span&gt; a security policy) that assumes the names of the jars and that they reside in the same folder.&lt;/p&gt;

&lt;p&gt;Does any documentation indicates that it&apos;s ok to change the jar names and have everything continue to work as before?&lt;/p&gt;


</comment>
                            <comment id="12533642" author="digulla" created="Wed, 10 Oct 2007 08:48:54 +0100"  >&lt;p&gt;Does any documentation indicate that it&apos;s &lt;b&gt;not&lt;/b&gt; ok to change the JAR name? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; This is Java after all and I&apos;m used that I can use what I can put on the classpath. Moreover, when you use Maven, then the JAR names must include the version number. So this change makes it impossible to use Derby with Maven.&lt;/p&gt;

&lt;p&gt;I&apos;m using Derby extensively to replace a real DB2 for my test cases and I couldn&apos;t care less about a security policy. It&apos;s nice to have one shipped with the product but I fail to see the advantage to make it the &lt;b&gt;default&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="12533728" author="rhillegas" created="Wed, 10 Oct 2007 13:47:48 +0100"  >&lt;p&gt;I imagine that we could parameterize the names of the jars in the default policy and then teach server startup to make some smart guesses about which jars are germane, based on whether they contain certain distinguished classes.&lt;/p&gt;

&lt;p&gt;Technically, there&apos;s nothing to prevent users from breaking open all of Derby&apos;s jar files and recombining them into a single giant jar. I think that if a user does that, then the user is responsible for adjusting the security policy.&lt;/p&gt;

&lt;p&gt;If Maven is going to rename jar files, then I think Maven needs to regenerate the security policy. This is just how Java security works: permissions are granted to named code domains and those domains are identified by jar file names.&lt;/p&gt;

&lt;p&gt;Aaron is right that we haven&apos;t stated explicitly what kinds of tampering void your warranty. Perhaps we should add a big warning in our user guides.&lt;/p&gt;</comment>
                            <comment id="12533750" author="rhillegas" created="Wed, 10 Oct 2007 15:48:33 +0100"  >&lt;p&gt;On derby-dev, Bryan suggests another solution:&lt;/p&gt;

&lt;p&gt;Alternatively, perhaps we could have a glance at the classpath&lt;br/&gt;
during startup, perhaps by sharing the code that sysinfo uses,&lt;br/&gt;
and only install the default policy if the user appears to&lt;br/&gt;
be using the default set of jars.&lt;/p&gt;

&lt;p&gt;That is, if we don&apos;t see derby.jar, derbynet.jar on the&lt;br/&gt;
classpath when starting up Network Server, then we assume that&lt;br/&gt;
the user has taken control of the &lt;b&gt;entire&lt;/b&gt; configuration process,&lt;br/&gt;
including the configuration of the security policy, and so we&lt;br/&gt;
don&apos;t attempt to install a default security policy in that case. &lt;/p&gt;</comment>
                            <comment id="12533799" author="djd" created="Wed, 10 Oct 2007 17:59:13 +0100"  >&lt;p&gt;Aaron&amp;gt; Does any documentation indicate that it&apos;s &lt;b&gt;not&lt;/b&gt; ok to change the JAR name? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Well the documentation describes what the code does, if someone changes something you can&apos;t necessarily assume that the code will work the same way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s much like if someone decided to put all the locale messages into a single locale jar and removed the others, Derby using the documented code path will then not pick up any localized messages because the change is incomplete.&lt;/p&gt;
</comment>
                            <comment id="12540568" author="rhillegas" created="Tue, 6 Nov 2007 21:01:16 +0000"  >&lt;p&gt;I think I like Bryan&apos;s approach best. If we don&apos;t see derby.jar and derbynet.jar on the classpath, then we won&apos;t install a security manager. Unless someone objects strongly, I will code this fix. Thanks.&lt;/p&gt;</comment>
                            <comment id="12540588" author="djd" created="Tue, 6 Nov 2007 21:49:28 +0000"  >&lt;p&gt;Rather than checking the classpath (which is non-standard) and needs to be more detailed&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; than derby.jar and derbynet.jar on the classpath, why not  simply see the name of the jar the network server code is coming from. The code must already get the url to set up the properties for the server policy.&lt;/p&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Classpath could just be derbynet.jar, could be started using -jar command with derbyrun.jar or derbynet.jar, ...&lt;/p&gt;</comment>
                            <comment id="12540712" author="digulla" created="Wed, 7 Nov 2007 10:10:01 +0000"  >&lt;p&gt;Rick: This again breaks the idea of &quot;least surprise&quot;. The network server should not try to install a security manager at all until told so. The first breaking of that rule is what caused the problems in the first place.&lt;/p&gt;

&lt;p&gt;I suggest that you remove the code which tries to install the SM by default and add new code which is enabled by an option (property or command line). That option should either be &quot;yes/no&quot; if you can figure out the name of the JAR or it should specify the name of the JAR which contains the preferred SM. If the option is given and no SM can be installed, an exception should be thrown, aborting the program.&lt;/p&gt;

&lt;p&gt;This would give control to the user instead of involving further black magic which will only lead to a long series of bugs and patches, all because of breaking &quot;least surprise&quot; again and again.&lt;/p&gt;</comment>
                            <comment id="12540807" author="djd" created="Wed, 7 Nov 2007 17:20:28 +0000"  >&lt;p&gt;Note the purpose of the default security manager is to avoid the surprise of booting a network server providing complete access to your machine by all. Thus the least surprise should be a secure system.&lt;/p&gt;</comment>
                            <comment id="12540856" author="digulla" created="Wed, 7 Nov 2007 19:34:54 +0000"  >&lt;p&gt;Well, I&apos;ve used tons of Java software (probably everything kind except for applets) and Derby was the first one to have a Security Manager, so in my case running into one violated the rule &quot;least surprises&quot;. OTOH, I know perfectly well that a misconfigured network server compromises the security of my computer (they all do, that&apos;s common knowledge even if most people actively ignore this simple fact). Therefore, a network server which is secure also violates the rule.&lt;/p&gt;

&lt;p&gt;So it is an attempt to make the world better on your part but it certainly breaks the &quot;least surprise&quot; rule unless you can make it work even when I do strange things like renaming the JAR, repackaging everything in an ueberjar and the like. If you really, absolutely need to have your SM, make it fail gracefully (if DerbyNet can&apos;t install it, print a warning and go on) or ask the user to enable it with an option if they need/want it.&lt;/p&gt;

&lt;p&gt;Otherwise, you will annoy 90% of the users of your code:&lt;/p&gt;

&lt;p&gt;10% know more about security than you do and they do it differently; trying to teach them won&apos;t work&lt;br/&gt;
80% don&apos;t know and don&apos;t care and they hate you for making their lives &quot;unnecessary&quot; complex (a.k.a &quot;what do I need that stupid virus scanner for? Open that proxy already! OWN3Z.COM wants to install TakeOver.EXE? OK!&quot;)&lt;br/&gt;
Which leaves 10% who don&apos;t know and care enough to learn how to secure their system&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m in the first 10%, by the way: For my JUnit tests, I just need an option to bind the server to 127.0.0.1 and no SM.&lt;/p&gt;</comment>
                            <comment id="12540871" author="djd" created="Wed, 7 Nov 2007 20:05:49 +0000"  >&lt;p&gt;To be clear the security manager is trying to secure the out of the box configuration, not a misconfigured server.&lt;/p&gt;

&lt;p&gt;Is it typically for a database server in its out of the box configuration to allow any remote user to take over a machine?&lt;/p&gt;</comment>
                            <comment id="12543628" author="rhillegas" created="Mon, 19 Nov 2007 18:10:27 +0000"  >&lt;p&gt;Right now the default policy file grants permissions to the following codebases:&lt;/p&gt;

&lt;p&gt;$&lt;/p&gt;
{derby.install.url}derby.jar&lt;br/&gt;
${derby.install.url}
&lt;p&gt;derbynet.jar&lt;br/&gt;
$&lt;/p&gt;
{derby.install.url}derbytools.jar&lt;br/&gt;
${derby.install.url}
&lt;p&gt;derbyclient.jar&lt;br/&gt;
$&lt;/p&gt;
{derby.install.url}
&lt;p&gt;derbytesting.jar&lt;/p&gt;

&lt;p&gt;At boot time, the server sets the value of the derby.install.url property before installing a SecurityManager. We could refine our codebase declarations to something like this:&lt;/p&gt;

&lt;p&gt;$&lt;/p&gt;
{derby.install.derby.jar.url}&lt;br/&gt;
${derby.install.derbynet.url}&lt;br/&gt;
${derby.install.derbytools.url}&lt;br/&gt;
${derby.install.derbyclient.url}&lt;br/&gt;
${derby.install.derbytesting.url}&lt;br/&gt;
&lt;br/&gt;
Then the server could set the values of these properties using a heuristic like this:&lt;br/&gt;
&lt;br/&gt;
${derby.install.derby.jar.url}
&lt;p&gt;  - the jar where EmbeddedDriver lives&lt;br/&gt;
$&lt;/p&gt;
{derby.install.derbynet.url}
&lt;p&gt; - the jar where NetworkServerControl lives&lt;br/&gt;
$&lt;/p&gt;
{derby.install.derbytools.url}
&lt;p&gt; - the jar where ij lives&lt;br/&gt;
$&lt;/p&gt;
{derby.install.derbyclient.url}
&lt;p&gt; - the jar where ClientDriver lives&lt;br/&gt;
$&lt;/p&gt;
{derby.install.derbytesting.url}
&lt;p&gt; - the jar where BaseTestCase lives&lt;/p&gt;

&lt;p&gt;For extra credit, we could use this strategy to clean up the multiple permission grants needed to handle sysinfo. That is, the policy file could grant those permissions to one code base:&lt;/p&gt;

&lt;p&gt;$&lt;/p&gt;
{derby.install.sysinfo.jar.url}
&lt;p&gt;  - the first jar where sysinfo lives&lt;/p&gt;

&lt;p&gt;Does this sound like an acceptable solution?&lt;/p&gt;
</comment>
                            <comment id="12543631" author="djd" created="Mon, 19 Nov 2007 18:31:20 +0000"  >&lt;p&gt;I hope the default policy for the network server is not granting permissions to derbytools, derbyclient or derbytesting. The original spec had carefully limited permissions intended to support running the network server.&lt;/p&gt;

&lt;p&gt;The use of properties for the jar files names in the policy files increases a security hole, now if any code can intercept the property setting then it allows that code to grant the permissions intended for Derby to any jar on the file system. By limiting the name to derbynet.jar (etc.) that hole is reduced. To support maven maybe the name could be $&lt;/p&gt;
{derby.install.url}
&lt;p&gt;derbynet$&lt;/p&gt;
{version}
&lt;p&gt;.jar&lt;/p&gt;</comment>
                            <comment id="12543645" author="rhillegas" created="Mon, 19 Nov 2007 19:26:22 +0000"  >&lt;p&gt;Thanks for the quick feedback, Dan.&lt;/p&gt;

&lt;p&gt;The server policy file grants permissions to derbytools, derbyclient, and derbyTesting in order to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3086&quot; title=&quot;The server policy needs to grant derbynet.jar more permissions so that sysinfo and drda tracing will work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3086&quot;&gt;&lt;del&gt;DERBY-3086&lt;/del&gt;&lt;/a&gt;. The problem is that we don&apos;t control the order in which jar files are wired into the classpath. Unfortunately, sysinfo lives in all of those jar files and the permissions it needs must be granted to the first of those jar files which appears on the classpath.&lt;/p&gt;

&lt;p&gt;I don&apos;t understand how the property setting could be intercepted. That would involve injecting malicious code into NetworkServerControl.installSecurityManager() just after the properties are forcibly set and just before the SecurityManager is installed. These are properties which are private to Derby and which we don&apos;t allow the user to override. Could you explain more about how the property setting could be intercepted?&lt;/p&gt;

&lt;p&gt;The security hole I see is if the customer repackages the jar files, perhaps folding them into a master jar file which contains application code. In that case the proposed scheme would end up granting all of Derby&apos;s permissions to application code. For the record, the same subversion can occur with the scheme we have today: The customer just needs to put application code into derby.jar.&lt;/p&gt;</comment>
                            <comment id="12543686" author="djd" created="Mon, 19 Nov 2007 20:58:17 +0000"  >&lt;p&gt;&amp;gt; I don&apos;t understand how the property setting could be intercepted. That would involve injecting malicious code into NetworkServerControl.installSecurityManager() &lt;br/&gt;
&amp;gt; just after the properties are forcibly set and just before the SecurityManager is installed.&lt;/p&gt;

&lt;p&gt;Correct.&lt;/p&gt;

&lt;p&gt;&amp;gt; These are properties which are private to Derby and which we don&apos;t allow the user to override.&lt;/p&gt;

&lt;p&gt;How are system properties private to Derby and what stops a user overriding them?&lt;/p&gt;

&lt;p&gt;&amp;gt; Could you explain more about how the property setting could be intercepted?&lt;/p&gt;

&lt;p&gt;There is a window as you describe where other code could manipulate the property values. Currently any code that does manage to execute during that window has a limited range of changes it can make with respect to the default policy file. Today it can get the permissions granted to the derby files to be granted to other files with identical names. Making the complete jar name in the policy file a property expands the scope of malicious activity, now the code could give permissions to any jar.&lt;/p&gt;

&lt;p&gt;As for how, well I think you are looking at the approach of proving such an interception can not happen, I don&apos;t know how to do that.&lt;/p&gt;

&lt;p&gt;I&apos;m looking at the approach of there is a window for such intrusion, so it&apos;s bound to be exploitable by someone (e.g. JMX?), so given it can happen what can be done to minimize or even remove any malicious attacks.&lt;/p&gt;

&lt;p&gt;Trying to prove something can&apos;t happen seems much harder to me than minimizing the effects of when it does happen.&lt;/p&gt;

&lt;p&gt;Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt; would help in this area, ensuring the the security manager installed is the one the network server code configured.&lt;/p&gt;</comment>
                            <comment id="12543706" author="rhillegas" created="Mon, 19 Nov 2007 22:12:34 +0000"  >&lt;p&gt;Thanks for the clarification, Dan. By &quot;private to Derby&quot; I mean that the properties cannot be overridden by any scheme that I&apos;m aware of. For instance, someone could try to override the properties on the boot command line--but these overrides would be ignored because Derby would forcibly set the properties to values it calculated.&lt;/p&gt;

&lt;p&gt;Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt; could reduce the vulnerability. However, I don&apos;t understand how to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt;. The solutions which come to my mind seem to have the same small windows of vulnerability which we&apos;re discussing here. If we could figure out how those windows could in fact be exploited then we might be able to talk about a solution.&lt;/p&gt;

&lt;p&gt;As you note, if there is a way to exploit this window, then it can be used to subvert the value of &quot;derby.install.url&quot; today. The incremental exposure seems very small to me.&lt;/p&gt;</comment>
                            <comment id="12543730" author="djd" created="Mon, 19 Nov 2007 23:20:43 +0000"  >&lt;p&gt;&amp;gt; By &quot;private to Derby&quot; I mean that the properties cannot be overridden by any scheme that I&apos;m aware of. &lt;/p&gt;

&lt;p&gt;But any code that could execute in the window described previously could change those properties, thus they are not private to derby since they are system properties.&lt;/p&gt;

&lt;p&gt;&amp;gt; Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt; could reduce the vulnerability. However, I don&apos;t understand how to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt;. The solutions which come to my mind seem to have the same small windows of vulnerability &lt;/p&gt;

&lt;p&gt;The fix is described in the description to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt;, I don&apos;t see any windows of vulnerability, could you explain what you are thinking?&lt;/p&gt;

&lt;p&gt;&amp;gt; As you note, if there is a way to exploit this window, then it can be used to subvert the value of &quot;derby.install.url&quot; today. The incremental exposure seems very small to me.&lt;/p&gt;

&lt;p&gt;To my thinking increasing a security hole in any way is not a good direction to go in.&lt;/p&gt;</comment>
                            <comment id="12543832" author="digulla" created="Tue, 20 Nov 2007 09:52:37 +0000"  >&lt;p&gt;&amp;gt; To my thinking increasing a security hole in any way is not a good direction to go in.&lt;/p&gt;

&lt;p&gt;That would mean it is okay for users, who have to rename the JARs, to have no security at all.&lt;/p&gt;

&lt;p&gt;Your whole argument goes like this: Someone hacks the VM, intercepts the bytecode executor or the JIT, injects malicious code in the right place (after the system properties from the command line have been overwritten by NetworkServerControl.installSecurityManager() and before they are used to install the security policy) and thus takes over the network manager. A possible scenario, I admit. Anyone here who believes this will ever happen?&lt;/p&gt;

&lt;p&gt;If I gain access to the VM, it would be much more simple to use the debug API to replace the class implementing the SecurityManager or to patch the JARs and restart the service.&lt;/p&gt;

&lt;p&gt;So ... yes, Ricks approach widens the security window but I fail to see it creating a wider attack vector than what we already have. If you have access to the VM, then you can whack this security scheme to death but my understanding of the whole secuity manager in the Derby context is to make sure it is not possible to inject malicious code from the network side. At the time when the SM is installed, Derby doesn&apos;t accept connections, so there is no attack vector at this time.&lt;/p&gt;

&lt;p&gt;After that, the SM is installed and malicious code from outside is confined within the limits of the SM.&lt;/p&gt;

&lt;p&gt;If someone has access to the machine, no SM in the world can prevent them to play with the JARs, the classpath or the VM. That is host security and completely outside the scope of Derby.&lt;/p&gt;</comment>
                            <comment id="12543900" author="rhillegas" created="Tue, 20 Nov 2007 14:19:25 +0000"  >&lt;p&gt;&amp;gt;The fix is described in the description to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt;, I don&apos;t see any windows of vulnerability, could you explain what you are thinking? &lt;/p&gt;

&lt;p&gt;We seem to be talking about an attacker who has the ability to change system properties at any point in Derby&apos;s processing. Here is the scenario which came to my mind:&lt;/p&gt;

&lt;p&gt;1) Derby sets system properties just before installing a security manager.&lt;/p&gt;

&lt;p&gt;2) Blackhat changes the properties.&lt;/p&gt;

&lt;p&gt;3) Derby installs the security manager.&lt;/p&gt;

&lt;p&gt;4) Blackhat prompts a call to the security manager, which faults in the policy file and substitutes in the current values of the system properties.&lt;/p&gt;

&lt;p&gt;5) Blackhat then changes the properties back to the values which Derby set.&lt;/p&gt;

&lt;p&gt;6) Derby then runs the checks described in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt; but sees nothing amiss.&lt;/p&gt;</comment>
                            <comment id="12543930" author="djd" created="Tue, 20 Nov 2007 16:11:53 +0000"  >&lt;p&gt;&amp;gt; We seem to be talking about an attacker who has the ability to change system properties at any point in Derby&apos;s processing.&lt;/p&gt;

&lt;p&gt;To be precise, not at any point, but while a security manager with Derby&apos;s default policy is not installed. Obviously Derby is installing a security manager because none exists, hence any code can set any system property.&lt;/p&gt;

&lt;p&gt;Interesting case, that does require that step 2) changed the policy file to be used by the security manager, otherwise step 5) is not possible.&lt;br/&gt;
I&apos;ll have to investigate if it would be possible for Blackhat to do that without it being detected by Derby&apos;s checks (as-in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2362&quot; title=&quot;Add checks to ensure security manager installed by network server by default is as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2362&quot;&gt;DERBY-2362&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12543999" author="rhillegas" created="Tue, 20 Nov 2007 18:41:27 +0000"  >&lt;p&gt;Attaching derby-3083-01-requireDerbynet-aa.diff. This implements Dan&apos;s modification to Bryan&apos;s solution. Would appreciate feedback.&lt;/p&gt;</comment>
                            <comment id="12544014" author="djd" created="Tue, 20 Nov 2007 19:20:40 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; To my thinking increasing a security hole in any way is not a good direction to go in.&lt;br/&gt;
&amp;gt; That would mean it is okay for users, who have to rename the JARs, to have no security at all. &lt;/p&gt;

&lt;p&gt;Sorry, I don&apos;t follow your logic here.&lt;/p&gt;

&lt;p&gt;&amp;gt; Your whole argument goes like this: Someone hacks the VM, &lt;span class=&quot;error&quot;&gt;&amp;#91;snip ...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;No, my argument is that there is a vulnerability, thus it is subject to be being exploited. I&apos;m making no arguments as to how it could be exploited, an exploitation might require any number of other vulnerabilities in Derby, other software or anything else. Just look at the viruses and worms that exist today, the crackers see a useful vulnerability in one piece of code and then look for ways to exploit it.&lt;/p&gt;

&lt;p&gt;&amp;gt; injects malicious code in the right place (after the system properties from the command line have been overwritten by NetworkServerControl.installSecurityManager() and before they are used to install the security policy)&lt;/p&gt;

&lt;p&gt;Note that code only needs to be run during the window of vulnerability, it does not need to be injected into the byte code stream. Another thread running code at the right time will do, especially on dual core machines. Even if this only works 0.1% of the time, the potential number of derby servers available might make it worthwhile.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;*&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;If Derby wants to provide a secure database server then all such vulnerabilities need to removed, or at the least minimized, not increased. I see it as much like a multi-threading bug, it may look like a small window from the code but some multi-threaded application will hit that bug.&lt;/p&gt;


&lt;p&gt;[* &quot;... 368,000 Microsoft SQL Server and 124,000 Oracle databases are vulnerable to various levels of attack. &lt;span class=&quot;error&quot;&gt;&amp;#91;on the internet&amp;#93;&lt;/span&gt;]&lt;br/&gt;
[ &lt;a href=&quot;http://www.regdeveloper.co.uk/2007/11/15/unprotected_databases_survey/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.regdeveloper.co.uk/2007/11/15/unprotected_databases_survey/&lt;/a&gt;  ]&lt;/p&gt;

</comment>
                            <comment id="12544019" author="djd" created="Tue, 20 Nov 2007 19:30:10 +0000"  >&lt;p&gt;In the patch isn&apos;t the string manipulation in packagingLooksGood just implementing String.endsWith()?&lt;/p&gt;

&lt;p&gt;It would be good for the comments to packagingLooksGood() explicitly state what the expected packaging is.&lt;/p&gt;

&lt;p&gt;Any reason why for Maven&apos;ized jars we can&apos;t support the jar file name matching the version number:&lt;/p&gt;

&lt;p&gt;Something like&lt;/p&gt;

&lt;p&gt;$&lt;/p&gt;
{derby.install.url}
&lt;p&gt;derbynet$&lt;/p&gt;
{derby.version}
&lt;p&gt;.jar&lt;/p&gt;
</comment>
                            <comment id="12544074" author="rhillegas" created="Tue, 20 Nov 2007 21:24:38 +0000"  >&lt;p&gt;Thanks for the quick feedback, Dan. Attaching derby-3086-01-requireDerbynet-ab.diff. You are right that endsWith() accomplishes what I want much more clearly. I have also expanded the comment on packagingLooksGood().&lt;/p&gt;

&lt;p&gt;I am not tackling the Maven versioning scheme here. Someone else is welcome to take that on. I am tackling what I see to be the regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2196&quot; title=&quot;Run standalone network server with security manager by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2196&quot;&gt;&lt;del&gt;DERBY-2196&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;1) The server crashes immediately if it can&apos;t find a jar file named derbynet.jar.&lt;/p&gt;

&lt;p&gt;With this patch, the server will boot against the Mavenized jars--but it won&apos;t install a security manager.&lt;/p&gt;

&lt;p&gt;I think there is a follow-on enhancement which someone else is welcome to log and tackle:&lt;/p&gt;

&lt;p&gt;2) Make the server install a SecurityManager if the derby jars have names which conform to some other naming convention.&lt;/p&gt;
</comment>
                            <comment id="12544392" author="digulla" created="Wed, 21 Nov 2007 09:37:50 +0000"  >&lt;p&gt;&amp;gt; No, my argument is that there is a vulnerability, thus it is subject to be being exploited.&lt;/p&gt;

&lt;p&gt;Okay, let me see if we&apos;re on the same track here: A Security Manager will do this: It will enforce allowed operations on specific JARs on the classpath. The JARs are not signed and not protected in any way other than their name and path.&lt;/p&gt;

&lt;p&gt;So Daniel&apos;s arguments boils down to this: &quot;I enhance security by enforcing the JAR to have a certain name/path&quot;. I do not believe this is true. As long as I can add malicious code to the JAR without the SM noticing, enforcing the name will not give additional protection. Therefore, enforcing a specific name will only add a false sense of security which isn&apos;t really there. This is even more dangerous than having an unknown vulnerability since people will believe they are safe when they are not.&lt;/p&gt;

&lt;p&gt;To be as safe as we can possibly be, I suggest that you use Class.getResource() on specific classes which should be on the classpath and strip the package and class from the resulting URL. This will be as safe as the static JAR names (as to my argument above) and it will work for both the case that the JARs have been renamed and that they have been collected in an ueberjar.&lt;/p&gt;

&lt;p&gt;For the same reasons, storing these URLs in the system properties (or any global variable) is okay too, because this cannot be exploited from a remote attacker and the SM doesn&apos;t give any protection against a local attacker anyway. As long as users use the supplied code, they will be perfectly safe as long as no one can modify the classpath when the server is started. If they embed the code in a larger app, they have to think about security themselves; we aren&apos;t able to forsee what they might do and therefore, we can&apos;t make their code secure for them at this time.&lt;/p&gt;</comment>
                            <comment id="12544508" author="rhillegas" created="Wed, 21 Nov 2007 16:04:53 +0000"  >&lt;p&gt;Committed derby-3083-01-requireDerbynet-ab.diff at subversion revision 597125. I believe that this fixes the regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2196&quot; title=&quot;Run standalone network server with security manager by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2196&quot;&gt;&lt;del&gt;DERBY-2196&lt;/del&gt;&lt;/a&gt;. However, the discussion of this issue is continuing.&lt;/p&gt;</comment>
                            <comment id="12544514" author="rhillegas" created="Wed, 21 Nov 2007 16:14:32 +0000"  >&lt;p&gt;Ported 597125 from trunk to 10.3 branch at subversion revision 597131.&lt;/p&gt;</comment>
                            <comment id="12544526" author="djd" created="Wed, 21 Nov 2007 17:00:22 +0000"  >&lt;p&gt;&amp;gt; So Daniel&apos;s arguments boils down to this: &quot;I enhance security by enforcing the JAR to have a certain name/path&quot;.&lt;br/&gt;
That is my argument yes.&lt;/p&gt;

&lt;p&gt;&amp;gt; As long as I can add malicious code to the JAR without the SM noticing, enforcing the name will not give additional protection.&lt;br/&gt;
Agreed, it gives no additional protection for that specific situation, I have not claimed it would do. Remember I&apos;m making no assumptions about how a vulnerability is exploited, only that it is there to be exploited. Thus I&apos;m not making assumptions the attacker has access to the a local machine or ability to modify the jars etc.&lt;/p&gt;

&lt;p&gt;The policy file that allows an arbitrary name for the code source has the potential for it to be applied to any jar on the file system, a policy file with a specific name portion (such as derby.jar) can only be applied to a limited number of jars on the file system. The policy file in question has some very useful permissions, such as ALL FILES.&lt;/p&gt;

&lt;p&gt;&amp;gt; Therefore, enforcing a specific name will only add a false sense of security which isn&apos;t really there. &lt;br/&gt;
I&apos;ve only ever claimed that the specific names reduces a vulnerability.&lt;/p&gt;

&lt;p&gt;&amp;gt; storing these URLs in the system properties (or any global variable) is okay too, because this cannot be exploited from a remote attacker&lt;br/&gt;
That&apos;s an assumption that&apos;s hard to prove and one I would not be willing to make when looking at security. Remember the vulnerability exists before the security manager is installed, thus setting system properties is open for any code running in the jvm. Could some JMX agent or debugging agent be active that would allow properties to be set from a remote user (or local user using tcp/ip)?.&lt;/p&gt;

&lt;p&gt;&amp;gt; SM doesn&apos;t give any protection against a local attacker anyway&lt;br/&gt;
One does have to be concerned about local attackers, while a local attacker may have access to the machine (be logged on, able to run processes on the machine), they may not have access to your files, thus there may be incentive for them to exploit vulnerabilities to read/modify your data.&lt;/p&gt;

&lt;p&gt;&amp;gt; This will be as safe as the static JAR names (as to my argument above) and it will work for both the case that the JARs have been renamed and that they have been collected in an ueberjar. &lt;br/&gt;
&amp;gt; If they embed the code in a larger app, they have to think about security themselves; we aren&apos;t able to forsee what they might do and therefore, we can&apos;t make their code secure for them at this time.&lt;/p&gt;

&lt;p&gt;These two statements contradict each other, the first says Derby should install a security manager using whatever jar file the code is in, hence giving the impression Derby is making the system secure for them. The second says (correctly) we can&apos;t make their code secure for them in this situation.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what Aaron &amp;amp; Rick are really arguing, it&apos;s either there is no vulnerability or there is a vulnerability but there&apos;s no/little chance of it being exploited.&lt;br/&gt;
I think that any security breach is usually made up of a number of  vulnerabilities, not a single point of failure.&lt;/p&gt;</comment>
                            <comment id="12544794" author="digulla" created="Thu, 22 Nov 2007 12:49:57 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; storing these URLs in the system properties (or any global variable) is okay too, because this cannot be exploited from a remote attacker&lt;br/&gt;
&amp;gt;That&apos;s an assumption that&apos;s hard to prove&lt;/p&gt;

&lt;p&gt;This is very easy to prove: At the time this happens, the Network Server code has not yet created a socket, so a remote attacker can&apos;t connect -&amp;gt; q.e.d.&lt;/p&gt;

&lt;p&gt;&amp;gt; These two statements contradict each other,...&lt;/p&gt;

&lt;p&gt;I&apos;m talking about two completely different things here: One talks about taking the code from the Derby project unmodified and the other talks about a developer building their own Derby server.&lt;/p&gt;

&lt;p&gt;My argument is that there is no additional vulnerability if you allow any JAR name, it just makes an existing vulnerability more visible (so people who are concerned will know about it and can plan against it). This existing vulnerability can&apos;t be closed by enforcing a specific JAR name, so it doesn&apos;t matter what the name is and where it comes from.&lt;/p&gt;

&lt;p&gt;So far, you have failed to come up with a convincing argument why my argument is wrong. If you insist that there might be additional vulnerabilities, list them one by one. Talking &quot;grand&quot; when we try to find a way to patch a bug is not helping. At the end of the day, the software must work and it must be as secure as we can make it; no more and no less.&lt;/p&gt;</comment>
                            <comment id="12546305" author="djd" created="Wed, 28 Nov 2007 17:16:57 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; storing these URLs in the system properties (or any global variable) is okay too, because this cannot be exploited from a remote attacker&lt;br/&gt;
&amp;gt;&amp;gt;That&apos;s an assumption that&apos;s hard to prove&lt;/p&gt;

&lt;p&gt;&amp;gt; This is very easy to prove: At the time this happens, the Network Server code has not yet created a socket, so a remote attacker can&apos;t connect -&amp;gt; q.e.d. &lt;/p&gt;

&lt;p&gt;I don&apos;t think it&apos;s that easy. What other code could be running, could the JVM have JMX active allowing other code, could some debugging api be active, is the network server running in another framework such as tomcat?&lt;/p&gt;

&lt;p&gt;&amp;gt; My argument is that there is no additional vulnerability if you allow any JAR name, it just makes an existing vulnerability more visible &lt;span class=&quot;error&quot;&gt;&amp;#91;snip&amp;#93;&lt;/span&gt;. This existing vulnerability can&apos;t be closed by enforcing a specific JAR name,&lt;/p&gt;

&lt;p&gt;I agree, but as you say allowing any jar name &quot;makes an existing vulnerability more visible&quot;, thus increasing the potential for the vulnerability to be exploited. I don&apos;t think that&apos;s a good direction for a security conscious product to go in.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt; These two statements contradict each other,...&lt;br/&gt;
&amp;gt; I&apos;m talking about two completely different things here: One talks about taking the code from the Derby project unmodified and the other talks about a developer building their own Derby server. &lt;/p&gt;

&lt;p&gt;But to the Derby network code those two situations look the same, it&apos;s derby code running in a jar, thus it seems in the unmodified or uberjar cases you want Derby to install a security manager,  but in the modified code case you don&apos;t?&lt;/p&gt;</comment>
                            <comment id="12546343" author="rhillegas" created="Wed, 28 Nov 2007 18:39:16 +0000"  >&lt;p&gt;Reverted derby-3083-01-requireDatatypes-ab.diff at subversion revision 599085 in the 10.3 branch and at revision 599086 in the trunk. There is still uncertainty about whether this is a reasonable approach to the problem. I do not think that we will reach consensus on this issue before we need to generate the next 10.3 release candidate.&lt;/p&gt;</comment>
                            <comment id="12546770" author="knutanders" created="Thu, 29 Nov 2007 15:44:31 +0000"  >&lt;p&gt;Is there any reason why we don&apos;t implement our own SecurityManager with hard-coded default permissions? Then we could just pass in the jar names to its constructor instead of relying on the system properties.&lt;/p&gt;</comment>
                            <comment id="12546781" author="rhillegas" created="Thu, 29 Nov 2007 16:10:47 +0000"  >&lt;p&gt;Thanks for that suggestion, Knut. I have been thinking along similar lines. We could extend SecurityManager with our own implementation. Alternatively, we could extend Policy with our own policy object and continue to use the default SecurityManager. At first blush, the latter looks less complicated to me. &lt;/p&gt;</comment>
                            <comment id="12547044" author="knutanders" created="Fri, 30 Nov 2007 08:35:24 +0000"  >&lt;p&gt;Hi Rick, I agree that extending Policy sounds less complicated. If we do that, it would be OK to grant permissions to the jar files containing Derby code regardless of their name, wouldn&apos;t it? The only concern I can think of is that someone could fake the return value from getProtectionDomain(), but if someone has managed to get control over your JDK libraries, it&apos;s game over anyway.&lt;/p&gt;</comment>
                            <comment id="12547151" author="rhillegas" created="Fri, 30 Nov 2007 14:20:06 +0000"  >&lt;p&gt;Hi Knut. I agree that if someone has subverted getProtectionDomain(), then the fox is already in the hen house. I think this could be our sequence of operations:&lt;/p&gt;

&lt;p&gt;1) Determine the protection domains (e.g. jar files) which will receive privileges.&lt;/p&gt;

&lt;p&gt;2) Construct a DerbyPolicy from those protection domains.&lt;/p&gt;

&lt;p&gt;3) Install the default SecurityManager with a dummy policy which lets us change policies immediately afterwards&lt;/p&gt;

&lt;p&gt;4) Install the DerbyPolicy (Policy.setPolicy( derbyPolicy ) )&lt;/p&gt;

&lt;p&gt;If there is a window of vulnerability, then I sense that it would lie between steps (3) and (4). However, I don&apos;t see a vulnerability right now.&lt;/p&gt;</comment>
                            <comment id="12547167" author="knutanders" created="Fri, 30 Nov 2007 15:00:27 +0000"  >&lt;p&gt;Hi Rick. I didn&apos;t quite get what you meant by &quot;dummy policy&quot; in (3). Is that a policy file with &quot;setPolicy granted to all&quot;? Then we need a system property, don&apos;t we? Could we achieve the same effect by performing (3) and (4) in reversed order?&lt;/p&gt;</comment>
                            <comment id="12547172" author="rhillegas" created="Fri, 30 Nov 2007 15:17:34 +0000"  >&lt;p&gt;Hi Knut. I don&apos;t know if you can reverse the order of (3) and (4). That might work. If it does, I agree that it&apos;s a better plan.&lt;/p&gt;

&lt;p&gt;If we have to perform (3) first, then yes I think we need a system property to bootstrap the SecurityManager and point it at the dummy policy. I think that setPolicy would only have to be granted to the protection domain which contains the server.&lt;/p&gt;

&lt;p&gt;But I think the first experiment would be to reverse the order of (3) and (4) as you suggest.&lt;/p&gt;</comment>
                            <comment id="12564110" author="myrna" created="Wed, 30 Jan 2008 18:05:49 +0000"  >&lt;p&gt;I&apos;m removing patch available flag; it appears from the discussions the patch wasn&apos;t fully approved. &lt;/p&gt;</comment>
                            <comment id="12727619" author="kmarsden" created="Mon, 6 Jul 2009 17:53:50 +0100"  >&lt;p&gt;Triaged for 10.5.2. Set Normal urgnecy. Since you can&apos;t start network server with the jar file names as we post them to maven and since this is a regression, we might consider making this urgent for the next release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12380002">DERBY-3120</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12384334">DERBY-3269</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12369898" name="derby-3083-01-requireDerbynet-aa.diff" size="1925" author="rhillegas" created="Tue, 20 Nov 2007 18:41:27 +0000"/>
                            <attachment id="12369919" name="derby-3083-01-requireDerbynet-ab.diff" size="1960" author="rhillegas" created="Tue, 20 Nov 2007 21:24:38 +0000"/>
                            <attachment id="12367484" name="derby-716-10-datatypesCollation-aa.diff" size="23076" author="rhillegas" created="Wed, 10 Oct 2007 16:30:24 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Sep 2007 23:16:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23419</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10422"><![CDATA[High Value Fix]]></customfieldvalue>
    <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ifj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36804</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>