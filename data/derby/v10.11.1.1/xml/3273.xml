<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:22:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3273/DERBY-3273.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3273] convert derbynet/testconnection.java to junit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3273</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;convert derbynet/testconnection.java to junit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384534">DERBY-3273</key>
            <summary>convert derbynet/testconnection.java to junit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Dec 2007 23:24:19 +0000</created>
                <updated>Wed, 1 Jul 2009 00:40:21 +0100</updated>
                            <resolved>Fri, 14 Dec 2007 18:17:03 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12551157" author="kmarsden" created="Wed, 12 Dec 2007 23:29:45 +0000"  >&lt;p&gt;Attached is the conversion of derbynet/testconnection.java to junit.&lt;/p&gt;

&lt;p&gt;Added ping testing with the api to  NetworkServerControlApiTest&lt;/p&gt;

&lt;p&gt;Created a new test NetworkServerControlClientCommandTest to test the command line ping testing.  Command line testing for runtimeinfo, sysinfo etc can be added to this file when converted.&lt;/p&gt;

&lt;p&gt;I have a question about portability. I think that because the process input stream will use the platform default encoding as will the String constructor, my code comparing the command output will be ok, but I would appreciate a second opinion.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12551172" author="myrna" created="Thu, 13 Dec 2007 00:38:00 +0000"  >&lt;p&gt;I have no reply to your question (looks ok to me, but then I&apos;m working on English systems also), but I have two comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;although it&apos;s negative testing, maybe you should use the          InetAddress.getByName(&lt;br/&gt;
                TestConfiguration.getCurrent().getHostName()),&lt;br/&gt;
                TestConfiguration.getCurrent().getPort());&lt;br/&gt;
  instead of hard-coded localhost and 1527.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;although the jvm executable for J2ME may not be &apos;java&apos; I wouldn&apos;t say it&apos;s &quot;not right&quot;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Just different.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12551184" author="djd" created="Thu, 13 Dec 2007 01:14:02 +0000"  >&lt;p&gt;Or even:&lt;/p&gt;

&lt;p&gt;  NetworkServerTestSetup.getNetworkServerControl()&lt;/p&gt;

&lt;p&gt;which returns a correctly setup NetworkServerControl object for the current configuration including handling SSL.&lt;/p&gt;</comment>
                            <comment id="12551186" author="djd" created="Thu, 13 Dec 2007 01:25:54 +0000"  >&lt;p&gt;In the Utilities.execCmd() if Runtime.getRuntime().exec(command) throws an exception a NPE will result.&lt;/p&gt;

&lt;p&gt;I think the exception should simply be thrown which will cause the test to fail.&lt;/p&gt;

&lt;p&gt;In the same method:&lt;/p&gt;

&lt;p&gt;+            if (pr.exitValue() != expectedExitCode) &lt;/p&gt;
{
+                BaseTestCase.fail(&quot;FAIL: expected exit code of &quot; + expectedExitCode
+                                + &quot;, got exit code of &quot; + pr.exitValue());
+            }

&lt;p&gt;any reason not to use Assert.assertEquals()?&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;+            int j = 0;&lt;br/&gt;
+            for (int i = 3; i &amp;lt; totalSize; i++) &lt;/p&gt;
{
+                cmd[i] = args[j++];
+            }

&lt;p&gt;any reason not to use System.arraycopy()?&lt;/p&gt;

&lt;p&gt;Putting this exec in Utilities is good, it could be the base to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3250&quot; title=&quot;NetworkServerTestSetup will fail when starting the server as a process if any of the command line arguments contains a space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3250&quot;&gt;&lt;del&gt;DERBY-3250&lt;/del&gt;&lt;/a&gt; since the new method handles multiple arguments correctly.&lt;/p&gt;</comment>
                            <comment id="12551190" author="djd" created="Thu, 13 Dec 2007 01:37:17 +0000"  >&lt;p&gt;In NetworkServerControlApiTest &lt;/p&gt;

&lt;p&gt;+    public void testPing() throws Exception&lt;br/&gt;
+    {&lt;br/&gt;
+        NetworkServerControl nsctrl = new NetworkServerControl();&lt;br/&gt;
+        nsctrl.ping();&lt;br/&gt;
+ &lt;/p&gt;

&lt;p&gt;This code has the problem that it assumes the default of localhost and 1527 matches the current configuration of the test which may not be true.&lt;br/&gt;
Existing tests in NetworkServerControlApiTest have this problem, as Myrna points out the NetworkServerControl should be pulled based on the configuration.&lt;/p&gt;

&lt;p&gt;+        try {&lt;br/&gt;
+        	nsctrl = new NetworkServerControl(InetAddress.getByName(&quot;notthere&quot;), 1527);&lt;br/&gt;
+        	nsctrl.ping();&lt;br/&gt;
+        	fail(&quot;Should not have been able to ping host \&quot;notthere\&quot;&quot;);&lt;/p&gt;


&lt;p&gt;I think this is a dangerous coding style for tests, which method call are you expecting to fail? Only the method expected to fail should be in the try catch block.&lt;/p&gt;</comment>
                            <comment id="12551567" author="kmarsden" created="Thu, 13 Dec 2007 18:12:22 +0000"  >&lt;p&gt;Dan said...&lt;br/&gt;
&amp;gt;+ try {&lt;br/&gt;
&amp;gt;+ nsctrl = new &amp;gt;NetworkServerControl(InetAddress.getByName(&quot;notthere&quot;), 1527);&lt;br/&gt;
&amp;gt;+ nsctrl.ping();&lt;br/&gt;
&amp;gt;+ fail(&quot;Should not have been able to ping host &amp;gt;\&quot;notthere\&quot;&quot;);&lt;/p&gt;

&lt;p&gt;&amp;gt;I think this is a dangerous coding style for tests, which &amp;gt;method call are you expecting to fail? Only the method &amp;gt;expected to fail should be in the try catch block&lt;/p&gt;

&lt;p&gt;In fact the failure was happening in the InetAddress.getByName(&quot;notthere&quot;), call, so we never got to the ping. It was a security exception, but when I added the permissions and privilege block, it failed with an UnknownHost exception, so the test itself does not make much sense for ping with the API.  I&apos;ll take the unknown host test out of testPing.&lt;/p&gt;

</comment>
                            <comment id="12551603" author="kmarsden" created="Thu, 13 Dec 2007 20:31:50 +0000"  >&lt;p&gt;A new patch addressing Myrna&apos;s and Dan&apos;s comments.&lt;/p&gt;
</comment>
                            <comment id="12551622" author="djd" created="Thu, 13 Dec 2007 21:58:24 +0000"  >&lt;p&gt;Can you comment what&apos;s going on here?&lt;/p&gt;

&lt;p&gt;+        String currentHost = TestConfiguration.getCurrent().getHostName();&lt;br/&gt;
+        int currentPort = TestConfiguration.getCurrent().getPort();&lt;br/&gt;
+        NetworkServerControl nsctrl = NetworkServerTestSetup.getNetworkServerControl();&lt;br/&gt;
+        nsctrl.ping();&lt;br/&gt;
+        nsctrl = new NetworkServerControl(privInetAddressGetByName(currentHost), &lt;br/&gt;
+                currentPort);&lt;br/&gt;
+        nsctrl.ping();&lt;/p&gt;

&lt;p&gt;What&apos;s different about the second ping that requires additional testing?&lt;/p&gt;

&lt;p&gt;Seems to me that if SSL is not enabled then the two pings are testing the same logic, if SSL is enabled then won&apos;t the second ping fail?&lt;/p&gt;</comment>
                            <comment id="12551626" author="kmarsden" created="Thu, 13 Dec 2007 22:15:41 +0000"  >&lt;p&gt;of course you are right, the two commands end up testing the same thing. I will remove the second.&lt;/p&gt;</comment>
                            <comment id="12551718" author="olesolberg" created="Fri, 14 Dec 2007 07:38:09 +0000"  >&lt;p&gt;Looks like the 604074 checkin was incomplete: old test still referenced in derbynetmats and j9derbynetmats:&lt;/p&gt;

&lt;p&gt;./org/apache/derbyTesting/functionTests/suites/derbynetmats.runall:10:derbynet/testconnection.java&lt;br/&gt;
./org/apache/derbyTesting/functionTests/suites/j9derbynetmats.runall:6:derbynet/testconnection.java&lt;/p&gt;


&lt;p&gt;See&lt;br/&gt;
&lt;a href=&quot;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/604075-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/604075-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/derbyTesting/functionTests/tests/derbynet/testconnection&lt;/p&gt;</comment>
                            <comment id="12551724" author="fuzzylogic" created="Fri, 14 Dec 2007 08:01:38 +0000"  >&lt;p&gt;Removed testconnection from old harness suites with revision 604123.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12379151">DERBY-3089</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12374068">DERBY-2948</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12384205">DERBY-3263</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12371565" name="derby-3273_diff.txt" size="22218" author="kmarsden" created="Wed, 12 Dec 2007 23:29:45 +0000"/>
                            <attachment id="12371620" name="derby-3273_diff2.txt" size="24629" author="kmarsden" created="Thu, 13 Dec 2007 20:31:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Dec 2007 00:38:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0u2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>