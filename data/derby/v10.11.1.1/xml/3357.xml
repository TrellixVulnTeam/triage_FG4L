<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3357/DERBY-3357.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3357] Reduce runtime of jdbcapi.DataSourceTest</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3357</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Two tests in DataSoureTest are waiting for a lock timeout. The runtime of the suite could be reduced by setting the lock timeout to a lower value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12387354">DERBY-3357</key>
            <summary>Reduce runtime of jdbcapi.DataSourceTest</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jan 2008 08:56:24 +0000</created>
                <updated>Tue, 26 Feb 2008 13:43:04 +0000</updated>
                            <resolved>Thu, 7 Feb 2008 22:27:00 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12563429" author="kristwaa" created="Tue, 29 Jan 2008 09:03:06 +0000"  >&lt;p&gt;&apos;derby-3357-1a-lower_lock_timeout.diff&apos; lowers the lock timeout to 5 seconds for two of the tests.&lt;br/&gt;
Each test is run twice, and the fix reduced the runtime from 260 seconds to 40 seconds on my machine.&lt;/p&gt;

&lt;p&gt;Please comment if you believe this change is not acceptable, or that the lock timeout value must be set to another value.&lt;/p&gt;</comment>
                            <comment id="12563580" author="djd" created="Tue, 29 Jan 2008 17:20:20 +0000"  >&lt;p&gt;This test also has some schema setup in its setup and teardown methods which of course will be run once per fixture. However from a quick look only a handful of fixtures need the schema setup. This also makes the test slower than it could be, maybe the setup could be one time by using the decorateSQL method of CleanDatabaseTestSetup.&lt;/p&gt;

&lt;p&gt;Another minor issue is that a number of fixtures that are specific to client are run on embedded as well but do nothing due to a check in the test fixture code. The normal way of handling these is to only run  them in network server mode.&lt;/p&gt;</comment>
                            <comment id="12564738" author="kristwaa" created="Fri, 1 Feb 2008 12:32:51 +0000"  >&lt;p&gt;Committed &apos;derby-3357-1a-lower_lock_timeout.diff&apos; to trunk with revision 617486.&lt;br/&gt;
I&apos;m leaving the Jira open as there are more issues to fix. I do not have the intention to look at these now, so I&apos;m unassigning myself.&lt;/p&gt;</comment>
                            <comment id="12566721" author="myrna" created="Thu, 7 Feb 2008 18:10:35 +0000"  >&lt;p&gt;Because I did the original conversion, I felt honor-bound to try address Dan&apos;s comments...&lt;br/&gt;
I&apos;m attaching a patch that I think makes the suite() method more complicated, but does differentiate at that level between which tests should run with client, server, or both, and the creation of the tables is done in a CleanDatabaseTestSetup.decorateSQL method.&lt;br/&gt;
The test only gained a few seconds on my machine.&lt;br/&gt;
I&apos;m not sure whether the added complexity of the client/server/both split is worth the few seconds at run time. Opinions?&lt;/p&gt;</comment>
                            <comment id="12566773" author="djd" created="Thu, 7 Feb 2008 20:13:02 +0000"  >&lt;p&gt;Looks fine, minor comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;minor concern that the name &apos;getRunTwiceSuite is confusing to me, implies that the fixtures are run twice in a configuration. I think most other test classes use baseSuite() for a similar purpose.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In  testReadOnlyToWritableTran() it might be wise to expand this comment, I had to spend time to figure out why only those two rows are being deleted.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+        // remove row 6 and 7 if previously committed&lt;/p&gt;</comment>
                            <comment id="12566822" author="myrna" created="Thu, 7 Feb 2008 22:17:22 +0000"  >&lt;p&gt;Attaching a patch addressing Dan&apos;s comments.&lt;br/&gt;
I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12566825" author="myrna" created="Thu, 7 Feb 2008 22:27:00 +0000"  >&lt;p&gt;I&apos;m resolving this issue, I committed the minor speed up by doing a CleanDatabaseTestSetup.decorateSQL instead of Setup for each fixture, and directing tests to run in client/server/both in the suite with revision 619667.&lt;br/&gt;
I&apos;m assigning Kristian back, as his change took care of the biggest improvement in running time.&lt;/p&gt;</comment>
                            <comment id="12572469" author="kristwaa" created="Tue, 26 Feb 2008 13:43:04 +0000"  >&lt;p&gt;Refactorings seems to be working fine, and I don&apos;t expect more work to be done.&lt;br/&gt;
Closing issue, feel free to reopen if required.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12375005" name="DERBY-3357_otherspeedup.diff" size="13359" author="myrna" created="Thu, 7 Feb 2008 18:10:35 +0000"/>
                            <attachment id="12375024" name="DERBY-3357_otherspeedup.diff2" size="13587" author="myrna" created="Thu, 7 Feb 2008 22:17:21 +0000"/>
                            <attachment id="12374238" name="derby-3357-1a-lower_lock_timeout.diff" size="2675" author="kristwaa" created="Tue, 29 Jan 2008 09:03:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Jan 2008 17:20:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0zb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>