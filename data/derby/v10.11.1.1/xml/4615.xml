<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:20:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4615/DERBY-4615.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4615] EmbedCallableStatement ignores Calendar in getDate, getTime and getTimestamp</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4615</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The getDate(), getTime() and getTimestamp() methods in EmbedCallableStatement ignore the Calendar argument, and therefore give the wrong results if some other calendar than the default calendar is passed in. The client driver seems to do the right thing, though.&lt;/p&gt;

&lt;p&gt;Also note that none of these methods are ever called by any of the regression tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12462123">DERBY-4615</key>
            <summary>EmbedCallableStatement ignores Calendar in getDate, getTime and getTimestamp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Apr 2010 10:18:39 +0100</created>
                <updated>Thu, 13 Jan 2011 17:18:34 +0000</updated>
                            <resolved>Tue, 13 Jul 2010 16:31:58 +0100</resolved>
                                    <version>10.5.3.0</version>
                                    <fixVersion>10.5.3.1</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12857247" author="knutanders" created="Thu, 15 Apr 2010 10:39:15 +0100"  >&lt;p&gt;Attached is a JUnit test case that exposes the bug. The test case calls a procedure that takes date, time and timestamp values in its input parameters and returns the exact same values through its output parameters. In the test, the getters and setters on the callable statement are called with different combinations of calendars with different time zones, and the test checks whether the correct translation between the time zones has been performed.&lt;/p&gt;

&lt;p&gt;With the client driver, the test passes. With the embedded driver, only the part of the test that uses the local time zone passes.&lt;/p&gt;</comment>
                            <comment id="12857294" author="knutanders" created="Thu, 15 Apr 2010 13:50:55 +0100"  >&lt;p&gt;Currently, the problem is that EmbedCallableStatement defines getXXX(int,Calendar) in terms of getXXX(int), so the Calendar argument is lost. The attached patch turns this situation around. Now all the work is done in the getters that take a Calendar argument, and the Calendar-less getters just forward calls to them after adding the default Calendar instance to the argument list.&lt;/p&gt;

&lt;p&gt;Now the new test case in CallableTest runs cleanly both with the embedded driver and the client driver. I&apos;ve started a full regression test run.&lt;/p&gt;</comment>
                            <comment id="12857314" author="bryanpendleton" created="Thu, 15 Apr 2010 14:44:21 +0100"  >&lt;p&gt;+1 to the suggestion that getXXX(int) should call getXXX(int, Calendar),&lt;br/&gt;
rather than the other way around. Thanks for cleaning this up!&lt;/p&gt;</comment>
                            <comment id="12857387" author="knutanders" created="Thu, 15 Apr 2010 17:28:48 +0100"  >&lt;p&gt;Thanks Bryan! All the regression tests passed.&lt;br/&gt;
Committed revision 934474.&lt;/p&gt;</comment>
                            <comment id="12884442" author="kmarsden" created="Thu, 1 Jul 2010 22:54:19 +0100"  >&lt;p&gt;reopen for 10.5 back port&lt;/p&gt;</comment>
                            <comment id="12886243" author="mamtas" created="Thu, 8 Jul 2010 06:41:49 +0100"  >&lt;p&gt;I will work on backporting this one&lt;/p&gt;</comment>
                            <comment id="12886749" author="mamtas" created="Fri, 9 Jul 2010 16:50:27 +0100"  >&lt;p&gt;The derbyall suite ran fine after the merge. But for junit suite (I ran it twice and both the times, same failure), I get following error. Is this an expected failure and hence we just need to change the test?&lt;br/&gt;
1) testTimeAndDateWithCalendar(org.apache.derbyTesting.functionTests.tests.jdbcapi.CallableTest)junit.framework.AssertionFailedError: nanos expected:&amp;lt;123456789&amp;gt; but was:&amp;lt;123456000&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.jdbcapi.CallableTest.assertSameTimestamp(CallableTest.java:522)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.jdbcapi.CallableTest.testTimeAndDateWithCalendar(CallableTest.java:456)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.jdbcapi.CallableTest.testTimeAndDateWithCalendar(CallableTest.java:412)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;</comment>
                            <comment id="12887119" author="knutanders" created="Sun, 11 Jul 2010 00:53:50 +0100"  >&lt;p&gt;I think this is expected on 10.5 because of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2602&quot; title=&quot;TIMESTAMP value is truncated  when return to client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2602&quot;&gt;&lt;del&gt;DERBY-2602&lt;/del&gt;&lt;/a&gt; (not backported).&lt;/p&gt;</comment>
                            <comment id="12887384" author="mamtas" created="Mon, 12 Jul 2010 15:36:51 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2602&quot; title=&quot;TIMESTAMP value is truncated  when return to client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2602&quot;&gt;&lt;del&gt;DERBY-2602&lt;/del&gt;&lt;/a&gt; is not in the list of bugs identified for backport to 10.5 but I can look into backporting it so &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4615&quot; title=&quot;EmbedCallableStatement ignores Calendar in getDate, getTime and getTimestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4615&quot;&gt;&lt;del&gt;DERBY-4615&lt;/del&gt;&lt;/a&gt; does not have the above failure after the merge. Please let me know if any one has any objection to backport of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2602&quot; title=&quot;TIMESTAMP value is truncated  when return to client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2602&quot;&gt;&lt;del&gt;DERBY-2602&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12889928" author="mamtas" created="Mon, 19 Jul 2010 18:26:07 +0100"  >&lt;p&gt;Can&apos;t backport &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2602&quot; title=&quot;TIMESTAMP value is truncated  when return to client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2602&quot;&gt;&lt;del&gt;DERBY-2602&lt;/del&gt;&lt;/a&gt; into 10.5 because it will change the behavior of client server product when we already have branches on top of the 10.5 codeline. Because of that, I had to change the test to not look for nanosec granularity after the merge of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4615&quot; title=&quot;EmbedCallableStatement ignores Calendar in getDate, getTime and getTimestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4615&quot;&gt;&lt;del&gt;DERBY-4615&lt;/del&gt;&lt;/a&gt; into 10.5 codeline. The changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4615&quot; title=&quot;EmbedCallableStatement ignores Calendar in getDate, getTime and getTimestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4615&quot;&gt;&lt;del&gt;DERBY-4615&lt;/del&gt;&lt;/a&gt; are now in 10.5 codeline&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12459154">DERBY-4582</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12468384">DERBY-4728</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12441821" name="ASF.LICENSE.NOT.GRANTED--derby-4615-1a.diff" size="10246" author="knutanders" created="Thu, 15 Apr 2010 13:50:55 +0100"/>
                            <attachment id="12441810" name="ASF.LICENSE.NOT.GRANTED--test.diff" size="7059" author="knutanders" created="Thu, 15 Apr 2010 10:39:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10363"><![CDATA[Embedded/Client difference]]></customfieldvalue>
    <customfieldvalue key="10366"><![CDATA[Wrong query result]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Apr 2010 13:44:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0nrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>