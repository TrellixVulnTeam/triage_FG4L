<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:35:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-883/DERBY-883.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-883] Enhance GROUP BY clause to support expressions instead of just column references.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-883</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This select would return an error syntax on finding &quot;(&quot; after month if group by clause:&lt;/p&gt;

&lt;p&gt;select idissue, month(creation), year(creation), count(distinct idissue)&lt;br/&gt;
where &lt;br/&gt;
  ....&lt;br/&gt;
group by idissue, month(creation), year(creation)&lt;/p&gt;</description>
                <environment>JDK 1.5.0_05</environment>
        <key id="12328186">DERBY-883</key>
            <summary>Enhance GROUP BY clause to support expressions instead of just column references.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mkhettry">Manish Khettry</assignee>
                                    <reporter username="llturro">Lluis Turro</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jan 2006 00:35:16 +0000</created>
                <updated>Tue, 9 Sep 2014 22:04:02 +0100</updated>
                            <resolved>Wed, 13 Dec 2006 20:18:34 +0000</resolved>
                                    <version>10.1.2.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Documentation</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12364222" author="llturro" created="Sat, 28 Jan 2006 01:25:31 +0000"  >&lt;p&gt;Correct SQL statement should be:&lt;/p&gt;

&lt;p&gt;select status, month(creation), year(creation), count(distinct idissue)&lt;br/&gt;
where&lt;br/&gt;
  ....&lt;br/&gt;
group by status, month(creation), year(creation)&lt;/p&gt;

&lt;p&gt;The fact remains the same, but previous was mistaking.&lt;/p&gt;</comment>
                            <comment id="12374772" author="mperham" created="Mon, 17 Apr 2006 23:59:11 +0100"  >&lt;p&gt;This bug makes unit testing our data warehousing queries essentially impossible without modifying our actual schema.  This needs to be bumped from major to critical IMO.&lt;/p&gt;</comment>
                            <comment id="12374884" author="oleoh" created="Tue, 18 Apr 2006 17:24:32 +0100"  >&lt;p&gt;If I read the documentation correctly (Reference Manual) then your SQL statement is simply not allowed in Derby; it says&lt;/p&gt;

&lt;p&gt;GROUP BY column-Name [ , column-Name ] *&lt;/p&gt;

&lt;p&gt;where column-Name is a simple column name or a correlation; in my experiences correlations only work when they refer to a simple column.&lt;/p&gt;

&lt;p&gt;But IMO you are still right: Derby is missing an essential feature here; instead  of the above something like &lt;/p&gt;

&lt;p&gt;GROUP BY SelectItem [ , SelectItem ] *&lt;/p&gt;

&lt;p&gt;would be more in line with what other DBs have to offer; it should be possible to use arbitrary select items from the SELECT clause in the GROUP BY clause. This &quot;shortcoming&quot; has made it close to impossible to port a complex Oracle based application to Derby.&lt;/p&gt;

&lt;p&gt;But since the documentation seems to be clear, I think this &quot;bug&quot; should be reclassified as a &quot;New Feature&quot; or &quot;Improvement&quot;; for me the priority cannot be high enough, it is &quot;Major&quot; at least and of course &quot;Critical&quot; for my application, but I&apos;m not sure this can be generalized.&lt;/p&gt;</comment>
                            <comment id="12378174" author="djd" created="Sat, 6 May 2006 08:11:47 +0100"  >&lt;p&gt;Seems like supporting expressions in the GROUP BY clause is similar to the improvement made to support expressions in the ORDER BY clause that Tomohito did a while ago.&lt;/p&gt;

&lt;p&gt;Can we use the knowledge/implementation details from the ORDER BY work to do the GROUP BY improvement?&lt;/p&gt;</comment>
                            <comment id="12378466" author="mkhettry" created="Tue, 9 May 2006 01:22:10 +0100"  >&lt;p&gt;I can look into the fix for 134 and see if the work done there can be used for this one; unless someone else (Tomohito perhaps) wants to look into this first.&lt;/p&gt;</comment>
                            <comment id="12378688" author="bandaram" created="Wed, 10 May 2006 02:52:27 +0100"  >&lt;p&gt;Thanks for picking this up, Manish. I also have itch to see this completed soon, so let me know if and how I can help.&lt;/p&gt;</comment>
                            <comment id="12402467" author="mkhettry" created="Tue, 16 May 2006 08:58:52 +0100"  >&lt;p&gt;I have a few questions on this, largely functional.&lt;/p&gt;

&lt;p&gt;1. In terms of syntax, do we allow expressions in the group by list or positional parameters, or both?&lt;/p&gt;

&lt;p&gt;select tomonth(creationdt), toyear(creationdt), count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
from bugs&lt;br/&gt;
group by 1, 2; &lt;/p&gt;

&lt;p&gt;or &lt;br/&gt;
group by tomonth(creationdt), toyear(creationdt);&lt;/p&gt;

&lt;p&gt;An implementation question on this note-- does the language code have a way of looking at two expressions (ValueNode?) and checking to see if they are equivalent? We&apos;ll need some way of doing this to match an expression in the group by list to an expression in the select list right?&lt;/p&gt;

&lt;p&gt;2. I assume that an expression in a group by list must appear in the select list without aggregation right? Is this an error?&lt;/p&gt;

&lt;p&gt;select x+1, x+2, sum&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
from test&lt;br/&gt;
group by x&lt;br/&gt;
;&lt;/p&gt;

&lt;p&gt;3. What do we do with duplicates? i.e.&lt;/p&gt;

&lt;p&gt;select x+1, x+1, sum&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
from test&lt;br/&gt;
group by x+1, x+1;&lt;/p&gt;

&lt;p&gt;Is this an error? The current implementation throws an error if the same column occurs more than once in the group by list.&lt;/p&gt;

&lt;p&gt;Is there a standard somewhere which I should consult before trying to nail down the functionality?&lt;/p&gt;</comment>
                            <comment id="12411920" author="llturro" created="Tue, 16 May 2006 16:17:49 +0100"  >&lt;p&gt;Manish, it would be great supporting positional parameters. So I vote for both &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Duplicates in group by clause make no sense, is an error.&lt;/p&gt;</comment>
                            <comment id="12411924" author="llturro" created="Tue, 16 May 2006 16:28:48 +0100"  >&lt;p&gt;About question 2. Results would not change but would be a shortcut. If you ask me I would tell you that reads better &apos;group by x&apos;. Remember you can also group fields in where clause and they don&apos;t need to appear in the select list.&lt;/p&gt;

&lt;p&gt;select sum(quantity)&lt;br/&gt;
from client&lt;br/&gt;
group by clientId&lt;/p&gt;

&lt;p&gt;I got a list of &apos;quantity&apos; where to perform operations, but don&apos;t care which client provides each element.&lt;/p&gt;
</comment>
                            <comment id="12412227" author="bandaram" created="Thu, 18 May 2006 02:13:12 +0100"  >&lt;p&gt;Thanks for making progress on this important new functionality, Manish.&lt;/p&gt;

&lt;p&gt;&amp;gt; 1. In terms of syntax, do we allow expressions in the group by list or positional parameters, or both?&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; select tomonth(creationdt), toyear(creationdt), count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&amp;gt; from bugs&lt;br/&gt;
&amp;gt; group by 1, 2;&lt;/p&gt;

&lt;p&gt;I have seen positional parameters for ORDER BY expressions, not typically used in GROUP BY. Looking at both DB2 and Oracle documentation, it seems neither support positional parameters.&lt;/p&gt;

&lt;p&gt;&amp;gt; An implementation question on this note-- does the language code have a way of looking&lt;br/&gt;
&amp;gt; at two expressions (ValueNode?) and checking to see if they are equivalent? We&apos;ll need&lt;br/&gt;
&amp;gt; some way of doing this to match an expression in the group by list to an expression&lt;br/&gt;
&amp;gt; in the select list right?&lt;/p&gt;

&lt;p&gt;Correct. Don&apos;t think there is any existing expression matching to compare two expressions. DB2 docs discuss how group by expressions are matched in SQL reference manual. (Page 484: &lt;a href=&quot;ftp://ftp.software.ibm.com/ps/products/db2/info/vr82/pdf/en_US/db2s1e81.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ftp://ftp.software.ibm.com/ps/products/db2/info/vr82/pdf/en_US/db2s1e81.pdf&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&amp;gt; 2. I assume that an expression in a group by list must appear in the select list without &lt;br/&gt;
&amp;gt; aggregation right? Is this an error?&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; select x+1, x+2, sum&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&amp;gt; from test&lt;br/&gt;
&amp;gt; group by x&lt;/p&gt;

&lt;p&gt;NO... This is a valid query. See the reference I provided above. &lt;/p&gt;

&lt;p&gt;&amp;gt; 3. What do we do with duplicates? i.e.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; select x+1, x+1, sum&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&amp;gt; from test&lt;br/&gt;
&amp;gt; group by x+1, x+1;&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Is this an error? The current implementation throws an error if the same column&lt;br/&gt;
&amp;gt; occurs more than once in the group by list.&lt;/p&gt;

&lt;p&gt;I am not sure why Derby currently considers this an error... Looking at the code, it seems it may be looking for ambiguous column references (like &apos;x&apos; being part of two different tables in from_list), which makes sense, but not sure why duplicate references should be prevented.&lt;/p&gt;

&lt;p&gt;&amp;gt; Is there a standard somewhere which I should consult before trying to nail down the functionality? &lt;/p&gt;

&lt;p&gt;Unfortunately, NO.... SQL 2003 seems to allow only column references in GROUP BY clause. But both DB2 and Oracle allow expressions in GROUP BY list and likely allowed by other database vendors too. You could use either DB2 or Oracle docs to understand how this functionality is defined there. Much easier to read these docs than confusing SQL 2003 spec.&lt;/p&gt;</comment>
                            <comment id="12421516" author="mkhettry" created="Mon, 17 Jul 2006 05:52:10 +0100"  >&lt;p&gt;Functionally, this patch supports expressions in the group by list. An expression&lt;br/&gt;
in the group by list can also be used in the select list. For example if the grouping&lt;br/&gt;
expression is c1+c2, then a valid expression in the select list would be &lt;br/&gt;
c1+c2+1. The expression matching facility is not smart enough to allow c1+1+c2.&lt;/p&gt;

&lt;p&gt;This patch does not allow the use of grouping expressions in the having clause&lt;br/&gt;
or order by clause. These are restrictions for now which should be removed&lt;br/&gt;
eventually. For more information on group by expressions:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.pdc.kth.se/doc/SP/manuals/db2-5.0/html/db2s0/db2s0176.htm#HDRGRPBY&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.pdc.kth.se/doc/SP/manuals/db2-5.0/html/db2s0/db2s0176.htm#HDRGRPBY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Another change has been to allow the use of duplicate grouping expressions: i.e&lt;br/&gt;
select a, sum(b) from test group by a,a;&lt;/p&gt;

&lt;p&gt;Error messages have been changed. The most noticeable change is the use&lt;br/&gt;
of the more general sql exception: LANG_INVALID_GROUPED_SELECT_LIST.&lt;/p&gt;

&lt;p&gt;VerifyAggregateExpressionsVisitor&lt;/p&gt;

&lt;p&gt;o disallows java nodes. This should take care of functions in java. &lt;br/&gt;
o the skipChildren method doesn&apos;t traverse a subtree that contains&lt;br/&gt;
  any grouping expression.&lt;br/&gt;
o the error messages are more appropriate-- LANG_INVALID_GROUPED_SELECT_LIST.&lt;/p&gt;

&lt;p&gt;SelectNode&lt;/p&gt;

&lt;p&gt;o calls preprocess on the group by list. This is needed because expressions &lt;br/&gt;
can get rewritten in the select list but not in the grouping list causing&lt;br/&gt;
problems when the result set is generated.&lt;/p&gt;

&lt;p&gt;GroupByNode&lt;/p&gt;

&lt;p&gt;o changes to init() take care of the case where gropuing expressions is&lt;br/&gt;
not a column reference.&lt;/p&gt;

&lt;p&gt;o the rewrite logic is a bit different now. Earlier, we would change&lt;br/&gt;
each unaggregate ColumnReference in the select list and point it to the&lt;br/&gt;
GroupByColumn. Now we replace each group by expression that we find&lt;br/&gt;
in the projection list with a virtual column node that effectively points&lt;br/&gt;
to a result column in the result set doing the group by. In addition&lt;br/&gt;
the original routine which did the rewrite is now split up into two separate&lt;br/&gt;
and smaller routines: addUnAggColumns and addAggregateColumns.&lt;/p&gt;

&lt;p&gt;GroupByColumn&lt;/p&gt;

&lt;p&gt;o now uses a ValueNode instead of a ColumnReference. Unused methods zapped.&lt;/p&gt;

&lt;p&gt;GroupByDiff&lt;/p&gt;

&lt;p&gt;o verifyUniqueGroupingColumn discarded. This was a restriction earlier and&lt;br/&gt;
it does not make sense.&lt;/p&gt;

&lt;p&gt;o findGroupingColumn now does the hard work of finding a group by column&lt;br/&gt;
for a given expression.&lt;/p&gt;

&lt;p&gt;sqlgrammer&lt;/p&gt;

&lt;p&gt;o use additiveExpression instead of columnReference.&lt;/p&gt;

&lt;p&gt;GroupByExpressionTest.java&lt;/p&gt;

&lt;p&gt;o JUnit test case for this functionality.&lt;/p&gt;




</comment>
                            <comment id="12423482" author="mkhettry" created="Tue, 25 Jul 2006 23:59:37 +0100"  >&lt;p&gt;incorporate feedback from code review.&lt;/p&gt;</comment>
                            <comment id="12423712" author="mkhettry" created="Wed, 26 Jul 2006 21:38:26 +0100"  >&lt;p&gt;I found a problem in one of my changes. Also got rid of a lot of white space only diffs. &lt;/p&gt;</comment>
                            <comment id="12423742" author="army" created="Thu, 27 Jul 2006 00:49:01 +0100"  >&lt;p&gt;Review comments incorporated into version 3 and 4 patches can be found here:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://article.gmane.org/gmane.comp.apache.db.derby.devel/24480&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.apache.db.derby.devel/24480&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Review comments on the phase 4 patch can be found here:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://article.gmane.org/gmane.comp.apache.db.derby.devel/24708&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.apache.db.derby.devel/24708&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12424010" author="yipng" created="Fri, 28 Jul 2006 07:28:03 +0100"  >&lt;p&gt;Hi Manish:&lt;/p&gt;

&lt;p&gt;   I am also reviewing your &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-883&quot; title=&quot;Enhance GROUP BY clause to support expressions instead of just column references.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-883&quot;&gt;&lt;del&gt;DERBY-883&lt;/del&gt;&lt;/a&gt; patch.  Since the group by clause has been relaxed to allow expressions now, we&apos;ll need to return a proper SQLSTATE for invalid aggregate functions use in group by clause.  i.e.:  The following test is throwing a NPE:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t1 (c1 int, c2 varchar(10));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t1 values (1, &apos;data1&apos;), (2, &apos;data1&apos;), (3, &apos;data2&apos;);&lt;br/&gt;
3 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select sum(c1), 1 from t1 group by sum(c1);&lt;br/&gt;
ERROR XJ001: Java exception: &apos;: java.lang.NullPointerException&apos;.&lt;br/&gt;
ij&amp;gt; select * from t1;&lt;br/&gt;
ERROR 40XT0: An internal error was identified by RawStore module.&lt;/p&gt;

&lt;p&gt;   I&apos;ll post additional comments after I have review all the changes.&lt;/p&gt;</comment>
                            <comment id="12424173" author="mkhettry" created="Fri, 28 Jul 2006 22:26:37 +0100"  >&lt;p&gt;This patch addresses issues raised by Army and Yip. &lt;/p&gt;

&lt;p&gt;1. Flag error for aggregate in group by list.  Changes to sqlgrammar.jj, SQLState.java and messages_en.properties. Other language files need to be changed too.&lt;/p&gt;

&lt;p&gt;2. Remove unused SQL state (42Y19). &lt;/p&gt;

&lt;p&gt;3. Since the junit file (GroupByExpressionTest.java) is new, use spaces instead of tabs to indent. Fix indentation for long lines.&lt;/p&gt;

&lt;p&gt;4. Remove commented out code.&lt;/p&gt;

&lt;p&gt;5. Add a few comments suggested by Army.&lt;/p&gt;

&lt;p&gt;6. Test ternary operator node#isEquivalent in test case.&lt;/p&gt;
</comment>
                            <comment id="12427044" author="yipng" created="Wed, 9 Aug 2006 23:37:16 +0100"  >&lt;p&gt;Thanks for continuing to improve the patch, Manish.  The changes look good to me and I think this patch is ready for commit.  +1&lt;/p&gt;</comment>
                            <comment id="12427050" author="djd" created="Wed, 9 Aug 2006 23:54:01 +0100"  >&lt;p&gt;Darn - this patch doesn&apos;t apply cleanly for me, about 8-10 files have conflicts, otherwise I would have committed it.&lt;/p&gt;</comment>
                            <comment id="12427379" author="mkhettry" created="Fri, 11 Aug 2006 01:45:45 +0100"  >&lt;p&gt;svn update to revision 430199. Hopefully this patch will apply cleanly.&lt;/p&gt;
</comment>
                            <comment id="12427380" author="mkhettry" created="Fri, 11 Aug 2006 01:47:12 +0100"  >&lt;p&gt;Minor correction to previous patch.&lt;/p&gt;</comment>
                            <comment id="12427381" author="mkhettry" created="Fri, 11 Aug 2006 01:48:10 +0100"  >&lt;p&gt;Dan could you try the last patch file attached with this bug?&lt;/p&gt;</comment>
                            <comment id="12428745" author="djd" created="Thu, 17 Aug 2006 20:02:19 +0100"  >&lt;p&gt;Sorry I missed this was available, I will look at committing this.&lt;/p&gt;</comment>
                            <comment id="12429218" author="djd" created="Sat, 19 Aug 2006 20:07:30 +0100"  >&lt;p&gt;Manish, can you fix up the patch so it works with the current state of the trunk. BaseJDBCTestCase has moved and the changes to sqlgrammar.jaa and CoalesceFunctionNode do not apply cleanly. If you can get this done this weekend then I will apply it.&lt;/p&gt;</comment>
                            <comment id="12430659" author="mikem" created="Fri, 25 Aug 2006 23:19:25 +0100"  >&lt;p&gt;This looks like a good thing to get into 10.2,.&lt;/p&gt;</comment>
                            <comment id="12430668" author="djd" created="Sat, 26 Aug 2006 00:27:12 +0100"  >&lt;p&gt;I  spent  some time on this patch and have it merged to trunk - will run tests and then commit.&lt;/p&gt;</comment>
                            <comment id="12430669" author="mkhettry" created="Sat, 26 Aug 2006 00:37:15 +0100"  >&lt;p&gt;Synced to rev 434408. Use the new JUnit test case/test setup classes. Passed derbylang.&lt;/p&gt;</comment>
                            <comment id="12430671" author="djd" created="Sat, 26 Aug 2006 00:41:26 +0100"  >&lt;p&gt;Were there any function changes between patch 6 and 7? &lt;/p&gt;</comment>
                            <comment id="12430672" author="mkhettry" created="Sat, 26 Aug 2006 00:56:02 +0100"  >&lt;p&gt;I&apos;m not sure what you mean by function changes-- one new function has been added to BaseJDBCTestCase (although it was added to the &quot;old&quot; BaseJDBCTestCase as well). The suite method in the GroupByExpressionTest.junit as well as the setUp/tearDown methods have changed slightly, but no new functions anywhere and no methods modified anywhere else.&lt;/p&gt;
</comment>
                            <comment id="12430676" author="djd" created="Sat, 26 Aug 2006 01:49:45 +0100"  >&lt;p&gt;Sorry I was on the way to the bus when I asked the question so it was brief.&lt;br/&gt;
I meant is the functionality provided by patchs 6 and 7 the same, did you fix any bugs etc. between 6 and 7 or was it just adjusting to the codeline changes. I&apos;ve already started tests with my merge of 6 so I&apos;ll keep with that unless there&apos;s added benefit to patch 7.&lt;/p&gt;</comment>
                            <comment id="12430681" author="mkhettry" created="Sat, 26 Aug 2006 02:35:10 +0100"  >&lt;p&gt;no functional changes, so if you&apos;ve fixed up patch 6 to work, then go with it. &lt;/p&gt;</comment>
                            <comment id="12430692" author="djd" created="Sat, 26 Aug 2006 04:56:38 +0100"  >&lt;p&gt;Patch 883.patch6.txt applied to trunk with changes below as revision 437070.&lt;/p&gt;


&lt;p&gt;0) Merged by hand to latest codeline, only one real clash due to other added methods on ColumnReference&lt;br/&gt;
1) Licence header changed for new files to match new policy&lt;br/&gt;
2) Adapt patch for new location of BaseJDBCTestCase&lt;br/&gt;
3) Cleanup of new GroupByExpressionTest to use new single connection model provided by BaseJDBCTestCase and not have a single static Connection field. Static fields will cause a problem if multiple tests are run concurrently.&lt;br/&gt;
4) Minor cleanup of new assert in BaseJDBCTestCase&lt;/p&gt;


&lt;p&gt;Thanks Manish, especially for sticking with it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12431046" author="djd" created="Mon, 28 Aug 2006 20:45:53 +0100"  >&lt;p&gt;Change was commited to trunk (10.3)&lt;/p&gt;</comment>
                            <comment id="12431594" author="kristwaa" created="Wed, 30 Aug 2006 15:48:30 +0100"  >&lt;p&gt;Are there any plans to merge 883.patch6.txt (revision 437070) to 10.2?&lt;br/&gt;
I found out that it fixes the NPE with COALESCE (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1774&quot; title=&quot;NullPointerException when using COALESCE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1774&quot;&gt;&lt;del&gt;DERBY-1774&lt;/del&gt;&lt;/a&gt;). I don&apos;t know why.&lt;/p&gt;

&lt;p&gt;I tried to merge by applying the diff from &apos;svn diff -r 437069:437070&apos;, and that worked fine.&lt;/p&gt;</comment>
                            <comment id="12431598" author="djd" created="Wed, 30 Aug 2006 16:02:23 +0100"  >&lt;p&gt;&quot;worked fine&quot; as in merged without errors, or &quot;worked fine&quot; as in derbyall passed on the branch wih the merge changes?&lt;/p&gt;</comment>
                            <comment id="12431617" author="kristwaa" created="Wed, 30 Aug 2006 17:27:03 +0100"  >&lt;p&gt;The former; merged without errors.&lt;br/&gt;
Was this a general question, or is there reason to believe a merge will cause problems?&lt;br/&gt;
I&apos;ll start a derbyall tonight, and report back tomorrow.&lt;/p&gt;</comment>
                            <comment id="12431994" author="kristwaa" created="Thu, 31 Aug 2006 22:59:30 +0100"  >&lt;p&gt;derbyall with the patch 6 merged ran 673 tests on Solaris10, Sun JDK 1.5.&lt;br/&gt;
1 failure, which I think might be caused by my test enviroment; Upgrade_10_1_10_2.java.&lt;/p&gt;</comment>
                            <comment id="12432257" author="djd" created="Sat, 2 Sep 2006 00:45:47 +0100"  >&lt;p&gt;Is this issue resolved now?&lt;/p&gt;</comment>
                            <comment id="12432263" author="mkhettry" created="Sat, 2 Sep 2006 01:15:57 +0100"  >&lt;p&gt;I think the issue can be closed. &lt;/p&gt;

&lt;p&gt;I&apos;m not sure if we want to allow the use of grouping expressions in the having clause; i.e.&lt;/p&gt;

&lt;p&gt;select c+1, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
from t&lt;br/&gt;
group by c+1&lt;br/&gt;
having c+1 &amp;gt; 1;&lt;/p&gt;

&lt;p&gt;I only have access to mysql, which doesn&apos;t allow this but does let you do&lt;/p&gt;

&lt;p&gt;select c, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
from t&lt;br/&gt;
group by c&lt;br/&gt;
having c &amp;gt; 1;&lt;/p&gt;

&lt;p&gt;If we do, then we need another bug or a subtask of this issue.&lt;/p&gt;</comment>
                            <comment id="12444876" author="oysteing" created="Thu, 26 Oct 2006 13:25:33 +0100"  >&lt;p&gt;According to the release notes, this is part of 10.2. However, it is not documented in the 10.2 manuals, and the Fix Version for this issue says 10.3.   What is correct?&lt;/p&gt;</comment>
                            <comment id="12445974" author="yipng" created="Tue, 31 Oct 2006 17:43:56 +0000"  >&lt;p&gt;This feature is integrated into 10.2, so the fix version should be 10.2.1.6 and not 10.3.0.0.&lt;/p&gt;

&lt;p&gt;Including the Documentation component since it needs to be documented in 10.2 reference manual - GROUP BY clause.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://db.apache.org/derby/docs/10.2/ref/rrefsqlj32654.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/docs/10.2/ref/rrefsqlj32654.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12445990" author="yipng" created="Tue, 31 Oct 2006 18:30:04 +0000"  >&lt;p&gt;Some discussions regarding GROUP BY with expression in dev-list:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/Functions-in-GROUP-BY-expressions--%28related-to-DERBY-883%29-tf2517296.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Functions-in-GROUP-BY-expressions--%28related-to-DERBY-883%29-tf2517296.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12458257" author="fuzzylogic" created="Wed, 13 Dec 2006 20:18:34 +0000"  >&lt;p&gt;Marking this resolved. Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2170&quot; title=&quot;Document the ability to use functions in GROUP BY expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2170&quot;&gt;DERBY-2170&lt;/a&gt; to cover the documentation update.&lt;/p&gt;</comment>
                            <comment id="12562048" author="dyret" created="Thu, 24 Jan 2008 13:10:02 +0000"  >&lt;p&gt;This issue is resolved and has not been updated in the last 12 months (since 24/Jan/07). &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12437666">DERBY-4403</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12512870">DERBY-5313</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12379465">DERBY-3094</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12354209">DERBY-2014</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12354083">DERBY-2008</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12358554">DERBY-2170</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12336983" name="883.patch.txt" size="81230" author="mkhettry" created="Mon, 17 Jul 2006 05:53:13 +0100"/>
                            <attachment id="12337511" name="883.patch3.txt" size="79524" author="mkhettry" created="Tue, 25 Jul 2006 23:59:37 +0100"/>
                            <attachment id="12337590" name="883.patch4.txt" size="75005" author="mkhettry" created="Wed, 26 Jul 2006 21:38:26 +0100"/>
                            <attachment id="12337731" name="883.patch5.txt" size="82822" author="mkhettry" created="Fri, 28 Jul 2006 22:26:37 +0100"/>
                            <attachment id="12338659" name="883.patch6.txt" size="82302" author="mkhettry" created="Fri, 11 Aug 2006 01:47:12 +0100"/>
                            <attachment id="12338658" name="883.patch6.txt" size="83123" author="mkhettry" created="Fri, 11 Aug 2006 01:45:45 +0100"/>
                            <attachment id="12339626" name="883.patch7.txt" size="82851" author="mkhettry" created="Sat, 26 Aug 2006 00:37:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Apr 2006 22:59:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29761</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0sl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>