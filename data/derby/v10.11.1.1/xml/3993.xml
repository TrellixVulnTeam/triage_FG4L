<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:08:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3993/DERBY-3993.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3993] With IBM 1.6 T_RawStoreFactory fails with There should be 0 observers, but we still have 1 observers on Win 2K</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3993</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;On Win2K T_RawStoreFactory fails consistently with &lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20081105_025433_lHdSMr&lt;br/&gt;
JIT  - r9_20081031_1330&lt;br/&gt;
GC   - 20081027_AB)&lt;br/&gt;
JCL  - 20081106_01&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: T_RawStoreFactory jdk1.6.0 2008-12-17 09:37:49 ***&lt;br/&gt;
2 del&lt;br/&gt;
&amp;lt; &amp;#8211; Unit Test T_RawStoreFactory finished&lt;br/&gt;
2 add&lt;br/&gt;
&amp;gt; There should be 0 observers, but we still have 1 observers.&lt;br/&gt;
&amp;gt; Shutting down due to unit test failure.&lt;br/&gt;
Test Failed.&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have seen the same failure on Linux and Windows XP intermittently with IBM 1.6.&lt;/p&gt;

</description>
                <environment>java version &amp;quot;1.6.0&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))&lt;br/&gt;
IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20081105_025433_lHdSMr&lt;br/&gt;
JIT  - r9_20081031_1330&lt;br/&gt;
GC   - 20081027_AB)&lt;br/&gt;
JCL  - 20081106_01&lt;br/&gt;
</environment>
        <key id="12410914">DERBY-3993</key>
            <summary>With IBM 1.6 T_RawStoreFactory fails with There should be 0 observers, but we still have 1 observers on Win 2K</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikem">Mike Matrigali</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                            <label>derby_triage10_8</label>
                    </labels>
                <created>Wed, 17 Dec 2008 18:35:02 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:08 +0100</updated>
                            <resolved>Fri, 10 Jun 2011 16:36:35 +0100</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.2.4</fixVersion>
                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12658644" author="knutanders" created="Mon, 22 Dec 2008 19:59:32 +0000"  >&lt;p&gt;The message is printed by debug code in Xact.doComplete():&lt;/p&gt;

&lt;p&gt;		if (SanityManager.DEBUG) &lt;br/&gt;
        {&lt;br/&gt;
			if (countObservers() != 0)&lt;/p&gt;
            {
				System.out.println(
                    &quot;There should be 0 observers, but we still have &quot;
					+ countObservers() + &quot; observers.&quot;);
				notifyObservers(null);
            }
&lt;p&gt;		}&lt;/p&gt;</comment>
                            <comment id="12658647" author="knutanders" created="Mon, 22 Dec 2008 20:09:34 +0000"  >&lt;p&gt;Perhaps we should apply this patch to get the stack trace when this happens? It replaces the call to System.out.println() with a call to SanityManager.THROWASSERT().&lt;/p&gt;</comment>
                            <comment id="12658668" author="myrna" created="Mon, 22 Dec 2008 21:23:53 +0000"  >&lt;p&gt;That sounds good to me. It&apos;s pretty rare, but we&apos;ve now seen it with ibm16 and ibm&apos;s weme6.1 (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-654&quot; title=&quot;unit/T_RawStoreFactory.unit fails with an assert failure in J2ME/CDC/FP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-654&quot;&gt;&lt;del&gt;DERBY-654&lt;/del&gt;&lt;/a&gt;). More info would be better.&lt;/p&gt;</comment>
                            <comment id="12658800" author="knutanders" created="Tue, 23 Dec 2008 09:00:00 +0000"  >&lt;p&gt;Committed assert.diff with revision 728907.&lt;/p&gt;</comment>
                            <comment id="12661652" author="myrna" created="Wed, 7 Jan 2009 18:08:21 +0000"  >&lt;p&gt;I should add the stack trace from derby.log:&lt;br/&gt;
....&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;     P706 : update to null true - col 14&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; Pass - RawStoreFactory P706: multiPortion true segment = -1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; Pass - RawStoreFactory P707: segment = -1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; FAIL - org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers.&lt;br/&gt;
org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers.&lt;br/&gt;
	at org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162)&lt;br/&gt;
	at org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.Xact.doComplete(Xact.java:1969)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.Xact.preComplete(Xact.java:1925)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.Xact.prepareCommit(Xact.java:769)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:882)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:679)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.store.T_Util.t_commit(T_Util.java:840)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.TC001(T_RawStoreFactory.java:7311)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTempTests(T_RawStoreFactory.java:417)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTestSet(T_RawStoreFactory.java:248)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.T_MultiIterations.runTests(T_MultiIterations.java:95)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.T_MultiThreadedIterations.runTests(T_MultiThreadedIterations.java:92)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.T_Generic.Execute(T_Generic.java:118)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runATest(BasicUnitTestManager.java:184)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runTests(BasicUnitTestManager.java:246)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:93)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(FileMonitor.java:60)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)&lt;br/&gt;
---------------&lt;br/&gt;
Stack traces for all live threads:&lt;br/&gt;
Thread name=derby.rawStoreDaemon id=13 priority=5 state=TIMED_WAITING isdaemon=true&lt;br/&gt;
	java.lang.Object.wait(Native Method)&lt;br/&gt;
	java.lang.Object.wait(Object.java:196)&lt;br/&gt;
	org.apache.derby.impl.services.daemon.BasicDaemon.rest(BasicDaemon.java:571)&lt;br/&gt;
	org.apache.derby.impl.services.daemon.BasicDaemon.run(BasicDaemon.java:388)&lt;br/&gt;
	java.lang.Thread.run(Thread.java:735)&lt;/p&gt;

&lt;p&gt;Thread name=Signal Dispatcher id=2 priority=5 state=RUNNABLE isdaemon=true&lt;br/&gt;
	com.ibm.misc.SignalDispatcher.waitForSignal(Native Method)&lt;br/&gt;
	com.ibm.misc.SignalDispatcher.run(SignalDispatcher.java:54)&lt;/p&gt;

&lt;p&gt;Thread name=main id=1 priority=5 state=RUNNABLE isdaemon=false&lt;br/&gt;
	java.lang.Thread.getStackTraceImpl(Native Method)&lt;br/&gt;
	java.lang.Thread.getStackTrace(Thread.java:1039)&lt;br/&gt;
	java.lang.Thread.getAllStackTraces(Thread.java:1067)&lt;br/&gt;
	org.apache.derby.shared.common.sanity.ThreadDump.getStackDumpString(ThreadDump.java:34)&lt;br/&gt;
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)&lt;br/&gt;
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)&lt;br/&gt;
	java.lang.reflect.Method.invoke(Method.java:599)&lt;br/&gt;
	org.apache.derby.shared.common.sanity.AssertFailure$1.run(AssertFailure.java:165)&lt;br/&gt;
	java.security.AccessController.doPrivileged(AccessController.java:251)&lt;br/&gt;
	org.apache.derby.shared.common.sanity.AssertFailure.dumpThreads(AssertFailure.java:159)&lt;br/&gt;
	org.apache.derby.shared.common.sanity.AssertFailure.&amp;lt;init&amp;gt;(AssertFailure.java:72)&lt;br/&gt;
	org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162)&lt;br/&gt;
	org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147)&lt;br/&gt;
	org.apache.derby.impl.store.raw.xact.Xact.doComplete(Xact.java:1969)&lt;br/&gt;
	org.apache.derby.impl.store.raw.xact.Xact.preComplete(Xact.java:1925)&lt;br/&gt;
	org.apache.derby.impl.store.raw.xact.Xact.prepareCommit(Xact.java:769)&lt;br/&gt;
	org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:882)&lt;br/&gt;
	org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:679)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.store.T_Util.t_commit(T_Util.java:840)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.TC001(T_RawStoreFactory.java:7311)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTempTests(T_RawStoreFactory.java:417)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTestSet(T_RawStoreFactory.java:248)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.T_MultiIterations.runTests(T_MultiIterations.java:95)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.T_MultiThreadedIterations.runTests(T_MultiThreadedIterations.java:92)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.T_Generic.Execute(T_Generic.java:118)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runATest(BasicUnitTestManager.java:184)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runTests(BasicUnitTestManager.java:246)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:93)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(FileMonitor.java:60)&lt;br/&gt;
	org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)&lt;/p&gt;

&lt;p&gt;Thread name=MemoryPoolMXBean notification dispatcher id=10 priority=6 state=RUNNABLE isdaemon=true&lt;br/&gt;
	com.ibm.lang.management.MemoryNotificationThread.processNotificationLoop(Native Method)&lt;br/&gt;
	com.ibm.lang.management.MemoryNotificationThread.run(MemoryNotificationThread.java:55)&lt;/p&gt;

&lt;p&gt;Thread name=Thread-6 id=12 priority=5 state=TIMED_WAITING isdaemon=true&lt;br/&gt;
	java.lang.Thread.sleep(Native Method)&lt;br/&gt;
	java.lang.Thread.sleep(Thread.java:850)&lt;br/&gt;
	org.apache.derbyTesting.unitTests.harness.T_Bomb.run(T_Bomb.java:105)&lt;br/&gt;
	java.lang.Thread.run(Thread.java:735)&lt;/p&gt;

&lt;p&gt;Thread name=Gc Slave Thread id=5 priority=5 state=RUNNABLE isdaemon=true&lt;/p&gt;

&lt;p&gt;Thread name=derby.antiGC id=6 priority=1 state=WAITING isdaemon=true&lt;br/&gt;
	java.lang.Object.wait(Native Method)&lt;br/&gt;
	java.lang.Object.wait(Object.java:167)&lt;br/&gt;
	org.apache.derby.impl.services.monitor.AntiGC.run(BaseMonitor.java:2217)&lt;br/&gt;
	java.lang.Thread.run(Thread.java:735)&lt;/p&gt;

&lt;p&gt;Thread name=JIT Compilation Thread id=4 priority=10 state=RUNNABLE isdaemon=true&lt;/p&gt;

&lt;p&gt;Thread name=Finalizer thread id=7 priority=5 state=RUNNABLE isdaemon=true&lt;/p&gt;

&lt;p&gt;Thread name=Thread-2 id=8 priority=5 state=WAITING isdaemon=true&lt;br/&gt;
	java.lang.Object.wait(Native Method)&lt;br/&gt;
	java.lang.Object.wait(Object.java:167)&lt;br/&gt;
	java.util.Timer$TimerImpl.run(Timer.java:210)&lt;/p&gt;


&lt;p&gt;---------------&lt;/p&gt;

&lt;p&gt;2009-01-05 21:19:50.210 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; Test &apos;org.apache.derbyTesting.unitTests.store.T_RawStoreFactory&apos; failed&lt;br/&gt;
2009-01-05 21:19:50.210 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; Test Summary - Run 1, Passed 0, Failed 1, Skipped 0.&lt;br/&gt;
2009-01-05 21:19:50.210 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; Shutting down due to unit test failure, see log for more information.&lt;/p&gt;

&lt;p&gt;2009-01-05 21:19:50.492 GMT:&lt;br/&gt;
Shutting down instance a816c00e-011e-a8aa-306c-ffffbe84b931&lt;br/&gt;
----------------------------------------------------------------&lt;br/&gt;
2009-01-05 21:19:50.570 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; Cleanup action starting&lt;br/&gt;
ERROR XBM01: Startup failed due to an exception. See next exception for details. &lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:279)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.exceptionStartingModule(Monitor.java:677)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1875)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(FileMonitor.java:60)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)&lt;br/&gt;
	... 5 more&lt;br/&gt;
============= begin nested exception, level (1) ===========&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(FileMonitor.java:60)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)&lt;br/&gt;
============= end nested exception, level (1) ===========&lt;br/&gt;
Cleanup action completed&lt;br/&gt;
2009-01-05 21:19:50.585 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; 2009-01-05 21:19:50.585 GMT Thread&lt;span class=&quot;error&quot;&gt;&amp;#91;main,5,main&amp;#93;&lt;/span&gt; Startup failed due to an exception. See next exception for details. &lt;br/&gt;
ERROR XBM01: Startup failed due to an exception. See next exception for details. &lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:279)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.exceptionStartingModule(Monitor.java:677)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1875)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(FileMonitor.java:60)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)&lt;br/&gt;
	... 5 more&lt;br/&gt;
============= begin nested exception, level (1) ===========&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(FileMonitor.java:60)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)&lt;br/&gt;
	at org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)&lt;br/&gt;
============= end nested exception, level (1) ===========&lt;/p&gt;
</comment>
                            <comment id="12661739" author="myrna" created="Wed, 7 Jan 2009 22:16:31 +0000"  >&lt;p&gt;It appears with sane builds (jars or classes).&lt;/p&gt;</comment>
                            <comment id="13007322" author="mikem" created="Wed, 16 Mar 2011 02:32:58 +0000"  >&lt;p&gt;This is reproducing every time in my current environment: sane classes, windows,&lt;br/&gt;
java version:&lt;br/&gt;
s1_ibm16:56&amp;gt;java -version&lt;br/&gt;
java version &quot;1.6.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pwi3260sr9-20101125_01(SR9))&lt;br/&gt;
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr9-20101124_69295 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - 20101124_069295&lt;br/&gt;
JIT  - r9_20101028_17488ifx2&lt;br/&gt;
GC   - 20101027_AA)&lt;br/&gt;
JCL  - 20101119_01&lt;/p&gt;

&lt;p&gt;The problem will only show up in SANE builds as that is the only time we do the sanity check.&lt;/p&gt;

&lt;p&gt;Xact.doComplete() is called near the end of the transaction to take care of any cleanup prior to committing or aborting the transaction.&lt;br/&gt;
It calls notifyObservers(commitOrAbort) and it expects on return that each observer has been notified, and all the observers are coded&lt;br/&gt;
to delete themselves from the observer list as part of this process.  It then asserts that the list should be empty on return.&lt;/p&gt;

&lt;p&gt;The problem that I am seeing is that one of the observers as part of it&apos;s processing manages to add another observer to the list.  I am&lt;br/&gt;
guessing that the problem becomes intermittent because either different JVM&apos;s/memory layouts/hash algorithms result in the order processing of the&lt;br/&gt;
observer list to be different, or different implementations handle the adding of an observer to the list while scanning the list differently.&lt;/p&gt;

&lt;p&gt;In my case in order to process a drop of a container marked drop on commit the raw store interface requires it to first be opened.  The code adds&lt;br/&gt;
a TruncateOnCommit as part of this open as that layer of the code does not know why it is being opened.  I believe it is this &quot;new&quot; TruncateOnCommit&lt;br/&gt;
observer which is left on the observer queue.  Adding an extra notify to the drop on commit processing seems to fix the unit test, I&apos;ll see if that causes&lt;br/&gt;
any problems in the full set of tests.&lt;/p&gt;
</comment>
                            <comment id="13046894" author="mikem" created="Thu, 9 Jun 2011 23:56:31 +0100"  >&lt;p&gt;this fix made it into the 10.8 apache release.&lt;/p&gt;</comment>
                            <comment id="13047219" author="mikem" created="Fri, 10 Jun 2011 15:30:07 +0100"  >&lt;p&gt;backported from trunk to 10.7 branch:&lt;/p&gt;

&lt;p&gt;s107_ibm16:18&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\DropOnCommit.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 1134332.&lt;/p&gt;</comment>
                            <comment id="13047233" author="mikem" created="Fri, 10 Jun 2011 16:01:52 +0100"  >&lt;p&gt;backported fix from trunk to 10.6 branch:&lt;/p&gt;

&lt;p&gt;s106_ibm16:9&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\DropOnCommit.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 1134336.&lt;/p&gt;</comment>
                            <comment id="13047248" author="mikem" created="Fri, 10 Jun 2011 16:36:35 +0100"  >&lt;p&gt;backported fix to 10.5 branch.  For now not backporting anymore, but if any nightlys in previous versions are seeing this error it is a simple backport.&lt;/p&gt;

&lt;p&gt;s105_ibm16:11&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\engine\org\apache\derby\impl\store\raw\data\DropOnCommit.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 1134346.&lt;/p&gt;</comment>
                            <comment id="13685136" author="knutanders" created="Mon, 17 Jun 2013 10:19:08 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12501060">DERBY-5123</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12396627" name="assert.diff" size="608" author="knutanders" created="Mon, 22 Dec 2008 20:09:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 22 Dec 2008 19:59:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0g27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>