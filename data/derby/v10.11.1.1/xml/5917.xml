<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:30:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5917/DERBY-5917.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5917] NoClassDefFoundErrors when running tests without derbynet.jar and derbyclient.jar</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5917</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The following errors are seen when running tests without derbynet.jar and derbyclient.jar in the classpath:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The suite() method in jdbcapi.ClientConnectionPoolDataSourceTest fails with a NoClassDefFoundError (for org/apache/derby/jdbc/ClientConnectionPoolDataSource)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The test_jdbc4_1() test cases in jdbc4.CallableStatementTest, jdbc4.DataSourceTest, jdbc4.ConnectionMethodsTest and jdbc4.AbortTest fail with NoClassDefFoundErrors (for org/apache/derby/client/net/NetResultSet40, org/apache/derby/jdbc/ClientDataSource40 and org/apache/derby/client/net/NetConnection40)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12606347">DERBY-5917</key>
            <summary>NoClassDefFoundErrors when running tests without derbynet.jar and derbyclient.jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2012 05:05:20 +0100</created>
                <updated>Mon, 10 Sep 2012 13:18:29 +0100</updated>
                            <resolved>Mon, 10 Sep 2012 13:18:28 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13450039" author="knutanders" created="Thu, 6 Sep 2012 22:01:32 +0100"  >&lt;p&gt;The patch d5917-1a.diff makes the following changes:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TestConfiguration: Shortcut helper methods for client/server tests earlier if the client or server is missing, to prevent attempts to load client classes when building intermediate test suites that are eventually discarded.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Wrapper41, Wrapper41Conn, Wrapper41DataSource: Reorder the instanceof checks in the constructors so that the checks for embedded classes come first. Then we won&apos;t check for client classes if only the embedded tests run.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This changes makes the previously failing tests pass when run without client and server jars. I&apos;ve also successfully run the full regression suite (with client/server jars).&lt;/p&gt;</comment>
                            <comment id="13450652" author="knutanders" created="Fri, 7 Sep 2012 15:16:12 +0100"  >&lt;p&gt;Committed revision 1382032.&lt;/p&gt;</comment>
                            <comment id="13450658" author="knutanders" created="Fri, 7 Sep 2012 15:28:29 +0100"  >&lt;p&gt;There are still two tests failing when running without client and server jars. Didn&apos;t notice them in the first attempt, since the failure in the suite() method prevented the jdbcapi from running. XATransactionTest fails because it uses the ClientXid class directly, also when running embedded tests. CacheSessionDataTest fails because it checks if the connection is a client.am.Connection instance in order to find out if it&apos;s running with the client.&lt;/p&gt;</comment>
                            <comment id="13451919" author="knutanders" created="Mon, 10 Sep 2012 13:16:35 +0100"  >&lt;p&gt;Attaching d5917-2a which fixes the remaining issues:&lt;/p&gt;

&lt;p&gt;XATransactionTest: Use XATestUtil to create Xid instead of using ClientXid (also needed to add hashCode() and equals() methods to the utilXid class used by XATestUtil so that it could be used in assertEquals().)&lt;/p&gt;

&lt;p&gt;CacheSessionDataTest: Test for usingDerbyNetClient() instead of instanceof client.am.Connection&lt;/p&gt;

&lt;p&gt;Compatibility tests: disable if derbyclient.jar or derbynet.jar is missing.&lt;/p&gt;

&lt;p&gt;derbyrunjartest: Don&apos;t test the server command if the server is not available.&lt;/p&gt;

&lt;p&gt;All the regression tests ran cleanly with the patch (tested both with and without server/client jars in classpath).&lt;/p&gt;</comment>
                            <comment id="13451920" author="knutanders" created="Mon, 10 Sep 2012 13:18:29 +0100"  >&lt;p&gt;Committed revision 1382791.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12544111" name="d5917-1a.diff" size="10146" author="knutanders" created="Thu, 6 Sep 2012 22:01:32 +0100"/>
                            <attachment id="12544455" name="d5917-2a.diff" size="9306" author="knutanders" created="Mon, 10 Sep 2012 13:16:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245822</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0a67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>