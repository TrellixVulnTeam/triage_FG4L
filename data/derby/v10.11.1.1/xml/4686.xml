<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:38:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4686/DERBY-4686.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4686] SQLBinary.writeBlob is inefficient, reading one byte at a time from the source BLOB</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4686</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;SQLBinary.writeBlob is inefficient, since it is only reading one byte at the time from the source BLOB.&lt;br/&gt;
It would be better if a transfer buffer was used to facilitate the write.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465960">DERBY-4686</key>
            <summary>SQLBinary.writeBlob is inefficient, reading one byte at a time from the source BLOB</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yunlee">Yun Lee</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                            <label>BLOB</label>
                    </labels>
                <created>Wed, 2 Jun 2010 14:03:27 +0100</created>
                <updated>Mon, 29 Nov 2010 14:23:22 +0000</updated>
                            <resolved>Tue, 15 Jun 2010 09:31:27 +0100</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.5.3.1</fixVersion>
                    <fixVersion>10.6.2.1</fixVersion>
                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>Store</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12877359" author="yunlee" created="Thu, 10 Jun 2010 08:43:48 +0100"  >&lt;p&gt;In the patch, I have added a buffer in transfering, please check it, thanks!&lt;/p&gt;</comment>
                            <comment id="12877438" author="kristwaa" created="Thu, 10 Jun 2010 15:56:59 +0100"  >&lt;p&gt;Thanks for the patch, Yun &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The patch looks good. I think we can improve it by verifying that we actually transfer len bytes, and to avoid infinite loop in the case where there are fewer than len bytes in the stream.&lt;br/&gt;
We can probably reuse error msg SQLState.SET_STREAM_INEXACT_LENGTH_DATA (see ReaderToUTF8Stream.checkSufficientData).&lt;/p&gt;


&lt;p&gt;Regards,&lt;/p&gt;</comment>
                            <comment id="12878222" author="yunlee" created="Sat, 12 Jun 2010 07:48:50 +0100"  >&lt;p&gt;Kristian, thanks for your advice. I agree with your opinion and have attached a new patch, please check it, thanks!&lt;/p&gt;</comment>
                            <comment id="12878870" author="kristwaa" created="Tue, 15 Jun 2010 07:56:37 +0100"  >&lt;p&gt;Thanks, Yun.&lt;/p&gt;

&lt;p&gt;I think the patch looks good, and once the final test run has completed I intend to commit it.&lt;br/&gt;
The latest patch contained a mix of tab and space indents, so I replaced all tabs with four spaces and attached the updated patch. I also verified that the changed code is indeed exercised in our test suite (I found UserLobTest and BooleanValuesTest).&lt;/p&gt;</comment>
                            <comment id="12878885" author="kristwaa" created="Tue, 15 Jun 2010 09:31:27 +0100"  >&lt;p&gt;All tests passed.&lt;br/&gt;
Committed fix to trunk with revision 954748.&lt;/p&gt;

&lt;p&gt;Thank you, Yun!&lt;/p&gt;</comment>
                            <comment id="12879078" author="knutanders" created="Tue, 15 Jun 2010 20:15:53 +0100"  >&lt;p&gt;Would it make sense to replace this line&lt;/p&gt;

&lt;p&gt;    byte[] buffer = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;LEN_OF_BUFFER_TO_WRITE_BLOB&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;with this&lt;/p&gt;

&lt;p&gt;    byte[] buffer = new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;Math.min(len, LEN_OF_BUFFER_TO_WRITE_BLOB)&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;so that we don&apos;t allocate a buffer that&apos;s larger than the value we&apos;re going to read?&lt;/p&gt;</comment>
                            <comment id="12879771" author="yunlee" created="Thu, 17 Jun 2010 14:11:53 +0100"  >&lt;p&gt;Hi, Kristian. Thanks for your scrupulous help, I&apos;m excited! I have added a buffer size optimization in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4686&quot; title=&quot;SQLBinary.writeBlob is inefficient, reading one byte at a time from the source BLOB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4686&quot;&gt;&lt;del&gt;DERBY-4686&lt;/del&gt;&lt;/a&gt;-2.diff, please check it.&lt;/p&gt;

&lt;p&gt;And I will be careful for tab policy in my future work, thanks for your correction! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12879806" author="kristwaa" created="Thu, 17 Jun 2010 16:27:05 +0100"  >&lt;p&gt;Hi Yun,&lt;/p&gt;

&lt;p&gt;It was Knut Anders who suggested the buffer size optimization, but in any case, you&apos;re welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
If possible, we also try to keep lines shorter than 80 characters, but that&apos;s a detail.&lt;/p&gt;

&lt;p&gt;I committed patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4686&quot; title=&quot;SQLBinary.writeBlob is inefficient, reading one byte at a time from the source BLOB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4686&quot;&gt;&lt;del&gt;DERBY-4686&lt;/del&gt;&lt;/a&gt;-2.diff to trunk with revision 955634.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="12882103" author="kristwaa" created="Thu, 24 Jun 2010 10:38:03 +0100"  >&lt;p&gt;Backported to 10.6 with revision 957472 and to 10.5 with revision 957473.&lt;/p&gt;</comment>
                            <comment id="12882104" author="kristwaa" created="Thu, 24 Jun 2010 10:38:23 +0100"  >&lt;p&gt;Closing issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12461296">DERBY-4609</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12447113" name="DERBY-4686-1.diff" size="1913" author="kristwaa" created="Tue, 15 Jun 2010 07:56:37 +0100"/>
                            <attachment id="12446948" name="DERBY-4686-1.diff" size="1889" author="yunlee" created="Sat, 12 Jun 2010 07:48:50 +0100"/>
                            <attachment id="12447341" name="DERBY-4686-2.diff" size="635" author="yunlee" created="Thu, 17 Jun 2010 14:11:53 +0100"/>
                            <attachment id="12446750" name="DERBY-4686.diff" size="1247" author="yunlee" created="Thu, 10 Jun 2010 08:43:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10362"><![CDATA[Performance]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Jun 2010 07:43:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10426"><![CDATA[Known fix]]></customfieldvalue>
    <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ofb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37775</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>