<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4834/DERBY-4834.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4834] Add helper class for working with index statistics in JUnit tests</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4834</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Dealing with index statistics in the JUnit tests require some tedious work, like looking up table and index ids,  doing selects on the SYS.SYSSTATISTICS table, and analyzing the results of these queries.&lt;br/&gt;
To make life easer and the tests easier to read, a set of utility methods will be added to a new class living in the JUnit test framework package.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12476688">DERBY-4834</key>
            <summary>Add helper class for working with index statistics in JUnit tests</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12476686">DERBY-4833</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Oct 2010 17:02:44 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:36 +0100</updated>
                            <resolved>Sun, 20 May 2012 06:22:56 +0100</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.3.3.1</fixVersion>
                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.2.4</fixVersion>
                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12918594" author="kristwaa" created="Wed, 6 Oct 2010 18:02:21 +0100"  >&lt;p&gt;Patch 1a is the first revision of a set of utility methods for dealing with index statistics.&lt;/p&gt;

&lt;p&gt;I plan to commit this tomorrow, but I&apos;m open for comments &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
This issue will be kept open for a while, as I do expect changes have to be made as I start writing the tests for the automatic index statistics creation/update feature.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12918785" author="lilywei" created="Thu, 7 Oct 2010 05:50:14 +0100"  >&lt;p&gt;+1 for me. Do we need other system utility such as locks certain table (or all the tables) is holding, how many open statement or transaction in the system? I thought it might be useful for certain to also understand the stage/resource of derby system. &lt;/p&gt;</comment>
                            <comment id="12918811" author="kristwaa" created="Thu, 7 Oct 2010 08:43:46 +0100"  >&lt;p&gt;Thanks for looking at the patch, Lily.&lt;/p&gt;

&lt;p&gt;Committed patch 1a to trunk with revision 1005347.&lt;/p&gt;

&lt;p&gt;We may need other convenience methods to investigate various parts of the Derby system. One concern I have, is that there is already a lot of stuff &quot;floating around&quot;, but it is not that easy to find it when you need it. Maybe it&apos;s time we write a package.html file for the junit package - describing which classes are entry points for various functionality?&lt;br/&gt;
Another option is to improve the class JavaDoc of the various classes (the first sentence) such that a developer can navigate using the automatically generated JavaDocs.&lt;/p&gt;</comment>
                            <comment id="12918933" author="dagw" created="Thu, 7 Oct 2010 15:58:20 +0100"  >&lt;p&gt;+1 to writing a package.html file for the junit package and/or improve the JavaDoc for the classes!&lt;/p&gt;</comment>
                            <comment id="12919158" author="lilywei" created="Fri, 8 Oct 2010 06:24:04 +0100"  >&lt;p&gt;+1 with a package.html file for the junit packages -describing which classes are entry points for various functionality for its ease of use aspect. In the past, I found finding statistics information in one place easier than having them in lots of places.&lt;/p&gt;</comment>
                            <comment id="12928586" author="kristwaa" created="Fri, 5 Nov 2010 13:40:57 +0000"  >&lt;p&gt;Attached patch 2a, which adds the method assertNoStatsTable.&lt;/p&gt;

&lt;p&gt;Committed to trunk with revision 1031559.&lt;/p&gt;</comment>
                            <comment id="12966121" author="kristwaa" created="Thu, 2 Dec 2010 13:40:56 +0000"  >&lt;p&gt;Attached patch 3a. Committed to trunk with revision 1041374.&lt;br/&gt;
From the commit msg:&lt;/p&gt;

&lt;p&gt;&quot;Introduced a timeout value and expected count when fetching statistics from&lt;br/&gt;
the system table. If a specific number of statistics entries is expected, the&lt;br/&gt;
system table will be queried repeatedly until the correct number is obtained or&lt;br/&gt;
the query times out. The motivation behind this is that the arrival of&lt;br/&gt;
entries in SYS.SYSSTATISTICS isn&apos;t that easy to predict since the work is&lt;br/&gt;
carried out in a background task.&lt;/p&gt;

&lt;p&gt;Also some cleanups in Utilities:&lt;br/&gt;
 o fixed some JavaDoc&lt;br/&gt;
 o fixed formatting&lt;br/&gt;
 o added method sleep&lt;br/&gt;
 o simplified repeatChar&lt;br/&gt;
&quot;&lt;/p&gt;</comment>
                            <comment id="12967116" author="kristwaa" created="Mon, 6 Dec 2010 07:41:38 +0000"  >&lt;p&gt;Attached patch 4a, which simply adds the number of leading columns to the toString output. This is required to easily differentiate between the statistics objects for a multi-column index.&lt;/p&gt;

&lt;p&gt;Committed to trunk with revision 1042537.&lt;/p&gt;</comment>
                            <comment id="13039386" author="kristwaa" created="Wed, 25 May 2011 23:25:15 +0100"  >&lt;p&gt;Closing the issue.&lt;br/&gt;
The initial helper class has been added, and further changes can be made under other JIRAs as required.&lt;/p&gt;</comment>
                            <comment id="13272566" author="mamtas" created="Thu, 10 May 2012 19:07:19 +0100"  >&lt;p&gt;Hi Kristian, I am thinking of backporting this utility to 10.6 and earlier releases. Do you forsee any issue with backporting? I am working on backporting &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5681&quot; title=&quot;When a foreign key constraint on a table is dropped, the associated statistics row for the conglomerate is not removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5681&quot;&gt;&lt;del&gt;DERBY-5681&lt;/del&gt;&lt;/a&gt;(When a foreign key constraint on a table is dropped, the associated statistics row for the conglomerate is not removed) and it will be very useful to have the index statistics utility for the tests added for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5681&quot; title=&quot;When a foreign key constraint on a table is dropped, the associated statistics row for the conglomerate is not removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5681&quot;&gt;&lt;del&gt;DERBY-5681&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think following 4 checkins were made for index statistics helper class&lt;br/&gt;
1005347&lt;br/&gt;
1031559&lt;br/&gt;
1041374&lt;br/&gt;
1042537&lt;/p&gt;</comment>
                            <comment id="13272967" author="mamtas" created="Fri, 11 May 2012 02:12:45 +0100"  >&lt;p&gt;I ran all the junit and derbyall tests after backporting this jira to 10.6 and didn&apos;t run into any issues. I have committed the backport to 10.6 with revision 1336993.&lt;/p&gt;</comment>
                            <comment id="13272969" author="mamtas" created="Fri, 11 May 2012 02:15:00 +0100"  >&lt;p&gt;Reopening for backport&lt;/p&gt;</comment>
                            <comment id="13273046" author="kristwaa" created="Fri, 11 May 2012 06:08:40 +0100"  >&lt;p&gt;Hi Mamta,&lt;/p&gt;

&lt;p&gt;I don&apos;t think there should be any problems backporting this utility. It stands pretty much on its own, querying SYS.SYSSTATISTICS.&lt;/p&gt;</comment>
                            <comment id="13273071" author="mamtas" created="Fri, 11 May 2012 07:20:30 +0100"  >&lt;p&gt;Hi Kristian, thanks for conforming the backport. Backporting went fine with 10.6 and 10.5 codelines&lt;/p&gt;</comment>
                            <comment id="13685297" author="knutanders" created="Mon, 17 Jun 2013 10:19:36 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12456519" name="derby-4834-1a-indexstats_utility_class.diff" size="15232" author="kristwaa" created="Wed, 6 Oct 2010 18:02:20 +0100"/>
                            <attachment id="12458907" name="derby-4834-2a-assertNoStatsTable.diff" size="772" author="kristwaa" created="Fri, 5 Nov 2010 13:42:03 +0000"/>
                            <attachment id="12465134" name="derby-4834-3a-timeout.diff" size="24555" author="kristwaa" created="Thu, 2 Dec 2010 13:40:55 +0000"/>
                            <attachment id="12465366" name="derby-4834-4a-toString_leading_cols.diff" size="744" author="kristwaa" created="Mon, 6 Dec 2010 07:41:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Oct 2010 04:50:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0brr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>