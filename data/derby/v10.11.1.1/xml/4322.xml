<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:41 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4322/DERBY-4322.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4322] intermittent test failure in derbynet/runtimeinfo</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4322</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;A few times in regression testing of builds of the 10.5 branch, and also with the testing cycle of 10.5.2.0 on iseries I&apos;ve seen failures in derbynet/runtimeinfo.&lt;/p&gt;

&lt;p&gt;They look like differences in the Session id and timing differences in return of text to the client.&lt;br/&gt;
For instance, this is with ibm 1.6 on iseries:&lt;br/&gt;
---------------------------------------&lt;br/&gt;
5 del&lt;br/&gt;
&amp;lt; Session # :2&lt;br/&gt;
5a5&lt;br/&gt;
&amp;gt; Session # :52&lt;br/&gt;
12 del&lt;br/&gt;
&amp;lt; Session # :3&lt;br/&gt;
12a12&lt;br/&gt;
&amp;gt; Session # :86&lt;br/&gt;
23 del&lt;br/&gt;
&amp;lt; Session # :2&lt;br/&gt;
23a23&lt;br/&gt;
&amp;gt; Session # :52&lt;br/&gt;
32 del&lt;br/&gt;
&amp;lt; Session # :4&lt;br/&gt;
32a32&lt;br/&gt;
&amp;gt; Session # :88&lt;br/&gt;
41 del&lt;br/&gt;
&amp;lt; Session # :5&lt;br/&gt;
41a41&lt;br/&gt;
&amp;gt; Session # :90&lt;br/&gt;
48 del&lt;br/&gt;
&amp;lt; Session # :6&lt;br/&gt;
48a48&lt;br/&gt;
&amp;gt; Session # :113&lt;br/&gt;
58 del&lt;br/&gt;
&amp;lt; Session # :7&lt;br/&gt;
58a58&lt;br/&gt;
&amp;gt; Session # :117&lt;br/&gt;
---------------------------------------&lt;/p&gt;

&lt;p&gt;And this is an example of a failure on linux/vmware on 7/15/09 (10.5.1.2 revision: 794133)&lt;/p&gt;

&lt;p&gt;---------------------------------------&lt;br/&gt;
5 del&lt;br/&gt;
&amp;lt; Session # :2&lt;br/&gt;
5a5,6&lt;br/&gt;
&amp;gt; Session # :89&lt;br/&gt;
&amp;gt; Session # :62&lt;br/&gt;
12d12&lt;br/&gt;
&amp;lt; Session # :3&lt;br/&gt;
23 del&lt;br/&gt;
&amp;lt; Session # :2&lt;br/&gt;
23a23&lt;br/&gt;
&amp;gt; Session # :90&lt;br/&gt;
29a30,38&lt;br/&gt;
&amp;gt; 	SYSLH0002	VALUES(2)&lt;br/&gt;
&amp;gt; 	SYSLH0001	SELECT count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from sys.systables&lt;br/&gt;
&amp;gt; Session # :62&lt;br/&gt;
&amp;gt; Database :wombat;create=true&lt;br/&gt;
&amp;gt; User :APP&lt;br/&gt;
&amp;gt; # Statements:2&lt;br/&gt;
&amp;gt; Prepared Statement Information: &lt;br/&gt;
&amp;gt; 	Stmt ID		SQLText&lt;br/&gt;
&amp;gt; 	-------------	-----------&lt;br/&gt;
32 del&lt;br/&gt;
&amp;lt; Session # :4&lt;br/&gt;
32a41&lt;br/&gt;
&amp;gt; Session # :92&lt;br/&gt;
35,43d43&lt;br/&gt;
&amp;lt; # Statements:2&lt;br/&gt;
&amp;lt; Prepared Statement Information: &lt;br/&gt;
&amp;lt; 	Stmt ID		SQLText&lt;br/&gt;
&amp;lt; 	-------------	-----------&lt;br/&gt;
&amp;lt; 	SYSLH0002	VALUES(2)&lt;br/&gt;
&amp;lt; 	SYSLH0001	SELECT count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from sys.systables&lt;br/&gt;
&amp;lt; Session # :5&lt;br/&gt;
&amp;lt; Database :wombat;create=true&lt;br/&gt;
&amp;lt; User :APP&lt;br/&gt;
48 del&lt;br/&gt;
&amp;lt; Session # :6&lt;br/&gt;
48a48&lt;br/&gt;
&amp;gt; Session # :101&lt;br/&gt;
58 del&lt;br/&gt;
&amp;lt; Session # :7&lt;br/&gt;
58a58&lt;br/&gt;
&amp;gt; Session # :108&lt;br/&gt;
---------------------------------------&lt;/p&gt;

&lt;p&gt;It seems to me these are fairly innocent, and if they are, then possibly the solution is to backport the conversion of runtimeinfo to junit to 10.5. (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3834&quot; title=&quot;Convert derbynet/runtimeinfo to JUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3834&quot;&gt;&lt;del&gt;DERBY-3834&lt;/del&gt;&lt;/a&gt;, revisions 792001 and 792254.)&lt;/p&gt;</description>
                <environment>Linux/VMware with IBM 1.5 or 1.6; IBM iseries (AS 400/ V5R4M0) with IBM 1.6</environment>
        <key id="12431541">DERBY-4322</key>
            <summary>intermittent test failure in derbynet/runtimeinfo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jul 2009 22:16:03 +0100</created>
                <updated>Mon, 22 Mar 2010 18:29:50 +0000</updated>
                            <resolved>Mon, 22 Mar 2010 18:29:51 +0000</resolved>
                                    <version>10.5.2.0</version>
                                    <fixVersion>10.5.3.1</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12843805" author="myrna" created="Wed, 10 Mar 2010 22:35:54 +0000"  >&lt;p&gt;Because I heard of another possible instance of this test failure, I looked back at the history of that 7/15/09 test run, and it may be of interest that the test derbynet/DerbyNetAutoStart failed just before:&lt;br/&gt;
-------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
Test Failed.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;End:   runtimeinfo jdk1.4.2 DerbyNetClient derbynetmats:derbynetmats 2009-07-16 01:47:06 ***
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/derbynetclientmats/DerbyNetClient/derbynetmats/derbynetmats/DerbyNetAutoStart.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: DerbyNetAutoStart jdk1.4.2 DerbyNetClient derbynetmats:derbynetmats 2009-07-16 01:39:22 ***&lt;br/&gt;
1a2,3&lt;br/&gt;
&amp;gt;   Could not access database through the network server.&lt;br/&gt;
&amp;gt;     The connection was refused because the database database1 was not found.&lt;br/&gt;
2a5,6&lt;br/&gt;
&amp;gt;   Could not access database through the network server.&lt;br/&gt;
&amp;gt;     java.net.ConnectException : Error connecting to server xxxFILTERED_HOSTNAMExxx on port 31415 with message Connection refused.&lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; PASSED.&lt;br/&gt;
6 add&lt;br/&gt;
&amp;gt; java.sql.SQLException: The connection was refused because the database database1 was not found.&lt;br/&gt;
&amp;gt; Caused by: org.apache.derby.client.am.DisconnectException: The connection was refused because the database database1 was not found.&lt;br/&gt;
&amp;gt; 	... 6 more&lt;br/&gt;
&amp;gt; Server start failed: The connection was refused because the database database1 was not found.&lt;br/&gt;
&amp;gt; FAILED.&lt;br/&gt;
Test Failed.&lt;br/&gt;
-------------------------&lt;br/&gt;
So perhaps something is still hanging around holding on to session numbers?&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12846667" author="myrna" created="Wed, 17 Mar 2010 23:28:03 +0000"  >&lt;p&gt;Assuming the problem is really with DerbyNetAutoStart, here&apos;s a patch that tries to slow things down and ensure that the server process gets destroyed.&lt;br/&gt;
I ran DerbyNetAutoStart (successfully) only so far.&lt;/p&gt;</comment>
                            <comment id="12847511" author="kmarsden" created="Fri, 19 Mar 2010 18:54:33 +0000"  >&lt;p&gt;Ran derbyall and committed Myrna&apos;s patch.  I will resolve the issue assuming this is the problem and it can be reopened if it does not correct the problem.&lt;/p&gt;


&lt;p&gt;The theory is that this failure is caused by a problem in the previous test DerbyNetAutostart which launches a process to start the server and can be left pinging if the check for the server in the launching process, does not allow enough time for the server to come up.  The pings increment the session number as seen by runtimeinfo.  So the changes are to DerbyNetAutoStart and are to&lt;/p&gt;

&lt;p&gt;1) Make sure the server launching process retries enough times for the launched process comes up.&lt;br/&gt;
2) Make sure if something does go wrong, the launched process is destroyed&lt;/p&gt;
</comment>
                            <comment id="12848267" author="myrna" created="Mon, 22 Mar 2010 18:29:50 +0000"  >&lt;p&gt;Thanks for the test run &amp;amp; commit Kathey.&lt;br/&gt;
I backported revision 925377 to 10.5, ran derbynetclientmats to be sure, and committed with revision 926246.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12439096" name="DERBY-4322.diff" size="2684" author="myrna" created="Wed, 17 Mar 2010 23:28:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Mar 2010 18:54:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0qxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>