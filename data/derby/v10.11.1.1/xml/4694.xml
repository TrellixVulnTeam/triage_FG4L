<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4694/DERBY-4694.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4694] Build breaks on Mac OS X due to JDK classpath issues</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4694</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The Derby build breaks on OS X, apparently trying to use JDK 1.5/1.6  compile classpath for JDK 1.4.&lt;/p&gt;

&lt;p&gt;A quick look indicates that PropertySetter is only using defaults when configuring the classpaths, and this fails when OS X &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; creates symlinks 1.4 -&amp;gt; 1.6 and 1.5 -&amp;gt; 1.6.&lt;br/&gt;
We should  investigate whether the current JAR inspection logic works on OS X with Apple JDKs as well (it is currently used for Sun and IBM JDKs, as well as for other / unknown JDKs).&lt;/p&gt;

&lt;p&gt;Issue was reported on derby-dev (see &lt;a href=&quot;http://db.markmail.org/thread/wqe73b27rknuezm7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.markmail.org/thread/wqe73b27rknuezm7&lt;/a&gt; ).&lt;br/&gt;
See also this thread for a related issue that may affect OS X: &lt;a href=&quot;http://markmail.org/thread/7w24qwmvgxfctndi&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://markmail.org/thread/7w24qwmvgxfctndi&lt;/a&gt;&lt;/p&gt;</description>
                <environment>Mac OS X JDK 1.6</environment>
        <key id="12466331">DERBY-4694</key>
            <summary>Build breaks on Mac OS X due to JDK classpath issues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 10:11:37 +0100</created>
                <updated>Mon, 29 Nov 2010 14:21:07 +0000</updated>
                            <resolved>Wed, 28 Jul 2010 13:33:58 +0100</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.6.2.1</fixVersion>
                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>Build tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12882557" author="kristwaa" created="Fri, 25 Jun 2010 13:49:24 +0100"  >&lt;p&gt;Attaching patch 1a.&lt;/p&gt;

&lt;p&gt;This changes the way JDKs are located when running on OS X. Up until now the defaults were used, with the patch a search will be performed like for other operating systems.&lt;/p&gt;

&lt;p&gt;Please take the patch for a test-drive if you develop on OS X &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;m interested in two cases:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;mature&quot; OS X installations with JDK 1.4 and 1.5 installed&lt;/li&gt;
	&lt;li&gt;fresh OS X installations where JDK 1.4 and JDK 1.4 are pointing to JDK 1.6.&lt;br/&gt;
For &lt;b&gt;both&lt;/b&gt; of these it may be good to test with JAVA_HOME pointing to 1.5 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and 1.6 &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. On fresh installs this shouldn&apos;t matter, but let&apos;s test it first...&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Patch ready for review.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; /System/Library/Frameworks/JavaVM.framework/Versions/1.5/Home&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home&lt;/p&gt;</comment>
                            <comment id="12882603" author="rhillegas" created="Fri, 25 Jun 2010 15:59:44 +0100"  >&lt;p&gt;Thanks for the patch, Kristian. I have tried it out on my machine, which is what you would call a &quot;mature&quot; OS X installation. I have tried both experiments and have successfully built Derby (and run a heartbeat test) using both a Java 5 and a Java 6 environment. Looks good to me. Thanks.&lt;/p&gt;</comment>
                            <comment id="12883124" author="kristwaa" created="Mon, 28 Jun 2010 13:22:16 +0100"  >&lt;p&gt;Thanks, Rick.&lt;/p&gt;

&lt;p&gt;Since the build breaks anyway for those running with freshly installed OS X (of a recent version), I committed patch 1a to trunk with revision 958555.&lt;br/&gt;
I&apos;ll give it some time before I backport it to 10.6 (not sure about 10.5 yet).&lt;/p&gt;</comment>
                            <comment id="12883856" author="kristwaa" created="Wed, 30 Jun 2010 10:24:02 +0100"  >&lt;p&gt;Attaching a patch adding extra verbose debugging. Enable with -DprintCompilerPropertiesVerbose=true&lt;/p&gt;</comment>
                            <comment id="12883908" author="kmarsden" created="Wed, 30 Jun 2010 14:00:36 +0100"  >&lt;p&gt;See related discussion at: &lt;a href=&quot;http://old.nabble.com/build-on-iMac-OS-X-10.6-ts29031016.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://old.nabble.com/build-on-iMac-OS-X-10.6-ts29031016.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Changing the summary and environment to include Mac as I was having trouble finding this bug last night&lt;/p&gt;</comment>
                            <comment id="12883919" author="kmarsden" created="Wed, 30 Jun 2010 14:37:48 +0100"  >&lt;p&gt;Unfortunately, I seem to be having some trouble applying the patch which seemed to be saved with some garbage on my machine.   Probably more mac newbiness.   I will work on that this evening after i get back from the office.  Below are some of the ls&apos;s.  I don&apos;t know what the A business is. There seem to be real files under there, not just links.&lt;/p&gt;


&lt;p&gt;Katherine-Marsdens-iMac:trunk kmarsden$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions&lt;br/&gt;
total 64&lt;br/&gt;
lrwxr-xr-x  1 root  wheel    5 Jun 20 08:54 1.3 -&amp;gt; 1.3.1&lt;br/&gt;
drwxr-xr-x  3 root  wheel  102 May 28  2009 1.3.1&lt;br/&gt;
lrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.4 -&amp;gt; CurrentJDK&lt;br/&gt;
lrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.4.2 -&amp;gt; CurrentJDK&lt;br/&gt;
lrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.5 -&amp;gt; CurrentJDK&lt;br/&gt;
lrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.5.0 -&amp;gt; CurrentJDK&lt;br/&gt;
lrwxr-xr-x  1 root  wheel    5 Jun 20 08:54 1.6 -&amp;gt; 1.6.0&lt;br/&gt;
drwxr-xr-x  7 root  wheel  238 Nov 19  2009 1.6.0&lt;br/&gt;
drwxr-xr-x  8 root  wheel  272 Jun 20 08:57 A&lt;br/&gt;
lrwxr-xr-x  1 root  wheel    1 Jun 20 08:54 Current -&amp;gt; A&lt;br/&gt;
lrwxr-xr-x  1 root  wheel    3 Jun 20 08:54 CurrentJDK -&amp;gt; 1.6&lt;/p&gt;

&lt;p&gt;Katherine-Marsdens-iMac:patches kmarsden$ ls -l  /System/Library/Frameworks/JavaVM.framework/Versions/A&lt;br/&gt;
total 160&lt;br/&gt;
lrwxr-xr-x   1 root  wheel      28 Jun 20 08:54 CodeResources -&amp;gt; _CodeSignature/CodeResources&lt;br/&gt;
drwxr-xr-x  42 root  wheel    1428 Jun 20 08:57 Commands&lt;br/&gt;
drwxr-xr-x   4 root  wheel     136 May 18  2009 Frameworks&lt;br/&gt;
-rwxr-xr-x   1 root  wheel  209888 May  6 22:20 JavaVM&lt;br/&gt;
drwxr-xr-x  32 root  wheel    1088 Jun 20 08:57 Resources&lt;br/&gt;
drwxr-xr-x   3 root  wheel     102 Jun 20 08:57 _CodeSignature&lt;/p&gt;


&lt;p&gt;rwxr-xr-x  1 root  wheel  74 Jun 20 08:54 /usr/bin/java -&amp;gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java&lt;/p&gt;

&lt;p&gt;Katherine-Marsdens-iMac:patches kmarsden$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java&lt;br/&gt;
-rwxr-xr-x  1 root  wheel  72928 Apr 23 09:15 /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java&lt;/p&gt;
</comment>
                            <comment id="12883926" author="kristwaa" created="Wed, 30 Jun 2010 14:51:13 +0100"  >&lt;p&gt;Hi Kathey,&lt;/p&gt;

&lt;p&gt;The patch was invalid, I had by mistake issued &quot;svndiff&quot; instead of &quot;svn diff&quot; to generate the patch. The former generates terminal control characters (and was piped through less...)&lt;br/&gt;
Sorry for the hassle, I uploaded a new patch.&lt;/p&gt;

&lt;p&gt;The layout on your Mac looks like expected (but not exactly intuitive!).&lt;br/&gt;
If you revert back to before patch 1a went in, your build will probably fail as it did for Brett because 1.4 and 1.5 are symlinked to 1.6.&lt;br/&gt;
I do not yet understand why PropertySetter fails to pick up the JDK in 1.6.0 on your machine. It worked on my Mac Mini and on Rick&apos;s laptop, but those OS X installations were not brand new. Hopefully the verbose debugging info can tell us where things go wrong.&lt;/p&gt;</comment>
                            <comment id="12884376" author="kmarsden" created="Thu, 1 Jul 2010 19:44:33 +0100"  >&lt;p&gt;Hi Kristian,&lt;/p&gt;

&lt;p&gt;Here is the output with the patch.  I have not looked at PropertySetter before. It is interesting the directories it comes up with.  Please let me know if you would like me to put some effort into debugging.&lt;/p&gt;
</comment>
                            <comment id="12884400" author="kristwaa" created="Thu, 1 Jul 2010 21:19:30 +0100"  >&lt;p&gt;Hi Kathey,&lt;/p&gt;

&lt;p&gt;I&apos;m a bit puzzled, the output you uploaded isn&apos;t as I expected it to be. &lt;br/&gt;
Are you sure you applied patch 2a, ran with the new property -DprintCompilerPropertiesVerbose=true (note the extra &apos;Verbose&apos;) and uploaded the correct file?&lt;/p&gt;

&lt;p&gt;When enbled you should see lines with &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;verbose&amp;#93;&lt;/span&gt;&quot; in them (near the start of the line, after another tag).&lt;/p&gt;

&lt;p&gt;It would be very helpful if you could try again, since I don&apos;t have access to a Mac like yours.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="12884427" author="kmarsden" created="Thu, 1 Jul 2010 22:23:06 +0100"  >&lt;p&gt;Sorry Kristian, I did not have the verbose property set.  This is the output with the following in my local.properties file:&lt;br/&gt;
printCompilerProperties=true&lt;br/&gt;
printCompilerPropertiesVerbose=true&lt;/p&gt;

&lt;p&gt;I did not look at the actual output but did confirm &lt;span class=&quot;error&quot;&gt;&amp;#91;verbose&amp;#93;&lt;/span&gt; lines are there.&lt;/p&gt;</comment>
                            <comment id="12884706" author="kristwaa" created="Fri, 2 Jul 2010 15:59:48 +0100"  >&lt;p&gt;Thanks Kathey,&lt;/p&gt;

&lt;p&gt;Seems your JDK installation doesn&apos;t have the &quot;Headers&quot; directory. I have no idea why... Note that the JDK 1.6 installation is first detected through the 1.4 symlink (which is fine).&lt;br/&gt;
There are basically only two options:&lt;br/&gt;
 a) the verification criteria are too strict (i.e. we can remove Headers from the list of required directories)&lt;br/&gt;
 b) your JDK installation is damaged&lt;/p&gt;

&lt;p&gt;I don&apos;t have a formal description of how an Apple JDK should look like, I based my list on existing installations.&lt;br/&gt;
Can you post the directory structure of your JDK 1.6 installation?&lt;br/&gt;
It would be nice if someone else with a recently new Mac could confirm these findings, but if we don&apos;t get any feedback I suggest we go for option (a).&lt;/p&gt;

&lt;p&gt;Kathey, if you set &apos;j16lib&apos; (~/ant.properties or ./local.properties) explicitly, can you build Derby?&lt;/p&gt;</comment>
                            <comment id="12885948" author="kmarsden" created="Wed, 7 Jul 2010 14:52:15 +0100"  >&lt;p&gt;I am sorry Kristian, I missed your earlier comment. Here are the files in in 1.6.0.    It doesn&apos;t even have an rt.jar, so definitely not what I am used to. I tried setting&lt;/p&gt;

&lt;p&gt;jdkdir=/System/Library/Frameworks/JavaVM.framework/Versions&lt;br/&gt;
jdk16=$&lt;/p&gt;
{jdkdir}
&lt;p&gt;/1.6.0&lt;br/&gt;
j16lib=$&lt;/p&gt;
{jdk16}
&lt;p&gt;/1.6.0/Home/Classes&lt;/p&gt;

&lt;p&gt;with no luck. I will try for a little bit longer before I go into the office in about 20 minutes.&lt;br/&gt;
If my installation is corrupt, it must have happened in the factory as I have not mucked with it except for the ls&apos;s.&lt;/p&gt;
</comment>
                            <comment id="12885951" author="kmarsden" created="Wed, 7 Jul 2010 15:07:28 +0100"  >&lt;p&gt;This is my latest run with local.properties:  &lt;/p&gt;

&lt;p&gt;printCompilerProperties=true&lt;br/&gt;
printCompilerPropertiesVerbose=true&lt;br/&gt;
jdkdir=/System/Library/Frameworks/JavaVM.framework/Versions&lt;br/&gt;
jdk16=$&lt;/p&gt;
{jdkdir}/1.6.0&lt;br/&gt;
j16lib=${jdk16}/Home/lib&lt;br/&gt;
j15lib=${jdkdir}
&lt;p&gt;/1.5/Home/lib&lt;br/&gt;
j14lib=$&lt;/p&gt;
{jdkdir}
&lt;p&gt;/1.4.2/Home/lib&lt;/p&gt;

&lt;p&gt;I will look some more when I get home.  Sorry this has come in such small hurried spurts.&lt;/p&gt;
</comment>
                            <comment id="12885953" author="kristwaa" created="Wed, 7 Jul 2010 15:11:02 +0100"  >&lt;p&gt;Kathey, I think your best option is to modify PropertySetter to remove the check for the Headers directory &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. If that makes the build succeed, than I guess we should just remove the check for that directory.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; Just delete the line &apos;                    new File(f, APPLE_HEADERS_DIR),&apos;&lt;/p&gt;</comment>
                            <comment id="12885983" author="kmarsden" created="Wed, 7 Jul 2010 17:43:46 +0100"  >&lt;p&gt;Thanks.  I will try that and try to pick a time when I have more than 2 minutes to work on it to hash it out. I wonder if something will also be required to have it look for classes.jar instead of rt.jar.&lt;/p&gt;
</comment>
                            <comment id="12885986" author="kristwaa" created="Wed, 7 Jul 2010 17:57:15 +0100"  >&lt;p&gt;Thanks, Kathey.&lt;/p&gt;

&lt;p&gt;Your concern regarding classes.jar has already been taken care of (as part of the commit on/around 28th of June), unless the script is so confused that it doesn&apos;t even understand that it&apos;s on a Mac &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12886347" author="kmarsden" created="Thu, 8 Jul 2010 16:40:23 +0100"  >&lt;p&gt;Removing the Header requirement did not help.&lt;/p&gt;

&lt;p&gt;I will take a look and see why classes.jar is not getting picked up.  I think it knows it is a mac because  from antwithlibset.txt it sets:&lt;br/&gt;
setJdkProperties] Setting property java16compile.classpath to /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/deploy.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/dt.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/javaws.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/jce.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/management-agent.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/plugin.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/sa-jdi.jar&lt;/p&gt;

&lt;p&gt;but is missing classes.jar and the final fatal error is caused by the lack of it.&lt;br/&gt;
Fatal Error: Unable to find package java.lang in classpath or bootclasspath&lt;/p&gt;

&lt;p&gt;It seems unhappy about the strange A directory&lt;br/&gt;
-&amp;gt; &apos;/System/Library/Frameworks/JavaVM.framework/Versions/A&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;verbose&amp;#93;&lt;/span&gt; rejected &lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;verbose&amp;#93;&lt;/span&gt; checking root &apos;/System/Library/Frameworks/JavaVM.framework/Versions/A&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Missing JDK directory: /System/Library/Frameworks/JavaVM.framework/Versions/A/Classes&lt;/p&gt;

&lt;p&gt;Katherine-Marsdens-iMac:A kmarsden$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions/A&lt;br/&gt;
total 160&lt;br/&gt;
lrwxr-xr-x   1 root  wheel      28 Jun 20 08:54 CodeResources -&amp;gt; _CodeSignature/CodeResources&lt;br/&gt;
drwxr-xr-x  42 root  wheel    1428 Jun 20 08:57 Commands&lt;br/&gt;
drwxr-xr-x   4 root  wheel     136 May 18  2009 Frameworks&lt;br/&gt;
-rwxr-xr-x   1 root  wheel  209888 May  6 22:20 JavaVM&lt;br/&gt;
drwxr-xr-x  32 root  wheel    1088 Jun 20 08:57 Resources&lt;br/&gt;
drwxr-xr-x   3 root  wheel     102 Jun 20 08:57 _CodeSignature&lt;br/&gt;
Katherine-Marsdens-iMac:A kmarsden$ pwd&lt;/p&gt;

&lt;p&gt;Do you know what Versions/A is supposed to be?  Is it important to the build or can we just stick with the actual versions.  It doesn&apos;t look like a JDK in there.&lt;/p&gt;
</comment>
                            <comment id="12886390" author="kmarsden" created="Thu, 8 Jul 2010 18:54:27 +0100"  >&lt;p&gt;If I remove the Header directory check &lt;b&gt;and&lt;/b&gt;  remove the *lib settings in my local.properties it all builds ok.  Hooray!&lt;/p&gt;

&lt;p&gt;I also tried changing local.properties as follows which failed with abstract method errors:&lt;/p&gt;

&lt;p&gt;printCompilerProperties=true&lt;br/&gt;
printCompilerPropertiesVerbose=true&lt;br/&gt;
jdkdir=/System/Library/Frameworks/JavaVM.framework/Versions&lt;br/&gt;
jdk16=$&lt;/p&gt;
{jdkdir}/1.6.0&lt;br/&gt;
16lib=${jdk16}/Classes&lt;br/&gt;
j15lib=${jdkdir}
&lt;p&gt;/1.5/Classes&lt;br/&gt;
j14lib=$&lt;/p&gt;
{jdkdir}
&lt;p&gt;/1.4.2/Classes&lt;/p&gt;

&lt;p&gt;e.g.    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /Users/kmarsden/Derby/svn/trunk/java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java:59: org.apache.derby.impl.jdbc.EmbedResultSetMetaData is not abstract and does not override abstract method isWrapperFor(java.lang.Class) in java.sql.Wrappe&lt;br/&gt;
r&lt;/p&gt;

&lt;p&gt;I think this makes sense as if you are using the lib settings, it is an indication that you want such checking done.&lt;/p&gt;</comment>
                            <comment id="12887300" author="kristwaa" created="Mon, 12 Jul 2010 09:10:18 +0100"  >&lt;p&gt;Attached patch 2b, committed to trunk with revision 963206.&lt;/p&gt;

&lt;p&gt;The patch removes the check for the &apos;Headers&apos; directory inside the JDK root, and changes some of the text emitted by the verbose debugging (accepted -&amp;gt; candidate, rejected -&amp;gt; duplicate).&lt;/p&gt;</comment>
                            <comment id="12887303" author="kristwaa" created="Mon, 12 Jul 2010 09:16:11 +0100"  >&lt;p&gt;I don&apos;t think PropertySetter was written to thoroughly verify the settings set by the user, it will only add the jar files found in the specified JDK directories.&lt;br/&gt;
In your case, you are pointing the j14lib and j15lib at a JDK 1.6 installation - which is why the compiler complains about the missing isWrapperFor method.&lt;/p&gt;</comment>
                            <comment id="12887325" author="brettw" created="Mon, 12 Jul 2010 10:29:39 +0100"  >&lt;p&gt;It is in fact Apple (OS X) that ships with symbolic links from JDK 1.4/1.5 to JDK 1.6.  For newer fresh installs (certainly Snow Leopard, maybe Leopard) this is the default.&lt;/p&gt;</comment>
                            <comment id="12887336" author="kristwaa" created="Mon, 12 Jul 2010 11:25:48 +0100"  >&lt;p&gt;I&apos;m aware of that, the point was that the script won&apos;t try to &quot;correct&quot; the user if invalid values for the various JDK versions are specified. If a user on a fresh OS X install specifies the lib directories in ant.properties/local.properties, doing the intuitive thing will cause Derby to fail due to the symlinking.&lt;br/&gt;
If no JDK paths are specified in the property files, the script should understand what Apple has chosen to do (effectively only using JDK 1.6).&lt;/p&gt;

&lt;p&gt;Brett, can you confirm the the script works in your environment as well?&lt;br/&gt;
And, out of curiosity, does your JDK installation have a &apos;Headers&apos; directory?&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="12891140" author="kmarsden" created="Thu, 22 Jul 2010 13:53:08 +0100"  >&lt;p&gt;I wanted to mention that at long last, I reverted my changes,  updated trunk and all built fine without setting any properties. Thank you Kristian! I still can&apos;t run tests with jars because of the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4739&quot; title=&quot;test hang in Suites.all starting derbynet.SSLTest on Mac OS X 10.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4739&quot;&gt;&lt;del&gt;DERBY-4739&lt;/del&gt;&lt;/a&gt; hang, but happy to be building.   I don&apos;t have time to debug &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4739&quot; title=&quot;test hang in Suites.all starting derbynet.SSLTest on Mac OS X 10.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4739&quot;&gt;&lt;del&gt;DERBY-4739&lt;/del&gt;&lt;/a&gt;  thoroughly now, but Lily and I did look at it for a few minutes the other day. I will post our findings to that issue.&lt;/p&gt;</comment>
                            <comment id="12893159" author="kristwaa" created="Wed, 28 Jul 2010 13:25:37 +0100"  >&lt;p&gt;Closing issue.&lt;/p&gt;

&lt;p&gt;FYI, I can also confirm the hang on Max OS X (found while testing 10.6 RC).&lt;/p&gt;</comment>
                            <comment id="12893161" author="kristwaa" created="Wed, 28 Jul 2010 13:33:31 +0100"  >&lt;p&gt;Reopening for backport to 10.6 (merge isn&apos;t clean in 10.5).&lt;/p&gt;

&lt;p&gt;Backported to the 10.6 branch with revision 980035.&lt;/p&gt;</comment>
                            <comment id="12893162" author="kristwaa" created="Wed, 28 Jul 2010 13:33:58 +0100"  >&lt;p&gt;Closing again...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448876" name="1.6.0allfiles.txt" size="25235" author="kmarsden" created="Wed, 7 Jul 2010 14:52:15 +0100"/>
                            <attachment id="12448877" name="1.6.0dirStructure.txt" size="1308" author="kmarsden" created="Wed, 7 Jul 2010 14:52:15 +0100"/>
                            <attachment id="12448521" name="antPrintCompilerPropertiesVerbose.txt" size="5753" author="kmarsden" created="Thu, 1 Jul 2010 22:23:06 +0100"/>
                            <attachment id="12448878" name="antwithlibset.txt" size="13187" author="kmarsden" created="Wed, 7 Jul 2010 15:07:28 +0100"/>
                            <attachment id="12448513" name="antwithpatch_diff.txt" size="2993" author="kmarsden" created="Thu, 1 Jul 2010 19:44:33 +0100"/>
                            <attachment id="12448054" name="derby-4694-1a.diff" size="13729" author="kristwaa" created="Fri, 25 Jun 2010 13:49:24 +0100"/>
                            <attachment id="12448398" name="derby-4694-2a-debugging.diff" size="5410" author="kristwaa" created="Wed, 30 Jun 2010 14:51:13 +0100"/>
                            <attachment id="12449220" name="derby-4694-2b-debugging_and_mac_fix.diff" size="5873" author="kristwaa" created="Mon, 12 Jul 2010 09:10:18 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Jun 2010 14:59:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ovr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>