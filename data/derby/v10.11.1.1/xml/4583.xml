<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:47 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4583/DERBY-4583.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4583] TRUE by itself is not accepted in WHERE</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4583</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;A SELECT query with a literal boolean value in its WHERE clause results in a syntax error.&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;p&gt;CREATE TABLE list (value VARCHAR(10));&lt;/p&gt;

&lt;p&gt;Given this table, the following queries result in a syntax error.&lt;/p&gt;

&lt;p&gt;SELECT * FROM list WHERE TRUE;&lt;br/&gt;
SELECT * FROM list WHERE FALSE;&lt;br/&gt;
SELECT * FROM list WHERE value=&apos;A&apos; OR TRUE;&lt;/p&gt;

&lt;p&gt;Why is TRUE/FALSE not a boolean expression?&lt;/p&gt;</description>
                <environment>n/a</environment>
        <key id="12459157">DERBY-4583</key>
            <summary>TRUE by itself is not accepted in WHERE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="wowtor">Wouter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Mar 2010 15:30:36 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:21 +0100</updated>
                            <resolved>Mon, 7 Jun 2010 18:49:57 +0100</resolved>
                                    <version>10.5.3.0</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12845378" author="knutanders" created="Mon, 15 Mar 2010 15:52:50 +0000"  >&lt;p&gt;Derby does not support the BOOLEAN data type. See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12845379" author="rhillegas" created="Mon, 15 Mar 2010 15:52:56 +0000"  >&lt;p&gt;Linking this issue to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt;. The TRUE and FALSE literals were removed along with the rest of the BOOLEAN datatype before Cloudscape was open-sourced as Derby. The literals would be re-enabled as part of re-enabling BOOLEAN. It is hard to re-enable these literals without doing a lot of the work described on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12845394" author="wowtor" created="Mon, 15 Mar 2010 16:20:16 +0000"  >&lt;p&gt;Fair enough. But in this particular case Derby actually demands a boolean expression.&lt;/p&gt;

&lt;p&gt;ij(CONNECTION1)&amp;gt; SELECT * FROM list WHERE 1;&lt;br/&gt;
ERROR 42X19: The WHERE or HAVING clause or CHECK CONSTRAINT definition is a &apos;INTEGER&apos; expression.  It must be a BOOLEAN expression.&lt;/p&gt;

&lt;p&gt;Which is rather confusing if there is no support for booleans...&lt;/p&gt;</comment>
                            <comment id="12845395" author="kmarsden" created="Mon, 15 Mar 2010 16:24:00 +0000"  >&lt;p&gt;You should be able to use SELECT * FROM list WHERE 1=1;&lt;/p&gt;</comment>
                            <comment id="12845397" author="bryanpendleton" created="Mon, 15 Mar 2010 16:25:04 +0000"  >&lt;p&gt;Or just use SELECT * FROM list. The WHERE clause is optional.&lt;/p&gt;</comment>
                            <comment id="12875248" author="rhillegas" created="Thu, 3 Jun 2010 19:56:23 +0100"  >&lt;p&gt;Attaching derby-4583-01-ac-booleanLiterals.diff. This patch re-enables the boolean literals TRUE and FALSE. The regression tests passed for me after applying this patch.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj&lt;/p&gt;

&lt;p&gt;Small edit to enable the literals.&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/BooleanValuesTest.java&lt;/p&gt;

&lt;p&gt;New test case to verify that the literals work again.&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/db2Compatibility.sql&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/master/db2Compatibility.out&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/master/implicitConversions.out&lt;/p&gt;

&lt;p&gt;Tweaks to other regression tests to reflect the new behavior.&lt;/p&gt;</comment>
                            <comment id="12875558" author="knutanders" created="Fri, 4 Jun 2010 12:02:17 +0100"  >&lt;p&gt;The fix looks good to me, but I was a little puzzled by the update of the master for implicitConversion.sql.&lt;/p&gt;

&lt;p&gt;ij&amp;gt; values true, &apos;a&apos;;&lt;br/&gt;
1    &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;true &lt;br/&gt;
ERROR 22018: Invalid character string format for type BOOLEAN.&lt;br/&gt;
ij&amp;gt; values &apos;a&apos;, true;&lt;br/&gt;
1    &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;ERROR 22018: Invalid character string format for type BOOLEAN.&lt;/p&gt;

&lt;p&gt;I would have expected that these statements had failed at compile-time, just like this similar statement:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; values &apos;a&apos;, 1.1;&lt;br/&gt;
ERROR 42X61: Types &apos;CHAR&apos; and &apos;DECIMAL&apos; are not UNION compatible.&lt;/p&gt;

&lt;p&gt;Do you know what causes this difference?&lt;/p&gt;</comment>
                            <comment id="12875593" author="rhillegas" created="Fri, 4 Jun 2010 14:22:06 +0100"  >&lt;p&gt;Hi Knut,&lt;/p&gt;

&lt;p&gt;Thanks for taking a look at the patch. The short answer is that the compiler merely relies on type information to raise that error. The compiler knows that a numeric can never be cast to a BOOLEAN and so can reject the latter query early on. In contrast, some strings can be cast to BOOLEAN (e.g., &apos;TRUE&apos; and &apos;FALSE&apos;). Derby waits until execution-time to check this. It&apos;s true that the compiler could be smart enough to run the execution-time checks on string constants. Derby just isn&apos;t that smart today.&lt;/p&gt;</comment>
                            <comment id="12875610" author="knutanders" created="Fri, 4 Jun 2010 15:20:20 +0100"  >&lt;p&gt;I see. Thanks for explaining. So the statement below is valid and should return two booleans?&lt;/p&gt;

&lt;p&gt;    VALUES &apos;TRUE&apos;, TRUE&lt;/p&gt;

&lt;p&gt;If so, the behaviour makes sense. +1 from me.&lt;/p&gt;</comment>
                            <comment id="12875616" author="rhillegas" created="Fri, 4 Jun 2010 15:47:38 +0100"  >&lt;p&gt;Hi Knut,&lt;/p&gt;

&lt;p&gt;I have looked at your question again and I see that the second query does not involve BOOLEANs at all. I have looked at the SQL Standard again and I think that you are right, the UNION between a character type and a boolean type should not work at all and can be rejected at compile-time. That is, Derby should not be performing implicit casts in the query mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4684&quot; title=&quot;Correct the implicit casting of other types to BOOLEAN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4684&quot;&gt;&lt;del&gt;DERBY-4684&lt;/del&gt;&lt;/a&gt;. This is my reasoning:&lt;/p&gt;

&lt;p&gt;1) The rules for determining whether two datatypes are union compatible are stated in the SQL Standard in part 2, section 7.3 (&amp;lt;query expression&amp;gt;), syntax rule 20.b.ii.&lt;/p&gt;

&lt;p&gt;2) That, in turn, refers the reader to section 9.3 (Result of data type combinations).&lt;/p&gt;

&lt;p&gt;3) Section 9.3, syntax rule 3.g says that if either of two values to be merged is BOOLEAN, then both must be BOOLEAN.&lt;/p&gt;</comment>
                            <comment id="12876281" author="rhillegas" created="Mon, 7 Jun 2010 16:44:52 +0100"  >&lt;p&gt;Attaching derby-4583-01-ad-booleanLiterals.diff. This updates the patch to reflect the changes introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4692&quot; title=&quot;Unions between BOOLEAN and non-BOOLEAN datatypes should be rejected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4692&quot;&gt;&lt;del&gt;DERBY-4692&lt;/del&gt;&lt;/a&gt;: The implicitConversions test now shows that CHAR and BOOLEAN types are not UNION compatible.&lt;/p&gt;

&lt;p&gt;I plan to commit this patch if the regression tests pass cleanly.&lt;/p&gt;</comment>
                            <comment id="12876333" author="rhillegas" created="Mon, 7 Jun 2010 18:49:57 +0100"  >&lt;p&gt;Committed derby-4583-01-ad-booleanLiterals.diff at subversion revision 952348. The tests ran cleanly for me except for the following error in NetworkServerMBeanTest. The test passed when I re-ran it standalone. I believe that the error is a timing-related heisenbug in that test and is not related to the changes in this patch.&lt;/p&gt;

&lt;p&gt;There was 1 error:&lt;br/&gt;
1) testAttributeAccumulatedConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-0129-1374-c722-ffffe1d7aa3e&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest.getAttribute(MBeanTest.java:379)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest.testAttributeAccumulatedConnectionCount(NetworkServerMBeanTest.java:93)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
Caused by: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-0129-1374-c722-ffffe1d7aa3e&lt;br/&gt;
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1010)&lt;br/&gt;
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:627)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:659)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.management.MBeanTest$4.run(MBeanTest.java:382)&lt;br/&gt;
	... 41 more&lt;/p&gt;</comment>
                            <comment id="13685213" author="knutanders" created="Mon, 17 Jun 2013 10:19:21 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12313174">DERBY-499</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12466190">DERBY-4692</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12464232">DERBY-4651</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446275" name="derby-4583-01-ac-booleanLiterals.diff" size="8144" author="rhillegas" created="Thu, 3 Jun 2010 19:56:23 +0100"/>
                            <attachment id="12446492" name="derby-4583-01-ad-booleanLiterals.diff" size="8114" author="rhillegas" created="Mon, 7 Jun 2010 16:44:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 15 Mar 2010 15:52:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0oqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>