<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:51:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3989/DERBY-3989.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3989] Set the Java 5 compilation path based on the Java 6 compilation path if a Java 5 environment can&apos;t be found but a Java 6 environment can be</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3989</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This will make the build even more flexible. Probably involves the following changes:&lt;/p&gt;

&lt;p&gt;1) Relaxing the requirement in PropertySetter that a Java 5 JDK must exist&lt;/p&gt;

&lt;p&gt;2) Having PropertySetter look for a Java 6 JDK (and set java16compile.classpath accordingly) just as PropertySetter looks for a Java 5 JDK today&lt;/p&gt;

&lt;p&gt;3) Changing the setCompilerProperties target in the master build script so that it&lt;/p&gt;

&lt;p&gt;  a) requires that java15compile.classpath or java16compile.classpath is set (it&apos;s ok for both to be set)&lt;/p&gt;

&lt;p&gt;  b) sets java15compile.classpath to $&lt;/p&gt;
{jdbc3stubs}
&lt;p&gt;:$&lt;/p&gt;
{java16compile.classpath}</description>
                <environment></environment>
        <key id="12410606">DERBY-3989</key>
            <summary>Set the Java 5 compilation path based on the Java 6 compilation path if a Java 5 environment can&apos;t be found but a Java 6 environment can be</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Dec 2008 20:30:48 +0000</created>
                <updated>Thu, 2 May 2013 03:29:19 +0100</updated>
                            <resolved>Wed, 14 Jan 2009 16:31:06 +0000</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Build tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12662164" author="rhillegas" created="Thu, 8 Jan 2009 23:17:37 +0000"  >&lt;p&gt;Attaching derby-3989-01-aa-optionalJava5.diff. This patch makes it possible to build Derby using just the Derby sources and a Java 6 compiler. This patch makes the following changes:&lt;/p&gt;

&lt;p&gt;1) If j16lib is set, PropertySetter sets java16compile.classpath from j16lib. If j16lib is not set, PropertySetter looks for a Java 6 JDK and sets java16compile.classpath to be the list of jars in the Java 6 library directory.&lt;/p&gt;

&lt;p&gt;2) However, PropertySetter does not try to set java16compile.classpath if the compiler is an IBM Java 5 compiler. This is because the IBM Java 5 compiler raises version mismatch errors when it pulls in Java 6 libraries.&lt;/p&gt;

&lt;p&gt;3) If, at the end, neither java15compile.classpath nor java16compile.classpath is set, PropertySetter aborts the build.&lt;/p&gt;

&lt;p&gt;4) If PropertySetter could not set java15compile.classpath, then the master build script sets java15compile.classpath to be $&lt;/p&gt;
{jdbc3stubs}
&lt;p&gt;:$&lt;/p&gt;
{java16compile.classpath}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;I have verified that the build runs correctly on the following platforms:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mac OS X&lt;/li&gt;
	&lt;li&gt;Ubuntu using Sun JDKs&lt;/li&gt;
	&lt;li&gt;Ubuntu using IBM JDKs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;with the following environments:&lt;/p&gt;

&lt;p&gt;a) Java 5 compiler + Java 6 libraries&lt;br/&gt;
b) Java 5 compiler - Java 6 libraries&lt;br/&gt;
c) Java 6 compiler + Java 5 libraries&lt;br/&gt;
d) Java 6 compiler - Java 5 libraries&lt;/p&gt;

&lt;p&gt;I would appreciate it if other people could test-drive this patch on their machines and report whether the build succeeds in cases (a) through (d).&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;


&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/build/org/apache/derbyPreBuild/PropertySetter.java&lt;/p&gt;

&lt;p&gt;Implements (1) - (3).&lt;/p&gt;


&lt;p&gt;M      build.xml&lt;/p&gt;

&lt;p&gt;Implements (4).&lt;/p&gt;</comment>
                            <comment id="12662418" author="rhillegas" created="Fri, 9 Jan 2009 16:40:46 +0000"  >&lt;p&gt;Attaching derby-3989-01-ab-optionalJava5.diff. This is identical to the previous patch except that it updates BUILDING.html to reflect these changes.&lt;/p&gt;</comment>
                            <comment id="12662971" author="myrna" created="Mon, 12 Jan 2009 15:12:21 +0000"  >&lt;p&gt;I did a quick test and found that I get a build error in the jdbc4stubs:&lt;br/&gt;
jdbc4stubs:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;mkdir&amp;#93;&lt;/span&gt; Created dir: &amp;lt;mypathto&amp;gt;\trunk\classes\stubs\jdbc4&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 93 source files to &amp;lt;mypathto&amp;gt;\trunk\classes\stubs\jdbc4&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; &amp;lt;mypathto&amp;gt;\trunk\java\stubs\jdbc4\java\sql\Array.java:20: cannot access java.util.Map&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; bad class file: &amp;lt;mypathto&amp;gt;\ibm16\jre\lib\java.util.jar(java/util/Map.class)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; class file has wrong version 50.0, should be 49.0&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Please remove or make sure it appears in the correct subdirectory of the classpath.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; import java.util.Map;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                  ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 1 error&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compile failed; see the compiler error output for details.&lt;/p&gt;

&lt;p&gt;I&apos;ll check on my settings etc. later,  but wanted to report this &amp;amp; make sure this didn&apos;t get committed before I have a chance to look into it.&lt;/p&gt;</comment>
                            <comment id="12662976" author="rhillegas" created="Mon, 12 Jan 2009 15:37:42 +0000"  >&lt;p&gt;Thanks, Myrna. Could you set the following property in your ant.properties and post the diagnostics that it prints out?&lt;/p&gt;

&lt;p&gt;printCompilerProperties=true&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12662992" author="knutanders" created="Mon, 12 Jan 2009 16:33:43 +0000"  >&lt;p&gt;I had a quick look at the ab patch, and nothing jumped at me. Two small nits, though:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the count variable in requireAtLeastOneProperty() is never used&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;couldntSetProperty() reinvents Property.toString() (or actually Hashtable.toString() which is inherited by Property)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12663072" author="myrna" created="Mon, 12 Jan 2009 20:10:41 +0000"  >&lt;p&gt;Well, I can&apos;t figure out anything wrong with my settings...I am trying to build with ibm15, JAVA_HOME is set to my ibm15 installation, as is ANT_JAVA (for what it&apos;s worth), and I get 6 of those pesky version mismatch warnings. This is my output of printCompilerProperties=true:&lt;br/&gt;
(I replaced the actual path to my jvm&apos;s installations with &amp;lt;pathto&amp;gt; and single lines are chopped up...)&lt;br/&gt;
-----------------&lt;br/&gt;
printCompilerProperties:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  compilerLevel16 = 1.5&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  jsr169compile.classpath = &amp;lt;pathto&amp;gt;/weme6.1/lib/jclFoundation11/classes.zip;&amp;lt;pathto&amp;gt;/weme6.1/lib/jdbc.jar&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  j14lib = &amp;lt;pathto&amp;gt;/ibm142/jre/lib&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  java14compile.classpath = $&lt;/p&gt;
{java14compile.classpath}
&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  j15lib = &amp;lt;pathto&amp;gt;/ibm15/jre/lib&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  java15compile.classpath = $&lt;/p&gt;
{java15compile.classpath}
&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  j16lib = &amp;lt;pathto&amp;gt;/ibm16/jre/lib&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  java16compile.classpath = $&lt;/p&gt;
{java16compile.classpath}
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Setting property java14compile.classpath to &amp;lt;pathto&amp;gt;\ibm142\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\core.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\graphics.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjaasactivelm.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjaaslm.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjssefips.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjsseprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\server.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\xml.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Setting property java15compile.classpath to &amp;lt;pathto&amp;gt;\ibm15\jre\lib\BD.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\core.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\deploy.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\graphics.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmcfw.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjaasactivelm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjaaslm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjsseprovider2.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\javaws.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\server.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\vm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\xml.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Setting property java16compile.classpath to &amp;lt;pathto&amp;gt;\ibm16\jre\lib\annotation.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\beans.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\deploy.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcertpathfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjgssfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjssefw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjsseprovider2.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmsaslfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmxmlcrypto.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\j9zip.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\java.util.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\javascript.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\javaws.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\jlm.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\jndi.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\logging.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\management-agent.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\resources.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\rt.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\sql.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\vm.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\xml.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\xmldsigfw.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Setting property java14compile.classpath to &amp;lt;pathto&amp;gt;\ibm142\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\core.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\graphics.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjaasactivelm.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjaaslm.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjssefips.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjsseprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\server.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\xml.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Setting property java15compile.classpath to &amp;lt;pathto&amp;gt;\ibm15\jre\lib\BD.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\core.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\deploy.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\graphics.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmcfw.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjaasactivelm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjaaslm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjsseprovider2.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\javaws.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\server.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\vm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\xml.jar&lt;/p&gt;

&lt;p&gt;printCompilerProperties:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  compilerLevel16 = 1.5&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  jsr169compile.classpath = &amp;lt;pathto&amp;gt;/weme6.1/lib/jclFoundation11/classes.zip;&amp;lt;pathto&amp;gt;/weme6.1/lib/jdbc.jar&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  j14lib = &amp;lt;pathto&amp;gt;/ibm142/jre/lib&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  java14compile.classpath = &amp;lt;pathto&amp;gt;\ibm142\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\core.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\graphics.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjaasactivelm.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjaaslm.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjssefips.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmjsseprovider.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\server.jar;&amp;lt;pathto&amp;gt;\ibm142\jre\lib\xml.jar&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  j15lib = &amp;lt;pathto&amp;gt;/ibm15/jre/lib&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  java15compile.classpath = &amp;lt;pathto&amp;gt;\ibm15\jre\lib\BD.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\core.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\deploy.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\graphics.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmcfw.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjaasactivelm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjaaslm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmjsseprovider2.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\javaws.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\server.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\vm.jar;&amp;lt;pathto&amp;gt;\ibm15\jre\lib\xml.jar&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  j16lib = &amp;lt;pathto&amp;gt;/ibm16/jre/lib&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; After setting properties:  java16compile.classpath = &amp;lt;pathto&amp;gt;\ibm16\jre\lib\annotation.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\beans.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\deploy.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcertpathfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjgssfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjssefw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjsseprovider2.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmsaslfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmxmlcrypto.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\j9zip.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\java.util.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\javascript.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\javaws.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\jlm.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\jndi.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\logging.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\management-agent.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\resources.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\rt.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\sql.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\vm.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\xml.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\xmldsigfw.jar&lt;br/&gt;
-----------------------&lt;/p&gt;

&lt;p&gt;my ant.properties currently looks like so:&lt;br/&gt;
-----------------------&lt;br/&gt;
printCompilerProperties=true&lt;/p&gt;

&lt;p&gt;j14lib=c:/p4/p4main/ibm142/jre/lib&lt;br/&gt;
j15lib=c:/p4/p4main/ibm15/jre/lib&lt;br/&gt;
jdk16=c:/p4/p4main/ibm16&lt;br/&gt;
j16lib=$&lt;/p&gt;
{jdk16}
&lt;p&gt;/jre/lib&lt;/p&gt;

&lt;p&gt;jsr169compile.classpath=C:/p4/p4main/weme6.1/lib/jclFoundation11/classes.zip;C:/p4/p4main/weme6.1/lib/jdbc.jar&lt;/p&gt;

&lt;p&gt;junit=c:/p4/p4main/tools/java/junit.jar&lt;/p&gt;

&lt;p&gt;proceed=true&lt;br/&gt;
sane=true&lt;br/&gt;
-----------------------&lt;/p&gt;</comment>
                            <comment id="12663116" author="myrna" created="Mon, 12 Jan 2009 22:07:38 +0000"  >&lt;p&gt;For what it&apos;s worth, the compile works correctly wtih the same  properties setting if I&apos;m building with the ibm16 compiler. &lt;br/&gt;
In that case, the printCompilerProperties prints out that it&apos;s using 1.6:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Before setting properties:  compilerLevel16 = 1.6&lt;br/&gt;
and print one extra line in the first call, after &apos;Setting property java15compile.classpath to...&apos;:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;setJdkProperties&amp;#93;&lt;/span&gt; Setting property java16compile.classpath to &amp;lt;pathto&amp;gt;\ibm16\jre\lib\annotation.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\beans.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\charsets.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\deploy.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcertpathfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcertpathprovider.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmcfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjcefw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjgssfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjgssprovider.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjssefw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmjsseprovider2.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmorb.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmorbapi.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmpkcs.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmsaslfw.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\ibmxmlcrypto.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\j9zip.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\java.util.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\javascript.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\javaws.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\jlm.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\jndi.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\logging.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\management-agent.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\plugin.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\resources.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\rt.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\security.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\sql.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\vm.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\xml.jar;&amp;lt;pathto&amp;gt;\ibm16\jre\lib\xmldsigfw.jar&lt;/p&gt;</comment>
                            <comment id="12663270" author="knutanders" created="Tue, 13 Jan 2009 08:54:31 +0000"  >&lt;p&gt;Silly question, but... Does it work without the patch? If I understand the comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3988&quot; title=&quot;Set the Java 6 complilation path based on the Java 5 compilation path so that the JDBC4 support is always built&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3988&quot;&gt;&lt;del&gt;DERBY-3988&lt;/del&gt;&lt;/a&gt; correctly, the combination of the IBM 1.5 compiler and java16compile.classpath pointing to IBM 1.6 doesn&apos;t work. According to those comments, the build should have printed a message telling you to use a Java 6 compiler. I&apos;m wondering if the build doesn&apos;t emit that message because java16compile.classpath was set implicitly from j16lib, and the build scripts should be updated to check both java16compile.classpath and j16lib in checkForProblematicSettings().&lt;/p&gt;</comment>
                            <comment id="12663387" author="rhillegas" created="Tue, 13 Jan 2009 17:58:39 +0000"  >&lt;p&gt;Thanks for the experiments and analysis, Myrna and Knut. Knut is right: PropertySetter sets java16compile.classpath from j16lib if the latter property is set, and that causes the version mismatch problem if you are using the Java 5 compiler. Attaching a new rev of the patch: derby-3989-01-ac-optionalJava5.diff.&lt;/p&gt;

&lt;p&gt;This rev aborts the build if you are using the IBM Java 5 compiler AND you have explicitly set EITHER j16lib or java16compile.classpath. Once again, I would appreciate your test-driving this patch.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12663446" author="myrna" created="Tue, 13 Jan 2009 20:05:49 +0000"  >&lt;p&gt;As long as I don&apos;t have j16lib nor java16compile.classpath set, things work with ibm15 compiler - and either way with ibm16 compiler.&lt;br/&gt;
+1 &lt;/p&gt;</comment>
                            <comment id="12663473" author="rhillegas" created="Tue, 13 Jan 2009 21:08:02 +0000"  >&lt;p&gt;Thanks for test-driving derby-3989-01-ac-optionalJava5.diff, Myrna. Committed at subversion revision 734242.&lt;/p&gt;</comment>
                            <comment id="12876663" author="kristwaa" created="Tue, 8 Jun 2010 13:43:09 +0100"  >&lt;p&gt;Doing some investigative work on a Mac, I&apos;m hitting this issue again. I&apos;m also able to trigger the issue using Sun JDKs.&lt;br/&gt;
I believe the problem is easy to fix once we have determined that we actually do want to support this configuration:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;invoke ant with a 1.5 JDK&lt;/li&gt;
	&lt;li&gt;a 1.6 JDK is available on the system (and automatically detected), but not used for compilation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We do get a version mismatch (class version 50 instead of 49) if we include the 1.6 libraries on the compile classpath used by the 1.5 compiler.&lt;br/&gt;
The way I see it, we have two options;&lt;br/&gt;
 a) Allow this configuration, JDBC 4 will be built using the JDBC 4 stubs.&lt;br/&gt;
 b) Disallow this configuration, abort build notifying the user that he/she should switch to a 1.6 compiler.&lt;/p&gt;
</comment>
                            <comment id="12876668" author="rhillegas" created="Tue, 8 Jun 2010 14:00:25 +0100"  >&lt;p&gt;Hi Kristian,&lt;/p&gt;

&lt;p&gt;At some point we are going to start supporting environments where people want to build and test Derby using Java 6 even though they have experimental Java 7 jdks on their machines. This may be similar to your situation (a) and may argue against (b). Thanks.&lt;/p&gt;</comment>
                            <comment id="12876685" author="kristwaa" created="Tue, 8 Jun 2010 15:20:03 +0100"  >&lt;p&gt;That&apos;s a good point, Rick.&lt;/p&gt;

&lt;p&gt;See attached patch 02-aa for a possible solution. It basically relaxes the conditions used in the shouldNotSet-method. Earlier it kicked in only for IBM JDKs, no it will kick in regardless of the JDK vendor as long as a Java 5 compiler is used with Java 6 libraries.&lt;br/&gt;
I also added some extra debugging prints.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12877030" author="knutanders" created="Wed, 9 Jun 2010 11:00:08 +0100"  >
&lt;p&gt;The approach in patch 02-aa looks reasonable to me. +1&lt;/p&gt;</comment>
                            <comment id="12878553" author="kristwaa" created="Mon, 14 Jun 2010 13:29:54 +0100"  >&lt;p&gt;Added link to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4699&quot; title=&quot;Build breaks if a Java 6 JDK is detected when compiling with a Java 5 compiler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4699&quot;&gt;&lt;del&gt;DERBY-4699&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12878554" author="kristwaa" created="Mon, 14 Jun 2010 13:32:02 +0100"  >&lt;p&gt;Closing issue, as the original problem has been fixed. See &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4699&quot; title=&quot;Build breaks if a Java 6 JDK is detected when compiling with a Java 5 compiler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4699&quot;&gt;&lt;del&gt;DERBY-4699&lt;/del&gt;&lt;/a&gt; for updates on the remaining/related issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12466893">DERBY-4699</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12410602">DERBY-3988</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12397459" name="derby-3989-01-aa-optionalJava5.diff" size="10001" author="rhillegas" created="Thu, 8 Jan 2009 23:17:37 +0000"/>
                            <attachment id="12397531" name="derby-3989-01-ab-optionalJava5.diff" size="12788" author="rhillegas" created="Fri, 9 Jan 2009 16:40:46 +0000"/>
                            <attachment id="12397800" name="derby-3989-01-ac-optionalJava5.diff" size="14897" author="rhillegas" created="Tue, 13 Jan 2009 17:58:39 +0000"/>
                            <attachment id="12446593" name="derby-3989-02-aa-dontUseJava6LibsWithJava5Compiler.diff" size="3954" author="kristwaa" created="Tue, 8 Jun 2010 15:20:03 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Jan 2009 15:12:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0q2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>