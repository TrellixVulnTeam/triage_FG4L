<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2501/DERBY-2501.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2501] Batch scripts in bin\ report extraneous errors when DERBY_HOME is invalid</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2501</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If DERBY_HOME is set to an invalid location (for example a directory that does not contain lib\derby.jar), most .bat scripts in the bin directory (the ones that call derby_common.bat) report three distinct error messages, of which only one is of value to the user. &lt;/p&gt;

&lt;p&gt;Reproduction:&lt;/p&gt;

&lt;p&gt;C:\Derby_10\db-derby-10.2.2.0-bin&amp;gt;set DERBY_HOME=c:\temp&lt;/p&gt;

&lt;p&gt;C:\Derby_10\db-derby-10.2.2.0-bin&amp;gt;echo %DERBY_HOME%&lt;br/&gt;
c:\temp&lt;/p&gt;

&lt;p&gt;C:\Derby_10\db-derby-10.2.2.0-bin&amp;gt;bin\sysinfo&lt;br/&gt;
DERBY_HOME is set incorrectly or derby.jar could not be located. Please set DERBY_HOME.&lt;br/&gt;
The system cannot find the batch label specified - end&lt;br/&gt;
&apos;&quot;&quot;&apos; is not recognized as an internal or external command,&lt;br/&gt;
operable program or batch file.&lt;/p&gt;


&lt;p&gt;The distinct error messages are:&lt;/p&gt;

&lt;p&gt;1) DERBY_HOME is set incorrectly or derby.jar could not be located. Please set DERBY_HOME.&lt;/p&gt;

&lt;p&gt;2) The system cannot find the batch label specified - end&lt;/p&gt;

&lt;p&gt;3) &apos;&quot;&quot;&apos; is not recognized as an internal or external command, operable program or batch file.&lt;/p&gt;

&lt;p&gt;Only 1) is relevant for the user, and should ideally be the only one displayed.&lt;/p&gt;</description>
                <environment>Windows</environment>
        <key id="12366108">DERBY-2501</key>
            <summary>Batch scripts in bin\ report extraneous errors when DERBY_HOME is invalid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johnemb">John H. Embretsen</assignee>
                                    <reporter username="johnemb">John H. Embretsen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2007 10:33:59 +0100</created>
                <updated>Tue, 8 May 2007 20:28:07 +0100</updated>
                            <resolved>Fri, 4 May 2007 01:31:47 +0100</resolved>
                                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Demos/Scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12485127" author="johnemb" created="Thu, 29 Mar 2007 10:40:59 +0100"  >&lt;p&gt;I filed this as a bug because error message 2) is caused by a bug in the derby_common.bat script.  As mentioned in a post on the derby-user mailing list &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, a label &quot;end&quot; is called in the derby_common.bat script when the DERBY_HOME environment variable is not set to a valid location (label &quot;noAntHome&quot;), although this label (&quot;end&quot;) does not exist in this script. The label &quot;endcommon&quot; should probably be used instead, which does exist.&lt;/p&gt;

&lt;p&gt;The label for reporting invalid DERBY_HOME should be renamed from &quot;noAntHome&quot; to &quot;noDerbyHome&quot;, as these scripts have nothing to do with Ant.&lt;/p&gt;

&lt;p&gt;Error message 3) is caused by the _JAVACMD variable not being set (so the scripts execute &quot;&quot; instead of for example &quot;c:\java6\bin\java&quot;) if DERBY_HOME is invalid.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.nabble.com/Re%3A-Setting-the-environment-variables-for-Derby-p9720589.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Re%3A-Setting-the-environment-variables-for-Derby-p9720589.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12485131" author="johnemb" created="Thu, 29 Mar 2007 10:54:48 +0100"  >&lt;p&gt;Attaching a patch &apos;d2501_v1.diff&apos;, which modifies the following file in trunk:&lt;/p&gt;

&lt;p&gt;M      bin\derby_common.bat&lt;/p&gt;

&lt;p&gt;The patch renames the &quot;noAntHome&quot; label to &quot;noDerbyHome&quot; and goes to the label &quot;endcommon&quot; instead of the non-existing &quot;end&quot; after the noDerbyHome error message is displayed. This eliminates error message 2).&lt;/p&gt;

&lt;p&gt;This patch does not do anything with error message 3), as I am not sure what the best way to handle this is. It could be removed by adding a check for _JAVACMD in all the scripts that call derby_common.bat, or perhaps by letting the derby_common.bat script call the &quot;end&quot; label of the parent scripts directly, but I fear that the latter option might be unnecessarily complicated to implement. Any comments or suggestions are appreciated!&lt;/p&gt;

&lt;p&gt;Please review / commit this simple patch.&lt;/p&gt;</comment>
                            <comment id="12485206" author="scotsmatrix" created="Thu, 29 Mar 2007 16:08:46 +0100"  >&lt;p&gt;John - can we also expand the message that the user sees?&lt;br/&gt;
Perhaps to something like:&lt;/p&gt;

&lt;p&gt;DERBY_HOME is set incorrectly or the derby.jar file could not be located. Set the DERBY_HOME environment variable to the path&lt;br/&gt;
where you installed Derby.&lt;/p&gt;
</comment>
                            <comment id="12485215" author="johnemb" created="Thu, 29 Mar 2007 16:25:14 +0100"  >&lt;p&gt;Attaching new patch (d2501_v2.diff) incorporating Laura&apos;s suggestion. Error message 1) is now displayed on (at least) two lines:&lt;/p&gt;

&lt;p&gt;DERBY_HOME is set incorrectly or derby.jar could not be located.&lt;br/&gt;
Please set the DERBY_HOME environment variable to the path where you installed Derby.&lt;/p&gt;

&lt;p&gt;Please review the new patch instead of the old one.&lt;/p&gt;</comment>
                            <comment id="12492146" author="fuzzylogic" created="Thu, 26 Apr 2007 23:51:38 +0100"  >&lt;p&gt;Attaching a patch which includes the check that _JAVACMD is set in the scripts where appropriate to prevent the last unnecessary error message. In most cases, it is expected that java.exe will be in your path on Windows, or if you don&apos;t want the last JDK / JRE you installed via a Windows installer, you should set JAVA_HOME.&lt;/p&gt;</comment>
                            <comment id="12493019" author="johnemb" created="Wed, 2 May 2007 07:53:52 +0100"  >&lt;p&gt;I have verified that the latest patch, derby-2501-check-javacmd.diff, will remove all unnecessary error messages mentioned in this Jira issue. I also verified that the default Java path can be overridden by setting JAVA_HOME. Tested on Win XP Pro, using JDK 1.4.2_12 and Java SE 6 (1.6.0) (default).&lt;/p&gt;

&lt;p&gt;I think this patch is ready for commit.&lt;/p&gt;</comment>
                            <comment id="12493561" author="fuzzylogic" created="Fri, 4 May 2007 01:31:47 +0100"  >&lt;p&gt;Thanks for the review, John! Committed -javacmd patch with revision 535039. &lt;/p&gt;</comment>
                            <comment id="12494384" author="johnemb" created="Tue, 8 May 2007 20:28:07 +0100"  >&lt;p&gt;Thank you very much for the final patch work and the commit, Andrew! &lt;br/&gt;
I have verified the change by trying out a few of the scripts on Win XP.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12329359">DERBY-1032</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12354495" name="d2501_v1.diff" size="622" author="johnemb" created="Thu, 29 Mar 2007 10:54:48 +0100"/>
                            <attachment id="12354526" name="d2501_v2.diff" size="789" author="johnemb" created="Thu, 29 Mar 2007 16:25:14 +0100"/>
                            <attachment id="12356372" name="derby-2501-check-javacmd.diff" size="3051" author="fuzzylogic" created="Thu, 26 Apr 2007 23:51:38 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Mar 2007 15:08:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>