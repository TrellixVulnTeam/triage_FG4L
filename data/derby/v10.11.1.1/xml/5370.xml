<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5370/DERBY-5370.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5370] The toSQL method of the org.apache.derby.vti.Restriction class does not output correct constants for VARCHAR, Timestamp, Date, Time, or CHAR FOR BIT DATA types</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5370</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The toSQL method of the org.apache.derby.vti.Restriction class does not output correct constants for VARCHAR, Timestamp, Date, Time, or CHAR FOR BIT DATA types.  This method is useful for building the WHERE clause when implementing a Restricted Table Function.  The result of calling the toSQL method with restrictions on columns of these types does not produce valid SQL constants.  For example with a VARCHAR column being restricted the single quote characters are not placed round the string constant.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12516930">DERBY-5370</key>
            <summary>The toSQL method of the org.apache.derby.vti.Restriction class does not output correct constants for VARCHAR, Timestamp, Date, Time, or CHAR FOR BIT DATA types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bbergquist">Brett Bergquist</assignee>
                                    <reporter username="bbergquist">Brett Bergquist</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2011 14:40:34 +0100</created>
                <updated>Fri, 15 Nov 2013 08:15:14 +0000</updated>
                            <resolved>Fri, 26 Aug 2011 20:04:23 +0100</resolved>
                                    <version>10.8.1.2</version>
                                    <fixVersion>10.8.3.0</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13076206" author="bbergquist" created="Tue, 2 Aug 2011 14:50:00 +0100"  >&lt;p&gt;Actually it is not the column types that matter, but rather constant types that are passed with the SELECT statement WHERE clause that uses a Restricted Table Function.  These constant types are not correctly reproduced by the toSQL method.&lt;/p&gt;</comment>
                            <comment id="13076229" author="bbergquist" created="Tue, 2 Aug 2011 15:35:39 +0100"  >&lt;p&gt;Patch to output correct constants for the data types.&lt;/p&gt;</comment>
                            <comment id="13078304" author="rhillegas" created="Tue, 2 Aug 2011 18:40:07 +0100"  >&lt;p&gt;Thanks for the patch, Brett. I think that this should cover the comparable Derby types. Since BLOB and CLOB aren&apos;t comparable I don&apos;t think we need cases for them. If you want to add a test case to RestrictedVTITest, that would be great. If you don&apos;t want to, I will beef up the patch with a test. Thanks.&lt;/p&gt;</comment>
                            <comment id="13078305" author="bbergquist" created="Tue, 2 Aug 2011 18:44:27 +0100"  >&lt;p&gt;I would add a test case but I am just learning my way around the code now.  It may be a bit before I can figure out what I need to do but I can give it a shot.  It will be useful to learn a bit more about the testing framework.&lt;/p&gt;
</comment>
                            <comment id="13078316" author="rhillegas" created="Tue, 2 Aug 2011 19:00:44 +0100"  >&lt;p&gt;Thanks for that quick response, Brett. In case you haven&apos;t stumbled across this material yet, a good place to start is &lt;a href=&quot;http://wiki.apache.org/db-derby/DerbyTesting&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/DerbyTesting&lt;/a&gt; . RestrictedVTITest is a JUnit test so the material on JUnit testing is particularly relevant.&lt;/p&gt;</comment>
                            <comment id="13088947" author="rhillegas" created="Mon, 22 Aug 2011 20:27:40 +0100"  >&lt;p&gt;Attaching derby-5370-01-aa-withTest.diff. This adds a regression test to Brett&apos;s patch. I am running tests now.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/vti/Restriction.java&lt;/p&gt;

&lt;p&gt;Brett&apos;s change.&lt;/p&gt;

&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/lang/RestrictedTableVTI.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/RestrictedVTITest.java&lt;/p&gt;

&lt;p&gt;Test case for the improved Restriction.toSQL() method.&lt;/p&gt;</comment>
                            <comment id="13089034" author="rhillegas" created="Mon, 22 Aug 2011 22:33:02 +0100"  >&lt;p&gt;Tests passed cleanly for me. Committed derby-5370-01-aa-withTest.diff to trunk at subversion revision 1160445.&lt;/p&gt;</comment>
                            <comment id="13089043" author="rhillegas" created="Mon, 22 Aug 2011 22:41:07 +0100"  >&lt;p&gt;Ported 1160445 from trunk to 10.8 branch at subversion revision 1160455.&lt;/p&gt;</comment>
                            <comment id="13089463" author="rhillegas" created="Tue, 23 Aug 2011 14:35:15 +0100"  >&lt;p&gt;Attaching derby-5370-02-aa-disableOnJSR169.diff. This patch disables the new test on JSR169 platforms. Committed to trunk at subversion revision 1160680.&lt;/p&gt;

&lt;p&gt;The new test relies on a table function which extends org.apache.derby.vti.VTITemplate, an implementation of the JDBC 3.0 ResultSet. JDBC 3.0 ResultSets pull in classes which do not exist on the small JSR169 platform, resulting in ClassNotFoundExceptions during method resolution.&lt;/p&gt;

&lt;p&gt;Kathey noticed that the new test case fails on weme. She posted her findings in this derby-dev thread: &lt;a href=&quot;http://old.nabble.com/weme-failures-with-a-sane-build-to32316105.html#a32316105&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://old.nabble.com/weme-failures-with-a-sane-build-to32316105.html#a32316105&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/RestrictedVTITest.java&lt;/p&gt;</comment>
                            <comment id="13089469" author="rhillegas" created="Tue, 23 Aug 2011 14:38:42 +0100"  >&lt;p&gt;Ported 1160680 from trunk to 10.8 branch at subversion revision 1160683.&lt;/p&gt;</comment>
                            <comment id="13208907" author="kmarsden" created="Wed, 15 Feb 2012 22:54:57 +0000"  >&lt;p&gt;Assigning this issue to Brett who contributed the patch. Actually it was a collaboration as Rick Wrote the test&lt;/p&gt;</comment>
                            <comment id="13823429" author="knutanders" created="Fri, 15 Nov 2013 08:15:14 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491251" name="derby-5370-01-aa-withTest.diff" size="25857" author="rhillegas" created="Mon, 22 Aug 2011 20:27:40 +0100"/>
                            <attachment id="12488900" name="derby-5370.diff" size="1473" author="bbergquist" created="Tue, 2 Aug 2011 15:35:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Aug 2011 17:40:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0dyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>