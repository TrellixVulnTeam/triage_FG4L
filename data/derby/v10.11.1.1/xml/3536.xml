<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:14:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3536/DERBY-3536.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3536] specialCollation() and noSpecialCollation() in TableFunctionTest fail with weme6.1.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3536</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The &quot;specialCollation()&quot; and &quot;noSpecialCollation()&quot; fixtures in TableFunctionTest fail when run with weme6.1.  I have not explicitly confirmed but it looks like this may be related to svn # 636004.  The stack trace is:&lt;/p&gt;

&lt;p&gt;noSpecialCollation(o.a.dTesting.functionTests.tests.lang.TableFunctionTest)java.sql.SQLException: An attempt was made to get a data value of type &apos;java.lang.Object&apos; from a data value of type &apos;DECIMAL&apos;.&lt;br/&gt;
 at o.a.d.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.Util.generateCsSQLException(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.EmbedConnection.handleException(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.ConnectionChild.handleException(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.EmbedResultSet.closeOnTransactionError(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.jdbc.EmbedResultSet.next(Unknown Source)&lt;br/&gt;
 at o.a.dTesting.functionTests.tests.lang.TableFunctionTest.assertResults(TableFunctionTest.java:1935)&lt;br/&gt;
 at o.a.dTesting.functionTests.tests.lang.TableFunctionTest.assertResults(TableFunctionTest.java:1776)&lt;br/&gt;
 at o.a.dTesting.functionTests.tests.lang.TableFunctionTest.assertResults(TableFunctionTest.java:1762)&lt;br/&gt;
 at o.a.dTesting.functionTests.tests.lang.TableFunctionTest.allLegalDatatypesVTIResults(TableFunctionTest.java:1178)&lt;br/&gt;
 at o.a.dTesting.functionTests.tests.lang.TableFunctionTest.tableFunctionTest(TableFunctionTest.java:921)&lt;br/&gt;
 at o.a.dTesting.functionTests.tests.lang.TableFunctionTest.noSpecialCollation(TableFunctionTest.java:897)&lt;br/&gt;
 at java.lang.reflect.AccessibleObject.invokeV(AccessibleObject.java:205)&lt;br/&gt;
 at o.a.dTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)&lt;br/&gt;
Caused by: ERROR 22005: An attempt was made to get a data value of type &apos;java.lang.Object&apos; from a data value of type &apos;DECIMAL&apos;.&lt;br/&gt;
 at o.a.d.iapi.error.StandardException.newException(Unknown Source)&lt;br/&gt;
 at o.a.d.iapi.types.DataType.dataTypeConversion(Unknown Source)&lt;br/&gt;
 at o.a.d.iapi.types.DataType.getObject(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.sql.execute.VTIResultSet.cast(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.sql.execute.VTIResultSet.populateFromResultSet(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.sql.execute.VTIResultSet.getNextRowCore(Unknown Source)&lt;br/&gt;
 at o.a.d.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source)&lt;/p&gt;

&lt;p&gt;Comments from RIck on derby-dev (in response to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3341&quot; title=&quot;TABLE FUNCTION returning CHAR values does not return a correct value if the Java ResultSet class returns a value less than the length of the defined CHAR.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3341&quot;&gt;&lt;del&gt;DERBY-3341&lt;/del&gt;&lt;/a&gt; inquiry):&lt;/p&gt;

&lt;p&gt;  &quot;The handling of DECIMAL on the small device platform is different. The test may need some special&lt;br/&gt;
  logic so that it calls the correct method for the small device environment.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12391378">DERBY-3536</key>
            <summary>specialCollation() and noSpecialCollation() in TableFunctionTest fail with weme6.1.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="army">A B</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Mar 2008 23:59:45 +0000</created>
                <updated>Fri, 21 Jan 2011 17:51:43 +0000</updated>
                            <resolved>Thu, 20 Mar 2008 20:06:05 +0000</resolved>
                                    <version>10.4.1.3</version>
                    <version>10.5.1.1</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12580382" author="rhillegas" created="Wed, 19 Mar 2008 14:18:17 +0000"  >&lt;p&gt;Hi Army,&lt;/p&gt;

&lt;p&gt;Thanks for logging this bug. Could you test-drive the attached patch (derby-3536-01-aa-decimalCast.diff) and see if it fixes the problem? Thanks.&lt;/p&gt;</comment>
                            <comment id="12580474" author="mikem" created="Wed, 19 Mar 2008 17:50:16 +0000"  >&lt;p&gt;I tried the patch out on a sane classes build in the weme6.1 environment.  Before the patch, just running the TableFunctionTest I got the above error in specialCollation and noSpecialCollation.  After the patch it seemed to pass, but got the following message which I believe is a separate issue:&lt;br/&gt;
.Parsing policy file: &lt;a href=&quot;file:/C:/p4/m2/classes/org/apache/derbyTesting/functionTes&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/C:/p4/m2/classes/org/apache/derbyTesting/functionTes&lt;/a&gt;&lt;br/&gt;
ts/util/derby_tests.policy, found unexpected: permission&lt;br/&gt;
Parsing policy file: &lt;a href=&quot;file:/C:/p4/m2/classes/org/apache/derbyTesting/functionTest&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/C:/p4/m2/classes/org/apache/derbyTesting/functionTest&lt;/a&gt;&lt;br/&gt;
s/util/derby_tests.policy, found unexpected: permission&lt;br/&gt;
.&lt;br/&gt;
Time: 21.984&lt;/p&gt;

&lt;p&gt;OK (2 tests)&lt;/p&gt;</comment>
                            <comment id="12580548" author="rhillegas" created="Wed, 19 Mar 2008 20:38:17 +0000"  >&lt;p&gt;Thanks, Mike. That sounds like a separate issue. Maybe we can get some advice from someone who understands the Java security behavior on that platform.&lt;/p&gt;</comment>
                            <comment id="12580549" author="djd" created="Wed, 19 Mar 2008 20:40:55 +0000"  >&lt;p&gt;Are you running the tests with WEME 6.1 as required?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/db-derby/JunitVmIssues#head-660f05752b5de460a55db1f7ff67ce869af2d38e&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/JunitVmIssues#head-660f05752b5de460a55db1f7ff67ce869af2d38e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12580823" author="rhillegas" created="Thu, 20 Mar 2008 16:13:50 +0000"  >&lt;p&gt;For the record, with this patch the regression tests run cleanly for me except for a problem in the ManagementMBeanTest which I do not think is related to this change. I am inclined to commit this patch on the assumption that the &quot;unexpected: permission&quot; problem is the separate issue noted by Dan.&lt;/p&gt;

&lt;p&gt;Here is the problem I saw in ManagementMBeanTest:&lt;/p&gt;

&lt;p&gt;There was 1 failure:&lt;br/&gt;
1) testStartStopManagementFromApplication(org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest)junit.framework.AssertionFailedError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;5&amp;gt;&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.startStopManagement(ManagementMBeanTest.java:86)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.management.ManagementMBeanTest.testStartStopManagementFromApplication(ManagementMBeanTest.java:56)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 8562,  Failures: 1,  Errors: 0&lt;/p&gt;</comment>
                            <comment id="12580906" author="rhillegas" created="Thu, 20 Mar 2008 19:52:22 +0000"  >&lt;p&gt;Committed patch to trunk at subversion revision 639428.&lt;/p&gt;</comment>
                            <comment id="12580910" author="rhillegas" created="Thu, 20 Mar 2008 20:02:43 +0000"  >&lt;p&gt;Port 639428 from trunk to 10.4 branch at subversion revision 639434.&lt;/p&gt;</comment>
                            <comment id="12582560" author="dyret" created="Thu, 27 Mar 2008 09:26:29 +0000"  >&lt;p&gt;Assigning to Rick and setting fix-version to 10.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12378236" name="derby-3536-01-aa-decimalCast.diff" size="1126" author="rhillegas" created="Wed, 19 Mar 2008 14:18:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Mar 2008 14:18:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23696</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0lkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37314</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>