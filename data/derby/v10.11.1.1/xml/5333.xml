<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:53:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5333/DERBY-5333.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5333] Intermittent assert failure in testInterruptShutdown: thread&apos;s interrupted flag lost after shutdown</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5333</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Saw this while running trunk&apos;s InterruptResilienceTest 800 times back-to-back with JDK1.7 b147 looking for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5312&quot; title=&quot;InterruptResilienceTest failed with ERROR 40XD1: Container was opened in read-only mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5312&quot;&gt;&lt;del&gt;DERBY-5312&lt;/del&gt;&lt;/a&gt;. It is independent of that issue, though: I saw it with both proposed patches for that issue also.&lt;/p&gt;

&lt;p&gt;1) testInterruptShutdown(org.apache.derbyTesting.functionTests.tests.store.InterruptResilienceTest)junit.f\&lt;br/&gt;
ramework.AssertionFailedError&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.store.InterruptResilienceTest.testInterruptShutdown\&lt;br/&gt;
(InterruptResilienceTest.java:667)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12514078">DERBY-5333</key>
            <summary>Intermittent assert failure in testInterruptShutdown: thread&apos;s interrupted flag lost after shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jul 2011 16:28:24 +0100</created>
                <updated>Tue, 2 Oct 2012 09:51:53 +0100</updated>
                            <resolved>Tue, 26 Jul 2011 15:40:44 +0100</resolved>
                                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13067803" author="dagw" created="Tue, 19 Jul 2011 17:00:29 +0100"  >&lt;p&gt;Data point: I did &lt;b&gt;not&lt;/b&gt; see this when running 2000 iterations with patches for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5312&quot; title=&quot;InterruptResilienceTest failed with ERROR 40XD1: Container was opened in read-only mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5312&quot;&gt;&lt;del&gt;DERBY-5312&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5325&quot; title=&quot;Checkpoint fails with ClosedChannelException in InterruptResilienceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5325&quot;&gt;&lt;del&gt;DERBY-5325&lt;/del&gt;&lt;/a&gt;, but it could be just timing changes, too early to say.&lt;/p&gt;</comment>
                            <comment id="13067854" author="dagw" created="Tue, 19 Jul 2011 18:34:39 +0100"  >&lt;p&gt;I was able to see this in the debugger by holding back the background daemon doing checkpointing a bit, so there is a bug here.&lt;/p&gt;
</comment>
                            <comment id="13067906" author="dagw" created="Tue, 19 Jul 2011 20:35:44 +0100"  >&lt;p&gt;Uploading a patch (derby-5333-repro) which when applied provokes the error on my box reliably. It makes the daemon  checkpointing wait 15 seconds before proceeding. It happens on JDK 5/6, too, not only JDK 7.&lt;/p&gt;</comment>
                            <comment id="13068117" author="dagw" created="Wed, 20 Jul 2011 02:21:28 +0100"  >&lt;p&gt;Uploading a patch which fixes this issue. There was a remaining case of wait() being called by the session thread in the BasicDaemon code which led to the interrupt flag being lost. This would only happen if the checkpoint was still active when the session thread tried to stop the daemon, hence the sleep in the repro pushed it out in time to make it more likely.&lt;/p&gt;</comment>
                            <comment id="13068471" author="knutanders" created="Wed, 20 Jul 2011 17:20:14 +0100"  >&lt;p&gt;The patch looks correct to me. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="13071074" author="dagw" created="Tue, 26 Jul 2011 13:58:23 +0100"  >&lt;p&gt;Regressions ran ok, modulo errors in LobLimitsTest, which I believe are unrelated.&lt;/p&gt;</comment>
                            <comment id="13071110" author="dagw" created="Tue, 26 Jul 2011 15:04:28 +0100"  >&lt;p&gt;Committed patch derby-5333a at svn 1151101.&lt;/p&gt;</comment>
                            <comment id="13071126" author="dagw" created="Tue, 26 Jul 2011 15:39:56 +0100"  >&lt;p&gt;Backported to 10.8 branch at 1151118, closing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12503306">DERBY-5175</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12469090">DERBY-4741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12487048" name="derby-5333-repro.diff" size="754" author="dagw" created="Tue, 19 Jul 2011 20:35:44 +0100"/>
                            <attachment id="12487097" name="derby-5333a.diff" size="960" author="dagw" created="Wed, 20 Jul 2011 02:23:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jul 2011 16:20:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24775</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy08c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>