<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:47:16 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2831/DERBY-2831.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2831] NullPointerException creating a function in a schema that doesn&apos;t exist when the return type is a character type</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2831</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;ij&amp;gt; connect &apos;jdbc:derby:cs;create=true&apos;;&lt;br/&gt;
ij&amp;gt; create function aa.b() returns varchar(10) no sql&lt;br/&gt;
parameter style java language java&lt;br/&gt;
external name &apos;aaa.bbb.ccc&apos;;&lt;br/&gt;
ERROR XJ001: Java exception: &apos;: java.lang.NullPointerException&apos;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12371778">DERBY-2831</key>
            <summary>NullPointerException creating a function in a schema that doesn&apos;t exist when the return type is a character type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2007 19:15:58 +0100</created>
                <updated>Fri, 21 Jan 2011 17:50:21 +0000</updated>
                            <resolved>Fri, 29 Jun 2007 06:18:28 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12505334" author="djd" created="Fri, 15 Jun 2007 19:16:36 +0100"  >&lt;p&gt;Stack trace&lt;/p&gt;

&lt;p&gt;java.sql.SQLException: Java exception: &apos;: java.lang.NullPointerException&apos;.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExc&lt;br/&gt;
eptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.javaException(Util.java:245)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException&lt;br/&gt;
(TransactionResourceImpl.java:403)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Tr&lt;br/&gt;
ansactionResourceImpl.java:346)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConne&lt;br/&gt;
ction.java:1572)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Connection&lt;br/&gt;
Child.java:81)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java&lt;br/&gt;
:585)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java&lt;br/&gt;
:528)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:330)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:522)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:3&lt;br/&gt;
64)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:262)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.go(Main.java:215)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:181)&lt;br/&gt;
        at org.apache.derby.impl.tools.ij.Main14.main(Main14.java:56)&lt;br/&gt;
        at org.apache.derby.tools.ij.main(ij.java:71)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.CreateAliasNode.typeDescriptorWithC&lt;br/&gt;
orrectCollation(CreateAliasNode.java:287)&lt;br/&gt;
        at org.apache.derby.impl.sql.compile.CreateAliasNode.bindStatement(Creat&lt;br/&gt;
eAliasNode.java:330)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatemen&lt;br/&gt;
t.java:314)&lt;br/&gt;
        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.j&lt;br/&gt;
ava:88)&lt;br/&gt;
        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepa&lt;br/&gt;
reInternalStatement(GenericLanguageConnectionContext.java:748)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java&lt;br/&gt;
:579)&lt;br/&gt;
        ... 9 more&lt;/p&gt;</comment>
                            <comment id="12505335" author="djd" created="Fri, 15 Jun 2007 19:18:57 +0100"  >&lt;p&gt;This function with a non-character return type is created with no problem:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create function xx.b() returns integer no sql&lt;br/&gt;
parameter style java language java&lt;br/&gt;
external name &apos;aaa.bbb.ccc&apos;;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;/p&gt;
</comment>
                            <comment id="12509009" author="mamtas" created="Fri, 29 Jun 2007 06:11:52 +0100"  >&lt;p&gt;Commited changes into trunk using revision 551793. the commit comments are as follows&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2831&quot; title=&quot;NullPointerException creating a function in a schema that doesn&amp;#39;t exist when the return type is a character type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2831&quot;&gt;&lt;del&gt;DERBY-2831&lt;/del&gt;&lt;/a&gt; Creating a function that returns a character string literal inside a schema that doesnot exist should not give&lt;br/&gt;
a null pointer exception. This was happening while we were trying to look up the collation. The collation lookup should be&lt;br/&gt;
done using the super class&apos;s getSchemaDescriptor method.&lt;/p&gt;</comment>
                            <comment id="12509010" author="mamtas" created="Fri, 29 Jun 2007 06:18:28 +0100"  >&lt;p&gt;Merged changes from main into 10.3 codeline. The revision for 10.3 codeline is 551794.&lt;/p&gt;</comment>
                            <comment id="12509118" author="djd" created="Fri, 29 Jun 2007 15:39:25 +0100"  >&lt;p&gt;I didn&apos;t understand the test changes which were just:&lt;/p&gt;

&lt;p&gt;&amp;#8212; db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/lang/CollationTest.java&lt;/p&gt;

&lt;p&gt;+    //&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2831&quot; title=&quot;NullPointerException creating a function in a schema that doesn&amp;#39;t exist when the return type is a character type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2831&quot;&gt;&lt;del&gt;DERBY-2831&lt;/del&gt;&lt;/a&gt; Creating a function inside a non-existent schema should not&lt;br/&gt;
+    //fail when it&apos;s return type is of character string type.&lt;/p&gt;


&lt;p&gt;Did you just forget to add the actual test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12509133" author="mamtas" created="Fri, 29 Jun 2007 16:43:38 +0100"  >&lt;p&gt;Yes, I did &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thought nobody will notice &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Sorry about that, I will add a test case that I meant to add very soon.&lt;/p&gt;</comment>
                            <comment id="12509142" author="mamtas" created="Fri, 29 Jun 2007 17:35:35 +0100"  >&lt;p&gt;With revision 551942, adding a test case in main codeline. Also making sure correct collation setting is used for character string parameters to the procedures when they get created. Commit comments are as follows. Will merge it to 10.3.1.1 very soon. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2831&quot; title=&quot;NullPointerException creating a function in a schema that doesn&amp;#39;t exist when the return type is a character type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2831&quot;&gt;&lt;del&gt;DERBY-2831&lt;/del&gt;&lt;/a&gt; &lt;br/&gt;
Forgot to enter a test case during 551793 checkin. This commit just creates a function in non-existent database to  ensure we don&apos;t throw null pointer exception.&lt;/p&gt;

&lt;p&gt;In addition, this commit also makes sure that we associate correct collation information with the character string parameters to procedures when the procedure gets created in CreateAliasNode. We already do this for function but similar work needs to happen for procedures.&lt;/p&gt;</comment>
                            <comment id="12509144" author="mamtas" created="Fri, 29 Jun 2007 17:42:26 +0100"  >&lt;p&gt;Migrated the changes (revision 551942) from main into 10.3.1.1 code line (revision 551950).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12345445">DERBY-1478</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jun 2007 05:11:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23271</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0man:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37430</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>