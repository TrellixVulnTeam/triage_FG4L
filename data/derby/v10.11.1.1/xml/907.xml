<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:31:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-907/DERBY-907.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-907] regression test failure in RecoveryAfterBackup on wssd5.6 ibm jvm (j2me)</title>
                <link>https://issues.apache.org/jira/browse/DERBY-907</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;It looks like this test may be using a class that does not exist in j2me, can someone with j2me&lt;br/&gt;
knowledge take a look?  If so test either should not run there, or test may need to change.  This &lt;br/&gt;
failed from 1/27 codeline, last passed 1/13 that I know of.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: RecoveryAfterBackup jdk1.3.1 subset - 2.1 storeall:storerecovery 2006-01-29 20:40:13 ***&lt;br/&gt;
1 del&lt;br/&gt;
&amp;lt; Count: 2 Sum: 1&lt;br/&gt;
2 del&lt;br/&gt;
&amp;lt; Inserting records ...&lt;br/&gt;
3 del&lt;br/&gt;
&amp;lt; Shutting down database ...&lt;br/&gt;
4 del&lt;br/&gt;
&amp;lt; Database shutdown completed&lt;br/&gt;
5 del&lt;br/&gt;
&amp;lt; Starting restore with roll-forward recovery..&lt;br/&gt;
6 del&lt;br/&gt;
&amp;lt; Verifying database ...&lt;br/&gt;
7 del&lt;br/&gt;
&amp;lt; Count: 256 Sum: 32640&lt;br/&gt;
7 add&lt;br/&gt;
&amp;gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax.sql.DataSource&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   RecoveryAfterBackup jdk1.3.1 subset - 2.1 storeall:storerecovery 2006-01-29 20:40:14 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12328384">DERBY-907</key>
            <summary>regression test failure in RecoveryAfterBackup on wssd5.6 ibm jvm (j2me)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="mikem">Mike Matrigali</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2006 10:45:55 +0000</created>
                <updated>Mon, 29 Jun 2009 23:57:55 +0100</updated>
                            <resolved>Sat, 11 Feb 2006 09:56:27 +0000</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12365156" author="deepa" created="Sat, 4 Feb 2006 09:44:35 +0000"  >&lt;p&gt;Attaching a patch &apos;derby-907.diff&apos; which modifies the test store/RecoveryAfterBackup.java to run with j9 and j9_foundation vm.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Modifies app_properties files to add ij.dataSource properties. Also changed &apos;database&apos; to &apos;ij.database&apos; property. Removed usedefaults to avoid conflict with default property.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Modified the test to get connection using DriverManager/DataSource.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With the patch, I ran the RecoveryAfterBackup tests with Sun JDK1.4.2, j9 and j9 foundation vm.  Please review/commit this patch. Thanks&lt;/p&gt;</comment>
                            <comment id="12365163" author="kmarsden" created="Sat, 4 Feb 2006 10:34:20 +0000"  >&lt;p&gt;I tend to think we can abstract out the connections that need special attributes  without using TestUtil.HAVE_DRIVER_CLASS in the test.&lt;/p&gt;

&lt;p&gt;A couple of ideas, I am sure there are better ones available ...&lt;/p&gt;

&lt;p&gt;Instead of  TestUtil.shutdownUsingDataSource(&quot;&quot;) we could have 	TestUtil.shutdown(String database); and TestUtil.shutdown()  (for system shutdown)&lt;/p&gt;

&lt;p&gt; Perhaps an alternate startJBMS call like startJBMS(Properties info, boolean override)  to allow tests to specify attributes  to override or append to the ones set in the properties would work for the generic case, but that would be a little weird for shutdown.&lt;/p&gt;

&lt;p&gt;It would be good to have something easy for folks making/fixing tests so that they run with J2ME.&lt;/p&gt;</comment>
                            <comment id="12365910" author="deepa" created="Sat, 11 Feb 2006 00:31:13 +0000"  >&lt;p&gt;Attaching a second version of patch &apos;derby-907-v2.diff&apos; which modifies the test store/RecoveryAfterBackup.java to run with j9 and j9_foundation vm.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Modifies app_properties files to add ij.dataSource properties. Also changed &apos;database&apos; to &apos;ij.database&apos; property. Removed usedefaults to avoid conflict with default property.&lt;/li&gt;
	&lt;li&gt;Adds a method getConnection to TestUtil to get connection using different set of attributes than what is specified in _app.properties file.&lt;/li&gt;
	&lt;li&gt;Changes the test store/RecoveryAfterBackup to use the above method to shutdown and get connection. I&apos;ll change other tests to use the new method in a later patch.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With the patch, I ran the RecoveryAfterBackup tests with Sun JDK1.4.2, j9 and j9 foundation vm. Please review/commit this patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="12365933" author="oysteing" created="Sat, 11 Feb 2006 02:57:18 +0000"  >&lt;p&gt;Thanks for fixing this Deepa.&lt;/p&gt;

&lt;p&gt;The changes looks good to me.  I am not sure I understand why this has started to fail.  I thought that using DataSource was the right way to get things to work also in J2ME.  Was the problem that TestUtil fooled me by only being able to deliver a DataSource when there was a DriverManager available?&lt;/p&gt;

&lt;p&gt;A last question: What is the purpose of the following lines:&lt;br/&gt;
ij.showNoConnectionsAtStart=true&lt;br/&gt;
ij.showNoCountForSelect=true&lt;br/&gt;
ij.defaultResourcePackage=/org/apache/derbyTesting/functionTests/tests/store/&lt;/p&gt;</comment>
                            <comment id="12365954" author="kmarsden" created="Sat, 11 Feb 2006 04:31:54 +0000"  >&lt;p&gt;Thanks Deepa. I submitted this patch.&lt;br/&gt;
This is a lot better  and clearer for test writers and readers.&lt;/p&gt;

&lt;p&gt;Date: Fri Feb 10 11:22:37 2006&lt;br/&gt;
New Revision: 376804&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewcvs?rev=376804&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs?rev=376804&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-907&quot; title=&quot;regression test failure in RecoveryAfterBackup on wssd5.6 ibm jvm (j2me)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-907&quot;&gt;&lt;del&gt;DERBY-907&lt;/del&gt;&lt;/a&gt; regression test failure in RecoveryAfterBackup on wssd5.6 ibm jvm (j2me)&lt;/p&gt;

&lt;p&gt;I changed the comment in TestUtil.getConnection to just say &quot;tests use this...&quot; instead of  &quot;store tests use this.. &quot;&lt;/p&gt;

&lt;p&gt;Please file an issue for the other test cleanup and to doc the proper way to shutdown or get connections with special attributes  in the testing README.&lt;/p&gt;

&lt;p&gt;I am still a bit concerned that folks will be looking for an alternate startJBMS() method l when they do this and won&apos;t think to look in TestUtil for the getConnection() method even with the doc.   Maybe a bread crumb trail comment in startJBMS would be helpful too to make it clearer.&lt;/p&gt;
</comment>
                            <comment id="12366001" author="deepa" created="Sat, 11 Feb 2006 09:56:27 +0000"  >&lt;p&gt;Verified that the test passes with  j9 and j9_foundation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12322831" name="derby-907-v2.diff" size="6172" author="deepa" created="Sat, 11 Feb 2006 00:31:13 +0000"/>
                            <attachment id="12322832" name="derby-907-v2.status" size="391" author="deepa" created="Sat, 11 Feb 2006 00:31:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 4 Feb 2006 09:44:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0vqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>