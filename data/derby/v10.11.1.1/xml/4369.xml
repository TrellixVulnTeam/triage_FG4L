<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:29:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4369/DERBY-4369.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4369] Give a more useful error message when join specification is missing</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4369</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Currently, if a join is missing a join specification, we see the following rather cryptic message:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from t1 join t2;&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;&amp;lt;EOF&amp;gt;&quot; at line 1, column 24.&lt;br/&gt;
Issue the &apos;help&apos; command for general information on IJ command syntax.&lt;br/&gt;
Any unrecognized commands are treated as potential SQL commands and executed directly.&lt;br/&gt;
Consult your DBMS server reference documentation for details of the SQL syntax supported by your server.&lt;/p&gt;

&lt;p&gt;The parser already has code to check if the join specification is missing, but since the join specification is required in the grammar, we&apos;ll never get to that point in the code if it is missing. If we make the join specification optional in the grammar, the code path with the more helpful message will be enabled, and we&apos;ll see this instead:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from t1 join t2;&lt;br/&gt;
ERROR 42Y11: A join specification is required with the &apos;INNER JOIN&apos; clause.&lt;/p&gt;

&lt;p&gt;This will make it clearer what the problem is.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12434932">DERBY-4369</key>
            <summary>Give a more useful error message when join specification is missing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Sep 2009 10:57:17 +0100</created>
                <updated>Wed, 9 Sep 2009 12:50:51 +0100</updated>
                            <resolved>Wed, 9 Sep 2009 12:50:51 +0100</resolved>
                                    <version>10.6.1.0</version>
                                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12751867" author="knutanders" created="Sun, 6 Sep 2009 11:02:30 +0100"  >&lt;p&gt;The proposed change will also change the SQLState for this kind of error, so it will need a release note.&lt;/p&gt;</comment>
                            <comment id="12752142" author="knutanders" created="Mon, 7 Sep 2009 15:07:19 +0100"  >&lt;p&gt;Here&apos;s a patch that makes the ON clause optional in the grammar, which makes it possible that the parser sees onClause==null and emits the error message for it.&lt;/p&gt;

&lt;p&gt;The patch also updates the canons for lang/innerjoin.sql, lang/outerjoin.sql and lang/db2Compatibility.sql, which now see a different error message/SQLState when the join lacks an ON clause. Both derbyall and suites.All run cleanly with the patch.&lt;/p&gt;

&lt;p&gt;All the changed errors go from SQLState 42X01 to SQLState 42Y11. Most of the old error messages are on the form &quot;Syntax error: Encountered &quot;&amp;lt;EOF&amp;gt;&quot; at line 3, column 30.&quot;&lt;/p&gt;

&lt;p&gt;Some special cases to notice:&lt;/p&gt;

&lt;p&gt;1) If you use a USING clause instead of an ON clause, the old message would say something along these lines:&lt;/p&gt;

&lt;p&gt;ERROR 42X01: Syntax error: Encountered &quot;USING&quot; at line 2, column 37.&lt;/p&gt;

&lt;p&gt;Whereas the new message says:&lt;/p&gt;

&lt;p&gt;ERROR 42Y11: A join specification is required with the &apos;LEFT OUTER JOIN&apos; clause.&lt;/p&gt;

&lt;p&gt;Since a USING clause is a join specification, the new message is not entirely clear in this case. Perhaps it should rather have used the term &quot;ON clause&quot; instead of join specification. Or we could just implement the USING clause (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4370&quot; title=&quot;Implement JOIN ... USING syntax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4370&quot;&gt;&lt;del&gt;DERBY-4370&lt;/del&gt;&lt;/a&gt;) to avoid the problem altogether.&lt;/p&gt;

&lt;p&gt;2) For a query such as &quot;SELECT * FROM t1 CROSS JOIN t2&quot;, we would previously get the EOF message, but now we&apos;ll get this instead:&lt;/p&gt;

&lt;p&gt;ERROR 42Y11: A join specification is required with the &apos;INNER JOIN&apos; clause.&lt;/p&gt;

&lt;p&gt;This may look a bit odd, since the query is apparently a CROSS JOIN and not an INNER JOIN. The explanation is that CROSS JOIN is not implemented yet (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4355&quot; title=&quot;Implement CROSS JOIN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4355&quot;&gt;&lt;del&gt;DERBY-4355&lt;/del&gt;&lt;/a&gt;) and CROSS is not a reserved keyword in Derby&apos;s parser. Because of this, CROSS is interpreted as an identifier which acts as an alias for T1. Derby therefore treats this as an INNER JOIN and not a CROSS JOIN, as would become apparent if an ON clause was added, and the error message is correct.&lt;/p&gt;</comment>
                            <comment id="12752179" author="knutanders" created="Mon, 7 Sep 2009 16:38:33 +0100"  >&lt;p&gt;Attached is a release note for this issue.&lt;/p&gt;</comment>
                            <comment id="12752256" author="dagw" created="Mon, 7 Sep 2009 22:01:00 +0100"  >&lt;p&gt;The example with CROSS as an alias for t1 is sufficiently nasty, that if we don&apos;t implement&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4355&quot; title=&quot;Implement CROSS JOIN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4355&quot;&gt;&lt;del&gt;DERBY-4355&lt;/del&gt;&lt;/a&gt; (add CROSS JOIN), I think the above case should give an error even if CROSS&lt;br/&gt;
is a legal identifier in other contexts. Ideally I&apos;d like to see CROSS being a reserved keyword, but&lt;br/&gt;
that could break apps which use that identifier in more innocuous context, of course.&lt;/p&gt;</comment>
                            <comment id="12752257" author="dagw" created="Mon, 7 Sep 2009 22:02:56 +0100"  >&lt;p&gt;Release note looks good, thanks!&lt;/p&gt;</comment>
                            <comment id="12752258" author="dagw" created="Mon, 7 Sep 2009 22:05:02 +0100"  >&lt;p&gt;..as well as the patch.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12752386" author="knutanders" created="Tue, 8 Sep 2009 09:42:01 +0100"  >&lt;p&gt;Thanks for reviewing the patch and the release note, Dag. I agree with your comment about CROSS JOIN, and I hope that we can get that resolved by fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4355&quot; title=&quot;Implement CROSS JOIN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4355&quot;&gt;&lt;del&gt;DERBY-4355&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Committed revision 812387.&lt;/p&gt;</comment>
                            <comment id="12752576" author="knutanders" created="Tue, 8 Sep 2009 16:45:29 +0100"  >&lt;p&gt;I noticed that the commit introduced this JavaCC warning:&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Warning: Choice conflict in &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; construct at line 9210, column 17.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;          Expansion nested within construct and expansion following c&lt;br/&gt;
onstruct&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;          have common prefixes, one of which is: &quot;on&quot;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;          Consider using a lookahead of 2 or more for nested expansion.&lt;/p&gt;

&lt;p&gt;The main reason for filing this issue was that it seemed like making the join specification optional would be required in order to make CROSS JOIN work (and possibly NATURAL JOIN whenever that is implemented). Now it seems like CROSS JOIN (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4355&quot; title=&quot;Implement CROSS JOIN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4355&quot;&gt;&lt;del&gt;DERBY-4355&lt;/del&gt;&lt;/a&gt;) will need a separate rule in the parser anyway, so there is no actual need to make the join specification optional for the other join types, except for exposing the clearer error message.&lt;/p&gt;

&lt;p&gt;Unless it turns out that this change will be required for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4355&quot; title=&quot;Implement CROSS JOIN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4355&quot;&gt;&lt;del&gt;DERBY-4355&lt;/del&gt;&lt;/a&gt;, I suggest we back out the changes made in this issue and close it as Won&apos;t Fix. That&apos;ll also save us one possible compatibility issue (the changed SQLState).&lt;/p&gt;</comment>
                            <comment id="12752621" author="dagw" created="Tue, 8 Sep 2009 18:28:45 +0100"  >&lt;p&gt;+1. I think it&apos;s better to have the parser detect if the different join type can/can not have ON/USING clauses than delaying this&lt;br/&gt;
to bind time. By proper restructuring of the rules you would then solve the issue of the &quot;late&quot; ON clause mention in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4355&quot; title=&quot;Implement CROSS JOIN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4355&quot;&gt;&lt;del&gt;DERBY-4355&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</comment>
                            <comment id="12753043" author="knutanders" created="Wed, 9 Sep 2009 12:49:52 +0100"  >&lt;p&gt;$ svn merge -c -812387 .&lt;br/&gt;
&amp;#8212; Reverse-merging r812387 into &apos;.&apos;:&lt;br/&gt;
U    java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj&lt;br/&gt;
U    java/testing/org/apache/derbyTesting/functionTests/master/db2Compatibility.out&lt;br/&gt;
U    java/testing/org/apache/derbyTesting/functionTests/master/innerjoin.out&lt;br/&gt;
U    java/testing/org/apache/derbyTesting/functionTests/master/outerjoin.out&lt;br/&gt;
$ svn ci&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/db2Compatibility.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/innerjoin.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/outerjoin.out&lt;br/&gt;
Transmitting file data ....&lt;br/&gt;
Committed revision 812895.&lt;/p&gt;</comment>
                            <comment id="12753044" author="knutanders" created="Wed, 9 Sep 2009 12:50:30 +0100"  >&lt;p&gt;Removed fix-version and release note needed since the fix was backed out.&lt;/p&gt;</comment>
                            <comment id="12753045" author="knutanders" created="Wed, 9 Sep 2009 12:50:51 +0100"  >&lt;p&gt;Closed as Won&apos;t Fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12433314">DERBY-4355</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12418806" name="derby-4369-1a.diff" size="7840" author="knutanders" created="Mon, 7 Sep 2009 15:07:19 +0100"/>
                            <attachment id="12418818" name="releaseNote.html" size="4332" author="knutanders" created="Mon, 7 Sep 2009 16:38:33 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Sep 2009 21:01:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0rtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>