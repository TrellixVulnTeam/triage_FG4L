<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:52:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3982/DERBY-3982.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3982] Add a facility to override the default set of old versions to be tested in the upgrade tests.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3982</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In my testing I have seen a need for performing upgrade testing from local/internal non-public &quot;versions&quot; of Derby.&lt;br/&gt;
That is, having local/internal changes to some older branch and allowing upgrade testing from this (not yet public) version.&lt;/p&gt;


&lt;p&gt;One solution is to locally modify the &apos;VERSIONS&apos; table of the upgradetests &apos;_Suite&apos;, but this means modifying the source for each such case.&lt;/p&gt;

&lt;p&gt;A more flexible solution is to override the default versions (given in &apos;VERSIONS&apos;) by using a property giving a file which lists the versions to test upgrade from. The location to local version jars can currently be given by the &apos;derbyTesting.oldReleasePath&apos; property. The list of versions could be given by a property &apos;derbyTesting.oldVersionsPath&apos;.&lt;/p&gt;

&lt;p&gt;This will also easily allow us to skip testing upgrade from a specific version. (This can already be done by not having the version jars available.)&lt;/p&gt;

&lt;p&gt;The list of versions given via the property should be used whether versions (jars) are available locally (as given by the &apos;derbyTesting.oldReleasePath&apos; property or fetched from the Apache Derby svn repository (&apos;http://svn.apache.org/repos/asf/db/derby/jars&apos;).&lt;/p&gt;


&lt;p&gt;I have a patch for this which I will submit for review.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12410366">DERBY-3982</key>
            <summary>Add a facility to override the default set of old versions to be tested in the upgrade tests.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olesolberg">Ole Solberg</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Dec 2008 14:06:04 +0000</created>
                <updated>Mon, 4 May 2009 19:22:27 +0100</updated>
                            <resolved>Mon, 22 Dec 2008 10:17:36 +0000</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12655217" author="olesolberg" created="Wed, 10 Dec 2008 14:13:51 +0000"  >&lt;p&gt;Patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3982&quot; title=&quot;Add a facility to override the default set of old versions to be tested in the upgrade tests.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3982&quot;&gt;&lt;del&gt;DERBY-3982&lt;/del&gt;&lt;/a&gt;. For review.&lt;/p&gt;


&lt;p&gt;I also added warning messages for the cases where the version jar files are missing .&lt;br/&gt;
This was previously silently ignore, except when running with the debug flag set.&lt;/p&gt;
</comment>
                            <comment id="12655969" author="olesolberg" created="Fri, 12 Dec 2008 10:51:00 +0000"  >&lt;p&gt;A short writeup on usage:&lt;/p&gt;


&lt;p&gt;a)  -DderbyTesting.oldReleasePath=/usr/local/share/java/derby/lib -DderbyTesting.oldVersionsPath=/usr/local/share/java/derby/lib/versions&lt;br/&gt;
     Use jars at /usr/local/share/java/derby/lib and  test upgrade from the versions listed in /usr/local/share/java/derby/lib/versions&lt;br/&gt;
     &apos;versions&apos; might look like this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Ignore lines not matching the regexp: &quot;^&lt;a href=&quot;file://d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;\\d&lt;/a&gt;&lt;ins&gt;\\.&lt;a href=&quot;file://d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;\\d&lt;/a&gt;&lt;/ins&gt;\\.&lt;a href=&quot;file://d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;\\d&lt;/a&gt;+&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&lt;a href=&quot;file://d&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;\\d&lt;/a&gt;&quot;&lt;br/&gt;
10.0.2.1 // 10.0.2.1 (incubator release)&lt;br/&gt;
10.1.1.0 // 10.1.1.0 (Aug 3.2005 / SVN 208786)&lt;br/&gt;
10.1.2.1 // 10.1.2.1 (Nov 18.2005 / SVN 330608)&lt;br/&gt;
10.1.3.1 // 10.1.3.1 (Jun 30.2006 / SVN 417277)&lt;br/&gt;
10.2.1.6 // 10.2.1.6 (Oct 02.2006 / SVN 452058)&lt;br/&gt;
10.2.2.0 // 10.2.2.0 (Dec 12.2006 / SVN 485682)&lt;br/&gt;
10.2.2.1 // (Special test version / SVN 538595)&lt;br/&gt;
10.3.1.4 // 10.3.1.4 (Aug 1.2007 / SVN 561794)&lt;br/&gt;
10.3.3.0 // 10.3.3.0 (May 12.2008 / SVN 652961)&lt;br/&gt;
10.4.1.3 // 10.4.1.3 (April 24.2008 / SVN 648739)&lt;br/&gt;
10.4.2.0 // 10.4.2.0 (September 05, 2008 / SVN 693552)&lt;br/&gt;
10.4.2.1 // (Special test version / SVN 706043)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;b)  -DderbyTesting.oldReleasePath=/usr/local/share/java/derby/lib &lt;br/&gt;
     Use jars at /usr/local/share/java/derby/lib and  test upgrade from the versions listed as defaults (currently as listed in &apos;VERSIONS&apos;).&lt;/p&gt;

&lt;p&gt;c) -DderbyTesting.oldVersionsPath=/usr/local/share/java/derby/lib/versions&lt;br/&gt;
    Use jars fetched from &apos;http://svn.apache.org/repos/asf/db/derby/jars&apos; and test upgrade from the versions listed in /usr/local/share/java/derby/lib/versions.&lt;br/&gt;
    Will warn that 10.2.2.1 and 10.4.2.1 are not available&lt;/p&gt;

&lt;p&gt;d) None of -DderbyTesting.oldReleasePath and -DderbyTesting.oldReleasePath are given&lt;br/&gt;
    Use jars fetched from &apos;http://svn.apache.org/repos/asf/db/derby/jars&apos; and  test upgrade from the versions listed as defaults (currently as listed in &apos;VERSIONS&apos;).&lt;/p&gt;</comment>
                            <comment id="12656083" author="rhillegas" created="Fri, 12 Dec 2008 17:56:13 +0000"  >&lt;p&gt;Thanks for this patch, Ole. One thing I noticed is that the upgrade _Suite now imports two classes from java.util.regex. I think that will prevent the upgrade tests from running on small device platforms since that package is not part of CDC/FP 1.1.&lt;/p&gt;</comment>
                            <comment id="12656631" author="olesolberg" created="Mon, 15 Dec 2008 13:59:02 +0000"  >&lt;p&gt;Thanks for catching that Rick!&lt;br/&gt;
I am testing a new patch...&lt;/p&gt;</comment>
                            <comment id="12657394" author="olesolberg" created="Wed, 17 Dec 2008 14:12:16 +0000"  >&lt;p&gt;Hi Rick,&lt;/p&gt;

&lt;p&gt;a new patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3982&quot; title=&quot;Add a facility to override the default set of old versions to be tested in the upgrade tests.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3982&quot;&gt;&lt;del&gt;DERBY-3982&lt;/del&gt;&lt;/a&gt;_p2_diff.txt)&lt;/p&gt;</comment>
                            <comment id="12657878" author="rhillegas" created="Thu, 18 Dec 2008 20:09:19 +0000"  >&lt;p&gt;Hi Ole,&lt;/p&gt;

&lt;p&gt;Thanks for the second patch. Looks good to me. I have verified that you can use this new knob to test upgrade from custom patch releases. I have run a full upgrade run from all of the starting points you listed above. I think this is a great improvement. If you think the patch is ready for commit, I will check it in.&lt;/p&gt;

&lt;p&gt;As a follow-on patch, it would be great if you could beef up the comment preceding the declaration of OLD_VERSIONS_PATH_PROPERTY, explaining the format of the file of version names. Something like: one version per line, 4 part version name, concluding comments are ignored, etc.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if you&apos;re planning to describe this new feature in the documentation on how to run Derby tests. But that would be appreciated. Thanks!&lt;/p&gt;</comment>
                            <comment id="12658041" author="olesolberg" created="Fri, 19 Dec 2008 09:08:14 +0000"  >&lt;p&gt;Hi Rick,&lt;/p&gt;

&lt;p&gt;Thanks for reviewing the second patch. I am setting &apos;Patch Available&apos; on this one.&lt;/p&gt;

&lt;p&gt;I will add better comments and more documentation in a follow-on patch as you suggest.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12658087" author="rhillegas" created="Fri, 19 Dec 2008 14:03:58 +0000"  >&lt;p&gt;Thanks, Ole. Committed &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3982&quot; title=&quot;Add a facility to override the default set of old versions to be tested in the upgrade tests.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3982&quot;&gt;&lt;del&gt;DERBY-3982&lt;/del&gt;&lt;/a&gt;_p2_diff.txt at subversion revision 728024.&lt;/p&gt;</comment>
                            <comment id="12658490" author="olesolberg" created="Mon, 22 Dec 2008 10:16:51 +0000"  >&lt;p&gt;Thanks for committing the patch Rick!&lt;br/&gt;
Removing Patch Available  flag.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395734" name="DERBY-3982_diff.txt" size="11573" author="olesolberg" created="Wed, 10 Dec 2008 14:13:51 +0000"/>
                            <attachment id="12396306" name="DERBY-3982_p2_diff.txt" size="17121" author="olesolberg" created="Wed, 17 Dec 2008 14:12:16 +0000"/>
                            <attachment id="12396307" name="DERBY-3982_p2_stat.txt" size="345" author="olesolberg" created="Wed, 17 Dec 2008 14:12:16 +0000"/>
                            <attachment id="12395735" name="DERBY-3982_stat.txt" size="182" author="olesolberg" created="Wed, 10 Dec 2008 14:13:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Dec 2008 17:56:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0xlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>