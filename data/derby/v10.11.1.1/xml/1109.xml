<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:26:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1109/DERBY-1109.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1109] lang/predicatePushdown.sql fails with wsdd5.6</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1109</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;This test fails with the following diff:&lt;/p&gt;

&lt;p&gt;7507a7508,7509&lt;br/&gt;
&amp;gt; 2          |1          &lt;br/&gt;
&amp;gt; 4          |2          &lt;br/&gt;
7509,7510d7510&lt;br/&gt;
&amp;lt; 4          |2          &lt;br/&gt;
&amp;lt; 2          |1          &lt;br/&gt;
7632a7633,7636&lt;br/&gt;
&amp;gt; 2          |1          &lt;br/&gt;
&amp;gt; 2          |1          &lt;br/&gt;
&amp;gt; 4          |2          &lt;br/&gt;
&amp;gt; 4          |2          &lt;br/&gt;
7635,7638d7638&lt;br/&gt;
&amp;lt; 4          |2          &lt;br/&gt;
&amp;lt; 4          |2          &lt;br/&gt;
&amp;lt; 2          |1          &lt;br/&gt;
&amp;lt; 2          |1     &lt;/p&gt;</description>
                <environment>IBM wsdd5.6 j9_13</environment>
        <key id="12330233">DERBY-1109</key>
            <summary>lang/predicatePushdown.sql fails with wsdd5.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="army">A B</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Mar 2006 08:35:14 +0000</created>
                <updated>Wed, 1 Jul 2009 01:09:06 +0100</updated>
                            <resolved>Tue, 2 May 2006 07:52:35 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12370278" author="army" created="Tue, 14 Mar 2006 09:04:50 +0000"  >&lt;p&gt;This issue is the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1110&quot; title=&quot;lang/subquery.sql fails with wsdd5.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1110&quot;&gt;&lt;del&gt;DERBY-1110&lt;/del&gt;&lt;/a&gt;--they both have the same query in them, and that query is failing with the same row-ordering diff.&lt;/p&gt;

&lt;p&gt;This diff is an interesting one: I&apos;ve verified that for IBM wsdd the optimizer chooses the same join order that it chooses for all other JVMs--which is expected since the derby.optimizer.noTimeout flag is set to &quot;true&quot; for both lang/subquery.sql and lang/predicatePushdown.sql, and thus the optimizer should always choose the same plan, regardless of machine/platform.&lt;/p&gt;

&lt;p&gt;That said, I&apos;m not sure what could be causing this specific difference in row ordering for IBM wsdd.  I am able to reproduce the diff on my machine,  but don&apos;t understand where it comes from.  Since the optimizer is choosing the same join order for all platforms, I was assuming the row order should be the same, as well--but that&apos;s apparently not a safe assumption.  I did notice that the queries that are failing have &quot;DISTINCT&quot; in them, so it&apos;s possible that the ordering of rows based on a DISTINCT is JVM-dependent somehow, which would explain this diff.&lt;/p&gt;

&lt;p&gt;Can anyone confirm that one way or the other?&lt;/p&gt;

&lt;p&gt;If this is just an &lt;em&gt;acceptable&lt;/em&gt; difference in JVM behavior, then there are two possible solutions here: either 1) create a wsdd-specific master, or 2) (and probably more preferably) add an &quot;order by&quot; clause to the queries in question to ensure that we get the same row order across JVMs.&lt;/p&gt;

&lt;p&gt;If, however, this difference in row order seems like incorrect behavior, then this would of course merit further investigation.&lt;/p&gt;

&lt;p&gt;Anyone have any input one way or the other?&lt;/p&gt;</comment>
                            <comment id="12370544" author="army" created="Thu, 16 Mar 2006 02:19:46 +0000"  >&lt;p&gt;Based on comments from Satheesh and Mike at this thread:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://article.gmane.org/gmane.comp.apache.db.derby.devel/16656&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.apache.db.derby.devel/16656&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it seems like there is agreement that the resolution for this diff is to simply add an &quot;ORDER BY&quot; clause to the affected queries.  The attached patch does just that.  Note that the diffs might seem larger than expected, but that&apos;s because the order by has added a level of nesting to the query plan, which affects spacing and hence creates a larger diff.&lt;/p&gt;

&lt;p&gt;I ran lang/subquery.sql and lang/predicatePushdown.sql against IBM wsdd5.6, IBM 1.4.2, and Sun 1.5 and both tests passed for all three JVMs.&lt;/p&gt;

&lt;p&gt;There are no code changes in this patch, so if a committer could look it over and commit, that&apos;d be great. &lt;/p&gt;

&lt;p&gt;Thanks again to Mike for the input/explanation of what was going on here.  I appreciate it.&lt;/p&gt;</comment>
                            <comment id="12373175" author="fuzzylogic" created="Wed, 5 Apr 2006 05:08:21 +0100"  >&lt;p&gt;Committed revision 391396.&lt;/p&gt;</comment>
                            <comment id="12373936" author="army" created="Tue, 11 Apr 2006 06:41:43 +0100"  >&lt;p&gt;Verified fix for the tests in question locally and from running derbyall against wsdd5.6.  So I&apos;m closing this issue.&lt;/p&gt;</comment>
                            <comment id="12377297" author="bandaram" created="Tue, 2 May 2006 07:52:02 +0100"  >&lt;p&gt;Changes made to trunk have been ported to 10.1... under 397682, which combines several fixes.&lt;/p&gt;</comment>
                            <comment id="12377298" author="bandaram" created="Tue, 2 May 2006 07:52:23 +0100"  >&lt;p&gt;Reopening to mark fixin.&lt;/p&gt;</comment>
                            <comment id="12377299" author="bandaram" created="Tue, 2 May 2006 07:52:48 +0100"  >&lt;p&gt;Fix ported to 10.1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12324233" name="d1109.patch" size="25943" author="army" created="Thu, 16 Mar 2006 02:19:45 +0000"/>
                            <attachment id="12324234" name="d1109.stat" size="342" author="army" created="Thu, 16 Mar 2006 02:19:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Mar 2006 09:04:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22310</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>