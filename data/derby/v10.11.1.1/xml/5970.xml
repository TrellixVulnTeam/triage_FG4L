<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:37:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5970/DERBY-5970.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5970] Check that connection attributes have legal values.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5970</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;At boot time, Derby does not check whether connection attributes are set to legal values. This can cause them to be silently ignored. In the case of security operations like re(un)encryption, these silent failures deceive the DBO into thinking that the security behavior of the database has changed when, in fact, it hasn&apos;t. We should do the following:&lt;/p&gt;

&lt;p&gt;1) Prevent decryptDatabase from being set to an illegal value. Since this is a new attribute, there are no backward compatibility issues.&lt;/p&gt;

&lt;p&gt;2) Evaluate other attributes on a case-by-case basis to determine which ones should raise exceptions if they are set to illegal values. Technically, this may result in backwardly incompatible behavior. However, I think that for most attributes, we will decide that the incompatibility is minor and is a welcome bugfix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613941">DERBY-5970</key>
            <summary>Check that connection attributes have legal values.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                            <label>derby_triage10_11</label>
                    </labels>
                <created>Mon, 29 Oct 2012 19:46:22 +0000</created>
                <updated>Mon, 18 Aug 2014 15:36:32 +0100</updated>
                                            <version>10.10.1.1</version>
                                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13486859" author="rhillegas" created="Tue, 30 Oct 2012 13:27:31 +0000"  >&lt;p&gt;Attaching derby-5970-01-aa-vetDecryptDatabaseValue.diff. This patch makes Derby raise an exception if the decryptDatabase attribute is set and it is set to some value other than &quot;true&quot;. I am running regression tests now.&lt;/p&gt;


&lt;p&gt;Touches the following files&lt;/p&gt;

&lt;p&gt;------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java&lt;/p&gt;

&lt;p&gt;Vet the value of decryptDatabase early on while processing the connection request.&lt;/p&gt;

&lt;p&gt;------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/functionTests/tests/store/DecryptDatabaseTest.java&lt;/p&gt;

&lt;p&gt;Add a test case.&lt;/p&gt;</comment>
                            <comment id="13486915" author="knutanders" created="Tue, 30 Oct 2012 14:42:35 +0000"  >&lt;p&gt;Looks like a good improvement to me.&lt;/p&gt;

&lt;p&gt;I&apos;m wondering if it would be slightly more robust to use the case-insensitive Boolean.valueOf(String) library method instead of converting to lower case manually, in case there should be some exotic locale where lower-casing &quot;TRUE&quot; doesn&apos;t behave as one would expect (something similar to Turkish, where lower case of &quot;I&quot; is not &quot;i&quot;).&lt;/p&gt;</comment>
                            <comment id="13486937" author="rhillegas" created="Tue, 30 Oct 2012 15:20:58 +0000"  >&lt;p&gt;Thanks for the quick review, Knut. Attaching derby-5970-01-ab-vetDecryptDatabaseValue.diff, which makes the improvement you suggested. Tests passed cleanly for me on the previous rev of the patch. Committed at subversion revision 1403735.&lt;/p&gt;</comment>
                            <comment id="13488910" author="rhillegas" created="Thu, 1 Nov 2012 18:29:55 +0000"  >&lt;p&gt;Attaching derby-5970-02-aa-vetDataEncryptionValue.diff. This patch causes Derby to raise an exception if the dataEncryption attribute is set to a value other than true. I will run regression tests.&lt;/p&gt;



&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;-------------------&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java&lt;/p&gt;

&lt;p&gt;Raise an exception of dataEncryption is set but is not set to true.&lt;/p&gt;

&lt;p&gt;-------------------&lt;/p&gt;

&lt;p&gt;M       java/testing/org/apache/derbyTesting/functionTests/master/URLCheck.out&lt;/p&gt;

&lt;p&gt;Verify that an exception is raised if dataEncryption is set to something other than true.&lt;/p&gt;</comment>
                            <comment id="13488989" author="rhillegas" created="Thu, 1 Nov 2012 20:10:22 +0000"  >&lt;p&gt;Tests passed cleanly for me on derby-5970-02-aa-vetDataEncryptionValue.diff.&lt;/p&gt;</comment>
                            <comment id="13489385" author="rhillegas" created="Fri, 2 Nov 2012 12:24:24 +0000"  >&lt;p&gt;Committed derby-5970-02-aa-vetDataEncryptionValue.diff at subversion revision 1404944.&lt;/p&gt;</comment>
                            <comment id="13492567" author="rhillegas" created="Wed, 7 Nov 2012 18:16:52 +0000"  >&lt;p&gt;We might be able to use the optional ij URLCheck logic to help us raise a SQLWarning when attributes have illegal values but backward compatibility concerns prevent us from raising an exception.&lt;/p&gt;</comment>
                            <comment id="13494287" author="rhillegas" created="Fri, 9 Nov 2012 20:26:42 +0000"  >&lt;p&gt;Attaching AttributeChecks.html. This summarizes Derby&apos;s behavior when processing URL attributes with bad values. This may inform additional work done on this issue.&lt;/p&gt;</comment>
                            <comment id="13494944" author="knutanders" created="Sun, 11 Nov 2012 19:29:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5907&quot; title=&quot;Warnings missing on client driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5907&quot;&gt;DERBY-5907&lt;/a&gt; suggests that we move that logic out of ij. After support for warnings on connect calls is added to the client, that is.&lt;/p&gt;</comment>
                            <comment id="13496367" author="rhillegas" created="Tue, 13 Nov 2012 17:55:58 +0000"  >&lt;p&gt;Attaching rev 2 of AttributeChecks.html. In this second rev I offer recommendations for additional sanity-checking of attributes.&lt;/p&gt;</comment>
                            <comment id="13500320" author="knutanders" created="Mon, 19 Nov 2012 15:37:45 +0000"  >&lt;p&gt;Thanks for writing this up so systematically, Rick. The proposed changes look reasonable to me.&lt;/p&gt;

&lt;p&gt;For the drop attribute, I think it would be OK to throw an exception rather than a warning if it&apos;s set to an invalid value. Applications that break because of that change have a bug and need fixing, so I wouldn&apos;t worry about backward compatibility in that particular case.&lt;/p&gt;

&lt;p&gt;failover: Should we raise an error when the value is not true/false, for consistency with the proposed changes for the other replication attributes?&lt;/p&gt;</comment>
                            <comment id="13500344" author="rhillegas" created="Mon, 19 Nov 2012 16:26:36 +0000"  >&lt;p&gt;Thanks for those good suggestions, Knut. Attaching a third rev of the spec, incorporating your feedback.&lt;/p&gt;</comment>
                            <comment id="13501989" author="knutanders" created="Wed, 21 Nov 2012 14:04:17 +0000"  >&lt;p&gt;territory: The reference manual says one place that it can be used on creation and on upgrade, another place it says only on creation. I tried it and found that the territory attribute had no effect on upgrade (will file a JIRA to fix the docs). If that&apos;s correct, we should probably also raise a warning if territory is set on upgrade.&lt;/p&gt;</comment>
                            <comment id="13503769" author="rhillegas" created="Mon, 26 Nov 2012 13:09:58 +0000"  >&lt;p&gt;Thanks for that additional feedback, Knut. Attaching a fourth rev of the spec, which incorporates that suggestion.&lt;/p&gt;</comment>
                            <comment id="13624000" author="mikem" created="Fri, 5 Apr 2013 20:53:05 +0100"  >&lt;p&gt;this seems more like a improvement than a bug.  not marking it as a regression.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="32594">DERBY-284</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12426965">DERBY-4254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12604062">DERBY-5907</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12558594">DERBY-5792</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12734271">DERBY-6706</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12330688">DERBY-1151</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12615906">DERBY-5993</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12617108">DERBY-6002</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12554845" name="AttributeChecks.html" size="14618" author="rhillegas" created="Mon, 26 Nov 2012 13:09:58 +0000"/>
                            <attachment id="12554184" name="AttributeChecks.html" size="14356" author="rhillegas" created="Mon, 19 Nov 2012 16:26:36 +0000"/>
                            <attachment id="12553337" name="AttributeChecks.html" size="14151" author="rhillegas" created="Tue, 13 Nov 2012 17:55:58 +0000"/>
                            <attachment id="12552886" name="AttributeChecks.html" size="7408" author="rhillegas" created="Fri, 9 Nov 2012 20:26:42 +0000"/>
                            <attachment id="12551343" name="derby-5970-01-aa-vetDecryptDatabaseValue.diff" size="3528" author="rhillegas" created="Tue, 30 Oct 2012 13:27:31 +0000"/>
                            <attachment id="12551370" name="derby-5970-01-ab-vetDecryptDatabaseValue.diff" size="3465" author="rhillegas" created="Tue, 30 Oct 2012 15:20:58 +0000"/>
                            <attachment id="12551740" name="derby-5970-02-aa-vetDataEncryptionValue.diff" size="1725" author="rhillegas" created="Thu, 1 Nov 2012 18:29:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10361"><![CDATA[Security]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Oct 2012 14:42:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy74gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>