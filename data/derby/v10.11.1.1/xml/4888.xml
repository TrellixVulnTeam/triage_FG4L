<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:23:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4888/DERBY-4888.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4888] ClassCastException when calling boolean meta-data functions with 10.7 client against 10.6 server</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4888</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I noticed that DESCRIBE didn&apos;t work when I tried to connect to a 10.6 server with ij/client driver at version 10.7.&lt;/p&gt;

&lt;p&gt;ij&amp;gt; describe t;&lt;br/&gt;
JAVA ERROR: java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Boolean&lt;br/&gt;
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Boolean&lt;br/&gt;
	at org.apache.derby.client.am.DatabaseMetaData.getMetaDataInfoBoolean(DatabaseMetaData.java:2401)&lt;br/&gt;
	at org.apache.derby.client.am.DatabaseMetaData.storesLowerCaseIdentifiers(DatabaseMetaData.java:191)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.caIdentifier(ij.java:3040)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.DescTableStatement(ij.java:1624)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1121)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
	at org.apache.derby.iapi.tools.run.main(run.java:53)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12479250">DERBY-4888</key>
            <summary>ClassCastException when calling boolean meta-data functions with 10.7 client against 10.6 server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Nov 2010 19:17:43 +0000</created>
                <updated>Mon, 29 Nov 2010 14:23:17 +0000</updated>
                            <resolved>Sat, 6 Nov 2010 08:32:12 +0000</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>JDBC</component>
                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12928773" author="knutanders" created="Fri, 5 Nov 2010 19:22:01 +0000"  >&lt;p&gt;The problem appears to be that the client thinks 10.6 sends boolean meta-data values as java.lang.Boolean objects because of a typo in this method in client.am.DatabaseMetaData:&lt;/p&gt;

&lt;p&gt;    final public boolean serverSupportsBooleanValues() &lt;/p&gt;
{
        return supportsUDTs_;
    }

&lt;p&gt;It should return supportsBooleanValues_ (true for server &amp;gt;= 10.7) instead of supportsUDTs_ (true for server &amp;gt;= 10.6). The attached patch makes the ClassCastException go away for me.&lt;/p&gt;</comment>
                            <comment id="12928824" author="knutanders" created="Fri, 5 Nov 2010 21:13:09 +0000"  >&lt;p&gt;Attaching a test case that exposes the bug. When running the compatibility test with 10.6.1.0 server and 10.7 client, I get this error:&lt;/p&gt;

&lt;p&gt;There was 1 error:&lt;br/&gt;
1) testJDBCDriver(org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest)java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Boolean&lt;br/&gt;
	at org.apache.derby.client.am.DatabaseMetaData.getMetaDataInfoBoolean(DatabaseMetaData.java:2401)&lt;br/&gt;
	at org.apache.derby.client.am.DatabaseMetaData.storesLowerCaseIdentifiers(DatabaseMetaData.java:191)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.derby_4888_test(JDBCDriverTest.java:383)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.testJDBCDriver(JDBCDriverTest.java:257)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilitySuite.main(CompatibilitySuite.java:147)&lt;/p&gt;

&lt;p&gt;The test case passes with the suggested fix.&lt;/p&gt;</comment>
                            <comment id="12928854" author="bryanpendleton" created="Fri, 5 Nov 2010 22:44:05 +0000"  >&lt;p&gt;Both the test and the fix look clear and straightforward. Thanks for catching this problem!&lt;/p&gt;

&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="12928942" author="knutanders" created="Sat, 6 Nov 2010 08:32:12 +0000"  >&lt;p&gt;Thanks for taking a look at the patch, Bryan!&lt;/p&gt;

&lt;p&gt;Committed revision 1031973.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12458943" name="boolean.diff" size="602" author="knutanders" created="Fri, 5 Nov 2010 19:22:01 +0000"/>
                            <attachment id="12458955" name="test.diff" size="1196" author="knutanders" created="Fri, 5 Nov 2010 21:13:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Nov 2010 22:44:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ogv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>