<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:45:22 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2345/DERBY-2345.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2345] truncate on a Blob does not work when the Blob is in memory</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2345</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I tried the following repro. After calling the truncate the Blob object still returns the length as 29 (its original length) . &lt;/p&gt;

&lt;p&gt;import java.sql.*;&lt;/p&gt;

&lt;p&gt;public class TruncateBugRepro {&lt;/p&gt;

&lt;p&gt;    Connection con = null;&lt;/p&gt;

&lt;p&gt;    public Connection getEmbeddedConnection() throws Exception {&lt;br/&gt;
        if(con == null) &lt;/p&gt;
{
            Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;);
            con = DriverManager.getConnection
                (&quot;jdbc:derby:DB1;create=true&quot;);
        }
&lt;p&gt;        return con;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    public void testTruncate() throws Exception &lt;/p&gt;
{
        //String used to getBytes from and insert into Blob.
        String str = new String(&quot;I am a Blob!!! I am a Blob!!!&quot;);
        Connection con = getEmbeddedConnection();
        //create the blob
        Blob blob = con.createBlob();
        //insert bytes
        blob.setBytes(1,str.getBytes());
        //Retuns the Blob length as 29
        System.out.println(&quot;&quot; + blob.length());
        blob.truncate(14);
        //returns the Blob length as 29
        System.out.println(&quot;&quot; + blob.length());
    }

&lt;p&gt;    public static void main(String[] args) throws Exception &lt;/p&gt;
{
        TruncateBugRepro t = new TruncateBugRepro();
        t.testTruncate();
    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12363005">DERBY-2345</key>
            <summary>truncate on a Blob does not work when the Blob is in memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anurag">Anurag Shekhar</assignee>
                                    <reporter username="narayanan">V.Narayanan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Feb 2007 12:39:23 +0000</created>
                <updated>Wed, 10 Sep 2008 06:56:51 +0100</updated>
                            <resolved>Mon, 19 Feb 2007 23:20:00 +0000</resolved>
                                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12473690" author="narayanan" created="Fri, 16 Feb 2007 12:43:21 +0000"  >&lt;p&gt;Truncate functionality is provided as part of 2247&lt;/p&gt;</comment>
                            <comment id="12473934" author="anurag" created="Sat, 17 Feb 2007 14:29:02 +0000"  >&lt;p&gt;I had missed reassigning the truncated byte array over original byte array hence this bug. The bug went undetected  because the tests i added as part of 2247 wasn&apos;t testing truncate for small blob (less than 4k).&lt;/p&gt;

&lt;p&gt;In this patch I have fixed this bug and added a test for small blob.&lt;/p&gt;</comment>
                            <comment id="12474126" author="narayanan" created="Mon, 19 Feb 2007 10:39:11 +0000"  >&lt;p&gt;The repro gives the correct result after the patch is applied. Thank you for the patch. &lt;/p&gt;</comment>
                            <comment id="12474130" author="kristwaa" created="Mon, 19 Feb 2007 11:09:52 +0000"  >&lt;p&gt;I&apos;m running tests and will commit this patch shortly.&lt;/p&gt;</comment>
                            <comment id="12474307" author="kristwaa" created="Mon, 19 Feb 2007 23:20:00 +0000"  >&lt;p&gt;Committed with revision 509375.&lt;/p&gt;</comment>
                            <comment id="12629715" author="narayanan" created="Wed, 10 Sep 2008 06:56:51 +0100"  >&lt;p&gt;The final patch has been committed for this issue. Thanks to Anurag and kristian for the good work!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12360658">DERBY-2247</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12351428" name="derby-2345.diff" size="1631" author="anurag" created="Sat, 17 Feb 2007 14:28:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 17 Feb 2007 14:29:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0yhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>