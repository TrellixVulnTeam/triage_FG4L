<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2695/DERBY-2695.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2695] Add locator support of soft upgrade to 10.3</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2695</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If a database is soft upgraded to 10.3, the stored procedures used by the locator implementation will not be present.  Hence, the server will in this scenario need to ignore requests for locators and send LOB values instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12370268">DERBY-2695</key>
            <summary>Add locator support of soft upgrade to 10.3</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="31583">DERBY-208</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oysteing">&#216;ystein Gr&#248;vlen</assignee>
                                    <reporter username="oysteing">&#216;ystein Gr&#248;vlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 May 2007 14:28:27 +0100</created>
                <updated>Fri, 21 Jan 2011 17:50:14 +0000</updated>
                            <resolved>Sun, 17 Jun 2007 00:20:06 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12500101" author="oysteing" created="Wed, 30 May 2007 12:28:29 +0100"  >&lt;p&gt;Attached patch handles soft upgrade by not using locators if the stored procedures for locators does not exists.  The following files are changed:&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/impl/drda/Database.java&lt;br/&gt;
    Added method to check whether the necessary stored procedure&lt;br/&gt;
    exists in the database.&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/impl/drda/DRDAConnThread.java&lt;br/&gt;
    Ignore requests for locators if locators are not supported.&lt;/p&gt;

&lt;p&gt;I am struggling a bit with getting the upgrade tests to test client/server Lobs so I will have to get back to that in a later patch.&lt;/p&gt;</comment>
                            <comment id="12500227" author="rhillegas" created="Wed, 30 May 2007 21:33:50 +0100"  >&lt;p&gt;The patch looks good to me. It might be useful at some point to abstract the DRDA type checking from DRDAConnThread into a isLobLocator() method for use by other code. This might be usable by the DRDA type checking code in, say, NetStatementRequest.calculateOUTOVRLidAndLengthOverrides() and I can imagine that other code might need this check in the future.&lt;/p&gt;

&lt;p&gt;The tests ran cleanly for me except for the following error in org.apache.derbyTesting.functionTests.tests.lang.CollationTest2. This error also occurs in a clean client which doesn&apos;t have this patch. Committed at subversion revision 542925.&lt;/p&gt;

&lt;p&gt;testNorwayCollation(org.apache.derbyTesting.functionTests.tests.lang.CollationTest2)junit.framework.AssertionFailedError: Column value mismatch @ column &apos;X&apos;, row 16:&lt;br/&gt;
    Expected: &amp;gt;W?gan&amp;lt;&lt;br/&gt;
    Found:    &amp;gt;Waagan&amp;lt;&lt;br/&gt;
	at org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:871)&lt;br/&gt;
	at org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:764)&lt;br/&gt;
	at org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:702)&lt;br/&gt;
	at org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:660)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.CollationTest2.runDerby2670(CollationTest2.java:1766)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.CollationTest2.testNorwayCollation(CollationTest2.java:1929)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;/p&gt;</comment>
                            <comment id="12500359" author="oysteing" created="Thu, 31 May 2007 13:12:12 +0100"  >&lt;p&gt;Thanks for the commit, Rick.&lt;br/&gt;
Good idea to abstract the DRDA type checking.  I will put that on my todo list.&lt;/p&gt;</comment>
                            <comment id="12502654" author="myrna" created="Fri, 8 Jun 2007 06:12:44 +0100"  >&lt;p&gt;Is that task necessary/possible for 10.3? Or can we make that task a separate issue for a future release and close this?&lt;/p&gt;</comment>
                            <comment id="12502734" author="oysteing" created="Fri, 8 Jun 2007 10:25:27 +0100"  >&lt;p&gt;The DRDA type checking does not need to be in for 10.3.&lt;br/&gt;
However, I plan to do some more testing of soft upgrade before I close this.&lt;/p&gt;</comment>
                            <comment id="12504032" author="kmarsden" created="Tue, 12 Jun 2007 23:52:35 +0100"  >&lt;p&gt;Looks like this patch has already been committed&lt;/p&gt;</comment>
                            <comment id="12505557" author="myrna" created="Sun, 17 Jun 2007 00:20:06 +0100"  >&lt;p&gt;I&apos;m closing this issue now, because the functionality has gone in, and it&apos;s not going to make it into the list of fixed bugs...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12358519" name="softupgrade.diff" size="2667" author="oysteing" created="Wed, 30 May 2007 12:28:29 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 May 2007 20:33:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0mcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>