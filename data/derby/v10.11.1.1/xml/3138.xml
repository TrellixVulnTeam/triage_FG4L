<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:40:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3138/DERBY-3138.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3138] Optimizer error when vtis are invoked with correlated references to outer query blocks</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3138</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The following query works fine in 10.3, but raises an optimizer error in the mainline:&lt;/p&gt;

&lt;p&gt;select s.schemaname, t.tableName&lt;br/&gt;
from sys.sysschemas s, sys.systables t&lt;br/&gt;
where t.schemaid=s.schemaid&lt;br/&gt;
and exists&lt;br/&gt;
(&lt;br/&gt;
  select vti.*&lt;br/&gt;
  from table( syscs_diag.space_table( s.schemaname, t.tableName ) ) as vti&lt;br/&gt;
  where vti.numfreepages &amp;gt; -1&lt;br/&gt;
)&lt;br/&gt;
;&lt;/p&gt;

&lt;p&gt;In the mainline, it raises the following error:&lt;/p&gt;

&lt;p&gt;ERROR 42Y69: No valid execution plan was found for this statement. This may have one of two causes: either you specified a hash join strategy when hash join is not allowed (no optimizable equijoin) or you are attempting to join two external virtual tables, each of which references the other, and so the statement cannot be evaluated.  &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12380799">DERBY-3138</key>
            <summary>Optimizer error when vtis are invoked with correlated references to outer query blocks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 19:25:44 +0100</created>
                <updated>Tue, 30 Jun 2009 16:55:54 +0100</updated>
                            <resolved>Mon, 22 Oct 2007 21:17:20 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12536755" author="rhillegas" created="Mon, 22 Oct 2007 18:37:14 +0100"  >&lt;p&gt;Attaching a fix for this bug, derby-31380-fix-aa.diff. Touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java&lt;/p&gt;

&lt;p&gt;This is the fix. The wrong overload of accept() was being called during preprocessing. When submission 555032 moved getCorrelationTables() out of NewInvocationNode into its superclass, MethodCallNode, the call to accept() should have been adjusted from super.accept() to just accept().&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/SysDiagVTIMappingTest.java&lt;/p&gt;

&lt;p&gt;Regression test case for this bug.&lt;/p&gt;</comment>
                            <comment id="12536820" author="rhillegas" created="Mon, 22 Oct 2007 21:16:13 +0100"  >&lt;p&gt;Committed derby-3138-fix-aa.diff at subversion revision 587230.&lt;/p&gt;</comment>
                            <comment id="12559464" author="dyret" created="Wed, 16 Jan 2008 12:11:50 +0000"  >&lt;p&gt;Committed &amp;amp; resolved in October&lt;/p&gt;</comment>
                            <comment id="12582572" author="dyret" created="Thu, 27 Mar 2008 09:36:47 +0000"  >&lt;p&gt;This issue has no fix version, but has been checked in to trunk after the 10.3 branch was cut, and has not been merged to the 10.3 branch (before the last release). &lt;br/&gt;
(Some have been checked into trunk after 10.4 was cut and then merged to 10.4).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12325788">DERBY-716</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12368160" name="derby-3138-fix-aa.diff" size="2205" author="rhillegas" created="Mon, 22 Oct 2007 18:37:13 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Jan 2008 12:11:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23457</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0uqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>