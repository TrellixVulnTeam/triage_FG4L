<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:46:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2903/DERBY-2903.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2903] RunClassPathTester regression test gets diff because of error message difference</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2903</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Got the following diff because of access vs. Access in error message.  probably a master update needed.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file derbyall/demo/demo/RunClassPathTester.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: RunClassPathTester jdk1.4.2 demo:demo 2007-06-20 14:32:54 ***&lt;br/&gt;
3 del&lt;br/&gt;
&amp;lt;    Unable to access Protection Domain or Code Source for class interface org.apache.derby.database.Database: &lt;br/&gt;
access denied (java.lang.RuntimePermission getProtectionDomain)&lt;br/&gt;
3a3&lt;br/&gt;
&amp;gt;    Unable to access Protection Domain or Code Source for class interface org.apache.derby.database.Database: &lt;br/&gt;
Access denied (java.lang.RuntimePermission getProtectionDomain)&lt;br/&gt;
5 del&lt;br/&gt;
&amp;lt;    Unable to access Protection Domain or Code Source for class class SimpleApp: &lt;br/&gt;
access denied (java.lang.RuntimePermission getProtectionDomain)&lt;br/&gt;
5a5&lt;br/&gt;
&amp;gt;    Unable to access Protection Domain or Code Source for class class SimpleApp: &lt;br/&gt;
Access denied (java.lang.RuntimePermission getProtectionDomain)&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   RunClassPathTester jdk1.4.2 demo:demo 2007-06-20 14:32:56 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>Generating report for RunSuite derbyall  null null null true &lt;br/&gt;
------------------ Java Information ------------------&lt;br/&gt;
Java Version:    1.4.2&lt;br/&gt;
Java Vendor:     IBM Corporation&lt;br/&gt;
Java home:       c:\10.3_Testing\ibm142\jre&lt;br/&gt;
Java classpath:  c:\10.3_Testing\jars\lib\derby.jar;c:\10.3_Testing\jars\lib\derbytools.jar;&lt;br/&gt;
c:\10.3_Testing\jars\lib\derbynet.jar;c:\10.3_Testing\jars\lib\derbyclient.jar;c:\10.3_Testing\jars\lib\derbyrun.jar;&lt;br/&gt;
c:\10.3_Testing\jars\test\derbyTesting.jar;c:\10.3_Testing\jars\tools\junit.jar;c:\10.3_Testing\jars\tools\jakarta-oro-2.0.8.jar&lt;br/&gt;
OS name:         Windows Server 2003&lt;br/&gt;
OS architecture: amd64&lt;br/&gt;
OS version:      5.2 build 3790 Service Pack 1&lt;br/&gt;
Java user name:  cloudtest&lt;br/&gt;
Java user home:  C:\Documents and Settings\cloudtest&lt;br/&gt;
Java user dir:   C:\10.3_Testing\platformtesting\ibm142_derbyall&lt;br/&gt;
java.specification.name: Java Platform API Specification&lt;br/&gt;
java.specification.version: 1.4&lt;br/&gt;
--------- Derby Information --------&lt;br/&gt;
JRE - JDBC: J2SE 1.4.2 - JDBC 3.0&lt;br/&gt;
[C:\10.3_Testing\jars\lib\derby.jar] 10.3.1.0 beta - (548006)&lt;br/&gt;
[C:\10.3_Testing\jars\lib\derbytools.jar] 10.3.1.0 beta - (548006)&lt;br/&gt;
[C:\10.3_Testing\jars\lib\derbynet.jar] 10.3.1.0 beta - (548006)&lt;br/&gt;
[C:\10.3_Testing\jars\lib\derbyclient.jar] 10.3.1.0 beta - (548006)&lt;br/&gt;
------------------------------------------------------</environment>
        <key id="12373105">DERBY-2903</key>
            <summary>RunClassPathTester regression test gets diff because of error message difference</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="mikem">Mike Matrigali</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jul 2007 21:56:40 +0100</created>
                <updated>Fri, 21 Jan 2011 17:50:32 +0000</updated>
                            <resolved>Fri, 9 Nov 2007 21:05:40 +0000</resolved>
                                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12511674" author="myrna" created="Wed, 11 Jul 2007 07:35:54 +0100"  >&lt;p&gt;This is a jvm issue - some versions of IBM JVM have that &apos;Access&apos; instead of &apos;access&apos;.&lt;br/&gt;
I&apos;ll see if I can mask it, or convert the test to junit.&lt;/p&gt;</comment>
                            <comment id="12536089" author="myrna" created="Fri, 19 Oct 2007 02:27:49 +0100"  >&lt;p&gt;Attaching 2 patches that represent approaches to convert this test to junit&lt;br/&gt;
1 (modapi.diff) modifies the API slightly so you can run the ClasspathTesting as an API, so the test can look similar to the (currently not running) sysinfoAPITest.&lt;br/&gt;
2. (nonapimod.diff) only adds a test, does not modify the api. This took me some time because for some reason I could not get reassignments of sysinfo.main output to System.out to work iteratively. This patch has better comments also.&lt;/p&gt;

&lt;p&gt;Test not yet added to any suite in the patch.&lt;/p&gt;

&lt;p&gt;If I don&apos;t hear any nays I will commit patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2903&quot; title=&quot;RunClassPathTester regression test gets diff because of error message difference&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2903&quot;&gt;&lt;del&gt;DERBY-2903&lt;/del&gt;&lt;/a&gt;_noapimod.diff and add it to the tools suite.&lt;/p&gt;</comment>
                            <comment id="12536324" author="myrna" created="Fri, 19 Oct 2007 20:40:06 +0100"  >&lt;p&gt;Unfortunately, when running the test as per the nomodapi patch in ...functionTests.tests.tools._Suite, the output goes to System.out after all. &lt;br/&gt;
Back to the drawing board; switching off patch available.&lt;/p&gt;

&lt;p&gt;Note, I also added some carriage returns in the description and env - just cosmetically, so this bug hopefully needs less horizontal space..&lt;/p&gt;
</comment>
                            <comment id="12537120" author="myrna" created="Tue, 23 Oct 2007 21:07:31 +0100"  >&lt;p&gt;Attaching another attempt at this patch - I redid the assignments of System.out, basically copying the approach of org.apache.derbyTesting.functionTests.util.HarnessJavaTest, but it gives the same troubles.&lt;/p&gt;

&lt;p&gt;I think the trouble is not with either of the nomodapi approaches, but with the top two tests in the tools._Suite, or, more specifically, with the two tests that run BaseJDBCTestCase.runSQLCommands. Unless my searches have been off, there are only two tests in the suites.All that use this method...&lt;br/&gt;
If I the new SysinfoCPCheckTest which redirects System.out is run after either IJRunScriptTest or ImportExportTest, the output never is redirected. I&apos;ve tried closing various streams in the test framework code, all to no avail. I think there is possibly something about ij is run that affects this.&lt;/p&gt;

&lt;p&gt;So, I&apos;ll place the new test above those two offending tests. &lt;/p&gt;

&lt;p&gt;If this approach is not acceptable, please speak up; otherwise, I&apos;ll commit. &lt;/p&gt;</comment>
                            <comment id="12537935" author="knutanders" created="Fri, 26 Oct 2007 13:07:18 +0100"  >&lt;p&gt;Two small nits:&lt;/p&gt;

&lt;p&gt;  1) outputEncoding is both an (unused) instance variable and a local variable in testClassPathChecker. I think one of them should be removed (if the instance variable is kept, it would probably be better to make it static final)&lt;/p&gt;

&lt;p&gt;  2) rawBytes is only needed in the test method, so I think it could be a local variable instead of an instance variable. Then we could also get rid of the tearDown() method&lt;/p&gt;

&lt;p&gt;I don&apos;t understand the System.out problems, so I can&apos;t help you there. You may also consider putting the final setSystemOut() into a finally clause (or perhaps tearDown()) so that we don&apos;t end up redirecting System.out for all subsequent tests if sysinfo.main() fails.&lt;/p&gt;</comment>
                            <comment id="12541443" author="myrna" created="Fri, 9 Nov 2007 21:05:40 +0000"  >&lt;p&gt;With revision 593635 I reinstated the test.&lt;br/&gt;
I found that if I changed the call in sysinfo.Main to LocalizedResource from&lt;br/&gt;
LocalizedResource.getInstance() to LocalizedResource.getInstance().init() the problems I saw with reassigning system.out went away.&lt;/p&gt;

&lt;p&gt;I think, that anytime sysinfo was run after a previous call to LocalizedResource.getInstance().init(), for instance through a call to ij.runScript, it didn&apos;t actually go to System.out anymore but to wherever the LocalizedResource was pointing.&lt;br/&gt;
I think forcing init() makes more sense for sysinfo, than tagging on to whatever LocalizedResource happens to be pointing.&lt;/p&gt;

&lt;p&gt;After the change to sysinfo.Main, the output now can be controlled using calls to System.setOut(), and I modified the test to no longer use the awkward mechanism of separating and unraveling the output for each test case (command) using System.out.println of a character. Also, now it no longer matters where the test runs, so I removed the comments in tools._Suite.java.&lt;/p&gt;

&lt;p&gt;With revision 593643 I addressed the 2 nits from Knut Anders&apos; review (thx). I did not put the last reset of System.setOut in a finalize...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12381217">DERBY-3152</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12367985" name="DERBY-2903_modapi.diff" size="7892" author="myrna" created="Fri, 19 Oct 2007 02:27:49 +0100"/>
                            <attachment id="12367986" name="DERBY-2903_noapimod.diff" size="10144" author="myrna" created="Fri, 19 Oct 2007 02:27:49 +0100"/>
                            <attachment id="12368238" name="DERBY-2903_noapimod.diff2" size="10931" author="myrna" created="Tue, 23 Oct 2007 21:07:31 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Jul 2007 06:35:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0m73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>