<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:32:03 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3063/DERBY-3063.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3063] Extend the system function mechanism to support functions with multiple arguments</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3063</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Extend the existing functionality for adding Java functions to SQL to support functions with multiple arguments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12377878">DERBY-3063</key>
            <summary>Extend the system function mechanism to support functions with multiple arguments</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Sep 2007 10:53:33 +0100</created>
                <updated>Mon, 4 May 2009 19:22:09 +0100</updated>
                            <resolved>Thu, 11 Sep 2008 09:04:01 +0100</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                            <comments>
                            <comment id="12526118" author="kristwaa" created="Mon, 10 Sep 2007 11:01:41 +0100"  >&lt;p&gt;I have two initial questions regarding this issue:&lt;br/&gt;
 a) Is it worth the extra code to support functions with more than one argument?&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Support for one or two can be implemented using static final variables.&lt;/li&gt;
	&lt;li&gt;Support for an arbitrary number of arguments must be done by creating the needed structures in a loop.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; b) Is it possible to get Derby to &quot;automatically&quot; allow for valid conversions?&lt;br/&gt;
     For instance, JDBC defines POWER(number, power) where &apos;power&apos; is an integer. StrictMath has pow(double,double). How do I get Derby to convert the integer &apos;power&apos; to a &apos;double&apos; when passing the value to the Java function? (I&apos;m in the context of system functions defined in a table - see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-475&quot; title=&quot;Add a system function mechanism and table of  functions, including a set of initial functions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-475&quot;&gt;&lt;del&gt;DERBY-475&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Question a) arises because right now I don&apos;t see many functions that actually requires more than one argument (ATAN2 is one of them). Can these few functions easily be added and implemented in a different way?&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a sample patch adding support for functions with arbitrary number of arguments. Optimizations can easily be done for the common case of one or two arguments.&lt;/p&gt;</comment>
                            <comment id="12526119" author="kristwaa" created="Mon, 10 Sep 2007 11:05:22 +0100"  >&lt;p&gt;&apos;derby-3063-1a-preview.diff&apos; is one way of adding supports for system functions with an arbitrary number of arguments from a table describing the function.&lt;/p&gt;

&lt;p&gt;I&apos;d appreciate comments, also see my previous comment for this issue.&lt;/p&gt;</comment>
                            <comment id="12628631" author="knutanders" created="Fri, 5 Sep 2008 14:49:27 +0100"  >&lt;p&gt;Hi Kristian,&lt;/p&gt;

&lt;p&gt;Sorry for the very late reply. The approach in the patch looks reasonable to me, and I don&apos;t think it makes the code more complex or harder to read. With your changes, the code could potentially be made even simpler, since there is no longer any reason to have a special case for the functions without parameters. So in DataDictionaryImpl.getRoutineList() the &quot;if (paramCount&amp;gt;0)&#160;&lt;/p&gt;
{...} else {...}
&lt;p&gt;&quot; part could be changed to always execute the first branch regardless of the value of paramCount.&lt;/p&gt;

&lt;p&gt;I don&apos;t know the answer to question (b), but even if it isn&apos;t possible, it should be fairly easy to write a static method with a matching parameter list in SystemProcedures, much the same way as it is currently done for some of the other functions (PI, LOG10, SIGN, RAND, COT, COSH, SINH and TANH).&lt;/p&gt;</comment>
                            <comment id="12629482" author="kristwaa" created="Tue, 9 Sep 2008 14:06:09 +0100"  >&lt;p&gt;Thanks for the comments, Knut Anders.&lt;/p&gt;

&lt;p&gt;I have added a first revision of the patch. It only adds one new function - ATAN2.&lt;/p&gt;

&lt;p&gt;suites.All and derbyall ran without failures.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12629483" author="kristwaa" created="Tue, 9 Sep 2008 14:06:37 +0100"  >&lt;p&gt;Set patch available flag for patch 2a.&lt;/p&gt;</comment>
                            <comment id="12629748" author="knutanders" created="Wed, 10 Sep 2008 11:11:23 +0100"  >&lt;p&gt;The patch looks good to me. I don&apos;t have the Open Group CLI specification (which defines the semantics for the scalar escape functions, according to the JDBC spec) to check, so I&apos;ll just assume that StrictMath.atan2() has the expected semantics. No tests were added in the patch, but I verified that DatabaseMetaDataTest failed when I removed the row for ATAN2 in the SYSFUN_FUNCTIONS array (there&apos;s some kind of automatic testing that calls getNumericFunctions() and checks that the actual behaviour and the meta-data match).&lt;/p&gt;

&lt;p&gt;+1 to commit.&lt;/p&gt;</comment>
                            <comment id="12630122" author="kristwaa" created="Thu, 11 Sep 2008 09:04:01 +0100"  >&lt;p&gt;Thanks for the review, Knut Anders.&lt;/p&gt;

&lt;p&gt;Committed patch 2a to trunk with revision 694166.&lt;br/&gt;
I&apos;m creating a subtask for adding documentation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12312711">DERBY-475</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12365464" name="derby-3063-1a-preview.diff" size="6546" author="kristwaa" created="Mon, 10 Sep 2007 11:05:22 +0100"/>
                            <attachment id="12365463" name="derby-3063-1a-preview.stat" size="217" author="kristwaa" created="Mon, 10 Sep 2007 11:05:22 +0100"/>
                            <attachment id="12389747" name="derby-3063-2a.diff" size="6765" author="kristwaa" created="Tue, 9 Sep 2008 14:06:09 +0100"/>
                    </attachments>
                <subtasks>
                            <subtask id="12404147">DERBY-3874</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 5 Sep 2008 13:49:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0xxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39314</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>