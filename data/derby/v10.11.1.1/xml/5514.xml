<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:15:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5514/DERBY-5514.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5514] SecureServerTest (and others) don&apos;t play nice with EMMA: AccessControlException</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5514</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When running SecureServerTest with jars instrumented with EMMA using the ant emma-all target, I see:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; (net)derbynet.SecureServerTest.testServerStartup used 8475 ms junit.framework.TestListener: endTest(testServerStartup)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; START-SPAWNED:SpawnedNetworkServer ERROR OUTPUT:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.security.policy: error adding Entry:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	java.net.MalformedURLException: no protocol: /export/home/dag/java/sb/sb1/tools/java/emma.jar&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.security.AccessControlException: access denied (java.io.FilePermission coverage.ec read)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessController.checkPermission(AccessController.java:546)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.SecurityManager.checkRead(SecurityManager.java:871)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.io.File.exists(File.java:731)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory.persist(DataFactory.java:525)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory.persist(DataFactory.java:86)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.rt.RTCoverageDataPersister.dumpCoverageData(RTCoverageDataPersister.java:54)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.rt.RTExitHook.run(RTExitHook.java:32)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception in thread &quot;EMMA shutdown handler thread&quot; java.lang.RuntimeException: EMMA failed to dump coverage data: java.security.AccessControlException: access denied (java.io.FilePermission coverage.ec read)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.rt.RTCoverageDataPersister.dumpCoverageData(RTCoverageDataPersister.java:71)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.rt.RTExitHook.run(RTExitHook.java:32)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; END-SPAWNED  :SpawnedNetworkServer ERROR OUTPUT:&lt;/p&gt;

&lt;p&gt;This is presumably because the test spawns a server which runs with the default server policy.&lt;/p&gt;

&lt;p&gt;Another thing is that is seems dangerous to let the spawned process write to EMMA&apos;s &quot;coverage.ec&quot;, since we don&apos;t know when the parent process will write to it. This behavior could be what&apos;s been causing our corrutions in the EMMA runs earlier. The missing permissions just highlight what&apos;s happening.&lt;/p&gt;

&lt;p&gt;In this case the spawned process was started with this command line (I instrumented the code):&lt;/p&gt;

&lt;p&gt;XXX server startup command = /usr/jdk/instances/jdk1.6.0/jre/bin/java -classpath /&amp;lt;my sandbox&amp;gt;/tools/java/emma.jar:/&amp;lt;my sandbox&amp;gt;/jars/sane/derbyTesting.jar:/&amp;lt;my sandbox&amp;gt;/jars/emma/lib/derbyclient.jar:/&amp;lt;my sandbox&amp;gt;/jars/emma/lib/derbynet.jar:/&amp;lt;my sandbox&amp;gt;/jars/emma/lib/derby.jar:/&amp;lt;my sandbox&amp;gt;/jars/emma/lib/derbytools.jar:/&amp;lt;my sandbox&amp;gt;/jars/emma/lib/derbyrun.jar:/&amp;lt;my sandbox&amp;gt;/tools/java/junit.jar:/usr/share/lib/ant/ant-launcher.jar:/usr/share/lib/ant/ant.jar:/usr/share/lib/ant/ant-junit.jar org.apache.derby.drda.NetworkServerControl start -h localhost -p 1527 &lt;/p&gt;

&lt;p&gt;Possible approaches:&lt;br/&gt;
         run the spawned VMs with plain jars (downside: we won&apos;t get coverage for those)&lt;br/&gt;
         run the spawned with a special default policy file when we run with EMMA ++&lt;br/&gt;
         run the spawned VM with -noSecurityManager if with EMMA jars&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532553">DERBY-5514</key>
            <summary>SecureServerTest (and others) don&apos;t play nice with EMMA: AccessControlException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2011 00:39:57 +0000</created>
                <updated>Mon, 8 Jul 2013 13:37:28 +0100</updated>
                            <resolved>Mon, 28 Nov 2011 17:22:15 +0000</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13156456" author="dagw" created="Thu, 24 Nov 2011 01:44:38 +0000"  >&lt;p&gt;Uploading a patch which implements the third approach. This made the test complete with EMMA instrumented jars. &lt;/p&gt;</comment>
                            <comment id="13156497" author="dagw" created="Thu, 24 Nov 2011 03:45:52 +0000"  >&lt;p&gt;Related: RuntimeInfoTest  fails due to asserting on the output from the spawned process: output contains EMMA info.&lt;/p&gt;</comment>
                            <comment id="13156611" author="knutanders" created="Thu, 24 Nov 2011 09:49:00 +0000"  >&lt;p&gt;Running the network server with a special default policy file when we run with EMMA is probably the right thing to do, but running with -noSecurityManager also sounds perfectly acceptable.&lt;/p&gt;

&lt;p&gt;The patch didn&apos;t compile in my environment:&lt;/p&gt;

&lt;p&gt;junitcomponents:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 1 source file to /code/derby/trunk/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /code/derby/trunk/java/testing/org/apache/derbyTesting/junit/NetworkServerTestSetup.java:264: cannot find symbol&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : method contains(java.lang.String)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class java.lang.String&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                 classpath.contains(&quot;emma.jar&quot;))&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                          ^&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 1 error&lt;/p&gt;

&lt;p&gt;Changing contains() to indexOf() made it work, and I could run SecureServerTest without seeing the stack traces getting printed.&lt;/p&gt;

&lt;p&gt;If I added the following line to NetworkServerTestSetup.startSeparateProcess()&lt;br/&gt;
    al.add(&quot;-Demma.verbosity.level=silent&quot;);&lt;br/&gt;
I didn&apos;t have to change the assert in SecureServerTest.&lt;/p&gt;

&lt;p&gt;SecureServerTest.runServerCommand() and Driver40UnbootedTest.test_notBooted() also set this property to prevent that EMMA interferes with the canons.&lt;/p&gt;

&lt;p&gt;As to the problem with spawned processes possibly corrupting coverage.ec, perhaps we could run the spawned processes with the emma.coverage.out.file system property set, and use a counter to prevent name clashes? If so, I&apos;d prefer that we do that in BaseTestCase.execJavaCmd() so that it works for most of the tests. NetworkServerTestSetup doesn&apos;t use BaseTestCase.execJavaCmd() yet, but making it do so should be trivial. Maybe it would also make sense to push the setting of emma.verbosity.level down to that method too, so that we don&apos;t have to do that in every test that happens to spawn a process.&lt;/p&gt;</comment>
                            <comment id="13156618" author="knutanders" created="Thu, 24 Nov 2011 09:56:28 +0000"  >&lt;p&gt;&amp;gt; If I added the following line to NetworkServerTestSetup.startSeparateProcess()&lt;br/&gt;
&amp;gt;     al.add(&quot;-Demma.verbosity.level=silent&quot;);&lt;br/&gt;
&amp;gt; I didn&apos;t have to change the assert in SecureServerTest.&lt;/p&gt;

&lt;p&gt;I spoke too soon. This removed the unexpected line &quot;EMMA: collecting runtime coverage data ...&quot; from the output, but it still didn&apos;t show the security manager information expected by the test (because the security manager is not used), so the assert still fails.&lt;/p&gt;</comment>
                            <comment id="13156875" author="dagw" created="Thu, 24 Nov 2011 19:08:25 +0000"  >&lt;p&gt;I found that the default test policy has the following entry for EMMA (granted to derby.jar)&lt;/p&gt;

&lt;p&gt;  // These permissions are needed when testing code instrumented with EMMA.&lt;br/&gt;
  // They will only be used if the emma.active system property property is set,&lt;br/&gt;
  // which should be set to &quot;&quot; for the permissions to be correct.&lt;br/&gt;
  permission java.util.PropertyPermission &quot;$&lt;/p&gt;
{emma.active}user.dir&quot;, &quot;read&quot;;&lt;br/&gt;
  permission java.io.FilePermission &quot;${emma.active}
&lt;p&gt;$&lt;/p&gt;
{user.dir}
&lt;p&gt;$&lt;/p&gt;
{/}
&lt;p&gt;coverage.ec&quot;, &quot;read, write&quot;;&lt;br/&gt;
  permission java.lang.RuntimePermission &quot;$&lt;/p&gt;
{emma.active}
&lt;p&gt;writeFileDescriptor&quot;;&lt;/p&gt;

&lt;p&gt;I tried approach two above, to craft a special policy file for the server and grant these privileges to &lt;b&gt;emma.jar&lt;/b&gt; (for SecureServerTest).  This worked in part, except for a case where there was a lacking permission for writeFileDescriptor (same stack trace as below).&lt;/p&gt;

&lt;p&gt;Now, in the tools suite I found a similar issue after running SysinfoLocaleTest:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.security.AccessControlException: access denied (java.lang.RuntimePermission writeFileDescriptor)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.security.AccessController.checkPermission(AccessController.java:546)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.SecurityManager.checkWrite(SecurityManager.java:937)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:219)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory$UCFileOutputStream.&amp;lt;init&amp;gt;(DataFactory.java:292)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory$RandomAccessFileOutputStream.&amp;lt;init&amp;gt;(DataFactory.java:375)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory.writeEntry(DataFactory.java:715)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory.persist(DataFactory.java:672)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.data.DataFactory.persist(DataFactory.java:86)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.rt.RTCoverageDataPersister.dumpCoverageData(RTCoverageDataPersister.java:54)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at com.vladium.emma.rt.RTExitHook.run(RTExitHook.java:32)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;

&lt;p&gt;except this time there is no spawned VM, so the code is running under the default test policy, which does have the EMMA permissions shown above. Note that this thread doesn&apos;t have any code from derby.jar on the stack, so the fact the derby.jar has the required privileges doesn&apos;t help: we still get AccessControlException.&lt;/p&gt;

&lt;p&gt;I downloaded the EMMA sources and wrapped the call to RTCoverageDataPersister#DataFactory.persist (cdataView, outFile, merge) in a doPrivilegedException call. That made it work. &lt;/p&gt;

&lt;p&gt;There is no other use of doPrivileged in EMMA&apos;s code, so we may see other similar problems.&lt;/p&gt;

&lt;p&gt;The exception seen above is later followed by this warning:&lt;/p&gt;

&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;report&amp;#93;&lt;/span&gt; processing input file &lt;span class=&quot;error&quot;&gt;&amp;#91;/export/home/dag/java/sb/sb1/junit_20111124_1520/coverage.ec&amp;#93;&lt;/span&gt; ...&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;report&amp;#93;&lt;/span&gt; java.io.UTFDataFormatException: malformed input around byte 0&lt;/p&gt;

&lt;p&gt;which is may be the (partial?) reason why the coverage file gets corrupted.&lt;/p&gt;</comment>
                            <comment id="13156887" author="dagw" created="Thu, 24 Nov 2011 19:58:45 +0000"  >&lt;p&gt;Small correction to the above: the default policy file for the tests does contain explicit permissions for the emma jar. But, that isn&apos;t enough when emma doesn&apos;t call doPrivileged, of course. The default server policy does not contain permissions for Emma.&lt;/p&gt;</comment>
                            <comment id="13156936" author="dagw" created="Thu, 24 Nov 2011 23:37:08 +0000"  >&lt;p&gt;With the patch to Emma, the fix to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5512&quot; title=&quot;emma-single and emma-all don&amp;#39;t use the instrumented jars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5512&quot;&gt;&lt;del&gt;DERBY-5512&lt;/del&gt;&lt;/a&gt; (thanks, Knut) and setting the path the the old releases when calling ant (since i&apos;m behind a firewall), I was able to make all tests in ant target &quot;derby-core&quot; run with emma jars, albeit a few at a time. I&apos;ll start all the tests now passing larger heap size etc in via ANT_OPTS, so I&apos;ll see how far I get with Emma running the &quot;emma-all&quot; target. It would be nice to have it running again. &lt;/p&gt;</comment>
                            <comment id="13157093" author="knutanders" created="Fri, 25 Nov 2011 10:51:39 +0000"  >&lt;p&gt;Thanks for that info, Dag! So it seems that the problem is that the JVM&apos;s runtime libraries don&apos;t have the permissions required by the EMMA code, and the lack of doPrivileged blocks in EMMA requires all code to have those permissions (except if Derby code that contains doPrivileged blocks itself is on the stack and limits the privilege checking).&lt;/p&gt;

&lt;p&gt;Based on that observation, I tried a different approach that didn&apos;t require modifying the EMMA source (see d5514-emma-permissions-to-all.diff). Instead, I changed the policy files to grant the permissions required by EMMA to all code bases when running with the instrumented code. That&apos;s basically the same as the current policy files do, except they explicitly grant the permissions to all the jar files we know about, whereas my patch grants them to all code bases the JVM knows about. (This also simplifies the policy files a bit, since we now only need one grant rule that covers all code bases, instead of one grant rule per code base.)&lt;/p&gt;

&lt;p&gt;I ran &quot;ant -DderbyTesting.oldReleasePath=... emma-all&quot; with my attached patch and Dag&apos;s initial patch for SecureServerTest. I saw two failures in RuntimeInfoTest, but it sounds like Dag already has a fix for that test in his sandbox (by setting the emma.verbosity.level property?).&lt;/p&gt;

&lt;p&gt;I also had to make a small change to RoutineSecurityTest. It contained negative test cases that tried to get the value of various system properties from within a stored procedure. Among these properties were user.dir, on which EMMA requires a read permission. Since EMMA&apos;s permissions are now granted to a wider set of code bases, getting that property now unexpectedly succeeded.&lt;/p&gt;

&lt;p&gt;Because of this, the patch skips the negative test case for user.dir. There are negative test cases for many other system properties, so I think RoutineSecurityTest still tests what it intended to test. Also, as a compensation, I enabled the negative test case for the user.home property in the same test. That test case has been disabled since the test was first checked in, but there is no comment saying why it&apos;s disabled, and it didn&apos;t fail in my environment (tested from both classes and jars, since they have different permissions granted to them, and also both sane and insane).&lt;/p&gt;</comment>
                            <comment id="13157219" author="dagw" created="Fri, 25 Nov 2011 16:15:54 +0000"  >&lt;p&gt;Thanks, Knut! Good if we can get away without changing the Emma source. Yes, added &quot;-Demma.verbosity.level=silent&quot; to RuntimeInfoTest#RuntimeinfoCmd and RuntimeinfoLocaleCmd. Seems we are good to code for the emma-all target, then. Btw, the ANT_OPTS may not be required as you said offline, since ant starts each suite separately.&lt;/p&gt;</comment>
                            <comment id="13157324" author="dagw" created="Fri, 25 Nov 2011 23:04:20 +0000"  >&lt;p&gt;Uploading patch derby-5514-2, which &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fixes the usa of String#contains,&lt;/li&gt;
	&lt;li&gt;adds -Demma.verbosity.level=silent to RuntimeInfoTest&lt;/li&gt;
	&lt;li&gt;adds the convenience method runsWithEmma to BaseTestCase&lt;/li&gt;
	&lt;li&gt;adds fixes to NetworkServerTestSetup to&lt;br/&gt;
  a) always use Emma verbosity silent when spawning a server in separate VM, and also &lt;br/&gt;
  b) refrains from starting the server with the security manager when running with Emma since the default server policy doesn&apos;t contain permissions for Emma, and finally&lt;/li&gt;
	&lt;li&gt;skips the assertion for the security manager being used in&lt;br/&gt;
  SecureServerTest (it is not, see preceding item)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With these fixes &lt;b&gt;and&lt;/b&gt; my patch to Emma (it will not be required when Knut&apos;s fixes to the policy files are added), &quot;ant emma-all&quot; completed successfully (see &lt;a href=&quot;https://people.apache.org/~dag/coverage.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://people.apache.org/~dag/coverage.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I notice emma-all doesn&apos;t contain the following tests which we may consider including:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;LobLimitsLiteTest&lt;/li&gt;
	&lt;li&gt;StressMultiTest&lt;/li&gt;
	&lt;li&gt;i18n._Suite&lt;/li&gt;
	&lt;li&gt;ReplicationSuite&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;which are all run as part of PackagesAll in the regressions.&lt;/p&gt;</comment>
                            <comment id="13157413" author="knutanders" created="Sat, 26 Nov 2011 08:20:58 +0000"  >&lt;p&gt;Committed d5514-emma-permissions-to-all.diff with revision 1206409.&lt;/p&gt;</comment>
                            <comment id="13158442" author="knutanders" created="Mon, 28 Nov 2011 13:33:11 +0000"  >&lt;p&gt;I ran suites.All (which includes the above mentioned test suites that are not part of emma-all/junit-all) successfully with derby-5514-2.diff and instrumented jars. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="13158583" author="dagw" created="Mon, 28 Nov 2011 17:21:52 +0000"  >&lt;p&gt;Committed derby-5514-2 as svn 1207471, resolving.&lt;/p&gt;</comment>
                            <comment id="13685138" author="knutanders" created="Mon, 17 Jun 2013 10:19:08 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12394911">DERBY-3647</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12505099" name="d5514-emma-permissions-to-all.diff" size="30733" author="knutanders" created="Fri, 25 Nov 2011 10:51:39 +0000"/>
                            <attachment id="12504958" name="derby-5514-1.diff" size="1934" author="dagw" created="Thu, 24 Nov 2011 01:44:38 +0000"/>
                            <attachment id="12504959" name="derby-5514-1.stat" size="175" author="dagw" created="Thu, 24 Nov 2011 01:44:38 +0000"/>
                            <attachment id="12505164" name="derby-5514-2.diff" size="4280" author="dagw" created="Fri, 25 Nov 2011 23:04:20 +0000"/>
                            <attachment id="12505165" name="derby-5514-2.stat" size="339" author="dagw" created="Fri, 25 Nov 2011 23:04:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Nov 2011 09:49:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ebj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>