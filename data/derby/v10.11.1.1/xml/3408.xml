<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:49:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3408/DERBY-3408.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3408] Wrong message when using SHOW in ij.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3408</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When running the show command using ij, it gives out a wrong message.&lt;/p&gt;

&lt;p&gt;eg.:&lt;br/&gt;
ij&amp;gt; show schema;&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;show&quot; at line 2, column 1.&lt;/p&gt;

&lt;p&gt;The message should be something like:&lt;br/&gt;
Syntax error: Encountered &quot;schema&quot; at line 2,column 1:no such thing as &quot;schema&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12388474">DERBY-3408</key>
            <summary>Wrong message when using SHOW in ij.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanpendleton">Bryan Pendleton</assignee>
                                    <reporter username="jazarine">Jazarine Jamal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Feb 2008 16:54:45 +0000</created>
                <updated>Fri, 21 Jan 2011 17:51:27 +0000</updated>
                            <resolved>Sat, 13 Sep 2008 15:31:23 +0100</resolved>
                                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12568614" author="johnemb" created="Wed, 13 Feb 2008 16:17:40 +0000"  >&lt;p&gt;Although the current error message is not necessarily wrong, I certainly agree that it is not helpful at all, and should be improved.&lt;/p&gt;</comment>
                            <comment id="12615009" author="bryanpendleton" created="Sat, 19 Jul 2008 16:44:51 +0100"  >&lt;p&gt;One simple approach would be for IJ to notice when message 42X01&lt;br/&gt;
(the general all-purpose &apos;syntax error&apos; message) was issued, and to&lt;br/&gt;
follow it up with a simple suggestion that the user might try using the&lt;br/&gt;
&apos;help&apos; command for general information about command syntax.&lt;/p&gt;

&lt;p&gt;Attached is a simple patch to do this. &lt;/p&gt;

&lt;p&gt;The output from IJ would then look like:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; show;&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;show&quot; at line 1, column 1.&lt;br/&gt;
Issue the &apos;help&apos; command for general information on IJ command syntax.&lt;br/&gt;
ij&amp;gt; show schema;&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;show&quot; at line 1, column 1.&lt;br/&gt;
Issue the &apos;help&apos; command for general information on IJ command syntax.&lt;/p&gt;

&lt;p&gt;This may impact some number of regression tests; I haven&apos;t&lt;br/&gt;
investigated to see what the scope of the impact would be, just&lt;br/&gt;
wanted to see what people thought of this approach.&lt;/p&gt;
</comment>
                            <comment id="12616813" author="knutanders" created="Fri, 25 Jul 2008 10:07:24 +0100"  >&lt;p&gt;This looks like a good improvement to me. The SQL state 42X01 doesn&apos;t necessarily mean that the user issued one of the IJ-specific commands, like for instance:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from t where x = 4 sort by z;&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;sort&quot; at line 1, column 29.&lt;br/&gt;
Issue the &apos;help&apos; command for general information on IJ command syntax.&lt;/p&gt;

&lt;p&gt;Perhaps we should append &quot;or consult the reference manual for the supported SQL syntax&quot; or something to cover what the help command is silent about?&lt;/p&gt;</comment>
                            <comment id="12616855" author="jazarine" created="Fri, 25 Jul 2008 12:33:27 +0100"  >&lt;p&gt;Very goood improvement indeed!&lt;/p&gt;

&lt;p&gt;Knut&apos;s comment is important too.&lt;/p&gt;

&lt;p&gt;We could have an another option of including all the errors falling under the category: message 42X01 (the general all-purpose &apos;syntax error&apos; message) in the help command.&lt;/p&gt;

&lt;p&gt;What do everyone think of this?&lt;br/&gt;
Will it increase the footprint size considerably?&lt;/p&gt;
</comment>
                            <comment id="12616858" author="knutanders" created="Fri, 25 Jul 2008 12:59:11 +0100"  >&lt;p&gt;I think 42X01 can be raised for almost any SQL statement if you mistype something, so then we&apos;d basically have to add all the supported SQL syntax to the help text. IJ is meant to work with other JDBC drivers too, so it&apos;s probably best not to assume too much about what syntax the underlying SQL engine supports.&lt;/p&gt;</comment>
                            <comment id="12616895" author="bryanpendleton" created="Fri, 25 Jul 2008 15:04:16 +0100"  >&lt;p&gt;Thanks for the feedback! I like the idea of broadening the suggestion message&lt;br/&gt;
to also suggest referring to the reference docs for SQL syntax. I agree that putting&lt;br/&gt;
the complete SQL syntax in IJ&apos;s help would be problematic; in addition to the&lt;br/&gt;
issues mentioned, the IJ client can be used with a range of different versions&lt;br/&gt;
of the Derby server, each with its own particular version-specific dialect of&lt;br/&gt;
supported SQL.&lt;/p&gt;</comment>
                            <comment id="12616930" author="bryanpendleton" created="Fri, 25 Jul 2008 16:57:55 +0100"  >&lt;p&gt;Attached is a revised patch with an expanded suggestion message. The new output is as follows:&lt;/p&gt;

&lt;p&gt;-bash-2.05b$ java org.apache.derby.tools.ij&lt;br/&gt;
ij version 10.5&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:brydb;create=true&apos;;&lt;br/&gt;
ij&amp;gt; show;&lt;br/&gt;
ERROR 42X01: Syntax error: Encountered &quot;show&quot; at line 1, column 1.&lt;br/&gt;
Issue the &apos;help&apos; command for general information on IJ command syntax. Any unrecognized commands are treated as potential SQL commands and executed directly. Consult your DBMS server reference documentation for details of the SQL syntax supported by your server.&lt;/p&gt;</comment>
                            <comment id="12627568" author="bryanpendleton" created="Tue, 2 Sep 2008 04:16:59 +0100"  >&lt;p&gt;I updated the patch proposal to include a simple&lt;br/&gt;
regression test as part of ij2.sql. Please let me&lt;br/&gt;
know of any additional comments regarding the patch.&lt;/p&gt;</comment>
                            <comment id="12627986" author="knutanders" created="Wed, 3 Sep 2008 13:55:54 +0100"  >&lt;p&gt;Thanks, Bryan! I think the approach looks very good. Some small comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The indentation looks wrong in utilMain.java. Probably your editor is configured with tab size 8 instead of 4.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In utilMain.handleSQLException() the code that sets syntaxErrorOccurred is placed between a comment and the code that is described by the comment. Perhaps it would be clearer if the new code was placed above the comment?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Some of the other tools messages have line breaks so that they look nice in a terminal. Should we do the same for IJ_SuggestHelp?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12628425" author="bryanpendleton" created="Thu, 4 Sep 2008 19:34:25 +0100"  >&lt;p&gt;Thanks for the comments Knut, those are all very useful suggestions.&lt;/p&gt;

&lt;p&gt;I tried placing line breaks in the message at the end of each&lt;br/&gt;
sentence. Depending on your terminal width the lines will&lt;br/&gt;
still wrap, but those seemed like reasonable places to break the lines.&lt;/p&gt;

&lt;p&gt;Please have a look at &apos;afterCodeReview.txt&apos; and tell me what you think.&lt;/p&gt;</comment>
                            <comment id="12628591" author="knutanders" created="Fri, 5 Sep 2008 09:34:29 +0100"  >&lt;p&gt;Thanks Bryan, it looks much better now. +1 to commit.&lt;/p&gt;</comment>
                            <comment id="12628769" author="bryanpendleton" created="Fri, 5 Sep 2008 23:27:59 +0100"  >&lt;p&gt;I&apos;ve run a complete set of regression tests, and, as I suspected, I&apos;m going to have&lt;br/&gt;
to update a fair number of test output files.&lt;/p&gt;

&lt;p&gt;Before I go propose a big patch to do this, I&apos;d like to respond to any other&lt;br/&gt;
feedback regarding the message itself. So if anybody else has any opinions&lt;br/&gt;
on the new message, please let me know.&lt;/p&gt;</comment>
                            <comment id="12629602" author="bryanpendleton" created="Tue, 9 Sep 2008 21:42:42 +0100"  >&lt;p&gt;Attached &apos;withUpdatedRegressionTestOutput.diff&apos; patch proposal includes&lt;br/&gt;
the same code changes as in the previous patch (&apos;afterCodeReview.txt&apos;),&lt;br/&gt;
but also includes changes to all the various regression test output files&lt;br/&gt;
to reflect the new IJ output.&lt;/p&gt;

&lt;p&gt;The regression test output file changes are simply to add the new text&lt;br/&gt;
whenever a 42X01message is emitted.&lt;/p&gt;

&lt;p&gt;The regression tests now pass successfully with this patch, review would&lt;br/&gt;
be appreciated.&lt;/p&gt;</comment>
                            <comment id="12630771" author="bryanpendleton" created="Sat, 13 Sep 2008 15:31:23 +0100"  >&lt;p&gt;Committed to the trunk as revision  694954.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12389533" name="afterCodeReview.txt" size="4804" author="bryanpendleton" created="Thu, 4 Sep 2008 19:34:25 +0100"/>
                            <attachment id="12389324" name="includeSimpleTest.diff" size="4867" author="bryanpendleton" created="Tue, 2 Sep 2008 04:16:59 +0100"/>
                            <attachment id="12386472" name="suggestHelp.diff" size="1793" author="bryanpendleton" created="Sat, 19 Jul 2008 16:44:51 +0100"/>
                            <attachment id="12386897" name="suggestServerDocsToo.diff" size="1985" author="bryanpendleton" created="Fri, 25 Jul 2008 16:57:55 +0100"/>
                            <attachment id="12389773" name="withUpdatedRegressionTestOutput.diff" size="223720" author="bryanpendleton" created="Tue, 9 Sep 2008 21:42:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Feb 2008 16:17:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23626</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0lpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>