<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:50:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2807/DERBY-2807.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2807] Create a test for BlobClob compatibility on Derby server versions vs. Derby client versions.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2807</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Run &apos;..../tests/jdbcapi/BlobClob4BlobTest.java&apos; in the &apos;java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/CompatibilityCombinations.java&apos; framework to test combinations of Derby server versions vs. Derby client versions. The CompatibilityCombinations framework also allows varying the JVM version used on the server and client side.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12371455">DERBY-2807</key>
            <summary>Create a test for BlobClob compatibility on Derby server versions vs. Derby client versions.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2007 10:42:10 +0100</created>
                <updated>Thu, 2 May 2013 03:29:07 +0100</updated>
                            <resolved>Mon, 24 Nov 2008 08:28:19 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12503816" author="olesolberg" created="Tue, 12 Jun 2007 11:18:13 +0100"  >&lt;p&gt;Depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2316&quot; title=&quot;Convert compatibility/testScript.xml to JUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2316&quot;&gt;&lt;del&gt;DERBY-2316&lt;/del&gt;&lt;/a&gt;, derby-2316_v3.diff.txt.&lt;/p&gt;</comment>
                            <comment id="12503817" author="olesolberg" created="Tue, 12 Jun 2007 11:21:38 +0100"  >&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/Compat_BlobClob4BlobTest.java&lt;br/&gt;
A      java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/BLOBCLOB_CompatibilitySuite.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/CompatibilitySuite.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/junit/TestConfiguration.java&lt;/p&gt;

&lt;p&gt;A Compat_BlobClob4BlobTest: &lt;br/&gt;
    Run the tests of BlobClob4BlobTest in server-client mode on an already started server.&lt;/p&gt;

&lt;p&gt;A BLOBCLOB_CompatibilitySuite: &lt;br/&gt;
    Subclassing CompatibilitySuite.&lt;br/&gt;
    Test suite() and entrypoint to run Compat_BlobClob4BlobTest.suite().&lt;/p&gt;

&lt;p&gt;M CompatibilitySuite: &lt;br/&gt;
    Package access for findClient, findServer, parseVMLevel, parseArgs, parseServerVMVersion.&lt;/p&gt;

&lt;p&gt;M TestConfiguration: &lt;br/&gt;
    Decorators to run tests against an already running server:&lt;br/&gt;
    defaultExistingServerSuite, clientExistingServerSuite, defaultExistingServerDecorator.&lt;/p&gt;

&lt;p&gt;-------&lt;br/&gt;
In compatibilitytest.properties (See java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/CompatibilityCombinations.java)&lt;br/&gt;
use &lt;/p&gt;

&lt;p&gt;test.testSuite=org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.BLOBCLOB_CompatibilitySuite&lt;br/&gt;
test.runEmbedded=false&lt;/p&gt;


&lt;p&gt;CompatibilityCombinations selects and starts the requested Derby server versions, and selects and runs the test on the requested Derby client versions.&lt;/p&gt;

&lt;p&gt;NB! Depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2316&quot; title=&quot;Convert compatibility/testScript.xml to JUnit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2316&quot;&gt;&lt;del&gt;DERBY-2316&lt;/del&gt;&lt;/a&gt;, derby-2316_v3.diff.txt.&lt;/p&gt;</comment>
                            <comment id="12535672" author="kmarsden" created="Wed, 17 Oct 2007 19:53:19 +0100"  >&lt;p&gt;Running CompatiblitySuite with the patch I get the exception below. Is there some special setup required?&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.util.DerbyJUnitTest.faultInDriver(DerbyJUnitTest.java:334)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.util.DerbyJUnitTest.getConnection(DerbyJUnitTest.java:371)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.util.DerbyJUnitTest.getConnection(DerbyJUnitTest.java:356)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest.testJDBCDriver(JDBCDriverTest.java:252)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)&lt;/p&gt;
</comment>
                            <comment id="12535893" author="olesolberg" created="Thu, 18 Oct 2007 12:35:19 +0100"  >&lt;p&gt;&apos;org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilitySuite&apos;&lt;br/&gt;
(and &apos;org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.BLOBCLOB_CompatibilitySuite&apos;)&lt;br/&gt;
are meant to be run via &apos;org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilityCombinations&apos;&lt;br/&gt;
which sets up the environment for the desired combinations of servers and clients to be tested:&lt;/p&gt;

&lt;p&gt;&apos;CompatibilityCombinations&apos; gets the compatibility suite to be run for each combination of Derby server and client from the file &apos;compatibilitytest.properties&apos; in &quot;user.dir&quot;.&lt;br/&gt;
I.e. &apos;compatibilitytest.properties&apos; must be created and put in your test execution directory.&lt;/p&gt;


&lt;p&gt;I then run the test like this&lt;/p&gt;

&lt;p&gt;export test=org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilityCombinations&lt;br/&gt;
java -Xmx256m -Djava.security.policy=&amp;lt;NONE&amp;gt; junit.textui.TestRunner $&lt;/p&gt;
{test}


&lt;p&gt;&apos;compatibilitytest.properties&apos; also specifies which combinations of jvm&apos;s should be used on the server and client sides.&lt;/p&gt;



&lt;p&gt;I am attaching an example &apos;compatibilitytest.properties&apos; file.&lt;/p&gt;
</comment>
                            <comment id="12543125" author="dyret" created="Fri, 16 Nov 2007 16:21:05 +0000"  >&lt;p&gt;Seems like this patch has been sitting for a while. Should it be committed as is, or is it possible to add some logic that detects that the test is not run through the CompatibilityCombinations framework? Almost anything would be better than an NPE, I guess...&lt;/p&gt;</comment>
                            <comment id="12543922" author="olesolberg" created="Tue, 20 Nov 2007 15:51:11 +0000"  >&lt;p&gt;The patch can be committed as is.&lt;/p&gt;

&lt;p&gt;I applied the patch to svn r596603 and successfully ran suites.All.&lt;/p&gt;

&lt;p&gt;I will submit a separate patch to flag that CompatibilitySuite should be run via the CompatibilityCombinations framework.&lt;/p&gt;</comment>
                            <comment id="12546798" author="dyret" created="Thu, 29 Nov 2007 17:00:16 +0000"  >&lt;p&gt;Ole: &quot;I am attaching an example &apos;compatibilitytest.properties&apos; file.&quot; &lt;/p&gt;

&lt;p&gt;So this file is not part of the patch, then? Seems like there is a lot of information in it. Would it not be good to have it in the repository? But since you need it to be in the directory where JUnit is started, you would then need to copy it manually from your sandbox to where you run the test. Would it be possible to specify to specify the location of this file on the command line somehow? &lt;/p&gt;

&lt;p&gt;Some nits:&lt;br/&gt;
The new defaultExistingServerDecorator() seems to have inherited the same &quot;This looks bogus to me...&quot; comment that was mentioned by someone else in another context.  In that method, there are also some code that has been commented out, and it is not obvious (to me at least) why this has been done (is it a temporary workaround for something that will be fixed later?).&lt;/p&gt;</comment>
                            <comment id="12547052" author="olesolberg" created="Fri, 30 Nov 2007 09:19:52 +0000"  >&lt;p&gt;&amp;gt; Dyre Tjeldvoll commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2807&quot; title=&quot;Create a test for BlobClob compatibility on Derby server versions vs. Derby client versions.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2807&quot;&gt;&lt;del&gt;DERBY-2807&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
&amp;gt; ---------------------------------------&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Ole: &quot;I am attaching an example &apos;compatibilitytest.properties&apos; file.&quot; &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; So this file is not part of the patch, then? &lt;br/&gt;
Correct.&lt;/p&gt;

&lt;p&gt;&amp;gt; Seems like there is a lot of information in it. Would it not be good to have it in the repository? &lt;br/&gt;
The property file is also described in org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilityCombinations where it is used. To avoid duplicating information I think that description should be used. (I guess I could have referred to that description instead of introducing the example file...)&lt;/p&gt;

&lt;p&gt;&amp;gt; But since you need it to be in the directory where JUnit is started, you would then need to copy it manually from your sandbox to where you run the test. &lt;br/&gt;
&amp;gt; Would it be possible to specify to specify the location of this file on the command line somehow? &lt;/p&gt;

&lt;p&gt;Good idea! I will implement that - in another patch if that is ok?&lt;/p&gt;


&lt;p&gt;&amp;gt; &lt;br/&gt;
&amp;gt; Some nits:&lt;br/&gt;
&amp;gt; The new defaultExistingServerDecorator() seems to have inherited the same &quot;This looks bogus to me...&quot; comment that was mentioned by someone else in another context.  &lt;br/&gt;
1. I will remove that inherited comment. It&apos;s already commented that defaultExistingServerDecorator() is a variant of defaultServerDecorator() where that comment is originally given.&lt;/p&gt;

&lt;p&gt;&amp;gt; In that method, there are also some code that has been commented out, and it is not obvious (to me at least) why this has been done &lt;br/&gt;
&amp;gt; (is it a temporary workaround for something that will be fixed later?).&lt;br/&gt;
2. &quot; /* &amp;amp;&amp;amp; Derby.hasServer() */ &quot; was commented out because in this case we do not require the server jar to be present: With the server already started we don&apos;t need server in the classpath and thus to test for server.&lt;br/&gt;
I&apos;ll remove that /* .. */ comment.&lt;/p&gt;

&lt;p&gt;I will upload a new a new patch with 1. and 2.&lt;/p&gt;</comment>
                            <comment id="12547060" author="olesolberg" created="Fri, 30 Nov 2007 09:59:06 +0000"  >&lt;p&gt;New patch derby-2807-v2.diff.txt following up comments from Dyre.&lt;/p&gt;</comment>
                            <comment id="12547165" author="dyret" created="Fri, 30 Nov 2007 14:52:46 +0000"  >&lt;p&gt;Patch derby-2807-v2.diff.txt committed with revision 599836&lt;/p&gt;</comment>
                            <comment id="12650139" author="olesolberg" created="Mon, 24 Nov 2008 08:28:19 +0000"  >&lt;p&gt;Was completed....&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="31583">DERBY-208</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12362437">DERBY-2316</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12367941" name="compatibilitytest.properties" size="3916" author="olesolberg" created="Thu, 18 Oct 2007 12:36:36 +0100"/>
                            <attachment id="12359488" name="derby-2807-v1.diff.txt" size="13138" author="olesolberg" created="Tue, 12 Jun 2007 11:21:38 +0100"/>
                            <attachment id="12370635" name="derby-2807-v2.diff.txt" size="12797" author="olesolberg" created="Fri, 30 Nov 2007 09:59:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Oct 2007 18:53:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0jtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>