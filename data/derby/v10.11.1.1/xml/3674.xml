<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:30:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3674/DERBY-3674.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3674] &apos;ALTER TABLE&apos; is not allowed on the System table &apos;&quot;SYSCS_DIAG&quot;.&quot;TRANSACTION_TABLE&quot;&apos; in derbyall - store/TransactionTable.sql</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3674</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;See e.g. &lt;a href=&quot;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/655989-derbyall_diff.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/655989-derbyall_diff.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;method&amp;gt;&lt;br/&gt;
store/TransactionTable.sql&lt;br/&gt;
&amp;lt;/method&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;signature&amp;gt;&lt;br/&gt;
268 del&lt;br/&gt;
&amp;lt; 0 rows inserted/updated/deleted&lt;br/&gt;
268a268,269&lt;br/&gt;
&amp;gt; ERROR 38000: The exception &apos;java.sql.SQLException: &apos;ALTER TABLE&apos; is not allowed on the System table &apos;&quot;SY\&lt;br/&gt;
SCS_DIAG&quot;.&quot;TRANSACTION_TABLE&quot;&apos;.&apos; was thrown while evaluating an expression.&lt;br/&gt;
&amp;gt; ERROR X0Y56: &apos;ALTER TABLE&apos; is not allowed on the System table &apos;&quot;SYSCS_DIAG&quot;.&quot;TRANSACTION_TABLE&quot;&apos;.&lt;br/&gt;
&amp;lt;/signature&amp;gt;&lt;/p&gt;</description>
                <environment>OS: SunOS 5.10&lt;br/&gt;
JVM: Sun 1.6.0_04&lt;br/&gt;
SVN: r &amp;gt;= 655989</environment>
        <key id="12395994">DERBY-3674</key>
            <summary>&apos;ALTER TABLE&apos; is not allowed on the System table &apos;&quot;SYSCS_DIAG&quot;.&quot;TRANSACTION_TABLE&quot;&apos; in derbyall - store/TransactionTable.sql</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 May 2008 07:47:32 +0100</created>
                <updated>Mon, 29 Jun 2009 23:43:12 +0100</updated>
                            <resolved>Tue, 20 May 2008 17:09:51 +0100</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12597003" author="mamtas" created="Thu, 15 May 2008 06:01:21 +0100"  >&lt;p&gt;Prior to my checkin for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1062&quot; title=&quot;Change the internal implemetation of SYSCS_INPLACE_COMPRESS_TABLE to share existing alter table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1062&quot;&gt;&lt;del&gt;DERBY-1062&lt;/del&gt;&lt;/a&gt;, all the work for inplace compress was handled outside of compile and execute hierarchy and the code for inplace compress was in OnlineCompress class. In that class, we checked if we are trying to compress a VTI (which in this jira entry&apos;s case is SYSCS_DIAG.TRANSACTION_TABLE) and if yes, then we did nothing and simply returned from the OnlineCompress class. &lt;/p&gt;

&lt;p&gt;With changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1062&quot; title=&quot;Change the internal implemetation of SYSCS_INPLACE_COMPRESS_TABLE to share existing alter table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1062&quot;&gt;&lt;del&gt;DERBY-1062&lt;/del&gt;&lt;/a&gt;, we have moved the code from OnlineCompress into ALTER TABLE related compile and execute classes(namely AlterTableNode and AlterTableConstantAction). In ALTER TABLE, we can tell in the bind phase in AlterTableNode.bindStatement() that we are dealing with VTI but there is no easy way to say we are done since we are dealing with inplace compress of VTI and hence let&apos;s quit. I can try to change code in compile and execute time to somehow ignore inplace compress on VTI but I was curious if there is a more graceful way to just quit out of compile phase (and skip execute phase all together) since we know inplace compress on VTI should be treated as no-op.&lt;/p&gt;</comment>
                            <comment id="12597004" author="mamtas" created="Thu, 15 May 2008 06:09:18 +0100"  >&lt;p&gt;The other easier alternative is I could check in SystemProcedures.SYSCS_INPLACE_COMPRESS_TABLE to see if we are dealing with VTI and if so then just return from the method and don&apos;t worry about generating ALTER TABLE sql for it. I will explore this path since it is cleaner than changing the compile and execute phase code of ALTER TABLE processing.&lt;/p&gt;</comment>
                            <comment id="12597235" author="mamtas" created="Thu, 15 May 2008 20:25:05 +0100"  >&lt;p&gt;I have checked in a fix for this jira entry through revision 656797. Inplace compress on VTI will be caught earlier and we will return with no-op. All the other inplace compress requests will go through ALTER TABLE code path.&lt;/p&gt;</comment>
                            <comment id="12598344" author="mamtas" created="Tue, 20 May 2008 17:09:51 +0100"  >&lt;p&gt;Haven&apos;t seen the failure again after the fix was checked in.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 May 2008 05:01:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0w1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39011</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>