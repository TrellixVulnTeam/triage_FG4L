<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:48:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5896/DERBY-5896.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5896] Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5896</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Change all the network server code under java/drda to use spaces instead of tabs.&lt;/p&gt;

&lt;p&gt;Having mixed tabs and spaces can be confusing, irritating  and time consuming for developers especially in the network code where client is all spaces and the server mostly tabs.&lt;/p&gt;

&lt;p&gt;With the  -x -b options on svn merge and svn diff, merges should be reasonable even if we change all the tabs to 4 spaces in the files under java/drda with a script something like (not yet tried):&lt;/p&gt;

&lt;p&gt;#!/bin/bash&lt;br/&gt;
files=$@&lt;br/&gt;
for file in $files&lt;/p&gt;
{
   echo $file
   mv  $file $file.orig
   sed -e &apos;s/\t/    /g&apos; &amp;lt; $file.orig &amp;gt; $file
   rm $file.orig
}


&lt;p&gt;Are there any objections to this change?  If not does anyone have any pending DRDA changes they would like to get in before I make the change?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12601943">DERBY-5896</key>
            <summary>Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Aug 2012 14:30:15 +0100</created>
                <updated>Fri, 15 Nov 2013 08:15:08 +0000</updated>
                            <resolved>Tue, 14 Aug 2012 23:23:55 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13430644" author="kmarsden" created="Tue, 7 Aug 2012 22:39:14 +0100"  >&lt;p&gt;attaced is a patch for this issue.&lt;br/&gt;
Using the script below as untab:&lt;br/&gt;
#!/bin/bash&lt;br/&gt;
files=$@&lt;br/&gt;
for file in $files&lt;/p&gt;
{
   echo $file
   mv  $file $file.orig
   sed -e &apos;s/\t/    /g&apos; &amp;lt; $file.orig &amp;gt; $file
   rm $file.orig
}

&lt;p&gt;from ../trunk/java/drda&lt;br/&gt;
$ untab `find . -type f`&lt;/p&gt;
</comment>
                            <comment id="13430647" author="kmarsden" created="Tue, 7 Aug 2012 22:40:05 +0100"  >&lt;p&gt;Marking patch available. suites.All derbyall passed&lt;/p&gt;</comment>
                            <comment id="13430689" author="dagw" created="Tue, 7 Aug 2012 23:29:03 +0100"  >&lt;p&gt;I&apos;m +1 to this change. Just a question.. why are we doing it only for this part of the source?&lt;/p&gt;</comment>
                            <comment id="13430724" author="kmarsden" created="Wed, 8 Aug 2012 00:30:48 +0100"  >&lt;p&gt;With all of the cleanup Knut has been doing in the drda source and the fact that client is all spaces it seemed like a good time to do this for at least drda even if it will make merges hard.  Hopefully though merges will be easy   with the -x -b option. I couldn&apos;t really test this without checking in, so thought I would start with drda which I think is worth it even if it does cause merge pain points and see how merging a few changes goes.  If merges are not problematic with -x -b then I am totally in favor of doing the whole thing.  &lt;/p&gt;

&lt;p&gt;Also I am  just taking it slow so everyone is comfortable. I remember a failed attempt at  reformatting some years ago. I realize now, tabs  were the real problem as other formatting inconsistencies are easier to negotiate. I  hoping we can eliminate the tabs now, starting with this patch.&lt;/p&gt;



</comment>
                            <comment id="13430913" author="kmarsden" created="Wed, 8 Aug 2012 07:55:45 +0100"  >&lt;p&gt;ommitted revision 1370674 to trunk.&lt;/p&gt;</comment>
                            <comment id="13431243" author="kmarsden" created="Wed, 8 Aug 2012 18:45:10 +0100"  >&lt;p&gt;java/client seems to have some tabs that have crept in.  I will fix those up too as part of this issue so all the network code is spaces.&lt;/p&gt;
</comment>
                            <comment id="13431305" author="kmarsden" created="Wed, 8 Aug 2012 20:10:48 +0100"  >&lt;p&gt;Attaching client patch for tabs that have crept into 36 files.&lt;/p&gt;</comment>
                            <comment id="13431967" author="kmarsden" created="Thu, 9 Aug 2012 17:43:31 +0100"  >&lt;p&gt;Committed revision 1371306 for client patch.&lt;/p&gt;</comment>
                            <comment id="13431981" author="kmarsden" created="Thu, 9 Aug 2012 18:07:17 +0100"  >&lt;p&gt;I have made the changes for this issue, but am leaving it open for a bit while I explore options to mitigate the large diff for annotation, merges, etc.&lt;/p&gt;

&lt;p&gt;In eclipse, subclipse annotate (right click, team -&amp;gt; Show annotation)  does not currently  have an option to ignore white space.  You can however see older annotation without switching to 10.8.  Instead of choosing the default to Revision: HEAD, I can choose revision 1370673 and see the older revision history. It might be useful to have a label for the prereformat so folks don&apos;t have to remember a number.&lt;/p&gt;

&lt;p&gt;There is a subclipse issue filed: &lt;a href=&quot;http://subclipse.tigris.org/issues/show_bug.cgi?id=1200&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://subclipse.tigris.org/issues/show_bug.cgi?id=1200&lt;/a&gt; but looks stuck as javaHL does not expose these options.&lt;/p&gt;

</comment>
                            <comment id="13433025" author="knutanders" created="Mon, 13 Aug 2012 10:34:30 +0100"  >&lt;p&gt;Sorry for commenting so late. Using sed to replace tabs with exactly four spaces won&apos;t do the right thing in all cases, as there may be less than four characters up to the next tab stop. A tool such as expand (part of GNU coreutils) would handle the cases where the tab is not located exactly at a tab stop. But I guess in most of the cases the script will produce ok results, as most of the tabs are at the beginning of the line. If some lines end up oddly formatted, we can reformat them as we come across them. Thanks for making this change.&lt;/p&gt;</comment>
                            <comment id="13433122" author="knutanders" created="Mon, 13 Aug 2012 14:15:43 +0100"  >&lt;p&gt;Attaching derby-5896-align-with-tab-stops.diff.txt which changes the lines where the previous patch didn&apos;t hit the tab stop. Running regression tests.&lt;/p&gt;</comment>
                            <comment id="13433166" author="kmarsden" created="Mon, 13 Aug 2012 15:22:50 +0100"  >&lt;p&gt;Thanks Knut for fixing this up. Can you cut and paste your exact expand command for future reference if we do other code or need to do periodic cleanup?&lt;/p&gt;

</comment>
                            <comment id="13433206" author="knutanders" created="Mon, 13 Aug 2012 16:23:09 +0100"  >&lt;p&gt;Here&apos;s the command I used:&lt;/p&gt;

&lt;p&gt;for i in $(find java/drda -name &quot;*.java&quot;); do&lt;br/&gt;
  mv $i $i.orig&lt;br/&gt;
  expand -t4 &amp;lt; $i.orig &amp;gt; $i&lt;br/&gt;
  rm $i.orig&lt;br/&gt;
done&lt;/p&gt;</comment>
                            <comment id="13433227" author="kmarsden" created="Mon, 13 Aug 2012 16:45:34 +0100"  >&lt;p&gt;As part of the original reformat, I included things like build.xml and package.html, actually passing  `find java/drda -type f` rather than just the java files.&lt;/p&gt;

</comment>
                            <comment id="13433270" author="kmarsden" created="Mon, 13 Aug 2012 17:40:43 +0100"  >&lt;p&gt;Below are some tips for negotiating white space differences now that  java/drda and java/client have been reformated to have only space indentation (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5896&quot; title=&quot;Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5896&quot;&gt;&lt;del&gt;DERBY-5896&lt;/del&gt;&lt;/a&gt;).   The replacement of tabs with four spaces was done for java/drda at revision 1370673 and java/client at revison 1371306.&lt;/p&gt;

&lt;p&gt;svn merge, blame and diff commands (command line)&lt;br/&gt;
Specify -x -b on these svn commands to ignore white space differences.  I changed my svnmergefromtrunk  script as follows and had no problem merging  &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1400&quot; title=&quot;Cleanup code in network server&amp;#39;s DRDAStatement class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1400&quot;&gt;&lt;del&gt;DERBY-1400&lt;/del&gt;&lt;/a&gt; to 10.9, a post reformat change:&lt;br/&gt;
#svnmergefromtrunk   e.g for change 1371677 svnmergefromtrunk  1371677&lt;br/&gt;
svn merge -x -b -c $1  &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/code/trunk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/code/trunk&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;visual diff tools.&lt;br/&gt;
Most visual diff tools have options for ignoring white space diffs which should be set when comparing branches or old versions.&lt;/p&gt;

&lt;p&gt;Eclipse subclipse plugin&lt;/p&gt;

&lt;p&gt;Set preferences under Window (or Project properties for fine project tuning)&lt;br/&gt;
Window-&amp;gt;Preferences-&amp;gt;Compare/Patch - Check ignore white space.&lt;br/&gt;
Window &lt;del&gt;&amp;gt; Preferences&lt;/del&gt;&amp;gt; Java -&amp;gt; Code Style -&amp;gt; Formatter -&amp;gt; Edit -&amp;gt; Tab Policy - Choose Spaces Only&lt;br/&gt;
Window &lt;del&gt;&amp;gt; Preferences&lt;/del&gt;&amp;gt; General-&amp;gt; Text Editors - Check Insert spaces for tabs, show whitespace characters.&lt;/p&gt;


&lt;p&gt;Eclipse subclipse annotation&lt;br/&gt;
subclipse annotation does not allow you to specify -x -b.  To look at history prior to the change, however, you can  specify a &quot;To version&quot; which can be prior to the reformat and give the annotation prior to the large change. I think we could add a PRESPACE tag or some such to make this easier.  For drda, this is 1370673, for client 1371306.  Another option is to use subclipse annotation on an older branch like 10.9.&lt;/p&gt;

&lt;p&gt;Eclipse subclipse merge&lt;br/&gt;
I think this will not work very well until subclipse provides a whitespace option. The only option I know is to use svn merge from the command line.&lt;/p&gt;

&lt;p&gt;Are there other things that folks should consider?  I only tried with eclipse IDE and do not merge in the IDE. I am guessing subclipse merge will have issues. Tips for Netbeans other IDE&apos;s would be welcome. &lt;/p&gt;
</comment>
                            <comment id="13434028" author="knutanders" created="Tue, 14 Aug 2012 11:02:34 +0100"  >&lt;p&gt;Committed derby-5896-align-with-tab-stops.diff.txt with revision 1372814.&lt;/p&gt;</comment>
                            <comment id="13434030" author="knutanders" created="Tue, 14 Aug 2012 11:05:38 +0100"  >&lt;p&gt;&amp;gt; As part of the original reformat, I included things like build.xml and package.html, actually passing `find java/drda -type f` rather than just the java files.&lt;/p&gt;

&lt;p&gt;In the non-java files, there was just a single occurrence of tab+space+tab being expanded to 9 spaces instead of 8 in build.xml. Fixed in revision 1372818.&lt;/p&gt;</comment>
                            <comment id="13434054" author="knutanders" created="Tue, 14 Aug 2012 12:19:39 +0100"  >&lt;p&gt;Attaching a patch with a similar cleanup for the client code. Committed revision 1372841.&lt;/p&gt;</comment>
                            <comment id="13434586" author="kmarsden" created="Tue, 14 Aug 2012 23:23:55 +0100"  >&lt;p&gt;Resolving for trunk with the following revisions:&lt;br/&gt;
Thank you Knut for fixing the alignment!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1370674&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;amp;revision=1370674&lt;/a&gt;&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r1370674 | kmarsden | 2012-08-07 23:54:46 -0700 (Tue, 07 Aug 2012) | 3 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5896&quot; title=&quot;Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5896&quot;&gt;&lt;del&gt;DERBY-5896&lt;/del&gt;&lt;/a&gt; Change java/drda source code to use  spaces instead of tabs&lt;/p&gt;


&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1371306&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;amp;revision=1371306&lt;/a&gt;&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r1371306 | kmarsden | 2012-08-09 09:41:32 -0700 (Thu, 09 Aug 2012) | 5 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5896&quot; title=&quot;Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5896&quot;&gt;&lt;del&gt;DERBY-5896&lt;/del&gt;&lt;/a&gt; Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client&lt;/p&gt;

&lt;p&gt;Change client tabs to spaces.&lt;/p&gt;


&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1372814&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;amp;revision=1372814&lt;/a&gt;&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r1372814 | kahatlen | 2012-08-14 02:53:09 -0700 (Tue, 14 Aug 2012) | 4 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5896&quot; title=&quot;Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5896&quot;&gt;&lt;del&gt;DERBY-5896&lt;/del&gt;&lt;/a&gt;: Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client&lt;/p&gt;

&lt;p&gt;Align with tab stops if the replaced tab character itself wasn&apos;t located on a tab stop.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1372841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;amp;revision=1372841&lt;/a&gt;&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r1372841 | kahatlen | 2012-08-14 04:17:14 -0700 (Tue, 14 Aug 2012) | 4 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5896&quot; title=&quot;Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5896&quot;&gt;&lt;del&gt;DERBY-5896&lt;/del&gt;&lt;/a&gt;: Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client&lt;/p&gt;

&lt;p&gt;Align with tab stops in java/client.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1372818&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;amp;revision=1372818&lt;/a&gt;&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
r1372818 | kahatlen | 2012-08-14 03:05:00 -0700 (Tue, 14 Aug 2012) | 4 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5896&quot; title=&quot;Change java/drda source code to use  spaces instead of tabs and clean up tab creep in java/client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5896&quot;&gt;&lt;del&gt;DERBY-5896&lt;/del&gt;&lt;/a&gt;: Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client&lt;/p&gt;

&lt;p&gt;Align with tab stops if the replaced tab character itself wasn&apos;t located on a tab stop.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;/p&gt;</comment>
                            <comment id="13823397" author="knutanders" created="Fri, 15 Nov 2013 08:15:08 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12540651" name="derby-5896-align-with-tab-stops.diff.txt" size="195694" author="knutanders" created="Mon, 13 Aug 2012 14:15:43 +0100"/>
                            <attachment id="12540871" name="derby-5896-client-align-with-tab-stops.diff.txt" size="7379" author="knutanders" created="Tue, 14 Aug 2012 12:19:39 +0100"/>
                            <attachment id="12539906" name="derby-5896_client_diff.txt" size="123139" author="kmarsden" created="Wed, 8 Aug 2012 20:10:48 +0100"/>
                            <attachment id="12539905" name="derby-5896_client_stat.txt" size="2423" author="kmarsden" created="Wed, 8 Aug 2012 20:10:48 +0100"/>
                            <attachment id="12539715" name="derby-5896_diff.txt" size="1444058" author="kmarsden" created="Tue, 7 Aug 2012 22:39:14 +0100"/>
                            <attachment id="12539714" name="derby-5896_stat.txt" size="1834" author="kmarsden" created="Tue, 7 Aug 2012 22:39:14 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Aug 2012 22:29:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0adr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>