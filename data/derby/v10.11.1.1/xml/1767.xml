<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1767/DERBY-1767.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1767] insertRow(), updateRow() and deleteRow() cannot handle table names and column names containing double quotes</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1767</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;ResultSet.insertRow(), ResultSet.updateRow() and ResultSet.deleteRow() fail with syntax error if the table name or a column name contains a double quote character. The attached repro gives this stack trace:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.sql.SQLSyntaxErrorException: Syntax error: Encountered &quot;quoted&quot; at line 1, column 24.&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:137)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:72)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:203)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:380)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:345)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:1378)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedResultSet.closeOnTransactionError(EmbedResultSet.java:4342)&lt;br/&gt;
        at org.apache.derby.impl.jdbc.EmbedResultSet.insertRow(EmbedResultSet.java:3678)&lt;br/&gt;
        at QuotesInNames.main(QuotesInNames.java:15)&lt;br/&gt;
Caused by: java.sql.SQLException: Syntax error: Encountered &quot;quoted&quot; at line 1, column 24.&lt;br/&gt;
        ... 11 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12348730">DERBY-1767</key>
            <summary>insertRow(), updateRow() and deleteRow() cannot handle table names and column names containing double quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fernanda">Fernanda Pizzorno</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Aug 2006 12:46:14 +0100</created>
                <updated>Sat, 9 Sep 2006 15:37:47 +0100</updated>
                            <resolved>Sat, 9 Sep 2006 15:37:47 +0100</resolved>
                                    <version>10.1.2.1</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12430972" author="knutanders" created="Mon, 28 Aug 2006 14:05:27 +0100"  >&lt;p&gt;Also, when this error is observed, subsequent calls to Connection.rollback() will fail with:&lt;/p&gt;

&lt;p&gt;java.sql.SQLException: Cannot issue rollback in a nested connection when there is a pending operation in the parent connection.&lt;/p&gt;

&lt;p&gt;This only happens with insertRow() and deleteRow(), not with updateRow(). I suspect this is because insertRow() and deleteRow() don&apos;t call popStatementContext() in their finally clauses.&lt;/p&gt;</comment>
                            <comment id="12431153" author="knutanders" created="Tue, 29 Aug 2006 07:55:57 +0100"  >&lt;p&gt;I believe updateRow() and deleteRow() have the same problem with cursor names that contain double quotes.&lt;/p&gt;</comment>
                            <comment id="12431864" author="fernanda" created="Thu, 31 Aug 2006 12:23:57 +0100"  >&lt;p&gt;The attached patch (derby-1767.diff) fixed the problem by replacing the quotes in the schema/table/column/cursor names with two quotes when building the position update, position delete and insert statements used by the updateRow(), deleteRow() and insertRow() methods. I have also changed the insertRow() and deleteRow() methods so that they call popStatementContext() in their finally clauses.&lt;/p&gt;

&lt;p&gt;I have successfully run derbyall with this patch. Can someone please review it?&lt;/p&gt;</comment>
                            <comment id="12432606" author="knutanders" created="Tue, 5 Sep 2006 14:23:58 +0100"  >&lt;p&gt;Thanks Fernanda! The patch fixes the problem. Two minor comments:&lt;br/&gt;
  1) UpdatableResultSetTest contains an @author tag which should be removed.&lt;br/&gt;
  2) I was wondering whether quoteSqlIdentifier() would be a better name for replaceQuotesWithTwoQuotes(). In that case, it should also return the surrounding double quotes.&lt;/p&gt;</comment>
                            <comment id="12433101" author="fernanda" created="Thu, 7 Sep 2006 13:47:46 +0100"  >&lt;p&gt;Thank you for reviewing the patch Knut Anders. The attached patch (derby-1767v2.diff) addresses your comments. I have successfully run derbyall with it. Can someone please review/commit it?&lt;/p&gt;</comment>
                            <comment id="12433207" author="knutanders" created="Thu, 7 Sep 2006 20:32:39 +0100"  >&lt;p&gt;Thank you, Fernanda! I committed the patch with revision 441185.&lt;/p&gt;

&lt;p&gt;One thing that I didn&apos;t notice in my previous review, was that the new JUnit test was run as a separate test, not as part of _Suite.junit. It would be good if this were addressed in a follow-up patch.&lt;/p&gt;</comment>
                            <comment id="12433467" author="knutanders" created="Fri, 8 Sep 2006 19:35:08 +0100"  >&lt;p&gt;Merged into 10.2 with revision 441540.&lt;/p&gt;</comment>
                            <comment id="12433603" author="knutanders" created="Sat, 9 Sep 2006 15:31:05 +0100"  >&lt;p&gt;I mistakenly closed this issue while there still was more work to be done. Reopening.&lt;/p&gt;</comment>
                            <comment id="12433605" author="knutanders" created="Sat, 9 Sep 2006 15:32:33 +0100"  >&lt;p&gt;Attaching 1767-junit.diff which makes UpdatableResultSetTest run as part of jdbcapi/_Suite.junit.&lt;/p&gt;</comment>
                            <comment id="12433607" author="knutanders" created="Sat, 9 Sep 2006 15:37:47 +0100"  >&lt;p&gt;Committed 1767-junit.diff into trunk with revision 441789.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12340515" name="1767-junit.diff" size="2913" author="knutanders" created="Sat, 9 Sep 2006 15:32:33 +0100"/>
                            <attachment id="12339694" name="ASF.LICENSE.NOT.GRANTED--QuotesInNames.java" size="683" author="knutanders" created="Mon, 28 Aug 2006 12:46:15 +0100"/>
                            <attachment id="12339958" name="derby-1767.diff" size="23517" author="" created="Thu, 31 Aug 2006 12:22:59 +0100"/>
                            <attachment id="12339959" name="derby-1767.stat" size="455" author="" created="Thu, 31 Aug 2006 12:22:59 +0100"/>
                            <attachment id="12340361" name="derby-1767v2.diff" size="23199" author="fernanda" created="Thu, 7 Sep 2006 13:47:46 +0100"/>
                            <attachment id="12340362" name="derby-1767v2.stat" size="455" author="fernanda" created="Thu, 7 Sep 2006 13:47:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 31 Aug 2006 11:23:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy14nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>