<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4754/DERBY-4754.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4754] SQLClob.getObject() should always return a java.sql.Clob</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4754</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Depending on what SQLClob wraps (a string, a stream, a java.sql.Clob), SQLClob.getObject() sometimes returns a string and other times returns a java.sql.Clob. In at least one spot, the compiler expects that SQLClob.getObject() will always return a java.sql.Clob. See the final cast compiled by SQLToJavaValueNode.generateJavaValue(). I believe that the compiler is correct and SQLClob.getObject() should behave predictably.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12470025">DERBY-4754</key>
            <summary>SQLClob.getObject() should always return a java.sql.Clob</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                            <label>derby_triage10_8</label>
                    </labels>
                <created>Fri, 23 Jul 2010 17:09:45 +0100</created>
                <updated>Wed, 15 Feb 2012 23:09:24 +0000</updated>
                            <resolved>Wed, 15 Feb 2012 23:09:23 +0000</resolved>
                                    <version>10.6.1.0</version>
                                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>JDBC</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12894987" author="rhillegas" created="Tue, 3 Aug 2010 19:44:47 +0100"  >&lt;p&gt;Attaching derby-4754-01-aa-harmonyLOBs.diff. This patch needs to be cleaned up a bit and I need to see what breaks when I run the regression tests.&lt;/p&gt;

&lt;p&gt;This patch adds the Harmony SerialBlob and SerialClob implementations to Derby. These are used as fallback implementations of Blob and Clob to be returned by SQLBlob.getObject() and SQLClob.getObject() when those data values do not wrap LOBs.&lt;/p&gt;


&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;M      NOTICE&lt;/p&gt;

&lt;p&gt;Thanks Harmony for its code.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;A      java/engine/org/apache/derby/iapi/types/HarmonySerialBlob.java&lt;br/&gt;
A      java/engine/org/apache/derby/iapi/types/HarmonySerialClob.java&lt;/p&gt;

&lt;p&gt;The cloned Harmony code.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/iapi/types/SQLChar.java&lt;br/&gt;
M      java/engine/org/apache/derby/iapi/types/SQLClob.java&lt;/p&gt;

&lt;p&gt;Fixes SQLClob.getObject() so that it always returns a java.sql.Clob.&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/iapi/types/SQLBlob.java&lt;br/&gt;
M      java/engine/org/apache/derby/iapi/types/SQLBinary.java&lt;/p&gt;

&lt;p&gt;Fixes SQLBlob.getObject() so that it always returns a java.sql.Blob.&lt;/p&gt;</comment>
                            <comment id="12895256" author="rhillegas" created="Wed, 4 Aug 2010 14:31:49 +0100"  >&lt;p&gt;Tests passed cleanly for me with this patch, except for a ping heisenbug in the network environment.&lt;/p&gt;</comment>
                            <comment id="12895347" author="rhillegas" created="Wed, 4 Aug 2010 19:12:47 +0100"  >&lt;p&gt;I believe that the proposed patch is incremental improvement. It will allow Derby to continue processing in situations which raise exceptions today. However, the patch will have performance/resource issues in situations similar to those covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4544&quot; title=&quot;Referencing streaming CLOBs in (some) generated column clauses fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4544&quot;&gt;&lt;del&gt;DERBY-4544&lt;/del&gt;&lt;/a&gt;. That is because the Harmony LOBs are constructed by materializing the contents of the Derby LOBs. Perhaps the solution to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4544&quot; title=&quot;Referencing streaming CLOBs in (some) generated column clauses fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4544&quot;&gt;&lt;del&gt;DERBY-4544&lt;/del&gt;&lt;/a&gt; can be applied to this bug to.&lt;/p&gt;</comment>
                            <comment id="12895348" author="rhillegas" created="Wed, 4 Aug 2010 19:15:50 +0100"  >&lt;p&gt;Attaching a second rev of the patch, derby-4754-01-ab-harmonyLOBs. This cleans up the previous rev, using Derby error messages instead of Harmony message ids. The replacement error messages are largely borrowed from EmbedBlob and EmbedClob.&lt;/p&gt;</comment>
                            <comment id="12895658" author="rhillegas" created="Thu, 5 Aug 2010 13:48:34 +0100"  >&lt;p&gt;Tests passed cleanly for me except for the network ping problem. Committed second rev of the patch at subversion revision 982585.&lt;/p&gt;</comment>
                            <comment id="12897900" author="rhillegas" created="Thu, 12 Aug 2010 20:15:39 +0100"  >&lt;p&gt;After we improve the memory usage of the LOBs returned by SQLClob.getObject() and SQLBlob.getObject() (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4544&quot; title=&quot;Referencing streaming CLOBs in (some) generated column clauses fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4544&quot;&gt;&lt;del&gt;DERBY-4544&lt;/del&gt;&lt;/a&gt;), we should add a test case to ParameterMappingTest to test LOB inout procedure args which are bigger than the VM memory. Grep that file for makeBigClob and makeBigBlob to see where to plug in this test. This should round off the work done on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4066&quot; title=&quot;Allow functions/procedures to take Blob/Clob arguments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4066&quot;&gt;&lt;del&gt;DERBY-4066&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13016486" author="rhillegas" created="Wed, 6 Apr 2011 20:01:34 +0100"  >&lt;p&gt;It appears to me that this bug has been fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12415237">DERBY-4066</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12455894">DERBY-4544</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12451675" name="derby-4066-02-ac-outputLOBs.diff" size="19304" author="rhillegas" created="Tue, 10 Aug 2010 15:26:02 +0100"/>
                            <attachment id="12451144" name="derby-4754-01-aa-harmonyLOBs.diff" size="20829" author="rhillegas" created="Tue, 3 Aug 2010 19:44:47 +0100"/>
                            <attachment id="12451244" name="derby-4754-01-ab-harmonyLOBs.diff" size="22793" author="rhillegas" created="Wed, 4 Aug 2010 19:15:50 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0e2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>