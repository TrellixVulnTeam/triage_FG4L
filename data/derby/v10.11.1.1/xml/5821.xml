<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:30:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5821/DERBY-5821.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5821] tools/derbyrunjartest.java doesn&apos;t use jvmflags</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5821</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;tools/derbyrunjartest.java doesn&apos;t use the jvmflags property when it starts a sub-process, so one cannot pass custom flags to the process. This makes it difficult to get the test to pass when running with code coverage tools.&lt;/p&gt;

&lt;p&gt;For example, for EMMA, we need to manipulate the classpath and reduce the verbosity level. And we need to pass a -javaagent flag if we&apos;re running with JaCoCo. Using the jvmflags property works for those tests that don&apos;t spawn processes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12560751">DERBY-5821</key>
            <summary>tools/derbyrunjartest.java doesn&apos;t use jvmflags</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2012 12:11:45 +0100</created>
                <updated>Mon, 9 Jul 2012 12:19:18 +0100</updated>
                            <resolved>Mon, 9 Jul 2012 12:19:18 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13395881" author="knutanders" created="Mon, 18 Jun 2012 14:38:31 +0100"  >&lt;p&gt;It&apos;s probably better to convert the test to JUnit and leave the old harness as it is. I&apos;ll give it a try.&lt;/p&gt;</comment>
                            <comment id="13397520" author="knutanders" created="Wed, 20 Jun 2012 15:07:58 +0100"  >&lt;p&gt;Attached is a patch that rewrites derbyrunjartest as a JUnit &lt;br/&gt;
test and removes it from the old harness.&lt;/p&gt;

&lt;p&gt;Both suites.All and derbyall passed with the patch.&lt;/p&gt;

&lt;p&gt;Details:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;build.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Add derbyrun.jar to the classpath when running JUnit tests under EMMA. It wasn&apos;t needed before, since none of the other JUnit tests used derbyrun.jar.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;functionTests/master/derbyrunjartest.out&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Remove old canon.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;functionTests/suites/derbytools.runall&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Remove from old harness suite.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;functionTests/tests/tools/build.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Make sure newly created policy file gets copied to classes directory.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;functionTests/tests/tools/derbyrunjartest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Execute the tools and compare actual output with the expected output using BaseTestCase.assertExecJavaCmdAsExpected().&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;functionTests/tests/tools/derbyrunjartest.policy&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Additional permissions needed for the test to run (test classes need permission to find the location of derbyrun.jar). The original version of the test ran without a security manager for this reason.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;functionTests/tests/tools/derbyrunjartest_app.properties&lt;/li&gt;
	&lt;li&gt;functionTests/tests/tools/derbyrunjartest_sed.properties&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Remove files used by the old harness.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;junit/BaseTestCase.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added logic to pass emma.jar to the classpath of the sub-process when running java -jar. Since you cannot add jar files directly to the classpath when running with -jar, emma.jar is added to the bootclasspath.&lt;/p&gt;</comment>
                            <comment id="13401254" author="knutanders" created="Tue, 26 Jun 2012 09:43:56 +0100"  >&lt;p&gt;Committed revision 1353862.&lt;/p&gt;</comment>
                            <comment id="13406488" author="knutanders" created="Wed, 4 Jul 2012 13:50:43 +0100"  >&lt;p&gt;Reopening the issue since I forgot to add the JUnit test to the tools._Suite. Also, the test case for the server command fails on J2ME platforms, because the server isn&apos;t supported on those platforms, and should be skipped.&lt;/p&gt;</comment>
                            <comment id="13406506" author="knutanders" created="Wed, 4 Jul 2012 14:28:44 +0100"  >&lt;p&gt;Attaching a patch that adds the test to tools._Suite and makes it skip testServer() on J2ME platforms.&lt;/p&gt;</comment>
                            <comment id="13409336" author="knutanders" created="Mon, 9 Jul 2012 12:19:18 +0100"  >&lt;p&gt;Committed revision 1359068.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532692" name="d5821-1a.diff" size="19317" author="knutanders" created="Wed, 20 Jun 2012 15:07:58 +0100"/>
                            <attachment id="12535097" name="d5821-2a.patch" size="3019" author="knutanders" created="Wed, 4 Jul 2012 14:28:44 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0b67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>