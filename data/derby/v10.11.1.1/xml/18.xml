<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:30:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-18/DERBY-18.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-18] Exposed name matching has bugs when the column name is qualified with a schema name.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-18</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Reporting for Kathey Marsden.&lt;/p&gt;

&lt;p&gt;create table t1(c1 int);  &amp;#8211; goes into app&lt;br/&gt;
select sys.t1.c1 from t1; &amp;#8211; should fail&lt;br/&gt;
select sys.b.c1 from t1 b; &amp;#8211; should fail&lt;br/&gt;
select * from t1, app.t1;  &amp;#8211; fails, should succeed&lt;br/&gt;
select t1.c1 from t1, app.t1; &amp;#8211; fails, should succeed&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;According to SQL92, the &amp;lt;table&lt;br/&gt;
name&amp;gt; in a &amp;lt;table reference&amp;gt; exposes its name when it is not &lt;br/&gt;
qualified (See 6.3 &amp;lt;table reference&amp;gt;, Syntax Rule 1).  Also, &lt;br/&gt;
an unqualified &amp;lt;table name&amp;gt; is equivalent to one qualified &lt;br/&gt;
with the current default schema name (See 5.4 Names and &lt;br/&gt;
identifiers, Syntax Rule 8).  So, in the above queries,&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;select * from t1, app.t1  &amp;#8211; is the same as select * from &lt;br/&gt;
app.t1, app.t1, and this is not SQL92 &amp;#8212; you have duplicate &lt;br/&gt;
exposed &amp;lt;table name&amp;gt;s in the same scope (see 6.3 &amp;lt;table &lt;br/&gt;
reference&amp;gt;, Syntax Rule 3). Derby can support it, but it&apos;s an &lt;br/&gt;
extension.&lt;/p&gt;

&lt;p&gt;select t1.c1 from t1, app.t1 &amp;#8211; is the same as select app.t1.c1 &lt;br/&gt;
from app.t1, app.t1, and again supporting this would be an &lt;br/&gt;
extension to SQL92.&lt;/p&gt;

&lt;p&gt;Note that if you say&lt;br/&gt;
select * from t1, t2 t1 &amp;#8211;  this is also a duplication, as the &lt;br/&gt;
exposed &amp;lt;table name&amp;gt; of the first table is app.t1 and the &lt;br/&gt;
exposed &amp;lt;correlation name&amp;gt; of the second table is t1. these &lt;br/&gt;
are different names, but 6.3 &amp;lt;table reference&amp;gt; Syntax Rule 4 &lt;br/&gt;
rules out this case explicitly &amp;#8211; a &amp;lt;correlation name&amp;gt; &lt;br/&gt;
cannot be the same as the unqualified part of any exposed &lt;br/&gt;
&amp;lt;table name&amp;gt;.&lt;/p&gt;

&lt;p&gt;One possibility is to go to a 2 pass method of column resolution:&lt;br/&gt;
1st pass looks for an exact match on the qualifier (app.t1 &lt;br/&gt;
matches app.t1 but not t1, ...)&lt;br/&gt;
if no match, then do 2nd pass where it looks for a match on &lt;br/&gt;
table id.&lt;br/&gt;
(Look at OrderByColumn.bindOrderByColumn()&lt;/p&gt;</description>
                <environment></environment>
        <key id="27523">DERBY-18</key>
            <summary>Exposed name matching has bugs when the column name is qualified with a schema name.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shreyas">Shreyas Kaushik</assignee>
                                    <reporter username="tulika">Tulika Agrawal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Sep 2004 20:04:22 +0100</created>
                <updated>Sat, 8 Jul 2006 11:05:32 +0100</updated>
                            <resolved>Wed, 25 May 2005 16:51:38 +0100</resolved>
                                    <version>10.0.2.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="58008" author="shreyas" created="Mon, 24 Jan 2005 21:21:19 +0000"  >&lt;p&gt;set current schema app;&lt;/p&gt;

&lt;p&gt;create table t1(int c1 varchar(10));&lt;/p&gt;

&lt;p&gt;create schema s1;&lt;br/&gt;
create table s1.t1(id1 int, d2 varchar(10));&lt;/p&gt;

&lt;p&gt;select * from t1, app.t1;  ---&amp;gt; This fails, should succeed.&lt;/p&gt;

&lt;p&gt;Internally table names are handled correctly but the above problem occurs because of the equals() method in Tablename.java. &lt;/p&gt;

&lt;p&gt;Here the follwoing piece of code &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------------------------&lt;br/&gt;
else if ((schemaName == null) ||&lt;br/&gt;
				 (otherTableName.getSchemaName() == null))&lt;/p&gt;
		{
			return tableName.equals(otherTableName.getTableName());
	     }
&lt;p&gt;----------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;causes the above error to occur. In this if either of the schema name is null, only the table names are compared and hence the error for the above statement.&lt;/p&gt;

&lt;p&gt;Should the equals method implementation be changed to take of this?&lt;br/&gt;
  or&lt;br/&gt;
Should we set the tables that have null schemas to the current schema or something along these lines?&lt;/p&gt;


</comment>
                            <comment id="60888" author="djd" created="Wed, 16 Mar 2005 06:55:44 +0000"  >&lt;p&gt;Applied patch from Shreyas.&lt;/p&gt;

&lt;p&gt;Sending        java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java&lt;br/&gt;
Sending        java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/dml162.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/orderby.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/master/select.out&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/tests/lang/select.sql&lt;br/&gt;
Sending        java/testing/org/apache/derbyTesting/functionTests/tests/nist/dml162.sql&lt;br/&gt;
Transmitting file data .......&lt;br/&gt;
Committed revision 157591.&lt;/p&gt;</comment>
                            <comment id="66239" author="shreyas" created="Wed, 25 May 2005 16:51:38 +0100"  >&lt;p&gt;Fixed , as the earlier comment says&lt;/p&gt;</comment>
                            <comment id="66248" author="shreyas" created="Wed, 25 May 2005 17:56:21 +0100"  >&lt;p&gt;Patch submitted&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Jan 2005 21:21:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy15tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>