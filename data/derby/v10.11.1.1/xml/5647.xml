<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:29:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5647/DERBY-5647.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5647] NATIVE warns about password expiry for DBO</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5647</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The DBO&apos;s password cannot expire. Still, NATIVE warns that the password is about to expire.&lt;/p&gt;

&lt;p&gt;ij&amp;gt; connect &apos;jdbc:derby:authdb;create=true;user=admin&apos;;&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_set_database_property(&apos;derby.authentication.native.passwordLifetimeMillis&apos;, &apos;100&apos;);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_create_user(&apos;ADMIN&apos;, &apos;%*$&apos;);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_set_database_property(&apos;derby.authentication.provider&apos;, &apos;NATIVE::LOCAL&apos;);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:authdb;shutdown=true&apos;;&lt;br/&gt;
ERROR 08006: Database &apos;authdb&apos; shutdown.&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:authdb;user=admin;password=%*$&apos;;&lt;br/&gt;
WARNING 01J15: Your password will expire in 0 day(s). Please use the SYSCS_UTIL.SYSCS_MODIFY_PASSWORD  procedure to change your password.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546097">DERBY-5647</key>
            <summary>NATIVE warns about password expiry for DBO</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                            <label>derby_backport_reject_10_8</label>
                    </labels>
                <created>Mon, 12 Mar 2012 14:23:06 +0000</created>
                <updated>Fri, 5 Jul 2013 13:42:01 +0100</updated>
                            <resolved>Tue, 13 Mar 2012 17:29:24 +0000</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13227589" author="rhillegas" created="Mon, 12 Mar 2012 15:07:15 +0000"  >&lt;p&gt;Thanks for buddy-testing NATIVE authentication, Knut.&lt;/p&gt;

&lt;p&gt;This behavior is deliberate although I can see that it is confusing. We want to encourage the DBO to change her password regularly--probably her password is the most important one in the database. However, we don&apos;t want to actually lock out the DBO if she goes on vacation and her password expires while she&apos;s on the beach. That would orphan the application. I can think of several approaches to this issue:&lt;/p&gt;

&lt;p&gt;1) Change the error message so that it indicates that the DBO&apos;s password won&apos;t actually expire. Something like:&lt;/p&gt;

&lt;p&gt;Your password will expire in 0 day(s). Please use the SYSCS_UTIL.SYSCS_MODIFY_PASSWORD procedure to change your password. Note that if you are the database owner, your password will still be valid after the expiration date, but you are urged to update your password. &lt;/p&gt;

&lt;p&gt;2) Produce a different error message if the user is the DBO:&lt;/p&gt;

&lt;p&gt;Your password will become stale in 0 day(s). You should update your password soon in order to protect the database. Please use the SYSCS_UTIL.SYSCS_MODIFY_PASSWORD procedure to change your password.&lt;/p&gt;

&lt;p&gt;3) Abandon the goal of preventing the DBO from locking herself out. Let the DBO&apos;s password truly expire and therefore let the database become truly unusable.&lt;/p&gt;

&lt;p&gt;What are your thoughts?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Rick&lt;/p&gt;
</comment>
                            <comment id="13227605" author="knutanders" created="Mon, 12 Mar 2012 15:25:48 +0000"  >&lt;p&gt;I think I&apos;d prefer some form of option (2). Probably no need to have &quot;in X day(s)&quot; in the message, as there is nothing extraordinary that will happen on that exact day. &quot;Your password has become stale. You should update your password soon in order to...&quot;&lt;/p&gt;</comment>
                            <comment id="13227804" author="kristwaa" created="Mon, 12 Mar 2012 19:27:21 +0000"  >&lt;p&gt;Hi Rick,&lt;/p&gt;

&lt;p&gt;I find option (3) unacceptable - I&apos;d be very unhappy if I found myself, as the DBO, to be locked out from the database without any way to reset/re-enable my account. A reset mechanism is propably riddled with security issues itself and not suitable in this context.&lt;/p&gt;

&lt;p&gt;Option (1) seems a little awkward for the non-DBO users, since much of the information in the message is irrelevant for them.&lt;/p&gt;

&lt;p&gt;I agree with Knut Anders, and find option (2) the most attractive.&lt;br/&gt;
Have you considered writing a message to derby.log in addition to the SQL warning? This could increase the level of encouragment for changing the password, but we obviously don&apos;t want to &quot;spam&quot; the log either.&lt;/p&gt;</comment>
                            <comment id="13228387" author="rhillegas" created="Tue, 13 Mar 2012 13:43:00 +0000"  >&lt;p&gt;Attaching derby-5647-01-aa-staleDBOpassword.diff. This patch adds a new warning message for the expiration of the DBO&apos;s password, as Knut and Kristian advised. Committed at subversion revision 1300120.&lt;/p&gt;

&lt;p&gt;I&apos;m not clear on whether we should write password expiration warnings to derby.log. As Kristian notes, this could just turn into spam. In addition, I would feel more comfortable about writing this kind of information to a security audit log rather than to the general diagnostic log (and we don&apos;t have a separate security audit log yet).&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java&lt;br/&gt;
M       java/engine/org/apache/derby/loc/messages.xml&lt;br/&gt;
M       java/shared/org/apache/derby/shared/common/reference/SQLState.java&lt;br/&gt;
M       java/testing/org/apache/derbyTesting/functionTests/tests/lang/NativeAuthenticationServiceTest.java&lt;/p&gt;</comment>
                            <comment id="13228394" author="knutanders" created="Tue, 13 Mar 2012 13:53:11 +0000"  >&lt;p&gt;Thanks, Rick. The patch looks good to me. Nit: There are two blanks after SYSCS_UTIL.SYSCS_MODIFY_PASSWORD in the new message.&lt;/p&gt;</comment>
                            <comment id="13228411" author="rhillegas" created="Tue, 13 Mar 2012 14:40:52 +0000"  >&lt;p&gt;Thanks for the quick review, Knut. The extra blank also appears in the pre-existing PASSWORD_EXPIRING message. I&apos;m changing both messages as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5648&quot; title=&quot;Unclear password expiry warning when using separate credentials db&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5648&quot;&gt;&lt;del&gt;DERBY-5648&lt;/del&gt;&lt;/a&gt; and I will remove the blanks then. Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12328052">DERBY-866</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12518185" name="derby-5647-01-aa-staleDBOpassword.diff" size="3748" author="rhillegas" created="Tue, 13 Mar 2012 13:43:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Mar 2012 15:07:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231255</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0anz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>