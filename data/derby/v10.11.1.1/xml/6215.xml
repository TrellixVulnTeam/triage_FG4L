<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:11:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6215/DERBY-6215.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6215] derby.log grows enormously during StressMultiTest</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6215</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When running suites.All with sane jars, I&apos;ve seen derby.log grow very big (over 4GB) during StressMultiTest. I don&apos;t see this when StressMultiTest is run separately, only when it runs as part of suites.All.&lt;/p&gt;

&lt;p&gt;What takes the most space in derby.log is debug output like this&lt;/p&gt;

&lt;p&gt;DEBUG DaemonTrace OUTPUT: Next urgent assignment : org.apache.derby.impl.services.daemon.ServiceRecord@d1294d&lt;br/&gt;
DEBUG DaemonTrace OUTPUT: servicing org.apache.derby.impl.services.daemon.ServiceRecord@d1294d&lt;br/&gt;
DEBUG DaemonTrace OUTPUT: done org.apache.derby.impl.services.daemon.ServiceRecord@d1294d&lt;br/&gt;
DEBUG DaemonTrace OUTPUT: come back from yield&lt;/p&gt;

&lt;p&gt;repeated over and over.&lt;/p&gt;

&lt;p&gt;I suspect there&apos;s a test that sets the DaemonTrace debug flag, and that the flag for some reason doesn&apos;t get reset. I&apos;ve only found one test that sets it: ClobReclamationTest. It uses a SystemPropertyTestSetup ensure the derby.debug.true property is reset and the engine rebooted, but I&apos;m not sure rebooting the engine will reset the state of the SanityManager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12646601">DERBY-6215</key>
            <summary>derby.log grows enormously during StressMultiTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 May 2013 12:10:26 +0100</created>
                <updated>Wed, 16 Apr 2014 03:41:10 +0100</updated>
                            <resolved>Fri, 10 May 2013 10:33:00 +0100</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.2.2</fixVersion>
                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13651953" author="knutanders" created="Wed, 8 May 2013 15:54:28 +0100"  >&lt;p&gt;Other JUnit tests that set a debug flag in the SanityManager seem to use SanityManager.DEBUG_SET() and SanityManager.DEBUG_CLEAR() instead of the derby.debug.true property.&lt;/p&gt;

&lt;p&gt;The attached patch makes ClobReclamationTest use that approach. I monitored the disk space used while running suites.All with the patch, and now derby.log didn&apos;t grow much bigger than 60MB, which is much better than 4GB. I also verified that ClobReclamationTest still prints DaemonTrace debug trace to derby.log after the change.&lt;/p&gt;</comment>
                            <comment id="13653665" author="knutanders" created="Fri, 10 May 2013 10:24:12 +0100"  >&lt;p&gt;Committed revision 1480947.&lt;/p&gt;

&lt;p&gt;I&apos;m planning to backport this fix to 10.8, as the nightly tests have sometimes run out of disk space lately, and I think this issue might be the root cause.&lt;/p&gt;</comment>
                            <comment id="13653668" author="knutanders" created="Fri, 10 May 2013 10:33:00 +0100"  >&lt;p&gt;Committed to 10.10 with revision 1480958.&lt;br/&gt;
Committed to 10.9 with revision 1480959.&lt;br/&gt;
Committed to 10.8 with revision 1480960.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12582300" name="derby-6215-01-a.diff" size="2715" author="knutanders" created="Wed, 8 May 2013 15:54:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hze993:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327303</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>