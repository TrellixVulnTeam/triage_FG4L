<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:29:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4278/DERBY-4278.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4278] Batch inserts with Clobs fails with the embedded driver</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4278</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Batch inserts with Clobs fail because Derby is unable to determine if it should write the Clob stream header formats using the old 10.4 style format or the new 10.5 format.&lt;br/&gt;
More specifically, the access mode (soft upgrade or not) hasn&apos;t been set specifically by Derby before the stream header has to be generated, and there isn&apos;t enough context to determine the mode at generation time.&lt;/p&gt;

&lt;p&gt;Bug was reported on derby-user: &lt;a href=&quot;http://www.nabble.com/Hibernate-%2B-Derby---Unable-to-determine-stream-header-for-hibernate-type-%27text%27-td24099674.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.nabble.com/Hibernate-%2B-Derby---Unable-to-determine-stream-header-for-hibernate-type-%27text%27-td24099674.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The bug was reported for Derby used with Hibernate. Possible workarounds are to use the client driver or to avoid using batched inserts with Clobs (i.e. don&apos;t use batched inserts, which may degrade performance, or use a different data type).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12428359">DERBY-4278</key>
            <summary>Batch inserts with Clobs fails with the embedded driver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jun 2009 14:26:20 +0100</created>
                <updated>Mon, 20 Jul 2009 09:26:13 +0100</updated>
                            <resolved>Mon, 6 Jul 2009 08:55:21 +0100</resolved>
                                    <version>10.5.1.1</version>
                    <version>10.6.1.0</version>
                                    <fixVersion>10.5.2.0</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12721786" author="kristwaa" created="Fri, 19 Jun 2009 14:56:21 +0100"  >&lt;p&gt;Attached regression tests for the bug as patch 1a.&lt;br/&gt;
The patch must be committed together with the fix.&lt;/p&gt;</comment>
                            <comment id="12721807" author="kristwaa" created="Fri, 19 Jun 2009 16:06:35 +0100"  >&lt;p&gt;Attaching fix for the bug as patch 2a.&lt;br/&gt;
The problem is solved by explicitly telling the SQLCLob data object whether the database being accessed is accessed in soft upgrade mode or not. This information is readily available in EmbedPreparedStatement. I chose to determine the mode lazily, so the method (isSoftUpgraded) should be used instead of referencing the variable directly.&lt;/p&gt;

&lt;p&gt;Running regression tests.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="12722261" author="kristwaa" created="Sat, 20 Jun 2009 21:31:35 +0100"  >&lt;p&gt;Regression tests passed.&lt;/p&gt;</comment>
                            <comment id="12726022" author="kristwaa" created="Wed, 1 Jul 2009 12:41:30 +0100"  >&lt;p&gt;I&apos;m marking this issue as Urgent as it seems to be triggered with default configuration using Derby with Hibernate (and Clobs in the table of course). It is also a regression, introduced through the new Clob header format code.&lt;br/&gt;
Finally, the bug was reported by a user.&lt;/p&gt;</comment>
                            <comment id="12726030" author="kristwaa" created="Wed, 1 Jul 2009 13:21:23 +0100"  >&lt;p&gt;User reported that his application ran successfully with the fix applied (see the thread from the issue description).&lt;/p&gt;

&lt;p&gt;Committed patches 1a and 2a to trunk with revision 790135.&lt;br/&gt;
Awaiting test results before back-porting to 10.5.&lt;/p&gt;</comment>
                            <comment id="12727422" author="kristwaa" created="Mon, 6 Jul 2009 08:55:21 +0100"  >&lt;p&gt;Merged fix (patches 1a and 2a) to 10.5 with revision 791403.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12411225" name="derby-4278-1a-regression_test.diff" size="4041" author="kristwaa" created="Fri, 19 Jun 2009 14:56:21 +0100"/>
                            <attachment id="12411228" name="derby-4278-2a-fix.diff" size="3387" author="kristwaa" created="Fri, 19 Jun 2009 16:06:34 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0rzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10051"><![CDATA[Urgent]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>