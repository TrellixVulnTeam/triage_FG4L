<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:22:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6400/DERBY-6400.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6400] harness.NetServer method waitFor() is not reflecting timeout values</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6400</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;On a slow machine, derbynetclientmats was seen to fail (with no test pass, nor fail) with the following error:&lt;/p&gt;

&lt;p&gt;org.apache.derby.drda.NetworkServerControl start &lt;br/&gt;
Attempt to shutdown framework: DerbyNetClient&lt;br/&gt;
Server Process did not complete in time. Destroying...&lt;br/&gt;
Server Process did not complete in time. Destroying...&lt;br/&gt;
Exception in thread &quot;main&quot; java.io.IOException: Interrupted system call&lt;br/&gt;
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)&lt;br/&gt;
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)&lt;br/&gt;
	at java.io.BufferedInputStream.read(BufferedInputStream.java:334)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.harness.BackgroundStreamSaver.run(BackgroundStreamSaver.java:51)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:853)&lt;/p&gt;

&lt;p&gt;It seems to me that the problem is here that in functionTests.harness.NetServer the waitFor() method has a hard value of 60 in it. Instead, this value should be configurable.&lt;br/&gt;
In functionTests.harness.RunTest the waitFor() method uses &lt;br/&gt;
				TimedProcess tp = new TimedProcess(pr);&lt;br/&gt;
				tp.waitFor(timeout*60);&lt;br/&gt;
It seems NetServer should also be able to check on the timeout value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12676924">DERBY-6400</key>
            <summary>harness.NetServer method waitFor() is not reflecting timeout values</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Oct 2013 18:28:19 +0000</created>
                <updated>Wed, 22 Oct 2014 20:17:47 +0100</updated>
                            <resolved>Tue, 12 Nov 2013 21:44:44 +0000</resolved>
                                                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13811047" author="myrna" created="Fri, 1 Nov 2013 05:11:40 +0000"  >&lt;p&gt;Attaching a patch which looks for the timeout property in the jvmflags in RunTest, and if set, passes it on to NetServer.&lt;/p&gt;</comment>
                            <comment id="13813043" author="jira-bot" created="Mon, 4 Nov 2013 17:44:50 +0000"  >&lt;p&gt;Commit 1538692 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1538692&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1538692&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6400&quot; title=&quot;harness.NetServer method waitFor() is not reflecting timeout values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6400&quot;&gt;&lt;del&gt;DERBY-6400&lt;/del&gt;&lt;/a&gt;; harness.NetServer method waitFor() is not reflecting timeout values&lt;br/&gt;
   adding code to pass on a timeout value when specified on in the commandline&lt;/p&gt;</comment>
                            <comment id="13814057" author="jira-bot" created="Tue, 5 Nov 2013 17:19:49 +0000"  >&lt;p&gt;Commit 1539068 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1539068&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1539068&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6400&quot; title=&quot;harness.NetServer method waitFor() is not reflecting timeout values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6400&quot;&gt;&lt;del&gt;DERBY-6400&lt;/del&gt;&lt;/a&gt;; harness.NetServer method waitFor() is not reflecting timeout values&lt;br/&gt;
   merge of revision 1538692 from trunk.&lt;/p&gt;</comment>
                            <comment id="13815266" author="myrna" created="Wed, 6 Nov 2013 20:34:25 +0000"  >&lt;p&gt;My check-in to 10.10 caused a build failure in my nightly build/testing; because it&apos;s using Str.isEmpty(), and that&apos;s a 1.6 method.&lt;br/&gt;
As a result, RunTest did not build, and so derbyall didn&apos;t get going, and in addition, it resulted in the following 3 failures:&lt;br/&gt;
1) testMissingCollatorSupport(org.apache.derbyTesting.functionTests.tests.lang.CollationTest)java.lang.NoClassDefFoundError: org.apache.derbyTesting.functionTests.harness.RunTest&lt;br/&gt;
at org.apache.derbyTesting.functionTests.util.TestUtil.getFramework(TestUtil.java:185)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.util.TestUtil.getConnection(TestUtil.java:808)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.lang.CollationTest.testMissingCollatorSupport(CollationTest.java:2047)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:442)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:459)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.derbyTesting.functionTests.harness.RunTest&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:499)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:650)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:616)&lt;br/&gt;
	... 27 more&lt;br/&gt;
2) maxfieldsize(org.apache.derbyTesting.functionTests.tests.jdbcapi.JDBCHarnessJavaTest)java.lang.reflect.InvocationTargetException&lt;br/&gt;
...&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: org.apache.derbyTesting.functionTests.harness.RunTest&lt;br/&gt;
...&lt;br/&gt;
3) maxfieldsize(org.apache.derbyTesting.functionTests.tests.jdbcapi.JDBCHarnessJavaTest)java.lang.reflect.InvocationTargetException&lt;br/&gt;
...&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: org.apache.derbyTesting.functionTests.harness.RunTest&lt;br/&gt;
..&lt;/p&gt;

&lt;p&gt;I didn&apos;t realize the JDBCHarnessJavaTest and CollationTest actually use RunTest.&lt;/p&gt;

&lt;p&gt;But I&apos;ll fix this build failure.&lt;/p&gt;</comment>
                            <comment id="13815278" author="jira-bot" created="Wed, 6 Nov 2013 20:52:09 +0000"  >&lt;p&gt;Commit 1539458 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1539458&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1539458&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6400&quot; title=&quot;harness.NetServer method waitFor() is not reflecting timeout values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6400&quot;&gt;&lt;del&gt;DERBY-6400&lt;/del&gt;&lt;/a&gt;; harness.NetServer method waitFor() is not reflecting timeout values&lt;br/&gt;
  removing call to String.isEmpty()&lt;/p&gt;</comment>
                            <comment id="14180351" author="myrna" created="Wed, 22 Oct 2014 20:17:47 +0100"  >&lt;p&gt;close all resolved issues with myself as reporter and assignee.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12611552" name="DERBY-6400.diff" size="2710" author="myrna" created="Fri, 1 Nov 2013 05:11:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Nov 2013 17:44:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzj9o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>