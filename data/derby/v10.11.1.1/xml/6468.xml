<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:29:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6468/DERBY-6468.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6468] Add a version number to derbyTesting.jar</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6468</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The product jars carry version stamps in property files stored in the org/apache/derby/info directory. It would be good for the test jar to carry a version stamp too. This can be useful in verifying that the tests are at the right revision level tor the product being tested.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12693407">DERBY-6468</key>
            <summary>Add a version number to derbyTesting.jar</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="rhillegas">Rick Hillegas</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Feb 2014 18:39:12 +0000</created>
                <updated>Thu, 22 Jan 2015 23:58:47 +0000</updated>
                            <resolved>Wed, 26 Mar 2014 22:21:45 +0000</resolved>
                                                    <fixVersion>10.10.2.0</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13946748" author="myrna" created="Tue, 25 Mar 2014 16:24:40 +0000"  >&lt;p&gt;Attaching a patch which tries to do this.&lt;br/&gt;
It also modifies sysinfo, so we can see the change.&lt;/p&gt;

&lt;p&gt;When the package org.apache.derbyTesting (actually, the class org.apache.derbyTesting.junit.BaseTestCase) is not on the classpath, it prints nothing:&lt;/p&gt;

&lt;p&gt;:&lt;br/&gt;
:&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_CN&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_TW&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
------------------------------------------------------&lt;/p&gt;

&lt;p&gt;When it has the package in the classes directory, it does this:&lt;br/&gt;
:&lt;br/&gt;
:&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_CN&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_TW&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
org.apache.derbyTesting.*:&lt;br/&gt;
         &lt;span class=&quot;error&quot;&gt;&amp;#91;C:\derby\trunk\classes&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
------------------------------------------------------&lt;/p&gt;

&lt;p&gt;When it has the package in derbyTesting.jar it looks like this:&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_CN&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
Found support for locale: &lt;span class=&quot;error&quot;&gt;&amp;#91;zh_TW&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
org.apache.derbyTesting.*:&lt;br/&gt;
         &lt;span class=&quot;error&quot;&gt;&amp;#91;C:\derby\trunk\jars\sane\derbyTesting.jar&amp;#93;&lt;/span&gt;&lt;br/&gt;
         version: 10.11.0.0 alpha - (1579303M)&lt;br/&gt;
------------------------------------------------------&lt;/p&gt;


&lt;p&gt;Alas, there is still something wrong, because:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you only see this after the buildjars target has been called&lt;/li&gt;
	&lt;li&gt;it doesn&apos;t work if you only have jars in the classpath (haha. either need to add a manifest file to derbyTesting.jar or add the properties file in, maybe).&lt;br/&gt;
And I still need to check what this does with the sysinfo test.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So posting to see if this is what we&apos;re after, not ready for commit...&lt;/p&gt;</comment>
                            <comment id="13946805" author="rhillegas" created="Tue, 25 Mar 2014 17:12:04 +0000"  >&lt;p&gt;Thanks, Myrna. Looks like you&apos;ve added a new file to derbyTesting.jar to hold the version number of the testing classes. That&apos;s exactly what I was hoping to see. Once that&apos;s checked in, we should be able to get the unit tests to report the contents of that file and verify that it agrees with the version stamps in the product jars. Thanks!&lt;/p&gt;</comment>
                            <comment id="13947128" author="myrna" created="Tue, 25 Mar 2014 20:48:11 +0000"  >&lt;p&gt;Attaching a second version of the patch - this cleans up a couple of changes that I do not remember making (one additional import, one modified comment) in the sysinfo Main class, and further modifies the build.xml to move the new org/apache/derby/info/tsting.properties file into derbyTesting.jar, and also generates this file when we build the testing classes.&lt;/p&gt;

&lt;p&gt;I ran all sysinfo related tests separately, and they passed both with classes and (sane) jars, except for SysinfoAPITest, which failed with jars, but that&apos;s a known problem (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2343&quot; title=&quot;sysinfo API only returns correct information for the first jar file on the classpath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2343&quot;&gt;DERBY-2343&lt;/a&gt;), which is why that test doesn&apos;t run currently.&lt;br/&gt;
I think having another version number file in the derbyTesting.jar may make that bug worse, at least I got a different result from the test compared to how it runs with jars in an environment that doesn&apos;t have my changes, but I think that&apos;s something to be figured out in relation to that bug...&lt;/p&gt;

&lt;p&gt;I&apos;ll run full tests now to be on the safe side, then commit if ok.&lt;/p&gt;</comment>
                            <comment id="13947997" author="jira-bot" created="Wed, 26 Mar 2014 15:27:11 +0000"  >&lt;p&gt;Commit 1581885 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1581885&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1581885&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6468&quot; title=&quot;Add a version number to derbyTesting.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6468&quot;&gt;&lt;del&gt;DERBY-6468&lt;/del&gt;&lt;/a&gt;; Add a version number to derbyTesting.jar&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a new properties file, org/apache/derby/info/tsting.properties, is generated with the required info&lt;/li&gt;
	&lt;li&gt;this file is inserted in to derbyTesting.jar&lt;/li&gt;
	&lt;li&gt;sysinfo reflects the location of the org.apache.derbyTesting package if an indicative class is found in the classpath&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13948021" author="myrna" created="Wed, 26 Mar 2014 15:50:43 +0000"  >&lt;p&gt;My test runs (on windows, with ibm&apos;s 1.6 and Oracle jdk 1.8) showed multiple test failures, but I think they were all related to reported problems; issues with AutoLoadTest spawning, issues with the new lucene tests, and issues with triggerGeneralTests. So I committed patch _diff2.&lt;/p&gt;

&lt;p&gt;I want to backport this to 10.10 before cutting the release, assuming another round of tests pass, even though it is really an improvement, but it will help identifying issues with running tests with jars from different versions.&lt;/p&gt;</comment>
                            <comment id="13948553" author="jira-bot" created="Wed, 26 Mar 2014 22:15:10 +0000"  >&lt;p&gt;Commit 1582087 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=myrna&quot; class=&quot;user-hover&quot; rel=&quot;myrna&quot;&gt;Myrna van Lunteren&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1582087&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1582087&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6468&quot; title=&quot;Add a version number to derbyTesting.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6468&quot;&gt;&lt;del&gt;DERBY-6468&lt;/del&gt;&lt;/a&gt;; Add a version number to derbyTesting.jar&lt;br/&gt;
   backport of revision 1581885 from trunk to 10.10&lt;/p&gt;</comment>
                            <comment id="13948562" author="myrna" created="Wed, 26 Mar 2014 22:21:07 +0000"  >&lt;p&gt;I backported the change to 10.10; the merge was clean, but I needed to remove a few jdk 1.5 or higher constructs before it would build.&lt;br/&gt;
Tests ran cleanly.&lt;/p&gt;</comment>
                            <comment id="14284850" author="myrna" created="Wed, 21 Jan 2015 00:23:44 +0000"  >&lt;p&gt;bulk change to close all issues resolved but not closed and not changed since June 1, 2014.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12477934">DERBY-4862</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12704130">DERBY-6532</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12636723" name="DERBY-6468_1.diff" size="8252" author="myrna" created="Tue, 25 Mar 2014 16:24:40 +0000"/>
                            <attachment id="12636774" name="DERBY-6468_2.diff" size="8654" author="myrna" created="Tue, 25 Mar 2014 20:48:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Mar 2014 16:24:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzlylz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>