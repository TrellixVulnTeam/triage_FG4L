<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:35:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2755/DERBY-2755.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2755] logChecksumSetup fails with  AssertFailure when 10.2 test is run against 10.3 server </title>
                <link>https://issues.apache.org/jira/browse/DERBY-2755</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Here is the assertion running 10.1.2.6 derbytesting.jar store/logChecksumSetup against 10.3 server. Several other tests failed because of the setup failure.&lt;/p&gt;


&lt;p&gt;Assertion failure&lt;br/&gt;
Exception in thread &quot;main&quot; java.sql.SQLException: Java exception: &apos;ASSERT FAILED csf:C:\test\derbyall\storeall\storerecovery\storerecovery\wombat: org.apache.derby.shared.common.sanity.AssertFailure&apos;.&lt;br/&gt;
at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)&lt;br/&gt;
at org.apache.derby.impl.jdbc.Util.javaException(Util.java:245)&lt;br/&gt;
at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)&lt;br/&gt;
at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)&lt;br/&gt;
at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:1549)&lt;br/&gt;
at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:373)&lt;br/&gt;
at org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:80)&lt;br/&gt;
at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:209)&lt;br/&gt;
at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:117)&lt;br/&gt;
at java.sql.DriverManager.getConnection(DriverManager.java:562)&lt;br/&gt;
at java.sql.DriverManager.getConnection(DriverManager.java:155)&lt;br/&gt;
at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:505)&lt;br/&gt;
at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:585)&lt;br/&gt;
at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:566)&lt;br/&gt;
at org.apache.derby.tools.ij.startJBMS(ij.java:143)&lt;br/&gt;
at org.apache.derbyTesting.functionTests.tests.store.LogChecksumSetup.main(Unknown Source)&lt;br/&gt;
Caused by: org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED csf:C:\test\derbyall\storeall\storerecovery\storerecovery\wombat&lt;br/&gt;
at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)&lt;br/&gt;
at org.apache.derby.impl.services.monitor.StorageFactoryService$10.run(StorageFactoryService.java:739)&lt;br/&gt;
at java.security.AccessController.doPrivileged(AccessController.java:242)&lt;br/&gt;
at org.apache.derby.impl.services.monitor.StorageFactoryService.removeServiceRoot(StorageFactoryService.java:729)&lt;br/&gt;
at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1865)&lt;br/&gt;
at org.apache.derby.impl.services.monitor.BaseMonitor.createPersistentService(BaseMonitor.java:1017)&lt;br/&gt;
at org.apache.derby.iapi.services.monitor.Monitor.createPersistentService(Monitor.java:588)&lt;br/&gt;
at org.apache.derby.impl.jdbc.EmbedConnection.createDatabase(EmbedConnection.java:1773)&lt;br/&gt;
at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:281)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12370856">DERBY-2755</key>
            <summary>logChecksumSetup fails with  AssertFailure when 10.2 test is run against 10.3 server </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2007 17:49:37 +0100</created>
                <updated>Fri, 17 Aug 2007 23:35:49 +0100</updated>
                            <resolved>Fri, 6 Jul 2007 01:04:06 +0100</resolved>
                                    <version>10.3.1.4</version>
                                                    <component>Store</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12502069" author="kmarsden" created="Wed, 6 Jun 2007 21:03:16 +0100"  >&lt;p&gt;It would be good if someone familiar with store could take a closer look at this one and figure out if it should be a blocker for 10.3.&lt;/p&gt;
</comment>
                            <comment id="12502089" author="mikem" created="Wed, 6 Jun 2007 21:47:41 +0100"  >&lt;p&gt;I haven&apos;t had time to set up my environment to reproduce this.  Is there a description exactly how to get my environment set up to &lt;br/&gt;
run 10.2 tests against  10.3.  Do I need to be running jars or can I do it in my normal classes environment?  Do I just copy  some&lt;br/&gt;
10.2 jar file and manipulate my path?&lt;/p&gt;

&lt;p&gt;This particular test uses some magic to test what it wants to test.  In the property file it sets up  the following module so that it&lt;br/&gt;
can by hand manipulate the log file to test checksum errors, not something we want to support for users:&lt;br/&gt;
derby.subSubProtocol.csf=org.apache.derbyTesting.functionTests.util.corruptio.CorruptDiskStorageFactory&lt;/p&gt;

&lt;p&gt;My guess is that something is going on with the way we do this in 10.2 vs. 10.3, but this is just a guess based on the limited&lt;br/&gt;
stack/error trace and the &quot;wierd&quot; thing that this test does.  The failure is happening right when we are doing the very first &lt;br/&gt;
connection for the create of this database so hardly anything special has happened yet other than this property.  &lt;/p&gt;

&lt;p&gt;Note the &quot;csf&quot; in the assert message string above is refering to the &quot;corrupt storage factory&quot;.  &lt;/p&gt;

&lt;p&gt;I looked a bit but couldn&apos;t tell from some diffs why the test  is not running.  I vaguely remember some discussion on the list about subSub protocols but don&apos;t remember for sure.    I am planning on checking in an improvement to the assert message so we can at least see what the 2 strings it is comparing are.&lt;/p&gt;</comment>
                            <comment id="12502092" author="mikem" created="Wed, 6 Jun 2007 21:49:01 +0100"  >&lt;p&gt;checked in 544946 to print more info when this assert is hit.&lt;/p&gt;</comment>
                            <comment id="12502131" author="kmarsden" created="Wed, 6 Jun 2007 23:25:56 +0100"  >&lt;p&gt;Mike asked:&lt;br/&gt;
&amp;gt;. Is there a description exactly how to get my environment set up to&lt;br/&gt;
&amp;gt;run 10.2 tests against 10.3. Do I need to be running jars or can I do it in my normal classes environment? Do I just &amp;gt;copy some&lt;br/&gt;
&amp;gt;10.2 jar file and manipulate my path? &lt;/p&gt;

&lt;p&gt;I ran with jars and put the derbyTesting.jar from 10.2.1.6 in my classpath and all other jars from 10.3.   I think that it would probably work to use classes but put the derbyTesting.jar from 10.2 first, but I have not tried it.&lt;/p&gt;

&lt;p&gt;Tests are run as normal.&lt;/p&gt;</comment>
                            <comment id="12502586" author="myrna" created="Fri, 8 Jun 2007 01:45:34 +0100"  >&lt;p&gt;I did the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ran with 10.2.2.0 derbyTesting.jar -&amp;gt; same behavior&lt;/li&gt;
	&lt;li&gt;ran with a build including Mike&apos;s change to help debug.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The comment printed out by the debug line is:&lt;br/&gt;
Exception in thread &quot;main&quot; java.sql.SQLException: Java exception: &apos;ASSERT FAILED serviceName = csf:&amp;lt;mytestdirectory_snipped&amp;gt;\LogChecksumSetup\wombat;storageFactory.getCanonicalName() = &amp;lt;mytestdirectory_snipped&amp;gt;\LogChecksumSetup\wombat: org.apache.derby.shared.common.sanity.AssertFailure&apos;.&lt;/p&gt;
</comment>
                            <comment id="12504036" author="myrna" created="Wed, 13 Jun 2007 00:03:22 +0100"  >&lt;p&gt;Lowering the urgency - this looks like likely a test issue of some sort.&lt;/p&gt;</comment>
                            <comment id="12509677" author="myrna" created="Mon, 2 Jul 2007 22:13:29 +0100"  >&lt;p&gt;unsetting fix version&lt;/p&gt;</comment>
                            <comment id="12510531" author="kmarsden" created="Fri, 6 Jul 2007 01:04:06 +0100"  >&lt;p&gt;The consensus is that this is a test issue and won&apos;t be fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Jun 2007 20:47:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy1193:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>