<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:26:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1895/DERBY-1895.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1895] Convert jdbcapi/blobclob4BLOB.java to Junit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1895</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12351945">DERBY-1895</key>
            <summary>Convert jdbcapi/blobclob4BLOB.java to Junit</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12351772">DERBY-1888</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fernanda">Fernanda Pizzorno</assignee>
                                    <reporter username="fernanda">Fernanda Pizzorno</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Sep 2006 07:51:10 +0100</created>
                <updated>Fri, 25 Jul 2008 18:42:42 +0100</updated>
                            <resolved>Thu, 19 Oct 2006 13:16:50 +0100</resolved>
                                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12442009" author="fernanda" created="Fri, 13 Oct 2006 13:44:36 +0100"  >&lt;p&gt;The attached patch (derby-1895.diff) converts the test jdbcapi/blobclob4blob.java to junit. The attached html file (derby-1895.html) explains the changes done to the test.&lt;/p&gt;

&lt;p&gt;A summary of what it tested by this test can be found at: &lt;a href=&quot;http://wiki.apache.org/db-derby/BlobClob4BlobTestCoverage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/BlobClob4BlobTestCoverage&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Can someone please review the patch?&lt;/p&gt;</comment>
                            <comment id="12442521" author="knutanders" created="Mon, 16 Oct 2006 10:19:14 +0100"  >&lt;p&gt;Hi Fernanda. Thank you for rewriting the test! I had a quick look at your patch and the description of it. A couple of question/comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Some of the test cases (testSetClobToIntColumn, testSetClobToIntColumn, testSetClobToIntColumn) have comments saying &quot;need to run prepareCLOBMAIN first&quot;, but there is no such method.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I&apos;m not sure I understand what testClobFinalizer and testBlobFinalizer test. Is their only purpose to force the finalizers to run? If so, would it make sense to add System.runFinalization() after System.gc().&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The testPosition* cases use random start position and length. If these tests fail, it could be hard to reproduce because we don&apos;t know the actual values. Could the start position and length be part of the error message? (I saw the println() statements, but they only print the information when the verbose flag is true.)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;runPositionStringTest() has a workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1917&quot; title=&quot;Clob.position fails with Embedded driver and large Clobs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1917&quot;&gt;&lt;del&gt;DERBY-1917&lt;/del&gt;&lt;/a&gt;. When the test has been committed, a comment should be added to 1917 that the test should be cleaned up when it has been fixed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The suite() method adds each test case manually. I think it would be better to use the built-in JUnit functionality for adding all test* methods and only add those test cases that don&apos;t run under DerbyNet manually. That would make it easier to add more test cases later, and it would be more consistent with the other JUnit tests.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Minor nit: many calls to assertTrue(&quot;XXX&quot;, false) would be easier to read if written as fail(&quot;XXX&quot;).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I found many constructions similar to this:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+        try {&lt;br/&gt;
+            clob.length();&lt;br/&gt;
+            if (usingEmbedded()) &lt;/p&gt;
{
+                assertTrue(&quot;FAIL - should not be able to access large log &quot; +
+                        &quot;after commit&quot;, false);
+            }
&lt;p&gt;+        } catch (SQLException e) &lt;/p&gt;
{
+            checkException(BLOB_ACCESSED_AFTER_COMMIT, e);
+        }

&lt;p&gt;  If I understand these constructions correctly, they expect embedded to fail with a given SQLState, but the network client and JCC should succeed. But under DerbyNet and DerbyNetClient, these test cases will succeed both when the call succeeds and when the call fails with the given SQLState. Is this how it was intended?&lt;/p&gt;</comment>
                            <comment id="12443252" author="fernanda" created="Wed, 18 Oct 2006 13:44:15 +0100"  >&lt;p&gt;Knut Anders&apos; comments are addressed in the attached patch (derby-1895v2.diff). I have succesfully run org.apache.derbyTesting.functionTests.tests.jdbcapi._Suite with this patch. Can someone please review it?&lt;/p&gt;</comment>
                            <comment id="12443253" author="fernanda" created="Wed, 18 Oct 2006 13:48:41 +0100"  >&lt;p&gt;I am also not sure what testClobFinalizer and testBlobFinalizer test. I left them as they were because there was a note saying that they are included in the test run to exercise the code even though the didn&apos;t produce any output.&lt;/p&gt;

&lt;p&gt;Knut Anders wrote:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I&apos;m not sure I understand what testClobFinalizer and testBlobFinalizer test. Is their only purpose to force the finalizers to run? If so, would it make sense to add System.runFinalization() after System.gc().&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12443281" author="dyret" created="Wed, 18 Oct 2006 15:29:03 +0100"  >&lt;p&gt;I have run the test successfully, both as part of  jdbcapi._Suite and as part of suites.All. So unless the test(C|B)lobFinalizer are considered blockers, I think it would good to commit this patch.&lt;/p&gt;</comment>
                            <comment id="12443500" author="knutanders" created="Thu, 19 Oct 2006 13:16:49 +0100"  >&lt;p&gt;Thanks Fernanda. Committed revision 465601.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12342887" name="derby-1895.diff" size="412796" author="fernanda" created="Fri, 13 Oct 2006 13:44:36 +0100"/>
                            <attachment id="12342889" name="derby-1895.html" size="9120" author="fernanda" created="Fri, 13 Oct 2006 13:44:36 +0100"/>
                            <attachment id="12342888" name="derby-1895.stat" size="1273" author="fernanda" created="Fri, 13 Oct 2006 13:44:36 +0100"/>
                            <attachment id="12343167" name="derby-1895v2.diff" size="410883" author="fernanda" created="Wed, 18 Oct 2006 13:44:15 +0100"/>
                            <attachment id="12343168" name="derby-1895v2.stat" size="1273" author="fernanda" created="Wed, 18 Oct 2006 13:44:15 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Oct 2006 09:19:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ykv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>