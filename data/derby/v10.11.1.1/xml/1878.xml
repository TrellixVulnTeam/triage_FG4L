<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:34:42 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1878/DERBY-1878.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1878] Improve error handling in network server tests</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1878</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Some network server tests (specially those that spawn new process) have bad error handling that results in the test hanging forever if it fails, thus holding up execution of a nightly test run.    The tests must timeout instead of hanging forever if it fails. &lt;/p&gt;

&lt;p&gt;Please see &lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-1694#action_12435129&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-1694#action_12435129&lt;/a&gt;  for some possible improvements. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12350524">DERBY-1878</key>
            <summary>Improve error handling in network server tests</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="skambha">Sunitha Kambhampati</assignee>
                                    <reporter username="skambha">Sunitha Kambhampati</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Sep 2006 18:05:29 +0100</created>
                <updated>Wed, 13 Dec 2006 20:54:27 +0000</updated>
                            <resolved>Wed, 13 Dec 2006 20:54:19 +0000</resolved>
                                    <version>10.2.1.6</version>
                    <version>10.3.1.4</version>
                                    <fixVersion>10.2.2.0</fixVersion>
                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12437882" author="skambha" created="Tue, 26 Sep 2006 17:40:11 +0100"  >&lt;p&gt;I am attaching the patch (derby1878.diff.txt) to improve some error handling in some of the network server tests. &lt;/p&gt;

&lt;p&gt;1.The execCmdDumpResults used by the five tests timeslice.java,maxthreads.java,testij.java,runtimeinfo.java,sysinfo.java suffer from the same problems that was fixed for testProperties.java namely &lt;br/&gt;
	&amp;#8211; the outputstream for the sub process&apos;s is not flushed out &lt;br/&gt;
	&amp;#8211; there is no timeout handling for the ProcessStreamResult&lt;br/&gt;
2.Eliminate duplication of code in these 5 tests for execCmdDumpResults(String[] args) method.  The execCmdDumpResults method basically exec&apos;s a new process and then waits for the process to dump the results. A new utility class - ExecProcUtil is added with execCmdDumpResults that is generalized to take the necessary input from the tests as well as fixes the issues mentioned in #1.   The OutputStream is flushed out by calling bos.flush and System.out.flush and the timeout is added for ProcessStreamResult. &lt;br/&gt;
3.Make use of the TimedProcess to kill process if process does not exit within the timeout period.&lt;br/&gt;
4.TestConnection.java test has some variation of the execCmdDumpResults and it also adds some testcases into this method. Hence this method in this test is left as is and timeout handling is added. &lt;br/&gt;
5.testij.out has been updated. The previous master file was eating away the last line that was written to System.out, but now that the process&apos;s streams are flushed properly, the last line in testij.out test which prints out &apos;End test&apos; &lt;br/&gt;
is also seen in the output file. &lt;/p&gt;

&lt;p&gt;Also noticed that these tests - like timeslice.java, maxthreads.java all seem to set the properties for the server and then check if the property is set. The functionality of the server when these properties is set is not being tested. It will be good to add tests that test that the functionality itself is working as expected or not. Please note, recently connecting to server with timeslice options discovered some issues with server (see &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1856&quot; title=&quot;Multiple communication failures when starting server with derby.drda.timeSlice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1856&quot;&gt;&lt;del&gt;DERBY-1856&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This is a test only change for network server. derbyall on windows/jdk142 ran ok with no failures. &lt;/p&gt;

&lt;p&gt;Can someone please review this patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="12438174" author="mikem" created="Wed, 27 Sep 2006 18:08:25 +0100"  >&lt;p&gt;I committed this test only patch into the trunk.  I ran full set of succesful tests against xp/ibm142 jdk.&lt;/p&gt;

&lt;p&gt;m3_ibm142:33&amp;gt;svn commit&lt;/p&gt;

&lt;p&gt;Sending        java\testing\org\apache\derbyTesting\functionTests\master\DerbyNe&lt;br/&gt;
tClient\testij.out&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\master\testij.&lt;br/&gt;
out&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\derbynet&lt;br/&gt;
\maxthreads.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\derbynet&lt;br/&gt;
\runtimeinfo.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\derbynet&lt;br/&gt;
\sysinfo.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\derbynet&lt;br/&gt;
\testconnection.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\derbynet&lt;br/&gt;
\testij.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\derbynet&lt;br/&gt;
\timeslice.java&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\util\ExecProcU&lt;br/&gt;
til.java&lt;br/&gt;
Transmitting file data .........&lt;br/&gt;
Committed revision 450508.&lt;/p&gt;</comment>
                            <comment id="12438461" author="skambha" created="Thu, 28 Sep 2006 16:20:57 +0100"  >&lt;p&gt;This has been ported to 10.2.  Thanks Mike. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12347965">DERBY-1694</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12341732" name="derby1878.diff.txt" size="25647" author="skambha" created="Tue, 26 Sep 2006 17:40:11 +0100"/>
                            <attachment id="12341733" name="derby1878.stat.txt" size="788" author="skambha" created="Tue, 26 Sep 2006 17:40:11 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Sep 2006 17:08:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30171</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy13sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40264</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>