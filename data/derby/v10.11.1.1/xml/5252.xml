<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:21:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5252/DERBY-5252.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5252] make GrantRevokeTest pass in non-English locale</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5252</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;D:\derby\test&amp;gt;java junit.textui.TestRunner org.apache.derbyTesting.functionTests&lt;br/&gt;
.tests.lang.GrantRevokeTest&lt;br/&gt;
.......................F.F..F.F.........&lt;br/&gt;
Time: 10.563&lt;br/&gt;
There were 4 failures:&lt;br/&gt;
1) testGrantOnNonexistantFunction(org.apache.derbyTesting.functionTests.tests.la&lt;br/&gt;
ng.GrantRevokeTest)junit.framework.ComparisonFailure: null expected:&amp;lt;&apos;S1.NOSUCH&apos;&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;is not recognized as a function.&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;&apos;S1.NOSUCH&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;&#26410;&#34987;&#35782;&#21035;&#20026;&#20989;&#25968;&#12290;&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.lang.GrantRevokeTest.test&lt;br/&gt;
GrantOnNonexistantFunction(GrantRevokeTest.java:627)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
2) testGrantOnNonexistantFunctionForProcedure(org.apache.derbyTesting.functionTe&lt;br/&gt;
sts.tests.lang.GrantRevokeTest)junit.framework.ComparisonFailure: null expected:&lt;br/&gt;
&amp;lt;&apos;S1.P1&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;is not recognized as a function.&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;&apos;S1.P1&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;&#26410;&#34987;&#35782;&#21035;&#20026;&#20989;&#25968;&#12290;&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.lang.GrantRevokeTest.test&lt;br/&gt;
GrantOnNonexistantFunctionForProcedure(GrantRevokeTest.java:636)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
3) testGrantOnNonexistantProcedure(org.apache.derbyTesting.functionTests.tests.l&lt;br/&gt;
ang.GrantRevokeTest)junit.framework.ComparisonFailure: null expected:&amp;lt;&apos;S1.NOSUCH&lt;br/&gt;
&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;is not recognized as a procedure.&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;&apos;S1.NOSUCH&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;&#26410;&#34987;&#35782;&#21035;&#20026;&#36807;&#31243;&#12290;&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.lang.GrantRevokeTest.test&lt;br/&gt;
GrantOnNonexistantProcedure(GrantRevokeTest.java:653)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
4) testGrantOnNonexistantProcedureForFunction(org.apache.derbyTesting.functionTe&lt;br/&gt;
sts.tests.lang.GrantRevokeTest)junit.framework.ComparisonFailure: null expected:&lt;br/&gt;
&amp;lt;&apos;S1.F2&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;is not recognized as a procedure.&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;&apos;S1.F2&apos; [&#26410;&#34987;&#35782;&#21035;&#20026;&#36807;&#31243;&#12290;&lt;br/&gt;
]&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.lang.GrantRevokeTest.test&lt;br/&gt;
GrantOnNonexistantProcedureForFunction(GrantRevokeTest.java:662)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 36,  Failures: 4,  Errors: 0&lt;/p&gt;


&lt;p&gt;D:\derby\test&amp;gt;&lt;/p&gt;</description>
                <environment>Chinese Locale,Dos</environment>
        <key id="12508649">DERBY-5252</key>
            <summary>make GrantRevokeTest pass in non-English locale</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houxzhang">Houx Zhang</assignee>
                                    <reporter username="houxzhang">Houx Zhang</reporter>
                        <labels>
                            <label>derby_backport_reject_10_5</label>
                    </labels>
                <created>Sun, 29 May 2011 11:07:14 +0100</created>
                <updated>Fri, 15 Nov 2013 08:15:15 +0000</updated>
                            <resolved>Thu, 13 Sep 2012 00:20:04 +0100</resolved>
                                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13040775" author="houxzhang" created="Sun, 29 May 2011 11:12:14 +0100"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5252&quot; title=&quot;make GrantRevokeTest pass in non-English locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5252&quot;&gt;&lt;del&gt;DERBY-5252&lt;/del&gt;&lt;/a&gt;-setlocale-just-testing.patch, LocaleTestSetup is used to give a English Locale. However, it still failed as before.&lt;/p&gt;

&lt;p&gt;I also logged in testGrantOnNonexistantProcedureForFunction(), and shows, it do be English locale in this function, but we still get a Chinese output.&lt;/p&gt;

&lt;p&gt;I think this issue is similiar with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5217&quot; title=&quot;make ImportExportIJTest pass in non-English locale&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5217&quot;&gt;&lt;del&gt;DERBY-5217&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13041162" author="bryanpendleton" created="Mon, 30 May 2011 16:21:34 +0100"  >&lt;p&gt;Since there are only 4 calls to getMessage() in this test, perhaps it would be better to&lt;br/&gt;
leave the test running in the default locale (which can be any locale, not just English),&lt;br/&gt;
and change those 4 calls to getMessage().&lt;/p&gt;

&lt;p&gt;We could either&lt;br/&gt;
(a) remove those 4 calls to getMessage entirely, or&lt;br/&gt;
(b) add some code like:&lt;/p&gt;

&lt;p&gt;      if ( Locale.getDefault().getLanguage().equals(&quot;en&quot;) )&lt;br/&gt;
            assertEquals(&quot;&apos;S1.NOSUCH&apos; is not recognized as a procedure.&quot;, e.getMessage());&lt;/p&gt;

&lt;p&gt;Since the test does a assertSQLState() right before each call to getMessage(), I don&apos;t&lt;br/&gt;
think that the getMessage() test is the most important part of the test, and maybe&lt;br/&gt;
a solution such as this would be fine?&lt;/p&gt;

&lt;p&gt;However, I see those 4 getMessage() calls were specifically added in revision 765087 (&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/lang/GrantRevokeTest.java?r1=765086&amp;amp;r2=765087&amp;amp;&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/lang/GrantRevokeTest.java?r1=765086&amp;amp;r2=765087&amp;amp;&lt;/a&gt; )&lt;br/&gt;
as part of the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3610&quot; title=&quot;Confusing error message when granting execute privilege&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3610&quot;&gt;&lt;del&gt;DERBY-3610&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Knut Anders, Dag: do you have any experience running your system in a locale other than English?&lt;br/&gt;
Does the GrantRevokeTest pass for you when run in a non-English locale? What do you think about&lt;br/&gt;
the getMessage() assertions that were added by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3610&quot; title=&quot;Confusing error message when granting execute privilege&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3610&quot;&gt;&lt;del&gt;DERBY-3610&lt;/del&gt;&lt;/a&gt;? Would it be helpful to guard them&lt;br/&gt;
with some sort of locale-specific check?&lt;/p&gt;
</comment>
                            <comment id="13041163" author="bryanpendleton" created="Mon, 30 May 2011 16:22:46 +0100"  >&lt;p&gt;Link to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3610&quot; title=&quot;Confusing error message when granting execute privilege&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3610&quot;&gt;&lt;del&gt;DERBY-3610&lt;/del&gt;&lt;/a&gt; because it appears to have added the assertions that are failing in this issue.&lt;/p&gt;</comment>
                            <comment id="13045967" author="houxzhang" created="Wed, 8 Jun 2011 15:13:15 +0100"  >&lt;p&gt;I also prefer the second method, and added a patch by following this idea. And the test can pass in Chinese Locale now. Please check it, thanks!&lt;/p&gt;


&lt;p&gt;D:\derby\test&amp;gt;java junit.textui.TestRunner org.apache.derbyTesting.functionTests&lt;br/&gt;
.tests.lang.GrantRevokeTest&lt;br/&gt;
....................................&lt;br/&gt;
Time: 8.094&lt;/p&gt;

&lt;p&gt;OK (36 tests)&lt;/p&gt;</comment>
                            <comment id="13045971" author="bryanpendleton" created="Wed, 8 Jun 2011 15:21:45 +0100"  >&lt;p&gt;Hello Houx, did you happen to see Dag&apos;s comment on the mailing list?&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/db-derby-dev/201105.mbox/%3Cx6k4d7yl5j.fsf@oracle.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/db-derby-dev/201105.mbox/%3Cx6k4d7yl5j.fsf@oracle.com%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13046934" author="bryanpendleton" created="Fri, 10 Jun 2011 01:19:47 +0100"  >&lt;p&gt;I think the proposed patch is a clear improvement to the test, as it&lt;br/&gt;
preserves the existing testing while also allowing the test to be&lt;br/&gt;
run in other locales.&lt;/p&gt;

&lt;p&gt;Committed to the trunk as revision 1134139.&lt;/p&gt;

&lt;p&gt;Thank you, Houx, for the contribution!&lt;/p&gt;</comment>
                            <comment id="13085203" author="myrna" created="Mon, 15 Aug 2011 18:48:45 +0100"  >&lt;p&gt;Reopen to document backport to 10.8&lt;/p&gt;</comment>
                            <comment id="13823435" author="knutanders" created="Fri, 15 Nov 2013 08:15:15 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12502490">DERBY-5155</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12506291">DERBY-5217</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12393527">DERBY-3610</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12481816" name="DERBY-5252-1.patch" size="2379" author="houxzhang" created="Wed, 8 Jun 2011 15:13:15 +0100"/>
                            <attachment id="12480776" name="DERBY-5252-setlocale-just-testing.patch" size="1461" author="houxzhang" created="Sun, 29 May 2011 11:12:14 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 May 2011 15:21:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0a0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35442</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>