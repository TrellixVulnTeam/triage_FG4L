<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:17:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5042/DERBY-5042.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5042] ResultSet.updateBoolean() on new BOOLEAN type throws exception</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5042</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I am encountering an error trying to update a BOOLEAN type through an&lt;br/&gt;
updatable ResultSet.  My table looks like this:&lt;/p&gt;

&lt;p&gt;CREATE TABLE file_store (&lt;br/&gt;
  path VARCHAR(255) NOT NULL,&lt;br/&gt;
  network VARCHAR(32) NOT NULL,&lt;br/&gt;
  file_blob BLOB,&lt;br/&gt;
  file_md5 VARCHAR(32),&lt;br/&gt;
  is_directory BOOLEAN NOT NULL DEFAULT false,&lt;br/&gt;
  PRIMARY KEY (path, network)&lt;br/&gt;
);&lt;/p&gt;

&lt;p&gt;My SQL looks like this:&lt;/p&gt;

&lt;p&gt;SELECT path, network, is_directory FROM file_store&lt;br/&gt;
WHERE path=? AND network=? AND is_directory=true FOR UPDATE OF path, network, is_directory&lt;/p&gt;

&lt;p&gt;My Java code looks like this:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
resultSet.moveToInsertRow();&lt;br/&gt;
resultSet.updateString(&quot;path&quot;, dirPath);&lt;br/&gt;
resultSet.updateString(&quot;network&quot;, network);&lt;br/&gt;
resultSet.updateBoolean(&quot;is_directory&quot;, true);&lt;br/&gt;
resultSet.insertRow();&lt;/p&gt;


&lt;p&gt;An exception is thrown in the call to updateBoolean() as follows:&lt;/p&gt;

&lt;p&gt;java.sql.SQLException: An attempt was made to put a data value of type &apos;byte&apos; into a data value of type &apos;BOOLEAN&apos;.&lt;/p&gt;

&lt;p&gt;It&apos;s a shame, I was looking forward to using the new BOOLEAN type before I roll out the next version of our software.  For now I will fallback to SMALLINT.  Does/will ALTER TABLE support a change from SMALLINT to BOOLEAN?&lt;/p&gt;</description>
                <environment>OS X 10.6.5, Java 1.6</environment>
        <key id="12498605">DERBY-5042</key>
            <summary>ResultSet.updateBoolean() on new BOOLEAN type throws exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="brettw">Brett Wooldridge</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Feb 2011 02:58:50 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:17 +0100</updated>
                            <resolved>Thu, 24 Feb 2011 12:54:25 +0000</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12994637" author="brettw" created="Tue, 15 Feb 2011 03:02:03 +0000"  >&lt;p&gt;Forgot to mention, if it matters, I&apos;m using the network server (non-Embedded).&lt;/p&gt;</comment>
                            <comment id="12994697" author="knutanders" created="Tue, 15 Feb 2011 08:41:47 +0000"  >&lt;p&gt;&amp;gt; Does/will ALTER TABLE support a change from SMALLINT to BOOLEAN?&lt;/p&gt;

&lt;p&gt;ALTER TABLE doesn&apos;t support changing the type of the column at all, currently. It only allows changing the length of those types that have a length attribute (VARCHAR, BLOB, CLOB, etc).&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t(x smallint);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t values 0,1,1,0,1,0,0,1;&lt;br/&gt;
8 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; alter table t alter column x set data type boolean;&lt;br/&gt;
ERROR 42Z15: Invalid type specified for column &apos;X&apos;. The type of a column may not be changed.&lt;/p&gt;</comment>
                            <comment id="12994702" author="knutanders" created="Tue, 15 Feb 2011 08:58:07 +0000"  >&lt;p&gt;updateBoolean() seems to work on the embedded driver.&lt;/p&gt;</comment>
                            <comment id="12994703" author="brettw" created="Tue, 15 Feb 2011 08:58:34 +0000"  >&lt;p&gt;It shouldn&apos;t be a problem if boolean can be cast.  In that case, in a future upgrade (of our software), we could create a new column of type boolean and populate it by casting the smallint (which I&apos;m now using) to it.  Then dropping the original smallint column.  Is cast supported?&lt;/p&gt;</comment>
                            <comment id="12994724" author="knutanders" created="Tue, 15 Feb 2011 09:34:15 +0000"  >&lt;p&gt;Derby doesn&apos;t support cast from smallint to boolean, only from string to boolean. According to the comments in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4658&quot; title=&quot;Allow explicit casts of string values to BOOLEAN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4658&quot;&gt;&lt;del&gt;DERBY-4658&lt;/del&gt;&lt;/a&gt;, that&apos;s the only cast to boolean allowed by the SQL standard.&lt;/p&gt;

&lt;p&gt;But there are ways around it. For example, if you have a table T with a smallint column S, you could add a boolean column and populate it like this:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; ALTER TABLE T ADD COLUMN B BOOLEAN;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; UPDATE T SET B = (S&amp;lt;&amp;gt;0);&lt;br/&gt;
4 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; SELECT * FROM T;&lt;br/&gt;
S     |B    &lt;br/&gt;
------------&lt;br/&gt;
NULL  |NULL &lt;br/&gt;
0     |false&lt;br/&gt;
1     |true &lt;br/&gt;
2     |true &lt;/p&gt;

&lt;p&gt;4 rows selected&lt;/p&gt;</comment>
                            <comment id="12995088" author="brettw" created="Wed, 16 Feb 2011 00:26:46 +0000"  >&lt;p&gt;Perfect, that&apos;ll work.&lt;/p&gt;</comment>
                            <comment id="12998516" author="knutanders" created="Wed, 23 Feb 2011 19:34:23 +0000"  >&lt;p&gt;Attaching a patch that makes PreparedStatement and ResultSet agree on whether a boolean value should be represented by a java.lang.Boolean or a java.lang.Short, and also adds a test case that exposes the bug and verifies the fix.&lt;/p&gt;

&lt;p&gt;Running regression tests now.&lt;/p&gt;</comment>
                            <comment id="12998556" author="knutanders" created="Wed, 23 Feb 2011 21:29:52 +0000"  >&lt;p&gt;Derbyall, suites.All and the client/server compatibility tests passed with the patch.&lt;/p&gt;</comment>
                            <comment id="12998824" author="knutanders" created="Thu, 24 Feb 2011 12:54:25 +0000"  >&lt;p&gt;Committed revision 1074127.&lt;/p&gt;</comment>
                            <comment id="13685190" author="knutanders" created="Mon, 17 Jun 2013 10:19:17 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12499062">DERBY-5058</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12471763" name="derby-5042-1a.diff" size="3313" author="knutanders" created="Wed, 23 Feb 2011 19:34:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10363"><![CDATA[Embedded/Client difference]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Feb 2011 08:41:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0gs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>