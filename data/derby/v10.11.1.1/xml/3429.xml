<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3429/DERBY-3429.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3429] Remove system property derby.system.jmx</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3429</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I don&apos;t believe that derby.system.jmx provides any benefit and is counter to the concept of using JMX for management.&lt;/p&gt;

&lt;p&gt;The one use case for it from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1387&quot; title=&quot;Add JMX extensions to Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1387&quot;&gt;&lt;del&gt;DERBY-1387&lt;/del&gt;&lt;/a&gt; is:&lt;br/&gt;
Making the Derby JMX automatically available in the MBean server will make it impossible for the user to make some application with an embedded Derby db manageable thorugh JMX without also making Derby manageable thorugh JMX. I would think that this &quot;all or nothing&quot; granularity could be a problem for some applications. So we would need an explicit derby.system.jmx property for enabling the management service anyway.&lt;/p&gt;

&lt;p&gt;The functional spec contains no information as to why this is a useful feature.&lt;/p&gt;

&lt;p&gt;I wanted to separate out the discussion from the wider issues in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1387&quot; title=&quot;Add JMX extensions to Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1387&quot;&gt;&lt;del&gt;DERBY-1387&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12388932">DERBY-3429</key>
            <summary>Remove system property derby.system.jmx</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12344126">DERBY-1387</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djd">Daniel John Debrunner</assignee>
                                    <reporter username="djd">Daniel John Debrunner</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Feb 2008 18:24:02 +0000</created>
                <updated>Mon, 6 Oct 2008 15:26:48 +0100</updated>
                            <resolved>Tue, 26 Feb 2008 18:52:53 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12569982" author="djd" created="Mon, 18 Feb 2008 18:35:13 +0000"  >&lt;p&gt;If an application is using a security manager then it provides a much more flexible mechanism to control which of Derby&apos;s MBeans are visible than the all or nothing approach of derby.system.jmx.&lt;br/&gt;
   An application using an embedded Derby with its own policy file can:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;disable Derby from registering any MBeans&lt;/li&gt;
	&lt;li&gt;allow Derby to only register specific MBeans&lt;/li&gt;
	&lt;li&gt;allow authenticated JMX users to only perform specific actions on Derby&apos;s MBeans.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Having Derby always attempt to register its MBeans (as if derby.system.jmx=true) i think provides a much more flexible environment, an application can provide limited or no management of Derby directly but also support a &quot;drill-down&quot; for more sophisticated users.&lt;/p&gt;

&lt;p&gt;The functionality being added in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3424&quot; title=&quot;Add an MBean that an application can register to change the state of Derby&amp;#39;s JMX management&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3424&quot;&gt;&lt;del&gt;DERBY-3424&lt;/del&gt;&lt;/a&gt; also allows the application to control the visibility of Derby&apos;s MBeans in a dynamic manner rather than the static manner of derby.system.jmx. &lt;/p&gt;</comment>
                            <comment id="12570324" author="djd" created="Tue, 19 Feb 2008 17:30:06 +0000"  >&lt;p&gt;Another thought is that we need to see MBeans as the mechanism to manage Derby, not just an api into existing management. Thus any application MBeans that are presenting a simplified/application specific view of Derby&apos;s management should be using Derby&apos;s MBeans to manage Derby. This requires that Derby&apos;s MBeans be available.&lt;/p&gt;</comment>
                            <comment id="12570998" author="johnemb" created="Thu, 21 Feb 2008 10:29:12 +0000"  >&lt;p&gt;If we remove this system property and enable Derby JMX management by default, then the only recommended way for a user (admin) to allow JMX management of his application embedding Derby, but not Derby itself, is to use a security manager, correct?&lt;/p&gt;

&lt;p&gt;This means that if the user (admin) is not willing to use a security manager to limit JMX exposure, he must accept that valid JMX users may see and access Derby&apos;s MBeans. I don&apos;t see how this is much different from today, when a valid JMX user (client) may enable Derby&apos;s ManagementMBean programmatically even if the system property has not been set. This will in turn enable all relevant Derby MBeans. &lt;/p&gt;

&lt;p&gt;So, I think this is an acceptable approach.&lt;/p&gt;

&lt;p&gt;An alternative approach is to reverse the default value of the property, so that a user has to set it (to false) if he does not want to enable Derby&apos;s MBeans by default. &lt;br/&gt;
Then, for example, JConsole users won&apos;t see MBeans related to Derby by default. It would still be possible to enable Derby&apos;s MBeans at runtime, using the ManagementMBean, so the usefulness of such a knob may be limited (it won&apos;t stop dedicated (and valid) JMX users from enabling the MBeans).&lt;/p&gt;

&lt;p&gt;At the moment I don&apos;t know of any other use cases supporting the need to enable Derby-JMX with a static knob.&lt;/p&gt;</comment>
                            <comment id="12571130" author="djd" created="Thu, 21 Feb 2008 18:21:41 +0000"  >&lt;p&gt;Thanks for the comments John.&lt;/p&gt;

&lt;p&gt;This concept of disabling user management of Derby and only allowing application level management is hard for me to grasp, especially without a security manager. Assuming applications will typically present a nice-console (using jmx beans under the covers) then they can easily hide any MBeans they don&apos;t won&apos;t to expose.&lt;/p&gt;

&lt;p&gt;Thus the concern would be two classes of users:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;those smart enough to use a generic jmx console&lt;/li&gt;
	&lt;li&gt;those even smarter who can write jmx code.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With Derby&apos;s MBeans a jmx client in a system without a security manager can monitor and control the jvm itself, create any MBeans that are available on the server&apos;s classpath to control any other software, thus it&apos;s not really just a Derby issue.&lt;/p&gt;

&lt;p&gt;My concern is that we might be solving this mythical use case at the expense of the more typical known use case, which is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I have an intermittent  problem in my running application, how can I see what is going on?&lt;br/&gt;
Having to reboot to start JMX and then wait for the problem again does not seem acceptable.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I agree that potentially reversing the state of the property, or to be clearer having an explicit property &quot;derby.jmx.disable=true&quot; could be an option, but only once there&apos;s some proven need for it. The functionality can be implemented today using the security manager, having a property that encourages use without a security manager to allow potentially insecure remote monitoring does not seem a good direction.&lt;/p&gt;

&lt;p&gt;I&apos;ll wait a few days and then proceed to remove derby.system.jmx.&lt;/p&gt;
</comment>
                            <comment id="12572608" author="djd" created="Tue, 26 Feb 2008 18:52:53 +0000"  >&lt;p&gt;Property removed with Revision: 631335&lt;/p&gt;</comment>
                            <comment id="12637103" author="kristwaa" created="Mon, 6 Oct 2008 15:24:50 +0100"  >&lt;p&gt;I notice there are still references to &quot;derby.system.jmx&quot; in Derby source code comments.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12405427">DERBY-3887</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Feb 2008 10:29:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0yg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39399</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>