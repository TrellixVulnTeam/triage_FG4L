<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:15:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6518/DERBY-6518.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6518] JVMInfo should not use parseFloat() to parse java.specification.version</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6518</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;JVMInfo uses parseFloat() to parse the java.specification.version property. That won&apos;t work correctly if the minor version has more than one digit. It should order the versions like this:&lt;/p&gt;

&lt;p&gt;1.7 &amp;lt; 1.8 &amp;lt; 1.9 &amp;lt; 1.10 &amp;lt; 1.11&lt;/p&gt;

&lt;p&gt;With parseFloat(), they are ordered like this instead:&lt;/p&gt;

&lt;p&gt;1.10 &amp;lt; 1.11 &amp;lt; 1.7 &amp;lt; 1.8 &amp;lt; 1.9&lt;/p&gt;

&lt;p&gt;The result is that newer Java versions will be classified as older, less capable ones, and some functionality might be disabled because Derby thinks the platform is not capable of providing it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12702106">DERBY-6518</key>
            <summary>JVMInfo should not use parseFloat() to parse java.specification.version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                            <label>derby_backport_reject_10_9</label>
                    </labels>
                <created>Tue, 18 Mar 2014 10:08:55 +0000</created>
                <updated>Wed, 8 Oct 2014 19:19:59 +0100</updated>
                            <resolved>Wed, 8 Oct 2014 19:19:37 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.2.1</fixVersion>
                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13943051" author="knutanders" created="Fri, 21 Mar 2014 13:28:25 +0000"  >&lt;p&gt;Attaching d6518-1a.diff which changes JVMInfo so that it compares each component of the version number separately, instead of using parseFloat() on the entire version number. I tested the logic manually by hard-coding the javaVersion variable to values the original logic didn&apos;t handle correctly (such as &quot;1.8.1&quot; and &quot;1.10&quot;). All regression tests passed with the patch on JDK 8.&lt;/p&gt;</comment>
                            <comment id="13947758" author="jira-bot" created="Wed, 26 Mar 2014 10:09:21 +0000"  >&lt;p&gt;Commit 1581777 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1581777&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1581777&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6518&quot; title=&quot;JVMInfo should not use parseFloat() to parse java.specification.version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6518&quot;&gt;&lt;del&gt;DERBY-6518&lt;/del&gt;&lt;/a&gt;: JVMInfo should not use parseFloat() to parse java.specification.version&lt;/p&gt;

&lt;p&gt;Change the parse logic so that it recognizes that version 1.10 is greater than 1.9.&lt;/p&gt;</comment>
                            <comment id="14148384" author="mikem" created="Thu, 25 Sep 2014 23:05:46 +0100"  >&lt;p&gt;temp owning issue while backporting to 10.10.&lt;/p&gt;</comment>
                            <comment id="14158107" author="jira-bot" created="Fri, 3 Oct 2014 16:47:06 +0100"  >&lt;p&gt;Commit 1629234 from mikem@apache.org in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629234&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1629234&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6518&quot; title=&quot;JVMInfo should not use parseFloat() to parse java.specification.version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6518&quot;&gt;&lt;del&gt;DERBY-6518&lt;/del&gt;&lt;/a&gt;: JVMInfo should not use parseFloat() to parse java.specification.version&lt;/p&gt;

&lt;p&gt;backported change #1581777 from trunk to 10.10 branch, some manual changes&lt;br/&gt;
were necessary as logic did not exactly apply to 10.10 vs 10.11 version.&lt;/p&gt;

&lt;p&gt;Change the parse logic so that it recognizes that version 1.10 is greater than 1.9.&lt;/p&gt;</comment>
                            <comment id="14158188" author="rhillegas" created="Fri, 3 Oct 2014 18:00:46 +0100"  >&lt;p&gt;Heads-up: The 1629234 backport breaks the build of 10.10 on my machine. That is because the new version of JVMInfo calls java.lang.String.split(). That method does not appear in CDC/FP 1.1. Releases in the 10.10 family are supposed to run on that platform. Thanks.&lt;/p&gt;</comment>
                            <comment id="14158287" author="rhillegas" created="Fri, 3 Oct 2014 19:22:42 +0100"  >&lt;p&gt;StringUtil.split() is the workaround for this problem in 10.10. I will adjust JVMInfo to use that method instead of the method which is missing from CDC/FP 1.1.&lt;/p&gt;</comment>
                            <comment id="14158323" author="rhillegas" created="Fri, 3 Oct 2014 19:36:36 +0100"  >&lt;p&gt;Attaching derby-6518-01-aa-use-StringUtil.diff. This patch changes JVMInfo to use StringUtil.split() instead. With this fix the Derby build succeeds on my machine. There was no regression test case for the original problem, so I can only hope that this works correctly.&lt;/p&gt;

&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/iapi/services/info/JVMInfo.java&lt;/p&gt;</comment>
                            <comment id="14158325" author="jira-bot" created="Fri, 3 Oct 2014 19:37:36 +0100"  >&lt;p&gt;Commit 1629283 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;Rick Hillegas&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629283&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1629283&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6518&quot; title=&quot;JVMInfo should not use parseFloat() to parse java.specification.version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6518&quot;&gt;&lt;del&gt;DERBY-6518&lt;/del&gt;&lt;/a&gt;: Use StringUtil.split() for CDC/FP 1.1.&lt;/p&gt;</comment>
                            <comment id="14158329" author="rhillegas" created="Fri, 3 Oct 2014 19:38:41 +0100"  >&lt;p&gt;Committed derby-6518-01-aa-use-StringUtil.diff at subversion revision 1629283.&lt;/p&gt;</comment>
                            <comment id="14158389" author="mikem" created="Fri, 3 Oct 2014 20:13:18 +0100"  >&lt;p&gt;thanks rick&lt;/p&gt;</comment>
                            <comment id="14160831" author="rhillegas" created="Mon, 6 Oct 2014 20:55:39 +0100"  >&lt;p&gt;Attaching derby-6518-02-aa-cloneSplitMethod.diff. This patch clones the StringUtil.split() method and puts it in JVMInfo so that the build doesn&apos;t pull StringUtil into more than one jar file and create an opportunity for a sealing violation.&lt;/p&gt;

&lt;p&gt;Touches the following file:&lt;/p&gt;

&lt;p&gt;M       java/engine/org/apache/derby/iapi/services/info/JVMInfo.java&lt;/p&gt;</comment>
                            <comment id="14160832" author="jira-bot" created="Mon, 6 Oct 2014 20:56:42 +0100"  >&lt;p&gt;Commit 1629749 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhillegas&quot; class=&quot;user-hover&quot; rel=&quot;rhillegas&quot;&gt;Rick Hillegas&lt;/a&gt; in branch &apos;code/branches/10.10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1629749&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1629749&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6518&quot; title=&quot;JVMInfo should not use parseFloat() to parse java.specification.version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6518&quot;&gt;&lt;del&gt;DERBY-6518&lt;/del&gt;&lt;/a&gt;: Clone the StringUtil.split() method and put it in JVMInfo; commit derby-6518-02-aa-cloneSplitMethod.diff.&lt;/p&gt;</comment>
                            <comment id="14161829" author="rhillegas" created="Tue, 7 Oct 2014 13:25:51 +0100"  >&lt;p&gt;Note that the sealing violation described by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6756&quot; title=&quot;intermittent test failure with 10.10 in tests.compatibility.VersionedNetworkServerTestSetup and ClientCompatibilityRunControl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6756&quot;&gt;&lt;del&gt;DERBY-6756&lt;/del&gt;&lt;/a&gt; is ultimately caused by the fact that JVMInfo is included in both the client and engine jar files. There are several classes in the org.apache.derby.iapi.services.info package besides JVMInfo. They all have the potential of causing sealing violations in the future.&lt;/p&gt;</comment>
                            <comment id="14163909" author="mikem" created="Wed, 8 Oct 2014 19:19:37 +0100"  >&lt;p&gt;backported fix from trunk to 10.10 branch.  fix should not be necessary in previous releases.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12746192">DERBY-6759</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12745737">DERBY-6755</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12746006">DERBY-6756</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12636020" name="d6518-1a.diff" size="1542" author="knutanders" created="Fri, 21 Mar 2014 13:28:25 +0000"/>
                            <attachment id="12672810" name="derby-6518-01-aa-use-StringUtil.diff" size="1270" author="rhillegas" created="Fri, 3 Oct 2014 19:36:36 +0100"/>
                            <attachment id="12673175" name="derby-6518-02-aa-cloneSplitMethod.diff" size="2644" author="rhillegas" created="Mon, 6 Oct 2014 20:55:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Mar 2014 10:09:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzneiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380727</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>