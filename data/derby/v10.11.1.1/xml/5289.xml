<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:17:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5289/DERBY-5289.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5289] Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5289</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I have been unable to get Derby 10.7.1.1 and 10.8.1.2 to boot the attached 10.5.1.1 database. Derby 10.6.1.0 is however able to use the DB.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this is a backwards compatibility bug or the result of corruption to the database. Running SYSCS_CHECK_TABLE and SYSCS_COMPRESS_TABLE under 10.6.1.0 found no problems with the database.&lt;/p&gt;

&lt;p&gt;NOTE: I have had to remove all data and non-essential tables/columns/triggers/etc prior to attaching this database.&lt;/p&gt;

&lt;p&gt;Output when connecting to the DB using ij:&lt;br/&gt;
ERROR XJ040: Failed to start database &apos;C:\Users\BMASON\Sandbox\InternalDB&apos; with class loader sun.misc.Launcher$AppClassLoader@11b86e7, see the next exception for details.&lt;br/&gt;
ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;/p&gt;

&lt;p&gt;Full exception from our application:&lt;br/&gt;
java.sql.SQLException: Failed to start database &apos;C:\Users\BMASON\Sandbox\InternalDB&apos; with class loader sun.misc.Launcher$AppClassLoader@93dee9, see the next exception for details.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection30.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection40.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)&lt;br/&gt;
	at com.ADInstruments.LTS.util.DerbyUtils.exists(DerbyUtils.java:86)&lt;br/&gt;
	at com.ADInstruments.LTS.InternalDB.InternalDbUtilities.cacheInternalDbVersion(InternalDbUtilities.java:117)&lt;br/&gt;
	at com.ADInstruments.LTCS.InternalDB.InternalDbStartup.initialiseDatabase(InternalDbStartup.java:23)&lt;br/&gt;
	at com.ADInstruments.LTCS.StartupTasks$StartupRunnable.initDatabases(StartupTasks.java:35)&lt;br/&gt;
	at com.ADInstruments.LTCS.StartupTasks$StartupRunnable.run(StartupTasks.java:52)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
Caused by: java.sql.SQLException: Failed to start database &apos;C:\Users\BMASON\Sandbox\InternalDB&apos; with class loader sun.misc.Launcher$AppClassLoader@93dee9, see the next exception for details.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)&lt;br/&gt;
	... 17 more&lt;br/&gt;
Caused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)&lt;br/&gt;
	... 14 more&lt;br/&gt;
Caused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.boot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Unknown Source)&lt;br/&gt;
	... 14 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:375)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.types.UserType.readExternal(Unknown Source)&lt;br/&gt;
	... 39 more&lt;/p&gt;</description>
                <environment>&amp;gt;sysinfo&lt;br/&gt;
------------------ Java Information ------------------&lt;br/&gt;
Java Version:    1.6.0_26&lt;br/&gt;
Java Vendor:     Sun Microsystems Inc.&lt;br/&gt;
Java home:       C:\Program Files (x86)\Java\jre6&lt;br/&gt;
Java classpath:  .;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derby.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbynet.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbyclient.jar;C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin\../lib/derbytools.jar&lt;br/&gt;
OS name:         Windows 7&lt;br/&gt;
OS architecture: x86&lt;br/&gt;
OS version:      6.1&lt;br/&gt;
Java user name:  bmason&lt;br/&gt;
Java user home:  C:\Users\BMASON&lt;br/&gt;
Java user dir:   C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\bin&lt;br/&gt;
java.specification.name: Java Platform API Specification&lt;br/&gt;
java.specification.version: 1.6&lt;br/&gt;
java.runtime.version: 1.6.0_26-b03&lt;br/&gt;
--------- Derby Information --------&lt;br/&gt;
JRE - JDBC: Java SE 6 - JDBC 4.0&lt;br/&gt;
[C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derby.jar] 10.8.1.2 - (1095077)&lt;br/&gt;
[C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbytools.jar] 10.8.1.2 - (1095077)&lt;br/&gt;
[C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbynet.jar] 10.8.1.2 - (1095077)&lt;br/&gt;
[C:\Users\BMASON\Sandbox\libs\db-derby-10.8.1.2-bin\lib\derbyclient.jar] 10.8.1.2 - (1095077)&lt;br/&gt;
------------------------------------------------------&lt;br/&gt;
----------------- Locale Information -----------------&lt;br/&gt;
Current Locale :  [English/New Zealand [en_NZ]]&lt;br/&gt;
Found support for locale: [cs]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [de_DE]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [es]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [fr]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [hu]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [it]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [ja_JP]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [ko_KR]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [pl]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [pt_BR]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [ru]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [zh_CN]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
Found support for locale: [zh_TW]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: 10.8.1.2 - (1095077)&lt;br/&gt;
------------------------------------------------------</environment>
        <key id="12511021">DERBY-5289</key>
            <summary>Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="b.mason@adinstruments.com">Brett Mason</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jun 2011 01:21:57 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:43 +0100</updated>
                            <resolved>Wed, 29 Jun 2011 17:49:10 +0100</resolved>
                                    <version>10.1.3.1</version>
                    <version>10.2.2.0</version>
                    <version>10.3.3.0</version>
                    <version>10.4.2.0</version>
                    <version>10.5.3.0</version>
                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                    <version>10.8.1.2</version>
                    <version>10.9.1.0</version>
                                    <fixVersion>10.1.3.3</fixVersion>
                    <fixVersion>10.2.2.1</fixVersion>
                    <fixVersion>10.3.3.1</fixVersion>
                    <fixVersion>10.4.2.1</fixVersion>
                    <fixVersion>10.5.3.1</fixVersion>
                    <fixVersion>10.6.2.2</fixVersion>
                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13052289" author="b.mason@adinstruments.com" created="Tue, 21 Jun 2011 01:24:50 +0100"  >&lt;p&gt;Trimmed down database which exhibits the problem.&lt;/p&gt;</comment>
                            <comment id="13052291" author="b.mason@adinstruments.com" created="Tue, 21 Jun 2011 01:28:36 +0100"  >&lt;p&gt;The database can be booted with 10.8 if the trigger ADMIN_LIST_UPDATE_MARKERS is dropped.&lt;/p&gt;</comment>
                            <comment id="13052335" author="b.mason@adinstruments.com" created="Tue, 21 Jun 2011 04:03:20 +0100"  >&lt;p&gt;Just checked and 10.6.2.1 works as expected.&lt;/p&gt;

&lt;p&gt;Let me know if there is any more information I can provide.&lt;/p&gt;</comment>
                            <comment id="13052750" author="mamtas" created="Tue, 21 Jun 2011 19:35:32 +0100"  >&lt;p&gt;I tried the attached db with 10.7.1.1 release and ran into same problem as Brett. I tried it with 10.8 codeline(not the released 10.8.1.2) and the database upgraded fine. I will try it with 10.8.1.2 and with the current trunk codeline to see how it behaves there. It looks like the trigger definition for ADMIN_LIST_UPDATE_MARKERS is as follows&lt;br/&gt;
UPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE)&lt;/p&gt;

&lt;p&gt;Brett, I wondered if you could post a simple repro to create the database which shows the problem, It can be an ij script or java program, whichever is easy for you. In the mean time, I will investigate the db attached by you. Thanks&lt;/p&gt;</comment>
                            <comment id="13052821" author="mikem" created="Tue, 21 Jun 2011 21:55:00 +0100"  >&lt;p&gt;mamta, did you try a sane server on the 10.7 codeline?  Could you post a complete stack from derby.log as the posted stack is incomplete.&lt;/p&gt;

&lt;p&gt;From the stack it looks like this is a hard upgrade issue.  Is soft upgrade a problem?&lt;/p&gt;

&lt;p&gt;Is it correct that on upgrade we are reading anything out of the system catlogs for the triggers?  With full stack it probably will be clearer where&lt;br/&gt;
the problem is.&lt;/p&gt;</comment>
                            <comment id="13052873" author="mamtas" created="Tue, 21 Jun 2011 22:59:59 +0100"  >&lt;p&gt;Mike write &quot;From the stack it looks like this is a hard upgrade issue. Is soft upgrade a problem? &quot;&lt;/p&gt;

&lt;p&gt;Yes, the stack trace appears to be for hard upgrade. I tried the soft upgrade on the attached db to 10.7.1.1 and saw the same problem.&lt;/p&gt;</comment>
                            <comment id="13052876" author="mamtas" created="Tue, 21 Jun 2011 23:02:23 +0100"  >&lt;p&gt;I am attaching derby.log with complete stack trace and also copying it here (it is rather long)&lt;br/&gt;
java.sql.SQLException: Failed to start database &apos;InternalDB&apos; with class loader sun.misc.Launcher$AppClassLoader@5ca65ca6, see the next exception for details.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2725)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:384)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)&lt;br/&gt;
	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:322)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:297)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
Caused by: java.sql.SQLException: Failed to start database &apos;InternalDB&apos; with class loader sun.misc.Launcher$AppClassLoader@5ca65ca6, see the next exception for details.&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)&lt;br/&gt;
	... 18 more&lt;br/&gt;
Caused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719)&lt;br/&gt;
	... 15 more&lt;br/&gt;
Caused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)&lt;br/&gt;
	at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)&lt;br/&gt;
	... 15 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:386)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)&lt;br/&gt;
	... 40 more&lt;br/&gt;
============= begin nested exception, level (1) ===========&lt;br/&gt;
java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:384)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)&lt;br/&gt;
	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:322)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:297)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
Caused by: java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)&lt;br/&gt;
	... 17 more&lt;br/&gt;
Caused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)&lt;br/&gt;
	at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)&lt;br/&gt;
	... 15 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:386)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)&lt;br/&gt;
	... 40 more&lt;br/&gt;
============= end nested exception, level (1) ===========&lt;br/&gt;
============= begin nested exception, level (2) ===========&lt;br/&gt;
java.sql.SQLException: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2719)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:384)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)&lt;br/&gt;
	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:322)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:297)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
Caused by: ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)&lt;br/&gt;
	at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)&lt;br/&gt;
	... 15 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:386)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)&lt;br/&gt;
	... 40 more&lt;br/&gt;
============= end nested exception, level (2) ===========&lt;br/&gt;
============= begin nested exception, level (3) ===========&lt;br/&gt;
ERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stored&lt;br/&gt;
	at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5753)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)&lt;br/&gt;
	at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:384)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)&lt;br/&gt;
	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:322)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:297)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:386)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)&lt;br/&gt;
	... 40 more&lt;br/&gt;
============= end nested exception, level (3) ===========&lt;br/&gt;
============= begin nested exception, level (4) ===========&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:386)&lt;br/&gt;
	at org.apache.derby.iapi.sql.dictionary.TriggerDescriptor.readExternal(TriggerDescriptor.java:813)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.ArrayUtil.readArrayItems(ArrayUtil.java:115)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.TriggerInfo.readExternal(TriggerInfo.java:235)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.WriteCursorConstantAction.readExternal(WriteCursorConstantAction.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.execute.UpdateConstantAction.readExternal(UpdateConstantAction.java:171)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.impl.sql.GenericStorablePreparedStatement.readExternal(GenericStorablePreparedStatement.java:226)&lt;br/&gt;
	at org.apache.derby.iapi.services.io.FormatIdInputStream.readObject(FormatIdInputStream.java:125)&lt;br/&gt;
	at org.apache.derby.iapi.types.UserType.readExternal(UserType.java:305)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.readRecordFromArray(StoredPage.java:5639)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.StoredPage.restoreRecordFromSlot(StoredPage.java:1495)&lt;br/&gt;
	at org.apache.derby.impl.store.raw.data.BasePage.fetchFromSlot(BasePage.java:438)&lt;br/&gt;
	at org.apache.derby.impl.store.access.conglomerate.GenericScanController.fetchRows(GenericScanController.java:759)&lt;br/&gt;
	at org.apache.derby.impl.store.access.heap.HeapScan.fetchNext(HeapScan.java:238)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getDescriptorViaHeap(DataDictionaryImpl.java:8832)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getAllSPSDescriptors(DataDictionaryImpl.java:4522)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropJDBCMetadataSPSes(DataDictionaryImpl.java:12836)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.updateMetadataSPSes(DataDictionaryImpl.java:12860)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.handleMinorRevisionChange(DD_Version.java:520)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.java:244)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables(DataDictionaryImpl.java:7124)&lt;br/&gt;
	at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryImpl.java:774)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:531)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)&lt;br/&gt;
	at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:211)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:1979)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:333)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1816)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1682)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1560)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:979)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2686)&lt;br/&gt;
	at org.apache.derby.impl.jdbc.EmbedConnection.&amp;lt;init&amp;gt;(EmbedConnection.java:384)&lt;br/&gt;
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)&lt;br/&gt;
	at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)&lt;br/&gt;
	at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:322)&lt;br/&gt;
	at java.sql.DriverManager.getConnection(DriverManager.java:297)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1503)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1333)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1118)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:341)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)&lt;br/&gt;
	at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)&lt;br/&gt;
	at org.apache.derby.tools.ij.main(ij.java:59)&lt;br/&gt;
============= end nested exception, level (4) ===========&lt;/p&gt;</comment>
                            <comment id="13052889" author="b.mason@adinstruments.com" created="Tue, 21 Jun 2011 23:18:36 +0100"  >&lt;p&gt;Thanks for taking a look so quickly. I haven&apos;t been able to reproduce the issue with a fresh DB so far but I will keep trying. I will also try upgrading a range of other databases we have available to see if any others exhibit the problem.&lt;/p&gt;

&lt;p&gt;The attached database was a development database I used for load testing so it would have had quite a bit of use, particularly the EXP_RUNS table.&lt;/p&gt;</comment>
                            <comment id="13052909" author="mamtas" created="Tue, 21 Jun 2011 23:36:50 +0100"  >&lt;p&gt;I tried dblook on the attached db and got following&lt;br/&gt;
$ java org.apache.derby.tools.dblook -d &apos;jdbc:derby:InternalDB&apos;&lt;br/&gt;
&amp;#8211; Timestamp: 2011-06-21 13:26:02.351&lt;br/&gt;
&amp;#8211; Source database is: InternalDB&lt;br/&gt;
&amp;#8211; Connection URL is: jdbc:derby:InternalDB&lt;br/&gt;
&amp;#8211; appendLogs: false&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for schemas&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;CREATE SCHEMA &quot;SYNC&quot;;&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for functions&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;XML_ENCODE&quot; (&quot;ELEM_NAME&quot; VARCHAR(100),&quot;STR&quot; VARCHAR(32672)) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode&apos; ;&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;XML_ENCODE_CHAR&quot; (&quot;ELEM_NAME&quot; VARCHAR(100),&quot;VAL&quot; CHAR(1)) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode&apos; ;&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;XML_ENCODE_INT&quot; (&quot;ELEM_NAME&quot; VARCHAR(100),&quot;VAL&quot; INTEGER) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode&apos; ;&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;XML_ENCODE_BIGINT&quot; (&quot;ELEM_NAME&quot; VARCHAR(100),&quot;VAL&quot; BIGINT) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode&apos; ;&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;XML_ENCODE_DOUBLE&quot; (&quot;ELEM_NAME&quot; VARCHAR(100),&quot;VAL&quot; DOUBLE) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode&apos; ;&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;XML_ENCODE_TIMESTAMP&quot; (&quot;ELEM_NAME&quot; VARCHAR(100),&quot;VAL&quot; TIMESTAMP) RETURNS VARCHAR(32672) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL CALLED ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.xmlEncode&apos; ;&lt;/p&gt;

&lt;p&gt;CREATE FUNCTION &quot;SYNC&quot;.&quot;RANDOM_UUID&quot; () RETURNS VARCHAR(100) LANGUAGE JAVA PARAMETER STYLE JAVA NO SQL RETURNS NULL ON NULL INPUT EXTERNAL NAME &apos;com.ADInstruments.LTS.InternalDB.dbSync.record.UtilityProcedures.randomUUID&apos; ;&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for tables&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;CREATE TABLE &quot;APP&quot;.&quot;ADMIN_LIST&quot; (&quot;ADMIN_ID&quot; INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), &quot;USER_CODE&quot; VARCHAR(255) NOT NULL);&lt;/p&gt;

&lt;p&gt;CREATE TABLE &quot;APP&quot;.&quot;EXP_RUNS&quot; (&quot;RUN_ID&quot; INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), &quot;MARKER_USERCODE&quot; VARCHAR(255));&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for keys&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;&amp;#8211; primary/unique&lt;br/&gt;
ALTER TABLE &quot;APP&quot;.&quot;EXP_RUNS&quot; ADD CONSTRAINT &quot;RUN_PK&quot; PRIMARY KEY (&quot;RUN_ID&quot;);&lt;/p&gt;

&lt;p&gt;ALTER TABLE &quot;APP&quot;.&quot;ADMIN_LIST&quot; ADD CONSTRAINT &quot;ADMIN_LIST_USER_CODE_UC&quot; UNIQUE (&quot;USER_CODE&quot;);&lt;/p&gt;

&lt;p&gt;ALTER TABLE &quot;APP&quot;.&quot;ADMIN_LIST&quot; ADD CONSTRAINT &quot;ADMIN_PK&quot; PRIMARY KEY (&quot;ADMIN_ID&quot;);&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for triggers&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;CREATE TRIGGER &quot;APP&quot;.&quot;ADMIN_LIST_UPDATE_MARKERS&quot; AFTER UPDATE ON &quot;APP&quot;.&quot;ADMIN_LIST&quot; REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW UPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE);&lt;/p&gt;</comment>
                            <comment id="13052913" author="mamtas" created="Tue, 21 Jun 2011 23:39:40 +0100"  >&lt;p&gt;From the above output from dblook, I took out the trigger related stuff as follows to see if I could reproduce the problem and I couldn&apos;t. Following is what I tried to repro the bug. I created a db in 10.5 codeline and took the db to 10.7.1.1 codeline and did upgrade on it and it didn&apos;t fail. I do not have any data in the tables. I will try to insert some data and make the trigger fire and see if that makes the problem show up&lt;/p&gt;

&lt;p&gt;java -Dij.exceptionTrace=true org.apache.derby.tools.ij&lt;br/&gt;
connect &apos;jdbc:derby:DB105;create=true&apos;;&lt;br/&gt;
CREATE TABLE &quot;APP&quot;.&quot;ADMIN_LIST&quot; (&quot;ADMIN_ID&quot; INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), &lt;br/&gt;
	&quot;USER_CODE&quot; VARCHAR(255) NOT NULL);&lt;/p&gt;

&lt;p&gt;CREATE TABLE &quot;APP&quot;.&quot;EXP_RUNS&quot; (&quot;RUN_ID&quot; INTEGER NOT NULL GENERATED BY DEFAULT AS&lt;br/&gt;
 IDENTITY (START WITH 1, INCREMENT BY 1), &quot;MARKER_USERCODE&quot; VARCHAR(255));&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for keys&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;&amp;#8211; primary/unique&lt;br/&gt;
ALTER TABLE &quot;APP&quot;.&quot;EXP_RUNS&quot; ADD CONSTRAINT &quot;RUN_PK&quot; PRIMARY KEY (&quot;RUN_ID&quot;);&lt;/p&gt;

&lt;p&gt;ALTER TABLE &quot;APP&quot;.&quot;ADMIN_LIST&quot; ADD CONSTRAINT &quot;ADMIN_LIST_USER_CODE_UC&quot; UNIQUE (&quot;USER_CODE&quot;);&lt;/p&gt;

&lt;p&gt;ALTER TABLE &quot;APP&quot;.&quot;ADMIN_LIST&quot; ADD CONSTRAINT &quot;ADMIN_PK&quot; PRIMARY KEY (&quot;ADMIN_ID&quot;);&lt;/p&gt;

&lt;p&gt;&amp;#8211; ----------------------------------------------&lt;br/&gt;
&amp;#8211; DDL Statements for triggers&lt;br/&gt;
&amp;#8211; ----------------------------------------------&lt;/p&gt;

&lt;p&gt;CREATE TRIGGER &quot;APP&quot;.&quot;ADMIN_LIST_UPDATE_MARKERS&quot; AFTER UPDATE ON &quot;APP&quot;.&quot;ADMIN_LIST&quot;&lt;br/&gt;
	REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW &lt;br/&gt;
	UPDATE EXP_RUNS SET MARKER_USERCODE = LOWER(NEW.USER_CODE) &lt;br/&gt;
		WHERE MARKER_USERCODE = LOWER(OLD.USER_CODE);&lt;/p&gt;</comment>
                            <comment id="13052920" author="mikem" created="Tue, 21 Jun 2011 23:52:21 +0100"  >&lt;p&gt;brett, can you comment on the &quot;history&quot; of the database that is having the problem as far as you know.  Do you know what&lt;br/&gt;
version derby created it?  From the db itself we can only tell what version the database is currently at.  So it is possible it&lt;br/&gt;
could have been hard upgraded to the current version it is at.   The best chance to get a fix is to somehow reproduce it.  more&lt;br/&gt;
info might help.&lt;/p&gt;</comment>
                            <comment id="13052934" author="mamtas" created="Wed, 22 Jun 2011 00:19:38 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1482&quot; title=&quot;Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced/accessed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1482&quot;&gt;&lt;del&gt;DERBY-1482&lt;/del&gt;&lt;/a&gt; added code to have extra information about triggers collected and saved persistently. These changes went in 10.7 codeline. In &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1482&quot; title=&quot;Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced/accessed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1482&quot;&gt;&lt;del&gt;DERBY-1482&lt;/del&gt;&lt;/a&gt;, there was a lot of discussion about how this should be handled to provide upgradability from releases prior to 10.7 to 10.7 and higher releases(The discussion about serialization can be found at &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1482&quot; title=&quot;Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced/accessed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1482&quot;&gt;&lt;del&gt;DERBY-1482&lt;/del&gt;&lt;/a&gt; with the comments starting at date 02/Apr/10 through 28/May/10.). Despite what was agreed on for serialization of the new information, I see that with revision 956763, I have (accidentally) added incorrect serialization code rather than what was discussed and agreed on in the jira. I am pretty certain that is the cause of the problem. I will look into developing a small test case to demonstrate the problem. I think the fix to this would be to change the serialization code to what was agreed upon in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1482&quot; title=&quot;Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced/accessed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1482&quot;&gt;&lt;del&gt;DERBY-1482&lt;/del&gt;&lt;/a&gt;. At this point, I would like to first work on a simple test case which shows the problem and then try the new serialization code to see if that fixes the problem.&lt;/p&gt;</comment>
                            <comment id="13052937" author="mamtas" created="Wed, 22 Jun 2011 00:28:29 +0100"  >&lt;p&gt;Brett, I will work on a repro on my own but it will be great help if you happen to have a simple repro script for your db showing the problem. Thanks&lt;/p&gt;</comment>
                            <comment id="13052957" author="mikem" created="Wed, 22 Jun 2011 01:06:25 +0100"  >&lt;p&gt;I still think there may be an architectural problem.  I believe we are counting on upgrade getting rid of invalid SPS&apos;s during the code that is&lt;br/&gt;
executing on the stack of this issue.  But it seems that in order to do it, it is reading all the SPS&apos;s from disk and possibly using bad read/write&lt;br/&gt;
code to do so.   At least that is what it looks like for the stacks shown, have not debugged this.  &lt;/p&gt;

</comment>
                            <comment id="13052972" author="b.mason@adinstruments.com" created="Wed, 22 Jun 2011 01:33:21 +0100"  >&lt;p&gt;Good news, I can reproduce the problem fairly easily from a clean install of our application. I have done a run through with &quot;derby.language.logStatementText&quot; turned on so I should be able to supply an ij script to reproduce the problem. Will just take a while to work through the 2.5mb of logs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Mike, the attached DB has only ever been used with 10.5.1.1.&lt;/p&gt;</comment>
                            <comment id="13052987" author="mamtas" created="Wed, 22 Jun 2011 02:33:12 +0100"  >&lt;p&gt;I took Brett&apos;s db and tried upgrading it with 10.7 latest codeline and I see the problem there too. Brett&apos;s db also failed when I upgraded it to 10.8.1.2&lt;/p&gt;

&lt;p&gt;In short, following is where the attached db upgrades without problem&lt;br/&gt;
trunk &lt;br/&gt;
10.8 codeline&lt;/p&gt;

&lt;p&gt;The upgrade failled with following&lt;br/&gt;
10.7.1.1&lt;br/&gt;
10.8.1.2&lt;br/&gt;
10.7 codeline&lt;/p&gt;</comment>
                            <comment id="13052989" author="mikem" created="Wed, 22 Jun 2011 02:42:20 +0100"  >&lt;p&gt;I don&apos;t think the problem is in the trigger synchonization code that was discussed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1482&quot; title=&quot;Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced/accessed.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1482&quot;&gt;&lt;del&gt;DERBY-1482&lt;/del&gt;&lt;/a&gt;.  That discussion was about&lt;br/&gt;
handling upgrade to the SYSTRIGGERS system table, and that code looked right to me.  It is located in ReferencedColumnsDescriptorImpl .&lt;/p&gt;

&lt;p&gt;The overall architecture for handling upgrade problems in SYSSTATEMENTS stored query plans, is that basically we don&apos;t do any upgrade handling.&lt;br/&gt;
Coders are free to change all the read and write routines of stuff that goes into a stored query plan and need not write upgrade dependent code.  What&lt;br/&gt;
is supposed to happen is that if you do this you make sure the branch gets a version number bump, and then the upgrade code is supposed to &lt;br/&gt;
recognize the version number bump and invalidate all those stored dynamic query plans.  It looks to me like there is a problem in this area where&lt;br/&gt;
in order to do this upgrade work we are actually reading in the &quot;BAD&quot; plans using code that is not ready to do it.  In the current case it looks like&lt;br/&gt;
we are reading in all SPS&apos;s to find the database metadata rows because we don&apos;t have a good index.  This code should not be reading the SPS portion&lt;br/&gt;
of the row as it is not guaranteed to work.  &lt;/p&gt;

&lt;p&gt;I think best way to understand this bug:&lt;br/&gt;
1) get a repro that we can run through the full upgrade suite.&lt;br/&gt;
2) figure out what change has happened to fix this and see if we can backport that to 10.7.  I looked around at the first level of upgrade code and&lt;br/&gt;
    nothing jumped out at me in DD_VERSION.java between 10.7 and trunk.&lt;/p&gt;</comment>
                            <comment id="13053004" author="mikem" created="Wed, 22 Jun 2011 03:15:56 +0100"  >&lt;p&gt;I looked through the changes to the 10.8 branch and nothing looked like it would fix this from the description.  Seems like next step is to binary search 10.8 with builds to figure out what change fixed this.  There are not that many changes, only 28.  The release svn number of the 10.8 release is 1095077.  &lt;/p&gt;</comment>
                            <comment id="13053009" author="mikem" created="Wed, 22 Jun 2011 03:41:31 +0100"  >&lt;p&gt;I looked closer after mamta posted the results for 10.8.  I think the fix to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt; may have fixed this issue.  Maybe knut can say whether it is appropriate to backport that whole change to 10.7 or not.  But my guess is that we only need the following change in 10.7 (and probably should &lt;br/&gt;
backport it as far as possible as I think it could fix other issues for upgrade), should verify this one change fixes the problem in 10.7:&lt;/p&gt;

&lt;p&gt;In DataDictionaryImpl.java knut made the change I was saying was a problem with the architecture.  You should not be deserializing the&lt;br/&gt;
SPS&apos;s during upgrade&apos;s attempt to drop/invalidate them:&lt;br/&gt;
    public List getAllSPSDescriptors()&lt;br/&gt;
        throws StandardException&lt;br/&gt;
    {&lt;br/&gt;
        TabInfoImpl                 ti = getNonCoreTI(SYSSTATEMENTS_CATALOG_NUM)&lt;br/&gt;
;&lt;/p&gt;

&lt;p&gt;        List list = newSList();&lt;/p&gt;

&lt;p&gt;        // &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt;: The compiled plan may not be possible to deserialize&lt;br/&gt;
        // during upgrade. Skip the column that contains the compiled plan to&lt;br/&gt;
        // prevent deserialization errors when reading the rows. We don&apos;t care&lt;br/&gt;
        // about the value in that column, since this method is only called&lt;br/&gt;
        // when we want to drop or invalidate rows in SYSSTATEMENTS.&lt;br/&gt;
        FormatableBitSet cols = new FormatableBitSet(&lt;br/&gt;
                ti.getCatalogRowFactory().getHeapColumnCount());&lt;br/&gt;
        for (int i = 0; i &amp;lt; cols.size(); i++) {&lt;br/&gt;
            if (i + 1 == SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE) &lt;/p&gt;
{
                cols.clear(i);
            }
&lt;p&gt; else &lt;/p&gt;
{
                cols.set(i);
            }
&lt;p&gt;        }&lt;/p&gt;

&lt;p&gt;        getDescriptorViaHeap(&lt;br/&gt;
                        cols,&lt;br/&gt;
                        (ScanQualifier[][]) null,&lt;br/&gt;
                        ti,&lt;br/&gt;
                        (TupleDescriptor) null,&lt;br/&gt;
                        list);&lt;/p&gt;

&lt;p&gt;        return list;&lt;/p&gt;

&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="13053014" author="mamtas" created="Wed, 22 Jun 2011 04:05:51 +0100"  >&lt;p&gt;I made the code change suggested by Mike(along with that, had to make couple other minor changes since the signature of getDescriptorViaHeap has been changed by the code) and the upgrade works fine. I am running the existing upgrade suite to see how it runs. Once it&apos;s done, I will fire the regular junit and derbyall tests. Like Mike said, it will be great to have a repro for this problem which we can add to our upgrade suite which will ensure that this test works fine with various upgrades.Also, it seems like it will be good to backport this to older releases as well. Thanks&lt;/p&gt;</comment>
                            <comment id="13053119" author="knutanders" created="Wed, 22 Jun 2011 09:17:41 +0100"  >&lt;p&gt;Yes, this sounds similar to the upgrade problem we came across in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt;. I think it&apos;s safe to backport the whole fix to 10.7, as long as we remember to bump the version number on the branch. If the whole fix cannot be backported, the DataDictionaryImpl changes should be sufficient for this issue.&lt;/p&gt;</comment>
                            <comment id="13053343" author="mamtas" created="Wed, 22 Jun 2011 17:59:38 +0100"  >&lt;p&gt;I did the partial backport of Knut&apos;s changes to my 10,7 codeline and with that backport, the full upgrade, junit suite and derbyall suite ran fine. I will attach this partial backport to jira. We do not have a standalone test case yet which we can be added to upgrade suite to test the problem as part of our regression suites.&lt;/p&gt;</comment>
                            <comment id="13053458" author="b.mason@adinstruments.com" created="Wed, 22 Jun 2011 21:35:06 +0100"  >&lt;p&gt;Took a while but I&apos;ve managed to isolate a test case which can be added to the test suite. Appears to come down to triggers which fire other triggers.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
1) Run the attached repro.sql in ij using Derby 10.5.1.1 or 10.6.2.1. It will create a database called &quot;test&quot; in the current directory.&lt;br/&gt;
2) Attempt to open the resulting database in Derby 10.7.1.1 or 10.8.1.2. With or without &quot;upgrade=true&quot;.&lt;br/&gt;
3) The error posted above is thrown.&lt;/p&gt;

&lt;p&gt;The script is fairly short so I&apos;ll paste it here too:&lt;/p&gt;

&lt;p&gt;CONNECT &apos;jdbc:derby:test;create=true&apos;;&lt;/p&gt;

&lt;p&gt;CREATE TABLE TABLE1 (COL1 VARCHAR(5));&lt;br/&gt;
CREATE TABLE TABLE2 (COL2 VARCHAR(5));&lt;br/&gt;
CREATE TABLE TABLE3 (COL3 VARCHAR(5));&lt;/p&gt;

&lt;p&gt;CREATE TRIGGER TABLE1_UPDATED AFTER UPDATE ON TABLE1 REFERENCING OLD AS OLD NEW AS NEW FOR EACH ROW UPDATE TABLE2 SET COL2 = NEW.COL1 WHERE COL2 = OLD.COL1;&lt;/p&gt;

&lt;p&gt;CREATE TRIGGER TABLE2_UPDATED AFTER UPDATE ON TABLE2 REFERENCING NEW AS NEW FOR EACH ROW INSERT INTO TABLE3(COL3) VALUES(&apos;ccc&apos;);&lt;/p&gt;

&lt;p&gt;insert into TABLE1(COL1) values (&apos;aaa&apos;);&lt;br/&gt;
UPDATE TABLE1 SET COL1 = &apos;bbb&apos;;&lt;/p&gt;</comment>
                            <comment id="13053466" author="kmarsden" created="Wed, 22 Jun 2011 21:55:30 +0100"  >&lt;p&gt;Thank you very much Brett for the reproduction! I verified it in my environment.  I will pick up this issue, add the upgrade  test and look at back porting all or part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt; to the older branches where it may be an issue for other users.  Note: If you build the head of the 10.8 branch it already has the fix because &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt; is already fixed in that branch.&lt;/p&gt;

</comment>
                            <comment id="13054646" author="kmarsden" created="Fri, 24 Jun 2011 20:53:06 +0100"  >&lt;p&gt;Attached is a new test case for this issue. I will go ahead and put it in trunk as the issue is fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt;.  One complication with the test was that it cannot run any phase if the old version is affected by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4385&quot; title=&quot;Comparision with ALL (subquery) may give wrong result if constant is selected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4385&quot;&gt;&lt;del&gt;DERBY-4385&lt;/del&gt;&lt;/a&gt;, because the database won&apos;t boot when booting in the post soft upgrade phase and other fixtures are affected.&lt;/p&gt;

&lt;p&gt;For the older branches I think I will not backport all of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt;, but just the relevant part based on the patch mamta provided for this.&lt;/p&gt;</comment>
                            <comment id="13055715" author="kmarsden" created="Mon, 27 Jun 2011 20:40:36 +0100"  >&lt;p&gt;Here is a full patch for 10.7 with tests.  It combines Mamta&apos;s subset patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt;, the test for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5289&quot; title=&quot;Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5289&quot;&gt;&lt;del&gt;DERBY-5289&lt;/del&gt;&lt;/a&gt; and also needed to include the test fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5105&quot; title=&quot;NoSuchMethodError in upgrade tests (testTriggerBasic)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5105&quot;&gt;&lt;del&gt;DERBY-5105&lt;/del&gt;&lt;/a&gt;. Running tests now.&lt;/p&gt;</comment>
                            <comment id="13056083" author="mikem" created="Tue, 28 Jun 2011 00:00:15 +0100"  >&lt;p&gt;I believe there should be a version bump to whatever version this fix is backported to.&lt;/p&gt;</comment>
                            <comment id="13056197" author="kmarsden" created="Tue, 28 Jun 2011 00:31:04 +0100"  >&lt;p&gt;I am not sure that is required for just this subset of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt; as it doesn&apos;t actually change the compiled plans. The change to DataDictionaryImpl.getAllSPSDescriptiors()  is described with this comment:&lt;br/&gt;
+        // &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5289&quot; title=&quot;Unable to boot 10.5.1.1 database - fails during soft/hard upgrade process for a new version number while trying to drop jdbc metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5289&quot;&gt;&lt;del&gt;DERBY-5289&lt;/del&gt;&lt;/a&gt; uses partial fix from&lt;br/&gt;
+        // &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt;: The compiled plan may not be possible to deserialize &lt;br/&gt;
+        // during upgrade. Skip the column that contains the compiled plan to &lt;br/&gt;
+        // prevent deserialization errors when reading the rows. We don&apos;t care &lt;br/&gt;
+        // about the value in that column, since this method is only called &lt;br/&gt;
+        // when we want to drop or invalidate rows in SYSSTATEMENTS. &lt;/p&gt;

&lt;p&gt;So, it is just skipping the compiled plan column in a situation where it is already in upgrade. &lt;br/&gt;
As I understand it, if I backported the full &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt; it would contain some actual generated code change that would require a version bump, but this part just affects what happens when we have a version change already,&lt;br/&gt;
Please let me know if I read this incorrectly.&lt;/p&gt;

</comment>
                            <comment id="13056412" author="knutanders" created="Tue, 28 Jun 2011 10:30:48 +0100"  >&lt;p&gt;I think your understanding is correct. The backported subset of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3870&quot; title=&quot;Concurrent Inserts of rows with XML data results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3870&quot;&gt;&lt;del&gt;DERBY-3870&lt;/del&gt;&lt;/a&gt; doesn&apos;t change the compiled plans, so a version bump shouldn&apos;t be required. If an upgrade fails because the fix is missing, booting again with the fix should make the upgrade code run again even if the version number hasn&apos;t changed.&lt;/p&gt;</comment>
                            <comment id="13057341" author="kmarsden" created="Wed, 29 Jun 2011 17:49:10 +0100"  >&lt;p&gt;Resolving this issue.  Backported the code fix all the way to 10.1 branch. Even though just recently exposed with the upgrade from 10.5 to 10.8 the code attempting to read in the stored plans on upgrade has always been there.&lt;/p&gt;</comment>
                            <comment id="13685338" author="knutanders" created="Mon, 17 Jun 2013 10:19:43 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12483460" name="DERBY5269_patch1_diff.txt" size="2448" author="mamtas" created="Wed, 22 Jun 2011 18:03:23 +0100"/>
                            <attachment id="12483224" name="InternalDB - broken for 10.8.zip" size="322818" author="b.mason@adinstruments.com" created="Tue, 21 Jun 2011 01:24:50 +0100"/>
                            <attachment id="12483993" name="derby-5289_10_7_diff.txt" size="12433" author="kmarsden" created="Mon, 27 Jun 2011 20:40:36 +0100"/>
                            <attachment id="12483762" name="derby-5289_test_diff.txt" size="4731" author="kmarsden" created="Fri, 24 Jun 2011 20:53:06 +0100"/>
                            <attachment id="12483504" name="repro.sql" size="519" author="b.mason@adinstruments.com" created="Wed, 22 Jun 2011 21:35:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Jun 2011 18:35:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10424"><![CDATA[Repro attached]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0f07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36249</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>