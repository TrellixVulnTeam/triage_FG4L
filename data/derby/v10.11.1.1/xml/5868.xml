<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5868/DERBY-5868.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5868] Move java.sql.Wrapper implementations to base classes on the client</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5868</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The client classes that implement java.sql.Wrapper, implement the interface in the leaf classes instead of the base classes. This is because unwrap() has a generic signature, so it could not be in the base classes as long as they had to be compatible with Java 1.4.&lt;/p&gt;

&lt;p&gt;For example, in the statement class hierarchy, we implement unwrap() in Statement40, PreparedStatement40 and CallableStatement40. Now that we compile the client with source level 1.5, we can move the unwrap() method to the Statement class and eliminate the duplication.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12599594">DERBY-5868</key>
            <summary>Move java.sql.Wrapper implementations to base classes on the client</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jul 2012 09:10:22 +0100</created>
                <updated>Wed, 25 Jul 2012 10:53:40 +0100</updated>
                            <resolved>Sat, 21 Jul 2012 09:21:18 +0100</resolved>
                                    <version>10.10.1.1</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13419059" author="knutanders" created="Fri, 20 Jul 2012 12:21:43 +0100"  >&lt;p&gt;Attaching a patch, derby-5868-1a.patch, that moves the isWrapperFor()&lt;br/&gt;
and unwrap() implementations&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;from Statement40, PreparedStatement40 and CallableStatement40 to Statement&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;from LogicalPreparedStatement40 and LogicalCallableStatement40 to&lt;br/&gt;
  LogicalStatementEntity&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;from ClientDataSource40, ClientConnectionPoolDataSource40 and&lt;br/&gt;
  ClientXADataSource40 to ClientDataSource&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;from ColumnMetaData40 to ColumnMetaData&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;from ParameterMetaData40 to ParameterMetaData&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(The patch also moves some methods that had identical implementations in&lt;br/&gt;
PreparedStatement40 and CallableStatement40 to PreparedStatement.)&lt;/p&gt;

&lt;p&gt;The above modifications allowed removal of the following classes, as they no&lt;br/&gt;
longer contained any methods, except constructors that forwarded their arguments&lt;br/&gt;
to the parent class:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Statement40, ColumnMetaData40 and ParameterMetaData40&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Because of the removals, ClientJDBCObjectFactoryImpl40 had to be adjusted to&lt;br/&gt;
return plain Statement, ColumnMetaData and ParameterMetaData instances instead.&lt;/p&gt;

&lt;p&gt;Another consequence of these changes is that all the client data sources now&lt;br/&gt;
implement the JDBC 4.0 interface, so one doesn&apos;t have to use the data sources&lt;br/&gt;
whose names end with &quot;40&quot; to call JDBC 4.0 methods (of course, one can still use&lt;br/&gt;
those data sources too). I&apos;ve updated the class javadoc for the data sources to&lt;br/&gt;
say just that.&lt;/p&gt;

&lt;p&gt;There is a test, JDBC4FromJDBC3DataSourceTest, that tests explicitly that&lt;br/&gt;
calling JDBC 4.0 methods on a data source whose class name does not end with&lt;br/&gt;
&quot;40&quot;, fails. This test had to be updated to not expect failure when running&lt;br/&gt;
against the client data sources.&lt;/p&gt;

&lt;p&gt;I have only run the jdbc4 test suite on the patch so far. Will run the full&lt;br/&gt;
regression test suite on Java 5, 6 and 7.&lt;/p&gt;

&lt;p&gt;It probably makes sense to make similar changes on the embedded side, but first&lt;br/&gt;
we&apos;d need to make the JDBC 3.0 embedded interfaces compile with source level&lt;br/&gt;
1.5.&lt;/p&gt;</comment>
                            <comment id="13419569" author="knutanders" created="Fri, 20 Jul 2012 22:00:10 +0100"  >&lt;p&gt;Derbyall and suites.All passed on Java 5, 6 and 7 with the patch.&lt;/p&gt;</comment>
                            <comment id="13419762" author="knutanders" created="Sat, 21 Jul 2012 09:21:19 +0100"  >&lt;p&gt;Committed revision 1364042.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12600139">DERBY-5880</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12537334" name="derby-5868-1a.patch" size="56195" author="knutanders" created="Fri, 20 Jul 2012 12:21:43 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ak7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>