<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:52:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-982/DERBY-982.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-982] sysinfo api does not provide genus name for client</title>
                <link>https://issues.apache.org/jira/browse/DERBY-982</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The sysinfo api does not provide access to the genus name for client to allow applications to retrieve information from sysinfo about the client information.&lt;br/&gt;
&lt;a href=&quot;http://db.apache.org/derby/javadoc/publishedapi/org/apache/derby/tools/sysinfo.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/javadoc/publishedapi/org/apache/derby/tools/sysinfo.html&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Note: Currently ProductGenusNames has a genus name for network server but network server is closely tied to  the engine so should always have the same version.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12328961">DERBY-982</key>
            <summary>sysinfo api does not provide genus name for client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fuzzylogic">Andrew McIntyre</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Feb 2006 00:51:55 +0000</created>
                <updated>Mon, 14 May 2007 17:36:15 +0100</updated>
                            <resolved>Mon, 17 Jul 2006 22:14:37 +0100</resolved>
                                    <version>10.1.2.1</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12369387" author="fuzzylogic" created="Wed, 8 Mar 2006 13:18:48 +0000"  >&lt;p&gt;Here&apos;s a simple fix for this issue. I looked for tests for this, but I didn&apos;t find any. Let me know if you&apos;d like me to add some tests.&lt;/p&gt;

&lt;p&gt;Kathey, is this what you had in mind? If so, I&apos;ll commit.&lt;/p&gt;</comment>
                            <comment id="12369455" author="kmarsden" created="Wed, 8 Mar 2006 22:36:17 +0000"  >&lt;p&gt;The patch looks reasonable on a quick scan, but I did not try it.&lt;/p&gt;

&lt;p&gt;I wonder though if  &quot;dnc&quot;  makes sense for CLIENT.&lt;/p&gt;

&lt;p&gt;Yes!    think it would be great to have sysinfo tests for this and other functions.&lt;/p&gt;

&lt;p&gt;To the best of my knowledge, there are no sysinfo tests except for the incidental one testing NetworkServerControl.sysinfo().&lt;br/&gt;
I thought I had filed an issue to add tests for sysinfo a while back, but I don&apos;t seem to be able to find it now.&lt;/p&gt;

</comment>
                            <comment id="12369504" author="fuzzylogic" created="Thu, 9 Mar 2006 01:32:08 +0000"  >&lt;p&gt;The client info properties file is dnc.properties. So &quot;dnc&quot; needs to be passed to getProductVersionHolderFromMyEnv(genus). I called the field CLIENT because that seemed to make more sense for the public field. I&apos;ll write a test for the sysinfo public api before committing.&lt;/p&gt;</comment>
                            <comment id="12369530" author="fuzzylogic" created="Thu, 9 Mar 2006 03:07:56 +0000"  >&lt;p&gt;Attaching derby-982_v2.diff which includes a test for most of the public methods of the sysinfo api. Left out getInfo() because that would change in every environment tested. If someone can think of a reasonable way to test it, we can reenable it in the test.&lt;/p&gt;</comment>
                            <comment id="12419860" author="kmarsden" created="Sat, 8 Jul 2006 21:31:18 +0100"  >&lt;p&gt;Sorry andrew I never got back to this patch after you added the tests.  The tests look  fine to me too.  Thanks for the fix.&lt;/p&gt;</comment>
                            <comment id="12420855" author="kristwaa" created="Thu, 13 Jul 2006 20:10:42 +0100"  >&lt;p&gt;I had a look at the patch, and also downloaded it and tried running the test.&lt;br/&gt;
The patch applies cleanly, but the test fails.&lt;br/&gt;
Is it supposed to only be run on release/snapshot distributions? I&apos;m aksing, because it seems the test is dependent on a build target in &apos;tools/release/build.xml&apos;. I can&apos;t see the test have been enabled in any suites either.&lt;/p&gt;

&lt;p&gt;The diff tells me that only the getX() and getX(sysinfo.DBMS) calls are returning correct results. The rest return &quot;&amp;lt;no name found&amp;gt;&quot; or -1.&lt;br/&gt;
Since I&apos;m not sure if I&apos;m running the test correctly, can somebody that knows how to run the test report their findings?&lt;/p&gt;

&lt;p&gt;If the test is actually working (when run the correct way), I think the patch could be committed. It has been around for a while.&lt;/p&gt;</comment>
                            <comment id="12421028" author="fuzzylogic" created="Fri, 14 Jul 2006 15:14:46 +0100"  >&lt;p&gt;Hi Kristian,&lt;/p&gt;

&lt;p&gt;Thanks for the review!&lt;/p&gt;

&lt;p&gt;I think that the changes to sysinfo are correct, but the test needs to be revised. The approach I plan to take with the next version of this patch will compare the results for the version from the sysinfo API with the results for the version info as returned from DatabaseMetadata. I don&apos;t want to introduce another dependency on a version-specific master file, and I also do not want to introduce a test that exercises a tautology. That is, I don&apos;t want to directly compare the information used by sysinfo to generate its version information (the properties files in o.a.d.info) with itself.&lt;/p&gt;

&lt;p&gt;So, my plan for the next version of this test will be to compare the version information obtained through JDBC&apos;s DatabaseMetadata with the information obtained via the sysinfo API. I believe this is a proper test of the sysinfo API: that the version information for a specific version of Derby obtained through the sysinfo API is equivalent to the version obtained through other means. This will improve coverage for our testing of the sysinfo API (currently at 0%) as well as verify that the values obtained via the DatabaseMetadata interface are correct.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;

&lt;p&gt;andrew&lt;/p&gt;</comment>
                            <comment id="12421041" author="kristwaa" created="Fri, 14 Jul 2006 16:43:42 +0100"  >&lt;p&gt;Hi Andrew,&lt;/p&gt;

&lt;p&gt;Your plan sounds like a very good approach.&lt;br/&gt;
I&apos;ll have a look at the new patch when it comes.&lt;/p&gt;

&lt;p&gt;Are you planning on writing a JUnit test for this?&lt;/p&gt;</comment>
                            <comment id="12421299" author="fuzzylogic" created="Sat, 15 Jul 2006 09:22:21 +0100"  >&lt;p&gt;Attaching updated patch for this issue. Test has been rewritten as a junit test.&lt;/p&gt;

&lt;p&gt;Currently, the test for sysinfo.getInfo() is commented out because I was having a problem piping the output from the PrintWriter assigned to sysinfo.getInfo() to a BufferedReader that reads the first line from that PrintWriter. I&apos;m not that familiar with piped readers/writers, so perhaps someone can spot what I&apos;m doing wrong and fix that particular test. The problem, when the test is uncommented, is that the PipedReader hangs in a native method.&lt;/p&gt;

&lt;p&gt;That could be handled in a followup patch, though. As it is, I think this patch could be committed as-is for this issue.&lt;/p&gt;</comment>
                            <comment id="12421505" author="fuzzylogic" created="Mon, 17 Jul 2006 04:25:07 +0100"  >&lt;p&gt;Helps to read the javadoc. From the doc for PipedReader: &quot;Attempting to use both objects from a single thread is not recommended, as it may deadlock the thread.&quot;&lt;/p&gt;

&lt;p&gt;And that&apos;s what was happening on my machine. So, attaching updated patch which spawns a new thread to read the information from sysinfo.getInfo(), and reads and verifies the first line. Not a great test, but better than nothing.&lt;/p&gt;

&lt;p&gt;If there is no negative feedback, I plan to commit this patch 7/18 or 7/19.&lt;/p&gt;</comment>
                            <comment id="12421542" author="kristwaa" created="Mon, 17 Jul 2006 08:29:58 +0100"  >&lt;p&gt;Hi Andrew,&lt;/p&gt;

&lt;p&gt;I reviewed the version 4 patch. Looks good to me, but I have one minor comment on the JUnit test.&lt;br/&gt;
Although not too important for this test, it would be nice to have the constructor that takes a String argument. This makes it possible to select/run specific test methods from the/a suite method.&lt;/p&gt;

&lt;p&gt;Also, according to the JUnit documentation, the noarg constructor is there only to support serialization (which we don&apos;t require).&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="12421683" author="fuzzylogic" created="Mon, 17 Jul 2006 19:28:48 +0100"  >&lt;p&gt;Updated patch that changes the constructor for sysinfo_api.java to take a String.&lt;/p&gt;

&lt;p&gt;I will commit this shortly.&lt;/p&gt;</comment>
                            <comment id="12421719" author="fuzzylogic" created="Mon, 17 Jul 2006 22:14:37 +0100"  >&lt;p&gt;Committed patch -v5 to trunk with revision 422876.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12336980" name="derby-982-v4.diff" size="9684" author="fuzzylogic" created="Mon, 17 Jul 2006 04:25:07 +0100"/>
                            <attachment id="12337044" name="derby-982-v5.diff" size="9694" author="fuzzylogic" created="Mon, 17 Jul 2006 19:28:48 +0100"/>
                            <attachment id="12323903" name="derby-982.diff" size="2150" author="fuzzylogic" created="Wed, 8 Mar 2006 13:18:48 +0000"/>
                            <attachment id="12323944" name="derby-982_v2.diff" size="8233" author="fuzzylogic" created="Thu, 9 Mar 2006 03:07:56 +0000"/>
                            <attachment id="12336931" name="derby-982_v3.diff" size="8987" author="fuzzylogic" created="Sat, 15 Jul 2006 09:22:21 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Mar 2006 13:18:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22236</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12dj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>