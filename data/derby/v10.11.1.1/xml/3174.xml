<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:54:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3174/DERBY-3174.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3174] NetworkServerControlApiTest fails with java.security.AccessControlException if not run as first test</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3174</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;There appears to be a problem loading the test specific policy file for NetworkServerControlApiTest if it is not run as the first test in the suite.&lt;br/&gt;
Failure in the derby.log is:&lt;/p&gt;

&lt;p&gt;Trace directory changed to C:\test\system.&lt;/p&gt;

&lt;p&gt;access denied (java.io.FilePermission C:\test\system\Server3.trace write)&lt;/p&gt;

&lt;p&gt;java.security.AccessControlException: access denied (java.io.FilePermission C:\test\system\Server3.trace write)&lt;/p&gt;

&lt;p&gt;	at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)&lt;/p&gt;

&lt;p&gt;	at java.security.AccessController.checkPermission(AccessController.java:546)&lt;/p&gt;

&lt;p&gt;	at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)&lt;/p&gt;

&lt;p&gt;	at java.lang.SecurityManager.checkWrite(SecurityManager.java:962)&lt;/p&gt;

&lt;p&gt;	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:169)&lt;/p&gt;

&lt;p&gt;	at java.io.FileOutputStream.&amp;lt;init&amp;gt;(FileOutputStream.java:70)&lt;/p&gt;

&lt;p&gt;	at java.io.FileWriter.&amp;lt;init&amp;gt;(FileWriter.java:46)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DssTrace$1.run(DssTrace.java:181)&lt;/p&gt;

&lt;p&gt;	at java.security.AccessController.doPrivileged(Native Method)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DssTrace.startComBufferTrace(DssTrace.java:178)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.Session.initTrace(Session.java:138)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.Session.setTraceOn(Session.java:152)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.NetworkServerControlImpl.setTrace(NetworkServerControlImpl.java:3372)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.NetworkServerControlImpl.processCommands(NetworkServerControlImpl.java:1422)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.sessionInitialState(DRDAConnThread.java:630)&lt;/p&gt;

&lt;p&gt;	at org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:264)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12381869">DERBY-3174</key>
            <summary>NetworkServerControlApiTest fails with java.security.AccessControlException if not run as first test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Nov 2007 23:59:21 +0000</created>
                <updated>Sat, 10 Nov 2007 01:03:27 +0000</updated>
                            <resolved>Sat, 10 Nov 2007 01:03:28 +0000</resolved>
                                    <version>10.3.2.1</version>
                    <version>10.4.1.3</version>
                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12541379" author="kmarsden" created="Fri, 9 Nov 2007 17:15:14 +0000"  >&lt;p&gt;I have been looking at why there are problems reloading the policy file after the policy file has changed.  I think that we have to do a Policy.getPolicy().refresh() if the policy file changes. I am attaching a small program that shows the issue. Unless we refresh the policy the new policy does not go into affect.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/kmarsden/repro/reloadpolicy&amp;#93;&lt;/span&gt; java ReloadPolicy2&lt;br/&gt;
PASS: Able to set property&lt;br/&gt;
FAIL: Should not have been able to set property&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/kmarsden/repro/reloadpolicy&amp;#93;&lt;/span&gt; java ReloadPolicy2 refresh&lt;br/&gt;
PASS: Able to set property&lt;br/&gt;
PASS: Got expected exception:java.security.AccessControlException: Access denied (java.util.PropertyPermission my.value&lt;br/&gt;
write)&lt;/p&gt;

&lt;p&gt;So to attempt to resolve this issue, I plan to change SecurityManagerSetup.installSecurityManager to refresh the policy file after installing the security manager. This will mean granting getPolicy permission to derbyTesting.jar. Please let me know if this does not sound ok.&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;


</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12381987">DERBY-3183</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12369247" name="ReloadPolicy2.java" size="4303" author="kmarsden" created="Fri, 9 Nov 2007 17:15:14 +0000"/>
                            <attachment id="12369248" name="my1.policy" size="495" author="kmarsden" created="Fri, 9 Nov 2007 17:15:14 +0000"/>
                            <attachment id="12369249" name="my2.policy" size="499" author="kmarsden" created="Fri, 9 Nov 2007 17:15:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy10sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>