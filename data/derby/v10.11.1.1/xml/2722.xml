<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:17:22 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2722/DERBY-2722.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2722] Set correct collation type and derivation for result character string types from CHAR, VARCHAR and XMLSERIALIZE functions</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2722</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;As per the wiki page &lt;a href=&quot;http://wiki.apache.org/db-derby/BuiltInLanguageBasedOrderingDERBY-1478&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/db-derby/BuiltInLanguageBasedOrderingDERBY-1478&lt;/a&gt;, assign correct collation type for results of CHAR, VARCHAR and XMLSERIALIZE functions. The rule as copied from the wiki page is as follows&lt;br/&gt;
6)CHAR, VARCHAR and XMLSERIALIZE functions do not look like they are defined in the SQL spec. Their behavior can be defined as similar to CAST ie, the result character string of CHAR/VARCHAR/XMLSERIALIZE will have the same collation as current schema&apos;s character set. The collation derivation will be implicit. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12370473">DERBY-2722</key>
            <summary>Set correct collation type and derivation for result character string types from CHAR, VARCHAR and XMLSERIALIZE functions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2007 21:16:42 +0100</created>
                <updated>Wed, 1 Jul 2009 01:34:37 +0100</updated>
                            <resolved>Fri, 1 Jun 2007 19:56:23 +0100</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12500413" author="mamtas" created="Thu, 31 May 2007 18:01:33 +0100"  >&lt;p&gt;Committed attached patch DERBY2722_set_collation_for_xmlserialize_char_varchar_functions_v1_diff.txt with revision 543183. The commit comments are as follows&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2722&quot; title=&quot;Set correct collation type and derivation for result character string types from CHAR, VARCHAR and XMLSERIALIZE functions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2722&quot;&gt;&lt;del&gt;DERBY-2722&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
Committing changes which will make sure that we set the collation to current schema&apos;s collation for the return character string from XMLSERIALIZE. Don&apos;t have to make any changes for CHAR and VARCHAR functions because these functions gets translated into CAST by the parser and I have already checked in changes for the result of CAST to have the collation of current schema.&lt;/p&gt;</comment>
                            <comment id="12500442" author="mamtas" created="Thu, 31 May 2007 19:43:24 +0100"  >&lt;p&gt;Army found following issue with the test contributed by me for XML type&lt;/p&gt;

&lt;p&gt;Army wrote:&lt;br/&gt;
&amp;gt; +&lt;br/&gt;
&amp;gt; +      s.executeUpdate(&quot;set schema APP&quot;);&lt;br/&gt;
&amp;gt; +      checkLangBasedQuery(s, &quot;SELECT XMLSERIALIZE(x as CHAR(10)) &quot; +&lt;br/&gt;
&amp;gt; +             &quot; FROM xmlTable, SYS.SYSTABLES WHERE &quot; +&lt;br/&gt;
&amp;gt; +                     &quot; XMLSERIALIZE(x as CHAR(10)) = TABLENAME&quot;,&lt;br/&gt;
&amp;gt; +                     null);&lt;/p&gt;

&lt;p&gt;Just for the record, I think use of XMLSERIALIZE here will fail if the test&lt;br/&gt;
classpath does not include the required Xalan/JAXP classes (ex. Sun jdk15 with&lt;br/&gt;
no external XML jars).  It might be good to wrap this particular test inside of an&lt;/p&gt;

&lt;p&gt;    if (XML.classpathMeetsXMLReqs())&lt;br/&gt;
     ....&lt;/p&gt;

&lt;p&gt;where &quot;XML&quot; is junit/XML.java.  I think that&apos;s all that would be needed, though&lt;br/&gt;
I haven&apos;t actually tried it out...&lt;/p&gt;</comment>
                            <comment id="12500444" author="mamtas" created="Thu, 31 May 2007 19:45:43 +0100"  >&lt;p&gt;Commited fix for XML test as part of revision 543209 with following commit comments&lt;br/&gt;
&quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2722&quot; title=&quot;Set correct collation type and derivation for result character string types from CHAR, VARCHAR and XMLSERIALIZE functions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2722&quot;&gt;&lt;del&gt;DERBY-2722&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
Before making call to XMLSERIALIZE, we should check if the classpath includes the required Xalan/JAXP classes. Otherwise the test will fail with jvms, where these classes can&apos;t be found.&lt;br/&gt;
&quot;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12368325">DERBY-2599</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12358636" name="DERBY2722_set_collation_for_xmlserialize_char_varchar_functions_v1_diff.txt" size="4978" author="mamtas" created="Thu, 31 May 2007 18:01:33 +0100"/>
                            <attachment id="12358637" name="DERBY2722_set_collation_for_xmlserialize_char_varchar_functions_v1_stat.txt" size="166" author="mamtas" created="Thu, 31 May 2007 18:01:33 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0swf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>