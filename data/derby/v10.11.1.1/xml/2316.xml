<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:07:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-2316/DERBY-2316.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-2316] Convert compatibility/testScript.xml to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-2316</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I have started converting compatibility/testScript.xml to JUnit to&lt;br/&gt;
1) be able to more dynamically specify which combinations to test, &lt;br/&gt;
2) get standard JUnit reports from the test, and&lt;br/&gt;
3) more easily include the compatibility test in the regression test runs.&lt;/p&gt;


&lt;p&gt;I plan to use a property file (patterened after the current ant.property file for &lt;br/&gt;
the compatibility test), to specify jvm and derby library locations.&lt;/p&gt;


&lt;p&gt;With the growing number of jvm and derby versions I also think that it should be &lt;br/&gt;
possible to specify a number of different kinds of compatibility test combinations,&lt;br/&gt;
for example:&lt;/p&gt;

&lt;p&gt;a) the current way, which is all combinations of derby and jvm on both &lt;br/&gt;
   server and client.                                            &lt;span class=&quot;error&quot;&gt;&amp;#91;(derbys*jvms)*(derbys*jvms)&amp;#93;&lt;/span&gt;&lt;br/&gt;
b) Current trunk client and jvms  vs.  all server derbys and jvms. &lt;span class=&quot;error&quot;&gt;&amp;#91;(1*jvms)*(derbys*jvms)&amp;#93;&lt;/span&gt;&lt;br/&gt;
c) All clients and jvms  vs.  current trunk server and jvms.        &lt;span class=&quot;error&quot;&gt;&amp;#91;(derbys*jvms)*(1*jvms)&amp;#93;&lt;/span&gt;&lt;br/&gt;
d) Exact specification of the combinations to be tested.         &lt;span class=&quot;error&quot;&gt;&amp;#91;(N*M)*(X*Y)&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Which kind of test to run should be specified in the property file.&lt;/p&gt;
</description>
                <environment>All</environment>
        <key id="12362437">DERBY-2316</key>
            <summary>Convert compatibility/testScript.xml to JUnit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olesolberg">Ole Solberg</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Feb 2007 15:17:02 +0000</created>
                <updated>Thu, 2 May 2013 03:29:07 +0100</updated>
                            <resolved>Thu, 29 Nov 2007 16:58:16 +0000</resolved>
                                    <version>10.3.1.4</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12482412" author="olesolberg" created="Tue, 20 Mar 2007 15:29:05 +0000"  >&lt;p&gt;First version of java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/CompatibilityCombinations.java which is intended as a replacement for java/testing/org/apache/derbyTesting/functionTests/tests/junitTests/compatibility/testScript.xml.&lt;/p&gt;

&lt;p&gt;CompatibilityCombinations.java reads paths for Derby versions and Jvm versions from the file &apos;compatibilitytest.properties&apos; in &apos;$&lt;/p&gt;
{user.dir}&apos;.&lt;br/&gt;
An example of &apos;compatibilitytest.properties&apos; is included in the patch.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Test results are reported as&lt;br/&gt;
Attempted &apos;embedded vs. network client&apos; tests: 9, OK: 9, Failed: 0, Time: 54.0 seconds&lt;br/&gt;
Attempted &apos;server - network client&apos; tests: 324, OK: 324, Failed: 0, Time: 1132.0 seconds&lt;br/&gt;
&lt;br/&gt;
More detailed reports are found in &apos;${user.dir}
&lt;p&gt;/system&apos; in files following this name pattern:&lt;/p&gt;

&lt;p&gt;1. Embedded_compatDB_summary.log&lt;br/&gt;
which is a summary of &lt;br/&gt;
1.n Embedded_TrunkVMj15lib_vs_ClientVM-j15lib_clientTrunk report files&lt;br/&gt;
and&lt;br/&gt;
2. ServerClient_compatDB_summary.log&lt;br/&gt;
which is a summary of &lt;br/&gt;
2.m ServerVM-j16lib_server10.1.2.1_vs_ClientVM-j14lib_clientTrunk report files&lt;/p&gt;


&lt;p&gt;I ran &lt;br/&gt;
&apos;java -Djava.security.policy=&quot;&amp;lt;NONE&amp;gt;&quot; junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilityCombinations&apos;&lt;br/&gt;
using derby-2316_v1.example_compatibilitytest.properties as compatibilitytest.properties &lt;br/&gt;
on Linux 2.6.17-1.2142_FC4.&lt;br/&gt;
Result:&lt;br/&gt;
Attempted &apos;embedded vs. network client&apos; tests: 9, OK: 9, Failed: 0, Time: 54.0 seconds&lt;br/&gt;
Attempted &apos;server - network client&apos; tests: 324, OK: 324, Failed: 0, Time: 1132.0 seconds&lt;/p&gt;



&lt;p&gt;CompatibilityCombinations.java still contains lots of &apos;DEBUG&apos; statements and the javadoc could probably be expanded...&lt;/p&gt;
</comment>
                            <comment id="12485029" author="rhillegas" created="Thu, 29 Mar 2007 00:40:52 +0100"  >&lt;p&gt;Thanks for this improvement, Ole! Replacing the compatibiltiy driver with a JUnit program will make it easier to add new vms and derby revs to the tested combinations. I have committed this first slug of work at subversion revision 523505.&lt;/p&gt;

&lt;p&gt;I have some suggestions for further improvements:&lt;/p&gt;

&lt;p&gt;1) I found that I had to create a subdirectory named &quot;system&quot; in order for the tests to run. I think that the test should do this for me. If for some reason that is not possible, then I think that the javadoc should explain that this preliminary step is needed.&lt;/p&gt;

&lt;p&gt;2) I think that the javadoc should explain that you can get verbose output by setting -Ddrb.tests.debug=true. Later on, we should change this verbose flag to be the same one used by the other JUnit tests, viz., derby.tests.debug.&lt;/p&gt;

&lt;p&gt;3) It would be great to see some more defensive coding which fails the tests early if the environmental variables in compatibilitytest.properties point at garbage. I believe that the old ant harness does this kind of checking. I started out with a typo in the path to my junit.jar and this caused the tests to fail and leave a directory of empty diagnostic files. It took a while to figure out what was broken.&lt;/p&gt;

&lt;p&gt;4) It would be nice if this test could follow the excellent pattern now used by the JUnitized upgrade tests, i.e., require that the old releases live under a directory pointed to by derbyTesting.oldReleasePath. That would eliminate a number of fragile variables in compatibilitytest.properties.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12485096" author="olesolberg" created="Thu, 29 Mar 2007 08:32:38 +0100"  >&lt;p&gt;Thanks for reviewing and committing Rick!&lt;/p&gt;

&lt;p&gt;I will follow up your suggestions for improvements.&lt;/p&gt;


&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12502422" author="olesolberg" created="Thu, 7 Jun 2007 17:42:51 +0100"  >&lt;p&gt;The attached patch(derby-2316_v2.diff.txt) changes &apos;..../tests/junitTests/compatibility/CompatibilityCombinations.java&apos; to allow other testsuites than jdbcSuite (org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilitySuite) to be used in testing Derby client version vs. Derby server version compatibility.&lt;/p&gt;

&lt;p&gt;The testsuite to be used is now specified in the file &apos;compatibilitytest.properties&apos;.&lt;/p&gt;

&lt;p&gt;I need this functionality specifically in testing BlobClob client version vs. server version compatibility using &apos;..../tests/jdbcapi/BlobClob4BlobTest.java&apos; in the CompatibilityCombinations framework.&lt;/p&gt;


&lt;p&gt;I have also taken care of Rick&apos;s suggestion for further improvements 1).&lt;/p&gt;


&lt;p&gt;The patch has been tested running&lt;br/&gt;
java -Xmx256m -Djava.security.policy=&quot;&amp;lt;NONE&amp;gt;&quot; junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.CompatibilityCombinations .&lt;/p&gt;


&lt;p&gt;----------&lt;br/&gt;
I will submit the neccessary modifications to run &apos;..../tests/jdbcapi/BlobClob4BlobTest.java&apos; in the CompatibilityCombinations framework in a separate JIRA.&lt;/p&gt;</comment>
                            <comment id="12502427" author="djd" created="Thu, 7 Jun 2007 18:01:36 +0100"  >&lt;p&gt;Are there still plans to make these tests like any other (new) Junit test?&lt;/p&gt;

&lt;p&gt;At least some default setup that would run using the old release jars like the upgrade test.&lt;/p&gt;

&lt;p&gt;The tests could allow more options, but some easy to run case would be great.&lt;/p&gt;</comment>
                            <comment id="12502740" author="olesolberg" created="Fri, 8 Jun 2007 11:05:21 +0100"  >&lt;p&gt;Yes, the plan is definitly to make these tests like the other new JUnit tests, and to follow the pattern from the upgrade tests with respect to how old release jars are found.&lt;br/&gt;
It appears I will have time to work on this now.&lt;/p&gt;

&lt;p&gt;For the first version of  &apos;..../tests/jdbcapi/BlobClob4BlobTest.java&apos; in the CompatibilityCombinations framework I intend to use the current version of &quot;CompatibilityCombinations&quot;. This is something I have running in my sandbox now, and should not need rework when modifying the CompatibilityCombinations framework.&lt;/p&gt;</comment>
                            <comment id="12503797" author="olesolberg" created="Tue, 12 Jun 2007 10:27:07 +0100"  >&lt;p&gt;Attaching derby-2316-v3.diff.txt replacing derby-2316-v2.diff.txt.&lt;br/&gt;
Identical to derby-2316-v2.diff.txt but with the addition of modifications in&lt;br/&gt;
testOutput(): extracting both OK and Failure/Error info from each test combination&lt;br/&gt;
into summary report.&lt;/p&gt;</comment>
                            <comment id="12509217" author="knutanders" created="Fri, 29 Jun 2007 23:36:02 +0100"  >&lt;p&gt;The patch looks good to me.&lt;br/&gt;
Committed revision 552051.&lt;/p&gt;</comment>
                            <comment id="12546775" author="dyret" created="Thu, 29 Nov 2007 15:55:23 +0000"  >&lt;p&gt;I see that a patch was committed in June. Can we resolve/close this issue now?&lt;/p&gt;</comment>
                            <comment id="12546797" author="olesolberg" created="Thu, 29 Nov 2007 16:58:16 +0000"  >&lt;p&gt;I will create a new issue for further work to use old jars like the upgrade tests do.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12474980">DERBY-4817</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12383695">DERBY-3240</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12371455">DERBY-2807</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12353742" name="derby-2316_v1.diff.txt" size="59814" author="olesolberg" created="Tue, 20 Mar 2007 15:29:05 +0000"/>
                            <attachment id="12353743" name="derby-2316_v1.example_compatibilitytest.properties" size="2882" author="olesolberg" created="Tue, 20 Mar 2007 15:29:05 +0000"/>
                            <attachment id="12359195" name="derby-2316_v2.diff.txt" size="26066" author="olesolberg" created="Thu, 7 Jun 2007 17:42:51 +0100"/>
                            <attachment id="12359485" name="derby-2316_v3.diff.txt" size="27179" author="olesolberg" created="Tue, 12 Jun 2007 10:27:07 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Mar 2007 23:40:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30379</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0jzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>