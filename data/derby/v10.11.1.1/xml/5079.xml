<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:20:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5079/DERBY-5079.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5079] DERBY-4984 caused a regression which will not allow users to drop a table if the table was involved in a trigger action rebind during ALTER TABLE DROP COLUMN</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5079</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4984&quot; title=&quot;ALTER TABLE DROP COLUMN may leave triggers invalid even if they are not using the column getting dropped.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4984&quot;&gt;&lt;del&gt;DERBY-4984&lt;/del&gt;&lt;/a&gt; has introduced a regression which adds rows into SYSDEPENDS which are incorrect. The error I think was caused when before doing a rebind of trigger action, I made the trigger table as the current dependent in the dependency system and hence all the dependencies required by the trigger action got associated with that trigger table and hence causing the errorneous behavior. I will work on this asap. The fix went into trunk and 10.7. I will add a test case for this in the jira and will also add a test case in our junit test&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500077">DERBY-5079</key>
            <summary>DERBY-4984 caused a regression which will not allow users to drop a table if the table was involved in a trigger action rebind during ALTER TABLE DROP COLUMN</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Mar 2011 17:38:49 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:13 +0100</updated>
                            <resolved>Tue, 8 Mar 2011 18:16:14 +0000</resolved>
                                    <version>10.7.1.4</version>
                    <version>10.8.1.2</version>
                                    <fixVersion>10.7.1.4</fixVersion>
                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13000980" author="mamtas" created="Tue, 1 Mar 2011 17:44:18 +0000"  >&lt;p&gt;Following is the ij script showing the problem&lt;br/&gt;
java -Dij.exceptionTrace=true org.apache.derby.tools.ij&lt;br/&gt;
connect &apos;jdbc:derby:c:/dellater/db1;create=true&apos;;&lt;br/&gt;
CREATE TABLE ATDC_15_TAB1(a1 int, b1 int);&lt;br/&gt;
CREATE TABLE ATDC_15_TAB2(a2 int, b2 int);&lt;br/&gt;
insert into ATDC_15_TAB1 values(1,11);&lt;br/&gt;
insert into ATDC_15_TAB2 values(1,11);&lt;br/&gt;
create trigger atdc_15_trigger_1 after update &lt;br/&gt;
                on atdc_15_tab1 REFERENCING NEW AS newt &lt;br/&gt;
                for each row &lt;br/&gt;
                update atdc_15_tab2 set b2 = newt.b1;&lt;br/&gt;
select * from sys.sysdepends;&lt;br/&gt;
alter table atdc_15_tab1 drop column a1 restrict;&lt;br/&gt;
select * from sys.sysdepends;&lt;br/&gt;
drop table ATDC_15_TAB1;&lt;br/&gt;
drop table ATDC_15_TAB2;&lt;/p&gt;

&lt;p&gt;The drop of ATDC_15_TAB2 fails with following error&lt;br/&gt;
ERROR 42X94: Table &apos;23ce809c-012e-7281-172d-0000003c7d78&apos; does not exist.&lt;/p&gt;

&lt;p&gt;The first select * from sys.sysdepends shows 5 rows which are correct and as follows&lt;br/&gt;
select * from sys.sysdepends;&lt;br/&gt;
DEPENDENTID                         |DEPENDENTFINDER|PROVIDERID             |PROVIDERFINDER&lt;br/&gt;
---------------------------------------------------------------------------------------------------------&lt;br/&gt;
560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;|846c00a0-012e-7281-172d-0000003c7d78|ColumnsInTable&lt;br/&gt;
560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;|8c9400a1-012e-7281-172d-0000003c7d78|Conglomerate&lt;br/&gt;
0ddd00a9-012e-7281-172d-0000003c7d78|Trigger        |560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;&lt;br/&gt;
0ddd00a9-012e-7281-172d-0000003c7d78|Trigger        |23ce809c-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;|23ce809c-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
5 rows selected&lt;/p&gt;

&lt;p&gt;But after the ALTER TABLE DROP COLUMN, it shows 3 extra rows, which is not correct&lt;br/&gt;
select * from sys.sysdepends;&lt;br/&gt;
560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;|846c00a0-012e-7281-172d-0000003c7d78|ColumnsInTable&lt;br/&gt;
560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;|8c9400a1-012e-7281-172d-0000003c7d78|Conglomerate&lt;br/&gt;
0ddd00a9-012e-7281-172d-0000003c7d78|Trigger        |560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;&lt;br/&gt;
0ddd00a9-012e-7281-172d-0000003c7d78|Trigger        |23ce809c-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
560740aa-012e-7281-172d-0000003c7d78|StoredPrepared&amp;amp;|23ce809c-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
23ce809c-012e-7281-172d-0000003c7d78|Table          |846c00a0-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
23ce809c-012e-7281-172d-0000003c7d78|Table          |846c00a0-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
23ce809c-012e-7281-172d-0000003c7d78|Table          |846c00a0-012e-7281-172d-0000003c7d78|Table&lt;br/&gt;
8 rows selected&lt;/p&gt;
</comment>
                            <comment id="13001662" author="mamtas" created="Wed, 2 Mar 2011 21:26:14 +0000"  >&lt;p&gt;I have added some disabled test cases for this jira. If those test changes are uncommented, the test will fail. I am working on the fix and hope to have a fix soon to fix this problem.s&lt;/p&gt;</comment>
                            <comment id="13003278" author="mamtas" created="Mon, 7 Mar 2011 06:33:50 +0000"  >&lt;p&gt;Fixed the problem in trunk. will work on migrating it to 10.7 next.&lt;/p&gt;</comment>
                            <comment id="13685167" author="knutanders" created="Mon, 17 Jun 2013 10:19:13 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12496736">DERBY-4984</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 17 Jun 2013 09:19:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0gnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>