<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:38:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5022/DERBY-5022.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5022] [patch] override equals correctly</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5022</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;code implements equals w/o an Object parm. Calling code that doesn&apos;t have first class signature of FormatableBitSet will not work as expected. Properly override equals to fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498330">DERBY-5022</key>
            <summary>[patch] override equals correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dbrosius@apache.org">Dave Brosius</assignee>
                                    <reporter username="dbrosius@apache.org">Dave Brosius</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Feb 2011 07:41:52 +0000</created>
                <updated>Tue, 19 Apr 2011 13:39:14 +0100</updated>
                            <resolved>Sun, 13 Feb 2011 07:11:43 +0000</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="12993483" author="espinha" created="Fri, 11 Feb 2011 13:24:50 +0000"  >&lt;p&gt;This patch looks good and compiles cleanly. I&apos;ll run regressions before committing.&lt;/p&gt;</comment>
                            <comment id="12993904" author="espinha" created="Sat, 12 Feb 2011 14:26:17 +0000"  >&lt;p&gt;I&apos;m hitting a few regressions with this patch, but when ran individually the tests pass. Will investigate.&lt;/p&gt;</comment>
                            <comment id="12993942" author="espinha" created="Sat, 12 Feb 2011 15:54:58 +0000"  >&lt;p&gt;The failures are consistent when the whole jdbcapi._Suite is ran. There are also other failures resulting from this test, which are all included in the fail/ folder within this attachment.&lt;/p&gt;

&lt;p&gt;I&apos;m unassigning myself and ticking off patch available.&lt;/p&gt;</comment>
                            <comment id="12993944" author="bryanpendleton" created="Sat, 12 Feb 2011 16:04:08 +0000"  >&lt;p&gt;I think maybe you should leave &quot;Patch available&quot; checked, as the patch is still available, though it&apos;s clearly not ready for commit as is.&lt;/p&gt;

&lt;p&gt;Your observations about the behavior changes that are caused by the patch are important to record; can you attach any information about the test failures? Can you briefly summarize the behavior that was altered by the patch?&lt;/p&gt;

&lt;p&gt;Do you have any theories about how the patch caused these changes in behavior?&lt;/p&gt;</comment>
                            <comment id="12993945" author="bryanpendleton" created="Sat, 12 Feb 2011 16:04:52 +0000"  >&lt;p&gt;Oh silly me, I see that you did attach your test results. Sorry for missing that.&lt;/p&gt;</comment>
                            <comment id="12993946" author="bryanpendleton" created="Sat, 12 Feb 2011 16:07:42 +0000"  >&lt;p&gt;I had a quick look at your test results; they seem to have to do with driver auto-loading, and with the UpdateStatistics test. I&apos;ve seen some traffic on other Derby issues recently indicating that these tests are currently unreliable with the head of trunk; is it possible that your test results are problematic even without the patch applied?&lt;/p&gt;</comment>
                            <comment id="12993949" author="dbrosius@apache.org" created="Sat, 12 Feb 2011 16:17:50 +0000"  >&lt;p&gt;this would imply that some code is now finding two FormattableBitSets equal when they weren&apos;t before, as it was only expecting reference equality before.&lt;/p&gt;

&lt;p&gt;If that is what is wanted, the comparison should be changed to&lt;/p&gt;

&lt;p&gt;mybitset == anotherbitset&lt;/p&gt;


</comment>
                            <comment id="12993952" author="espinha" created="Sat, 12 Feb 2011 16:42:25 +0000"  >&lt;p&gt;@ Bryan,&lt;/p&gt;

&lt;p&gt;I haven&apos;t tested it without the patch applied but I&apos;m doing that now. It seems that in the meanwhile, Lily has committed a patch that touches those classes (which I have only now picked up on my trunk) so maybe the trunk was indeed having issues. I&apos;ll comment again when I have more results.&lt;/p&gt;</comment>
                            <comment id="12993959" author="espinha" created="Sat, 12 Feb 2011 17:17:41 +0000"  >&lt;p&gt;Aha! Lily&apos;s patches seem to have fixed it. I&apos;m going to give suites.All another spin anyway, just to make sure everything runs cleanly with the patch.&lt;/p&gt;</comment>
                            <comment id="12993995" author="lilywei" created="Sat, 12 Feb 2011 22:05:53 +0000"  >&lt;p&gt;Hi Tiago: Just FYI. I run Suites.all before and after my check-in (svn 1069981). I have 6 failures, 377 errors and 5 failures and 388 errors. Most of the errors due to database &apos;wombat&apos; already existed. If I may guess, it is because of testStatsCreatedOnGrowthThenDeleteDb. It had failure information like: &lt;br/&gt;
2) testStatsCreatedOnGrowthThenDeleteDb(org.apache.derbyTesting.functionTests.te&lt;br/&gt;
sts.store.AutomaticIndexStatisticsTest)junit.framework.AssertionFailedError: Fai&lt;br/&gt;
led to delete 3 files (root=c:\derby3\trunk\testallpackages\system\wombat: c:\de&lt;br/&gt;
rby3\trunk\testallpackages\system\wombat\seg0\c580.dat (isDir=false, canRead=tru&lt;br/&gt;
e, canWrite=true, size=65536), c:\derby3\trunk\testallpackages\system\wombat\seg&lt;br/&gt;
0 (isDir=true, canRead=true, canWrite=true, size=65536), c:\derby3\trunk\testall&lt;br/&gt;
packages\system\wombat (isDir=true, canRead=true, canWrite=true, size=4096)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertDirectoryDeleted&lt;br/&gt;
(BaseJDBCTestCase.java:1496)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.store.AutomaticIndexStati&lt;br/&gt;
sticsTest.testStatsCreatedOnGrowthThenDeleteDb(AutomaticIndexStatisticsTest.java&lt;br/&gt;
sticsTest.testStatsCreatedOnGrowthThenDeleteDb(AutomaticIndexStatisticsTest.java&lt;br/&gt;
:120)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.&lt;br/&gt;
java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces&lt;br/&gt;
sorImpl.java:25)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;/p&gt;

&lt;p&gt;        I attached both output file for you to reference. Hope this help, thanks!&lt;/p&gt;</comment>
                            <comment id="12994020" author="espinha" created="Sun, 13 Feb 2011 07:11:27 +0000"  >&lt;p&gt;I only saw your comment now Lily, but on my end, with your patch (and with Dave&apos;s patch), suites.All runs cleanly without failures or errors.&lt;/p&gt;

&lt;p&gt;I&apos;ve committed it with revision 1070190.&lt;/p&gt;

&lt;p&gt;Thanks, Dave!&lt;/p&gt;</comment>
                            <comment id="12994120" author="lilywei" created="Sun, 13 Feb 2011 16:47:31 +0000"  >&lt;p&gt;You are right, Tiago. suites.all also run clean with tinderbox_trunk16 1069981 and tinderbox_trunk16 1070190. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12470949" name="allpackages_1069981.txt" size="2392857" author="lilywei" created="Sat, 12 Feb 2011 22:05:53 +0000"/>
                            <attachment id="12470948" name="allpackages_before1069981.txt" size="2190292" author="lilywei" created="Sat, 12 Feb 2011 22:05:53 +0000"/>
                            <attachment id="12470843" name="override_equals_correctly.diff" size="881" author="dbrosius@apache.org" created="Fri, 11 Feb 2011 07:42:10 +0000"/>
                            <attachment id="12470941" name="test.tgz" size="4059302" author="espinha" created="Sat, 12 Feb 2011 15:54:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10367"><![CDATA[Deviation from standard]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Feb 2011 13:24:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0gm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36510</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>