<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5014/DERBY-5014.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5014] Tests should restore the timeout values to default after they are done running.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5014</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;There are still couple more tests that change the lock time out during the test run but don&apos;t restore it to the default at the&lt;br/&gt;
end of the test. Knut already fixed this behavior for SetTransactionIsolationTest.java and ResultSetMiscTest.java as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4273&quot; title=&quot;A lock could not be obtained within the time requested error in testBTreeForwardScan_fetchRows_resumeAfterWait_nonUnique_split&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4273&quot;&gt;&lt;del&gt;DERBY-4273&lt;/del&gt;&lt;/a&gt; &lt;br/&gt;
Following are some additional tests that should be fixed &lt;br/&gt;
1)ErrorMessageTest.java 2)StressMultiTest.java 3)Sttest.java 4)SysinfoTest.java 5)DatabaseMetaDataTest.java 6)ResultSetsFromPreparedStatementTest.java&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498040">DERBY-5014</key>
            <summary>Tests should restore the timeout values to default after they are done running.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="siddharthsrivastava">Siddharth Srivastava</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                            <label>derby_backport_reject_10_5</label>
                    </labels>
                <created>Tue, 8 Feb 2011 22:57:12 +0000</created>
                <updated>Fri, 15 Nov 2013 08:15:17 +0000</updated>
                            <resolved>Thu, 13 Sep 2012 00:20:04 +0100</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13004569" author="siddharthsrivastava" created="Wed, 9 Mar 2011 14:30:49 +0000"  >&lt;p&gt;Any views on including this as Derby Test and Fix project in GSoC 2011 ?  (I am considering it to be in mine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;</comment>
                            <comment id="13004676" author="kmarsden" created="Wed, 9 Mar 2011 17:37:09 +0000"  >&lt;p&gt;I think this would be great as part of a GSOC test and fix project or even before if you want to start working on it.&lt;br/&gt;
showing in your application that you have already started working on some of the issues is always good.&lt;/p&gt;
</comment>
                            <comment id="13037777" author="siddharthsrivastava" created="Mon, 23 May 2011 08:48:20 +0100"  >&lt;p&gt;Just went through ErrorMessageTest.java and StressMultiTest.java. Don&apos;t they already restore the default timeout and property values or I am misunderstanding something ?&lt;br/&gt;
They use DatabasePropertyTestSetup which resets the values on tearDown. &lt;/p&gt;</comment>
                            <comment id="13037797" author="knutanders" created="Mon, 23 May 2011 09:37:56 +0100"  >&lt;p&gt;Hi Siddharth,&lt;/p&gt;

&lt;p&gt;ErrorMessageTest and StressMultiTest look fine to me too. I don&apos;t think those tests need to be changed. Sttest is a standalone test that doesn&apos;t run under the JUnit framework, so I don&apos;t think resetting the properties is necessary in that test either. I haven&apos;t checked the last three tests mentioned in the bug description.&lt;/p&gt;</comment>
                            <comment id="13041532" author="siddharthsrivastava" created="Tue, 31 May 2011 12:43:44 +0100"  >&lt;p&gt;Attached is the fix for this issue.&lt;/p&gt;

&lt;p&gt;While fixing this I was thinking, where are the default values specified ? &lt;br/&gt;
Is it feasible to have a test to check if the default values have been reset or not ?&lt;/p&gt;</comment>
                            <comment id="13041731" author="espinha" created="Tue, 31 May 2011 19:28:40 +0100"  >&lt;p&gt;Hi Siddharth,&lt;/p&gt;

&lt;p&gt;It seems like the patch has passed but I have a few questions/remarks about the patch.&lt;/p&gt;

&lt;p&gt;1) As mentioned before, please avoid whitespace changes. In this patch, we&apos;re patching DatabasePropertyTestSetup.java unnecessarily.&lt;/p&gt;

&lt;p&gt;2) Why do we need to import java.util.Properties into ResultSetsFromPreparedStatementTest.java?&lt;/p&gt;

&lt;p&gt;In the end, is SysinfoTest.java the only one that needs to be changed? If so and if no one else objects, I&apos;m going to change the patch to remove the unnecessary chunks and commit it.&lt;/p&gt;

&lt;p&gt;I should also mention (and Siddharth, in the future it&apos;s also good practice to do so on JIRA upon posting a patch) that regressions were ran (suites.All) for this patch and it succeeded without any failures.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;As for what you mentioned about creating a test to check whether the default values have been reset, I think that can be very difficult. The main challenge is: &lt;b&gt;when&lt;/b&gt; do you run this test? Would you run it after every single test in JUnit? That would be incredibly time consuming.&lt;/p&gt;

&lt;p&gt;Since these are just tests, we usually just trust that: if suites.All passes, then all the values are being reset, or if they aren&apos;t, it&apos;s not serious enough that it is not making the whole suite collapse.&lt;/p&gt;</comment>
                            <comment id="13043019" author="espinha" created="Thu, 2 Jun 2011 21:06:32 +0100"  >&lt;p&gt;Removed unnecessary patch hunks.&lt;/p&gt;</comment>
                            <comment id="13043028" author="espinha" created="Thu, 2 Jun 2011 21:21:46 +0100"  >&lt;p&gt;There&apos;s something I just noticed and I&apos;d like to clear before committing the patch. There&apos;s two more tests that weren&apos;t converted nor mentioned here in the comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ResultSetsFromPreparedStatementTest.java&lt;br/&gt;
This one seems to have its own mechanism to restore the lock timeout to the default.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Mamta &amp;amp; Knut, did this test get flagged somewhere? On a very quick visual inspection, it seems like the timeouts are restored.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;DatabaseMetaDataTest.java&lt;br/&gt;
This test already uses the DatabasePropertyTestSetup decorator. Why was it included in this issue?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13044743" author="knutanders" created="Mon, 6 Jun 2011 09:12:52 +0100"  >&lt;p&gt;I don&apos;t think there&apos;s anything that needs to be fixed in those two tests. Perhaps it would have been better if ResultSetsFromPreparedStatementTest had cleared the timeout property (by setting it to NULL) instead of setting it to 60, since that would do the right thing even if we at some point change the default timeout, but at least it does reset the timeout to the current default.&lt;/p&gt;</comment>
                            <comment id="13045123" author="espinha" created="Mon, 6 Jun 2011 22:18:57 +0100"  >&lt;p&gt;suites.All was a go, so I went ahead and committed this patch with revision 1132747.&lt;/p&gt;</comment>
                            <comment id="13086550" author="kmarsden" created="Wed, 17 Aug 2011 20:55:11 +0100"  >&lt;p&gt;I think this would be a good candidate for backport&lt;/p&gt;</comment>
                            <comment id="13089054" author="myrna" created="Mon, 22 Aug 2011 22:53:00 +0100"  >&lt;p&gt;reopening for backport to 10.8&lt;/p&gt;</comment>
                            <comment id="13089085" author="myrna" created="Mon, 22 Aug 2011 23:25:35 +0100"  >&lt;p&gt;backported this change to 10.8 with revision 1160474. &lt;/p&gt;</comment>
                            <comment id="13823448" author="knutanders" created="Fri, 15 Nov 2013 08:15:17 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12481277" name="d5014_1.diff" size="2024" author="espinha" created="Thu, 2 Jun 2011 21:06:32 +0100"/>
                            <attachment id="12480929" name="d5014_1.diff" size="3363" author="siddharthsrivastava" created="Tue, 31 May 2011 12:43:44 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Mar 2011 14:30:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10426"><![CDATA[Known fix]]></customfieldvalue>
    <customfieldvalue key="10423"><![CDATA[Newcomer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0a27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>