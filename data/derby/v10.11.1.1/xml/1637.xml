<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:47:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1637/DERBY-1637.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1637] OutBufferedStream.java fails on ibm131/jdk131 jvms.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1637</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;OutBufferedStream test fails with ibm131 and jdk131. I&apos;ll attach the report file to this issue.&lt;/p&gt;</description>
                <environment>ibm131, sun jdk131 ,windows. derby jars are 10.2.0.5 alpha - (426734)&lt;br/&gt;
</environment>
        <key id="12347209">DERBY-1637</key>
            <summary>OutBufferedStream.java fails on ibm131/jdk131 jvms.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="skambha">Sunitha Kambhampati</assignee>
                                    <reporter username="skambha">Sunitha Kambhampati</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Aug 2006 04:36:14 +0100</created>
                <updated>Mon, 29 Jun 2009 23:57:51 +0100</updated>
                            <resolved>Wed, 9 Aug 2006 19:54:52 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12425432" author="skambha" created="Thu, 3 Aug 2006 04:38:47 +0100"  >&lt;p&gt;The report file.&lt;/p&gt;</comment>
                            <comment id="12425536" author="naka" created="Thu, 3 Aug 2006 15:49:14 +0100"  >&lt;p&gt;Hello Sunitha.&lt;/p&gt;

&lt;p&gt;This error seems to have something to do with my patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-326&quot; title=&quot;Improve streaming of large objects for network server and client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-326&quot;&gt;&lt;del&gt;DERBY-326&lt;/del&gt;&lt;/a&gt;...&lt;/p&gt;

&lt;p&gt;I wanted to make this phenomena reappair in my develop environment.&lt;br/&gt;
However, I couldn&apos;t execute jdk131 at my linux environment ...&lt;/p&gt;

&lt;p&gt;Can you upload stacktrace of Exception and so on ?&lt;/p&gt;</comment>
                            <comment id="12425646" author="skambha" created="Fri, 4 Aug 2006 01:28:18 +0100"  >&lt;p&gt;Hi Tomohito, &lt;/p&gt;

&lt;p&gt;Unfortunately, there is no tmp files on the test machine where this test failed. But I am attaching the directory that was available.  &lt;/p&gt;

&lt;p&gt;If I can get this to repro on my machine, I&apos;ll post the information to the jira. Thanks. &lt;/p&gt;

&lt;p&gt;Sunitha. &lt;/p&gt;</comment>
                            <comment id="12425793" author="skambha" created="Fri, 4 Aug 2006 18:19:59 +0100"  >&lt;p&gt;This test is hanging on my machine (win2k, T40 laptop, ibm131). with  derby jars 10.2.0.5 alpha - (428044M)&lt;/p&gt;

&lt;p&gt;I did a control/pause break and I am attaching javacore dump files. &lt;br/&gt;
It has the look of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-300&quot; title=&quot;Creation of SQLWarning on a getConnection causes hang on 131 vms when server and client are in same vm.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-300&quot;&gt;&lt;del&gt;DERBY-300&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;With 142 jvms, the test passes OK and comes out in less than a minute.&lt;/p&gt;

&lt;p&gt;The tmp file has only one line , start test. I let it run yesterday and the test didnt finish for more than an hour. Also  I dont think the timeout mechanism is working for this combination of jvm/test. &lt;/p&gt;

&lt;p&gt;I changed the timeout to 10 for derbynetclientmats, but the test does not timeout .&lt;/p&gt;

&lt;p&gt;I am posting the test directory outbuff_ibm131.jar.&lt;/p&gt;

&lt;p&gt;Is anyone else seeing this behavior ? &lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12425916" author="naka" created="Sat, 5 Aug 2006 02:14:46 +0100"  >&lt;p&gt;I tried ibm131 on my development environment and could executed it.&lt;br/&gt;
//Firstly, I thought ibm131 of 32-bit xSeries (Intel compatible),which I could found, is impossible to execucte at my notebook PC technically, because my PC is ThinkPad R52 and not xSeries ....&lt;/p&gt;

&lt;p&gt;However , I couldn&apos;t reproduct the reported behavior.&lt;/p&gt;

&lt;p&gt;Next was the result.&lt;br/&gt;
------------------&lt;br/&gt;
naka@rufelza:~/derby/test/20060805$ cat /proc/version&lt;br/&gt;
Linux version 2.6.12-1-386 (horms@tabatha.lab.ultramonkey.org) (gcc version 4.0.2 20050917 (prerelease) (Debian 4.0.1-8)) #1 Tue Sep 27 12:41:08 JST 2005&lt;br/&gt;
naka@rufelza:~/derby/test/20060805$ java -version&lt;br/&gt;
java version &quot;1.3.1&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.3.1)&lt;br/&gt;
Classic VM (build 1.3.1, J2RE 1.3.1 IBM build cxia32131-20060605 (SR10) (JIT enabled: jitc))&lt;br/&gt;
naka@rufelza:~/derby/test/20060805$ runNetClientTest.sh derbynet/OutBufferedStream.java&lt;br/&gt;
/home/naka/derby/dev/trunk/jars/sane/derby.jar:/home/naka/derby/dev/trunk/jars/sane/derbytools.jar:/home/naka/derby/dev/trunk/jars/sane/derbynet.jar:/home/naka/derby/dev/trunk/jars/sane/derbyclient.jar:/home/naka/derby/dev/trunk/jars/sane/derbyrun.jar:/home/naka/derby/dev/trunk/jars/sane/derbyTesting.jar:/home/naka/derby/dev/trunk/tools/java/jakarta-oro-2.0.8.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_de_DE.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_es.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_fr.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_it.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_ja_JP.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_ko_KR.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_pt_BR.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_zh_CN.jar:/home/naka/derby/dev/trunk/jars/sane/derbyLocale_zh_TW.jar:/home/naka/derby/dev/trunk/tools/java/junit.jar:/home/naka/derby/dev/trunk/tools/java/db2jcc.jar:/home/naka/derby/dev/trunk/tools/java/db2jcc_license_c.jar:/home/naka/derby/dev/trunk/tools/java/jdbc2_0-stdext.jar:/home/naka/derby/dev/trunk/tools/java/jce1_2_2.jar:.&lt;br/&gt;
console.encoding:null file.encoding:ISO-8859-1 derby.ui.codeset: null&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Start: OutBufferedStream jdk1.3.1 DerbyNetClient 2006-08-05 10:10:04 ***&lt;br/&gt;
Appending to derby_tests.policy&lt;br/&gt;
Initialize for framework: DerbyNetClient&lt;br/&gt;
startServer = false. Bypass server startup&lt;br/&gt;
Appending to derby_tests.policy&lt;br/&gt;
java -Duser.language=en -Duser.country=US -Dderby.system.home=/home/naka/derby/test/20060805/DerbyNetClient/OutBufferedStream -Dderby.infolog.append=true -Dframework=DerbyNetClient -Djava.security.manager -Djava.security.policy=/home/naka/derby/test/20060805/derby_tests.policy -DderbyTesting.codejar=&lt;a href=&quot;file:/home/naka/derby/dev/trunk/jars/sane/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/home/naka/derby/dev/trunk/jars/sane/&lt;/a&gt; -DderbyTesting.codedir=/home/naka/derby/dev/trunk/jars/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses=&lt;a href=&quot;file://unused/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file://unused/&lt;/a&gt; org.apache.derbyTesting.functionTests.tests.derbynet.OutBufferedStream -p /home/naka/derby/test/20060805/DerbyNetClient/OutBufferedStream/OutBufferedStream_app.properties &lt;br/&gt;
The test should be running...&lt;br/&gt;
About to execute: diff.exec( outName = /home/naka/derby/test/20060805/DerbyNetClient/OutBufferedStream.out,outDir = /home/naka/derby/test/20060805/DerbyNetClient,pwDiff = java.io.PrintWriter@58dbb249,testOutName = OutBufferedStream,frameworkMaster = DerbyNetClient,jvmName = ibm13,iminor = 3,useprocess = true,systemdiff = false,canondir = null,canonpath = null)&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;MasterFileName = master/OutBufferedStream.out&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;End:   OutBufferedStream jdk1.3.1 DerbyNetClient 2006-08-05 10:10:14 ***&lt;br/&gt;
naka@rufelza:~/derby/test/20060805$ ls -R&lt;br/&gt;
.:&lt;br/&gt;
DerbyNetClient	outBufferedStream.DerbyNetClient.shutdown.err.log  outBufferedStream.DerbyNetClient.shutdown.std.log&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;./DerbyNetClient:&lt;br/&gt;
OutBufferedStream.pass&lt;br/&gt;
-------------------&lt;/p&gt;

&lt;p&gt;One of major difference between environments is Linux or Windows.&lt;br/&gt;
I suspect that this phenomena have something to do with that difference ....&lt;/p&gt;</comment>
                            <comment id="12425917" author="naka" created="Sat, 5 Aug 2006 02:18:11 +0100"  >&lt;p&gt;Uh-oh.&lt;br/&gt;
Sorry for very long line comment ....&lt;/p&gt;

&lt;p&gt;Web-based application is very difficult ...&lt;/p&gt;</comment>
                            <comment id="12425936" author="naka" created="Sat, 5 Aug 2006 08:13:32 +0100"  >&lt;p&gt;Reading the dump which Sunitha uploaded, &lt;br/&gt;
it seems that something happens and the program hangs when OutBufferedStream test program connect to Network serrver.&lt;/p&gt;

&lt;p&gt;Network client side:&lt;br/&gt;
3XMTHREADINFO      &quot;main&quot; (TID:0x9141D8, sys_thread_t:0x7C9680, state:R, native ID:0xC04) prio=5&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:139)&lt;br/&gt;
4XESTACKTRACE          at java.sql.DriverManager.getConnection(DriverManager.java:543)&lt;br/&gt;
4XESTACKTRACE          at java.sql.DriverManager.getConnection(DriverManager.java:194)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derbyTesting.functionTests.tests.derbynet.OutBufferedStream.getConnection(OutBufferedStream.java:253)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derbyTesting.functionTests.tests.derbynet.OutBufferedStream.testReadOfLob(OutBufferedStream.java:144)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derbyTesting.functionTests.tests.derbynet.OutBufferedStream.main(OutBufferedStream.java:78)&lt;/p&gt;

&lt;p&gt;Network server side:&lt;br/&gt;
3XMTHREADINFO      &quot;DRDAConnThread_3&quot; (TID:0x913DD8, sys_thread_t:0x23E04448, state:CW, native ID:0xBB4) prio=5&lt;br/&gt;
4XESTACKTRACE          at java.sql.SQLWarning.&amp;lt;init&amp;gt;(SQLWarning.java:46)&lt;br/&gt;
&amp;lt;snip&amp;gt;&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:116)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.Database.makeConnection(Database.java:231)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.DRDAConnThread.getConnFromDatabaseName(DRDAConnThread.java:1190)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.DRDAConnThread.verifyUserIdPassword(DRDAConnThread.java:1168)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.DRDAConnThread.parseSECCHK(DRDAConnThread.java:2757)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.DRDAConnThread.parseDRDAConnection(DRDAConnThread.java:1030)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:873)&lt;br/&gt;
4XESTACKTRACE          at org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:254)&lt;/p&gt;

&lt;p&gt;However, I&apos;m not sure whether I could read the dump....&lt;/p&gt;</comment>
                            <comment id="12425940" author="naka" created="Sat, 5 Aug 2006 08:25:57 +0100"  >&lt;p&gt;I follow myself.&lt;/p&gt;

&lt;p&gt;&quot;when OutBufferedStream test program connect to Network serrver&quot; in my previous comment means &lt;br/&gt;
&quot;when OutBufferedStream test program &lt;b&gt;tries&lt;/b&gt; to connect to Network server.&lt;/p&gt;</comment>
                            <comment id="12425985" author="skambha" created="Sat, 5 Aug 2006 19:50:03 +0100"  >&lt;p&gt;Hi Tomohito, Thanks for trying this out in your environment.   I looked at this  and it seems like a case of DERBY300.  By making  the change to not get a connection with create=true once the database is created,  the test passes on windows/ibm131. &lt;/p&gt;

&lt;p&gt;I am just attaching the diff with changes  that  I made. &lt;/p&gt;</comment>
                            <comment id="12426221" author="naka" created="Mon, 7 Aug 2006 15:04:26 +0100"  >&lt;p&gt;I confirmed to execute derbynet/OutBufferedStream.java with derby1637.draft.txt and found it passes in my development environment.&lt;/p&gt;</comment>
                            <comment id="12426235" author="naka" created="Mon, 7 Aug 2006 15:37:59 +0100"  >&lt;p&gt;I meant ibm131 on Linux...&lt;/p&gt;</comment>
                            <comment id="12426272" author="skambha" created="Mon, 7 Aug 2006 18:30:53 +0100"  >&lt;p&gt;Thanks Tomohito for trying it out.  If it looks ok, it would be great if you could commit this change.    &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Sunitha. &lt;/p&gt;</comment>
                            <comment id="12426563" author="naka" created="Tue, 8 Aug 2006 14:16:47 +0100"  >&lt;p&gt;I see.&lt;br/&gt;
I will commit it.&lt;/p&gt;</comment>
                            <comment id="12426566" author="naka" created="Tue, 8 Aug 2006 14:19:56 +0100"  >&lt;p&gt;I committed.&lt;/p&gt;

&lt;p&gt;Sending        java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/OutBufferedStream.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 429648.&lt;/p&gt;</comment>
                            <comment id="12427005" author="skambha" created="Wed, 9 Aug 2006 19:54:52 +0100"  >&lt;p&gt;Thanks Tomohito for the commit .  Confirmed that this issue is fixed, so closing it.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12338113" name="1637_jcc2.4.zip" size="56015" author="skambha" created="Fri, 4 Aug 2006 01:28:18 +0100"/>
                            <attachment id="12338212" name="derby1637.draft.txt" size="1247" author="skambha" created="Sat, 5 Aug 2006 19:50:03 +0100"/>
                            <attachment id="12338166" name="javacore.20060804.101637.3308.txt" size="121034" author="skambha" created="Fri, 4 Aug 2006 18:19:59 +0100"/>
                            <attachment id="12338167" name="javacore.20060804.101643.3308.txt" size="121034" author="skambha" created="Fri, 4 Aug 2006 18:19:59 +0100"/>
                            <attachment id="12338165" name="outbuff_ibm131.jar" size="61698" author="skambha" created="Fri, 4 Aug 2006 18:19:59 +0100"/>
                            <attachment id="12338039" name="outbuffstream_derbyall_report.txt" size="495795" author="skambha" created="Thu, 3 Aug 2006 04:38:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Aug 2006 14:49:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0vtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38973</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>