<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:40:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5764/DERBY-5764.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5764] Make DatabaseMetaDataTest more robust wrt changes made by other tests</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5764</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The subset of tests from DatabaseMetaDataTest being run as part of the upgrade tests is sensitive to changes in the database made by other tests. For instance, adding tables with foreign keys will make the test fail due to extra rows in system tables.&lt;/p&gt;

&lt;p&gt;Usually this could be solved by using a single-use db wrapper of some sort, but in the upgrade tests the database will be booted several times with different versions of Derby and the data needs to be preserved between some of these boots.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12555952">DERBY-5764</key>
            <summary>Make DatabaseMetaDataTest more robust wrt changes made by other tests</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 05:41:13 +0100</created>
                <updated>Fri, 15 Nov 2013 08:15:18 +0000</updated>
                            <resolved>Mon, 18 Jun 2012 07:19:39 +0100</resolved>
                                    <version>10.9.1.0</version>
                                    <fixVersion>10.10.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13276462" author="kristwaa" created="Wed, 16 May 2012 05:57:27 +0100"  >&lt;p&gt;Attached some trivial cleanups to UpgradeRun in patch 1a.&lt;br/&gt;
Committed to trunk with revision 1339007.&lt;/p&gt;</comment>
                            <comment id="13276534" author="kristwaa" created="Wed, 16 May 2012 08:12:52 +0100"  >&lt;p&gt;Attaching patch 2a, which causes the user name to be used as the schema name.&lt;/p&gt;

&lt;p&gt;Initially I had the schema name as a static variable, but that caused some extra complexity for no gain since it must be possible to use two different schema names during a run of suites.All (running the test individually, and as part of the upgrade tests). I found that the schema name only has to stay constant for the duration of a fixture.&lt;/p&gt;

&lt;p&gt;Running the full regression suite for good measure.&lt;br/&gt;
Patch ready for review.&lt;/p&gt;

&lt;p&gt;As mentioned in the thread on derby-dev, the next step would be to add some extra tests to compensate for the coverage lost by always specifying a schema in the queries.&lt;/p&gt;</comment>
                            <comment id="13276554" author="kristwaa" created="Wed, 16 May 2012 08:39:17 +0100"  >&lt;p&gt;suites.All passed.&lt;/p&gt;</comment>
                            <comment id="13276806" author="knutanders" created="Wed, 16 May 2012 16:25:56 +0100"  >&lt;p&gt;The 2a patch looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="13276828" author="kristwaa" created="Wed, 16 May 2012 16:52:45 +0100"  >&lt;p&gt;Thanks, Knut Anders.&lt;/p&gt;

&lt;p&gt;Committed patch 2a to trunk with revision 1339240.&lt;br/&gt;
I hope to post the remaining patch soon.&lt;/p&gt;</comment>
                            <comment id="13294947" author="kristwaa" created="Thu, 14 Jun 2012 11:51:38 +0100"  >&lt;p&gt;Patch 3a (attached) adds, or reverts, some test cases using null for the schema in the meta data calls.&lt;br/&gt;
I factored out some code from JDBC.assertUnsortedResultSet into a helper method and added the new method assertResultSetContains. The latter method asserts that the expected rows are in the result set, but it doesn&apos;t care if there are more rows than expected.&lt;/p&gt;

&lt;p&gt;I ran the test individually and I also ran the upgrade suite without failures.&lt;/p&gt;

&lt;p&gt;Patch ready for review.&lt;/p&gt;</comment>
                            <comment id="13295836" author="dagw" created="Fri, 15 Jun 2012 19:43:38 +0100"  >&lt;p&gt;Looks good to me. If the last Assert in assertRSContains necessary? (&quot;Assert.assertTrue(&quot;Extra rows in ResultSet&quot;, actual.isEmpty())&quot;).&lt;br/&gt;
You already tests same cardinality and &quot;contains&quot;.. &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13393678" author="kristwaa" created="Mon, 18 Jun 2012 07:18:48 +0100"  >&lt;p&gt;No, one of the checks can go away.&lt;br/&gt;
When modifying the code in for patch 3a I considered printing missing or extra rows, but ended up not doing it. I&apos;ve removed the last check in patch 3b.&lt;/p&gt;</comment>
                            <comment id="13393679" author="kristwaa" created="Mon, 18 Jun 2012 07:19:39 +0100"  >&lt;p&gt;Committed patch 3b to trunk with revision 1351212.&lt;br/&gt;
Resolving issue.&lt;/p&gt;

&lt;p&gt;Thanks, for the review, Dag.&lt;/p&gt;</comment>
                            <comment id="13823459" author="knutanders" created="Fri, 15 Nov 2013 08:15:18 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update: close all resolved issues that haven&amp;#39;t had any activity the last year&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12527568" name="derby-5764-1a-upgraderun_cleanup.diff" size="2510" author="kristwaa" created="Wed, 16 May 2012 05:57:26 +0100"/>
                            <attachment id="12527575" name="derby-5764-2a-specify_schema.diff" size="47592" author="kristwaa" created="Wed, 16 May 2012 08:12:52 +0100"/>
                            <attachment id="12532066" name="derby-5764-3a-add_test_case_schema_null.diff" size="5175" author="kristwaa" created="Thu, 14 Jun 2012 11:51:38 +0100"/>
                            <attachment id="12532371" name="derby-5764-3b-add_test_case_schema_null.diff" size="4764" author="kristwaa" created="Mon, 18 Jun 2012 07:18:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 May 2012 15:25:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0bd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35659</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>