<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:53 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3382/DERBY-3382.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3382] Replication: Slave must inform master if DBs are out of sync.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3382</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;If I copy the database to the slave before booting the master, slave will be out of sync with the master since new log records are created during booting.  The slave will then stop replication, but the master will not be notified.&lt;br/&gt;
If I then try to stop or failover the master the master will hang.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12387765">DERBY-3382</key>
            <summary>Replication: Slave must inform master if DBs are out of sync.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jorgenlo">J&#248;rgen L&#248;land</assignee>
                                    <reporter username="oysteing">&#216;ystein Gr&#248;vlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Feb 2008 10:30:23 +0000</created>
                <updated>Tue, 1 Apr 2008 10:45:32 +0100</updated>
                            <resolved>Wed, 26 Mar 2008 11:50:57 +0000</resolved>
                                    <version>10.4.1.3</version>
                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12565300" author="jorgenlo" created="Mon, 4 Feb 2008 10:37:35 +0000"  >&lt;p&gt;An additional problem is that the slave does not realize that it is out of synch until the first chunk of log records is shipped. Finding out if master and slave are in synch should be part of the replication network initialization.&lt;/p&gt;</comment>
                            <comment id="12566595" author="jorgenlo" created="Thu, 7 Feb 2008 13:49:59 +0000"  >&lt;p&gt;Patch v1a adds a check of the log files to the replication initialization so that replication does not start if the log files are out of synch. The master will be notified whether or not the log files are synched.&lt;/p&gt;

&lt;p&gt;All tests passed, the patch is ready for review.&lt;/p&gt;</comment>
                            <comment id="12568903" author="oysteing" created="Thu, 14 Feb 2008 12:03:09 +0000"  >&lt;p&gt;When I test this, I do not get the error message I expected on the master.  Below is an example where I do not connect to the masterDB and freeze it before it is copied.  Instead of the out-of-synch message, I get a could not establish connection message.  The slave prints the out-of-synch message.  Note also that if I try a normal connect afterwards, a first attempt to freeze the DB will fail with NPE, both a second attempt to call freeze or &apos;quit&apos; will then hang.&lt;/p&gt;

&lt;p&gt;ij version 10.4&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:masterDB;user=oystein;password=pass;startMaster=true;slaveHost=localhost&apos;;&lt;br/&gt;
ERROR XRE04: Could not establish a connection to the peer of the replicated database &apos;masterDB&apos; on address &apos;localhost:-1&apos;.&lt;br/&gt;
ij&amp;gt; connect &apos;jdbc:derby:masterDB;user=oystein;password=pass&apos;;&lt;br/&gt;
ij&amp;gt; select sum&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, avg&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, max&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from t;&lt;br/&gt;
1          |2          |3          |4          &lt;br/&gt;
-----------------------------------------------&lt;br/&gt;
528        |16         |32         |32         &lt;/p&gt;

&lt;p&gt;1 row selected&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_freeze_database();&lt;br/&gt;
ERROR 38000: The exception &apos;java.lang.NullPointerException&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR XJ001: Java exception: &apos;: java.lang.NullPointerException&apos;.&lt;br/&gt;
ij&amp;gt; quit&lt;br/&gt;
&amp;lt;hangs&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12568907" author="oysteing" created="Thu, 14 Feb 2008 12:17:34 +0000"  >&lt;p&gt;Comments to the 1a patch:&lt;/p&gt;

&lt;p&gt;1. ReplicationMessageReceive#parseAndAckInstant:  No need to inform&lt;br/&gt;
   the master in case of an unexpected message sequence?&lt;/p&gt;

&lt;p&gt;2. MasterController:  If and else parts is identical for both changes.&lt;br/&gt;
   I guess you are supposed to use getHighestShippedInstance() for the&lt;br/&gt;
   if-part.&lt;/p&gt;

&lt;p&gt;3. AsynchronousLogShipper:  I find the naming of&lt;br/&gt;
   ReplicationLogBuffer#getLastInstant() a bit confusing.  I first&lt;br/&gt;
   wondered whether it represented the last instant added to the&lt;br/&gt;
   ReplicationLogBuffer, but I guess it is the last instant of the&lt;br/&gt;
   first chunk of the buffer.&lt;/p&gt;

&lt;p&gt;4. LogToFile#getFlushedInstant: Looks very similar to&lt;br/&gt;
   getFirstUnflushedInstant except it returns a long instead of a&lt;br/&gt;
   LogCounter.  However, the names seems to indicate that they are&lt;br/&gt;
   different.  By the way, the latter is synchronized while the former&lt;br/&gt;
   is not.  Is there a justification for that?&lt;/p&gt;

</comment>
                            <comment id="12569227" author="jorgenlo" created="Fri, 15 Feb 2008 10:39:33 +0000"  >&lt;p&gt;I had a look at the NPE, which is caused by LogToFile calling masterFactory#flushedTo:&lt;/p&gt;

&lt;p&gt;LogToFile lines 3966 and on...: &lt;br/&gt;
if (inReplicationMasterMode) &lt;/p&gt;
{
        masterFactory.flushedTo(LogCounter.
                                                      makeLogInstantAsLong(fileNumber,
                                                                                                  wherePosition));
}

&lt;p&gt;Seems like LogToFile was never informed that it is no longer in replication mode :-/&lt;/p&gt;</comment>
                            <comment id="12569277" author="oysteing" created="Fri, 15 Feb 2008 14:48:31 +0000"  >&lt;p&gt;J&#248;rgen L&#248;land (JIRA) wrote:&lt;br/&gt;
&amp;gt; Seems like LogToFile was never informed that it is no longer in replication mode :-/&lt;/p&gt;

&lt;p&gt;Strictly speaking, it has never been in replication mode since replication startup did not succeed. &lt;/p&gt;</comment>
                            <comment id="12570152" author="jorgenlo" created="Tue, 19 Feb 2008 09:49:56 +0000"  >&lt;p&gt;Patch 1b addresses &#216;ysteins comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The out of synch error message is now displayed (no longer&lt;br/&gt;
  wrapped in an XRE04 exception)&lt;/li&gt;
	&lt;li&gt;The NPE is removed by calling&lt;br/&gt;
  logToFile.stopReplicationSlaveRole if startMaster fails. Also&lt;br/&gt;
  added cleanup of the network connection if startMaster fails&lt;br/&gt;
1 and 2: fixed&lt;br/&gt;
3: Would getChunkLastInstant (or getChunkInstant) be more&lt;br/&gt;
   intuitive? In that case I think we should add &apos;Chunk&apos; to&lt;br/&gt;
   getData and getSize as well. In patch 1b I only changed the&lt;br/&gt;
   javadoc slightly.&lt;br/&gt;
4: Good catch! I hadn&apos;t noticed that method, but I still need the&lt;br/&gt;
   long representation. Changed name of the method to match the&lt;br/&gt;
   existing getFirstUnflushedInstant&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All tests passed.&lt;/p&gt;</comment>
                            <comment id="12571408" author="oysteing" created="Fri, 22 Feb 2008 13:50:02 +0000"  >&lt;p&gt;Thanks for the follow-up patch, J&#248;rgen.  It adresses my comments, and&lt;br/&gt;
I have checked that the problems I reported has been fixed.  I will&lt;br/&gt;
commit this patch.  Some minor issues in MasterController that you may&lt;br/&gt;
consider for a later patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;teardownNetwork: I am not sure this is a good name for the method&lt;br/&gt;
   since it is actually doing more than just shutting down the network&lt;br/&gt;
   connection.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;setupConnection:  What is the point of catching StandardException&lt;br/&gt;
   if you are just rethrowing it?&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12571409" author="oysteing" created="Fri, 22 Feb 2008 13:57:35 +0000"  >&lt;p&gt;Committed patch 1b as revision 630207.&lt;/p&gt;</comment>
                            <comment id="12571410" author="jorgenlo" created="Fri, 22 Feb 2008 13:58:18 +0000"  >&lt;p&gt;Hi &#216;ystein, thanks for committing the patch.&lt;/p&gt;

&lt;p&gt;re setupConnection: it prevents the next catch (Exception) to wrap a StandardException in another StandardException&lt;/p&gt;</comment>
                            <comment id="12571412" author="oysteing" created="Fri, 22 Feb 2008 14:07:47 +0000"  >&lt;p&gt;J&#248;rgen L&#248;land (JIRA) wrote:&lt;br/&gt;
&amp;gt; re setupConnection: it prevents the next catch (Exception) to wrap a StandardException in another StandardException&lt;/p&gt;

&lt;p&gt;Ah, good point.  Objection withdrawn.&lt;/p&gt;</comment>
                            <comment id="12577428" author="jorgenlo" created="Tue, 11 Mar 2008 12:47:28 +0000"  >&lt;p&gt;The attached patch contains a regression test for this issue.&lt;/p&gt;</comment>
                            <comment id="12578502" author="oysteing" created="Thu, 13 Mar 2008 21:38:12 +0000"  >&lt;p&gt;Thanks for the test, J&#248;rgen.  Test case looks good, but I have a few&lt;br/&gt;
comments on the modifications to the framework:&lt;/p&gt;

&lt;p&gt;1. I suggest renaming slaveConnException to startSlaveException to&lt;br/&gt;
   indicate that it is specific to startSlave command.&lt;/p&gt;

&lt;p&gt;2. slaveConnException should be set to null before starting the slave&lt;br/&gt;
   in order to make it possible to start the slave more than once in&lt;br/&gt;
   the same test.&lt;/p&gt;

&lt;p&gt;3. Are you sure it is a good idea to use the connection obtained when&lt;br/&gt;
   starting the master for further operations on the master.  Would it&lt;br/&gt;
   not be more general if it was a separate connection?  Anyhow, if&lt;br/&gt;
   ReplicationRun is to provide the capability to use an existing&lt;br/&gt;
   connection, I think getMasterConnection needs to be able to open a&lt;br/&gt;
   new connection should no one exist.  (An alternative would be to&lt;br/&gt;
   see if it was possible to let ReplicationRun extend&lt;br/&gt;
   BaseJDBCTestCase and use its connection handling for connecting to&lt;br/&gt;
   the master database.)&lt;/p&gt;

&lt;p&gt;4. Why do you need to copy the code from&lt;br/&gt;
   BaseJDBCTestCase#assertSQLState? That method is static so you&lt;br/&gt;
   should be able to use it as it is.&lt;/p&gt;

&lt;p&gt;5. assertSQLStateSlaveConn: Javadoc should state that it will wait for&lt;br/&gt;
   some time for start slave command to complete.  Instead of &quot;Slave&lt;br/&gt;
   connection attempt hangs ...&quot;, I would prefer &quot;Attempt to start&lt;br/&gt;
   slave hangs ...&quot;, or something like that.&lt;/p&gt;

&lt;p&gt;6. If I run the replication suite with this patch from an empty&lt;br/&gt;
   directory, it fails.  This does not happen without the patch:&lt;/p&gt;

&lt;p&gt;&amp;gt; java junit.textui.TestRunner -noloading org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationSuite ..java.io.IOException: Cannot run program &quot;/usr/local/java/jdk1.6.0_01/jre/lib/../bin/java&quot; (in directory &quot;/export/tmp/oysteing/derby-repl/testing_repl/export/tmp/oysteing/derby-repl/testing_repl/db_master&quot;): error=2, No such file or directory&lt;br/&gt;
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:459)&lt;br/&gt;
        at java.lang.Runtime.exec(Runtime.java:593)&lt;br/&gt;
        at java.lang.Runtime.exec(Runtime.java:431)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun$4.run(ReplicationRun.java:2250)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
Caused by: java.io.IOException: error=2, No such file or directory&lt;br/&gt;
        at java.lang.UNIXProcess.forkAndExec(Native Method)&lt;br/&gt;
        at java.lang.UNIXProcess.&amp;lt;init&amp;gt;(UNIXProcess.java:53)&lt;br/&gt;
        at java.lang.ProcessImpl.start(ProcessImpl.java:65)&lt;br/&gt;
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:452)&lt;br/&gt;
        ... 4 more&lt;br/&gt;
java.lang.Exception: DRDA_NoIO.S:Could not connect to Derby Network Server on host 127.0.0.1, port 1527: Connection refused&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(NetworkServerControlImpl.java:3173)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(NetworkServerControlImpl.java:1855)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.setUpSocket(NetworkServerControlImpl.java:2497)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(NetworkServerControlImpl.java:1138)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl.ping(NetworkServerControl.java:395)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.ping(ReplicationRun.java:2600)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.pingServer(ReplicationRun.java:2587)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.startServer(ReplicationRun.java:2264)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Local.testLogFilesSynched(ReplicationRun_Local.java:182)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:164)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
        at junit.textui.TestRunner.doRun(TestRunner.java:121)&lt;br/&gt;
        at junit.textui.TestRunner.start(TestRunner.java:185)&lt;br/&gt;
        at junit.textui.TestRunner.main(TestRunner.java:143)&lt;br/&gt;
java.io.IOException: Cannot run program &quot;/usr/local/java/jdk1.6.0_01/jre/lib/../bin/java&quot; (in directory &quot;/export/tmp/oysteing/derby-repl/testing_repl/export/tmp/oysteing/derby-repl/testing_repl/db_slave&quot;): error=2, No such file or directory        at java.lang.ProcessBuilder.start(ProcessBuilder.java:459)&lt;br/&gt;
        at java.lang.Runtime.exec(Runtime.java:593)&lt;br/&gt;
        at java.lang.Runtime.exec(Runtime.java:431)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun$4.run(ReplicationRun.java:2250)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
Caused by: java.io.IOException: error=2, No such file or directory&lt;br/&gt;
        at java.lang.UNIXProcess.forkAndExec(Native Method)&lt;br/&gt;
        at java.lang.UNIXProcess.&amp;lt;init&amp;gt;(UNIXProcess.java:53)&lt;br/&gt;
        at java.lang.ProcessImpl.start(ProcessImpl.java:65)&lt;br/&gt;
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:452)&lt;br/&gt;
        ... 4 more&lt;br/&gt;
java.lang.Exception: DRDA_NoIO.S:Could not connect to Derby Network Server on host 127.0.0.1, port 4527: Connection refused&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(NetworkServerControlImpl.java:3173)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(NetworkServerControlImpl.java:1855)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.setUpSocket(NetworkServerControlImpl.java:2497)&lt;br/&gt;
        at org.apache.derby.impl.drda.NetworkServerControlImpl.ping(NetworkServerControlImpl.java:1138)&lt;br/&gt;
        at org.apache.derby.drda.NetworkServerControl.ping(NetworkServerControl.java:395)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.ping(ReplicationRun.java:2600)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.pingServer(ReplicationRun.java:2587)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.startServer(ReplicationRun.java:2264)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Local.testLogFilesSynched(ReplicationRun_Local.java:188)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:164)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:130)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:101)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:120)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:230)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:225)&lt;br/&gt;
        at junit.textui.TestRunner.doRun(TestRunner.java:121)&lt;br/&gt;
        at junit.textui.TestRunner.start(TestRunner.java:185)&lt;br/&gt;
        at junit.textui.TestRunner.main(TestRunner.java:143)&lt;br/&gt;
E.^C&lt;br/&gt;
&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12578664" author="oysteing" created="Fri, 14 Mar 2008 09:38:46 +0000"  >&lt;p&gt;The error reported above when running in an empty directory may not be related to this patch anyway.  I just got it on the 10.4 branch, too.  A bit strange that it disappeared when I removed this patch, though.&lt;/p&gt;</comment>
                            <comment id="12580256" author="jorgenlo" created="Wed, 19 Mar 2008 06:58:27 +0000"  >&lt;p&gt;Thank you for the review, &#216;ystein. Patch 1b addresses your comments.&lt;/p&gt;

&lt;p&gt;After updating my sandbox, I got the same exception as you did. It turned out to be caused by another patch invalidating mine. The replication test suite completed successfully. Requesting review.&lt;/p&gt;</comment>
                            <comment id="12582225" author="oysteing" created="Wed, 26 Mar 2008 10:29:14 +0000"  >&lt;p&gt;Thanks for addressing all my comments J&#248;rgen.&lt;br/&gt;
Patch derby-3382-test-1b.diff  committed at revision 641221.&lt;/p&gt;</comment>
                            <comment id="12582250" author="jorgenlo" created="Wed, 26 Mar 2008 11:50:57 +0000"  >&lt;p&gt;Resolving as fixed - Issue fixed, and regression test committed.&lt;/p&gt;</comment>
                            <comment id="12584081" author="oysteing" created="Tue, 1 Apr 2008 10:38:11 +0100"  >&lt;p&gt;Test merged to the 10.4 branch at revision 641329.&lt;/p&gt;</comment>
                            <comment id="12584085" author="oysteing" created="Tue, 1 Apr 2008 10:45:32 +0100"  >&lt;p&gt;Reset fix version.  Bug was fixed before 10.4 release branch was created.  It was just the test patch that needed to be merged.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12374967" name="derby-3382-1a.diff" size="32397" author="jorgenlo" created="Thu, 7 Feb 2008 13:49:59 +0000"/>
                            <attachment id="12374966" name="derby-3382-1a.stat" size="895" author="jorgenlo" created="Thu, 7 Feb 2008 13:49:59 +0000"/>
                            <attachment id="12375909" name="derby-3382-1b.diff" size="41749" author="jorgenlo" created="Tue, 19 Feb 2008 09:49:56 +0000"/>
                            <attachment id="12375908" name="derby-3382-1b.stat" size="1064" author="jorgenlo" created="Tue, 19 Feb 2008 09:49:56 +0000"/>
                            <attachment id="12377609" name="derby-3382-test-1a.diff" size="11217" author="jorgenlo" created="Tue, 11 Mar 2008 12:47:28 +0000"/>
                            <attachment id="12377608" name="derby-3382-test-1a.stat" size="208" author="jorgenlo" created="Tue, 11 Mar 2008 12:47:28 +0000"/>
                            <attachment id="12378203" name="derby-3382-test-1b.diff" size="9797" author="jorgenlo" created="Wed, 19 Mar 2008 06:58:27 +0000"/>
                            <attachment id="12378202" name="derby-3382-test-1b.stat" size="208" author="jorgenlo" created="Wed, 19 Mar 2008 06:58:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Feb 2008 10:37:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0z13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>