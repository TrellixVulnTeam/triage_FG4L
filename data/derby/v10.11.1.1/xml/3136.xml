<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:40:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3136/DERBY-3136.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3136] Cut down on object creations in LIKE clause implementation of territory based characters.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3136</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The LIKE clause for territory based characters was implemented correctly based on SQL standards in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2967&quot; title=&quot;Single character does not match high value unicode character with collation TERRITORY_BASED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2967&quot;&gt;&lt;del&gt;DERBY-2967&lt;/del&gt;&lt;/a&gt; but the object (String and CollationElementIterator) creations introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2967&quot; title=&quot;Single character does not match high value unicode character with collation TERRITORY_BASED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2967&quot;&gt;&lt;del&gt;DERBY-2967&lt;/del&gt;&lt;/a&gt; can be cut down by following Knut&apos;s simple solution. I am copying that solution from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2967&quot; title=&quot;Single character does not match high value unicode character with collation TERRITORY_BASED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2967&quot;&gt;&lt;del&gt;DERBY-2967&lt;/del&gt;&lt;/a&gt;. We should implement that solution to improve the performance of LIKE for territory based characters.&lt;/p&gt;

&lt;p&gt;*********&lt;b&gt;copied from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-2967&quot; title=&quot;Single character does not match high value unicode character with collation TERRITORY_BASED&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-2967&quot;&gt;&lt;del&gt;DERBY-2967&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;*********************************************************&lt;br/&gt;
Another simple way to cut down the string allocations... I think you could express iapi.types.Like:checkEquality() like this: &lt;/p&gt;

&lt;p&gt;    if (val&lt;span class=&quot;error&quot;&gt;&amp;#91;vLoc&amp;#93;&lt;/span&gt; == pat&lt;span class=&quot;error&quot;&gt;&amp;#91;pLoc&amp;#93;&lt;/span&gt;) &lt;/p&gt;
{ 
        // same character, so two strings consisting of this 
        // single character must be equal regardless of territory 
        return true; 
    }
&lt;p&gt; else if (collator == null) &lt;/p&gt;
{ 
        // not same character, must be unequal in UCS_BASIC 
        return false; 
    }
&lt;p&gt; &lt;/p&gt;

&lt;p&gt;    String s1 = new String(val, vLoc, 1); &lt;br/&gt;
    String s1 = new String(pat, pLoc, 1); &lt;/p&gt;

&lt;p&gt;    return collator.compare(s1, s2) == 0; &lt;/p&gt;

&lt;p&gt;This would only allocate new objects if the characters are not equal. &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;
									&lt;ul&gt;
										&lt;li&gt;
										&lt;ul&gt;
											&lt;li&gt;
											&lt;ul&gt;
												&lt;li&gt;
												&lt;ul&gt;
													&lt;li&gt;
													&lt;ul&gt;
														&lt;li&gt;
														&lt;ul&gt;
															&lt;li&gt;
															&lt;ul&gt;
																&lt;li&gt;
																&lt;ul&gt;
																	&lt;li&gt;
																	&lt;ul&gt;
																		&lt;li&gt;
																		&lt;ul&gt;
																			&lt;li&gt;
																			&lt;ul&gt;
																				&lt;li&gt;
																				&lt;ul&gt;
																					&lt;li&gt;
																					&lt;ul&gt;
																						&lt;li&gt;
																						&lt;ul&gt;
																							&lt;li&gt;
																							&lt;ul&gt;
																								&lt;li&gt;
																								&lt;ul&gt;
																									&lt;li&gt;
																									&lt;ul&gt;
																										&lt;li&gt;
																										&lt;ul&gt;
																											&lt;li&gt;
																											&lt;ul&gt;
																												&lt;li&gt;
																												&lt;ul&gt;
																													&lt;li&gt;
																													&lt;ul&gt;
																														&lt;li&gt;
																														&lt;ul&gt;
																															&lt;li&gt;
																															&lt;ul&gt;
																																&lt;li&gt;
																																&lt;ul&gt;
																																	&lt;li&gt;
																																	&lt;ul&gt;
																																		&lt;li&gt;
																																		&lt;ul&gt;
																																			&lt;li&gt;
																																			&lt;ul&gt;
																																				&lt;li&gt;
																																				&lt;ul&gt;
																																					&lt;li&gt;
																																					&lt;ul&gt;
																																						&lt;li&gt;
																																						&lt;ul&gt;
																																							&lt;li&gt;
																																							&lt;ul&gt;
																																								&lt;li&gt;
																																								&lt;ul&gt;
																																									&lt;li&gt;
																																									&lt;ul&gt;
																																										&lt;li&gt;
																																										&lt;ul&gt;
																																											&lt;li&gt;
																																											&lt;ul&gt;
																																												&lt;li&gt;
																																												&lt;ul&gt;
																																													&lt;li&gt;
																																													&lt;ul&gt;
																																														&lt;li&gt;
																																														&lt;ul&gt;
																																															&lt;li&gt;
																																															&lt;ul&gt;
																																																&lt;li&gt;
																																																&lt;ul&gt;
																																																	&lt;li&gt;
																																																	&lt;ul&gt;
																																																		&lt;li&gt;
																																																		&lt;ul&gt;
																																																			&lt;li&gt;
																																																			&lt;ul&gt;
																																																				&lt;li&gt;
																																																				&lt;ul&gt;
																																																					&lt;li&gt;
																																																					&lt;ul&gt;
																																																						&lt;li&gt;
																																																						&lt;ul&gt;
																																																							&lt;li&gt;
																																																							&lt;ul&gt;
																																																								&lt;li&gt;
																																																								&lt;ul&gt;
																																																									&lt;li&gt;
																																																									&lt;ul&gt;
																																																										&lt;li&gt;
																																																										&lt;ul&gt;
																																																											&lt;li&gt;
																																																											&lt;ul&gt;
																																																												&lt;li&gt;
																																																												&lt;ul&gt;
																																																													&lt;li&gt;
																																																													&lt;ul&gt;
																																																														&lt;li&gt;
																																																														&lt;ul&gt;
																																																															&lt;li&gt;
																																																															&lt;ul&gt;
																																																																&lt;li&gt;
																																																																&lt;ul&gt;
																																																																	&lt;li&gt;
																																																																	&lt;ul&gt;
																																																																		&lt;li&gt;
																																																																		&lt;ul&gt;
																																																																			&lt;li&gt;
																																																																			&lt;ul&gt;
																																																																				&lt;li&gt;
																																																																				&lt;ul&gt;
																																																																					&lt;li&gt;
																																																																					&lt;ul&gt;
																																																																						&lt;li&gt;
																																																																						&lt;ul&gt;
																																																																							&lt;li&gt;
																																																																							&lt;ul&gt;
																																																																								&lt;li&gt;
																																																																								&lt;ul&gt;
																																																																									&lt;li&gt;
																																																																									&lt;ul&gt;
																																																																										&lt;li&gt;
																																																																										&lt;ul&gt;
																																																																											&lt;li&gt;
																																																																											&lt;ul&gt;
																																																																												&lt;li&gt;
																																																																												&lt;ul&gt;
																																																																													&lt;li&gt;
																																																																													&lt;ul&gt;
																																																																														&lt;li&gt;
																																																																														&lt;ul&gt;
																																																																															&lt;li&gt;
																																																																															&lt;ul&gt;
																																																																																&lt;li&gt;
																																																																																&lt;ul&gt;
																																																																																	&lt;li&gt;
																																																																																	&lt;ul&gt;
																																																																																		&lt;li&gt;
																																																																																		&lt;ul&gt;
																																																																																			&lt;li&gt;
																																																																																			&lt;ul&gt;
																																																																																				&lt;li&gt;
																																																																																				&lt;ul&gt;
																																																																																					&lt;li&gt;
																																																																																					&lt;ul&gt;
																																																																																						&lt;li&gt;
																																																																																						&lt;ul&gt;
																																																																																							&lt;li&gt;
																																																																																							&lt;ul&gt;
																																																																																								&lt;li&gt;
																																																																																								&lt;ul&gt;
																																																																																									&lt;li&gt;
																																																																																									&lt;ul&gt;
																																																																																										&lt;li&gt;&lt;/li&gt;
																																																																																									&lt;/ul&gt;
																																																																																									&lt;/li&gt;
																																																																																								&lt;/ul&gt;
																																																																																								&lt;/li&gt;
																																																																																							&lt;/ul&gt;
																																																																																							&lt;/li&gt;
																																																																																						&lt;/ul&gt;
																																																																																						&lt;/li&gt;
																																																																																					&lt;/ul&gt;
																																																																																					&lt;/li&gt;
																																																																																				&lt;/ul&gt;
																																																																																				&lt;/li&gt;
																																																																																			&lt;/ul&gt;
																																																																																			&lt;/li&gt;
																																																																																		&lt;/ul&gt;
																																																																																		&lt;/li&gt;
																																																																																	&lt;/ul&gt;
																																																																																	&lt;/li&gt;
																																																																																&lt;/ul&gt;
																																																																																&lt;/li&gt;
																																																																															&lt;/ul&gt;
																																																																															&lt;/li&gt;
																																																																														&lt;/ul&gt;
																																																																														&lt;/li&gt;
																																																																													&lt;/ul&gt;
																																																																													&lt;/li&gt;
																																																																												&lt;/ul&gt;
																																																																												&lt;/li&gt;
																																																																											&lt;/ul&gt;
																																																																											&lt;/li&gt;
																																																																										&lt;/ul&gt;
																																																																										&lt;/li&gt;
																																																																									&lt;/ul&gt;
																																																																									&lt;/li&gt;
																																																																								&lt;/ul&gt;
																																																																								&lt;/li&gt;
																																																																							&lt;/ul&gt;
																																																																							&lt;/li&gt;
																																																																						&lt;/ul&gt;
																																																																						&lt;/li&gt;
																																																																					&lt;/ul&gt;
																																																																					&lt;/li&gt;
																																																																				&lt;/ul&gt;
																																																																				&lt;/li&gt;
																																																																			&lt;/ul&gt;
																																																																			&lt;/li&gt;
																																																																		&lt;/ul&gt;
																																																																		&lt;/li&gt;
																																																																	&lt;/ul&gt;
																																																																	&lt;/li&gt;
																																																																&lt;/ul&gt;
																																																																&lt;/li&gt;
																																																															&lt;/ul&gt;
																																																															&lt;/li&gt;
																																																														&lt;/ul&gt;
																																																														&lt;/li&gt;
																																																													&lt;/ul&gt;
																																																													&lt;/li&gt;
																																																												&lt;/ul&gt;
																																																												&lt;/li&gt;
																																																											&lt;/ul&gt;
																																																											&lt;/li&gt;
																																																										&lt;/ul&gt;
																																																										&lt;/li&gt;
																																																									&lt;/ul&gt;
																																																									&lt;/li&gt;
																																																								&lt;/ul&gt;
																																																								&lt;/li&gt;
																																																							&lt;/ul&gt;
																																																							&lt;/li&gt;
																																																						&lt;/ul&gt;
																																																						&lt;/li&gt;
																																																					&lt;/ul&gt;
																																																					&lt;/li&gt;
																																																				&lt;/ul&gt;
																																																				&lt;/li&gt;
																																																			&lt;/ul&gt;
																																																			&lt;/li&gt;
																																																		&lt;/ul&gt;
																																																		&lt;/li&gt;
																																																	&lt;/ul&gt;
																																																	&lt;/li&gt;
																																																&lt;/ul&gt;
																																																&lt;/li&gt;
																																															&lt;/ul&gt;
																																															&lt;/li&gt;
																																														&lt;/ul&gt;
																																														&lt;/li&gt;
																																													&lt;/ul&gt;
																																													&lt;/li&gt;
																																												&lt;/ul&gt;
																																												&lt;/li&gt;
																																											&lt;/ul&gt;
																																											&lt;/li&gt;
																																										&lt;/ul&gt;
																																										&lt;/li&gt;
																																									&lt;/ul&gt;
																																									&lt;/li&gt;
																																								&lt;/ul&gt;
																																								&lt;/li&gt;
																																							&lt;/ul&gt;
																																							&lt;/li&gt;
																																						&lt;/ul&gt;
																																						&lt;/li&gt;
																																					&lt;/ul&gt;
																																					&lt;/li&gt;
																																				&lt;/ul&gt;
																																				&lt;/li&gt;
																																			&lt;/ul&gt;
																																			&lt;/li&gt;
																																		&lt;/ul&gt;
																																		&lt;/li&gt;
																																	&lt;/ul&gt;
																																	&lt;/li&gt;
																																&lt;/ul&gt;
																																&lt;/li&gt;
																															&lt;/ul&gt;
																															&lt;/li&gt;
																														&lt;/ul&gt;
																														&lt;/li&gt;
																													&lt;/ul&gt;
																													&lt;/li&gt;
																												&lt;/ul&gt;
																												&lt;/li&gt;
																											&lt;/ul&gt;
																											&lt;/li&gt;
																										&lt;/ul&gt;
																										&lt;/li&gt;
																									&lt;/ul&gt;
																									&lt;/li&gt;
																								&lt;/ul&gt;
																								&lt;/li&gt;
																							&lt;/ul&gt;
																							&lt;/li&gt;
																						&lt;/ul&gt;
																						&lt;/li&gt;
																					&lt;/ul&gt;
																					&lt;/li&gt;
																				&lt;/ul&gt;
																				&lt;/li&gt;
																			&lt;/ul&gt;
																			&lt;/li&gt;
																		&lt;/ul&gt;
																		&lt;/li&gt;
																	&lt;/ul&gt;
																	&lt;/li&gt;
																&lt;/ul&gt;
																&lt;/li&gt;
															&lt;/ul&gt;
															&lt;/li&gt;
														&lt;/ul&gt;
														&lt;/li&gt;
													&lt;/ul&gt;
													&lt;/li&gt;
												&lt;/ul&gt;
												&lt;/li&gt;
											&lt;/ul&gt;
											&lt;/li&gt;
										&lt;/ul&gt;
										&lt;/li&gt;
									&lt;/ul&gt;
									&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12380740">DERBY-3136</key>
            <summary>Cut down on object creations in LIKE clause implementation of territory based characters.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mamtas">Mamta A. Satoor</assignee>
                                    <reporter username="mamtas">Mamta A. Satoor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 05:53:48 +0100</created>
                <updated>Thu, 3 Jan 2013 12:03:27 +0000</updated>
                            <resolved>Thu, 25 Oct 2007 06:50:38 +0100</resolved>
                                    <version>10.3.2.1</version>
                    <version>10.4.1.3</version>
                                    <fixVersion>10.3.2.1</fixVersion>
                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12537498" author="mamtas" created="Thu, 25 Oct 2007 06:35:15 +0100"  >&lt;p&gt;I incorporated the changes suggested by Knut into trunk using revision 588147. The commit comments were as follows&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3136&quot; title=&quot;Cut down on object creations in LIKE clause implementation of territory based characters.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3136&quot;&gt;&lt;del&gt;DERBY-3136&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Cut down on unnecessary String and CollationElementIterator objects creation in Like.java class by changing the way we compare the character in value string vs character in the pattern string.&lt;/p&gt;

&lt;p&gt;When working with database with UCS_BASIC collation, the 2 characters should be the same otherwise we will return FALSE.&lt;/p&gt;

&lt;p&gt;When working with territory based collation, if the 2 characters are the same, then we can simply return TRUE because their collation elements will have to be same. But if the 2 characters are not same, then use the RuleBasedCollator for the territory to see if those 2 different characters match (ie they have same collation element(s) corresponding to them).&lt;/p&gt;</comment>
                            <comment id="12537501" author="mamtas" created="Thu, 25 Oct 2007 06:50:38 +0100"  >&lt;p&gt;Merged changed from trunk into 10.3 codeline (revision 588148).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12370310">DERBY-2698</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12370313">DERBY-2699</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy10w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>