<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:12:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1546/DERBY-1546.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1546] Derby JDBC 4.0 driver returns 3 for JDBC driver major version</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1546</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;For 10.2 the DatabaseMetaData.getJDBCMajorVersion() is returning &quot;3&quot; for &lt;br/&gt;
the Derby JDBC 4.0 driver.  It should return 4.  This is easily &lt;br/&gt;
reproduced by running a simple test to obtain a connection and &lt;br/&gt;
output the value,&lt;/p&gt;

&lt;p&gt;Database product: Apache Derby&lt;br/&gt;
Database version: 10.2.0.4 alpha&lt;br/&gt;
Driver name:      Apache Derby Embedded JDBC Driver&lt;br/&gt;
Driver version:   10.2.0.4 alpha&lt;br/&gt;
JDBC driver major version: 3&lt;br/&gt;
JDBC driver minor version: 0&lt;/p&gt;

&lt;p&gt;Test code:&lt;/p&gt;


&lt;p&gt;org.apache.derby.jdbc.EmbeddedConnectionPoolDataSource40 ds =&lt;br/&gt;
            new &lt;br/&gt;
org.apache.derby.jdbc.EmbeddedConnectionPoolDataSource40();&lt;/p&gt;


&lt;p&gt;ds.setDatabaseName(&quot;C:\\drivers\\derby\\databases&lt;br class=&quot;atl-forced-newline&quot; /&gt;JDBC40DB&quot;);&lt;/p&gt;

&lt;p&gt;        ds.setUser(&quot;dbuser1&quot;);&lt;br/&gt;
        ds.setPassword(&quot;dbpwd1&quot;);&lt;/p&gt;

&lt;p&gt;        PooledConnection pooledConn = &lt;br/&gt;
ds.getPooledConnection();&lt;br/&gt;
        Connection conn = pooledConn.getConnection();&lt;/p&gt;

&lt;p&gt;        System.out.println(&quot;Database product: &quot; + &lt;br/&gt;
conn.getMetaData().getDatabaseProductName());&lt;br/&gt;
        System.out.println(&quot;Database version: &quot; + &lt;br/&gt;
conn.getMetaData().getDatabaseProductVersion());&lt;br/&gt;
        System.out.println(&quot;Driver name:      &quot; + &lt;br/&gt;
conn.getMetaData().getDriverName());&lt;br/&gt;
        System.out.println(&quot;Driver version:   &quot; + &lt;br/&gt;
conn.getMetaData().getDriverVersion());&lt;br/&gt;
        System.out.println(&quot;JDBC driver major version: &quot; + &lt;br/&gt;
conn.getMetaData().getJDBCMajorVersion());&lt;br/&gt;
        System.out.println(&quot;JDBC driver minor version: &quot; + &lt;br/&gt;
conn.getMetaData().getJDBCMinorVersion());&lt;/p&gt;


&lt;p&gt;Relevant Derby Embedded code in EmbedDatabaseMetaData is:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;JDBC 3.0&lt;br/&gt;
    *&lt;/li&gt;
	&lt;li&gt;Retrieves the major JDBC version number for this driver.&lt;br/&gt;
    *&lt;/li&gt;
	&lt;li&gt;@return JDBC version major number&lt;br/&gt;
	*/&lt;br/&gt;
	public int getJDBCMajorVersion()
	{
		return 3;
	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;and client code in org.apache.derby.client.am.DatabaseMetaData:&lt;br/&gt;
public int getJDBCMajorVersion() throws SQLException &lt;/p&gt;
{
        checkForClosedConnection();
        return 3;
    }

&lt;p&gt;I am not sure if this should be JVM dependent or if it should always return 4  regardless of the JVM version.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12346340">DERBY-1546</key>
            <summary>Derby JDBC 4.0 driver returns 3 for JDBC driver major version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jul 2006 13:56:24 +0100</created>
                <updated>Mon, 14 May 2007 17:34:26 +0100</updated>
                            <resolved>Thu, 27 Jul 2006 08:26:55 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12422464" author="rhillegas" created="Thu, 20 Jul 2006 19:18:14 +0100"  >&lt;p&gt;This is the correct behavior if you are running on jvm 1.4 or 1.5.&lt;/p&gt;

&lt;p&gt;If you are running on 1.6, the major version should be 4. It isn&apos;t, so this is a bug.&lt;/p&gt;</comment>
                            <comment id="12423665" author="knutanders" created="Wed, 26 Jul 2006 16:04:23 +0100"  >&lt;p&gt;derby-1546-v1.diff makes getJDBCMajorVersion() return 4 when using the&lt;br/&gt;
JDBC 4.0 driver and 3 otherwise (the method was not present in JDBC&lt;br/&gt;
2.0, so there is no need to return 2 for the 2.0 driver).&lt;/p&gt;

&lt;p&gt;Description of the changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;EmbedDatabaseMetaData40 and NetDatabaseMetaData40 override&lt;br/&gt;
    getJDBCMajorVersion() and getJDBCMinorVersion().&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;jdbcapi/dbMetaDataJdbc30.java was modified to print &quot;AS EXPECTED&quot;&lt;br/&gt;
    instead of the returned value from the JDBC version methods (of&lt;br/&gt;
    course, it prints something else if the version is not as&lt;br/&gt;
    expected). This was done in order to avoid the need for separate&lt;br/&gt;
    jdk16 canons.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;TestUtil.getJDBCMajorVersion() was updated to recognize JDBC major&lt;br/&gt;
    version &amp;gt; 3.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed a bug in build.xml in functionTests/util. TestUtil.java is&lt;br/&gt;
    incorrectly compiled with source and target level 1.4. It works&lt;br/&gt;
    correctly after an &apos;ant clobber&apos; because some other 1.3 class&lt;br/&gt;
    depends on it and causes it to be compiled as part of another ant&lt;br/&gt;
    target, but if TestUtil.java is the only file that needs&lt;br/&gt;
    recompilation, jdk 1.4 is used.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Derbyall runs cleanly (with the exception of the &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1578&quot; title=&quot;A number of tests fail due to rework on toString() method of SQLException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1578&quot;&gt;&lt;del&gt;DERBY-1578&lt;/del&gt;&lt;/a&gt; failures)&lt;br/&gt;
on Sun JVM 1.5 and 1.6. Reviews would be greatly appreciated! Thanks.&lt;/p&gt;</comment>
                            <comment id="12423667" author="rhillegas" created="Wed, 26 Jul 2006 16:26:04 +0100"  >&lt;p&gt;Hi Knut Anders. Thanks for the ample explanation of the changes. They look good to me.&lt;/p&gt;</comment>
                            <comment id="12423788" author="knutanders" created="Thu, 27 Jul 2006 08:26:55 +0100"  >&lt;p&gt;Thank you for looking at the patch, Rick. Committed revision 425987.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12337569" name="derby-1546-v1.diff" size="8918" author="knutanders" created="Wed, 26 Jul 2006 16:04:23 +0100"/>
                            <attachment id="12337570" name="derby-1546-v1.stat" size="675" author="knutanders" created="Wed, 26 Jul 2006 16:04:23 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Jul 2006 18:18:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy12dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40037</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>