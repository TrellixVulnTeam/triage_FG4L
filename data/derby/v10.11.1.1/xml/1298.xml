<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:54:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1298/DERBY-1298.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1298] Tracing client data source gives NPE if all data source properties are not set</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1298</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I found this when trying to capture client traces for another issue. If all the properties are set to some value, tracing works without problems. I will upload a repro with more details. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12333267">DERBY-1298</key>
            <summary>Tracing client data source gives NPE if all data source properties are not set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepa">Deepa Remesh</assignee>
                                    <reporter username="deepa">Deepa Remesh</reporter>
                        <labels>
                    </labels>
                <created>Sat, 6 May 2006 07:52:06 +0100</created>
                <updated>Tue, 30 Jun 2009 16:55:46 +0100</updated>
                            <resolved>Fri, 26 May 2006 05:01:54 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12378173" author="deepa" created="Sat, 6 May 2006 08:02:50 +0100"  >&lt;p&gt;This repro uses the example for ClientDataSource tracing in &lt;a href=&quot;http://db.apache.org/derby/papers/DerbyClientSpec.html#-N101A8&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/papers/DerbyClientSpec.html#-N101A8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To run this repro, start network server, run the command &quot;java ClientTracing&quot;. The directory used for tracing &quot;myTraceDir&quot; has to be created before running the command. This gives the following NPE:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
        at java.util.Hashtable.put(Hashtable.java:393)&lt;br/&gt;
        at java.util.Properties.setProperty(Properties.java:102)&lt;br/&gt;
        at org.apache.derby.client.am.LogWriter.getProperties(LogWriter.java:1251)&lt;br/&gt;
        at org.apache.derby.client.am.LogWriter.traceConnectsEntry(LogWriter.java:1069)&lt;br/&gt;
        at org.apache.derby.client.am.LogWriter.traceConnectEntry(LogWriter.java:998)&lt;br/&gt;
        at org.apache.derby.client.am.Connection.initConnection(Connection.java:169)&lt;br/&gt;
        at org.apache.derby.client.am.Connection.&amp;lt;init&amp;gt;(Connection.java:160)&lt;br/&gt;
        at org.apache.derby.client.net.NetConnection.&amp;lt;init&amp;gt;(NetConnection.java:225)&lt;br/&gt;
        at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl.newNetConnection(ClientJDBCObject&lt;br/&gt;
FactoryImpl.java:212)&lt;br/&gt;
        at org.apache.derby.jdbc.ClientDataSource.getConnection(ClientDataSource.java:185)&lt;br/&gt;
        at ClientTracing.sampleConnectUsingSimpleDataSource(ClientTracing.java:44)&lt;br/&gt;
        at ClientTracing.main(ClientTracing.java:10)&lt;/p&gt;

&lt;p&gt;The reason for this is LogWriter.getProperties method tries to set all propeties of ClientDataSource and this can give NPE if the value for any property is null. The solution seems to be just to add a check before setting the property:&lt;br/&gt;
if(value != null)&lt;br/&gt;
                	properties.setProperty(propertyKey, value);&lt;/p&gt;</comment>
                            <comment id="12378229" author="bryanpendleton" created="Sun, 7 May 2006 00:45:17 +0100"  >&lt;p&gt;I agree that adding the null check is the right thing to do here. Seems like a simple, clean fix.&lt;/p&gt;</comment>
                            <comment id="12413126" author="deepa" created="Wed, 24 May 2006 22:19:53 +0100"  >&lt;p&gt;Attaching a patch &apos;derby-1298.diff&apos; which adds a check for null value before calling setProperty in org.apache.derby.client.am.LogWriter. With this patch, I checked that the repro does not give NPE. I also ran derbynetclientmats with Sun jdk 1.4.2 on Windows XP. Please take a look. Thanks.&lt;/p&gt;</comment>
                            <comment id="12413291" author="kmarsden" created="Fri, 26 May 2006 03:36:15 +0100"  >&lt;p&gt;This does not reproduce in 10.1 so marking as regression for 10.2.  I will look at the patch.&lt;/p&gt;</comment>
                            <comment id="12413302" author="kmarsden" created="Fri, 26 May 2006 05:01:54 +0100"  >&lt;p&gt;Resolved with:&lt;br/&gt;
Date: Thu May 25 13:59:02 2006&lt;br/&gt;
New Revision: 409466&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=409466&amp;amp;view=rev&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?rev=409466&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Does not reproduce in 10.1.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12326325" name="ClientTracing.java" size="2645" author="deepa" created="Sat, 6 May 2006 08:02:50 +0100"/>
                            <attachment id="12334518" name="derby-1298.diff" size="652" author="deepa" created="Wed, 24 May 2006 22:19:53 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10420"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 May 2006 23:45:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0uvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>