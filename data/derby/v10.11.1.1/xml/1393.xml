<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1393/DERBY-1393.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1393] PreparedStatement.setObject(int,Object,int) should throw SQLFeatureNotSupportedException for unsupported types</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1393</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;From the javadoc:&lt;/p&gt;

&lt;p&gt;Throws:&lt;br/&gt;
 ...&lt;br/&gt;
    SQLFeatureNotSupportedException - if targetSqlType is a ARRAY, BLOB, CLOB, DATALINK, JAVA_OBJECT, NCHAR, NCLOB, NVARCHAR, LONGNVARCHAR, REF, ROWID, SQLXML or STRUCT data type and the JDBC driver does not support this data type&lt;/p&gt;

&lt;p&gt;Since Derby doesn&apos;t support ARRAY, DATALINK, NCHAR, NCLOB, NVARCHAR, LONGNVARCHAR, REF, ROWID, SQLXML or STRUCT the method should throw SQLFeatureNotSupportedException if used with any of these types. Currently a general type conversion exception is thrown:&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;1) testSetObjectNotImplementedARRAY(org.apache.derbyTesting.functionTests.tests.jdbc4.PreparedStatementTest)SQL Exception: An attempt was made to get a data value of type &apos;CLOB&apos; from a data value of type &apos;2003&apos;.&lt;br/&gt;
&amp;gt;&amp;gt;Caused by: SQL Exception: An attempt was made to get a data value of type &apos;CLOB&apos; from a data value of type &apos;2003&apos;.&lt;/p&gt;</description>
                <environment>JDBC 4, jdk 1.6</environment>
        <key id="12344221">DERBY-1393</key>
            <summary>PreparedStatement.setObject(int,Object,int) should throw SQLFeatureNotSupportedException for unsupported types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="dyret">Dyre Tjeldvoll</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jun 2006 21:38:10 +0100</created>
                <updated>Thu, 13 Dec 2007 09:04:57 +0000</updated>
                            <resolved>Mon, 10 Jul 2006 14:32:32 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12415888" author="dyret" created="Tue, 13 Jun 2006 02:36:44 +0100"  >&lt;p&gt;Note that with the client driver NO exception is thrown when using this method with the unsupported types.&lt;/p&gt;</comment>
                            <comment id="12417760" author="knutanders" created="Mon, 26 Jun 2006 17:33:42 +0100"  >&lt;p&gt;Does Derby support JAVA_OBJECT? Types.JAVA_OBJECT is used in the code, but I have not been able to find out how an application could use this data type. I believe that the type id is for user-defined types, which are not supported by Derby (at least not exposed to the applications). If my assumptions are correct, the full list of types that should throw SQLFeatureNotSupportedException is: ARRAY, DATALINK, JAVA_OBJECT, NCHAR, NCLOB, NVARCHAR, LONGNVARCHAR, REF, ROWID, SQLXML and STRUCT.&lt;/p&gt;</comment>
                            <comment id="12417821" author="rhillegas" created="Mon, 26 Jun 2006 22:58:25 +0100"  >&lt;p&gt;The system catalogs contain object columns, which are Formatables:&lt;/p&gt;

&lt;p&gt;sysaliases.aliasinfo&lt;br/&gt;
syschecks.referencedcolumn&lt;br/&gt;
syscolumns.columndatatype&lt;br/&gt;
syscolumns.columndefault&lt;br/&gt;
sysconglomerates.descriptor&lt;br/&gt;
sysdepends.dependentfinder&lt;br/&gt;
sysdepends.providerfinder&lt;br/&gt;
sysstatistics.statistics&lt;br/&gt;
systriggers.referencedcolumns&lt;/p&gt;

&lt;p&gt;If you select these columns and call ResultSet.getObject(), you will see the following behavior:&lt;/p&gt;

&lt;p&gt;1) Embedded: You get back the Formatable object that is stored in the column&lt;br/&gt;
2) Network and JCC: You get back the result of calling toString() on the Formatable&lt;/p&gt;</comment>
                            <comment id="12418457" author="knutanders" created="Thu, 29 Jun 2006 20:39:00 +0100"  >&lt;p&gt;Thanks for the info, Rick! Seems like setObject() with targetSqlType==JAVA_OBJECT should be supported too, then. For instance, this works:&lt;/p&gt;

&lt;p&gt;    PreparedStatement ps = c.prepareStatement&lt;br/&gt;
        (&quot;select aliasinfo from sys.sysaliases where aliasinfo = ?&quot;);&lt;br/&gt;
    ps.setObject(1, new org.apache.derby.catalog.AliasInfo() {&lt;br/&gt;
            public String getMethodName() &lt;/p&gt;
{
                return &quot;John Cleese&quot;;
            }
&lt;p&gt;        });&lt;br/&gt;
    ps.executeQuery();&lt;/p&gt;

&lt;p&gt;It should also work when targetSqlType is specified.&lt;/p&gt;</comment>
                            <comment id="12418648" author="knutanders" created="Fri, 30 Jun 2006 21:52:27 +0100"  >&lt;p&gt;Attached a patch for this issue (derby-1393-v1.diff). Description of&lt;br/&gt;
the patch:&lt;/p&gt;

&lt;p&gt;  The new setObject() methods call checkForSupportedDataType() to&lt;br/&gt;
  check whether targetSqlType is supported.&lt;/p&gt;

&lt;p&gt;  Added a new error message &quot;The data type &apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos; is not supported.&quot;&lt;br/&gt;
  with SQL state 0A000 (which ensures that the exception is converted&lt;br/&gt;
  to SQLFeatureNotSupportedException). This error message is used when&lt;br/&gt;
  targetSqlType is not supported.&lt;/p&gt;

&lt;p&gt;  Added more JDBC 4.0 constants (from java.sql.Types) to&lt;br/&gt;
  JDBC40Translation and created a test JDBC40TranslationTest which&lt;br/&gt;
  tests that the constants are correct (the values of the constants&lt;br/&gt;
  are hard coded, so we don&apos;t get the compile-time check as with&lt;br/&gt;
  JDBC&lt;/p&gt;
{2,3}
&lt;p&gt;0Translation).&lt;/p&gt;

&lt;p&gt;  New test case SetObjectUnsupportedTest which is run as part of&lt;br/&gt;
  PreparedStatementTest and CallableStatementTest in the jdbc40 suite.&lt;/p&gt;

&lt;p&gt;Derbyall runs cleanly. The patch is ready for review. Thanks!&lt;/p&gt;</comment>
                            <comment id="12419159" author="bryanpendleton" created="Wed, 5 Jul 2006 02:09:50 +0100"  >&lt;p&gt;Hi Knut Anders, two questions from reading the patch:&lt;/p&gt;

&lt;p&gt;1) is it JDBC40TranslationTest.java or JDBC40TranslationTest.junit? Parts of the&lt;br/&gt;
patch refer to the latter, but the patch appears to actually provide the former.&lt;/p&gt;

&lt;p&gt;2) I don&apos;t understand this part; could you elaborate on what&apos;s going on here?&lt;/p&gt;

&lt;p&gt;+/**&lt;br/&gt;
+ * This class is a refactoring wrapper around the shared&lt;br/&gt;
+ * JDBC40Translation class.&lt;br/&gt;
+ */&lt;br/&gt;
+public interface JDBC40Translation extends&lt;br/&gt;
+    org.apache.derby.shared.common.reference.JDBC40Translation &lt;/p&gt;
{
+}
</comment>
                            <comment id="12419166" author="knutanders" created="Wed, 5 Jul 2006 02:49:31 +0100"  >&lt;p&gt;Hi Bryan,&lt;/p&gt;

&lt;p&gt;1) The name of the test, (that is, the argument to org.apache.derbyTesting.functionTests.harness.RunTest) is jdbc4/JDBC40TranslationTest.junit. The file that implements the test is called JDBC40TranslationTest.java. The test harness uses the last part of the name to decide how it should run the test. If it ends with &quot;.java&quot;, the harness knows that the test is a java class with a main() method. If it ends with &quot;.junit&quot;, the harness knows it&apos;s a java class which can be run by a JUnit test runner.&lt;/p&gt;

&lt;p&gt;2) JDBC20Translation and JDBC30Translation are located in both org.apache.derby.iapi.reference and org.apache.derby.shared.common.reference (the former used by the embedded driver and the latter by the client driver). Since constants in an interface are compiled in by the compiler, these interfaces need not be and are not part of the released jar files. The previous version of JDBC40Translation was only located in org.apache.derby.shared.common.reference, and for consistency (and because I needed the constants in the embedded driver) I created a copy in org.apache.derby.iapi.reference. Instead of making a copy of the interface, I let it the new interface extend the original one. This is also done by JDBC30Translation, and because of the way the compiler handles constants in interfaces, there is no run-time dependency between the two interfaces (actually, none of them exist at run-time).&lt;/p&gt;</comment>
                            <comment id="12419689" author="knutanders" created="Fri, 7 Jul 2006 19:07:23 +0100"  >&lt;p&gt;Hi Bryan, did you have more comments to the patch? If not, I plan to commit it next week. Thanks!&lt;/p&gt;</comment>
                            <comment id="12419720" author="bryanpendleton" created="Fri, 7 Jul 2006 22:14:36 +0100"  >&lt;p&gt;No, nothing more; the changes look good to me!&lt;/p&gt;</comment>
                            <comment id="12419970" author="knutanders" created="Mon, 10 Jul 2006 14:32:32 +0100"  >&lt;p&gt;Thanks Bryan! Committed revision 420436.&lt;/p&gt;</comment>
                            <comment id="12551348" author="fuzzylogic" created="Thu, 13 Dec 2007 09:04:57 +0000"  >&lt;p&gt;This issue has been resolved for over a year with no further movement. Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12336202" name="derby-1393-v1.diff" size="27430" author="knutanders" created="Fri, 30 Jun 2006 21:52:27 +0100"/>
                            <attachment id="12336203" name="derby-1393-v1.stat" size="1138" author="knutanders" created="Fri, 30 Jun 2006 21:52:27 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Jun 2006 16:33:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22475</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy1093:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39691</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>