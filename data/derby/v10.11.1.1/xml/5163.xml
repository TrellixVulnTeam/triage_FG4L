<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:42:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5163/DERBY-5163.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5163] [patch] fix up sql cleanup handling</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5163</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When a sql exception occurs, don&apos;t allow potential cascading sql problems when closing sql objects from masking the original cause of the exception.&lt;br/&gt;
Also make sure statements get closed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12502798">DERBY-5163</key>
            <summary>[patch] fix up sql cleanup handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dbrosius@apache.org">Dave Brosius</assignee>
                                    <reporter username="dbrosius@apache.org">Dave Brosius</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2011 05:57:05 +0100</created>
                <updated>Wed, 10 Jul 2013 18:47:19 +0100</updated>
                            <resolved>Sat, 30 Apr 2011 04:59:37 +0100</resolved>
                                    <version>10.7.1.1</version>
                                    <fixVersion>10.8.3.3</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13013821" author="lilywei" created="Thu, 31 Mar 2011 05:18:44 +0100"  >&lt;p&gt;Thanks Dave for the patch. I run some tests with this patch. When I run &apos;java -Dderby.tests.trace=true -Dderby.tests.debug=true junit.textui.TestRunner org.apache.derbyTesting.functionTests.tests.tools.ToolScripts&apos;, I got 4 failures. &lt;br/&gt;
Here is some stacktrace:&lt;br/&gt;
1) ij_show_roles_dbo(org.apache.derbyTesting.functionTests.tests.tools.ToolScrip&lt;br/&gt;
ts)junit.framework.ComparisonFailure: Output at line 3 expected:&amp;lt;ROLEID&lt;br/&gt;
               &amp;gt; but was:&amp;lt;ERROR XJ012: &apos;Statement&apos; already closed.&amp;gt;&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.util.CanonTestCase.compareCanon&lt;br/&gt;
(CanonTestCase.java:109)&lt;br/&gt;
        at org.apache.derbyTesting.functionTests.util.ScriptTestCase.runTest(Scr&lt;br/&gt;
iptTestCase.java:201)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:&lt;br/&gt;
112)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
        at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57&lt;br/&gt;
)&lt;br/&gt;
        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;/p&gt;</comment>
                            <comment id="13020527" author="kmarsden" created="Sat, 16 Apr 2011 03:46:28 +0100"  >&lt;p&gt;Unmarking patch available as Lily discovered some test failures.  Dave, have you seen these in your testing? Any idea what the issue might be?&lt;/p&gt;
</comment>
                            <comment id="13020548" author="dbrosius@apache.org" created="Sat, 16 Apr 2011 04:42:01 +0100"  >&lt;p&gt;Cleanup patch so that we don&apos;t close statements when resultsets from those statements are still active.&lt;/p&gt;</comment>
                            <comment id="13020634" author="kmarsden" created="Sat, 16 Apr 2011 18:33:10 +0100"  >&lt;p&gt;Thank you Dave for the quick response. Could you run suites.All and derbyall if you haven&apos;t already to verify there are no additional issues with the regression tests?    It is always good to post the test results with patches.&lt;/p&gt;


</comment>
                            <comment id="13020720" author="lilywei" created="Sun, 17 Apr 2011 05:29:58 +0100"  >&lt;p&gt;Thanks Dave and Kathey. When I post a patch, I usually run suites.All and derbyall using the following script:&lt;br/&gt;
java -client -Dderby.tests.trace=true -XX:MaxPermSize=192M -Xmx1024M -Xms512M -D&lt;br/&gt;
derbyTesting.oldReleasePath=c:/derby/oldrelease/jars junit.textui.TestRunner org&lt;br/&gt;
.apache.derbyTesting.functionTests.suites.AllPackages 2&amp;gt;&amp;amp;1 | tee rjall.out&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;java org.apache.derbyTesting.functionTests.harness.RunSuite derbyall 2&amp;gt;&amp;amp;1 | tee&lt;br/&gt;
djall.out&lt;/p&gt;</comment>
                            <comment id="13020722" author="lilywei" created="Sun, 17 Apr 2011 05:31:06 +0100"  >&lt;p&gt;FYI. I run Suites.all with the new patch and everything pass for me with the patch.&lt;/p&gt;</comment>
                            <comment id="13020735" author="dbrosius@apache.org" created="Sun, 17 Apr 2011 08:54:40 +0100"  >&lt;p&gt;Thanks Lily,   Kathey - i have a bear of a time getting the tests to all pass before these changes. I&apos;m thinking the errors are memory related currently, hopefully i&apos;ve got the special sauce going now, based on Lily&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13021961" author="dbrosius@apache.org" created="Wed, 20 Apr 2011 05:56:59 +0100"  >&lt;p&gt;ran the following&lt;/p&gt;

&lt;p&gt;java -classpath tools/java/junit.jar:tools/java/jakarta-oro-2.0.8.jar:jars/sane/derbyTesting.jar:jars/sane/derby.jar:jars/sane/derbyTools.jar:jars/sane/derbyTools.jar:jars/sane/derbyrun.jar:jars/sane/derbynet.jar:jars/sane/derbyclient.jar -Xmx800m -XX:MaxPermSize=512m junit.textui.TestRunner org.apache.derbyTesting.functionTests.suites.All&lt;/p&gt;


&lt;p&gt;got no errors&lt;/p&gt;

&lt;p&gt;Time: 21,886.483&lt;/p&gt;

&lt;p&gt;OK (13459 tests)&lt;/p&gt;
</comment>
                            <comment id="13026363" author="kmarsden" created="Thu, 28 Apr 2011 17:18:53 +0100"  >
&lt;p&gt;I am sorry for the delay in responding. If you think the new patch is read for commit can you check patch available and it will get back on the radar.   Is derbyall clean as well l?   I am not seeing the original path anymore.  For future reference, I think it is good in general to keep the old ones there to see what&apos;s changed.  Thank you so much for all your work on Derby!&lt;/p&gt;


</comment>
                            <comment id="13027002" author="lilywei" created="Fri, 29 Apr 2011 15:56:33 +0100"  >&lt;p&gt;Thanks Dave and Kathey. The patch looks good to me. I did not see test failure on ToolsScripts. Suites.all passed on trunk with the patch. I am running derbyall now. If there is no objection, I will check-in the patch shortly.&lt;/p&gt;</comment>
                            <comment id="13027285" author="lilywei" created="Sat, 30 Apr 2011 04:59:37 +0100"  >&lt;p&gt;I&apos;ve committed with revision 1098040. Thanks, Dave.&lt;/p&gt;</comment>
                            <comment id="13057385" author="myrna" created="Wed, 29 Jun 2011 19:33:09 +0100"  >&lt;p&gt;Correcting fix version; this is &lt;b&gt;not&lt;/b&gt; in 10.8 branch, but eligible for backport (even though marked improvement).&lt;/p&gt;</comment>
                            <comment id="13086566" author="kmarsden" created="Wed, 17 Aug 2011 21:25:58 +0100"  >&lt;p&gt;Changing this to a bug.  Looking at the change,  I wonder if it is ok to completely throw away the errors closing statements. It would be nice to see those included with a setNextException() so all errors get reported.&lt;/p&gt;</comment>
                            <comment id="13685150" author="knutanders" created="Mon, 17 Jun 2013 10:19:10 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                            <comment id="13704759" author="kmarsden" created="Wed, 10 Jul 2013 18:10:58 +0100"  >&lt;p&gt;assign tempoarily for 10.8 backport &lt;/p&gt;</comment>
                            <comment id="13704791" author="jira-bot" created="Wed, 10 Jul 2013 18:31:29 +0100"  >&lt;p&gt;Commit 1501867 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kmarsden&quot; class=&quot;user-hover&quot; rel=&quot;kmarsden&quot;&gt;Kathey Marsden&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1501867&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1501867&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5163&quot; title=&quot;[patch] fix up sql cleanup handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5163&quot;&gt;&lt;del&gt;DERBY-5163&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;patch&amp;#93;&lt;/span&gt; fix up sql cleanup handling &lt;/p&gt;

&lt;p&gt;Contributed by Dave Brosius.&lt;br/&gt;
Merged  1098040 from trunk to 10.8&lt;/p&gt;</comment>
                            <comment id="13704817" author="kmarsden" created="Wed, 10 Jul 2013 18:47:19 +0100"  >&lt;p&gt;reassigning. Backport complete&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12656863">DERBY-6289</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12476830" name="sql_cleanup_fixes.diff" size="4814" author="dbrosius@apache.org" created="Wed, 20 Apr 2011 05:56:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 31 Mar 2011 04:18:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310090" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Issue &amp; fix info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10102"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0fg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36321</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>