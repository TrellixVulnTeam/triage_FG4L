<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:41:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3738/DERBY-3738.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3738] Add more tests for legal/illegal commands in the different replication states</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3738</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Adding new replication state tests:&lt;br/&gt;
  ...&lt;br/&gt;
  testReplication_Local_3_p1_StateNegativeTests &lt;br/&gt;
  testReplication_Local_3_p2_StateTests_bigInsert_immediateStopMaster &lt;br/&gt;
  testReplication_Local_3_p2_StateTests_smallInsert_immediateStopMaster_DISABLED (Due to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3617&quot; title=&quot;failover on slave hangs after stopmaster on master.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3617&quot;&gt;DERBY-3617&lt;/a&gt;)&lt;br/&gt;
  testReplication_Local_3_p2_StateTests_bigInsert_sleepBeforeStopMaster&lt;br/&gt;
  testReplication_Local_3_p2_StateTests_smallInsert_sleepBeforeStopMaster&lt;br/&gt;
  testReplication_Local_3_p3_StateNegativeTests &lt;br/&gt;
  testReplication_Local_3_p4_StateNegativeTests&lt;/p&gt;

&lt;p&gt;plus refactoring and cleanup.&lt;/p&gt;</description>
                <environment>-</environment>
        <key id="12399150">DERBY-3738</key>
            <summary>Add more tests for legal/illegal commands in the different replication states</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olesolberg">Ole Solberg</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jun 2008 09:57:16 +0100</created>
                <updated>Wed, 1 Jul 2009 00:55:08 +0100</updated>
                            <resolved>Mon, 9 Feb 2009 13:32:30 +0000</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.1.1</fixVersion>
                                    <component>Replication</component>
                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12608702" author="olesolberg" created="Fri, 27 Jun 2008 10:04:29 +0100"  >&lt;p&gt;Patch 3738_p1-v1:&lt;/p&gt;

&lt;p&gt;Adding new replication state tests:&lt;br/&gt;
  ...&lt;br/&gt;
  testReplication_Local_3_p1_StateNegativeTests used 14988 ms .&lt;br/&gt;
  testReplication_Local_3_p2_StateTests_bigInsert_immediateStopMaster used 23454 ms .&lt;br/&gt;
  testReplication_Local_3_p2_StateTests_smallInsert_immediateStopMaster_DISABLED used 207 ms .&lt;br/&gt;
  testReplication_Local_3_p2_StateTests_bigInsert_sleepBeforeStopMaster used 32065 ms .&lt;br/&gt;
  testReplication_Local_3_p2_StateTests_smallInsert_sleepBeforeStopMaster used 24883 ms .&lt;br/&gt;
  testReplication_Local_3_p3_StateNegativeTests used 14714 ms .&lt;br/&gt;
  testReplication_Local_3_p4_StateNegativeTests used 14915 ms &lt;/p&gt;

&lt;p&gt;plus refactoring and cleanup.&lt;/p&gt;

&lt;p&gt;ReplicationSuite and suitesAll run on several platforms.&lt;br/&gt;
---------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Details:&lt;br/&gt;
--------&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/Utils.java&lt;br/&gt;
       rmFiles()&lt;br/&gt;
           w/tracerepl if file.delete did not succeed: printout filename.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local.java&lt;br/&gt;
       Rename testReplication_Local() to testReplication_Local_existingTestsAsReplLoad()&lt;br/&gt;
              testLogFilesSynched() to testReplication_Local_LogFilesSynched()&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_StateTest_part2.java&lt;br/&gt;
       assertException() moved to ReplicationRun.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationSuite.java&lt;br/&gt;
       Added new test suites.&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p1.java&lt;br/&gt;
       Negative replication state testsmaster and slave running: &lt;br/&gt;
       testReplication_Local_3_p1_StateNegativeTests()&lt;br/&gt;
         Catch REPLICATION_CONFLICTING_ATTRIBUTES&lt;br/&gt;
       master and slave running:&lt;br/&gt;
         Catch SLAVE_OPERATION_DENIED_WHILE_CONNECTED&lt;br/&gt;
         Catch REPLICATION_NOT_IN_SLAVE_MODE&lt;br/&gt;
         Catch REPLICATION_NOT_IN_MASTER_MODE&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p3.java&lt;br/&gt;
       Negative replication state tests: &lt;br/&gt;
       testReplication_Local_3_p3_StateNegativeTests()&lt;br/&gt;
       master and slave running:&lt;br/&gt;
       stop master:&lt;br/&gt;
         Catch CANNOT_CONNECT_TO_DB_IN_SLAVE_MODE&lt;br/&gt;
       attempt failover:&lt;br/&gt;
         Catch REPLICATION_NOT_IN_MASTER_MODE&lt;br/&gt;
         Catch CANNOT_CONNECT_TO_DB_IN_SLAVE_MODE&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun.java&lt;br/&gt;
       Removed suite()&lt;br/&gt;
       Clean up debug output.&lt;br/&gt;
       Added showCurrentState(),&lt;br/&gt;
             waitForConnect(),&lt;br/&gt;
             waitForSQLState()&lt;br/&gt;
       Clean up local variable naming.&lt;br/&gt;
       Increase timeout for server startup.&lt;br/&gt;
       assertException() moved from ReplicationRun_Local_StateTest_part2.&lt;br/&gt;
       Moved _testInsertUpdateDeleteOnMaster()&lt;br/&gt;
             _verifyDatabase(),&lt;br/&gt;
             _verify() from ReplicationRun_Local_1.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Distributed.java&lt;br/&gt;
       Variable renamed.&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_showStateChange.java&lt;br/&gt;
       testReplication_Local_showStateChange_showReplState()&lt;br/&gt;
       A test NOT run as part of ReplicationSuite, but can be used to log &lt;br/&gt;
       how long time is spent on replication stae transitions.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_1.java&lt;br/&gt;
       Renamed testReplication_Local_1() to testReplication_Local_1_InsertUpdateDeleteOnMaster().&lt;br/&gt;
       Moved _testInsertUpdateDeleteOnMaster()&lt;br/&gt;
             _verifyDatabase(),&lt;br/&gt;
             _verify() to ReplicationRun.&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3.java&lt;br/&gt;
       Utilities for ReplicationRun_Local_3_p*.java tests.&lt;br/&gt;
       _failOver(), _startSlaveTrueAndCreateTrue(), _stopMaster(),  _stopSlave().&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p2.java&lt;br/&gt;
       replication_Local_3_p2_StateTests()&lt;br/&gt;
         Does&lt;br/&gt;
             _testInsertUpdateDeleteOnMaster()&lt;br/&gt;
             _stopMaster()&lt;br/&gt;
             _failOver()&lt;br/&gt;
         checking expected repl. state after each command.&lt;br/&gt;
         Used as common test pattern for:&lt;br/&gt;
       testReplication_Local_3_p2_StateTests_bigInsert_immediateStopMaster()&lt;br/&gt;
       testReplication_Local_3_p2_StateTests_smallInsert_immediateStopMaster_DISABLED()&lt;br/&gt;
           (Disabled due to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-3617&quot; title=&quot;failover on slave hangs after stopmaster on master.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-3617&quot;&gt;DERBY-3617&lt;/a&gt;)&lt;br/&gt;
       testReplication_Local_3_p2_StateTests_bigInsert_sleepBeforeStopMaster()&lt;br/&gt;
       testReplication_Local_3_p2_StateTests_smallInsert_sleepBeforeStopMaster()&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p4.java&lt;br/&gt;
       testReplication_Local_3_p4_StateNegativeTests()&lt;br/&gt;
       In replication mode:&lt;br/&gt;
         Catch CANNOT_CONNECT_TO_DB_IN_SLAVE_MODE&lt;br/&gt;
         &apos;internal_stopslave=true&apos;: Catch REPLICATION_STOPSLAVE_NOT_INITIATED &lt;br/&gt;
       After failover.&lt;br/&gt;
         verify master and slave db&apos;s.&lt;/p&gt;
</comment>
                            <comment id="12637448" author="olesolberg" created="Tue, 7 Oct 2008 12:28:30 +0100"  >&lt;p&gt;Updated patch (against rev. 702147, was 670468).&lt;/p&gt;

&lt;p&gt;Would be nice to get this in before adding more replication tests...&lt;/p&gt;

&lt;p&gt;suites.All run - no failures.&lt;/p&gt;</comment>
                            <comment id="12639162" author="myrna" created="Mon, 13 Oct 2008 19:47:16 +0100"  >&lt;p&gt;Thanks for your patience Ole. &lt;br/&gt;
I committed the updated patch with revision 704197, except I modified the class name in the license part for each of the added classes.&lt;br/&gt;
I ran the replicationTest suite and then separately the one test not added in.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384822" name="3738_p1-v1.diff.txt" size="83264" author="olesolberg" created="Fri, 27 Jun 2008 10:04:29 +0100"/>
                            <attachment id="12384821" name="3738_p1-v1.status.txt" size="1428" author="olesolberg" created="Fri, 27 Jun 2008 10:04:29 +0100"/>
                            <attachment id="12391623" name="3738_p1-v2.diff.txt" size="83144" author="olesolberg" created="Tue, 7 Oct 2008 12:28:30 +0100"/>
                            <attachment id="12391622" name="3738_p1-v2.status.txt" size="1428" author="olesolberg" created="Tue, 7 Oct 2008 12:28:30 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Oct 2008 18:47:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>