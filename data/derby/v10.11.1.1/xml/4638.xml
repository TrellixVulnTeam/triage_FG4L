<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:13:32 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4638/DERBY-4638.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4638] Expose names of top-level test suites for easier scripting</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4638</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I sometimes run each of the top-level JUnit test suites individually so that they can be run in parallel and complete faster. It would be useful if AllPackages could expose the list of suites to allow scripting of such tasks without needing to change the script when a new suite is added.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463543">DERBY-4638</key>
            <summary>Expose names of top-level test suites for easier scripting</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 May 2010 08:23:11 +0100</created>
                <updated>Mon, 29 Nov 2010 14:21:33 +0000</updated>
                            <resolved>Thu, 6 May 2010 10:27:15 +0100</resolved>
                                    <version>10.6.2.1</version>
                    <version>10.7.1.1</version>
                                    <fixVersion>10.6.2.1</fixVersion>
                    <fixVersion>10.7.1.1</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12864242" author="knutanders" created="Wed, 5 May 2010 10:21:58 +0100"  >&lt;p&gt;The attached patch makes it possible to retrieve the list of test suites either by calling the method AllPackages.getTopLevelSuiteNames(), which returns an array of strings with class names, or by running AllPackages from the command line:&lt;/p&gt;

&lt;p&gt;$ java -cp classes:tools/java/junit.jar org.apache.derbyTesting.functionTests.suites.AllPackages&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.derbynet._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.lang._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.jdbcapi._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.store._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.tools._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.engine._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.demo._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.memory._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.memorydb._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.i18n._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.jdbc4._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.management._Suite&lt;br/&gt;
org.apache.derbyTesting.unitTests.junit._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.upgradeTests._Suite&lt;br/&gt;
org.apache.derbyTesting.functionTests.suites.EncryptionSuite&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationSuite&lt;/p&gt;

&lt;p&gt;The patch makes the following changes:&lt;/p&gt;

&lt;p&gt;suites/AllPackages.java:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Added public methods getTopLevelSuiteNames() and main() to extract the list of test suites&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;suites/All.java:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Moved adding of EncryptionSuite and ReplicationSuite to AllPackages so that they also are included in the list of test suites&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tests/replicationTests/ReplicationSuite.java:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Made suite() check vmSupportsJDBC3() before adding test cases. Before, this was done in suites.All.suite(), but when the adding of ReplicationSuite was moved from All to AllPackages, it was also changed to be consistent with the other test suites, which do these checks locally in their suite() methods.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12864246" author="knutanders" created="Wed, 5 May 2010 10:29:19 +0100"  >&lt;p&gt;I have run suites.All on Java 6 and on Java 1.4.2 and verified that all the tests still run, and that the suites that need to be added using reflection on 1.4.2 (because they are compiled with target level 1.5 or higher) don&apos;t cause any problems with these changes.&lt;/p&gt;

&lt;p&gt;I&apos;ve also run the replication test on phoneME to verify that moving the check of the JDBC level didn&apos;t cause problems. Before the change, the suite() method failed with a NoClassDefFoundError. After the change, suite() returned successfully (but didn&apos;t add any tests, as expected).&lt;/p&gt;</comment>
                            <comment id="12864709" author="knutanders" created="Thu, 6 May 2010 10:27:15 +0100"  >&lt;p&gt;Committed revision 941627.&lt;/p&gt;</comment>
                            <comment id="12864732" author="knutanders" created="Thu, 6 May 2010 12:27:11 +0100"  >&lt;p&gt;I threw together an application that extracts the list of suites from the new public method in AllPackages and runs them in parallel. On my machine, suites.All takes about 38 minutes when I run the suites in four sub-processes this way. Attaching it here in case someone is interested in using it as a starting point. There&apos;s a README.txt file in the tarball explaining how to use it.&lt;/p&gt;</comment>
                            <comment id="12864764" author="bryanpendleton" created="Thu, 6 May 2010 14:31:28 +0100"  >&lt;p&gt;Can we make an Ant script which does this, by using the parallel task support in Ant? &lt;/p&gt;</comment>
                            <comment id="12864773" author="knutanders" created="Thu, 6 May 2010 14:57:54 +0100"  >&lt;p&gt;Hi Bryan,&lt;/p&gt;

&lt;p&gt;That sounds like a good idea. I haven&apos;t used Ant a lot for running JUnit tests, but I don&apos;t see any reason why it shouldn&apos;t be possible to do something similar in Ant.&lt;/p&gt;</comment>
                            <comment id="12864844" author="myrna" created="Thu, 6 May 2010 18:16:06 +0100"  >&lt;p&gt;Can this be backported to 10.6?&lt;/p&gt;</comment>
                            <comment id="12864932" author="knutanders" created="Thu, 6 May 2010 22:18:36 +0100"  >&lt;p&gt;Hi Myrna,&lt;br/&gt;
It should be safe to backport it to 10.6. I&apos;ll look into doing that.&lt;/p&gt;</comment>
                            <comment id="12865109" author="knutanders" created="Fri, 7 May 2010 11:44:00 +0100"  >&lt;p&gt;Merged to the 10.6 branch and committed revision 942049.&lt;/p&gt;</comment>
                            <comment id="12865285" author="dagw" created="Fri, 7 May 2010 20:50:24 +0100"  >&lt;p&gt;Thanks for this useful addition + the parallel tester bundle, having fun trying to make my regressions run fast, here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Nice to get some benefit from the work that&apos;s been done to make the ports configurable!&lt;/p&gt;</comment>
                            <comment id="12870025" author="lilywei" created="Fri, 21 May 2010 17:02:43 +0100"  >&lt;p&gt;Thank you for this wonderful addition + for testing faster and throughly. It is this kind of long term thinking that makes Derby better and better everyday. Really enjoy it.&lt;/p&gt;</comment>
                            <comment id="12876218" author="kristwaa" created="Mon, 7 Jun 2010 13:08:41 +0100"  >&lt;p&gt;I tried back-porting this to 10.5, but there are some issues with that, besides the merges not being clean;&lt;br/&gt;
 1) Configurable port functionality missing (fixed by back-porting &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4217&quot; title=&quot;Make the default port for the suites.All run configurable with a system property.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4217&quot;&gt;&lt;del&gt;DERBY-4217&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
 2) SysinfoTest fails (fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-858&quot; title=&quot;ijConnName test output order is non-deterministic.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-858&quot;&gt;&lt;del&gt;DERBY-858&lt;/del&gt;&lt;/a&gt;?)&lt;/p&gt;

&lt;p&gt;It may be possible to do this, but I guess the safest approach is to have more patience when testing changes on the 10.5 branch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In any case, thanks a lot to Tiago and Knut Anders for making this improvement happen!&lt;/p&gt;</comment>
                            <comment id="12876220" author="knutanders" created="Mon, 7 Jun 2010 13:11:46 +0100"  >&lt;p&gt;Thanks for checking out the possibility for a backport, Kristian. Since there&apos;s not more to do on this issue, I&apos;m closing it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12416700">DERBY-4090</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12443851" name="DerbyTestRunner.tar.gz" size="13263" author="knutanders" created="Thu, 6 May 2010 12:27:11 +0100"/>
                            <attachment id="12443697" name="list-tests.diff" size="12899" author="knutanders" created="Wed, 5 May 2010 10:21:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 May 2010 13:31:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31309</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0otb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>