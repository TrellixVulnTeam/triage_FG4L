<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4417/DERBY-4417.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4417] Enable distributed replication testing - master server, slave server and test client running on different hosts.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4417</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12438796">DERBY-4417</key>
            <summary>Enable distributed replication testing - master server, slave server and test client running on different hosts.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12381451">DERBY-3161</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="olesolberg">Ole Solberg</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2009 11:53:48 +0100</created>
                <updated>Mon, 4 Jan 2010 09:05:28 +0000</updated>
                                            <version>10.6.1.0</version>
                                                    <component>Replication</component>
                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12768658" author="olesolberg" created="Thu, 22 Oct 2009 13:11:52 +0100"  >&lt;p&gt;Attaching preliminary patches to run distributed replication testing - i.e. master server, slave server and test client running on different hosts.&lt;/p&gt;


&lt;p&gt;DERBY_distr_repl_A.diff.txt&lt;br/&gt;
-------------------------------------&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/multi/StressMultiTest.java&lt;/p&gt;

&lt;p&gt;  Factoring out decorator code to make it available for cases when running against an &lt;br/&gt;
  already existing server.&lt;br/&gt;
  Added clientSuite() to experiment with different number of threads and running time &lt;br/&gt;
  on client/server.&lt;/p&gt;


&lt;p&gt;DERBY_distr_repl_B.diff.txt&lt;br/&gt;
-------------------------------------&lt;br/&gt;
A      java/testing/org/apache/derbyTesting/functionTests/tests/multi/XStressMultiTest.java&lt;br/&gt;
  Run StressMultiTest against an existing server.&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/multi/StressMultiClient50x59.java&lt;br/&gt;
  Experimenting with various settings for standard (localhost) StressMultiTest. Using&lt;br/&gt;
  clientServer() added in StressMultiTest().&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/StandardTests.java&lt;br/&gt;
  Added stressMultiTest() that sets up the XStressMultiTest suite.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationTestRun.java&lt;br/&gt;
  Set to run without SecurityManager.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun.java&lt;br/&gt;
  Enable to use jvms specified in replicationtest.properties file.&lt;br/&gt;
  NB. This needs further work to combine original use of BaseTestCase.getJavaExecutableName()&lt;br/&gt;
      and jvms specified in replicationtest.properties file.&lt;/p&gt;

&lt;p&gt;A      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationTestRunStress.java&lt;br/&gt;
  Replication test load using StandardTest.stressMultiTest = XStressMultiTest.&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Full.java&lt;br/&gt;
  Added initEnvironment() to get replication test configuration parameters from&lt;br/&gt;
  replicationtest.properties file located in &quot;user.dir&quot;.&lt;/p&gt;


&lt;p&gt;DERBY_distr_repl_C-replicationtest.properties&lt;br/&gt;
---------------------------------------------------------------&lt;br/&gt;
  Example replicationtest.properties to be copied to &quot;user.dir&quot; before starting distributed replication tests.&lt;/p&gt;


&lt;p&gt;DERBY_distr_repl_D-start_script.txt&lt;br/&gt;
------------------------------------------------&lt;br/&gt;
  Example script to set up and run a distributed replication test.&lt;/p&gt;
</comment>
                            <comment id="12768998" author="dagw" created="Fri, 23 Oct 2009 01:46:38 +0100"  >&lt;p&gt;Thanks, Ole! &lt;br/&gt;
I know you said these are preliminary, so my comments may be premature. &lt;br/&gt;
Just browsing through I noticed that you use System.out.println; is there a reason why you don&apos;t use&lt;br/&gt;
the println that&apos;s available (inherited) from BaseTestCase (prints conditionally if verbose set, i.e. derby.tests.debug).&lt;br/&gt;
I also notice that StressMultiClient50x59 is misnamed; it actually uses 100 by 30, should these numbers be parameterizable? And/or rename test? I this the name XStressMultiTest a could be more descriptive? &lt;/p&gt;</comment>
                            <comment id="12769113" author="olesolberg" created="Fri, 23 Oct 2009 07:58:41 +0100"  >&lt;p&gt;Thanks, Dag!&lt;br/&gt;
I will fix these in the next upload of the patch - the printlns are from my testing, so are the name/&quot;param&quot; mismatch.&lt;br/&gt;
It&apos;s a good idea to make those numbers parameterizable. I agree the test should be renamed.&lt;/p&gt;</comment>
                            <comment id="12795254" author="olesolberg" created="Wed, 30 Dec 2009 08:33:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4417&quot; title=&quot;Enable distributed replication testing - master server, slave server and test client running on different hosts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4417&quot;&gt;DERBY-4417&lt;/a&gt;_P1_p1.diff.txt:&lt;br/&gt;
--------------------------&lt;br/&gt;
This patch is a preparation for patches to enable distributed replication testing.&lt;br/&gt;
The patch touches only java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun.java:&lt;/p&gt;

&lt;p&gt;1. Allow a plain class w/main(), i.e. NOT using JUnit, as a client load when running distributed.&lt;/p&gt;

&lt;p&gt;2. Introduced THREADS, MINUTES in preparation for the ReplicationTestRunStress/StressMultiTest load client.&lt;/p&gt;

&lt;p&gt;3. Removed using pre-installed dummy ij script - still creates the script in $&lt;/p&gt;
{HOME}
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt; . Various cleanups: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Removing unused code.&lt;/li&gt;
	&lt;li&gt;Introduced ReplicationRun.get
{Master|Slave}
&lt;p&gt;JavaExecutableName() to handle&lt;br/&gt;
     the equivalent of BaseTestCase.getJavaExecutableName() also when running&lt;br/&gt;
     distributed: allowing jvms to be specified in replicationtest.properties.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationSuite and&lt;br/&gt;
org.apache.derbyTesting.functionTests.suites.All ran OK.&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Distributed&lt;br/&gt;
also ran OK with various loads.&lt;/p&gt;

&lt;p&gt;Planning to commit later today.&lt;/p&gt;</comment>
                            <comment id="12795255" author="olesolberg" created="Wed, 30 Dec 2009 08:35:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4417&quot; title=&quot;Enable distributed replication testing - master server, slave server and test client running on different hosts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4417&quot;&gt;DERBY-4417&lt;/a&gt;_P1_p1.diff.txt intended for commit.&lt;/p&gt;</comment>
                            <comment id="12795304" author="olesolberg" created="Wed, 30 Dec 2009 13:12:11 +0000"  >&lt;p&gt;Committed &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4417&quot; title=&quot;Enable distributed replication testing - master server, slave server and test client running on different hosts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4417&quot;&gt;DERBY-4417&lt;/a&gt;_P1_p1.diff to trunk as revision 894607.&lt;/p&gt;</comment>
                            <comment id="12795361" author="olesolberg" created="Wed, 30 Dec 2009 17:39:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4417&quot; title=&quot;Enable distributed replication testing - master server, slave server and test client running on different hosts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4417&quot;&gt;DERBY-4417&lt;/a&gt;_P2_p1.diff.txt:&lt;br/&gt;
---------------------------&lt;br/&gt;
This patch enables the ReplicationRun_Distributed test, reading a replication configuration from &lt;br/&gt;
the replicationtest.properties file.&lt;/p&gt;

&lt;p&gt;1. java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Distributed.java&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Write the &quot;dummy&quot; ij script &apos;ij_dummy_script.sql&apos;.&lt;/li&gt;
	&lt;li&gt;Read replication configuration from  &apos;$
{user.dir}
&lt;p&gt;/replicationtest.properties&apos;.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Replace  System.out.println() with Utils.DEBUG()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2. java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/SimplePerfTest.java&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Enable specifying database path name for test client connection.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;3. java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/SimplePerfTest_Verify.java&lt;br/&gt;
   Added. A simple verificationclient for SimplePerfTest.java just asserting correct number of rows in &lt;br/&gt;
   the test database (slave or master).&lt;/p&gt;

&lt;p&gt;4. java/testing/org/apache/derbyTesting/junit/TestConfiguration.java&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added existingServerSuite(..., dbPath).Ditto for clientExistingServerSuite(), existingServerDecorator()&lt;br/&gt;
     and TestConfiguration().&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;5. java/testing/org/apache/derbyTesting/junit/ServerSetup.java&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added getNewConfiguration(..., dbPath) and ditto for ServerSetup().&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4417&quot; title=&quot;Enable distributed replication testing - master server, slave server and test client running on different hosts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4417&quot;&gt;DERBY-4417&lt;/a&gt;_P1_p1.diff.&lt;/p&gt;

&lt;p&gt;Ran OK on suites.All and org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Distributed.&lt;/p&gt;

&lt;p&gt;ReplicationRun_Distributed is not wired into suites.All. It is intended to be run &quot;manually&quot;.&lt;/p&gt;</comment>
                            <comment id="12796115" author="olesolberg" created="Mon, 4 Jan 2010 09:04:59 +0000"  >&lt;p&gt;Committed  &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4417&quot; title=&quot;Enable distributed replication testing - master server, slave server and test client running on different hosts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4417&quot;&gt;DERBY-4417&lt;/a&gt;_P2_p1.diff.txt to trunk  as revision 895582.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12429126" name="DERBY-4417_P1_p1.diff" size="39334" author="olesolberg" created="Wed, 30 Dec 2009 08:33:43 +0000"/>
                            <attachment id="12429143" name="DERBY-4417_P2_p1.diff.txt" size="27282" author="olesolberg" created="Wed, 30 Dec 2009 17:39:01 +0000"/>
                            <attachment id="12422895" name="DERBY_distr_repl_A.diff.txt" size="6286" author="olesolberg" created="Thu, 22 Oct 2009 13:11:52 +0100"/>
                            <attachment id="12422896" name="DERBY_distr_repl_B.diff.txt" size="42422" author="olesolberg" created="Thu, 22 Oct 2009 13:11:52 +0100"/>
                            <attachment id="12422897" name="DERBY_distr_repl_C-replicationtest.properties" size="3616" author="olesolberg" created="Thu, 22 Oct 2009 13:11:52 +0100"/>
                            <attachment id="12422898" name="DERBY_distr_repl_D-start_script.txt" size="2240" author="olesolberg" created="Thu, 22 Oct 2009 13:12:34 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Oct 2009 00:46:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0re7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38256</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>