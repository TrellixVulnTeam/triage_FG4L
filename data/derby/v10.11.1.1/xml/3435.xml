<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:39:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3435/DERBY-3435.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3435] Add an MBean for monitoring and managing the Network Server</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3435</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Most functionality of and information about a running instance of the Network Server is currently only available from the host running the Network Server, using the NetworkServerControl API.&lt;/p&gt;

&lt;p&gt;With a JMX Management and Monitoring service in place utilizing JMX (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1387&quot; title=&quot;Add JMX extensions to Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1387&quot;&gt;&lt;del&gt;DERBY-1387&lt;/del&gt;&lt;/a&gt;), it is possible to expose some of the Network Server functionality and information through an MBean that is specific to the Network Server, to both local and remote users (JMX clients), subject to security restrictions. Access to Derby libraries on the client side is not even a requirement, potentially making a server administrator&apos;s job a lot easier.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12389028">DERBY-3435</key>
            <summary>Add an MBean for monitoring and managing the Network Server</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12344126">DERBY-1387</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johnemb">John H. Embretsen</assignee>
                                    <reporter username="johnemb">John H. Embretsen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Feb 2008 16:01:19 +0000</created>
                <updated>Fri, 28 Mar 2008 12:48:40 +0000</updated>
                            <resolved>Thu, 27 Mar 2008 10:08:02 +0000</resolved>
                                                    <fixVersion>10.4.1.3</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12570729" author="johnemb" created="Wed, 20 Feb 2008 16:09:47 +0000"  >&lt;p&gt;The patch d3435_v01.diff defines and implements an MBean for monitoring&lt;br/&gt;
and (future work) management of the Network Server. &lt;/p&gt;

&lt;p&gt;Although the MBean works, it is currently limited to exposing read-only &lt;br/&gt;
attributes only (i.e. no management functionality), in addition to the&lt;br/&gt;
ping() operation, so I consider this just to be a start of what could &lt;br/&gt;
eventually become a very useful bean for server administrators. &lt;/p&gt;

&lt;p&gt;Patch contents:&lt;/p&gt;

&lt;p&gt;A      java/engine/org/apache/derby/mbeans/drda&lt;/p&gt;

&lt;p&gt;  New package for Network Server mbeans (included in derbynet.jar)&lt;/p&gt;


&lt;p&gt;A      java/engine/org/apache/derby/mbeans/drda/NetworkServerMBean.java&lt;/p&gt;

&lt;p&gt;  The defining interface of the MBean. The following read-only attributes are&lt;br/&gt;
  available:&lt;/p&gt;

&lt;p&gt;    (&lt;span class=&quot;error&quot;&gt;&amp;#91;Attribute&amp;#93;&lt;/span&gt;            - &lt;span class=&quot;error&quot;&gt;&amp;#91;associated server property&amp;#93;&lt;/span&gt;)&lt;br/&gt;
    DrdaHost                - derby.drda.host&lt;br/&gt;
    DrdaKeepAlive           - derby.drda.keepAlive&lt;br/&gt;
    DrdaMaxThreads          - derby.drda.maxThreads&lt;br/&gt;
    DrdaPortNumber          - derby.drda.portNumber&lt;br/&gt;
    DrdaSecurityMechanism   - derby.drda.securityMechanism&lt;br/&gt;
    DrdaSslMode             - derby.drda.sslMode&lt;br/&gt;
    DrdaStreamOutBufferSize - derby.drda.streamOutBufferSize&lt;br/&gt;
    DrdaTimeSlice           - derby.drda.timeSlice&lt;br/&gt;
    DrdaTraceAll            - derby.drda.traceAll&lt;br/&gt;
    DrdaTraceDirectory      - derby.drda.traceDirectory&lt;/p&gt;

&lt;p&gt;  The ping() operation requires the permission&lt;/p&gt;

&lt;p&gt;    permission java.net.SocketPermission &quot;*&quot;, &quot;connect,resolve&quot;;&lt;/p&gt;

&lt;p&gt;  (&quot;*&quot; may be replaced, depending on the -h option of the server) &lt;br/&gt;
  granted to derbynet.jar in order to work, due to the way the network&lt;br/&gt;
  server is currently implemented.&lt;/p&gt;

&lt;p&gt;A      java/drda/org/apache/derby/impl/drda/NetworkServerMBeanImpl.java&lt;/p&gt;

&lt;p&gt;  The implementation of NetworkServerMBean. Instruments NetworkServerControlImpl.&lt;/p&gt;


&lt;p&gt;M      java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;removes some unused imports&lt;/li&gt;
	&lt;li&gt;registers the MBean at server startup&lt;/li&gt;
	&lt;li&gt;unregisters the MBean at server shutdown&lt;/li&gt;
	&lt;li&gt;relaxes the modifier of the method getPropertyValues() from private&lt;br/&gt;
    to package-private in order to allow access to server settings from the&lt;br/&gt;
    MBean impl. without having to use a network connection.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;M      tools/javadoc/publishedapi.ant&lt;/p&gt;

&lt;p&gt;  Adds org.apache.derby.mbeans.drda to the publishedAPI javadocs.&lt;/p&gt;


&lt;p&gt;The patch includes some commented code copied from patch 9 of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1387&quot; title=&quot;Add JMX extensions to Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1387&quot;&gt;&lt;del&gt;DERBY-1387&lt;/del&gt;&lt;/a&gt;,&lt;br/&gt;
as a temporary reminder of the functionality initially proposed as part of&lt;br/&gt;
that Jira issue. This code should eventually be removed and/or replaced by &lt;br/&gt;
real code once the community agrees on and implements a security model for &lt;br/&gt;
Derby&apos;s JMX functionality.&lt;/p&gt;</comment>
                            <comment id="12570736" author="johnemb" created="Wed, 20 Feb 2008 16:23:42 +0000"  >&lt;p&gt;Some suggestions for follow-up work:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add attributes for monitoring:&lt;/li&gt;
	&lt;li&gt;number of active sessions&lt;/li&gt;
	&lt;li&gt;total number of connections since server started (connNum)&lt;/li&gt;
	&lt;li&gt;replication status&lt;/li&gt;
	&lt;li&gt;size of queue of sessions waiting for a free thread (runQueue)&lt;/li&gt;
	&lt;li&gt;number of DRDAConnThreads waiting for something to do (freeThreads)&lt;br/&gt;
     (etc.)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add the rest of the NetworkServerControl functionality as operations and attribute setters (once we have adequate security mechanisms in place)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12570739" author="djd" created="Wed, 20 Feb 2008 16:39:05 +0000"  >&lt;p&gt;I&apos;ll commit the patch in a few minutes with a minor change:&lt;/p&gt;

&lt;p&gt;  changed the implementation of the bean to be package private.&lt;/p&gt;

&lt;p&gt;Minor comments.&lt;/p&gt;

&lt;p&gt;The ping command didn&apos;t work for me, maybe a permission issue.&lt;/p&gt;

&lt;p&gt;I also think the javadoc for the ping operation should clearly indicate it&apos;s a ping from the same machine as the network server.&lt;/p&gt;

&lt;p&gt;Exception handling for ping and the set methods (when added) may need changing. If the exception chain includes a class that is not present on the client. I hit this yesterday with a EmbedSQLException from a test MBean.&lt;/p&gt;</comment>
                            <comment id="12570741" author="djd" created="Wed, 20 Feb 2008 16:44:59 +0000"  >&lt;p&gt;I think the o.a.d.mbeans.drda package should be under java/drda, not java/engine. Any reason it was added to java/engine?&lt;/p&gt;</comment>
                            <comment id="12570747" author="johnemb" created="Wed, 20 Feb 2008 16:56:55 +0000"  >&lt;p&gt;Thanks for looking at the patch!&lt;/p&gt;

&lt;p&gt;Package placement: No reason, I just didn&apos;t think of placing it in java/drda, so feel free to move it.&lt;/p&gt;

&lt;p&gt;The Exception handling issue is known from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1387&quot; title=&quot;Add JMX extensions to Derby&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1387&quot;&gt;&lt;del&gt;DERBY-1387&lt;/del&gt;&lt;/a&gt; - I did not provide a solution as part of this patch.&lt;/p&gt;

&lt;p&gt;Yes, the ping command requires a SocketPermission (as stated above). Even with the permission I&apos;m not sure it will always work, since the NetworkServerControlImpl instance is not designed to ping itself. For example, if &quot;-h 0.0.0.0&quot; is specified, it pings the host 0.0.0.0 instead of localhost (which works, but there may be other values of -h that won&apos;t, I guess).&lt;/p&gt;

&lt;p&gt;I agree with the javadoc suggestion and that the implementation class should be package private.&lt;/p&gt;</comment>
                            <comment id="12570756" author="djd" created="Wed, 20 Feb 2008 17:12:58 +0000"  >&lt;p&gt;Commited slightly modified version of v01 patch with revisions Revision: 629536 &amp;amp; 629537.&lt;br/&gt;
  Make the MBean implemetation package private&lt;br/&gt;
  Put o.a.d.mbeans.drda under java/drda&lt;/p&gt;

&lt;p&gt;Thanks John.&lt;/p&gt;</comment>
                            <comment id="12570765" author="djd" created="Wed, 20 Feb 2008 17:20:16 +0000"  >&lt;p&gt;Some potential javadoc improvements for NetworkServerMBean&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;add a package.html&lt;/li&gt;
	&lt;li&gt;Have the class javadoc define what type and other key properties are used (see the other MBeans)&lt;/li&gt;
	&lt;li&gt;Remove this vacuous sentence:&lt;br/&gt;
       This interface consists of getter and setter methods for attributes that may be read and/or modified, and methods representing operations that can be invoked.&lt;br/&gt;
      (it&apos;s adds no value, it&apos;s the definition of what an MBean is, it&apos;s like adding a comment to other classes &quot;this interface consists of methods that can be called and fields that can be referenced&quot;).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Correct the comment for getDrdaHost related to 0.0.0.0, it indicates it affects which clients can connect, I think it means that the server listens on all network interfaces&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;For each attribute getXXX method add a summary of what the property does, just saying it gets derby.drda.XXX doesn&apos;t really help much.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make the first javadoc sentence of the getXXX methods be the (English) summary of what the attribute represents and not just that it maps to derby.drda.XXX. This means the class summary in javadoc becomes more useful, e.g.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;           Gets the host name for the network server&lt;/p&gt;

&lt;p&gt;       instead of the current&lt;/p&gt;

&lt;p&gt;            Gets the value of the derby.drda.host network server setting.&lt;/p&gt;
</comment>
                            <comment id="12570768" author="djd" created="Wed, 20 Feb 2008 17:23:26 +0000"  >&lt;p&gt;To complete the last thought, I think the javadoc should continue to contain the reference to the derby.drda.XXX setting, just not as the primary sentence.&lt;/p&gt;</comment>
                            <comment id="12570772" author="johnemb" created="Wed, 20 Feb 2008 17:42:43 +0000"  >&lt;p&gt;Thanks for the commit. Seems like you forgot to actually move the MBean interface to java/drda &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; - now I see the org.apache.derby.mbeans.drda package in java/engine as well as in java/drda.&lt;/p&gt;

&lt;p&gt;The suggested javadoc comments seem valid to me.&lt;br/&gt;
The host property is a bit tricky as always (probably because it should be called derby.drda.connectionInterface or some such instead). The suggested &quot;0.0.0.0&quot; description change is fine, although the first sentence of the javadoc should be something like&lt;/p&gt;

&lt;p&gt;         &quot;Gets the name of the network interface on which the network server is listening&quot;&lt;/p&gt;

&lt;p&gt;    instead of &lt;/p&gt;

&lt;p&gt;         &quot;Gets the host name for the network server&quot;&lt;br/&gt;
    &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12570775" author="djd" created="Wed, 20 Feb 2008 17:48:58 +0000"  >&lt;p&gt;Darn, I&apos;ll fix the up location of the mbeans.drda package, I think my ide got confused (or maybe I did).&lt;/p&gt;</comment>
                            <comment id="12571090" author="bernt" created="Thu, 21 Feb 2008 16:10:36 +0000"  >&lt;p&gt;I have started some work to enhance this bean with some dynamic data (like active sessions, waiting sessions, thread pool size etc.). It&apos;s only part time, so I&apos;ll have something ready next week.&lt;/p&gt;</comment>
                            <comment id="12572504" author="johnemb" created="Tue, 26 Feb 2008 14:49:29 +0000"  >&lt;p&gt;Thanks for helping out adding some useful statistics to the MBean, Bernt! Feel free to reassign this issue if you don&apos;t plan on creating a separate one.&lt;/p&gt;

&lt;p&gt;I hope to fix the Javadoc issues (mentioned in previous comments) before the 10.4 release (unless someone else volunteers), but I&apos;ll be on vacation for about one week starting tomorrow, so I won&apos;t be able to do it just yet. I&apos;ll check the status of this issue when I get back.&lt;/p&gt;</comment>
                            <comment id="12572927" author="bernt" created="Wed, 27 Feb 2008 15:12:26 +0000"  >&lt;p&gt;Uploaded a patch that adds some live data to the network server MBean&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Active sessions&lt;/li&gt;
	&lt;li&gt;Waiting sessions&lt;/li&gt;
	&lt;li&gt;No of connection threads&lt;/li&gt;
	&lt;li&gt;No of accepted connections&lt;/li&gt;
	&lt;li&gt;Bytes sent&lt;/li&gt;
	&lt;li&gt;Bytes received&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12573259" author="bernt" created="Thu, 28 Feb 2008 12:55:58 +0000"  >&lt;p&gt;Added bytes sent per second and bytes received per second&lt;/p&gt;</comment>
                            <comment id="12573267" author="thomanie" created="Thu, 28 Feb 2008 13:16:14 +0000"  >&lt;p&gt;v1 generally looks very nice!&lt;/p&gt;

&lt;p&gt;Copule of small nits though:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;whitespace diff in java/drda/org/apache/derby/impl/drda/DDMWriter.java&lt;/li&gt;
	&lt;li&gt;no comments on any methods in java/drda/org/apache/derby/impl/drda/NetworkServerMBeanImpl.java. A &quot;@see &amp;lt;interaceclass#method&amp;gt;&quot; would be nice, although no veto on this.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12573315" author="bernt" created="Thu, 28 Feb 2008 15:18:10 +0000"  >&lt;p&gt;Fixed whitespace issues&lt;/p&gt;</comment>
                            <comment id="12573339" author="knutanders" created="Thu, 28 Feb 2008 16:07:29 +0000"  >&lt;p&gt;Looks good. A couple of small comments:&lt;/p&gt;

&lt;p&gt;I think totalByteCount must be updated in DDMWriter.sendBytes() as well.&lt;/p&gt;

&lt;p&gt;The way getBytesReceivedPerSecond() and getBytesSentPerSecond() calculate the average is very vulnerable to loss of precision. If the time between two calls is 1999 ms, ((now - lastSentTime)/1000)) becomes 1999/1000 = 1. This means the returned value is twice as high as it should be. I think you can preserve maximum precision by rewriting it like this:&lt;/p&gt;

&lt;p&gt;  sentResult = (int) ((count - lastSentBytes) * 1000 / (now - lastSentTime));&lt;/p&gt;</comment>
                            <comment id="12573940" author="djd" created="Fri, 29 Feb 2008 20:36:24 +0000"  >&lt;p&gt;Nice addition Bernt, can I suggest a few attribute name changes:&lt;/p&gt;

&lt;p&gt;ActiveSessions, WaitingSessions and ConnectionTheads all represent counts or number of of items but it&apos;s not clear from their names.&lt;br/&gt;
One might imagine an MBean attribute that did return a information about the set of active sessions which would naturally be called ActiveSessions.&lt;/p&gt;

&lt;p&gt;How about&lt;/p&gt;

&lt;p&gt;ActiveSessionCount&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;NumberOfActiveSessions&lt;/p&gt;

&lt;p&gt;(etc.)&lt;/p&gt;

&lt;p&gt;I prefer the Count at the end, as then it&apos;s quicker when seeing the method name to determine what it is about, rather than having to mentally parse &apos;NumberOf&apos;.&lt;/p&gt;

&lt;p&gt;--------------------------&lt;/p&gt;

&lt;p&gt;NumberOfConnections is as you say the number of accepted connections, but its name does not imply that. When just running the MBean I&apos;d assumed it meant the number of current connections.&lt;/p&gt;

&lt;p&gt;(and of course if the attribute names are change the style should be consistent across the Mbean and all of derby&apos;s MBeans)&lt;/p&gt;</comment>
                            <comment id="12573948" author="djd" created="Fri, 29 Feb 2008 20:45:39 +0000"  >&lt;p&gt;One question though, from a user/management perspective, what&apos;s the difference between a session and a connection?&lt;/p&gt;</comment>
                            <comment id="12575089" author="djd" created="Tue, 4 Mar 2008 18:16:42 +0000"  >&lt;p&gt;I think MBean&apos;s need to be thread safe, each jmx user can call methods on the same instance of the MBean, thus the methods that calculate the rates need to be thread safe, eg. getBytesReceivedPerSecond&lt;/p&gt;</comment>
                            <comment id="12575267" author="bernt" created="Wed, 5 Mar 2008 08:22:44 +0000"  >&lt;p&gt;Dan &amp;amp; Knut: Thanks for the comments. I will fix the precision and threading issue with getBytesRecieved/sentPerSecond.&lt;br/&gt;
I agree that adding &quot;Count&quot; or &quot;NumberOf&quot; to attributes adds to usability. Personally I prefer &quot;NumberOf&quot; since I associate &quot;Count&quot; with an monotonous increasing counter. Furthermore &quot;Session&quot; is an implementation detail and for all purposes it maps to an java.sql.Connection, so I think &quot;Connection&quot; is a better name.&lt;/p&gt;

&lt;p&gt;I suggest the following attributes:&lt;/p&gt;

&lt;p&gt;NumberOfActiveConnections&lt;br/&gt;
NumberOfWaitingConnections&lt;br/&gt;
SizeOfConnectionThreadPool&lt;br/&gt;
ConnectionCounter&lt;/p&gt;</comment>
                            <comment id="12575273" author="thomanie" created="Wed, 5 Mar 2008 09:04:56 +0000"  >&lt;p&gt;Dan has a valid point in trying not to prefixing the names with &quot;NumberOf&quot;.&lt;/p&gt;

&lt;p&gt;Why not simply use:&lt;br/&gt;
ActiveConnections&lt;br/&gt;
WaitingConnections&lt;br/&gt;
ConnectionThreadPoolSize&lt;br/&gt;
ConnectionCounter&lt;/p&gt;

&lt;p&gt;I agree that the last one should be &quot;counter&quot;, as it refers to the accumulated number of connection and not the current number.&lt;/p&gt;</comment>
                            <comment id="12575310" author="bernt" created="Wed, 5 Mar 2008 11:35:17 +0000"  >&lt;p&gt;Fixed precision, threading issue and names. Chose Thomas&apos; propsal for names.&lt;/p&gt;</comment>
                            <comment id="12575374" author="djd" created="Wed, 5 Mar 2008 14:52:13 +0000"  >&lt;p&gt;Thomas&amp;gt; Why not simply use: ActiveConnections &lt;/p&gt;

&lt;p&gt;I initially raised the concern that in the future there might be an attribute that returns actual information about the active sessions, e.g. user name, time connected, last activity etc. It seemed to me that a more natural name for that attribute would be ActiveConnections, and be clearer for the user to have a different attribute ActiveConnectionCount.&lt;/p&gt;

&lt;p&gt;Looking at the naming scheme for the JDK&apos;s MBeans (java.lang.management) it seems that Count at the end of the attribute name is always used to represent an active count or a total count. If required the word Total is used to indicated it&apos;s a &quot;counter&quot; in Bernt&apos;s terms.&lt;/p&gt;

&lt;p&gt;  E.g. ClassLoadingMXBean&lt;br/&gt;
       LoadedClassCount  - current number of loaded classes&lt;br/&gt;
       TotalLoadedClassCount - total number of classes ever loaded&lt;br/&gt;
       UnloadedClassCount -  total number of classes ever unloaded (no need for Total since there is no concept of current number of unloaded classes)&lt;/p&gt;

&lt;p&gt;  ThreadMXBean&lt;br/&gt;
        ThreadCount - current live threads&lt;br/&gt;
        TotalStartedThreadCount - total number of threads started&lt;/p&gt;

&lt;p&gt;I think we should follow established practice.&lt;/p&gt;

&lt;p&gt;For &quot;ActiveConnections/ActiveConnectionCount&quot; what does the Active imply? Is it just the number of current connections, in which case&lt;br/&gt;
the attribute should be &quot;ConnectionCount&quot;, or is it the number of connections that are active in some way. What way though? Have started&lt;br/&gt;
a transaction, executing a statement? If the latter then it would be useful to have a new attribute &quot;ConnectionCount&quot;.&lt;/p&gt;

&lt;p&gt;PS. Bernt - any reason to start attaching small diffs in a zip format, makes it that many more steps to get a quick look at the patch&lt;/p&gt;
</comment>
                            <comment id="12575381" author="bernt" created="Wed, 5 Mar 2008 15:19:03 +0000"  >&lt;p&gt;Ok. So established practice would then be e.g.&lt;/p&gt;

&lt;p&gt;ActiveConnectionCount&lt;br/&gt;
WaitingConnectionCount&lt;br/&gt;
AccumulatedConnectionCount (I felt &quot;total&quot; might be interpreted as active+waiting, so I suggest &quot;accumulated)&lt;/p&gt;

&lt;p&gt;&quot;Active&quot; means that it is not queued/waiting, and all connections will be active when derby.drda.maxThreads==0, if maxThreads&amp;gt;0 connections will be queued if the number of active connections reach this value. As long as derby.drda.timeSlice==0 the getConnection will return when the connection becomes active. If timeSlice &amp;gt; 0 (and the number of actual connections &amp;gt; msxThreads), the connections will alternate &quot;active&quot; and &quot;waiting&quot; according to the (somewhat primitive) timeslicing algortthm in the network server.&lt;/p&gt;

&lt;p&gt;Maybe &lt;br/&gt;
ConnectionCount and&lt;br/&gt;
WaitingConnectionCount?&lt;/p&gt;

&lt;p&gt;PS: Wrt ZIP, sorry about that. I have automated the patch generation in a script to avoid some netbeans quirks. Since it seems to be awkward for others, I&apos;ll stop using the script for small patches.&lt;/p&gt;</comment>
                            <comment id="12575385" author="djd" created="Wed, 5 Mar 2008 15:46:44 +0000"  >&lt;p&gt;If Active has a meaning (which according to the above it does) then it should be part of the name.&lt;br/&gt;
There could be a third attribute ConnectionCount, &amp;amp; I think the relationship would be:&lt;/p&gt;

&lt;p&gt; ConnectionCount = ActiveConnectionCount + WaitingConnectionCount&lt;/p&gt;

&lt;p&gt;Right?&lt;/p&gt;</comment>
                            <comment id="12575386" author="djd" created="Wed, 5 Mar 2008 15:47:24 +0000"  >&lt;p&gt;BTW - Since these attributes are part of the public api it would be good to expand their current javadoc entries with more information such as the explanation for active provided above.&lt;/p&gt;</comment>
                            <comment id="12575644" author="bernt" created="Thu, 6 Mar 2008 10:14:47 +0000"  >&lt;p&gt;Atached patch which fixes the naming of attributes en NetworkServerMBean&lt;/p&gt;</comment>
                            <comment id="12576336" author="johnemb" created="Fri, 7 Mar 2008 19:10:09 +0000"  >&lt;p&gt;Attaching patch d3435_NetworkServerMBeanTest_v01.diff which implements a new test class for the NetworkServerMBean and adds it to the management test suite:&lt;/p&gt;

&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/management/MBeanTest.java&lt;br/&gt;
A      java/testing/org/apache/derbyTesting/functionTests/tests/management/NetworkServerMBeanTest.java&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/tests/management/_Suite.java&lt;/p&gt;

&lt;p&gt;All attributes are tested, although testing of the actual attribute values could be improved (see code comments). Attribute names and return types are always tested.&lt;/p&gt;

&lt;p&gt;I ran into some issues when testing the ping() operation, so I ended up including it as a test case, but the operation will only be invoked when running with classes (not when running with jars). This is due to security manager issues, and is explained in code comments. I hope this can be fixed at some later point in time.&lt;/p&gt;

&lt;p&gt;Please review - it would be great to get this in before a new branch is cut.&lt;/p&gt;</comment>
                            <comment id="12576664" author="djd" created="Sat, 8 Mar 2008 23:56:24 +0000"  >&lt;p&gt;NetworkServerMBean test patch applied: Revision: 635115&lt;/p&gt;</comment>
                            <comment id="12578708" author="johnemb" created="Fri, 14 Mar 2008 12:32:07 +0000"  >&lt;p&gt;Attaching a patch d3435_javadocUpdates.diff improving the Javadoc comments of the NetworkServerMBean, and adds a package overview to the org.apache.derby.mbeans.drda package. &lt;/p&gt;

&lt;p&gt;Details regarding JMX/NetworkServer security (SystemPermissions etc.) should be added to the package description later. Since I was not sure of all the details, I chose to leave it out for now.&lt;/p&gt;

&lt;p&gt;M      java/drda/org/apache/derby/mbeans/drda/NetworkServerMBean.java&lt;br/&gt;
A      java/drda/org/apache/derby/mbeans/drda/package.html&lt;/p&gt;

&lt;p&gt;Please review...&lt;/p&gt;</comment>
                            <comment id="12581812" author="johnemb" created="Tue, 25 Mar 2008 07:43:54 +0000"  >&lt;p&gt;Forgot to set the patch available flag for the patch d3435_javadocUpdates.diff. Patch applies to both trunk and 10.4, so I am hoping for review and (double) commit. The patch addresses previous comments to this issue and touches Javadocs only.&lt;/p&gt;</comment>
                            <comment id="12582580" author="bernt" created="Thu, 27 Mar 2008 10:00:25 +0000"  >&lt;p&gt;Committed revision 641762 on trunk&lt;/p&gt;</comment>
                            <comment id="12582583" author="bernt" created="Thu, 27 Mar 2008 10:08:02 +0000"  >&lt;p&gt;Committed revision 641765 on 10.4 branch&lt;/p&gt;</comment>
                            <comment id="12582707" author="johnemb" created="Thu, 27 Mar 2008 15:57:49 +0000"  >&lt;p&gt;Thanks for committing, Bernt!&lt;br/&gt;
I intend to close this issue within the end of this week unless I hear objections. Additional improvements or fixes should be tracked by new Jira issues.&lt;/p&gt;</comment>
                            <comment id="12583016" author="johnemb" created="Fri, 28 Mar 2008 12:48:40 +0000"  >&lt;p&gt;MBean and tests in place in trunk and 10.4 branch. Closing this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12377381" name="d3435_NetworkServerMBeanTest_v01.diff" size="16024" author="johnemb" created="Fri, 7 Mar 2008 19:10:09 +0000"/>
                            <attachment id="12377893" name="d3435_javadocUpdates.diff" size="30020" author="johnemb" created="Fri, 14 Mar 2008 12:32:07 +0000"/>
                            <attachment id="12376034" name="d3435_v01.diff" size="19661" author="johnemb" created="Wed, 20 Feb 2008 16:09:47 +0000"/>
                            <attachment id="12376035" name="d3435_v01.stat" size="304" author="johnemb" created="Wed, 20 Feb 2008 16:09:47 +0000"/>
                            <attachment id="12377159" name="derby-3435-live-data-fix-v0.zip" size="1342" author="bernt" created="Wed, 5 Mar 2008 11:35:17 +0000"/>
                            <attachment id="12377240" name="derby-3435-live-data-fix2-v0.diff" size="3157" author="bernt" created="Thu, 6 Mar 2008 10:14:47 +0000"/>
                            <attachment id="12376626" name="derby-3435-live-data-v0.diff" size="6470" author="bernt" created="Wed, 27 Feb 2008 15:12:26 +0000"/>
                            <attachment id="12376627" name="derby-3435-live-data-v0.stat" size="398" author="bernt" created="Wed, 27 Feb 2008 15:12:26 +0000"/>
                            <attachment id="12376716" name="derby-3435-live-data-v1.zip" size="2382" author="bernt" created="Thu, 28 Feb 2008 12:55:58 +0000"/>
                            <attachment id="12376732" name="derby-3435-live-data-v2.zip" size="2318" author="bernt" created="Thu, 28 Feb 2008 15:18:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Feb 2008 16:39:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0z1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>