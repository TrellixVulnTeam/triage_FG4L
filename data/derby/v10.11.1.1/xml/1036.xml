<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:25:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1036/DERBY-1036.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1036] Embedded and client differ with regard to Statement.setCursor Name. client will disallow duplicate cursor names.  Embedded will allow it.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1036</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;In looking at the checkDataSource test for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-435&quot; title=&quot;jdbcapi/checkDataSource.java and  jdbapi/checkDataSource30.java to tests should be changed or extended to test client DataSources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-435&quot;&gt;&lt;del&gt;DERBY-435&lt;/del&gt;&lt;/a&gt;, I hit an issue that the test fails with an exception  for duplicate cursor name because it sets the cursor name for  two statements to the same thing.&lt;/p&gt;

&lt;p&gt;Embedded seems to allow this, but it seems to me that client might be right here.  How could embedded differentiate the two for positioned updates?    There is risk to existing applications if  embedded is changed to throw the error that should be considered if we decide we need to change the embedded behaviour.&lt;/p&gt;

&lt;p&gt;Below are some details from checkDataSource where I hit this. I will change the  names for now as it does not seem relevant to what is being tested.&lt;/p&gt;

&lt;p&gt;PreparedStatement psruState = createFloatStatementForStateChecking(cs1, &quot;select i from ru where i = ?&quot;);&lt;br/&gt;
        CallableStatement csruState = createFloatCallForStateChecking(cs1, &quot;CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY(?,?)&quot;);&lt;/p&gt;

&lt;p&gt;Both of these methods set the cursor name to the same thing:&lt;br/&gt;
s.setCursorName(&quot;StokeNewington&quot;);&lt;/p&gt;

&lt;p&gt;For embedded it succeeds for client it throws the exception.&lt;br/&gt;
java.sql.SQLException: Duplicate cursor names are not allowed.&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.setCursorName(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.checkDataSource.createFloatStatementForStateChecking(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.checkDataSource.runTest(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.jdbcapi.checkDataSource.main(Unknown Source)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12329368">DERBY-1036</key>
            <summary>Embedded and client differ with regard to Statement.setCursor Name. client will disallow duplicate cursor names.  Embedded will allow it.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="32841">DERBY-310</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Feb 2006 11:38:37 +0000</created>
                <updated>Sat, 1 Jul 2006 08:38:44 +0100</updated>
                            <resolved>Fri, 23 Jun 2006 19:24:38 +0100</resolved>
                                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>JDBC</component>
                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12367459" author="djd" created="Thu, 23 Feb 2006 12:57:31 +0000"  >&lt;p&gt;I think embedded will disallow duplicate cursor names at execution time.&lt;br/&gt;
This is because there is not a cursor until a ResultSet is created, thus it&apos;s&lt;br/&gt;
technically fine to have two Statement objects with the same cursor name&lt;br/&gt;
because it does not mean there are two active cursors.&lt;/p&gt;</comment>
                            <comment id="12367474" author="kmarsden" created="Thu, 23 Feb 2006 14:57:09 +0000"  >&lt;p&gt;Sounds like it would be fine then to change client to match embedded and move the check to execution time.&lt;/p&gt;

</comment>
                            <comment id="12367541" author="dagw" created="Fri, 24 Feb 2006 02:18:09 +0000"  >&lt;p&gt;Cf  &lt;a href=&quot;http://issues.apache.org/jira/browse/DERBY-787&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/DERBY-787&lt;/a&gt;; in that case the duplicates are in different transactions, though.&lt;/p&gt;</comment>
                            <comment id="12415928" author="dagw" created="Tue, 13 Jun 2006 06:25:48 +0100"  >&lt;p&gt;The patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1183&quot; title=&quot;Client java.sql.ResultSet.getCursorName() does not return the correct cursor name for Statements after the first execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1183&quot;&gt;&lt;del&gt;DERBY-1183&lt;/del&gt;&lt;/a&gt; may solve this issue.&lt;/p&gt;</comment>
                            <comment id="12417461" author="knutanders" created="Fri, 23 Jun 2006 19:24:38 +0100"  >&lt;p&gt;Dag&apos;s patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1183&quot; title=&quot;Client java.sql.ResultSet.getCursorName() does not return the correct cursor name for Statements after the first execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1183&quot;&gt;&lt;del&gt;DERBY-1183&lt;/del&gt;&lt;/a&gt; and this issue committed into trunk with revision 416661.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Feb 2006 12:57:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy161r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>