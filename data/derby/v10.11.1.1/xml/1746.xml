<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:54:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1746/DERBY-1746.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1746] upgrade tests should start using 10.1.3 released builds</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1746</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The upgrade test&apos; master is based on the 10.1 jars checked in to svn -  10.1.1.0 - (208786). &lt;br/&gt;
However, we now have a newer released version of 10.1 - 10.1.3.  This would be the obvious choice for someone running tests testing the beta jars.&lt;/p&gt;

&lt;p&gt;If the jars are 10.1.3 then a diff will occur because of the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-655&quot; title=&quot;getImportedKeys returns duplicate rows in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-655&quot;&gt;&lt;del&gt;DERBY-655&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
703d702&lt;br/&gt;
&amp;lt; ,APP,DERBY655T2,C21_ID,,APP,DERBY655T1,C11_ID,1,3,0,F_12,xxxxGENERATED-IDxxxx, 7&lt;br/&gt;
2168d2166&lt;br/&gt;
&amp;lt; ,APP,DERBY655T2,C21_ID,,APP,DERBY655T1,C11_ID,1,3,0,F_12,xxxxGENERATED-IDxxxx, 7&lt;/p&gt;

&lt;p&gt;It would be nice if the final build for 10.2 would include an updgrade test master created using 10.1.3, And same is true for the trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12348420">DERBY-1746</key>
            <summary>upgrade tests should start using 10.1.3 released builds</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myrna">Myrna van Lunteren</assignee>
                                    <reporter username="myrna">Myrna van Lunteren</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2006 19:06:11 +0100</created>
                <updated>Wed, 1 Jul 2009 00:45:32 +0100</updated>
                            <resolved>Wed, 16 May 2007 21:52:54 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.3.1.4</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12430184" author="myrna" created="Thu, 24 Aug 2006 08:15:33 +0100"  >&lt;p&gt;Attaching patches for this - &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1746&quot; title=&quot;upgrade tests should start using 10.1.3 released builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1746&quot;&gt;&lt;del&gt;DERBY-1746&lt;/del&gt;&lt;/a&gt;_102_20060823.diff modifies the master &amp;amp; updates the snv:externals property for the directory &amp;lt;10.2&amp;gt;/tools/testing/derby, and DERBy-1746_trunk_20060823.diff does the same for the trunk.&lt;/p&gt;

&lt;p&gt;The trunk patch is a bit odd because I made a manual change - when I run the test right now it fails because of failing version compare tests. I think these diffs are to be expected currently, but I did not want to check that in as a master, I think that needs to be looked at separately...It seems as the trunk is no longer 10.2 this test needs to get changed/renamed, and I didn&apos;t want to address that here.&lt;/p&gt;

&lt;p&gt;I assume patch or eclipse-apply-patch won&apos;t deal with the changing of properties, so here is the svn command:&lt;br/&gt;
(when cd-ed to the top of the branch)&lt;br/&gt;
cd tools/testing&lt;br/&gt;
svn propedit svn:externals derby&lt;br/&gt;
&amp;amp; change to:&lt;br/&gt;
derby/10.1 &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/jars/10.1.3.1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/jars/10.1.3.1&lt;/a&gt;&lt;br/&gt;
(note: svn update required after to see the files changed)&lt;/p&gt;

&lt;p&gt;Thx to andrew for adding the 10.1.3.1 jars already.&lt;/p&gt;

</comment>
                            <comment id="12430195" author="mamtas" created="Thu, 24 Aug 2006 09:29:42 +0100"  >&lt;p&gt;The patch &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1746&quot; title=&quot;upgrade tests should start using 10.1.3 released builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1746&quot;&gt;&lt;del&gt;DERBY-1746&lt;/del&gt;&lt;/a&gt;_trunk_20060824.diff  looks good to me for commit.&lt;/p&gt;</comment>
                            <comment id="12430281" author="rhillegas" created="Thu, 24 Aug 2006 17:37:24 +0100"  >&lt;p&gt;I&apos;m afraid I&apos;m a bit confused about what to do with these patches:&lt;/p&gt;

&lt;p&gt;---------------- Trunk Patch -----------------------------&lt;/p&gt;

&lt;p&gt;After I apply this patch to the trunk, I see the following diffs in the 10_1_10_2 test:&lt;/p&gt;

&lt;p&gt;702a703&lt;br/&gt;
&amp;gt; ,APP,DERBY655T2,C21_ID,,APP,DERBY655T1,C11_ID,1,3,0,F_12,xxxxGENERATED-IDxxxx,7&lt;br/&gt;
707 del&lt;br/&gt;
&amp;lt; complete caseVersionCheck - passed true&lt;br/&gt;
707a708&lt;br/&gt;
&amp;gt; complete caseVersionCheck - passed false&lt;br/&gt;
1462 del&lt;br/&gt;
&amp;lt; END - PASS - phase SOFT UPGRADE&lt;br/&gt;
1462a1463&lt;br/&gt;
&amp;gt; END - FAIL - phase SOFT UPGRADE&lt;br/&gt;
2166a2168&lt;br/&gt;
&amp;gt; ,APP,DERBY655T2,C21_ID,,APP,DERBY655T1,C11_ID,1,3,0,F_12,xxxxGENERATED-IDxxxx,7&lt;br/&gt;
2171 del&lt;br/&gt;
&amp;lt; complete caseVersionCheck - passed true&lt;br/&gt;
2171a2173&lt;br/&gt;
&amp;gt; complete caseVersionCheck - passed false&lt;br/&gt;
2953 del&lt;br/&gt;
&amp;lt; END - PASS - phase UPGRADE&lt;br/&gt;
2953a2955&lt;br/&gt;
&amp;gt; END - FAIL - phase UPGRADE&lt;br/&gt;
Test Failed.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;End:   Upgrade_10_1_10_2 jdk1.4.2_08 2006-08-24 09:12:23 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think that the lines beginning with &quot;,APP,DERBY655T2,&quot; are new diffs added by this patch. It seems that this patch is making the results dirtier rather than cleaner.&lt;/p&gt;

&lt;p&gt;In addition, I don&apos;t think we should be running a test called 10_1_10_2 in the trunk. We should be running some other tests, perhaps 10_1_to_Current and 10_2_to_Current in the trunk. Perhaps 10_1_10_2 becomes the basis for 10_1_to_Current.&lt;/p&gt;

&lt;p&gt;--------------- 10.2 Patch --------------------------&lt;/p&gt;

&lt;p&gt;Right now 10_1_10_2 runs cleanly in the 10.2 branch. After I apply this patch, I see the following diffs in the 10.2 branch:&lt;/p&gt;

&lt;p&gt;702a703&lt;br/&gt;
&amp;gt; ,APP,DERBY655T2,C21_ID,,APP,DERBY655T1,C11_ID,1,3,0,F_12,xxxxGENERATED-IDxxxx,7&lt;br/&gt;
2166a2168&lt;br/&gt;
&amp;gt; ,APP,DERBY655T2,C21_ID,,APP,DERBY655T1,C11_ID,1,3,0,F_12,xxxxGENERATED-IDxxxx,7&lt;br/&gt;
Test Failed.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;End:   Upgrade_10_1_10_2 jdk1.4.2_08 2006-08-24 09:22:45 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It seems that some additional steps need to be taken before this patch can be applied to the 10.2 branch. Do we know what those are?&lt;/p&gt;</comment>
                            <comment id="12430342" author="djd" created="Thu, 24 Aug 2006 22:41:06 +0100"  >&lt;p&gt;I would actually say that we should test in the upgrade suite upgrading from &lt;b&gt;all&lt;/b&gt; released versions of 10.1, not just the latest.&lt;br/&gt;
Maybe the setup is not ready for that, but it should be a goal of the 10.3 upgrade code. The scripts I originally wrote were designed to be flexible about the old and the new versions, thus one could test upgrading from:&lt;/p&gt;

&lt;p&gt;      10.1.2.x to 10.1.3.x &lt;br/&gt;
or&lt;br/&gt;
     10.0.x.x to 10.1.3.x&lt;br/&gt;
or&lt;br/&gt;
      10.1.3.x to 10.2.x.y&lt;/p&gt;

&lt;p&gt;and the test would just check the right stuff.&lt;/p&gt;

</comment>
                            <comment id="12430508" author="rhillegas" created="Fri, 25 Aug 2006 14:59:10 +0100"  >&lt;p&gt;I have now tried to apply this patch as follows:&lt;/p&gt;

&lt;p&gt;cd tools/testing&lt;br/&gt;
svn propedit svn:externals . (editting the 10.1 version to be 10.1.3.1)&lt;br/&gt;
cd ../..&lt;br/&gt;
svn update&lt;br/&gt;
ant clobber&lt;br/&gt;
ant all&lt;/p&gt;

&lt;p&gt;When I run the Upgrade_10_1_10_2 test I get pages of diffs and the following exception:&lt;/p&gt;

&lt;p&gt;2956 add&lt;br/&gt;
&amp;gt; java.lang.ExceptionInInitializerError&lt;br/&gt;
&amp;gt; Caused by: java.lang.SecurityException: sealing violation: can&apos;t seal package org.apache.derby.iapi.services.crypto: a&lt;br/&gt;
lready loaded&lt;/p&gt;

&lt;p&gt;Would appreciate advice on what I am doing wrong.&lt;/p&gt;</comment>
                            <comment id="12430753" author="myrna" created="Sat, 26 Aug 2006 17:05:20 +0100"  >&lt;p&gt;I was under the impression the upgrade test would only work with jars, and when one builds jars &amp;amp; runs with those after changing the externals that sealing violation error does not occur.&lt;br/&gt;
Further research is needed; patch was not ready for commit.&lt;/p&gt;</comment>
                            <comment id="12431034" author="myrna" created="Mon, 28 Aug 2006 20:06:18 +0100"  >&lt;p&gt;I experimented and found the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the problem appears to be with 10.1.3.1 derby.jar. Using the other 10.1.3.1 jars don&apos;t cause the same trouble.&lt;/li&gt;
	&lt;li&gt;comparing the 10.1.1.0 derby.jar and 10.1.3.1 derby.jar it seemed the main difference was that the 10.1.3.1. does not have the directories in the jar.&lt;/li&gt;
	&lt;li&gt;When I unjarred 10.1.3.1 derby.jar with jar -tvf, and then jar-ed back up using jar -xvf *, the resulting derby.jar could be used &amp;amp; the test did not give the sealing error.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is very strange, does this mean the 10.1.3.1 jars are bad? &lt;br/&gt;
 I welcome any suggestions on how to proceed.&lt;/p&gt;</comment>
                            <comment id="12431037" author="myrna" created="Mon, 28 Aug 2006 20:20:59 +0100"  >&lt;p&gt;For the record, this is the &apos;full&apos; stack trace from the .tmp file (no derby.log appears to get created)&lt;br/&gt;
START - phase CREATE&lt;br/&gt;
java.lang.ExceptionInInitializerError&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDataSource.findDriver(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTester.getConnectionUsingDataSource(UpgradeTester.java:461)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTester.getConnection(UpgradeTester.java:418)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTester.runPhase(UpgradeTester.java:357)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.UpgradeTester.runUpgradeTests(UpgradeTester.java:317)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.upgradeTests.Upgrade_10_1_10_2.main(Upgrade_10_1_10_2.java:44)&lt;br/&gt;
Caused by: java.lang.SecurityException: sealing violation: can&apos;t seal package org.apache.derby.iapi.services.crypto: already loaded&lt;br/&gt;
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:234)&lt;br/&gt;
	at java.net.URLClassLoader.access$100(URLClassLoader.java:55)&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:194)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:187)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:289)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:235)&lt;br/&gt;
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)&lt;br/&gt;
	at java.lang.Class.forName0(Native Method)&lt;br/&gt;
	at java.lang.Class.forName(Class.java:141)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.getImplementations(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.getDefaultImplementations(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(Unknown Source)&lt;br/&gt;
	at org.apache.derby.impl.services.monitor.FileMonitor.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Unknown Source)&lt;br/&gt;
	at org.apache.derby.iapi.jdbc.JDBCBoot.boot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDriver.boot(Unknown Source)&lt;br/&gt;
	at org.apache.derby.jdbc.EmbeddedDriver.&amp;lt;clinit&amp;gt;(Unknown Source)&lt;br/&gt;
	... 8 more&lt;br/&gt;
Exception in thread &quot;main&quot; &lt;/p&gt;</comment>
                            <comment id="12433241" author="rhillegas" created="Thu, 7 Sep 2006 22:27:16 +0100"  >&lt;p&gt;Degrading the urgency of this bug. Both 10.1 versions are reasonable starting points for upgrade and I would not let this issue block the release.&lt;/p&gt;</comment>
                            <comment id="12435860" author="rhillegas" created="Tue, 19 Sep 2006 16:14:32 +0100"  >&lt;p&gt;Moving to 10.2.2.0.&lt;/p&gt;</comment>
                            <comment id="12456235" author="myrna" created="Wed, 6 Dec 2006 22:06:08 +0000"  >&lt;p&gt;I&apos;ve not had any ideas to fix the problem with the 10.1.3. jars.&lt;/p&gt;</comment>
                            <comment id="12462269" author="myrna" created="Thu, 4 Jan 2007 18:11:27 +0000"  >&lt;p&gt;I&apos;m unassigning myself. As far as I can tell, the steps I made in my patch were the right thing to do. I haven&apos;t had a chance to look at this more.&lt;/p&gt;</comment>
                            <comment id="12462385" author="fuzzylogic" created="Fri, 5 Jan 2007 02:34:49 +0000"  >&lt;p&gt;I took a look at this issue and I&apos;ve come to an impasse. The sealing problem that Myrna encountered is due to the fact that the 10.1.3.1 jars, unlike the 10.1.1.0 jars, are sealed. When running from the classes directory, UpgradeTester puts the entire classes directory into the ClassLoader because it needs some of the testing classes from the newer version. Unfortunately, this also puts all of the newer Derby classes into the classloader&apos;s classpath along with the sealed Derby jars. When the engine is booted, attempting to boot the services causes the sealing exception to be thrown. This is not a problem when running the test from jars because only derbyTesting.jar is made available to the old classloader, so there is not a sealing exception. &lt;/p&gt;

&lt;p&gt;I think the thing to do is to create a custom ClassLoader that will only load classes from org.apache.derbyTesting, and then make this the parent of oldClassLoader, so that classes from org.apache.derbyTesting are loaded from the classes directory, and all other classes are loaded from the old jars when running the phases of the test with oldClassLoader. Despite my best efforts to subclass URLClassLoader to do this, I could not get it to cooperate. I&apos;ll come back to this at a later date, but am not planning on investigating it further at this time.&lt;/p&gt;</comment>
                            <comment id="12462416" author="djd" created="Fri, 5 Jan 2007 06:22:30 +0000"  >&lt;p&gt;I&apos;m working on an approach for this where the testing classes are always loaded from the &quot;new&quot; class loader and only the database code is loaded from the old loader. However it&apos;s much cleaner to do this in the pure junit world so I&apos;m also experimenting with converting the upgrade tests to Junit.&lt;/p&gt;

&lt;p&gt;The change involves making the code that loads the data source use the thread context loader instead of just Class.forName.&lt;/p&gt;</comment>
                            <comment id="12467544" author="fuzzylogic" created="Thu, 25 Jan 2007 20:36:39 +0000"  >&lt;p&gt;Unsetting Fix Version for unassigned issues.&lt;/p&gt;</comment>
                            <comment id="12495809" author="myrna" created="Tue, 15 May 2007 00:12:56 +0100"  >&lt;p&gt;I think, this is now a mute point - or it&apos;s fixed by Dan (by converting the test).&lt;/p&gt;

&lt;p&gt;However, we should now to remove the svn:externals dependency on the for 10.1, or, better still, to automatically add an svn;externals into our trunk for 10.3.1.0 ... etc...&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12495810" author="kmarsden" created="Tue, 15 May 2007 00:21:31 +0100"  >&lt;p&gt;Andrew and I had a chat on IRC about this.  I was going to make the changes discussed but it looked like both Sun and IBM nightlies started using the existing format, so I dropped it.&lt;/p&gt;</comment>
                            <comment id="12495813" author="myrna" created="Tue, 15 May 2007 00:41:31 +0100"  >&lt;p&gt;I&apos;m confused. What is &apos;the existing format&apos; and which are the &apos;changes discussed&apos; ?&lt;/p&gt;

&lt;p&gt;I think it would be no great hardship to change scripts for running nightly tests, but I&apos;m missing some info in this bug...Should I be looking at another bu that has the info you mention? Or is there a log of the IRC chat?&lt;/p&gt;</comment>
                            <comment id="12495814" author="myrna" created="Tue, 15 May 2007 00:46:35 +0100"  >&lt;p&gt;Also, I&apos;ve done some experimenting, but the converted junit tests only need derby.jar of the old releases, but I can&apos;t get svn:externals give me just one file - it seems to want an entire directory.&lt;br/&gt;
when I tried to have it point to just  derby.jar  it gave me an error like so:&lt;/p&gt;

&lt;p&gt;Fetching external item into &apos;tools\testing\derby\10.1.1.0\derby.jar&apos;&lt;br/&gt;
svn: REPORT request failed on &apos;/repos/asf/!svn/vcc/default&apos;&lt;br/&gt;
svn:&lt;br/&gt;
Cannot replace a directory from within&lt;/p&gt;

&lt;p&gt;Suggestions?&lt;/p&gt;</comment>
                            <comment id="12496052" author="fuzzylogic" created="Tue, 15 May 2007 18:15:36 +0100"  >&lt;p&gt;Myrna,&lt;/p&gt;

&lt;p&gt;svn:externals expects only directories to be mapped. The jars in the jars repository aren&apos;t being used for anything else, and they were put there to facilitate upgrade testing in the first place. If it makes more sense to only have the derby.jars there, perhaps we should just remove everything but the derby.jars.&lt;/p&gt;

&lt;p&gt;If it  turns out that somebody is using the jars in the jars tree for some other purpose, or the community feels it makes sense to keep the full set of release jars in the repository for some other reason, than maybe it makes more sense to just check the derby jars for upgrade testing directly into the trunk and not use svn:externals. Then new releases can continue to be checked into the trunk, and branches will always be created with the appropriate set of upgrade jars for testing.&lt;/p&gt;</comment>
                            <comment id="12496403" author="myrna" created="Wed, 16 May 2007 21:52:54 +0100"  >&lt;p&gt;In a discussion on the list, Dan suggested the test could automatically access the old version&apos;s jars from  &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/jars&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/jars&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Implemented this - and committed with revision 538724.&lt;/p&gt;

&lt;p&gt;To repeat what I said on the list I&apos;d do:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I left the checked in derby*.jar files in &lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/jars&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/jars&lt;/a&gt; as is.&lt;/li&gt;
	&lt;li&gt;I removed the &apos;lib&apos; subdirectory from the upgrade tests&apos; needs.&lt;/li&gt;
	&lt;li&gt;I removed the svn:externals property from java/tools/testing.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The way it will work now, is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if the derbyTesting.oldReleasePath property is not set, the test&lt;br/&gt;
will attempt to access the jars from&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/db/derby/jars&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/db/derby/jars&lt;/a&gt;. If svn.apache.org is&lt;br/&gt;
not accessible (either because there is no network, or there is some&lt;br/&gt;
other problem with connecting to svn.apache.org), the tests will run&lt;br/&gt;
but fail.&lt;/li&gt;
	&lt;li&gt;if the property is set, the test will attempt to access the jars&lt;br/&gt;
directly underneath&lt;br/&gt;
subdirectories with the version strings. If the jars are not found,&lt;br/&gt;
the tests will get skipped.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, after my change the following command:&lt;br/&gt;
 &amp;gt; java -DderbyTesting.oldReleasePath=/home/myrna/oldderbyreleases&lt;br/&gt;
junit.textui.TestRunner&lt;br/&gt;
org.apache.derbyTesting.functionTests.tests.upgradeTests._Suite&lt;br/&gt;
will look for the following files:&lt;br/&gt;
 /home/myrna/oldderbyreleases/10.0.2.1/derby.jar&lt;br/&gt;
 /home/myrna/oldderbyreleases/10.1.1.0/derby.jar&lt;br/&gt;
 /home/myrna/oldderbyreleases/10.1.2.1/derby.jar&lt;br/&gt;
 /home/myrna/oldderbyreleases/10.1.3.1/derby.jar&lt;br/&gt;
 /home/myrna/oldderbyreleases/10.2.1.6/derby.jar&lt;br/&gt;
 /home/myrna/oldderbyreleases/10.2.2.0/derby.jar&lt;/p&gt;

&lt;p&gt;This also means, that if you have been running with the property set&lt;br/&gt;
and dirs with the &apos;lib&apos; in the path (for example:&lt;br/&gt;
/home/myrna/oldderbyreleases/10.0.2.1/lib/derby.jar) you will now not&lt;br/&gt;
get any tests run for that old release.&lt;/p&gt;

&lt;p&gt;The only way upgrade tests will not run with suites.All is if the&lt;br/&gt;
property has been set to an incorrect/non-existing directory.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12359906">DERBY-2217</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12339468" name="DERBY-1746_102_20060823.diff" size="1957" author="myrna" created="Thu, 24 Aug 2006 08:15:33 +0100"/>
                            <attachment id="12339467" name="DERBY-1746_102_20060823.stat" size="178" author="myrna" created="Thu, 24 Aug 2006 08:15:33 +0100"/>
                            <attachment id="12339469" name="DERBY-1746_trunk_20060824.diff" size="1957" author="myrna" created="Thu, 24 Aug 2006 08:15:33 +0100"/>
                            <attachment id="12357328" name="svn_external" size="2557" author="kmarsden" created="Tue, 15 May 2007 00:21:31 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Aug 2006 08:29:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>