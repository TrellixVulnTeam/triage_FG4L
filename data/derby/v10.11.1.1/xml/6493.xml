<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:27:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-6493/DERBY-6493.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-6493] Improve reporting of exceptions wrapped in InvocationTargetException</title>
                <link>https://issues.apache.org/jira/browse/DERBY-6493</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When Derby encounters an exception in a method that&apos;s called via reflection, the actual problem may be well hidden at the end of a long exception chain. For example:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t(x int);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; call syscs_util.syscs_import_table(null, &apos;T&apos;, null, null, null, null, 0);&lt;br/&gt;
ERROR 38000: The exception &apos;java.sql.SQLException: The exception &apos;java.lang.reflect.InvocationTargetException&apos; was thrown while evaluating an expression.&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR 38000: The exception &apos;java.lang.reflect.InvocationTargetException&apos; was thrown while evaluating an expression.&lt;br/&gt;
ERROR XJ001: Java exception: &apos;: java.lang.reflect.InvocationTargetException&apos;.&lt;br/&gt;
ERROR XIE05: Data file cannot be null. &lt;/p&gt;

&lt;p&gt;Only the last exception provides any useful information to the user in this case. I think it would be good to remove the InvocationTargetException from the chain so that it&apos;s easier to spot the actual problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12698592">DERBY-6493</key>
            <summary>Improve reporting of exceptions wrapped in InvocationTargetException</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                            <label>derby_backport_reject_10_10</label>
                    </labels>
                <created>Tue, 4 Mar 2014 09:07:43 +0000</created>
                <updated>Thu, 25 Sep 2014 21:56:26 +0100</updated>
                            <resolved>Wed, 5 Mar 2014 11:07:52 +0000</resolved>
                                    <version>10.11.1.1</version>
                                    <fixVersion>10.11.1.1</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13919385" author="knutanders" created="Tue, 4 Mar 2014 13:29:20 +0000"  >&lt;p&gt;Attached is a patch (d6493-1a.diff) that makes StandardException.unexpectedUserException() and StandardException.plainWrapException() unwrap InvocationTargetExceptions and PrivilegedActionExceptions before reporting them. This change simplified the exception chain in the example above to:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ij&amp;gt; call syscs_util.syscs_import_table(null, &apos;T&apos;, null, null, null, null, 0);
ERROR XIE05: Data file cannot be null. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Other changes in the patch:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove unneeded unwrapping of InvocationTargetException in ReflectMethod and FromVTI since that&apos;s now handled centrally in StandardException.&lt;/li&gt;
	&lt;li&gt;Fix a test case in ImportExportProcedureTest where it was checked for the SQLState of the InvocationTargetException (38000) instead of the error code for the underlying exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All the regression tests passed.&lt;/p&gt;</comment>
                            <comment id="13920024" author="dagw" created="Tue, 4 Mar 2014 21:08:25 +0000"  >&lt;p&gt;Looks like a good simplification. +1&lt;br/&gt;
I guess it should not be back-ported since the top SQL state changes.&lt;/p&gt;</comment>
                            <comment id="13920738" author="knutanders" created="Wed, 5 Mar 2014 11:04:02 +0000"  >&lt;p&gt;Thanks, Dag. I agree that it shouldn&apos;t be backported. I don&apos;t anticipate any problems, but I don&apos;t think it&apos;s worth the risk or the extra work, given that the fix is mainly cosmetic.&lt;/p&gt;</comment>
                            <comment id="13920739" author="jira-bot" created="Wed, 5 Mar 2014 11:06:12 +0000"  >&lt;p&gt;Commit 1574425 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knutanders&quot; class=&quot;user-hover&quot; rel=&quot;knutanders&quot;&gt;Knut Anders Hatlen&lt;/a&gt; in branch &apos;code/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1574425&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/r1574425&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-6493&quot; title=&quot;Improve reporting of exceptions wrapped in InvocationTargetException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-6493&quot;&gt;&lt;del&gt;DERBY-6493&lt;/del&gt;&lt;/a&gt;: Improve reporting of exceptions wrapped in InvocationTargetException&lt;/p&gt;

&lt;p&gt;Unwrap InvocationTargetException and PrivilegedActionException before&lt;br/&gt;
reporting them so that it is easier to see what the real error is.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12632501" name="d6493-1a.diff" size="6668" author="knutanders" created="Tue, 4 Mar 2014 13:29:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Mar 2014 21:08:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376950</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzmt3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>