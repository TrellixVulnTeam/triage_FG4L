<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:33:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5305/DERBY-5305.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5305] Convert store/updatelocks.sql to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5305</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12512171">DERBY-5305</key>
            <summary>Convert store/updatelocks.sql to JUnit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2011 07:03:56 +0100</created>
                <updated>Mon, 6 Oct 2014 20:58:56 +0100</updated>
                            <resolved>Fri, 10 Feb 2012 20:00:48 +0000</resolved>
                                                    <fixVersion>10.8.3.0</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13057143" author="dagw" created="Wed, 29 Jun 2011 11:36:29 +0100"  >&lt;p&gt;Uploading a patch which converts updatelocks.sql into JUnit: UpdateLocksTest. &lt;/p&gt;

&lt;p&gt;It also contains a fix to JDBC.assertUnorderedResultSet for a bug when trimming is not used.&lt;/p&gt;

&lt;p&gt;Running regressions.&lt;/p&gt;</comment>
                            <comment id="13057145" author="dagw" created="Wed, 29 Jun 2011 11:47:09 +0100"  >&lt;p&gt;A comment on my approach to the conversion: I used the existing canons and converted them semi-automatically into corresponding Java result set tuples for the assertions, to ensure the test semantics are retained.&lt;/p&gt;</comment>
                            <comment id="13057229" author="knutanders" created="Wed, 29 Jun 2011 14:42:13 +0100"  >&lt;p&gt;Whoa! A 2.68 MB patch! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The new test looks clean and systematic, so I&apos;d say commit it. I must admit I haven&apos;t read every single line of the patch, but just to prove that I have looked at it, here are my nit-picks:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In decorateSQL(), auto-commit is turned off and commit() is called explicitly at the end of the method. This is not necessary, since CleanDatabaseTestSetup already turns off auto-commit before calling decorateSQL() and commits immediately afterwards.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Most of the code in decorateSQL() is commented out. Could it be removed?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;One of the added lines in JDBC.java has trailing blanks.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In tearDown(), I&apos;d suggest using the helper method BaseJDBCTestCase.dropTable().&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Closing getLocksQuery in tearDown() shouldn&apos;t be necessary since it was created with BaseJDBCTestCase.prepareStatement() and will be closed in super.tearDown(). Setting the reference to null would be good, though, so that the statement and the connection can be garbage collected after the test case has completed.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13057763" author="dagw" created="Thu, 30 Jun 2011 12:33:10 +0100"  >&lt;p&gt;Thanks for the comments, Knut. As for the commented out decorateSQL code, I was torn on whether to remove it or retain it since it was part of the original test (although unused), but kept it till review time so someone else could chime in on it... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Now that you spotted it, I&apos;m +1 to removing it unless someone closer to the original authorship of this test feels it should stay.&lt;/p&gt;</comment>
                            <comment id="13058511" author="dagw" created="Fri, 1 Jul 2011 13:04:22 +0100"  >&lt;p&gt;Uploading version &quot;b&quot; incorporating Knut&apos;s suggestions including removing the cruft. I also got rid of some too long lines. Re-running regressions. This time I upload a gzipped version of the patch (&quot;b&quot;) and I will also remove the first  2.5Mb version (&quot;a&quot;) to save some space. If somebody want to see the first version, I will retain it for some time.&lt;/p&gt;</comment>
                            <comment id="13059393" author="dagw" created="Mon, 4 Jul 2011 12:16:28 +0100"  >&lt;p&gt;Regressions ran OK, committed as svn 1142626.&lt;/p&gt;</comment>
                            <comment id="13061220" author="kristwaa" created="Thu, 7 Jul 2011 12:37:41 +0100"  >&lt;p&gt;Committed a trivial cleanup as revision 1143768: removed two unused imports and removed an unused variable.&lt;br/&gt;
The method &apos;show&apos; is currently unused. Is this something that is useful for debugging, or can it be removed? If the former, maybe a comment saying so would be useful?&lt;/p&gt;</comment>
                            <comment id="13061422" author="dagw" created="Thu, 7 Jul 2011 17:35:34 +0100"  >&lt;p&gt;Yes, the show method was useful when making the test and I see it being potentially useful when debugging the test if it ever starts to fail. I&apos;ll add a Javadoc comment and comment out the whole for now for good measure.&lt;/p&gt;</comment>
                            <comment id="13061462" author="dagw" created="Thu, 7 Jul 2011 18:56:12 +0100"  >&lt;p&gt;Committed a patch to this end as svn 1143939.&lt;/p&gt;</comment>
                            <comment id="13205702" author="mikem" created="Fri, 10 Feb 2012 19:58:58 +0000"  >&lt;p&gt;reopening to backport to 10.8.&lt;/p&gt;</comment>
                            <comment id="13205704" author="mikem" created="Fri, 10 Feb 2012 20:00:36 +0000"  >&lt;p&gt;backported the fix to 10.8.  10.8 was seeing some intermittent failures in updatelocks.sql test, so backporting this will eliminate those and I have not &lt;br/&gt;
seen any intermittent errors assocated with the new UpdateLocks converted test.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12413956">DERBY-4047</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12502097">DERBY-5147</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12502097">DERBY-5147</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12476686">DERBY-4833</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12484862" name="derby-5305-b.diff.gz" size="115690" author="dagw" created="Fri, 1 Jul 2011 13:04:22 +0100"/>
                            <attachment id="12484863" name="derby-5305-b.stat" size="876" author="dagw" created="Fri, 1 Jul 2011 13:04:22 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jun 2011 13:42:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0e5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36110</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>