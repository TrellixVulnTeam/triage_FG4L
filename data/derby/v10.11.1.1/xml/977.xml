<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:34:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-977/DERBY-977.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-977] jdbcapi/xaSimplePositive.sql fails</title>
                <link>https://issues.apache.org/jira/browse/DERBY-977</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;&quot;Signature&quot;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;Diff file xa/xa/xaSimplePositive.diff&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
			&lt;li&gt;Start: xaSimplePositive jdk1.5.0_04 xa:xa 2006-02-14 03:03:46 ***&lt;br/&gt;
97 del&lt;br/&gt;
&amp;lt; Transaction 1 : (1,FILTERED,FILTERED)&lt;br/&gt;
98 del&lt;br/&gt;
&amp;lt; Transaction 2 : (2,FILTERED,FILTERED)&lt;br/&gt;
98a97,98&lt;br/&gt;
&amp;gt; Transaction 1 : (2,FILTERED,FILTERED)&lt;br/&gt;
&amp;gt; Transaction 2 : (1,FILTERED,FILTERED)&lt;br/&gt;
Test Failed.&lt;/li&gt;
			&lt;li&gt;End:   xaSimplePositive jdk1.5.0_04 xa:xa 2006-02-14 03:03:50 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;http://www.multinet.no/~solberg/public/Apache/TinderBox_Derby/Limited/testSummary-377554.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.multinet.no/~solberg/public/Apache/TinderBox_Derby/Limited/testSummary-377554.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment>Solaris 10 3/05 s10_74L2a X86 - SunOS 5.10 Generic, JVM: Sun Microsystems Inc. 1.5.0_04</environment>
        <key id="12328945">DERBY-977</key>
            <summary>jdbcapi/xaSimplePositive.sql fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="olesolberg">Ole Solberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Feb 2006 17:59:26 +0000</created>
                <updated>Wed, 1 Jul 2009 01:09:09 +0100</updated>
                            <resolved>Thu, 30 Mar 2006 05:57:47 +0100</resolved>
                                    <version>10.2.1.6</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12366663" author="mikem" created="Fri, 17 Feb 2006 04:02:05 +0000"  >&lt;p&gt;If you look in the actual test you will see the explanation of this diff:&lt;br/&gt;
ij(XA)&amp;gt; &amp;#8211; NOTE: The following call to &quot;xa_recover xa_startrscan&quot; is apt to&lt;br/&gt;
&amp;#8211; return the result set rows in reverse order when changes to&lt;br/&gt;
&amp;#8211; the Derby engine affect the number of transactions that it takes&lt;br/&gt;
&amp;#8211; to create a database.  The transactions are stored in a hash table&lt;br/&gt;
&amp;#8211; based on a global and local id, and when the number of transactions&lt;br/&gt;
&amp;#8211; changes, the (internal) local id can change, which may lead to a&lt;br/&gt;
&amp;#8211; change in the result set order.  This order is determined by the&lt;br/&gt;
&amp;#8211; JVM&apos;s hashing algorithm. Examples of changes to the engine that&lt;br/&gt;
&amp;#8211; can affect this include ones that cause more commits or that&lt;br/&gt;
&amp;#8211; change the amount of data being stored, such as changes to the&lt;br/&gt;
&amp;#8211; metadata statements (which is what prompted this explanation in&lt;br/&gt;
&amp;#8211; the first place).  Ultimately, the problem is that there is no&lt;br/&gt;
&amp;#8211; way to order the return values from &quot;xa_recover&quot; since it is an&lt;br/&gt;
&amp;#8211; ij internal statement, not SQL...&lt;br/&gt;
xa_recover xa_startrscan;&lt;br/&gt;
Recovered 2 in doubt transactions&lt;br/&gt;
Transaction 1 : (1,FILTERED,FILTERED)&lt;br/&gt;
Transaction 2 : (2,FILTERED,FILTERED)&lt;/p&gt;</comment>
                            <comment id="12368613" author="myrna" created="Fri, 3 Mar 2006 06:47:51 +0000"  >&lt;p&gt;recouping comments from the list:&lt;br/&gt;
&quot; myrna:&lt;br/&gt;
I read this to mean we can simply update the masters.&lt;br/&gt;
Or is that not what you meant?&lt;/p&gt;

&lt;p&gt;  mike: &lt;br/&gt;
If the problem is reproducible then that is probably the most&lt;br/&gt;
expedient thing to do, it is very likely the result is JVM&lt;br/&gt;
specific as the order tends to be tied to hash algorithms in&lt;br/&gt;
the jvm.  Note that background activity can change&lt;br/&gt;
the actual # of transactions, but for this particular test so&lt;br/&gt;
little is going on it has not been a problem in the past, but&lt;br/&gt;
there have been a lot of timing related changes recently.&lt;/p&gt;

&lt;p&gt;Long term the best solution for the functionality of this test&lt;br/&gt;
would be to write it in java, and have the program deal with&lt;br/&gt;
the ordering issues.  Anyone interested in a small amount of&lt;br/&gt;
jdbc XA programming?&lt;br/&gt;
&quot;&lt;/p&gt;

&lt;p&gt;I was waiting to see if this would get picked up in line with &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-434&quot; title=&quot;add jdbcapi/xaMorph.sql jdbcapi/xaJNDI  jdbcapi/xaAnotherTest.sql to client xa testing.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-434&quot;&gt;&lt;del&gt;DERBY-434&lt;/del&gt;&lt;/a&gt;, but there it was indicated that the xa*.sql tests would remain in place for jdk13 compatible testing.&lt;/p&gt;

&lt;p&gt;However, in the mean time, the test is not failing anymore.&lt;br/&gt;
Shall we close this?&lt;/p&gt;</comment>
                            <comment id="12372151" author="knutanders" created="Wed, 29 Mar 2006 07:52:19 +0100"  >&lt;p&gt;OK, now I&apos;m &lt;b&gt;really&lt;/b&gt; tired of seeing this test fail each time I&apos;m running derbyall. The attached patch fixes it (the fix only affects the test in embedded mode, but I have never seen it fail in DerbyNetClient).&lt;/p&gt;

&lt;p&gt;I have only run the test manually with the fix. Will start derbyall now. If everything goes well, I intend to commit this patch tomorrow morning.&lt;/p&gt;</comment>
                            <comment id="12372166" author="mikem" created="Wed, 29 Mar 2006 09:36:57 +0100"  >&lt;p&gt;it should be pointed out that this change, does in a VERY minor way change what is tested.  It will no longer test&lt;br/&gt;
that specific transactions are returned from xa recover - only that 2 of them are.  I am ok with doing this change now, &lt;br/&gt;
but would be more comfortable if a test enhancement request was filed before closing the issue to write a test that&lt;br/&gt;
could check that the correct XA global xid is returned and did not suffer from the current ordering problem.&lt;/p&gt;</comment>
                            <comment id="12372249" author="knutanders" created="Wed, 29 Mar 2006 23:34:43 +0100"  >&lt;p&gt;My previous patch caused changes in the output from store/xaOffline1.sql as well. Uploading a new patch that only affects xaSimplePositive.&lt;/p&gt;

&lt;p&gt;I agree with Mike that a new issue should be filed. Will do that before I commit.&lt;/p&gt;</comment>
                            <comment id="12372304" author="knutanders" created="Thu, 30 Mar 2006 05:57:43 +0100"  >&lt;p&gt;Committed revision 389875.&lt;/p&gt;

&lt;p&gt;Request for new test filed as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1165&quot; title=&quot;A test checking the transaction ids returned by xa_recover is needed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1165&quot;&gt;&lt;del&gt;DERBY-1165&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12324686" name="derby-977-v1.diff" size="1650" author="knutanders" created="Wed, 29 Mar 2006 07:52:19 +0100"/>
                            <attachment id="12324687" name="derby-977-v1.stat" size="161" author="knutanders" created="Wed, 29 Mar 2006 07:52:19 +0100"/>
                            <attachment id="12324720" name="derby-977-v2.diff" size="1544" author="knutanders" created="Wed, 29 Mar 2006 23:34:42 +0100"/>
                            <attachment id="12324721" name="derby-977-v2.stat" size="190" author="knutanders" created="Wed, 29 Mar 2006 23:34:43 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10369"><![CDATA[Regression Test Failure]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Feb 2006 04:02:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0tkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38608</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>