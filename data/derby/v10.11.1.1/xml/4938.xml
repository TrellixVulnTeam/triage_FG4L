<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:07:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4938/DERBY-4938.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4938] Implement istat scheduling/triggering</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4938</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The istat daemon has to get its orders from somewhere (it is not operating purely on its own), and this issue tracks the addition of code that will schedule units of works with with the daemon. &lt;br/&gt;
The current approach is based on statement compilation, i.e. prepared statements, triggering the addition of units of work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492659">DERBY-4938</key>
            <summary>Implement istat scheduling/triggering</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12492655">DERBY-4934</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kristwaa">Kristian Waagan</assignee>
                                    <reporter username="kristwaa">Kristian Waagan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Dec 2010 21:13:20 +0000</created>
                <updated>Tue, 19 Apr 2011 13:39:25 +0100</updated>
                            <resolved>Fri, 25 Feb 2011 21:06:06 +0000</resolved>
                                    <version>10.8.1.2</version>
                                    <fixVersion>10.8.1.2</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12969303" author="kristwaa" created="Wed, 8 Dec 2010 13:34:57 +0000"  >&lt;p&gt;This patch is blocked by, or dependent on, &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4936&quot; title=&quot;Add core istat daemon&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4936&quot;&gt;&lt;del&gt;DERBY-4936&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12992769" author="kristwaa" created="Wed, 9 Feb 2011 22:56:07 +0000"  >&lt;p&gt;Attaching patch 1a, which adds the initial scheduling logic.&lt;/p&gt;

&lt;p&gt;Updates or creation of the index cardinality statistics will only happen for prepared statements, and only when the query involves an access path using an index. In addition there are threshold that has to be reached/exceeded before an update is scheduled. These thresholds may have to be tweaked after a period of testing.&lt;/p&gt;

&lt;p&gt;Note that &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4939&quot; title=&quot;Enable istat daemon and tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4939&quot;&gt;&lt;del&gt;DERBY-4939&lt;/del&gt;&lt;/a&gt; has to be committed before the autostats are enabled, but here&apos;s some comments from &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4771&quot; title=&quot;Continue investigation of automatic creation/update of index statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4771&quot;&gt;&lt;del&gt;DERBY-4771&lt;/del&gt;&lt;/a&gt; about the available debug knobs for this feature:&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt; a) derby.storage.indexStats.debug.createThreshold (100)&lt;br/&gt;
 b) derby.storage.indexStats.debug.absdiffThreshold (1000)&lt;br/&gt;
 c) derby.storage.indexStats.debug.lndiffThreshold (1.0)&lt;br/&gt;
 d) derby.storage.indexStats.debug.queueSize (5)&lt;/p&gt;

&lt;p&gt;(a) determines how big a table must be before statistics are automatically&lt;br/&gt;
created. (b) determines how big the discrepancy between the row estimates for&lt;br/&gt;
the table and the index must be before the statistics are updated. (c)&lt;br/&gt;
determines how big the logarithmic (natural logarithm) must be before the&lt;br/&gt;
statistics are updated. The values of these properties are printed if tracing&lt;br/&gt;
is turned on. Now:&lt;/p&gt;

&lt;p&gt;  Q: I don&apos;t understand these properties!&lt;br/&gt;
  A: Read the code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
     These properties are made available for experimentation and debugging&lt;br/&gt;
     only. a-c affect when statistics are created or updated, and are used in&lt;br/&gt;
     TableDescriptor. (d) is only used in IndexStatisticsDaemonImpl.&lt;/p&gt;

&lt;p&gt;  Q: Why have both (a) and (b)?&lt;br/&gt;
  A: Purely for debugging and experimentation. If these properties are included&lt;br/&gt;
     in production code, I expect they can be folded into one.&lt;/p&gt;

&lt;p&gt;  Q: Why have both (b) and (c)?&lt;br/&gt;
  A: In general (c) will decide if the statistics are updated. However, for&lt;br/&gt;
     small tables (c) will cause frequent updates of the statistics. For small&lt;br/&gt;
     tables accurate statistics are not needed for good performance &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, so&lt;br/&gt;
     there is no reason to frequently update the stats. This is where (b) comes&lt;br/&gt;
     into play.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; One exception might be if the rows are huge.&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;Committed to trunk with revision 1069160.&lt;/p&gt;</comment>
                            <comment id="12999568" author="kristwaa" created="Fri, 25 Feb 2011 21:06:06 +0000"  >&lt;p&gt;Closing issue.&lt;br/&gt;
The functionality seems to work in general, and any issues should be dealt with in separate JIRAs.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12492657">DERBY-4936</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12470733" name="derby-4938-1a-istat_scheduling.diff" size="23002" author="kristwaa" created="Wed, 9 Feb 2011 22:56:07 +0000"/>
                            <attachment id="12470732" name="derby-4938-1a-istat_scheduling.stat" size="567" author="kristwaa" created="Wed, 9 Feb 2011 22:56:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0gi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>