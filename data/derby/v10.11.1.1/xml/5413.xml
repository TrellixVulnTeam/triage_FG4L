<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:43:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-5413/DERBY-5413.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-5413] NetworkServerControl#main can exit with status 1 without printing an error message to console</title>
                <link>https://issues.apache.org/jira/browse/DERBY-5413</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Cf this piece of code in main&lt;/p&gt;

&lt;p&gt;catch (Exception e)&lt;br/&gt;
{&lt;br/&gt;
     //if there was an error, exit(1)&lt;br/&gt;
     if ((e.getMessage() == null) ||&lt;br/&gt;
         !e.getMessage().equals(NetworkServerControlImpl.UNEXPECTED_ERR) ||&lt;br/&gt;
         printErrors&lt;br/&gt;
     )&lt;/p&gt;
     {
         if (server != null)
             server.consoleExceptionPrint(e);
         else
             e.printStackTrace();  // default output stream is System.out
     }
&lt;p&gt;     // else, we&apos;ve already printed a trace, so just exit.&lt;br/&gt;
     System.exit(1);&lt;/p&gt;

&lt;p&gt;The call &quot;server.consoleExceptionPrint(e)&quot; will actually &lt;b&gt;not&lt;/b&gt; print anything unless the debug flag &quot;NetworkServerControlImpl#debugOutput&quot; has ben set to true which it isn&apos;t a priori. &lt;/p&gt;

&lt;p&gt;I think it should be replaced by a call to server.consoleExceptionPrintTrace(e), which will print unconditionally.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12523172">DERBY-5413</key>
            <summary>NetworkServerControl#main can exit with status 1 without printing an error message to console</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="dagw">Dag H. Wanvik</assignee>
                                    <reporter username="dagw">Dag H. Wanvik</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Sep 2011 11:19:23 +0100</created>
                <updated>Mon, 17 Jun 2013 10:19:24 +0100</updated>
                            <resolved>Thu, 17 Nov 2011 13:48:36 +0000</resolved>
                                    <version>10.8.1.2</version>
                                    <fixVersion>10.8.2.2</fixVersion>
                    <fixVersion>10.9.1.0</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13116909" author="dagw" created="Thu, 29 Sep 2011 01:11:00 +0100"  >&lt;p&gt;If there are no comments on this patch, I will commit it over the week-end.&lt;/p&gt;</comment>
                            <comment id="13117114" author="knutanders" created="Thu, 29 Sep 2011 09:09:32 +0100"  >&lt;p&gt;Looks like a good improvement. +1&lt;/p&gt;</comment>
                            <comment id="13117333" author="dagw" created="Thu, 29 Sep 2011 15:47:58 +0100"  >&lt;p&gt;Committed as svn 1177324 on trunk.&lt;/p&gt;
</comment>
                            <comment id="13117335" author="dagw" created="Thu, 29 Sep 2011 15:48:47 +0100"  >&lt;p&gt;Resolving.&lt;/p&gt;</comment>
                            <comment id="13117362" author="myrna" created="Thu, 29 Sep 2011 16:24:17 +0100"  >&lt;p&gt;Is this suitable for backport to 10.8?&lt;/p&gt;</comment>
                            <comment id="13117407" author="dagw" created="Thu, 29 Sep 2011 17:32:16 +0100"  >&lt;p&gt;Yes, Myrna, I think so. I am actually in the process of doing it right now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13117425" author="dagw" created="Thu, 29 Sep 2011 17:46:57 +0100"  >&lt;p&gt;Backported and committed on 10.8 as svn 1177352, closing.&lt;/p&gt;

&lt;p&gt;Note: I saw during my commit that a change was made to the mergeproperties of NetCursor.java even though I had made no changes to that file:&lt;/p&gt;

&lt;p&gt;   Property changes on: java/client/org/apache/derby/client/net/NetCursor.java&lt;br/&gt;
   ___________________________________________________________________&lt;br/&gt;
   Modified: svn:mergeinfo&lt;br/&gt;
      Merged /db/derby/code/trunk/java/client/org/apache/derby/client/net/NetCursor.java:r1177324&lt;/p&gt;

&lt;p&gt;Does anyone know why this happens? I see in its mergeinfo patches have been merged from 10.7 branch as well..&lt;/p&gt;</comment>
                            <comment id="13117825" author="dagw" created="Fri, 30 Sep 2011 03:04:11 +0100"  >&lt;p&gt;I think I&apos;ll need to revert this change. I must have missed an error in my regressions. It turns out tools/derbyrunjartest.java breaks with this patch:&lt;/p&gt;

&lt;p&gt;&amp;gt; Fri Sep 30 01:56:07 GMT+01:00 2011 : DRDA_NoCommand.U:No command given.&lt;br/&gt;
&amp;gt; java.lang.Exception: DRDA_NoCommand.U:No command given.&lt;br/&gt;
Test Failed.&lt;/p&gt;

&lt;p&gt;The logic in the server is confusing. It turns out the extra message above comes from my patch. When the server analyzes incorrect commands in derbyrunjartest, the serves prints a usage legend while inside NetwrokControlServerImpl. Since &lt;b&gt;something&lt;/b&gt; has already been printed, the above exception is suppressed by default. &quot;server.consoleExceptionPrint(e)&quot; does nothing unless a debug flag is on - contrary to its name if I may add, hence confusing...&lt;/p&gt;

&lt;p&gt;The reason I wanted to make sure we printed unconditionally was code added for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-5363&quot; title=&quot;Tighten permissions of DB files to owner with &amp;gt;= JDK7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-5363&quot;&gt;&lt;del&gt;DERBY-5363&lt;/del&gt;&lt;/a&gt; which, if it saw an error, had printed &lt;b&gt;nothing&lt;/b&gt; at this point in the code. I&apos;ll let that code handle its own exception printing instead, and back this patch out. Note, the server can still die silently if an exception with string NetworkServerControlImpl.UNEXPECTED_ERR, but this would be a coding error I presume. &lt;/p&gt;</comment>
                            <comment id="13117831" author="dagw" created="Fri, 30 Sep 2011 03:31:38 +0100"  >&lt;p&gt;Reverted the patch on trunk and 10.8 branch @ svn  1177482 and 1177483. Sorry for the noise.&lt;/p&gt;</comment>
                            <comment id="13685229" author="knutanders" created="Mon, 17 Jun 2013 10:19:24 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12494600" name="derby-5413.diff" size="514" author="dagw" created="Thu, 15 Sep 2011 11:28:23 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Sep 2011 08:09:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ekn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36179</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>