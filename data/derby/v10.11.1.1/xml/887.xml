<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:35:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-887/DERBY-887.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-887] Select statement returns wrong number of rows if you compare an integer column with a boolean expression in the where clause</title>
                <link>https://issues.apache.org/jira/browse/DERBY-887</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;I have a table with 2 columns one is BIGINT which is Generated always starting with 1 and increment by1 and the other one is timestamp&lt;/p&gt;


&lt;p&gt; ij&amp;gt; select id,date from inbox where id = 0&amp;lt;3;&lt;br/&gt;
ID                  |DATE&lt;br/&gt;
-----------------------------------------------&lt;br/&gt;
25                  |2006-01-26 14:35:46.584&lt;br/&gt;
34                  |2006-01-26 14:36:16.588&lt;br/&gt;
21                  |2006-01-26 14:34:46.455&lt;br/&gt;
22                  |2006-01-26 14:34:47.176&lt;br/&gt;
27                  |2006-01-26 14:35:47.054&lt;br/&gt;
24                  |2006-01-26 14:35:16.58&lt;br/&gt;
28                  |2006-01-26 14:35:47.305&lt;br/&gt;
35                  |2006-01-26 14:36:18.771&lt;br/&gt;
31                  |2006-01-26 14:35:48.496&lt;br/&gt;
32                  |2006-01-26 14:35:48.887&lt;br/&gt;
33                  |2006-01-26 14:35:49.308&lt;/p&gt;

&lt;p&gt;11 rows selected&lt;br/&gt;
ij&amp;gt; select id,date from inbox where id = true;&lt;br/&gt;
ID                  |DATE&lt;br/&gt;
-----------------------------------------------&lt;br/&gt;
21                  |2006-01-26 14:34:46.455&lt;/p&gt;

&lt;p&gt;1 row selected&lt;/p&gt;

&lt;p&gt;Both queries should return same number of rows&lt;/p&gt;

&lt;p&gt;Also If I delete the first row from the table then select id,date from inbox where id = true; returns the second row&lt;br/&gt;
ij&amp;gt; delete from inbox where id=21;&lt;/p&gt;

&lt;p&gt;1 row inserted/updated/deleted&lt;/p&gt;

&lt;p&gt;Then again run&lt;br/&gt;
ij&amp;gt; select id ,date from inbox where id=true;&lt;br/&gt;
ID                  |DATE&lt;br/&gt;
-----------------------------------------------&lt;br/&gt;
22                 |2006-01-26 14:35:16.58&lt;/p&gt;


&lt;p&gt;Which indicates that the select returns only the first row and then is getting closed&lt;/p&gt;

</description>
                <environment>Java : java version &amp;quot;1.5.0_02&amp;quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_02-b09)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 1.5.0_02-b09, mixed mode)&lt;br/&gt;
&lt;br/&gt;
Classpath : c:/pantry/derby.jar;c:/pantry/derbytools.jar;&lt;br/&gt;
&lt;br/&gt;
OS: Windows XP Professional&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</environment>
        <key id="12328203">DERBY-887</key>
            <summary>Select statement returns wrong number of rows if you compare an integer column with a boolean expression in the where clause</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rhillegas">Rick Hillegas</assignee>
                                    <reporter username="mkutty">Manjula Kutty</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jan 2006 07:45:51 +0000</created>
                <updated>Mon, 17 Jun 2013 10:19:53 +0100</updated>
                            <resolved>Tue, 13 Jul 2010 16:20:24 +0100</resolved>
                                    <version>10.0.2.0</version>
                    <version>10.0.2.1</version>
                    <version>10.1.1.0</version>
                    <version>10.1.2.1</version>
                    <version>10.1.3.1</version>
                    <version>10.2.1.6</version>
                    <version>10.2.2.0</version>
                    <version>10.3.1.4</version>
                    <version>10.3.2.1</version>
                    <version>10.3.3.0</version>
                    <version>10.4.1.3</version>
                    <version>10.4.2.0</version>
                    <version>10.5.1.1</version>
                    <version>10.5.2.0</version>
                    <version>10.5.3.0</version>
                                    <fixVersion>10.5.3.1</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12364280" author="rhillegas" created="Sat, 28 Jan 2006 08:47:57 +0000"  >&lt;p&gt;Hi Manjula,&lt;/p&gt;

&lt;p&gt;Could you attach a script (including the ddl and table population) which demonstrates this problem? The following simplified test seems to work correctly. Thanks.&lt;/p&gt;

&lt;p&gt;ij&amp;gt; connect &apos;jdbc:derby:testdb&apos;;&lt;br/&gt;
ij&amp;gt; --connect &apos;jdbc:derby:testdb;create=true&apos;;&lt;br/&gt;
--connect &apos;jdbc:derby://localhost:8246/testdb&apos;;&lt;/p&gt;

&lt;p&gt;drop table t1;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; create table t1( id bigint );&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t1 ( id ) values ( 0 ), ( 1 ), ( 2 ), ( 4 );&lt;br/&gt;
4 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from t1&lt;br/&gt;
where id = true;&lt;br/&gt;
ID&lt;br/&gt;
--------------------&lt;br/&gt;
1&lt;br/&gt;
2&lt;br/&gt;
4&lt;/p&gt;

&lt;p&gt;3 rows selected&lt;br/&gt;
ij&amp;gt; select * from t1 where id = 0&amp;lt;3;&lt;br/&gt;
ID&lt;br/&gt;
--------------------&lt;br/&gt;
1&lt;br/&gt;
2&lt;br/&gt;
4&lt;/p&gt;

&lt;p&gt;3 rows selected&lt;/p&gt;
</comment>
                            <comment id="12364281" author="djd" created="Sat, 28 Jan 2006 09:08:57 +0000"  >&lt;p&gt;Is it valid to compare integer columns to boolean columns?&lt;/p&gt;</comment>
                            <comment id="12364285" author="mkutty" created="Sat, 28 Jan 2006 09:53:56 +0000"  >&lt;p&gt;Even I feel  the same. Still if it is valid then it should show consistent behaviour. &lt;br/&gt;
I just happend to run this query and was expecting an error message , but ij returned me some rows. In my schema I had primary key on the column id. If I remove the primary key then evry thing works fine&lt;/p&gt;

&lt;p&gt;I&apos;m attaching the script to reproduce the problem.  &lt;/p&gt;

&lt;p&gt;The derby jars I have used are :&lt;/p&gt;</comment>
                            <comment id="12364286" author="mkutty" created="Sat, 28 Jan 2006 10:03:31 +0000"  >&lt;p&gt;Even I feel the same. Still, if it is valid then it should show consistent behaviour.&lt;br/&gt;
I just happend to run this query and was expecting an error message , but ij returned me some rows. In my schema I had primary key on the column &apos;id&apos;. If I remove the primary key then every thing works fine&lt;/p&gt;

&lt;p&gt;I&apos;m attaching the script to reproduce the problem.&lt;/p&gt;

&lt;p&gt;The derby jars I have used are : &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\pantry\derby.jar&amp;#93;&lt;/span&gt; 10.2.0.0 alpha - (372715)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;C:\pantry\derbytools.jar&amp;#93;&lt;/span&gt; 10.2.0.0 alpha - (372715)&lt;br/&gt;
......................................................................................................&lt;/p&gt;

&lt;p&gt;Here is the results with primary key :&lt;br/&gt;
ij&amp;gt; create table t (id bigint generated always as identity (start with 1,increment by 1), col1 char(2), primary key(id));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ca&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ba&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ea&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;dd&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from t ;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where id=0&amp;lt;3;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where id=true;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
2                   |ba&lt;/p&gt;


&lt;p&gt;--------------------------------------------------------&lt;br/&gt;
With out primary key&lt;/p&gt;

&lt;p&gt;ij&amp;gt;create table t (id bigint generated always as identity (start with 1,increment by 1), col1 char(2));&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ca&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ba&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ea&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;dd&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from t ;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where id=0&amp;lt;3;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where id=true;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;/p&gt;
</comment>
                            <comment id="12364353" author="kartha" created="Sun, 29 Jan 2006 10:34:46 +0000"  >&lt;p&gt;Would be interesting to know what the SQL standard proposes for comparing int and boolean.&lt;/p&gt;

&lt;p&gt;Also,  does boolean in Derby  mean  false (0)  or true  (&amp;gt;0) ?&lt;/p&gt;

&lt;p&gt;In that case,  if comparisions are allowed, one  would expect all  the rows with id&amp;gt;0 to be returned for the&lt;/p&gt;

&lt;p&gt; select * from t where id=true;    &lt;/p&gt;

&lt;p&gt;statement under both the scenarios (with and without primary key).&lt;/p&gt;

&lt;p&gt;The results in  case of the table without the primary key looks consistent and so does the id=0&amp;lt;3 statement.&lt;/p&gt;




</comment>
                            <comment id="12364519" author="kartha" created="Tue, 31 Jan 2006 12:35:59 +0000"  >
&lt;p&gt;Bernt  Johnsen replied to my question on the SQL standard on the mailing list.  Following is the archive link:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://article.gmane.org/gmane.comp.apache.db.derby.devel/13128&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.apache.db.derby.devel/13128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;quote&amp;gt;&lt;/p&gt;

&lt;p&gt;The SQL spec (99) chapter 6.22 states that a BOOLEAN may be converted&lt;br/&gt;
(with a CAST specification) to CHAR, VARCHAR, BOOLEAN and CLOB and&lt;br/&gt;
that CHAR, VARCHAR, CLOB and BOOLEAN may be converted to BOOLEAN.&lt;/p&gt;

&lt;p&gt;&amp;lt;unquote&amp;gt;&lt;/p&gt;

&lt;p&gt;So if the BOOLEAN and INT  types are not compatabile,  the select statements with &apos;id=0&amp;lt;3&apos; and &apos;id=true&apos; &lt;br/&gt;
needs to throw an error.&lt;/p&gt;</comment>
                            <comment id="12364526" author="kmarsden" created="Tue, 31 Jan 2006 14:19:37 +0000"  >&lt;p&gt;marking this issue to block &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;With Dan&apos;s review of the first checkin he noted that there was still work needed in the area of casting and comparisons for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt;. Hopefully that work will resolve this issue. &lt;/p&gt;

&lt;p&gt;ignore previous link from 877. Slipped a digit&lt;/p&gt;</comment>
                            <comment id="12364531" author="kmarsden" created="Tue, 31 Jan 2006 14:44:52 +0000"  >&lt;p&gt;I am marking this as critical since we get wrong results for a query that previously failed with a syntax error.  &lt;/p&gt;</comment>
                            <comment id="12364616" author="djd" created="Tue, 31 Jan 2006 23:33:25 +0000"  >&lt;p&gt;Fixing this will also disable previous queries that compiled successfully and possibly returned &quot;valid&quot; results. I couldn&apos;t tell from the original description if this query was returning all rows in the table.&lt;/p&gt;

&lt;p&gt;select id,date from inbox where id = 0&amp;lt;3&lt;/p&gt;</comment>
                            <comment id="12364633" author="rhillegas" created="Wed, 1 Feb 2006 01:18:22 +0000"  >&lt;p&gt;If you add an explicit cast to the problem query, it returns &quot;correct&quot; results:&lt;/p&gt;

&lt;p&gt;select * from t where cast(id as boolean) = true;&lt;/p&gt;

&lt;p&gt;However, as Bernt points out, the cast (explicit or implicit) is illegal according to the ANSI spec.&lt;/p&gt;

&lt;p&gt;So, I propose to fix this bug by forbidding these casts, unless someone objects. Thanks to Manjula for logging this issue and for everyone&apos;s feedback so far.&lt;/p&gt;</comment>
                            <comment id="12364649" author="rhillegas" created="Wed, 1 Feb 2006 02:26:27 +0000"  >&lt;p&gt;Although &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt; introduced some additional casting cases, the root causes of this bug are in an older version of Derby. Older releases allow illegal comparisons with BOOLEANs. In addition, the problem query can be expressed in a way which gets past the 10.1.1.0 parser and produces incorrect results. The following incorrect results may be observed in 10.1.1.0:&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table t (id bigint generated always as identity (start with 1,increment by 1), col1 char(2), primary key(id))&lt;br/&gt;
;&lt;br/&gt;
0 rows inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ca&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ba&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;ea&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; insert into t(col1) values(&apos;dd&apos;);&lt;br/&gt;
1 row inserted/updated/deleted&lt;br/&gt;
ij&amp;gt; select * from t ;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where id=0&amp;lt;3;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where (id=0)&amp;lt;3;&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
1                   |ca&lt;br/&gt;
2                   |ba&lt;br/&gt;
3                   |ea&lt;br/&gt;
4                   |dd&lt;/p&gt;

&lt;p&gt;4 rows selected&lt;br/&gt;
ij&amp;gt; select * from t where id=(0&amp;lt;3);&lt;br/&gt;
ID                  |COL1&lt;br/&gt;
-------------------------&lt;br/&gt;
2                   |ba&lt;/p&gt;

&lt;p&gt;1 row selected&lt;/p&gt;

&lt;p&gt;I think there are at least two bugs in here:&lt;/p&gt;

&lt;p&gt;o A pre-existing 10.1.1.0 bug.&lt;br/&gt;
o Some illegal casts introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-499&quot; title=&quot;Expose BOOLEAN datatype to end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-499&quot;&gt;&lt;del&gt;DERBY-499&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="12364653" author="kmarsden" created="Wed, 1 Feb 2006 02:41:52 +0000"  >&lt;p&gt;Thanks Rick for looking at this issue.&lt;br/&gt;
As part of the fix,  can you add BOOLEAN to the the cast and comparison tables in the lang/casting.java test?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Kathey&lt;/p&gt;</comment>
                            <comment id="12366252" author="rhillegas" created="Tue, 14 Feb 2006 07:04:30 +0000"  >&lt;p&gt;I am relinquishing this bug right now. It has been crowded off my calendar.&lt;/p&gt;</comment>
                            <comment id="12366269" author="bandaram" created="Tue, 14 Feb 2006 09:52:17 +0000"  >&lt;p&gt;Rick, do you know if you or someone else might be able to address this issue soon? I thought, at least, part of the problem was introduced by boolean type work. If it can be deemed a &quot;regression&quot;, I think this bug should be on high priority list for someone. You know who is looking for regressions in the product, very closely &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12366354" author="rhillegas" created="Wed, 15 Feb 2006 01:46:27 +0000"  >&lt;p&gt;Hi Satheesh,&lt;/p&gt;

&lt;p&gt;I have attached my half-baked work on this bug: bug887_interim.diff. If someone else wants to pick up this JIRA, they may find that patch useful. In particular, the patch contains changes to various datatype classes which disable the illegal explicit and implicit casts. However, although the patch fixes the bugs, it breaks some other functionality including some unit tests. In particular, it breaks the ODBC metadata mapping, which relies on these illegal casts. My fix to that problem was to add a system function which performs the job formerly done by the illegal cast.&lt;/p&gt;

&lt;p&gt;I have not worked on this for a week and a half and it&apos;s clear that I am swamped with other work. I too would like to see this bug fixed for 10.2 but the reality is, I am not going to get to it soon. If someone else is itching badly, please go ahead and scratch.&lt;/p&gt;</comment>
                            <comment id="12366355" author="rhillegas" created="Wed, 15 Feb 2006 01:48:24 +0000"  >&lt;p&gt;Hi Satheesh,&lt;/p&gt;

&lt;p&gt;I have attached my half-baked work on this bug: bug887_interim.diff. If someone else wants to pick up this JIRA, they may find that patch useful. In particular, the patch contains changes to various datatype classes which disable the illegal explicit and implicit casts. However, although the patch fixes the bugs, it breaks some other functionality including some unit tests. In particular, it breaks the ODBC metadata mapping, which relies on these illegal casts. My fix to that problem was to add a system function which performs the job formerly done by the illegal cast.&lt;/p&gt;

&lt;p&gt;I have not worked on this for a week and a half and it&apos;s clear that I am swamped with other work. I too would like to see this bug fixed for 10.2 but the reality is, I am not going to get to it soon. If someone else is itching badly, please go ahead and scratch.&lt;/p&gt;</comment>
                            <comment id="12368840" author="bandaram" created="Sat, 4 Mar 2006 16:10:06 +0000"  >&lt;p&gt;Moving this to fix under 10.3. David proposed that boolean work be left on trunk to be completed in 10.3 timeframe and removed from 10.2 once a branch is cut. Since the rollback of boolean work for 10.2 is being tracked under &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1029&quot; title=&quot;Backout boolean work from the 10.2 branch immediately after the branch is created&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1029&quot;&gt;&lt;del&gt;DERBY-1029&lt;/del&gt;&lt;/a&gt;, I am moving this one to 10.3.&lt;/p&gt;

&lt;p&gt;Rick, I am assigning this 10.3 issue back to you... expecting you would be working on this for 10.3. Let me know if this is incorrect.&lt;/p&gt;</comment>
                            <comment id="12422743" author="rhillegas" created="Fri, 21 Jul 2006 19:58:52 +0100"  >&lt;p&gt;This issue is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1029&quot; title=&quot;Backout boolean work from the 10.2 branch immediately after the branch is created&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1029&quot;&gt;&lt;del&gt;DERBY-1029&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12422744" author="rhillegas" created="Fri, 21 Jul 2006 20:00:34 +0100"  >&lt;p&gt;Reducing the priority of this bug. With the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1029&quot; title=&quot;Backout boolean work from the 10.2 branch immediately after the branch is created&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1029&quot;&gt;&lt;del&gt;DERBY-1029&lt;/del&gt;&lt;/a&gt;, the behavior has reverted to what it was in 10.1.&lt;/p&gt;</comment>
                            <comment id="12422746" author="rhillegas" created="Fri, 21 Jul 2006 20:03:45 +0100"  >&lt;p&gt;Detaching this issue from 10.3. Fixing it seems to require changing the non-ANSI behavior of implicit and explicit casts. Changing this behavior probably will affect existing applications and it seems to be the sort of fix which we need to defer to a major release. That is, this is appropriate for 11.0 but not 10.3.&lt;/p&gt;</comment>
                            <comment id="12422747" author="rhillegas" created="Fri, 21 Jul 2006 20:05:04 +0100"  >&lt;p&gt;Unassigning myself from this issue. We have moved out the timeframe for fixing this bug.&lt;/p&gt;</comment>
                            <comment id="12547622" author="jazarine" created="Sun, 2 Dec 2007 13:24:34 +0000"  >&lt;p&gt;i encoutnered the following problem when trying to run the queries.....&lt;/p&gt;

&lt;p&gt;ij&amp;gt; create table test887(id bigint);&lt;br/&gt;
0 rows inserted/updated/deleted&lt;/p&gt;


&lt;p&gt;ij&amp;gt; INSERT INTO TEST887 VALUES (801), (802), (803), (804);&lt;/p&gt;


&lt;p&gt;ij&amp;gt; select * from test887 where id = 0&amp;lt;3;&lt;br/&gt;
ID                  &lt;br/&gt;
--------------------&lt;br/&gt;
801                 &lt;br/&gt;
802                 &lt;br/&gt;
803                 &lt;br/&gt;
804           &lt;/p&gt;

&lt;p&gt;ij&amp;gt; select * from test887 where id = true;&lt;br/&gt;
ERROR 42X01: Syntax error: true.&lt;/p&gt;

&lt;p&gt;i dont understand why is the second statement giving a syntax error while the first one generates the correct output....&lt;br/&gt;
both (0&amp;lt;3) and true are equivalent....&lt;/p&gt;</comment>
                            <comment id="12733698" author="rhillegas" created="Tue, 21 Jul 2009 17:35:23 +0100"  >&lt;p&gt;Triaged for 10.5.3: assigned normal urgency,&lt;/p&gt;</comment>
                            <comment id="12748511" author="rhillegas" created="Thu, 27 Aug 2009 20:06:26 +0100"  >&lt;p&gt;Marking as wrong query result.&lt;/p&gt;</comment>
                            <comment id="12762209" author="rhillegas" created="Mon, 5 Oct 2009 16:12:29 +0100"  >&lt;p&gt;The legal SQL casts are laid out in a table in the SQL Standard, part 2, section 6.12 (&amp;lt;cast specification&amp;gt;), syntax rule 6. The only allowed casts involving booleans are these:&lt;/p&gt;

&lt;p&gt;1) the cast of a boolean to a character type&lt;/p&gt;

&lt;p&gt;2) the cast of a character type to a boolean&lt;/p&gt;</comment>
                            <comment id="12764795" author="rhillegas" created="Mon, 12 Oct 2009 20:13:22 +0100"  >&lt;p&gt;Attaching derby-887-01-ag-noImplicitCasts.diff. This patch disables the illegal implicit and explicit casting between BOOLEANs and non-string data types. I am running regression tests now.&lt;/p&gt;

&lt;p&gt;As pointed out in previous comments, one tricky piece of this bug is the fact that the Derby metadata queries rely on illegal casts which involve BOOLEANs. The solution proposed here is:&lt;/p&gt;

&lt;p&gt;1) Raise coercion errors when trying to bind an expression which needs to cast between BOOLEANs and non-string types.&lt;/p&gt;

&lt;p&gt;2) Change all of the metadata queries which have illegal BOOLEAN casts. Replace the casts with calls to the INTEGER function. That function can already convert a BOOLEAN to an INT, although our user guides can&apos;t say that because technically BOOLEAN is not supported.&lt;/p&gt;

&lt;p&gt;3) Adds new test cases to verify the correct casting behavior. One class of tests cannot be written today: the explicit casting of other data types to BOOLEAN. Those tests cannot be written until BOOLEAN is re-enabled.&lt;/p&gt;

&lt;p&gt;Touches the following files:&lt;/p&gt;

&lt;p&gt;M      java/engine/org/apache/derby/impl/sql/compile/BooleanTypeCompiler.java&lt;br/&gt;
M      java/engine/org/apache/derby/impl/sql/compile/CLOBTypeCompiler.java&lt;br/&gt;
M      java/engine/org/apache/derby/impl/sql/compile/BaseTypeCompiler.java&lt;br/&gt;
M      java/engine/org/apache/derby/impl/sql/compile/CharTypeCompiler.java&lt;br/&gt;
M      java/engine/org/apache/derby/impl/sql/compile/BitTypeCompiler.java&lt;br/&gt;
M      java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java&lt;/p&gt;

&lt;p&gt;Raise errors if an attempt is made to coerce between BOOLEAN and a non-string data type.&lt;/p&gt;


&lt;p&gt;M      java/build/org/apache/derbyBuild/ODBCMetadataGenerator.java&lt;/p&gt;

&lt;p&gt;Change metadata queries to use the INTEGER function rather than illegal casts.&lt;/p&gt;


&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/CastingTest.java&lt;/p&gt;

&lt;p&gt;Add new test cases to verify that the bug is fixed and to verify that we have disabled implicit and explict casting between BOOLEANs and non-string data types.&lt;/p&gt;



&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/subquery.sql&lt;br/&gt;
M      java/testing/org/apache/derbyTesting/functionTests/master/subquery.out&lt;/p&gt;

&lt;p&gt;Removed a test case which relied on illegal casts.&lt;/p&gt;


&lt;p&gt;M      java/testing/org/apache/derbyTesting/functionTests/tests/lang/ProcedureInTriggerTest.java&lt;/p&gt;

&lt;p&gt;Reworded a test case which relied on illegal casts.&lt;/p&gt;</comment>
                            <comment id="12764807" author="rhillegas" created="Mon, 12 Oct 2009 21:00:42 +0100"  >&lt;p&gt;Attaching first rev of a release note for this bug-fix.&lt;/p&gt;</comment>
                            <comment id="12765122" author="rhillegas" created="Tue, 13 Oct 2009 16:46:43 +0100"  >&lt;p&gt;There are a 108 errors in DatabaseMetaDataTest, so this patch needs a little work.&lt;/p&gt;</comment>
                            <comment id="12766119" author="rhillegas" created="Thu, 15 Oct 2009 17:45:53 +0100"  >&lt;p&gt;Attaching derby-887-01-aj-noImplicitCasts.diff. This differs from the previous version of the patch as follows:&lt;/p&gt;

&lt;p&gt;1) The builtin INTEGER function cannot be used to correct the ODBC metadata queries because the parser turns invocations of this builtin into CASTs to INT. That, of course, fails as a result of the core changes made by this bug-fix.&lt;/p&gt;

&lt;p&gt;2) Instead of using the INTEGER function to correct the ODBC metadata queries, I now correct them by adding CASE clauses which map BOOLEAN values to INTEGER values.&lt;/p&gt;

&lt;p&gt;I am running the regression tests now.&lt;/p&gt;</comment>
                            <comment id="12766188" author="rhillegas" created="Thu, 15 Oct 2009 20:20:04 +0100"  >&lt;p&gt;Hooray. The regression tests passed cleanly on the derby-887-01-aj-noImplicitCasts.diff patch.&lt;/p&gt;</comment>
                            <comment id="12767817" author="rhillegas" created="Tue, 20 Oct 2009 15:21:45 +0100"  >&lt;p&gt;Committed derby-887-01-aj-noImplicitCasts.diff at subversion revision 827505.&lt;/p&gt;</comment>
                            <comment id="12887512" author="kmarsden" created="Mon, 12 Jul 2010 21:43:31 +0100"  >&lt;p&gt;Assigning to myself for back port to 10.5&lt;/p&gt;</comment>
                            <comment id="12887799" author="kmarsden" created="Tue, 13 Jul 2010 16:20:24 +0100"  >&lt;p&gt;resolving for 10.5 and reassign Rick.&lt;/p&gt;</comment>
                            <comment id="13685386" author="knutanders" created="Mon, 17 Jun 2013 10:19:53 +0100"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bulk update&amp;#93;&lt;/span&gt; Close all resolved issues that haven&apos;t been updated for more than one year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12313174">DERBY-499</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12329337">DERBY-1029</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12468384">DERBY-4728</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12322437" name="DERBY-887.sql" size="343" author="mkutty" created="Sat, 28 Jan 2006 10:03:31 +0000"/>
                            <attachment id="12322965" name="bug887_interim.diff" size="202887" author="rhillegas" created="Wed, 15 Feb 2006 01:48:24 +0000"/>
                            <attachment id="12322964" name="bug887_interim.diff" size="202887" author="rhillegas" created="Wed, 15 Feb 2006 01:46:27 +0000"/>
                            <attachment id="12421895" name="derby-887-01-ag-noImplicitCasts.diff" size="27598" author="rhillegas" created="Mon, 12 Oct 2009 20:13:22 +0100"/>
                            <attachment id="12422251" name="derby-887-01-aj-noImplicitCasts.diff" size="28780" author="rhillegas" created="Thu, 15 Oct 2009 17:45:53 +0100"/>
                            <attachment id="12421899" name="releaseNote.html" size="1946" author="rhillegas" created="Mon, 12 Oct 2009 21:00:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310200" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Bug behavior facts</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10366"><![CDATA[Wrong query result]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Jan 2006 08:47:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0plb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37964</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310050" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Urgency</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10052"><![CDATA[Normal]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                    </customfields>
    </item>
</channel>
</rss>