<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:10:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-3834/DERBY-3834.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-3834] Convert derbynet/runtimeinfo to JUnit</title>
                <link>https://issues.apache.org/jira/browse/DERBY-3834</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description></description>
                <environment></environment>
        <key id="12402157">DERBY-3834</key>
            <summary>Convert derbynet/runtimeinfo to JUnit</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="espinha">Tiago R. Espinha</assignee>
                                    <reporter username="ebirkenes">Erlend Birkenes</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Aug 2008 21:42:08 +0100</created>
                <updated>Fri, 28 Jan 2011 00:48:51 +0000</updated>
                            <resolved>Fri, 28 Jan 2011 00:48:51 +0000</resolved>
                                    <version>10.5.1.1</version>
                                    <fixVersion>10.5.3.2</fixVersion>
                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12621793" author="ebirkenes" created="Tue, 12 Aug 2008 13:27:01 +0100"  >&lt;p&gt;Please review.&lt;/p&gt;

&lt;p&gt;Added the new test to suites.All and remove from derbyall and deleted old files.&lt;/p&gt;


&lt;p&gt;-Erlend&lt;/p&gt;</comment>
                            <comment id="12622736" author="myrna" created="Fri, 15 Aug 2008 00:20:56 +0100"  >&lt;p&gt;I ran the test, but the first time, it fails for me. &lt;br/&gt;
If I run it again without cleaning up the dir, it passes.&lt;br/&gt;
Maybe some of the details regarding sessions and statements are different when you first create a database...&lt;/p&gt;

&lt;p&gt;So maybe you can wrap the test in a singleUseDecorator and adjust the expected output to what it would be when there are no pre-existing databases.&lt;/p&gt;

&lt;p&gt;Other comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I&apos;d like  it better if you could avoid using ExecProcUtil.execCmdDumpResults...&lt;/li&gt;
	&lt;li&gt;There is a property, derby.tests.debug, which can be set if someone wants to debug a test. I suggest you remove the boolean &apos;print&apos; and instead, in the method &apos;print()&apos; use org.apache.derbyTesting.junit.println&apos; rather than System.out.println.  That way, no change of the code is needed to debug the test.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12723202" author="espinha" created="Tue, 23 Jun 2009 18:41:06 +0100"  >&lt;p&gt;I&apos;ll be taking over this issue as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4090&quot; title=&quot;Provide the ability to run tests concurrently on the same machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4090&quot;&gt;DERBY-4090&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12723794" author="espinha" created="Thu, 25 Jun 2009 00:18:46 +0100"  >&lt;p&gt;Attaching a patch to the issue.&lt;/p&gt;

&lt;p&gt;This patch has Myrna&apos;s remarks in consideration. It no longer uses the ExecProcUtil but execJavaCmd instead. It also uses the println() in BaseTestCase which will only print when the tests are being ran on verbose mode.&lt;/p&gt;

&lt;p&gt;This patch also fixes the issue where only the second run would pass. Since it is impossible to predict the order by which the prepared statements will appear under x_testRuntimeInfoLocale(), I worked around it by parsing just parts of the output.&lt;/p&gt;

&lt;p&gt;Also, the methods are invoked by a single fixture testRunTests(), since the order by which they are ran does matter and we can&apos;t rely on JUnit to run them in order.&lt;/p&gt;</comment>
                            <comment id="12724129" author="espinha" created="Thu, 25 Jun 2009 16:33:44 +0100"  >&lt;p&gt;Attaching a new patch that compiles without errors against JDK1.4.2.&lt;/p&gt;

&lt;p&gt;It also accounts for the customizable port part (&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4217&quot; title=&quot;Make the default port for the suites.All run configurable with a system property.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4217&quot;&gt;&lt;del&gt;DERBY-4217&lt;/del&gt;&lt;/a&gt;), which the previous patch didn&apos;t.&lt;/p&gt;</comment>
                            <comment id="12724412" author="espinha" created="Fri, 26 Jun 2009 08:32:18 +0100"  >&lt;p&gt;Ran suites.All and I got a 100% pass.&lt;/p&gt;</comment>
                            <comment id="12724513" author="kmarsden" created="Fri, 26 Jun 2009 14:18:26 +0100"  >&lt;p&gt;Thanks Tiago for reviving this test. I ran the test with IBM 1.6 and it passed and confirmed that it is skipped with weme.&lt;/p&gt;

&lt;p&gt;You should remove references to the old test in functionTests/suites/&lt;br/&gt;
DerbyNetClientRemote.exclude&lt;br/&gt;
DerbyNetClientUseprocess.exclude&lt;br/&gt;
DerbyNetRemote.exclude&lt;br/&gt;
DerbyNetUseprocess.exclude&lt;br/&gt;
derbynetmats.runall&lt;br/&gt;
j9derbynetmats.runall&lt;/p&gt;

&lt;p&gt;and run derbyall to make sure all references to the old test are removed.&lt;/p&gt;

&lt;p&gt;In the test I think it would be good to comment that a separate database was necessary to ensure consistent output above the call to singleUseDatabaseDecorator.&lt;/p&gt;

&lt;p&gt;I think x_testRuntimeInfo and x_testRuntimeInfoMethod  and related constants could be more descriptively named, like x_testRuntimeInfoWithActiveConn and x_testRuntimeInfoAfterConnClose.&lt;/p&gt;

&lt;p&gt;I am a bit confused by x_testRuntimeInfoLocale, even in the original test.  I would have expected it to test non-English output, but instead runs with:&lt;br/&gt;
	&quot;-Duser.language=err&quot;, &quot;-Duser.country=DE&quot;,&lt;br/&gt;
which makes it revert to English I guess.  I think it would be better if it tested the localization with user.language=de and then just check the output for some German string.&lt;/p&gt;</comment>
                            <comment id="12724682" author="espinha" created="Fri, 26 Jun 2009 20:58:57 +0100"  >&lt;p&gt;I have been discussing the locale bit with Kathey and we were able to draw some conclusions, but there&apos;s still a pending issue.&lt;/p&gt;

&lt;p&gt;The original test apparently did no verification at all on the locale front. Despite setting the user.country and user.language properties, the output it expects is actually in English, so it doesn&apos;t seem like it was expected for it to work properly.&lt;/p&gt;

&lt;p&gt;Still, we agreed it would be a nice addition to the test, having it check the localized output. The problem arises with the fact that the output of runtimeinfo is dependent on the locale of the server and not of the client (unlike ping, for example). So for this to work, that one single fixture has to shutdown the server and spawn another instance with the changed locale.&lt;/p&gt;

&lt;p&gt;Does anyone have ideas or comments on this?&lt;/p&gt;

&lt;p&gt;It is also noteworthy that the test seems to pick up the localization properties if I define them with -D on the command line.&lt;/p&gt;</comment>
                            <comment id="12725177" author="espinha" created="Mon, 29 Jun 2009 14:58:22 +0100"  >&lt;p&gt;Attaching a new patch file.&lt;/p&gt;

&lt;p&gt;This patch removes the test from the exclude and the runall files and it also addresses the locale issue. In the old test, it seems that the locale wasn&apos;t even being properly tested. In this patch however, in the x_testRuntimeInfoLocale() fixture I changed the locale to German, restarted the server and then the fixture is processed normally (accounting for German output). Just before the fixture ends, I reset the locale back to what it was originally and once more restart the server so that the last fixture is able to complete normally.&lt;/p&gt;

&lt;p&gt;There&apos;s one detail I&apos;d like to get some input on. I added a method to this test called waitForServerShutdown(), which, as the name suggests, holds on the execution until the server shuts down. This has the same purpose as NetworkServerTestSetup.waitForServerStart(); but in this case we also want to wait for it to shutdown. Would it be acceptable to create the waitForServerShutdown() method also in the NetworkServerTestSetup? It might be useful for other tests and it&apos;s pretty standard, it just waits for the server to shutdown. Plus, if other tests require it in the future, they won&apos;t have to re-implement it locally.&lt;/p&gt;

&lt;p&gt;Finally, I also added the comment on the singleUseDatabase usage, like Kathey suggested.&lt;/p&gt;</comment>
                            <comment id="12725264" author="kmarsden" created="Mon, 29 Jun 2009 18:26:51 +0100"  >&lt;p&gt;Hi Tiago,&lt;/p&gt;

&lt;p&gt;I am concerned that if this tests fails we will be left with a network server running or leave the tests set to the German locale, causing subsequent tests to fail.&lt;/p&gt;

&lt;p&gt;I think it would be better to make a second test &lt;br/&gt;
LocaleRuntimeInfoTest or some such and then use:&lt;br/&gt;
   public NetworkServerTestSetup&lt;br/&gt;
        (&lt;br/&gt;
         Test test,&lt;br/&gt;
         String[] systemProperties,&lt;br/&gt;
         String[] startupArgs,&lt;br/&gt;
         boolean serverShouldComeUp&lt;br/&gt;
        )&lt;/p&gt;

&lt;p&gt;to spawn the server with the correct locale by setting system properties.  It will make sure everything is shutdown and cleaned up regardless of whether the test fails.&lt;/p&gt;
</comment>
                            <comment id="12725277" author="espinha" created="Mon, 29 Jun 2009 18:42:42 +0100"  >&lt;p&gt;Hello Kathey,&lt;/p&gt;

&lt;p&gt;Well, considering I&apos;m manipulating the server that the test spawns automatically, it should never stay running. I&apos;m not spawning an independent server just to accommodate the locale testing; instead, I just stop the server that the test automatically starts, change the locale and start the server again.&lt;/p&gt;

&lt;p&gt;The odd case would be if this fixture fails, but a possible solution is to encapsulate this method in a try..catch statement. Since all the fixtures are actually invoked manually because the order in which they are ran matters, I can just catch the exception that this method may throw and set the locale back to normal.&lt;/p&gt;

&lt;p&gt;I&apos;m just laying this on the table because it seems to me a bit of overkill to create a whole new test with just one fixture that tests the locale.&lt;/p&gt;</comment>
                            <comment id="12725339" author="espinha" created="Mon, 29 Jun 2009 21:43:39 +0100"  >&lt;p&gt;I just noticed that we have a SysinfoLocaleTest that tests just the localized output of Sysinfo. Would it be a viable option to have a single LocaleTest where all these outputs are tested?&lt;/p&gt;</comment>
                            <comment id="12725344" author="kmarsden" created="Mon, 29 Jun 2009 21:57:46 +0100"  >&lt;p&gt;SysinfoLocaleTest  seems to be an embedded tests a and tests derby.ui.locale which is not relevant here.  Do you think it will adapt itself well to the network server runtimeinfo testing?&lt;/p&gt;

&lt;p&gt;I guess I am still leaning toward a locale specific runtimeinfo test. I suppose catching an exception and resetting the locale would work too, but seems a little messier.&lt;/p&gt;

</comment>
                            <comment id="12725851" author="espinha" created="Wed, 1 Jul 2009 00:49:47 +0100"  >&lt;p&gt;Attaching a new patch to this issue.&lt;/p&gt;

&lt;p&gt;After having discussed this with Kathey on IRC, we agreed on an alternative solution for this issue. Instead of separating the locale test from the actual RuntimeInfo test, I created a LocaleTestSetup decorator that allows the test to run with different localizations.&lt;/p&gt;

&lt;p&gt;The solution I found to manage the expected outputs was to use an HashMaps inside HashMaps. This way we&apos;re able to select the set of expected outputs for a certain locale easily, and then it is also easy to pick the correct output message within the results for that locale. It might not be the best solution performance-wise, but this way it is rather easy to add new locales to be tested, should we want to.&lt;/p&gt;

&lt;p&gt;Still, some input and alternative ideas are appreciated.&lt;/p&gt;</comment>
                            <comment id="12726162" author="espinha" created="Wed, 1 Jul 2009 19:10:07 +0100"  >&lt;p&gt;Forgot to add the Apache license header to the new file.&lt;/p&gt;

&lt;p&gt;I&apos;ll be running suites.All and derbyall with this patch tonight.&lt;/p&gt;</comment>
                            <comment id="12726241" author="espinha" created="Wed, 1 Jul 2009 22:57:27 +0100"  >&lt;p&gt;All the patches down to Erlend&apos;s had a cut &amp;amp; paste error on the policy file names. Fixed that. The tests will be ran with the fixed patch.&lt;/p&gt;</comment>
                            <comment id="12726461" author="espinha" created="Thu, 2 Jul 2009 13:44:17 +0100"  >&lt;p&gt;We want to hold this patch for now. My suites.All run crashed with some bug related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4217&quot; title=&quot;Make the default port for the suites.All run configurable with a system property.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4217&quot;&gt;&lt;del&gt;DERBY-4217&lt;/del&gt;&lt;/a&gt; - it seems that when using a basePort with 5 digits (i.e. higher than 9999), the SysinfoTest will crash. It might be unrelated with this issue in the end but I&apos;m still investigating why this is happening.&lt;/p&gt;</comment>
                            <comment id="12727125" author="espinha" created="Fri, 3 Jul 2009 21:32:06 +0100"  >&lt;p&gt;The said bug with the port is now fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4217&quot; title=&quot;Make the default port for the suites.All run configurable with a system property.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4217&quot;&gt;&lt;del&gt;DERBY-4217&lt;/del&gt;&lt;/a&gt;. Still, upon running suites.All I got:&lt;br/&gt;
---------&lt;del&gt;8&amp;lt;&lt;/del&gt;-----------------------&lt;br/&gt;
Time: 5,827.406&lt;br/&gt;
There was 1 failure:&lt;br/&gt;
1) org.apache.derbyTesting.functionTests.tests.derbynet.RuntimeInfoTestjunit.framework.AssertionFailedError: Timed out waiting for network server to start&lt;br/&gt;
	at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:200)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:20)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 11312,  Failures: 1,  Errors: 0&lt;br/&gt;
---------------------&lt;del&gt;8&amp;lt;&lt;/del&gt;---------------------------------&lt;/p&gt;

&lt;p&gt;It seems a rather innocent failure and after running the derbynet suite again twice the failure did not pop again. It needs to be said that the suites.All was ran simultaneously with derbyall. Still, I think we can chalk it up to delays in the server response due to the high load. Nonetheless, I will be running suites.All again, this time alone.&lt;/p&gt;

&lt;p&gt;Test runs permitting, the patch seems to be ready for commit.&lt;/p&gt;</comment>
                            <comment id="12727278" author="espinha" created="Sun, 5 Jul 2009 00:23:43 +0100"  >&lt;p&gt;I&apos;m still rather unsure about the status of this patch. Last night I got some failures once more - namely failures with beans, which seems to happen every now and then. The failures also had an error message in German, which might raise a red flag. The weird part is that I can consistently run the derbynet suite without any failures...&lt;/p&gt;

&lt;p&gt;I&apos;m running suites.All tonight once more to see how it pans out.&lt;/p&gt;</comment>
                            <comment id="12727300" author="espinha" created="Sun, 5 Jul 2009 09:03:44 +0100"  >&lt;p&gt;I got failures again:&lt;br/&gt;
-------------------&lt;del&gt;8&amp;lt;&lt;/del&gt;---------------&lt;br/&gt;
Time: 6,031.741&lt;br/&gt;
There were 2 failures:&lt;br/&gt;
1) org.apache.derbyTesting.functionTests.tests.derbynet.RuntimeInfoTestjunit.framework.AssertionFailedError: Timed out waiting for network server to start&lt;br/&gt;
	at org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(NetworkServerTestSetup.java:200)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:20)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:21)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:25)&lt;br/&gt;
2) testStressMulti(org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest)junit.framework.AssertionFailedError: Caused by: &lt;br/&gt;
java.sql.SQLNonTransientConnectionException: The DDM object 0x1232 is not supported.  The connection has been terminated.&lt;br/&gt;
	at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)&lt;br/&gt;
	at org.apache.derby.client.am.Connection.createStatement(Connection.java:368)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest$StressMultiRunnable.update(StressMultiTest.java:558)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest$StressMultiRunnable.run(StressMultiTest.java:402)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
Caused by: org.apache.derby.client.am.SqlException: The DDM object 0x1232 is not supported.  The connection has been terminated.&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.copyAsUnchainedSQLException(SqlException.java:505)&lt;br/&gt;
	at org.apache.derby.client.am.Sqlca.chainDeferredExceptionsToAgentOrAsConnectionWarnings(Sqlca.java:342)&lt;br/&gt;
	at org.apache.derby.client.am.Sqlca.getJDBCMessage(Sqlca.java:304)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getMessage(SqlException.java:402)&lt;br/&gt;
	at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)&lt;br/&gt;
	at org.apache.derby.client.am.Statement.executeUpdate(Statement.java:509)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest$StressMultiRunnable.update(StressMultiTest.java:560)&lt;br/&gt;
	... 2 more&lt;/p&gt;

&lt;p&gt;	at org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest.handleException(StressMultiTest.java:331)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest.access$200(StressMultiTest.java:70)&lt;br/&gt;
	at org.apache.derbyTesting.functionTests.tests.multi.StressMultiTest$StressMultiRunnable.run(StressMultiTest.java:425)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 11312,  Failures: 2,  Errors: 0&lt;br/&gt;
-----------------------&lt;del&gt;8&amp;lt;&lt;/del&gt;----------------------&lt;br/&gt;
I can&apos;t seem to find the reason for these though...&lt;/p&gt;</comment>
                            <comment id="12727911" author="kmarsden" created="Tue, 7 Jul 2009 05:43:21 +0100"  >&lt;p&gt;Hi Tiago I ran suites.All with your latest patch and got no failures on Windows XP with derby.tests.basePort=11123.  I will do a run on linux with the same setting and if I see no issues will go ahead and commit.&lt;/p&gt;
</comment>
                            <comment id="12727923" author="kmarsden" created="Tue, 7 Jul 2009 06:11:03 +0100"  >&lt;p&gt;On my linux machine with and without basePort set running the test on its own I am getting a Connection refused message to the console  in German and then a timeout  failure for the test.&lt;br/&gt;
It is at least consistent so I should be able to debug tomorrow. Could it be related to having two clientServerDecorator instances in a single test? &lt;/p&gt;
</comment>
                            <comment id="12727997" author="espinha" created="Tue, 7 Jul 2009 10:05:01 +0100"  >&lt;p&gt;Hello Kathey,&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if that is it. I would think that we have this same situation in other tests, no? They should be independent...&lt;/p&gt;

&lt;p&gt;I find it weird that it only happens under Linux... makes me think that there is some underlying difference on how the JVM is handling stuff around. Maybe it also has to do with the default locale... or with file permissions somehow. I will have to look at it later today.&lt;/p&gt;</comment>
                            <comment id="12728205" author="kmarsden" created="Tue, 7 Jul 2009 18:32:49 +0100"  >&lt;p&gt;I think the problem is related to the vetPing() method of NetworkServerTestSetup looking for an English string?&lt;br/&gt;
If I change vetPing to just look for   &quot;DRDA_NoIO.S:&quot; &lt;br/&gt;
then it seems to run ok.&lt;/p&gt;</comment>
                            <comment id="12728347" author="espinha" created="Tue, 7 Jul 2009 21:25:33 +0100"  >&lt;p&gt;You are right Kathey, that seems to be the offending method. I&apos;m submitting a patch that looks just for the initial part of the string, which should be common cross-locales.&lt;/p&gt;

&lt;p&gt;Running regressions as well.&lt;/p&gt;</comment>
                            <comment id="12728413" author="espinha" created="Wed, 8 Jul 2009 00:14:30 +0100"  >&lt;p&gt;The suites.All suite ran with no failures. I think the patch is ready for commit.&lt;/p&gt;</comment>
                            <comment id="12728428" author="kmarsden" created="Wed, 8 Jul 2009 00:55:11 +0100"  >&lt;p&gt;Committed revision 792001&lt;/p&gt;</comment>
                            <comment id="12728799" author="kmarsden" created="Wed, 8 Jul 2009 18:06:28 +0100"  >&lt;p&gt;It looks like this introduced a javadoc warning:&lt;br/&gt;
	  Failed with following errors. Check details in docs.txt&lt;br/&gt;
		  &lt;span class=&quot;error&quot;&gt;&amp;#91;javadoc&amp;#93;&lt;/span&gt; C:\nightlies\main\src\opensource\java\testing\org\apache\derbyTesting\functionTests\tests\derbynet\RuntimeInfoTest.java:78: warning - @return tag has no arguments.&lt;br/&gt;
		  &lt;span class=&quot;error&quot;&gt;&amp;#91;javadoc&amp;#93;&lt;/span&gt; 1 warning&lt;br/&gt;
	Build: OK&lt;/p&gt;

</comment>
                            <comment id="12728814" author="espinha" created="Wed, 8 Jul 2009 18:38:17 +0100"  >&lt;p&gt;Attaching a small patch to fix the Javadoc failure.&lt;/p&gt;</comment>
                            <comment id="12730527" author="espinha" created="Mon, 13 Jul 2009 22:31:31 +0100"  >&lt;p&gt;The patches were committed and the regressions are running fine. Closing the issue.&lt;/p&gt;</comment>
                            <comment id="12987855" author="myrna" created="Fri, 28 Jan 2011 00:38:10 +0000"  >&lt;p&gt;reopen to record that I&apos;m backporting this to 10.5&lt;/p&gt;</comment>
                            <comment id="12987863" author="myrna" created="Fri, 28 Jan 2011 00:48:51 +0000"  >&lt;p&gt;Committed the backport, including 1 revision for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4307&quot; title=&quot;testRunTests in RuntimeinfoTest fails periodically with Assertion failure checking output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4307&quot;&gt;&lt;del&gt;DERBY-4307&lt;/del&gt;&lt;/a&gt;, with revision 1064388.&lt;br/&gt;
I had to make one modification; for some reason, the calls to TestConfiguration.getCurrent().getPort() resulted in -1 when the strings static global assignments. I moved them as final strings into the methods where they were used, and that works.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12424188">DERBY-4202</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12416700">DERBY-4090</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12402081">DERBY-3829</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12412888" name="DERBY-3834-1.patch" size="666" author="espinha" created="Wed, 8 Jul 2009 18:38:17 +0100"/>
                            <attachment id="12412784" name="DERBY-3834.patch" size="51824" author="espinha" created="Tue, 7 Jul 2009 21:25:32 +0100"/>
                            <attachment id="12412327" name="DERBY-3834.patch" size="51277" author="espinha" created="Wed, 1 Jul 2009 22:57:27 +0100"/>
                            <attachment id="12412294" name="DERBY-3834.patch" size="51273" author="espinha" created="Wed, 1 Jul 2009 19:10:07 +0100"/>
                            <attachment id="12412216" name="DERBY-3834.patch" size="50361" author="espinha" created="Wed, 1 Jul 2009 00:49:47 +0100"/>
                            <attachment id="12412072" name="DERBY-3834.patch" size="47506" author="espinha" created="Mon, 29 Jun 2009 14:58:22 +0100"/>
                            <attachment id="12411829" name="DERBY-3834.patch" size="41532" author="espinha" created="Thu, 25 Jun 2009 16:33:44 +0100"/>
                            <attachment id="12411727" name="DERBY-3834.patch" size="41766" author="espinha" created="Thu, 25 Jun 2009 00:18:46 +0100"/>
                            <attachment id="12411728" name="DERBY-3834.stat" size="658" author="espinha" created="Thu, 25 Jun 2009 00:18:46 +0100"/>
                            <attachment id="12388046" name="Derby-3834_1.diff" size="43077" author="ebirkenes" created="Tue, 12 Aug 2008 13:27:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 14 Aug 2008 23:20:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31020</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0jd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>