<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:16:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-4607/DERBY-4607.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-4607] HeapScan test commits wrong connection</title>
                <link>https://issues.apache.org/jira/browse/DERBY-4607</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;The SELECT query in HeapScan is initialized like this:&lt;/p&gt;

&lt;p&gt;        select = openDefaultConnection().prepareStatement(&quot;SELECT * FROM &quot;+tableName);&lt;/p&gt;

&lt;p&gt;The test cases commit the transaction like this:&lt;/p&gt;

&lt;p&gt;        getConnection().commit();&lt;/p&gt;

&lt;p&gt;openDefaultConnection() opens and returns a new connection to the default database, whereas getConnection() returns a cached default connection, so the two connections are not the same, and the transaction that&apos;s being committed is not the executing transaction.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461225">DERBY-4607</key>
            <summary>HeapScan test commits wrong connection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knutanders">Knut Anders Hatlen</assignee>
                                    <reporter username="knutanders">Knut Anders Hatlen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Apr 2010 09:39:02 +0100</created>
                <updated>Fri, 30 Apr 2010 12:45:16 +0100</updated>
                            <resolved>Tue, 6 Apr 2010 19:18:16 +0100</resolved>
                                    <version>10.6.1.0</version>
                                    <fixVersion>10.6.1.0</fixVersion>
                                    <component>Test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12853831" author="knutanders" created="Tue, 6 Apr 2010 10:59:32 +0100"  >&lt;p&gt;I plan to post a fix for this issue, but I&apos;ll wait until the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-4608&quot; title=&quot;Unnecessary conversion of binary values to strings in SQLBinary.compare()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-4608&quot;&gt;&lt;del&gt;DERBY-4608&lt;/del&gt;&lt;/a&gt; has been committed in order to prevent conflicts (that fix also touches the HeapScan test).&lt;/p&gt;</comment>
                            <comment id="12854094" author="knutanders" created="Tue, 6 Apr 2010 19:10:52 +0100"  >&lt;p&gt;Attached is a patch that makes setUp() initialize the select statement with the helper method BaseJDBCTestCase.prepareStatement() in HeapScan and its sub-class CoveredIdxScan. The helper method uses the getConnection() method to obtain the connection, so now the calls to getConnection().commit() commit on the correct connection. Using the helper method also removes the need to close the statement explicitly in tearDown(). Also, getConnection().commit() was simplified to commit() (helper in BaseJDBCTestCase) which does the same thing.&lt;/p&gt;

&lt;p&gt;The patch doesn&apos;t appear change the results of the tests in any noticeable way. This is as expected, since there shouldn&apos;t be much work required on commit for read-only transactions with read committed isolation level (no log records to flush, and all locks should have been released prior to commit).&lt;/p&gt;</comment>
                            <comment id="12854101" author="knutanders" created="Tue, 6 Apr 2010 19:18:16 +0100"  >&lt;p&gt;Committed revision 931255.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12440929" name="commit.diff" size="2342" author="knutanders" created="Tue, 6 Apr 2010 19:10:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0qkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38124</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>