<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:44:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-339/DERBY-339.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-339] Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be deferred to the server.</title>
                <link>https://issues.apache.org/jira/browse/DERBY-339</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be defered to the server.&lt;/p&gt;


&lt;p&gt;The client tries to track XA state to make decisions based on current XA state.  Most of this state handling was removed with DERBY246, but it still was not being handled properly.  This is evidenced by multiple failures in xaSimplePostive that now that it gets past &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;This fix will have the client track only branch association as outlined in the XA+ specification. Table 6-2, State Table for Transaction Branch Association.  The client will track only&lt;/p&gt;

&lt;p&gt;XA_TO_NOT_ASSOCIATED&lt;br/&gt;
XA_T1_ASSOCIATED&lt;/p&gt;

&lt;p&gt;Association Suspended (T2) will map to XA_TO_NOT_ASSOCIATED for the client&apos;s pupurposes.&lt;/p&gt;

&lt;p&gt;The client commit in autocommit mode only for &lt;br/&gt;
XA_TO_NOT_ASSOCIATED.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12311101">DERBY-339</key>
            <summary>Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be deferred to the server.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kmarsden">Kathey Marsden</assignee>
                                    <reporter username="kmarsden">Kathey Marsden</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jun 2005 02:21:44 +0100</created>
                <updated>Thu, 26 Jan 2006 02:01:48 +0000</updated>
                            <resolved>Thu, 9 Jun 2005 16:19:12 +0100</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.1.1.0</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12312770" author="kmarsden" created="Tue, 7 Jun 2005 02:39:08 +0100"  >&lt;p&gt;Additional cleanup of the xaState is required and &lt;br/&gt;
has been filed as &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-339&quot; title=&quot;Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be deferred to the server.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-339&quot;&gt;&lt;del&gt;DERBY-339&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12312783" author="kmarsden" created="Tue, 7 Jun 2005 05:06:33 +0100"  >&lt;p&gt;The patch for this issue contains some non active changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-341&quot; title=&quot;Client should disallow XAConnection getConnection() when a global transaction has been started and a logical connection has already been obtained&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-341&quot;&gt;DERBY-341&lt;/a&gt; in ClientXAConnection.java. Those changes can be ignored for the sake of reviewing this patch.&lt;/p&gt;</comment>
                            <comment id="12312792" author="kmarsden" created="Tue, 7 Jun 2005 07:26:56 +0100"  >&lt;p&gt;Note:&lt;br/&gt;
The XA+ specification can be found at:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.opengroup.org/bookstore/catalog/s423.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.opengroup.org/bookstore/catalog/s423.htm&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12313071" author="kmarsden" created="Thu, 9 Jun 2005 03:19:33 +0100"  >&lt;p&gt;updated patch. Most of the work for this issue was done under &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
These two patches resolve issues running  the xaSimplePositive test under client.&lt;br/&gt;
Even with these changes there is still one failure in the last case of xaSimplePositive that needs to be addressed where the holdability is being set incorrectly&lt;br/&gt;
The test will be enabled for client when that is resolved.&lt;/p&gt;</comment>
                            <comment id="12313128" author="kmarsden" created="Thu, 9 Jun 2005 15:52:16 +0100"  >&lt;p&gt;Committed this patch after addressing Mamta&apos;s concerns with the first patch.  This change along with the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt; are still under review in commit then review mode.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-246&quot; title=&quot;XA end() fails with Connection is closed error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-246&quot;&gt;&lt;del&gt;DERBY-246&lt;/del&gt;&lt;/a&gt; - Initial patch that removed most of the XA state  leaving XA_LOCAL and XA_GLOBAL state but still had some incorrect state handling in commit and rollback.&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewcvs.cgi?view=rev&amp;amp;rev=179867&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi?view=rev&amp;amp;rev=179867&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-339&quot; title=&quot;Network client XA should only keep XA state for transaction branch association, to track whether to send commit in autocommit mode.  All other state and state related decisions should be deferred to the server.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-339&quot;&gt;&lt;del&gt;DERBY-339&lt;/del&gt;&lt;/a&gt; - Change XA_LOCAL and XA_GLOBAL to have a better mapping to the XA+ specification.&lt;br/&gt;
Fix setting of state for commit/rollback/end and exceptions.&lt;br/&gt;
XA_TO_NOT_ASSOCIATED &lt;br/&gt;
XA_T1_ASSOCIATED &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewcvs.cgi?view=rev&amp;amp;rev=189710&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi?view=rev&amp;amp;rev=189710&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Sending        java\client\org\apache\derby\client\am\Connection.java&lt;br/&gt;
Sending        java\client\org\apache\derby\client\am\Statement.java&lt;br/&gt;
Sending        java\client\org\apache\derby\client\net\NetConnection.java&lt;br/&gt;
Sending        java\client\org\apache\derby\client\net\NetXAConnection.java&lt;br/&gt;
Sending        java\client\org\apache\derby\client\net\NetXAResource.java&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\master\xaSimpleNegative.out&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\copyfiles.ant&lt;br/&gt;
Sending        java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\xaSimpleNegative.sql&lt;br/&gt;
Adding         java\testing\org\apache\derbyTesting\functionTests\tests\jdbcapi\xaSimplePositive_derby.properties&lt;br/&gt;
Transmitting file data .........&lt;br/&gt;
Committed revision 189710.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="32119">DERBY-246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12310605" name="derby339.diff" size="15515" author="kmarsden" created="Thu, 9 Jun 2005 03:19:33 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy179r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40828</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>