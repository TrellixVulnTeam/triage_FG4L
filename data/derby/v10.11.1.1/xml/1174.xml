<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:09:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-1174/DERBY-1174.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-1174] NullPointerException in network server with LDAP authentication</title>
                <link>https://issues.apache.org/jira/browse/DERBY-1174</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;While trying to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/DERBY-1000&quot; title=&quot;For LDAP authentication: derby.authentication.server should support ldaps:// as part of the server url.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DERBY-1000&quot;&gt;&lt;del&gt;DERBY-1000&lt;/del&gt;&lt;/a&gt; I tried to set up Derby&apos;s network server to use LDAP authentication, but I ran into something that looks like a bug, but could just as well be my own configuration mistake. I would appreciate any help in figuring this out. =)&lt;/p&gt;

&lt;p&gt;The problem is a NullPointerException in the Network Server when it tries to initialize the LDAP authentication service. The attached derby.log shows the exception and its stacktrace. The attached derby.properties is what I put in the derby home directory.&lt;/p&gt;

&lt;p&gt;I&apos;m seeing this problem in the trunk as well as my own build of the 10.1 branch and the 10.1.2.1 release build available from the Derby web site. ( &lt;a href=&quot;http://db.apache.org/derby/releases/release-10.1.2.1.cgi&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://db.apache.org/derby/releases/release-10.1.2.1.cgi&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;The problem is cause by the setInitDirContextEnv method in JNDIAuthenticationSchemeBase receiving a null dbProps argument, which it obviously doesn&apos;t expect. Adding a check for a null dbProps argument and returning immediately after creating the initDirContextEnv object fixes the NullPointerException and makes LDAP authentication work for me. This is a reasonable enough robustness fix and shouldn&apos;t have any negative impact, but if the source of the problem is that JNDIAuthenticationSchemeBase should never receive that null pointer in the first place, more patching is needed. I&apos;m not sure about this, so I&apos;m leaving it up to the experts to decide this. =)&lt;/p&gt;</description>
                <environment>Linux x86 (Fedora Core 4), 1.4.2_09 Sun JVM</environment>
        <key id="12330975">DERBY-1174</key>
            <summary>NullPointerException in network server with LDAP authentication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andersmo">Anders Morken</assignee>
                                    <reporter username="andersmo">Anders Morken</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Apr 2006 06:23:05 +0100</created>
                <updated>Mon, 29 Jun 2009 14:13:26 +0100</updated>
                            <resolved>Thu, 27 Apr 2006 13:19:47 +0100</resolved>
                                    <version>10.1.2.1</version>
                    <version>10.2.1.6</version>
                                    <fixVersion>10.1.3.1</fixVersion>
                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12372795" author="andersmo" created="Sun, 2 Apr 2006 06:25:34 +0100"  >&lt;p&gt;Log of network server failing to initialize LDAP authentication&lt;/p&gt;</comment>
                            <comment id="12372796" author="andersmo" created="Sun, 2 Apr 2006 06:29:20 +0100"  >&lt;p&gt;Property file configuring Derby for LDAP authentication&lt;/p&gt;</comment>
                            <comment id="12372797" author="andersmo" created="Sun, 2 Apr 2006 06:32:05 +0100"  >&lt;p&gt;This oneliner patch fixes the NullPointerException, but whether it is the right fix or not is not known. I haven&apos;t run derbyall yet either, so caveat emptor.&lt;/p&gt;</comment>
                            <comment id="12372829" author="andersmo" created="Sun, 2 Apr 2006 21:29:04 +0100"  >&lt;p&gt;derbyall ran fine with a few exceptions: The sysinfo and sysinfo_withproperties tests failed, probably due to my locale settings. lang/forupdate.sql failed with the same error as in Ole Solberg&apos;s tinderbox testing of 390705. The first run of  CompatibilityTest in derbynetclientmats failed with authentication errors, possibly because I had forgot a LDAP-authenticating network server already running in the background. I did not see the failure when I ran the derbynetclientmats suite separately without my own network server running.&lt;/p&gt;</comment>
                            <comment id="12373979" author="bernt" created="Tue, 11 Apr 2006 17:14:14 +0100"  >&lt;p&gt;Fix seems ok to me. &lt;br/&gt;
Some nitpicking: I would prefer an if (dbProps != null) &lt;/p&gt;
{....}
&lt;p&gt; around the for-loop instead of a conditional return in the middle of the method body....  and an enlightening comment would also be appreciated.&lt;/p&gt;</comment>
                            <comment id="12375081" author="andersmo" created="Wed, 19 Apr 2006 17:28:32 +0100"  >&lt;p&gt;Agreed. My quickfix &quot;return if it&apos;s null&quot; isn&apos;t very pretty, but it&lt;br/&gt;
worked for me when I played around in the debugger. But yes, I see that&lt;br/&gt;
it could surprise someone later if code unrelated to dbProps was added&lt;br/&gt;
below the conditional return. Thanks. =)&lt;/p&gt;

&lt;p&gt;An enlightening comment. Hm. I&apos;m still not sure if I fixed the symptom&lt;br/&gt;
or the the problem there. Is a null dbProps a normal situation when&lt;br/&gt;
Derby is started with &quot;create=true&quot; in the jdbc connect string? Will it&lt;br/&gt;
be null if you connect to an already created database without any&lt;br/&gt;
database properties set?&lt;/p&gt;</comment>
                            <comment id="12375189" author="andersmo" created="Thu, 20 Apr 2006 03:24:21 +0100"  >&lt;p&gt;OK, here&apos;s a new attempt at fixing the NullPointerException. =)&lt;br/&gt;
After reading some more code and discovering the comment in org.apache.derby.iapi.services.monitor.ModuleControl.boot(), it seems that the properties parameter could very well be null, so I&apos;m less confused now. =)&lt;/p&gt;</comment>
                            <comment id="12375282" author="bernt" created="Thu, 20 Apr 2006 15:52:26 +0100"  >&lt;p&gt;Committed revision 395525.&lt;/p&gt;</comment>
                            <comment id="12376529" author="andersmo" created="Thu, 27 Apr 2006 03:18:46 +0100"  >&lt;p&gt;Maybe this could be fixed in 10.1.3 as well.&lt;/p&gt;</comment>
                            <comment id="12376638" author="fuzzylogic" created="Thu, 27 Apr 2006 13:19:47 +0100"  >&lt;p&gt;Merged 395525 to 10.1 with revision 397402.&lt;/p&gt;</comment>
                            <comment id="12418712" author="andersmo" created="Sat, 1 Jul 2006 05:35:58 +0100"  >&lt;p&gt;Thanks for the help, Bernt, I&apos;m closing this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12325572" name="DERBY-1174.patch" size="1155" author="andersmo" created="Thu, 20 Apr 2006 03:24:21 +0100"/>
                            <attachment id="12324842" name="DERBY-1174.patch" size="608" author="andersmo" created="Sun, 2 Apr 2006 06:32:05 +0100"/>
                            <attachment id="12324840" name="derby.log" size="6494" author="andersmo" created="Sun, 2 Apr 2006 06:25:31 +0100"/>
                            <attachment id="12324841" name="derby.properties" size="232" author="andersmo" created="Sun, 2 Apr 2006 06:29:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Apr 2006 16:14:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy0ws7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>