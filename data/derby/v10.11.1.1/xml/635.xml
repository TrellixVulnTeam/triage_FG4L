<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 03:25:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/DERBY-635/DERBY-635.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[DERBY-635] Client socket connection doesn&apos;t report real socket exception</title>
                <link>https://issues.apache.org/jira/browse/DERBY-635</link>
                <project id="10594" key="DERBY">Derby</project>
                    <description>&lt;p&gt;When opening a connection with a network url: jdbc:derby://localhost:4000/data&lt;br/&gt;
The netagent catchs the PrivilegedActionException but doesn&apos;t report the checked exception in it.&lt;br/&gt;
Changing these lines&lt;br/&gt;
        try &lt;/p&gt;
{
            socket_ = (java.net.Socket) java.security.AccessController.doPrivileged(new OpenSocketAction(server, port));
        } catch (java.security.PrivilegedActionException e) {
            throw new DisconnectException(this,
                    e.getClass().getName() + &quot; : Error opening socket to server &quot; + server + &quot; on port &quot; + port + &quot; with message : &quot; + e.getMessage());
        }&lt;br/&gt;
To This returns the check exception information:&lt;br/&gt;
        try {            socket_ = (java.net.Socket) java.security.AccessController.doPrivileged(new OpenSocketAction(server, port));        }
&lt;p&gt; catch (java.security.PrivilegedActionException e) &lt;/p&gt;
{
            throw new DisconnectException(this,
                    e.getException().getClass().getName() + &quot; : Error opening socket to server &quot; + server + &quot; on port &quot; + port + &quot; with message : &quot; + e.getException().getMessage());
        }


&lt;p&gt;It currently reports messages like this:&lt;br/&gt;
Caused by: java.sql.SQLException: org.apache.derby.client.am.SqlException: java.security.PrivilegedActionException : Error opening socket to server localhost on port 1527 with message : null&lt;/p&gt;

&lt;p&gt;With this fix it reports:&lt;br/&gt;
org.apache.derby.client.am.DisconnectException: java.net.ConnectException : Error opening socket to server localhost on port 1527 with message : Connection refused: connect&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12318183">DERBY-635</key>
            <summary>Client socket connection doesn&apos;t report real socket exception</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bandaram">Satheesh Bandaram</assignee>
                                    <reporter username="jcl">John C. Landers</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Oct 2005 06:48:28 +0100</created>
                <updated>Sat, 11 Feb 2006 03:10:36 +0000</updated>
                            <resolved>Sat, 11 Feb 2006 03:10:27 +0000</resolved>
                                    <version>10.1.1.0</version>
                                    <fixVersion>10.2.1.6</fixVersion>
                                    <component>Network Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12332707" author="jcl" created="Fri, 21 Oct 2005 23:53:20 +0100"  >&lt;p&gt;Forgot to mention this is in org.apache.derby.client.net.NetAgent.java&lt;/p&gt;</comment>
                            <comment id="12332709" author="kmarsden" created="Sat, 22 Oct 2005 00:11:32 +0100"  >&lt;p&gt;Could you submit your change as a patch?&lt;/p&gt;

</comment>
                            <comment id="12365937" author="bandaram" created="Sat, 11 Feb 2006 03:10:03 +0000"  >&lt;p&gt;Submitted this simple change (from e.getMessage() to e.getException().getMessage()) to trunk. (10.2) Please submit patches as attachments, instead of posting them in the description. This would allow contributors to grant licence to Apache, if they choose to.&lt;/p&gt;

&lt;p&gt;Sending        java\client\org\apache\derby\client\net\NetAgent.java&lt;br/&gt;
Transmitting file data .&lt;br/&gt;
Committed revision 376777.&lt;/p&gt;</comment>
                            <comment id="12365938" author="bandaram" created="Sat, 11 Feb 2006 03:10:27 +0000"  >&lt;p&gt;Fix merged into trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Oct 2005 23:11:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy176n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            </customfields>
    </item>
</channel>
</rss>