When converted to JUnit, the test originally wrapped connections used to create/restore databases from a backup image in doPrivileged-calls. This was done to allow the backup images to be read by Derby. It should not be necessary, as the Derby code itself should use doPrivileged-calls in the appropriate places.