I'm branching out this issue into server and client changes. Since the changes are incremental and small, DERBY-728 would soon become confusing if it had to bear the patches for both server and client.

For future reference, some patches have actually been applied in DERBY-728. These *ARE* also required for the server implementation.