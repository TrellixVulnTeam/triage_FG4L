Short-circuit logic in optimizer appears to be incorrect...