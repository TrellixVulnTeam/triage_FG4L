<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:51:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-45/ZOOKEEPER-45.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-45] Restructure the SVN repository after initial import</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-45</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;SVN and the ant build have to be updated after the initial import from SourceForge (see &lt;a href=&quot;https://issues.apache.org/jira/browse/INFRA-1644&quot; title=&quot;Please load SVN dump file into ZooKeeper SVN repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;INFRA-1644&quot;&gt;&lt;del&gt;INFRA-1644&lt;/del&gt;&lt;/a&gt;) in order to get us aligned with Apache release process/collateral and some general cleanup of the repository. Please review/comment on the following:&lt;/p&gt;

&lt;p&gt;I intend to follow these steps:&lt;br/&gt;
1) collapse svn hadoop/zookeeper/trunk/zookeeper/... down to hadoop/zookeeper/trunk/... (remove unnecessary zk dir  under trunk)&lt;/p&gt;

&lt;p&gt;2) change the java package prefix from com.yahoo to org.apache&lt;br/&gt;
3) update the license headers in all  source files&lt;br/&gt;
4) replace LICENSE file in root dir with Apache LICENSE file&lt;br/&gt;
5) add attribution NOTICE file to root dir&lt;br/&gt;
6) update the README file appropriately&lt;/p&gt;

&lt;p&gt;7) create a new &quot;src&quot; directory in the zk root&lt;br/&gt;
8) move root &quot;c&quot; directory into src&lt;br/&gt;
9) move root &quot;java&quot; directory into src&lt;br/&gt;
10) create root &quot;docs&quot; directory&lt;br/&gt;
11) create src/docs directory&lt;br/&gt;
12) rename src/java/src to src/java/main&lt;br/&gt;
13) move root &quot;test&quot; directory to src/java/test&lt;/p&gt;

&lt;p&gt;14) build.xml will be updated appropriately for all the moves. it will also be updated with apache specific targets similar to what exists in hadoop (such as building the forrest documentation).&lt;/p&gt;

&lt;p&gt;steps 10&amp;amp;11 are required for zk documentation storage. src/docs is the location of all documentation in &quot;forrest xml&quot; format - the documentation source/originals (what you edit when you change the docs).  the ant script is setup to build docs (forrest) into the root docs directory. these files are also committed to svn (both docs and src/docs). later, during a release process, the files in the root docs directory are checked out onto the system hosting the apache web site and pushed to the mirrors.&lt;/p&gt;

&lt;p&gt;I&apos;ll submit patches for any changes/additions of files. However I suspect that the directory move operations in SVN will not have an accompanying patch - this &quot;script&quot; is the documentation of what will be changed (comments added for any deviation).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398211">ZOOKEEPER-45</key>
            <summary>Restructure the SVN repository after initial import</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jun 2008 07:18:17 +0100</created>
                <updated>Sun, 26 Oct 2008 01:10:38 +0000</updated>
                            <resolved>Tue, 8 Jul 2008 18:08:01 +0100</resolved>
                                                    <fixVersion>3.0.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12604996" author="mahadev" created="Fri, 13 Jun 2008 23:38:17 +0100"  >&lt;p&gt;do we want to create a zookeeper/site like in hadoop where the web pages are stored?&lt;/p&gt;</comment>
                            <comment id="12604997" author="cutting" created="Fri, 13 Jun 2008 23:44:13 +0100"  >&lt;p&gt;&amp;gt; do we want to create a zookeeper/site like in hadoop where the web pages are stored? &lt;/p&gt;

&lt;p&gt;Yes.  We can use the HBase site as a starting point.&lt;/p&gt;</comment>
                            <comment id="12604999" author="mahadev" created="Fri, 13 Jun 2008 23:53:29 +0100"  >&lt;p&gt;welcome to the world of zookeeper Doug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="12605015" author="phunt" created="Sat, 14 Jun 2008 01:25:45 +0100"  >&lt;p&gt;Yes, we will definitely have this directory. If you look on the svn site you&apos;ll see that the empty &quot;site&quot; already exists:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/zookeeper/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/zookeeper/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I didn&apos;t include setting up &quot;site&quot; in this jira issue as I had planned &quot;site&quot; as a step after setting up the docs src/docs directories under zookeeper/trunk (and will enter separate jira for that).&lt;/p&gt;

&lt;p&gt;See hadoop&apos;s howtorelease wiki page for comprehensive detail on how things get published to the http servers for hadoop:&lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/hadoop/HowToRelease&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/HowToRelease&lt;/a&gt;&lt;br/&gt;
(hbase uses the same process &amp;#8211; see their howtorelease page)&lt;/p&gt;

&lt;p&gt;As to using hbase as a starting point it sounds like a good idea but I need to review the hbase/hadoop &quot;site&quot; before making any decisions (as I said I&apos;ll enter another jira for that once I make some progress on this one)&lt;/p&gt;</comment>
                            <comment id="12607761" author="phunt" created="Tue, 24 Jun 2008 22:06:39 +0100"  >&lt;p&gt;I&apos;ve applied the changes specified in this jira (except for docs which I will do separately)&lt;/p&gt;

&lt;p&gt;Please review the repository and let me know if you see issues. I verified that the code can be built (ant/eclipse) and that the tests all pass. If you see anything else let me know - Otw I&apos;ll declare SVN open to all committers and close the JIRA.&lt;/p&gt;

&lt;p&gt;PS - be sure to follow the instructions here:&lt;br/&gt;
&lt;a href=&quot;http://www.apache.org/dev/version-control.html#https-svn&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dev/version-control.html#https-svn&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In particular update your subversion config with&lt;br/&gt;
&lt;a href=&quot;http://www.apache.org/dev/svn-eol-style.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dev/svn-eol-style.txt&lt;/a&gt;&lt;br/&gt;
I cleaned up eol as part of the migration from sf =&amp;gt; apache but it would be nice going fwd if we didn&apos;t have to worry about this. &lt;/p&gt;</comment>
                            <comment id="12607811" author="mahadev" created="Wed, 25 Jun 2008 01:07:39 +0100"  >&lt;p&gt;1) we have Chagelog in java and in c. This is confusing. We should just have a top level Changelog unless we want to make two speerate releases for c client, java client and one for servers. Its better to release zookeeper as one package since if we have more than c/java bindings then it would be problematic making releases for all these clients.&lt;br/&gt;
not sure.. comments?&lt;/p&gt;</comment>
                            <comment id="12607814" author="mahadev" created="Wed, 25 Jun 2008 01:14:39 +0100"  >&lt;p&gt;2) we anyway need a top level changelog for other stuff that is not either c or java. &lt;br/&gt;
3) workspace/zookeeper_apache/src/java/main&lt;/p&gt;

&lt;p&gt;can we use some other name other than main.. &lt;br/&gt;
i like core? &lt;/p&gt;

</comment>
                            <comment id="12608180" author="phunt" created="Wed, 25 Jun 2008 21:47:41 +0100"  >&lt;p&gt;patch to fix log4j integration with tests.&lt;/p&gt;</comment>
                            <comment id="12608199" author="mahadev" created="Wed, 25 Jun 2008 22:22:27 +0100"  >&lt;p&gt;+1 for the patch. &lt;/p&gt;</comment>
                            <comment id="12608215" author="phunt" created="Wed, 25 Jun 2008 23:04:58 +0100"  >&lt;p&gt;Re Mahadev comments 6/24: My comments:&lt;/p&gt;

&lt;p&gt;1&amp;amp;2) Yes, we should move the changelog files from c/java up to the toplevel. At the same time change the name to &quot;CHANGES.txt&quot;. See hadoop for their process: &lt;a href=&quot;http://wiki.apache.org/hadoop/HowToRelease&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/HowToRelease&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3) no, I don&apos;t think we should change the name from src/java/main to src/java/core - zookeeper has a sibling sub-project in hadoop called &quot;core&quot; and such a change on our part might be confusing. Using &quot;main&quot; &amp;amp; &quot;test&quot; is fairly std, also adopted by Maven.&lt;/p&gt;</comment>
                            <comment id="12608483" author="phunt" created="Thu, 26 Jun 2008 17:28:06 +0100"  >&lt;p&gt;add timestamp to log4j console output in order to help with test debugging on hudson.&lt;/p&gt;</comment>
                            <comment id="12608495" author="fpj" created="Thu, 26 Jun 2008 17:49:54 +0100"  >&lt;p&gt;+1, looks good to me&lt;/p&gt;</comment>
                            <comment id="12608578" author="akornev" created="Thu, 26 Jun 2008 21:54:24 +0100"  >&lt;p&gt;To Mahadev, Pat and other hadoop admirers: I&apos;d like to keep the changelogs for java, c and &quot;other stuff that is not either c or java&quot; in their respective subdirectories. The fact that all those components released in a single package should have no bearing on the location of a source file within the source hierarchy. Or, put in a different way, no one would seriously consider a proposal to move all of the c and java source files under the same directory just because they end up in the same release tar file. &lt;/p&gt;

&lt;p&gt;Having said that, I support the idea of having a top level &quot;CHANGES.txt&quot; for changes that are not specific to any component (for example, addition of a new contributed component, creation of a new top level source dir, modification of sample config file, etc).&lt;/p&gt;</comment>
                            <comment id="12608579" author="akornev" created="Thu, 26 Jun 2008 22:00:56 +0100"  >&lt;p&gt;BTW, this config here &lt;a href=&quot;http://www.apache.org/dev/svn-eol-style.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/dev/svn-eol-style.txt&lt;/a&gt; is missing an entry for *.cc which is a valid C++ extention.&lt;br/&gt;
*.cc = svn:eol-style=native&lt;/p&gt;</comment>
                            <comment id="12608598" author="phunt" created="Thu, 26 Jun 2008 23:06:16 +0100"  >&lt;p&gt;Andrew, re your comment on changelog - that sounds reasonable but Apache requires that we provide a change log with each release of the project that details every feature added and bug resolved since the last release.&lt;/p&gt;

&lt;p&gt;Looking at hadoop core I see that they have a large collection of src (incl c++) and contrib packages, but a single changes.txt at the toplevel.&lt;br/&gt;
    &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/core/trunk/CHANGES.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/core/trunk/CHANGES.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;More background: &lt;a href=&quot;http://wiki.apache.org/hadoop/HowToContribute&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/HowToContribute&lt;/a&gt; see &quot;creating a patch&quot; section.&lt;/p&gt;

&lt;p&gt;I could see where we maintain multiple change log files and build a single toplevel changelog.txt during the release process but it wouldn&apos;t be as simple as cat&apos;ing multiple files together (as the changes in each file are split into releases/sections).&lt;/p&gt;</comment>
                            <comment id="12608602" author="phunt" created="Thu, 26 Jun 2008 23:10:00 +0100"  >&lt;p&gt;I have committed the two approved patches (log4j). These have address the logging issues on hudson.&lt;/p&gt;

&lt;p&gt;However tests are still failing on asf hudson. This is being looked into (and logs w/timestamps should help).&lt;/p&gt;

&lt;p&gt;I&apos;m planning to close this issue once hudson is stable. (at that time if there are loose threads on this jira new jiras will be created for each). At that time I will also open svn for general committs not involved in the sf-&amp;gt;asf migration.&lt;/p&gt;</comment>
                            <comment id="12608933" author="phunt" created="Fri, 27 Jun 2008 23:12:53 +0100"  >&lt;p&gt;There is an issue on solaris where OP_CONNECT is not triggered for new non-blocking sockets connecting on loopback interface. On wind/linux this is not seen, happens only on solaris, see the following for more background:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6288599&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6288599&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Our code was basically handling this, however the state change to &quot;connected&apos; should have been in primeconnection, not in run method (was missing for startconnection).&lt;/p&gt;

&lt;p&gt;This patch fixes the problem by moving the state change into primeconnection, handling all connect paths. I verified this fix by running the tests before/after on solaris and linux machines.&lt;/p&gt;</comment>
                            <comment id="12608950" author="mahadev" created="Sat, 28 Jun 2008 01:03:20 +0100"  >&lt;p&gt;+1 for the solaris patch!&lt;/p&gt;</comment>
                            <comment id="12608988" author="fpj" created="Sat, 28 Jun 2008 10:07:00 +0100"  >&lt;p&gt;It&apos;s not clear to me whether this patch works fine. The problem that I see is that under solaris the predicate:&lt;/p&gt;

&lt;p&gt;((k.readyOps() &amp;amp; SelectionKey.OP_CONNECT) != 0)&lt;/p&gt;

&lt;p&gt;will never be true, which means that we don&apos;t make the calls inside the if block. Now, you have added a line to change state to CONNECTED to the end of primeConnection, which is called in two places: startConnect() and run(). The one in startConnect is predicated by sock.connect(addr). As the channel is in non-blocking mode, the behavior of SocketChannel.connect() says that it may return false if connection is in progress. The call or run() may never happen either because of the problem Pat pointed out. The bottom line is that we again may never reach a connected state. &lt;/p&gt;

&lt;p&gt;I wonder what is wrong with changing the predicate of the &quot;if&quot; block on run() to test also if state is not connected and  sock is ready to read. &lt;/p&gt;
</comment>
                            <comment id="12608996" author="hudson" created="Sat, 28 Jun 2008 11:41:41 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #6 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/6/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/6/&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12609393" author="phunt" created="Mon, 30 Jun 2008 23:44:56 +0100"  >&lt;p&gt;Adds license header to shell scripts.&lt;/p&gt;</comment>
                            <comment id="12609394" author="mahadev" created="Mon, 30 Jun 2008 23:48:15 +0100"  >&lt;p&gt;+1 on the patch for adding headers to shell scripts.&lt;/p&gt;</comment>
                            <comment id="12609395" author="phunt" created="Mon, 30 Jun 2008 23:49:51 +0100"  >&lt;p&gt;solaris and shell license patches have been committed to SVN.&lt;/p&gt;</comment>
                            <comment id="12611692" author="phunt" created="Tue, 8 Jul 2008 18:08:01 +0100"  >&lt;p&gt;Closing this issue: SVN is now setup with proper structure and Hudson is also running as part of it&apos;s CI loop.&lt;/p&gt;

&lt;p&gt;All attached patches have been reviewed and committed to SVN.&lt;/p&gt;

&lt;p&gt;I added &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-70&quot; title=&quot;Add skeleton forrest doc structure for ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-70&quot;&gt;&lt;del&gt;ZOOKEEPER-70&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-71&quot; title=&quot;Determine what to do re ZooKeeper Changelog(s)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-71&quot;&gt;&lt;del&gt;ZOOKEEPER-71&lt;/del&gt;&lt;/a&gt; to JIRA to track a few loose ends (docs &amp;amp; changelog).&lt;/p&gt;</comment>
                            <comment id="12642686" author="phunt" created="Sun, 26 Oct 2008 01:10:38 +0000"  >&lt;p&gt;3.0.0 has been released, closing issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384991" name="ZOOKEEPER-45_shelllicense.patch" size="4389" author="phunt" created="Mon, 30 Jun 2008 23:44:56 +0100"/>
                            <attachment id="12384767" name="add_timestamp_log4j.patch" size="585" author="phunt" created="Thu, 26 Jun 2008 17:28:06 +0100"/>
                            <attachment id="12384703" name="build_fixlog4j.patch" size="1614" author="phunt" created="Wed, 25 Jun 2008 21:47:41 +0100"/>
                            <attachment id="12384874" name="fix_solaris_tests.patch" size="963" author="phunt" created="Fri, 27 Jun 2008 23:12:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Jun 2008 22:38:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48089</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzyrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>