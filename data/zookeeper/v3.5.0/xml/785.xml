<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:47:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-785/ZOOKEEPER-785.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-785]  Zookeeper 3.3.1 shouldn&apos;t infinite loop if someone creates a server.0 line</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-785</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;The following config causes an infinite loop&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;zoo.cfg&amp;#93;&lt;/span&gt;&lt;br/&gt;
tickTime=2000&lt;br/&gt;
dataDir=/var/zookeeper/&lt;br/&gt;
clientPort=2181&lt;br/&gt;
initLimit=10&lt;br/&gt;
syncLimit=5&lt;br/&gt;
server.0=localhost:2888:3888&lt;/p&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;p&gt;2010-06-01 16:20:32,471 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:QuorumPeerMain@119&amp;#93;&lt;/span&gt; - Starting quorum peer&lt;br/&gt;
2010-06-01 16:20:32,489 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:NIOServerCnxn$Factory@143&amp;#93;&lt;/span&gt; - binding to port 0.0.0.0/0.0.0.0:2181&lt;br/&gt;
2010-06-01 16:20:32,504 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:QuorumPeer@818&amp;#93;&lt;/span&gt; - tickTime set to 2000&lt;br/&gt;
2010-06-01 16:20:32,504 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:QuorumPeer@829&amp;#93;&lt;/span&gt; - minSessionTimeout set to -1&lt;br/&gt;
2010-06-01 16:20:32,505 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:QuorumPeer@840&amp;#93;&lt;/span&gt; - maxSessionTimeout set to -1&lt;br/&gt;
2010-06-01 16:20:32,505 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:QuorumPeer@855&amp;#93;&lt;/span&gt; - initLimit set to 10&lt;br/&gt;
2010-06-01 16:20:32,526 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;main:FileSnap@82&amp;#93;&lt;/span&gt; - Reading snapshot /var/zookeeper/version-2/snapshot.c&lt;br/&gt;
2010-06-01 16:20:32,547 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-1:QuorumCnxManager$Listener@436&amp;#93;&lt;/span&gt; - My election bind port: 3888&lt;br/&gt;
2010-06-01 16:20:32,554 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@620&amp;#93;&lt;/span&gt; - LOOKING&lt;br/&gt;
2010-06-01 16:20:32,556 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@649&amp;#93;&lt;/span&gt; - New election. My id = 0, Proposed zxid = 12&lt;br/&gt;
2010-06-01 16:20:32,558 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@689&amp;#93;&lt;/span&gt; - Notification: 0, 12, 1, 0, LOOKING, LOOKING, 0&lt;br/&gt;
2010-06-01 16:20:32,560 - WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@623&amp;#93;&lt;/span&gt; - Unexpected exception&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
at org.apache.zookeeper.server.quorum.FastLeaderElection.totalOrderPredicate(FastLeaderElection.java:496)&lt;br/&gt;
at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:709)&lt;br/&gt;
at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:621)&lt;br/&gt;
2010-06-01 16:20:32,560 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@620&amp;#93;&lt;/span&gt; - LOOKING&lt;br/&gt;
2010-06-01 16:20:32,560 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@649&amp;#93;&lt;/span&gt; - New election. My id = 0, Proposed zxid = 12&lt;br/&gt;
2010-06-01 16:20:32,561 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@689&amp;#93;&lt;/span&gt; - Notification: 0, 12, 2, 0, LOOKING, LOOKING, 0&lt;br/&gt;
2010-06-01 16:20:32,561 - WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@623&amp;#93;&lt;/span&gt; - Unexpected exception&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
at org.apache.zookeeper.server.quorum.FastLeaderElection.totalOrderPredicate(FastLeaderElection.java:496)&lt;br/&gt;
at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:709)&lt;br/&gt;
at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:621)&lt;br/&gt;
2010-06-01 16:20:32,561 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@620&amp;#93;&lt;/span&gt; - LOOKING&lt;br/&gt;
2010-06-01 16:20:32,562 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@649&amp;#93;&lt;/span&gt; - New election. My id = 0, Proposed zxid = 12&lt;br/&gt;
2010-06-01 16:20:32,562 - INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@689&amp;#93;&lt;/span&gt; - Notification: 0, 12, 3, 0, LOOKING, LOOKING, 0&lt;br/&gt;
2010-06-01 16:20:32,562 - WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumPeer@623&amp;#93;&lt;/span&gt; - Unexpected exception&lt;br/&gt;
java.lang.NullPointerException&lt;/p&gt;


&lt;p&gt;Things like HBase require that the zookeeper servers be listed in the zoo.cfg. This is a bug on their part, but zookeeper shouldn&apos;t null pointer in a loop though.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tested in linux with a new jvm&lt;/p&gt;</environment>
        <key id="12466014">ZOOKEEPER-785</key>
            <summary> Zookeeper 3.3.1 shouldn&apos;t infinite loop if someone creates a server.0 line</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="posix4e">Alex Newman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2010 23:51:50 +0100</created>
                <updated>Wed, 23 Nov 2011 19:22:38 +0000</updated>
                            <resolved>Tue, 14 Sep 2010 22:09:31 +0100</resolved>
                                    <version>3.3.1</version>
                                    <fixVersion>3.3.2</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12874851" author="phunt" created="Thu, 3 Jun 2010 00:20:21 +0100"  >&lt;p&gt;this patch logs and error if only a single server is specified and starts in &quot;standalone&quot; mode.&lt;/p&gt;

&lt;p&gt;This is similar to what happened pre-3.3 (we ignored the server line but didn&apos;t log it). In 3.3 having a single server line would cause the server to fail (infinite loop if server.0 for example)&lt;/p&gt;</comment>
                            <comment id="12875227" author="breed" created="Thu, 3 Jun 2010 19:15:57 +0100"  >&lt;p&gt;+1 i think we should log the message as a warning rather than error since we completely recover from the situation. we may also want to log a warning for 2 servers to indicate that failures will not be tolerated. (feel free to ignore both comments and commit the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12875229" author="phunt" created="Thu, 3 Jun 2010 19:22:06 +0100"  >&lt;p&gt;imo ERROR is correct for the 1 server case as there&apos;s no way that could be right and we want to bring to operator attention - they need to fix it.&lt;/p&gt;</comment>
                            <comment id="12875237" author="phunt" created="Thu, 3 Jun 2010 19:46:54 +0100"  >&lt;p&gt;I&apos;ll implement Ben&apos;s suggestion re 2-&amp;gt;warn.&lt;/p&gt;</comment>
                            <comment id="12898936" author="savu.andrei" created="Mon, 16 Aug 2010 14:59:48 +0100"  >&lt;p&gt;I&apos;ve added the warning message as Benjamin suggested. The patch also applies cleanly on the 3.3 branch. &lt;/p&gt;</comment>
                            <comment id="12908070" author="breed" created="Fri, 10 Sep 2010 17:14:02 +0100"  >&lt;p&gt;committed to trunk and 3.3 branch. thanx you guys!&lt;/p&gt;

&lt;p&gt;Committed revision 995845.&lt;br/&gt;
Committed revision 995844.&lt;/p&gt;</comment>
                            <comment id="12909335" author="phunt" created="Tue, 14 Sep 2010 18:09:38 +0100"  >&lt;p&gt;This patch has broken the hudson build, I&apos;ll be submitting a patch to fix this shortly.&lt;/p&gt;</comment>
                            <comment id="12909371" author="phunt" created="Tue, 14 Sep 2010 19:37:17 +0100"  >&lt;p&gt;ZOOKEEPER_785_2_br33.patch fixes this problem on branch 3.3, also adds some tests.&lt;/p&gt;</comment>
                            <comment id="12909372" author="phunt" created="Tue, 14 Sep 2010 19:37:50 +0100"  >&lt;p&gt;ZOOKEEPER_785_2.patch fixes this problem on trunk, also adds some tests.&lt;/p&gt;</comment>
                            <comment id="12909376" author="henryr" created="Tue, 14 Sep 2010 19:48:03 +0100"  >&lt;p&gt;This patch looks good - a couple of comments:&lt;/p&gt;

&lt;p&gt;1. Can you expand the comment &quot; // Not a quorum configuration so return immediately&quot; to be clear that this isn&apos;t a problem, and that the server will default to standalone mode?&lt;br/&gt;
2. Can you actually move the &apos;bit out of place&apos; test to somewhere more sensible? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Let&apos;s make a QuorumConfigurationTest class if we have to.&lt;/p&gt;
</comment>
                            <comment id="12909426" author="phunt" created="Tue, 14 Sep 2010 21:17:30 +0100"  >&lt;p&gt;Updated patches based on review feedback.&lt;/p&gt;</comment>
                            <comment id="12909428" author="phunt" created="Tue, 14 Sep 2010 21:18:42 +0100"  >&lt;p&gt;resubmitting for review - addressed reviewer fb (thanks!),&lt;/p&gt;

&lt;p&gt;note to committer: be sure to svn add the new file.&lt;/p&gt;</comment>
                            <comment id="12909445" author="henryr" created="Tue, 14 Sep 2010 21:49:47 +0100"  >&lt;p&gt;+1, this looks good (although I&apos;d remove the &apos;out of place in this class&apos; comment now that you&apos;ve moved it). &lt;/p&gt;</comment>
                            <comment id="12909457" author="phunt" created="Tue, 14 Sep 2010 22:09:04 +0100"  >&lt;p&gt;fixed comment.&lt;/p&gt;</comment>
                            <comment id="12909458" author="phunt" created="Tue, 14 Sep 2010 22:09:31 +0100"  >&lt;p&gt;committed to trunk/branch33&lt;/p&gt;</comment>
                            <comment id="12909611" author="hudson" created="Wed, 15 Sep 2010 07:19:58 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #936 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/936/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/936/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12452171" name="ZOOKEEPER-785.patch" size="1176" author="savu.andrei" created="Mon, 16 Aug 2010 14:59:48 +0100"/>
                            <attachment id="12446197" name="ZOOKEEPER-785.patch" size="888" author="phunt" created="Thu, 3 Jun 2010 00:20:21 +0100"/>
                            <attachment id="12454587" name="ZOOKEEPER-785_2.patch" size="11085" author="phunt" created="Tue, 14 Sep 2010 22:09:04 +0100"/>
                            <attachment id="12454575" name="ZOOKEEPER-785_2.patch" size="11127" author="phunt" created="Tue, 14 Sep 2010 21:17:29 +0100"/>
                            <attachment id="12454564" name="ZOOKEEPER-785_2.patch" size="9341" author="phunt" created="Tue, 14 Sep 2010 19:37:50 +0100"/>
                            <attachment id="12454588" name="ZOOKEEPER-785_2_br33.patch" size="9944" author="phunt" created="Tue, 14 Sep 2010 22:09:04 +0100"/>
                            <attachment id="12454576" name="ZOOKEEPER-785_2_br33.patch" size="9986" author="phunt" created="Tue, 14 Sep 2010 21:17:30 +0100"/>
                            <attachment id="12454563" name="ZOOKEEPER-785_2_br33.patch" size="8200" author="phunt" created="Tue, 14 Sep 2010 19:37:17 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jun 2010 23:20:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzu5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32871</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>