<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:46:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-693/ZOOKEEPER-693.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-693] TestObserver stuck in tight notification loop in FLE</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-693</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/ZooKeeper/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/77/testReport/junit/org.apache.zookeeper.test/ObserverTest/testObserver/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/view/ZooKeeper/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/77/testReport/junit/org.apache.zookeeper.test/ObserverTest/testObserver/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2010-03-04 00:23:37,803 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:11229:FastLeaderElection@683&amp;#93;&lt;/span&gt; - Notification time out: 3200&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2010-03-04 00:23:37,804 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0:0:0:0:0:0:0:0:11229:FastLeaderElection@689&amp;#93;&lt;/span&gt; - Notification: 2, 0, 2, 3, LOOKING, LOOKING, 1&lt;/p&gt;

&lt;p&gt;ad infinitum. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12458585">ZOOKEEPER-693</key>
            <summary>TestObserver stuck in tight notification loop in FLE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fpj">Flavio Junqueira</assignee>
                                    <reporter username="henryr">Henry Robinson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Mar 2010 21:40:06 +0000</created>
                <updated>Fri, 26 Mar 2010 17:25:11 +0000</updated>
                            <resolved>Wed, 10 Mar 2010 18:52:46 +0000</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12843310" author="henryr" created="Tue, 9 Mar 2010 21:41:52 +0000"  >&lt;p&gt;Flavio - this is in the FastLeaderElection path. Can you take a look, as I think you contributed the patches to make Observers work with FLE? (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-599&quot; title=&quot;Changes to FLE and QuorumCnxManager to support Observers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-599&quot;&gt;&lt;del&gt;ZOOKEEPER-599&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12843517" author="fpj" created="Wed, 10 Mar 2010 10:40:33 +0000"  >&lt;p&gt;Taking a look at the log, I realized that that the execution of the two tests of ObserverTest were overlapping. More specifically, leader election instances were not being shut down correctly after the first test (testObserver), and it seems that they were interfering with the second test (testSingleObserver).  &lt;/p&gt;

&lt;p&gt;The real issue is that I have been shutting down FLE separately from the QuorumPeer in tests, and QuorumPeerTestBase that ObserverTest is using has no way to access the underlying QuorumPeer instance. &lt;/p&gt;

&lt;p&gt;To solve this problem, I simply added code to QuorumPeer:shutdown so that we make sure that we shutdown all leader election instances. I had to also add a new method to the Election interface, and implement an empty method in LeaderElection.&lt;/p&gt;

&lt;p&gt;Since it is ok to call shutdown multiple times, I&apos;ll leave the FLE tests untouched for this patch. I have run the tests a few times, and I didn&apos;t see any issue. I&apos;ll create a jira issue to remove the duplicate calls to shutdown. &lt;/p&gt;</comment>
                            <comment id="12843522" author="hadoopqa" created="Wed, 10 Mar 2010 10:53:27 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12438399/ZOOKEEPER-693.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12438399/ZOOKEEPER-693.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 921201.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/9/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/9/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/9/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/9/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12843526" author="fpj" created="Wed, 10 Mar 2010 11:11:04 +0000"  >&lt;p&gt;My bad, forgot to fix AuthFLE as well.&lt;/p&gt;</comment>
                            <comment id="12843531" author="hadoopqa" created="Wed, 10 Mar 2010 11:39:01 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12438401/ZOOKEEPER-693.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12438401/ZOOKEEPER-693.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 921201.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/10/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/10/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/10/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/10/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/10/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/10/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12843618" author="henryr" created="Wed, 10 Mar 2010 16:34:37 +0000"  >&lt;p&gt;Good catch - patch looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="12843697" author="phunt" created="Wed, 10 Mar 2010 18:52:46 +0000"  >&lt;p&gt;+1 looks good, tests pass on my system as well.&lt;br/&gt;
Committed revision 921509.&lt;/p&gt;</comment>
                            <comment id="12844055" author="hudson" created="Thu, 11 Mar 2010 12:51:30 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #732 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/732/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/732/&lt;/a&gt;)&lt;br/&gt;
    . TestObserver stuck in tight notification loop in FLE&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12438401" name="ZOOKEEPER-693.patch" size="3239" author="fpj" created="Wed, 10 Mar 2010 11:11:04 +0000"/>
                            <attachment id="12438399" name="ZOOKEEPER-693.patch" size="2177" author="fpj" created="Wed, 10 Mar 2010 10:40:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Mar 2010 10:40:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47646</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzugn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>