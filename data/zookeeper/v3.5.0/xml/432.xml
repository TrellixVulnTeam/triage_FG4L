<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:41:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-432/ZOOKEEPER-432.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-432] Various improvements to zkpython bindings</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-432</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;What&apos;s new, from the README for this new version:&lt;/p&gt;

&lt;p&gt;----------------------------------&lt;br/&gt;
More test coverage. &lt;/p&gt;

&lt;p&gt;Better reference counting, fixing at least two serious bugs.&lt;/p&gt;

&lt;p&gt;Out-of-range zhandles are now checked, fixing a potential security hole.&lt;/p&gt;

&lt;p&gt;Docstrings! Editing and cleanup required, but most of the text is there.&lt;/p&gt;

&lt;p&gt;zookeeper.set_watcher is now implemented correctly.&lt;/p&gt;

&lt;p&gt;zookeeper.client_id is now implemented correctly. zookeeper.init now respects the client_id parameter.&lt;/p&gt;

&lt;p&gt;get_context and set_context have been removed from the API. The context mechanism is used by PyZK to store the callables that are dispatched by C-side watchers. Messing with this from Python-side causes bugs very quickly. You should wrap all desired context up in a callable and then use zookeeper.set_watcher to attach it to the global watcher. &lt;/p&gt;

&lt;p&gt;Many methods now have optional parameters (usually if you can specify a watch, it&apos;s optional). The only time where genuinely optional parameters are still mandatory is when a required parameters comes after it. Currently we still respect the ZK C client parameter ordering. For example, you can simply connect with zookeeper.init(&quot;host:port&quot;) and ignore the other three parameters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427207">ZOOKEEPER-432</key>
            <summary>Various improvements to zkpython bindings</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henryr">Henry Robinson</assignee>
                                    <reporter username="henryr">Henry Robinson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2009 13:09:20 +0100</created>
                <updated>Wed, 8 Jul 2009 21:24:05 +0100</updated>
                            <resolved>Mon, 15 Jun 2009 23:54:51 +0100</resolved>
                                                    <fixVersion>3.2.0</fixVersion>
                                    <component>contrib-bindings</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12716592" author="henryr" created="Fri, 5 Jun 2009 13:14:50 +0100"  >&lt;p&gt;Forgot to bump minor version number.&lt;/p&gt;</comment>
                            <comment id="12717445" author="mahadev" created="Mon, 8 Jun 2009 22:48:44 +0100"  >&lt;p&gt;marking it for 3.2... &lt;/p&gt;</comment>
                            <comment id="12719754" author="mahadev" created="Mon, 15 Jun 2009 21:28:47 +0100"  >&lt;p&gt;the patch looks goods. a few questions/comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the patch has chmod_tests.sh that sets the svn executable. Do we realyl need that? A committer can just set the files that you want to be executable while commiting... no?&lt;/li&gt;
	&lt;li&gt;also, just checking to confirm that the patch does not implement the other zoo_w* apis with local watches and context objects right?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12719802" author="henryr" created="Mon, 15 Jun 2009 22:49:58 +0100"  >&lt;p&gt;chmod_tests.sh was a request from &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-421&quot; title=&quot;zkpython run_tests.sh is missing #!&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-421&quot;&gt;&lt;del&gt;ZOOKEEPER-421&lt;/del&gt;&lt;/a&gt;, although I thought as you did that it could be handled by the committers.&lt;/p&gt;

&lt;p&gt;Not sure I totally understand your second question - zkpython doesn&apos;t implement the API calls which take a boolean watch parameter - as far as my understanding goes, they can be emulated exactly with the zoo_w* calls. The Python module actually uses zoo_w* functions internally.&lt;/p&gt;

&lt;p&gt;However all watches are allocated and stored locally, and a single dispatch point is used to multiplex events to watchers via the context objects, which contain Python callables. &lt;/p&gt;
</comment>
                            <comment id="12719807" author="mahadev" created="Mon, 15 Jun 2009 23:02:42 +0100"  >&lt;p&gt;henry, just to clear what I meant&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!PyArg_ParseTuple(args, &lt;span class=&quot;code-quote&quot;&gt;&quot;isO&quot;&lt;/span&gt;, &amp;amp;zkhid, &amp;amp;path, &amp;amp;watcherfn))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;line 567 in zookeeper.c in zkpython does not deserialize the local watcherctx. So does the python api allow you do pass a ctx object with a local watcherfn? &lt;/p&gt;</comment>
                            <comment id="12719809" author="mahadev" created="Mon, 15 Jun 2009 23:04:11 +0100"  >&lt;p&gt;forgot to mention that the line number is without applying the patch ... &lt;/p&gt;</comment>
                            <comment id="12719816" author="henryr" created="Mon, 15 Jun 2009 23:18:50 +0100"  >&lt;p&gt;Ah, sorry, I see what you mean.&lt;/p&gt;

&lt;p&gt;There&apos;s no explicit ctx object in the Python API. Instead, callables can be created at run-time which encapsulate local state.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;def internal_watcher(handle, type, state, path, ctxt):&lt;br/&gt;
    pass&lt;/p&gt;

&lt;p&gt;myctxt = create_context( )&lt;br/&gt;
zoo_exists(zhandle, &quot;/foo&quot;, lambda handle, type, state, path: internal_watcher(handle, type, state, path,myctxt))&lt;/p&gt;

&lt;p&gt;Because Python has closures of a sort, plus easy run-time creation of callable objects, it seems more &apos;Pythonic&apos; to wrap context up this way rather than as a separate explicit object. In the Python C bindings, this is all part of the PyObject that is deserialised from the method call.&lt;/p&gt;
</comment>
                            <comment id="12719830" author="mahadev" created="Mon, 15 Jun 2009 23:41:25 +0100"  >&lt;p&gt;agreed. .. ill commit the patch without chmod_tests.patch ... &lt;/p&gt;</comment>
                            <comment id="12719840" author="mahadev" created="Mon, 15 Jun 2009 23:54:51 +0100"  >&lt;p&gt;I just committed this. thanks henry!&lt;/p&gt;</comment>
                            <comment id="12720613" author="hudson" created="Wed, 17 Jun 2009 11:52:18 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #349 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/349/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/349/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409976" name="ZOOKEEPER-432.patch" size="71399" author="henryr" created="Fri, 5 Jun 2009 13:14:50 +0100"/>
                            <attachment id="12409975" name="ZOOKEEPER-432.patch" size="70911" author="henryr" created="Fri, 5 Jun 2009 13:11:18 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Jun 2009 21:48:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47823</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzxvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>