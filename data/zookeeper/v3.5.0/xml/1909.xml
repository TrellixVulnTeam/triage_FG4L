<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:41:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1909/ZOOKEEPER-1909.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1909] removeWatches doesn&apos;t return NOWATCHER when there is no watch set</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1909</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-442&quot; title=&quot;need a way to remove watches that are no longer of interest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-442&quot;&gt;&lt;del&gt;ZOOKEEPER-442&lt;/del&gt;&lt;/a&gt; introduced support for a new opcode: removeWatches. The way it was implemented though, implies that you need to check on the client side if a watch/watcher is set &lt;b&gt;before&lt;/b&gt; you send your request to the server. If you don&apos;t, ZK will just swallow your request and won&apos;t return an error code if there isn&apos;t a watch set for that path.&lt;/p&gt;

&lt;p&gt;I noticed this whilst implementing removeWatches for Kazoo &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. As mentioned, I guess it could be expected that clients should do the check on their side but I think that the correct thing would to have the server do the validation and return the error code accordingly as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;: thoughts?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/rgs1/kazoo/commit/44ca48e975aeea3fd0664fe13136a72caf89e54f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rgs1/kazoo/commit/44ca48e975aeea3fd0664fe13136a72caf89e54f&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707602">ZOOKEEPER-1909</key>
            <summary>removeWatches doesn&apos;t return NOWATCHER when there is no watch set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgs">Raul Gutierrez Segales</assignee>
                                    <reporter username="rgs">Raul Gutierrez Segales</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2014 00:51:28 +0100</created>
                <updated>Thu, 17 Apr 2014 12:09:38 +0100</updated>
                            <resolved>Thu, 17 Apr 2014 07:52:39 +0100</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13964830" author="rgs" created="Thu, 10 Apr 2014 00:56:16 +0100"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13964831" author="rgs" created="Thu, 10 Apr 2014 00:57:00 +0100"  >&lt;p&gt;The current tests for removeWatches already cover this since this is just an extra server side validations to ensure correctness with other implementations. &lt;/p&gt;</comment>
                            <comment id="13964852" author="hadoopqa" created="Thu, 10 Apr 2014 01:40:13 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639493/ZOOKEEPER-1909.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639493/ZOOKEEPER-1909.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1585371.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2030//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2030//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2030//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2030//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2030//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2030//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13964937" author="michim" created="Thu, 10 Apr 2014 04:27:45 +0100"  >&lt;p&gt;+1 Thank you for the patch, Raul. I&apos;ll wait for Pat and Rakesh to look at the patch before checking in.&lt;/p&gt;</comment>
                            <comment id="13964988" author="rakeshr" created="Thu, 10 Apr 2014 05:38:24 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for pointingout the usecase. Could you please clarify the following:&lt;/p&gt;

&lt;p&gt;I hope this is a kind of notification is &quot;in flight&quot;, say just before submitting the call to server, client recieves the watch notification. Now otherside server will not be able to see the watch anymore. isn&apos;t it ?&lt;/p&gt;

&lt;p&gt;In client side, we have two phase validation (1)before submitting the call to server and (2)after recieving the response from server. Also we know in server side it will ensure orderly exec. (2)After recieving the success response from server, again client will be checking whether I can remove the requested watcher. If yes, it continues with &apos;WatchRemoval&apos; notification otherwise it throws &apos;NoWatcherException&apos; to the user. &lt;/p&gt;

&lt;p&gt;In our case, since the client would have recieved the watch notification before the success response and now the (2) validation would be able to throw NoWatcherException, what do you say?   Also, could you please tell me whether you have observed this case in tests ?&lt;/p&gt;</comment>
                            <comment id="13965037" author="rgs" created="Thu, 10 Apr 2014 06:59:29 +0100"  >&lt;blockquote&gt;&lt;p&gt;I hope this is a kind of notification is &quot;in flight&quot;, say just before submitting the call to server, client recieves the watch notification. Now otherside server will not be able to see the watch anymore. isn&apos;t it ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s one possibility, yes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In client side, we have two phase validation (1)before submitting the call to server and (2)after recieving the response from server. Also we know in server side it will ensure orderly exec. (2)After recieving the success response from server, again client will be checking whether I can remove the requested watcher. If yes, it continues with &apos;WatchRemoval&apos; notification otherwise it throws &apos;NoWatcherException&apos; to the user. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah that is fine as well, but even if a client-side impl doesn&apos;t do that - the server should do the check.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, could you please tell me whether you have observed this case in tests ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, not in the Java tests - just when I was implementing this in Kazoo. &lt;/p&gt;</comment>
                            <comment id="13965200" author="rakeshr" created="Thu, 10 Apr 2014 11:22:02 +0100"  >&lt;blockquote&gt;&lt;p&gt;Yeah that is fine as well, but even if a client-side impl doesn&apos;t do that - the server should do the check&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;OK, so this is like good to have validation in server side. Can we add test case in server side alone, like in DataTreeTest.java or in somother place ?&lt;/p&gt;</comment>
                            <comment id="13965800" author="rgs" created="Thu, 10 Apr 2014 21:19:14 +0100"  >&lt;p&gt;Added a test case. It is a bit more convoluted than what I would have wanted, &lt;b&gt;but&lt;/b&gt; - we need to jump through two hoops to skip the client side validations before &amp;amp; after issuing the request. I think this is better than just writing a test against the DataTree though, since it&apos;s end-to-end.&lt;/p&gt;

&lt;p&gt;Let me know what you guys think.&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13965923" author="hadoopqa" created="Thu, 10 Apr 2014 23:08:50 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639643/ZOOKEEPER-1909.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639643/ZOOKEEPER-1909.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1586200.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2036//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2036//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2036//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2036//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2036//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2036//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13966326" author="rakeshr" created="Fri, 11 Apr 2014 09:24:16 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt;, very nice test case&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve few more comments, sorry I failed to add few cases previously. Please see:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Add path to the exception message, it would be helpful.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; KeeperException.NoWatcherException();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Consider a case where multiple clients added their watcher on same znode path. Now &quot;list&quot; will not be null, and I think, we need to see whether my &quot;watcher&quot; exists on the list. If not again throw exception no ?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
         HashSet&amp;lt;Watcher&amp;gt; list = watchTable.get(path);
         &lt;span class=&quot;code-comment&quot;&gt;// ...
&lt;/span&gt;         list.remove(watcher);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Also, in tests, can we catch specific exception KeeperException.NoWatcherException.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+            zk.removeWatches(&lt;span class=&quot;code-quote&quot;&gt;&quot;/nowatchhere&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, WatcherType.Data, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (KeeperException nwe) {
+            nw = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13966793" author="rgs" created="Fri, 11 Apr 2014 18:06:13 +0100"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, agreed on point 1 &amp;amp; 3. Though wrt #2:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Consider a case where multiple clients added their watcher on same znode path. Now &quot;list&quot; will not be null, and I think, we need to see whether my &quot;watcher&quot; exists on the list. If not again throw exception no ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;         HashSet&amp;lt;Watcher&amp;gt; list = watchTable.get(path);
         // ...
         list.remove(watcher);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I agree, but not only that - we should do the same check for paths (the prev HashSet). Updating the patch. &lt;/p&gt;</comment>
                            <comment id="13966815" author="rgs" created="Fri, 11 Apr 2014 18:16:48 +0100"  >&lt;p&gt;Updated according to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;&apos;s comments plus the extra check that I think is needed as well. &lt;/p&gt;</comment>
                            <comment id="13966884" author="hadoopqa" created="Fri, 11 Apr 2014 18:59:41 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639832/ZOOKEEPER-1909.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639832/ZOOKEEPER-1909.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1586200.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2037//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2037//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2037//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2037//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2037//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2037//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13967438" author="rakeshr" created="Sat, 12 Apr 2014 08:53:54 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for the updates. Apart from the following points +1 from me.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Now, we have one findbug warning:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Format-string method &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]) called with format string &lt;span class=&quot;code-quote&quot;&gt;&quot;{} (type: {})&quot;&lt;/span&gt; wants 0 arguments but is given 2 in org.apache.zookeeper.server.FinalRequestProcessor.processRequest(Request)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve suggestion to use as follows or just use String concatenation.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(Locale.ENGLISH, &lt;span class=&quot;code-quote&quot;&gt;&quot;%s (WatcherType: %s)&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] { removeWatches.getPath(), type });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;In tests its using &quot;KeeperException.getCode()&quot; which is deprecated one. I suggest to use &quot;KeeperException.code()&quot;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13967670" author="rgs" created="Sat, 12 Apr 2014 23:40:24 +0100"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; (and sorry for not running findbugs locally first). This one addresses your last comments. &lt;/p&gt;</comment>
                            <comment id="13967675" author="hadoopqa" created="Sun, 13 Apr 2014 00:15:59 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12639960/ZOOKEEPER-1909.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12639960/ZOOKEEPER-1909.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1586200.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2038//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2038//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2038//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2038//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2038//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2038//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13969811" author="rakeshr" created="Tue, 15 Apr 2014 18:49:41 +0100"  >&lt;p&gt;+1 latest patch looks nice. (test case failure is not related to this fix)&lt;/p&gt;</comment>
                            <comment id="13970473" author="michim" created="Wed, 16 Apr 2014 07:06:46 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13972359" author="rakeshr" created="Thu, 17 Apr 2014 07:52:18 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for the fix and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt; for the reviews.&lt;/p&gt;

&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1588141&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1588141&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13972840" author="hudson" created="Thu, 17 Apr 2014 12:09:38 +0100"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2293 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2293/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2293/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1909&quot; title=&quot;removeWatches doesn&amp;#39;t return NOWATCHER when there is no watch set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1909&quot;&gt;&lt;del&gt;ZOOKEEPER-1909&lt;/del&gt;&lt;/a&gt;. removeWatches doesn&apos;t return NOWATCHER when there is&lt;br/&gt;
no watch set (Raul Gutierrez Segales via rakeshr) (rakeshr: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1588141&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1588141&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ZooKeeper.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/DataTree.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/WatchManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZKDatabase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/RemoveWatchesTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12639960" name="ZOOKEEPER-1909.patch" size="10531" author="rgs" created="Sat, 12 Apr 2014 23:40:24 +0100"/>
                            <attachment id="12639832" name="ZOOKEEPER-1909.patch" size="10333" author="rgs" created="Fri, 11 Apr 2014 18:16:48 +0100"/>
                            <attachment id="12639643" name="ZOOKEEPER-1909.patch" size="9990" author="rgs" created="Thu, 10 Apr 2014 21:19:14 +0100"/>
                            <attachment id="12639493" name="ZOOKEEPER-1909.patch" size="3914" author="rgs" created="Thu, 10 Apr 2014 00:56:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 10 Apr 2014 00:40:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385925</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzoc67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>