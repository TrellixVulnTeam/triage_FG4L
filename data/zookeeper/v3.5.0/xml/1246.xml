<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:41:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1246/ZOOKEEPER-1246.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1246] Dead code in PrepRequestProcessor catch Exception block</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1246</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This is a regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-965&quot; title=&quot;Need a multi-update command to allow multiple znodes to be updated safely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-965&quot;&gt;&lt;del&gt;ZOOKEEPER-965&lt;/del&gt;&lt;/a&gt; (multi transactions). The catch(Exception e) block in PrepRequestProcessor.pRequest contains an if block with condition request.getHdr() != null. This condition will always evaluate to false since the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-965&quot; title=&quot;Need a multi-update command to allow multiple znodes to be updated safely&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-965&quot;&gt;&lt;del&gt;ZOOKEEPER-965&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This is caused by a change in sequence: Before ZK-965, the txnHeader was set &lt;em&gt;before&lt;/em&gt; the deserialization of the request. Afterwards the deserialization happens before request.setHdr is set. So the following RequestProcessors won&apos;t see the request as a failed one but as a Read request, since it doesn&apos;t have a hdr set.&lt;/p&gt;

&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it is very bad practice to catch Exception. The block should rather catch IOException&lt;/li&gt;
	&lt;li&gt;The check whether the TxnHeader is set in the request is used at several places to see whether the request is a read or write request. It isn&apos;t obvious for a newby, what it means whether a request has a hdr set or not.&lt;/li&gt;
	&lt;li&gt;at the beginning of pRequest the hdr and txn of request are set to null. However there is no chance that these fields could ever not be null at this point. The code however suggests that this could be the case. There should rather be an assertion that confirms that these fields are indeed null. The practice of doing things &quot;just in case&quot;, even if there is no chance that this case could happen, is a very stinky code smell and means that the code isn&apos;t understandable or trustworthy.&lt;/li&gt;
	&lt;li&gt;The multi transaction switch case block in pRequest is very hard to read, because it missuses the request.
{hdr|txn}
&lt;p&gt; fields as local variables.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12528648">ZOOKEEPER-1246</key>
            <summary>Dead code in PrepRequestProcessor catch Exception block</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12524256">ZOOKEEPER-1198</parent>
                                    <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fournc">Camille Fournier</assignee>
                                    <reporter username="thkoch">Thomas Koch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2011 10:57:51 +0100</created>
                <updated>Wed, 23 Nov 2011 19:22:04 +0000</updated>
                            <resolved>Wed, 2 Nov 2011 18:31:13 +0000</resolved>
                                                    <fixVersion>3.4.0</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13135200" author="phunt" created="Tue, 25 Oct 2011 17:30:27 +0100"  >&lt;p&gt;This sounds serious, until we triage it let&apos;s mark it as a blocker for 3.4.0.&lt;/p&gt;</comment>
                            <comment id="13135376" author="fournc" created="Tue, 25 Oct 2011 21:06:41 +0100"  >&lt;p&gt;Ok, after a bit of looking it looks like what we need to do is catch IOException and appropriately raise that as a marshalling error. I am going to see what I can do to get a test for this.&lt;/p&gt;</comment>
                            <comment id="13135410" author="fournc" created="Tue, 25 Oct 2011 21:43:23 +0100"  >&lt;p&gt;Formatting may be wack and I haven&apos;t gone over it with a fine tooth comb but I think this patch takes care of it.&lt;/p&gt;</comment>
                            <comment id="13135479" author="hadoopqa" created="Tue, 25 Oct 2011 23:07:54 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12500752/ZOOKEEPER-1246.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12500752/ZOOKEEPER-1246.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1188523.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/674//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/674//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13136121" author="phunt" created="Wed, 26 Oct 2011 18:17:43 +0100"  >&lt;p&gt;Updated patch for current trunk.&lt;/p&gt;</comment>
                            <comment id="13136146" author="phunt" created="Wed, 26 Oct 2011 18:45:47 +0100"  >&lt;p&gt;FYI, the original patch passed on my box with branch 34. (although I have not actually had time to review the patch itself for correctness)&lt;/p&gt;</comment>
                            <comment id="13136149" author="hadoopqa" created="Wed, 26 Oct 2011 18:47:20 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12500909/ZOOKEEPER-1246_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12500909/ZOOKEEPER-1246_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1189318.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/686//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/686//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/686//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/686//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/686//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/686//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13136157" author="phunt" created="Wed, 26 Oct 2011 18:51:10 +0100"  >&lt;p&gt;Added license header to new file.&lt;/p&gt;</comment>
                            <comment id="13136158" author="phunt" created="Wed, 26 Oct 2011 18:51:38 +0100"  >&lt;p&gt;Damn, missed svn add on the new file, also added license header to the new file.&lt;/p&gt;</comment>
                            <comment id="13136184" author="hadoopqa" created="Wed, 26 Oct 2011 19:14:49 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12500923/ZOOKEEPER-1246_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12500923/ZOOKEEPER-1246_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1189318.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/687//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/687//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/687//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/687//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/687//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/687//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13136190" author="hadoopqa" created="Wed, 26 Oct 2011 19:20:40 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12500923/ZOOKEEPER-1246_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12500923/ZOOKEEPER-1246_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1189318.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/688//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/688//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/688//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/688//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/688//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/688//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13136308" author="fournc" created="Wed, 26 Oct 2011 21:21:03 +0100"  >&lt;p&gt;Thanks for migrating this to trunk, Patrick!&lt;/p&gt;</comment>
                            <comment id="13137167" author="fournc" created="Thu, 27 Oct 2011 15:12:49 +0100"  >&lt;p&gt;FWIW I reviewed Patrick&apos;s port to trunk and it looks like he caught everything. If someone else can review this for correctness/style/etc I&apos;m happy to fix any issues on 3.4 and trunk.&lt;/p&gt;</comment>
                            <comment id="13140984" author="mahadev" created="Tue, 1 Nov 2011 06:56:22 +0000"  >&lt;p&gt;Looks good to me. Camille you want to check this in?&lt;/p&gt;</comment>
                            <comment id="13141191" author="fournc" created="Tue, 1 Nov 2011 14:14:35 +0000"  >&lt;p&gt;Will do.&lt;/p&gt;</comment>
                            <comment id="13141205" author="fournc" created="Tue, 1 Nov 2011 14:33:48 +0000"  >&lt;p&gt;Oh brilliant, yet another refactoring blew away the trunk patch here. &lt;/p&gt;</comment>
                            <comment id="13142067" author="hudson" created="Wed, 2 Nov 2011 11:44:00 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1352 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1352/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1352/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1246&quot; title=&quot;Dead code in PrepRequestProcessor catch Exception block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1246&quot;&gt;&lt;del&gt;ZOOKEEPER-1246&lt;/del&gt;&lt;/a&gt;. Dead code in PrepRequestProcessor catch Exception block (camille)&lt;/p&gt;

&lt;p&gt;camille : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1196025&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1196025&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/PrepRequestProcessorTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13142093" author="thkoch" created="Wed, 2 Nov 2011 12:39:23 +0000"  >&lt;p&gt;I&apos;m sorry to reopen this issue after the fact, but if everybody would review every patch, we would loose a lot of time.&lt;/p&gt;

&lt;p&gt;minor issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The patch adds trailing whitespace.&lt;/li&gt;
	&lt;li&gt;The new test file does not use unix newlines.&lt;/li&gt;
	&lt;li&gt;Indentation in line 507 misses a space.&lt;/li&gt;
	&lt;li&gt;The test file contains auto generated TODO comments that actually aren&apos;t TODOs.&lt;/li&gt;
	&lt;li&gt;The added if statements are not consistent. One of them uses braces, the others don&apos;t.&lt;/li&gt;
	&lt;li&gt;The test file introduces a new Warning about unused imports.&lt;/li&gt;
	&lt;li&gt;The patch does change the method signature but not the method javadoc comment.&lt;/li&gt;
	&lt;li&gt;The new added test case does not indicate what it actually tests. It could either&lt;/li&gt;
	&lt;li&gt;have a more explanatory name&lt;/li&gt;
	&lt;li&gt;describe the tested Bug in a comment&lt;/li&gt;
	&lt;li&gt;or just have at least the jira issue mentioned in a comment&lt;/li&gt;
	&lt;li&gt;The test comes with an implementation of SessionTracker to set up a full blown ZooKeeperServer. That&apos;s not necessary. One can just use the LearnerSessionHandler.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;major issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The added Test isn&apos;t a Unit Test. It instantiates several other unrelated classes and even touches network and file system.&lt;/li&gt;
	&lt;li&gt;The patch increases the complexity of the code and couples it even more to the Jute model of deserializing a pre-instantiated object.&lt;/li&gt;
	&lt;li&gt;The patch adds another parameter to the pRequest2Txn method and thus also makes it harder to read.&lt;/li&gt;
	&lt;li&gt;The patch does not address the issue that Exception is catched in line 585 instead of IOException.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There would have been a trivial fix instead. Just add the setHdr statement conditionally before the switch statement inside the try:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(Request.isQuorum()) {
    request.setHdr( ... )
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13142095" author="thkoch" created="Wed, 2 Nov 2011 12:43:35 +0000"  >&lt;p&gt;This patch&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;reverts the changes made to PrepRequestProcessor&lt;/li&gt;
	&lt;li&gt;fixes the issue instead by setting the Request hdr before entering the switch statement&lt;/li&gt;
	&lt;li&gt;removes the MySessionTracker implementation from the Test&lt;/li&gt;
	&lt;li&gt;changes the last catch block to catch IOException instead of Exception&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;bonus:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The pRequest2Txn method lost the zxid parameter without being sad about it.&lt;/li&gt;
	&lt;li&gt;There&apos;s only one place remaining that calls ZooKeeperServer.getNextZxid()&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13142106" author="thkoch" created="Wed, 2 Nov 2011 12:56:07 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Forgot to mention: The original patch does not obey the 80 characters limit for newly introduced lines.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ve renamed the test method now and added a comment to the test to relate it to this issue.&lt;/p&gt;</comment>
                            <comment id="13142125" author="hadoopqa" created="Wed, 2 Nov 2011 13:12:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501955/ZOOKEEPER-1246.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501955/ZOOKEEPER-1246.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/762//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/762//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/762//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/762//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/762//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/762//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142136" author="hadoopqa" created="Wed, 2 Nov 2011 13:26:11 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501957/ZOOKEEPER-1246.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501957/ZOOKEEPER-1246.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/764//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/764//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/764//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/764//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/764//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/764//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142159" author="jiraposter@reviews.apache.org" created="Wed, 2 Nov 2011 13:59:32 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/2671/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2671/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for zookeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;This is &lt;em&gt;not&lt;/em&gt; a diff againt current trunk but against the trunk &lt;em&gt;before&lt;/em&gt; the first version of the ZK-1246 patch got committed.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1246&quot; title=&quot;Dead code in PrepRequestProcessor catch Exception block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1246&quot;&gt;&lt;del&gt;ZOOKEEPER-1246&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1246&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1246&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  CHANGES.txt 8ed2bc2 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java 1a80d74 &lt;br/&gt;
  src/java/test/org/apache/zookeeper/server/PrepRequestProcessorTest.java PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/2671/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/2671/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;
</comment>
                            <comment id="13142392" author="fournc" created="Wed, 2 Nov 2011 18:30:35 +0000"  >&lt;p&gt;Thomas, a bit of feedback. This is unnecessarily aggressive and annoying, and coming after I smacked you down for not writing tests for your own bugfixes it makes you look incredibly petty and insecure. It is perfectly fair of you to point out that I added an eclipse warning (guilty as charged, but if you really care about these you need to make the build fail when additional warnings are added). And yes, the formatting is not perfect. But as to most of the rest of your points, you can frankly go to hell if you think I&apos;m going to tolerate being condescended to in this manner. You had the opportunity to fix this bug yourself when you reported it. Instead, you pranced off to work on your own thing and left it to me to debug and provide a fix. Now that the fix is done and somehow not to your liking, the best you could hope for here is to request a fix for the warning and formatting errors, and otherwise submit a new patch as a refactor. &lt;/p&gt;

&lt;p&gt;I&apos;m closing this back up, and you are welcome to open a new issue with formatting fixes/refactors on it if you so choose. But it is certainly not a critical bug any longer.&lt;/p&gt;</comment>
                            <comment id="13142424" author="phunt" created="Wed, 2 Nov 2011 19:08:58 +0000"  >&lt;p&gt;Once something is committed we generally open a new jira to address further issues or insights people might have.&lt;/p&gt;

&lt;p&gt;Also, I pointed out on the list, if we want to catch such issues (eclipse warnings say) we need to include tests in the QABOT process - Thomas see my mail to the list on that. If you care about such things we need to enforce it through there as not everyone uses eclipse (same for findbugs, rat etc... that&apos;s already included by the bot.).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501957" name="ZOOKEEPER-1246.patch" size="19168" author="thkoch" created="Wed, 2 Nov 2011 12:56:07 +0000"/>
                            <attachment id="12501955" name="ZOOKEEPER-1246.patch" size="16230" author="thkoch" created="Wed, 2 Nov 2011 12:43:35 +0000"/>
                            <attachment id="12500922" name="ZOOKEEPER-1246.patch" size="12817" author="phunt" created="Wed, 26 Oct 2011 18:51:09 +0100"/>
                            <attachment id="12500752" name="ZOOKEEPER-1246.patch" size="12113" author="fournc" created="Tue, 25 Oct 2011 21:42:39 +0100"/>
                            <attachment id="12500923" name="ZOOKEEPER-1246_trunk.patch" size="12395" author="phunt" created="Wed, 26 Oct 2011 18:51:38 +0100"/>
                            <attachment id="12500909" name="ZOOKEEPER-1246_trunk.patch" size="7427" author="phunt" created="Wed, 26 Oct 2011 18:17:43 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Oct 2011 16:30:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzwuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33307</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>