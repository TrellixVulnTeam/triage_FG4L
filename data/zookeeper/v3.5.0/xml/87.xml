<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-87/ZOOKEEPER-87.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-87] Follower does not shut itself down if its too far behind the leader.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-87</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Currently, the follower if lagging behind keeps sending pings to the leader it will stay alive and will keep getting further and further behind the leader. The follower should shut itself down if it is not able to keep up to the leader within some limit so that gurantee of updates can be made to the clients connected to different servers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12400857">ZOOKEEPER-87</key>
            <summary>Follower does not shut itself down if its too far behind the leader.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abranzyck">Germ&#225;n Blanco</assignee>
                                    <reporter username="mahadev">Mahadev konar</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 23 Jul 2008 19:29:31 +0100</created>
                <updated>Thu, 13 Mar 2014 18:16:56 +0000</updated>
                            <resolved>Thu, 26 Sep 2013 13:37:50 +0100</resolved>
                                    <version>3.4.5</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>quorum</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12616435" author="fpj" created="Thu, 24 Jul 2008 11:26:07 +0100"  >&lt;p&gt;Mahadev, I was thinking that we we could set a maximum capacity to queuedPackets on FollowerHandler, and check the remaining capacity on FollowerHandler.queuePacket() before accepting a new packet. We could then invoke FollowerHandler.shutdown() in the case we reach the capacity. What do you think? If you think this is a good idea, I can create a patch.&lt;/p&gt;
</comment>
                            <comment id="12616550" author="mahadev" created="Thu, 24 Jul 2008 18:51:28 +0100"  >&lt;p&gt;i was thinking abt the same lines but not on maximum capacity on follower handlers &amp;#8211; &lt;/p&gt;

&lt;p&gt;ben and I had a discussion regarding this and we decided on doing htis &amp;#8212; &lt;/p&gt;

&lt;p&gt;1) we send a Leader.PING from the leader to the follower &amp;#8212; we will include the ticktime at the leader and send it to the follower&lt;/p&gt;

&lt;p&gt;2) the follower just returns back the tick time with the ping response. &lt;/p&gt;

&lt;p&gt;3) we update the ticktime that we saw last from the follower and then kill the follower handler if its lagging behind.&lt;/p&gt;

&lt;p&gt;&amp;#8211; this approach is less error prone since we are getting response from the follower and know whats the last ticktime it processed. The problem with your suggestion is that you might be sending it out fast to the follower but the follower might be buffering all of it and not doing anything with it... &lt;/p&gt;

&lt;p&gt;though the above suggestion has a problem right now since the Leader.PING does not go through the pipeline at the follower. so a response to the ping does not necessarily mean that the follower is in line with processing the requests. We have to get an end to end response from the follower to see how much it is behind.. &lt;/p&gt;
</comment>
                            <comment id="12616556" author="fpj" created="Thu, 24 Jul 2008 19:03:44 +0100"  >&lt;p&gt;If you throttle at the follower, then the queue on the leader side will build up, and you won&apos;t have the problem you mention. The approach I describe seems to be safer as you don&apos;t have to wait for the next Leader.PING period to make a decision. It is true that the leader can send a ping at any time it wants, but if the leader is clueless as you say, then it will wait for the next ping period and it won&apos;t send any exceptional pings.&lt;/p&gt;</comment>
                            <comment id="12616566" author="mahadev" created="Thu, 24 Jul 2008 19:23:14 +0100"  >&lt;p&gt;throttling at the follower is a little tricky. do you mean the follower will stop reading requests ? &lt;/p&gt;

&lt;p&gt;since you do not know what is on the tcp stack &amp;#8212; &lt;/p&gt;

&lt;p&gt;when you do a send it might be buffered on either of the tcp stacks on the leader and the follower. so you do not know how many txn&apos;s are buffered up the tcp stack. So throttling is a tricky thing with the follower and leader.  also the rsponse to leader.PING are critical with session management.&lt;/p&gt;
</comment>
                            <comment id="12921355" author="vishalmlst" created="Fri, 15 Oct 2010 14:36:45 +0100"  >&lt;p&gt;Hi Mahadev, Flavio,&lt;/p&gt;


&lt;p&gt;I am trying to understand how shutting down the follower will help in this case. &lt;/p&gt;

&lt;p&gt;Mahadev can you please explain what you man by : &quot;The follower should shut itself down if it is not able to keep up to the leader within some limit so that guarantee of updates can be made to the clients connected to different servers.&quot; &lt;/p&gt;

&lt;p&gt;Under what conditions do you expect a shutdown of follower handler to eliminate the problem of follower lagging behind. Are you referring to clients connected to this server that will fail-over their session to another server?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;br/&gt;
-Vishal&lt;/p&gt;</comment>
                            <comment id="12925165" author="mahadev" created="Tue, 26 Oct 2010 22:55:54 +0100"  >&lt;p&gt;exactly vishal. The problem is to avoid clients being connected to a server which can lag behind the leader. &lt;/p&gt;</comment>
                            <comment id="13049631" author="mahadev" created="Wed, 15 Jun 2011 07:05:42 +0100"  >&lt;p&gt;not a blocker. Moving it out of 3.4 release.&lt;/p&gt;</comment>
                            <comment id="13639163" author="abranzyck" created="Tue, 23 Apr 2013 16:34:11 +0100"  >&lt;p&gt;Hello,&lt;br/&gt;
I am rescueing this old isssue, since it seems to be still present.&lt;br/&gt;
After a few tests, it seems to me that the issue of &quot;lagging behind&quot; affects transactions even more seriously. I haven&apos;t been able to find any timeout for proposals waiting for acknowledgement, is that really the case?&lt;br/&gt;
I really think I must be wrong there. Otherwise, since ping handling seems to be done in a different thread, a follower could be locked at some point that has to do with the transaction but reply to pings and it would not be accepting any proposals. Besides, there is no warranty on the time that a transaction takes to be updated in all servers.&lt;br/&gt;
Could anybody please tell me if I have read things wrongly?&lt;br/&gt;
Thanks a lot,&lt;br/&gt;
Germ&#225;n.&lt;/p&gt;</comment>
                            <comment id="13645748" author="abranzyck" created="Tue, 30 Apr 2013 18:19:04 +0100"  >&lt;p&gt;I would like to propose this fix for the problem. I keeps a list of the proposals sent to each Learner and shuts it down if any of the proposals reaches the timeout.&lt;br/&gt;
It also skips sending pings if there are any proposals waiting for acknowledgement.&lt;br/&gt;
According to my understanding the new behaviour fits better with the current description of syncLimit.&lt;/p&gt;</comment>
                            <comment id="13647593" author="abranzyck" created="Thu, 2 May 2013 15:55:16 +0100"  >&lt;p&gt;This patch keeps track of all proposals sent to each Follower and shuts the handler down if one of them is not responded in syncLimit*tickTime.&lt;br/&gt;
It also skips sending the ping if there is any proposal waiting for acknowledgement.&lt;/p&gt;</comment>
                            <comment id="13647628" author="hadoopqa" created="Thu, 2 May 2013 16:31:44 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12581196/ZOOKEEPER-87.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12581196/ZOOKEEPER-87.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1463329.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1466//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1466//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1466//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1466//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1466//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1466//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13647773" author="abranzyck" created="Thu, 2 May 2013 19:17:27 +0100"  >&lt;p&gt;Removing the complain from FindBugs.&lt;/p&gt;</comment>
                            <comment id="13650255" author="hadoopqa" created="Tue, 7 May 2013 00:55:11 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12581563/ZOOKEEPER-87.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12581563/ZOOKEEPER-87.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1463329.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1469//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1469//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1469//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1469//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1469//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1469//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13735080" author="abranzyck" created="Fri, 9 Aug 2013 19:04:23 +0100"  >&lt;p&gt;I have updated the patch to the current trunk version.&lt;br/&gt;
Any comments on the proposal?&lt;/p&gt;</comment>
                            <comment id="13735134" author="hadoopqa" created="Fri, 9 Aug 2013 19:53:19 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12597127/ZOOKEEPER-87_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12597127/ZOOKEEPER-87_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1503101.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1531//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1531//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1531//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1531//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1531//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1531//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13735834" author="hadoopqa" created="Sat, 10 Aug 2013 11:39:16 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12597270/ZOOKEEPER-87_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12597270/ZOOKEEPER-87_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1503101.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1533//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1533//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1533//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1533//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1533//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1533//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13752401" author="abranzyck" created="Wed, 28 Aug 2013 14:48:57 +0100"  >&lt;p&gt;Could anyone please comment on the proposal in the patch?&lt;br/&gt;
In my view it offers the following advantages against the previous proposals in the thread:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;There is no need to modify the network protocol (adding information to PING requests and responses).&lt;/li&gt;
	&lt;li&gt;It solves the problem based on time difference, and not based on the number of proposals. A limit on the number of pending proposals could still allow for a follower to be behind in terms of time.&lt;/li&gt;
	&lt;li&gt;It seems to map the behavior described already for syncLimit: &quot;Amount of time, in ticks (see tickTime), to allow followers to sync with ZooKeeper. If followers fall too far behind a leader, they will be dropped.&quot;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13770592" author="abranzyck" created="Wed, 18 Sep 2013 10:12:41 +0100"  >&lt;p&gt;This is actually the same patch. The last test seemed to failed due to problems in the machine?&lt;/p&gt;</comment>
                            <comment id="13770598" author="abranzyck" created="Wed, 18 Sep 2013 10:26:06 +0100"  >&lt;p&gt;I changed the &quot;Asignee&quot; because it was the only way I found to submit the patch. I hope that it is not a problem, at least it seems very easy to revert &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13770621" author="hadoopqa" created="Wed, 18 Sep 2013 10:53:11 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12603795/ZOOKEEPER-87_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12603795/ZOOKEEPER-87_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524275.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1585//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1585//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1585//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1585//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1585//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1585//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13770927" author="abranzyck" created="Wed, 18 Sep 2013 17:21:50 +0100"  >&lt;p&gt;Yet a different approach.&lt;br/&gt;
This patch doesn&apos;t keep a list of all pending transactions for a Learner. It just keeps track of one transaction and makes sure that this transaction makes it on time. When the ACK for this transaction arrives, it picks anotherone. In the worst case there could be a delay of 2*syncLimit in one transaction, but it is a very cheap (in terms of processing time) way to ensure that the lagging doesn&apos;t get out of hand.&lt;/p&gt;</comment>
                            <comment id="13770964" author="hadoopqa" created="Wed, 18 Sep 2013 17:58:43 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12603855/ZOOKEEPER-87.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12603855/ZOOKEEPER-87.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1588//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1588//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1588//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1588//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1588//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1588//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13771858" author="abranzyck" created="Thu, 19 Sep 2013 14:09:54 +0100"  >&lt;p&gt;This patch is cleaner. The test case applies better to the modification. And it leaves some margin in the syncLimit for the test case that failed in the last try with Jenkins.&lt;/p&gt;</comment>
                            <comment id="13771902" author="hadoopqa" created="Thu, 19 Sep 2013 14:48:10 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12604034/ZOOKEEPER-87.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12604034/ZOOKEEPER-87.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1591//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1591//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1591//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1591//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1591//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1591//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13772624" author="hadoopqa" created="Fri, 20 Sep 2013 05:43:03 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12604193/ZOOKEEPER-87.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12604193/ZOOKEEPER-87.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1592//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1592//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1592//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1592//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1592//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1592//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13772636" author="abranzyck" created="Fri, 20 Sep 2013 06:17:23 +0100"  >&lt;p&gt;Eighth try, and it finally passes all tests!&lt;br/&gt;
The ZooKeeper regression is a great tool. Not only there are a lot of use cases covered, but some of the test cases are very sensitive to problems that are not related with the main purpose of the test case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13772638" author="abranzyck" created="Fri, 20 Sep 2013 06:21:50 +0100"  >&lt;p&gt;By the way, before anybody complains, I did pass the regression locally before submitting the patch and it did work. But timing is an issue and my machine is way faster than the Jenkins run so ...&lt;/p&gt;</comment>
                            <comment id="13773253" author="fpj" created="Fri, 20 Sep 2013 19:06:20 +0100"  >&lt;p&gt;Thanks for picking this one up, German. Given how currentTime is updated, I was wondering if the leader will disconnect from followers if it is idle for some time. It looks like will force the LearnerHandler to shut down if there is a period of inactivity, but perhaps I&apos;m not reading it right.&lt;/p&gt;

&lt;p&gt;Also, please don&apos;t delete the patch files you upload, even if you&apos;re uploading new ones.&lt;/p&gt;</comment>
                            <comment id="13773254" author="fpj" created="Fri, 20 Sep 2013 19:07:20 +0100"  >&lt;p&gt;I forgot to mention the following. This is not a blocker for 3.4.6, so if we can&apos;t converge on a patch for this one, I&apos;d like to push it to 3.5.0. Is it ok?&lt;/p&gt;</comment>
                            <comment id="13774327" author="abranzyck" created="Mon, 23 Sep 2013 07:43:25 +0100"  >&lt;p&gt;Thanks to you for taking a look, Flavio!&lt;br/&gt;
If it is idle, then it doesn&apos;t do anything. The implementation is a class that has 4 methods:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;start() : Invoked from LearnerHandler thread.&lt;/li&gt;
	&lt;li&gt;updateProposal() : Invoked from the thread that sends packets. If process has started, and there is no proposal, it starts monitoring that proposal. If there is a proposal already, it updates the &quot;next proposal&quot; to monitor.&lt;/li&gt;
	&lt;li&gt;updateAck() : Invoked from the thread that receives packets. If the ACK corresponds to the current proposal, then it removes the current proposal and if there is a &quot;next proposal&quot; it starts using that one.&lt;/li&gt;
	&lt;li&gt;check() : Invoked from the Leader thread. It returns true if everything is ok, false if there is a timeout.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It has the following states:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;NOT_STARTED: It doesn&apos;t do anything. Check will always return true. It can only transition to WAITING_FOR_PROPOSAL.&lt;/li&gt;
	&lt;li&gt;WAITING_FOR_PROPOSAL: It expects a new proposal. Check will always return true. As soon as one proposal arrives it will start monitoring it and transition to MONITORING_PROPOSAL.&lt;/li&gt;
	&lt;li&gt;MONITORING_PROPOSAL: It waits for the ACK of the proposal under monitoring. Check will return true unless there is a timeout for the current proposal. It continuously update the &quot;next proposal&quot; with incoming proposals. If the ACK for the current proposal arrives, it will either update the proposal with the &quot;next proposal&quot; or transition to WAITING_FOR_PROPOSAL if there is no &quot;next proposal&quot;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The monitoring is started when the synchronization phase ends (and the timeout in the socket is updated to syncLimit*tickTime). The processing required in each of the calls to the four functions is minimal, so there should be no disturbance of performance at all. &lt;br/&gt;
Since proposals are executed in order, with this checking the longest time between a proposal and its ACK will be if there is a proposal that comes immediately after the one that is being monitored, and its ACK arrives immediately before the ACK for the &quot;next proposal&quot; after that. That would mean (2 * syncLimit) * tickTime, and then since we check the timeout every 1/2 tickTime, that needs to be added so it is (2&apos;5 * syncLimit) * tickTime. In usual operation, ACKs will take more or less the same for every proposal and the timeout will jump more or less as soon as any of the ACKs takes longer than (syncLimit * tickTime).&lt;/p&gt;

&lt;p&gt;Or at least that is how I intend it to work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;... and I don&apos;t mind to turn this upside down for anything else that covers the requirement, so I hope that we won&apos;t have a problem in converging on a patch ... we&apos;ll see.&lt;/p&gt;

&lt;p&gt;Sorry about deleting the patches. It made me unconfortable to leave there something that didn&apos;t work. But I will keep in mind that way of working from now on.&lt;/p&gt;</comment>
                            <comment id="13774386" author="abranzyck" created="Mon, 23 Sep 2013 09:47:19 +0100"  >&lt;p&gt;I made (at least) two mistakes above:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If there are no proposals (idle ZooKeeper), then this thing is not idle (&quot;doing nothing&quot; as in NOT_STARTED) it is in WAITING_FOR_PROPOSAL, returning always true for check and ready to be updated with a new proposal.&lt;/li&gt;
	&lt;li&gt;&quot;since we check the timeout every 1/2 tickTime&quot;, means half a ticktime needs to be added, not half a &quot;syncLimit * tickTime&quot;. So actually the &quot;longest time between a proposal and its ACK &quot; is (((2 * syncLimit) + 1/2) * tickTime)&lt;br/&gt;
... isn&apos;t there a way to edit comments after one posts them?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13777627" author="abranzyck" created="Wed, 25 Sep 2013 16:39:27 +0100"  >&lt;p&gt;Any more questions on this one?&lt;/p&gt;</comment>
                            <comment id="13777635" author="fpj" created="Wed, 25 Sep 2013 16:43:22 +0100"  >&lt;p&gt;I haven&apos;t had a chance to process this one yet, I&apos;m sorry.&lt;/p&gt;</comment>
                            <comment id="13778179" author="fpj" created="Wed, 25 Sep 2013 23:28:53 +0100"  >&lt;p&gt;Here are a few comments, German:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Please make the initialization of SyncLimitCheck fields explicit.&lt;/li&gt;
	&lt;li&gt;Please add blank lines between method definitions (&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-141388.html#487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-141388.html#487&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;The test case does not fail for me when I only apply the test case changes. I haven&apos;t looked too closely into it to determine the reason, but I was wondering if it fails for you.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13778519" author="abranzyck" created="Thu, 26 Sep 2013 07:37:30 +0100"  >&lt;p&gt;Thanks again for your comments Flavio,&lt;br/&gt;
it did fail, but I hadn&apos;t tried it enough. Sometimes it didn&apos;t fail.&lt;br/&gt;
There was a problem in the test, it didn&apos;t reply to pings from the leader.&lt;br/&gt;
So if the LearnerHandler decided that there was a ping timeout before it decided that the proposal had timeout, then the test case passed (it finishes before it had a chance to notice the other timeout). And the timeout period for both events is the same.&lt;br/&gt;
I will upload the corrected patches with your comments updated in a moment.&lt;/p&gt;</comment>
                            <comment id="13778574" author="hadoopqa" created="Thu, 26 Sep 2013 09:32:56 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12605207/ZOOKEEPER-87.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12605207/ZOOKEEPER-87.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1526337.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1600//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1600//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1600//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1600//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1600//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1600//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13778638" author="fpj" created="Thu, 26 Sep 2013 11:29:18 +0100"  >&lt;p&gt;It looks good to me, but I have one remaining question if you don&apos;t mind. Why are you synchronizing the methods in SyncLimitCheck? There is one instance per LearnerHandler so I&apos;m not sure it is necessary.&lt;/p&gt;</comment>
                            <comment id="13778674" author="abranzyck" created="Thu, 26 Sep 2013 12:29:13 +0100"  >&lt;p&gt;No problem at all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
If I am not wrong, the methods are called from different threads. It seemed so also in the logs. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;ping&quot; is called from the &quot;lead&quot; method in Leader.java that runs within the QuorumPeer thread.&lt;/li&gt;
	&lt;li&gt;&quot;updateProposal&quot; is called from &quot;sendPackets&quot; which has an independent thread created in &quot;startSendingPackets&quot;.&lt;/li&gt;
	&lt;li&gt;&quot;start&quot; and &quot;updateAck&quot; are called from &quot;run&quot; in the LearnerHandler thread.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13778718" author="fpj" created="Thu, 26 Sep 2013 13:37:33 +0100"  >&lt;p&gt;Thanks, German. +1.&lt;/p&gt;

&lt;p&gt;Trunk Committed revision 1526454.&lt;br/&gt;
B3.4 Committed revision 1526461.&lt;/p&gt;</comment>
                            <comment id="13779826" author="hudson" created="Fri, 27 Sep 2013 12:10:03 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2069 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2069/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2069/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-87&quot; title=&quot;Follower does not shut itself down if its too far behind the leader.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-87&quot;&gt;&lt;del&gt;ZOOKEEPER-87&lt;/del&gt;&lt;/a&gt;. Follower does not shut itself down if its too far behind the leader. (German Blanco via fpj) (fpj: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1526454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1526454&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/LearnerHandler.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/Zab1_0Test.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933710" author="fpj" created="Thu, 13 Mar 2014 18:16:56 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12605207" name="ZOOKEEPER-87.patch" size="10697" author="abranzyck" created="Thu, 26 Sep 2013 08:45:28 +0100"/>
                            <attachment id="12604193" name="ZOOKEEPER-87.patch" size="10420" author="abranzyck" created="Fri, 20 Sep 2013 05:03:40 +0100"/>
                            <attachment id="12605206" name="ZOOKEEPER-87_3.4.patch" size="11296" author="abranzyck" created="Thu, 26 Sep 2013 08:42:09 +0100"/>
                            <attachment id="12604191" name="ZOOKEEPER-87_3.4.patch" size="11017" author="abranzyck" created="Fri, 20 Sep 2013 04:58:37 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Jul 2008 10:26:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>71228</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzwfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The value of syncLimit should be reviewed before this change is introduced in the cluster. Since it now detects followers that are lagging behind, clusters in which this was happening will now see followers being disconnected from time to time. This will normally be solved by increasing the syncLimit value.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>