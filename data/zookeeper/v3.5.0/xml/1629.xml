<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:41:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1629/ZOOKEEPER-1629.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1629] testTransactionLogCorruption occasionally fails</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1629</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;It seems that testTransactionLogCorruption is very flaky,for example fails here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk-jdk7/500/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk-jdk7/500/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk-jdk7/502/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk-jdk7/502/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk-jdk7/503/#showFailuresLink&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk-jdk7/503/#showFailuresLink&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;also fails for older builds (no longer on the website), for example all builds from 381 to 399.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12629198">ZOOKEEPER-1629</key>
            <summary>testTransactionLogCorruption occasionally fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shralex">Alexander Shraer</assignee>
                                    <reporter username="shralex">Alexander Shraer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jan 2013 01:10:42 +0000</created>
                <updated>Thu, 13 Mar 2014 18:17:04 +0000</updated>
                            <resolved>Mon, 15 Jul 2013 03:07:46 +0100</resolved>
                                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13614866" author="hadoopqa" created="Wed, 27 Mar 2013 03:07:04 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12575640/TruncateCorruptionTest-patch.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12575640/TruncateCorruptionTest-patch.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1458648.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13614992" author="shralex" created="Wed, 27 Mar 2013 07:25:32 +0000"  >&lt;p&gt;After some debugging, here&apos;s what seems to be the problem.&lt;br/&gt;
There were some timing related failures, which the attached patch mostly addresses, revealing a different problem.&lt;/p&gt;

&lt;p&gt;The failure above is that zk1 sees znode /test2 but zk2 doesn&apos;t.&lt;br/&gt;
From the log:&lt;br/&gt;
2013-03-27 02:39:59,438 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:TruncateCorruptionTest@160&amp;#93;&lt;/span&gt; - List of children at zk2 before zk1 became master&lt;br/&gt;
2013-03-27 02:39:59,440 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:TruncateCorruptionTest@162&amp;#93;&lt;/span&gt; - &lt;span class=&quot;error&quot;&gt;&amp;#91;test, zookeeper, test3&amp;#93;&lt;/span&gt;&lt;br/&gt;
2013-03-27 02:39:59,440 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:TruncateCorruptionTest@164&amp;#93;&lt;/span&gt; - List of children at zk1 before zk1 became master&lt;br/&gt;
2013-03-27 02:39:59,442 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:TruncateCorruptionTest@166&amp;#93;&lt;/span&gt; - &lt;span class=&quot;error&quot;&gt;&amp;#91;test, zookeeper, test2, test3&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The test is designed in a way that /test2 is first committed to servers 1 and 3, but then the test deletes the data dir of server 3,&lt;br/&gt;
disconnects server 1, has server 3 form a quorum with server 2 and when server 1 connects to the new ensemble it is being forced&lt;br/&gt;
to truncate the committed transaction that created /test2. So why does it still&lt;br/&gt;
have /test2 in its data tree ? This is because earlier it managed to make a snapshot (39:17). Truncate doesn&apos;t touch the snapshot. After the truncate when we load the database, we first start from the snapshot, then apply the truncated log. So /test2 showing up is perfectly OK in this case. &lt;/p&gt;

&lt;p&gt;If we want to keep the current structure of this test, we should disable snapshotting for its duration. Is there a way to do that ?&lt;/p&gt;


</comment>
                            <comment id="13615024" author="tdunning" created="Wed, 27 Mar 2013 08:24:53 +0000"  >&lt;p&gt;WHile you are at it, could you fix the spelling of the test case name?&lt;/p&gt;</comment>
                            <comment id="13618850" author="breed" created="Mon, 1 Apr 2013 16:50:57 +0100"  >&lt;p&gt;can we get a few more comments in the code on the overall strategy of the test. wrapper1 uses a different port that the rest and then there is some port forwarding going on. i understand that the objective is to do an add after a trunc, but i&apos;m not sure how/why it is achieved with this code.&lt;/p&gt;</comment>
                            <comment id="13619031" author="shralex" created="Mon, 1 Apr 2013 19:39:47 +0100"  >&lt;p&gt;Hi Ben,&lt;/p&gt;

&lt;p&gt;The test was added here: &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1489&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1489&lt;/a&gt;, and there are some explanations on what it does on that jira.&lt;br/&gt;
I think I more or less understand what it tried to do, but whoever wrote it should probably explain it.&lt;/p&gt;

&lt;p&gt;In my opinion, besides small bugs which are the ones causing our periodic builds to fail, the test just doesn&apos;t take snapshots into account and &lt;br/&gt;
this results in the failure we&apos;re seeing in the pre-commit build (see my previous comment above). We should probably disable the test until it is fixed.&lt;/p&gt;</comment>
                            <comment id="13619961" author="breed" created="Tue, 2 Apr 2013 17:26:15 +0100"  >&lt;p&gt;ah you are right. it would be good to have the steps as comments in the code. that should be rock solid reproducible. we shouldn&apos;t disable snapshotting. if it really is causing a problem, we should make sure it happens to fix the bug.&lt;/p&gt;</comment>
                            <comment id="13620009" author="shralex" created="Tue, 2 Apr 2013 18:10:04 +0100"  >&lt;p&gt;I think the snapshotting is a problem by looking at the log above: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//testReport/org.apache.zookeeper.server/TruncateCorruptionTest/testTransactionLogCorruption/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1439//testReport/org.apache.zookeeper.server/TruncateCorruptionTest/testTransactionLogCorruption/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;zk1 still sees /test2 (39:59), even after its log is truncated (39:57). This is because earlier zk1 managed to make a snapshot (39:17). I think the explanation is this: truncate doesn&apos;t touch the snapshot. After the truncate when we load the database, we first start from the snapshot, then apply the truncated log. So /test2 is showing up, and we have an inconsistent state between the servers (only zk1 sees /test2). &lt;/p&gt;

&lt;p&gt;The reason why I think this is not a ZooKeeper bug but a bug of this test is that the test explicitly erases the state of 2 out of 3 servers in order to cause truncate on the log of zk1. This situation is not something that was considered possible in ZooKeeper (for good reasons), and it doesn&apos;t work as can be seen from the log.&lt;/p&gt;

&lt;p&gt;I suggest to first figure out if this is something we can fix. If not, there is no point in explaining this test better &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13661398" author="fournc" created="Sat, 18 May 2013 18:20:17 +0100"  >&lt;p&gt;This failed trunk again last night. Alex did you come to a conclusion on bug vs bad test?&lt;/p&gt;</comment>
                            <comment id="13679334" author="shralex" created="Mon, 10 Jun 2013 06:55:26 +0100"  >&lt;p&gt;I spent some time trying to fix the test today, but no luck so far. I suggest to disable it.&lt;/p&gt;

&lt;p&gt;We can fix the periodic failures by applying the patch attached to the Jira, but then there are going to be periodic failures of a different kind. The scenario this test creates is problematic - it deletes the data of 2 servers and expects the third server to loose committed data. The third server doesn&apos;t loose the data when it succeeds to snapshot it, in which case the test fails. I tried to delete the snapshot but this creates other problems.&lt;/p&gt;</comment>
                            <comment id="13682645" author="breed" created="Thu, 13 Jun 2013 21:07:48 +0100"  >&lt;p&gt;i think alex is right. i think we could test this case with a simpler, more reliable test.&lt;/p&gt;</comment>
                            <comment id="13707911" author="shralex" created="Sun, 14 Jul 2013 02:37:20 +0100"  >&lt;p&gt;The attached patch disables testTransactionLogCorruption, and includes a minor fix to TruncateTest (specifies leader election and client ports).&lt;/p&gt;

&lt;p&gt;As explained above the logic of testTransactionLogCorruption is problematic. But it was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1489&quot; title=&quot;Data loss after truncate on transaction log&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1489&quot;&gt;&lt;del&gt;ZOOKEEPER-1489&lt;/del&gt;&lt;/a&gt; to solve some problem, so I wanted to make sure we&apos;re still covering that problem. &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1489&quot; title=&quot;Data loss after truncate on transaction log&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1489&quot;&gt;&lt;del&gt;ZOOKEEPER-1489&lt;/del&gt;&lt;/a&gt; makes changes to two functions. Reverting either of these changes causes one of the tests in TruncateTest to fail. On the other hand, reverting the &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1489&quot; title=&quot;Data loss after truncate on transaction log&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1489&quot;&gt;&lt;del&gt;ZOOKEEPER-1489&lt;/del&gt;&lt;/a&gt; changes doesn&apos;t cause testTransactionLogCorruption to fail. Even more reason to disable it.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</comment>
                            <comment id="13707919" author="hadoopqa" created="Sun, 14 Jul 2013 02:58:42 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592176/ZOOKEEPER-1629-ver1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592176/ZOOKEEPER-1629-ver1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1498732.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1510//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1510//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1510//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1510//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1510//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1510//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13707933" author="hadoopqa" created="Sun, 14 Jul 2013 04:18:20 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592180/ZOOKEEPER-1629-ver2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592180/ZOOKEEPER-1629-ver2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1498732.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1511//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1511//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1511//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1511//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1511//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1511//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13707947" author="hadoopqa" created="Sun, 14 Jul 2013 05:22:13 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592182/ZOOKEEPER-1629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592182/ZOOKEEPER-1629.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1498732.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1512//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1512//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1512//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1512//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1512//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1512//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13708028" author="fournc" created="Sun, 14 Jul 2013 14:52:00 +0100"  >&lt;p&gt;Instead of removing this at the build.xml level why not just use the @Ignore annotation on the test?&lt;/p&gt;</comment>
                            <comment id="13708082" author="shralex" created="Sun, 14 Jul 2013 18:30:07 +0100"  >&lt;p&gt;good idea, I didn&apos;t know about this option&lt;/p&gt;</comment>
                            <comment id="13708089" author="hadoopqa" created="Sun, 14 Jul 2013 19:02:29 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592208/ZOOKEEPER-1629-ver1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592208/ZOOKEEPER-1629-ver1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1498732.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1513//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1513//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1513//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1513//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1513//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1513//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13708091" author="fournc" created="Sun, 14 Jul 2013 19:15:52 +0100"  >&lt;p&gt;Not to belabor this too much since I am super eager to get this done, but of course my second thought on this is do we just remove the test entirely? Is it providing value living in the code base albiet not run? There&apos;s a lot of code in the test class so I&apos;m not sure if it&apos;s worth keeping or not, but if we&apos;re going to disable it maybe we should just remove the class entirely.&lt;/p&gt;</comment>
                            <comment id="13708093" author="shralex" created="Sun, 14 Jul 2013 19:29:42 +0100"  >&lt;p&gt;The main thing I liked about this test is its use of PortForwarder, which is actually implemented in a separate file. But the test is the only example of how to use it. &lt;/p&gt;

&lt;p&gt;Perhaps we can take stopForwarding and startForwarding functions from the test and put it in a commented out section in the beginning of PortForwarder.java, just as an example of use, and remove the test ?&lt;/p&gt;</comment>
                            <comment id="13708101" author="fournc" created="Sun, 14 Jul 2013 19:53:20 +0100"  >&lt;p&gt;Hmmm that&apos;s a good point. I think that is the right thing to do, can you make that last change? I will give it a last review and check it in after that!&lt;/p&gt;</comment>
                            <comment id="13708105" author="hadoopqa" created="Sun, 14 Jul 2013 20:42:31 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592211/ZOOKEEPER-1629-ver2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592211/ZOOKEEPER-1629-ver2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1498732.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1514//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1514//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1514//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1514//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1514//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1514//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13708112" author="fournc" created="Sun, 14 Jul 2013 21:10:12 +0100"  >&lt;p&gt;+1 checked in thanks!!&lt;/p&gt;</comment>
                            <comment id="13708116" author="shralex" created="Sun, 14 Jul 2013 21:23:02 +0100"  >&lt;p&gt;thanks!!&lt;/p&gt;</comment>
                            <comment id="13708122" author="hudson" created="Sun, 14 Jul 2013 21:45:27 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #1991 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1991/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1991/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1629&quot; title=&quot;testTransactionLogCorruption occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1629&quot;&gt;&lt;del&gt;ZOOKEEPER-1629&lt;/del&gt;&lt;/a&gt;. testTransactionLogCorruption occasionally fails. (shralex via camille) (camille: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1503045&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1503045&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/TruncateCorruptionTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/util/PortForwarder.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/TruncateTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13708138" author="fournc" created="Sun, 14 Jul 2013 23:19:41 +0100"  >&lt;p&gt;patch for 3.4 branch&lt;/p&gt;</comment>
                            <comment id="13708139" author="hadoopqa" created="Sun, 14 Jul 2013 23:22:18 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592217/ZOOKEEPER-1629-34.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592217/ZOOKEEPER-1629-34.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1503045.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1515//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1515//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13708170" author="shralex" created="Mon, 15 Jul 2013 01:24:03 +0100"  >&lt;p&gt;forgot to add this earlier (was hitting this problem in PortForwarder while debugging the test we removed)&lt;/p&gt;</comment>
                            <comment id="13708187" author="hadoopqa" created="Mon, 15 Jul 2013 02:22:24 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12592222/ZOOKEEPER-1629-small-fix.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12592222/ZOOKEEPER-1629-small-fix.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1503045.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1516//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1516//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1516//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1516//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1516//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1516//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13708188" author="fournc" created="Mon, 15 Jul 2013 02:29:39 +0100"  >&lt;p&gt;Added that small fix.&lt;/p&gt;</comment>
                            <comment id="13708198" author="hudson" created="Mon, 15 Jul 2013 03:03:02 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #1992 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1992/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1992/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1629&quot; title=&quot;testTransactionLogCorruption occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1629&quot;&gt;&lt;del&gt;ZOOKEEPER-1629&lt;/del&gt;&lt;/a&gt;. testTransactionLogCorruption occasionally fails. (shralex via camille) (camille: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1503101&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1503101&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/util/PortForwarder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933744" author="fpj" created="Thu, 13 Mar 2014 18:17:04 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12575640" name="TruncateCorruptionTest-patch.patch" size="5292" author="shralex" created="Wed, 27 Mar 2013 02:21:02 +0000"/>
                            <attachment id="12592217" name="ZOOKEEPER-1629-34.patch" size="15324" author="fournc" created="Sun, 14 Jul 2013 23:19:41 +0100"/>
                            <attachment id="12592222" name="ZOOKEEPER-1629-small-fix.patch" size="2328" author="shralex" created="Mon, 15 Jul 2013 01:24:03 +0100"/>
                            <attachment id="12592208" name="ZOOKEEPER-1629-ver1.patch" size="3046" author="shralex" created="Sun, 14 Jul 2013 18:27:07 +0100"/>
                            <attachment id="12592211" name="ZOOKEEPER-1629-ver2.patch" size="16695" author="shralex" created="Sun, 14 Jul 2013 20:09:16 +0100"/>
                            <attachment id="12592182" name="ZOOKEEPER-1629.patch" size="3662" author="shralex" created="Sun, 14 Jul 2013 04:46:02 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Mar 2013 03:07:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hz7t7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>289702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>