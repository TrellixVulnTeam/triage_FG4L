<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:40:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-272/ZOOKEEPER-272.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-272] getChildren can fail for large numbers of children</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-272</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Zookeeper allows creation of an abritrary number of children, yet if the String array of children names exceeds 4,194,304 bytes a getChildren will fail because ClientCnxn$SendThread.readLength() throws an exception on line 490.  Mahadev Konar questioned this byte limit&apos;s need.  In any case consistency of create children, get children should exist.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412310">ZOOKEEPER-272</key>
            <summary>getChildren can fail for large numbers of children</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mahadev">Mahadev konar</assignee>
                                    <reporter username="jtuberville">Joshua Tuberville</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Jan 2009 18:15:32 +0000</created>
                <updated>Fri, 13 Feb 2009 21:18:54 +0000</updated>
                            <resolved>Thu, 29 Jan 2009 23:22:12 +0000</resolved>
                                                    <fixVersion>3.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12663418" author="breed" created="Tue, 13 Jan 2009 18:53:44 +0000"  >&lt;p&gt;I think there are two stages to fixing this problem. First we should make that line of code use BinaryInputArchive.maxBuffer, so that it can be configured. Then we should probably add a version of getChildren that takes and returns an offset, so that getChildren could be called multiple times to get all of the children.&lt;/p&gt;</comment>
                            <comment id="12663422" author="mahadev" created="Tue, 13 Jan 2009 19:01:21 +0000"  >&lt;p&gt;returning an offset for getchildren is a good suggestion.... should we just fix the limit in this jira and open another one for getchildren returning an offset ? fixing the limit would be easir to do and can be a part of 3.1 release.&lt;/p&gt;</comment>
                            <comment id="12663890" author="mahadev" created="Wed, 14 Jan 2009 21:18:31 +0000"  >&lt;p&gt;i think the limit should be fixed in 3.1 release and we can open a new jira for getchildren api.... &lt;/p&gt;</comment>
                            <comment id="12668364" author="mahadev" created="Thu, 29 Jan 2009 07:27:03 +0000"  >&lt;p&gt;this patch allows tthe user to set java property jute.maxbuffer at the client. This value is used at the client to throw an error if the read len of value exceeds the set value. By default its set to 4MB.&lt;br/&gt;
if the user wants to cahnge this value, he can do it via setting java property &lt;br/&gt;
-Djute.maxbuffer=someintvalue&lt;/p&gt;</comment>
                            <comment id="12668371" author="nitay" created="Thu, 29 Jan 2009 08:24:53 +0000"  >&lt;p&gt;What about having getChildren() return an Iterator&amp;lt;String&amp;gt; instead of a List&amp;lt;String&amp;gt;? Using such an abstraction allows us to put the implementation details of what &quot;walking the list children&quot; mean inside ZooKeeper instead of client code. With an Iterator we can make the next() call handle the multiple offset getChildren() calls under the hood, rather than put this burden on the client. Furthermore, if we have, say, some compressed protocol, a lot of space/cpu can be saved by only decompressing/storing the current child being worked on.&lt;/p&gt;</comment>
                            <comment id="12668373" author="mahadev" created="Thu, 29 Jan 2009 08:29:45 +0000"  >&lt;p&gt;sorry i should have mentioned this earlier. I planned to open a jira for exactly what you mentioned above.  Thsi fix is a quick fix for the upcoming release.&lt;/p&gt;</comment>
                            <comment id="12668532" author="jtuberville" created="Thu, 29 Jan 2009 17:52:21 +0000"  >&lt;p&gt;Consider returning Iterable&amp;lt;String&amp;gt; instead of Iterator&amp;lt;String&amp;gt; so you can take advantage of Java 5 foreach idiom&lt;/p&gt;

&lt;p&gt;for (String child : foo.getChildren()) &lt;/p&gt;
{
    
// Something done with child

}

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Iterable.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Iterable.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12668652" author="breed" created="Thu, 29 Jan 2009 22:57:48 +0000"  >&lt;p&gt;This is a good comment, but it should be tracked in a separate Jira.&lt;/p&gt;</comment>
                            <comment id="12668662" author="mahadev" created="Thu, 29 Jan 2009 23:22:12 +0000"  >&lt;p&gt;i just committed this. Ill open a new jira for the above discussion.&lt;/p&gt;</comment>
                            <comment id="12669570" author="hudson" created="Mon, 2 Feb 2009 11:49:19 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #217 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/217/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/217/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398979" name="ZOOKEEPER-272.patch" size="1361" author="mahadev" created="Thu, 29 Jan 2009 07:27:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Jan 2009 18:53:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzvwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33154</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>