<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:48:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-609/ZOOKEEPER-609.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-609] ObserverTest failure &quot;zk should not be connected expected not same&quot;</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-609</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;ObserverTest failed running on 8core&lt;/p&gt;

&lt;p&gt;I ran the test as:&lt;/p&gt;

&lt;p&gt;ant -Dtest.junit.output.format=xml -Dtest.output -Dtestcase=AsyncHammerTest clean test-core-java &amp;amp;&amp;gt; test.out&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442370">ZOOKEEPER-609</key>
            <summary>ObserverTest failure &quot;zk should not be connected expected not same&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henryr">Henry Robinson</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2009 19:32:32 +0000</created>
                <updated>Fri, 26 Mar 2010 17:25:08 +0000</updated>
                            <resolved>Wed, 16 Dec 2009 18:29:54 +0000</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>quorum</component>
                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12785466" author="phunt" created="Thu, 3 Dec 2009 19:34:39 +0000"  >&lt;p&gt;what does this error message mean btw? might be good to also update the text to be more sensical.&lt;/p&gt;</comment>
                            <comment id="12785601" author="henryr" created="Thu, 3 Dec 2009 22:54:30 +0000"  >&lt;p&gt;The error is due to the fact that the client should stop being connected to a cluster when it is not quorate (the test mimics the failure of one follower in a 2-follower, 1-observer cluster). This error message is printed when an event is received that we are expecting to be the disconnect event, so KeeperState should != SyncConnected. &lt;/p&gt;

&lt;p&gt;It is possible that there&apos;s an extra message being received before the disconnect event. I&apos;m having difficulties recreating the failure with extra logging dialled in, unfortunately - I&apos;ll keep plugging away. &lt;/p&gt;</comment>
                            <comment id="12787713" author="phunt" created="Tue, 8 Dec 2009 20:15:44 +0000"  >&lt;p&gt;latest failure on hudson is this issue:&lt;br/&gt;
&lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/ZooKeeper/job/ZooKeeper-trunk/606/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/view/ZooKeeper/job/ZooKeeper-trunk/606/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12791262" author="henryr" created="Wed, 16 Dec 2009 08:20:25 +0000"  >&lt;p&gt;Found an issue: notification of an event is done before the event is saved, so there&apos;s a possibility that the main thread will get woken up and see the old event rather than the new one. This patch fixes.&lt;/p&gt;

&lt;p&gt;I can&apos;t reproduce the issue on either of my test machines, so we will have to rely on Hudson.&lt;/p&gt;</comment>
                            <comment id="12791270" author="hadoopqa" created="Wed, 16 Dec 2009 08:48:46 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12428141/ZOOKEEPER-609.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12428141/ZOOKEEPER-609.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 891034.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/27/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/27/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/27/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/27/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/27/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h7.grid.sp2.yahoo.net/27/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12791476" author="phunt" created="Wed, 16 Dec 2009 17:43:36 +0000"  >&lt;p&gt;I re-ran the test with the provide patch and now see an NPE:&lt;/p&gt;

&lt;p&gt;Testcase: testObserver took 30.167 sec&lt;br/&gt;
        FAILED&lt;br/&gt;
waiting for server 1 being up&lt;br/&gt;
junit.framework.AssertionFailedError: waiting for server 1 being up&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.ObserverTest.testObserver(ObserverTest.java:87)&lt;/p&gt;

&lt;p&gt;Testcase: testSingleObserver took 30.109 sec&lt;br/&gt;
        Caused an ERROR&lt;br/&gt;
null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPeerMain.shutdown(QuorumPeerMain.java:147)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPeerMainTest$TestQPMain.shutdown(QuorumPeerMainTest.java:62)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPeerTestBase$MainThread.shutdown(QuorumPeerTestBase.java:97)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.ObserverTest.testSingleObserver(ObserverTest.java:189)&lt;/p&gt;

&lt;p&gt;Testcase: testLeaderElectionFail took 0.002 sec&lt;/p&gt;</comment>
                            <comment id="12791477" author="phunt" created="Wed, 16 Dec 2009 17:45:37 +0000"  >&lt;p&gt;Btw, failure was on jvm 1.6.0_17 as run by:&lt;/p&gt;

&lt;p&gt; ant -Dtestcase=ObserverTest clean test-core-java&lt;/p&gt;

&lt;p&gt;this is 8core linux (same as this: &lt;a href=&quot;http://wiki.apache.org/hadoop/ZooKeeper/ServiceLatencyOverview#Hardware&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/ZooKeeper/ServiceLatencyOverview#Hardware&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12791485" author="henryr" created="Wed, 16 Dec 2009 17:55:53 +0000"  >&lt;p&gt;Patrick - &lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-630&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-630&lt;/a&gt; - there are duplicate ObserverTest.java files in trunk. This failure is in one removed by that patch.&lt;/p&gt;

&lt;p&gt;Can you try applying 630, then this patch, then trying?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Henry&lt;/p&gt;</comment>
                            <comment id="12791510" author="phunt" created="Wed, 16 Dec 2009 18:29:54 +0000"  >&lt;p&gt;+1 with &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-630&quot; title=&quot;Trunk has duplicate ObserverTest.java files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-630&quot;&gt;&lt;del&gt;ZOOKEEPER-630&lt;/del&gt;&lt;/a&gt; the tests now pass for me. Thanks Henry&lt;/p&gt;</comment>
                            <comment id="12792090" author="hudson" created="Thu, 17 Dec 2009 19:33:09 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #632 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/632/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/632/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426799" name="TEST-org.apache.zookeeper.server.quorum.ObserverTest.xml" size="206067" author="phunt" created="Thu, 3 Dec 2009 19:33:01 +0000"/>
                            <attachment id="12428141" name="ZOOKEEPER-609.patch" size="3082" author="henryr" created="Wed, 16 Dec 2009 08:20:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Dec 2009 22:54:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzus7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>