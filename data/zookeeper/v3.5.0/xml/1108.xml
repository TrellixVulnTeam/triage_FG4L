<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:48:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1108/ZOOKEEPER-1108.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1108] Various bugs in zoo_add_auth in C</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1108</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;3 issues:&lt;br/&gt;
In zoo_add_auth: there is a race condition:&lt;br/&gt;
   2940     // &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-800&quot; title=&quot;zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-800&quot;&gt;&lt;del&gt;ZOOKEEPER-800&lt;/del&gt;&lt;/a&gt; zoo_add_auth should return ZINVALIDSTATE if&lt;br/&gt;
   2941     // the connection is closed.&lt;br/&gt;
   2942     if (zoo_state(zh) == 0) &lt;/p&gt;
{
   2943         return ZINVALIDSTATE;
   2944     }
&lt;p&gt;when we do zookeeper_init, the state is initialized to 0 and above we check if state = 0 then throw exception.&lt;br/&gt;
There is a race condition where the doIo thread is slow and has not changed the state to CONNECTING, then you end up returning back ZKINVALIDSTATE.&lt;br/&gt;
The problem is we use 0 for CLOSED state and UNINITIALIZED state. in case of uninitialized case it should let it go through.&lt;/p&gt;

&lt;p&gt;2nd issue:&lt;/p&gt;

&lt;p&gt;Another Bug: in send_auth_info, the check is not correct&lt;/p&gt;

&lt;p&gt;while (auth-&amp;gt;next != NULL) &lt;/p&gt;
{ //--BUG: in cases where there is only one auth in the list, this will never send that auth, as its next will be NULL 
   rc = send_info_packet(zh, auth); 
   auth = auth-&amp;gt;next; 
}

&lt;p&gt;FIX IS:&lt;br/&gt;
do &lt;/p&gt;
{ 
  rc = send_info_packet(zh, auth); 
  auth = auth-&amp;gt;next; 
 }
&lt;p&gt; while (auth != NULL); //this will make sure that even if there is one auth ,that will get sent.&lt;/p&gt;

&lt;p&gt;3rd issue:&lt;br/&gt;
   2965     add_last_auth(&amp;amp;zh-&amp;gt;auth_h, authinfo);&lt;br/&gt;
   2966     zoo_unlock_auth(zh);&lt;br/&gt;
   2967&lt;br/&gt;
   2968     if(zh-&amp;gt;state == ZOO_CONNECTED_STATE || zh-&amp;gt;state == ZOO_ASSOCIATING_STATE)&lt;br/&gt;
   2969         return send_last_auth_info(zh);&lt;/p&gt;

&lt;p&gt;if it is connected, we only send the last_auth_info, which may be different than the one we added, as we unlocked it before sending it.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12511408">ZOOKEEPER-1108</key>
            <summary>Various bugs in zoo_add_auth in C</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dheerajagrawal">Dheeraj Agrawal</assignee>
                                    <reporter username="dheerajagrawal">Dheeraj Agrawal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2011 22:02:34 +0100</created>
                <updated>Wed, 23 Nov 2011 19:22:45 +0000</updated>
                            <resolved>Fri, 9 Sep 2011 03:27:39 +0100</resolved>
                                    <version>3.3.3</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13054135" author="dheerajagrawal" created="Thu, 23 Jun 2011 23:13:13 +0100"  >&lt;p&gt;Another Bug: in send_auth_info, the check is not correct&lt;/p&gt;

&lt;p&gt; while (auth-&amp;gt;next != NULL) &lt;/p&gt;
{  //--BUG: in cases where there is only one auth in the list, this will never send that auth, as its next will be NULL
        rc = send_info_packet(zh, auth);
        auth = auth-&amp;gt;next;
    }

&lt;p&gt;FIX IS:&lt;br/&gt;
 do  &lt;/p&gt;
{
        rc = send_info_packet(zh, auth);
        auth = auth-&amp;gt;next;
    }
&lt;p&gt; while (auth != NULL); //this will make sure that even if there is one auth ,that will get sent.&lt;/p&gt;
</comment>
                            <comment id="13054502" author="dheerajagrawal" created="Fri, 24 Jun 2011 16:29:52 +0100"  >&lt;p&gt;another bug&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;    303 static void mark_active_auth(zhandle_t *zh) {&lt;br/&gt;
    304     auth_list_head_t auth_h = zh-&amp;gt;auth_h;&lt;br/&gt;
    305     auth_info *element;&lt;br/&gt;
    306     if (auth_h.auth == NULL) &lt;/p&gt;
{
    307         return;
    308     }
&lt;p&gt;    309     element = auth_h.auth;&lt;br/&gt;
    310     while (element-&amp;gt;next != NULL) &lt;/p&gt;
{
    311         element-&amp;gt;state = 1;
    312         element = element-&amp;gt;next;
    313     }
&lt;p&gt;    314 }&lt;br/&gt;
    315&lt;/p&gt;
{no format}&lt;br/&gt;
&lt;br/&gt;
Here as well we are skipping the first node in the list and in case of N nodes , we will skip processing the last one. &lt;br class=&quot;atl-forced-newline&quot; /&gt;
It should be changed to{no format}
&lt;p&gt;310 while (element != NULL) {&lt;/p&gt;
{no format}</comment>
                            <comment id="13054507" author="dheerajagrawal" created="Fri, 24 Jun 2011 16:39:16 +0100"  >&lt;p&gt;Not sure if this is a bug or behavior:&lt;/p&gt;

&lt;p&gt;When we get a auth response, every time we process any auth_response, we call all the auth completions (might be registered by different add_auth_info calls). Is that intended? Or should we be calling only the one that the request came from? I guess we dont know for which request the response corresponds to? If the requests are processed in FIFO and response are got in order then may be we can figure out which add_auth info request the response corresponds to.&lt;/p&gt;

&lt;p&gt;We never remove entries from the auth_list, is that intended?&lt;/p&gt;

&lt;p&gt;Also the logging is misleading. &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;   1193     if (rc) &lt;/p&gt;
{
   1194         LOG_ERROR((&quot;Authentication scheme %s failed. Connection closed.&quot;,
   1195                    zh-&amp;gt;auth_h.auth-&amp;gt;scheme));
   1196     }
&lt;p&gt;   1197     else &lt;/p&gt;
{
   1198         LOG_INFO((&quot;Authentication scheme %s succeeded&quot;, zh-&amp;gt;auth_h.auth-&amp;gt;scheme));
   1199     }


&lt;p&gt;If there are multiple auth_info in the auth_list , we always print success/failure for ONLY the first one. So if i had two auths for scehmes, ABCD and EFGH and my auth scheme EFGH failed, the logs will still say ABCD failed.&lt;/p&gt;</comment>
                            <comment id="13057444" author="dheerajagrawal" created="Wed, 29 Jun 2011 21:07:42 +0100"  >&lt;p&gt;Attached patch for 2 bugs listed in here, where the list traversal is not correct. &lt;/p&gt;</comment>
                            <comment id="13057455" author="hadoopqa" created="Wed, 29 Jun 2011 21:34:16 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12484681/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12484681/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1140017.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/358//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/358//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/358//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/358//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/358//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/358//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13062096" author="hadoopqa" created="Fri, 8 Jul 2011 19:27:30 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12484681/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12484681/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1144087.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/385//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/385//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/385//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/385//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/385//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/385//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13064845" author="mahadev" created="Wed, 13 Jul 2011 22:06:51 +0100"  >&lt;p&gt;Dheeraj,&lt;br/&gt;
 Are you going to open new jiras for the others issues? &lt;/p&gt;</comment>
                            <comment id="13064876" author="dheerajagrawal" created="Wed, 13 Jul 2011 22:32:58 +0100"  >&lt;p&gt;I can.. what do you recommend. we can check in this 2 bug fixes and resolve this and i can open another tracker for outstanding issues.&lt;/p&gt;</comment>
                            <comment id="13067211" author="dheerajagrawal" created="Mon, 18 Jul 2011 19:51:48 +0100"  >&lt;p&gt;Opened following 2 trackers for the outstanding issues.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1126&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1126&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1127&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1127&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13067304" author="dheerajagrawal" created="Mon, 18 Jul 2011 22:13:13 +0100"  >&lt;p&gt;Added test case and fix for #1126&lt;/p&gt;</comment>
                            <comment id="13067305" author="dheerajagrawal" created="Mon, 18 Jul 2011 22:17:56 +0100"  >&lt;p&gt;The attached patch is for issue: where the auth requests (first one) are not sent to server if the client has not yet connected to server (and state has not yet transitioned into ZOO_CONNECTING) , due to bug in send_auth_info. to write a test case for this, i had to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1126&quot; title=&quot;state of zk_handle should NOT be initialized to 0 (CLOSED) in zokeeper_init. It should have a not initialized state.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1126&quot;&gt;&lt;del&gt;ZOOKEEPER-1126&lt;/del&gt;&lt;/a&gt; first, as without that fix, zoo_add_auth will always return ZKINVALIDSTATE.&lt;br/&gt;
I will update and close &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1126&quot; title=&quot;state of zk_handle should NOT be initialized to 0 (CLOSED) in zokeeper_init. It should have a not initialized state.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1126&quot;&gt;&lt;del&gt;ZOOKEEPER-1126&lt;/del&gt;&lt;/a&gt; (as its patch is also available in this).&lt;/p&gt;
</comment>
                            <comment id="13067325" author="hadoopqa" created="Mon, 18 Jul 2011 22:45:34 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12486924/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12486924/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1146961.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13076269" author="dheerajagrawal" created="Tue, 2 Aug 2011 16:33:36 +0100"  >&lt;p&gt;Mahadev/Michi, is there anything remaining / pending for me in this patch to be able to be checked in?&lt;br/&gt;
We would like this patch to be accepted and included in 3.4&lt;/p&gt;</comment>
                            <comment id="13076271" author="dheerajagrawal" created="Tue, 2 Aug 2011 16:35:11 +0100"  >&lt;p&gt;Also a note regarding the tests, All tests pass when i run it locally using gcc-3.4.6 and gcc-3.2.3. Not sure why it complained here.&lt;/p&gt;</comment>
                            <comment id="13076274" author="mahadev" created="Tue, 2 Aug 2011 16:39:36 +0100"  >&lt;p&gt;Dheeraj, Looks like some really bad failure in the tests. Can you take a look and see?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     [exec] Zookeeper_watchers::testChildWatcher2 : elapsed 103 : OK
     [exec]      [exec] *** glibc detected *** ./zktest-mt: malloc(): memory corruption: 0x00002affc7a83010 ***
     [exec]      [exec] ======= Backtrace: =========
     [exec]      [exec] OK (57)
     [exec]      [exec] /lib/libc.so.6[0x2affc88c701f]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13076276" author="mahadev" created="Tue, 2 Aug 2011 16:40:52 +0100"  >&lt;p&gt;Here is the link to console output:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/400/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13076280" author="dheerajagrawal" created="Tue, 2 Aug 2011 16:48:41 +0100"  >&lt;p&gt;Yeah, i tired to run them locally and i didn&apos;t see any issues. Let me rerun with a clean checkout. I will update the thread soon.&lt;/p&gt;</comment>
                            <comment id="13078920" author="dheerajagrawal" created="Wed, 3 Aug 2011 19:49:15 +0100"  >&lt;p&gt;I did a fresh checkout and ran the tests through ant and all tests pass.&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; Zookeeper_watchers::testObjectSessionWatcher2 : elapsed 63 : OK&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; Zookeeper_watchers::testNodeWatcher1 : elapsed 60 : OK&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; Zookeeper_watchers::testChildWatcher1 : elapsed 107 : OK&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; Zookeeper_watchers::testChildWatcher2 : elapsed 109 : OK&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; OK (56)&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;/p&gt;

&lt;p&gt;Can you re-trigger the build/test for this patch? I tried to trigger it by re-uploading the patch, but that didn&apos;t help.&lt;/p&gt;</comment>
                            <comment id="13078922" author="mahadev" created="Wed, 3 Aug 2011 19:51:45 +0100"  >&lt;p&gt;Dheeraj,&lt;br/&gt;
 The pre commit build servers are down. We are waiting for them to come up so that we can get back on track with 3.4 release.&lt;/p&gt;</comment>
                            <comment id="13082886" author="hadoopqa" created="Thu, 11 Aug 2011 04:44:48 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12489102/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12489102/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1152141.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13082947" author="mahadev" created="Thu, 11 Aug 2011 07:03:48 +0100"  >&lt;p&gt;Looks like memory corruption in the tests. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/438/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Dheeraj, can you please take a look?&lt;/p&gt;</comment>
                            <comment id="13083162" author="dheerajagrawal" created="Thu, 11 Aug 2011 16:25:03 +0100"  >&lt;p&gt;Added a zk_close to the new tests, to see if it makes any difference&lt;/p&gt;</comment>
                            <comment id="13083180" author="hadoopqa" created="Thu, 11 Aug 2011 16:53:31 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12490123/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12490123/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1156649.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/452//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/452//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/452//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/452//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/452//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/452//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13084345" author="dheerajagrawal" created="Fri, 12 Aug 2011 21:12:10 +0100"  >&lt;p&gt;Mahadev, can you review the patch and check it in , if all looks good to you? All tests are passing now without any issues.&lt;/p&gt;</comment>
                            <comment id="13084360" author="mahadev" created="Fri, 12 Aug 2011 21:28:27 +0100"  >&lt;p&gt;thanks dheeraj,&lt;br/&gt;
 Will do  today/tommorrow.&lt;/p&gt;</comment>
                            <comment id="13084920" author="mahadev" created="Mon, 15 Aug 2011 01:24:07 +0100"  >&lt;p&gt;Dheeraj,&lt;br/&gt;
 Looks like you added, the new state of NOT_CONNECTED_STATE in the header definitions. That probably needs a little more work, since the java client will need to have similar changes. I&apos;d say we get rid of the new state in this patch! Makes sense?&lt;/p&gt;</comment>
                            <comment id="13085084" author="dheerajagrawal" created="Mon, 15 Aug 2011 14:43:36 +0100"  >&lt;p&gt;If we get rid of the new state, then we will have to get rid of the tests as well. As we cant test it without having the new state, as zk_init will return INVALID state in that case.&lt;br/&gt;
This new state is not publicly exposed.&lt;br/&gt;
We already have a different state in java (NULL) . In C, we are using 0 for both CLOSED state and NOT_CONNECTED state. In java, NOT_CONNECTED state is null.&lt;/p&gt;</comment>
                            <comment id="13085730" author="fournc" created="Tue, 16 Aug 2011 15:25:33 +0100"  >&lt;p&gt;Mahadev, what do you say? We would like to get this into 3.4 since it causes us a lot of grief with the auth in the C client. I think Dheeraj&apos;s point is good, and the Java and C clients are already divergent enough in this manner that this shouldn&apos;t be an issue.&lt;/p&gt;</comment>
                            <comment id="13091233" author="dheerajagrawal" created="Thu, 25 Aug 2011 20:16:52 +0100"  >&lt;p&gt;Adding java changes to the patch&lt;/p&gt;</comment>
                            <comment id="13091256" author="hadoopqa" created="Thu, 25 Aug 2011 20:44:17 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12491680/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12491680/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1159929.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/474//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/474//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/474//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/474//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/474//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/474//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13100881" author="hadoopqa" created="Fri, 9 Sep 2011 03:24:28 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12491680/ZOOKEEPER-1108.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12491680/ZOOKEEPER-1108.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1165443.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/519//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/519//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/519//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/519//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/519//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/519//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13100886" author="mahadev" created="Fri, 9 Sep 2011 03:27:39 +0100"  >&lt;p&gt;I just committed this. Thanks Dheeraj!&lt;/p&gt;</comment>
                            <comment id="13101117" author="hudson" created="Fri, 9 Sep 2011 12:02:03 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1299 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1299/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1299/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1108&quot; title=&quot;Various bugs in zoo_add_auth in C&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1108&quot;&gt;&lt;del&gt;ZOOKEEPER-1108&lt;/del&gt;&lt;/a&gt;. Various bugs in zoo_add_auth in C. (Dheeraj Agrawal via mahadev)&lt;/p&gt;

&lt;p&gt;mahadev : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1166970&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1166970&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zk_adaptor.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zookeeper.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestClient.cc&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestZookeeperInit.cc&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491680" name="ZOOKEEPER-1108.patch" size="4261" author="dheerajagrawal" created="Thu, 25 Aug 2011 20:16:52 +0100"/>
                            <attachment id="12490123" name="ZOOKEEPER-1108.patch" size="3227" author="dheerajagrawal" created="Thu, 11 Aug 2011 16:24:09 +0100"/>
                            <attachment id="12489102" name="ZOOKEEPER-1108.patch" size="3159" author="dheerajagrawal" created="Tue, 2 Aug 2011 20:01:42 +0100"/>
                            <attachment id="12486924" name="ZOOKEEPER-1108.patch" size="3159" author="dheerajagrawal" created="Mon, 18 Jul 2011 22:13:13 +0100"/>
                            <attachment id="12484681" name="ZOOKEEPER-1108.patch" size="612" author="dheerajagrawal" created="Wed, 29 Jun 2011 21:08:41 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jun 2011 20:34:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzt7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>