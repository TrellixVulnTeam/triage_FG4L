<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:48:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-962/ZOOKEEPER-962.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-962] leader/follower coherence issue when follower is receiving a DIFF</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-962</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;From mailing list:&lt;br/&gt;
It seems like we rely on the LearnerHandler thread startup to capture all of the missing committed&lt;br/&gt;
transactions in the SNAP or DIFF, but I don&apos;t see anything (especially in the DIFF case) that&lt;br/&gt;
is preventing us for committing more transactions before we actually start forwarding updates&lt;br/&gt;
to the new follower.&lt;/p&gt;

&lt;p&gt;Let me explain using my example from &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-919&quot; title=&quot;Ephemeral nodes remains in one of ensemble after deliberate SIGKILL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-919&quot;&gt;&lt;del&gt;ZOOKEEPER-919&lt;/del&gt;&lt;/a&gt;. Assume we have quorum already, so the&lt;br/&gt;
leader can be processing transactions while my follower is starting up.&lt;/p&gt;

&lt;p&gt;I&apos;m a follower at zxid N-5, the leader is at N. I send my FOLLOWERINFO packet to the leader&lt;br/&gt;
with that information. The leader gets the proposals from its committed log (time T1), then&lt;br/&gt;
syncs on the proposal list (LearnerHandler line 267. Why? It&apos;s a copy of the underlying proposal&lt;br/&gt;
list... this might be part of our problem). I check to see if the peerLastZxid is within my&lt;br/&gt;
max and min committed log and it is, so I&apos;m going to send a diff. I set the zxidToSend to&lt;br/&gt;
be the maxCommittedLog at time T3 (we already know this is sketchy), and forward the proposals&lt;br/&gt;
from my copied proposal list starting at the peerLastZxid+1 up to the last proposal transaction&lt;br/&gt;
(as seen at time T1).&lt;/p&gt;

&lt;p&gt;After I have queued up all those diffs to send, I tell the leader to startFowarding updates&lt;br/&gt;
to this follower (line 308). &lt;/p&gt;

&lt;p&gt;So, let&apos;s say that at time T2 I actually swap out the leader to the thread that is handling&lt;br/&gt;
the various request processors, and see that I got enough votes to commit zxid N+1. I commit&lt;br/&gt;
N+1 and so my maxCommittedLog at T3 is N+1, but this proposal is not in the list of proposals&lt;br/&gt;
that I got back at time T1, so I don&apos;t forward this diff to the client. Additionally, I processed&lt;br/&gt;
the commit and removed it from my leader&apos;s toBeApplied list. So when I call startForwarding&lt;br/&gt;
for this new follower, I don&apos;t see this transaction as a transaction to be forwarded. &lt;/p&gt;

&lt;p&gt;There&apos;s one problem. Let&apos;s also imagine, however, that I commit N+1 at time T4. The maxCommittedLog&lt;br/&gt;
value is consistent with the max of the diff packets I am going to send the follower. But,&lt;br/&gt;
I still committed N+1 and removed it from the toBeApplied list before calling startFowarding&lt;br/&gt;
with this follower. How does the follower get this transaction? Does it?&lt;/p&gt;

&lt;p&gt;To put it another way, here is the thread interaction, hopefully formatted so you can read&lt;br/&gt;
it...&lt;/p&gt;

&lt;p&gt;		LearnerHandlerThread					RequestProcessorThread&lt;br/&gt;
T1(LH):	get list of proposals (COPY)&lt;br/&gt;
T2(RPT):								commit N+1, remove from toBeApplied&lt;br/&gt;
T3(LH):	get maxCommittedLog&lt;br/&gt;
T4(LH):	send diffs from view at T1&lt;br/&gt;
T5(LH):	startForwarding&lt;/p&gt;


&lt;p&gt;Or&lt;br/&gt;
T1(LH):	get list of proposals (COPY)&lt;br/&gt;
T2(LH):	get maxCommittedLog&lt;br/&gt;
T3(RPT):								commit N+1, remove from toBeApplied&lt;br/&gt;
T4(LH):	send diffs from view at T1&lt;br/&gt;
T5(LH):	startFowarding&lt;/p&gt;


&lt;p&gt;I&apos;m trying to figure out what, if anything, keeps the requests from being committed, removed,&lt;br/&gt;
and never seen by the follower before it fully starts up. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12493781">ZOOKEEPER-962</key>
            <summary>leader/follower coherence issue when follower is receiving a DIFF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chl501">ChiaHung Lin</assignee>
                                    <reporter username="fournc">Camille Fournier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Dec 2010 18:42:59 +0000</created>
                <updated>Wed, 23 Nov 2011 19:22:24 +0000</updated>
                            <resolved>Sun, 23 Jan 2011 05:31:02 +0000</resolved>
                                    <version>3.3.2</version>
                                    <fixVersion>3.3.3</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12973871" author="mahadev" created="Tue, 21 Dec 2010 20:44:18 +0000"  >&lt;p&gt;this should go into 3.3.&lt;/p&gt;</comment>
                            <comment id="12976713" author="vishalmlst" created="Mon, 3 Jan 2011 12:26:41 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;May I please request an expected date for this fix? We are working on releasing our product in a month and I think this is a serious enough bug that might block our release. It will be very helpful to know when the fix is coming.&lt;/p&gt;

&lt;p&gt;Thanks for your help.&lt;/p&gt;</comment>
                            <comment id="12976850" author="fournc" created="Mon, 3 Jan 2011 18:08:36 +0000"  >&lt;p&gt;I think the fix for this will be twofold:&lt;br/&gt;
First, I think the work that is currently done in LearnerHandler.run to set up packets to forward or not, should be done in leader.startForwarding. This method is synchronized with processAck, so we can feel confident that no new committed proposals should be written to the zk database while we are forwarding outstanding requests to the new follower&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. We also need to add a proper lock for the committed log, so that we can ensure proper behavior for the proposal list processing for DIFFs.&lt;/p&gt;

&lt;p&gt;In the follower UPTODATE handling, I&apos;m going to try checking for fzk.commitProcessor.committedRequest.isEmpty(), and yield until it is true, before calling fzk.takeSnapshot(). &lt;/p&gt;

&lt;p&gt;I&apos;m working on a patch for this now, let me know if you think this approach sounds fishy. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; Still figuring out the sync issues when we have already received an ack and are in the commitProcessor/etc thread stack and simultaneously processing a startForwarding request.&lt;/p&gt;</comment>
                            <comment id="12977812" author="fournc" created="Wed, 5 Jan 2011 16:07:21 +0000"  >&lt;p&gt;I think in my fixing/testing of this I have hit pretty much every single possible tiny threading bug in the follower resync code, including &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; above (ouch). I am almost done, pending patch approval for release, and I will hopefully have a patch by the end of today. &lt;/p&gt;</comment>
                            <comment id="12977874" author="breed" created="Wed, 5 Jan 2011 17:44:48 +0000"  >&lt;p&gt;that&apos;s great camille. i don&apos;t think the strategy of waiting for committedRequest to be empty will work because it may never be empty: you may have a steady stream of commits coming in.&lt;/p&gt;

&lt;p&gt;i was thinking perhaps we should process the proposals synchronously in the syncWithLeader method and only exit once we get the update. i think this will take care of 919 as well.&lt;/p&gt;

&lt;p&gt;the easiest idea would be to apply the transactions to memory, and then on the UPDATE message, take a snapshot to disk synchronously and ack all of the previous transactions received and then exit the method.&lt;/p&gt;

&lt;p&gt;have you been able to generate a testcase for the problem?&lt;/p&gt;</comment>
                            <comment id="12977879" author="fournc" created="Wed, 5 Jan 2011 17:53:47 +0000"  >&lt;p&gt;Waiting for committedRequests to be empty gives correct behavior (actually, you have to wait for all the queues in commit processor to be empty) , the thread that sends commits to the follower is the same as the thread that sends UPTODATE and the same thread processes commit requests as the UPTODATE. But as soon as I can give you this patch, you&apos;ll have to take a look and tell me what you think. &lt;/p&gt;

&lt;p&gt;I have testcases, yes. They are painful and due to the nature of the bug they don&apos;t always fail even if the bug exists, but I&apos;ve run them enough locally to be relatively confident that they cover the error well enough that my fixes are at least correct, if not perfect. My actual fixes may not be ideal, but at least the tests should allow people to try other approaches and see how they work.&lt;/p&gt;</comment>
                            <comment id="12978009" author="fournc" created="Wed, 5 Jan 2011 22:40:15 +0000"  >&lt;p&gt;Patch to fix this&lt;/p&gt;</comment>
                            <comment id="12978025" author="hadoopqa" created="Wed, 5 Jan 2011 23:10:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12467594/ZOOKEEPER-962.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12467594/ZOOKEEPER-962.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1053497.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 10 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 25 release audit warnings (more than the trunk&apos;s current 24 warnings).&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/81//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12978031" author="fournc" created="Wed, 5 Jan 2011 23:15:31 +0000"  >&lt;p&gt;fix accidental deletion from quorumutil&lt;/p&gt;</comment>
                            <comment id="12978043" author="hadoopqa" created="Wed, 5 Jan 2011 23:43:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12467595/ZOOKEEPER-962.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12467595/ZOOKEEPER-962.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1053497.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 10 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 25 release audit warnings (more than the trunk&apos;s current 24 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/82//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12979267" author="breed" created="Sun, 9 Jan 2011 06:41:56 +0000"  >&lt;p&gt;i gave reviewboard a try: &lt;a href=&quot;https://reviews.apache.org/r/264/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/264/&lt;/a&gt; there are a couple of minor points there&lt;br/&gt;
one thing i&apos;m not quite clear on is how moving to a read/write lock helps.&lt;/p&gt;

&lt;p&gt;i think there is another problem that i think is more related to 919, but since both issues hit them same piece of code, it would probably be good to fix them together. in the case of SNAP, we send a snapshot and then we send diffs to that snapshot, but imagine the following: we start taking a snapshot, S, and while we take the snapshot Z1, Z2, Z3, and Z4 come in; let&apos;s say that the snapshot finishes right after Z4. the follower will get S, and then it will get Z1, which it will log. if the follower, fails and comes back up, it will believe that it has the state up to Z1, which it does not infact have.&lt;/p&gt;

&lt;p&gt;to avoid this problem, i think we should receive S into memory, save off Z1-Z4 into a log in memory, committing them to S if we get a commit, and then when we get an UPTODATE we write out the snapshot and Z1-Z4, and ack Z1-Z4. we can do all this in syncWithLeader and not only the issue i&apos;m pointing out here will be fixed, but also the concurrency issue that you have identified here will go away.&lt;/p&gt;

&lt;p&gt;what do you think?&lt;/p&gt;</comment>
                            <comment id="12979623" author="fournc" created="Mon, 10 Jan 2011 16:22:52 +0000"  >&lt;p&gt;I made a reviewboard for this myself acutally, &lt;a href=&quot;https://reviews.apache.org/r/253/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/253/&lt;/a&gt;, I guess it didn&apos;t get emailed to the group properly? I&apos;ll cancle it and use yours since we&apos;ve already got comments in there.&lt;/p&gt;

&lt;p&gt;Let me see if I understand what you&apos;re getting at:&lt;br/&gt;
We see snap to Z0. We start to see the toBeApplied proposals being forwarded, and we write them to the log, but before we get the UPTODATE (and thus write the snap file to disk), we crash. So we have a log file with Z1, but no snap file with the older data.&lt;/p&gt;

&lt;p&gt;Yes, you&apos;re right, that&apos;s a nasty problem. &lt;/p&gt;

&lt;p&gt;Are you proposing for all packets to UPTODATE in all syncWithLeader scenarios, we process them inside SyncWithLeader, or just the ones for snap?&lt;/p&gt;

&lt;p&gt;I think I can twiddle my test to catch this error, let me look at it. I&apos;m not sure how much time I will have to actually make the fix you are proposing, though, so if you have time to try to add it onto my patch please let me know.&lt;/p&gt;</comment>
                            <comment id="12979648" author="fournc" created="Mon, 10 Jan 2011 17:10:03 +0000"  >&lt;p&gt;I may have overestimated my ability to write even an occasionally-failing test on this one.&lt;/p&gt;

&lt;p&gt;Do you think instead of trying to process all those PROPOSE/COMMITs inside the syncWithLeader loop we should just have the follower take a snapshot immediately after receiving the snapshot in syncWithLeader? That would probably be much easier than trying to do an in-memory log in syncWithLeader and should still provide the same guarantee, at the cost of doing a second snapshot soon after the first.&lt;/p&gt;</comment>
                            <comment id="12979682" author="breed" created="Mon, 10 Jan 2011 18:51:21 +0000"  >&lt;p&gt;yes, you understand the scenario correctly. it is a tricky error case to test for. (i&apos;ve been trying to write a test case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;we don&apos;t really have to do an in-memory log in syncWithLeader, we can actually just apply the the transactions to the in-memory database, ack when we write out the database. hopefully i&apos;ll have time today to modify your patch.&lt;/p&gt;</comment>
                            <comment id="12980612" author="breed" created="Wed, 12 Jan 2011 08:03:22 +0000"  >&lt;p&gt;here is an updated patch. it does the initial processing in the startup thread before anything else is started up so that it avoids any race conditions.&lt;/p&gt;

&lt;p&gt;i had to revert the part that moves everything to startFollowing because it does a heavy weight operation (snapshot) in a synchronized block that will hang the server if the database is very big. we still need to reexamine the locking.&lt;/p&gt;</comment>
                            <comment id="12980621" author="hadoopqa" created="Wed, 12 Jan 2011 08:34:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12468113/ZOOKEEPER-962_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12468113/ZOOKEEPER-962_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1055924.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 25 release audit warnings (more than the trunk&apos;s current 24 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/86//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12980710" author="fournc" created="Wed, 12 Jan 2011 13:40:53 +0000"  >&lt;p&gt;This patch breaks in my &quot;concurrency test suite&quot; which is just a suite that runs my FollowerResyncConcurrencyTest over and over again. I would expect it to break because if we don&apos;t sync the DIFF packet forwarding with the processing of acks we can remove acks from the toBeApplied list between when we forward DIFF packets and when we call startForwarding. I knew the synching was possibly excessive in the first version (looking back I&apos;m not actually remembering why I decided to sync all of the calls together), but we need at least some additional synchronization.&lt;/p&gt;</comment>
                            <comment id="12980840" author="fournc" created="Wed, 12 Jan 2011 18:07:24 +0000"  >&lt;p&gt;One major bug in this patch: You don&apos;t send the actual dataTreeLastProcessedZxid when you send a SNAP packet, so the peer&apos;s snapshot file will have id 0 if no other commit packets come in after it rejoins (since it takes the zxid off the quorum packet SNAP). &lt;br/&gt;
Changing LearnerHandler to set zxid in SNAP QP to dataTreeLastProcessedZxid and rerunning tests.&lt;/p&gt;</comment>
                            <comment id="12980860" author="fournc" created="Wed, 12 Jan 2011 19:01:50 +0000"  >&lt;p&gt;Also doesn&apos;t use my read lock on the proposal list. But I think I have a fix that will properly lock things in DIFF case, leave off the locking in SNAP case, and hopefully please all parties. Will send soon.&lt;/p&gt;</comment>
                            <comment id="12981304" author="breed" created="Thu, 13 Jan 2011 15:59:41 +0000"  >&lt;p&gt;yes, i was just addressing the client side of the problem in my patch. we still need to fix the server.&lt;/p&gt;

&lt;p&gt;one thing that throws me: why isn&apos;t FollowerResyncConcurrencyTest failing on hudson or my machine?&lt;/p&gt;</comment>
                            <comment id="12981311" author="fournc" created="Thu, 13 Jan 2011 16:13:57 +0000"  >&lt;p&gt;Ah cool. Still waiting for patch approval hopefully will give you a patch later today.&lt;/p&gt;

&lt;p&gt;That test is not the awesomest, due to the nature of the beast it will only fail transiently on errors. Also I just realized my tests are really not named well (right now the snap test in fact always creates diffs, and worthless diffs at that). I&apos;m going to tweak it to try to make it more reliably failing.&lt;/p&gt;</comment>
                            <comment id="12981325" author="phunt" created="Thu, 13 Jan 2011 16:43:17 +0000"  >&lt;p&gt;Perhaps more documentation could be added to the test method(s) to detail; 1) the intent of the test, and 2) any quirks - such as the test not being deterministic? (this goes for all tests, not just this one. Something we should do a better job on in general).  Keep up the great work!&lt;/p&gt;</comment>
                            <comment id="12981561" author="fournc" created="Thu, 13 Jan 2011 23:51:17 +0000"  >&lt;p&gt;Attempt #3. Description on the tests, fixes to server side, small fix to Learner on top of Ben&apos;s patch&lt;/p&gt;</comment>
                            <comment id="12981574" author="hadoopqa" created="Fri, 14 Jan 2011 00:24:49 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12468317/ZOOKEEPER-962_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12468317/ZOOKEEPER-962_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1055924.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/87//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/87//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/87//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/87//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/87//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/87//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12981653" author="vishalmlst" created="Fri, 14 Jan 2011 07:20:29 +0000"  >&lt;p&gt;Hi Camille, Ben,&lt;/p&gt;

&lt;p&gt;I have one related question.&lt;/p&gt;

&lt;p&gt;There is a bug in the current implementation (without this patch) in code that sends SNAP to the follower &lt;b&gt;only if&lt;/b&gt; the follower crashes while it is attempting to sync (as described by Ben earlier). Is my understanding correct?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12981780" author="fournc" created="Fri, 14 Jan 2011 14:51:39 +0000"  >&lt;p&gt;Yes, only if the follower crashes before writing out the snap file and after writing a log file.&lt;/p&gt;</comment>
                            <comment id="12983363" author="fournc" created="Tue, 18 Jan 2011 20:23:05 +0000"  >&lt;p&gt;Any thoughts on the latest patch?&lt;/p&gt;</comment>
                            <comment id="12983425" author="breed" created="Tue, 18 Jan 2011 23:08:26 +0000"  >&lt;p&gt;this looks great camille! i have very minor comments but it looks good to go. thanx for all your hard work! btw, the find bugs seems to be messed up. the bugs found don&apos;t seem to be related to the patch.&lt;/p&gt;

&lt;p&gt;my comments are in &lt;a href=&quot;https://reviews.apache.org/r/333/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/333/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;i can fix the indentation if you want me to. i&apos;d like you opinion on the first comment.&lt;/p&gt;</comment>
                            <comment id="12983508" author="breed" created="Wed, 19 Jan 2011 02:43:36 +0000"  >&lt;p&gt;i believe this addresses the problems in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-919&quot; title=&quot;Ephemeral nodes remains in one of ensemble after deliberate SIGKILL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-919&quot;&gt;&lt;del&gt;ZOOKEEPER-919&lt;/del&gt;&lt;/a&gt; as well. correct?&lt;/p&gt;</comment>
                            <comment id="12983718" author="fournc" created="Wed, 19 Jan 2011 14:12:04 +0000"  >&lt;p&gt;Yes this should fix 919.&lt;/p&gt;

&lt;p&gt;If you can fix the indentation that would be helpful thanks.&lt;/p&gt;</comment>
                            <comment id="12983869" author="breed" created="Wed, 19 Jan 2011 19:58:38 +0000"  >&lt;p&gt;fixing comment and indentation&lt;/p&gt;</comment>
                            <comment id="12983904" author="fournc" created="Wed, 19 Jan 2011 22:18:44 +0000"  >&lt;p&gt;I think patch 4 is missing a small fix I added to Learner.syncWithLeader. We can&apos;t call logRequest on the zk in UPTODATE because we haven&apos;t actually started up the zookeeper yet, and you&apos;ll get a NPE if there are proposals that need to be logged.&lt;/p&gt;</comment>
                            <comment id="12983939" author="breed" created="Wed, 19 Jan 2011 23:53:01 +0000"  >&lt;p&gt;is that fix in patch 3? that is also calling logRequest in UPTODATE. right?&lt;/p&gt;</comment>
                            <comment id="12983949" author="fournc" created="Thu, 20 Jan 2011 00:19:59 +0000"  >&lt;p&gt;Hmmmm.... what happened... somehow I sent a version of this patch with some changes but not others? Let me resend, I have no idea how that happened.&lt;/p&gt;</comment>
                            <comment id="12983969" author="fournc" created="Thu, 20 Jan 2011 01:06:17 +0000"  >&lt;p&gt;Apologies, this contains the indent and comment fix, as well as better comments on the tests and the fix in Learner&lt;/p&gt;</comment>
                            <comment id="12983974" author="fournc" created="Thu, 20 Jan 2011 01:12:13 +0000"  >&lt;p&gt;Once more without reformatting all of LearnerHandler&lt;/p&gt;</comment>
                            <comment id="12983992" author="hadoopqa" created="Thu, 20 Jan 2011 01:43:55 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12468808/ZOOKEEPER-962_5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12468808/ZOOKEEPER-962_5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1055924.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/101//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/101//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/101//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/101//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/101//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/101//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12984468" author="breed" created="Thu, 20 Jan 2011 23:34:55 +0000"  >&lt;p&gt;sorry for dragging this out, but it really is important code.&lt;/p&gt;

&lt;p&gt;i think we need a lock around the code where we check for TRUNC and we start forwarding. right? we could run into problems if a commit happens between the calculation of TRUNC and the call to startForwarding.&lt;/p&gt;

&lt;p&gt;btw, one other favor, could you make your editor use spaces instead of tabs? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12984474" author="fournc" created="Thu, 20 Jan 2011 23:39:53 +0000"  >&lt;p&gt;re: tabs, sure, sorry about that.&lt;/p&gt;

&lt;p&gt;Will look at TRUNC. That&apos;s probably why I had all of this stuff in that sync&apos;ed startForwarding in one of the earlier patches. I make no promises about my ability to write a test to repro it tho&lt;/p&gt;</comment>
                            <comment id="12984500" author="breed" created="Fri, 21 Jan 2011 00:11:14 +0000"  >&lt;p&gt;yeah TRUNC almost never happens, so it would be hard to recreate &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12984560" author="breed" created="Fri, 21 Jan 2011 04:24:07 +0000"  >&lt;p&gt;moves the TRUNC calculation into the lock block, which ends up simplifying the code. what do you think camille?&lt;/p&gt;

&lt;p&gt;i&apos;ve also fixed the tabs to spaces.&lt;/p&gt;</comment>
                            <comment id="12984565" author="hadoopqa" created="Fri, 21 Jan 2011 04:53:53 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12468946/ZOOKEEPER-962_6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12468946/ZOOKEEPER-962_6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1055924.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/102//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/102//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/102//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/102//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/102//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/102//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12984760" author="fournc" created="Fri, 21 Jan 2011 15:00:58 +0000"  >&lt;p&gt;This looks good to me, thanks for fixing. Go team!&lt;/p&gt;</comment>
                            <comment id="12985019" author="breed" created="Sat, 22 Jan 2011 01:02:25 +0000"  >&lt;p&gt;+1 running final tests, and will then commit.&lt;/p&gt;</comment>
                            <comment id="12985185" author="breed" created="Sat, 22 Jan 2011 19:36:25 +0000"  >&lt;p&gt;works great for trunk the new FollowerResync test fails on 3.3 even though the patch applies almost perfectly.&lt;/p&gt;</comment>
                            <comment id="12985214" author="fournc" created="Sat, 22 Jan 2011 22:41:57 +0000"  >&lt;p&gt;Taking a look...&lt;/p&gt;</comment>
                            <comment id="12985222" author="fournc" created="Sat, 22 Jan 2011 23:20:05 +0000"  >&lt;p&gt;We need &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-882&quot; title=&quot;Startup loads last transaction from snapshot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-882&quot;&gt;&lt;del&gt;ZOOKEEPER-882&lt;/del&gt;&lt;/a&gt; for this patch to work. Applying that to the 3.3 branch causes the tests to pass. &lt;/p&gt;</comment>
                            <comment id="12985251" author="breed" created="Sun, 23 Jan 2011 05:28:01 +0000"  >&lt;p&gt;great find camille! that fixed it. committing to 3.3 now. thanx for sticking with this!&lt;/p&gt;</comment>
                            <comment id="12985253" author="breed" created="Sun, 23 Jan 2011 05:31:02 +0000"  >&lt;p&gt;trunk: Committed revision 1062244.&lt;br/&gt;
branch-3.3: Committed revision 1062327.&lt;/p&gt;</comment>
                            <comment id="12985290" author="hudson" created="Sun, 23 Jan 2011 10:54:36 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1074 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/1074/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/1074/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-962&quot; title=&quot;leader/follower coherence issue when follower is receiving a DIFF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-962&quot;&gt;&lt;del&gt;ZOOKEEPER-962&lt;/del&gt;&lt;/a&gt;. leader/follower coherence issue when follower is receiving a DIFF&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12479098">ZOOKEEPER-919</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12467595" name="ZOOKEEPER-962.patch" size="29882" author="fournc" created="Wed, 5 Jan 2011 23:15:31 +0000"/>
                            <attachment id="12468113" name="ZOOKEEPER-962_2.patch" size="23278" author="breed" created="Wed, 12 Jan 2011 08:03:22 +0000"/>
                            <attachment id="12468317" name="ZOOKEEPER-962_3.patch" size="30881" author="fournc" created="Thu, 13 Jan 2011 23:51:17 +0000"/>
                            <attachment id="12468784" name="ZOOKEEPER-962_4.patch" size="39975" author="breed" created="Wed, 19 Jan 2011 19:58:38 +0000"/>
                            <attachment id="12468808" name="ZOOKEEPER-962_5.patch" size="35290" author="fournc" created="Thu, 20 Jan 2011 01:12:13 +0000"/>
                            <attachment id="12468946" name="ZOOKEEPER-962_6.patch" size="42805" author="breed" created="Fri, 21 Jan 2011 04:24:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Dec 2010 20:44:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47529</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxztpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>