<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:49:52 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1411/ZOOKEEPER-1411.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1411] Consolidate membership management, distinguish between static and dynamic configuration parameters</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1411</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Currently every server has a different static configuration file. This patch distinguishes between dynamic parameters, which are now in a separate &quot;dynamic configuration file&quot;, and static parameters which are in the usual file. The config file points to the dynamic config file by specifying &quot;dynamicConfigFile=...&quot;. In the first stage (this patch), all cluster membership definitions are in the dynamic config file, but in the future additional parameters may be moved to the dynamic file.&lt;/p&gt;

&lt;p&gt;Backward compatibility makes sure that you can still use a single config file if you&apos;d like. Only when the config is changed (once ZK-107 is in) a dynamic file is automatically created and the necessary parameters are moved to it. &lt;/p&gt;

&lt;p&gt;This patch also moves all membership parsing and management into the QuorumVerifier classes, and removes QuorumPeer.quorumPeers.&lt;br/&gt;
The cluster membership is contained in QuorumPeer.quorumVerifier. QuorumVerifier was expanded and now has methods such as getAllMembers(), getVotingMembers(), getObservingMembers(). &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12545750">ZOOKEEPER-1411</key>
            <summary>Consolidate membership management, distinguish between static and dynamic configuration parameters</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12401266">ZOOKEEPER-107</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shralex">Alexander Shraer</assignee>
                                    <reporter username="shralex">Alexander Shraer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Mar 2012 01:02:51 +0000</created>
                <updated>Thu, 2 May 2013 03:30:03 +0100</updated>
                            <resolved>Tue, 2 Apr 2013 07:33:25 +0100</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13225763" author="shralex" created="Fri, 9 Mar 2012 01:09:41 +0000"  >&lt;p&gt;The patch creates the option to have a config file and a separate membership file.&lt;/p&gt;

&lt;p&gt;-----------&lt;br/&gt;
Example of config file:&lt;/p&gt;


&lt;p&gt;tickTime=2000&lt;br/&gt;
dataDir=/home/shralex/zookeeper-3.3.2/zookeeper1&lt;br/&gt;
initLimit=5&lt;br/&gt;
syncLimit=2&lt;br/&gt;
membershipFile=/home/shralex/zookeeper-3.3.2/conf/zoo_replicated1.members&lt;/p&gt;


&lt;p&gt;Example of membership file:&lt;/p&gt;

&lt;p&gt;server.1=localhost:2780:2783:participant;localhost:2791&lt;br/&gt;
server.2=localhost:2781:2784;2792&lt;br/&gt;
server.3=localhost:2782:2785:participant;2793&lt;/p&gt;

&lt;p&gt;-------------&lt;/p&gt;


&lt;p&gt;the cfg file points to the membership file by specifying &quot;membershipFile&quot;. The membership file has all information about membership and ports. You must specify all client ports in that file - this info is separated by &quot;;&quot; from the usual server info. The cfg file can still include client ports (or hostname and port, but if given they must be the same as in the membership file.&lt;/p&gt;

&lt;p&gt;Backward compatibility: you can still use one configuration file and that would work fine. But, if the configuration changes (will only happen once ZK-107 is in), the config file is automatically split to two files, and the files are updated accordingly.&lt;/p&gt;
</comment>
                            <comment id="13225986" author="hadoopqa" created="Fri, 9 Mar 2012 10:25:25 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517700/ZOOKEEPER-1411-ver1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517700/ZOOKEEPER-1411-ver1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1297740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/981//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/981//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/981//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/981//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/981//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/981//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13226423" author="hadoopqa" created="Fri, 9 Mar 2012 20:32:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517771/ZOOKEEPER-1411-ver2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517771/ZOOKEEPER-1411-ver2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1297740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/983//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/983//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/983//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/983//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/983//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/983//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13226567" author="hadoopqa" created="Fri, 9 Mar 2012 22:51:46 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517798/ZOOKEEPER-1411-ver3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517798/ZOOKEEPER-1411-ver3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1297740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/984//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/984//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/984//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/984//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/984//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/984//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13226609" author="hadoopqa" created="Fri, 9 Mar 2012 23:55:36 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517802/ZOOKEEPER-1411-ver4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517802/ZOOKEEPER-1411-ver4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1297740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/985//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/985//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/985//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/985//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/985//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/985//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13226684" author="hadoopqa" created="Sat, 10 Mar 2012 01:26:54 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517810/ZOOKEEPER-1411-ver5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517810/ZOOKEEPER-1411-ver5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1297740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/986//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/986//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/986//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/986//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/986//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/986//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13226694" author="shralex" created="Sat, 10 Mar 2012 01:37:53 +0000"  >&lt;p&gt;Your comments and review of this patch are very appreciated (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt;-ver5.patch).&lt;/p&gt;

&lt;p&gt;One thing we may consider is making QuorumServer a separate class instead of a subclass of QuorumPeer as this subclass has now grown.&lt;/p&gt;</comment>
                            <comment id="13232909" author="hadoopqa" created="Mon, 19 Mar 2012 21:07:20 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12517810/ZOOKEEPER-1411-ver5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12517810/ZOOKEEPER-1411-ver5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1302281.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1000//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1000//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1000//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1000//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1000//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1000//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13233242" author="breed" created="Tue, 20 Mar 2012 06:08:44 +0000"  >&lt;p&gt;+1. since this is a rather non-trivial patch can i get another +1?&lt;/p&gt;</comment>
                            <comment id="13234141" author="rakeshr" created="Wed, 21 Mar 2012 06:06:24 +0000"  >&lt;p&gt;Hi Alex, the patch looks good to me. I have couple of suggestions/imprv points. Please go through the following:&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Comment1&lt;/ins&gt;&lt;br/&gt;
IMO, in QPC.writeMembership(), before going to upgrade the old config file, good to check the status of the membershipFilename operations. If any exception occurred during the creation/writing of the membershipFilename, make more sense to discontinue with the upgradation rather than modifying the cfg file, this would cause inconsistent config and affect ZK startup/restart.&lt;/p&gt;


&lt;p&gt;&lt;ins&gt;Comment2&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;QuorumPeer.java
try {
electionAddr = makeAddr(serverParts[0], Integer.parseInt(serverParts[2]));
} catch (NumberFormatException e) {
setType(serverParts[2]);
}
if (serverParts.length == 3) return;
if (electionAddr == null) {
throw new ConfigException(addressStr + wrongFormat);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Say, occurred NumberFormatException and &apos;serverParts.length == 3&apos; is satisfied, in this case it will continue to next level with electionAddr as null. IMO, would throw ConfigException for NumberFormatException.&lt;/p&gt;

&lt;p&gt;Hope the combination &apos;host:port:type&apos; is newly adding to the code base as part of this patch.&lt;br/&gt;
As I know, UDP electionAlg is not in a consistent state and also deprecated this feature. Also in the QPC, there is a check for validating the electionAddr - &quot;Missing election port for server: &quot;. So I feel, its not necessary to consider new combination &apos;host:port:type&apos; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Comment3&lt;/ins&gt;&lt;br/&gt;
QuorumPeer.java&lt;br/&gt;
public String membershipFilename = null;&lt;br/&gt;
public String configFilename = null;&lt;br/&gt;
public boolean membershipBackwardCompatibility = false;&lt;/p&gt;

&lt;p&gt;Is it OK to have private scope?&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Comment4&lt;/ins&gt;&lt;br/&gt;
Improve the code format, please adjust it a bit by removing the &apos;tab spaces&apos;&lt;/p&gt;</comment>
                            <comment id="13235099" author="shralex" created="Wed, 21 Mar 2012 22:13:13 +0000"  >&lt;p&gt;Hi Rakesh, thanks again for the comments!&lt;/p&gt;

&lt;p&gt;I agree with 1, 3, 4. Regarding comment 2 - this host:port:type is not something I&apos;m adding - AFAIK it is currently permitted by QPC. The check says that if we&apos;re using FLE then electionAddr should be defined. I&apos;m not sure whether disallowing host:port:type is something I should do here. &lt;/p&gt;

&lt;p&gt;Maybe someone with more experience with LE can comment on this ? &lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Alex&lt;/p&gt;</comment>
                            <comment id="13235124" author="fpj" created="Wed, 21 Mar 2012 23:05:46 +0000"  >&lt;p&gt;In the way I understand the problem Rakesh is pointing out, say we have NumberFormatException (numeric string is broken) and &quot;serverParts.length == 3&quot;. In this situation, this patch will allow the server to continue, and it shouldn&apos;t. We should throw and exception in such a run instead of allowing it to continue.&lt;/p&gt;</comment>
                            <comment id="13235187" author="shralex" created="Wed, 21 Mar 2012 23:22:06 +0000"  >&lt;p&gt;In the case you describe, when NumberFormatException is thrown, setType is called, and if the parameter is neither &quot;participant&quot; nor &quot;observer&quot;, an exception is thrown by setType. If its one of these types, then the function returns and we continue normally knowing that we got host:port:type (which would be legal for the old LE algorithm)&lt;/p&gt;</comment>
                            <comment id="13235442" author="rakeshr" created="Thu, 22 Mar 2012 08:19:54 +0000"  >&lt;p&gt;Yeah, I understood setType() is throwing &apos;ConfigException&apos; otherthan observer/participant and is sufficent to handle the comment#2.&lt;/p&gt;

&lt;p&gt;But still I feel, the existing code base is not considering the &apos;host:port:type&apos; pattern. If you know, please point me to that code. I am thinking to avoid unwanted conditions.&lt;br/&gt;
The following snippet is from existing QPC and preparing the &apos;host:port:port&apos; pattern, here its not separately handling the NFE of Integer.parseInt(parts&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;). This will be just propagating to the upper layer and throwing ConfigException.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;} else if (parts.length == 3) {
     InetSocketAddress electionAddr = new InetSocketAddress(parts[0], Integer.parseInt(parts[2]));
     servers.put(Long.valueOf(sid), new QuorumServer(sid, addr, electionAddr));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13235461" author="fpj" created="Thu, 22 Mar 2012 08:53:57 +0000"  >&lt;p&gt;@Alex You&apos;re right, I hadn&apos;t looked into setType.&lt;/p&gt;

&lt;p&gt;@Rakesh If you check the first comment of this jira, in the sample config, it sounds like Alex is proposing this new pattern: hostname:port:port:type. We currently don&apos;t use such a pattern host:port:type, at least according to the documentation and to my knowledge. I&apos;m also not sure I understand the comment about the NFE propagating back in the call chain. Why is that an issue exactly?&lt;/p&gt;
</comment>
                            <comment id="13235523" author="rakeshr" created="Thu, 22 Mar 2012 11:55:54 +0000"  >&lt;p&gt;@Flavio&lt;br/&gt;
Yeah, certainly no serious functional issues and I agree to throw exception back to the call chain. I just shared a thought, to remove the logic(also in the logs and java comments as shown below) of supporting &apos;host:port:type&apos; pattern from the uploaded patch to make it fairer.&lt;br/&gt;
(FYI, Please see the Alex&apos;s comments regarding &apos;host:port:type&apos;)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;QPC.java
private static final String wrongFormat = &quot; does not have the form server_cofig or server_config;client_config&quot;+
&quot; where server_config is one of: host:port or host:port:port &quot; +
&quot; or host:port:port:type or host:port:type and client_config is port or host:port&quot;;
.
.
// length 3: host:port:port or host:port:type
.
.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13235599" author="fpj" created="Thu, 22 Mar 2012 14:33:11 +0000"  >&lt;p&gt;Got it, Rakesh. Thanks for the clarification. You&apos;re right, we need to remember to remove it when we get rid of UDP leader election.&lt;/p&gt;</comment>
                            <comment id="13235619" author="shralex" created="Thu, 22 Mar 2012 15:04:31 +0000"  >&lt;p&gt;Thanks for the comments! So if I understand the conclusion correctly we&apos;re leaving this for now and will simplify the logic when the old LE code is removed.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</comment>
                            <comment id="13235626" author="fpj" created="Thu, 22 Mar 2012 15:13:35 +0000"  >&lt;p&gt;Given that the old LE code is already deprecated (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1153&quot; title=&quot;Deprecate AuthFLE and LE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1153&quot;&gt;&lt;del&gt;ZOOKEEPER-1153&lt;/del&gt;&lt;/a&gt;), I would say that it is fine to not take it into account as Rakesh suggests. I don&apos;t feel too strongly either way. In the case we keep it, it would be a good idea to create a jira or sub-task for removing it.&lt;/p&gt;

&lt;p&gt;I can&apos;t find a jira for removing the UDP-based implementations. If there isn&apos;t one, then we need to create one for it too.&lt;/p&gt;</comment>
                            <comment id="13235634" author="shralex" created="Thu, 22 Mar 2012 15:23:45 +0000"  >&lt;p&gt;ok, in this case I&apos;ll make the change Rakesh suggests and make sure that server_config is either host:port:port or host:port:port:type&lt;/p&gt;</comment>
                            <comment id="13237289" author="shralex" created="Fri, 23 Mar 2012 23:25:11 +0000"  >&lt;p&gt;Rakesh&apos;s comments are addressed &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt;-ver6.patch&lt;/p&gt;</comment>
                            <comment id="13237305" author="hadoopqa" created="Fri, 23 Mar 2012 23:45:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519750/ZOOKEEPER-1411-ver6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519750/ZOOKEEPER-1411-ver6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1302736.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 36 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1009//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1009//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13238114" author="rakeshr" created="Mon, 26 Mar 2012 06:39:55 +0100"  >&lt;p&gt;Hi Alex, latest patch looks fine to me. &lt;/p&gt;

&lt;p&gt;Its good to correct the log message(String wrongFormat: as it still contains the info related to &apos;host:port:type&apos; and would mislead). &lt;/p&gt;

&lt;p&gt;Also, ZK tab policy is &apos;Spaces only&apos;, apply the same to the patch.&lt;/p&gt;</comment>
                            <comment id="13238137" author="shralex" created="Mon, 26 Mar 2012 07:24:44 +0100"  >&lt;p&gt;this should be without tabs and with an updated comment. thanks Rakesh!&lt;/p&gt;</comment>
                            <comment id="13238146" author="hadoopqa" created="Mon, 26 Mar 2012 07:47:32 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519911/ZOOKEEPER-1411-ver7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519911/ZOOKEEPER-1411-ver7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1302736.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause tar ant target to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1013//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1013//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1013//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1013//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1013//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1013//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13238169" author="hadoopqa" created="Mon, 26 Mar 2012 08:30:37 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519912/ZOOKEEPER-1411-ver8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519912/ZOOKEEPER-1411-ver8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1302736.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1014//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1014//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1014//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1014//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1014//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1014//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13238193" author="hadoopqa" created="Mon, 26 Mar 2012 09:14:17 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519919/ZOOKEEPER-1411-ver9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519919/ZOOKEEPER-1411-ver9.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1302736.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1015//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1015//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1015//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1015//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1015//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1015//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13239323" author="rakeshr" created="Tue, 27 Mar 2012 09:54:46 +0100"  >&lt;p&gt;+1 Looks good!&lt;/p&gt;</comment>
                            <comment id="13254427" author="shralex" created="Sun, 15 Apr 2012 21:51:08 +0100"  >&lt;p&gt;I opened a review board for this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/4729/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/4729/&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13256989" author="breed" created="Wed, 18 Apr 2012 22:33:37 +0100"  >&lt;p&gt;this has been reviewed and out there for a while. if there aren&apos;t any objections, i&apos;m committing tonight.&lt;/p&gt;</comment>
                            <comment id="13257367" author="fpj" created="Thu, 19 Apr 2012 09:39:03 +0100"  >&lt;p&gt;I have added some comments to the review board. The review is not associated to this jira, so it doesn&apos;t show up here. It looks mostly good to me, though.&lt;/p&gt;</comment>
                            <comment id="13257368" author="fpj" created="Thu, 19 Apr 2012 09:40:28 +0100"  >&lt;p&gt;Canceling to sort out comments.&lt;/p&gt;</comment>
                            <comment id="13257560" author="hadoopqa" created="Thu, 19 Apr 2012 16:58:03 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12523360/ZOOKEEPER-1411-ver10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12523360/ZOOKEEPER-1411-ver10.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1326029.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1042//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1042//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1042//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1042//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1042//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1042//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13257565" author="shralex" created="Thu, 19 Apr 2012 17:04:30 +0100"  >&lt;p&gt;Flavio, thanks a lot for the comments. I uploaded a new patch here and on review board. &lt;/p&gt;</comment>
                            <comment id="13257639" author="fpj" created="Thu, 19 Apr 2012 18:59:06 +0100"  >&lt;p&gt;Sorry, I didn&apos;t do it right. Fixing the assignee.&lt;/p&gt;</comment>
                            <comment id="13257642" author="fpj" created="Thu, 19 Apr 2012 19:00:12 +0100"  >&lt;p&gt;I just have one small comment about public methods. Would you mind fixing it, Alex? Other than that, looks good to me.&lt;/p&gt;</comment>
                            <comment id="13258873" author="shralex" created="Sat, 21 Apr 2012 16:49:03 +0100"  >&lt;p&gt;changed the methods to protected&lt;/p&gt;</comment>
                            <comment id="13258904" author="hadoopqa" created="Sat, 21 Apr 2012 18:38:19 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12523636/ZOOKEEPER-1411-ver11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12523636/ZOOKEEPER-1411-ver11.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1326029.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 39 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1047//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1047//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1047//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1047//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1047//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1047//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13258905" author="breed" created="Sat, 21 Apr 2012 18:41:57 +0100"  >&lt;p&gt;+1 looks like we are good to go?&lt;/p&gt;</comment>
                            <comment id="13259270" author="fpj" created="Sun, 22 Apr 2012 22:22:07 +0100"  >&lt;p&gt;+1, lgmt. thanks for all changes to the patch, alex.&lt;/p&gt;</comment>
                            <comment id="13259300" author="breed" created="Mon, 23 Apr 2012 00:25:38 +0100"  >&lt;p&gt;Committed revision 1328991.&lt;br/&gt;
thanx alex!&lt;/p&gt;</comment>
                            <comment id="13259502" author="hudson" created="Mon, 23 Apr 2012 12:00:14 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1535 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1535/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1535/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt;. Consolidate membership management, distinguish between static and dynamic configuration parameters (Revision 1328991)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
breed : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328991&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1328991&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/FastLeaderElection.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/Leader.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/LearnerHandler.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumCnxManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerMain.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumZooKeeperServer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/flexible/QuorumHierarchical.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/flexible/QuorumMaj.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerMainTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerTestBase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/Zab1_0Test.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/util/DynamicConfigBCTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/CnxManagerTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/FLETest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/FLEZeroWeightTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/HierarchicalQuorumTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/LENonTerminateTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/ObserverTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumBase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumUtil.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/StandaloneTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13462648" author="hudson" created="Tue, 25 Sep 2012 12:02:43 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1690 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1690/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1690/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1540&quot; title=&quot;ZOOKEEPER-1411 breaks backwards compatibility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1540&quot;&gt;&lt;del&gt;ZOOKEEPER-1540&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt; breaks backwards compatibility (Andrew Ferguson via breed) (Revision 1389711)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
breed : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389711&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389711&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/util/DynamicConfigBCTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13618680" author="michim" created="Mon, 1 Apr 2013 08:53:06 +0100"  >&lt;p&gt;It looks like this patch broke ZooKeeper-trunk-ibm6.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk-ibm6/122/testReport/org.apache.zookeeper.server.util/DynamicConfigBCTest/dynamicConfigBackwardCompatibilityTest/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk-ibm6/122/testReport/org.apache.zookeeper.server.util/DynamicConfigBCTest/dynamicConfigBackwardCompatibilityTest/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This line is throwing an exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;zkProp.entrySet().contains(&quot;dynamicConfigFile&quot;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To avoid dealing with hashtable, we can do something like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;zkProp.getProperty(&quot;dynamicConfigFile&quot;) != null
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(I&apos;m assuming the original patch meant to call containsKey() instead of contains())&lt;/p&gt;</comment>
                            <comment id="13618823" author="shralex" created="Mon, 1 Apr 2013 16:20:40 +0100"  >&lt;p&gt;Thanks Michi. I&apos;m attaching a fix.&lt;/p&gt;</comment>
                            <comment id="13619199" author="hadoopqa" created="Mon, 1 Apr 2013 22:29:21 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12576430/ZOOKEEPER-1411-small-fix.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12576430/ZOOKEEPER-1411-small-fix.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1462141.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1442//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1442//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1442//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1442//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1442//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1442//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13619277" author="michim" created="Mon, 1 Apr 2013 23:56:09 +0100"  >&lt;p&gt;+1. Thanks Alex!&lt;/p&gt;</comment>
                            <comment id="13619709" author="hudson" created="Tue, 2 Apr 2013 12:09:46 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1889 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1889/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1889/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt;. Consolidate membership management, distinguish between static and dynamic configuration parameters. A small bug fix. (Revision 1463329)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
michim : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463329&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12604651">ZOOKEEPER-1540</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12628429">ZOOKEEPER-1625</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12635741">ZOOKEEPER-1660</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12401266">ZOOKEEPER-107</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12576430" name="ZOOKEEPER-1411-small-fix.patch" size="1074" author="shralex" created="Mon, 1 Apr 2013 21:02:22 +0100"/>
                            <attachment id="12517700" name="ZOOKEEPER-1411-ver1.patch" size="109013" author="shralex" created="Fri, 9 Mar 2012 09:58:03 +0000"/>
                            <attachment id="12523360" name="ZOOKEEPER-1411-ver10.patch" size="109416" author="shralex" created="Thu, 19 Apr 2012 16:22:23 +0100"/>
                            <attachment id="12523636" name="ZOOKEEPER-1411-ver11.patch" size="109288" author="shralex" created="Sat, 21 Apr 2012 16:48:10 +0100"/>
                            <attachment id="12517771" name="ZOOKEEPER-1411-ver2.patch" size="109285" author="shralex" created="Fri, 9 Mar 2012 20:08:29 +0000"/>
                            <attachment id="12517798" name="ZOOKEEPER-1411-ver3.patch" size="109551" author="shralex" created="Fri, 9 Mar 2012 22:26:45 +0000"/>
                            <attachment id="12517802" name="ZOOKEEPER-1411-ver4.patch" size="109545" author="shralex" created="Fri, 9 Mar 2012 23:24:41 +0000"/>
                            <attachment id="12517810" name="ZOOKEEPER-1411-ver5.patch" size="108950" author="shralex" created="Sat, 10 Mar 2012 00:51:30 +0000"/>
                            <attachment id="12519750" name="ZOOKEEPER-1411-ver6.patch" size="101828" author="shralex" created="Fri, 23 Mar 2012 23:25:11 +0000"/>
                            <attachment id="12519911" name="ZOOKEEPER-1411-ver7.patch" size="110086" author="shralex" created="Mon, 26 Mar 2012 07:24:43 +0100"/>
                            <attachment id="12519912" name="ZOOKEEPER-1411-ver8.patch" size="110015" author="shralex" created="Mon, 26 Mar 2012 08:00:08 +0100"/>
                            <attachment id="12519919" name="ZOOKEEPER-1411-ver9.patch" size="110080" author="shralex" created="Mon, 26 Mar 2012 08:43:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Mar 2012 10:25:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230933</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzwp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33281</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>