<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-234/ZOOKEEPER-234.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-234] Eliminate using statics to initialize the sever.  Should allow server to be more embeddable in OSGi enviorments.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-234</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Patrick request I open up this in issue in this &lt;a href=&quot;http://n2.nabble.com/ActiveMQ-is-now-using-ZooKeeper-td1573272.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;email thread&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The main culprit I&apos;ve noticed is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        ServerStats.registerAsConcrete();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But there may be others.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409146">ZOOKEEPER-234</key>
            <summary>Eliminate using statics to initialize the sever.  Should allow server to be more embeddable in OSGi enviorments.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="chirino">Hiram Chirino</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Nov 2008 21:01:29 +0000</created>
                <updated>Fri, 13 Feb 2009 21:18:50 +0000</updated>
                            <resolved>Thu, 15 Jan 2009 22:59:50 +0000</resolved>
                                                    <fixVersion>3.1.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12654515" author="phunt" created="Mon, 8 Dec 2008 18:53:01 +0000"  >&lt;p&gt;I like this, I&apos;d like to see it in 3.1.0, if someone can submit a patch that would help to ensure it&apos;s in 3.1.0.&lt;/p&gt;</comment>
                            <comment id="12654667" author="ksankar" created="Tue, 9 Dec 2008 01:01:36 +0000"  >&lt;p&gt;Quick question : What is the approx time frame for 3.1.0 ?&lt;/p&gt;</comment>
                            <comment id="12654711" author="phunt" created="Tue, 9 Dec 2008 05:59:54 +0000"  >&lt;p&gt;Currently slated for jan19th, see the ZOOKEEPER project page, the &quot;releases&quot; link (in the middle):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER?report=com.sourcelabs.jira.plugin.portlet.releases:releases-projecttab&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER?report=com.sourcelabs.jira.plugin.portlet.releases:releases-projecttab&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;you can also see it on the roadmap link on that same page.&lt;/p&gt;</comment>
                            <comment id="12663561" author="phunt" created="Wed, 14 Jan 2009 00:12:08 +0000"  >&lt;p&gt;step1 of the patch (see comment to follow on how to apply)&lt;/p&gt;</comment>
                            <comment id="12663562" author="phunt" created="Wed, 14 Jan 2009 00:12:40 +0000"  >&lt;p&gt;step 3 of the patch(see comment to follow on how to apply)&lt;/p&gt;</comment>
                            <comment id="12663566" author="phunt" created="Wed, 14 Jan 2009 00:16:03 +0000"  >&lt;p&gt;The attached patches will:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;remove the static stat classes&lt;/li&gt;
	&lt;li&gt;remove the src/java/jmx subdir and integrate into the mainline&lt;/li&gt;
	&lt;li&gt;as a result all zookeeper servers will now have jmx support by default&lt;/li&gt;
	&lt;li&gt;adds jmx support for log4j as well&lt;/li&gt;
	&lt;li&gt;fixes a number of issues with the structure and data in jmx for zk server(s)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The two attached patches should be applied as follows:&lt;/p&gt;

&lt;p&gt;apply the first patch &quot;step 1&quot;&lt;/p&gt;

&lt;p&gt;then:&lt;/p&gt;

&lt;p&gt;mkdir src/java/main/org/apache/zookeeper/jmx&lt;br/&gt;
svn add src/java/main/org/apache/zookeeper/jmx&lt;br/&gt;
svn mv src/java/jmx/org/apache/zookeeper/server/ManagedUtil.java src/java/main/org/apache/zookeeper/jmx/.&lt;br/&gt;
svn mv src/java/jmx/org/apache/zookeeper/jmx/*.java src/java/main/org/apache/zookeeper/jmx&lt;br/&gt;
svn mv src/java/jmx/org/apache/zookeeper/jmx/server/*.java src/java/main/org/apache/zookeeper/server/.&lt;br/&gt;
svn mv src/java/jmx/org/apache/zookeeper/jmx/server/quorum/*.java src/java/main/org/apache/zookeeper/server/quorum/.&lt;br/&gt;
svn rm --force src/java/jmx&lt;/p&gt;

&lt;p&gt;then:&lt;/p&gt;

&lt;p&gt;apply second patch &quot;step 3&quot;&lt;/p&gt;

&lt;p&gt;after this process the src/java/jmx directory should be no longer&lt;/p&gt;

&lt;p&gt;run &quot;ant test&quot; to verify. also start a zkserver as follows and verify that jconsole can connect:&lt;/p&gt;

&lt;p&gt;java -cp zookeeper-dev.jar:src/java/lib/log4j-1.2.15.jar:conf -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false  org.apache.zookeeper.server.quorum.QuorumPeerMain zoo.cfg&lt;/p&gt;

&lt;p&gt;then: commit to svn if tests/smoketest all pass&lt;/p&gt;
</comment>
                            <comment id="12664125" author="fpj" created="Thu, 15 Jan 2009 14:48:14 +0000"  >&lt;p&gt;+1. I have followed the steps Patrick describes, omitting of course the commit step. I have actually been able to connect using jconsole remotely, but in this case I had to use more parameters. Here is the command I used:&lt;/p&gt;

&lt;p&gt;java -cp .:./zookeeper-dev.jar:/usr/local/apache-log4j-1.2.15/log4j-1.2.15.jar -Dlog4j.configuration=log4j_console.properties -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=12122 -Dcom.sun.management.jmxremote.local.only=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false org.apache.zookeeper.server.quorum.QuorumPeerMain zoo.cfg &lt;/p&gt;

&lt;p&gt;I&apos;ll open a jira to document these options upon Pat&apos;s request.&lt;/p&gt;</comment>
                            <comment id="12664313" author="phunt" created="Thu, 15 Jan 2009 22:59:50 +0000"  >&lt;p&gt;Committed revision 734847.&lt;/p&gt;</comment>
                            <comment id="12664596" author="hudson" created="Fri, 16 Jan 2009 18:20:07 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #198 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/198/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/198/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397840" name="ZOOKEEPER-234_step1.patch" size="104282" author="phunt" created="Wed, 14 Jan 2009 00:12:08 +0000"/>
                            <attachment id="12397841" name="ZOOKEEPER-234_step3.patch" size="56594" author="phunt" created="Wed, 14 Jan 2009 00:12:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 8 Dec 2008 18:53:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzybz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>