<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1759/ZOOKEEPER-1759.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1759] Adding ability to allow READ operations for authenticated users,  versus keeping ACLs wide open for READ</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1759</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Today when using SASLAuthenticationProvider to authenticate Zookeeper Clients access to the data based on ACLS set on znodes there is no other choice but to set READ ACLs to be &quot;world&quot;, &quot;anyone&quot; with the way how &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; matches(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; aclExpr)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is currently implemented. It means that any unauthenticated user can read the data when application needs to make sure that not only creator of a znode can read the content.&lt;br/&gt;
Proposal is to introduce new property: &quot;zookeeper.readUser&quot; that if incoming id matches to the value of that property it will be allowed to proceed in &quot;match&quot; method. &lt;br/&gt;
So creator of a znode instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ACL acl1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ACL(Perms.ADMIN | Perms.CREATE | Perms.WRITE | Perms.DELETE, Ids.AUTH_IDS);
ACL acl2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ACL(Perms.READ, Ids.ANYONE_ID_UNSAFE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will need to do&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ACL acl1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ACL(Perms.ADMIN | Perms.CREATE | Perms.WRITE | Perms.DELETE, Ids.AUTH_IDS);
ACL acl2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ACL(Perms.READ, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Id(&lt;span class=&quot;code-quote&quot;&gt;&quot;sasl&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;anyone&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Assuming that value of &quot;zookeeper.readUser&quot; property was &quot;anyone&quot;.&lt;br/&gt;
This way at least READ access on corresponding znode has to be authenticated.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java, SASL authentication, security&lt;/p&gt;</environment>
        <key id="12669190">ZOOKEEPER-1759</key>
            <summary>Adding ability to allow READ operations for authenticated users,  versus keeping ACLs wide open for READ</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yufeldman">Yuliya Feldman</assignee>
                                    <reporter username="yufeldman">Yuliya Feldman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Sep 2013 07:28:32 +0100</created>
                <updated>Thu, 12 Feb 2015 13:44:46 +0000</updated>
                            <resolved>Mon, 30 Sep 2013 00:47:17 +0100</resolved>
                                    <version>3.4.5</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13770500" author="yufeldman" created="Wed, 18 Sep 2013 07:39:08 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1759&quot; title=&quot;Adding ability to allow READ operations for authenticated users,  versus keeping ACLs wide open for READ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1759&quot;&gt;&lt;del&gt;ZOOKEEPER-1759&lt;/del&gt;&lt;/a&gt;.patch&lt;/p&gt;</comment>
                            <comment id="13771340" author="yufeldman" created="Wed, 18 Sep 2013 23:42:39 +0100"  >&lt;p&gt;Latest&lt;/p&gt;</comment>
                            <comment id="13771348" author="hadoopqa" created="Wed, 18 Sep 2013 23:52:14 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12603932/ZOOKEEPER-1759.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12603932/ZOOKEEPER-1759.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1589//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1589//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13771376" author="fournc" created="Thu, 19 Sep 2013 00:11:10 +0100"  >&lt;p&gt;Patch failed, can you try syncing with head and submitting the patch again?&lt;/p&gt;</comment>
                            <comment id="13771426" author="yufeldman" created="Thu, 19 Sep 2013 01:08:18 +0100"  >&lt;p&gt;Sure. I thought I did, but apparently it did not work.&lt;/p&gt;</comment>
                            <comment id="13771457" author="yufeldman" created="Thu, 19 Sep 2013 01:39:20 +0100"  >&lt;p&gt;Resubmitted svn patch instead of git one. Hopefully this will work.&lt;/p&gt;</comment>
                            <comment id="13771487" author="hadoopqa" created="Thu, 19 Sep 2013 02:12:30 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12603960/ZOOKEEPER-1759.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12603960/ZOOKEEPER-1759.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1590//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1590//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1590//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1590//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1590//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1590//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13771498" author="yufeldman" created="Thu, 19 Sep 2013 02:39:31 +0100"  >&lt;p&gt;I don&apos;t quite understand how this failure is related to the patch: /home/jenkins/jenkins-slave/workspace/PreCommit-ZOOKEEPER-Build/trunk/src/c/tests/TestReconfig.cc:488: Assertion: assertion failed &lt;span class=&quot;error&quot;&gt;&amp;#91;Expression: found != string::npos&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13771505" author="fournc" created="Thu, 19 Sep 2013 02:48:37 +0100"  >&lt;p&gt;Let me see what&apos;s changed recently...&lt;/p&gt;</comment>
                            <comment id="13771526" author="fournc" created="Thu, 19 Sep 2013 03:20:05 +0100"  >&lt;p&gt;Nothing that should obviously cause this. I will look at the patch soon and CR it, at a glance it looks ok to me.&lt;/p&gt;</comment>
                            <comment id="13774295" author="yufeldman" created="Mon, 23 Sep 2013 06:08:24 +0100"  >&lt;p&gt;Is anything else needs to be done on my side to have this patch committed?&lt;/p&gt;</comment>
                            <comment id="13774527" author="hadoopqa" created="Mon, 23 Sep 2013 14:19:08 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12603960/ZOOKEEPER-1759.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12603960/ZOOKEEPER-1759.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1596//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1596//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1596//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1596//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1596//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1596//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13775872" author="fournc" created="Tue, 24 Sep 2013 01:53:41 +0100"  >&lt;p&gt;I think this looks ok but I wish someone that used SASL would comment on whether this makes sense to do via a config paramter. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoontz&quot; class=&quot;user-hover&quot; rel=&quot;ekoontz&quot;&gt;Eugene Koontz&lt;/a&gt; any comment from you?&lt;/p&gt;</comment>
                            <comment id="13776531" author="ekoontz" created="Tue, 24 Sep 2013 18:34:15 +0100"  >&lt;p&gt;Hi Camille, thanks for bringing this to my attention. Yuliya, two questions:&lt;/p&gt;

&lt;p&gt;1) I don&apos;t think the property name &quot;zookeeper.readUser&quot; is meaningful - in this code that you added to matches():&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; readAccessUser = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;zookeeper.readUser&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( readAccessUser != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; aclExpr.equals(readAccessUser)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above, there is no a check for whether the user wants to specifically read as opposed to any other action. &lt;/p&gt;

&lt;p&gt;For example, if a) and b) are true:&lt;/p&gt;

&lt;p&gt;a) I add an ACL: ((Perms.READ | Perms.WRITE), new Id(&quot;sasl&quot;, &quot;anyone&quot;))&lt;/p&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;p&gt;b) the property &quot;zookeeper.readUser&quot; is set to &quot;anyone&quot;&lt;/p&gt;

&lt;p&gt;then this user can read &lt;b&gt;and&lt;/b&gt; write to the node. So it seems like you could call the property &quot;zookeeper.x-User&quot; just as well: it&apos;s the ACL on the node, not the property, that determines what set of actions x that the user defined by this property can do.&lt;/p&gt;

&lt;p&gt;2. I&apos;m not sure what this change adds any new authorization restrictions - it&apos;s seems the same as simply making a node world-readable. What if a user is not SASL-authenticated? Won&apos;t the new code that you added in matches():&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; readAccessUser = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;zookeeper.readUser&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( readAccessUser != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; aclExpr.equals(readAccessUser)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;simply return true regardless of whether the client is SASL-authenticated or not, if a given node is set to ACL(Perms.READ, new Id(&quot;sasl&quot;, &quot;anyone&quot;), and zookeeper.readUser is set to &quot;anyone&quot;?&lt;/p&gt;

&lt;p&gt;I might be wrong - but either way, the question could be resolved with an additional unit test, which clarifies what the permissions are of a non-SASL-authenticated user when the user attempts to read a node which has:&lt;/p&gt;

&lt;p&gt;a) ACL(Perms.READ, new Id(&quot;sasl&quot;, &quot;anyone&quot;)&lt;br/&gt;
b) has no other permissions (e.g. not world-readable).&lt;/p&gt;


&lt;p&gt;-Eugene&lt;/p&gt;</comment>
                            <comment id="13776565" author="yufeldman" created="Tue, 24 Sep 2013 18:57:11 +0100"  >&lt;p&gt;Thank you Eugene for your comments&lt;br/&gt;
Regarding #1 - I agree that name &quot;readUser&quot; may not be a good one - because it is up to the ACL creator to &quot;expose&quot; particular operation.&lt;/p&gt;

&lt;p&gt;Regarding #2 - It does add authentication restrictions, not authorization ones. Today only superUser can do whatever with znode that has restricted ACLs. If I put &quot;world&quot; &quot;anyone&quot; for readable - no Authentication will be involved at all. Here is the snippet from PrepRequestProcessor:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ACL a : acl) {
            Id id = a.getId();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((a.getPerms() &amp;amp; perm) != 0) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (id.getScheme().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;)
                        &amp;amp;&amp;amp; id.getId().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;anyone&quot;&lt;/span&gt;)) {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
                }
                AuthenticationProvider ap = ProviderRegistry.getProvider(id
                        .getScheme());
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ap != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Id authId : ids) {                        
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (authId.getScheme().equals(id.getScheme())
                                &amp;amp;&amp;amp; ap.matches(authId.getId(), id.getId())) {
                            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
                        }
                    }
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;As you can see if it is &quot;world&quot; &quot;anyone&quot; - No authentication is checked at all.&lt;/p&gt;

&lt;p&gt;Regarding unit tests - I did add them - should be in the patch&lt;/p&gt;</comment>
                            <comment id="13776799" author="ekoontz" created="Tue, 24 Sep 2013 22:47:25 +0100"  >&lt;p&gt;Hi Yuliya,&lt;br/&gt;
Regarding #2, yes, I think you are right: a non-SASL-authenticated user will not have a authId for the SASL AuthenticationProvider, so the matches() will not be called, and the user will not be granted access, which is expected and correct behavior. So thanks for correcting me on this.&lt;/p&gt;

&lt;p&gt;I still think it would be good to test this feature with a non-SASL-authenticated user to test that this behavior is working as expected, however. Your test is good but only tests a SASL authenticated user.&lt;/p&gt;</comment>
                            <comment id="13776810" author="yufeldman" created="Tue, 24 Sep 2013 23:00:35 +0100"  >&lt;p&gt;Sure. I will add test for non-SASL authenticated user.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13777222" author="yufeldman" created="Wed, 25 Sep 2013 08:20:47 +0100"  >&lt;p&gt;I have updated the patch with additional test for non-SASL-authenticated user, or rather SASL unauthenticated client.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13777241" author="hadoopqa" created="Wed, 25 Sep 2013 08:53:08 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12604976/ZOOKEEPER-1759.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12604976/ZOOKEEPER-1759.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1599//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1599//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1599//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1599//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1599//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1599//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13777686" author="ekoontz" created="Wed, 25 Sep 2013 17:08:33 +0100"  >&lt;p&gt;Looks good to me, Yuliya. +1 (nonbinding).&lt;/p&gt;</comment>
                            <comment id="13777689" author="fournc" created="Wed, 25 Sep 2013 17:11:53 +0100"  >&lt;p&gt;Awesome, I will check this in when I have a few moments. Thanks Yuliya and Eugene!&lt;/p&gt;</comment>
                            <comment id="13777697" author="ekoontz" created="Wed, 25 Sep 2013 17:16:22 +0100"  >&lt;p&gt;Well, I forgot, there is the matter of the name of the property &quot;zookeeper.readUser&quot; as we discussed with regard to my question #1 above. &quot;zookeeper.letAnySaslUserDoX&quot; perhaps?&lt;/p&gt;</comment>
                            <comment id="13777700" author="fournc" created="Wed, 25 Sep 2013 17:21:05 +0100"  >&lt;p&gt;Oh yes, I checked this in but I agree with that. Also do we need documentation somewhere about this new property?&lt;/p&gt;</comment>
                            <comment id="13777739" author="hudson" created="Wed, 25 Sep 2013 17:55:39 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2067 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2067/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2067/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1759&quot; title=&quot;Adding ability to allow READ operations for authenticated users,  versus keeping ACLs wide open for READ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1759&quot;&gt;&lt;del&gt;ZOOKEEPER-1759&lt;/del&gt;&lt;/a&gt;. Adding ability to allow READ operations for authenticated users, &lt;br/&gt;
  versus keeping ACLs wide open for READ. (Yuliya Feldman via camille) (camille: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1526219&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1526219&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/SaslAuthDesignatedClientTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13778150" author="fpj" created="Wed, 25 Sep 2013 23:03:31 +0100"  >&lt;p&gt;I&apos;d like to ask you guys to do a config file property as well. Actually, I&apos;d rather have the config file property, but if you want to have both, fine with me. If you need a reference, check how I have done it in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1552&quot; title=&quot;Enable sync request processor in Observer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1552&quot;&gt;&lt;del&gt;ZOOKEEPER-1552&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13778385" author="yufeldman" created="Thu, 26 Sep 2013 03:51:56 +0100"  >&lt;p&gt;Sorry, Could not reply earlier - was out whole day. &lt;br/&gt;
@Eugene - Since this one is committed should I submit another JIRA to change name of the property, or submit another patch on this JIRA?&lt;/p&gt;

&lt;p&gt;@Flavio I am not exactly following. In the JIRA you are referring to you were proposing to put property into QuorumConfig object, is it? I did not find anything the patch(es) that was related to configuration&lt;/p&gt;</comment>
                            <comment id="13779395" author="fpj" created="Thu, 26 Sep 2013 23:29:51 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yufeldman&quot; class=&quot;user-hover&quot; rel=&quot;yufeldman&quot;&gt;Yuliya Feldman&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fournc&quot; class=&quot;user-hover&quot; rel=&quot;fournc&quot;&gt;Camille Fournier&lt;/a&gt;, SaslAuthDesignatedClientTest is failing and I suspect it is because of this commit. I&apos;m going to upload a log file.&lt;/p&gt;

&lt;p&gt;With respect to configuration, I was indeed referring to adding a property to QuorumPeerConfig and have it exposed through QuorumPeer like we do with others. My sense is that some significant fraction of this community prefers to configure through a config file. If you still want to have a system property, then just use both. &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1552&quot; title=&quot;Enable sync request processor in Observer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1552&quot;&gt;&lt;del&gt;ZOOKEEPER-1552&lt;/del&gt;&lt;/a&gt; is just an example in which I have used both.&lt;/p&gt;</comment>
                            <comment id="13779401" author="hadoopqa" created="Thu, 26 Sep 2013 23:41:50 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12605346/TEST-org.apache.zookeeper.test.SaslAuthDesignatedClientTest.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12605346/TEST-org.apache.zookeeper.test.SaslAuthDesignatedClientTest.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1526454.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1602//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1602//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13779407" author="yufeldman" created="Thu, 26 Sep 2013 23:48:58 +0100"  >&lt;p&gt;I am looking into failure&lt;/p&gt;</comment>
                            <comment id="13779501" author="yufeldman" created="Fri, 27 Sep 2013 01:46:32 +0100"  >&lt;p&gt;I have retested it again and I don&apos;t see any test failure. Plus all trunk builds were successful after this check in. On top of it during znode creation code from this JIRA&apos;s patch is not even executed. Do you consistently see the failure or it one of? &lt;/p&gt;</comment>
                            <comment id="13779566" author="yufeldman" created="Fri, 27 Sep 2013 02:56:21 +0100"  >&lt;p&gt;Ok, I was finally able to repro your failure - problem in tests ordering. Your order was different from others that caused failure. Since I was adding a test case on Eugene&apos;s request to test unauthenticated Client I set &quot;zookeeper.sasl.client&quot; to &quot;false&quot; and did not reenable it back at the end of the test. This caused Client from following test (testAuth) to be not authenticated and subsequently failing.&lt;br/&gt;
I fixed test to set &quot;zookeeper.sasl.client&quot; to &quot;true&quot; at the end of my test and it should fix your issue. Will submit patch shortly. &lt;/p&gt;</comment>
                            <comment id="13779574" author="fournc" created="Fri, 27 Sep 2013 03:26:22 +0100"  >&lt;p&gt;Yuliya if you think you will have something soon just attach a new patch to this ticket that addresses these issues I&apos;ll put it in on the same ticket number. Otherwise I&apos;ll roll the whole thing back and put it all in when it&apos;s done.&lt;/p&gt;</comment>
                            <comment id="13779644" author="yufeldman" created="Fri, 27 Sep 2013 05:14:48 +0100"  >&lt;p&gt;Additional to fix testx&lt;/p&gt;</comment>
                            <comment id="13779666" author="yufeldman" created="Fri, 27 Sep 2013 06:02:31 +0100"  >&lt;p&gt;Latest one that includes test fix and property name change&lt;/p&gt;</comment>
                            <comment id="13779688" author="hadoopqa" created="Fri, 27 Sep 2013 06:59:23 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12605395/ZOOKEEPER-1759-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12605395/ZOOKEEPER-1759-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1526454.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1603//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1603//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1603//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1603//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1603//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1603//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13780101" author="ekoontz" created="Fri, 27 Sep 2013 18:10:36 +0100"  >&lt;p&gt;Yuliya, thanks for the explanation of the problem that Flavio found, your new patch looks good.  It&apos;s good that the tests run in a random order; seems to shake out bugs that otherwise would not be seen. &lt;/p&gt;

&lt;p&gt;I&apos;m not entirely satisfied with the new name &quot;letAnySaslUserDoX&quot;, it sounds awkward, but it&apos;s good enough for now.&lt;/p&gt;</comment>
                            <comment id="13781501" author="hudson" created="Sun, 29 Sep 2013 21:56:06 +0100"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2072 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2072/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2072/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1759&quot; title=&quot;Adding ability to allow READ operations for authenticated users,  versus keeping ACLs wide open for READ&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1759&quot;&gt;&lt;del&gt;ZOOKEEPER-1759&lt;/del&gt;&lt;/a&gt;. Adding ability to allow READ operations for authenticated users, &lt;br/&gt;
  versus keeping ACLs wide open for READ. (Yuliya Feldman via camille) (camille: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1527398&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1527398&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/SaslAuthDesignatedClientTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12605346" name="TEST-org.apache.zookeeper.test.SaslAuthDesignatedClientTest.txt" size="40443" author="fpj" created="Thu, 26 Sep 2013 23:32:19 +0100"/>
                            <attachment id="12605395" name="ZOOKEEPER-1759-1.patch" size="2309" author="yufeldman" created="Fri, 27 Sep 2013 06:02:31 +0100"/>
                            <attachment id="12605383" name="ZOOKEEPER-1759-1.patch" size="1162" author="yufeldman" created="Fri, 27 Sep 2013 05:14:48 +0100"/>
                            <attachment id="12604976" name="ZOOKEEPER-1759.patch" size="3794" author="yufeldman" created="Wed, 25 Sep 2013 08:17:59 +0100"/>
                            <attachment id="12603960" name="ZOOKEEPER-1759.patch" size="3379" author="yufeldman" created="Thu, 19 Sep 2013 01:38:03 +0100"/>
                            <attachment id="12603932" name="ZOOKEEPER-1759.patch" size="3586" author="yufeldman" created="Wed, 18 Sep 2013 23:42:39 +0100"/>
                            <attachment id="12603767" name="ZOOKEEPER-1759.patch" size="3586" author="yufeldman" created="Wed, 18 Sep 2013 07:39:08 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 18 Sep 2013 22:52:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzi1jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>