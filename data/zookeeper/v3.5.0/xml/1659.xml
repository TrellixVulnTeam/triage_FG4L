<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:44:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1659/ZOOKEEPER-1659.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1659] Add JMX support for dynamic reconfiguration</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1659</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;We need to update JMX during reconfigurations. Currently, reconfiguration changes are not reflected in JConsole.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635739">ZOOKEEPER-1659</key>
            <summary>Add JMX support for dynamic reconfiguration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshr">Rakesh R</assignee>
                                    <reporter username="shralex">Alexander Shraer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Mar 2013 06:50:40 +0000</created>
                <updated>Wed, 4 Jun 2014 21:50:45 +0100</updated>
                            <resolved>Wed, 4 Jun 2014 21:08:32 +0100</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13595628" author="shralex" created="Thu, 7 Mar 2013 07:11:07 +0000"  >&lt;p&gt;Would be good if someone experienced with JMX can take this.&lt;/p&gt;</comment>
                            <comment id="13789341" author="phunt" created="Tue, 8 Oct 2013 17:16:53 +0100"  >&lt;p&gt;We need to triage this at a minimum. Also effects on 4lw?&lt;/p&gt;</comment>
                            <comment id="13949370" author="rakeshr" created="Thu, 27 Mar 2014 14:14:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt;, Could you please give some more insight into the description, let me try to understand and would like to take this ahead. &lt;br/&gt;
I&apos;ve few queries:&lt;br/&gt;
1) Intention is to introduce new reconfig attributes like: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;config version number&lt;/li&gt;
	&lt;li&gt;new members added at previous reconfig call&lt;/li&gt;
	&lt;li&gt;old members removed at previous reconfig call&lt;/li&gt;
	&lt;li&gt;shows if any reconfig is in progress et.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2) Impacted any of the existing JMX attributes due to the reconfigurations ?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rakesh&lt;/p&gt;</comment>
                            <comment id="13949638" author="shralex" created="Thu, 27 Mar 2014 17:21:24 +0000"  >&lt;p&gt;Hi Rakesh,&lt;/p&gt;

&lt;p&gt;To tell you the truth I&apos;ve never used JMX, and not familiar with ZooKeeper support for this, so &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt; may have a better idea of what we need here. My guess is that we&apos;d want to at least see the latest committed dynamic config, even better would be to know what it is at different servers so that we know if some server has a stale config. With regard to in-progress reconfigs, I&apos;m not sure how this would work since they only take a few ms at most (as any other op). State transfer happens before the reconfig is invoked. Perhaps reconfig proposal and commit times can be recorded, but this seems lower priority. &lt;/p&gt;

&lt;p&gt;It would be good to monitor the set of servers connected/synced to the leader and their roles (some of them will be paticipants/observers in the current config and others may be non-voting followers, that don&apos;t belong to the current config). This way an operator can know that server A is already in-sync with the leader and he can invoke reconfig to add A.&lt;/p&gt;

&lt;p&gt;In general we probably want to add some minimal support first so that its no longer a blocker for 3.5.0, and then potentially add more info if needed.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</comment>
                            <comment id="13949677" author="eribeiro" created="Thu, 27 Mar 2014 17:38:42 +0000"  >&lt;p&gt;Hi guys,&lt;/p&gt;

&lt;p&gt;Although I am far from being a JMX expert, I have some interest on this issue, and had submitted a patch to add a &apos;dir&apos; command available from both 4lw and JMX. See &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1423&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1423&lt;/a&gt; for further details. This patch probably doesn&apos;t apply cleanly anymore, but at least you may see some starting points. PS: a knowledgeable JMX opinion about my patch would be highly appreciated. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13951147" author="rakeshr" created="Fri, 28 Mar 2014 18:02:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; Thanks for the reply, basically first it need to identify the necessary attributes which can be exposed in MBeans. I&apos;ll go through the reconfig implementation this weekend and hope it would give some more idea. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt; It would be great if you can add your thoughts when you get sometime, it would help us to set the direction. Thanks.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;Edward Ribeiro&lt;/a&gt;, &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; See &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1423&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1423&lt;/a&gt; for further details. This patch probably doesn&apos;t apply cleanly anymore, but at least you may see some starting points. PS: a knowledgeable JMX opinion about my patch would be highly appreciated&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve seen your patch and added my comments on it. Please see it.&lt;/p&gt;</comment>
                            <comment id="13951238" author="shralex" created="Fri, 28 Mar 2014 19:00:13 +0000"  >&lt;p&gt;Rakesh, the committed config is stored in QuorumPeer.quorumVerifier, and set in QuorumPeer.setQuorumVerifier(), so that may be a good place to start. A QuorumVerifier can currently be either a QurumMaj or QuorumHierarchical, see org.apache.zookeeper.server.quorum.flexible.&lt;/p&gt;

&lt;p&gt;If you have any questions about the reconfig implementation, feel free to ping me shralex@gmail.com&lt;/p&gt;</comment>
                            <comment id="13993954" author="michim" created="Fri, 9 May 2014 22:46:35 +0100"  >&lt;p&gt;This is marked as a blocker, but there is nobody assigned to it. Any volunteers?&lt;/p&gt;</comment>
                            <comment id="13995037" author="rakeshr" created="Mon, 12 May 2014 13:33:12 +0100"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; for the inputs. I&apos;ve tried an initial draft patch where it has the following changes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Remove the remote.replica.bean from the ZKService bean for the leaving servers&lt;/li&gt;
	&lt;li&gt;Add the new remote.replica.bean to the ZKService bean for the joining servers&lt;/li&gt;
	&lt;li&gt;New Attributes for each remote.replica.bean&lt;br/&gt;
	-&amp;gt; ElectionAddress&lt;br/&gt;
	-&amp;gt; ClientAddress&lt;br/&gt;
	-&amp;gt; LearnerType&lt;/li&gt;
	&lt;li&gt;New Attributes for each local.replica.bean added few more attributes&lt;br/&gt;
	-&amp;gt; ElectionAddress&lt;br/&gt;
	-&amp;gt; ClientAddress&lt;br/&gt;
	-&amp;gt; LearnerType&lt;br/&gt;
	-&amp;gt; ConfigVersion&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ve one question, what will happen to the qp server which is leaving the quorum ?&lt;br/&gt;
In the patch it will not remove the self mxbean, considering that admin will make it down and during that time the jmx beans will get automatically unregistered. Is that fine ?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rakesh&lt;/p&gt;</comment>
                            <comment id="13995473" author="hadoopqa" created="Mon, 12 May 2014 20:00:43 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12644408/ZOOKEEPER-1659.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12644408/ZOOKEEPER-1659.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1593682.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2088//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2088//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2088//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2088//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2088//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2088//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13999151" author="michim" created="Thu, 15 May 2014 20:36:47 +0100"  >&lt;p&gt;+1 The patch looks good to me. It would be great if somebody more familiar with JMX code can review this patch.&lt;/p&gt;</comment>
                            <comment id="14000458" author="shralex" created="Sat, 17 May 2014 00:01:00 +0100"  >&lt;p&gt;I&apos;d like to go over this too - probably over the weekend. Sorry for the delay, Rakesh!&lt;/p&gt;

&lt;p&gt;&amp;gt; &quot;I&apos;ve one question, what will happen to the qp server which is leaving the quorum ?&lt;br/&gt;
&amp;gt; In the patch it will not remove the self mxbean, considering that admin will make it down and during that time the jmx &lt;br/&gt;
&amp;gt; beans will get automatically unregistered. Is that fine ?&quot;&lt;/p&gt;

&lt;p&gt;Intuitively it&apos;d be good if all the places listing the configuration are kept consistent. So I&apos;d say that the server should remove itself from this list so that the list in the config znode and in the JMX are consistent. Also - removing a server may not lead to shutting it down - it may be an intermediate step for changing its role (there are cases where this is necessary when changing an observer to a follower - an observer can&apos;t vote so if its vote is needed to establish the new config we may need to first remove it so that its a non-voting follower).  &lt;/p&gt;
</comment>
                            <comment id="14000875" author="shralex" created="Sat, 17 May 2014 22:14:08 +0100"  >
&lt;p&gt;One more small comment - in the beginning of updateMXBeans, I suggest to simplify by having just 2 sets - joiningMembers and leavingMembers.&lt;/p&gt;

&lt;p&gt;Set&amp;lt;Long&amp;gt; joiningMembers = new HashSet&amp;lt;Long&amp;gt;(allMembers.keySet()).removeAll(remotePeerBeans.keySet());&lt;br/&gt;
Set&amp;lt;Long&amp;gt; leavingMembers = new HashSet&amp;lt;Long&amp;gt;(remotePeerBeans.keySet()).removeAll(allMembers.keySet());&lt;/p&gt;

&lt;p&gt;note sure about removing getId() from these - see my previous comment.&lt;/p&gt;

&lt;p&gt;maybe it&apos;ll be also good to rename the parameter allMembers to newMembers.&lt;/p&gt;</comment>
                            <comment id="14000877" author="shralex" created="Sat, 17 May 2014 22:19:08 +0100"  >&lt;p&gt;One thing this patch is not handling is quorum system changes.  if I understand correctly if we switch from majority to hierarchical or the other way around, or change parameters of a hierarchical quorum system, this won&apos;t be reflected in JMX that only has the QuorumServers.  I&apos;m not sure this is such a major concern since I don&apos;t even know if anyone uses the hierarchical quorum system. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; what do you think ? &lt;/p&gt;

&lt;p&gt;If Quorum System info is not added to JMX in this patch, we should open a jira to do this in the future, after 3.5.0.&lt;/p&gt;</comment>
                            <comment id="14001044" author="fpj" created="Sun, 18 May 2014 10:37:07 +0100"  >&lt;p&gt;I&apos;m aware of deployments that use HQS. However, the main general concern I have is that the other day I tried to implement a new quorum verifier and a lot of tests failed. It seems that there are parts of the code base, especially tests, that are hardcoding majorities, which I find a bit annoying. It would be great if we could keep the use of quorums independent of the actual implementation, and in this particular case rely on the QuorumVerifier interface.&lt;/p&gt;</comment>
                            <comment id="14001610" author="rakeshr" created="Mon, 19 May 2014 12:50:54 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;removing a server may not lead to shutting it down - it may be an intermediate step for changing its role (there are cases where this is necessary when changing an observer to a follower - an observer can&apos;t vote so if its vote is needed to establish the new config we may need to first remove it so that its a non-voting follower).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah this is good point, I missed it. Initially I was thinking to identify only the changed QPs and tried to unregister/re-register it. Now after seeing this scenario I&apos;ve diff idea in my mind. How about un-register all the remote beans and re-register back according to the new QuorumVerifier#getAllMembers() ?. Here one concern is, all the remote QPs will be unregistered for a moment until its re-registration, irrespective of QuorumServer has configuration changes or not. With this approach, code will be simple rather than having complex logic for diff and identifying only those changed QPs.&lt;/p&gt;

&lt;p&gt;ZK JMX hierarchy is:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jmxQuorumBean (himself registered as parent bean)
	&lt;ul&gt;
		&lt;li&gt;LocalPeerBean (self quorumpeer)&lt;/li&gt;
		&lt;li&gt;RemotePeerBean (for each remote qp in the config)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;blockquote&gt;&lt;p&gt;One thing this patch is not handling is quorum system changes. if I understand correctly if we switch from majority to hierarchical or the other way around, or change parameters of a hierarchical quorum system, this won&apos;t be reflected in JMX that only has the QuorumServers&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Presently Hierarchical system info is not exposed and not available in any of the existing jmx beans. I also feel, this can be exposed after 3.5.0.&lt;/p&gt;</comment>
                            <comment id="14002464" author="shralex" created="Mon, 19 May 2014 22:54:20 +0100"  >&lt;p&gt;Doing the diff (but simplifying the diff code a bit, perhaps as I suggested above) or unregistering/re-registering everything both sound fine to me, but I&apos;ve never used JMX so not sure what&apos;s the implications of unregistering/re-registering something. So either way you choose I&apos;d suggest to run the JMX console and see how it works during reconfig. &lt;/p&gt;

&lt;p&gt;Regarding exposing the Quorum System in JMX, I&apos;m ok with postponing this until after 3.5.0, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; are you fine with that ? &lt;/p&gt;</comment>
                            <comment id="14003426" author="rakeshr" created="Tue, 20 May 2014 16:19:14 +0100"  >&lt;p&gt;After unregister if anyone(for ex: monitoring tool) queried to get the attribute value, it would occur the following exception.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
javax.management.InstanceNotFoundException: org.apache.ZooKeeperService:name0=ReplicatedServer_id3,name1=replica.3,name2=Leader,name3=InMemoryDataTree
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1094)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14003644" author="otis" created="Tue, 20 May 2014 18:07:13 +0100"  >&lt;p&gt;+1 for making sure changes are backwards-compatible.  We &lt;a href=&quot;http://sematext.com/spm/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;monitor Zookeeper with SPM&lt;/a&gt; and would love to be able to use the same agent for multiple/all ZK versions instead of having ZK version-specific agents.&lt;/p&gt;</comment>
                            <comment id="14004654" author="rakeshr" created="Wed, 21 May 2014 14:26:52 +0100"  >&lt;p&gt;Attaching new patch where it will identify the diff as follows. With this it won&apos;t do unnecessary un-registration of the existing beans and avoided the possibility of above mentioned exceptions.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;new members will register their beans&lt;/li&gt;
	&lt;li&gt;existing members will update their QS instance&lt;/li&gt;
	&lt;li&gt;leaving members will be unregistered&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14005278" author="fpj" created="Wed, 21 May 2014 22:41:12 +0100"  >&lt;p&gt;We could easily add a method to the QuorumVerifier interface that returns a string with the quorum system information (e.g., getQuorumSystemInfo()), and use it with JMX, no?&lt;/p&gt;</comment>
                            <comment id="14005284" author="shralex" created="Wed, 21 May 2014 22:49:07 +0100"  >&lt;p&gt;If I understand correctly currently the QuorumServers are exported not QuorumVerifier.&lt;/p&gt;</comment>
                            <comment id="14006918" author="rakeshr" created="Fri, 23 May 2014 07:46:13 +0100"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; for the comments. Exposes new attribute LocalPeerMXBean#getQuorumSystemInfo(), which inturn make use of QuorumVerifier#toString() implementation. Kindly review the latest patch, Thanks!&lt;/p&gt;

&lt;p&gt;Following is the sample value of QuorumHierarchical&apos;s QuorumSystemInfo attribute value:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
server.1=127.0.0.1:12223:12228:participant;0.0.0.0:11233
server.2=127.0.0.1:12224:12229:participant;0.0.0.0:11234
server.3=127.0.0.1:12225:12230:participant;0.0.0.0:11235
server.4=127.0.0.1:12226:12231:participant;0.0.0.0:11236
server.5=127.0.0.1:12227:12232:participant;0.0.0.0:11237
group.1=1:2:3
group.2=4:5
weight.1=1
weight.2=1
weight.3=1
weight.4=0
weight.5=0
version=100000000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14007652" author="hadoopqa" created="Fri, 23 May 2014 21:25:02 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12646463/ZOOKEEPER-1659.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12646463/ZOOKEEPER-1659.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1596684.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2111//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2111//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2111//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2111//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2111//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2111//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14007740" author="hadoopqa" created="Fri, 23 May 2014 22:35:09 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12646463/ZOOKEEPER-1659.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12646463/ZOOKEEPER-1659.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1596684.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2112//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2112//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2112//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2112//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2112//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2112//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14007764" author="shralex" created="Fri, 23 May 2014 22:58:11 +0100"  >&lt;p&gt;Thanks, Rakesh! The code for adding and removing remote peers is much clearer now too.&lt;br/&gt;
But what about the local one ? did you decide to leave it always registered even if its removed from the ensemble ?&lt;/p&gt;</comment>
                            <comment id="14011975" author="michim" created="Thu, 29 May 2014 03:14:22 +0100"  >&lt;p&gt;ping!&lt;/p&gt;</comment>
                            <comment id="14012072" author="rakeshr" created="Thu, 29 May 2014 06:07:07 +0100"  >&lt;p&gt;Sometime back myself and Alex had a private discussion to understand more on the reconfig behaviours. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt;. Here one thing come across is, even after removal of quorum peer from the configuration, the server will be running fine and old clients as well as new clients will work happily. Also, the QuorumPeer parameters are likely not affected either. Considering these cases, IMHO LocalPeerBean(self) can be accessible to the external users as long as the server is alive, what others opinion?.&lt;/p&gt;

&lt;p&gt;Following are the attributes of LocalPeerBean:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;State&lt;/li&gt;
	&lt;li&gt;QuorumAddress&lt;/li&gt;
	&lt;li&gt;ElectionAddress&lt;/li&gt;
	&lt;li&gt;LearnerType&lt;/li&gt;
	&lt;li&gt;ClientAddress&lt;/li&gt;
	&lt;li&gt;ElectionType&lt;/li&gt;
	&lt;li&gt;TickTime&lt;/li&gt;
	&lt;li&gt;MaxClientCnxnsPerHost&lt;/li&gt;
	&lt;li&gt;MinSessionTimeout&lt;/li&gt;
	&lt;li&gt;MaxSessionTimeout&lt;/li&gt;
	&lt;li&gt;InitLimit&lt;/li&gt;
	&lt;li&gt;Tick&lt;/li&gt;
	&lt;li&gt;SyncLimit&lt;/li&gt;
	&lt;li&gt;Name&lt;/li&gt;
	&lt;li&gt;StartTime&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now as part of this patch proposal we will be adding the following attributes too.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;QuorumSystemInfo&lt;/li&gt;
	&lt;li&gt;ConfigVersion&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14012830" author="hadoopqa" created="Thu, 29 May 2014 21:20:11 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647430/ZOOKEEPER-1659.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647430/ZOOKEEPER-1659.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1598087.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2117//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2117//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2117//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2117//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2117//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2117//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14014600" author="rakeshr" created="Sat, 31 May 2014 11:36:19 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt; As per discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; its decided to keep the localbean. I&apos;ve attached new patch, could you please review it when you get sometime. Thanks!&lt;/p&gt;</comment>
                            <comment id="14014746" author="michim" created="Sat, 31 May 2014 19:52:16 +0100"  >&lt;p&gt;+1. Alex, could you also take a look at the latest patch?&lt;/p&gt;</comment>
                            <comment id="14014857" author="shralex" created="Sun, 1 Jun 2014 00:01:19 +0100"  >&lt;p&gt;Thanks for adding more tests! Looking at the new tests verifyRemoteBean(String remoteBean) seems to be verifying that the bean is not registered. Please change the function name to reflect that. &lt;/p&gt;

&lt;p&gt;I don&apos;t fully understand the remote and local bean naming convention. Can you please explain ?&lt;/p&gt;</comment>
                            <comment id="14014952" author="rakeshr" created="Sun, 1 Jun 2014 11:53:55 +0100"  >&lt;blockquote&gt;&lt;p&gt;new tests verifyRemoteBean(String remoteBean) seems to be verifying that the bean is not registered. Please change the function name to reflect that.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ve replaced using JMX.ensureNone(rBeanName). This is already available and serves the purpose.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t fully understand the remote and local bean naming convention. Can you please explain ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It is actually to represents the object name pattern identifying the MBean to be retrieved, in our case it is RemotePeerMXBean and LocalPeerMXBean beans. Test case first tries to get the given MBean, then gets the value of a specific attribute of that MBean and does the assertion. I&apos;ve modified the variable names &apos;remoteBean and localBean&apos; to &apos;remotePeerBean and localPeerBean&apos;. Also I&apos;ve tried modifying the method names to get more clarity,  is that fine ?&lt;/p&gt;</comment>
                            <comment id="14014955" author="hadoopqa" created="Sun, 1 Jun 2014 12:13:47 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647814/ZOOKEEPER-1659.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647814/ZOOKEEPER-1659.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1598087.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2119//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2119//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2119//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2119//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2119//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2119//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14015061" author="shralex" created="Sun, 1 Jun 2014 19:51:47 +0100"  >&lt;p&gt;Thanks Rakesh! For the second question I meant this:&lt;/p&gt;

&lt;p&gt;for remote bean:&lt;br/&gt;
CommonNames.DOMAIN + &quot;:name0=ReplicatedServer_id&quot; + nextIndex + &quot;,name1=replica.&quot; + changingIndex;&lt;/p&gt;

&lt;p&gt;for local bean: CommonNames.DOMAIN + &quot;:name0=ReplicatedServer_id&quot; + leavingIndex  + &quot;,name1=replica.&quot; + leavingIndex;&lt;/p&gt;

&lt;p&gt;the text here: &lt;a href=&quot;https://zookeeper.apache.org/doc/r3.3.2/zookeeperJMX.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://zookeeper.apache.org/doc/r3.3.2/zookeeperJMX.html&lt;/a&gt;&lt;br/&gt;
indicates that the indices for replica.x and ReplicatedServer_id.x are the same (myid of the server). Can you explain why in the case of remote bean the indices are different ? should the documentation change ? &lt;/p&gt;

&lt;p&gt;also, did you have a chance to try it with a jmx console ?&lt;/p&gt;
</comment>
                            <comment id="14015195" author="hadoopqa" created="Mon, 2 Jun 2014 07:13:46 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647862/ZK-1659-jmx%20console-after-remove-qp-reconfig.png&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647862/ZK-1659-jmx%20console-after-remove-qp-reconfig.png&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1598087.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2120//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2120//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14015197" author="rakeshr" created="Mon, 2 Jun 2014 07:20:55 +0100"  >&lt;blockquote&gt;&lt;p&gt;ffor remote bean:&lt;br/&gt;
CommonNames.DOMAIN + &quot;:name0=ReplicatedServer_id&quot; + nextIndex + &quot;,name1=replica.&quot; + changingIndex;&lt;br/&gt;
for local bean: CommonNames.DOMAIN + &quot;:name0=ReplicatedServer_id&quot; + leavingIndex + &quot;,name1=replica.&quot; + leavingIndex;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Assume am having servers zk-1, zk-2, zk-3. &lt;/p&gt;

&lt;p&gt;For example, am checking the beans of zk-2 it has the following beans:&lt;br/&gt;
1) localbean: name0=ReplicatedServer_id2,name1=replica.2&lt;br/&gt;
2) remote bean of zk-1:  name0=ReplicatedServer_id2,name1=replica.1&lt;br/&gt;
3) remote bean of zk-3:  name0=ReplicatedServer_id2,name1=replica.3&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;the text here: &lt;a href=&quot;https://zookeeper.apache.org/doc/r3.3.2/zookeeperJMX.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://zookeeper.apache.org/doc/r3.3.2/zookeeperJMX.html&lt;/a&gt;&lt;br/&gt;
indicates that the indices for replica.x and ReplicatedServer_id.x are the same (myid of the server). Can you explain why in the case of remote bean the indices are different ? should the documentation change ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think no issues in docs.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;also, did you have a chance to try it with a jmx console ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Attached snap of the jmx console. Also I tried adding few hints, please forgive if its confusing.&lt;/p&gt;</comment>
                            <comment id="14015592" author="shralex" created="Mon, 2 Jun 2014 18:19:14 +0100"  >&lt;p&gt;Got it. thanks for the explanation and the screenshots! I think its very helpful. &lt;/p&gt;

&lt;p&gt;&amp;gt;        int leavingIndex = 1;&lt;br/&gt;
&amp;gt;        int nextIndex = 2;&lt;/p&gt;

&lt;p&gt;I have one last comment - when removing/changing server 1 (for example), instead of checking that the remote bean for replica.1 was changed/removed only for ReplicatedServer_id2 (next on the list), could you please check that that the remote bean for replica.1 was changed/removed for both other servers ?&lt;/p&gt;

</comment>
                            <comment id="14015721" author="rakeshr" created="Mon, 2 Jun 2014 19:46:11 +0100"  >&lt;p&gt;Attached new patch addressing the comments, please have a look at it. Thanks!&lt;/p&gt;</comment>
                            <comment id="14015728" author="shralex" created="Mon, 2 Jun 2014 19:49:13 +0100"  >&lt;p&gt;+1 looks great!&lt;/p&gt;</comment>
                            <comment id="14015775" author="hadoopqa" created="Mon, 2 Jun 2014 20:29:18 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647957/ZOOKEEPER-1659.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647957/ZOOKEEPER-1659.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1598087.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2121//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2121//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2121//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2121//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2121//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2121//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14018088" author="michim" created="Wed, 4 Jun 2014 21:02:26 +0100"  >&lt;p&gt;+1 I&apos;m checking this in. Rakesh, thank you for taking care of this!&lt;/p&gt;</comment>
                            <comment id="14018094" author="michim" created="Wed, 4 Jun 2014 21:08:32 +0100"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1600481&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1600481&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14018160" author="hudson" created="Wed, 4 Jun 2014 21:50:45 +0100"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2325 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2325/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2325/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1659&quot; title=&quot;Add JMX support for dynamic reconfiguration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1659&quot;&gt;&lt;del&gt;ZOOKEEPER-1659&lt;/del&gt;&lt;/a&gt;. Add JMX support for dynamic reconfiguration (Rakesh R via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1600481&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1600481&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/LocalPeerBean.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/LocalPeerMXBean.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/RemotePeerBean.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/RemotePeerMXBean.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/HierarchicalQuorumTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/JMXEnv.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/ReconfigTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12401266">ZOOKEEPER-107</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12647862" name="ZK-1659-jmx console-after-remove-qp-reconfig.png" size="30671" author="rakeshr" created="Mon, 2 Jun 2014 07:06:41 +0100"/>
                            <attachment id="12647861" name="ZK-1659-jmx console-before-reconfig.png" size="32463" author="rakeshr" created="Mon, 2 Jun 2014 07:06:20 +0100"/>
                            <attachment id="12647957" name="ZOOKEEPER-1659.patch" size="22508" author="rakeshr" created="Mon, 2 Jun 2014 19:44:46 +0100"/>
                            <attachment id="12647814" name="ZOOKEEPER-1659.patch" size="21153" author="rakeshr" created="Sun, 1 Jun 2014 11:25:45 +0100"/>
                            <attachment id="12647430" name="ZOOKEEPER-1659.patch" size="21620" author="rakeshr" created="Thu, 29 May 2014 20:41:07 +0100"/>
                            <attachment id="12646463" name="ZOOKEEPER-1659.patch" size="12334" author="rakeshr" created="Fri, 23 May 2014 07:34:22 +0100"/>
                            <attachment id="12646008" name="ZOOKEEPER-1659.patch" size="8472" author="rakeshr" created="Wed, 21 May 2014 14:23:31 +0100"/>
                            <attachment id="12644408" name="ZOOKEEPER-1659.patch" size="7395" author="rakeshr" created="Mon, 12 May 2014 13:12:22 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Oct 2013 16:16:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcf2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>