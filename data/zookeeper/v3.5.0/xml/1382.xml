<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:44:27 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1382/ZOOKEEPER-1382.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1382] Zookeeper server holds onto dead/expired session ids in the watch data structures</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1382</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;I&apos;ve observed that zookeeper server holds onto expired session ids in the watcher data structures. The result is the wchp command reports session ids that cannot be found through cons/dump and those expired session ids sit there maybe until the server is restarted. Here are snippets from the client and the server logs that lead to this state, for one particular session id 0x134485fd7bcb26f -&lt;/p&gt;

&lt;p&gt;There are 4 servers in the zookeeper cluster - 223, 224, 225 (leader), 226 and I&apos;m using ZkClient to connect to the cluster&lt;/p&gt;

&lt;p&gt;From the application log -&lt;/p&gt;

&lt;p&gt;application.log.2012-01-26-325.gz:2012/01/26 04:56:36.177 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;ClientCnxn&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;main-SendThread(223.prod:12913)&amp;#93;&lt;/span&gt; [application Session establishment complete on server 223.prod/172.17.135.38:12913, sessionid = 0x134485fd7bcb26f, negotiated timeout = 6000&lt;br/&gt;
application.log.2012-01-27.gz:2012/01/27 09:52:37.714 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;ClientCnxn&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;main-SendThread(223.prod:12913)&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;application&amp;#93;&lt;/span&gt; Client session timed out, have not heard from server in 9827ms for sessionid 0x134485fd7bcb26f, closing socket connection and attempting reconnect&lt;br/&gt;
application.log.2012-01-27.gz:2012/01/27 09:52:38.191 INFO &lt;span class=&quot;error&quot;&gt;&amp;#91;ClientCnxn&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;main-SendThread(226.prod:12913)&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;application&amp;#93;&lt;/span&gt; Unable to reconnect to ZooKeeper service, session 0x134485fd7bcb26f has expired, closing socket connection&lt;/p&gt;

&lt;p&gt;On the leader zk, 225 -&lt;/p&gt;

&lt;p&gt;zookeeper.log.2012-01-27-leader-225.gz:2012-01-27 09:52:34,010 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SessionTracker:ZooKeeperServer@314&amp;#93;&lt;/span&gt; - Expiring session 0x134485fd7bcb26f, timeout of 6000ms exceeded&lt;br/&gt;
zookeeper.log.2012-01-27-leader-225.gz:2012-01-27 09:52:34,010 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;ProcessThread:-1:PrepRequestProcessor@391&amp;#93;&lt;/span&gt; - Processed session termination for sessionid: 0x134485fd7bcb26f&lt;/p&gt;

&lt;p&gt;On the server, the client was initially connected to, 223 -&lt;/p&gt;

&lt;p&gt;zookeeper.log.2012-01-26-223.gz:2012-01-26 04:56:36,173 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;CommitProcessor:1:NIOServerCnxn@1580&amp;#93;&lt;/span&gt; - Established session 0x134485fd7bcb26f with negotiated timeout 6000 for client /172.17.136.82:45020&lt;br/&gt;
zookeeper.log.2012-01-27-223.gz:2012-01-27 09:52:34,018 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;CommitProcessor:1:NIOServerCnxn@1435&amp;#93;&lt;/span&gt; - Closed socket connection for client /172.17.136.82:45020 which had sessionid 0x134485fd7bcb26f&lt;/p&gt;

&lt;p&gt;Here are the log snippets from 226, which is the server, the client reconnected to, before getting session expired event -&lt;/p&gt;

&lt;p&gt;2012-01-27 09:52:38,190 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerCxn.Factory:0.0.0.0/0.0.0.0:12913:NIOServerCnxn@770&amp;#93;&lt;/span&gt; - Client attempting to renew session 0x134485fd7bcb26f at /172.17.136.82:49367&lt;br/&gt;
2012-01-27 09:52:38,191 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;QuorumPeer:/0.0.0.0:12913:NIOServerCnxn@1573&amp;#93;&lt;/span&gt; - Invalid session 0x134485fd7bcb26f for client /172.17.136.82:49367, probably expired&lt;br/&gt;
2012-01-27 09:52:38,191 - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;NIOServerCxn.Factory:0.0.0.0/0.0.0.0:12913:NIOServerCnxn@1435&amp;#93;&lt;/span&gt; - Closed socket connection for client /172.17.136.82:49367 which had sessionid 0x134485fd7bcb26f&lt;/p&gt;

&lt;p&gt;wchp output from 226, taken on 01/30 -&lt;/p&gt;

&lt;p&gt;nnarkhed-ld:zk-cons-wchp-2012013000 nnarkhed$ grep 0x134485fd7bcb26f &lt;b&gt;226.*wchp&lt;/b&gt; | wc -l&lt;br/&gt;
3&lt;/p&gt;

&lt;p&gt;wchp output from 223, taken on 01/30 -&lt;/p&gt;

&lt;p&gt;nnarkhed-ld:zk-cons-wchp-2012013000 nnarkhed$ grep 0x134485fd7bcb26f &lt;b&gt;223.*wchp&lt;/b&gt; | wc -l&lt;br/&gt;
0&lt;/p&gt;

&lt;p&gt;cons output from 223 and 226, taken on 01/30 -&lt;/p&gt;

&lt;p&gt;nnarkhed-ld:zk-cons-wchp-2012013000 nnarkhed$ grep 0x134485fd7bcb26f &lt;b&gt;226.*cons&lt;/b&gt; | wc -l&lt;br/&gt;
0&lt;/p&gt;

&lt;p&gt;nnarkhed-ld:zk-cons-wchp-2012013000 nnarkhed$ grep 0x134485fd7bcb26f &lt;b&gt;223.*cons&lt;/b&gt; | wc -l&lt;br/&gt;
0&lt;/p&gt;

&lt;p&gt;So, what seems to have happened is that the client was able to re-register the watches on the new server (226), after it got disconnected from 223, inspite of having an expired session id. &lt;/p&gt;


&lt;p&gt;In NIOServerCnxn, I saw that after suspecting that a session is expired, a server removes the cnxn and its watches from its internal data structures. But before that it allows more requests to be processed even if the session is expired -&lt;/p&gt;

&lt;p&gt;            // Now that the session is ready we can start receiving packets&lt;br/&gt;
            synchronized (this.factory) &lt;/p&gt;
{
                sk.selector().wakeup();
                enableRecv();
            }
&lt;p&gt;        } catch (Exception e) &lt;/p&gt;
{
            LOG.warn(&quot;Exception while establishing session, closing&quot;, e);
            close();
        }

&lt;p&gt;I wonder if the client somehow sneaked in the set watches, right after the server removed the connection through removeCnxn() API ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540477">ZOOKEEPER-1382</key>
            <summary>Zookeeper server holds onto dead/expired session ids in the watch data structures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abranzyck">Germ&#225;n Blanco</assignee>
                                    <reporter username="nehanarkhede">Neha Narkhede</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2012 01:06:39 +0000</created>
                <updated>Thu, 13 Mar 2014 18:16:56 +0000</updated>
                            <resolved>Wed, 11 Dec 2013 19:18:31 +0000</resolved>
                                    <version>3.4.5</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>16</watches>
                                                                <comments>
                            <comment id="13208770" author="nehanarkhede" created="Wed, 15 Feb 2012 20:29:26 +0000"  >&lt;p&gt;Found this bug on 3.3.4 and hence, am uploading a draft patch with a possible fix for 3.3.4 first. If it looks good, I&apos;ll try doing the same on trunk.&lt;/p&gt;

&lt;p&gt;Here is what I think is causing this bug. Please correct me if I&apos;m wrong -&lt;/p&gt;

&lt;p&gt;Say a client connects to a &amp;gt; 1 node ZK cluster and registers watch on some path. After that, if the client goes into a GC pause, the leader expires the session and proposes closing the session to the followers. Meanwhile, the client wakes up and tries to renew its session with one of the followers. Now, when the follower detects that the session is invalid, it sends a close session response to the client, and enables receive on the selector key for that connection. So it receives the setWatches request during the renew session. There is a race condition since the request processors on the follower merely &quot;pass-through&quot; the non-transactional setWatches request while the NIOServerCnxn has sent the close session request to the client. Due to the above, sometimes, the watches are set right after the NIOServerCnxn is removed from the ZooKeeperServer. Hence, the watches are left on the servers, for expired sessions, effectively causing a memory leak.  &lt;/p&gt;

&lt;p&gt;The fix is to enable reads on the connection only if the session is found to be valid.&lt;/p&gt;

&lt;p&gt;For testing, I wrote a test and added it as part of the DisconnectedWatcherTest. However, it uses the in-memory ZK ensemble class from curator, with a few modifications to test watches. In addition to this, have added a timeoutSession() API to TestableZooKeeper to simulate the client side GC pause. However, it involves suspending and resuming the event thread. &lt;/p&gt;

&lt;p&gt;I have 2 concerns about tests for this patch -&lt;br/&gt;
1. Method used to simulate a client side GC pause&lt;br/&gt;
2. Longer test duration, since the test runs multiple iterations to reproduce this corner case race condition&lt;/p&gt;

&lt;p&gt;For 1, this is hacky, works, but it will be good to know other alternatives for writing this test.&lt;br/&gt;
For 2, since this is more of a system test, wonder what is the best way to include it in zookeeper. Also, the new helper classes are from curator. &lt;/p&gt;

&lt;p&gt;Lastly, I left the DEBUG/TRACE logging, that I found useful to understand the server code, in the patch. Maybe, not all of it follows logging conventions.&lt;/p&gt;</comment>
                            <comment id="13208774" author="hadoopqa" created="Wed, 15 Feb 2012 20:32:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514699/ZOOKEEPER-1382_3.3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514699/ZOOKEEPER-1382_3.3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1242982.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 16 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/956//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/956//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13208792" author="fournc" created="Wed, 15 Feb 2012 21:03:54 +0000"  >&lt;p&gt;This is a lot of change for a fix that seems to be really small. Can you put this into reviewboard for more careful review? I&apos;m not sure we will want all the logging changes so you might want to go through and trim that stuff up before putting it up there. Thanks!&lt;/p&gt;</comment>
                            <comment id="13232470" author="phunt" created="Mon, 19 Mar 2012 05:56:23 +0000"  >&lt;p&gt;this is a good one to get in, see the feedback provided so far though. (also, likely we&apos;ll need a patch for post 3.3).&lt;/p&gt;</comment>
                            <comment id="13404070" author="mahadev" created="Fri, 29 Jun 2012 18:57:15 +0100"  >&lt;p&gt;Moving it out, Neha can you please provide a patch for trunk and 3.4 as well? Good to see the tests that you added.&lt;/p&gt;</comment>
                            <comment id="13444683" author="mahadev" created="Thu, 30 Aug 2012 06:16:35 +0100"  >&lt;p&gt;Moving it out again, Neha any chance you will have some bandwidth to follow up on this?&lt;/p&gt;</comment>
                            <comment id="13575670" author="barkbay" created="Mon, 11 Feb 2013 08:27:08 +0000"  >&lt;p&gt;Since we monitor sessions and watches we note that we encounter this problem from time to time.&lt;br/&gt;
This is not a big issue but it causes a memory leak.&lt;br/&gt;
I&apos;ll try to see if I can work on it but it does seem hard to reproduce in a unit test.&lt;/p&gt;</comment>
                            <comment id="13591846" author="barkbay" created="Sun, 3 Mar 2013 19:48:55 +0000"  >&lt;p&gt;I managed to create a JUnit test case that demonstrate the &quot;watches leak&quot;, unfortunately i had to promote a few methods to the public scope.&lt;/p&gt;

&lt;p&gt;As Neha pointed out the unit test shows that if a client send a connection request with an expired session the NIOServerCnxn class still processes upcoming messages like OpCode.setWatches.&lt;/p&gt;

&lt;p&gt;Actually the fix simply consists to call cnxn.enableRecv() only if the session has been validated by the leader.&lt;/p&gt;</comment>
                            <comment id="13591848" author="hadoopqa" created="Sun, 3 Mar 2013 19:51:49 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571815/ZOOKEEPER-1382.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571815/ZOOKEEPER-1382.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1448007.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1419//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1419//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13591853" author="barkbay" created="Sun, 3 Mar 2013 20:09:49 +0000"  >&lt;p&gt;Current patch is for branch 3.4&lt;br/&gt;
Sorry&lt;/p&gt;</comment>
                            <comment id="13591854" author="hadoopqa" created="Sun, 3 Mar 2013 20:11:48 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12571817/ZOOKEEPER-1382-branch-3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12571817/ZOOKEEPER-1382-branch-3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1448007.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1420//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1420//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13592041" author="mahadev" created="Mon, 4 Mar 2013 07:36:58 +0000"  >&lt;p&gt;Michael,&lt;br/&gt;
 Would you be able to upload a patch for trunk as well?&lt;/p&gt;</comment>
                            <comment id="13592254" author="barkbay" created="Mon, 4 Mar 2013 14:57:18 +0000"  >&lt;p&gt;It seems that the behavior of disableRecv() / enableRecv() has changed a bit in 3.5 : there is a new thread (SelectorThread) in charge of interest op updates and updates are processed in a non blocking fashion (updates are queued to be handled later by the SelectorThread, if i understand correctly it is more a throttle mechanism than something else). The unit test is no more relevant.&lt;/p&gt;

&lt;p&gt;If we want to fix the two branches (3.4 and 3.5) it is imho no more a good idea to rely on enableRecv().&lt;br/&gt;
May be it would be cleaner to introduce a new function ServerCnxn.setValidSession(boolean valid) that informs the implementation (NIOServerCnxn or NettyServerCnxn) that the session has been (re)validated and then allow subsequent messages to be processed.&lt;/p&gt;

&lt;p&gt;If you don&apos;t mind i will try to provide an other patch and a unit test for both branches.&lt;/p&gt;

</comment>
                            <comment id="13594399" author="thawan" created="Wed, 6 Mar 2013 05:49:47 +0000"  >&lt;p&gt;Can you explain a bit more why we cannot rely on disableRecv() / enableRecv() in 3.5 to fix this issue? &lt;/p&gt;

&lt;p&gt;From my understanding, although the request is now process in non-blocking fashion, we are calling disableRecv() while processing a ConnectRequest packet, so the SelectorThread won&apos;t try to select this socket again for reading after we finished processing the packet. &lt;/p&gt;
</comment>
                            <comment id="13596979" author="barkbay" created="Fri, 8 Mar 2013 09:47:58 +0000"  >&lt;p&gt;My bad, I have not spend enough time on the new branch, you are right. The same fix could be applied.&lt;br/&gt;
Nevertheless the unit test is no more relevant.&lt;br/&gt;
I&apos;ll try to work on that.&lt;/p&gt;</comment>
                            <comment id="13598293" author="hadoopqa" created="Sun, 10 Mar 2013 15:52:43 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12572967/ZOOKEEPER-1382.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12572967/ZOOKEEPER-1382.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1453693.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1427//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1427//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1427//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1427//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1427//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1427//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13598296" author="barkbay" created="Sun, 10 Mar 2013 15:59:08 +0000"  >&lt;p&gt;testTransactionLogCorruption fails, not sure if is related to the patch or if it&apos;s because of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1629&quot; title=&quot;testTransactionLogCorruption occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1629&quot;&gt;&lt;del&gt;ZOOKEEPER-1629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13598458" author="fournc" created="Mon, 11 Mar 2013 01:03:18 +0000"  >&lt;p&gt;I can&apos;t even get the TruncateCorruptionTest to run to completion or failure at all with or without this patch. I think we need to open a separate bug report on it. Besides that, this fix looks good to me.&lt;/p&gt;</comment>
                            <comment id="13598463" author="shralex" created="Mon, 11 Mar 2013 01:16:00 +0000"  >&lt;p&gt;I&apos;ve opened a bug for this some time ago: &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1629&quot; title=&quot;testTransactionLogCorruption occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1629&quot;&gt;&lt;del&gt;ZOOKEEPER-1629&lt;/del&gt;&lt;/a&gt; perhaps we should disable this test for now ? for example, if one of the Java tests fails, the C tests don&apos;t run at all.&lt;/p&gt;</comment>
                            <comment id="13753571" author="fpj" created="Thu, 29 Aug 2013 13:42:13 +0100"  >&lt;p&gt;The fix looks good to me overall, I just have a couple of comments:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Some classes have been made public for testing. Could we use mock classes instead (classes that extend the target ZK classes)?&lt;/li&gt;
	&lt;li&gt;We don&apos;t really name the test classes after the jiras that originated them. Could we use a more expressive name here?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13777620" author="abranzyck" created="Wed, 25 Sep 2013 16:34:06 +0100"  >&lt;p&gt;I would like to propose to skip the tests cases for this JIRA.&lt;br/&gt;
The modification required is minimal and it seems clearly correct. However, trying to build a test that works and that doesn&apos;t require future maintenance seems to be very complex.&lt;br/&gt;
I have done the mock classes as suggested by Flavio above, but the tests don&apos;t work any more (at least in trunk). My guess is that it is because of latest changes in the code. I don&apos;t see an easy fix (at least easy for me), and what is worse, it seems to me that these test cases will require review very often, since they depend very deeply on how things are implemented.&lt;/p&gt;</comment>
                            <comment id="13788048" author="antoniomau001" created="Mon, 7 Oct 2013 11:22:35 +0100"  >&lt;p&gt;Hi, is ZooKeeper 3.4.3 affected by this bug?&lt;/p&gt;</comment>
                            <comment id="13788227" author="abranzyck" created="Mon, 7 Oct 2013 16:34:24 +0100"  >&lt;p&gt;Yes&lt;/p&gt;</comment>
                            <comment id="13801426" author="abranzyck" created="Tue, 22 Oct 2013 03:26:39 +0100"  >&lt;p&gt;No luck with the previous lazy proposal, so I think this is it.&lt;/p&gt;</comment>
                            <comment id="13801438" author="hadoopqa" created="Tue, 22 Oct 2013 04:05:10 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12609581/ZOOKEEPER-1382.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12609581/ZOOKEEPER-1382.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1534390.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1714//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1714//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1714//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1714//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1714//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1714//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13804293" author="fpj" created="Thu, 24 Oct 2013 16:09:43 +0100"  >&lt;p&gt;Given that the Mock* classes are only used in WatchLeakTest, I was wondering if it wouldn&apos;t be best to have them defined inside the WatchLeakTest class. &lt;/p&gt;

&lt;p&gt;Also, there is a test case not running because @Test is commented out.&lt;/p&gt;</comment>
                            <comment id="13804987" author="abranzyck" created="Fri, 25 Oct 2013 04:55:16 +0100"  >&lt;p&gt;At some point I commented that out. I thought that the test case didn&apos;t make much sense since it was passing both with and without the change. It is also not there in the 3.4 version. But this was hiding an error in the test cases.&lt;br/&gt;
Now it is fixed. &lt;br/&gt;
I had to make a small modification in NIOServerCnxn.java in order to allow the test to work. SocketChannel.isOpen is a final method and can&apos;t be mocked by Mockito.&lt;br/&gt;
The Mock classes can&apos;t be moved to a different package. Otherwise they don&apos;t have access to the protected elements in that package any more. &lt;/p&gt;</comment>
                            <comment id="13805018" author="hadoopqa" created="Fri, 25 Oct 2013 05:35:47 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12610262/ZOOKEEPER-1382.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12610262/ZOOKEEPER-1382.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1535491.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1722//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1722//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1722//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1722//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1722//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1722//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13814641" author="abranzyck" created="Wed, 6 Nov 2013 06:05:49 +0000"  >&lt;p&gt;I wouldn&apos;t recommend to run zookeeper using ramdisk without having an additional method that ensures consistency. Ramdisk means data is not persistent after a reboot, and this JIRA shows that losing data in one node when the quorum was in minority may lead to permanent inconsistencies in the quorum.&lt;/p&gt;</comment>
                            <comment id="13814672" author="abranzyck" created="Wed, 6 Nov 2013 07:06:05 +0000"  >&lt;p&gt;Added a review request for this &lt;a href=&quot;https://reviews.apache.org/r/15259/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/15259/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13815835" author="abranzyck" created="Thu, 7 Nov 2013 10:46:49 +0000"  >&lt;p&gt;spaces and style changes&lt;/p&gt;</comment>
                            <comment id="13815855" author="hadoopqa" created="Thu, 7 Nov 2013 11:24:17 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612572/ZOOKEEPER-1382.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612572/ZOOKEEPER-1382.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1539529.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1747//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1747//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1747//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1747//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1747//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1747//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13821233" author="abranzyck" created="Wed, 13 Nov 2013 11:29:39 +0000"  >&lt;p&gt;I forgot to thank &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for reviewing the patch. ... dicen que m&#225;s vale tarde que nunca.&lt;/p&gt;</comment>
                            <comment id="13832637" author="abranzyck" created="Tue, 26 Nov 2013 15:02:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, could you please take a look at this and say if it is ok now?&lt;/p&gt;</comment>
                            <comment id="13838906" author="rakeshr" created="Wed, 4 Dec 2013 14:00:34 +0000"  >&lt;p&gt;Hi German, &lt;br/&gt;
Patch looks very nice, especially test cases are really good&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Add few suggestions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Please add message while asserting, this will give more clarity, like
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;There must be NO watches!&quot;&lt;/span&gt;, 0, watchCount);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Formatting is not proper in MockSelectorThread.java. Normally, between methods there will be a newline.&lt;/li&gt;
	&lt;li&gt;This is a suggestion and FYI. I would like to use @RunWith(Parameterized.class), when there are situations to run the same test case with different input values. In the patch, we have testcases with sessiontimeout and without sessiontimeout flags. Please refer MultiTransactionTest to understand more on this pattern. This way it will again make the test cases very simple.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13839019" author="abranzyck" created="Wed, 4 Dec 2013 15:55:56 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, but the test cases are originally from someone else, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=barkbay&quot; class=&quot;user-hover&quot; rel=&quot;barkbay&quot;&gt;Michael Morello&lt;/a&gt; I believe. And I agree, it seems very difficult to come up with a way to test this and he has done a good job.&lt;br/&gt;
And thank you for the suggestions, I will try to take care of them in a few days and propose a new patch.&lt;/p&gt;</comment>
                            <comment id="13840979" author="abranzyck" created="Fri, 6 Dec 2013 04:51:42 +0000"  >&lt;p&gt;Updated with last comments.&lt;/p&gt;</comment>
                            <comment id="13841000" author="hadoopqa" created="Fri, 6 Dec 2013 05:36:11 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617336/ZOOKEEPER-1382.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617336/ZOOKEEPER-1382.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1547702.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1818//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1818//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1818//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1818//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1818//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1818//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13845600" author="fournc" created="Wed, 11 Dec 2013 18:18:41 +0000"  >&lt;p&gt;Pretty sweet tests. I think this looks good on trunk, will check it in.&lt;/p&gt;</comment>
                            <comment id="13845607" author="fournc" created="Wed, 11 Dec 2013 18:32:10 +0000"  >&lt;p&gt;Looks good on 3.4 as well, will close this as soon as builds complete successfully. Thanks to all who helped with this!&lt;/p&gt;</comment>
                            <comment id="13845636" author="hudson" created="Wed, 11 Dec 2013 19:00:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2150 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2150/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2150/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1382&quot; title=&quot;Zookeeper server holds onto dead/expired session ids in the watch data structures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1382&quot;&gt;&lt;del&gt;ZOOKEEPER-1382&lt;/del&gt;&lt;/a&gt;. Zookeeper server holds onto dead/expired session ids in the watch data structures&lt;br/&gt;
  (Germ&#225;n Blanco and Michael Morello via camille) (camille: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550213&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1550213&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZooKeeperServer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/MockPacket.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/MockNIOServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/MockSelectorThread.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/WatchLeakTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13846547" author="abranzyck" created="Thu, 12 Dec 2013 18:17:40 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fournc&quot; class=&quot;user-hover&quot; rel=&quot;fournc&quot;&gt;Camille Fournier&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="13933708" author="fpj" created="Thu, 13 Mar 2014 18:16:56 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12617335" name="ZOOKEEPER-1382-branch-3.4.patch" size="16735" author="abranzyck" created="Fri, 6 Dec 2013 04:50:52 +0000"/>
                            <attachment id="12610261" name="ZOOKEEPER-1382-branch-3.4.patch" size="16735" author="abranzyck" created="Fri, 25 Oct 2013 04:45:00 +0100"/>
                            <attachment id="12609579" name="ZOOKEEPER-1382-branch-3.4.patch" size="15797" author="abranzyck" created="Tue, 22 Oct 2013 03:24:31 +0100"/>
                            <attachment id="12571817" name="ZOOKEEPER-1382-branch-3.4.patch" size="14428" author="barkbay" created="Sun, 3 Mar 2013 20:09:49 +0000"/>
                            <attachment id="12617336" name="ZOOKEEPER-1382.patch" size="20892" author="abranzyck" created="Fri, 6 Dec 2013 04:51:42 +0000"/>
                            <attachment id="12612572" name="ZOOKEEPER-1382.patch" size="20740" author="abranzyck" created="Thu, 7 Nov 2013 10:46:49 +0000"/>
                            <attachment id="12610262" name="ZOOKEEPER-1382.patch" size="20757" author="abranzyck" created="Fri, 25 Oct 2013 04:55:16 +0100"/>
                            <attachment id="12609581" name="ZOOKEEPER-1382.patch" size="21968" author="abranzyck" created="Tue, 22 Oct 2013 03:26:39 +0100"/>
                            <attachment id="12572967" name="ZOOKEEPER-1382.patch" size="19589" author="barkbay" created="Sun, 10 Mar 2013 15:20:24 +0000"/>
                            <attachment id="12514699" name="ZOOKEEPER-1382_3.3.4.patch" size="45556" author="nehanarkhede" created="Wed, 15 Feb 2012 20:29:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Feb 2012 20:32:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzsdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>