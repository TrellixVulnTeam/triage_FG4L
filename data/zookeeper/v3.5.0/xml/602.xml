<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:45:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-602/ZOOKEEPER-602.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-602] log all exceptions not caught by ZK threads</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-602</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;the java code should add a ThreadGroup exception handler that logs at ERROR level any uncaught exceptions thrown by Thread run methods.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442132">ZOOKEEPER-602</key>
            <summary>log all exceptions not caught by ZK threads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rakeshr">Rakesh R</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2009 19:25:06 +0000</created>
                <updated>Sat, 16 May 2015 21:35:31 +0100</updated>
                                            <version>3.2.1</version>
                                    <fixVersion>3.4.7</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>java client</component>
                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="12786095" author="breed" created="Fri, 4 Dec 2009 19:29:35 +0000"  >&lt;p&gt;i think the best strategy to address this would be to create a ZooKeeperThread that all the code must use with the following properties:&lt;/p&gt;

&lt;p&gt;1) it has a single constructor ZooKeeperThread(String threadName, long sid, boolean isUnhandledExceptionFatal), where threadName is a descriptive string, sid is the server id or -1 if not relevant,&lt;/p&gt;

&lt;p&gt;2) exceptions will be logged as errors unless isUnhandledExceptionFatal is true, then an unhandle exception on that thread will be logged as fatal and cause a shutdown.&lt;/p&gt;</comment>
                            <comment id="12841939" author="mahadev" created="Fri, 5 Mar 2010 17:28:53 +0000"  >&lt;p&gt;moving this issue to 3.4&lt;/p&gt;</comment>
                            <comment id="13049625" author="mahadev" created="Wed, 15 Jun 2011 06:58:50 +0100"  >&lt;p&gt;not a blocker. Moving it out of 3.4 release.&lt;/p&gt;</comment>
                            <comment id="13107840" author="lakshman" created="Mon, 19 Sep 2011 15:04:52 +0100"  >&lt;p&gt;Attached the patch for review&lt;/p&gt;</comment>
                            <comment id="13107845" author="hadoopqa" created="Mon, 19 Sep 2011 15:13:12 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12495070/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12495070/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1172406.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause tar ant target to fail.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs (version 1.3.9) to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/560//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/560//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/560//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/560//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13107944" author="phunt" created="Mon, 19 Sep 2011 17:26:27 +0100"  >&lt;p&gt;Looks like a case sensitivity issue:&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-ZOOKEEPER-Build/trunk/src/java/main/org/apache/zookeeper/server/ZookeeperThread.java:6: class ZooKeeperThread is public, should be declared in a file named ZooKeeperThread.java&lt;/p&gt;</comment>
                            <comment id="13117887" author="lakshman" created="Fri, 30 Sep 2011 06:18:26 +0100"  >&lt;p&gt;Following are the threads severity I&apos;ve considered.&lt;br/&gt;
If a thread is a Critical thread, then any unexpected exceptions (i.e., exceptions not handled by the thread) are considered as Fatal and JVM will shutdown.&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;ZooKeeper Threads&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Critical Thread&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;PrepRequestProcessor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SessionTrackerImpl&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SyncRequestProcessor &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CommitProcessor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FollowerRequestProcessor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ObserverRequestProcessor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ReadOnlyRequestProcessor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TRUE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;RecvWorker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;EventThread&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SendThread&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CommandThread&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WorkerReceiver&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WorkerSender&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;LearnerCnxAcceptor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Listener&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;LearnerHandler&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;QuorumPeer&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SendWorker&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ResponderThread&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FALSE&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                            <comment id="13117897" author="hadoopqa" created="Fri, 30 Sep 2011 06:44:09 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12496990/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12496990/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1177432.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/599//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/599//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/599//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/599//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/599//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/599//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13133873" author="hadoopqa" created="Mon, 24 Oct 2011 08:45:04 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12496990/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12496990/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1188033.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/642//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/642//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13133874" author="phunt" created="Mon, 24 Oct 2011 08:47:15 +0100"  >&lt;p&gt;I&apos;d like to see this go in - seems the patch needs to be updated for conflicts, also some findbugs issues.&lt;/p&gt;</comment>
                            <comment id="13133926" author="lakshman" created="Mon, 24 Oct 2011 10:36:35 +0100"  >&lt;p&gt;Thanks for the interest Pat.&lt;br/&gt;
I will refresh the patch on latest trunk.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;also some findbugs issues&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;One System.exit is introduced which is part of the fix.&lt;/p&gt;

&lt;p&gt;Can you please take a look at my previous comments about criticality of threads.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-602?focusedCommentId=13117887&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13117887&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-602?focusedCommentId=13117887&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13117887&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13828971" author="rakeshr" created="Thu, 21 Nov 2013 14:24:42 +0000"  >&lt;p&gt;Attached patch, which contains ZooKeeperThread and ZooKeeperCriticalThread to handle the uncaught exceptions. I&apos;ve added fix version 3.4.6 also, because I have seen many discussions related to missing threads and this will be helpful to know about the reason of thread exit. Please feel free to change the versions if anyone has different thoughts&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;This will cause findbug warning as it has System.exit() call in ZooKeeperCriticalThread and done exclusion of this.&lt;/p&gt;</comment>
                            <comment id="13829000" author="hadoopqa" created="Thu, 21 Nov 2013 15:05:45 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615124/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615124/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1543281.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1795//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1795//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1795//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1795//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1795//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1795//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13829070" author="hadoopqa" created="Thu, 21 Nov 2013 16:24:51 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615139/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615139/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1543281.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1796//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1796//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1796//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1796//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1796//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1796//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13829092" author="hadoopqa" created="Thu, 21 Nov 2013 17:00:15 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615143/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615143/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1543281.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1797//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1797//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1797//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1797//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1797//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1797//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13829162" author="hadoopqa" created="Thu, 21 Nov 2013 18:04:37 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615151/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615151/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1543281.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1798//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1798//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1798//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1798//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1798//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1798//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13829232" author="rgs" created="Thu, 21 Nov 2013 19:11:39 +0000"  >&lt;p&gt;Two nits:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    class LearnerCnxAcceptor extends ZooKeeperThread{
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;space missing (ZooKeeperThread {)&lt;/p&gt;

&lt;p&gt;Typo:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            // When there is no worker thread pool, do the work directly 
+            // and waiting for its completion
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;and wait for its completion&quot;&lt;/p&gt;
</comment>
                            <comment id="13829728" author="hadoopqa" created="Fri, 22 Nov 2013 06:52:44 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615275/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615275/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1543281.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1799//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1799//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1799//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1799//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1799//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1799//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13829735" author="rakeshr" created="Fri, 22 Nov 2013 07:01:45 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for the review. Attached latest patch addressing the comments.&lt;/p&gt;</comment>
                            <comment id="13837411" author="rakeshr" created="Tue, 3 Dec 2013 07:01:16 +0000"  >&lt;p&gt;Hi folks,&lt;br/&gt;
Could someone help me to review the patch/changes and would appreciate the efforts. Thanks in advance&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13844788" author="fpj" created="Tue, 10 Dec 2013 22:56:27 +0000"  >&lt;p&gt;Could you put this on the review board, please?&lt;/p&gt;</comment>
                            <comment id="13846059" author="rakeshr" created="Thu, 12 Dec 2013 04:35:16 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; for the interest. Please find the review at &lt;a href=&quot;https://reviews.apache.org/r/16202/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/16202/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13848852" author="phunt" created="Mon, 16 Dec 2013 06:19:46 +0000"  >&lt;p&gt;I took a pass and this seems reasonable. I&apos;m not sure I like the idea of modifying all the threads to extend our own thread type, but it gets the job done. I don&apos;t think we should commit this for 3.4, trunk would be better IMO.&lt;/p&gt;</comment>
                            <comment id="13848865" author="rakeshr" created="Mon, 16 Dec 2013 06:49:09 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt; for looking at this. I agree its not a blocker for 3.4.6. &lt;br/&gt;
I&apos;ve added fix version 3.4.6, because I have seen many cases related to missing threads. I thought this fix doesn&apos;t affect compatibility and will be helpful to know about the reason of thread exit.&lt;/p&gt;</comment>
                            <comment id="13848870" author="phunt" created="Mon, 16 Dec 2013 06:57:58 +0000"  >&lt;p&gt;No worries &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, I could see it going into 3.4, but since it&apos;s touching so many files, and it&apos;s difficult to verify, I thought it best to target trunk instead.&lt;/p&gt;

&lt;p&gt;Do you think the benefit outweighs the risk?&lt;/p&gt;</comment>
                            <comment id="13848882" author="rakeshr" created="Mon, 16 Dec 2013 07:14:18 +0000"  >&lt;p&gt;yeah..ok, I got your point. I also feel its best to target trunk&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13942646" author="michim" created="Fri, 21 Mar 2014 01:44:50 +0000"  >&lt;p&gt;It seems like this patch is good to go in to trunk. I&apos;m checking this in tomorrow unless somebody complains.&lt;/p&gt;</comment>
                            <comment id="13942689" author="hadoopqa" created="Fri, 21 Mar 2014 02:32:58 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12615275/ZOOKEEPER-602.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12615275/ZOOKEEPER-602.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1577756.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1976//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1976//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1976//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1976//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1976//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1976//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13944315" author="michim" created="Sun, 23 Mar 2014 03:13:56 +0000"  >&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1580436&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1580436&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks Rakesh!&lt;/p&gt;</comment>
                            <comment id="13944406" author="hudson" created="Sun, 23 Mar 2014 11:16:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2263 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2263/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2263/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-602&quot; title=&quot;log all exceptions not caught by ZK threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-602&quot;&gt;ZOOKEEPER-602&lt;/a&gt;. log all exceptions not caught by ZK threads (Rakesh R via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1580436&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1580436&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NIOServerCnxnFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/SessionTrackerImpl.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/SyncRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/WorkerService.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZooKeeperCriticalThread.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZooKeeperThread.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/AuthFastLeaderElection.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/CommitProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/FastLeaderElection.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/FollowerRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/Leader.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/LearnerHandler.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/ObserverRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumCnxManager.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/ReadOnlyRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/config/findbugsExcludeFile.xml&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/ZooKeeperThreadTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14534963" author="phunt" created="Fri, 8 May 2015 18:16:21 +0100"  >&lt;p&gt;Reopening based on this Pagerduty article makes a good case for backporting this jira to 3.4.x:&lt;br/&gt;
&lt;a href=&quot;http://www.pagerduty.com/blog/the-discovery-of-apache-zookeepers-poison-packet/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.pagerduty.com/blog/the-discovery-of-apache-zookeepers-poison-packet/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="14535021" author="rgs" created="Fri, 8 May 2015 18:27:14 +0100"  >&lt;p&gt;I am, initially, -1 on the backport. It&apos;s too big and it&apos;s a distraction to not keep pushing forward with making 3.5.0 stable enough. More thoughts would be nice though &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14535260" author="rakeshr" created="Fri, 8 May 2015 19:55:10 +0100"  >&lt;p&gt;Yes, I agree the patch is bigger one, but considering the importance of this issue I think it would be good to backport these changes to 3.4.x branch(if possible). I will take a look at 3.4.x code base and try to merge the changes in the coming week. Any comments?&lt;/p&gt;</comment>
                            <comment id="14544134" author="rakeshr" created="Thu, 14 May 2015 19:13:38 +0100"  >&lt;p&gt;Attached patch based on &lt;tt&gt;branch3.4&lt;/tt&gt;. Could you please have a look at it. Thanks!&lt;/p&gt;</comment>
                            <comment id="14544907" author="rgs" created="Fri, 15 May 2015 05:29:05 +0100"  >&lt;p&gt;+1, thanks for backporting this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; (i re-read the patch, although i had reviewed it for trunk as well).&lt;/p&gt;

&lt;p&gt;one note though (applicable to trunk as well):&lt;/p&gt;

&lt;p&gt;in ZooKeeperThread#handleException:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void handleException(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; thName, Throwable e) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Exception occured from thread {}&quot;&lt;/span&gt;, thName, e);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i think that should be LOG.error, given it&apos;s unhandled. what do you think?&lt;/p&gt;

&lt;p&gt;happy to merge this, unless someone else wants to have another look (cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hdeng&quot; class=&quot;user-hover&quot; rel=&quot;hdeng&quot;&gt;Hongchao Deng&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14544954" author="rakeshr" created="Fri, 15 May 2015 06:40:19 +0100"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for the reviews.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;i think that should be LOG.error, given it&apos;s unhandled. what do you think?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Since &lt;tt&gt;ZooKeeperThread&lt;/tt&gt; is not a critical thread, added the log message with &lt;tt&gt;warn&lt;/tt&gt; log level. Could you please look at &lt;tt&gt;ZooKeeperCriticalThread&lt;/tt&gt;, it has overridden &lt;tt&gt;#handleException&lt;/tt&gt; and adding message with &lt;tt&gt;error&lt;/tt&gt; log level because the service will go down if the critical thread dies. If requires we can do the changes, no issues.&lt;/p&gt;</comment>
                            <comment id="14546851" author="rgs" created="Sat, 16 May 2015 17:42:00 +0100"  >&lt;p&gt;ah - fair enough. &lt;/p&gt;</comment>
                            <comment id="14546926" author="rgs" created="Sat, 16 May 2015 21:35:31 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hdeng&quot; class=&quot;user-hover&quot; rel=&quot;hdeng&quot;&gt;Hongchao Deng&lt;/a&gt;: could i get another +1 here so i can merge this? thx!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12739626">ZOOKEEPER-2029</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12441697">ZOOKEEPER-597</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12705679">ZOOKEEPER-1907</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12732913" name="ZOOKEEPER-602-br3-4.patch" size="27929" author="rakeshr" created="Thu, 14 May 2015 19:11:29 +0100"/>
                            <attachment id="12615275" name="ZOOKEEPER-602.patch" size="30160" author="rakeshr" created="Fri, 22 Nov 2013 05:46:25 +0000"/>
                            <attachment id="12615151" name="ZOOKEEPER-602.patch" size="29995" author="rakeshr" created="Thu, 21 Nov 2013 17:28:55 +0000"/>
                            <attachment id="12615139" name="ZOOKEEPER-602.patch" size="29481" author="rakeshr" created="Thu, 21 Nov 2013 15:46:19 +0000"/>
                            <attachment id="12615124" name="ZOOKEEPER-602.patch" size="29434" author="rakeshr" created="Thu, 21 Nov 2013 14:21:40 +0000"/>
                            <attachment id="12615120" name="ZOOKEEPER-602.patch" size="28826" author="rakeshr" created="Thu, 21 Nov 2013 14:02:29 +0000"/>
                            <attachment id="12496990" name="ZOOKEEPER-602.patch" size="30208" author="lakshman" created="Thu, 29 Sep 2011 11:47:54 +0100"/>
                            <attachment id="12495070" name="ZOOKEEPER-602.patch" size="29974" author="lakshman" created="Mon, 19 Sep 2011 15:04:52 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Dec 2009 19:29:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39764</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzut3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>