<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:46:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1264/ZOOKEEPER-1264.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1264] FollowerResyncConcurrencyTest failing intermittently</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1264</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;The FollowerResyncConcurrencyTest test is failing intermittently. &lt;/p&gt;

&lt;p&gt;saw the following on 3.4:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit.framework.AssertionFailedError: Should have same number of
ephemerals in both followers expected:&amp;lt;11741&amp;gt; but was:&amp;lt;14001&amp;gt;
       at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.verifyState(FollowerResyncConcurrencyTest.java:400)
       at org.apache.zookeeper.test.FollowerResyncConcurrencyTest.testResyncBySnapThenDiffAfterFollowerCrashes(FollowerResyncConcurrencyTest.java:196)
       at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12529192">ZOOKEEPER-1264</key>
            <summary>FollowerResyncConcurrencyTest failing intermittently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fournc">Camille Fournier</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 05:23:28 +0100</created>
                <updated>Wed, 23 Nov 2011 19:22:41 +0000</updated>
                            <resolved>Sat, 5 Nov 2011 20:58:22 +0000</resolved>
                                    <version>3.3.3</version>
                    <version>3.4.0</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.3.4</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                            <comments>
                            <comment id="13137991" author="phunt" created="Fri, 28 Oct 2011 05:24:29 +0100"  >&lt;p&gt;test is using 1 second session timeout. I&apos;ll cleanup the test a bit and verify.&lt;/p&gt;</comment>
                            <comment id="13138072" author="phunt" created="Fri, 28 Oct 2011 06:57:00 +0100"  >&lt;p&gt;these patches fix the problem for me (verified each patch, but only trunk run against CI host having issues originally - three runs, each time passed)&lt;/p&gt;

&lt;p&gt;Main changes are cleaned up generally, fixed session timeout, cleaned up test clients/quorum, etc...&lt;/p&gt;
</comment>
                            <comment id="13138096" author="hadoopqa" created="Fri, 28 Oct 2011 07:19:42 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501240/ZOOKEEPER-1264.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501240/ZOOKEEPER-1264.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1190073.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13138116" author="mahadev" created="Fri, 28 Oct 2011 07:42:40 +0100"  >&lt;p&gt;+1 looks good to me. Might want to check on the the hudson tests. Looks like &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/709//testReport/&lt;/a&gt; has observer test failing? Doesnt seem related but no harm in running the trunk patch through hudson again.&lt;/p&gt;</comment>
                            <comment id="13138117" author="hadoopqa" created="Fri, 28 Oct 2011 07:44:22 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501240/ZOOKEEPER-1264.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501240/ZOOKEEPER-1264.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1190073.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/710//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/710//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/710//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/710//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/710//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/710//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13138388" author="fournc" created="Fri, 28 Oct 2011 15:13:32 +0100"  >&lt;p&gt;This looks like a good cleanup, thanks Patrick.&lt;/p&gt;</comment>
                            <comment id="13138397" author="fournc" created="Fri, 28 Oct 2011 15:31:59 +0100"  >&lt;p&gt;Committed to trunk, 3.3.4 and 3.4 branches.&lt;/p&gt;</comment>
                            <comment id="13138850" author="phunt" created="Fri, 28 Oct 2011 23:16:49 +0100"  >&lt;p&gt;I&apos;m afraid this patch has not entirely fixed the problem. After 6 runs on my CI host it failed again. Perhaps Camille can take a look - I&apos;ll attach a log file momentarily.&lt;/p&gt;</comment>
                            <comment id="13138851" author="phunt" created="Fri, 28 Oct 2011 23:17:51 +0100"  >&lt;p&gt;most recent failure with original patch applied.&lt;/p&gt;</comment>
                            <comment id="13138894" author="fournc" created="Fri, 28 Oct 2011 23:48:49 +0100"  >&lt;p&gt;Looking.&lt;/p&gt;</comment>
                            <comment id="13138963" author="fournc" created="Sat, 29 Oct 2011 00:34:06 +0100"  >&lt;p&gt;It might also be somewhat helpful if you could send me the txn logs from the test servers but I realize that might be too much to ask.&lt;/p&gt;</comment>
                            <comment id="13138966" author="phunt" created="Sat, 29 Oct 2011 00:42:27 +0100"  >&lt;p&gt;great idea, those are lost to the ages but I&apos;ll try to reproduce.&lt;/p&gt;</comment>
                            <comment id="13138987" author="fournc" created="Sat, 29 Oct 2011 01:07:46 +0100"  >&lt;p&gt;Yeah, I spent a bit of time looking at this. I have a few ideas but it would probably go a lot faster if I had logs to examine since I can&apos;t seem to repro it myself. If you can get me some I will look more this weekend.&lt;/p&gt;</comment>
                            <comment id="13138993" author="phunt" created="Sat, 29 Oct 2011 01:09:36 +0100"  >&lt;p&gt;Your wish == my command. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;See tmp and log attachments for a sample run that fails.&lt;/p&gt;

&lt;p&gt;I can easily reproduce this, so ff to ping me if you want to try a fix (attach to the jira).&lt;/p&gt;</comment>
                            <comment id="13139019" author="fournc" created="Sat, 29 Oct 2011 01:37:41 +0100"  >&lt;p&gt;Thanks Patrick. My suspicions were true, the failing zk has a chunk missing out of its logs that corresponds to the missing ephemeral nodes (snapshot snapshot.100002322, log log.100002c3e, but the earlier log file doesn&apos;t have txns between 2322 and 2c3e, they seem to just be missing). Now to figure out why it doesn&apos;t have those log files...&lt;/p&gt;</comment>
                            <comment id="13139185" author="hudson" created="Sat, 29 Oct 2011 11:56:49 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1348 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1348/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1348/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1264&quot; title=&quot;FollowerResyncConcurrencyTest failing intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1264&quot;&gt;&lt;del&gt;ZOOKEEPER-1264&lt;/del&gt;&lt;/a&gt;: FollowerResyncConcurrencyTest failing intermittently (phunt via camille)&lt;/p&gt;

&lt;p&gt;camille : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1190358&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1190358&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/FollowerResyncConcurrencyTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13139821" author="fournc" created="Sun, 30 Oct 2011 23:03:02 +0000"  >&lt;p&gt;Got this reproduced on my local box with yet more hacks to the test and a few sleeps in the source code. Should be close to figuring out the problem, probably tomorrow sometime. Stay tuned.&lt;/p&gt;</comment>
                            <comment id="13139879" author="fournc" created="Mon, 31 Oct 2011 03:05:22 +0000"  >&lt;p&gt;OK, I found the bug. Ben, we could use your attention here.&lt;/p&gt;

&lt;p&gt;The problem is that we queue NEWLEADER before we queue UPTODATE, but inbetween these messages we send more sync packets to move us from SNAP to, well, UPTODATE. These get written directly to the data tree, bypassing the log. But if you immediately shut down the ZK before snapshotting again, you will lose any record of these transactions on the ZK in question. It seems to me that we should either snapshot again on UPTODATE or else wait to snapshot in the first place until that packet is sent. I don&apos;t understand why we moved to snapshot on NEWLEADER in the first place. If one of the ZAB 1.0 authors could comment, that would be useful.&lt;/p&gt;</comment>
                            <comment id="13139970" author="mahadev" created="Mon, 31 Oct 2011 07:04:25 +0000"  >&lt;p&gt;Ben/Flavio,&lt;br/&gt;
 Any comments?&lt;/p&gt;</comment>
                            <comment id="13141235" author="fournc" created="Tue, 1 Nov 2011 15:25:17 +0000"  >&lt;p&gt;From a comment I added to the tracker that this change was attached to:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1136&quot; title=&quot;NEW_LEADER should be queued not sent to match the Zab 1.0 protocol on the twiki&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1136&quot;&gt;&lt;del&gt;ZOOKEEPER-1136&lt;/del&gt;&lt;/a&gt; causes a concurrency bug. Specifically:&lt;br/&gt;
1. Follower rejoins, gets snap from leader&lt;br/&gt;
2. Follower gets NEWLEADER message and takes a snapshot&lt;br/&gt;
3. Follower gets some additional tranactions forwarded from leader, applies these directly to data tree&lt;br/&gt;
4. Follower gets an UPTODATE message, does not take a snapshot&lt;br/&gt;
5. Follower starts following, writes some new transactions to its log, and is killed before it takes another snapshot&lt;br/&gt;
6. Follower restarts and gets a DIFF from the leader&lt;/p&gt;

&lt;p&gt;The transactions that came in between NEWLEADER and UPTODATE are lost because they never go anywhere but the internal data tree, and if that tree isn&apos;t snapshotted and the follower restarts with only a DIFF, the follower will lose these transactions.&lt;/p&gt;

&lt;p&gt;I think the proper thing to do is snapshot after UPTODATE, but I&apos;m not sure why we changed this to snapshot after NEWLEADER instead. The wiki doesn&apos;t seem to explain that clearly. &lt;/p&gt;</comment>
                            <comment id="13141244" author="breed" created="Tue, 1 Nov 2011 15:38:22 +0000"  >&lt;p&gt;the reason we take a snapshot after NEWLEADER is because the follower is promising to reproduce the state that it received from the leader at that point. phase 2, step 2 in the zab 1.0 on the wiki. the transactions that follow NEWLEADER should be logged to disk using normal transaction logging. i&apos;ll take a look at the code.&lt;/p&gt;</comment>
                            <comment id="13141248" author="fournc" created="Tue, 1 Nov 2011 15:41:37 +0000"  >&lt;p&gt;Thanks Ben. The patch I attached changes both Learner and FollowerResyncConcurrencyTest. You should be able to repro the failure with testResyncBySnapThenDiffAfterFollowerCrashes pretty reliably. You can ignore the changes in Learner (just move the snap to after UPTODATE instead of NEWLEADER0.&lt;/p&gt;</comment>
                            <comment id="13141258" author="phunt" created="Tue, 1 Nov 2011 15:51:28 +0000"  >&lt;p&gt;Awesome job Camille, thanks!&lt;/p&gt;</comment>
                            <comment id="13141261" author="hadoopqa" created="Tue, 1 Nov 2011 15:53:59 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501785/ZOOKEEPER-1264.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501785/ZOOKEEPER-1264.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/754//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/754//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/754//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/754//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/754//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/754//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13141263" author="breed" created="Tue, 1 Nov 2011 15:57:12 +0000"  >&lt;p&gt;ah cool. ok i&apos;ll check it out now.&lt;/p&gt;</comment>
                            <comment id="13141275" author="breed" created="Tue, 1 Nov 2011 16:14:00 +0000"  >&lt;p&gt;i applied your patch to trunk and i removed the change to Learner and the test passes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; is it an intermittent failure?&lt;/p&gt;</comment>
                            <comment id="13141285" author="fournc" created="Tue, 1 Nov 2011 16:22:02 +0000"  >&lt;p&gt;Yeah, sorry, these concurrency tests are pretty much impossible to write deterministically without some additional scaffolding. If you look at lines 152-158 of the test, you want the thread that I started to have transactions passing through the leader when the qu.restart at 153 loads the follower. The follower should get a snapshot from the leader, a few more pending transactions, and then additional transactions that cause a log file to be written that will have a zxid that is not the zxid of the snapshot it created + 1. For example from Pat&apos;s log:&lt;br/&gt;
2011-10-28 17:09:56,691 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [QuorumPeer&lt;span class=&quot;error&quot;&gt;&amp;#91;myid=1&amp;#93;&lt;/span&gt;/0:0:0:0:0:0:0:0:11221:FileTxnSnapLog@255] - Snapshotting: 100002322&lt;/p&gt;

&lt;p&gt;(indicating the NEWLEADER)&lt;br/&gt;
then &lt;/p&gt;

&lt;p&gt;2011-10-28 17:09:59,316 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - WARN  [QuorumPeer&lt;span class=&quot;error&quot;&gt;&amp;#91;myid=1&amp;#93;&lt;/span&gt;/0:0:0:0:0:0:0:0:11221:Follower@118] - Got zxid 0x100002c3e expected 0x1&lt;br/&gt;
2011-10-28 17:09:59,330 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SyncThread:1:FileTxnLog@195&amp;#93;&lt;/span&gt; - Creating new log file: log.100002c3e&lt;/p&gt;


</comment>
                            <comment id="13141355" author="breed" created="Tue, 1 Nov 2011 17:23:35 +0000"  >&lt;p&gt;got it. i think i see how to make this reproduce more reliable. i&apos;ll be back &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13141369" author="mahadev" created="Tue, 1 Nov 2011 17:32:19 +0000"  >&lt;p&gt;@Ben,&lt;br/&gt;
 sorry to be pestering, I&apos;d like to get 3.4 rc1 out today. Please be back today &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="13141915" author="mahadev" created="Wed, 2 Nov 2011 04:37:44 +0000"  >&lt;p&gt;@Ben,&lt;br/&gt;
 Any update?&lt;/p&gt;</comment>
                            <comment id="13141959" author="breed" created="Wed, 2 Nov 2011 06:39:57 +0000"  >&lt;p&gt;i&apos;ve created a unit test to reproduce the problem since we can test it more directly and deterministicly, but i can&apos;t seem to make it happen. i&apos;m attaching my unit test patch just in case you are camille can see what i&apos;m missing.&lt;/p&gt;

&lt;p&gt;if i understand it, the problem is that we are losing proposals that are received between the NEWLEADER and the UPDATE, but a follower doesn&apos;t send out any acks during that time, so it&apos;s okay to lose them. am i misunderstanding the problem?&lt;/p&gt;</comment>
                            <comment id="13141972" author="hadoopqa" created="Wed, 2 Nov 2011 07:01:07 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501918/ZOOKEEPER-1264unittest.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501918/ZOOKEEPER-1264unittest.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/760//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/760//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/760//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/760//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/760//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/760//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142182" author="breed" created="Wed, 2 Nov 2011 14:32:02 +0000"  >&lt;p&gt;just a quick update. i&apos;m able to reproduce the problem quickly and deterministicly with a unit test. it has to do with the snapshot transfer. it is not getting recorded with the correct zxid. i&apos;ll have the fix shortly.&lt;/p&gt;</comment>
                            <comment id="13142206" author="breed" created="Wed, 2 Nov 2011 15:19:15 +0000"  >&lt;p&gt;here is the unit test. doing a snapshot at UPDATE will make this test pass, but i&apos;m afraid it is masking a deeper problem. the question is, why does it fix the problem?&lt;/p&gt;</comment>
                            <comment id="13142211" author="fournc" created="Wed, 2 Nov 2011 15:24:40 +0000"  >&lt;p&gt;Because when the follower writes a new log file without writing a snapshot with the old transactions, on restart the ZK thinks it has the transactions up to the zxid in the log file. The fact that these transactions were never written to a log or snapshot by the follower is not captured. We got a NEWLEADER and took a snapshot, then got a bunch of txns that went directly to our data tree, then got UPTODATE, then some other new transactions that caused the creation of a brand new log file. The intermediate transactions between NEWLEADER and UPTODATE are never written to a persistent store on the follower unless it manages to stay alive long enough to do another snapshot.&lt;/p&gt;</comment>
                            <comment id="13142220" author="hadoopqa" created="Wed, 2 Nov 2011 15:40:43 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501973/ZOOKEEPER-1264unittest.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501973/ZOOKEEPER-1264unittest.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/766//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/766//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/766//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/766//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/766//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/766//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142259" author="breed" created="Wed, 2 Nov 2011 16:31:14 +0000"  >&lt;p&gt;i think i got it. camille can you try it with your test to see if it&apos;s fixed there as well?  (the tests always passed on my machine.)&lt;/p&gt;</comment>
                            <comment id="13142274" author="fournc" created="Wed, 2 Nov 2011 16:42:33 +0000"  >&lt;p&gt;Seems to work. I want to go ahead and put in the additional changes to FollowerResyncConcurrencyTest along with your patch after I finish reviewing it. Theoretically they aren&apos;t needed but given how many times this test has caught issues I think it&apos;s worth it to double-test this stuff. Let me know if you disagree.&lt;/p&gt;</comment>
                            <comment id="13142292" author="hadoopqa" created="Wed, 2 Nov 2011 16:54:23 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501981/ZOOKEEPER-1264.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501981/ZOOKEEPER-1264.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/767//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/767//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/767//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/767//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/767//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/767//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142328" author="breed" created="Wed, 2 Nov 2011 17:36:28 +0000"  >&lt;p&gt;i agree, we should have the extra test. it is nice to have the extra coverage. do you want to generate a merged patch?&lt;/p&gt;</comment>
                            <comment id="13142373" author="fournc" created="Wed, 2 Nov 2011 18:18:02 +0000"  >&lt;p&gt;Yup will do asap (which might be early this evening but I&apos;ll try to get it in a few mins).&lt;/p&gt;</comment>
                            <comment id="13142458" author="hadoopqa" created="Wed, 2 Nov 2011 19:54:10 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502007/ZOOKEEPER-1264-merge.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502007/ZOOKEEPER-1264-merge.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196025.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/768//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/768//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/768//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/768//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/768//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/768//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13142846" author="breed" created="Thu, 3 Nov 2011 05:14:49 +0000"  >&lt;p&gt;this patch merges camille&apos;s test in as well. it also adds a couple of extra asserts to cover &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1282&quot; title=&quot;Learner.java not following Zab 1.0 protocol - setCurrentEpoch should be done upon receipt of NEWLEADER (before acking it) and not upon receipt of UPTODATE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1282&quot;&gt;&lt;del&gt;ZOOKEEPER-1282&lt;/del&gt;&lt;/a&gt;. finally, it also moves around a couple of lines to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1282&quot; title=&quot;Learner.java not following Zab 1.0 protocol - setCurrentEpoch should be done upon receipt of NEWLEADER (before acking it) and not upon receipt of UPTODATE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1282&quot;&gt;&lt;del&gt;ZOOKEEPER-1282&lt;/del&gt;&lt;/a&gt;. (i merged in 1282 because the fix and tests were simple modifications of this patch and we need to get this out asap.)&lt;/p&gt;</comment>
                            <comment id="13142852" author="hadoopqa" created="Thu, 3 Nov 2011 05:45:09 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502100/ZOOKEEPER-1264.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502100/ZOOKEEPER-1264.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196819.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/770//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/770//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/770//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/770//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/770//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/770//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13143198" author="fournc" created="Thu, 3 Nov 2011 14:25:49 +0000"  >&lt;p&gt;Ben, just two questions:&lt;br/&gt;
Does this logic really only apply to FollowerZookeeperServers or should observers also do this?&lt;/p&gt;

&lt;p&gt;Why does the playing of these txns to the log come after we start the zk server instead of before?&lt;/p&gt;</comment>
                            <comment id="13143232" author="breed" created="Thu, 3 Nov 2011 15:17:11 +0000"  >&lt;p&gt;yeah, the observers (as far as my understanding from the code) don&apos;t really log transactions and they only get INFORMs no PROPOSALs.&lt;/p&gt;

&lt;p&gt;we can start writing the transactions after the newleader message and i looked at doing that. the code just got a little to complicated for very little benefit. all the proposals up to the uptodate are already committed, so we aren&apos;t waiting on an ack. and we would have to move to writing out the pending proposals until after the newleader or uptodate (for backwards compatibility) and then check if have already started writing in the PROPOSAL handling. it just seemed simpler to wait until the end and do it all at once.&lt;/p&gt;</comment>
                            <comment id="13143233" author="breed" created="Thu, 3 Nov 2011 15:17:33 +0000"  >&lt;p&gt;henry could you check the observer handling?&lt;/p&gt;</comment>
                            <comment id="13143714" author="fournc" created="Fri, 4 Nov 2011 03:13:39 +0000"  >&lt;p&gt;Ok, I think this is all fine. I will check this in.&lt;/p&gt;</comment>
                            <comment id="13143964" author="lakshman" created="Fri, 4 Nov 2011 12:49:13 +0000"  >&lt;p&gt;Similar issue occurred in our case as well. The ephemeral exists only in one of the follower even after it&apos;s owner session is expired. I wanted to know the exact scenario when this may happen, so that I can add a testcase to verify.&lt;/p&gt;</comment>
                            <comment id="13144104" author="fournc" created="Fri, 4 Nov 2011 16:12:48 +0000"  >&lt;p&gt;Can someone take a look at this patch? I made it last night to check in to the 3.4 branch but the Zab1_0Test fails when I run it.&lt;/p&gt;</comment>
                            <comment id="13144120" author="hadoopqa" created="Fri, 4 Nov 2011 16:22:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502472/ZOOKEEPER-1264-branch34.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502472/ZOOKEEPER-1264-branch34.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196819.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/775//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/775//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144469" author="mahadev" created="Sat, 5 Nov 2011 00:05:34 +0000"  >&lt;p&gt;Camille,&lt;br/&gt;
 Are you debugging the test failure in 3.4 or waiting for others to take a look? &lt;/p&gt;</comment>
                            <comment id="13144568" author="fournc" created="Sat, 5 Nov 2011 04:27:35 +0000"  >&lt;p&gt;I&apos;m looking at it. The test that fails is not a new test, it&apos;s testAbandonBeforeACKEpoch. I have no idea why it is failing.&lt;/p&gt;</comment>
                            <comment id="13144573" author="fournc" created="Sat, 5 Nov 2011 04:34:20 +0000"  >&lt;p&gt;Oh now I see. Because 1192 introduced fixes into leader election that added stuff to the Zab1_0Test that I missed. Why in the world do we have leader election bugs going only into trunk instead of into 3.4 as well??? Not good.&lt;/p&gt;</comment>
                            <comment id="13144743" author="fournc" created="Sat, 5 Nov 2011 16:33:14 +0000"  >&lt;p&gt;I still cannot manage a clean patch of this issue and tests to the 3.4 branch. This is my latest attempt, which still fails the Zab1_0Test. Can someone else please take a look here?&lt;/p&gt;</comment>
                            <comment id="13144745" author="hadoopqa" created="Sat, 5 Nov 2011 16:42:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502600/ZOOKEEPER-1264-34-bad.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502600/ZOOKEEPER-1264-34-bad.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1197891.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/776//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/776//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144758" author="fpj" created="Sat, 5 Nov 2011 17:32:32 +0000"  >&lt;p&gt;I&apos;ll have a look.&lt;/p&gt;</comment>
                            <comment id="13144777" author="fournc" created="Sat, 5 Nov 2011 18:20:51 +0000"  >&lt;p&gt;This is the patch to trunk, verifying via hudson that it passes everything.&lt;/p&gt;</comment>
                            <comment id="13144779" author="fournc" created="Sat, 5 Nov 2011 18:26:32 +0000"  >&lt;p&gt;Ben added a check to testNormalRun at line 502:&lt;/p&gt;

&lt;p&gt; Assert.assertEquals(1, l.self.getAcceptedEpoch());&lt;/p&gt;

&lt;p&gt;This line consistently fails for me. I&apos;m not sure why this would be failing in the 3.4 branch but not trunk.&lt;/p&gt;</comment>
                            <comment id="13144780" author="shralex" created="Sat, 5 Nov 2011 18:40:38 +0000"  >&lt;p&gt;I know where the problem is. Ben assumes that acceptedEpoch is set atomically before the leader replies to the client with LEADERINFO, but it doesn&apos;t. The leader sets it after returning from getEpochToPropose. This is a bug. I&apos;ll upload a small patch in a sec&lt;/p&gt;</comment>
                            <comment id="13144782" author="hadoopqa" created="Sat, 5 Nov 2011 18:45:24 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502605/ZOOKEEPER-1264-latest.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502605/ZOOKEEPER-1264-latest.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1197891.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/777//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/777//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/777//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/777//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/777//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/777//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144788" author="hadoopqa" created="Sat, 5 Nov 2011 18:52:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502606/ZOOKEEPER-ACCEPTEDEPOCH.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502606/ZOOKEEPER-ACCEPTEDEPOCH.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1197891.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/778//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/778//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144789" author="fpj" created="Sat, 5 Nov 2011 18:52:52 +0000"  >&lt;p&gt;+1, looks right to me.&lt;/p&gt;</comment>
                            <comment id="13144793" author="fournc" created="Sat, 5 Nov 2011 19:09:59 +0000"  >&lt;p&gt;Final version of fix for 3.4 branch&lt;/p&gt;</comment>
                            <comment id="13144794" author="hadoopqa" created="Sat, 5 Nov 2011 19:12:25 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502608/ZOOKEEPER-1264-br34-final.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502608/ZOOKEEPER-1264-br34-final.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1197891.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/779//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/779//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144818" author="fournc" created="Sat, 5 Nov 2011 20:17:41 +0000"  >&lt;p&gt;final trunk patch&lt;/p&gt;</comment>
                            <comment id="13144823" author="hadoopqa" created="Sat, 5 Nov 2011 20:44:52 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502617/ZOOKEEPER-1264-final.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502617/ZOOKEEPER-1264-final.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1197891.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/781//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/781//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/781//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/781//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/781//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/781//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144824" author="hadoopqa" created="Sat, 5 Nov 2011 20:45:22 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502617/ZOOKEEPER-1264-final.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502617/ZOOKEEPER-1264-final.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1197891.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/782//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/782//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/782//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/782//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/782//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/782//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13144977" author="hudson" created="Sun, 6 Nov 2011 10:57:14 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1357 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1357/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1357/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1264&quot; title=&quot;FollowerResyncConcurrencyTest failing intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1264&quot;&gt;&lt;del&gt;ZOOKEEPER-1264&lt;/del&gt;&lt;/a&gt;. FollowerResyncConcurrencyTest failing intermittently.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1282&quot; title=&quot;Learner.java not following Zab 1.0 protocol - setCurrentEpoch should be done upon receipt of NEWLEADER (before acking it) and not upon receipt of UPTODATE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1282&quot;&gt;&lt;del&gt;ZOOKEEPER-1282&lt;/del&gt;&lt;/a&gt;. Learner.java not following Zab 1.0 protocol - setCurrentEpoch should be done upon receipt of NEWLEADER (before acking it) and not upon receipt of UPTODATE.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1291&quot; title=&quot;AcceptedEpoch not updated at leader before it proposes the epoch to followers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1291&quot;&gt;&lt;del&gt;ZOOKEEPER-1291&lt;/del&gt;&lt;/a&gt;. AcceptedEpoch not updated at leader before it proposes the epoch to followers.&lt;/p&gt;

&lt;p&gt;camille : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1198053&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1198053&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/Leader.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/Learner.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/Zab1_0Test.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/FollowerResyncConcurrencyTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12529965">ZOOKEEPER-1282</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12502600" name="ZOOKEEPER-1264-34-bad.patch" size="24007" author="fournc" created="Sat, 5 Nov 2011 16:33:14 +0000"/>
                            <attachment id="12502608" name="ZOOKEEPER-1264-br34-final.patch" size="25463" author="fournc" created="Sat, 5 Nov 2011 19:09:59 +0000"/>
                            <attachment id="12502472" name="ZOOKEEPER-1264-branch34.patch" size="26129" author="fournc" created="Fri, 4 Nov 2011 16:12:48 +0000"/>
                            <attachment id="12502617" name="ZOOKEEPER-1264-final.patch" size="24429" author="fournc" created="Sat, 5 Nov 2011 20:17:41 +0000"/>
                            <attachment id="12502605" name="ZOOKEEPER-1264-latest.patch" size="23047" author="fournc" created="Sat, 5 Nov 2011 18:20:51 +0000"/>
                            <attachment id="12502007" name="ZOOKEEPER-1264-merge.patch" size="19157" author="fournc" created="Wed, 2 Nov 2011 18:40:44 +0000"/>
                            <attachment id="12502100" name="ZOOKEEPER-1264.patch" size="22632" author="breed" created="Thu, 3 Nov 2011 05:14:49 +0000"/>
                            <attachment id="12501981" name="ZOOKEEPER-1264.patch" size="16734" author="breed" created="Wed, 2 Nov 2011 16:31:14 +0000"/>
                            <attachment id="12501785" name="ZOOKEEPER-1264.patch" size="3681" author="fournc" created="Tue, 1 Nov 2011 15:29:00 +0000"/>
                            <attachment id="12501240" name="ZOOKEEPER-1264.patch" size="13219" author="phunt" created="Fri, 28 Oct 2011 06:54:18 +0100"/>
                            <attachment id="12501238" name="ZOOKEEPER-1264_branch33.patch" size="13534" author="phunt" created="Fri, 28 Oct 2011 06:53:58 +0100"/>
                            <attachment id="12501239" name="ZOOKEEPER-1264_branch34.patch" size="13523" author="phunt" created="Fri, 28 Oct 2011 06:53:58 +0100"/>
                            <attachment id="12501973" name="ZOOKEEPER-1264unittest.patch" size="14310" author="breed" created="Wed, 2 Nov 2011 15:19:14 +0000"/>
                            <attachment id="12501918" name="ZOOKEEPER-1264unittest.patch" size="12855" author="breed" created="Wed, 2 Nov 2011 06:39:57 +0000"/>
                            <attachment id="12502607" name="ZOOKEEPER-ACCEPTEDEPOCH-trunk.patch" size="1273" author="shralex" created="Sat, 5 Nov 2011 19:05:07 +0000"/>
                            <attachment id="12502606" name="ZOOKEEPER-ACCEPTEDEPOCH.patch" size="1303" author="shralex" created="Sat, 5 Nov 2011 18:46:55 +0000"/>
                            <attachment id="12501385" name="followerresyncfailure_log.txt.gz" size="37151" author="phunt" created="Fri, 28 Oct 2011 23:17:51 +0100"/>
                            <attachment id="12501410" name="logs.zip" size="36152" author="phunt" created="Sat, 29 Oct 2011 01:09:36 +0100"/>
                            <attachment id="12501411" name="tmp.zip" size="1159225" author="phunt" created="Sat, 29 Oct 2011 01:09:36 +0100"/>
                    </attachments>
                <subtasks>
                            <subtask id="12530449">ZOOKEEPER-1291</subtask>
                            <subtask id="12529965">ZOOKEEPER-1282</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Oct 2011 06:19:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzssv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Revision 1198053</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>