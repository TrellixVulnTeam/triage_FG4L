<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:44:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1431/ZOOKEEPER-1431.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1431] zkpython: async calls leak memory</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1431</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;I&apos;m seeing a memory leakage when using the &quot;aget&quot; method.&lt;/p&gt;

&lt;p&gt;It leaks tuples and dicts, both containing &quot;stats&quot;.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;RHEL 6.0, self-built from 3.3.3 sources&lt;/p&gt;</environment>
        <key id="12547757">ZOOKEEPER-1431</key>
            <summary>zkpython: async calls leak memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kapilt">Kapil Thangavelu</assignee>
                                    <reporter username="jrydberg">johan rydberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Mar 2012 07:11:07 +0000</created>
                <updated>Tue, 19 Jun 2012 12:00:22 +0100</updated>
                            <resolved>Tue, 19 Jun 2012 01:24:24 +0100</resolved>
                                    <version>3.4.3</version>
                                    <fixVersion>3.3.6</fixVersion>
                    <fixVersion>3.4.4</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>contrib-bindings</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13236422" author="jrydberg" created="Fri, 23 Mar 2012 07:15:30 +0000"  >&lt;p&gt;Here&apos;s two test cases reproducing the error.&lt;/p&gt;

&lt;p&gt;Both use pykeeper (ease_install pykeeper) to set things up, but then use the zkpython bindings to do the actual testing.&lt;/p&gt;

&lt;p&gt;zktest3.py leaks, zktest4.py does not.&lt;/p&gt;</comment>
                            <comment id="13236430" author="jrydberg" created="Fri, 23 Mar 2012 07:28:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/zookeeper/blob/trunk/src/contrib/zkpython/src/c/zookeeper.c#L487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/zookeeper/blob/trunk/src/contrib/zkpython/src/c/zookeeper.c#L487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t arglist be decref&apos;ed after the call?&lt;/p&gt;

&lt;p&gt;That drops my tuple count from ~55k to ~5k after a zktest3.py run.&lt;/p&gt;</comment>
                            <comment id="13236804" author="kapilt" created="Fri, 23 Mar 2012 17:25:19 +0000"  >&lt;p&gt;This bug applies to ALL async api calls with python.&lt;/p&gt;</comment>
                            <comment id="13236805" author="kapilt" created="Fri, 23 Mar 2012 17:26:03 +0000"  >&lt;p&gt;Fix for async python api memory leaks.&lt;/p&gt;</comment>
                            <comment id="13236807" author="kapilt" created="Fri, 23 Mar 2012 17:27:18 +0000"  >&lt;p&gt;Noting the problem is generic, it also applies to all extant versions 3.3x and 3.4&lt;/p&gt;</comment>
                            <comment id="13236814" author="kapilt" created="Fri, 23 Mar 2012 17:29:54 +0000"  >&lt;p&gt;Also wanted to note fwiw, we&apos;re going to apply the patch i attached to this issue, in the zookeeper 3.3.5 pkg distributed in ubuntu 12.04/precise.&lt;/p&gt;</comment>
                            <comment id="13262242" author="hadoopqa" created="Thu, 26 Apr 2012 00:32:10 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12519666/pyzk-mem-leak-fix.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12519666/pyzk-mem-leak-fix.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1330043.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1050//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1050//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13262774" author="phunt" created="Thu, 26 Apr 2012 18:30:37 +0100"  >&lt;p&gt;Kapil the patch is failing to apply. Please update it and re-attach, thanks. (you might check if the patch applies cleanly to both 3.4 and trunk branches, it might be that it only applies to one, in which case you would need to submit two patches, one for each branch). thanks!&lt;/p&gt;</comment>
                            <comment id="13272330" author="edevil" created="Thu, 10 May 2012 14:43:14 +0100"  >&lt;p&gt;Corrected patch that applies to trunk and 3.4 branch.&lt;/p&gt;</comment>
                            <comment id="13272368" author="hadoopqa" created="Thu, 10 May 2012 15:17:51 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12526345/zk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12526345/zk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1336467.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1070//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1070//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1070//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1070//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1070//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1070//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13279813" author="pagiannaros" created="Sun, 20 May 2012 17:49:00 +0100"  >&lt;p&gt;Is this patch going to be applied soon? Are you waiting for justification on why it doesn&apos;t include new tests?&lt;/p&gt;</comment>
                            <comment id="13295197" author="edevil" created="Thu, 14 Jun 2012 19:04:58 +0100"  >&lt;p&gt;I would also like to know. Tests were not included because it&apos;s not easy to test for a memory leak.&lt;/p&gt;</comment>
                            <comment id="13396393" author="henryr" created="Tue, 19 Jun 2012 01:05:57 +0100"  >&lt;p&gt;Patch looks good, I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="13396406" author="henryr" created="Tue, 19 Jun 2012 01:24:24 +0100"  >&lt;p&gt;Just committed to 3.3, 3.4 and 3.5. Thanks Kapil and Andre!&lt;/p&gt;</comment>
                            <comment id="13396676" author="hudson" created="Tue, 19 Jun 2012 12:00:22 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1590 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1590/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1590/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1431&quot; title=&quot;zkpython: async calls leak memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1431&quot;&gt;&lt;del&gt;ZOOKEEPER-1431&lt;/del&gt;&lt;/a&gt;. zkpython async calls leak memory (Kapil Thangavelu and Andre Cruz via henryr) (Revision 1351541)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
henry : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1351541&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1351541&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/zkpython/src/c/zookeeper.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12519666" name="pyzk-mem-leak-fix.diff" size="2141" author="kapilt" created="Fri, 23 Mar 2012 17:26:03 +0000"/>
                            <attachment id="12526345" name="zk.patch" size="1903" author="edevil" created="Thu, 10 May 2012 14:44:15 +0100"/>
                            <attachment id="12519593" name="zktest3.py" size="612" author="jrydberg" created="Fri, 23 Mar 2012 07:15:25 +0000"/>
                            <attachment id="12519594" name="zktest4.py" size="485" author="jrydberg" created="Fri, 23 Mar 2012 07:15:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Mar 2012 17:25:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232854</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzs9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32564</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>