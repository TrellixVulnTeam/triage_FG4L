<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:50:10 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-110/ZOOKEEPER-110.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-110] Build script relies on svnant, which is not compatible with subversion 1.5 working copies</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-110</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;The current build.xml ant script uses svnant to obtain the latest revision number from the repo, however svnant is not compatible with subversion 1.5 (&lt;a href=&quot;http://subversion.tigris.org/svn_1.5_releasenotes.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://subversion.tigris.org/svn_1.5_releasenotes.html&lt;/a&gt;), and so the build fails with working copies checked out by this version.  The build fails with &quot;this version of subversion is too old, please get a newer version...&quot;  This will become more apparent as svn 1.5 trickles out; I&apos;m using a brand new dev environment with both subclipse 1.4 and svn 1.5 client, so I got bit rather quickly.&lt;/p&gt;

&lt;p&gt;Those with svn 1.5 can get the code from the trunk, but cannot do an ant build.&lt;/p&gt;

&lt;p&gt;svnant hasn&apos;t been updated in more than a year and appears to be dead, so it may no longer be a viable tool for the ant build.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Subversion 1.5 command line, or subclipse version 1.4.x&lt;/p&gt;</environment>
        <key id="12401718">ZOOKEEPER-110</key>
            <summary>Build script relies on svnant, which is not compatible with subversion 1.5 working copies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jghoman">Jakob Homan</assignee>
                                    <reporter username="jghoman">Jakob Homan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Aug 2008 19:18:25 +0100</created>
                <updated>Sun, 26 Oct 2008 01:10:41 +0000</updated>
                            <resolved>Fri, 15 Aug 2008 19:01:42 +0100</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12619986" author="jghoman" created="Tue, 5 Aug 2008 19:22:18 +0100"  >&lt;p&gt;I&apos;ve modified the build.xml, replacing the previous svnant task with the same functionality using svntask (&lt;a href=&quot;http://code.google.com/p/svntask/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/svntask/&lt;/a&gt;).  Svntask is apache-licensed, however, it relies on svnkit, which has an odd dual license (&lt;a href=&quot;http://svnkit.com/licensing.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svnkit.com/licensing.html&lt;/a&gt;).  I&apos;m not sure if this will create a licensing issue.  Not reflected in the patch is deleting the svnant directory in src/java/lib/ and adding a new directory, src/java/lib/svntask, that includes svnkit.jar and svntask.jar, obtained from the two sites above.  &lt;/p&gt;

&lt;p&gt;Hope this is useful.&lt;/p&gt;</comment>
                            <comment id="12619989" author="jghoman" created="Tue, 5 Aug 2008 19:23:34 +0100"  >&lt;p&gt;patch removes svnant and adds svntask to build script&lt;/p&gt;</comment>
                            <comment id="12620037" author="owen.omalley" created="Tue, 5 Aug 2008 21:49:23 +0100"  >&lt;p&gt;My reading of the svnkit license would make it incompatible with the Apache license. If it is incompatible, you can not depend on it or distribute it as part of Zookeeper. See &lt;a href=&quot;http://www.apache.org/legal/3party.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/legal/3party.html&lt;/a&gt; . If there isn&apos;t away to avoid svnkit or fix svnant, you can ask legal about the TMate license. In my opinion, the clause that will be fatal is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;
	&lt;li&gt;Redistribution in any form without redistributing source code for software&lt;br/&gt;
      that uses SVNKit is possible only when such redistribution is explictly permitted &lt;br/&gt;
      by TMate Software. Please, contact TMate Software at support@svnkit.com to &lt;br/&gt;
      get such permission.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;which is effectively a GPL-like viral clause with an escape clause that lets TMate give/sell exceptions.&lt;/p&gt;</comment>
                            <comment id="12620300" author="phunt" created="Wed, 6 Aug 2008 17:04:52 +0100"  >&lt;p&gt;I&apos;m +1 on this change, -1 on using svntask re the issues Owen mentioned.&lt;/p&gt;

&lt;p&gt;Jakob &amp;#8211; notice that Hadoop core does something very similar, however they use a script, could you reuse this rather than relying on a third party library?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/core/trunk/build.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/core/trunk/build.xml&lt;/a&gt;&lt;br/&gt;
    &amp;lt;exec executable=&quot;sh&quot;&amp;gt;&lt;br/&gt;
       &amp;lt;arg line=&quot;src/saveVersion.sh $&lt;/p&gt;
{version}
&lt;p&gt;&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/exec&amp;gt;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/core/trunk/src/saveVersion.sh&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/core/trunk/src/saveVersion.sh&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12620323" author="owen.omalley" created="Wed, 6 Aug 2008 18:12:52 +0100"  >&lt;p&gt;Basically, the saveVersion script creates a Java source file that defines a package level attribute. There is a utility class that looks for the attribute and uses it if it is available. I took that approach so that the project compiles and runs, even if the script was not run to generate the version information.&lt;/p&gt;</comment>
                            <comment id="12620329" author="akornev" created="Wed, 6 Aug 2008 18:24:05 +0100"  >&lt;p&gt;I&apos;d like to point out that the hadoop&apos;s solution is non-portable. The &amp;lt;exec&amp;gt; task will fail on Windows &amp;#8211; it won&apos;t be able to find the executable &quot;sh.exe&quot;. By the way, this portability issue was one of the reasons we had to use svnant.&lt;/p&gt;</comment>
                            <comment id="12620337" author="cutting" created="Wed, 6 Aug 2008 18:38:30 +0100"  >&lt;p&gt;&amp;gt; The &amp;lt;exec&amp;gt; task will fail on Windows - it won&apos;t be able to find the executable &quot;sh.exe&quot;.&lt;/p&gt;

&lt;p&gt;Hadoop requires cygwin on Windows.&lt;/p&gt;</comment>
                            <comment id="12620340" author="owen.omalley" created="Wed, 6 Aug 2008 18:44:02 +0100"  >&lt;p&gt;And the script &lt;b&gt;does&lt;/b&gt; work on Windows, provided you have cygwin installed.&lt;/p&gt;</comment>
                            <comment id="12620364" author="phunt" created="Wed, 6 Aug 2008 19:22:30 +0100"  >&lt;p&gt;We don&apos;t want to add dependency on cygwin for zookeeper.&lt;/p&gt;

&lt;p&gt;What other options are available? In ant there is no way to determine we are on windows and run another script?&lt;/p&gt;</comment>
                            <comment id="12620368" author="jghoman" created="Wed, 6 Aug 2008 19:30:14 +0100"  >&lt;p&gt;Yes, in the ant exec task you can specify which os the command should run on, so we should be able to write two separate exec tasks: one for win, one for *nix.  I&apos;m writing the script for linux now/modifying the buld.xml and will upload the patch in a bit.  I can look at how to do it in windows as well, but I&apos;m not sure how to get the info without a good scripting environment.  Sorry if it was incorrect to upload the patch that required the bad license. -jg&lt;/p&gt;</comment>
                            <comment id="12620379" author="phunt" created="Wed, 6 Aug 2008 19:54:42 +0100"  >&lt;p&gt;No worries Jakob, we appreciate your contributions and willingness to work with the community! Honestly I didn&apos;t know myself until Owen mentioned it. (that&apos;s why we have parental oversight. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )  Regards.&lt;/p&gt;</comment>
                            <comment id="12620399" author="jghoman" created="Wed, 6 Aug 2008 20:35:56 +0100"  >&lt;p&gt;I&apos;ve re-done the patch to use a shell script to obtain the revision number, ala Hadoop&apos;s approach.  This works on *nix machines, maintains functionality, removes the reliance on svnant (which can be deleted from the lib directory) and introduces no new dependencies.  &lt;/p&gt;

&lt;p&gt;As far as Windows machines go, the operating system&apos;s poor default scripting environment makes this rather easy task pretty difficult.  However, it would be easy enough to do in MS Powershell, and I don&apos;t think it&apos;s unreasonable to expect developers&apos; machines to have that tool installed at this point.  So I could certainly write up an equivalent script in Powershell, create another exec task targeted to Windows, and we&apos;d be back to good without introducing a cygwin dependency (just a Powershell one).  One unknown: I don&apos;t know how ant would identify a Windows machine with cygwin but without Powershell.  Let me know if this sounds reasonable.  If so, I can explore that option.&lt;/p&gt;

&lt;p&gt;Hope this is useful. -jg&lt;/p&gt;</comment>
                            <comment id="12620404" author="phunt" created="Wed, 6 Aug 2008 20:53:59 +0100"  >&lt;p&gt;I noticed this in the ant exec manpage:&lt;/p&gt;

&lt;p&gt;Cygwin Users&lt;/p&gt;

&lt;p&gt;The &amp;lt;exec&amp;gt; task will not understand paths such as /bin/sh for the executable parameter. This is because the Java VM in which Ant is running is a standard Windows executable and is not aware of the Cygwin environment (i.e., doesn&apos;t load cygwin1.dll). The only work-around for this is to compile a JVM under Cygwin (at your own risk). See for instance sun jdk 6 build instructions for cygwin. &lt;/p&gt;

&lt;p&gt;I created a simple build.xml and regardless of whether I run under cmd or cygwin bash I still get &quot;Windows XP&quot; as the os.name.&lt;/p&gt;

&lt;p&gt;What about Mac users, are they covered as well?&lt;/p&gt;</comment>
                            <comment id="12620407" author="phunt" created="Wed, 6 Aug 2008 20:59:09 +0100"  >&lt;p&gt;I&apos;m against (-1) adding any new dependencies... eg powershell.&lt;/p&gt;

&lt;p&gt;Andrew &amp;#8211; would you be able to provide a working .bat file?&lt;/p&gt;

&lt;p&gt;Jakob &amp;#8211; FYI we are following a convention for patch file naming such as &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-110&quot; title=&quot;Build script relies on svnant, which is not compatible with subversion 1.5 working copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-110&quot;&gt;&lt;del&gt;ZOOKEEPER-110&lt;/del&gt;&lt;/a&gt;.patch&quot; where the file name is the ID of the jira issue. If you update a patch just re-upload with the same name, jira maintains a history of files with the same name. (please remove the old/invalid patches). Among other things this helps reviewers to keep track of the various patches. Thanks.&lt;/p&gt;</comment>
                            <comment id="12620410" author="jghoman" created="Wed, 6 Aug 2008 21:18:35 +0100"  >&lt;p&gt;renamed patch, deleted old version.&lt;/p&gt;</comment>
                            <comment id="12622446" author="jghoman" created="Thu, 14 Aug 2008 06:51:39 +0100"  >&lt;p&gt;OK, I&apos;ve coded up a DOS batch file that exactly replicates the shell script using only Windows built-in commands, so this fixes the original problem I identified, removes the svnant dependency, adds no new dependencies and will work on Windows natively.  Huzzah!&lt;/p&gt;

&lt;p&gt;I tested it on my OSX, Ubuntu and XP machines and they all worked.&lt;/p&gt;

&lt;p&gt;Again, the patch doesn&apos;t reflect deleting the svnant directory and contents.&lt;br/&gt;
-jg&lt;/p&gt;</comment>
                            <comment id="12622666" author="akornev" created="Thu, 14 Aug 2008 21:03:51 +0100"  >&lt;p&gt; +1  I&apos;ll commit the patch and delete the svnant directory and its contents.&lt;/p&gt;</comment>
                            <comment id="12622670" author="mahadev" created="Thu, 14 Aug 2008 21:17:52 +0100"  >&lt;p&gt;can we add apache headers to .sh files? all new files need apache headers .... &lt;/p&gt;</comment>
                            <comment id="12622673" author="jghoman" created="Thu, 14 Aug 2008 21:26:06 +0100"  >&lt;p&gt;Added Apache liecense header to both new files.&lt;/p&gt;</comment>
                            <comment id="12622747" author="akornev" created="Fri, 15 Aug 2008 00:45:42 +0100"  >&lt;p&gt;It turns out that the original patch used the  &amp;lt;exec&amp;gt; task attribute &quot;osfamily&quot; that is only available since ant 1.7. This patch ensures that build.xml is compatible with pre-1.7 versions. The apache license headers are also included. Please review. Thanks!&lt;/p&gt;</comment>
                            <comment id="12622948" author="akornev" created="Fri, 15 Aug 2008 19:01:42 +0100"  >&lt;p&gt;Commited the patch, deleted the svnant directory. Thanks, Jakob!&lt;/p&gt;</comment>
                            <comment id="12623635" author="hudson" created="Tue, 19 Aug 2008 12:02:11 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #58 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/58/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/58/&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12642714" author="phunt" created="Sun, 26 Oct 2008 01:10:41 +0000"  >&lt;p&gt;3.0.0 has been released, closing issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12388287" name="ZOOKEEPER-110.patch" size="5018" author="akornev" created="Fri, 15 Aug 2008 00:45:42 +0100"/>
                            <attachment id="12388276" name="ZOOKEEPER-110.patch" size="4011" author="jghoman" created="Thu, 14 Aug 2008 21:26:06 +0100"/>
                            <attachment id="12388204" name="ZOOKEEPER-110.patch" size="2346" author="jghoman" created="Thu, 14 Aug 2008 06:51:39 +0100"/>
                            <attachment id="12387677" name="ZOOKEEPER-110.patch" size="1926" author="jghoman" created="Wed, 6 Aug 2008 21:18:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Aug 2008 20:49:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48050</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzwdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>