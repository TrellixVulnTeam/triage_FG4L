<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-938/ZOOKEEPER-938.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-938] Support Kerberos authentication of clients.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-938</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Support Kerberos authentication of clients. &lt;/p&gt;

&lt;p&gt;The following usage would let an admin use Kerberos authentication to assign ACLs to authenticated clients.&lt;/p&gt;

&lt;p&gt;1. Admin logs into zookeeper (not necessarily through Kerberos however). &lt;/p&gt;

&lt;p&gt;2. Admin decides that a new node called &apos;/mynode&apos; should be owned by the user &apos;zkclient&apos; and have full permissions on this.&lt;/p&gt;

&lt;p&gt;3. Admin does: zk&amp;gt; create /mynode content sasl:zkclient@FOOFERS.ORG:cdrwa&lt;/p&gt;

&lt;p&gt;4. User &apos;zkclient&apos; logins to kerberos using the command line utility &apos;kinit&apos;.&lt;/p&gt;

&lt;p&gt;5. User connects to zookeeper server using a Kerberos-enabled version of zkClient (ZookeeperMain).&lt;/p&gt;

&lt;p&gt;6. Behind the scenes, the client and server exchange authentication information. User is now authenticated as &apos;zkclient&apos;.&lt;/p&gt;

&lt;p&gt;7. User accesses /mynode with permissions &apos;cdrwa&apos;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480698">ZOOKEEPER-938</key>
            <summary>Support Kerberos authentication of clients.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoontz">Eugene Koontz</assignee>
                                    <reporter username="ekoontz">Eugene Koontz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Nov 2010 17:25:18 +0000</created>
                <updated>Mon, 28 Apr 2014 05:03:58 +0100</updated>
                            <resolved>Thu, 18 Aug 2011 23:05:54 +0100</resolved>
                                                    <fixVersion>3.4.0</fixVersion>
                                    <component>java client</component>
                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="12934912" author="ekoontz" created="Tue, 23 Nov 2010 17:28:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-896&quot; title=&quot;Improve C client to support dynamic authentication schemes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-896&quot;&gt;ZOOKEEPER-896&lt;/a&gt; relates to Kerberos support for the C-client. This bug relates to Java Server and Java client support. The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt; to servers should be compatible with &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-896&quot; title=&quot;Improve C client to support dynamic authentication schemes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-896&quot;&gt;ZOOKEEPER-896&lt;/a&gt;&apos;s Kerberos-enabled C-client. &lt;/p&gt;</comment>
                            <comment id="12934920" author="ekoontz" created="Tue, 23 Nov 2010 17:40:33 +0000"  >&lt;p&gt;Do authentication on server side. Does not include java client-side. Also does not have callback support for renewal of credentials (see discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-896&quot; title=&quot;Improve C client to support dynamic authentication schemes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-896&quot;&gt;ZOOKEEPER-896&lt;/a&gt; about callbacks and credential renewal).&lt;/p&gt;</comment>
                            <comment id="12968368" author="ekoontz" created="Mon, 6 Dec 2010 19:08:03 +0000"  >&lt;p&gt;Use documentation provided at &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-329&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-329&lt;/a&gt; as a reference to implement Kerberos authentication within the Zookeeper authentication plugin framework.&lt;/p&gt;</comment>
                            <comment id="12970528" author="ekoontz" created="Sat, 11 Dec 2010 21:23:37 +0000"  >&lt;p&gt;Zookeeper client Kerberos authentication: &lt;a href=&quot;https://github.com/ekoontz/zookeeper/blob/kerberos/src/java/main/org/apache/zookeeper/ClientCnxn.java#L1390&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/zookeeper/blob/kerberos/src/java/main/org/apache/zookeeper/ClientCnxn.java#L1390&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Zookeeper server Kerberos authentication: &lt;a href=&quot;https://github.com/ekoontz/zookeeper/blob/kerberos/src/java/main/org/apache/zookeeper/server/ZooKeeperServerMain.java#L112&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/zookeeper/blob/kerberos/src/java/main/org/apache/zookeeper/server/ZooKeeperServerMain.java#L112&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12979752" author="ekoontz" created="Mon, 10 Jan 2011 20:56:43 +0000"  >&lt;p&gt;I have a patch, which I&apos;m attaching, that does SASL authentication between the Zookeeper server and client. It still requires at least 2 things:&lt;/p&gt;

&lt;p&gt;-integrate with zoo.cfg rather than my hard-wired test development configuration settings.&lt;br/&gt;
-get other mechanisms working other than GSSAPI : currently this patch only works for GSSAPI; should work for other mechs such as PLAIN and DIGEST-MD5. &lt;/p&gt;</comment>
                            <comment id="12979753" author="ekoontz" created="Mon, 10 Jan 2011 20:57:49 +0000"  >&lt;p&gt;Not quite yet ready for &quot;submit patch&quot; (see comment posted right before this attachment was done)&lt;/p&gt;</comment>
                            <comment id="12979754" author="ekoontz" created="Mon, 10 Jan 2011 20:59:04 +0000"  >&lt;p&gt;See session transcript of a SASLized zkCli.sh ZK client connecting to a SASL-ized ZK server:&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://gist.github.com/773429&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://gist.github.com/773429&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12979757" author="ekoontz" created="Mon, 10 Jan 2011 21:04:33 +0000"  >&lt;p&gt;to enable SASL authentication, zoo.cfg must have:&lt;/p&gt;

&lt;p&gt;authProvider.1=org.apache.zookeeper.server.auth.SASLAuthenticationProvider&lt;/p&gt;</comment>
                            <comment id="12979786" author="mahadev" created="Mon, 10 Jan 2011 21:50:50 +0000"  >&lt;p&gt;wow!!! This is just great! Nice work Eugene. Ill take a look at the patch. Ill be reviewing the other kerberos patches tonight. Hopefully they should be in soon!.&lt;/p&gt;</comment>
                            <comment id="12979851" author="ekoontz" created="Mon, 10 Jan 2011 23:39:39 +0000"  >&lt;p&gt;sample jaas.conf file used by both server and client (separate &quot;Client&quot; and &quot;Server&quot; sections in a single file). Save this in the top-level zookeeper directory (TODO: should be in conf/ directory)&lt;/p&gt;</comment>
                            <comment id="12980804" author="ekoontz" created="Wed, 12 Jan 2011 16:54:18 +0000"  >&lt;p&gt;As Botond mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-896&quot; title=&quot;Improve C client to support dynamic authentication schemes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-896&quot;&gt;ZOOKEEPER-896&lt;/a&gt;, Zookeeper clients that use Kerberos must be able to handle mutual authentication with more than one Zookeeper server, and also must cope with ticket expiry. The sasl.patch of 2011-01-10 03:57 PM does not handle either of these circumstances. I&apos;ll be studying Botond&apos;s C client patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-896&quot; title=&quot;Improve C client to support dynamic authentication schemes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-896&quot;&gt;ZOOKEEPER-896&lt;/a&gt; to learn how it might apply to the Java client.&lt;/p&gt;</comment>
                            <comment id="12987876" author="ekoontz" created="Fri, 28 Jan 2011 01:39:59 +0000"  >&lt;p&gt;Still don&apos;t have a complete patch worthy of review yet, but please see instructions for getting started with Kerberized Zookeeper from a blank Amazon EC2 Linux:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekoontz/zookeeper/wiki&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/zookeeper/wiki&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12990881" author="ekoontz" created="Sat, 5 Feb 2011 02:26:37 +0000"  >&lt;p&gt;Needs some DIGEST-MD5 SASL unit tests still.&lt;/p&gt;</comment>
                            <comment id="12990882" author="ekoontz" created="Sat, 5 Feb 2011 02:28:54 +0000"  >&lt;p&gt;Passes all junit.run tests; still needs units tests for DIGEST-MD5 with SASL.&lt;/p&gt;</comment>
                            <comment id="12990884" author="hadoopqa" created="Sat, 5 Feb 2011 02:32:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12470334/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12470334/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1062244.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/119//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/119//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12990927" author="phunt" created="Sat, 5 Feb 2011 07:03:49 +0000"  >&lt;p&gt;Hi Eugene, you have to create the patch using the --no-prefix option in git in order for hudson to run properly. (it only knows svn)&lt;/p&gt;</comment>
                            <comment id="12992288" author="hadoopqa" created="Wed, 9 Feb 2011 02:04:09 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12470648/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12470648/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1068067.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 10 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 27 release audit warnings (more than the trunk&apos;s current 24 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/126//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12993558" author="ekoontz" created="Fri, 11 Feb 2011 16:11:23 +0000"  >&lt;p&gt;submitting new patch&lt;/p&gt;</comment>
                            <comment id="12993574" author="hadoopqa" created="Fri, 11 Feb 2011 16:44:01 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12470866/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12470866/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1069169.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/127//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/127//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/127//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/127//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/127//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/127//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12993672" author="ekoontz" created="Fri, 11 Feb 2011 20:08:51 +0000"  >&lt;p&gt;Sorry for the resubmission; trying to trigger a new Hudson build.&lt;/p&gt;</comment>
                            <comment id="12993681" author="hadoopqa" created="Fri, 11 Feb 2011 20:33:57 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12470889/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12470889/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1069169.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/129//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/129//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/129//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/129//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/129//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/129//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12993684" author="hadoopqa" created="Fri, 11 Feb 2011 20:42:06 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12470890/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12470890/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1069169.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/130//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/130//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/130//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/130//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/130//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/130//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12995106" author="ekoontz" created="Wed, 16 Feb 2011 01:25:30 +0000"  >&lt;p&gt;this version of the patch adds support for: &lt;/p&gt;

&lt;p&gt;requireClientAuthScheme=(scheme) &lt;/p&gt;

&lt;p&gt;in zoo.cfg, which will disconnect clients if they do not first authenticate with the given scheme. For example, &lt;/p&gt;

&lt;p&gt;requireClientAuthScheme=sasl &lt;/p&gt;

&lt;p&gt;will disconnect clients if they do not first authenticate using SASL.&lt;/p&gt;</comment>
                            <comment id="12995116" author="hadoopqa" created="Wed, 16 Feb 2011 01:53:43 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12471140/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12471140/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1069169.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/132//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/132//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/132//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/132//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/132//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/132//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12996724" author="hadoopqa" created="Sat, 19 Feb 2011 08:11:49 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12471140/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12471140/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1072085.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/144//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/144//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/144//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/144//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/144//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/144//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12999119" author="hadoopqa" created="Thu, 24 Feb 2011 23:24:31 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12471140/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12471140/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1072085.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/163//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/163//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/163//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/163//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/163//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/163//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13000510" author="mahadev" created="Mon, 28 Feb 2011 21:04:42 +0000"  >&lt;p&gt;Eugene,&lt;/p&gt;

&lt;p&gt; Sorry I have been late in reviewing this, but I think this should definitely go into 3.4 release. &lt;/p&gt;

&lt;p&gt;One thing though, how does the zkclient authenticate via the client API? &lt;/p&gt;

&lt;p&gt;The user does kinit and then? How do we handle client credential expiry? &lt;/p&gt;

&lt;p&gt;Can you please layout a detailed design on this? I would really like this in 3.4 but am a novice on kerberos and would be lost without a design.&lt;/p&gt;</comment>
                            <comment id="13000984" author="ekoontz" created="Tue, 1 Mar 2011 17:52:53 +0000"  >&lt;p&gt;This bug describes the problem that&apos;s causing the &quot;-1 overall&quot; automated comments on this bug.&lt;/p&gt;</comment>
                            <comment id="13000985" author="ekoontz" created="Tue, 1 Mar 2011 17:53:42 +0000"  >&lt;p&gt;Sorry, &quot;this bug&quot; means &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1004&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13001266" author="ekoontz" created="Wed, 2 Mar 2011 03:55:01 +0000"  >&lt;p&gt;Simple testing setup for Kerberized Zookeeper on Amazon EC-2 (or CentOS/Redhat): &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekoontz/zookeeper/wiki&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/zookeeper/wiki&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13005449" author="ekoontz" created="Fri, 11 Mar 2011 01:29:14 +0000"  >&lt;p&gt;Hi Mahadev, Thanks for your questions. Also I was glad to talk to you and tproa in #zookeeper about this.&lt;/p&gt;

&lt;p&gt;-How zkclient authenticates&lt;/p&gt;

&lt;p&gt;The zookeeper client authenticates by setting the property: java.security.auth.login.config=$FILE&lt;/p&gt;

&lt;p&gt;where $FILE is a JAAS (Java Authentication and Authorization Service) configuration file. Please see my github wiki link (previous comment)for an example of such a configuration file.&lt;/p&gt;

&lt;p&gt;Internally, this property is used by the Zookeeper class to authenticate with kerberos.&lt;/p&gt;

&lt;p&gt;As far as client credential expiry, I believe that client expiry is the big remaining feature remaining to be done. The client would need to renew the credential in a separate thread that wakes up once a day (or some time period), just as the Zookeeper quorum member (the ZK server) must do. As tproa said on March 1 in #zookeeper, &quot;when you acquire credentials, look into those credentials and discover how long they are valid. make your thread wake up in that time minus some fudge factor to renew&quot;. &lt;/p&gt;

&lt;p&gt;(and as tproa said, it&apos;s easy to test expiry by using the &quot;modprinc&quot; tool). &lt;/p&gt;

&lt;p&gt;I am working on getting the extra thread support on both client and server working now. I also need to get a diagram up about how it works - I&apos;m assuming that the Zookeeper wiki would be a good place?&lt;/p&gt;

&lt;p&gt;I&apos;m really looking forward to getting this in 3.4!&lt;/p&gt;

&lt;p&gt;-Eugene&lt;/p&gt;</comment>
                            <comment id="13007296" author="kzhang" created="Wed, 16 Mar 2011 00:27:34 +0000"  >&lt;p&gt;@Eugene,&lt;/p&gt;

&lt;p&gt;Congrats on getting Kerberos to work! Mahadev asked me to take a look of your patch. We did a similar thing for Hadoop you might want to take a look. You don&apos;t have a design doc attached, at the risk of misunderstanding you, here are my initial comments.&lt;/p&gt;

&lt;p&gt;1. Why use SASL? We use SASL in Hadoop because we want to support both Kerberos and our own tokens. If we only need to support Kerberos, we might have chosen to use Java GSSAPI directly (which, for example, allows you to specify the full Kerberos principal name for the server, whereas in SASL the REALM part is picked up from default conf). Do you have a need for username/password auth once Kerberos mode is turned on? If your connections are long-lived, Kerberos-only auth might be enough.&lt;/p&gt;

&lt;p&gt;2. If you do need to support username/password in addition to Kerberos, how user passwords are stored on server?&lt;/p&gt;

&lt;p&gt;3. I saw you have a &quot;OpCode.addcred&quot;. Is this the operation that allows a client to install her chosen password on the server? If so, you need to make sure this operation is done over a Kerberos authenticated and preferably encrypted connection. In Hadoop, we only allow delegation tokens to be issued to Kerberos authenticated clients.&lt;/p&gt;

&lt;p&gt;4. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cmd.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;addcred&quot;&lt;/span&gt;) &amp;amp;&amp;amp; args.length == 3) {
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = args[1];
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password = args[2];
+            zk.addCredentials(username,password);
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It&apos;s better not to put passwords on the command line. Either read from a file or get it from user interactively.&lt;/p&gt;

&lt;p&gt;5. You might want to set login configurations programmatically, which is more flexible (take a look of what we did in UserGroupInformation.java). I think you&apos;ll need to support both keytab and TGT cache login.&lt;/p&gt;

&lt;p&gt;6. You&apos;ll have to deal with relogin issues since your connections are long-lived. See UserGroupInformation for some example code. For Hadoop RPC, we don&apos;t refresh TGT proactively. The client simply tries to set up a connection and if the TGT is expired, the setup will fail. When the client detects the failure, it does relogin and retry connection setup.&lt;/p&gt;</comment>
                            <comment id="13007308" author="ekoontz" created="Wed, 16 Mar 2011 01:29:46 +0000"  >&lt;p&gt;Hi Kan,&lt;br/&gt;
Thanks very much for your feedback. I wanted to quickly deal with issue 6 since this is the major missing piece. Thanks for the explanation about Hadoop RPC.  I&apos;m going to study the Hadoop RPC code to determine how to apply this.&lt;/p&gt;</comment>
                            <comment id="13010946" author="ekoontz" created="Thu, 24 Mar 2011 21:32:58 +0000"  >&lt;p&gt;Addresses Kan Zhang&apos;s comments:&lt;/p&gt;

&lt;p&gt;-adds credential-refreshing LoginThread class for both Zookeeper client and server.&lt;br/&gt;
-removes &apos;addcred&apos; command that was only useful for development and testing of DIGEST-MD5 with SASL: unnecessary and unsafe to add passwords by command-line, especially without authentication and encryption&lt;/p&gt;</comment>
                            <comment id="13010959" author="hadoopqa" created="Thu, 24 Mar 2011 22:04:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12474560/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12474560/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1082362.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/198//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/198//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/198//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/198//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/198//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/198//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13011410" author="ekoontz" created="Fri, 25 Mar 2011 20:46:48 +0000"  >&lt;p&gt;adding new patch that fixes FindBugs warnings&lt;/p&gt;</comment>
                            <comment id="13011413" author="ekoontz" created="Fri, 25 Mar 2011 20:50:21 +0000"  >&lt;p&gt;Fixes findbugs warnings.&lt;/p&gt;</comment>
                            <comment id="13011423" author="hadoopqa" created="Fri, 25 Mar 2011 21:13:55 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12474661/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12474661/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1082362.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/201//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/201//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/201//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/201//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/201//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/201//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13011469" author="ekoontz" created="Fri, 25 Mar 2011 22:52:52 +0000"  >&lt;p&gt;fix javadoc warning about @params.&lt;/p&gt;</comment>
                            <comment id="13011496" author="hadoopqa" created="Fri, 25 Mar 2011 23:21:56 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12474671/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12474671/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1082362.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/203//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/203//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/203//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/203//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/203//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/203//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13012318" author="ekoontz" created="Tue, 29 Mar 2011 03:15:33 +0100"  >&lt;p&gt;move java system property check up one level for simplicity of determining whether SASL is enabled or not.&lt;/p&gt;</comment>
                            <comment id="13012319" author="ekoontz" created="Tue, 29 Mar 2011 03:16:37 +0100"  >&lt;p&gt;Move java system property check up one level for simplicity of determining whether SASL is enabled or not.&lt;/p&gt;</comment>
                            <comment id="13012322" author="hadoopqa" created="Tue, 29 Mar 2011 03:44:18 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12474845/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12474845/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1082362.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/208//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/208//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/208//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/208//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/208//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/208//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13012820" author="ekoontz" created="Wed, 30 Mar 2011 03:12:37 +0100"  >&lt;p&gt;Please see &lt;a href=&quot;https://cwiki.apache.org/confluence/display/ZOOKEEPER/Zookeeper+and+SASL&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/ZOOKEEPER/Zookeeper+and+SASL&lt;/a&gt; for a design document explaining the proposed patch for this issue.&lt;/p&gt;</comment>
                            <comment id="13014854" author="kzhang" created="Fri, 1 Apr 2011 23:20:45 +0100"  >&lt;p&gt;Hi Eugene,&lt;/p&gt;

&lt;p&gt;Thanks for addressing some of my previous comments in your new patch. Before I comment further, I&apos;d like to understand what use cases you plan to support. In your documentation, you explained a znode can have any number of &amp;lt;scheme:expression,perms&amp;gt; pairs for specifying the authentication scheme, principal name, and permissions for that principal. Is this the only way to specify permissions? How does it scale to thousands of users for a single node? And if I have a user that needs to access a ZooKeeper tree with thousands of nodes, do I have to add this user to every node? In addition to USER, do you have a GROUP concept for specifying permissions? &lt;/p&gt;

&lt;p&gt;As you may already know, Hadoop doesn&apos;t use authentication specific names (we call them long-names) for specifying permissions. Instead, we convert long-names to Hadoop internal short-names using configured rules, and use short-names for specifying permissions and permission checking. This has the benefits of specifying permissions for a user regardless of which authentication scheme the user might use to access the system. It makes authorization policy independent of authentication. It can also map different external users to the same internal user.&lt;/p&gt;</comment>
                            <comment id="13016586" author="ekoontz" created="Wed, 6 Apr 2011 23:32:35 +0100"  >&lt;p&gt;It&apos;s intended to use &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt; as a foundation for &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1045&quot; title=&quot;Quorum Peer mutual authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1045&quot;&gt;ZOOKEEPER-1045&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13016606" author="ekoontz" created="Thu, 7 Apr 2011 00:30:53 +0100"  >&lt;p&gt;Thanks for your review again, Kan. Addressing your points from the beginning (sorry for the delay):&lt;/p&gt;

&lt;p&gt;&amp;gt; 1. Why use SASL? We use SASL in Hadoop because we want to support both Kerberos and our own tokens. If we only need to support Kerberos, we might have &amp;gt; chosen to use Java GSSAPI directly (which, for example, allows you to specify the full Kerberos principal name for the server, whereas in SASL the&lt;br/&gt;
&amp;gt; REALM part is picked up from default conf). Do you have a need for username/password auth once Kerberos mode is turned on? If your connections are &lt;br/&gt;
&amp;gt; long-lived, Kerberos-only auth might be enough.&lt;/p&gt;

&lt;p&gt;I think the powerful motivation for SASL is its flexibility - for example, Mahadev is interested in possibly using SSL with Zookeeper. We could use the SASL EXTERNAL mechanism: &lt;a href=&quot;http://tools.ietf.org/html/rfc2222#section-7.4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://tools.ietf.org/html/rfc2222#section-7.4&lt;/a&gt; (thanks to Gary Helmling for pointing this out and the link). &lt;/p&gt;

&lt;p&gt;With regard to specifying the full Kerberos principal name for the server, do you mean that the SASL API does not allow the client to specify the full server principal name e.g. &quot;zookeeper/my.host.name@MYDOMAIN&quot;?&lt;/p&gt;

&lt;p&gt;&amp;gt; 2. If you do need to support username/password in addition to Kerberos, how user passwords are stored on server?&lt;/p&gt;

&lt;p&gt;&amp;gt; 3. I saw you have a &quot;OpCode.addcred&quot;. Is this the operation that allows a client to install her chosen password on the server? If so, you need to make &amp;gt; sure this operation is done over a Kerberos authenticated and preferably encrypted connection. In Hadoop, we only allow delegation tokens to be &lt;br/&gt;
&amp;gt; issued to Kerberos authenticated clients.&lt;/p&gt;

&lt;p&gt;&amp;gt; 4.&lt;/p&gt;

&lt;p&gt;&amp;gt; +        } else if (cmd.equals(&quot;addcred&quot;) &amp;amp;&amp;amp; args.length == 3) &lt;/p&gt;
{
&amp;gt; +            String username = args[1];
&amp;gt; +            String password = args[2];
&amp;gt; +            zk.addCredentials(username,password);
&amp;gt; +        }


&lt;p&gt;&amp;gt; It&apos;s better not to put passwords on the command line. Either read from a file or get it from user interactively.&lt;/p&gt;

&lt;p&gt;Thanks for catching this : I&apos;ve removed all of the &quot;addcred&quot; stuff because of your good criticism. It was only intended for testing my own DIGEST-MD5 mechanism which should only be used for testing and development, not production. See two SASL unit tests that use DIGEST-MD5 here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ekoontz/zookeeper/blob/sasl/src/java/test/org/apache/zookeeper/test/SaslAuthTest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/zookeeper/blob/sasl/src/java/test/org/apache/zookeeper/test/SaslAuthTest.java&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/ekoontz/zookeeper/blob/sasl/src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/zookeeper/blob/sasl/src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However these unit tests do not require the &quot;addcred&quot; command and so I&apos;ve removed it.&lt;/p&gt;

&lt;p&gt;&amp;gt; 5. You might want to set login configurations programmatically, which is more flexible (take a look of what we did in UserGroupInformation.java). I &lt;br/&gt;
&amp;gt; think you&apos;ll need to support both keytab and TGT cache login.&lt;/p&gt;

&lt;p&gt;I find it more flexible to use external text files. Also, if we use the JAAS configuration format, it&apos;s easier to integrate with other services that already use this format - see this JIRA: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7070&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-7070&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&amp;gt; 6. You&apos;ll have to deal with relogin issues since your connections are long-lived. See UserGroupInformation for some example code. For Hadoop RPC, we &amp;gt; don&apos;t refresh TGT proactively. The client simply tries to set up a connection and if the TGT is expired, the setup will fail. When the client detects &amp;gt; the failure, it does relogin and retry connection setup.&lt;/p&gt;

&lt;p&gt;This is now addressed with the LoginThread code; see the latest patch. I chose to do a periodic refresh rather than a fail and retry, since it seemed simpler to me. I&apos;d be happy to see how a fail and retry replacement would look, though.&lt;/p&gt;</comment>
                            <comment id="13016621" author="ekoontz" created="Thu, 7 Apr 2011 01:00:39 +0100"  >
&lt;p&gt;&amp;gt; Thanks for addressing some of my previous comments in your new patch. Before I comment further, I&apos;d like to understand what use cases you plan to &lt;br/&gt;
&amp;gt; support. In your documentation, you explained a znode can have any number of &amp;lt;scheme:expression,perms&amp;gt; pairs for specifying the authentication scheme, &lt;br/&gt;
&amp;gt; principal name, and permissions for that principal. Is this the only way to specify permissions? How does it scale to thousands of users for a single &lt;br/&gt;
&amp;gt; node? And if I have a user that needs to access a ZooKeeper tree with thousands of nodes, do I have to add this user to every node? In addition to USER, &amp;gt; do you have a GROUP concept for specifying permissions?&lt;/p&gt;

&lt;p&gt;Hi Kan, I simply made the existing permission functionality useable with SASL. Adding groups and testing scalability are outside of the scope of this bug. &lt;/p&gt;

&lt;p&gt;&amp;gt; As you may already know, Hadoop doesn&apos;t use authentication specific names (we call them long-names) for specifying permissions. Instead, we convert &lt;br/&gt;
&amp;gt; long-names to Hadoop internal short-names using configured rules, and use short-names for specifying permissions and permission checking. This has the &lt;br/&gt;
&amp;gt; benefits of specifying permissions for a user regardless of which authentication scheme the user might use to access the system. It makes authorization &lt;br/&gt;
&amp;gt; policy independent of authentication. It can also map different external users to the same internal user.&lt;/p&gt;

&lt;p&gt;That sounds interesting but again it is outside the scope of this bug, I think.&lt;/p&gt;</comment>
                            <comment id="13017595" author="ekoontz" created="Fri, 8 Apr 2011 19:46:29 +0100"  >&lt;p&gt;Hi Kan, Please don&apos;t misunderstand me; I am interested to learn more about the Hadoop name-mapping permissions model. It sounds very flexible and hopefully could be used with Zookeeper, but that would be another JIRA I would think.&lt;/p&gt;</comment>
                            <comment id="13037088" author="ekoontz" created="Fri, 20 May 2011 22:20:43 +0100"  >&lt;p&gt;Canceling patch because it needs additional work. Hope to release a more recent patch soon.&lt;/p&gt;</comment>
                            <comment id="13052292" author="hadoopqa" created="Tue, 21 Jun 2011 01:42:15 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12483225/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12483225/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1136740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 13 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/332//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/332//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13052298" author="hadoopqa" created="Tue, 21 Jun 2011 02:11:47 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12483226/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12483226/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1136740.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13052669" author="ekoontz" created="Tue, 21 Jun 2011 18:14:33 +0100"  >&lt;p&gt;I don&apos;t think that the test that fails in &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/333//testReport/&lt;/a&gt;   (org.apache.zookeeper.test.QuorumTest.testFollowersStartAfterLeader) is due to my patch, since the same test fails for me on apache trunk in about 1 of every 3 tries.&lt;/p&gt;</comment>
                            <comment id="13052753" author="hadoopqa" created="Tue, 21 Jun 2011 19:39:13 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12483226/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12483226/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1138100.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/337//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/337//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/337//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/337//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/337//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/337//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13052813" author="hadoopqa" created="Tue, 21 Jun 2011 21:35:00 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12483336/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12483336/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1138100.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/340//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/340//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/340//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/340//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/340//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/340//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13059159" author="breed" created="Sun, 3 Jul 2011 05:42:50 +0100"  >&lt;p&gt;i think this patch is pretty close i would really like to get this into 3.4.&lt;/p&gt;</comment>
                            <comment id="13059224" author="ekoontz" created="Sun, 3 Jul 2011 17:18:15 +0100"  >&lt;p&gt;Benjamin,&lt;br/&gt;
Thanks so much for taking the time to look at this. I&apos;m working on abstracting out the SASL-specific bits from ClientCnxn now.&lt;/p&gt;</comment>
                            <comment id="13060702" author="ekoontz" created="Wed, 6 Jul 2011 18:23:59 +0100"  >&lt;p&gt;Create new classes: ZooKeeperSaslServer and ZooKeeperSaslClient to better encapsulate SASL-related functionality (for client and server respectively).&lt;br/&gt;
Thanks to Benjamin Reed for his review at the Zookeeper Dev Meeting last week.&lt;/p&gt;</comment>
                            <comment id="13060710" author="hadoopqa" created="Wed, 6 Jul 2011 18:32:25 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485455/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485455/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1142377.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/366//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/366//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13060715" author="ekoontz" created="Wed, 6 Jul 2011 18:43:01 +0100"  >&lt;p&gt;--no-prefix&lt;/p&gt;</comment>
                            <comment id="13060733" author="hadoopqa" created="Wed, 6 Jul 2011 19:15:27 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485457/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485457/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1142377.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/367//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/367//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/367//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/367//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/367//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/367//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13060742" author="ekoontz" created="Wed, 6 Jul 2011 19:27:39 +0100"  >&lt;p&gt;Fix the findbugs warning (remove unused SendThread.cnxn).&lt;/p&gt;</comment>
                            <comment id="13060765" author="hadoopqa" created="Wed, 6 Jul 2011 19:59:23 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485475/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485475/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1142377.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/369//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/369//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/369//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/369//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/369//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/369//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13061067" author="mahadev" created="Thu, 7 Jul 2011 07:39:01 +0100"  >&lt;p&gt;Ben, can you please review this? &lt;/p&gt;</comment>
                            <comment id="13061359" author="ekoontz" created="Thu, 7 Jul 2011 15:57:44 +0100"  >&lt;p&gt;Hi Mahadev and Ben,&lt;br/&gt;
I&apos;d promised Ben to submit the patch to reviews.apache.org; let me do that today to help ease the review.&lt;br/&gt;
-Eugene&lt;/p&gt;</comment>
                            <comment id="13061411" author="ekoontz" created="Thu, 7 Jul 2011 17:19:38 +0100"  >&lt;p&gt;Increase similarity between ZooKeeperSaslClient and ZooKeeperSaslServer as they relate to LoginThread.&lt;/p&gt;</comment>
                            <comment id="13061431" author="hadoopqa" created="Thu, 7 Jul 2011 17:44:51 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485615/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485615/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1143688.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/375//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/375//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/375//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/375//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/375//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/375//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13061465" author="ekoontz" created="Thu, 7 Jul 2011 19:08:30 +0100"  >&lt;p&gt;fix 2 findbugs warnings introduced in last patch.&lt;/p&gt;</comment>
                            <comment id="13061470" author="ekoontz" created="Thu, 7 Jul 2011 19:13:36 +0100"  >&lt;p&gt;fix 2 findbugs warnings introduced in last patch. (retry)&lt;/p&gt;</comment>
                            <comment id="13061475" author="hadoopqa" created="Thu, 7 Jul 2011 19:35:09 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485625/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485625/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1143688.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/377//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/377//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/377//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/377//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/377//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/377//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13061494" author="hadoopqa" created="Thu, 7 Jul 2011 19:58:55 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485628/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485628/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1143688.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/378//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/378//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/378//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/378//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/378//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/378//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13062066" author="jiraposter@reviews.apache.org" created="Fri, 8 Jul 2011 18:28:16 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1049/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1049/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for zookeeper, Benjamin Reed and Mahadev Konar.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Support Kerberos authentication of clients.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-938&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/java/main/org/apache/zookeeper/ClientCnxn.java 87477df &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ClientCnxnSocketNIO.java d0e74fa &lt;br/&gt;
  src/java/main/org/apache/zookeeper/LoginThread.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/Watcher.java e72105c &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooDefs.java f77ac20 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooKeeper.java f2ab4a6 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/ZooKeeperSaslClient.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java b690817 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java bab8998 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NIOServerCnxnFactory.java e7e1846 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java c6ab5dd &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NettyServerCnxnFactory.java deb1e7a &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/Request.java 80d2b99 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerCnxn.java 6d69073 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java 72af158 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerConfig.java ec710cd &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ZooKeeperSaslServer.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ZooKeeperServerMain.java 52d3820 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/auth/DigestLoginModule.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java c6d9c09 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerMain.java 969a482 &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java PRE-CREATION &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/SaslAuthTest.java PRE-CREATION &lt;br/&gt;
  src/zookeeper.jute 34eac78 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1049/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1049/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Patrick&lt;/p&gt;
</comment>
                            <comment id="13062483" author="ekoontz" created="Sat, 9 Jul 2011 16:43:51 +0100"  >&lt;p&gt;In server-side code, create a separate ZooKeeperSaslServer for each client connection, but use the same server-wide LoginThread for all.&lt;/p&gt;</comment>
                            <comment id="13062488" author="hadoopqa" created="Sat, 9 Jul 2011 17:12:04 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12485860/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12485860/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1144087.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/388//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/388//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/388//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/388//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/388//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/388//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13062597" author="jiraposter@reviews.apache.org" created="Sat, 9 Jul 2011 19:06:00 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1059/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for zookeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Support Kerberos authentication of clients.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-938&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/java/main/org/apache/zookeeper/ClientCnxn.java 87477df &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ClientCnxnSocketNIO.java d0e74fa &lt;br/&gt;
  src/java/main/org/apache/zookeeper/LoginThread.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/Watcher.java e72105c &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooDefs.java f77ac20 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooKeeper.java f2ab4a6 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/ZooKeeperSaslClient.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java b690817 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java bab8998 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NIOServerCnxnFactory.java e7e1846 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java c6ab5dd &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NettyServerCnxnFactory.java deb1e7a &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/Request.java 80d2b99 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/SaslServerCallbackHandler.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerCnxn.java 6d69073 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java 72af158 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerConfig.java ec710cd &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ZooKeeperSaslServer.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ZooKeeperServerMain.java 52d3820 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/auth/DigestLoginModule.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java c6d9c09 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerMain.java 969a482 &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java PRE-CREATION &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/SaslAuthTest.java PRE-CREATION &lt;br/&gt;
  src/zookeeper.jute 34eac78 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1059/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Passes all unit tests on my local machine. Also tested as part of a 3-node quorum on an HBase cluster which was then loaded with data using the Faulkner load test (&lt;a href=&quot;https://github.com/ekoontz/hbase-ec2/blob/4a3a1a11810ed6acd96593e2818cbd7d2ffc8950/faulkner/faulkner.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/hbase-ec2/blob/4a3a1a11810ed6acd96593e2818cbd7d2ffc8950/faulkner/faulkner.rb&lt;/a&gt;)&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Eugene&lt;/p&gt;
</comment>
                            <comment id="13062598" author="ekoontz" created="Sat, 9 Jul 2011 19:09:29 +0100"  >&lt;p&gt;Hi Patrick, &lt;br/&gt;
Thanks for creating a review before this one; I&apos;m sorry to delay mine so long. Since I&apos;ve updated the patch to improve the server-side code, can you kindly cancel your review and see mine instead?&lt;br/&gt;
Thanks,&lt;br/&gt;
Eugene&lt;/p&gt;</comment>
                            <comment id="13062607" author="jiraposter@reviews.apache.org" created="Sat, 9 Jul 2011 20:51:59 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1059/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-07-09 19:51:29.949643)&lt;/p&gt;


&lt;p&gt;Review request for zookeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Support Kerberos authentication of clients.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-938&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/java/main/org/apache/zookeeper/ClientCnxn.java 87477df &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ClientCnxnSocketNIO.java d0e74fa &lt;br/&gt;
  src/java/main/org/apache/zookeeper/LoginThread.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/Watcher.java e72105c &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooDefs.java f77ac20 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooKeeper.java f2ab4a6 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/ZooKeeperSaslClient.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java b690817 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java bab8998 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NIOServerCnxnFactory.java e7e1846 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java c6ab5dd &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/NettyServerCnxnFactory.java deb1e7a &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/Request.java 80d2b99 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/SaslServerCallbackHandler.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerCnxn.java 6d69073 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java 72af158 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ServerConfig.java ec710cd &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ZooKeeperSaslServer.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/ZooKeeperServerMain.java 52d3820 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/auth/DigestLoginModule.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java c6d9c09 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerMain.java 969a482 &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java PRE-CREATION &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/SaslAuthTest.java PRE-CREATION &lt;br/&gt;
  src/zookeeper.jute 34eac78 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1059/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Passes all unit tests on my local machine. &lt;/p&gt;

&lt;p&gt;Also tested in a kerberos-enabled 3-node quorum in an HBase cluster which was then loaded with data using the Faulkner load test (&lt;a href=&quot;https://github.com/ekoontz/hbase-ec2/blob/4a3a1a11810ed6acd96593e2818cbd7d2ffc8950/faulkner/faulkner.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/hbase-ec2/blob/4a3a1a11810ed6acd96593e2818cbd7d2ffc8950/faulkner/faulkner.rb&lt;/a&gt;)&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Eugene&lt;/p&gt;
</comment>
                            <comment id="13062658" author="jiraposter@reviews.apache.org" created="Sun, 10 Jul 2011 01:00:00 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1059/#review1019&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#review1019&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2094&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2094&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    we don&apos;t want to make the state visible. we don&apos;t want applications to have to deal with new states, especially ones that depend on the authentication type.&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2095&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    these don&apos;t seem like equivalent states. CONNECTEDREADONLY also needs SASL&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2096&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2096&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    this should be done in the session verification of at the ServerCnxn not here.&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2097&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2097&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    this should also be done much closer to the server connection. probably in ZooKeeperServer.processPacket(). that is where the auth processing is being done anyway.&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2098&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2098&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    the requireClientAuthScheme is general functionality that belongs here, but otherwise there is too much SASL code here. this logic should be moved into another class, perhaps SASLServerCallbackHandler, so that we are just hooking into ServerCnxnFactory.&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2099&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2099&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    i don&apos;t think we should be passing the SASL stuff through ServerCnxnFactory so non-opaquely. the configuration will set zookeeper.xxxx system properties from the config file and the SASL handler can grab them there.&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerConfig.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2100&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2100&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    these are properties used by a specific auth provider, we shouldn&apos;t have them exposed in a general class.&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerConfig.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2101&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2101&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    sasl should be able to figure out the renewtime based on the token since the token comes with an expiration. right?&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2093&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2093&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    is there really no checking that we can do here?&lt;/p&gt;



&lt;p&gt;src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1059/#comment2102&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/#comment2102&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    this property is too specific to be exposed here.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Benjamin&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-07-09 19:51:29, Eugene Koontz wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1059/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-09 19:51:29)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for zookeeper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Support Kerberos authentication of clients.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-938&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/ClientCnxn.java 87477df &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/ClientCnxnSocketNIO.java d0e74fa &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/LoginThread.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/Watcher.java e72105c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/ZooDefs.java f77ac20 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/ZooKeeper.java f2ab4a6 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/client/ZooKeeperSaslClient.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java b690817 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java bab8998 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/NIOServerCnxnFactory.java e7e1846 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java c6ab5dd &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/NettyServerCnxnFactory.java deb1e7a &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/Request.java 80d2b99 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/SaslServerCallbackHandler.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerCnxn.java 6d69073 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java 72af158 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/ServerConfig.java ec710cd &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/ZooKeeperSaslServer.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/ZooKeeperServerMain.java 52d3820 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/auth/DigestLoginModule.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java c6d9c09 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerMain.java 969a482 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/java/test/org/apache/zookeeper/test/SaslAuthTest.java PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;src/zookeeper.jute 34eac78 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1059/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1059/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Passes all unit tests on my local machine. &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Also tested in a kerberos-enabled 3-node quorum in an HBase cluster which was then loaded with data using the Faulkner load test (&lt;a href=&quot;https://github.com/ekoontz/hbase-ec2/blob/4a3a1a11810ed6acd96593e2818cbd7d2ffc8950/faulkner/faulkner.rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekoontz/hbase-ec2/blob/4a3a1a11810ed6acd96593e2818cbd7d2ffc8950/faulkner/faulkner.rb&lt;/a&gt;)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Eugene&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13070115" author="breed" created="Sun, 24 Jul 2011 07:36:25 +0100"  >&lt;p&gt;are you going to move the sasl processing out of finalrp and into or close to ServerCnxn?&lt;/p&gt;</comment>
                            <comment id="13070206" author="ekoontz" created="Sun, 24 Jul 2011 17:27:34 +0100"  >&lt;p&gt;Hi Ben, yes, I am moving SASL processing out of FinalRequestProcessor. I&apos;m planning to post a new patch soon which will be much improved, thanks to your review.&lt;/p&gt;</comment>
                            <comment id="13072575" author="mahadev" created="Thu, 28 Jul 2011 23:30:58 +0100"  >&lt;p&gt;Eugene,&lt;br/&gt;
 Any update on the patch? &lt;/p&gt;</comment>
                            <comment id="13073106" author="ekoontz" created="Sat, 30 Jul 2011 03:12:09 +0100"  >&lt;p&gt;Hi Mahadev, I am uploading my latest patch now, but am also doing integration tests with HBase. If those turn up any problems I will refresh the patch again.&lt;/p&gt;</comment>
                            <comment id="13073115" author="ekoontz" created="Sat, 30 Jul 2011 04:04:21 +0100"  >&lt;p&gt;-Server-side SASL negotiation with client moved from &lt;br/&gt;
 FinalRequestProcessor to ZooKeeperServer&lt;br/&gt;
 (Thanks to Benjamin Reed for recommending this in &lt;br/&gt;
  his review).&lt;/p&gt;

&lt;p&gt;-Removed SASL-specific Zookeeper client states:&lt;br/&gt;
   Back to using the existing set of client states &lt;/p&gt;
   {CONNECTING, ASSOCIATING, etc}
&lt;p&gt;   (Thanks to Benjamin Reed for recommending this in &lt;br/&gt;
    his review).&lt;/p&gt;

&lt;p&gt;-Moved SASL-related functionality out of ServerCnxnFactory.&lt;br/&gt;
   (Thanks to Benjamin Reed for recommending this in &lt;br/&gt;
    his review).&lt;/p&gt;

&lt;p&gt;-Removed requireClientAuthScheme: instead using &lt;br/&gt;
   zookeeper.maintain_connection_despite_sasl_failure property to &lt;br/&gt;
   accomplish the same thing (if maintain_connection_despite_sasl_failure=false, &lt;br/&gt;
   then server will shut down client. Benjamin mentioned in his review&lt;br/&gt;
   that requireClientAuthScheme is general functionality and would be&lt;br/&gt;
   appropriate, but I thought that might better be a separate JIRA issue&lt;br/&gt;
   if so.&lt;/p&gt;

&lt;p&gt;-Removed extra added renewJaasLoginInterval parameter to various constructors:&lt;br/&gt;
 instead, using system property-checking at the appropriate points within the&lt;br/&gt;
 relevant SASL- and Kerberos- related classes.&lt;br/&gt;
  (Thanks to Benjamin Reed for recommending this in his review).&lt;/p&gt;

&lt;p&gt;-Kerberos ticket cache renewal fix:&lt;br/&gt;
   Uses the Shell class from Hadoop. The source file was copied from &lt;br/&gt;
   Hadoop core with minor modifications detailed in comments after the&lt;br/&gt;
   Apache license.&lt;/p&gt;

&lt;p&gt;-More robust Kerberos principal parsing:&lt;br/&gt;
   Uses the KerberosName class from Hadoop&apos;s security branch. The source&lt;br/&gt;
   file was copied from Hadoop with minor modifications detailed in &lt;br/&gt;
   comments after the Apache license.&lt;/p&gt;

&lt;p&gt;-More flexible Kerberos principal-to-Zookeeper username translation&lt;/p&gt;

&lt;p&gt;    The following system properties are supported:&lt;/p&gt;

&lt;p&gt;     zookeeper.kerberos.removeHostFromPrincipal&lt;br/&gt;
       If this is set to true, then Kerberos principals of the form: &lt;br/&gt;
       user/host@REALM will be converted to user@REALM.&lt;/p&gt;

&lt;p&gt;     zookeeper.kerberos.removeRealmFromPrincipal&lt;br/&gt;
       If this is set to true, then Kerberos principals of the forms:&lt;br/&gt;
       user/host@REALM and user@REALM will be converted to &lt;br/&gt;
       user/host and user respectively.&lt;/p&gt;

&lt;p&gt;      If both removeHostFromPrincipal and removeRealmFromPrincipal are true,&lt;br/&gt;
      then Kerberos principals of the forms: user/host@REALM and user@REALM&lt;br/&gt;
      will both be converted to user.&lt;/p&gt;

&lt;p&gt;     zookeeper.superUser&lt;br/&gt;
      If a value is provided, and Kerberos is used, then the provided value will&lt;br/&gt;
      be used as the superuser. This allows one to use a Kerberos principal such as:&lt;br/&gt;
      &quot;user/zookeeperadmin@REALM&quot; as the Zookeeper super user. The default value &quot;super&quot;&lt;br/&gt;
      will be used otherwise.&lt;/p&gt;

</comment>
                            <comment id="13073122" author="mahadev" created="Sat, 30 Jul 2011 04:30:32 +0100"  >&lt;p&gt;thanks a lot Eugene!&lt;/p&gt;</comment>
                            <comment id="13079520" author="mahadev" created="Thu, 4 Aug 2011 19:32:22 +0100"  >&lt;p&gt;ben,&lt;br/&gt;
 can you please review this patch?&lt;/p&gt;</comment>
                            <comment id="13080545" author="breed" created="Sun, 7 Aug 2011 07:18:01 +0100"  >&lt;p&gt;sorry for being off the grid. last week was not good.&lt;/p&gt;

&lt;p&gt;great job eugene. overall it looks good. two minor cleanup things: 1) since we aren&apos;t pushing sasl through the pipeline, we should remove it from the Request class. 2) in the code you added to ZooKeeperServer can you move that big piece of code in the if clause to a function called processSasl() or something like that?&lt;/p&gt;

&lt;p&gt;KerberosName and Shell use sun.* classes, which cause warnings on the build and may cause problems on non-sun jvms. is there any workarounds? or are those classes exposed through java.* or javax.* classes? we either need to fix or document.&lt;/p&gt;</comment>
                            <comment id="13081852" author="ekoontz" created="Tue, 9 Aug 2011 20:13:57 +0100"  >&lt;p&gt;Address Benjamin Reed&apos;s feedback:&lt;/p&gt;

&lt;p&gt;-Remove OpCode.sasl from Request.java since it&apos;s not needed there.&lt;br/&gt;
-in ZooKeeperServer, move SASL-related server-side code into separate method processSasl()&lt;/p&gt;</comment>
                            <comment id="13081866" author="ekoontz" created="Tue, 9 Aug 2011 20:34:33 +0100"  >&lt;p&gt;Hi Benjamin, &lt;br/&gt;
Thanks a lot for your feedback! I addressed the two cleanup issues in a new patch. &lt;/p&gt;

&lt;p&gt;Regarding the sun.* classes, these are only needed to determine the default Kerberos realm from the system&apos;s Kerberos conf file (usually in /etc/krb5.conf). &lt;/p&gt;

&lt;p&gt;I think we can use the java.security.* functionality to replace sun.security.*:  &lt;br/&gt;
 &lt;a href=&quot;http://download.oracle.com/javase/1.4.2/docs/guide/security/jgss/tutorials/KerberosReq.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/javase/1.4.2/docs/guide/security/jgss/tutorials/KerberosReq.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will try this out and update the patch if this will work.&lt;/p&gt;</comment>
                            <comment id="13081939" author="ekoontz" created="Tue, 9 Aug 2011 22:29:53 +0100"  >&lt;p&gt;Hi Benjamin,&lt;/p&gt;

&lt;p&gt;Unfortunately I couldn&apos;t find support for obtaining the default Kerberos realm in java.security or javax.security. &lt;/p&gt;

&lt;p&gt;(In fact, it seems that javax.security uses sun.security internally, for example: &lt;a href=&quot;http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/security/javax/security/auth/kerberos/KerberosPrincipal.java.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/security/javax/security/auth/kerberos/KerberosPrincipal.java.htm&lt;/a&gt;.&lt;br/&gt;
  (see &quot;import sun.security.krb5.Asn1Exception;&quot; in the source code)).&lt;/p&gt;

&lt;p&gt;So I don&apos;t see any way around using the sun.* classes.&lt;/p&gt;

&lt;p&gt;-Eugene&lt;/p&gt;</comment>
                            <comment id="13082921" author="hadoopqa" created="Thu, 11 Aug 2011 06:10:31 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12489872/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12489872/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1152141.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/446//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/446//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/446//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/446//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/446//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/446//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13082941" author="mahadev" created="Thu, 11 Aug 2011 06:50:28 +0100"  >&lt;p&gt;Eugene,&lt;br/&gt;
 Can you please take a look at the test failures? Looks like the SASL tests (added in the patch) are failing.&lt;/p&gt;</comment>
                            <comment id="13083449" author="ekoontz" created="Thu, 11 Aug 2011 21:01:30 +0100"  >&lt;p&gt;-fix FindBugs warning related to constructor starting a thread.&lt;br/&gt;
-don&apos;t throw IllegalArgumentException if /etc/krb5.conf not found (such as on Apache&apos;s Jenkins server).&lt;/p&gt;</comment>
                            <comment id="13086086" author="hadoopqa" created="Wed, 17 Aug 2011 03:21:07 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12490160/ZOOKEEPER-938.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12490160/ZOOKEEPER-938.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1157698.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/463//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/463//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/463//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/463//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/463//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/463//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13086490" author="breed" created="Wed, 17 Aug 2011 19:13:28 +0100"  >&lt;p&gt;+1 looks good Eugene! thanx for sticking with this patch!&lt;/p&gt;</comment>
                            <comment id="13087335" author="mahadev" created="Thu, 18 Aug 2011 23:05:54 +0100"  >&lt;p&gt;I just pushed this to trunk!&lt;/p&gt;</comment>
                            <comment id="13087336" author="mahadev" created="Thu, 18 Aug 2011 23:06:12 +0100"  >&lt;p&gt;Forgot to mention, Thanks a lot Eugene!&lt;/p&gt;</comment>
                            <comment id="13087641" author="hudson" created="Fri, 19 Aug 2011 11:54:07 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1270 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1270/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1270/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;del&gt;ZOOKEEPER-938&lt;/del&gt;&lt;/a&gt;. Support Kerberos authentication of clients. (Eugene Koontz via mahadev)&lt;/p&gt;

&lt;p&gt;mahadev : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159432&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1159432&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ZooDefs.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/SaslAuthTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/SaslAuthFailTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/auth/SaslServerCallbackHandler.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NIOServerCnxnFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/Watcher.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/auth/SASLAuthenticationProvider.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZooKeeperSaslServer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/auth/DigestLoginModule.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZooKeeperServer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/zookeeper.jute&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/auth/KerberosName.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/Shell.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NettyServerCnxnFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/CnxManagerTest.java.orig&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/client/ZooKeeperSaslClient.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ServerCnxnFactory.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/Login.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12503562">ZOOKEEPER-1045</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12512386">ZOOKEEPER-1112</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12548598">ZOOKEEPER-1437</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12477349">ZOOKEEPER-896</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12546702">ZOOKEEPER-1420</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12524585">HIVE-2467</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12710843">ZOOKEEPER-1920</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12527958">ZOOKEEPER-1236</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12407018">HADOOP-4487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12546706">ZOOKEEPER-1422</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12461439">HBASE-2418</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12415422">ZOOKEEPER-329</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12474775">HBASE-3025</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12539563">ZOOKEEPER-1373</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12522975">ZOOKEEPER-1181</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12523137">ZOOKEEPER-1185</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12523731">ZOOKEEPER-1195</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12599571">GIRAPH-265</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12556578">ZOOKEEPER-1469</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12460284" name="NIOServerCnxn.patch" size="9171" author="ekoontz" created="Tue, 23 Nov 2010 17:40:33 +0000"/>
                            <attachment id="12490160" name="ZOOKEEPER-938.patch" size="116199" author="ekoontz" created="Thu, 11 Aug 2011 21:01:30 +0100"/>
                            <attachment id="12489872" name="ZOOKEEPER-938.patch" size="115309" author="ekoontz" created="Tue, 9 Aug 2011 20:13:57 +0100"/>
                            <attachment id="12488281" name="ZOOKEEPER-938.patch" size="115681" author="ekoontz" created="Sat, 30 Jul 2011 04:04:20 +0100"/>
                            <attachment id="12485860" name="ZOOKEEPER-938.patch" size="83788" author="ekoontz" created="Sat, 9 Jul 2011 16:43:51 +0100"/>
                            <attachment id="12485628" name="ZOOKEEPER-938.patch" size="82978" author="ekoontz" created="Thu, 7 Jul 2011 19:13:36 +0100"/>
                            <attachment id="12485625" name="ZOOKEEPER-938.patch" size="82902" author="ekoontz" created="Thu, 7 Jul 2011 19:08:30 +0100"/>
                            <attachment id="12485615" name="ZOOKEEPER-938.patch" size="82890" author="ekoontz" created="Thu, 7 Jul 2011 17:19:38 +0100"/>
                            <attachment id="12485475" name="ZOOKEEPER-938.patch" size="83062" author="ekoontz" created="Wed, 6 Jul 2011 19:27:39 +0100"/>
                            <attachment id="12485457" name="ZOOKEEPER-938.patch" size="83844" author="ekoontz" created="Wed, 6 Jul 2011 18:43:01 +0100"/>
                            <attachment id="12485455" name="ZOOKEEPER-938.patch" size="84844" author="ekoontz" created="Wed, 6 Jul 2011 18:23:59 +0100"/>
                            <attachment id="12483336" name="ZOOKEEPER-938.patch" size="105908" author="ekoontz" created="Tue, 21 Jun 2011 21:07:08 +0100"/>
                            <attachment id="12483226" name="ZOOKEEPER-938.patch" size="107709" author="ekoontz" created="Tue, 21 Jun 2011 01:46:09 +0100"/>
                            <attachment id="12474845" name="ZOOKEEPER-938.patch" size="97832" author="ekoontz" created="Tue, 29 Mar 2011 03:16:37 +0100"/>
                            <attachment id="12474671" name="ZOOKEEPER-938.patch" size="97435" author="ekoontz" created="Fri, 25 Mar 2011 22:52:52 +0000"/>
                            <attachment id="12467937" name="jaas.conf" size="351" author="ekoontz" created="Mon, 10 Jan 2011 23:39:39 +0000"/>
                            <attachment id="12467920" name="sasl.patch" size="43303" author="ekoontz" created="Mon, 10 Jan 2011 20:57:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Jan 2011 21:50:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47543</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzx8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-938&quot; title=&quot;Support Kerberos authentication of clients.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-938&quot;&gt;&lt;strike&gt;ZOOKEEPER-938&lt;/strike&gt;&lt;/a&gt; : support Kerberos authentication via SASL.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>