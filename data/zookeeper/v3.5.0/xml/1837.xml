<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1837/ZOOKEEPER-1837.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1837] Fix JMXEnv checks (potential race conditions)</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1837</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;The following failures in ZooKeeper-3.4-WinVS2008_java and ZooKeeper-trunk-WinVS2008_java require fixing:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.failNotEquals(Assert.java:283)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.assertEquals(Assert.java:64)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.assertEquals(Assert.java:195)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.assertEquals(Assert.java:201)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.JMXEnv.ensureOnly(JMXEnv.java:138)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.ClientBase.startServer(ClientBase.java:417)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.ZooKeeperQuotaTest.testQuota(ZooKeeperQuotaTest.java:80)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.failNotEquals(Assert.java:283)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.assertEquals(Assert.java:64)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.assertEquals(Assert.java:195)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.Assert.assertEquals(Assert.java:201)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.JMXEnv.ensureOnly(JMXEnv.java:138)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.ClientBase.startServer(ClientBase.java:417)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.ZooKeeperQuotaTest.testQuota(ZooKeeperQuotaTest.java:80)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;br/&gt;
    [&lt;/p&gt;

&lt;p&gt;junit.framework.AssertionFailedError: expected &lt;span class=&quot;error&quot;&gt;&amp;#91;0x142e5f027b50001&amp;#93;&lt;/span&gt; expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;&lt;br/&gt;
	at org.apache.zookeeper.test.JMXEnv.ensureAll(JMXEnv.java:115)&lt;br/&gt;
	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:197)&lt;br/&gt;
	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:171)&lt;br/&gt;
	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:156)&lt;br/&gt;
	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:149)&lt;br/&gt;
	at org.apache.zookeeper.ZooKeeperTest.testDeleteRecursive(ZooKeeperTest.java:45)&lt;br/&gt;
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 8&lt;/p&gt;</environment>
        <key id="12684421">ZOOKEEPER-1837</key>
            <summary>Fix JMXEnv checks (potential race conditions)</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12683243">ZOOKEEPER-1833</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abranzyck">Germ&#225;n Blanco</assignee>
                                    <reporter username="abranzyck">Germ&#225;n Blanco</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Dec 2013 07:40:26 +0000</created>
                <updated>Thu, 13 Mar 2014 18:16:53 +0000</updated>
                            <resolved>Thu, 16 Jan 2014 23:01:11 +0000</resolved>
                                    <version>3.4.5</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13847435" author="abranzyck" created="Fri, 13 Dec 2013 12:10:12 +0000"  >&lt;p&gt;This change is to:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;only verify that a session is added if the session is not closed&lt;/li&gt;
	&lt;li&gt;after a shutdown, if the server is still there, then wait a bit and try to check again.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13847447" author="fpj" created="Fri, 13 Dec 2013 12:37:42 +0000"  >&lt;p&gt;The ensureAll changes seems fine to me, but the ensureOnly is a bit odd. It is always tricky to insert sleep delays because we never know how much time is enough. What if we instead check in a loop and exit the loop once there is not leftover? If we can&apos;t get the check to succeed after a number of attempts, then we fail.&lt;/p&gt;</comment>
                            <comment id="13847452" author="hadoopqa" created="Fri, 13 Dec 2013 12:44:43 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618583/ZOOKEEPER-1837.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618583/ZOOKEEPER-1837.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1550213.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1834//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1834//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1834//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1834//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1834//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1834//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13848255" author="abranzyck" created="Sat, 14 Dec 2013 06:46:39 +0000"  >&lt;p&gt;With a loop as suggested.&lt;/p&gt;</comment>
                            <comment id="13848268" author="hadoopqa" created="Sat, 14 Dec 2013 07:24:03 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618758/ZOOKEEPER-1837.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618758/ZOOKEEPER-1837.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1550213.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1836//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1836//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1836//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1836//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1836//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1836//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13848327" author="fpj" created="Sat, 14 Dec 2013 11:24:03 +0000"  >&lt;p&gt;+1, thanks, Germ&#225;n! Committed revision 1550923.&lt;/p&gt;</comment>
                            <comment id="13848339" author="abranzyck" created="Sat, 14 Dec 2013 12:04:59 +0000"  >&lt;p&gt;Thanks to you. If this works, then it might make sense to put it in trunk also, right? It is the same patch for both.&lt;/p&gt;</comment>
                            <comment id="13867655" author="fpj" created="Fri, 10 Jan 2014 09:28:48 +0000"  >&lt;p&gt;I just noticed that you&apos;ve left a comment here for us to check it in to trunk. If the jira work is not complete, you need to reopen it. One confusing bit is that this is a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1833&quot; title=&quot;fix windows build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1833&quot;&gt;ZOOKEEPER-1833&lt;/a&gt;, which focuses on the 3.4 branch. I&apos;ll check this one in to trunk so that we get out of the way.&lt;/p&gt;</comment>
                            <comment id="13869548" author="abranzyck" created="Mon, 13 Jan 2014 13:48:34 +0000"  >&lt;p&gt;The same kind of problem (delay in the update of JMX environment) occurs for ensureAll and potentially ensureNone.&lt;/p&gt;</comment>
                            <comment id="13869697" author="abranzyck" created="Mon, 13 Jan 2014 17:05:09 +0000"  >&lt;p&gt;adding retries for 5 seconds in ensureAll and ensureNone (as well as in ensureOnly, which calls ensureAll and already had the retries)&lt;/p&gt;</comment>
                            <comment id="13869704" author="hadoopqa" created="Mon, 13 Jan 2014 17:12:04 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622660/ZOOKEEPER-1837-b3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622660/ZOOKEEPER-1837-b3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1556976.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1878//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1878//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13869738" author="hadoopqa" created="Mon, 13 Jan 2014 17:49:48 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622661/ZOOKEEPER-1837.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622661/ZOOKEEPER-1837.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1556976.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1879//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1879//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1879//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1879//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1879//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1879//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13869929" author="hadoopqa" created="Mon, 13 Jan 2014 20:24:19 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12622685/ZOOKEEPER-1837.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12622685/ZOOKEEPER-1837.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1556976.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1880//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1880//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1880//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1880//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1880//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1880//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13871258" author="fpj" created="Tue, 14 Jan 2014 22:00:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abranzyck&quot; class=&quot;user-hover&quot; rel=&quot;abranzyck&quot;&gt;Germ&#225;n Blanco&lt;/a&gt;, did we forget to make the change to ClientBase in the previous patch? Otw, +1.&lt;/p&gt;</comment>
                            <comment id="13871650" author="abranzyck" created="Wed, 15 Jan 2014 05:01:06 +0000"  >&lt;p&gt;Thank you for the review!&lt;br/&gt;
If you mean the change for ClientBase in the patch for branch 3.4, then that was already committed when this JIRA was opened and closed the first time. That is why it is not there in the patch for branch 3.4, but it is there in the patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13871738" author="rakeshr" created="Wed, 15 Jan 2014 06:51:56 +0000"  >&lt;p&gt;Just one comment. Can we break from both the loops when it finds an unexpected bean. Then it can again go to next tries. Also, at the end of the tries it can simply log all the beans if atleast one unexpected exists, this will help in debugging later.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ObjectName bean : beans) {
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bean.toString().contains(name)) {
+        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;didntexpect:&quot;&lt;/span&gt; + name);
+        foundUnexpected = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+        unexpectedName = name + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + bean.toString();
+    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Apart from the this, +1 looks nice to me.&lt;/p&gt;</comment>
                            <comment id="13871843" author="abranzyck" created="Wed, 15 Jan 2014 09:23:50 +0000"  >&lt;p&gt;Thank you for the review and the comments.&lt;br/&gt;
I believe they are covered in this last revision of the patches.&lt;/p&gt;</comment>
                            <comment id="13871866" author="rakeshr" created="Wed, 15 Jan 2014 09:50:02 +0000"  >&lt;p&gt;Please move TestCase.fail after logging, otw logging is unreachable. isn&apos;t it?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            TestCase.fail(unexpectedName);
+            LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;List of all beans follows:&quot;&lt;/span&gt;);
+            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (ObjectName bean : beans) {
+                LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;bean:&quot;&lt;/span&gt; + bean.toString());
+            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13872024" author="abranzyck" created="Wed, 15 Jan 2014 12:57:33 +0000"  >&lt;p&gt;Yeah, it was &lt;b&gt;very&lt;/b&gt; unreachable. Firstly because of my mistake to put TestCase.fail before the log, and on top of that because as far as I can see ensureNone is not used at all.&lt;br/&gt;
But now it is corrected, and if it is used in the future it will hopefully work better.&lt;/p&gt;</comment>
                            <comment id="13872062" author="hadoopqa" created="Wed, 15 Jan 2014 13:34:29 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623133/ZOOKEEPER-1837.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623133/ZOOKEEPER-1837.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1557875.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1887//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1887//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1887//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1887//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1887//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1887//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13872188" author="fpj" created="Wed, 15 Jan 2014 15:35:59 +0000"  >&lt;p&gt;In ensureNone, it looks like we don&apos;t fail when nTry goes over 50. Shouldn&apos;t we fail the test case after too many attempts?&lt;/p&gt;</comment>
                            <comment id="13872243" author="abranzyck" created="Wed, 15 Jan 2014 16:29:12 +0000"  >&lt;p&gt;It fails outside the loop (at least that is the intention).&lt;br/&gt;
In the check after the loop:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        if (foundUnexpected) {
+            LOG.info(&quot;List of all beans follows:&quot;);
+            for (ObjectName bean : beans) {
+                LOG.info(&quot;bean:&quot; + bean.toString());
+            }
+            TestCase.fail(unexpectedName);
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If anything unexpected is found after the 50th try, then TestCase.fail will cause the test case to fail.&lt;br/&gt;
If there is nothing unexpected in one of the loop runs it will exit before reaching the 50th try and not enter that if block.&lt;/p&gt;</comment>
                            <comment id="13872610" author="fpj" created="Wed, 15 Jan 2014 21:21:29 +0000"  >&lt;p&gt;Can&apos;t we have the case that nTry &amp;gt;= 50 and foundUnexpected is false?&lt;/p&gt;</comment>
                            <comment id="13873124" author="abranzyck" created="Thu, 16 Jan 2014 07:39:28 +0000"  >&lt;p&gt;If the condition (nTry &amp;lt; 50) is false, then the loop ends. So nTry will never be above 50.&lt;br/&gt;
The border case is that nTry reaches 50 and by chance in that last run through the loop there is no unexpected beans found. But that case works just as any other value below 50, it means JMX manage to synchronized to the expected state after 5 seconds and no failure needs to be reported.&lt;/p&gt;</comment>
                            <comment id="13873126" author="abranzyck" created="Thu, 16 Jan 2014 07:42:25 +0000"  >&lt;p&gt;I will update the timeouts according to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;&apos;s comment to &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13873535" author="fpj" created="Thu, 16 Jan 2014 16:06:11 +0000"  >&lt;p&gt;Got it, thanks for the clarification. I think 60s sounds like too much, but it is true that we should have it consistent. Please do change according to the comment of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt;.  &lt;/p&gt;</comment>
                            <comment id="13873934" author="hadoopqa" created="Thu, 16 Jan 2014 21:03:26 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623464/ZOOKEEPER-1837.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623464/ZOOKEEPER-1837.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1557875.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1892//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1892//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1892//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1892//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1892//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1892//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13874110" author="fpj" created="Thu, 16 Jan 2014 23:01:11 +0000"  >&lt;p&gt;+1, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abranzyck&quot; class=&quot;user-hover&quot; rel=&quot;abranzyck&quot;&gt;Germ&#225;n Blanco&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Trunk: Committed revision 1558950.&lt;br/&gt;
B3.4: Committed revision 1558951.&lt;/p&gt;</comment>
                            <comment id="13874663" author="hudson" created="Fri, 17 Jan 2014 11:05:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2188 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2188/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2188/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1837&quot; title=&quot;Fix JMXEnv checks (potential race conditions)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1837&quot;&gt;&lt;del&gt;ZOOKEEPER-1837&lt;/del&gt;&lt;/a&gt;. Fix JMXEnv checks (potential race conditions)&lt;br/&gt;
  (Germ&#225;n Blanco via fpj) (fpj: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558950&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1558950&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/ClientBase.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/JMXEnv.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/QuorumUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13875717" author="abranzyck" created="Sat, 18 Jan 2014 18:38:10 +0000"  >&lt;p&gt;Thank you.&lt;br/&gt;
Unfortunately it doesn&apos;t seem to solve the issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;br/&gt;
There are still a number of similar failures, 10 in one of the last runs and 7 in the other.&lt;/p&gt;</comment>
                            <comment id="13876027" author="fpj" created="Sun, 19 Jan 2014 22:22:59 +0000"  >&lt;p&gt;Have we created a new bug that you observed? I&apos;m trying to determine if we need to revert this one.&lt;/p&gt;</comment>
                            <comment id="13876744" author="abranzyck" created="Mon, 20 Jan 2014 19:20:29 +0000"  >&lt;p&gt;As far as I can see there is no new bug.&lt;br/&gt;
The loop in ensureOnly seems to solve a problem. I haven&apos;t found the trace in this JIRA&apos;s description any more.&lt;br/&gt;
The loop in ensureAll doesn&apos;t solve the problem that is occurring right now.&lt;br/&gt;
It seems that ClientBase.createClient fails sporadically, the bean of the client doesn&apos;t get published in JMXEnv (or it is removed before the checking). So this is not covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt; either. &lt;/p&gt;</comment>
                            <comment id="13877124" author="rakeshr" created="Tue, 21 Jan 2014 02:44:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems that ClientBase.createClient fails sporadically, the bean of the client doesn&apos;t get published in JMXEnv (or it is removed before the checking). So this is not covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt; either.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hi German, &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt; description says about the existing client beans, which will take few moments to get reconnected and re-publish their jmx beans during server restarts. Kindly tell me, any specific logic to be included in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt; to handle the new clients jmx beans?&lt;/p&gt;</comment>
                            <comment id="13877150" author="rakeshr" created="Tue, 21 Jan 2014 03:46:18 +0000"  >&lt;p&gt;How about addressing the following case separately using another/new JIRA, rather than clubbing this scenario with &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt;. shall I create new issue?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    [junit] 2014-01-19 09:05:55,714 [myid:] - INFO  [main:ZKTestCase$1@65] - FAILED testLargeNodeData
    [junit] junit.framework.AssertionFailedError: expected [0x143a9be9ce80000] expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;
    [junit] 	at junit.framework.Assert.fail(Assert.java:47)
    [junit] 	at junit.framework.Assert.failNotEquals(Assert.java:283)
    [junit] 	at junit.framework.Assert.assertEquals(Assert.java:64)
    [junit] 	at junit.framework.Assert.assertEquals(Assert.java:195)
    [junit] 	at org.apache.zookeeper.test.JMXEnv.ensureAll(JMXEnv.java:124)
    [junit] 	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:191)
    [junit] 	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:171)
    [junit] 	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:156)
    [junit] 	at org.apache.zookeeper.test.ClientBase.createClient(ClientBase.java:149)
    [junit] 	at org.apache.zookeeper.test.ClientTest.testLargeNodeData(ClientTest.java:533)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13877380" author="abranzyck" created="Tue, 21 Jan 2014 10:54:06 +0000"  >&lt;p&gt;Sorry for the misunderstanding, I just mentioned that it is not covered in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1858&quot; title=&quot;JMX checks - potential race conditions while stopping and starting server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1858&quot;&gt;&lt;del&gt;ZOOKEEPER-1858&lt;/del&gt;&lt;/a&gt; so that it is understood that it is a different error case. The relationship is that this problem is also related with JMXEnv updates and one could think that it was already covered, but it is not.&lt;br/&gt;
I agree that the way to tackle this would be in a new JIRA.&lt;/p&gt;</comment>
                            <comment id="13878583" author="rakeshr" created="Wed, 22 Jan 2014 12:14:46 +0000"  >&lt;p&gt;Raised &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1866&quot; title=&quot;ClientBase#createClient is failing frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1866&quot;&gt;ZOOKEEPER-1866&lt;/a&gt; to discuss more on this failure case.&lt;/p&gt;</comment>
                            <comment id="13878592" author="rakeshr" created="Wed, 22 Jan 2014 12:27:12 +0000"  >&lt;blockquote&gt;
&lt;p&gt;As far as I can see there is no new bug.&lt;br/&gt;
The loop in ensureOnly seems to solve a problem. I haven&apos;t found the trace in this JIRA&apos;s description any more.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As I understood the extra looping which we had checked in, is only giving some grace period and serves like a defensive or safe coding. I agree it is not harming anything.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, I would like to know your opinion about retaining this code. Thanks&lt;/p&gt;</comment>
                            <comment id="13879930" author="fpj" created="Thu, 23 Jan 2014 13:55:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, I think it is ok to keep it because it is not causing any damage afaict. It is disappointing that it didn&apos;t solve the problem, though. Once we find the root cause, we could consider removing those loops if you feel that it is making the code more convoluted.&lt;/p&gt;</comment>
                            <comment id="13880101" author="rakeshr" created="Thu, 23 Jan 2014 17:25:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Once we find the root cause, we could consider removing those loops if you feel that it is making the code more convoluted.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah Flavio, will come back to this after finding the root cause.&lt;/p&gt;</comment>
                            <comment id="13933690" author="fpj" created="Thu, 13 Mar 2014 18:16:53 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623463" name="ZOOKEEPER-1837-b3.4.patch" size="6190" author="abranzyck" created="Thu, 16 Jan 2014 20:25:33 +0000"/>
                            <attachment id="12623131" name="ZOOKEEPER-1837-b3.4.patch" size="6187" author="abranzyck" created="Wed, 15 Jan 2014 12:54:49 +0000"/>
                            <attachment id="12623099" name="ZOOKEEPER-1837-b3.4.patch" size="6187" author="abranzyck" created="Wed, 15 Jan 2014 09:22:31 +0000"/>
                            <attachment id="12622660" name="ZOOKEEPER-1837-b3.4.patch" size="5901" author="abranzyck" created="Mon, 13 Jan 2014 17:05:09 +0000"/>
                            <attachment id="12622658" name="ZOOKEEPER-1837-b3.4.patch" size="5901" author="abranzyck" created="Mon, 13 Jan 2014 17:01:32 +0000"/>
                            <attachment id="12623464" name="ZOOKEEPER-1837.patch" size="6473" author="abranzyck" created="Thu, 16 Jan 2014 20:26:06 +0000"/>
                            <attachment id="12623133" name="ZOOKEEPER-1837.patch" size="6470" author="abranzyck" created="Wed, 15 Jan 2014 12:57:33 +0000"/>
                            <attachment id="12623100" name="ZOOKEEPER-1837.patch" size="6470" author="abranzyck" created="Wed, 15 Jan 2014 09:23:50 +0000"/>
                            <attachment id="12622685" name="ZOOKEEPER-1837.patch" size="6184" author="abranzyck" created="Mon, 13 Jan 2014 19:41:22 +0000"/>
                            <attachment id="12622661" name="ZOOKEEPER-1837.patch" size="6184" author="abranzyck" created="Mon, 13 Jan 2014 17:15:53 +0000"/>
                            <attachment id="12618758" name="ZOOKEEPER-1837.patch" size="2016" author="abranzyck" created="Sat, 14 Dec 2013 06:46:39 +0000"/>
                            <attachment id="12618583" name="ZOOKEEPER-1837.patch" size="1984" author="abranzyck" created="Fri, 13 Dec 2013 12:10:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 13 Dec 2013 12:37:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzki27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>