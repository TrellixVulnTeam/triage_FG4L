<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:48:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-961/ZOOKEEPER-961.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-961] Watch recovery after disconnection when connection string contains a prefix</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-961</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Let&apos;s say you&apos;re using connection string &quot;127.0.0.1:2182/foo&quot;.&lt;br/&gt;
1) put a childrenchanged watch on relative / (that is, on absolute path /foo)&lt;br/&gt;
2) stop the zk server&lt;br/&gt;
3) start the zk server&lt;br/&gt;
4) at this point, the client recovers the connection, and should have put back a watch on relative path /, but instead the client puts a watch on the &lt;b&gt;absolute&lt;/b&gt; path /&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if some other client adds or removes a node under /foo, nothing will happen&lt;/li&gt;
	&lt;li&gt;if some other client adds or removes a node under /, then you will get an error from the zk client library (string operation error)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Windows 32 bits&lt;/p&gt;</environment>
        <key id="12493765">ZOOKEEPER-961</key>
            <summary>Watch recovery after disconnection when connection string contains a prefix</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mspycher">Matthias Spycher</assignee>
                                    <reporter username="pm47">pmpm47</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Dec 2010 16:07:16 +0000</created>
                <updated>Wed, 23 Nov 2011 19:22:02 +0000</updated>
                            <resolved>Wed, 14 Sep 2011 06:51:47 +0100</resolved>
                                    <version>3.3.1</version>
                                    <fixVersion>3.3.4</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>java client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12973887" author="thkoch" created="Tue, 21 Dec 2010 20:59:57 +0000"  >&lt;p&gt;I already proposed, that the chroot shouldn&apos;t be an attribute of the ClientCnxn class. Fixing this bug would be a good occasion to do this change.&lt;/p&gt;</comment>
                            <comment id="12976901" author="thkoch" created="Mon, 3 Jan 2011 19:32:43 +0000"  >&lt;p&gt;This preliminary file for now only adds a test and verifies, that the bug is indeed present as described.&lt;/p&gt;</comment>
                            <comment id="12976923" author="hadoopqa" created="Mon, 3 Jan 2011 19:59:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12467353/ZOOKEEPER-961.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12467353/ZOOKEEPER-961.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1053497.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/80//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/80//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/80//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/80//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/80//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/80//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12982863" author="hadoopqa" created="Mon, 17 Jan 2011 21:09:31 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12467353/ZOOKEEPER-961.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12467353/ZOOKEEPER-961.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1055924.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/89//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/89//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/89//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/89//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/89//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/89//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12992742" author="mahadev" created="Wed, 9 Feb 2011 22:14:12 +0000"  >&lt;p&gt;thomas, thanks for providing the patch. The test verifies that the problem exists. Do you have a patch for fix this? &lt;/p&gt;</comment>
                            <comment id="12992743" author="mahadev" created="Wed, 9 Feb 2011 22:15:56 +0000"  >&lt;p&gt;actually this might be a good candidate for 3.3 as well. This would be critical issue for folks using chroot in zookeeper. I am marking it for 3.3.3 and 3.4 and will see if we can get it in 3.3.3.&lt;/p&gt;</comment>
                            <comment id="12992746" author="mahadev" created="Wed, 9 Feb 2011 22:18:28 +0000"  >&lt;p&gt;cancellling patch, since it does not include the fix as of yet.&lt;/p&gt;</comment>
                            <comment id="12993093" author="thkoch" created="Thu, 10 Feb 2011 15:28:15 +0000"  >&lt;p&gt;I haven&apos;t done a patch yet since I wanted to do it on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-911&quot; title=&quot;move operations from methods to individual classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-911&quot;&gt;ZOOKEEPER-911&lt;/a&gt;. A patch for 3.3.x would probably be different then what I&apos;d prefer for 3.4.&lt;br/&gt;
In 3.4 I want to share one ClientCnxn over different client code with probably different chroots. Thus even if there are different things running in one JVM that needs different chroots, there would still be only one tcp connection.&lt;br/&gt;
So I&apos;d prefer to store the chroot alongside every watch. The memory consumption shouldn&apos;t that much, since it&apos;s the same chroot String instance everytime.&lt;br/&gt;
If you agree with this approach, I could provide a patch for 3.3 and 3.4 (on top of ZK-911).&lt;/p&gt;</comment>
                            <comment id="13049623" author="mahadev" created="Wed, 15 Jun 2011 06:57:09 +0100"  >&lt;p&gt;not a blocker. Moving it out of 3.4 release.&lt;/p&gt;</comment>
                            <comment id="13101344" author="breed" created="Fri, 9 Sep 2011 18:13:19 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-911&quot; title=&quot;move operations from methods to individual classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-911&quot;&gt;ZOOKEEPER-911&lt;/a&gt; isn&apos;t going to make it into 3.4.0, so we need to get this patch committed without it. are you going to be able to make the change thomas? or do you want me to submit something?&lt;/p&gt;</comment>
                            <comment id="13102782" author="mspycher" created="Mon, 12 Sep 2011 17:45:13 +0100"  >&lt;p&gt;Attachment 961b contains a patch and new test that fixes this issue.&lt;br/&gt;
Note that ClientCnxn.java also has a minor change that moves the check for &apos;closing&apos; in run() after the sleep that was previously part of the startConnect() method.&lt;/p&gt;</comment>
                            <comment id="13102789" author="mahadev" created="Mon, 12 Sep 2011 17:49:03 +0100"  >&lt;p&gt;@Matthias,&lt;/p&gt;

&lt;p&gt;Thanks for the patch. Ill take a look by EOD today.&lt;/p&gt;</comment>
                            <comment id="13102791" author="mahadev" created="Mon, 12 Sep 2011 17:49:40 +0100"  >&lt;p&gt;@Matthias,&lt;br/&gt;
 Do you have a aptch for 3.3 branch as well? Or does the trunk patch apply?&lt;/p&gt;</comment>
                            <comment id="13102793" author="mspycher" created="Mon, 12 Sep 2011 17:51:58 +0100"  >&lt;p&gt;Reattached 961b with license granted to ASF.&lt;/p&gt;</comment>
                            <comment id="13102794" author="hadoopqa" created="Mon, 12 Sep 2011 17:52:19 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12467353/ZOOKEEPER-961.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12467353/ZOOKEEPER-961.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1166970.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/525//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/525//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13102796" author="mspycher" created="Mon, 12 Sep 2011 17:52:46 +0100"  >&lt;p&gt;Patch should work for both 3.3. and trunk.&lt;/p&gt;</comment>
                            <comment id="13102820" author="hadoopqa" created="Mon, 12 Sep 2011 18:24:46 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12494062/ZOOKEEPER-961b.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12494062/ZOOKEEPER-961b.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1166970.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/526//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/526//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/526//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/526//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/526//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/526//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13102834" author="thkoch" created="Mon, 12 Sep 2011 18:36:23 +0100"  >&lt;p&gt;Hi Matthias,&lt;/p&gt;

&lt;p&gt;please be so kind to assign issues to yourself if you work on them. I also spent several hours now for a patch.&lt;/p&gt;</comment>
                            <comment id="13102870" author="thkoch" created="Mon, 12 Sep 2011 19:09:32 +0100"  >&lt;p&gt;This patch is one I had still around and updated it against trunk.&lt;br/&gt;
It fixes the watch recovery issue and by doing so decouples the circular dependency between ZooKeeper and ClientCnxn &lt;/p&gt;</comment>
                            <comment id="13102877" author="jiraposter@reviews.apache.org" created="Mon, 12 Sep 2011 19:17:09 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1809/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1809/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for zookeeper.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;chroot is not a property of the ClientCnxn anymore but of the ZooKeeper class&lt;/li&gt;
	&lt;li&gt;ClientCnxn has no reference to ZooKeeper anymore&lt;/li&gt;
	&lt;li&gt;The WatchManager stores a reference to the chroot String with every watcher. It&apos;s not that much overhead since it&apos;s the same String instance all the time. The idea is, to prepare for additional patches that make it possible to use the same ClientCnxn with different ZooKeeper client instances that have different chroots.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-961&quot; title=&quot;Watch recovery after disconnection when connection string contains a prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-961&quot;&gt;&lt;del&gt;ZOOKEEPER-961&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-961&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-961&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/java/main/org/apache/zookeeper/ClientCnxn.java 78b2eb2 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ClientWatchManager.java d56374d &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooKeeper.java e82eaa0 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/WatchManager.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/WatchRegistration.java PRE-CREATION &lt;br/&gt;
  src/java/test/org/apache/zookeeper/TestableZooKeeper.java f8344b6 &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/WatcherTest.java 90ec513 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1809/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1809/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;
</comment>
                            <comment id="13102890" author="hadoopqa" created="Mon, 12 Sep 2011 19:32:27 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12494089/ZOOKEEPER-961.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12494089/ZOOKEEPER-961.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1166970.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/528//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/528//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/528//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/528//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/528//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/528//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13102960" author="thkoch" created="Mon, 12 Sep 2011 20:44:26 +0100"  >&lt;p&gt;my last patch failed grandios and I won&apos;t be able to work on this again until wednesday, so unassigning me&lt;/p&gt;</comment>
                            <comment id="13103148" author="mspycher" created="Mon, 12 Sep 2011 23:45:02 +0100"  >&lt;p&gt;Sorry Thomas, didn&apos;t mean to step on anyone&apos;s toes.&lt;br/&gt;
I happened to be working on this locally last week, and later discovered this Jira entry.&lt;br/&gt;
Also, I still think your refactoring/cleanup is worthwhile.&lt;/p&gt;</comment>
                            <comment id="13104052" author="mahadev" created="Tue, 13 Sep 2011 23:40:26 +0100"  >&lt;p&gt;Reuploading Matt&apos;s patch for hudson CI.&lt;/p&gt;</comment>
                            <comment id="13104058" author="mahadev" created="Tue, 13 Sep 2011 23:47:54 +0100"  >&lt;p&gt;Matthias,&lt;br/&gt;
 Looks like the patch doesnt apply to 3.3 branch. Can you please create a patch for that? thanks&lt;/p&gt;</comment>
                            <comment id="13104066" author="hadoopqa" created="Wed, 14 Sep 2011 00:06:07 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12494339/ZOOKEEPER-961b.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12494339/ZOOKEEPER-961b.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1170365.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/530//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/530//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/530//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/530//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/530//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/530//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13104113" author="mspycher" created="Wed, 14 Sep 2011 01:43:25 +0100"  >&lt;p&gt;This attachment is intended for branch 3.3.&lt;br/&gt;
It prepends the chroot (if any) for all watches in SendThread.primeConnection(...).&lt;br/&gt;
Also note that the check for closing is done in SendThread.startConnect() after the sleep. We still have a potential race between close/connecting, but it&apos;s an improvement.&lt;/p&gt;</comment>
                            <comment id="13104121" author="hadoopqa" created="Wed, 14 Sep 2011 01:52:23 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12494355/ZOOKEEPER-961.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12494355/ZOOKEEPER-961.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1170365.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/533//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/533//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13104268" author="mahadev" created="Wed, 14 Sep 2011 06:39:03 +0100"  >&lt;p&gt;+1 looks good to me.&lt;/p&gt;</comment>
                            <comment id="13104273" author="mahadev" created="Wed, 14 Sep 2011 06:51:47 +0100"  >&lt;p&gt;I just pushed this to 3.3 and trunk. Thanks Matthias!&lt;/p&gt;</comment>
                            <comment id="13104278" author="mahadev" created="Wed, 14 Sep 2011 06:58:16 +0100"  >&lt;p&gt;@Thomas &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thkoch&quot; class=&quot;user-hover&quot; rel=&quot;thkoch&quot;&gt;Thomas Koch&lt;/a&gt; ,&lt;br/&gt;
  I think your patch attachment: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12494089/ZOOKEEPER-961.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12494089/ZOOKEEPER-961.patch&lt;/a&gt; is definitely worth going into 3.5.0. I like the way you have cleaned up the interaction between ClientCnxn and ZooKeeper. Would you mind filing a seperate jira for that? I&apos;d be happy to review and commit it into trunk.&lt;/p&gt;</comment>
                            <comment id="13104542" author="fournc" created="Wed, 14 Sep 2011 15:52:16 +0100"  >&lt;p&gt;Why is there a change to the isConnected logic that came in with this patch? Specifically, why on line 967 do we now have:&lt;br/&gt;
 if (closing || !state.isAlive()) &lt;/p&gt;
{
                            break;
                        }


&lt;p&gt;? This seems unrelated to the fix.&lt;/p&gt;</comment>
                            <comment id="13104594" author="mspycher" created="Wed, 14 Sep 2011 16:55:14 +0100"  >&lt;p&gt;Agreed, this line isn&apos;t related to the fix. It slipped in - I should probably have separated the changes into two separate patches.&lt;br/&gt;
It has to do with honoring the close() as early as possible. Note that if state.isAlive() returns false, the while loop ends, so we shouldn&apos;t issue warnings about attempting to reconnect. I don&apos;t see how it changes the isConnected logic. My assumption here is that we shouldn&apos;t allow a transition from CLOSE or AUTH_FAILED back to CONNECTING.&lt;/p&gt;</comment>
                            <comment id="13104754" author="fournc" created="Wed, 14 Sep 2011 19:30:16 +0100"  >&lt;p&gt;It definitely shouldn&apos;t be part of this fix, and deserves a separate checkin (and testing). Mahadev, how do you want to handle this?&lt;/p&gt;</comment>
                            <comment id="13104938" author="jiraposter@reviews.apache.org" created="Wed, 14 Sep 2011 23:18:14 +0100"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1809/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1809/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-09-14 22:16:59.743604)&lt;/p&gt;


&lt;p&gt;Review request for zookeeper.&lt;/p&gt;


&lt;p&gt;Summary (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;chroot is not a property of the ClientCnxn anymore but of the ZooKeeper class&lt;/li&gt;
	&lt;li&gt;ClientCnxn has no reference to ZooKeeper anymore&lt;/li&gt;
	&lt;li&gt;The WatchManager stores a reference to the chroot String with every watcher. It&apos;s not that much overhead since it&apos;s the same String instance all the time. The idea is, to prepare for additional patches that make it possible to use the same ClientCnxn with different ZooKeeper client instances that have different chroots.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-961&quot; title=&quot;Watch recovery after disconnection when connection string contains a prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-961&quot;&gt;&lt;del&gt;ZOOKEEPER-961&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-961&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-961&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  src/java/main/org/apache/zookeeper/ClientCnxn.java 78b2eb2 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ClientWatchManager.java d56374d &lt;br/&gt;
  src/java/main/org/apache/zookeeper/ZooKeeper.java e82eaa0 &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/WatchManager.java PRE-CREATION &lt;br/&gt;
  src/java/main/org/apache/zookeeper/client/WatchRegistration.java PRE-CREATION &lt;br/&gt;
  src/java/test/org/apache/zookeeper/TestableZooKeeper.java f8344b6 &lt;br/&gt;
  src/java/test/org/apache/zookeeper/test/WatcherTest.java 90ec513 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1809/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/1809/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;
</comment>
                            <comment id="13105266" author="hudson" created="Thu, 15 Sep 2011 11:56:35 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1304 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1304/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1304/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-961&quot; title=&quot;Watch recovery after disconnection when connection string contains a prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-961&quot;&gt;&lt;del&gt;ZOOKEEPER-961&lt;/del&gt;&lt;/a&gt;. Watch recovery after disconnection when connection string contains a prefix. (Matthias Spycher via mahadev)&lt;/p&gt;

&lt;p&gt;mahadev : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1170438&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1170438&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/DisconnectedWatcherTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13105422" author="mahadev" created="Thu, 15 Sep 2011 16:20:35 +0100"  >&lt;p&gt;@Camille,&lt;br/&gt;
 Sorry I missed the comment. The change regarding the check seems ok to me. I do agree it should have been a seperate jira, I am ok if you want to pull that change out of 3.4. Let me know.&lt;/p&gt;</comment>
                            <comment id="13105461" author="fournc" created="Thu, 15 Sep 2011 17:15:29 +0100"  >&lt;p&gt;I&apos;ll pull it out, I don&apos;t think it makes any sense and it shouldn&apos;t be in without a test. This includes these pieces:&lt;/p&gt;

&lt;p&gt;        private void startConnect() throws IOException {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if(!isFirstConnect){&lt;/li&gt;
	&lt;li&gt;try 
{
-                    Thread.sleep(r.nextInt(1000));
-                }
&lt;p&gt; catch (InterruptedException e) &lt;/p&gt;
{
-                    LOG.warn(&quot;Unexpected exception&quot;, e);
-                }&lt;/li&gt;
	&lt;li&gt;}&lt;br/&gt;
             state = States.CONNECTING;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             InetSocketAddress addr;&lt;br/&gt;
@@ -937,8 +956,15 @@&lt;br/&gt;
             while (state.isAlive()) {&lt;br/&gt;
                 try {&lt;br/&gt;
                     if (!clientCnxnSocket.isConnected()) {&lt;br/&gt;
+                        if(!isFirstConnect){&lt;br/&gt;
+                            try &lt;/p&gt;
{
+                                Thread.sleep(r.nextInt(1000));
+                            }
&lt;p&gt; catch (InterruptedException e) &lt;/p&gt;
{
+                                LOG.warn(&quot;Unexpected exception&quot;, e);
+                            }
&lt;p&gt;+                        }&lt;br/&gt;
                         // don&apos;t re-establish connection if we are closing&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (closing) {&lt;br/&gt;
+                        if (closing || !state.isAlive()) 
{
                             break;
                         }
&lt;p&gt;                         startConnect();&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13105513" author="mahadev" created="Thu, 15 Sep 2011 18:22:36 +0100"  >&lt;p&gt;@Camille,&lt;br/&gt;
 I actually like the change in the first part. Makes it cleaner and is also a no op change. What do you think?&lt;/p&gt;</comment>
                            <comment id="13105537" author="fournc" created="Thu, 15 Sep 2011 18:40:45 +0100"  >&lt;p&gt;It&apos;s not a no-op change. In the original code, we check connected, check the closing flag, then wait in the startConnect loop. In the changed version, we check connected, wait, then check closing, then start connect. There&apos;s a meaningful difference in checking closing before we do the wait and attempted connection logic, and waiting, then checking close, then trying to connect.&lt;/p&gt;

&lt;p&gt;So, if we want to wait and then check the close before trying to connect, vs the original way, we can do that, but let&apos;s make it a conscious decision rather than something that actually got pulled in.&lt;/p&gt;

&lt;p&gt;The second part of the change is actually more of a no-op because I&apos;m pretty sure you can&apos;t change the state anywhere but the send thread, so checking it after a sleep on that thread is pointless.&lt;/p&gt;</comment>
                            <comment id="13105538" author="mspycher" created="Thu, 15 Sep 2011 18:41:04 +0100"  >&lt;p&gt;I&apos;m working on a more elaborate fix to prevent races from overwriting CLOSED (at least for 3.4).&lt;br/&gt;
I agree that the first part in the change above is more important than the one line in the exception catch clause, but feel free to move it to another issue.&lt;/p&gt;</comment>
                            <comment id="13105544" author="fournc" created="Thu, 15 Sep 2011 18:44:40 +0100"  >&lt;p&gt;Oh Matthias, can you comment on the condition you&apos;re looking at? Is it something along the lines of&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1159?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1159?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I never got anywhere with that and if you think you have figured out what the problem is it would be great to know.&lt;/p&gt;</comment>
                            <comment id="13105547" author="mspycher" created="Thu, 15 Sep 2011 18:47:32 +0100"  >&lt;p&gt;@Camille, you do see the problem of CLOSED being stomped by startConnect() right?&lt;/p&gt;</comment>
                            <comment id="13105550" author="mspycher" created="Thu, 15 Sep 2011 18:49:24 +0100"  >&lt;p&gt;State transitions in the SendThread are generally not safe. We don&apos;t prevent transitions like CLOSED &amp;gt; CONNECTING or CLOSED &amp;gt; CONNECTED &amp;#8211; that&apos;s what I&apos;m addressing in my next patch.&lt;/p&gt;</comment>
                            <comment id="13105557" author="fournc" created="Thu, 15 Sep 2011 18:55:51 +0100"  >&lt;p&gt;Mmm I see, at least for calls to close/disconnect. &lt;/p&gt;

&lt;p&gt;Let&apos;s wrap all of this up in the fix for that issue. I suspect it will fix 1159, if you want to comment in there. &lt;/p&gt;</comment>
                            <comment id="13107571" author="fournc" created="Mon, 19 Sep 2011 02:06:25 +0100"  >&lt;p&gt;I&apos;m rolling the unrelated changes that were checked in on this ticket from both 3.3.3 and 3.4. Please submit another ticket for those changes, with tests.&lt;/p&gt;</comment>
                            <comment id="13108545" author="hudson" created="Tue, 20 Sep 2011 11:56:43 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1309 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1309/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1309/&lt;/a&gt;)&lt;br/&gt;
    rolling back excess checkin from &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-961&quot; title=&quot;Watch recovery after disconnection when connection string contains a prefix&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-961&quot;&gt;&lt;del&gt;ZOOKEEPER-961&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;camille : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1172406&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1172406&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ClientCnxn.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12471300">ZOOKEEPER-838</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12494355" name="ZOOKEEPER-961.patch" size="15980" author="mspycher" created="Wed, 14 Sep 2011 01:43:25 +0100"/>
                            <attachment id="12494089" name="ZOOKEEPER-961.patch" size="50936" author="thkoch" created="Mon, 12 Sep 2011 19:09:32 +0100"/>
                            <attachment id="12467353" name="ZOOKEEPER-961.patch" size="4681" author="thkoch" created="Mon, 3 Jan 2011 19:32:43 +0000"/>
                            <attachment id="12494339" name="ZOOKEEPER-961b.patch" size="14029" author="mahadev" created="Tue, 13 Sep 2011 23:40:26 +0100"/>
                            <attachment id="12494062" name="ZOOKEEPER-961b.patch" size="14029" author="mspycher" created="Mon, 12 Sep 2011 17:51:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Dec 2010 20:59:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxztpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>disconnected watch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>