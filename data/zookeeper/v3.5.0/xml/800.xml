<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:48:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-800/ZOOKEEPER-800.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-800] zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATE</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-800</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This happened when I called zoo_add_auth() immediately after zookeeper_init(). It took me a while to figure out that authentication actually failed since zoo_add_auth() returned ZOK. It should return ZINVALIDSTATE instead. &lt;/p&gt;

&lt;p&gt;--Michi&lt;/p&gt;</description>
                <environment></environment>
        <key id="12468212">ZOOKEEPER-800</key>
            <summary>zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michim">Michi Mutsuzaki</assignee>
                                    <reporter username="michim">Michi Mutsuzaki</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jun 2010 00:26:03 +0100</created>
                <updated>Wed, 23 Nov 2011 19:22:43 +0000</updated>
                            <resolved>Thu, 21 Oct 2010 23:52:01 +0100</resolved>
                                    <version>3.3.1</version>
                                    <fixVersion>3.3.2</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12884584" author="phunt" created="Fri, 2 Jul 2010 08:33:12 +0100"  >&lt;p&gt;penciling in for 3.3.2&lt;/p&gt;</comment>
                            <comment id="12896090" author="michim" created="Fri, 6 Aug 2010 18:30:26 +0100"  >&lt;p&gt;Talked with Mahadev. I&apos;m taking this bug (but don&apos;t know how to change assignee in Jira). &lt;/p&gt;

&lt;p&gt;--Michi&lt;/p&gt;</comment>
                            <comment id="12899328" author="michim" created="Tue, 17 Aug 2010 09:19:17 +0100"  >&lt;p&gt;I modified zoo_add_auth() in branch-3.3. It returns ZINVALIDSTATE if the connection is in ZOO_CLOSED_STATE state. &lt;/p&gt;

&lt;p&gt;--Michi&lt;/p&gt;</comment>
                            <comment id="12923681" author="mahadev" created="Thu, 21 Oct 2010 23:52:01 +0100"  >&lt;p&gt;+1 I just committed this. thanks michi.&lt;/p&gt;</comment>
                            <comment id="12923814" author="hudson" created="Fri, 22 Oct 2010 11:51:34 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #976 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/976/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/976/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-800&quot; title=&quot;zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-800&quot;&gt;&lt;del&gt;ZOOKEEPER-800&lt;/del&gt;&lt;/a&gt;. zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATE (michi mutsuzaki via mahadev konar)&lt;/p&gt;</comment>
                            <comment id="13054105" author="dheerajagrawal" created="Thu, 23 Jun 2011 22:18:27 +0100"  >&lt;p&gt;I think this is a race condition. I just raised another ticket for this.&lt;br/&gt;
  2940     // &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-800&quot; title=&quot;zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-800&quot;&gt;&lt;del&gt;ZOOKEEPER-800&lt;/del&gt;&lt;/a&gt; zoo_add_auth should return ZINVALIDSTATE if&lt;br/&gt;
   2941     // the connection is closed.&lt;br/&gt;
   2942     if (zoo_state(zh) == 0) &lt;/p&gt;
{
   2943         return ZINVALIDSTATE;
   2944     }

&lt;p&gt;When we initialize we assign zk-&amp;gt;state=0 and here we check if its 0 return ZKINVALIDSTATE.&lt;br/&gt;
So in my case: where i am trying to addAuth right after zookeeper_init(), it sometime returns me ZKINVALIDSTATE (as the state might have not changed to CONNECTING), where as i would expect it to queue the request for me (as is done in the java client)&lt;/p&gt;

&lt;p&gt;The problem might be that we are using 0 for both CLOSED and UNINITIALIZED state.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12452267" name="ZOOKEEPER-800.patch" size="1404" author="michim" created="Tue, 17 Aug 2010 09:19:17 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Jul 2010 07:33:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzu3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>