<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:44:03 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1388/ZOOKEEPER-1388.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1388] Client side &apos;PathValidation&apos; is missing for the multi-transaction api.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1388</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Multi ops: Op.create(path,..), Op.delete(path, ..), Op.setData(path, ..), &lt;br/&gt;
Op.check(path, ...) apis are not performing the client side path validation and the call will go to the server side and is throwing exception back to the client. &lt;/p&gt;

&lt;p&gt;It would be good to provide ZooKeeper client side path validation for the multi transaction apis. Presently its getting err codes from the server, which is also not properly conveying the cause.&lt;/p&gt;

&lt;p&gt;For example: When specified invalid znode path in Op.create, it giving the following exception. This will not be useful to know the actual cause.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:115)
	at org.apache.zookeeper.ZooKeeper.multiInternal(ZooKeeper.java:1174)
	at org.apache.zookeeper.ZooKeeper.multi(ZooKeeper.java:1115)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12541563">ZOOKEEPER-1388</key>
            <summary>Client side &apos;PathValidation&apos; is missing for the multi-transaction api.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshr">Rakesh R</assignee>
                                    <reporter username="rakeshr">Rakesh R</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2012 05:17:29 +0000</created>
                <updated>Thu, 13 Mar 2014 18:17:09 +0000</updated>
                            <resolved>Tue, 17 Dec 2013 16:57:54 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>java client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13773114" author="hadoopqa" created="Fri, 20 Sep 2013 16:52:44 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12604248/0001-ZOOKEEPER-1388-trunk-version.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12604248/0001-ZOOKEEPER-1388-trunk-version.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1593//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1593//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1593//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1593//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1593//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1593//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13773244" author="rakeshr" created="Fri, 20 Sep 2013 19:00:00 +0100"  >&lt;p&gt;Please review the scenario and the patch. Thanks.&lt;/p&gt;

&lt;p&gt;I think, this would add value to 3.4.6 version too. Any thoughts?. I&apos;ll prepare 3.4.6 patch after the feedback.&lt;/p&gt;</comment>
                            <comment id="13773270" author="hadoopqa" created="Fri, 20 Sep 2013 19:22:23 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12604275/0002-ZOOKEEPER-1388-trunk-version.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12604275/0002-ZOOKEEPER-1388-trunk-version.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1524398.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1594//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1594//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1594//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1594//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1594//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1594//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13782419" author="phunt" created="Tue, 1 Oct 2013 00:28:58 +0100"  >&lt;p&gt;0002 is the correct/latest patch is that right? (I should ignore 0001?) We typically name new versions of our patches the same name, jira handles this properly, otw it can be confusing... (0001 vs 0002, or 0001 and 0002....?)&lt;/p&gt;</comment>
                            <comment id="13782420" author="phunt" created="Tue, 1 Oct 2013 00:29:11 +0100"  >&lt;p&gt;Hi Rakesh, makes sense to me to include in 3.4.6 as well as trunk. I tried the patch against 3.4.6 but it fails, can you create it?&lt;/p&gt;

&lt;p&gt;I looked through the patch and it looks ok to me. Kudos on adding the tests. One suggestion - pass into multiHavingErrors the expected error, rather than allowing either.&lt;/p&gt;</comment>
                            <comment id="13782678" author="rakeshr" created="Tue, 1 Oct 2013 08:06:28 +0100"  >&lt;p&gt;I&apos;ll prepare the patch for 3.4.6.&lt;/p&gt;

&lt;p&gt;Thanks for the review.  BTW I didn&apos;t get the comment, can you please explain it again.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;One suggestion - pass into multiHavingErrors the expected error, rather than allowing either.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In tests, I&apos;m preparing the &apos;expectedResultCodes&apos; and pass to the api for assertions.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
multiHavingErrors(zk, opList, expectedResultCodes);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13783338" author="phunt" created="Tue, 1 Oct 2013 22:01:30 +0100"  >&lt;p&gt;The following is what I was referring to:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        } else {
+            try {
+                zk.multi(ops);
+                Assert.fail(&quot;Shouldn&apos;t have validated in ZooKeeper client!&quot;);
+            } catch (KeeperException.BadArgumentsException e) {
+                // expected
+            } catch (IllegalArgumentException e) {
+                // expected
+            }
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which is expected? And in which cases?&lt;/p&gt;</comment>
                            <comment id="13783610" author="rakeshr" created="Wed, 2 Oct 2013 04:37:28 +0100"  >&lt;p&gt;Attached latest patch fixing review comment. Also removed one unnecessary arg from &quot;private List&amp;lt;OpResult&amp;gt; validatePath(Iterable&amp;lt;Op&amp;gt; ops)&quot; method.&lt;/p&gt;

&lt;p&gt;Please have a look at the patch.&lt;/p&gt;</comment>
                            <comment id="13783621" author="hadoopqa" created="Wed, 2 Oct 2013 05:03:18 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12606241/ZOOKEEPER-1388.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12606241/ZOOKEEPER-1388.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1528271.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1620//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1620//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1620//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1620//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1620//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1620//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13783622" author="rakeshr" created="Wed, 2 Oct 2013 05:03:34 +0100"  >&lt;p&gt;Attached one more patch, here I&apos;ve modified javadoc specifying IllegalArgumentException.&lt;/p&gt;</comment>
                            <comment id="13783628" author="hadoopqa" created="Wed, 2 Oct 2013 05:11:40 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12606243/ZOOKEEPER-1388.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12606243/ZOOKEEPER-1388.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1528271.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1621//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1621//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1621//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1621//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1621//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1621//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13783635" author="hadoopqa" created="Wed, 2 Oct 2013 05:21:43 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12606248/ZOOKEEPER-1388_branch_3_4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12606248/ZOOKEEPER-1388_branch_3_4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1528271.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1623//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1623//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13783643" author="hadoopqa" created="Wed, 2 Oct 2013 05:42:29 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12606247/ZOOKEEPER-1388.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12606247/ZOOKEEPER-1388.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1528271.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1622//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1622//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1622//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1622//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1622//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1622//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13848899" author="rakeshr" created="Mon, 16 Dec 2013 07:46:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;, could you please look at the latest patch and would like to know the feedback. Thanks&lt;/p&gt;</comment>
                            <comment id="13848904" author="phunt" created="Mon, 16 Dec 2013 07:55:31 +0000"  >&lt;p&gt;This is one I think should go into 3.4, I just haven&apos;t had the time to do the patch justice (looked at it briefly a couple times). I&apos;ll see if I have time, but it would be nice if someone who worked on multi originally might weigh in (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tdunning&quot; class=&quot;user-hover&quot; rel=&quot;tdunning&quot;&gt;Ted Dunning&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marshall&quot; class=&quot;user-hover&quot; rel=&quot;marshall&quot;&gt;Marshall McMullen&lt;/a&gt; ?)&lt;/p&gt;</comment>
                            <comment id="13850111" author="marshall" created="Tue, 17 Dec 2013 05:02:31 +0000"  >&lt;p&gt;I&apos;m not too familiar with how the client-side path validation works in the java client code. We don&apos;t do anything similar to that in the C client code (that I&apos;m aware of). Can someone explain how that is safe? If the client is connected to a server that does not have a fully sync&apos;d copy of the database then the client may preemptively fail the multi-op whereas if it had forwarded the entire multi-op to the server it would have properly succeeded. &lt;/p&gt;

&lt;p&gt;It&apos;s really important to understand that the original design we followed with a multi-op was to treat it as a transaction (write operation) rather than a read operation. As a transaction/write operation, it&apos;s my understanding of zab that we are required to forward the operation on to the leader rather than taking any action locally so that the leader can broadcast out the transaction to the entire ensemble for consideration. &lt;/p&gt;

&lt;p&gt;If the client does any path validation locally that seems like a violation of the zab protocol as I understand it.&lt;/p&gt;

&lt;p&gt;Someone feel free to correct me if I am misunderstanding things.&lt;/p&gt;</comment>
                            <comment id="13850153" author="rakeshr" created="Tue, 17 Dec 2013 06:09:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marshall&quot; class=&quot;user-hover&quot; rel=&quot;marshall&quot;&gt;Marshall McMullen&lt;/a&gt; for the interest.&lt;/p&gt;

&lt;p&gt;AFAIK, the idea of path validation is to &quot;fail fast in the client side itself with user friendly error messages&quot;. I think, this will not violate the zab protocol. Also, the path validation utility is used in all the other zookeeper.java client apis. &lt;br/&gt;
Since the znode string path (user passed parameter) is not following the basic znode path principles, the operation will definitely fail in server side and will not goes to zab protocol logic. If we have this utility in place, this will do the validation in client side itself and give the proper error message. &lt;/p&gt;

&lt;p&gt;Zookeeper java client has special path validation utility, which will do very basic validation of znode path string, like :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Path cannot be null&lt;/li&gt;
	&lt;li&gt;Path length must be &amp;gt; 0&lt;/li&gt;
	&lt;li&gt;Path must start with / character&lt;/li&gt;
	&lt;li&gt;Path must not end with / character&lt;/li&gt;
	&lt;li&gt;and many more..please see &apos;org.apache.zookeeper.common.PathUtils.java&apos; for the understanding.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13850156" author="marshall" created="Tue, 17 Dec 2013 06:13:04 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt; that significantly clears things up. This is different from what we do in the C client so I was completely misinterpreting things. I thought it was actually validating path existence rather than validating syntax and path sanity/validation. As such, my concerns are completely resolved.&lt;/p&gt;

&lt;p&gt;I&apos;ll look over the patch itself and make sure I don&apos;t have any other concerns.&lt;/p&gt;</comment>
                            <comment id="13850157" author="marshall" created="Tue, 17 Dec 2013 06:15:19 +0000"  >&lt;p&gt;After having much more clarity after &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;&apos;s comments, this patch looks good to me. +1.&lt;/p&gt;</comment>
                            <comment id="13850171" author="rakeshr" created="Tue, 17 Dec 2013 06:34:19 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marshall&quot; class=&quot;user-hover&quot; rel=&quot;marshall&quot;&gt;Marshall McMullen&lt;/a&gt; for your time and reviews.&lt;/p&gt;</comment>
                            <comment id="13850664" author="phunt" created="Tue, 17 Dec 2013 16:57:54 +0000"  >&lt;p&gt;Thanks Rakesh! Thanks Marshall! Committed to 3.4.6 and trunk.&lt;/p&gt;</comment>
                            <comment id="13851601" author="hudson" created="Wed, 18 Dec 2013 11:11:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2158 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2158/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2158/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1388&quot; title=&quot;Client side &amp;#39;PathValidation&amp;#39; is missing for the multi-transaction api.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1388&quot;&gt;&lt;del&gt;ZOOKEEPER-1388&lt;/del&gt;&lt;/a&gt;. Client side &apos;PathValidation&apos; is missing for the multi-transaction api. (Rakesh R via marshallm, phunt) (phunt: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551624&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1551624&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/CreateMode.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/Op.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ZooKeeper.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/MultiTransactionTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933767" author="fpj" created="Thu, 13 Mar 2014 18:17:09 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12604248" name="0001-ZOOKEEPER-1388-trunk-version.patch" size="9538" author="rakeshr" created="Fri, 20 Sep 2013 15:58:56 +0100"/>
                            <attachment id="12604275" name="0002-ZOOKEEPER-1388-trunk-version.patch" size="11197" author="rakeshr" created="Fri, 20 Sep 2013 18:49:51 +0100"/>
                            <attachment id="12606247" name="ZOOKEEPER-1388.patch" size="12029" author="rakeshr" created="Wed, 2 Oct 2013 05:03:34 +0100"/>
                            <attachment id="12606244" name="ZOOKEEPER-1388.patch" size="11756" author="rakeshr" created="Wed, 2 Oct 2013 04:48:25 +0100"/>
                            <attachment id="12606241" name="ZOOKEEPER-1388.patch" size="11717" author="rakeshr" created="Wed, 2 Oct 2013 04:19:54 +0100"/>
                            <attachment id="12606248" name="ZOOKEEPER-1388_branch_3_4.patch" size="7581" author="rakeshr" created="Wed, 2 Oct 2013 05:12:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Sep 2013 15:52:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzsdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32580</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>