<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:50:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1933/ZOOKEEPER-1933.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1933] Windows release build of zk client cannot connect to zk server</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1933</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;When building zookeeper in Visual Studio in debug mode, the client can connect to the server without error. When building in release mode, I get a continuous error message:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-06-02 11:25:20,070:7144(0xc84):ZOO_INFO@zookeeper_init_internal@1008: Initiating client connection, host=192.168.39.43:5181 sessionTimeout=30000 watcher=10049C90 sessionId=0 sessionPasswd=&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;gt; context=001FC0F0 flags=0
2014-06-02 11:25:20,072:7144(0xc84):ZOO_DEBUG@start_threads@221: starting threads...
2014-06-02 11:25:20,072:7144(0x1ea0):ZOO_DEBUG@do_completion@460: started completion thread
2014-06-02 11:25:20,072:7144(0x1e08):ZOO_DEBUG@do_io@403: started IO thread
2014-06-02 11:25:20,072:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1148: [OLD] count=0 capacity=0 next=0 hasnext=0
2014-06-02 11:25:20,072:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1151: [NEW] count=1 capacity=16 next=0 hasnext=1
2014-06-02 11:25:20,072:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1160: Using next from NEW=192.168.39.43:5181
2014-06-02 11:25:20,072:7144(0x1e08):ZOO_DEBUG@zookeeper_interest@1992: [zk] connect()

2014-06-02 11:25:20,158:7144(0x1e08):ZOO_ERROR@handle_socket_error_msg@1847: Socket [192.168.39.43:5181] zk retcode=-4, errno=10035(Unknown error): failed to send a handshake packet: Unknown error
2014-06-02 11:25:20,158:7144(0x1e08):ZOO_DEBUG@handle_error@1595: Previous connection=[192.168.39.43:5181] delay=0
2014-06-02 11:25:20,158:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1148: [OLD] count=0 capacity=0 next=0 hasnext=0
2014-06-02 11:25:20,158:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1151: [NEW] count=1 capacity=16 next=0 hasnext=1
2014-06-02 11:25:20,158:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1160: Using next from NEW=192.168.39.43:5181
2014-06-02 11:25:20,158:7144(0x1e08):ZOO_DEBUG@zookeeper_interest@1992: [zk] connect()

2014-06-02 11:25:20,159:7144(0x1e08):ZOO_ERROR@handle_socket_error_msg@1847: Socket [192.168.39.43:5181] zk retcode=-4, errno=10035(Unknown error): failed to send a handshake packet: Unknown error
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@handle_error@1595: Previous connection=[192.168.39.43:5181] delay=0
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1148: [OLD] count=0 capacity=0 next=0 hasnext=0
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1151: [NEW] count=1 capacity=16 next=0 hasnext=1
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1160: Using next from NEW=192.168.39.43:5181
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@zookeeper_interest@1992: [zk] connect()

2014-06-02 11:25:20,159:7144(0x1e08):ZOO_ERROR@handle_socket_error_msg@1847: Socket [192.168.39.43:5181] zk retcode=-4, errno=10035(Unknown error): failed to send a handshake packet: Unknown error
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@handle_error@1595: Previous connection=[192.168.39.43:5181] delay=0
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1148: [OLD] count=0 capacity=0 next=0 hasnext=0
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1151: [NEW] count=1 capacity=16 next=0 hasnext=1
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@get_next_server_in_reconfig@1160: Using next from NEW=192.168.39.43:5181
2014-06-02 11:25:20,159:7144(0x1e08):ZOO_DEBUG@zookeeper_interest@1992: [zk] connect()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12718195">ZOOKEEPER-1933</key>
            <summary>Windows release build of zk client cannot connect to zk server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oho">Orion Hodson</assignee>
                                    <reporter username="norrisl">Norris Lee</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jun 2014 17:59:07 +0100</created>
                <updated>Fri, 25 Jul 2014 18:39:11 +0100</updated>
                            <resolved>Fri, 25 Jul 2014 17:58:40 +0100</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14025835" author="fpj" created="Mon, 9 Jun 2014 23:05:58 +0100"  >&lt;p&gt;Hi there, Are you building from trunk? We have actually come across this bug, let me try to get a patch uploaded soon.&lt;/p&gt;</comment>
                            <comment id="14025840" author="norrisl" created="Mon, 9 Jun 2014 23:08:45 +0100"  >&lt;p&gt;Yes, this was built from trunk.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="14026390" author="oho" created="Tue, 10 Jun 2014 13:35:43 +0100"  >&lt;p&gt;The attached patch fixes two issues with select() processing on Windows:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;File descriptors can go bad when sockets are closed and will cause select() to fail so these should be removed from the descriptor sets.&lt;/li&gt;
	&lt;li&gt;If select() fails the interest argument to zookeeper_process() should be zero.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The error in the Jira description is similar to something we experienced internally and this patch worked for us. Please try &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=norrisl&quot; class=&quot;user-hover&quot; rel=&quot;norrisl&quot;&gt;Norris Lee&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="14026422" author="hadoopqa" created="Tue, 10 Jun 2014 14:17:33 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649569/ZOOKEEPER-1933.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649569/ZOOKEEPER-1933.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1601516.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2127//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2127//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2127//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2127//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2127//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2127//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14027050" author="oho" created="Tue, 10 Jun 2014 22:19:15 +0100"  >&lt;p&gt;Fix missing an argument to LOG_ERROR bringing changes forward.&lt;/p&gt;</comment>
                            <comment id="14027054" author="hadoopqa" created="Tue, 10 Jun 2014 22:22:38 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649671/ZOOKEEPER-1933-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649671/ZOOKEEPER-1933-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1601516.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2128//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2128//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14027547" author="fpj" created="Wed, 11 Jun 2014 09:40:31 +0100"  >&lt;p&gt;Patch doesn&apos;t apply cleanly, cancelling until we fix it.&lt;/p&gt;</comment>
                            <comment id="14027610" author="oho" created="Wed, 11 Jun 2014 11:39:07 +0100"  >&lt;p&gt;Fix path in patch v2.&lt;/p&gt;</comment>
                            <comment id="14034520" author="hadoopqa" created="Tue, 17 Jun 2014 23:39:08 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649770/ZOOKEEPER-1933-3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649770/ZOOKEEPER-1933-3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1601516.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2136//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2136//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2136//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2136//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2136//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2136//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14035691" author="fpj" created="Wed, 18 Jun 2014 14:41:54 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oho&quot; class=&quot;user-hover&quot; rel=&quot;oho&quot;&gt;Orion Hodson&lt;/a&gt;, this is roughly what I was thinking about for the test, does it work for you? One problem is checking if it actually fails on Windows given that I don&apos;t know how to run the C tests there.&lt;/p&gt;</comment>
                            <comment id="14037194" author="oho" created="Thu, 19 Jun 2014 11:02:25 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; This compiles fine here on Windows. Need to get tests lit up on Windows, but haven&apos;t started trying to find a solution for this yet.&lt;/p&gt;

&lt;p&gt;I might be tempted to tweak the patch slightly:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;move the loop_count (io_ticks?) as a counter into the _zhandle struct and have it increment in do_io() unconditionally.&lt;/li&gt;
	&lt;li&gt;change the counter to be volatile.&lt;/li&gt;
	&lt;li&gt;change the test to only read the count value and look at the number of io_ticks elapsed during the test.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14037311" author="fpj" created="Thu, 19 Jun 2014 13:44:50 +0100"  >&lt;p&gt;I was originally going to do what you&apos;re suggesting, but it didn&apos;t feel necessary to having it counting if we aren&apos;t testing. The downside of doing the way I did is introducing more changes. Also, I think you&apos;re trying to point out that this could be used for monitoring/debugging as well, which I agree.&lt;/p&gt;

&lt;p&gt;Do you want me to make the changes or do you want to tweak it yourself? I&apos;m happy either way.&lt;/p&gt;</comment>
                            <comment id="14037322" author="oho" created="Thu, 19 Jun 2014 14:13:28 +0100"  >&lt;p&gt;If you have cycles, could I defer this to you (or pick it up in a couple of days)? There&apos;s some pressure on other stuff here at the moment.&lt;/p&gt;</comment>
                            <comment id="14042111" author="fpj" created="Tue, 24 Jun 2014 14:44:14 +0100"  >&lt;p&gt;Made agreed changes.&lt;/p&gt;</comment>
                            <comment id="14042168" author="hadoopqa" created="Tue, 24 Jun 2014 15:28:23 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12652194/ZOOKEEPER-1933.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12652194/ZOOKEEPER-1933.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1601516.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2145//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2145//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2145//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2145//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2145//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2145//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14044921" author="rgs" created="Thu, 26 Jun 2014 18:36:47 +0100"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;A couple of things:&lt;/p&gt;

&lt;p&gt;in src/c/src/mt_adaptor.c, is this a leftover of debugging?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; #include &quot;zk_adaptor.h&quot;
+#include &quot;zk_test.h&quot;
 #include &quot;zookeeper_log.h&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;can&apos;t see zk_test.h anywhere. But then, it&apos;s included in the test file you modified, but I can&apos;t see the include file there either. &lt;/p&gt;

&lt;p&gt;In:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        else if (rc &amp;lt; 0)
+        {
+            LOG_ERROR(LOGCALLBACK(zh), (&quot;select() failed %d [%d].&quot;, rc, WSAGetLastError()));
+
+            // Clear interest events for zookeeper_process if select() fails.
+            interest = 0;
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is that the right way to deal with select() errors? Should we not call:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        if(is_unrecoverable(zh))
            break;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or just break directly?&lt;/p&gt;

&lt;p&gt;and finally a small nit, feel free to not take it:&lt;/p&gt;

&lt;p&gt;spacing between `?` and `:` operators for readability, please:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            interest = (FD_ISSET(fd, &amp;amp;rfds))? ZOOKEEPER_READ:0;
+            interest|= (FD_ISSET(fd, &amp;amp;wfds))? ZOOKEEPER_WRITE:0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14046298" author="oho" created="Fri, 27 Jun 2014 20:12:39 +0100"  >&lt;p&gt;Hi Raul, I&apos;m responsible for the change in select() and also a relative neophyte in the ZooKeeper code.&lt;/p&gt;

&lt;p&gt;From scanning the patch alone, it may not be obvious but there is an isunrecoverable() check in the same loop do_io() loop. It&apos;s comes just after zookeeper_process().&lt;/p&gt;

&lt;p&gt;Previously there was no error checking in the Win32 case for select(). The issue we&apos;ve seen with select() is when the socket is remotely closed and then the descriptor is bad and so select() fails without waiting - there is no change in state at this point, just a bad descriptor. It used to be the descriptor was never removed from the fd_set&apos;s and so it&apos;d burn CPU. The variable interest in the loop serves two purposes and because it wasn&apos;t zeroed out in the case of error, there&apos;d be a socket error and then the code would attempt to process I/O on the socket and then fail there. With the change here, we see sessions being re-established as expected.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Orion&lt;/p&gt;</comment>
                            <comment id="14049032" author="rgs" created="Tue, 1 Jul 2014 17:35:04 +0100"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oho&quot; class=&quot;user-hover&quot; rel=&quot;oho&quot;&gt;Orion Hodson&lt;/a&gt;, thanks for the follow-up (and sorry for the slow reply). &lt;/p&gt;

&lt;p&gt;So:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;From scanning the patch alone, it may not be obvious but there is an isunrecoverable() check in the same loop do_io() loop. It&apos;s comes just after zookeeper_process().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, exactly my point.. does it need to be done before zookeeper_process()? Maybe not, according to your tests.&lt;/p&gt;

&lt;p&gt;Besides this, mind updating the patch to have it reflect my other two comments please?&lt;/p&gt;</comment>
                            <comment id="14049108" author="fpj" created="Tue, 1 Jul 2014 18:39:34 +0100"  >&lt;blockquote&gt;&lt;p&gt;does it need to be done before zookeeper_process()?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure what you&apos;re trying to say here. In the case of an error, it clears interest. Are you saying this is not sufficient, broken or something else I&apos;m missing?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Maybe not, according to your tests.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Which tests are you talking about? the test case? I have added that one, so it is possible I have misunderstood something.&lt;/p&gt;

&lt;p&gt;The other ones as small changes, but we need to clear up all changes before we go and generate a new patch.&lt;/p&gt;</comment>
                            <comment id="14049215" author="rgs" created="Tue, 1 Jul 2014 20:17:38 +0100"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure what you&apos;re trying to say here. In the case of an error, it clears interest. Are you saying this is not sufficient, broken or something else I&apos;m missing?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wasn&apos;t sure if zookeeper_process() dealt correctly with the error condition. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Which tests are you talking about? the test case? I have added that one, so it is possible I have misunderstood something.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I meant you exercised the code, but as you mentioned and now that I actually looked in more detail zookeeper_process() &lt;b&gt;does&lt;/b&gt; the check:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;int zookeeper_process(zhandle_t *zh, int events)
{
    buffer_list_t *bptr;
    int rc;

    if (zh==NULL)
        return ZBADARGUMENTS;
    if (is_unrecoverable(zh))
        return ZINVALIDSTATE;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it generally lgtm, +1. An updated patch with the missing header file would be good for a last read though. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oho&quot; class=&quot;user-hover&quot; rel=&quot;oho&quot;&gt;Orion Hodson&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14049875" author="fpj" created="Wed, 2 Jul 2014 13:54:43 +0100"  >&lt;p&gt;Got it, thanks for the clarification, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt;, I&apos;ll produce a new patch with the changes.&lt;/p&gt;</comment>
                            <comment id="14066625" author="phunt" created="Fri, 18 Jul 2014 18:52:41 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; any update on this? Thanks.&lt;/p&gt;</comment>
                            <comment id="14073810" author="phunt" created="Fri, 25 Jul 2014 00:09:21 +0100"  >&lt;p&gt;This seems like it&apos;s pretty serious (per the subject) and we have a bit of time, any chance we can get this into 3.5.0? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt;, et. al.?&lt;/p&gt;</comment>
                            <comment id="14073835" author="fpj" created="Fri, 25 Jul 2014 00:28:18 +0100"  >&lt;p&gt;Attaching new patch.&lt;/p&gt;</comment>
                            <comment id="14073875" author="rgs" created="Fri, 25 Jul 2014 01:08:15 +0100"  >&lt;p&gt;lgtm, +1. some nits though, take them or leave them:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        rc = select(/* unused */0, &amp;amp;rfds, &amp;amp;wfds, NULL, &amp;amp;tv);
+        if (rc &amp;gt; 0) 
+        {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;if (rc &amp;gt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is more consistent with the rest of the file (i.e.: the prev if block, etc.).&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            interest=(FD_ISSET(fd, &amp;amp;rfds))?ZOOKEEPER_READ:0;
+            interest|=(FD_ISSET(fd, &amp;amp;wfds))?ZOOKEEPER_WRITE:0;
+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;spaces around =, |=, ? and : please.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            if (FD_ISSET(adaptor_threads-&amp;gt;self_pipe[0], &amp;amp;rfds)){
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;space between ) and { please.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        else if (rc &amp;lt; 0)
+        {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should be&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;else if (rc &amp;lt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;for code style consistency.&lt;/p&gt;

&lt;p&gt;And finally:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+
+    void testBadDescriptor() {
+        int zrc = 0;
+        watchctx_t *ctx;
+        zhandle_t *zh = zookeeper_init(hostPorts, NULL, 10000, 0, ctx, 0);
+        sleep(1);
+	zh-&amp;gt;io_count = 0;
+	//close socket
+	close(zh-&amp;gt;fd);
+	sleep(1);
+	//Check that doIo isn&apos;t spinning
+	CPPUNIT_ASSERT(zh-&amp;gt;io_count &amp;lt; 2);
+        zookeeper_close(zh);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;has weird indentation - mixing tabs and spaces perhaps?&lt;/p&gt;</comment>
                            <comment id="14073877" author="hadoopqa" created="Fri, 25 Jul 2014 01:09:23 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12657717/ZOOKEEPER-1933.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12657717/ZOOKEEPER-1933.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1613326.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2231//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2231//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2231//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2231//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2231//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2231//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14074219" author="fpj" created="Fri, 25 Jul 2014 10:05:29 +0100"  >&lt;p&gt;Fixed the issues &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; pointed out. The spaces after ? and : are used inconsistently across the code. A few lines up, for example, there are lines of code without spaces. I&apos;ve added them for this patch because I agree with you about the readability, but I just wanted to warn that it isn&apos;t very consistent at the moment.&lt;/p&gt;</comment>
                            <comment id="14074221" author="fpj" created="Fri, 25 Jul 2014 10:07:51 +0100"  >&lt;p&gt;I just got another tab, uploading a new patch.&lt;/p&gt;</comment>
                            <comment id="14074242" author="hadoopqa" created="Fri, 25 Jul 2014 10:50:00 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12657805/ZOOKEEPER-1933.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12657805/ZOOKEEPER-1933.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1613328.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2234//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2234//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2234//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2234//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2234//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2234//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14074497" author="rgs" created="Fri, 25 Jul 2014 16:53:06 +0100"  >&lt;p&gt;+1, lgtm. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14074574" author="phunt" created="Fri, 25 Jul 2014 17:58:41 +0100"  >&lt;p&gt;Committed to trunk. Thanks Orion &amp;amp; Flavio, Raul, Norris, et. al. !&lt;/p&gt;</comment>
                            <comment id="14074643" author="hudson" created="Fri, 25 Jul 2014 18:39:11 +0100"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2386 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2386/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2386/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1933&quot; title=&quot;Windows release build of zk client cannot connect to zk server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1933&quot;&gt;&lt;del&gt;ZOOKEEPER-1933&lt;/del&gt;&lt;/a&gt;. Windows release build of zk client cannot connect to zk server (Orion Hodson via fpj, phunt) (phunt: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1613474&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1613474&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/mt_adaptor.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zk_adaptor.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zookeeper.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestClient.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12649671" name="ZOOKEEPER-1933-2.patch" size="3065" author="oho" created="Tue, 10 Jun 2014 22:19:15 +0100"/>
                            <attachment id="12649770" name="ZOOKEEPER-1933-3.patch" size="3077" author="oho" created="Wed, 11 Jun 2014 11:39:07 +0100"/>
                            <attachment id="12657805" name="ZOOKEEPER-1933.patch" size="5259" author="fpj" created="Fri, 25 Jul 2014 10:07:51 +0100"/>
                            <attachment id="12657804" name="ZOOKEEPER-1933.patch" size="5252" author="fpj" created="Fri, 25 Jul 2014 10:05:29 +0100"/>
                            <attachment id="12657717" name="ZOOKEEPER-1933.patch" size="5225" author="fpj" created="Fri, 25 Jul 2014 00:28:18 +0100"/>
                            <attachment id="12652194" name="ZOOKEEPER-1933.patch" size="5506" author="fpj" created="Tue, 24 Jun 2014 14:44:14 +0100"/>
                            <attachment id="12651123" name="ZOOKEEPER-1933.patch" size="6222" author="fpj" created="Wed, 18 Jun 2014 14:41:54 +0100"/>
                            <attachment id="12649569" name="ZOOKEEPER-1933.patch" size="3060" author="oho" created="Tue, 10 Jun 2014 13:35:43 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Jun 2014 22:05:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq3o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>