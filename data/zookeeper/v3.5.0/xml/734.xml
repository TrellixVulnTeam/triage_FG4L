<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:47:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-734/ZOOKEEPER-734.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-734] QuorumPeerTestBase.java and ZooKeeperServerMainTest.java do not handle windows path correctly</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-734</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;While runniing &quot;ant test-core-java&quot; QuorumPeerTestBase.java and ZooKeeperServerMainTest.java fail. The problem seems to be in ZookeeperserverMainTest.java:MainThread():66 and in QuorumPeerBaseTest.java:MainThread:76.&lt;/p&gt;

&lt;p&gt;FileWriter.write() writes windows path to the conf file. Java does not like windows path. Therefore, the test complains that it cannot find myid and fails. &lt;/p&gt;

&lt;p&gt;Solution - convert windows path to UNIX path. This worked for me on windows.  Diffs are attached below. Solution not tested on Linux since for some reason build is failing (due to problems not related to this change).&lt;/p&gt;


&lt;p&gt;vmc-floorb-dhcp116-114:/opt/zksrc/zookeeper-3.3.0/src/java/test/org/apache/zookeeper/server # svn diff&lt;br/&gt;
Index: ZooKeeperServerMainTest.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; ZooKeeperServerMainTest.java	(revision 931240)&lt;br/&gt;
+++ ZooKeeperServerMainTest.java	(working copy)&lt;br/&gt;
@@ -61,7 +61,8 @@&lt;br/&gt;
             if (!dataDir.mkdir()) &lt;/p&gt;
{
                 throw new IOException(&quot;unable to mkdir &quot; + dataDir);
             }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fwriter.write(&quot;dataDir=&quot; + dataDir.toString() + &quot;\n&quot;);&lt;br/&gt;
+            String data = dataDir.toString().replace(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;, &apos;/&apos;);&lt;br/&gt;
+            fwriter.write(&quot;dataDir=&quot; + data + &quot;\n&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             fwriter.write(&quot;clientPort=&quot; + clientPort + &quot;\n&quot;);&lt;br/&gt;
             fwriter.flush();&lt;br/&gt;
Index: quorum/QuorumPeerTestBase.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; quorum/QuorumPeerTestBase.java	(revision 931240)&lt;br/&gt;
+++ quorum/QuorumPeerTestBase.java	(working copy)&lt;br/&gt;
@@ -73,7 +73,8 @@&lt;br/&gt;
             if (!dataDir.mkdir()) &lt;/p&gt;
{
                 throw new IOException(&quot;Unable to mkdir &quot; + dataDir);
             }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fwriter.write(&quot;dataDir=&quot; + dataDir.toString() + &quot;\n&quot;);&lt;br/&gt;
+            String data = dataDir.toString().replace(&apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;, &apos;/&apos;);&lt;br/&gt;
+            fwriter.write(&quot;dataDir=&quot; + data + &quot;\n&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             fwriter.write(&quot;clientPort=&quot; + clientPort + &quot;\n&quot;);&lt;br/&gt;
             fwriter.write(quorumCfgSection + &quot;\n&quot;);&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 32-bit&lt;/p&gt;</environment>
        <key id="12461314">ZOOKEEPER-734</key>
            <summary>QuorumPeerTestBase.java and ZooKeeperServerMainTest.java do not handle windows path correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vishalmlst">Vishal Kher</assignee>
                                    <reporter username="vishalmlst">Vishal Kher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Apr 2010 23:43:57 +0100</created>
                <updated>Wed, 23 Nov 2011 19:22:33 +0000</updated>
                            <resolved>Mon, 26 Apr 2010 21:02:17 +0100</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.3.1</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12859684" author="phunt" created="Thu, 22 Apr 2010 07:45:50 +0100"  >&lt;p&gt;Vishal, would it be possible for you to submit this as a patch? see:&lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/hadoop/ZooKeeper/HowToContribute&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/ZooKeeper/HowToContribute&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12859939" author="vishalmlst" created="Thu, 22 Apr 2010 19:22:38 +0100"  >&lt;p&gt;Request for review.&lt;/p&gt;

&lt;p&gt;There is probably a better way to handle backlashes in Windows. I tried a use properties (file.separator etc), but didn&apos;t work. So finally decided to do it the dumb way. Replace &quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot; with &quot;/&quot;. If we done replace backslash, then java considers it as escape sequence and essentially the backslash gets removed.&lt;/p&gt;

&lt;p&gt;Please, feel free to drop the patch If there is a better way to handle it.&lt;/p&gt;</comment>
                            <comment id="12859947" author="phunt" created="Thu, 22 Apr 2010 19:36:19 +0100"  >&lt;p&gt;Thanks Vishal, appreciated!&lt;/p&gt;

&lt;p&gt;Btw, once you have a patch that you think is ready, just go ahead and &quot;submit patch&quot; on the left hand side (link).&lt;br/&gt;
This will run the patch through the automated tests and advance the workflow (so the committers will review,&lt;br/&gt;
perhaps provide feedback if changes need to be made, then eventually commit).&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12859954" author="hadoopqa" created="Thu, 22 Apr 2010 19:58:46 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12442606/ZOOKEEPER-734.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12442606/ZOOKEEPER-734.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 936624.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/69/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/69/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/69/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/69/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/69/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h1.grid.sp2.yahoo.net/69/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12861071" author="phunt" created="Mon, 26 Apr 2010 21:02:16 +0100"  >&lt;p&gt;+1 thanks Vishal!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12442606" name="ZOOKEEPER-734.patch" size="2125" author="vishalmlst" created="Thu, 22 Apr 2010 19:22:38 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Apr 2010 06:45:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzuc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32899</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>