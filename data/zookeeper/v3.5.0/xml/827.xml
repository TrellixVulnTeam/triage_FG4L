<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-827/ZOOKEEPER-827.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-827] enable r/o mode in C client library</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-827</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Implement read-only mode functionality (in accordance with &lt;a href=&quot;http://wiki.apache.org/hadoop/ZooKeeper/GSoCReadOnlyMode&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/ZooKeeper/GSoCReadOnlyMode&lt;/a&gt;) in C client library&lt;/p&gt;</description>
                <environment></environment>
        <key id="12469841">ZOOKEEPER-827</key>
            <summary>enable r/o mode in C client library</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12458997">ZOOKEEPER-704</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgs">Raul Gutierrez Segales</assignee>
                                    <reporter username="dorserg">Sergey Doroshenko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jul 2010 19:06:57 +0100</created>
                <updated>Sat, 2 May 2015 21:34:31 +0100</updated>
                            <resolved>Mon, 7 Jul 2014 22:44:38 +0100</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="12890811" author="dorserg" created="Wed, 21 Jul 2010 19:27:57 +0100"  >&lt;p&gt;Workable version of r/o functionality. &lt;/p&gt;

&lt;p&gt;To get r/o-enabled zhandle use zookeeper_init_ro function; zookeeper_init simply delegates to it. Client seeks for r/w server if in r/o state. Default watcher receives appropriate notifications.&lt;/p&gt;

&lt;p&gt;Things to add is handling of &quot;fake&quot; sessions (check &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-784&quot; title=&quot;server-side functionality for read-only mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-784&quot;&gt;&lt;del&gt;ZOOKEEPER-784&lt;/del&gt;&lt;/a&gt; and wiki page for details), and tests. For now I do have tests but they are tied to my environment; I also tested added functionality with cli_mt command-line client&lt;/p&gt;</comment>
                            <comment id="12891098" author="dorserg" created="Thu, 22 Jul 2010 12:27:27 +0100"  >&lt;p&gt;sessions handling added&lt;/p&gt;</comment>
                            <comment id="12892458" author="dorserg" created="Mon, 26 Jul 2010 21:53:42 +0100"  >&lt;ul&gt;
	&lt;li&gt;test added&lt;/li&gt;
	&lt;li&gt;made client backwards compatible with old server&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Overall, that&apos;s it. Fully workable r/o mode. Of course, to test it you also need to apply &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-784&quot; title=&quot;server-side functionality for read-only mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-784&quot;&gt;&lt;del&gt;ZOOKEEPER-784&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12892460" author="dorserg" created="Mon, 26 Jul 2010 21:55:05 +0100"  >&lt;p&gt;cancelling patch since test won&apos;t pass till server-side changes is integrated to the trunk&lt;/p&gt;</comment>
                            <comment id="12895747" author="dorserg" created="Thu, 5 Aug 2010 18:35:06 +0100"  >&lt;p&gt;improved documentation&lt;/p&gt;</comment>
                            <comment id="12906907" author="fpj" created="Tue, 7 Sep 2010 18:59:56 +0100"  >&lt;p&gt;I was wondering what the status of this patch is. Should it be patch available or there are still things missing?&lt;/p&gt;</comment>
                            <comment id="12907053" author="dorserg" created="Wed, 8 Sep 2010 02:40:41 +0100"  >&lt;p&gt;This is fully workable solution that depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-784&quot; title=&quot;server-side functionality for read-only mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-784&quot;&gt;&lt;del&gt;ZOOKEEPER-784&lt;/del&gt;&lt;/a&gt; only&lt;/p&gt;</comment>
                            <comment id="12907117" author="fpj" created="Wed, 8 Sep 2010 08:24:58 +0100"  >&lt;p&gt;Sergey, I&apos;m asking because it is currently not marked as &quot;Patch available&quot;. Should it be patch available? From your answer, it sounds like a &quot;yes&quot;, but it would be good if you could confirm.&lt;/p&gt;</comment>
                            <comment id="12907542" author="dorserg" created="Thu, 9 Sep 2010 08:12:15 +0100"  >&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-784&quot; title=&quot;server-side functionality for read-only mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-784&quot;&gt;&lt;del&gt;ZOOKEEPER-784&lt;/del&gt;&lt;/a&gt; is not in trunk, Hudson will reject this patch. But if you apply 784&apos;s patch, this one becomes &quot;patch available&quot;&lt;/p&gt;</comment>
                            <comment id="12907652" author="fpj" created="Thu, 9 Sep 2010 16:31:59 +0100"  >&lt;p&gt;Got it, thanks for the clarification, Sergey.&lt;/p&gt;</comment>
                            <comment id="12990578" author="dorserg" created="Fri, 4 Feb 2011 15:18:35 +0000"  >&lt;p&gt;The patch against current trunk&apos;s state. As before, depends on &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-784&quot; title=&quot;server-side functionality for read-only mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-784&quot;&gt;&lt;del&gt;ZOOKEEPER-784&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13219739" author="vishal.k" created="Thu, 1 Mar 2012 02:22:46 +0000"  >&lt;p&gt;Committers - it would be great if we could commit this patch.&lt;/p&gt;</comment>
                            <comment id="13441354" author="thawan" created="Fri, 24 Aug 2012 19:11:50 +0100"  >&lt;p&gt;#define READONLY_STATE_DEF 4&lt;br/&gt;
This is inconsistent with server-side definition (5)&lt;/p&gt;</comment>
                            <comment id="14021651" author="rgs" created="Mon, 9 Jun 2014 06:58:01 +0100"  >&lt;p&gt;I&apos;ve rebased the available patch on top of master. So far I only made it compile (for Linux, it won&apos;t compile for Win32). I&apos;ll make the tests pass and complete this during this week (hopefully).&lt;/p&gt;

&lt;p&gt;I&apos;d really like to include this for 3.5.0 because testing ZOOKEEPR-1607 properly depends on this (and, more generally, for any further development/enhancement of read-only support we might as well have this supported in C...).&lt;/p&gt;

&lt;p&gt;Early reviews welcomed, but be warned this is WIP!&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;Rakesh R&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14026110" author="michim" created="Tue, 10 Jun 2014 05:41:38 +0100"  >&lt;p&gt;Hi Raul, thanks for the patch, it actually looks pretty good to me. What are the remaining tasks?&lt;/p&gt;</comment>
                            <comment id="14026126" author="rgs" created="Tue, 10 Jun 2014 06:31:11 +0100"  >&lt;p&gt;Thanks for the quick reply Michi. What&apos;s left is making sure it&apos;ll work for win32 (i.e.: ifdefs for the socket stuff, etc. - i don&apos;t have windows machines so i have no way to test it, though i can easily at least cover the basics) and perhaps adding some more tests to ensure backwards compatibility, etc. (i.e.: when talking with a non read-only server).&lt;/p&gt;

&lt;p&gt;Those are the two main things, besides general testing. &lt;/p&gt;</comment>
                            <comment id="14027403" author="rgs" created="Wed, 11 Jun 2014 05:45:51 +0100"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt;, i&apos;ve updated the patch so that:&lt;/p&gt;

&lt;p&gt;a) tests pass&lt;br/&gt;
b) it &lt;b&gt;should&lt;/b&gt; compile on win32&lt;br/&gt;
c) small refactoring of the #ifdef win32 blocks because things were getting confused&lt;/p&gt;

&lt;p&gt;let me know what you think! cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14027433" author="hadoopqa" created="Wed, 11 Jun 2014 06:32:22 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649743/ZOOKEEPER-827.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649743/ZOOKEEPER-827.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1601516.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 27 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2129//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2129//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2129//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2129//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2129//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2129//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14034432" author="fpj" created="Tue, 17 Jun 2014 22:49:03 +0100"  >&lt;p&gt;I&apos;m getting this error:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;src/zookeeper.c: In function &apos;zookeeper_send&apos;:
src/zookeeper.c:249:28: error: &apos;MSG_NOSIGNAL&apos; undeclared (first use in this function)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;MSG_NOSIGNAL is being defined inside a _WINDOWS ifdef block.&lt;/p&gt;</comment>
                            <comment id="14034440" author="rgs" created="Tue, 17 Jun 2014 22:53:40 +0100"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;. So the last version of the patch has:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; #ifdef _WINDOWS
-static int zookeeper_send(SOCKET s, const void* buf, int len)
+typedef SOCKET socket_t;
+typedef int sendsize_t;
+#define SEND_FLAGS  0
 #else
-static ssize_t zookeeper_send(int s, const void* buf, size_t len)
+typedef int socket_t;
+typedef ssize_t sendsize_t;
+#define SEND_FLAGS  MSG_NOSIGNAL
 #endif
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;why would  #ifdef _WINDOWS not be the path inside Win? Or is that macro not available on all Win platforms?&lt;/p&gt;</comment>
                            <comment id="14034449" author="rgs" created="Tue, 17 Jun 2014 22:58:04 +0100"  >&lt;p&gt;Hmm, looks like we want #ifdef WIN32 as per &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/b0084kay%28VS.100%29.aspx?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://msdn.microsoft.com/en-us/library/b0084kay%28VS.100%29.aspx?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;All other places in that file use that macro, should we use that and ditch _WINDOWS which doesn&apos;t seem documented?&lt;/p&gt;</comment>
                            <comment id="14035592" author="fpj" created="Wed, 18 Jun 2014 12:20:43 +0100"  >&lt;p&gt;Using _WIN32 does seem better, and I also like the idea of making it uniform. &lt;/p&gt;</comment>
                            <comment id="14036143" author="rgs" created="Wed, 18 Jun 2014 19:50:17 +0100"  >&lt;p&gt;Made the Windows related #ifdefs consistent across zookeeper.c. &lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14036230" author="hadoopqa" created="Wed, 18 Jun 2014 20:28:12 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12651217/ZOOKEEPER-827.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12651217/ZOOKEEPER-827.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1601516.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2137//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2137//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2137//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2137//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2137//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2137//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14036336" author="rgs" created="Wed, 18 Jun 2014 21:34:06 +0100"  >&lt;p&gt;Hmm, weird &#8212; a java test failed. I&apos;ll look into it. &lt;/p&gt;</comment>
                            <comment id="14042727" author="rgs" created="Tue, 24 Jun 2014 22:38:49 +0100"  >&lt;p&gt;Actually, ignoring the Java failure for now since it&apos;s unrelated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;Michi Mutsuzaki&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;: could you guys take another look please?&lt;/p&gt;</comment>
                            <comment id="14044037" author="fpj" created="Wed, 25 Jun 2014 22:02:27 +0100"  >&lt;p&gt;I&apos;m having a look. Thanks for the heads up.&lt;/p&gt;</comment>
                            <comment id="14044683" author="fpj" created="Thu, 26 Jun 2014 15:18:00 +0100"  >&lt;p&gt;Actually, would you mind uploading it to the review board, please? I have a bunch of small things, and it&apos;d be easier this way.&lt;/p&gt;</comment>
                            <comment id="14045028" author="rgs" created="Thu, 26 Jun 2014 20:10:26 +0100"  >&lt;p&gt;Sure, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, here you go: &lt;a href=&quot;https://reviews.apache.org/r/23081/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/23081/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14048712" author="fpj" created="Tue, 1 Jul 2014 10:57:13 +0100"  >&lt;p&gt;+1, looks good to me. This is based on the patch in the review board, I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; hasn&apos;t updated the jira patch yet.&lt;/p&gt;</comment>
                            <comment id="14049052" author="rgs" created="Tue, 1 Jul 2014 17:42:09 +0100"  >&lt;p&gt;version of the patch (available on reviewboard too)&lt;/p&gt;</comment>
                            <comment id="14049097" author="hadoopqa" created="Tue, 1 Jul 2014 18:31:53 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12653416/ZOOKEEPER-827.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12653416/ZOOKEEPER-827.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1606841.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2167//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2167//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2167//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2167//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2167//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2167//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14052930" author="fpj" created="Sat, 5 Jul 2014 18:49:31 +0100"  >&lt;p&gt;hey raul, I just realized it doesn&apos;t compile on mac os. We need to do something like this to get it to compile:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#ifdef _WIN32
typedef SOCKET socket_t;
typedef int sendsize_t;
#define SEND_FLAGS  0
#else
#ifdef __APPLE__
#define MSG_NOSIGNAL SO_NOSIGPIPE
#endif
typedef int socket_t;
typedef ssize_t sendsize_t;
#define SEND_FLAGS  MSG_NOSIGNAL
#endif
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is in zookeeper.c. If you agree, could you update the patch, please?&lt;/p&gt;</comment>
                            <comment id="14052931" author="rgs" created="Sat, 5 Jul 2014 19:03:28 +0100"  >&lt;p&gt;Oh, thanks for catching this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; - will update right away and I&apos;ll try to find a mac to test it beforehand too. Thanks!&lt;/p&gt;</comment>
                            <comment id="14053868" author="rgs" created="Mon, 7 Jul 2014 18:05:07 +0100"  >&lt;p&gt;Updated the RB (&lt;a href=&quot;https://reviews.apache.org/r/23081/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/23081/&lt;/a&gt;), &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;. I know it compiles in OS X, but haven&apos;t tested tho. Thanks!&lt;/p&gt;</comment>
                            <comment id="14053872" author="rgs" created="Mon, 7 Jul 2014 18:10:04 +0100"  >&lt;p&gt;last version available in the reviewboard as well. &lt;/p&gt;</comment>
                            <comment id="14053924" author="hadoopqa" created="Mon, 7 Jul 2014 18:52:23 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12654339/ZOOKEEPER-827.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12654339/ZOOKEEPER-827.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1607774.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 24 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2177//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2177//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2177//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2177//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2177//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2177//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14054180" author="fpj" created="Mon, 7 Jul 2014 22:44:38 +0100"  >&lt;p&gt;+1. Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt;. Committed revision 1608620.&lt;/p&gt;</comment>
                            <comment id="14054394" author="rgs" created="Tue, 8 Jul 2014 02:32:28 +0100"  >&lt;p&gt;Thanks a lot for the review &amp;amp; feedback &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14054842" author="hudson" created="Tue, 8 Jul 2014 12:22:41 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2359 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2359/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2359/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-827&quot; title=&quot;enable r/o mode in C client library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-827&quot;&gt;&lt;del&gt;ZOOKEEPER-827&lt;/del&gt;&lt;/a&gt;. enable r/o mode in C client library (rgs via fpj) (fpj: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608620&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1608620&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/Makefile.am&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/README&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/include/zookeeper.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/addrvec.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/addrvec.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/cli.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/load_gen.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zk_adaptor.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zookeeper.c&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestClientRetry.cc&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestReadOnlyClient.cc&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/WatchUtil.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/ZKMocks.cc&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/ZKMocks.h&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/quorum.cfg&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/zkServer.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14525469" author="cnauroth" created="Sat, 2 May 2015 21:34:31 +0100"  >&lt;p&gt;This patch accidentally introduced a compilation failure on Windows, where &lt;tt&gt;socket_t&lt;/tt&gt; is defined to be a Windows &lt;tt&gt;SOCKET&lt;/tt&gt;, not an &lt;tt&gt;int&lt;/tt&gt;.  Therefore, the return types differ between the function declaration and definition:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; zookeeper_connect(zhandle_t *, struct sockaddr_storage *, socket_t);
...
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; socket_t zookeeper_connect(zhandle_t *zh,
                                  struct sockaddr_storage *addr,
                                  socket_t fd)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I filed a patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2178&quot; title=&quot;Native client fails compilation on Windows.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2178&quot;&gt;ZOOKEEPER-2178&lt;/a&gt; to fix this and a few other Windows issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12826750">ZOOKEEPER-2178</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12654339" name="ZOOKEEPER-827.patch" size="64639" author="rgs" created="Mon, 7 Jul 2014 18:10:04 +0100"/>
                            <attachment id="12653416" name="ZOOKEEPER-827.patch" size="64583" author="rgs" created="Tue, 1 Jul 2014 17:42:09 +0100"/>
                            <attachment id="12651217" name="ZOOKEEPER-827.patch" size="49015" author="rgs" created="Wed, 18 Jun 2014 19:50:17 +0100"/>
                            <attachment id="12649743" name="ZOOKEEPER-827.patch" size="45796" author="rgs" created="Wed, 11 Jun 2014 05:45:51 +0100"/>
                            <attachment id="12648917" name="ZOOKEEPER-827.patch" size="38359" author="rgs" created="Mon, 9 Jun 2014 06:58:01 +0100"/>
                            <attachment id="12470238" name="ZOOKEEPER-827.patch" size="46745" author="dorserg" created="Fri, 4 Feb 2011 15:18:35 +0000"/>
                            <attachment id="12451346" name="ZOOKEEPER-827.patch" size="46085" author="dorserg" created="Thu, 5 Aug 2010 18:35:06 +0100"/>
                            <attachment id="12450516" name="ZOOKEEPER-827.patch" size="42964" author="dorserg" created="Mon, 26 Jul 2010 21:53:42 +0100"/>
                            <attachment id="12450160" name="ZOOKEEPER-827.patch" size="35390" author="dorserg" created="Thu, 22 Jul 2010 12:27:27 +0100"/>
                            <attachment id="12450072" name="ZOOKEEPER-827.patch" size="32777" author="dorserg" created="Wed, 21 Jul 2010 19:27:57 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Sep 2010 17:59:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy1fbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>