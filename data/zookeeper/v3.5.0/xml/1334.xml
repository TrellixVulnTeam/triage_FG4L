<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:40:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1334/ZOOKEEPER-1334.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1334] Zookeeper 3.4.x is not OSGi compliant - MANIFEST.MF is flawed</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1334</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;In Zookeeper 3.3.x you use log4j for logging, and the maven dep is&lt;/p&gt;

&lt;p&gt;eg from 3.3.4&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;log4j&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;log4j&amp;lt;/artifactId&amp;gt;
      &amp;lt;version&amp;gt;1.2.15&amp;lt;/version&amp;gt;
      &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now in 3.4.0 or better you changed to use slf4j also/instead. The maven pom.xml now includes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;slf4j-api&amp;lt;/artifactId&amp;gt;
      &amp;lt;version&amp;gt;1.6.1&amp;lt;/version&amp;gt;
      &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;
      &amp;lt;version&amp;gt;1.6.1&amp;lt;/version&amp;gt;
      &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;log4j&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;log4j&amp;lt;/artifactId&amp;gt;
      &amp;lt;version&amp;gt;1.2.15&amp;lt;/version&amp;gt;
      &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But the META-INF/MANIFEST.MF file in the distribution did not change to reflect this.&lt;/p&gt;

&lt;p&gt;The 3.3.4 MANIFEST.MF, import packages&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: javax.management,org.apache.log4j,org.osgi.framework;v
 ersion=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.4,2.0)&quot;&lt;/span&gt;,org.osgi.util.tracker;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.1,2.0)&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the 3.4.1 MANIFEST.MF, import packages:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: javax.management,org.apache.log4j,org.osgi.framework;v
 ersion=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.4,2.0)&quot;&lt;/span&gt;,org.osgi.util.tracker;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.1,2.0)&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This makes using zookeeper 3.4.x in OSGi environments not possible, as we get NoClassDefFoundException for slf4j classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535866">ZOOKEEPER-1334</key>
            <summary>Zookeeper 3.4.x is not OSGi compliant - MANIFEST.MF is flawed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Dec 2011 16:31:37 +0000</created>
                <updated>Wed, 8 Oct 2014 16:55:46 +0100</updated>
                            <resolved>Wed, 19 Dec 2012 08:05:11 +0000</resolved>
                                    <version>3.4.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13173298" author="breed" created="Tue, 20 Dec 2011 16:49:37 +0000"  >&lt;p&gt;thanx for reporting this. what would be a good way of testing this bug so that it doesn&apos;t happen in the future?&lt;/p&gt;</comment>
                            <comment id="13173301" author="davsclaus" created="Tue, 20 Dec 2011 16:50:38 +0000"  >&lt;p&gt;The OSGI manifest is hardcoded in your build.xml&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/zookeeper/trunk/build.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/zookeeper/trunk/build.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You would need to add&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.slf4j;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.6,2.0)&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To include the slf4j dependency&lt;/p&gt;</comment>
                            <comment id="13173307" author="davsclaus" created="Tue, 20 Dec 2011 16:59:59 +0000"  >&lt;p&gt;Benjamin,&lt;/p&gt;

&lt;p&gt;Testing OSGi is not super easy, but there is a OSS project called Pax-Exam that has an OSGi based test kit.&lt;br/&gt;
We use this for other Apache project such as: Camel, ActiveMQ, etc.&lt;/p&gt;

&lt;p&gt;There is a pax exam 2.x release which is even better. We have not yet upgrade from 1.x to 2.x in Camel, as its a bit work to do.&lt;br/&gt;
The 2.x should be much faster and allows to do in-jvm debugging etc. The 1.x is slow and it fork a jvm for testing. And it downloads a lot of JARs etc.&lt;br/&gt;
&lt;a href=&quot;http://team.ops4j.org/wiki/display/paxexam/Pax+Exam&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://team.ops4j.org/wiki/display/paxexam/Pax+Exam&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That was the reason we discovered this as we upgraded camel-zookeeper from 3.3.4 to 3.4.1 and our osgi based test failed.&lt;br/&gt;
The regular junit test passed of course.&lt;/p&gt;

&lt;p&gt;At Apache Camel we have 2 kind of osgi tests&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;karaf feature test &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;osgi unit tests &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The former is just a test that the camel components can be installed in an osgi runtime such as Apache Karaf. This test will frankly bootup Apache Karaf and then do an osgi install of the bundles. That way we can often spot 3rd party JARs which is not OSGi compliant.&lt;/p&gt;

&lt;p&gt;The latter is real full blown osgi unit tests, where we use the components and do something.&lt;/p&gt;

&lt;p&gt;For a quick test, you may in Zookeeper, have the first kind of test, where you will install zookeeper as a bundle in an osgi runtime, such as apache karaf (it can test with using felix, equinox as osgi framework). &lt;/p&gt;



&lt;p&gt;1) - &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/tests/camel-itest-karaf/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/camel/trunk/tests/camel-itest-karaf/&lt;/a&gt;&lt;br/&gt;
2) - &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/tests/camel-itest-osgi/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/camel/trunk/tests/camel-itest-osgi/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13174138" author="davsclaus" created="Wed, 21 Dec 2011 15:19:13 +0000"  >&lt;p&gt;And if you no longer uses log4j directly in zookeeper, then i suggest to mark its maven dependency as &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;. Then end users of zookeeper who uses maven do not depend on log4j. They may use another logger such as logback or java util logging etc.&lt;/p&gt;

&lt;p&gt;Also if so then the import of org.apache.log4j should be removed from the MANIFEST.MF for OSGi end users.&lt;/p&gt;</comment>
                            <comment id="13223100" author="jbonofre" created="Tue, 6 Mar 2012 08:50:09 +0000"  >&lt;p&gt;Hi guys, I&apos;m gonna work on this issue to &quot;fix&quot; ZooKeeper in an OSGi way.&lt;/p&gt;</comment>
                            <comment id="13223454" author="phunt" created="Tue, 6 Mar 2012 17:35:23 +0000"  >&lt;p&gt;Jean-Baptiste I&apos;ll assign to you then. Thanks. Also take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1078&quot; title=&quot;add maven build support to ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1078&quot;&gt;ZOOKEEPER-1078&lt;/a&gt; where we&apos;re working on Maven support, I suspect that will impact any changes you make to the current ant based codebase?&lt;/p&gt;</comment>
                            <comment id="13263619" author="marcus07" created="Fri, 27 Apr 2012 13:52:05 +0100"  >&lt;p&gt;Another issue I am seeing with the Manifest is that package org.apache.zookeeper.server.persistence is not exported.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
Export-Package: org.apache.zookeeper;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.4.3&quot;&lt;/span&gt;,org.apache.zookee
 per.data;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.4.3&quot;&lt;/span&gt;,org.apache.zookeeper.version;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.4.3&quot;&lt;/span&gt;
 ,org.apache.zookeeper.server;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.4.3&quot;&lt;/span&gt;,org.apache.zookeeper.ser
 ver.quorum;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;3.4.3&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13263625" author="marcus07" created="Fri, 27 Apr 2012 13:59:33 +0100"  >&lt;p&gt;Ah - my bad - I see that package org.apache.zookeeper.server.persistence should not be exported.  One of our libs is trying to import this package unnecessarily. &lt;/p&gt;

&lt;p&gt;Please disregard previous comment.&lt;/p&gt;</comment>
                            <comment id="13287902" author="davsclaus" created="Sat, 2 Jun 2012 13:18:49 +0100"  >&lt;p&gt;Any update on this?&lt;/p&gt;</comment>
                            <comment id="13407854" author="davsclaus" created="Fri, 6 Jul 2012 10:20:42 +0100"  >&lt;p&gt;Any update. Dont the Apache Zookeeper project want to be OSGi compliant? Seems like a fairly easy fix in your ANT build script. &lt;/p&gt;</comment>
                            <comment id="13407860" author="jbonofre" created="Fri, 6 Jul 2012 10:29:57 +0100"  >&lt;p&gt;I gonna review and submit a patch if required. Thanks for the reminder Claus.&lt;/p&gt;</comment>
                            <comment id="13407951" author="jbonofre" created="Fri, 6 Jul 2012 13:35:27 +0100"  >&lt;p&gt;Just testing ZooKeeper 3.5.0 and it works in Karaf. In Karaf, I have:&lt;/p&gt;

&lt;p&gt;Bundle-Vendor = The Apache Software Foundation&lt;br/&gt;
Bundle-Name = ZooKeeper Bundle&lt;br/&gt;
Bundle-DocURL = &lt;a href=&quot;http://hadoop.apache.org/zookeeper&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/zookeeper&lt;/a&gt;&lt;br/&gt;
Bundle-SymbolicName = org.apache.hadoop.zookeeper&lt;br/&gt;
Bundle-Version = 3.5.0&lt;br/&gt;
Bundle-License = &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/a&gt;&lt;br/&gt;
Bundle-ManifestVersion = 2&lt;/p&gt;

&lt;p&gt;Import-Package =&lt;br/&gt;
        javax.management,&lt;br/&gt;
        org.apache.log4j,&lt;br/&gt;
        org.osgi.framework;version=&quot;[1.4,2.0)&quot;,&lt;br/&gt;
        org.osgi.util.tracker;version=&quot;[1.1,2.0)&quot;&lt;br/&gt;
Export-Package =&lt;br/&gt;
        org.apache.zookeeper;version=3.5.0,&lt;br/&gt;
        org.apache.zookeeper.data;version=3.5.0,&lt;br/&gt;
        org.apache.zookeeper.version;version=3.5.0,&lt;br/&gt;
        org.apache.zookeeper.server;version=3.5.0,&lt;br/&gt;
        org.apache.zookeeper.server.quorum;version=3.5.0&lt;/p&gt;</comment>
                            <comment id="13407962" author="jbonofre" created="Fri, 6 Jul 2012 13:45:26 +0100"  >&lt;p&gt;However:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;slf4j import should be present (and optional)&lt;/li&gt;
	&lt;li&gt;log4j import should be optional&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13486780" author="chris@die-schneider.net" created="Tue, 30 Oct 2012 10:29:56 +0000"  >&lt;p&gt;If you completely switched the code to use the slf4j-api. Then you should not have compile time deps to slf4j-log4j12 and log4j. These should be scope test. For compile scope you should only depend on slf4j-api. In the Manifest you should also only import the slf4j api packages not log4j. Then it will work great in apache karaf.&lt;/p&gt;</comment>
                            <comment id="13486822" author="chris@die-schneider.net" created="Tue, 30 Oct 2012 11:43:32 +0000"  >&lt;p&gt;I found another problem with the Manifest. org.apache.zookeeper.server.ZooKeeperServer depends on org.apache.zookeeper.server.persistence.FileTxnSnapLog but the package is not exported.&lt;/p&gt;

&lt;p&gt;So I propose to also export the package:&lt;br/&gt;
org.apache.zookeeper.server.persistence&lt;/p&gt;
</comment>
                            <comment id="13504455" author="davsclaus" created="Tue, 27 Nov 2012 08:37:21 +0000"  >&lt;p&gt;Any update of this. Christian or Jean it seems the Zookeeper team is not keen on helping with this.&lt;br/&gt;
Maybe if we provide a .patch file that they can just apply.&lt;/p&gt;

&lt;p&gt;It prevent us from using Zookepper 3.4.x or newer releases in OSGi.&lt;br/&gt;
In fact if the Zookeeper team is &lt;b&gt;NOT&lt;/b&gt; listening to the community, it would be better to remove all the OSGi bits from their MANIFEST.MF file.&lt;br/&gt;
Then at least the release is NOT attempting to be OSGi bundles. &lt;/p&gt;

&lt;p&gt;But of course its a fairly easy fix, and we can help test it works fine in OSGi, ... just that the Zookeeper team need to listen to the community.&lt;/p&gt;</comment>
                            <comment id="13504853" author="phunt" created="Tue, 27 Nov 2012 19:16:39 +0000"  >&lt;p&gt;To be clear, we are keen on seeing this fixed, however we don&apos;t have sufficient experience with osgi to drive this. If you want to see it fixed, something that is known to work in your environment, providing a patch that we can review and commit is the best way to get this addressed.&lt;/p&gt;</comment>
                            <comment id="13529718" author="phunt" created="Wed, 12 Dec 2012 07:45:48 +0000"  >&lt;p&gt;Is this patch ready for commit review, or still work needs to be done? (recent comments seem to indicate still some issues?&lt;/p&gt;</comment>
                            <comment id="13535670" author="davsclaus" created="Wed, 19 Dec 2012 05:46:13 +0000"  >&lt;p&gt;A patch to the build.xml which fixes the osgi manifest issues.&lt;/p&gt;</comment>
                            <comment id="13535672" author="davsclaus" created="Wed, 19 Dec 2012 05:47:14 +0000"  >&lt;p&gt;zookeeper-1334-osgi.patch is the file with the patch.&lt;/p&gt;</comment>
                            <comment id="13535673" author="davsclaus" created="Wed, 19 Dec 2012 05:47:54 +0000"  >&lt;p&gt;Installing zookeeper 3.5.0 JAR in Karaf 2.3.0 works fine now with that patch&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[  58] [Active     ] [            ] [   80] ZooKeeper Bundle (3.5.0)
[  59] [Active     ] [            ] [   80] The Netty Project (3.5.1.Final)
karaf@root&amp;gt; headers 58

ZooKeeper Bundle (58)
---------------------
Manifest-Version = 1.0
Main-&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; = org.apache.zookeeper.server.quorum.QuorumPeer
Ant-Version = Apache Ant 1.8.2
Built-By = davsclaus
Built-At = 12/19/2012 05:44 GMT
Built-On = davsclaus.lan
Implementation-Version = 3.5.0--1
Implementation-Vendor = The Apache Software Foundation
Implementation-Title = org.apache.zookeeper
Created-By = 1.6.0_37-b06-434-11M3909 (Apple Inc.)

Bundle-Vendor = The Apache Software Foundation
Bundle-Name = ZooKeeper Bundle
Bundle-DocURL = http:&lt;span class=&quot;code-comment&quot;&gt;//hadoop.apache.org/zookeeper
&lt;/span&gt;Bundle-SymbolicName = org.apache.hadoop.zookeeper
Bundle-Version = 3.5.0
Bundle-License = http:&lt;span class=&quot;code-comment&quot;&gt;//www.apache.org/licenses/LICENSE-2.0.txt
&lt;/span&gt;Bundle-ManifestVersion = 2

Import-Package = 
	javax.management;resolution:=optional,
	org.slf4j;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.6,2)&quot;&lt;/span&gt;,
	org.jboss.netty.buffer;resolution:=optional;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.2,4)&quot;&lt;/span&gt;,
	org.jboss.netty.channel;resolution:=optional;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.2,4)&quot;&lt;/span&gt;,
	org.jboss.netty.channel.group;resolution:=optional;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.2,4)&quot;&lt;/span&gt;,
	org.jboss.netty.channel.socket.nio;resolution:=optional;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.2,4)&quot;&lt;/span&gt;,
	org.osgi.framework;resolution:=optional;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.5,2)&quot;&lt;/span&gt;,
	org.osgi.util.tracker;resolution:=optional;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.4,2)&quot;&lt;/span&gt;
Export-Package = 
	org.apache.zookeeper;version=3.5.0,
	org.apache.zookeeper.client;version=3.5.0,
	org.apache.zookeeper.data;version=3.5.0,
	org.apache.zookeeper.version;version=3.5.0,
	org.apache.zookeeper.server;version=3.5.0,
	org.apache.zookeeper.server.auth;version=3.5.0,
	org.apache.zookeeper.server.persistence;version=3.5.0,
	org.apache.zookeeper.server.quorum;version=3.5.0

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13535677" author="hadoopqa" created="Wed, 19 Dec 2012 05:52:22 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12561647/zookeeper-1334-osgi.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12561647/zookeeper-1334-osgi.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1422772.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1308//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1308//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13535743" author="phunt" created="Wed, 19 Dec 2012 07:26:25 +0000"  >&lt;p&gt;Updated patch - use --no-prefix with git to create patch.&lt;/p&gt;</comment>
                            <comment id="13535759" author="hadoopqa" created="Wed, 19 Dec 2012 07:56:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12561655/zookeeper-1334-osgi.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12561655/zookeeper-1334-osgi.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1422772.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1309//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1309//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1309//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1309//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1309//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1309//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13535764" author="phunt" created="Wed, 19 Dec 2012 08:05:11 +0000"  >&lt;p&gt;Committed to 3.4.6 and trunk. Thanks Claus!&lt;/p&gt;</comment>
                            <comment id="13535768" author="hadoopqa" created="Wed, 19 Dec 2012 08:12:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12561655/zookeeper-1334-osgi.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12561655/zookeeper-1334-osgi.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1422772.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1310//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1310//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1310//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1310//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1310//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1310//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13535862" author="hudson" created="Wed, 19 Dec 2012 11:04:35 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1777 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1777/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1777/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1334&quot; title=&quot;Zookeeper 3.4.x is not OSGi compliant - MANIFEST.MF is flawed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1334&quot;&gt;&lt;del&gt;ZOOKEEPER-1334&lt;/del&gt;&lt;/a&gt;. Zookeeper 3.4.x is not OSGi compliant - MANIFEST.MF is flawed (Claus Ibsen via phunt) (Revision 1423778)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
phunt : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423778&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423778&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/build.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13576413" author="arnoud" created="Tue, 12 Feb 2013 06:25:47 +0000"  >&lt;p&gt;I&apos;ve tested this patch on a locally build zookeeper (3.4.5 + patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1334&quot; title=&quot;Zookeeper 3.4.x is not OSGi compliant - MANIFEST.MF is flawed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1334&quot;&gt;&lt;del&gt;ZOOKEEPER-1334&lt;/del&gt;&lt;/a&gt;) using Karaf 2.2.8 and 2.3.0 (both Equinox and Felix) with a simple test bundle that creates a ZooKeeper connection upon the bundle being started. &lt;br/&gt;
In my tests this patch only works for the combination Karaf 2.2.8 + Equinox. In the other scenario&apos;s I ran into some NoClassDefFoundErrors on classes located in the packages &lt;tt&gt;javax.security.auth.callback&lt;/tt&gt; , &lt;tt&gt;javax.security.auth.login&lt;/tt&gt; and &lt;tt&gt;javax.security.sasl&lt;/tt&gt; . I resolved this by adding these packages to the Import-Package section of the ZooKeeper bundle.&lt;/p&gt;

&lt;p&gt;@Claus: should these packages be added to the Import-Package section of the MANIFEST of the ZooKeeper bundle or are users expected to expose these packages to ZooKeeper bundle through OSGi framework configuration?&lt;/p&gt;</comment>
                            <comment id="13576415" author="phunt" created="Tue, 12 Feb 2013 06:30:32 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arnoud&quot; class=&quot;user-hover&quot; rel=&quot;arnoud&quot;&gt;Arnoud Glimmerveen&lt;/a&gt;. Please create a new jira for this issue, the original one has already been resolved. Thanks!&lt;/p&gt;</comment>
                            <comment id="13576427" author="davsclaus" created="Tue, 12 Feb 2013 07:01:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arnoud.buitenhuis%40sogeti.nl&quot; class=&quot;user-hover&quot; rel=&quot;arnoud.buitenhuis@sogeti.nl&quot;&gt;Arnoud Buitenhuis&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;No the MANIFEST.MF should contain all the packages that this bundle will or may use. So the 3 packages you found should be added as well.&lt;/p&gt;</comment>
                            <comment id="13576443" author="arnoud" created="Tue, 12 Feb 2013 07:50:50 +0000"  >&lt;p&gt;Okay, I&apos;ve created a new issue for this: &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1645&quot; title=&quot;ZooKeeper OSGi package imports not complete&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1645&quot;&gt;&lt;del&gt;ZOOKEEPER-1645&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13933718" author="fpj" created="Thu, 13 Mar 2014 18:16:58 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12746734">ZOOKEEPER-2056</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12632752">ZOOKEEPER-1647</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12508496">ZOOKEEPER-1078</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12535818">CAMEL-4803</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12535352" name="ZOOKEEPER-1334.patch" size="1136" author="jbonofre" created="Fri, 6 Jul 2012 13:45:44 +0100"/>
                            <attachment id="12561655" name="zookeeper-1334-osgi.patch" size="1949" author="phunt" created="Wed, 19 Dec 2012 07:25:21 +0000"/>
                            <attachment id="12561647" name="zookeeper-1334-osgi.patch" size="1957" author="davsclaus" created="Wed, 19 Dec 2012 05:47:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Dec 2011 16:49:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzskf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>