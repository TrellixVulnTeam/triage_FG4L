<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:51:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-43/ZOOKEEPER-43.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-43] Server side of the auto reset watches patch</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-43</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Moved from SourceForge to Apache.&lt;br/&gt;
&lt;a href=&quot;http://sourceforge.net/tracker/index.php?func=detail&amp;amp;aid=1975262&amp;amp;group_id=209147&amp;amp;atid=1008546&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://sourceforge.net/tracker/index.php?func=detail&amp;amp;aid=1975262&amp;amp;group_id=209147&amp;amp;atid=1008546&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398008">ZOOKEEPER-43</key>
            <summary>Server side of the auto reset watches patch</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="breed">Benjamin Reed</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jun 2008 23:51:46 +0100</created>
                <updated>Sun, 26 Oct 2008 01:10:38 +0000</updated>
                            <resolved>Wed, 22 Oct 2008 00:50:33 +0100</resolved>
                                                    <fixVersion>3.0.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12640243" author="breed" created="Thu, 16 Oct 2008 18:50:52 +0100"  >&lt;p&gt;This has the server side and the Java client implementation. It also has testcases to cover both.&lt;/p&gt;</comment>
                            <comment id="12640359" author="phunt" created="Thu, 16 Oct 2008 23:25:16 +0100"  >&lt;p&gt;can you update the patch to the latest svn, patch is failing.&lt;/p&gt;</comment>
                            <comment id="12640432" author="breed" created="Fri, 17 Oct 2008 06:01:25 +0100"  >&lt;p&gt;Resynced with trunk. Added tests for local watch objects and global watch objects.&lt;/p&gt;</comment>
                            <comment id="12640592" author="phunt" created="Fri, 17 Oct 2008 18:33:50 +0100"  >&lt;p&gt;I updated the patch to fix:&lt;/p&gt;

&lt;p&gt;1) compilation failure in jmx&lt;br/&gt;
2) fixed javadoc of deleteNode&lt;br/&gt;
3) removed tabs introduced to .jute file&lt;/p&gt;</comment>
                            <comment id="12640601" author="phunt" created="Fri, 17 Oct 2008 19:01:35 +0100"  >&lt;p&gt;this updated patch fixes the command line client to output the new stat information&lt;/p&gt;</comment>
                            <comment id="12640697" author="phunt" created="Sat, 18 Oct 2008 00:18:22 +0100"  >&lt;p&gt;I found an additional problem with copyStat in DataTree was not copying pzxid - I added the copy and also updated the tests to check for this. Tests now pass.&lt;/p&gt;</comment>
                            <comment id="12640702" author="fpj" created="Sat, 18 Oct 2008 00:53:51 +0100"  >&lt;p&gt;This is an interesting new feature. If I understand correctly this patch, a client resets its watches upon reconnection if its session is renewed. The main idea is to make reconnection transparent to the client, since with the current code a client has to reset its watches manually.&lt;/p&gt;

&lt;p&gt;Resetting the watches does not make it fully transparent, though, as there might have been events between the time the client was disconnected and the time its watches have been reset. I wonder how big of a deal this is for ZooKeeper applications.&lt;/p&gt;

&lt;p&gt;Because some applications might prefer not to have this feature on due to backward compatibility or because of potential missed events, it might be a good idea to provide a &quot;switch&quot; that applications can use to turn this feature on and off.&lt;/p&gt;</comment>
                            <comment id="12640706" author="phunt" created="Sat, 18 Oct 2008 01:16:54 +0100"  >&lt;p&gt;I&apos;ve updated the patch to support an option to turn off autoreset of watches (just in case the client doesn&apos;t wish to use or has some issue, ie legacy code has unforseen incompatibility).&lt;/p&gt;

&lt;p&gt;   /** This controls whether automatic watch resetting is enabled.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Clients automatically reset watches during session reconnect, this&lt;/li&gt;
	&lt;li&gt;option allows the client to turn off this behavior by setting&lt;/li&gt;
	&lt;li&gt;the environment variable &quot;zookeeper.disableAutoWatchReset&quot; to &quot;true&quot; */&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;by default autoreset of watches is turned on in the client, this allows turning it off.&lt;/p&gt;</comment>
                            <comment id="12640707" author="phunt" created="Sat, 18 Oct 2008 01:22:32 +0100"  >&lt;p&gt;In general I&apos;m ok with this patch but I see the following issues which need to be addressed:&lt;/p&gt;

&lt;p&gt;1) update this jira with some detail on why/how of the changes, include potential impact on new/legacy code&lt;br/&gt;
2) update the forrest documentation to reflect this change&lt;br/&gt;
   programmers guide, specifically watches section (general info and the option to turn off)&lt;br/&gt;
   does/should this cause changes to the example code in the docs?&lt;br/&gt;
3) update the release notes to document this change (releasenotes.xml)&lt;br/&gt;
       specifically call out impact on client code&lt;br/&gt;
       also document the zookeeper.disableAutoWatchReset environment variable which allows users to disable autoreset of watches w/in the client application (server will still support)&lt;/p&gt;</comment>
                            <comment id="12640752" author="phunt" created="Sat, 18 Oct 2008 06:43:20 +0100"  >&lt;p&gt;Another update to the patch - I realized that the watches needed to be cleared on client if autoreset is disabled. Also updated the watcher test to validate this case.&lt;/p&gt;</comment>
                            <comment id="12641547" author="mahadev" created="Tue, 21 Oct 2008 20:28:51 +0100"  >&lt;p&gt;+ 1 for the patch except for minor nits&lt;/p&gt;

&lt;p&gt;1) zookeeper.java includes an import from corba&lt;br/&gt;
2) request.java adding the to string method for setwatches&lt;/p&gt;</comment>
                            <comment id="12641665" author="mahadev" created="Wed, 22 Oct 2008 00:50:33 +0100"  >&lt;p&gt;I fixed the comments and committed the patch. Thanks Ben.&lt;/p&gt;</comment>
                            <comment id="12641777" author="hudson" created="Wed, 22 Oct 2008 11:51:30 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #121 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/121/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/121/&lt;/a&gt;)&lt;br/&gt;
    . Server side of auto reset watches.&lt;/p&gt;</comment>
                            <comment id="12642684" author="phunt" created="Sun, 26 Oct 2008 01:10:38 +0000"  >&lt;p&gt;3.0.0 has been released, closing issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12392405" name="ZOOKEEPER-43.patch" size="49741" author="phunt" created="Sat, 18 Oct 2008 06:43:20 +0100"/>
                            <attachment id="12392393" name="ZOOKEEPER-43.patch" size="45947" author="phunt" created="Sat, 18 Oct 2008 01:16:54 +0100"/>
                            <attachment id="12392390" name="ZOOKEEPER-43.patch" size="44921" author="phunt" created="Sat, 18 Oct 2008 00:18:22 +0100"/>
                            <attachment id="12392365" name="ZOOKEEPER-43.patch" size="41786" author="phunt" created="Fri, 17 Oct 2008 19:01:35 +0100"/>
                            <attachment id="12392361" name="ZOOKEEPER-43.patch" size="40342" author="phunt" created="Fri, 17 Oct 2008 18:33:50 +0100"/>
                            <attachment id="12392332" name="ZOOKEEPER-43.patch" size="37905" author="breed" created="Fri, 17 Oct 2008 06:01:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 16 Oct 2008 17:50:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48091</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzyrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>