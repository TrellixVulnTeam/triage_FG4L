<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:47:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1427/ZOOKEEPER-1427.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1427] Writing to local files is done non-atomically</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1427</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Currently, the writeLongToFile() function opens the file for truncate, writes the new data, syncs, and then closes. If the process crashes after opening the file but before writing the new data, the file may be left empty, causing ZK to &quot;forget&quot; an earlier promise. Instead, it should use RandomAccessFile to avoid truncating.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12547093">ZOOKEEPER-1427</key>
            <summary>Writing to local files is done non-atomically</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2012 21:25:48 +0000</created>
                <updated>Wed, 18 Jul 2012 12:01:52 +0100</updated>
                            <resolved>Tue, 17 Jul 2012 22:22:22 +0100</resolved>
                                    <version>3.4.3</version>
                                    <fixVersion>3.4.4</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13404108" author="phunt" created="Fri, 29 Jun 2012 19:41:01 +0100"  >&lt;p&gt;Comment from the ML that I believe is related to this issue:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;I am currently facing an issue with zookeeper restart.  Version used is
3.4.3

Following is the scenario.

While setting the currentEpoch or acceptedEpoch to file, the zookeeper
process was abruptly killed.

This lead to an empty file being left under the dataDir (acceptedEpoch or
currentEpoch).

On zookeeper restart it fails indicating that null was found in the file.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13404109" author="phunt" created="Fri, 29 Jun 2012 19:42:42 +0100"  >&lt;p&gt;FYI: Simple workaround is to remove the acceptedEpoch/currentEpoch files and restart the server in question.&lt;/p&gt;</comment>
                            <comment id="13404111" author="tlipcon" created="Fri, 29 Jun 2012 19:46:20 +0100"  >&lt;p&gt;Alternatively, &lt;a href=&quot;https://github.com/toddlipcon/hadoop-common/blob/qjm-patchseries/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/util/AtomicFileOutputStream.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/toddlipcon/hadoop-common/blob/qjm-patchseries/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/util/AtomicFileOutputStream.java&lt;/a&gt; might be useful for you.&lt;/p&gt;</comment>
                            <comment id="13404128" author="phunt" created="Fri, 29 Jun 2012 20:01:38 +0100"  >&lt;p&gt;Hi Todd, I don&apos;t think the original suggestion will work (use RAF) - the length of the file may change, in which case you would end up with the possibility of &quot;1000&quot; and then &quot;999&quot; resulting in &quot;9990&quot; (in the error case, ie process failure during update).&lt;/p&gt;

&lt;p&gt;I think we need to use rename for this, that sound right to you? Create the new file as &quot;foo.tmp&quot; and then rename to &quot;foo&quot; once the file is fully created.&lt;/p&gt;</comment>
                            <comment id="13404131" author="phunt" created="Fri, 29 Jun 2012 20:03:34 +0100"  >&lt;p&gt;FYI, I was writing my most recent comment while yours was in-flight. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Seems we are thinking the same thing.&lt;/p&gt;</comment>
                            <comment id="13404169" author="tlipcon" created="Fri, 29 Jun 2012 21:21:18 +0100"  >&lt;p&gt;Yea, I didn&apos;t know whether the data was fixed-length (and &amp;lt;512bytes). Write, fsync, and rename is best. In theory we should fsync the directory, too, but I don&apos;t know of any way to do it from Java &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13404310" author="phunt" created="Sat, 30 Jun 2012 00:22:24 +0100"  >&lt;p&gt;I took Todd&apos;s suggestion and pulled in AtomicFileOutputStream and it&apos;s corresponding test. (thanks HDFS!)&lt;/p&gt;

&lt;p&gt;Take a look at the error handling in QuorumPeer in particular.&lt;/p&gt;

&lt;p&gt;Todd if you could take a look I&apos;d appreciate it. Notice that I added tests for abort, feel free to pull those back. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13404329" author="hadoopqa" created="Sat, 30 Jun 2012 00:58:44 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12534071/ZOOKEEPER-1427.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12534071/ZOOKEEPER-1427.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1355541.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1115//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1115//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1115//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1115//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1115//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1115//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13404400" author="phunt" created="Sat, 30 Jun 2012 06:33:25 +0100"  >&lt;p&gt;Basically the same as the last patch except:&lt;/p&gt;

&lt;p&gt;1) Missed re-throwing the exception in the QP catch block, fixed that.&lt;br/&gt;
2) added this method to the findbugs exclude - the logic is complicated enough that it&apos;s confusing fb (please double check me on this as I&apos;m turning off the safety)&lt;/p&gt;</comment>
                            <comment id="13404406" author="hadoopqa" created="Sat, 30 Jun 2012 07:08:11 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12534090/ZOOKEEPER-1427.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12534090/ZOOKEEPER-1427.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1355541.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1116//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1116//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1116//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1116//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1116//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1116//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13404428" author="fpj" created="Sat, 30 Jun 2012 09:37:38 +0100"  >&lt;p&gt;Great catch, Todd. For the patch Pat is proposing, it might be a good idea to make sure that the server doesn&apos;t make further progress if the write disk fail (exception is thrown in writeLongToFile). As was pointed out in this jira, if the server can&apos;t fulfill its promise, it shouldn&apos;t proceed. You may also want to raise the level of the log message to error in the catch block. &lt;/p&gt;</comment>
                            <comment id="13404488" author="rakeshr" created="Sat, 30 Jun 2012 14:07:46 +0100"  >&lt;p&gt;Its great. Thanks Todd, Pat&lt;/p&gt;

&lt;p&gt;I also come across with the same situation and currentEpoch is coming as empty.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-06-28 14:23:13,307 [myid:2] - ERROR [main:QuorumPeer@453] - Unable to load database on disk
java.io.IOException: Found null in ../dataDir/version-2/currentEpoch
	at org.apache.zookeeper.server.quorum.QuorumPeer.readLongFromFile(QuorumPeer.java:1080)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After analysing found the reason for empty file is due to &apos;no disk space&apos;.&lt;/p&gt;

&lt;p&gt;The patch is really good and proven logic from hdfs. But I&apos;m having one small clarification. Is there any case in zookeeper to look at the &apos;.tmp&apos; file while reading back?&lt;/p&gt;

&lt;p&gt;Say, (Current/accepted)epoch is 3 and the new epoch 4 has updated into &apos;.tmp&apos; file. Unfortunately after updating the &apos;.tmp&apos; file, zk got killed. During next startup whether zk server needs to look at the &apos;.tmp&apos; file as it is having the highest number than the actual epoch?&lt;/p&gt;

&lt;p&gt;-Rakesh&lt;/p&gt;</comment>
                            <comment id="13405154" author="tlipcon" created="Mon, 2 Jul 2012 18:38:33 +0100"  >&lt;p&gt;The patch looks good to me. Thanks for the new tests, I&apos;ll try to pull them back into HDFS soon.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Say, (Current/accepted)epoch is 3 and the new epoch 4 has updated into &apos;.tmp&apos; file. Unfortunately after updating the &apos;.tmp&apos; file, zk got killed. During next startup whether zk server needs to look at the &apos;.tmp&apos; file as it is having the highest number than the actual epoch?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it&apos;s fine &amp;#8211; if it is killed before renaming tmp to the final location, then it also will not have responded to any other process with the &quot;promise&quot;. So it&apos;s OK to forget the promise &amp;#8211; ie it wasn&apos;t successfully made.&lt;/p&gt;</comment>
                            <comment id="13405283" author="fpj" created="Mon, 2 Jul 2012 20:34:14 +0100"  >&lt;blockquote&gt;&lt;p&gt;Say, (Current/accepted)epoch is 3 and the new epoch 4 has updated into &apos;.tmp&apos; file. Unfortunately after updating the &apos;.tmp&apos; file, zk got killed. During next startup whether zk server needs to look at the &apos;.tmp&apos; file as it is having the highest number than the actual epoch?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Servers are not required to complete the recovery phase of the protocol, they can crash before completing. There is a correctness issue only if a server goes back to an epoch that it promised not to go back to. It is ok to accept an epoch and not participating in it. &lt;/p&gt;</comment>
                            <comment id="13406177" author="phunt" created="Wed, 4 Jul 2012 00:48:14 +0100"  >&lt;p&gt;Thanks for the feedback Rakesh/Todd/Flavio.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it might be a good idea to make sure that the server doesn&apos;t make further progress if the write disk fail&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Using Eclipse I backtracked the calls to the atomic operation. It branches quickly, but from what I can see any exceptions thrown when writing the file are handled properly.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is there any case in zookeeper to look at the &apos;.tmp&apos; file while reading back?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the comments clarified this. But basically the server never tries to read the .tmp file, it will only write that file and eventually do the rename. If the rename occurs we&apos;re done, if the rename fails we attempt to remove the .tmp file, regardless we ignore that file outside of the atomicoutputstream named file creation process. (so I think we&apos;re good)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;You may also want to raise the level of the log message to error in the catch block.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll submit an updated patch for this.&lt;/p&gt;
</comment>
                            <comment id="13406198" author="phunt" created="Wed, 4 Jul 2012 01:15:46 +0100"  >&lt;p&gt;The new patches are the same as the old, only the logging has been moved from warn to error as noted in previous comment.&lt;/p&gt;</comment>
                            <comment id="13406738" author="hadoopqa" created="Wed, 4 Jul 2012 21:45:50 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12535016/ZOOKEEPER-1427.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12535016/ZOOKEEPER-1427.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1355657.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1122//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1122//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1122//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1122//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1122//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1122//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13408102" author="marshall" created="Fri, 6 Jul 2012 17:00:41 +0100"  >&lt;p&gt;It seems this only provide atomic write of acceptedEpoch and currentEpoch files. What about the other local files like the log and snapshot files? Seems like they should be written atomically as well.&lt;/p&gt;</comment>
                            <comment id="13408118" author="phunt" created="Fri, 6 Jul 2012 17:17:41 +0100"  >&lt;p&gt;Hi Marshal. That&apos;s not the case as both logs and snapshot files are handled in such a way that this mechanism is not needed (and in the case of logs not possible/wanted).&lt;/p&gt;</comment>
                            <comment id="13408136" author="fpj" created="Fri, 6 Jul 2012 17:31:41 +0100"  >&lt;p&gt;Just to add a few more comments of top of Pat&apos;s. We assume that a server logs to disk before it acks, so if an entry is written partially, then we can safely discard it. We use crcs to check the integrity of entries. &lt;/p&gt;

&lt;p&gt;The same doesn&apos;t hold for the epochs. If the files storing them get corrupted, then we might violate a promise of the server that&apos;s critical to guarantee the correctness of the replication protocol. &lt;/p&gt;</comment>
                            <comment id="13408152" author="phunt" created="Fri, 6 Jul 2012 18:01:54 +0100"  >&lt;p&gt;Flavio you bring up a good point. There is no checksum (etc...) on the epoch files themselves. That&apos;s really unfortunate/shortsighted. We need to do a better job on this in future (when adding new file/types).&lt;/p&gt;

&lt;p&gt;Seems we need to add a new jira for this. In particular I notice that while we are catching the numberformatexception we&apos;re not logging it. Might be useful to do that in the read method directly for debugging purposes. Also someone should verify all the call paths are handling the thrown IOException (NFE is converted to IOE). See &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1507&quot; title=&quot;review reading epoch files, improve logging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1507&quot;&gt;ZOOKEEPER-1507&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13408936" author="fournc" created="Sun, 8 Jul 2012 15:50:25 +0100"  >&lt;p&gt;This patch looks ok to me, +1. Pat do you want to check it in or should I?&lt;/p&gt;</comment>
                            <comment id="13409579" author="breed" created="Mon, 9 Jul 2012 16:43:02 +0100"  >&lt;p&gt;+1 great work. one thing that would be nice, but not needed for correctness and for a later jira, is to use a shutdown hook to cleanup the tmp files.&lt;/p&gt;</comment>
                            <comment id="13416618" author="phunt" created="Tue, 17 Jul 2012 22:22:22 +0100"  >&lt;p&gt;Committed. Thanks Patrick!&lt;/p&gt;</comment>
                            <comment id="13416994" author="hudson" created="Wed, 18 Jul 2012 12:01:52 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1617 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1617/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1617/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1427&quot; title=&quot;Writing to local files is done non-atomically&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1427&quot;&gt;&lt;del&gt;ZOOKEEPER-1427&lt;/del&gt;&lt;/a&gt;. Writing to local files is done non-atomically (phunt) (Revision 1362656)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
phunt : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1362656&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1362656&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/common/AtomicFileOutputStream.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/common/IOUtils.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeer.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/config/findbugsExcludeFile.xml&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/AtomicFileOutputStreamTest.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/ClientBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12535016" name="ZOOKEEPER-1427.patch" size="21212" author="phunt" created="Wed, 4 Jul 2012 01:15:09 +0100"/>
                            <attachment id="12534090" name="ZOOKEEPER-1427.patch" size="20856" author="phunt" created="Sat, 30 Jun 2012 06:32:00 +0100"/>
                            <attachment id="12534071" name="ZOOKEEPER-1427.patch" size="20386" author="phunt" created="Sat, 30 Jun 2012 00:20:13 +0100"/>
                            <attachment id="12535015" name="ZOOKEEPER-1427_br34.patch" size="21220" author="phunt" created="Wed, 4 Jul 2012 01:14:55 +0100"/>
                            <attachment id="12534089" name="ZOOKEEPER-1427_br34.patch" size="20939" author="phunt" created="Sat, 30 Jun 2012 06:31:44 +0100"/>
                            <attachment id="12534070" name="ZOOKEEPER-1427_br34.patch" size="20469" author="phunt" created="Sat, 30 Jun 2012 00:19:58 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jun 2012 18:41:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232251</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwcfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12503</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>