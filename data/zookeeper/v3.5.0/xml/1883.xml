<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1883/ZOOKEEPER-1883.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1883] C client unit test failures</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1883</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;I am seeing unit test failure for c client after I do &apos;make check&apos; as shown below. The failure is pretty consistent, but does not happen always. This is on latest check-out of zookeeper trunk.&lt;/p&gt;

&lt;p&gt;------------------&lt;br/&gt;
Zookeeper_simpleSystem::testAsyncWatcherAutoReset ZooKeeper server started : elapsed 9640 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testDeserializeString : elapsed 0 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testFirstServerDown : elapsed 1007 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testNullData : elapsed 1028 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testIPV6 : elapsed 1008 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testCreate : elapsed 1016 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testPath : elapsed 1083 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testPathValidation : elapsed 1046 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testPing : elapsed 17301 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testAcl : elapsed 1018 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testChroot : elapsed 3057 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testAuth ZooKeeper server started ZooKeeper server started : elapsed 29357 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testHangingClient : elapsed 1037 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testWatcherAutoResetWithGlobal ZooKeeper server started ZooKeeper server started ZooKeeper server started : elapsed 12983 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testWatcherAutoResetWithLocal ZooKeeper server started ZooKeeper server started ZooKeeper server started : elapsed 13028 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testGetChildren2 : elapsed 1031 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testLastZxid : assertion : elapsed 2514&lt;br/&gt;
Zookeeper_watchers::testDefaultSessionWatcher1 : elapsed 52 : OK&lt;br/&gt;
Zookeeper_watchers::testDefaultSessionWatcher2 : elapsed 3 : OK&lt;br/&gt;
Zookeeper_watchers::testObjectSessionWatcher1 : elapsed 52 : OK&lt;br/&gt;
Zookeeper_watchers::testObjectSessionWatcher2 : elapsed 54 : OK&lt;br/&gt;
Zookeeper_watchers::testNodeWatcher1 : elapsed 55 : OK&lt;br/&gt;
Zookeeper_watchers::testChildWatcher1 : elapsed 3 : OK&lt;br/&gt;
Zookeeper_watchers::testChildWatcher2 : elapsed 3 : OK&lt;br/&gt;
tests/TestClient.cc:1281: Assertion: equality assertion failed &lt;span class=&quot;error&quot;&gt;&amp;#91;Expected: 1239, Actual  : 1238&amp;#93;&lt;/span&gt;&lt;br/&gt;
Failures !!!&lt;br/&gt;
Run: 70   Failure total: 1   Failures: 1   Errors: 0&lt;br/&gt;
FAIL: zktest-mt&lt;br/&gt;
==========================================&lt;br/&gt;
1 of 2 tests failed&lt;br/&gt;
Please report to user@zookeeper.apache.org&lt;br/&gt;
==========================================&lt;br/&gt;
make&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;check-TESTS&amp;#93;&lt;/span&gt; Error 1&lt;br/&gt;
make&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: Leaving directory `/home/abutala/work/zk/zookeeper-trunk/src/c&apos;&lt;br/&gt;
make: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;check-am&amp;#93;&lt;/span&gt; Error 2&lt;br/&gt;
------------------&lt;/p&gt;

&lt;p&gt;$ uname -a&lt;br/&gt;
Linux abutala-vBox 3.8.0-35-generic #50~precise1-Ubuntu SMP Wed Dec 4 17:25:51 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12695623">ZOOKEEPER-1883</key>
            <summary>C client unit test failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgs">Raul Gutierrez Segales</assignee>
                                    <reporter username="abutala">Abhiraj Butala</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Feb 2014 03:30:27 +0000</created>
                <updated>Thu, 13 Mar 2014 22:08:19 +0000</updated>
                            <resolved>Thu, 13 Mar 2014 20:58:49 +0000</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                    <component>c client</component>
                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13906209" author="rgs" created="Wed, 19 Feb 2014 22:25:00 +0000"  >&lt;p&gt;Thanks for reporting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abutala&quot; class=&quot;user-hover&quot; rel=&quot;abutala&quot;&gt;Abhiraj Butala&lt;/a&gt;. That test, testLastZxid, wasn&apos;t waiting for the client to be connected so the test was racy. I changed it such that it uses createClient() as all other tests do. I also removed the calls to zookeeper_close() since most other tests don&apos;t clean up anyway. &lt;/p&gt;

&lt;p&gt;It passes now. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;: easy fix for 3.5.0. &lt;/p&gt;</comment>
                            <comment id="13906342" author="hadoopqa" created="Thu, 20 Feb 2014 00:15:43 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12629908/ZOOKEEPER-1883.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12629908/ZOOKEEPER-1883.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1569590.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1930//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1930//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1930//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1930//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1930//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1930//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13932450" author="michim" created="Wed, 12 Mar 2014 21:51:49 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thank you for the patch Raul. I&apos;ll check this in, but I&apos;d like to keep the zookeeper_close calls. I agree most test cases don&apos;t do cleanups, but they really should &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13932545" author="michim" created="Wed, 12 Mar 2014 22:26:32 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1576961&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1576961&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13932653" author="hudson" created="Wed, 12 Mar 2014 23:32:22 +0000"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2246 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2246/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2246/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1883&quot; title=&quot;C client unit test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1883&quot;&gt;&lt;del&gt;ZOOKEEPER-1883&lt;/del&gt;&lt;/a&gt;. C client unit test failures (Raul Gutierrez Segales via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1576961&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1576961&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestClient.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13932762" author="michim" created="Thu, 13 Mar 2014 01:38:08 +0000"  >&lt;p&gt;Ok so zookeeper_close is hanging. I&apos;ll revert the commit.&lt;/p&gt;</comment>
                            <comment id="13932823" author="hudson" created="Thu, 13 Mar 2014 02:46:51 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2249 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2249/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2249/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1883&quot; title=&quot;C client unit test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1883&quot;&gt;&lt;del&gt;ZOOKEEPER-1883&lt;/del&gt;&lt;/a&gt;. C client unit test failures (Raul Gutierrez Segales via michim)&quot; (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1577019&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1577019&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestClient.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933816" author="rgs" created="Thu, 13 Mar 2014 18:25:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ok so zookeeper_close is hanging. I&apos;ll revert the commit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmmm, weird. I&apos;ll look into it. &lt;/p&gt;</comment>
                            <comment id="13933827" author="rgs" created="Thu, 13 Mar 2014 18:28:36 +0000"  >&lt;p&gt;Oh, it&apos;s fine not to call zookeeper_close() because it is being called already by the destructor of the watchCtx:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    ~watchCtx() {
        if (zh) {
            zookeeper_close(zh);
            zh = 0;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Calling it again apparently causes the hangs you are seeing...&lt;/p&gt;</comment>
                            <comment id="13933957" author="michim" created="Thu, 13 Mar 2014 19:52:57 +0000"  >&lt;p&gt;I see that makes sense. I&apos;ll commit your original patch.&lt;/p&gt;</comment>
                            <comment id="13934045" author="michim" created="Thu, 13 Mar 2014 20:58:50 +0000"  >&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1577317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1577317&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13934193" author="hudson" created="Thu, 13 Mar 2014 22:08:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2251 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2251/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2251/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1883&quot; title=&quot;C client unit test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1883&quot;&gt;&lt;del&gt;ZOOKEEPER-1883&lt;/del&gt;&lt;/a&gt;. C client unit test failures (Raul Gutierrez Segales via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1577317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1577317&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/TestClient.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12629908" name="ZOOKEEPER-1883.patch" size="861" author="rgs" created="Wed, 19 Feb 2014 22:22:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 19 Feb 2014 22:25:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzmbr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>