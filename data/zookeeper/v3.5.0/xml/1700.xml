<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:40:13 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1700/ZOOKEEPER-1700.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1700] FLETest consistently failing - setLastSeenQuorumVerifier seems to be hanging</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1700</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;I&apos;m consistently seeing a failure on my laptop when running the FLETest &quot;testJoin&quot; test. What seems to be happening is that the call to setLastSeenQuorumVerifier is hanging.&lt;/p&gt;

&lt;p&gt;See the following log from the test, notice 17:35:57 for the period in question. Note that I turned on debug logging and added a few log messages around the call to setLastSeenQuorumVerifier (you can see the code enter but never leave)&lt;/p&gt;

&lt;p&gt;Note: I&apos;ve applied &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1324&quot; title=&quot;Remove Duplicate NEWLEADER packets from the Leader to the Follower.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1324&quot;&gt;&lt;del&gt;ZOOKEEPER-1324&lt;/del&gt;&lt;/a&gt; to trunk code and then run this test but that doesn&apos;t seem to help. Also note that this test is passing consistently when run against branch-3.4.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-05-07 17:35:57,859 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Follower@65] - FOLLOWING - LEADER ELECTION TOOK - 16
2013-05-07 17:35:57,859 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@436] - LEADING - LEADER ELECTION TOOK - 17
2013-05-07 17:35:57,863 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:FileTxnSnapLog@270] - Snapshotting: 0x0 to /home/phunt/dev/zookeeper-trunk/build/test/tmp/test3690487600947307322.junit.dir/version-2/snapshot.0
2013-05-07 17:35:57,873 [myid:] - INFO  [LearnerHandler-/127.0.0.1:34262:LearnerHandler@269] - Follower sid: 0 : info : 0.0.0.0:11222:11223:participant;0.0.0.0:11221
2013-05-07 17:35:57,878 [myid:] - INFO  [LearnerHandler-/127.0.0.1:34262:LearnerHandler@328] - Synchronizing with Follower sid: 0 maxCommittedLog=0x0 minCommittedLog=0x0 peerLastZxid=0x0
2013-05-07 17:35:57,878 [myid:] - DEBUG [LearnerHandler-/127.0.0.1:34262:LearnerHandler@395] - committedLog is empty but leader and follower are in sync, zxid=0x0
2013-05-07 17:35:57,878 [myid:] - INFO  [LearnerHandler-/127.0.0.1:34262:LearnerHandler@404] - Sending DIFF
2013-05-07 17:35:57,879 [myid:] - DEBUG [LearnerHandler-/127.0.0.1:34262:LearnerHandler@411] - Sending NEWLEADER message to 0
2013-05-07 17:35:57,880 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@331] - Getting a diff from the leader 0x0
2013-05-07 17:35:57,885 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@457] - Learner received NEWLEADER message
2013-05-07 17:35:57,885 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@460] - NEWLEADER calling configfromstring
2013-05-07 17:35:57,885 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@462] - NEWLEADER setting quorum verifier
2013-05-07 17:35:57,886 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1218] - setLastSeenQuorumVerifier called with stale config 0. Current version: 0
2013-05-07 17:36:01,880 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@585] - Shutting down
2013-05-07 17:36:01,881 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@591] - Shutdown called
java.lang.Exception: shutdown Leader! reason: Waiting for a quorum of followers, only synced with sids: [ [1] ]
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:591)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:487)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:949)
2013-05-07 17:36:01,881 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:ZooKeeperServer@398] - shutting down
2013-05-07 17:36:01,881 [myid:] - INFO  [LearnerCnxAcceptor-0.0.0.0/0.0.0.0:11225:Leader$LearnerCnxAcceptor@398] - exception while shutting down acceptor: java.net.SocketException: Socket closed
2013-05-07 17:36:01,882 [myid:] - WARN  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer@979] - PeerState set to LOOKING
2013-05-07 17:36:01,882 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer@863] - LOOKING
2013-05-07 17:36:01,883 [myid:] - DEBUG [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:QuorumPeer@792] - Initializing leader election protocol...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12646537">ZOOKEEPER-1700</key>
            <summary>FLETest consistently failing - setLastSeenQuorumVerifier seems to be hanging</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 May 2013 01:43:31 +0100</created>
                <updated>Sun, 12 May 2013 12:09:13 +0100</updated>
                            <resolved>Sat, 11 May 2013 13:51:43 +0100</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>quorum</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13651674" author="shralex" created="Wed, 8 May 2013 08:11:45 +0100"  >&lt;p&gt;Patrick is looking into this. On my laptop the test consistently passes.&lt;/p&gt;</comment>
                            <comment id="13651689" author="fpj" created="Wed, 8 May 2013 08:54:51 +0100"  >&lt;p&gt;Pat, I had it running in a loop and it eventually failed, but it was not testJoin, it was testTripleElection. I&apos;ve observed the same warning for setLastSeenQuorumVerifier in testJoin, but again it didn&apos;t cause any harm.&lt;/p&gt;

&lt;p&gt;The part that I&apos;ve seen in the logs that called my attention was this one:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-05-08 09:38:50,827 [myid:] - INFO  [Thread-37:FLETest$LEThread@144] - Finished election: 3, 4
2013-05-08 09:38:50,827 [myid:] - INFO  [Thread-39:FLETest$LEThread@144] - Finished election: 4, 4
2013-05-08 09:38:50,827 [myid:] - INFO  [Thread-39:FLETest$LEThread@158] - I&apos;m the leader: 4
2013-05-08 09:38:50,828 [myid:] - INFO  [Thread-33:FLETest$LEThread@144] - Finished election: 1, 4
2013-05-08 09:38:50,828 [myid:] - INFO  [Thread-35:FLETest$LEThread@144] - Finished election: 2, 4
2013-05-08 09:38:50,829 [myid:] - ERROR [Thread-35:NIOServerCnxnFactory$1@92] - Thread Thread[Thread-35,5,main] died
java.lang.IllegalMonitorStateException
        at java.lang.Object.notify(Native Method)
        at org.apache.zookeeper.test.FLETest$LEThread.run(FLETest.java:205)
2013-05-08 09:38:50,829 [myid:] - INFO  [Thread-31:FLETest$LEThread@144] - Finished election: 0, 4
2013-05-08 09:38:50,829 [myid:] - ERROR [Thread-31:NIOServerCnxnFactory$1@92] - Thread Thread[Thread-31,5,main] died
java.lang.IllegalMonitorStateException
        at java.lang.Object.notify(Native Method)
        at org.apache.zookeeper.test.FLETest$LEThread.run(FLETest.java:205)
2013-05-08 09:38:50,928 [myid:] - ERROR [Thread-37:NIOServerCnxnFactory$1@92] - Thread Thread[Thread-37,5,main] died
java.lang.IllegalMonitorStateException
        at java.lang.Object.notify(Native Method)
        at org.apache.zookeeper.test.FLETest$LEThread.run(FLETest.java:205)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the threads are not joining because they are dying. &lt;/p&gt;</comment>
                            <comment id="13651693" author="fpj" created="Wed, 8 May 2013 09:01:31 +0100"  >&lt;p&gt;hmm, I think I&apos;ve spotted a bug, the notify() in line 205 of FLETest seems wrong. Let me upload a patch so that you check and try.&lt;/p&gt;</comment>
                            <comment id="13651729" author="fpj" created="Wed, 8 May 2013 10:03:26 +0100"  >&lt;p&gt;Here is the patch, I have been running FLETest in a loop for about an hour and no test error or failure.&lt;/p&gt;</comment>
                            <comment id="13651748" author="hadoopqa" created="Wed, 8 May 2013 10:45:19 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582272/ZOOKEEPER-1700.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582272/ZOOKEEPER-1700.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1463329.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1471//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1471//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1471//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1471//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1471//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1471//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13651941" author="phunt" created="Wed, 8 May 2013 15:41:11 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; while that&apos;s likely an issue it doesn&apos;t address the problem I&apos;m seeing. I applied the patch and it&apos;s still consistently failing, seemly getting hung up in the learner setLastSeenQuorumVerifier:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-05-08 07:38:20,809 [myid:] - DEBUG [LearnerHandler-/127.0.0.1:35645:LearnerHandler@411] - Sending NEWLEADER message to 0
2013-05-08 07:38:20,810 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@331] - Getting a diff from the leader 0x0
2013-05-08 07:38:20,814 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@457] - Learner received NEWLEADER message
2013-05-08 07:38:20,814 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@460] - NEWLEADER calling configfromstring
2013-05-08 07:38:20,815 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:Learner@462] - NEWLEADER setting quorum verifier
2013-05-08 07:38:20,816 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1218] - setLastSeenQuorumVerifier called with stale config 0. Current version: 0
2013-05-08 07:38:24,810 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@585] - Shutting down
2013-05-08 07:38:24,810 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@591] - Shutdown called
java.lang.Exception: shutdown Leader! reason: Waiting for a quorum of followers, only synced with sids: [ [1] ]
	at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:591)
	at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:487)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:949)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13652139" author="shralex" created="Wed, 8 May 2013 19:02:37 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt; could you please verify that connectOne is not called from connectNewPeers - in this case there&lt;br/&gt;
are no new peers so the check in connectNewPeers should never invoke connectOne. In fact its not necessary to call connectNewPeers in this case since the version of the current config is the same as the version of the lastSeen config, so we&apos;re not learning of new peers.&lt;/p&gt;</comment>
                            <comment id="13652290" author="phunt" created="Wed, 8 May 2013 21:13:15 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; this is very odd. It looks to me like a jvm issue - I find that hard to believe but I don&apos;t know what else it could be.&lt;/p&gt;

&lt;p&gt;It would explain why only I see this. (ubuntu jdk1.6.0_37)&lt;/p&gt;

&lt;p&gt;the following code&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    public synchronized QuorumVerifier getLastSeenQuorumVerifier(){
        LOG.info(&quot;called getLastSeenQuorumVerifier &quot; + lastSeenQuorumVerifier);
        return lastSeenQuorumVerifier;        
    }
    
    public synchronized void connectNewPeers(){
        LOG.info(&quot;connectnewpeers called&quot;);
        QuorumVerifier qv = getQuorumVerifier();
        LOG.info(&quot;got qv&quot;);
        QuorumVerifier lsqv2 = getLastSeenQuorumVerifier();
        LOG.info(&quot;got lsqv2&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in this&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-05-08 12:59:00,143 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1235] - setLastSeenQuorumVerifier called with stale config 0. Current version: 0
2013-05-08 12:59:00,144 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1240] - calling connectnewpeers
2013-05-08 12:59:00,144 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1200] - connectnewpeers called
2013-05-08 12:59:00,144 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1202] - got qv
2013-05-08 12:59:04,140 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@585] - Shutting down
2013-05-08 12:59:04,140 [myid:] - INFO  [QuorumPeer[myid=1]/0:0:0:0:0:0:0:0:11224:Leader@591] - Shutdown called
java.lang.Exception: shutdown Leader! reason: Waiting for a quorum of followers, only synced with sids: [ [1] ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No exception is generated (caught throwable in call to connectNewPeer)&lt;/p&gt;

&lt;p&gt;I&apos;m about to try with a different jvm version.&lt;/p&gt;

</comment>
                            <comment id="13652370" author="phunt" created="Wed, 8 May 2013 22:18:00 +0100"  >&lt;p&gt;I see what it is, the toString command is attempting to resolve the hostname. That&apos;s taking some time on my system (30seconds) and the test is failing before the name is resolved:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221&quot; prio=10 tid=0x8e07c400 nid=0xab8 runnable [0x8df5c000]
   java.lang.Thread.State: RUNNABLE
	at java.net.Inet6AddressImpl.getHostByAddr(Native Method)
	at java.net.InetAddress$1.getHostByAddr(InetAddress.java:880)
	at java.net.InetAddress.getHostFromNameService(InetAddress.java:559)
	at java.net.InetAddress.getHostName(InetAddress.java:502)
	at java.net.InetAddress.getHostName(InetAddress.java:474)
	at java.net.InetSocketAddress$InetSocketAddressHolder.getHostName(InetSocketAddress.java:62)
	at java.net.InetSocketAddress$InetSocketAddressHolder.access$600(InetSocketAddress.java:36)
	at java.net.InetSocketAddress.getHostName(InetSocketAddress.java:323)
	at org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer.toString(QuorumPeer.java:235)
	at org.apache.zookeeper.server.quorum.flexible.QuorumMaj.toString(QuorumMaj.java:117)
	at org.apache.zookeeper.server.quorum.QuorumPeerConfig.writeDynamicConfig(QuorumPeerConfig.java:284)
	at org.apache.zookeeper.server.quorum.QuorumPeer.setLastSeenQuorumVerifier(QuorumPeer.java:1226)
	- locked &amp;lt;0xa91b3b58&amp;gt; (a org.apache.zookeeper.server.quorum.QuorumPeer)
	at org.apache.zookeeper.server.quorum.Learner.syncWithLeader(Learner.java:461)
	- locked &amp;lt;0xa9860ae0&amp;gt; (a org.apache.zookeeper.server.quorum.FollowerZooKeeperServer)
	at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:85)
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:936)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I instrumented QuorumServer.toString and see the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                LOG.info(&quot;resolving:&quot; + clientAddr);
                sw.append(clientAddr.getHostName() + &quot;:&quot; + String.valueOf(clientAddr.getPort()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;notice that &quot;0.0.0.0/0.0.0.0:11221&quot; is quick while &quot;/0.0.0.0:11221&quot; is slow.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-05-08 14:10:46,435 [myid:] - INFO  [LearnerHandler-/127.0.0.1:37973:QuorumPeer$QuorumServer@235] - resolving:0.0.0.0/0.0.0.0:11221
2013-05-08 14:10:46,435 [myid:] - INFO  [LearnerHandler-/127.0.0.1:37973:QuorumPeer$QuorumServer@235] - resolving:0.0.0.0/0.0.0.0:11224
2013-05-08 14:10:46,435 [myid:] - INFO  [LearnerHandler-/127.0.0.1:37973:QuorumPeer$QuorumServer@235] - resolving:0.0.0.0/0.0.0.0:11227
2013-05-08 14:10:46,434 [myid:] - WARN  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer@1219] - setLastSeenQuorumVerifier called with stale config 0. Current version: 0
2013-05-08 14:10:46,449 [myid:] - INFO  [LearnerHandler-/127.0.0.1:37973:CommitProcessor@229] - Configuring CommitProcessor with 4 worker threads.
2013-05-08 14:10:51,571 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@235] - resolving:/0.0.0.0:11221
2013-05-08 14:11:01,810 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@235] - resolving:/0.0.0.0:11224
2013-05-08 14:11:12,055 [myid:] - INFO  [QuorumPeer[myid=0]/0:0:0:0:0:0:0:0:11221:QuorumPeer$QuorumServer@235] - resolving:/0.0.0.0:11227
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13652410" author="phunt" created="Wed, 8 May 2013 23:11:33 +0100"  >&lt;p&gt;This patch fixes the problem for me on trunk. I&apos;ve kept the fix from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; as well. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt; look reasonable? (test passes for me now consistently)&lt;/p&gt;</comment>
                            <comment id="13652468" author="hadoopqa" created="Wed, 8 May 2013 23:54:56 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582369/ZOOKEEPER-1700.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582369/ZOOKEEPER-1700.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1463329.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1472//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1472//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1472//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1472//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1472//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1472//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13652507" author="shralex" created="Thu, 9 May 2013 00:28:06 +0100"  >&lt;p&gt;looks good, thanks Patrick!&lt;/p&gt;</comment>
                            <comment id="13655233" author="fpj" created="Sat, 11 May 2013 12:22:33 +0100"  >&lt;p&gt;+1, Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;Alexander Shraer&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13655242" author="fpj" created="Sat, 11 May 2013 13:51:43 +0100"  >&lt;p&gt;Committed revision 1481317.&lt;/p&gt;</comment>
                            <comment id="13655514" author="hudson" created="Sun, 12 May 2013 12:09:13 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1923 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1923/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1923/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1700&quot; title=&quot;FLETest consistently failing - setLastSeenQuorumVerifier seems to be hanging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1700&quot;&gt;&lt;del&gt;ZOOKEEPER-1700&lt;/del&gt;&lt;/a&gt;. FLETest consistently failing - setLastSeenQuorumVerifier &lt;br/&gt;
  seems to be hanging (phunt via fpj) (Revision 1481317)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
fpj : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1481317&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1481317&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/FLETest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12582369" name="ZOOKEEPER-1700.patch" size="2099" author="phunt" created="Wed, 8 May 2013 23:11:33 +0100"/>
                            <attachment id="12582272" name="ZOOKEEPER-1700.patch" size="606" author="fpj" created="Wed, 8 May 2013 10:03:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 May 2013 07:11:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hze8v3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>