<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:07 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-230/ZOOKEEPER-230.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-230] Improvements to FLE</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-230</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;I&apos;m about to attach a patch that implements the following modifications:&lt;/p&gt;

&lt;p&gt;. Currently, if a server is on leader election and doesn&apos;t receive a notification for some amount of time t, then it sends a new set of notifications if at least one server has delivered a message from the previous set. With this patch, the amount of time a server waits for a notification before sending a new set increases exponentially;&lt;br/&gt;
. I have separated connecting to servers and queuing new notification messages. Before they were all in the same message. The advantage is that now I can tell to an instance of QuorumCnxManager to try to connect to other servers without generating new notification messages;&lt;br/&gt;
. I have changed the logging level of several messages on QuorumCnxManager. They were &quot;warn&quot;, but they should really be either &quot;info&quot; or &quot;debug&quot;. I&apos;ve changed them to info.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12408906">ZOOKEEPER-230</key>
            <summary>Improvements to FLE</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fpj">Flavio Junqueira</assignee>
                                    <reporter username="fpj">Flavio Junqueira</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Nov 2008 14:37:08 +0000</created>
                <updated>Fri, 13 Feb 2009 21:18:50 +0000</updated>
                            <resolved>Fri, 12 Dec 2008 20:22:05 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.1.0</fixVersion>
                                    <component>leaderElection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12649434" author="mahadev" created="Thu, 20 Nov 2008 18:02:31 +0000"  >&lt;p&gt;i think you interchanged the fix and affects versions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; .&lt;/p&gt;</comment>
                            <comment id="12650663" author="mahadev" created="Tue, 25 Nov 2008 18:19:17 +0000"  >&lt;p&gt;flavio,&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Currently, if a server is on leader election and doesn&apos;t receive a notification for some amount of time t, then it sends a new set of notifications if at least one server has delivered a message from the previous set. With this patch, the amount of time a server waits for a notification before sending a new set increases exponentially;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;i dont unserstand the reason behind this. do we generate too many messages for the leader election notification? I think the traffic generated should be small. Also this does not seem to have a limit on exponential backoff. It will increase to insanely large amounts in case of network partition right?&lt;/p&gt;
</comment>
                            <comment id="12650664" author="mahadev" created="Tue, 25 Nov 2008 18:19:35 +0000"  >&lt;p&gt;2 and 3 seem like a good change.&lt;/p&gt;</comment>
                            <comment id="12650733" author="fpj" created="Tue, 25 Nov 2008 21:02:28 +0000"  >&lt;p&gt;This patch is supposed to be an improvement, not a fix to a critical problem. I have seen applications that because of misconfiguration keep running even though the servers are not performing any useful work. In such cases, servers wake up frequently to send new notifications (also generating log messages) without the increase on the amount of time they wait until the next check. So, all I&apos;m trying to do is reduce the amount of work a server performs in such cases by reducing the number of times it wakes up to check the queue of notifications over time. It doesn&apos;t hurt the performance of leader election, though, because if a server is partitioned, then messages will remain queued until the partition heals. You&apos;re right  that the amount of time increases without bounds, and it might be important for long partitions, so I&apos;m ok with having a an upper bound.&lt;/p&gt;</comment>
                            <comment id="12652201" author="fpj" created="Mon, 1 Dec 2008 23:30:44 +0000"  >&lt;p&gt;Upper limits the amount of time between two consecutive checks. With this patch, the maximum interval between two consecutive checks for new notifications is 1 minute. &lt;/p&gt;</comment>
                            <comment id="12652918" author="mahadev" created="Wed, 3 Dec 2008 19:31:31 +0000"  >&lt;p&gt;attaching patch from the top level of the source tree.&lt;/p&gt;</comment>
                            <comment id="12652927" author="mahadev" created="Wed, 3 Dec 2008 19:45:24 +0000"  >&lt;p&gt;the patch loooks good. here are some comments :&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;60000 should be declared as a final static int at the beginning of the class and used as a variable inside the code rather than using the value itself. Its easier to look for and replace.&lt;/li&gt;
	&lt;li&gt;notimteout is updated twice - once when no new notifications are there and other time when its processing some notifications. Why is it incremented in the second case? also, its not bounded in the second case when notification != null&lt;/li&gt;
	&lt;li&gt;LOG.info(&quot;Create new connection&quot;); in QuorumCnxnManager does not give any info on which host its creating the connection to. The log message should be more informative so that its easy to find out what happened late. ( I understand its been the same earlier but it will be good if we can make it more informative).&lt;/li&gt;
	&lt;li&gt;public void connect() . does this method need to be public? Also, some javadoc comments for developeers, on what the method does would be useful.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12652989" author="mahadev" created="Wed, 3 Dec 2008 21:47:49 +0000"  >&lt;p&gt;cacelling the patch for now.. &lt;/p&gt;</comment>
                            <comment id="12653761" author="fpj" created="Fri, 5 Dec 2008 11:51:52 +0000"  >&lt;p&gt;Addressed Mahadev&apos;s comments. Thanks, Mahadev.&lt;/p&gt;</comment>
                            <comment id="12653963" author="fpj" created="Fri, 5 Dec 2008 22:54:10 +0000"  >&lt;p&gt;Forgot to start the workflow...&lt;/p&gt;</comment>
                            <comment id="12655312" author="mahadev" created="Wed, 10 Dec 2008 18:54:32 +0000"  >&lt;p&gt;the patch looks good except for a few nits:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this is just a documentation bug
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+	 * notification checks. This impacts the amount of time to get
+	 * the system up again after long partitions. Currently 6 seconds. 
 	 */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this should be 60 seconds.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;the other one is
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;- 
+                            LOG.info(&quot;About to leave instance:&quot; + proposedLeader + &quot;, &quot; + proposedZxid + &quot;, &quot; + self.getId() + &quot;, &quot; + self.getPeerState());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;we should wrap these lines around to confirm to 80 character columns. We dont have to be pedantic about the column length but 80-90 column is good enough i think. Their are a few more lines I think that are overly long and should be wrapped arnd.&lt;/p&gt;</comment>
                            <comment id="12656145" author="mahadev" created="Fri, 12 Dec 2008 20:03:57 +0000"  >&lt;p&gt;ok fixed the comments i had, and also removed some unused variables in the code.&lt;/p&gt;</comment>
                            <comment id="12656154" author="mahadev" created="Fri, 12 Dec 2008 20:22:05 +0000"  >&lt;p&gt;I just committed this. thanks flavio.&lt;/p&gt;</comment>
                            <comment id="12656952" author="hudson" created="Tue, 16 Dec 2008 10:53:50 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #174 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/174/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/174/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395967" name="ZOOKEEPER-230.patch" size="17573" author="mahadev" created="Fri, 12 Dec 2008 20:03:57 +0000"/>
                            <attachment id="12395406" name="ZOOKEEPER-230.patch" size="16377" author="fpj" created="Fri, 5 Dec 2008 11:51:52 +0000"/>
                            <attachment id="12395205" name="ZOOKEEPER-230.patch" size="15039" author="mahadev" created="Wed, 3 Dec 2008 19:31:31 +0000"/>
                            <attachment id="12395048" name="ZOOKEEPER-230.patch" size="15015" author="fpj" created="Mon, 1 Dec 2008 23:30:44 +0000"/>
                            <attachment id="12394347" name="ZOOKEEPER-230.patch" size="14995" author="fpj" created="Thu, 20 Nov 2008 14:41:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Nov 2008 18:02:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzycf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>