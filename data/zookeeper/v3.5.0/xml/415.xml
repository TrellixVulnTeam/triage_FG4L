<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:46:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-415/ZOOKEEPER-415.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-415] zookeeper c tests hang.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-415</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;the c tests hang sometimes. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12426054">ZOOKEEPER-415</key>
            <summary>zookeeper c tests hang.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mahadev">Mahadev konar</assignee>
                                    <reporter username="mahadev">Mahadev konar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 May 2009 21:29:44 +0100</created>
                <updated>Wed, 8 Jul 2009 21:24:04 +0100</updated>
                            <resolved>Fri, 22 May 2009 08:25:56 +0100</resolved>
                                                    <fixVersion>3.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12711787" author="mahadev" created="Thu, 21 May 2009 21:33:42 +0100"  >&lt;p&gt;the stack traces are - &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;thread 1
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0  0x0000003f41e075a5 in pthread_join () from /lib64/libpthread.so.0
#1  0x000000000044cef4 in pthread_join (t=1075841344, r=0x0) at zootestbuild/trunk/src/c/tests/PthreadMocks.cc:70
#2  0x00000000004591ce in adaptor_finish (zh=0x2aaaac0024d0) at zootestbuild/trunk/src/c/src/mt_adaptor.c:218
#3  0x000000000045066e in zookeeper_close (zh=0x2aaaac0024d0) at zootestbuild/trunk/src/c/src/zookeeper.c:1870
#4  0x000000000044856b in ~watchCtx (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x7fff244a1290) at zootestbuild/trunk/src/c/tests/TestClient.cc:111
#5  0x0000000000448675 in Zookeeper_simpleSystem::testWatcherAutoResetWithLocal (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x12450330) at zootestbuild/trunk/src/c/tests/TestClient.cc:671
#6  0x00000000004403d6 in CppUnit::TestCaller&amp;lt;Zookeeper_simpleSystem&amp;gt;::runTest (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x12450350) at /usr/local/include/cppunit/TestCaller.h:166
#7  0x00002aaaaaaef2bf in CppUnit::TestCaseMethodFunctor::&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;() (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x402009d0) at TestCase.cpp:32
#8  0x00002aaaaaadc664 in CppUnit::DefaultProtector::protect (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x1244db80, functor=@0x402009d0, context=@0x7fff244a1680) at DefaultProtector.cpp:15
#9  0x00002aaaaaaeb049 in CppUnit::ProtectorChain::ProtectFunctor::&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;() (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x402009d0) at ProtectorChain.cpp:20
#10 0x00002aaaaaaeac3f in CppUnit::ProtectorChain::protect (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x1244d8c0, functor=@0x7fff244a16e0, context=@0x7fff244a1680) at ProtectorChain.cpp:77
#11 0x00002aaaaaafb964 in CppUnit::TestResult::protect (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x7fff244a1a00, functor=@0x7fff244a16e0, test=0x31f3, shortDescription=@0x0) at TestResult.cpp:178
#12 0x00002aaaaaaeefb4 in CppUnit::TestCase::run (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x12450350, result=0x7fff244a1a00) at TestCase.cpp:27
#13 0x00002aaaaaaef869 in CppUnit::TestComposite::doRunChildTests (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x1244fb70, controller=0x7fff244a1a00) at TestComposite.cpp:64
#14 0x00002aaaaaaef776 in CppUnit::TestComposite::run (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x1244fb70, result=0x7fff244a1a00) at TestComposite.cpp:23
#15 0x00002aaaaaaef869 in CppUnit::TestComposite::doRunChildTests (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x1244e110, controller=0x7fff244a1a00) at TestComposite.cpp:64
#16 0x00002aaaaaaef776 in CppUnit::TestComposite::run (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x1244e110, result=0x7fff244a1a00) at TestComposite.cpp:23
#17 0x00002aaaaaafb8da in CppUnit::TestResult::runTest (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x7fff244a1a00, test=0x1244e0b0) at TestResult.cpp:145
#18 0x00002aaaaaaff705 in CppUnit::TestRunner::run (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x402009d0, controller=@0x7fff244a1a00, testPath=@0x31f3) at TestRunner.cpp:96
#19 0x00000000004059e1 in main (argc=1, argv=0x7fff244a1bd8) at zootestbuild/trunk/src/c/tests/TestDriver.cc:91
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;thread 2&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#0  0x0000003f41e0c878 in __lll_mutex_lock_wait () from /lib64/libpthread.so.0
#1  0x0000003f41e088a5 in _L_mutex_lock_107 () from /lib64/libpthread.so.0
#2  0x0000003f41e08333 in pthread_mutex_lock () from /lib64/libpthread.so.0
#3  0x000000000041096e in Mutex::acquire (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x7fff244a1280) at zootestbuild/trunk/src/c/tests/ThreadingUtil.cc:40
#4  0x0000000000442121 in watchCtx::putEvent (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;=0x7fff244a1260, evt=@0x401ffea0) at zootestbuild/trunk/src/c/tests/TestClient.cc:134
#5  0x00000000004421c3 in Zookeeper_simpleSystem::watcher (type=1, state=3, path=0x12459e80 &lt;span class=&quot;code-quote&quot;&gt;&quot;/watchtest/child2&quot;&lt;/span&gt;, v=0x7fff244a1260)
    at zootestbuild/trunk/src/c/tests/TestClient.cc:181
#6  0x0000000000458338 in deliverWatchers (zh=0x2aaaac0024d0, type=1, state=3, path=0x12459e80 &lt;span class=&quot;code-quote&quot;&gt;&quot;/watchtest/child2&quot;&lt;/span&gt;, list=0x12456ad8)
    at  zootestbuild/trunk/src/c/src/zk_hashtable.c:270
#7  0x000000000040ca9e in __wrap_deliverWatchers (zh=0x2aaaac0024d0, type=1, state=3, path=0x12459e80 &lt;span class=&quot;code-quote&quot;&gt;&quot;/watchtest/child2&quot;&lt;/span&gt;, list=0x12456ad8)
    at zootestbuild/trunk/src/c/tests/ZKMocks.cc:218
#8  0x0000000000450ab8 in process_completions (zh=0x2aaaac0024d0) at zootestbuild/trunk/src/c/src/zookeeper.c:1407
#9  0x0000000000458af1 in do_completion (v=&amp;lt;value optimized out&amp;gt;) at zootestbuild/trunk/src/c/src/mt_adaptor.c:332
#10 0x0000003f41e062e7 in start_thread () from /lib64/libpthread.so.0
#11 0x0000003f412ce3bd in clone () from /lib64/libc.so.6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12711881" author="mahadev" created="Fri, 22 May 2009 01:31:08 +0100"  >&lt;p&gt;it turns out that we were facing a problem with the list.get() throwing an excpetion when the list is empty, whcih would result in lock not being released and the other thread waiting on the lock and never able to acquire it leading to tests hanging. for the soln.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added wait for events before we ever call getEvents()&lt;/li&gt;
	&lt;li&gt;added assertion in getEvent that would fail if there are no elements available.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12711923" author="hadoopqa" created="Fri, 22 May 2009 02:57:59 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12408761/ZOOKEEPER-415.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12408761/ZOOKEEPER-415.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 777265.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/88/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/88/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/88/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/88/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/88/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/88/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12711974" author="phunt" created="Fri, 22 May 2009 08:25:56 +0100"  >&lt;p&gt;+1, thanks Mahadev&lt;br/&gt;
Committed revision 777413.&lt;/p&gt;</comment>
                            <comment id="12712056" author="hudson" created="Fri, 22 May 2009 13:13:32 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #322 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/322/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/322/&lt;/a&gt;)&lt;br/&gt;
    . zookeeper c tests hang.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408761" name="ZOOKEEPER-415.patch" size="1650" author="mahadev" created="Fri, 22 May 2009 01:31:08 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 May 2009 01:57:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47835</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzviv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33091</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>