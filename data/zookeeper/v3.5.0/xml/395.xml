<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:46 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-395/ZOOKEEPER-395.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-395] Python bindings</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-395</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;ZooKeeper doesn&apos;t have Python bindings. Having them would be useful, and would complement the extant Perl bindings. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12424983">ZOOKEEPER-395</key>
            <summary>Python bindings</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henryr">Henry Robinson</assignee>
                                    <reporter username="henryr">Henry Robinson</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 May 2009 00:59:24 +0100</created>
                <updated>Mon, 21 May 2012 08:17:19 +0100</updated>
                            <resolved>Thu, 14 May 2009 07:38:38 +0100</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12707568" author="henryr" created="Sat, 9 May 2009 01:05:48 +0100"  >&lt;p&gt;Here&apos;s a patch that adds Python bindings for the ZooKeeper C client. This is very early work and comes with attendant warnings about feature incompleteness and bugs. &lt;/p&gt;

&lt;p&gt;Instructions for building and installing are in the enclosed README. Watchers (should) work as the Python C API make it easy to asynchronously call back into the interpreter. &lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;ZOO_OPEN_ACL_UNSAFE = &lt;/p&gt;
{&quot;perms&quot;:0x1f, &quot;scheme&quot;:&quot;world&quot;, &quot;id&quot; :&quot;anyone&quot;}
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;if zookeeper.exists(handle, &quot;/python-test&quot;, None) == None:&lt;br/&gt;
    print zookeeper.create(handle,&quot;/python-test&quot;,&quot;random&quot;,&lt;span class=&quot;error&quot;&gt;&amp;#91;ZOO_OPEN_ACL_UNSAFE&amp;#93;&lt;/span&gt;,0)&lt;br/&gt;
else:&lt;br/&gt;
    print zookeeper.get_acl(handle,&quot;/python-test&quot;)&lt;/p&gt;

&lt;p&gt;There are plenty of things that need improving (again see the README), but I&apos;m offering this early for comment and in the hope of it being useful.&lt;/p&gt;</comment>
                            <comment id="12707580" author="phunt" created="Sat, 9 May 2009 01:29:01 +0100"  >&lt;p&gt;Wow, this is great! Thanks Henry.&lt;/p&gt;

&lt;p&gt;I was able to successfully build and attach to a running zookeeper server (linux).&lt;/p&gt;

&lt;p&gt;I looked at doing a python binding recently but I&apos;m afraid while I&apos;m a decent python programmer I don&apos;t know&lt;br/&gt;
a thing about the python/c/c++ binding. I see you used the direct layer (rather than pyrex or something), that&apos;s&lt;br/&gt;
hard core.&lt;/p&gt;

&lt;p&gt;We&apos;d love to include this. If you could resubmit the patch with:&lt;/p&gt;

&lt;p&gt;1) put it into the src/contrib/zkpython directory (perl is in zkperl)&lt;/p&gt;

&lt;p&gt;2) c++ probably in src/contrib/zkpython/src/c++&lt;br/&gt;
3) python probably in src/contrib/zkpython/src/python&lt;br/&gt;
4) python based tests probably in src/contrib/zkpython/src/test&lt;br/&gt;
5) README.txt in src/contrib/zkpython&lt;/p&gt;


</comment>
                            <comment id="12707915" author="henryr" created="Mon, 11 May 2009 08:06:02 +0100"  >&lt;p&gt;Here&apos;s a new patch conforming to the directory layout as suggested. &lt;/p&gt;

&lt;p&gt;Other improvements: the asynchronous API is now implemented, a nasty reference count bug has been fixed and most of the integer constants from zookeeper.h are now in the module. src/contrib/zkpython/src/python/zk.py demonstrates some of the working features.&lt;/p&gt;

&lt;p&gt;There are no tests yet - that&apos;s next on my to do list, followed by docstrings.&lt;/p&gt;</comment>
                            <comment id="12707974" author="hadoopqa" created="Mon, 11 May 2009 12:21:13 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12407751/ZOOKEEPER-395.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12407751/ZOOKEEPER-395.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 772843.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 159 release audit warnings (more than the trunk&apos;s current 156 warnings).&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/artifact/trunk/current/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/artifact/trunk/current/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/67/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12707977" author="fpj" created="Mon, 11 May 2009 12:27:39 +0100"  >&lt;p&gt;Henry, you have to add the license header to the new files, otherwise the release audit test will fail. &lt;/p&gt;</comment>
                            <comment id="12708119" author="henryr" created="Mon, 11 May 2009 18:30:35 +0100"  >&lt;p&gt;Added license headers. &lt;/p&gt;</comment>
                            <comment id="12708120" author="henryr" created="Mon, 11 May 2009 18:31:25 +0100"  >&lt;p&gt;License headers. &lt;/p&gt;</comment>
                            <comment id="12708124" author="phunt" created="Mon, 11 May 2009 18:38:18 +0100"  >&lt;p&gt;Great! A few fyis:&lt;/p&gt;

&lt;p&gt;1) hadoopqabot only triggers on submit, so if you want to re-run the static verifications cancel and resubmit the patch after attaching the new patch file&lt;/p&gt;

&lt;p&gt;2) if you update a patch just attach with the same name - jira will be able to track the changes that way (the latest file, if dup names, will&lt;br/&gt;
be highlighted). don&apos;t delete the old patch (in general)&lt;/p&gt;

&lt;p&gt;3) why not consider zk.py your smoketest/test? Move it into the test directory, we&apos;ll work out the build.xml changes necessary to build/test/package next. including adding the ability to run unit/func tests from build.xml.&lt;/p&gt;</comment>
                            <comment id="12708128" author="henryr" created="Mon, 11 May 2009 18:49:10 +0100"  >&lt;p&gt;Thanks for the info - as you can tell I&apos;m still getting up to speed with the Jira workflow and am still pretty clumsy with it. Thanks for your patience!&lt;/p&gt;

&lt;p&gt;3) Will do, although I might not have the chance to do so until this evening. I was planning to write a suite of unittest-based tests as well, so I&apos;ll add those to test and figure out the build.xml incantations at the same time.&lt;/p&gt;
</comment>
                            <comment id="12708153" author="phunt" created="Mon, 11 May 2009 19:44:49 +0100"  >&lt;p&gt;No worries. We appreciate you taking the time to contribute back to the community!&lt;/p&gt;

&lt;p&gt;Either way you handle 3 is fine w/me.&lt;/p&gt;</comment>
                            <comment id="12708335" author="hadoopqa" created="Tue, 12 May 2009 07:00:47 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12407797/ZOOKEEPER-395.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12407797/ZOOKEEPER-395.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 772843.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/70/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/70/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/70/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/70/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/70/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/70/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12708621" author="mahadev" created="Tue, 12 May 2009 21:53:46 +0100"  >&lt;p&gt;henry,&lt;br/&gt;
 are you going to add tests to this patch? &lt;/p&gt;</comment>
                            <comment id="12708634" author="henryr" created="Tue, 12 May 2009 22:29:27 +0100"  >&lt;p&gt;Yes they&apos;re in hand - I didn&apos;t get much time to work on them yesterday but I&apos;ve knocked a couple off today.&lt;/p&gt;</comment>
                            <comment id="12708694" author="henryr" created="Wed, 13 May 2009 01:10:52 +0100"  >&lt;p&gt;This version contains tests for create, get, set, exists and delete code paths. The rest to follow as quickly as I can, but I don&apos;t want to hold up this patch trying to get all the unit tests finished if it can go ahead without.&lt;/p&gt;

&lt;p&gt;Also, this patch contains some important bugfixes (tests are good for finding those...) and a change to the way errors are handled. See zkpython/README for details.&lt;/p&gt;

&lt;p&gt;I haven&apos;t yet been able to figure out the right way to run python unittests from build.xml. Any ideas?&lt;/p&gt;


</comment>
                            <comment id="12708772" author="mahadev" created="Wed, 13 May 2009 06:58:54 +0100"  >&lt;p&gt;for the tests, you could write a shell script that would run all the python unit tests and exec that script from the build.xml. would that work? &lt;/p&gt;

&lt;p&gt;also, is their any requirements for python versions?&lt;/p&gt;

</comment>
                            <comment id="12708988" author="phunt" created="Wed, 13 May 2009 17:16:08 +0100"  >&lt;p&gt;shell script would probably be the simplest. I did notice:&lt;br/&gt;
&lt;a href=&quot;http://code.google.com/p/pyanttasks/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://code.google.com/p/pyanttasks/&lt;/a&gt;   specifically the py-test task&lt;br/&gt;
but that would require users to copy the ant task to their ant directory, that might&lt;br/&gt;
be ok, pyanttasks is under apache license so it could be included in the rel, also &lt;br/&gt;
build.xml itself could have a &quot;test-setup&quot; target that copies pyanttasks into ant install&lt;br/&gt;
directory.&lt;/p&gt;

&lt;p&gt;regardless you&apos;ll need to start/stop the server in order to run the python tests. Take a look&lt;br/&gt;
at the rest contrib for an example of what I did for that.&lt;/p&gt;</comment>
                            <comment id="12709051" author="mahadev" created="Wed, 13 May 2009 19:25:24 +0100"  >&lt;p&gt;henry,&lt;br/&gt;
  I tried installing the python module to see how it works but I am getting this error while building &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
src/c/zookeeper.c:19:20: Python.h: No such file or directory
src/c/zookeeper.c:31: error: syntax error before &lt;span class=&quot;code-quote&quot;&gt;&quot;PyObject&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and it fails to compile with lot more errors.&lt;/p&gt;

&lt;p&gt;This looks like some headers not availiable with my python setup. I have python 2.3 installed. Do I need to install some version greater than 2.3? or some other python module?&lt;/p&gt;
</comment>
                            <comment id="12709061" author="mahadev" created="Wed, 13 May 2009 19:39:50 +0100"  >&lt;p&gt;ok I figured it out, I had to install python-devel package. &lt;/p&gt;</comment>
                            <comment id="12709066" author="henryr" created="Wed, 13 May 2009 19:44:37 +0100"  >&lt;p&gt;Hi Mahadev,&lt;/p&gt;

&lt;p&gt;Yes, you&apos;ll need the Python development headers installed. For yum-based systems these are packaged in python-devel. These are a dependency for building the module, but not installing it. I&apos;m not sure if adding ant rules to automatically download the package is the right thing to do, as people often like to manage those things themselves, and version matching will be complex. I should at least add a warning to the readme. &lt;/p&gt;

&lt;p&gt;I think that the module will build correctly against 2.3 (and I&apos;ll be really interested to hear about your experiences when you get Python.h installed), however it certainly won&apos;t build against anything earlier than that (as PyGIL* were introduced in 2.3 which we need to get callbacks working). I don&apos;t use many fancy features, so I hope to be safe. I&apos;ve built it against 2.5.1 here, and have a 2.6 system I can try. I expect 3.0 might have changed the API though, so I doubt the module will work there. &lt;/p&gt;
</comment>
                            <comment id="12709105" author="mahadev" created="Wed, 13 May 2009 21:31:09 +0100"  >&lt;p&gt;yes, adding the warning in README would be good. We dont have to do all the installation in ant but just specifying what to install and what version of python to use is good enough to have in README. Also, it will be good to have it in the README saying whcih versions of python&apos;s we have tried running successfully against.&lt;/p&gt;

&lt;p&gt;Also just a minor change in README.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
python setup.py build
sudo python setup.py install

from zookeeper/src/contrib/zkpython/.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should be &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
python src/python/setup.py build
sudo python src/python/setup.py install

from zookeeper/src/contrib/zkpython/.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12709106" author="mahadev" created="Wed, 13 May 2009 21:39:51 +0100"  >&lt;p&gt;also, the library created should have a name like zookeeper_py.so ... so that users do not get confused by the name zookeeper.so.&lt;/p&gt;</comment>
                            <comment id="12709117" author="phunt" created="Wed, 13 May 2009 21:53:13 +0100"  >&lt;p&gt;Mahadev, I believe the lib name is linked to the &quot;import xxx&quot; that&apos;s done in the python code. (user code currently),&lt;br/&gt;
which is probably why Henry did it this way.&lt;/p&gt;

&lt;p&gt;However we will be putting an OO wrapper anyway, right? So perhaps renaming isn&apos;t such a big deal...?&lt;/p&gt;
</comment>
                            <comment id="12709121" author="henryr" created="Wed, 13 May 2009 21:59:20 +0100"  >&lt;p&gt;You&apos;re right - I think Python searches for modules by filename (certainly when I just tried renaming it, it would no longer import, although there may be more going on behind the scenes), so we would have to write import zookeeper_py which is a bit clunky to me. zookeeper.so goes in the local Python/2.5/site-packages directory on my machine which might make the differentiation clear. Even if we wrap it, it seems like we&apos;d want &lt;b&gt;some&lt;/b&gt; module to be called zookeeper eventually &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12709123" author="henryr" created="Wed, 13 May 2009 22:03:51 +0100"  >&lt;p&gt;This patch adds the beginnings of a testing infrastructure - the module is now built and tested via ant. Updated instructions are in the README. Thanks Mahadev for the useful feedback, most of which I&apos;ve reflected in the README. &lt;/p&gt;

&lt;p&gt;I have gone for a simple shell script at this point, but I reckon in the future we should move to either nose or pyant to run the tests.&lt;/p&gt;

&lt;p&gt;The testing harness starts by starting a local server as in the rest module - thanks Patrick for pointing me at this.&lt;/p&gt;

&lt;p&gt;Both the server script and the test script (zkServer.sh and run_tests.sh in zkpython/src/test) need their executable bits set which is not preserved by this patch. Until they are chmodded, ant will not be able to run the tests correctly. &lt;/p&gt;
</comment>
                            <comment id="12709129" author="mahadev" created="Wed, 13 May 2009 22:13:58 +0100"  >&lt;p&gt;yeah, I think its fine in 2.*/site-packages.&lt;/p&gt;

&lt;p&gt;I tried running zk.py against a local zk server and this is what I got &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
onnecting to localhost:2181 --
Connected, handle is  0
Creating sequence node  0   0
Creating sequence node  1   0
Creating sequence node  2   0
Creating sequence node  3   0
Creating sequence node  4   0
ZNode tree --
|---/ ::
        |---/zk-python :: data
                |---/zk-python/sequencenode0000000003 :: data
                |---/zk-python/sequencenode0000000004 :: data
                |---/zk-python/sequencenode0000000001 :: data
                |---/zk-python/sequencenode0000000002 :: data
                |---/zk-python/sequencenode0000000000 :: data
Segmentation fault
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is zk.py working for you henry?&lt;/p&gt;</comment>
                            <comment id="12709131" author="henryr" created="Wed, 13 May 2009 22:25:49 +0100"  >&lt;p&gt;Yes, it works for me - looks like it&apos;s crashing for you halfway through the ZK tree, probably when it&apos;s reading the /zookeeper directory. Is this a clean server? Running against the latest module version (0.3), using python 2.3?&lt;/p&gt;</comment>
                            <comment id="12709136" author="mahadev" created="Wed, 13 May 2009 22:33:18 +0100"  >&lt;p&gt;hmm that was it... it wasnt  a clean server ... I wonder why it just crashed... I mgiht have had a version of zk database I was doing some testing on &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ... &lt;/p&gt;</comment>
                            <comment id="12709137" author="tlipcon" created="Wed, 13 May 2009 22:35:34 +0100"  >&lt;blockquote&gt;&lt;p&gt;Both the server script and the test script (zkServer.sh and run_tests.sh in zkpython/src/test) need their executable bits set which is not preserved by this patch. Until they are chmodded, ant will not be able to run the tests correctly. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you add a chmod task to the build.xml? Something like the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;chmod-shell-scripts&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;chmod perm=&lt;span class=&quot;code-quote&quot;&gt;&quot;ugo+x&quot;&lt;/span&gt; file=&lt;span class=&quot;code-quote&quot;&gt;&quot;path/to/zkServer.sh&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;chmod perm=&lt;span class=&quot;code-quote&quot;&gt;&quot;ugo+x&quot;&lt;/span&gt; file=&lt;span class=&quot;code-quote&quot;&gt;&quot;path/to/run_tests.sh&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and then make the test target depend on it?&lt;/p&gt;</comment>
                            <comment id="12709144" author="henryr" created="Wed, 13 May 2009 22:48:02 +0100"  >&lt;p&gt;Still, I&apos;d like to know why it crashed - do you still have the snapshot lying around? (and if so, is it possible to send my way for me to start a server against?) &lt;/p&gt;

&lt;p&gt;If the crash was in the C library then that&apos;s ok (from my perspective &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) as it sounds like you had changed something. If it crashed in the module that&apos;s a worry.&lt;/p&gt;</comment>
                            <comment id="12709149" author="mahadev" created="Wed, 13 May 2009 22:53:23 +0100"  >&lt;p&gt;yes I do have the snapshot and am actually trying to see why it failed. Ill update on the jira in some time... &lt;/p&gt;</comment>
                            <comment id="12709165" author="phunt" created="Wed, 13 May 2009 23:29:09 +0100"  >&lt;p&gt;chmod in build.xml shouldn&apos;t be necessary - the committer will set the exec flag before committing.&lt;/p&gt;

&lt;p&gt;NOTE to comitter: be sure to set the exec flag. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12709166" author="phunt" created="Wed, 13 May 2009 23:30:54 +0100"  >&lt;p&gt;+1 &amp;#8211; sounds to me like this is ready to commit.&lt;/p&gt;

&lt;p&gt;are there any issues that must be addressed before commit?&lt;/p&gt;</comment>
                            <comment id="12709188" author="henryr" created="Wed, 13 May 2009 23:38:11 +0100"  >&lt;p&gt;This is my to-do list (not in order of priority):&lt;/p&gt;

&lt;p&gt;1. Finish test coverage&lt;br/&gt;
2. Move from shell script to pyant / nose for testing&lt;br/&gt;
3. Test against Python 2.6, investigate 3.0&lt;br/&gt;
4. Make watcher arguments optional&lt;br/&gt;
5. Design and implement a wrapper object&lt;br/&gt;
6. Add a way to get the numeric error code of the last call made (as failures are exposed as exceptions with string messages)&lt;br/&gt;
7. Add docstrings to the module&lt;/p&gt;

&lt;p&gt;None of these seem serious enough to block the commit, in my opinion. I think the most important one is probably to test against 2.6 and I&apos;ll do that soon. &lt;/p&gt;
</comment>
                            <comment id="12709191" author="mahadev" created="Wed, 13 May 2009 23:40:27 +0100"  >&lt;p&gt;well, it turns out that the seg fault is a bug in c library &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-402&quot; title=&quot;zookeeper c library segfaults on data for a node in zookeeper being null.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-402&quot;&gt;&lt;del&gt;ZOOKEEPER-402&lt;/del&gt;&lt;/a&gt;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. &lt;/p&gt;</comment>
                            <comment id="12709194" author="mahadev" created="Wed, 13 May 2009 23:45:13 +0100"  >&lt;p&gt;yeah the patch looks good. .. Ill take a final look at it and commit it later today.... &lt;/p&gt;</comment>
                            <comment id="12709215" author="henryr" created="Thu, 14 May 2009 00:42:10 +0100"  >&lt;p&gt;Here&apos;s a minor fix as a result of testing against 2.6 - the log file stream was not being correctly reference counted causing a segfault on the GC in 2.6 which is apparently different to 2.5. The README is updated to mention the testing, which all passed after that fix. &lt;/p&gt;</comment>
                            <comment id="12709284" author="mahadev" created="Thu, 14 May 2009 07:34:31 +0100"  >&lt;p&gt;just modified the patch a little bit in build.xml to fail on any of the targets failing.&lt;/p&gt;</comment>
                            <comment id="12709289" author="mahadev" created="Thu, 14 May 2009 07:38:38 +0100"  >&lt;p&gt;I just committed this. thanks henry.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12463716">ZOOKEEPER-765</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12408108" name="ZOOKEEPER-395.patch" size="57936" author="mahadev" created="Thu, 14 May 2009 07:34:31 +0100"/>
                            <attachment id="12408069" name="ZOOKEEPER-395.patch" size="58166" author="henryr" created="Thu, 14 May 2009 00:42:10 +0100"/>
                            <attachment id="12408044" name="ZOOKEEPER-395.patch" size="58045" author="henryr" created="Wed, 13 May 2009 22:03:51 +0100"/>
                            <attachment id="12407945" name="ZOOKEEPER-395.patch" size="51179" author="henryr" created="Wed, 13 May 2009 01:10:52 +0100"/>
                            <attachment id="12407797" name="ZOOKEEPER-395.patch" size="37347" author="henryr" created="Mon, 11 May 2009 18:31:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 9 May 2009 00:29:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47849</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzxz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Python bindings for ZooKeeper. See src/contrib/zkpython/README for details.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>