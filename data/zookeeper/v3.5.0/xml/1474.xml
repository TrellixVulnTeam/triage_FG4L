<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:41 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1474/ZOOKEEPER-1474.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1474] Cannot build Zookeeper with IBM Java: use of Sun MXBean classes</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1474</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;zookeeper.server.NIOServerCnxn and zookeeper.server.NettyServerCnxn imports com.sun.management.UnixOperatingSystemMXBean . This OperatingSystemMXBean class is not implemented by IBM or open java. &lt;/p&gt;

&lt;p&gt;In my case, I need IBM Java so I can run zookeeper in Power ppc64 servers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12558607">ZOOKEEPER-1474</key>
            <summary>Cannot build Zookeeper with IBM Java: use of Sun MXBean classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pvital">Paulo Ricardo Paz Vital</assignee>
                                    <reporter username="adalbas">Adalberto Medeiros</reporter>
                        <labels>
                            <label>build</label>
                    </labels>
                <created>Wed, 30 May 2012 15:31:15 +0100</created>
                <updated>Thu, 13 Mar 2014 18:17:09 +0000</updated>
                            <resolved>Wed, 28 Nov 2012 07:46:11 +0000</resolved>
                                    <version>3.4.0</version>
                    <version>3.4.3</version>
                    <version>3.4.4</version>
                    <version>3.4.5</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13406658" author="adalbas" created="Wed, 4 Jul 2012 19:23:33 +0100"  >&lt;p&gt;I&apos;m working on a patch, considering the following solution:&lt;/p&gt;

&lt;p&gt;I created a wrapper class OSMXBean that implements the methods to get information about system file descriptors (this is actually what the interface com.sun.management.UnixOperatingSystemMXBean does). When calling one of those methods in OSMXBean, it will identify which java vendor the system is using. &lt;/p&gt;

&lt;p&gt;If it&apos;s Sun, it uses reflections to load the sun interface and it calls the methods as it does in the code today.&lt;/p&gt;

&lt;p&gt;However, if it&apos;s IBM java, the OSMXBean execute runtime system calls to get the information needed (number of open file descriptors or maximum allowed). Since i&apos;m using system calls, the commands are Linux specific, so the class also checks the OS.&lt;/p&gt;

&lt;p&gt;I&apos;m adding the patch soon, but I wanted to check beforehand if there are any concerns with that implementation.&lt;/p&gt;</comment>
                            <comment id="13426185" author="phunt" created="Tue, 31 Jul 2012 23:39:07 +0100"  >&lt;p&gt;Sounds reasonable to me Adalberto.&lt;/p&gt;</comment>
                            <comment id="13437822" author="claudef" created="Mon, 20 Aug 2012 13:37:04 +0100"  >&lt;p&gt;Dear colleagues, &lt;br/&gt;
The same error also happens under the IBM Java s390x platform: &lt;br/&gt;
mvn assembly:assembly -DskipTests -Prelease&lt;br/&gt;
hbase source build fails - error missing com.sunmanagement package &lt;br/&gt;
                                         class UnixOperatingSystemMXBean&lt;/p&gt;

&lt;p&gt; package com.sun.management does not exist&lt;br/&gt;
cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : class UnixOperatingSystemMXBean&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hbase.ResourceChecker.ResourceAnalyzer&lt;/p&gt;

&lt;p&gt;A build from source is needed to fix the authentication run-time error&lt;br/&gt;
which currently loads the LinuxPrincipal (defered) class in place of the newer UsernamePrincipal class. This happens on Power64 and s390x machine architecture, for components zookeeper and hbase.  &lt;/p&gt;</comment>
                            <comment id="13476359" author="pvital" created="Mon, 15 Oct 2012 20:18:16 +0100"  >&lt;p&gt;Worked with Adalberto in this issue, that is also affecting version 3.4.4 and trunk. &lt;br/&gt;
Will submit a patch that adds a wrapper class and modifies zookeeper.server.NIOServerCnxn and zookeeper.server.NettyServerCnxn to execute the idea from Adalberto.&lt;/p&gt;</comment>
                            <comment id="13476360" author="pvital" created="Mon, 15 Oct 2012 20:22:35 +0100"  >&lt;p&gt;Wrapper class OSMXBean to solve IBM Java build error.&lt;/p&gt;</comment>
                            <comment id="13476967" author="pvital" created="Tue, 16 Oct 2012 13:52:25 +0100"  >&lt;p&gt;Wrapper class OSMXBean to solve build error when using IBM Java.&lt;/p&gt;</comment>
                            <comment id="13476995" author="hadoopqa" created="Tue, 16 Oct 2012 14:40:03 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12549189/zookeeper-1474.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12549189/zookeeper-1474.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1391526.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1233//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1233//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1233//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1233//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1233//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1233//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13477280" author="pvital" created="Tue, 16 Oct 2012 20:39:00 +0100"  >&lt;p&gt;Wrapper class OSMXBean to solve IBM Java build error. 2nd version with changes after last build error.&lt;/p&gt;</comment>
                            <comment id="13477305" author="hadoopqa" created="Tue, 16 Oct 2012 21:09:12 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12549366/zookeeper-1474-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12549366/zookeeper-1474-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1391526.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1234//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1234//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1234//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1234//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1234//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1234//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13477355" author="pvital" created="Tue, 16 Oct 2012 22:16:25 +0100"  >&lt;p&gt;-1 tests included. The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
Please justify why no new tests are needed for this patch.&lt;br/&gt;
Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;The patch was tested with Sun Java and compiled with IBM Java. &lt;br/&gt;
The patches for each test case that uses com.sun.management.UnixOperatingSystemMXBean will be submitted in different issues, once there are differences between zookeeper-3.4.4 repository and trunk repository, and can effect the submission of each one. &lt;/p&gt;</comment>
                            <comment id="13484054" author="pvital" created="Thu, 25 Oct 2012 12:55:38 +0100"  >&lt;p&gt;New version of same patch but now including a new JUnit test case to test the new OSMXBean class.&lt;/p&gt;</comment>
                            <comment id="13484066" author="claudef" created="Thu, 25 Oct 2012 13:27:11 +0100"  >&lt;p&gt;Dear colleagues,&lt;/p&gt;

&lt;p&gt;When doing any platform adjustment in the Hadoop ecosystem, please beside &lt;br/&gt;
adding the support for the IBM Power 7 computers &quot;ppc64&quot;, also add the &lt;br/&gt;
support for the system z &quot;legacy&quot; platform, better known as OS &lt;br/&gt;
architecture &quot;s390x&quot;, &lt;/p&gt;

&lt;p&gt; All another concerns regarding support of IBM Java 7 also apply to the &lt;br/&gt;
IBM mainframe world, so whatever fix you add to Hadoop components, as &lt;br/&gt;
mentioned below, will also work on our larger IBM platform.  Yes, we are &lt;br/&gt;
building an open version of Apache Hadoop on system z and our pilot works &lt;br/&gt;
fine. &lt;/p&gt;

&lt;p&gt;Regards, &lt;br/&gt;
Claude &lt;/p&gt;

&lt;p&gt;Claude Falbriard &lt;br/&gt;
Certified IT Specialist L2 - Middleware&lt;br/&gt;
AMS Hortol&#226;ndia / SP - Brazil&lt;br/&gt;
phone:    +55 19 9837 0789&lt;br/&gt;
cell:         +55 13 8117 3316&lt;br/&gt;
e-mail:    claudef@br.ibm.com&lt;/p&gt;




&lt;p&gt;From:   &quot;Paulo Ricardo Paz Vital (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
To:     claudef@br.ibm.com&lt;br/&gt;
Date:   25/10/2012 09:57&lt;br/&gt;
Subject:        &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Updated&amp;#93;&lt;/span&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1474&quot; title=&quot;Cannot build Zookeeper with IBM Java: use of Sun MXBean classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1474&quot;&gt;&lt;del&gt;ZOOKEEPER-1474&lt;/del&gt;&lt;/a&gt;) Cannot build Zookeeper &lt;br/&gt;
with IBM Java: use of Sun MXBean classes&lt;/p&gt;




&lt;p&gt;     [ &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1474?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1474?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel&lt;/a&gt; &lt;br/&gt;
]&lt;/p&gt;

&lt;p&gt;Paulo Ricardo Paz Vital updated &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1474&quot; title=&quot;Cannot build Zookeeper with IBM Java: use of Sun MXBean classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1474&quot;&gt;&lt;del&gt;ZOOKEEPER-1474&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
-----------------------------------------------&lt;/p&gt;

&lt;p&gt;    Attachment: zookeeper-1474-v3.patch&lt;/p&gt;

&lt;p&gt;New version of same patch but now including a new JUnit test case to test &lt;br/&gt;
the new OSMXBean class.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1474&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1474&lt;/a&gt;&lt;br/&gt;
zookeeper-1474-v3.patch&lt;br/&gt;
imports com.sun.management.UnixOperatingSystemMXBean . This &lt;br/&gt;
OperatingSystemMXBean class is not implemented by IBM or open java. &lt;br/&gt;
servers.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message is automatically generated by JIRA.&lt;br/&gt;
If you think it was sent incorrectly, please contact your JIRA &lt;br/&gt;
administrators&lt;br/&gt;
For more information on JIRA, see: &lt;a href=&quot;http://www.atlassian.com/software/jira&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.atlassian.com/software/jira&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="13484068" author="hadoopqa" created="Thu, 25 Oct 2012 13:28:54 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12550770/zookeeper-1474-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12550770/zookeeper-1474-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1391526.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1239//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1239//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1239//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1239//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1239//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1239//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13487548" author="phunt" created="Wed, 31 Oct 2012 05:34:02 +0000"  >&lt;p&gt;This looks good, a few small comments/questions on the patch:&lt;/p&gt;

&lt;p&gt;1) &quot;//only works on Unix&quot; this is confusing, I think you mean these params are only available on unix? would be good to update the comment and move into the top of the block (if I&apos;m interpreting that right)&lt;/p&gt;

&lt;p&gt;2) remove the commented out code in src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java&lt;/p&gt;

&lt;p&gt;3) what systems and jvms have you tested this on?&lt;/p&gt;

&lt;p&gt;4) can you verify the compilation and that your tests pass on Windows? I see that you have a test that explicitly fails except on unix. We have users running on windows systems.&lt;/p&gt;

&lt;p&gt;FYI: I will add an IBM JDK specific job to jenkins when this goes in: &lt;a href=&quot;https://builds.apache.org//view/S-Z/view/ZooKeeper/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org//view/S-Z/view/ZooKeeper/&lt;/a&gt; Notice we have windows jobs there already.&lt;/p&gt;


</comment>
                            <comment id="13488688" author="pvital" created="Thu, 1 Nov 2012 13:28:10 +0000"  >&lt;p&gt;Patrick,&lt;/p&gt;

&lt;p&gt;Regarding the points 1 and 2, I removed the comments and I&apos;m going to upload a new version of the patch.&lt;/p&gt;

&lt;p&gt;Regarding question 3, I tested this patch in a RHEL6.3 on x86_64 using IBM Java (6SR11) and Oracle Java (6u35) and in a RHEL6.3 on PPC64 using IBM Java (6SR11).&lt;/p&gt;

&lt;p&gt;Regarding the tests in Windows, I haven&apos;t tested it, yet. I need set up a system before and then can try the patch using IBM Java (6SR11) and Oracle Java (6u35). However, the portion of code modified is Unix only (the problem is the import of com.sun.management.UnixOperatingSystemMXBean class), so I guess Windows tests will not be impacted with this changes - that maintains the Unix only usage.&lt;/p&gt;</comment>
                            <comment id="13488690" author="pvital" created="Thu, 1 Nov 2012 13:30:18 +0000"  >&lt;p&gt;New version of same patch - removed some unnecessary comments.&lt;/p&gt;</comment>
                            <comment id="13488709" author="hadoopqa" created="Thu, 1 Nov 2012 14:10:09 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551707/ZOOKEEPER-1474-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551707/ZOOKEEPER-1474-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1404288.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1243//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1243//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1243//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1243//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1243//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1243//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13488759" author="pvital" created="Thu, 1 Nov 2012 15:29:04 +0000"  >&lt;p&gt;New version of same patch. Forgot to add the new test case on last patch.&lt;/p&gt;</comment>
                            <comment id="13488772" author="pvital" created="Thu, 1 Nov 2012 15:41:40 +0000"  >&lt;p&gt;New version of same patch. Forgot to add the new test case on last patch.&lt;/p&gt;</comment>
                            <comment id="13488790" author="hadoopqa" created="Thu, 1 Nov 2012 15:58:59 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551721/ZOOKEEPER-1474-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551721/ZOOKEEPER-1474-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1404288.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1245//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1245//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1245//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1245//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1245//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1245//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13488799" author="hadoopqa" created="Thu, 1 Nov 2012 16:19:52 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12551722/ZOOKEEPER-1474-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12551722/ZOOKEEPER-1474-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1404288.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1246//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1246//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1246//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1246//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1246//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1246//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13495470" author="pvital" created="Mon, 12 Nov 2012 18:22:04 +0000"  >&lt;p&gt;Modified the OSMXBeanTest class to work on Windows environment.&lt;/p&gt;</comment>
                            <comment id="13495507" author="hadoopqa" created="Mon, 12 Nov 2012 18:59:03 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12553147/ZOOKEEPER-1474-v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12553147/ZOOKEEPER-1474-v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1404288.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1259//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1259//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1259//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1259//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1259//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1259//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13501736" author="pvital" created="Wed, 21 Nov 2012 07:34:22 +0000"  >&lt;p&gt;This problem still happens on new release 3.4.5. Tested the last patch (v6) on 3.4.5 release and all test-cases worked.&lt;/p&gt;</comment>
                            <comment id="13505278" author="phunt" created="Wed, 28 Nov 2012 07:46:11 +0000"  >&lt;p&gt;Thanks Adalberto!&lt;/p&gt;</comment>
                            <comment id="13505281" author="phunt" created="Wed, 28 Nov 2012 07:50:49 +0000"  >&lt;p&gt;Sorry, I mis-attributed this - should be thanking Paulo Ricardo Paz Vital. Thanks Paulo, sorry for the mixup!&lt;/p&gt;</comment>
                            <comment id="13505364" author="hudson" created="Wed, 28 Nov 2012 11:07:22 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1757 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1757/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1757/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1474&quot; title=&quot;Cannot build Zookeeper with IBM Java: use of Sun MXBean classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1474&quot;&gt;&lt;del&gt;ZOOKEEPER-1474&lt;/del&gt;&lt;/a&gt;. Cannot build Zookeeper with IBM Java: use of Sun MXBean classes (Adalberto Medeiros via phunt) (Revision 1414566)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
phunt : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1414566&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1414566&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NIOServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/util/OSMXBean.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/OSMXBeanTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13529335" author="nekto0n" created="Tue, 11 Dec 2012 21:06:57 +0000"  >&lt;p&gt;Took a look at this one and came with a better implementation.&lt;br/&gt;
Spawning new &lt;tt&gt;bash&lt;/tt&gt; process is a heavyweight operation (compared to a few fs system calls) especially if it&apos;s a huge server process:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;although linux uses copy-on-write during &lt;tt&gt;fork&lt;/tt&gt; it&apos;s still an expensive operation because it needs to create new process and walk through all memory pages to mark them as readonly&lt;/li&gt;
	&lt;li&gt;despite of linux overcommit feature we can receive &lt;tt&gt;ENOMEM&lt;/tt&gt; if host is running out of RAM&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m attaching new patch, which is simplier. Please, take a look. Maybe it lacks comments, but works.&lt;/p&gt;</comment>
                            <comment id="13530386" author="nekto0n" created="Wed, 12 Dec 2012 21:49:47 +0000"  >&lt;p&gt;Updated version - uses Scanner to parse limits file.&lt;/p&gt;</comment>
                            <comment id="13562566" author="nekto0n" created="Fri, 25 Jan 2013 09:57:56 +0000"  >&lt;p&gt;Can someone take a look at this ticket?&lt;/p&gt;</comment>
                            <comment id="13713467" author="plinnell" created="Fri, 19 Jul 2013 10:03:33 +0100"  >&lt;p&gt;Patch works, even with the missing tests.&lt;/p&gt;</comment>
                            <comment id="13933769" author="fpj" created="Thu, 13 Mar 2014 18:17:09 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12527958">ZOOKEEPER-1236</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12612097">ZOOKEEPER-1565</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12614036">ZOOKEEPER-1570</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12614037">ZOOKEEPER-1571</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12611885">ZOOKEEPER-1564</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12551707" name="ZOOKEEPER-1474-v4.patch" size="11195" author="pvital" created="Thu, 1 Nov 2012 13:30:18 +0000"/>
                            <attachment id="12551722" name="ZOOKEEPER-1474-v5.patch" size="13560" author="pvital" created="Thu, 1 Nov 2012 15:41:40 +0000"/>
                            <attachment id="12553147" name="ZOOKEEPER-1474-v6.patch" size="13929" author="pvital" created="Mon, 12 Nov 2012 18:22:04 +0000"/>
                            <attachment id="12560647" name="ZOOKEEPER-1474.patch" size="4200" author="nekto0n" created="Wed, 12 Dec 2012 21:49:47 +0000"/>
                            <attachment id="12560451" name="don_t_use_bash_to_get_stats.patch" size="4148" author="nekto0n" created="Tue, 11 Dec 2012 21:07:09 +0000"/>
                            <attachment id="12549366" name="zookeeper-1474-v2.patch" size="11413" author="pvital" created="Tue, 16 Oct 2012 20:39:00 +0100"/>
                            <attachment id="12550770" name="zookeeper-1474-v3.patch" size="13778" author="pvital" created="Thu, 25 Oct 2012 12:55:38 +0100"/>
                            <attachment id="12549189" name="zookeeper-1474.patch" size="10595" author="pvital" created="Mon, 15 Oct 2012 20:22:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 31 Jul 2012 22:39:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwe3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12772</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>