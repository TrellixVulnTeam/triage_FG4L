<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:52:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-483/ZOOKEEPER-483.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-483] ZK fataled on me, and ugly</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-483</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;here are the part of the log whereby my zookeeper instance crashed, taking 3 out of 5 down, and thus ruining the quorum for all clients:&lt;/p&gt;

&lt;p&gt;2009-07-23 12:29:06,769 WARN org.apache.zookeeper.server.NIOServerCnxn: Exception causing close of session 0x52276d1d5161350 due to java.io.IOException: Read error&lt;br/&gt;
2009-07-23 12:29:00,756 WARN org.apache.zookeeper.server.quorum.Follower: Exception when following the leader&lt;br/&gt;
java.io.EOFException&lt;br/&gt;
        at java.io.DataInputStream.readInt(DataInputStream.java:375)&lt;br/&gt;
        at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:65)&lt;br/&gt;
        at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:108)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Follower.readPacket(Follower.java:114)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Follower.followLeader(Follower.java:243)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:494)&lt;br/&gt;
2009-07-23 12:29:06,770 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5161350 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.168:39489&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,770 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb0578 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.159:46797&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,771 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa013e NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.153:33998&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,771 WARN org.apache.zookeeper.server.NIOServerCnxn: Exception causing close of session 0x52276d1d5160593 due to java.io.IOException: Read error&lt;br/&gt;
2009-07-23 12:29:06,808 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e02bb NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.158:53758&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa13e4 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.154:58681&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691382 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59967&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb1354 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.163:49957&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa13cd NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.150:34212&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691383 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.159:46813&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb0350 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59956&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e139b NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.156:55138&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,809 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e1398 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.167:41257&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5161355 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.153:34032&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d516011c NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.155:56314&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e056b NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.155:56322&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d516011f NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.157:49618&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e11ea NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.10.20.42:55483&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e02ba NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.157:49632&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb1355 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.169:58824&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,810 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691378 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.161:40973&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691380 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59944&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e0311 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.160:56167&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e690374 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.169:58815&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e139f NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.151:51396&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e139c NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.155:56315&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e69137b NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59859&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5160594 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.151:51370&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,811 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e69137a NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.159:46682&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5160347 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.165:35722&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e69137f NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.159:46754&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5160121 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.155:56307&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb0126 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.154:58688&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa05fc NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.152:45067&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e0316 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.169:58800&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,812 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e69137e NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.159:46737&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e69137d NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.159:46733&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa13df NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.156:55137&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb134e NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.166:40443&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691381 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.161:41086&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5161356 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.165:35719&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb1349 NIOServerCnxn: java.nio.channels.SocketChannel[connected local=/10.20.20.151:2181 remote=/10.&lt;br/&gt;
20.20.158:53770]&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x12276d15dfb0352 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.165:35718&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,813 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691379 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59823&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d516000e NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.150:34216&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x32276d15d2e1397 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.169:58829&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e69137c NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59862&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa0140 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.155:56271&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x42276d1d3fa13e1 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.157:49608&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x22276d15e691377 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.162:59789&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x52276d1d5160593 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.165:35703&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.FinalRequestProcessor: shutdown of request processor complete&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.quorum.FollowerRequestProcessor: FollowerRequestProcessor exited loop!&lt;br/&gt;
2009-07-23 12:29:06,814 INFO org.apache.zookeeper.server.quorum.CommitProcessor: CommitProcessor exited loop!&lt;br/&gt;
2009-07-23 12:29:06,815 INFO org.apache.zookeeper.server.quorum.Follower: shutdown called&lt;br/&gt;
java.lang.Exception: shutdown Follower&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:427)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:498)&lt;br/&gt;
2009-07-23 12:29:06,815 WARN org.apache.zookeeper.server.NIOServerCnxn: Ignoring exception&lt;br/&gt;
java.nio.channels.CancelledKeyException&lt;br/&gt;
        at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:55)&lt;br/&gt;
        at sun.nio.ch.SelectionKeyImpl.readyOps(SelectionKeyImpl.java:69)&lt;br/&gt;
        at org.apache.zookeeper.server.NIOServerCnxn$Factory.run(NIOServerCnxn.java:201)&lt;br/&gt;
2009-07-23 12:29:06,815 INFO org.apache.zookeeper.server.quorum.QuorumPeer: LOOKING&lt;br/&gt;
2009-07-23 12:29:06,817 WARN org.apache.zookeeper.server.NIOServerCnxn: Exception causing close of session 0x0 due to java.io.IOException: ZooKeeperServer not running&lt;br/&gt;
2009-07-23 12:29:06,817 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x0 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.156:55206&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:06,818 WARN org.apache.zookeeper.server.NIOServerCnxn: Exception causing close of session 0x0 due to java.io.IOException: ZooKeeperServer not running&lt;br/&gt;
2009-07-23 12:29:06,818 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x0 NIOServerCnxn: java.nio.channels.SocketChannel&lt;span class=&quot;error&quot;&gt;&amp;#91;connected local=/10.20.20.151:2181 remote=/10.20.20.155:56331&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;elided lots of the same&amp;#93;&lt;/span&gt;&lt;br/&gt;
2009-07-23 12:29:33,008 INFO org.apache.zookeeper.server.NIOServerCnxn: closing session:0x0 NIOServerCnxn: java.nio.channels.SocketChannel[connected local=/10.20.20.151:2181 remote=/10.20.20.152:5945&lt;br/&gt;
8]&lt;br/&gt;
2009-07-23 12:29:33,011 FATAL org.apache.zookeeper.server.SyncRequestProcessor: Severe unrecoverable error, exiting&lt;br/&gt;
java.net.SocketException: Socket closed&lt;br/&gt;
        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)&lt;br/&gt;
        at java.net.SocketOutputStream.write(SocketOutputStream.java:136)&lt;br/&gt;
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)&lt;br/&gt;
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Follower.writePacket(Follower.java:100)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:52)&lt;br/&gt;
        at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:131)&lt;br/&gt;
        at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:76)&lt;/p&gt;

&lt;p&gt;The good news is when I restarted the downed zookeepers, everything returned to normal.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431300">ZOOKEEPER-483</key>
            <summary>ZK fataled on me, and ugly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="breed">Benjamin Reed</assignee>
                                    <reporter username="ryanobjc">ryan rawson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jul 2009 21:40:49 +0100</created>
                <updated>Sat, 5 Sep 2009 23:36:20 +0100</updated>
                            <resolved>Tue, 25 Aug 2009 06:58:27 +0100</resolved>
                                    <version>3.1.1</version>
                                    <fixVersion>3.2.1</fixVersion>
                    <fixVersion>3.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12734807" author="mahadev" created="Thu, 23 Jul 2009 22:51:56 +0100"  >&lt;p&gt;ryan,&lt;/p&gt;

&lt;p&gt; can you post (attach as files) server logs in different files for all you zookeeper servers? The one exception I can see if that you had problems with your disk but I am surprised to see it took down 2 of your other servers.&lt;/p&gt;

&lt;p&gt;also, please explain the setup &amp;#8211;  I am assuming all the servers are on different machines, and the logs and snapshots go to different disk?&lt;/p&gt;</comment>
                            <comment id="12734809" author="mahadev" created="Thu, 23 Jul 2009 22:53:28 +0100"  >&lt;p&gt; I meant - &lt;/p&gt;

&lt;p&gt;The one exception I can see IS (instead of IF)  that you had problems with your disk but I am surprised to see it took down 2 of your other servers.&lt;/p&gt;</comment>
                            <comment id="12734811" author="phunt" created="Thu, 23 Jul 2009 22:58:30 +0100"  >&lt;p&gt;Someone is looking at this but I realized that we don&apos;t have any docs which detail supervision of the&lt;br/&gt;
ZooKeeper server jvms. In particular &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-485&quot; title=&quot;need ops documentation that details supervision of ZK server processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-485&quot;&gt;&lt;del&gt;ZOOKEEPER-485&lt;/del&gt;&lt;/a&gt; has been created to add this detail to the&lt;br/&gt;
documentation. Typically (although perhaps not always) you want to have supervision of the zk server &lt;br/&gt;
processes - if the JVM exists abnormally for any reason the supervisor should notify the&lt;br/&gt;
operator and restart the ZK server process. We&apos;ll have to see what caused this issue, but in some&lt;br/&gt;
cases where a ZK server sees an un-recoverable problem (say the JVM heap is exhausted, etc...) &lt;br/&gt;
the jvm process will exit &amp;#8211; the supervisor will need to restart the jvm.&lt;/p&gt;</comment>
                            <comment id="12734813" author="ryanobjc" created="Thu, 23 Jul 2009 23:07:04 +0100"  >&lt;p&gt;here is the complete log set from all 5 of our quorum members for the entire day. note that the event happens around 12:30 pm local (PDT) time in the log.  I restarted the 3 crashed machines at about 13:30.&lt;/p&gt;

&lt;p&gt;They were not run under supervision, but clearly they should.  The machines in question only have 1 disk, since they also run other hadoop things, and I was hoping that the quorum model would provide reliability even if the local disk isnt 100%.  Although, having said that, the local disk seems to be ok, since nothing else on them has died.&lt;/p&gt;</comment>
                            <comment id="12734814" author="mahadev" created="Thu, 23 Jul 2009 23:10:40 +0100"  >&lt;p&gt;sorry I misread the exception , thanks pat for pointing it out &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it looks like the followers could not send acks back to the leader and thus exited. If you have monitoring in place, you should check for any network problems that might have happend during that time. Usually we run our zookeeper servers as daemons that are restarted autamtically if they fail. So in this case the servers that failed would have automatically restarted.&lt;/li&gt;
	&lt;li&gt;also, &lt;a href=&quot;http://hadoop.apache.org/zookeeper/docs/r3.2.0/zookeeperAdmin.html#sc_CrossMachineRequirements&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/zookeeper/docs/r3.2.0/zookeeperAdmin.html#sc_CrossMachineRequirements&lt;/a&gt; has some hints on setting up your environment (servers on different rack/switch etc.). you might want to read through it.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12734840" author="mahadev" created="Fri, 24 Jul 2009 01:06:22 +0100"  >&lt;p&gt;marking it for 3.2.1 for now...&lt;/p&gt;</comment>
                            <comment id="12734865" author="mahadev" created="Fri, 24 Jul 2009 02:29:56 +0100"  >&lt;p&gt;ryan,&lt;br/&gt;
 ben just noticed this. this is the exception from your trace - &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ava.net.SocketException: Socket closed
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
at org.apache.zookeeper.server.quorum.Follower.writePacket(Follower.java:100)
at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:52)
at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:131)
at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:76)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We only put flush in SyncRequestProcessor in 3.2. Are you sure you are using 3.1.1? &lt;/p&gt;



</comment>
                            <comment id="12734902" author="phunt" created="Fri, 24 Jul 2009 06:10:26 +0100"  >&lt;p&gt;Mahadev, we now include a bunch of environment information in the server log when it starts up, the following&lt;br/&gt;
can be found in a few of the logs that Ryan attached:&lt;/p&gt;

&lt;p&gt;2009-07-23 13:27:39,363 INFO org.apache.zookeeper.server.ZooKeeperServer: Server environment:zookeeper.version=3.2.0--1, built on 05/15/2009 06:05 GMT&lt;/p&gt;

&lt;p&gt;Looks to me like it&apos;s not an official release, afaict something between 3.1 and 3.2 (built 5/15/2009), perhaps Ryan can shed more light&lt;br/&gt;
on the specifics.&lt;/p&gt;</comment>
                            <comment id="12734907" author="phunt" created="Fri, 24 Jul 2009 06:36:53 +0100"  >&lt;p&gt;This is interesting, from hbase-hadoop-zookeeper-sv2borg153.log&lt;/p&gt;

&lt;p&gt;2009-07-23 12:29:01,661 INFO org.apache.zookeeper.server.quorum.Follower: shutdown called&lt;br/&gt;
java.lang.Exception: shutdown Follower&lt;br/&gt;
	at org.apache.zookeeper.server.quorum.Follower.shutdown(Follower.java:427)&lt;br/&gt;
	at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:498)&lt;/p&gt;

&lt;p&gt;I don&apos;t see any further quorum messages until ~11 seconds later:&lt;/p&gt;

&lt;p&gt;2009-07-23 12:29:12,516 FATAL org.apache.zookeeper.server.SyncRequestProcessor: Severe unrecoverable error, exiting&lt;br/&gt;
java.net.SocketException: Socket closed&lt;br/&gt;
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)&lt;br/&gt;
	at java.net.SocketOutputStream.write(SocketOutputStream.java:136)&lt;br/&gt;
	at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)&lt;br/&gt;
	at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)&lt;br/&gt;
	at org.apache.zookeeper.server.quorum.Follower.writePacket(Follower.java:100)&lt;br/&gt;
	at org.apache.zookeeper.server.quorum.SendAckRequestProcessor.flush(SendAckRequestProcessor.java:52)&lt;br/&gt;
	at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:131)&lt;br/&gt;
	at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:76)&lt;br/&gt;
2009-07-23 12:29:12,559 WARN org.apache.zookeeper.server.NIOServerCnxn: Exception causing close of session 0x0 due to java.io.IOException: ZooKeeperServer not running&lt;/p&gt;

&lt;p&gt;SRP should be running/active if the QP is not following the leader?&lt;/p&gt;</comment>
                            <comment id="12734912" author="ryanobjc" created="Fri, 24 Jul 2009 06:46:31 +0100"  >&lt;p&gt;In hbase we have a custom version, here it is:&lt;/p&gt;

&lt;p&gt;zookeeper-r785019-hbase-1329.jar&lt;/p&gt;

&lt;p&gt;based on that svn #, and plus a small patch from hbase-1329. This was opened as &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-457&quot; title=&quot;Make ZookeeperMain public, support for HBase (and other) embedded clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-457&quot;&gt;&lt;del&gt;ZOOKEEPER-457&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think the problem might have happened when someone ran a heavy duty map-reduce with a major pile of disk IO intermediate output, which may have delayed zookeeper log writes. I&apos;m looking to move the quorum to other machines.&lt;/p&gt;</comment>
                            <comment id="12734916" author="breed" created="Fri, 24 Jul 2009 06:56:05 +0100"  >&lt;p&gt;i was able to reproduce the problem. and the patch was a missing catch for a socket exception.&lt;/p&gt;</comment>
                            <comment id="12737677" author="phunt" created="Fri, 31 Jul 2009 20:40:20 +0100"  >&lt;p&gt;Cancelling patch &amp;#8211; I see two issues with this patch that need to be addressed:&lt;/p&gt;

&lt;p&gt;1) in two places the following code was added:&lt;/p&gt;

&lt;p&gt;+                } catch (IOException e1) &lt;/p&gt;
{
+                }

&lt;p&gt;notice that the exception is not being logged. It should be logged as a warning&lt;/p&gt;

&lt;p&gt;2) the flush method is declared to throw IOException, but we are eating it. Perhaps&lt;br/&gt;
it&apos;s ok in this situation? Regardless, having a comment here that states why&lt;br/&gt;
it&apos;s ok to eat the exception would be useful.&lt;/p&gt;

&lt;p&gt;You sure we should be eating the exception here? rather than handling upstream?&lt;/p&gt;

&lt;p&gt;I&apos;m esp worried given that this class sendackrequestprocessor doesn&apos;t own the socket, but&lt;br/&gt;
we are closing the socket here (as part of the patch). Seems like a caution signal to me. Should&lt;br/&gt;
this be handled by higher level code? Perhaps other RPs will have smilar issue (ioexception&lt;br/&gt;
on flush that needs to be handled/cleanedup etc...)&lt;/p&gt;
</comment>
                            <comment id="12739898" author="breed" created="Thu, 6 Aug 2009 05:55:30 +0100"  >&lt;p&gt;I&apos;ve addressed 1) in the attached patch.&lt;/p&gt;

&lt;p&gt;for 2) we are not eating the IOException. we are actually shutting things down. the bug is actually that we are passing it up to the upper layer, which does not know anything about the follower thread. we need to handle it here.&lt;/p&gt;</comment>
                            <comment id="12740514" author="hadoopqa" created="Fri, 7 Aug 2009 12:38:24 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12415695/ZOOKEEPER-483.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12415695/ZOOKEEPER-483.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 801839.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/176/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/176/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12741002" author="breed" created="Sun, 9 Aug 2009 02:12:48 +0100"  >&lt;p&gt;fixed patch to apply cleanly.&lt;/p&gt;</comment>
                            <comment id="12741572" author="hadoopqa" created="Mon, 10 Aug 2009 22:41:41 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12415974/ZOOKEEPER-483.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12415974/ZOOKEEPER-483.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 802188.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/182/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/182/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/182/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/182/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/182/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/182/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12741599" author="mahadev" created="Mon, 10 Aug 2009 23:27:33 +0100"  >&lt;p&gt;the test added with the patch failed on hudson.. ben can you take a look?&lt;/p&gt;</comment>
                            <comment id="12741753" author="hadoopqa" created="Tue, 11 Aug 2009 09:25:41 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12415974/ZOOKEEPER-483.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12415974/ZOOKEEPER-483.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 803000.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/185/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/185/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/185/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/185/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/185/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/185/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12741801" author="hudson" created="Tue, 11 Aug 2009 11:53:44 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #412 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/412/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/412/&lt;/a&gt;)&lt;br/&gt;
    reverted: . ZK fataled on me, and ugly&lt;br/&gt;
. ZK fataled on me, and ugly&lt;/p&gt;</comment>
                            <comment id="12742077" author="mahadev" created="Tue, 11 Aug 2009 22:41:10 +0100"  >&lt;p&gt;i ran ant test -Dtestcase=QuorumTest after applying the patch for 6 times and out of 6 it crashed with the same problems that hudson noticed. I will post the logs as soon - (it crashes the jvm so junit fails to get the logs)&lt;/p&gt;</comment>
                            <comment id="12742078" author="mahadev" created="Tue, 11 Aug 2009 22:41:50 +0100"  >&lt;p&gt;i meant, it crashed 2 out of 6 times.&lt;/p&gt;</comment>
                            <comment id="12742080" author="mahadev" created="Tue, 11 Aug 2009 22:46:18 +0100"  >&lt;p&gt;the logs of one of the QuoruMTest failures on my machine.&lt;/p&gt;</comment>
                            <comment id="12742096" author="mahadev" created="Tue, 11 Aug 2009 23:19:47 +0100"  >&lt;p&gt;this is the code that is causing the system.exit() in the logs that I uploaded&lt;/p&gt;

&lt;p&gt;File: FollowerZooKeeperServer.java - line 128&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pendingTxns.size() == 0) {
            LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Committing &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.toHexString(zxid)
                    + &lt;span class=&quot;code-quote&quot;&gt;&quot; without seeing txn&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
        }
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; firstElementZxid = pendingTxns.element().zxid;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (firstElementZxid != zxid) {
            LOG.fatal(&lt;span class=&quot;code-quote&quot;&gt;&quot;Committing zxid 0x&quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.toHexString(zxid)
                    + &lt;span class=&quot;code-quote&quot;&gt;&quot; but next pending txn 0x&quot;&lt;/span&gt;
                    + &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.toHexString(firstElementZxid));
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(12);

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12742524" author="mahadev" created="Wed, 12 Aug 2009 20:04:40 +0100"  >&lt;p&gt;attaching the log file with trace turned on...&lt;/p&gt;</comment>
                            <comment id="12743533" author="breed" created="Sat, 15 Aug 2009 04:56:23 +0100"  >&lt;p&gt;The test case exposed another bug: log truncation was not being done properly with the buffered inputstream. i modified the test to make it fail reliably and then fixed the bug.&lt;/p&gt;</comment>
                            <comment id="12743547" author="breed" created="Sat, 15 Aug 2009 06:05:32 +0100"  >&lt;p&gt;just to be clear. this bug isn&apos;t completely fixed and the test case should still be failing. i just want to make sure it fails reliably on the hudson machine.&lt;/p&gt;</comment>
                            <comment id="12743563" author="hadoopqa" created="Sat, 15 Aug 2009 08:42:05 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12416645/ZOOKEEPER-483.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12416645/ZOOKEEPER-483.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 803300.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/186/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/186/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/186/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/186/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/186/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/186/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12744151" author="mahadev" created="Mon, 17 Aug 2009 19:15:06 +0100"  >&lt;p&gt;ben,&lt;br/&gt;
 should me make the calss positioninputstream a seperate public class under persistence? It might be helpful for other use cases... just a thought.... &lt;/p&gt;</comment>
                            <comment id="12744165" author="mahadev" created="Mon, 17 Aug 2009 19:46:17 +0100"  >&lt;p&gt;also, ben I think we should create a seperate jira for truncate and link it to this. We dont have to upload seperate patches, but just for accounting sakes.&lt;/p&gt;</comment>
                            <comment id="12745709" author="mahadev" created="Thu, 20 Aug 2009 23:46:35 +0100"  >&lt;p&gt;included in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-508&quot; title=&quot;proposals and commits for DIFF and Truncate messages from the leader to followers is buggy.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-508&quot;&gt;&lt;del&gt;ZOOKEEPER-508&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12747232" author="mahadev" created="Tue, 25 Aug 2009 06:58:27 +0100"  >&lt;p&gt;fix included in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-508&quot; title=&quot;proposals and commits for DIFF and Truncate messages from the leader to followers is buggy.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-508&quot;&gt;&lt;del&gt;ZOOKEEPER-508&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12433490">ZOOKEEPER-509</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12433256">ZOOKEEPER-508</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12431304">ZOOKEEPER-485</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12416251" name="QuorumTest.log" size="546179" author="mahadev" created="Tue, 11 Aug 2009 22:46:18 +0100"/>
                            <attachment id="12416352" name="QuorumTest.log.gz" size="3311630" author="mahadev" created="Wed, 12 Aug 2009 20:04:40 +0100"/>
                            <attachment id="12416645" name="ZOOKEEPER-483.patch" size="8768" author="breed" created="Sat, 15 Aug 2009 04:56:23 +0100"/>
                            <attachment id="12415974" name="ZOOKEEPER-483.patch" size="4497" author="breed" created="Sun, 9 Aug 2009 02:12:48 +0100"/>
                            <attachment id="12415695" name="ZOOKEEPER-483.patch" size="4478" author="breed" created="Thu, 6 Aug 2009 05:52:03 +0100"/>
                            <attachment id="12414405" name="ZOOKEEPER-483.patch" size="4074" author="breed" created="Fri, 24 Jul 2009 06:56:05 +0100"/>
                            <attachment id="12414385" name="zklogs.tar.gz" size="4657942" author="ryanobjc" created="Thu, 23 Jul 2009 23:07:04 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jul 2009 21:51:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47783</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzv9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-508&quot; title=&quot;proposals and commits for DIFF and Truncate messages from the leader to followers is buggy.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-508&quot;&gt;&lt;strike&gt;ZOOKEEPER-508&lt;/strike&gt;&lt;/a&gt; includes the fix.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>