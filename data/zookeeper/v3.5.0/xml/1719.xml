<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1719/ZOOKEEPER-1719.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1719] zkCli.sh, zkServer.sh and zkEnv.sh regression caused by ZOOKEEPER-1663</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1719</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1663&quot; title=&quot;scripts don&amp;#39;t work when path contains spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1663&quot;&gt;&lt;del&gt;ZOOKEEPER-1663&lt;/del&gt;&lt;/a&gt; is incorrect. It assumes the shell is bash since it uses bash array construction, e.g.:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 96   LIBPATH=(&lt;span class=&quot;code-quote&quot;&gt;&quot;${ZOOKEEPER_PREFIX}&quot;&lt;/span&gt;/share/zookeeper/*.jar)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This does NOT work if /bin/sh points to /bin/dash as it does on Ubuntu. &lt;/p&gt;

&lt;p&gt;It fails as so:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;zkEnv.sh: 96: zkEnv.sh: Syntax error: &quot;(&quot; unexpected (expecting &quot;fi&quot;)                                                                                                                                                                                              &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If I change the shebang at the top to use &quot;/bin/bash&quot; instead of &quot;/bin/sh&quot; it works as expected. I don&apos;t know the full details of why using a bash array was chosen as the solution but I don&apos;t think it is the right way to deal with spaces in these paths...&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux (Ubuntu 12.04) with dash shell&lt;/p&gt;</environment>
        <key id="12654768">ZOOKEEPER-1719</key>
            <summary>zkCli.sh, zkServer.sh and zkEnv.sh regression caused by ZOOKEEPER-1663</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marshall">Marshall McMullen</assignee>
                                    <reporter username="marshall">Marshall McMullen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jun 2013 19:00:17 +0100</created>
                <updated>Fri, 25 Jul 2014 12:25:04 +0100</updated>
                            <resolved>Fri, 28 Jun 2013 17:28:58 +0100</resolved>
                                    <version>3.4.5</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13693235" author="marshall" created="Tue, 25 Jun 2013 19:20:48 +0100"  >&lt;p&gt;I would suggest changing the shebang to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#!/usr/bin/env bash
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to match what we do in zkServer.sh&lt;/p&gt;</comment>
                            <comment id="13694049" author="marshall" created="Wed, 26 Jun 2013 17:12:24 +0100"  >&lt;p&gt;This same problem also exists in zkCli.sh. For consistency, I would suggest we change all the scripts to use bash to guard against this regression in the future. Specifically, zkCleanup.sh, zkCli.sh and zkEnv.sh are the three that are using &quot;/bin/sh&quot; instead of &quot;/usr/bin/env bash&quot;.&lt;/p&gt;</comment>
                            <comment id="13694051" author="marshall" created="Wed, 26 Jun 2013 17:17:48 +0100"  >&lt;p&gt;Change &quot;/bin/sh&quot; to &quot;/usr/bin/env bash&quot; to ensure bash-isms being used in these scripts will work correctly.&lt;/p&gt;</comment>
                            <comment id="13694078" author="hadoopqa" created="Wed, 26 Jun 2013 17:51:55 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12589768/ZOOKEEPER-1719.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12589768/ZOOKEEPER-1719.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1495522.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1506//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1506//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1506//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1506//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1506//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1506//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13694141" author="marshall" created="Wed, 26 Jun 2013 19:28:45 +0100"  >&lt;p&gt;No tests were provided because this is only an init script...&lt;/p&gt;</comment>
                            <comment id="13695544" author="fournc" created="Fri, 28 Jun 2013 17:23:40 +0100"  >&lt;p&gt;Verified that this fixes the issue in Ubuntu. +1.&lt;/p&gt;</comment>
                            <comment id="13696091" author="hudson" created="Sat, 29 Jun 2013 12:00:07 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1975 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1975/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1975/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1719&quot; title=&quot;zkCli.sh, zkServer.sh and zkEnv.sh regression caused by ZOOKEEPER-1663&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1719&quot;&gt;&lt;del&gt;ZOOKEEPER-1719&lt;/del&gt;&lt;/a&gt;. zkCli.sh, zkServer.sh and zkEnv.sh regression caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1663&quot; title=&quot;scripts don&amp;#39;t work when path contains spaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1663&quot;&gt;&lt;del&gt;ZOOKEEPER-1663&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
  (Marshall McMullen via camille) (Revision 1497830)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
camille : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1497830&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1497830&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/bin/zkCleanup.sh&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/bin/zkCli.sh&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/bin/zkEnv.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933695" author="fpj" created="Thu, 13 Mar 2014 18:16:54 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                            <comment id="14074297" author="hudson" created="Fri, 25 Jul 2014 12:25:04 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2385 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2385/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2385/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1937&quot; title=&quot;init script needs fixing for ZOOKEEPER-1719&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1937&quot;&gt;&lt;del&gt;ZOOKEEPER-1937&lt;/del&gt;&lt;/a&gt;. init script needs fixing for &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1719&quot; title=&quot;zkCli.sh, zkServer.sh and zkEnv.sh regression caused by ZOOKEEPER-1663&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1719&quot;&gt;&lt;del&gt;ZOOKEEPER-1719&lt;/del&gt;&lt;/a&gt; (Marshall McMullen via phunt) (phunt: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1613326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1613326&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/packages/rpm/init.d/zookeeper&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589768" name="ZOOKEEPER-1719.patch" size="1059" author="marshall" created="Wed, 26 Jun 2013 17:17:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Jun 2013 16:51:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335045</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzfmy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>