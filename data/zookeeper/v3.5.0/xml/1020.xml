<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:51:21 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1020/ZOOKEEPER-1020.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1020] Implement function in C client to determine which host you&apos;re currently connected to.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1020</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;On occasion it might be useful to determine which host your Zookeeper client is currently connected to, be it for debugging purposes or otherwise. A possible signature for that function:&lt;/p&gt;

&lt;p&gt;const char* zoo_get_connected_host(zhandle_t *zh, char *buffer, size_t buffer_size, unsigned short *port);&lt;/p&gt;

&lt;p&gt;Clients could use it like below:&lt;/p&gt;

&lt;p&gt;  char buffer&lt;span class=&quot;error&quot;&gt;&amp;#91;33&amp;#93;&lt;/span&gt;;&lt;br/&gt;
  unsigned short port = 0;&lt;br/&gt;
  if (!zoo_get_connected_host(zh, buffer, sizeof(buffer), &amp;amp;port))&lt;br/&gt;
    return EXIT_FAILURE;&lt;/p&gt;

&lt;p&gt;  printf(&quot;The connected host is: %s:%d\n&quot;, buffer, port);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501468">ZOOKEEPER-1020</key>
            <summary>Implement function in C client to determine which host you&apos;re currently connected to.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tyree731">Stephen Tyree</assignee>
                                    <reporter username="tyree731">Stephen Tyree</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2011 14:39:48 +0000</created>
                <updated>Wed, 23 Nov 2011 19:22:33 +0000</updated>
                            <resolved>Thu, 17 Mar 2011 01:01:00 +0000</resolved>
                                                    <fixVersion>3.4.0</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13006954" author="tyree731" created="Tue, 15 Mar 2011 15:02:34 +0000"  >&lt;p&gt;Patch to add functionality.&lt;/p&gt;</comment>
                            <comment id="13006955" author="tyree731" created="Tue, 15 Mar 2011 15:04:08 +0000"  >&lt;p&gt;This time with proper spacing.&lt;/p&gt;</comment>
                            <comment id="13007045" author="tyree731" created="Tue, 15 Mar 2011 17:41:32 +0000"  >&lt;p&gt;Posting discussion with Benjamin Reed while on the IRC channel:&lt;/p&gt;

&lt;p&gt;13:19 &amp;lt; breed_zk&amp;gt;  it looks good, but i think it might be better to use sockaddr instead of converting to a string. we should return a null if we aren&apos;t connected. your&lt;br/&gt;
                  patch really tells the host that you should be connected to rather than which one you are connected to. maybe use getpeername&lt;br/&gt;
13:21 &amp;lt; styree&amp;gt; Ok, so the function would return the sockaddr of the connection, letting the client do any conversion they want to?&lt;br/&gt;
13:21 &amp;lt; styree&amp;gt; And calling getpeername on the fd used to talk to Zookeeper&lt;br/&gt;
13:24 &amp;lt; styree&amp;gt; Using the sockaddr would remove the need to seperate the function into getting the host and the port, but how do we feel about the function name?&lt;br/&gt;
13:31 &amp;lt; breed_zk&amp;gt; yes&lt;br/&gt;
13:32 &amp;lt; breed_zk&amp;gt; one sec&lt;br/&gt;
13:32 &amp;lt; styree&amp;gt; k&lt;br/&gt;
13:35 &amp;lt; breed_zk&amp;gt; there is this, perhaps silly, distinction we make with the naming in C. zoo_ is for standard zookeeper calls, where zookeeper_ is for the management&lt;br/&gt;
                  API, so by that logic i think it should be called zookeeper_get_connected_host.&lt;/p&gt;

&lt;p&gt;So I&apos;m going to rename the function zookeeper_get_connected_host and have it return the underlying sockaddr for the connection based on getpeername.&lt;/p&gt;</comment>
                            <comment id="13007099" author="tyree731" created="Tue, 15 Mar 2011 19:01:48 +0000"  >&lt;p&gt;Updated the patch based on Benjamin Reed&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13007268" author="breed" created="Tue, 15 Mar 2011 23:17:41 +0000"  >&lt;p&gt;+1 looks good. submitting to hudson. i&apos;m fine with the name. if anyone would like a better name, please speak up! fyi, the new API is zookeeper_get_connected_host&lt;/p&gt;</comment>
                            <comment id="13007271" author="hadoopqa" created="Tue, 15 Mar 2011 23:21:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12473721/ZOOKEEPER-1020.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12473721/ZOOKEEPER-1020.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1081936.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/189//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/189//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13007493" author="tyree731" created="Wed, 16 Mar 2011 14:46:42 +0000"  >&lt;p&gt;This time the diff is from the root directory of trunk.&lt;/p&gt;</comment>
                            <comment id="13007507" author="hadoopqa" created="Wed, 16 Mar 2011 15:13:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12473800/ZOOKEEPER-1020.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12473800/ZOOKEEPER-1020.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1081936.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/191//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/191//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/191//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/191//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/191//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/191//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13007558" author="breed" created="Wed, 16 Mar 2011 16:55:43 +0000"  >&lt;p&gt;hadoopqa is right. we need a test. you could add a test to TestClient.cc or even just modify testAuth in that code to call zookeeper_get_connected_host before and after the stopServer calls to check both the connected and disconnected case.&lt;/p&gt;</comment>
                            <comment id="13007641" author="tyree731" created="Wed, 16 Mar 2011 19:25:07 +0000"  >&lt;p&gt;This time with a unit test.&lt;/p&gt;</comment>
                            <comment id="13007662" author="hadoopqa" created="Wed, 16 Mar 2011 19:54:16 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12473832/ZOOKEEPER-1020.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12473832/ZOOKEEPER-1020.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1082260.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/193//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/193//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/193//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/193//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/193//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/PreCommit-ZOOKEEPER-Build/193//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13007765" author="breed" created="Thu, 17 Mar 2011 01:01:00 +0000"  >&lt;p&gt;Committed revision 1082362.&lt;/p&gt;</comment>
                            <comment id="13007886" author="hudson" created="Thu, 17 Mar 2011 10:54:30 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1124 (See &lt;a href=&quot;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/1124/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hudson.apache.org/hudson/job/ZooKeeper-trunk/1124/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1020&quot; title=&quot;Implement function in C client to determine which host you&amp;#39;re currently connected to.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1020&quot;&gt;&lt;del&gt;ZOOKEEPER-1020&lt;/del&gt;&lt;/a&gt;. Implement function in C client to determine which host you&apos;re currently connected to.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12473832" name="ZOOKEEPER-1020.patch" size="2690" author="tyree731" created="Wed, 16 Mar 2011 19:25:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 15 Mar 2011 23:17:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47511</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzx33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>