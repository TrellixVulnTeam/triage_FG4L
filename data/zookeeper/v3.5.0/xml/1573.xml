<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:43 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1573/ZOOKEEPER-1573.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1573] Unable to load database due to missing parent node</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1573</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;While replaying txnlog on data tree, the server has a code to detect missing parent node. This code block was last modified as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1333&quot; title=&quot;NPE in FileTxnSnapLog when restarting a cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1333&quot;&gt;&lt;del&gt;ZOOKEEPER-1333&lt;/del&gt;&lt;/a&gt;. In our production, we found a case where this check is return false positive.&lt;/p&gt;

&lt;p&gt;The sequence of txns is as follows:&lt;/p&gt;

&lt;p&gt;zxid 1:  create /prefix/a&lt;br/&gt;
zxid 2:  create /prefix/a/b&lt;br/&gt;
zxid 3:  delete /prefix/a/b&lt;br/&gt;
zxid 4:  delete /prefix/a&lt;/p&gt;

&lt;p&gt;The server start capturing snapshot at zxid 1. However, by the time it traversing the data tree down to /prefix, txn 4 is already applied and /prefix have no children. &lt;/p&gt;

&lt;p&gt;When the server restore from snapshot, it process txnlog starting from zxid 2. This txn generate missing parent error and the server refuse to start up.&lt;/p&gt;

&lt;p&gt;The same check allow me to discover bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1551&quot; title=&quot;Observers ignore txns that come after snapshot and UPTODATE &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1551&quot;&gt;&lt;del&gt;ZOOKEEPER-1551&lt;/del&gt;&lt;/a&gt;, but I don&apos;t know if we have any option beside removing this check to solve this issue.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12614446">ZOOKEEPER-1573</key>
            <summary>Unable to load database due to missing parent node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vinayrpet">Vinayakumar B</assignee>
                                    <reporter username="thawan">Thawan Kooburat</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Nov 2012 23:13:14 +0000</created>
                <updated>Thu, 13 Mar 2014 18:17:07 +0000</updated>
                            <resolved>Mon, 10 Feb 2014 20:53:16 +0000</resolved>
                                    <version>3.4.3</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13823500" author="vinayrpet" created="Fri, 15 Nov 2013 09:13:15 +0000"  >&lt;p&gt;Attached the patch for the issue. &lt;br/&gt;
Ignoring the errors during restore.&lt;br/&gt;
Please review&lt;/p&gt;</comment>
                            <comment id="13823518" author="hadoopqa" created="Fri, 15 Nov 2013 09:55:44 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614040/ZOOKEEPER-1573.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614040/ZOOKEEPER-1573.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1541810.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1770//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1770//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1770//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1770//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1770//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1770//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13824156" author="thawan" created="Fri, 15 Nov 2013 22:06:19 +0000"  >&lt;p&gt;Probably need a comment from other people as well.  We disable this check in our prod system because we have some other way of detecting data inconsistency.  This check has shown to catch a real bug but it can also raise false possible in certain usage pattern.&lt;/p&gt;</comment>
                            <comment id="13824644" author="rgs" created="Sat, 16 Nov 2013 21:57:48 +0000"  >&lt;p&gt;Nit - maybe this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+         * Snapshots are lazily created. So when the snapshot was in progress
+         * there is a chance that some of the later transactions can go into
+         * snapshot. While restoring same transactions NONODE/NODEEXISTS errors
+         * can come. Basically we can ignore all errors during the restore.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;could be more clear like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+         * Snapshots are lazily created. So when a snapshot is in progress,
+         * there is a chance for later transactions to make to into the snapshot.
+         * Then when the snapshot is restored,  NONODE/NODEEXISTS errors
+         * could occur. It should be safe to ignore these.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nit:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+                LOG.warn(&quot;Intrrupted&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;typo.&lt;/p&gt;

&lt;p&gt;Nit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            LOG.debug(&quot;Ignoring processTxn failure hdr: &quot; + hdr.getType() + &quot; : error: &quot; + rc.err + &quot; path: &quot; + rc.path);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;use string extrapolation with {} instead of string concatenation. &lt;/p&gt;

&lt;p&gt;Nit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    /**
+     * Test we can restore a snapshot that has delete txns ahead of the zxid of the snapshot file. ZOOKEEPER-1573
+     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;make it:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    /**
+     * ZOOKEEPER-1573: test restoring a snapshot with deleted txns ahead of the snapshot file&apos;s zxid. 
+     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        LOG.info(&quot;Set lastProcessedZxid to &quot; + zks.getZKDatabase().getDataTreeLastProcessedZxid());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ditto wrt to string extrapolation via {}.&lt;/p&gt;
</comment>
                            <comment id="13824835" author="vinayrpet" created="Sun, 17 Nov 2013 13:36:26 +0000"  >&lt;p&gt;Updated the patch with comments.&lt;br/&gt;
Please review&lt;/p&gt;</comment>
                            <comment id="13824841" author="hadoopqa" created="Sun, 17 Nov 2013 14:14:53 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614286/ZOOKEEPER-1573.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614286/ZOOKEEPER-1573.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1542355.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1777//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1777//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1777//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1777//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1777//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1777//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13824934" author="rgs" created="Sun, 17 Nov 2013 19:09:51 +0000"  >&lt;p&gt;Thanks for the quick update Vinay. A few more nits:&lt;/p&gt;

&lt;p&gt;In:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+         * Snapshots are lazily created. So when a snapshot is in progress,
+         * there is a chance for later transactions to make to into the snapshot.
+         * Then when the snapshot is restored,  NONODE/NODEEXISTS errors
+         * could occur. It should be safe to ignore these.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I had a typo in my suggestion (sorry) - it should be: &quot;...transactions to make into the snapshot&quot;.&lt;/p&gt;

&lt;p&gt;In:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            LOG.debug(&quot;Ignoring processTxn failure hdr: {}, error: {}, path: {}&quot;, hdr.getType(), rc.err, rc.path);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the line is too long, maybe:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            LOG.debug(&quot;Ignoring processTxn failure hdr: {}, error: {}, path: {}&quot;,
+                   hdr.getType(), rc.err, rc.path);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        Assert.assertTrue(&quot;waiting for server being up &quot;, ClientBase.waitForServerUp(HOSTPORT, CONNECTION_TIMEOUT));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;line is too long. And this line appears again later on. &lt;/p&gt;</comment>
                            <comment id="13824994" author="vinayrpet" created="Sun, 17 Nov 2013 23:40:48 +0000"  >&lt;p&gt;Updated the patch.&lt;/p&gt;

&lt;p&gt;I thought for zookeepeer max line length is 120 chars. &lt;/p&gt;

&lt;p&gt;Now wrapped all lines to 80 chars.&lt;br/&gt;
Thanks for the review&lt;/p&gt;</comment>
                            <comment id="13825005" author="hadoopqa" created="Mon, 18 Nov 2013 00:14:19 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614308/ZOOKEEPER-1573.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614308/ZOOKEEPER-1573.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1542355.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1778//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1778//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1778//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1778//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1778//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1778//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13825014" author="rgs" created="Mon, 18 Nov 2013 00:46:16 +0000"  >&lt;p&gt;Last nit (though feel free to ignore it since it refers to improving old code as well):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+
+        long start = System.currentTimeMillis();
+        while (!connected) {
+            long end = System.currentTimeMillis();
+            if (end - start &amp;gt; 5000) {
+                Assert.assertTrue(&quot;Could not connect with server in 5 seconds&quot;,
+                        false);
+            }
+            try {
+                Thread.sleep(200);
+            } catch (Exception e) {
+                LOG.warn(&quot;Interrupted&quot;);
+            }
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this is copy/pasted for two other tests as well - can we move it to a method called waitConnected and call that instead? It&apos;ll make tests shorted and more readable I think. &lt;/p&gt;</comment>
                            <comment id="13825024" author="vinayrpet" created="Mon, 18 Nov 2013 01:19:50 +0000"  >&lt;p&gt;Updated the last nit as well.&lt;/p&gt;

&lt;p&gt;removed the duplicate code in 3 places and moved to a method.&lt;/p&gt;</comment>
                            <comment id="13825033" author="hadoopqa" created="Mon, 18 Nov 2013 01:55:24 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614319/ZOOKEEPER-1573.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614319/ZOOKEEPER-1573.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1542355.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1779//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1779//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1779//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1779//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1779//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1779//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13825221" author="vinayrpet" created="Mon, 18 Nov 2013 09:38:31 +0000"  >&lt;p&gt;Adding patch for branch-3.4&lt;/p&gt;</comment>
                            <comment id="13825224" author="hadoopqa" created="Mon, 18 Nov 2013 09:42:42 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614362/ZOOKEEPER-1573-3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614362/ZOOKEEPER-1573-3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1542355.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1781//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1781//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13886259" author="phunt" created="Thu, 30 Jan 2014 05:15:20 +0000"  >&lt;p&gt;I&apos;ve seen this happen a couple times now and think it&apos;s a reasonable candidate for 3.4.6. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; can you comment as the whether you think this is an acceptable change to the code?&lt;/p&gt;</comment>
                            <comment id="13888571" author="fpj" created="Sat, 1 Feb 2014 13:15:59 +0000"  >&lt;p&gt;yes, we should get this in 3.4.6. let me give it a closer look, but ignoring NONODE/NODEEXISTS sounds like the right thing to do.&lt;/p&gt;</comment>
                            <comment id="13891281" author="phunt" created="Tue, 4 Feb 2014 22:02:25 +0000"  >&lt;p&gt;This patch looks good to me. +1, I&apos;ll wait to commit until I hear from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;fwiw I tested this manually with a failing repo I had available. Without this patch the server failed to start, with this patch applied the server started successfully and the data looked correct on the server thereafter. (tested with 3.4 branch)&lt;/p&gt;</comment>
                            <comment id="13893845" author="phunt" created="Thu, 6 Feb 2014 21:43:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt;, did you have anything more on this? I&apos;d like to commit it. (see my previous comment)&lt;/p&gt;</comment>
                            <comment id="13894791" author="fpj" created="Fri, 7 Feb 2014 18:10:10 +0000"  >&lt;p&gt;I&apos;ll review it this weekend. I haven&apos;t had a chance to get to it today, I&apos;m sorry.&lt;/p&gt;</comment>
                            <comment id="13895579" author="fpj" created="Sat, 8 Feb 2014 14:06:03 +0000"  >&lt;p&gt;It seems reasonable to solve the problem this way, ignoring a nonode for the parent. Perhaps a better way would be to advance the txn log to make sure that the delete of the parent is there. The assumption for the current patch is that a delete will show up in the txn log at some point, which is fine if nothing has gone wrong. If it is difficult to advance the txn log, we could alternatively keep information about the missing parent to check later that the delete is there.&lt;/p&gt;

&lt;p&gt;Because we don&apos;t want to hold 3.4.6 for much longer, if you people prefer, we could check this in and create a new jira to fix it in the way I&apos;m proposing later on, assuming my proposal makes sense.&lt;/p&gt;</comment>
                            <comment id="13896791" author="rgs" created="Mon, 10 Feb 2014 17:48:18 +0000"  >&lt;p&gt;fwiw, i like the idea of merging this and opening a new ticket to revisit the issue later on (potentially with a more robust approach). &lt;/p&gt;</comment>
                            <comment id="13896985" author="phunt" created="Mon, 10 Feb 2014 20:48:13 +0000"  >&lt;p&gt;Cool because I was thinking similar. I&apos;m not 100% sure though it&apos;s going to be as simple as we&apos;d like (see &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1879&quot; title=&quot;improve the correctness checking of txn log replay&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1879&quot;&gt;ZOOKEEPER-1879&lt;/a&gt;). I&apos;ll take care of committing this in a bit. Thanks all!&lt;/p&gt;</comment>
                            <comment id="13896989" author="phunt" created="Mon, 10 Feb 2014 20:53:16 +0000"  >&lt;p&gt;Committed to 3.4.6 and Trunk. Thanks Vinayakumar B!&lt;/p&gt;</comment>
                            <comment id="13897520" author="vinayrpet" created="Tue, 11 Feb 2014 04:23:52 +0000"  >&lt;p&gt;Thanks all&lt;/p&gt;</comment>
                            <comment id="13897734" author="hudson" created="Tue, 11 Feb 2014 11:09:41 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2212 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2212/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2212/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1573&quot; title=&quot;Unable to load database due to missing parent node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1573&quot;&gt;&lt;del&gt;ZOOKEEPER-1573&lt;/del&gt;&lt;/a&gt;. Unable to load database due to missing parent node (Vinayakumar B via phunt, fpj) (phunt: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1566739&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1566739&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/persistence/FileTxnSnapLog.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/LoadFromLogTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933756" author="fpj" created="Thu, 13 Mar 2014 18:17:07 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12679341">ZOOKEEPER-1813</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12694349">ZOOKEEPER-1879</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12614362" name="ZOOKEEPER-1573-3.4.patch" size="7653" author="vinayrpet" created="Mon, 18 Nov 2013 09:38:31 +0000"/>
                            <attachment id="12614319" name="ZOOKEEPER-1573.patch" size="7231" author="vinayrpet" created="Mon, 18 Nov 2013 01:19:50 +0000"/>
                            <attachment id="12614308" name="ZOOKEEPER-1573.patch" size="4792" author="vinayrpet" created="Sun, 17 Nov 2013 23:40:48 +0000"/>
                            <attachment id="12614286" name="ZOOKEEPER-1573.patch" size="4634" author="vinayrpet" created="Sun, 17 Nov 2013 13:36:26 +0000"/>
                            <attachment id="12614040" name="ZOOKEEPER-1573.patch" size="4672" author="vinayrpet" created="Fri, 15 Nov 2013 09:13:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Nov 2013 09:13:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253905</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy85rz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>81579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>