<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:52:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-481/ZOOKEEPER-481.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-481] Add lastMessageSent to QuorumCnxManager</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-481</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Currently we rely on TCP for reliable delivery of FLE messages. However, as we concurrently drop and create new connections, it is possible that a message is sent but never received. With this patch, cnx manager keeps a list of last messages sent, and resends the last one sent. Receiving multiples copies is harmless. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12430929">ZOOKEEPER-481</key>
            <summary>Add lastMessageSent to QuorumCnxManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fpj">Flavio Junqueira</assignee>
                                    <reporter username="fpj">Flavio Junqueira</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jul 2009 14:43:29 +0100</created>
                <updated>Thu, 2 May 2013 03:29:26 +0100</updated>
                            <resolved>Mon, 3 Aug 2009 22:32:33 +0100</resolved>
                                    <version>3.1.1</version>
                    <version>3.2.0</version>
                                    <fixVersion>3.2.1</fixVersion>
                    <fixVersion>3.3.0</fixVersion>
                                    <component>leaderElection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12734556" author="henryr" created="Thu, 23 Jul 2009 12:25:27 +0100"  >&lt;p&gt;Does this change have any impact on &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-22&quot; title=&quot;Automatic request retries on connect failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-22&quot;&gt;ZOOKEEPER-22&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="12734593" author="fpj" created="Thu, 23 Jul 2009 14:25:50 +0100"  >&lt;p&gt;No, &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-22&quot; title=&quot;Automatic request retries on connect failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-22&quot;&gt;ZOOKEEPER-22&lt;/a&gt; is about client-to-server communication, and this one is affects server-to-server communication in particular during leade election. &lt;/p&gt;</comment>
                            <comment id="12735339" author="fpj" created="Sun, 26 Jul 2009 01:16:32 +0100"  >&lt;p&gt;Adding unit test.&lt;/p&gt;</comment>
                            <comment id="12737238" author="breed" created="Thu, 30 Jul 2009 20:18:19 +0100"  >&lt;p&gt;looks great flavio. i think i figured out how the test works. do you mind putting a comment into the test to state your strategy for posterity?&lt;/p&gt;</comment>
                            <comment id="12737333" author="fpj" created="Thu, 30 Jul 2009 23:22:10 +0100"  >&lt;p&gt;Adding comment to the test as requested. Thanks, Ben.&lt;/p&gt;</comment>
                            <comment id="12737617" author="toddg" created="Fri, 31 Jul 2009 18:56:03 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-481&quot; title=&quot;Add lastMessageSent to QuorumCnxManager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-481&quot;&gt;&lt;del&gt;ZOOKEEPER-481&lt;/del&gt;&lt;/a&gt;.patch fails to build when applied to branch-3.2 due to a missing file, PortAssignment.java. PortAssignment.java was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-473&quot; title=&quot;cleanup junit tests to eliminate false positives due to &amp;quot;socket reuse&amp;quot; and failure to close client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-473&quot;&gt;&lt;del&gt;ZOOKEEPER-473&lt;/del&gt;&lt;/a&gt;.patch. I have not investigated further dependencies, so I do not know if 481 depends on other files in 473. Patrick suggested that we may need separate patches for branch-3.2 and trunk.&lt;/p&gt;</comment>
                            <comment id="12737656" author="fpj" created="Fri, 31 Jul 2009 19:51:20 +0100"  >&lt;p&gt;Uploading a patch that applies to 3.2. Unit tests pass for me.&lt;/p&gt;</comment>
                            <comment id="12737695" author="mahadev" created="Fri, 31 Jul 2009 21:34:38 +0100"  >&lt;p&gt;flavio,&lt;br/&gt;
 I just ran ant test-patch since hudson wastn willing to run it for us.&lt;/p&gt;

&lt;p&gt;I fopt a -1 with &lt;/p&gt;

&lt;p&gt;3 new findbugs warnings generated. Can you please try running findbugs and see where the issues are? &lt;/p&gt;</comment>
                            <comment id="12737767" author="fpj" created="Sat, 1 Aug 2009 00:29:51 +0100"  >&lt;p&gt;Fixed findbugs issues, will upload a 3.2 version once +1.&lt;/p&gt;</comment>
                            <comment id="12737775" author="fpj" created="Sat, 1 Aug 2009 00:42:06 +0100"  >&lt;p&gt;3.2 version of the same patch (only the test should be different).&lt;/p&gt;</comment>
                            <comment id="12737809" author="hadoopqa" created="Sat, 1 Aug 2009 02:46:47 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12415199/ZOOKEEPER-481-branch3.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12415199/ZOOKEEPER-481-branch3.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 799741.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/165/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/165/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/165/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/165/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/165/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/165/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12737817" author="fpj" created="Sat, 1 Aug 2009 03:29:23 +0100"  >&lt;p&gt;I have made a small modification to the port assignment in the test, so I&apos;m resubmitting just to make sure that hudson likes it. &lt;/p&gt;</comment>
                            <comment id="12738615" author="mahadev" created="Mon, 3 Aug 2009 22:32:33 +0100"  >&lt;p&gt;I just committed this. thanks flavio!&lt;/p&gt;</comment>
                            <comment id="12738964" author="hudson" created="Tue, 4 Aug 2009 14:18:29 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #404 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/404/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/404/&lt;/a&gt;)&lt;br/&gt;
    . Add lastMessageSent to QuorumCnxManager. (flavio via mahadev)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12430712">ZOOKEEPER-475</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12430923">ZOOKEEPER-479</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12431726">ZOOKEEPER-491</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12415199" name="ZOOKEEPER-481-branch3.2.patch" size="19344" author="fpj" created="Sat, 1 Aug 2009 00:42:06 +0100"/>
                            <attachment id="12415158" name="ZOOKEEPER-481-branch3.2.patch" size="19098" author="fpj" created="Fri, 31 Jul 2009 19:51:20 +0100"/>
                            <attachment id="12415215" name="ZOOKEEPER-481.patch" size="19354" author="fpj" created="Sat, 1 Aug 2009 03:29:23 +0100"/>
                            <attachment id="12415196" name="ZOOKEEPER-481.patch" size="19325" author="fpj" created="Sat, 1 Aug 2009 00:29:50 +0100"/>
                            <attachment id="12415066" name="ZOOKEEPER-481.patch" size="19079" author="fpj" created="Thu, 30 Jul 2009 23:22:10 +0100"/>
                            <attachment id="12414530" name="ZOOKEEPER-481.patch" size="18572" author="fpj" created="Sun, 26 Jul 2009 01:16:32 +0100"/>
                            <attachment id="12414007" name="ZOOKEEPER-481.patch" size="11448" author="fpj" created="Mon, 20 Jul 2009 14:44:44 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Jul 2009 11:25:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzvaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>