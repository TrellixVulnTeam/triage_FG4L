<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:39:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1798/ZOOKEEPER-1798.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1798] Fix race condition in testNormalObserverRun</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1798</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This is the output messges:&lt;/p&gt;

&lt;p&gt;&amp;lt;noformat&amp;gt;&lt;br/&gt;
Testcase: testNormalObserverRun took 4.221 sec&lt;br/&gt;
        FAILED&lt;br/&gt;
expected:&amp;lt;data&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;data&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
junit.framework.AssertionFailedError: expected:&amp;lt;data&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;data&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Zab1_0Test$8.converseWithObserver(Zab1_0Test.java:1118)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Zab1_0Test.testObserverConversation(Zab1_0Test.java:546)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Zab1_0Test.testNormalObserverRun(Zab1_0Test.java:994)&lt;br/&gt;
&amp;lt;noformat&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12674681">ZOOKEEPER-1798</key>
            <summary>Fix race condition in testNormalObserverRun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thawan">Thawan Kooburat</assignee>
                                    <reporter username="fpj">Flavio Junqueira</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Oct 2013 09:52:04 +0100</created>
                <updated>Thu, 13 Mar 2014 18:17:07 +0000</updated>
                            <resolved>Thu, 14 Nov 2013 04:47:23 +0000</resolved>
                                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13800105" author="fpj" created="Sun, 20 Oct 2013 09:53:39 +0100"  >&lt;p&gt;Uploading log file.&lt;/p&gt;</comment>
                            <comment id="13800107" author="fpj" created="Sun, 20 Oct 2013 09:55:29 +0100"  >&lt;p&gt;This test case was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1551&quot; title=&quot;Observers ignore txns that come after snapshot and UPTODATE &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1551&quot;&gt;&lt;del&gt;ZOOKEEPER-1551&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;, any thoughts here?&lt;/p&gt;</comment>
                            <comment id="13800163" author="fpj" created="Sun, 20 Oct 2013 18:47:45 +0100"  >&lt;p&gt;My current suspicion is that this is due to the fact that we are passing the request to SyncRP and CommitP concurrently in ObserverZooKeeperServer. This change has been introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1552&quot; title=&quot;Enable sync request processor in Observer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1552&quot;&gt;&lt;del&gt;ZOOKEEPER-1552&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13800243" author="fpj" created="Sun, 20 Oct 2013 22:34:28 +0100"  >&lt;p&gt;This is a patch for branch 3.4. It essentially commits a request only after sync processor. To be able to do it without changing SyncRequestProcessor, I have added a straightforward request processor (ObserverCommitProcessor).&lt;/p&gt;</comment>
                            <comment id="13800246" author="fpj" created="Sun, 20 Oct 2013 22:35:33 +0100"  >&lt;p&gt;The current patch is for the 3.4 branch. I think we will need one for trunk as well if there is agreement on the fix.&lt;/p&gt;</comment>
                            <comment id="13800248" author="fpj" created="Sun, 20 Oct 2013 22:40:51 +0100"  >&lt;p&gt;Remove unnecessary log messages I was using for debugging purposes. &lt;/p&gt;</comment>
                            <comment id="13800252" author="hadoopqa" created="Sun, 20 Oct 2013 22:42:48 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12609338/ZOOKEEPER-1798-b3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12609338/ZOOKEEPER-1798-b3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1533161.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1711//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1711//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13800395" author="thawan" created="Mon, 21 Oct 2013 07:13:28 +0100"  >&lt;p&gt;The observer don&apos;t need to wait for a request to be persisted on disk before applying to the db right?   &lt;/p&gt;

&lt;p&gt;Currently, the test is failing because of timing issue but this shouldn&apos;t affect the correctness of the system.  So we just add some delay in the test or some mechanism to make sure that request get flushed before we do the verify step instead.  So we don&apos;t have to pay for the cost of extra latency on running system. &lt;/p&gt;
</comment>
                            <comment id="13800512" author="fpj" created="Mon, 21 Oct 2013 10:45:56 +0100"  >&lt;p&gt;Thanks for commenting, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The observer don&apos;t need to wait for a request to be persisted on disk before applying to the db right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct, but the test tries to make sure that the change has been persisted to disk, which contradicts the fact that persistent is not strictly necessary. I think the goal of the test case was to test functionality rather than checking that it is strictly enforce. I was thinking of having some way to have SyncRequestProcessor indicate that a request has gone through, but I thought that the approach I proposed in the patch was simpler.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Currently, the test is failing because of timing issue but this shouldn&apos;t affect the correctness of the system.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed, but we shouldn&apos;t have a release with tests failing. We need to either fix the test or the code base.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So we just add some delay in the test or some mechanism to make sure that request get flushed before we do the verify step instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In general, I don&apos;t like the idea of adding delays. They are difficult to calibrate and prone to false positives.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So we don&apos;t have to pay for the cost of extra latency on running system.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not convinced that the performance penalty would be that bad. If the system is not saturated, then the latency is under control and it should be a few milliseconds.&lt;/p&gt;</comment>
                            <comment id="13801321" author="thawan" created="Tue, 22 Oct 2013 00:41:56 +0100"  >&lt;p&gt;If you are ok with approach that fixing just the test itself (may be checking with the sync processor that all request is flushed) I will come up with a diff. &lt;/p&gt;
</comment>
                            <comment id="13801706" author="fpj" created="Tue, 22 Oct 2013 11:59:00 +0100"  >&lt;p&gt;It&apos;d be great if you could generate a fix for the test, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;. This is pretty much the only blocker left at the moment for 3.4.6. The other blocker is related to publishing artifacts.&lt;/p&gt;</comment>
                            <comment id="13802609" author="thawan" created="Wed, 23 Oct 2013 06:15:46 +0100"  >&lt;p&gt;Make shutdown sequence flush all pending txn to disk&lt;/p&gt;</comment>
                            <comment id="13802614" author="thawan" created="Wed, 23 Oct 2013 06:18:37 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;Flavio Junqueira&lt;/a&gt; I am planing to apply this patch to both trunk and 3.4.  If you are OK with the current implementation, I will also create a 3.4 patch as well and commit them.&lt;/p&gt;</comment>
                            <comment id="13802624" author="hadoopqa" created="Wed, 23 Oct 2013 06:54:23 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12609804/ZOOKEEPER-1798.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12609804/ZOOKEEPER-1798.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1534844.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1716//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1716//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1716//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1716//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1716//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1716//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13802690" author="thawan" created="Wed, 23 Oct 2013 09:08:16 +0100"  >&lt;p&gt;Find bug warning is due to exit() call when IO exception is caught.  I added this because sync request processor already invoke exit() if exception is thrown during its normal operation.&lt;/p&gt;</comment>
                            <comment id="13803587" author="fpj" created="Thu, 24 Oct 2013 01:13:10 +0100"  >&lt;p&gt;The fix you propose is good for me, +1. About the system exit call, I&apos;m not sure it is strictly necessary to have it there, although in some other part of the class we do something similar. In the case we keep it, we might want to add one of those findbugs exceptions.&lt;/p&gt;</comment>
                            <comment id="13803737" author="thawan" created="Thu, 24 Oct 2013 05:36:25 +0100"  >&lt;p&gt;Remove exit call and add 3.4 version of the patch&lt;/p&gt;</comment>
                            <comment id="13803762" author="hadoopqa" created="Thu, 24 Oct 2013 06:15:36 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12609985/ZOOKEEPER-1798.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12609985/ZOOKEEPER-1798.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1535251.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1721//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1721//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1721//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1721//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1721//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1721//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13804538" author="thawan" created="Thu, 24 Oct 2013 19:53:45 +0100"  >&lt;p&gt;Committed&lt;/p&gt;

&lt;p&gt;trunk 1535491&lt;br/&gt;
b3.4 1535497&lt;/p&gt;</comment>
                            <comment id="13805227" author="hudson" created="Fri, 25 Oct 2013 12:05:22 +0100"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2100 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2100/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2100/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1798&quot; title=&quot;Fix race condition in testNormalObserverRun&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1798&quot;&gt;&lt;del&gt;ZOOKEEPER-1798&lt;/del&gt;&lt;/a&gt;. Fix race condition in testNormalObserverRun (thawan, fpj via thawan) (thawan: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1535491&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1535491&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/SyncRequestProcessor.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/Zab1_0Test.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13810718" author="phunt" created="Thu, 31 Oct 2013 21:15:36 +0000"  >&lt;p&gt;I&apos;m afraid I&apos;m still seeing this issue, even after this patch was applied.&lt;/p&gt;

&lt;p&gt;This is on my internal jenkins, latest trunk (revision says 1535491) using jdk7.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error Message

expected:&amp;lt;data[2]&amp;gt; but was:&amp;lt;data[1]&amp;gt;
Stacktrace

	at org.apache.zookeeper.server.quorum.Zab1_0Test$8.converseWithObserver(Zab1_0Test.java:1105)
	at org.apache.zookeeper.server.quorum.Zab1_0Test.testObserverConversation(Zab1_0Test.java:542)
	at org.apache.zookeeper.server.quorum.Zab1_0Test.testNormalObserverRun(Zab1_0Test.java:976)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13810999" author="fpj" created="Fri, 1 Nov 2013 03:07:39 +0000"  >&lt;p&gt;That&apos;s odd, the problem should be fixed, I don&apos;t see how it could happen. Any thoughts, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13811090" author="thawan" created="Fri, 1 Nov 2013 06:49:43 +0000"  >&lt;p&gt;Just for the record, this test is not known to be flaky in our internal Jenkins (that test our internal branch).  &lt;/p&gt;

&lt;p&gt;I am able to repro this on my mac.  (Java 1.7.0_15, OSX 10.7.5).  When this happen, it looks txnlog doesn&apos;t have any valid content in it.  So the zkdb that we loaded after shutting down the observer never have txn that its znodes to &quot;data2&quot;.   I also modified the test to leave the data files around and try to load it manually after the test fail. The txnlog is loaded successfully with the right content. &lt;/p&gt;

&lt;p&gt;I am thinking that the data flushed to disk by one thread is not visible by the other thread even after thread.join() is called in between. However, this really seem unlikely. But I ran the same test in our production host, I cannot repro the issue (yet)&lt;/p&gt;

&lt;p&gt;In Patrick log, this is slightly different. The test failed at line 1105, this means that the first txn in txnlog is read correctly, but not the second one. &lt;/p&gt;</comment>
                            <comment id="13814443" author="fpj" created="Wed, 6 Nov 2013 00:31:45 +0000"  >&lt;p&gt;I&apos;m  a bit confused here. SyncRequestProcessor is not part of the chain of RPs for an observer. When we call shutdown on the ObserverZooKeeperServer, it will start with the ObserverRequestProcessor and will cascade to FinalRP, but I don&apos;t see where we actually shut it down. Could you shed some light here, please, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thawan&quot; class=&quot;user-hover&quot; rel=&quot;thawan&quot;&gt;Thawan Kooburat&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13814482" author="thawan" created="Wed, 6 Nov 2013 01:10:35 +0000"  >&lt;p&gt;Yeah, you are right.  I will create another patch to fix this &lt;/p&gt;</comment>
                            <comment id="13817011" author="thawan" created="Fri, 8 Nov 2013 05:30:53 +0000"  >&lt;p&gt;Attach a patch that also shutdown sync request processor as part of observer shutdown&lt;/p&gt;</comment>
                            <comment id="13817030" author="hadoopqa" created="Fri, 8 Nov 2013 06:12:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612782/ZOOKEEPER-1798-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612782/ZOOKEEPER-1798-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1539529.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1752//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1752//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1752//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1752//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1752//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1752//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13819023" author="fpj" created="Mon, 11 Nov 2013 15:22:22 +0000"  >&lt;p&gt;The test failure is due to &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1805&quot; title=&quot;&amp;quot;Don&amp;#39;t care&amp;quot; value in ZooKeeper election breaks rolling upgrades&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1805&quot;&gt;&lt;del&gt;ZOOKEEPER-1805&lt;/del&gt;&lt;/a&gt;, +1.&lt;/p&gt;</comment>
                            <comment id="13822158" author="thawan" created="Thu, 14 Nov 2013 04:47:14 +0000"  >&lt;p&gt;Committed&lt;br/&gt;
trunk: 1541810&lt;br/&gt;
3.4: 1541814&lt;/p&gt;</comment>
                            <comment id="13822332" author="hudson" created="Thu, 14 Nov 2013 11:09:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2119 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2119/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2119/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1798&quot; title=&quot;Fix race condition in testNormalObserverRun&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1798&quot;&gt;&lt;del&gt;ZOOKEEPER-1798&lt;/del&gt;&lt;/a&gt;. Fix race condition in testNormalObserverRun (Part 2) (thawan, fpj via thawan) (thawan: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1541810&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1541810&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/ObserverZooKeeperServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933758" author="fpj" created="Thu, 13 Mar 2014 18:17:07 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12673365">ZOOKEEPER-1793</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12609304" name="TEST-org.apache.zookeeper.server.quorum.Zab1_0Test.txt" size="63250" author="fpj" created="Sun, 20 Oct 2013 09:53:39 +0100"/>
                            <attachment id="12612782" name="ZOOKEEPER-1798-2.patch" size="647" author="thawan" created="Fri, 8 Nov 2013 05:30:53 +0000"/>
                            <attachment id="12609984" name="ZOOKEEPER-1798-b3.4.patch" size="1828" author="thawan" created="Thu, 24 Oct 2013 05:35:40 +0100"/>
                            <attachment id="12609338" name="ZOOKEEPER-1798-b3.4.patch" size="6875" author="fpj" created="Sun, 20 Oct 2013 22:40:51 +0100"/>
                            <attachment id="12609335" name="ZOOKEEPER-1798-b3.4.patch" size="7713" author="fpj" created="Sun, 20 Oct 2013 22:34:28 +0100"/>
                            <attachment id="12609985" name="ZOOKEEPER-1798.patch" size="1828" author="thawan" created="Thu, 24 Oct 2013 05:36:25 +0100"/>
                            <attachment id="12609804" name="ZOOKEEPER-1798.patch" size="1943" author="thawan" created="Wed, 23 Oct 2013 06:15:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 Oct 2013 21:42:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354303</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzixdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>