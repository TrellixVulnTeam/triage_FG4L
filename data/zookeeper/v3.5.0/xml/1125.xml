<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:40:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1125/ZOOKEEPER-1125.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1125] Intermittent java core test failures</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1125</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Some of the tests are consistently failing for me and intermittently on hudson.&lt;/p&gt;

&lt;p&gt;Posting discussion from mailing list below.&lt;/p&gt;

&lt;p&gt;Vishal,&lt;br/&gt;
 Can you please open a jira for this and mark it as a blocker for 3.4&lt;br/&gt;
release? Looks like its transient:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The latest build is passing.&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
mahadev&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Hide quoted text -&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;On Mon, Jul 11, 2011 at 12:49 PM, Vishal Kher &amp;lt;vishalmlst@gmail.com&amp;gt; wrote:&lt;br/&gt;
&amp;gt; Hi,&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; ant test-core-java is consistently failing for me.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; The error seems to be either:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Testcase: testFollowersStartAfterLeader took 35.577 sec&lt;br/&gt;
&amp;gt;    Caused an ERROR&lt;br/&gt;
&amp;gt; Did not connect&lt;br/&gt;
&amp;gt; java.util.concurrent.TimeoutException: Did not connect&lt;br/&gt;
&amp;gt;    at&lt;br/&gt;
&amp;gt; org.apache.zookeeper.test.ClientBase$CountdownWatcher.waitForConnected(ClientBase.java:124)&lt;br/&gt;
&amp;gt;    at&lt;br/&gt;
&amp;gt; org.apache.zookeeper.test.QuorumTest.testFollowersStartAfterLeader(QuorumTest.java:308)&lt;br/&gt;
&amp;gt;    at&lt;br/&gt;
&amp;gt; org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; or&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Testcase: testNoLogBeforeLeaderEstablishment took 8.831 sec&lt;br/&gt;
&amp;gt;    Caused an ERROR&lt;br/&gt;
&amp;gt; KeeperErrorCode = ConnectionLoss for /blah&lt;br/&gt;
&amp;gt; org.apache.zookeeper.KeeperException$ConnectionLossException:&lt;br/&gt;
&amp;gt; KeeperErrorCode = ConnectionLoss for /blah&lt;br/&gt;
&amp;gt;    at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)&lt;br/&gt;
&amp;gt;    at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
&amp;gt;    at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:761)&lt;br/&gt;
&amp;gt;    at&lt;br/&gt;
&amp;gt; org.apache.zookeeper.test.QuorumTest.testNoLogBeforeLeaderEstablishment(QuorumTest.java:385)&lt;br/&gt;
&amp;gt;    at&lt;br/&gt;
&amp;gt; org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Looks like the reason why the tests are failing for me is similar to why the&lt;br/&gt;
&amp;gt; tests failed on hudson:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; 2011-07-11 14:47:26,219 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [QuorumPeer&lt;span class=&quot;error&quot;&gt;&amp;#91;myid=2&amp;#93;&lt;/span&gt;/0.0.0.0:11379&lt;br/&gt;
&amp;gt; :Leader@425] - Shutdown called&lt;br/&gt;
&amp;gt; java.lang.Exception: shutdown Leader! reason: Only 0 followers, need 1&lt;br/&gt;
&amp;gt;    at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:425)&lt;br/&gt;
&amp;gt;    at org.apache.zookeeper.server.quorum.Leader.lead(Leader.java:400)&lt;br/&gt;
&amp;gt;    at&lt;br/&gt;
&amp;gt; org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:729)&lt;br/&gt;
&amp;gt; 2011-07-11 14:47:26,220 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [QuorumPeer&lt;span class=&quot;error&quot;&gt;&amp;#91;myid=2&amp;#93;&lt;/span&gt;/0.0.0.0:11379&lt;br/&gt;
&amp;gt; :ZooKeeperServer@416] - shutting down&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; The leader is not able to ping the followers. Has anyone seen this before?&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Thanks.&lt;br/&gt;
&amp;gt; -Vishal&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; On Sun, Jul 10, 2011 at 6:52 AM, Apache Jenkins Server &amp;lt;&lt;br/&gt;
&amp;gt; jenkins@builds.apache.org&amp;gt; wrote:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1239/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1239/&lt;/a&gt;&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; ###################################################################################&lt;br/&gt;
&amp;gt;&amp;gt; ########################## LAST 60 LINES OF THE CONSOLE&lt;br/&gt;
&amp;gt;&amp;gt; ###########################&lt;br/&gt;
&amp;gt;&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;...truncated 242795 lines...&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,673 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:SessionTrackerImpl@206&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,673 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:PrepRequestProcessor@702&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,674 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:SyncRequestProcessor@170&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,674 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;SyncThread:0:SyncRequestProcessor@152&amp;#93;&lt;/span&gt; - SyncRequestProcessor exited!&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,675 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:FinalRequestProcessor@423&amp;#93;&lt;/span&gt; - shutdown of request processor complete&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,674 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [ProcessThread(sid:0&lt;br/&gt;
&amp;gt;&amp;gt; cport:-1)::PrepRequestProcessor@133] - PrepRequestProcessor exited loop!&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,676 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@227&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; connecting to 127.0.0.1 11221&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; ensureOnly:[]&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,677 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@428&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; STARTING server&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,678 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ZooKeeperServer@164&amp;#93;&lt;/span&gt; - Created server with tickTime 3000&lt;br/&gt;
&amp;gt;&amp;gt; minSessionTimeout 6000 maxSessionTimeout 60000 datadir&lt;br/&gt;
&amp;gt;&amp;gt; /grid/0/hudson/hudson-slave/workspace/ZooKeeper-trunk/trunk/build/test/tmp/test1139867753736175617.junit.dir/version-2&lt;br/&gt;
&amp;gt;&amp;gt; snapdir&lt;br/&gt;
&amp;gt;&amp;gt; /grid/0/hudson/hudson-slave/workspace/ZooKeeper-trunk/trunk/build/test/tmp/test1139867753736175617.junit.dir/version-2&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,679 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:NIOServerCnxnFactory@94&amp;#93;&lt;/span&gt; - binding to port 0.0.0.0/0.0.0.0:11221&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,680 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:FileSnap@83&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; Reading snapshot&lt;br/&gt;
&amp;gt;&amp;gt; /grid/0/hudson/hudson-slave/workspace/ZooKeeper-trunk/trunk/build/test/tmp/test1139867753736175617.junit.dir/version-2/snapshot.b&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,683 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:FileTxnSnapLog@256&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt;&amp;gt; - Snapshotting: b&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,684 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@227&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; connecting to 127.0.0.1 11221&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,685 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [NIOServerCxn.Factory:&lt;br/&gt;
&amp;gt;&amp;gt; 0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@197] - Accepted socket&lt;br/&gt;
&amp;gt;&amp;gt; connection from /127.0.0.1:45122&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,686 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [NIOServerCxn.Factory:&lt;br/&gt;
&amp;gt;&amp;gt; 0.0.0.0/0.0.0.0:11221:NIOServerCnxn@815] - Processing stat command from /&lt;br/&gt;
&amp;gt;&amp;gt; 127.0.0.1:45122&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,686 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-5:NIOServerCnxn$StatCommand@652&amp;#93;&lt;/span&gt; - Stat command output&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,688 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-5:NIOServerCnxn@995&amp;#93;&lt;/span&gt; - Closed socket connection for client /&lt;br/&gt;
&amp;gt;&amp;gt; 127.0.0.1:45122 (no session established for client)&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; ensureOnly:&lt;span class=&quot;error&quot;&gt;&amp;#91;InMemoryDataTree, StandaloneServer_port&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; expect:InMemoryDataTree&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; found:InMemoryDataTree&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.ZooKeeperService:name0=StandaloneServer_port-1,name1=InMemoryDataTree&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; expect:StandaloneServer_port&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; found:StandaloneServer_port&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.ZooKeeperService:name0=StandaloneServer_port-1&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,690 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:JUnit4ZKTestRunner$LoggedInvokeMethod@57&amp;#93;&lt;/span&gt; - FINISHED TEST METHOD&lt;br/&gt;
&amp;gt;&amp;gt; testQuota&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,690 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@465&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; tearDown starting&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,754 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ZooKeeper@662&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; Session: 0x13113b1aca50000 closed&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,754 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main-EventThread:ClientCnxn$EventThread@495&amp;#93;&lt;/span&gt; - EventThread shut down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,754 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@435&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; STOPPING server&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,755 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [NIOServerCxn.Factory:&lt;br/&gt;
&amp;gt;&amp;gt; 0.0.0.0/0.0.0.0:11221:NIOServerCnxnFactory@224] - NIOServerCnxn factory&lt;br/&gt;
&amp;gt;&amp;gt; exited run method&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,755 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ZooKeeperServer@416&amp;#93;&lt;/span&gt; - shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,756 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:SessionTrackerImpl@206&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,756 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:PrepRequestProcessor@702&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,757 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:SyncRequestProcessor@170&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,760 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  [ProcessThread(sid:0&lt;br/&gt;
&amp;gt;&amp;gt; cport:-1)::PrepRequestProcessor@133] - PrepRequestProcessor exited loop!&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,762 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;SyncThread:0:SyncRequestProcessor@152&amp;#93;&lt;/span&gt; - SyncRequestProcessor exited!&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,762 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO&lt;br/&gt;
&amp;gt;&amp;gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:FinalRequestProcessor@423&amp;#93;&lt;/span&gt; - shutdown of request processor complete&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,763 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@227&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; connecting to 127.0.0.1 11221&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; ensureOnly:[]&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,767 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@493&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; fdcount after test is: 35 at start it was 24&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,767 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ClientBase@495&amp;#93;&lt;/span&gt; -&lt;br/&gt;
&amp;gt;&amp;gt; sleeping for 20 secs&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,768 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ZKTestCase$1@60&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt;&amp;gt; - SUCCEEDED testQuota&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-07-10 10:57:16,768 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ZKTestCase$1@55&amp;#93;&lt;/span&gt;&lt;br/&gt;
&amp;gt;&amp;gt; - FINISHED testQuota&lt;br/&gt;
&amp;gt;&amp;gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.691 sec&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; BUILD FAILED&lt;br/&gt;
&amp;gt;&amp;gt; /grid/0/hudson/hudson-slave/workspace/ZooKeeper-trunk/trunk/build.xml:959:&lt;br/&gt;
&amp;gt;&amp;gt; The following error occurred while executing this line:&lt;br/&gt;
&amp;gt;&amp;gt; /grid/0/hudson/hudson-slave/workspace/ZooKeeper-trunk/trunk/build.xml:870:&lt;br/&gt;
&amp;gt;&amp;gt; Tests failed!&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; Total time: 19 minutes 0 seconds&lt;br/&gt;
&amp;gt;&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FINDBUGS&amp;#93;&lt;/span&gt; Skipping publisher since build result is FAILURE&lt;br/&gt;
&amp;gt;&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;WARNINGS&amp;#93;&lt;/span&gt; Skipping publisher since build result is FAILURE&lt;br/&gt;
&amp;gt;&amp;gt; Recording fingerprints&lt;br/&gt;
&amp;gt;&amp;gt; Archiving artifacts&lt;br/&gt;
&amp;gt;&amp;gt; Recording test results&lt;br/&gt;
&amp;gt;&amp;gt; Publishing Javadoc&lt;br/&gt;
&amp;gt;&amp;gt; Publishing Clover coverage report...&lt;br/&gt;
&amp;gt;&amp;gt; No Clover report will be published due to a Build Failure&lt;br/&gt;
&amp;gt;&amp;gt; Email was triggered for: Failure&lt;br/&gt;
&amp;gt;&amp;gt; Sending email for trigger: Failure&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; ###################################################################################&lt;br/&gt;
&amp;gt;&amp;gt; ############################## FAILED TESTS (if any)&lt;br/&gt;
&amp;gt;&amp;gt; ##############################&lt;br/&gt;
&amp;gt;&amp;gt; 2 tests failed.&lt;br/&gt;
&amp;gt;&amp;gt; REGRESSION:  org.apache.zookeeper.test.ObserverTest.testObserver&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; Error Message:&lt;br/&gt;
&amp;gt;&amp;gt; KeeperErrorCode = ConnectionLoss for /obstest&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; Stack Trace:&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.KeeperException$ConnectionLossException:&lt;br/&gt;
&amp;gt;&amp;gt; KeeperErrorCode = ConnectionLoss for /obstest&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.KeeperException.create(KeeperException.java:99)&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
&amp;gt;&amp;gt;        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:761)&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.test.ObserverTest.testObserver(ObserverTest.java:101)&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; REGRESSION:  org.apache.zookeeper.test.ReadOnlyModeTest.testSeekForRwServer&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; Error Message:&lt;br/&gt;
&amp;gt;&amp;gt; KeeperErrorCode = ConnectionLoss for /test&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt; Stack Trace:&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.KeeperException$ConnectionLossException:&lt;br/&gt;
&amp;gt;&amp;gt; KeeperErrorCode = ConnectionLoss for /test&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.KeeperException.create(KeeperException.java:99)&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
&amp;gt;&amp;gt;        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:761)&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.test.ReadOnlyModeTest.testSeekForRwServer(ReadOnlyModeTest.java:213)&lt;br/&gt;
&amp;gt;&amp;gt;        at&lt;br/&gt;
&amp;gt;&amp;gt; org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12513982">ZOOKEEPER-1125</key>
            <summary>Intermittent java core test failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="vishalmlst">Vishal Kher</assignee>
                                    <reporter username="vishalmlst">Vishal Kher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jul 2011 21:33:23 +0100</created>
                <updated>Thu, 15 May 2014 23:53:23 +0100</updated>
                            <resolved>Thu, 15 May 2014 23:53:23 +0100</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                    <component>tests</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13064848" author="fournc" created="Wed, 13 Jul 2011 22:08:00 +0100"  >&lt;p&gt;testSeekForRwServer is failing because it waits only to be connected, not connected in RW mode. This means that if the client connects back to the RO server, The fix is to have the watcher wait for RW connected. I can submit a patch for this later.&lt;/p&gt;</comment>
                            <comment id="13064849" author="fournc" created="Wed, 13 Jul 2011 22:08:40 +0100"  >&lt;p&gt;However, I see ReadOnlyModeTest.testConnectionEvents regularly failing in my env, not sure what&apos;s up with that.&lt;/p&gt;</comment>
                            <comment id="13064857" author="mahadev" created="Wed, 13 Jul 2011 22:17:54 +0100"  >&lt;p&gt;Camille/Vishal,&lt;br/&gt;
  Any of you working on a patch for this? or volunteering to? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13064869" author="fournc" created="Wed, 13 Jul 2011 22:27:39 +0100"  >&lt;p&gt;I have a patch for the rw failure that I can submit tonight. Don&apos;t have time right now to look at the other failure though.&lt;/p&gt;</comment>
                            <comment id="13065554" author="fournc" created="Thu, 14 Jul 2011 22:41:09 +0100"  >&lt;p&gt;Actually an update that this is still failing on my home machine, so I need to dig a little deeper.&lt;/p&gt;</comment>
                            <comment id="13065604" author="ekoontz" created="Fri, 15 Jul 2011 00:27:24 +0100"  >&lt;p&gt;I am going to help with this. Feeling the core test failure angst.&lt;/p&gt;</comment>
                            <comment id="13065637" author="ekoontz" created="Fri, 15 Jul 2011 01:43:57 +0100"  >&lt;p&gt;A script to repeatedly run a single test: usage: &lt;/p&gt;


&lt;p&gt; src/repeat.sh ZooKeeperTest&lt;/p&gt;</comment>
                            <comment id="13065638" author="ekoontz" created="Fri, 15 Jul 2011 01:44:23 +0100"  >&lt;p&gt;attachment is not a fix for the issue; just for helping diagnose.&lt;/p&gt;</comment>
                            <comment id="13084940" author="mahadev" created="Mon, 15 Aug 2011 02:55:19 +0100"  >&lt;p&gt;Eugene/Camille/Vishal,&lt;br/&gt;
 Any updates on the tests?&lt;/p&gt;</comment>
                            <comment id="13085271" author="ekoontz" created="Mon, 15 Aug 2011 20:20:30 +0100"  >&lt;p&gt;Hi Mahadev, Camille and Vishal, &lt;br/&gt;
I&apos;m getting an eventual test failure on trunk@296d940f for CnxManagerTest:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;java.lang.AssertionError: Mon Aug 15 19:14:02 UTC 2011 Incorrect number of Worker threads for sid=0 expected 4 found 2&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.Assert.fail(Assert.java:91)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.test.CnxManagerTest.testWorkerThreads(CnxManagerTest.java:332)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2011-08-15 19:14:02,708 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:ZKTestCase$1@65&amp;#93;&lt;/span&gt; - FAILED testWorkerThreads&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13087922" author="vishalmlst" created="Fri, 19 Aug 2011 20:58:18 +0100"  >
&lt;p&gt;Mahadev,&lt;br/&gt;
all tests passed for me for several runs.&lt;/p&gt;

&lt;p&gt;Euguene, looks like you are having some timing issues in the test. Can you attach test logs? Are you running this on EC2?&lt;/p&gt;</comment>
                            <comment id="13089117" author="ekoontz" created="Mon, 22 Aug 2011 23:57:47 +0100"  >&lt;p&gt;Hi Vishal,&lt;br/&gt;
Yes, I am running on on an EC2 m2.xlarge. I&apos;m still seeing the eventual failure on CnxManagerTest. I&apos;ve attached the log file as zk1125.txt.gz (it&apos;s large because I set the logging level to DEBUG and there there&apos;s 43 successful iterations before the failure).&lt;/p&gt;</comment>
                            <comment id="13089120" author="ekoontz" created="Mon, 22 Aug 2011 23:59:12 +0100"  >&lt;p&gt;result of running &quot;src/repeat.sh CnxManagerTest &amp;gt; zk1125.log 2&amp;gt;&amp;amp;1&quot; on an Amazon EC2 m2.xlarge.&lt;/p&gt;</comment>
                            <comment id="13089135" author="ekoontz" created="Tue, 23 Aug 2011 00:11:38 +0100"  >&lt;p&gt;Also I should post my &quot;ulimit -a&quot;:&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ec2-user@ip-10-167-22-217 ~&amp;#93;&lt;/span&gt;$ ulimit -a&lt;br/&gt;
core file size          (blocks, -c) 0&lt;br/&gt;
data seg size           (kbytes, -d) unlimited&lt;br/&gt;
scheduling priority             (-e) 0&lt;br/&gt;
file size               (blocks, -f) unlimited&lt;br/&gt;
pending signals                 (-i) 136932&lt;br/&gt;
max locked memory       (kbytes, -l) 64&lt;br/&gt;
max memory size         (kbytes, -m) unlimited&lt;br/&gt;
open files                      (-n) 1000000&lt;br/&gt;
pipe size            (512 bytes, -p) 8&lt;br/&gt;
POSIX message queues     (bytes, -q) 819200&lt;br/&gt;
real-time priority              (-r) 0&lt;br/&gt;
stack size              (kbytes, -s) 8192&lt;br/&gt;
cpu time               (seconds, -t) unlimited&lt;br/&gt;
max user processes              (-u) 1000000&lt;br/&gt;
virtual memory          (kbytes, -v) unlimited&lt;br/&gt;
file locks                      (-x) unlimited&lt;/p&gt;</comment>
                            <comment id="13089438" author="vishalmlst" created="Tue, 23 Aug 2011 14:12:27 +0100"  >&lt;p&gt;Thanks, I will look at the logs.&lt;/p&gt;</comment>
                            <comment id="13102294" author="vishalmlst" created="Sun, 11 Sep 2011 17:20:43 +0100"  >&lt;p&gt;I think the test is failing beacuse of:&lt;br/&gt;
a) the test is waiting for only a minute after it restarts a peer to verify the correctess of cnx manager threads on the peer. It should wait a little longer.&lt;br/&gt;
b) the EC2 environment is introducing some additional variant. I think the timer is expiring before it reaches a minute.&lt;/p&gt;

&lt;p&gt;I have attached a patch that will wait for max 4 minutes. The test sleeps for 500 ms before calling the method that checks the number of threads on the peer. For fast peers the test will exit immediately and for slow peers it will wait for max 4 minutes.&lt;/p&gt;

&lt;p&gt;Eugene, can you please see if the patch works for you? Thanks.&lt;/p&gt;</comment>
                            <comment id="13102295" author="vishalmlst" created="Sun, 11 Sep 2011 17:22:14 +0100"  >&lt;p&gt;Submitting patch with increased timeout.&lt;/p&gt;</comment>
                            <comment id="13102302" author="hadoopqa" created="Sun, 11 Sep 2011 17:54:40 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12493956/ZOOKEEPER-1125.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12493956/ZOOKEEPER-1125.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1166970.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/521//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/521//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/521//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/521//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/521//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/521//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13104080" author="ekoontz" created="Wed, 14 Sep 2011 00:44:00 +0100"  >&lt;p&gt;Unfortunately CnxManagerTest failed on the 27th iteration (please see attached log).&lt;/p&gt;</comment>
                            <comment id="13104083" author="hadoopqa" created="Wed, 14 Sep 2011 00:52:17 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12494344/fail_on_27th_iteration.log.gz&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12494344/fail_on_27th_iteration.log.gz&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1170365.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/532//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/532//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13104111" author="ekoontz" created="Wed, 14 Sep 2011 01:42:04 +0100"  >&lt;p&gt;Just for some additional detail on my own testing. CnxManagerTest is failing in testWorkerThreads(). This test starts , when the test shuts down members of its set of Quorum Peers, one at a time, and restarts replacements for them. Apparently sometimes, these replacements apparently are not coming up in a timely fashion.&lt;/p&gt;</comment>
                            <comment id="13104114" author="ekoontz" created="Wed, 14 Sep 2011 01:43:54 +0100"  >&lt;p&gt;Sorry, the second sentence in the above should read: &quot;This test starts a set of Quorum Peers and then shuts them down, one at a time, and starts replacements for the ones that were shut down.&quot;&lt;/p&gt;</comment>
                            <comment id="13104244" author="mahadev" created="Wed, 14 Sep 2011 05:34:11 +0100"  >&lt;p&gt;Just committed the patch. Thanks Vishal. I am downgrading the jira to a Major one. I dont think we should block the release with a test case failure that happens rarely.&lt;/p&gt;</comment>
                            <comment id="13104246" author="mahadev" created="Wed, 14 Sep 2011 05:36:37 +0100"  >&lt;p&gt;Ill leave this open since the issue isnt entirely fixed.&lt;/p&gt;</comment>
                            <comment id="13105268" author="hudson" created="Thu, 15 Sep 2011 11:56:35 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1304 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1304/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1304/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1125&quot; title=&quot;Intermittent java core test failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1125&quot;&gt;&lt;del&gt;ZOOKEEPER-1125&lt;/del&gt;&lt;/a&gt;. Intermittent java core test failures. (Vishar Kher via mahadev)&lt;/p&gt;

&lt;p&gt;mahadev : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1170433&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1170433&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/CnxManagerTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13106768" author="vishalmlst" created="Fri, 16 Sep 2011 21:01:13 +0100"  >&lt;p&gt;I am not sure whats going on. I will investigate further. &lt;br/&gt;
Eugene - thanks for trying out the patch.&lt;/p&gt;</comment>
                            <comment id="13115163" author="mahadev" created="Tue, 27 Sep 2011 04:04:56 +0100"  >&lt;p&gt;I am moving this out to 3.5.0, we can keep this open for further investigation. We dont really need to wait on this for 3.4.&lt;/p&gt;</comment>
                            <comment id="13404154" author="eugenparaschiv" created="Fri, 29 Jun 2012 20:50:25 +0100"  >&lt;p&gt;Running into this exact problem - any update on this track?&lt;br/&gt;
Thanks. &lt;br/&gt;
Eugen. &lt;/p&gt;</comment>
                            <comment id="13791707" author="phunt" created="Thu, 10 Oct 2013 18:28:35 +0100"  >&lt;p&gt;This still and issue with 3.4/trunk? Or should we close this?&lt;/p&gt;</comment>
                            <comment id="13999345" author="michim" created="Thu, 15 May 2014 23:53:23 +0100"  >&lt;p&gt;We haven&apos;t seen these failures for a while now. I&apos;m closing this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12505247">ZOOKEEPER-1055</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12517863">ZOOKEEPER-1144</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12493956" name="ZOOKEEPER-1125.patch" size="568" author="vishalmlst" created="Sun, 11 Sep 2011 17:20:43 +0100"/>
                            <attachment id="12494344" name="fail_on_27th_iteration.log.gz" size="477244" author="ekoontz" created="Wed, 14 Sep 2011 00:44:00 +0100"/>
                            <attachment id="12486536" name="repeat-script.patch" size="512" author="ekoontz" created="Fri, 15 Jul 2011 01:43:57 +0100"/>
                            <attachment id="12491284" name="zk1125.log.gz" size="1345378" author="ekoontz" created="Mon, 22 Aug 2011 23:59:12 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Jul 2011 21:08:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>179</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzt5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>