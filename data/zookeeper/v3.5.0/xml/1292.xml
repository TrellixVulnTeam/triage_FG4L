<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:45:24 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1292/ZOOKEEPER-1292.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1292] FLETest is flaky</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1292</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;testLE in FLETest is convoluted, difficult to read, and doesn&apos;t test FLE appropriately. The goal of this jira is to clean it up and propose a more reasonable test case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530636">ZOOKEEPER-1292</key>
            <summary>FLETest is flaky</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fpj">Flavio Junqueira</assignee>
                                    <reporter username="fpj">Flavio Junqueira</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2011 21:46:40 +0000</created>
                <updated>Sat, 24 Dec 2011 10:57:26 +0000</updated>
                            <resolved>Fri, 23 Dec 2011 19:47:31 +0000</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                    <component>leaderElection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13145853" author="fpj" created="Mon, 7 Nov 2011 21:54:32 +0000"  >&lt;p&gt;I simplified LEThread, and created a method that allows me to run multiple rounds. In every round but the last, the leader shuts down and a new leader is elected in the following round.&lt;/p&gt;</comment>
                            <comment id="13147055" author="fpj" created="Wed, 9 Nov 2011 14:01:45 +0000"  >&lt;p&gt;I have rewritten the testLE case. With this patch, I have a new, simpler version of LEThread and have made it in such a way that it enables us to shutdown a number of leaders, forcing a new election. The different test cases refer to the number of leaders we shut down. &lt;/p&gt;
</comment>
                            <comment id="13147056" author="fpj" created="Wed, 9 Nov 2011 14:04:02 +0000"  >&lt;p&gt;I have also let it run for about 4 hours continuously, and I have manually inspected the logs. It would be good if someone else could check as well.&lt;/p&gt;

&lt;p&gt;Btw, I have marked for 3.5.0 because I thought 3.4.0 would be out by now, but we could try to have it for 3.4.0 if anyone is interested.&lt;/p&gt;</comment>
                            <comment id="13147068" author="hadoopqa" created="Wed, 9 Nov 2011 14:36:54 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503081/ZOOKEEPER-1292.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503081/ZOOKEEPER-1292.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1198053.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/783//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/783//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/783//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/783//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/783//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/783//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13164622" author="breed" created="Wed, 7 Dec 2011 19:01:51 +0000"  >&lt;p&gt;can you a comment to the LEThread class to explain more how it works, especially how the rounds work?&lt;/p&gt;

&lt;p&gt;also i think we should lower the wait() times 2 secs seem a bit pessimistic. is there a way to make the Thread.sleep(1000) smaller and actually check a condition to avoid any race?&lt;/p&gt;</comment>
                            <comment id="13170219" author="fpj" created="Thu, 15 Dec 2011 14:10:55 +0000"  >&lt;p&gt;I have added more comments and changed the timeouts:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I have reduced the 2s timeout to 0.2s. I have made this timeout long because I wanted to make sure that if it hangs, then the chance of a false positive is low. Given that the test implemented here is supposed to be more reliable, it should never happen unless we run into a bug.&lt;/li&gt;
	&lt;li&gt;I have reduced the 1s sleep to 0.1s. The idea of that sleep time is to represent the time a follower takes to declare the leader dead. Removing that sleep altogether means that a follower declares a leader dead right after having elected it. I have run several times without it, though, and it still works.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13170238" author="jiraposter@reviews.apache.org" created="Thu, 15 Dec 2011 14:22:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3208/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3208/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-12-15 14:21:47.413394)&lt;/p&gt;


&lt;p&gt;Review request for zookeeper and Benjamin Reed.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Improved test for FLE.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1292&quot; title=&quot;FLETest is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1292&quot;&gt;&lt;del&gt;ZOOKEEPER-1292&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1292&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1292&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  /src/java/test/org/apache/zookeeper/test/FLETest.java 1214749 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3208/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3208/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;fpj&lt;/p&gt;
</comment>
                            <comment id="13170252" author="hadoopqa" created="Thu, 15 Dec 2011 14:54:57 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12507524/ZOOKEEPER-1292.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12507524/ZOOKEEPER-1292.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1214571.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/833//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/833//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/833//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/833//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/833//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/833//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13170259" author="fpj" created="Thu, 15 Dec 2011 15:01:01 +0000"  >&lt;p&gt;The test that failed is org.apache.zookeeper.test.LETest.testLE, not FLETest, the one being changed in this patch.&lt;/p&gt;</comment>
                            <comment id="13175497" author="breed" created="Fri, 23 Dec 2011 16:44:05 +0000"  >&lt;p&gt;+1 looks good&lt;/p&gt;</comment>
                            <comment id="13175555" author="breed" created="Fri, 23 Dec 2011 19:47:31 +0000"  >&lt;p&gt;Committed revision 1222816.&lt;/p&gt;</comment>
                            <comment id="13175710" author="hudson" created="Sat, 24 Dec 2011 10:57:26 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1406 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1406/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1406/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1292&quot; title=&quot;FLETest is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1292&quot;&gt;&lt;del&gt;ZOOKEEPER-1292&lt;/del&gt;&lt;/a&gt;. FLETest is flaky&lt;/p&gt;

&lt;p&gt;breed : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1222816&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1222816&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/test/FLETest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12507524" name="ZOOKEEPER-1292.patch" size="16673" author="fpj" created="Thu, 15 Dec 2011 14:10:55 +0000"/>
                            <attachment id="12503081" name="ZOOKEEPER-1292.patch" size="13712" author="fpj" created="Wed, 9 Nov 2011 14:01:45 +0000"/>
                            <attachment id="12502822" name="ZOOKEEPER-1292.patch" size="11660" author="fpj" created="Mon, 7 Nov 2011 21:54:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Nov 2011 14:36:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzwsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33297</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>