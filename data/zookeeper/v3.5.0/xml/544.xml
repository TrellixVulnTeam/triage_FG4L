<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:46:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-544/ZOOKEEPER-544.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-544] improve client testability - allow test client to access connected server location</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-544</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This came up recently on the user list. If you are developing tests for your zk client you need to be able to access the server that your&lt;br/&gt;
session is currently connected to. The reason is that your test needs to know which server in the quorum to shutdown in order to&lt;br/&gt;
verify you are handling failover correctly. Similar for session expiration testing.&lt;/p&gt;

&lt;p&gt;however we should be careful, we prefer not to expose this to all clients, this is an implementation detail that we typically&lt;br/&gt;
want to hide. &lt;/p&gt;

&lt;p&gt;also we should provide this in both the c and java clients&lt;/p&gt;

&lt;p&gt;I suspect we should add a protected method on ZooKeeper. This will make a higher bar (user will have to subclass) for &lt;br/&gt;
the user to access this method. In tests it&apos;s fine, typically you want a &quot;TestableZooKeeper&quot; class anyway. In c we unfortunately&lt;br/&gt;
have less options, we can just rely on docs for now. &lt;/p&gt;

&lt;p&gt;In both cases (c/java) we need to be very very clear in the docs that this is for testing only and to clearly define semantics.&lt;/p&gt;

&lt;p&gt;We should add the following at the same time:&lt;/p&gt;

&lt;p&gt;toString() method to ZooKeeper which includes server ip/port, client port, any other information deemed useful (connection stats like send/recv?)&lt;/p&gt;

&lt;p&gt;the java ZooKeeper is missing &quot;deterministic connection order&quot; that the c client has. this is also useful for testing. again, protected and &lt;br/&gt;
clear docs that this is for testing purposes only!&lt;/p&gt;


&lt;p&gt;Any other things we should expose?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12437612">ZOOKEEPER-544</key>
            <summary>improve client testability - allow test client to access connected server location</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick Hunt</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2009 17:29:04 +0100</created>
                <updated>Fri, 26 Mar 2010 17:25:02 +0000</updated>
                            <resolved>Tue, 5 Jan 2010 17:32:57 +0000</resolved>
                                                    <fixVersion>3.3.0</fixVersion>
                                    <component>c client</component>
                    <component>java client</component>
                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12774869" author="phunt" created="Mon, 9 Nov 2009 06:10:02 +0000"  >&lt;p&gt;Added some methods to the java to improve testability - in particular to&lt;br/&gt;
get the tostring of zk object and allow access to local/report ip/port. Also&lt;br/&gt;
added some stats for tracking sent/recv information - included in  tostring.&lt;br/&gt;
Added tests of these features - see the log output for examples.&lt;/p&gt;

&lt;p&gt;Note to reviewer - be sure to check some cleanups I did in the code surrounding&lt;br/&gt;
the send/recv counts. Note my attempt to inform potential users that these&lt;br/&gt;
methods are meant for testing by 1) making them protected, 2) naming, 3)&lt;br/&gt;
javadoc comments.&lt;/p&gt;

&lt;p&gt;Also, it would be great to get c versions of these 3 new methods. Ben?&lt;/p&gt;</comment>
                            <comment id="12774875" author="hadoopqa" created="Mon, 9 Nov 2009 07:00:17 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12424336/ZOOKEEPER-544.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12424336/ZOOKEEPER-544.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 833938.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/57/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/57/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/57/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/57/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/57/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/57/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12778980" author="breed" created="Tue, 17 Nov 2009 16:39:23 +0000"  >&lt;p&gt;why do you have testableLocalSocketAddress in ZooKeeper? The cnxn object is protected. You don&apos;t need that method is ZooKeeper do you?&lt;/p&gt;</comment>
                            <comment id="12778993" author="phunt" created="Tue, 17 Nov 2009 17:01:48 +0000"  >&lt;p&gt;discoverability. I put testable* to make it easier for clients to do test (rather than figure out how to get this).&lt;/p&gt;

&lt;p&gt;Also, exposing cnxn means it&apos;s harder to make changes to the implementation as the user code&lt;br/&gt;
will be closely coupled to the guts of cnxn. this allows for changes under the covers (for common&lt;br/&gt;
use cases at least)&lt;/p&gt;</comment>
                            <comment id="12792332" author="mahadev" created="Fri, 18 Dec 2009 04:29:36 +0000"  >&lt;p&gt;trying hudson out agian, after all the changes went in.... &lt;/p&gt;</comment>
                            <comment id="12792342" author="hadoopqa" created="Fri, 18 Dec 2009 04:55:15 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12424336/ZOOKEEPER-544.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12424336/ZOOKEEPER-544.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 892111.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/94/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/94/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12792355" author="mahadev" created="Fri, 18 Dec 2009 05:57:41 +0000"  >&lt;p&gt;updating the patch to trunk.&lt;/p&gt;</comment>
                            <comment id="12792356" author="mahadev" created="Fri, 18 Dec 2009 05:59:13 +0000"  >&lt;p&gt;updating the patch to trunk. Resolved the conflict. &lt;/p&gt;

&lt;p&gt;Pat, can you check if the patch is all fine and I didnt miss anything.&lt;/p&gt;</comment>
                            <comment id="12792400" author="hadoopqa" created="Fri, 18 Dec 2009 09:05:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12428405/ZOOKEEPER-544.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12428405/ZOOKEEPER-544.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 892111.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to cause Findbugs to fail.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/95/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/95/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/95/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/95/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12792576" author="mahadev" created="Fri, 18 Dec 2009 18:52:25 +0000"  >&lt;p&gt;screwed up the last patch. upload a new one and trying hudson again!&lt;/p&gt;</comment>
                            <comment id="12792642" author="hadoopqa" created="Fri, 18 Dec 2009 21:01:00 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12428459/ZOOKEEPER-544.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12428459/ZOOKEEPER-544.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 892111.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/96/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/96/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/96/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/96/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/96/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/96/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12796779" author="breed" created="Tue, 5 Jan 2010 17:32:57 +0000"  >&lt;p&gt;Committed revision 896143.&lt;/p&gt;</comment>
                            <comment id="12797219" author="hudson" created="Wed, 6 Jan 2010 18:15:08 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #655 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/655/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/655/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12428459" name="ZOOKEEPER-544.patch" size="11185" author="mahadev" created="Fri, 18 Dec 2009 18:52:25 +0000"/>
                            <attachment id="12428405" name="ZOOKEEPER-544.patch" size="11393" author="mahadev" created="Fri, 18 Dec 2009 05:59:13 +0000"/>
                            <attachment id="12424336" name="ZOOKEEPER-544.patch" size="11838" author="phunt" created="Mon, 9 Nov 2009 06:10:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 9 Nov 2009 07:00:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzxpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>