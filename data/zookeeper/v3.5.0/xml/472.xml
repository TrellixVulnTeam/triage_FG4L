<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:52:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-472/ZOOKEEPER-472.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-472] Making DataNode not instantiate a HashMap when the node is ephmeral</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-472</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Looking at the code, there is an overhead of a HashSet object for that nodes children, even though the node might be an ephmeral node and cannot have children.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12430443">ZOOKEEPER-472</key>
            <summary>Making DataNode not instantiate a HashMap when the node is ephmeral</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erikholstad@gmail.com">Erik Holstad</assignee>
                                    <reporter username="erikholstad@gmail.com">Erik Holstad</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2009 00:44:38 +0100</created>
                <updated>Fri, 26 Mar 2010 17:24:55 +0000</updated>
                            <resolved>Thu, 12 Nov 2009 22:48:21 +0000</resolved>
                                    <version>3.1.1</version>
                    <version>3.2.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12731225" author="phunt" created="Wed, 15 Jul 2009 01:10:52 +0100"  >&lt;p&gt;Sounds good - as long as we can make the change in a b/w compatible way w/o negatively impacting performance.&lt;/p&gt;</comment>
                            <comment id="12731595" author="breed" created="Wed, 15 Jul 2009 18:59:43 +0100"  >&lt;p&gt;i think we should expand this to not instantiate a hashmap for all zondes if there aren&apos;t any children. it creates a fixed size overhead for all leaf nodes and since there will always be more leaves than inner nodes, it is a none trivial space saving. i think it could also speed serialization/deserialization since it is faster to process a null then an empty hashmap. plus i think it keeps the code simpler to not have a new class.&lt;/p&gt;</comment>
                            <comment id="12731605" author="phunt" created="Wed, 15 Jul 2009 19:18:36 +0100"  >&lt;p&gt;good point ben, +1&lt;br/&gt;
good catch Erik, this is shaping up to be a decent savings. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12741689" author="erikholstad@gmail.com" created="Tue, 11 Aug 2009 06:20:28 +0100"  >&lt;p&gt;After the HBase meeting this weekend we might have a use case for a new node type which keeps the children sorted, so including that we would have 3 different types of nodes, if this new node would be interesting for ZooKeeper in general. Tying that to this issue I came up with the following:&lt;br/&gt;
1. Make a Node interface that only have the following methods&lt;br/&gt;
copyStat(...)&lt;br/&gt;
deserialize(...)&lt;br/&gt;
serialize(...)&lt;br/&gt;
2. For the ephemeral nodes this would be it, they wouldn&apos;t have to have any notion about children.&lt;br/&gt;
3, For the regular nodes and the sorted ones would also have:&lt;br/&gt;
setChildren(...)&lt;br/&gt;
addChild(...)&lt;br/&gt;
getChildren(...)&lt;br/&gt;
where getChildren(...) could have different return types depending on the node.&lt;/p&gt;

&lt;p&gt;4. For the nodes that can have children we also keep the structure uninstantiated until children are actually set or added to the parent. This part I have already done, jsut need to do some more testing on it.&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12753929" author="erikholstad@gmail.com" created="Fri, 11 Sep 2009 01:53:03 +0100"  >&lt;p&gt;Did some more coding today and created 3 classes and 1 inteface:&lt;br/&gt;
Interface Node&lt;/p&gt;

&lt;p&gt;Class EphemeralNode&lt;br/&gt;
Class PersistentNode&lt;br/&gt;
Class PersistentSortedNode&lt;/p&gt;

&lt;p&gt;The problem is that a lot of the class variables from the old DataNode class are being used like node.data = {}, instead of getting and setting it, which leads to some weirdness&lt;br/&gt;
when the node is no longer a class, but an interface. So the way I see it we can take two approaches.&lt;br/&gt;
1. Having the nodes subclass and override methods from a base class or&lt;br/&gt;
2. Start using getters and setters for all variables in the nodes. &lt;/p&gt;

&lt;p&gt;Just want to check before I do anything more since this might turn out to be a quite big change of how the nodes are being used internally.&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12753939" author="mahadev" created="Fri, 11 Sep 2009 02:28:22 +0100"  >&lt;p&gt;I htought the jira was just about not instantiating hashmap.. no? Why does PersistentNode and Ephemeral node need to be different? They can be the same but with the property that until and unless a addchild is done, the hashset maps to null... wouldnt that be sufficient?&lt;/p&gt;

&lt;p&gt;Even with the above you wont be able to do sorted nodes since the chidlren are still sets... no? The children member should map to some other datastructure that maintains order.. no?&lt;/p&gt;</comment>
                            <comment id="12754001" author="erikholstad@gmail.com" created="Fri, 11 Sep 2009 05:54:53 +0100"  >&lt;p&gt;@Mahadev&lt;br/&gt;
Yes the Jira was originally about not instantiating the HashSet before any children where added to the node, so in that case there is only a small reason for not having the persistent and the ephemeral nodes the same. For the sorted node I&apos;m just using a sortedSet instead of the hashset, so all the set methods are still valid to use.&lt;/p&gt;

&lt;p&gt;Not really sure how many types of nodes there could be, but we have a use case for HBase where this new sorted node would be good.&lt;br/&gt;
And in the case of more nodes coming into play it might make sense to have an interface of a base class.&lt;/p&gt;

&lt;p&gt;Sorry about not being clear.&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12754310" author="erikholstad@gmail.com" created="Fri, 11 Sep 2009 20:58:46 +0100"  >&lt;p&gt;I decided to take a lesser approach and just do what this Jira originally said, so basically creating two new methods, addChild() and removeChild() and making the variable children in DataNode private. The children set in DataNode is not instantiated at node creation but instead the first time addChild() is being called.&lt;/p&gt;

&lt;p&gt;No synchronization is done one the calls addChild and removeChild since it looks like most other calls are synchronized on the node itself. &lt;br/&gt;
Not really sure why getChildren is synchronized though, since as far as I can see it all the uses of it are also synchronized on the node.&lt;/p&gt;

&lt;p&gt;According to the docs it says that 2 spaces should be used instead of 4. Is that a miss in the docs or is that what is really being used?&lt;br/&gt;
I&apos;m using 2 for this patch.&lt;/p&gt;
</comment>
                            <comment id="12765676" author="phunt" created="Wed, 14 Oct 2009 19:24:09 +0100"  >&lt;p&gt;Hi, what&apos;s the status on this JIRA? I&apos;d like to get it reviewed/committed if it&apos;s ready. (you need to &quot;submit patch&quot;, I would do it, but I can&apos;t as you&apos;ve marked it as &quot;in progress&quot;)&lt;/p&gt;

&lt;p&gt;we use 4 spaces, for some reason hadoop mr/hdfs uses 2 but we use 4 (you should see this used throughout our code)&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12765691" author="erikholstad@gmail.com" created="Wed, 14 Oct 2009 19:52:05 +0100"  >&lt;p&gt;@ Patrik Hunt, been waiting from someone to have a look at the patch for a little bit. The reason that I didn&apos;t mark it as patch available, was because&lt;br/&gt;
I got yelled at in the past, not here, for marking it like that when it hadn&apos;t been reviewed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Will change the formatting to 4 spaces and upload again.&lt;/p&gt;

&lt;p&gt;Erik &lt;/p&gt;</comment>
                            <comment id="12765697" author="phunt" created="Wed, 14 Oct 2009 20:03:05 +0100"  >&lt;p&gt;No yelling here, maybe a stern talking to though. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Update the patch and we&apos;ll take a look. If you release the &quot;in progress&quot; that will allow us to submit for you if we think it&apos;s ready.&lt;/p&gt;</comment>
                            <comment id="12765708" author="erikholstad@gmail.com" created="Wed, 14 Oct 2009 20:35:42 +0100"  >&lt;p&gt;Second version with some minor indention fixes.&lt;/p&gt;</comment>
                            <comment id="12765709" author="erikholstad@gmail.com" created="Wed, 14 Oct 2009 20:38:59 +0100"  >&lt;p&gt;@ Patrik , well good thing you cannot take me in the ear and sit me down &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Might want to change the instructions on &lt;a href=&quot;http://wiki.apache.org/hadoop/ZooKeeper/HowToContribute&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/ZooKeeper/HowToContribute&lt;/a&gt; though, to not make people confused? Remember taking a look there when I started and saw the code.&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12765765" author="phunt" created="Wed, 14 Oct 2009 22:35:13 +0100"  >&lt;p&gt;thanks for the pointer - I fixed the indentation item and also added note on notabs. also fixed a problem that should have said tests should end in Test, not start.&lt;/p&gt;</comment>
                            <comment id="12765770" author="phunt" created="Wed, 14 Oct 2009 22:47:24 +0100"  >&lt;p&gt;Hi Erik, I tried patching the current trunk, but the patch fails (below). Perhaps it&apos;s against an older version of zk source? Would you mind&lt;br/&gt;
creating a patch against the current source HEAD in svn? (I took a look but it seemed more than just a simple mismatch, easiest if you could address)&lt;/p&gt;

&lt;p&gt;Also it&apos;s best to have a single patch file as attachment, all you need to do is upload a file with the same name and jira will take care of it:&lt;br/&gt;
from howtocontribute:&lt;br/&gt;
&quot;In some cases a patch may need to be updated based on review comments. In this case the updated patch should be re-attached to the Jira with the same name. Jira will archive the older version of the patch and make the new patch the active patch. This will enable a history of patches on the Jira. As stated above patch naming is generally ZOOKEEPER-#.patch where ZOOKEEPER-# is the id of the Jira.&quot;&lt;br/&gt;
you could use &quot;manage attachments&quot; to address (ie remove the v2.patch)&lt;/p&gt;

&lt;p&gt;-------------------&lt;br/&gt;
 patch -p0 &amp;lt; /home/phunt/Desktop/zookeeper-472-v2.patch &lt;/p&gt;

&lt;p&gt;patching file src/java/main/org/apache/zookeeper/server/DataNode.java&lt;br/&gt;
patching file src/java/main/org/apache/zookeeper/server/DataTree.java&lt;br/&gt;
Hunk #35 FAILED at 1029.&lt;br/&gt;
1 out of 35 hunks FAILED &amp;#8211; saving rejects to file src/java/main/org/apache/zookeeper/server/DataTree.java.rej&lt;br/&gt;
patching file src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java&lt;br/&gt;
Hunk #6 FAILED at 208.&lt;br/&gt;
1 out of 9 hunks FAILED &amp;#8211; saving rejects to file src/java/main/org/apache/zookeeper/server/PrepRequestProcessor.java.rej&lt;/p&gt;</comment>
                            <comment id="12766594" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 17:35:30 +0100"  >&lt;p&gt;Fixed issues, so that patch applies to trunk&lt;/p&gt;</comment>
                            <comment id="12766595" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 17:39:33 +0100"  >&lt;p&gt;@ Patrik, sorry for not doing this yesterday, had some other stuff that I needed to take care of.  Yeah, that patch was created against an older branch, but I updated to trunk&lt;br/&gt;
in Eclipse and tested it before submitting it, but there seems to have been some issues with that.&lt;br/&gt;
This patch applied clean on trunk as of this morning using regular patch -p0&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12766611" author="mahadev" created="Fri, 16 Oct 2009 18:17:35 +0100"  >&lt;p&gt;erik,&lt;br/&gt;
 I just tried compiling the code with ant jar and it fails to compile with the folowing error -&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
compile:
    [javac] Compiling 104 source files to /home/mahadev/workspace/zookeeper-commit-trunk/build/classes
    [javac] /home/mahadev/workspace/zookeeper-commit-trunk/src/java/main/org/apache/zookeeper/server/DataTree.java:1055: children has &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; access in org.apache.zookeeper.server.DataNode
    [javac]                 node.parent.children.add(path.substring(lastSlash + 1));
    [javac]                            ^
    [javac] 1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I havent ahd a chance to review the code yet, but I couldnt help but notice changes to license headers on src/java/main/org/apache/zookeeper/server/DataNode.java. Is there something you changed in the licence?&lt;/p&gt;
</comment>
                            <comment id="12766625" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 18:40:49 +0100"  >&lt;p&gt;Fixed compile error.&lt;/p&gt;</comment>
                            <comment id="12766626" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 18:42:14 +0100"  >&lt;p&gt;@ Mahadev, yeah that was my bad. Not sure why my environment didn&apos;t show that as an error. &lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12766637" author="mahadev" created="Fri, 16 Oct 2009 19:20:21 +0100"  >&lt;p&gt;erik, there are apache header changes in 2 files, any reason for that? &lt;/p&gt;</comment>
                            <comment id="12766653" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 19:44:45 +0100"  >&lt;p&gt;Fixed headers&lt;/p&gt;</comment>
                            <comment id="12766655" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 19:46:19 +0100"  >&lt;p&gt;@ Mahadev, no reason for it, just a part of the mess with me using another indention scheme for the original patch.&lt;/p&gt;</comment>
                            <comment id="12776189" author="phunt" created="Wed, 11 Nov 2009 00:24:28 +0000"  >&lt;p&gt;Is this ready? I see some updates, throwing into the patch queue, reviewer please be sure all the comments are addressed.&lt;/p&gt;</comment>
                            <comment id="12776220" author="hadoopqa" created="Wed, 11 Nov 2009 01:37:25 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12422389/zookeeper-472.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12422389/zookeeper-472.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 833938.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/60/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/60/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12776506" author="phunt" created="Wed, 11 Nov 2009 16:38:08 +0000"  >&lt;p&gt;Updated patch to compile against latest trunk.&lt;/p&gt;

&lt;p&gt;Also cleaned up some finals.&lt;/p&gt;

&lt;p&gt;Also reduced the default child hashset size to 8 rather than 16 (let&apos;s be conservative&lt;br/&gt;
as to the avg number of subnodes).&lt;/p&gt;

&lt;p&gt;Small optimization to getchildren in datatree - allocate exactly the right size array list&lt;/p&gt;</comment>
                            <comment id="12776510" author="hadoopqa" created="Wed, 11 Nov 2009 16:54:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12424615/zookeeper-472.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12424615/zookeeper-472.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 833938.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/61/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/61/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/61/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/61/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/61/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/61/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12776543" author="erikholstad@gmail.com" created="Wed, 11 Nov 2009 18:05:20 +0000"  >&lt;p&gt;Fixed the findbug warning, hopefully, by moving the synchronization away from the node object into the different caller methods.&lt;/p&gt;</comment>
                            <comment id="12776549" author="erikholstad@gmail.com" created="Wed, 11 Nov 2009 18:07:51 +0000"  >&lt;p&gt;Not really sure what to do about the no test -1. It is kinda hard to include new test for something like this and make it portable in a good way. &lt;br/&gt;
Since I&apos;m not adding any new functionality, the old tests should be enough, or what is the general opinion on this matter?&lt;/p&gt;

&lt;p&gt;Erik&lt;/p&gt;</comment>
                            <comment id="12776572" author="phunt" created="Wed, 11 Nov 2009 18:54:56 +0000"  >&lt;p&gt;In general we should have tests but I&apos;m fine with the no-test in this case, this is an optimization not a bug fix &lt;br/&gt;
and I can&apos;t think of any test we could add that would benefit, we already have good test coverage on this area.&lt;/p&gt;</comment>
                            <comment id="12776580" author="erikholstad@gmail.com" created="Wed, 11 Nov 2009 19:10:17 +0000"  >&lt;p&gt;Sounds good to me.&lt;/p&gt;</comment>
                            <comment id="12776582" author="hadoopqa" created="Wed, 11 Nov 2009 19:14:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12424625/zookeeper-472.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12424625/zookeeper-472.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 833938.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/62/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/62/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/62/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/62/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/62/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-h8.grid.sp2.yahoo.net/62/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12777245" author="mahadev" created="Thu, 12 Nov 2009 22:45:12 +0000"  >&lt;p&gt;+1 .. the patch looks good. one minor nit for future patches, it becomes hard to review the patches if it has a lot of indentation changes. This patch had a lot of indentation than code changes and it became quite hard to review. Its always good to file indentation changes in a seperate jira so that reviewer can easily find out what actual code changes happened.&lt;/p&gt;</comment>
                            <comment id="12777248" author="mahadev" created="Thu, 12 Nov 2009 22:48:21 +0000"  >&lt;p&gt;I just committed this. thanks erik.&lt;/p&gt;</comment>
                            <comment id="12777286" author="erikholstad@gmail.com" created="Thu, 12 Nov 2009 23:57:08 +0000"  >&lt;p&gt;@Mahadev&lt;br/&gt;
I totally agree that it is hard to follow a patch when there is a lot of &quot;crap&quot; changes in there. This was not my intention but had to do with the settings&lt;br/&gt;
that I used, from the beginning and some un clearness on the website about intentations that has since been fixed. &lt;/p&gt;</comment>
                            <comment id="12777292" author="mahadev" created="Fri, 13 Nov 2009 00:10:02 +0000"  >&lt;p&gt;no worries erik!&lt;/p&gt;</comment>
                            <comment id="12777879" author="hudson" created="Sat, 14 Nov 2009 10:55:34 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #536 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/536/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/536/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12424625" name="zookeeper-472.patch" size="48344" author="erikholstad@gmail.com" created="Wed, 11 Nov 2009 18:05:20 +0000"/>
                            <attachment id="12424615" name="zookeeper-472.patch" size="49599" author="phunt" created="Wed, 11 Nov 2009 16:38:08 +0000"/>
                            <attachment id="12422389" name="zookeeper-472.patch" size="47493" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 19:44:45 +0100"/>
                            <attachment id="12422379" name="zookeeper-472.patch" size="50723" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 18:40:49 +0100"/>
                            <attachment id="12422368" name="zookeeper-472.patch" size="50221" author="erikholstad@gmail.com" created="Fri, 16 Oct 2009 17:35:30 +0100"/>
                            <attachment id="12419333" name="zookeeper-472.patch" size="78948" author="erikholstad@gmail.com" created="Fri, 11 Sep 2009 20:58:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 00:10:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzxt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33461</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>