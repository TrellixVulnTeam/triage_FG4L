<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:42:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1578/ZOOKEEPER-1578.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1578] org.apache.zookeeper.server.quorum.Zab1_0Test failed due to hard code with 33556 port</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1578</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;org.apache.zookeeper.server.quorum.Zab1_0Test was failed both with SUN JDK and open JDK.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.zookeeper.server.quorum.Zab1_0Test&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 8, Failures: 0, Errors: 1, Time elapsed: 18.334 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.zookeeper.server.quorum.Zab1_0Test FAILED &lt;/p&gt;


&lt;p&gt;Zab1_0Test log:&lt;br/&gt;
Zab1_0Test log:&lt;br/&gt;
2012-07-11 23:17:15,579 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main:Leader@427&amp;#93;&lt;/span&gt; - Shutdown called&lt;br/&gt;
java.lang.Exception: shutdown Leader! reason: end of test&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Leader.shutdown(Leader.java:427)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Zab1_0Test.testLastAcceptedEpoch(Zab1_0Test.java:211)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)&lt;/p&gt;


&lt;p&gt;2012-07-11 23:17:15,584 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main:Leader@139&amp;#93;&lt;/span&gt; - Couldn&apos;t bind to port 33556&lt;br/&gt;
java.net.BindException: Address already in use&lt;br/&gt;
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:402)&lt;br/&gt;
        at java.net.ServerSocket.bind(ServerSocket.java:328)&lt;br/&gt;
        at java.net.ServerSocket.bind(ServerSocket.java:286)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Leader.&amp;lt;init&amp;gt;(Leader.java:137)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Zab1_0Test.createLeader(Zab1_0Test.java:810)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.Zab1_0Test.testLeaderInElectingFollowers(Zab1_0Test.java:224)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;/p&gt;

&lt;p&gt;2012-07-11 23:17:20,202 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;LearnerHandler-bdvm039.svl.ibm.com/9.30.122.48:40153:LearnerHandler@559&amp;#93;&lt;/span&gt; - Unex&lt;br/&gt;
pected exception causing shutdown while sock still open&lt;br/&gt;
java.net.SocketTimeoutException: Read timed out&lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:129)&lt;br/&gt;
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)&lt;br/&gt;
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)&lt;br/&gt;
        at java.io.DataInputStream.readInt(DataInputStream.java:370)&lt;br/&gt;
        at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.QuorumPacket.deserialize(QuorumPacket.java:83)&lt;br/&gt;
        at org.apache.jute.BinaryInputArchive.readRecord(BinaryInputArchive.java:108)&lt;br/&gt;
        at org.apache.zookeeper.server.quorum.LearnerHandler.run(LearnerHandler.java:291)&lt;br/&gt;
2012-07-11 23:17:20,203 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;LearnerHandler-bdvm039.svl.ibm.com/9.30.122.48:40153:LearnerHandler@569&amp;#93;&lt;/span&gt; - ****&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;GOODBYE bdvm039.svl.ibm.com/9.30.122.48:40153 ********&lt;br/&gt;
2012-07-11 23:17:20,204 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-20:Leader@421&amp;#93;&lt;/span&gt; - Shutting down&lt;br/&gt;
2012-07-11 23:17:20,204 &lt;span class=&quot;error&quot;&gt;&amp;#91;myid:&amp;#93;&lt;/span&gt; - INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-20:Leader@427&amp;#93;&lt;/span&gt; - Shutdown called&lt;br/&gt;
java.lang.Exception: shutdown Leader! reason: lead ended&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;this failure seems 33556 port is already used, but it is not in use with command check in fact. There is a hard code in unit test, we can improve it with code patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12615285">ZOOKEEPER-1578</key>
            <summary>org.apache.zookeeper.server.quorum.Zab1_0Test failed due to hard code with 33556 port</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michelle">Li Ping Zhang</assignee>
                                    <reporter username="michelle">Li Ping Zhang</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 8 Nov 2012 03:55:08 +0000</created>
                <updated>Thu, 13 Mar 2014 18:17:15 +0000</updated>
                            <resolved>Mon, 17 Dec 2012 07:13:02 +0000</resolved>
                                    <version>3.4.3</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13505405" author="michelle" created="Wed, 28 Nov 2012 12:27:57 +0000"  >&lt;p&gt;This 1 UT failure org.apache.zookeeper.server.quorum.Zab1_0Test is not only existed in Open JDK, but also exsited in SUN JDK.&lt;/p&gt;

&lt;p&gt;This is due to this test uses a lot of hard-wired port numbers. Most or all other tests automatically assign a free port.&lt;/p&gt;

&lt;p&gt;The resolvement is to modify org.apache.zookeeper.server.quorum.Zab1_0Test, specifying a different port instead of the 33556 or just change it to&#160;PortAssignment.unique() and add &#160; &#160;&quot;import org.apache.zookeeper.PortAssignment;&quot;. &lt;/p&gt;</comment>
                            <comment id="13505412" author="michelle" created="Wed, 28 Nov 2012 12:35:48 +0000"  >&lt;p&gt;Dear Zookeeper committee, I have generated diff patches for3.4 branch and trunk, and all UT in both Open JDK and SUN JDK are passed, need I provide it? &lt;/p&gt;</comment>
                            <comment id="13505413" author="michelle" created="Wed, 28 Nov 2012 12:36:39 +0000"  >&lt;p&gt;By the way, can I have the honor to be the assignee to fix this issue? Thanks!&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13510458" author="michelle" created="Wed, 5 Dec 2012 13:06:00 +0000"  >&lt;p&gt;Current all UT passed. &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1578&quot; title=&quot;org.apache.zookeeper.server.quorum.Zab1_0Test failed due to hard code with 33556 port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1578&quot;&gt;&lt;del&gt;ZOOKEEPER-1578&lt;/del&gt;&lt;/a&gt;-branch-3.4.patch is for branch 3.4.&lt;/p&gt;</comment>
                            <comment id="13510460" author="michelle" created="Wed, 5 Dec 2012 13:07:29 +0000"  >&lt;p&gt;This patch &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1578&quot; title=&quot;org.apache.zookeeper.server.quorum.Zab1_0Test failed due to hard code with 33556 port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1578&quot;&gt;&lt;del&gt;ZOOKEEPER-1578&lt;/del&gt;&lt;/a&gt;-trunk.patch is for trunk.&lt;/p&gt;</comment>
                            <comment id="13510464" author="michelle" created="Wed, 5 Dec 2012 13:14:58 +0000"  >&lt;p&gt;Hello Patrick,&lt;/p&gt;

&lt;p&gt;Thanks very much for your assigning!&lt;/p&gt;

&lt;p&gt;I have attached the patches into JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1578&quot; title=&quot;org.apache.zookeeper.server.quorum.Zab1_0Test failed due to hard code with 33556 port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1578&quot;&gt;&lt;del&gt;ZOOKEEPER-1578&lt;/del&gt;&lt;/a&gt; for both branch 3.4&lt;br/&gt;
and trunk, all UT are passed.&lt;/p&gt;

&lt;p&gt;Hope everything goes well with you.&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;2012/11/29 Patrick Hunt (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;




&lt;p&gt;&amp;#8211; &lt;br/&gt;
Cheers,&lt;/p&gt;

&lt;p&gt;Michelle Zhang (Li Ping Zhang)&lt;/p&gt;</comment>
                            <comment id="13529252" author="phunt" created="Tue, 11 Dec 2012 19:35:18 +0000"  >&lt;p&gt;Hi Li Ping, thanks! Can you move this jira out of &quot;in progress&quot;? It blocks the next step in the workflow. &lt;/p&gt;

&lt;p&gt;There is no need to use &quot;in progress&quot; in future. Assign to yourself, attach the patch, click &quot;submit patch&quot; button when you&apos;re ready for review/commit. thanks! (we don&apos;t really use in progress). more details here: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/ZOOKEEPER/HowToContribute&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/ZOOKEEPER/HowToContribute&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13531164" author="michelle" created="Thu, 13 Dec 2012 16:43:11 +0000"  >&lt;p&gt;change status from &quot;In Progress&quot; into &quot;Submit Patch&quot;.&lt;/p&gt;</comment>
                            <comment id="13531165" author="michelle" created="Thu, 13 Dec 2012 16:44:37 +0000"  >&lt;p&gt;Thanks Patrick for your reminding, I have changed it into &quot;submit patch&quot;.&lt;/p&gt;</comment>
                            <comment id="13531209" author="hadoopqa" created="Thu, 13 Dec 2012 17:21:12 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12556095/ZOOKEEPER-1578-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12556095/ZOOKEEPER-1578-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1421098.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1293//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1293//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1293//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1293//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1293//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1293//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13533695" author="mahadev" created="Mon, 17 Dec 2012 07:07:30 +0000"  >&lt;p&gt;+1 the patch looks good.&lt;/p&gt;</comment>
                            <comment id="13533699" author="mahadev" created="Mon, 17 Dec 2012 07:13:02 +0000"  >&lt;p&gt;Just committed this to 3.4 and trunk. Thanks for the fix Li!&lt;/p&gt;</comment>
                            <comment id="13533844" author="hudson" created="Mon, 17 Dec 2012 11:04:42 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1775 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1775/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1775/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1578&quot; title=&quot;org.apache.zookeeper.server.quorum.Zab1_0Test failed due to hard code with 33556 port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1578&quot;&gt;&lt;del&gt;ZOOKEEPER-1578&lt;/del&gt;&lt;/a&gt;. org.apache.zookeeper.server.quorum.Zab1_0Test failed due to  hard code with 33556 port. (Li Ping via mahadev) (Revision 1422772)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
mahadev : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1422772&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1422772&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/Zab1_0Test.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933799" author="fpj" created="Thu, 13 Mar 2014 18:17:15 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12556094" name="ZOOKEEPER-1578-branch-3.4.patch" size="1203" author="michelle" created="Wed, 5 Dec 2012 13:06:00 +0000"/>
                            <attachment id="12556095" name="ZOOKEEPER-1578-trunk.patch" size="1154" author="michelle" created="Wed, 5 Dec 2012 13:07:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Dec 2012 19:35:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy9q67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90719</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>