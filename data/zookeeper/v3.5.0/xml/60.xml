<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:47:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-60/ZOOKEEPER-60.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-60] Get cppunit tests running as part of Hudson CI</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-60</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Investigate if it is possible to run cppunit tests as part of Hudson.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12399318">ZOOKEEPER-60</key>
            <summary>Get cppunit tests running as part of Hudson CI</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gkesavan">Giridharan Kesavan</assignee>
                                    <reporter username="phunt">Patrick Hunt</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jun 2008 22:51:40 +0100</created>
                <updated>Wed, 8 Jul 2009 21:23:56 +0100</updated>
                            <resolved>Thu, 2 Apr 2009 22:31:26 +0100</resolved>
                                    <version>3.0.0</version>
                    <version>3.0.1</version>
                    <version>3.1.0</version>
                    <version>3.1.1</version>
                                    <fixVersion>3.2.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12681106" author="phunt" created="Thu, 12 Mar 2009 00:03:44 +0000"  >&lt;p&gt;Giri said he may look into this.&lt;/p&gt;

&lt;p&gt;There are a few pre-reqs to running the cppunit tests:&lt;/p&gt;

&lt;p&gt;1) run &quot;ant jar&quot; from the trunk first&lt;br/&gt;
 a) generates c/java source for jute, necessary to build/run the c/tests&lt;br/&gt;
 b) run &quot;autoconf -if&quot; from the src/c dir&lt;br/&gt;
 c) run &quot;./configure&quot; from the src/c/dir&lt;/p&gt;

&lt;p&gt;2) cppunit is required to run the tests&lt;/p&gt;

&lt;p&gt;3) on redhat I had to install autoconf 2.59_2, automake 1.9.4, cppunit 1.12.0 and used gcc 3 (3.4.2 to be exact) in order to run autoreconf/configure/make&lt;/p&gt;

&lt;p&gt;4) from src/c run &quot;make run-check&quot; to run the tests&lt;br/&gt;
&quot;make check&quot; will just compile the tests&lt;/p&gt;

&lt;p&gt;5) the tests assume that the jar file for the server has been built&lt;br/&gt;
  a) some mock based tests are run that don&apos;t use the server jar&lt;br/&gt;
  b) some server based tests are run that do require the jar - see zkServer.sh in the test directory, run by the unit harness&lt;/p&gt;

&lt;p&gt;6) afaik the only output of the tests is to the console (success/failure) &lt;br/&gt;
  there are two tests run by make, zktest_st and zktest_mt for the single and multi threaded tests respectively&lt;/p&gt;</comment>
                            <comment id="12688993" author="gkesavan" created="Wed, 25 Mar 2009 04:14:17 +0000"  >&lt;p&gt;this patch adds couple of ant target&apos;s to execute the cppunit tests.. &lt;/p&gt;

&lt;p&gt;To execute the cppunit test use&lt;/p&gt;

&lt;p&gt;ant create-configure-cppunit test-cppunit -Dcppunit=true &lt;/p&gt;

&lt;p&gt;create-configure-cppunit target runs the autoreconf and test-cppunit executes the test.&lt;/p&gt;

&lt;p&gt;Please review&lt;br/&gt;
tnx!&lt;/p&gt;</comment>
                            <comment id="12689000" author="mahadev" created="Wed, 25 Mar 2009 04:42:50 +0000"  >&lt;p&gt;does make run-check in the c directory still working with these changes?&lt;/p&gt;</comment>
                            <comment id="12689004" author="gkesavan" created="Wed, 25 Mar 2009 05:45:12 +0000"  >&lt;p&gt;I hardly changed anything in the Makefile.am so it should work with the same set of env variables set in the build.xml &lt;/p&gt;</comment>
                            <comment id="12689013" author="phunt" created="Wed, 25 Mar 2009 06:16:11 +0000"  >&lt;p&gt;I think Mahadev&apos;s concern is the change:&lt;/p&gt;

&lt;p&gt;-#define ZKSERVER_CMD &quot;./tests/zkServer.sh&quot;&lt;br/&gt;
+#define ZKSERVER_CMD &quot;zkServer.sh&quot;&lt;/p&gt;

&lt;p&gt;unless tests dir is in your path &quot;make run-check&quot; will fail when run directly in src/c. In &lt;br/&gt;
build.xml you are adding tests dir to the PATH, however for someone running make &lt;br/&gt;
directly from src/c this will fail. Also notice that trunk/bin contains a similarly named &lt;br/&gt;
script - so in build.xml you want to prepend the tests directory (zkServer.sh location)&lt;br/&gt;
to the PATH otw it may pickup the wrong script. &lt;/p&gt;

&lt;p&gt;Also, the change to config.ac to remove the check for the generated code, why was this done? &lt;br/&gt;
I don&apos;t think we should remove this, in case someone runs make directly from src/c (not build.xml)&lt;/p&gt;

&lt;p&gt;Basically we need to ensure that users of both build.xml, and users running make directly&lt;br/&gt;
from src/c, are both able to compile/test successfully.&lt;/p&gt;

&lt;p&gt;Perhaps the PATH just needs to be specified when running &quot;make run-check&quot; - ie update the&lt;br/&gt;
PATH in the makefile rather than in the build.xml. I think this would address the issue for both&lt;br/&gt;
users of make and build.xml.&lt;/p&gt;</comment>
                            <comment id="12689199" author="gkesavan" created="Wed, 25 Mar 2009 18:48:57 +0000"  >&lt;p&gt;Here is the patch which addresses the comments added by Patrick&lt;/p&gt;

&lt;p&gt;Renamed the zkServer.sh to tests-zkServer.sh, hence the conflict with zkServer.sh in the bin folder is avoided. Also restored the compile_jute check in the configure.ac by introducing a flag.&lt;/p&gt;

&lt;p&gt;If user wants to run tests directly from the src/c folder they have to export PATH variable as fuser binary is not available in the users path. (fuser binary sits in the /sbin dir). so adding tests folder to the path may not an overhead.&lt;/p&gt;</comment>
                            <comment id="12689220" author="phunt" created="Wed, 25 Mar 2009 20:10:02 +0000"  >&lt;p&gt;Giri, thanks for incorporating the feedback. It&apos;s unfortunate though that we will require src/c&lt;br/&gt;
based  testers to set the PATH. As you know it&apos;s already fairly complex steps/dependencies to setup&lt;br/&gt;
testing in src/c, this just adds another stumbling point.&lt;/p&gt;

&lt;p&gt;Couldn&apos;t you have 2 locations for the script? &quot;./tests/test-zkServer.sh&quot;, which if found is used, otw&lt;br/&gt;
just try test-zkServer.sh and rely on the path? I think this fairly simple change would allow&lt;br/&gt;
what you are trying to do while not adding further burden on user.&lt;/p&gt;</comment>
                            <comment id="12689262" author="gkesavan" created="Wed, 25 Mar 2009 22:54:09 +0000"  >&lt;p&gt;I don&apos;t see a way in gettin this done;&lt;/p&gt;

&lt;p&gt;only way that I see here it to pass the location of the zkserver.sh as an argument to the TestClient.cc file.&lt;/p&gt;

&lt;p&gt;Mahadev said he will be looking into this. &lt;/p&gt;</comment>
                            <comment id="12689324" author="gkesavan" created="Thu, 26 Mar 2009 01:44:18 +0000"  >&lt;p&gt;Thanks to Mahadev for his help on this patch.&lt;/p&gt;

&lt;p&gt;With this patch the users of make can continue doing the make calls from src/c folder as they were doing before.&lt;/p&gt;

</comment>
                            <comment id="12690116" author="gkesavan" created="Fri, 27 Mar 2009 21:33:47 +0000"  >&lt;p&gt;re-submitting the patch.&lt;/p&gt;</comment>
                            <comment id="12690171" author="hadoopqa" created="Sat, 28 Mar 2009 04:58:43 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12403671/ZK-60.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12403671/ZK-60.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 759273.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/4/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/4/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/4/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/4/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/4/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/4/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12690174" author="hadoopqa" created="Sat, 28 Mar 2009 05:19:02 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12403671/ZK-60.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12403671/ZK-60.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 759273.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/5/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/5/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/5/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/5/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/5/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/5/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12694858" author="mahadev" created="Thu, 2 Apr 2009 02:36:25 +0100"  >&lt;p&gt;the last patch had a nbug. it does nto work with make run-check in the c directory. I changed the tests/zkserver.sh sothat it now works with make run-check. &lt;/p&gt;</comment>
                            <comment id="12694861" author="mahadev" created="Thu, 2 Apr 2009 02:48:45 +0100"  >&lt;p&gt;also the command to run cpp tests via ant is &lt;br/&gt;
ant create-cppunit-configure test-cppunit -Dcppunit=true&lt;/p&gt;

&lt;p&gt;and not &lt;br/&gt;
create-configure-cppunit &lt;br/&gt;
as mentioned above.&lt;/p&gt;</comment>
                            <comment id="12694863" author="mahadev" created="Thu, 2 Apr 2009 02:49:10 +0100"  >&lt;p&gt;making it run through hudson again.&lt;/p&gt;</comment>
                            <comment id="12694870" author="hadoopqa" created="Thu, 2 Apr 2009 03:17:01 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12404407/ZOOKEEPER-60.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12404407/ZOOKEEPER-60.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 761126.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 21 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/8/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/8/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/8/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/8/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/8/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Zookeeper-Patch-vesta.apache.org/8/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12695137" author="mahadev" created="Thu, 2 Apr 2009 22:20:23 +0100"  >&lt;p&gt;the test failure is not related to this patch. FLEnewtest is failing.&lt;/p&gt;</comment>
                            <comment id="12695140" author="mahadev" created="Thu, 2 Apr 2009 22:31:26 +0100"  >&lt;p&gt;+1 for the patch ... I just committed this. thanks giri.&lt;/p&gt;</comment>
                            <comment id="12695142" author="mahadev" created="Thu, 2 Apr 2009 22:33:05 +0100"  >&lt;p&gt;I opened another jira for intergrating this patch into the hudson patch testing for all the patches &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-361&quot; title=&quot;integrate cppunit testing as part of hudson patch process.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-361&quot;&gt;&lt;del&gt;ZOOKEEPER-361&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12695205" author="gkesavan" created="Fri, 3 Apr 2009 02:13:56 +0100"  >&lt;p&gt;Mahadev, Thanks for you help on this patch&lt;/p&gt;</comment>
                            <comment id="12695718" author="hudson" created="Sat, 4 Apr 2009 12:50:53 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #271 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/ZooKeeper-trunk/271/&lt;/a&gt;)&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12403671" name="ZK-60.patch" size="6976" author="gkesavan" created="Thu, 26 Mar 2009 01:44:18 +0000"/>
                            <attachment id="12403631" name="ZK-60.patch" size="7911" author="gkesavan" created="Wed, 25 Mar 2009 18:48:57 +0000"/>
                            <attachment id="12403586" name="ZK-60.patch" size="6125" author="gkesavan" created="Wed, 25 Mar 2009 04:14:17 +0000"/>
                            <attachment id="12404407" name="ZOOKEEPER-60.patch" size="7001" author="mahadev" created="Thu, 2 Apr 2009 02:36:25 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Mar 2009 04:14:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzyqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33613</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Get cppunit tests running from ant.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>