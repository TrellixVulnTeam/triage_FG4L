<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:46:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1540/ZOOKEEPER-1540.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1540] ZOOKEEPER-1411 breaks backwards compatibility</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1540</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;There is a one-line bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt; which breaks backwards compatibility for sites which are using separate configuration files for each server. The bug is with the handling of the clientPort option.&lt;/p&gt;

&lt;p&gt;One line fix to follow shortly.&lt;/p&gt;

&lt;p&gt;thanks!&lt;br/&gt;
Andrew&lt;/p&gt;</description>
                <environment></environment>
        <key id="12604651">ZOOKEEPER-1540</key>
            <summary>ZOOKEEPER-1411 breaks backwards compatibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adferguson">Andrew Ferguson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Aug 2012 18:51:57 +0100</created>
                <updated>Tue, 25 Sep 2012 12:02:43 +0100</updated>
                            <resolved>Tue, 25 Sep 2012 06:33:18 +0100</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13440490" author="adferguson" created="Thu, 23 Aug 2012 18:58:06 +0100"  >&lt;p&gt;this bug occurs if you have a separate configuration file for each ZooKeeper server (as in previous releases) and have clientPort specified as part of the file, rather than as part of the &quot;server.N=host:port:port:type;host:port&quot; format introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt; (I hope I&apos;m reading that patch correctly).&lt;/p&gt;

&lt;p&gt;not sure how to write a test case for this &amp;#8211; if one&apos;s needed, perhaps someone can suggest how? thank you.&lt;/p&gt;</comment>
                            <comment id="13440535" author="hadoopqa" created="Thu, 23 Aug 2012 19:40:44 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542163/ZOOKEEPER-1540.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542163/ZOOKEEPER-1540.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1373156.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1168//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1168//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1168//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1168//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1168//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1168//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13440612" author="shralex" created="Thu, 23 Aug 2012 21:16:10 +0100"  >&lt;p&gt;thanks for catching this, Andrew. The fix looks good to me. There is a test added in 1411 that was supposed to make sure that 1411 doesn&apos;t break backward compatibility &lt;/p&gt;

&lt;p&gt;src/java/test/org/apache/zookeeper/server/util/DynamicConfigBCTest.java&lt;/p&gt;

&lt;p&gt;I suggest that after config.parse(confFile.toString()) in this file we add&lt;/p&gt;

&lt;p&gt;            Assert.assertTrue(config.getClientPortAddress() != null &lt;br/&gt;
            		&amp;amp;&amp;amp; config.getClientPortAddress().getPort() == CLIENT_PORT_QP1);&lt;/p&gt;

&lt;p&gt;this fails without your fix and passes with it.&lt;/p&gt;

&lt;p&gt;A related potential backward compatibility issue in 1411 is what to do when the user has an old-style config file like you describe and then a reconfiguration happens. In that case I create a dynamic config file automatically and will remove all relevant definitions from the cfg file (server, group, weight, clientPort and clientAddress). I&apos;m not sure what&apos;s the right thing to do, but perhaps we shouldn&apos;t remove the clientPort and clientAddress from the cfg just in case they&apos;re not specified in the new format. This is also in QuorumPeerConfig.&lt;/p&gt;</comment>
                            <comment id="13440659" author="adferguson" created="Thu, 23 Aug 2012 22:04:06 +0100"  >&lt;p&gt;hi Alexander,&lt;/p&gt;

&lt;p&gt;thanks for the test case! I&apos;ve included it in this updated patch.&lt;/p&gt;

&lt;p&gt;Andrew&lt;/p&gt;</comment>
                            <comment id="13440694" author="hadoopqa" created="Thu, 23 Aug 2012 22:38:26 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542187/ZOOKEEPER-1540.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542187/ZOOKEEPER-1540.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1373156.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1169//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1169//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1169//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1169//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1169//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1169//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13444096" author="breed" created="Wed, 29 Aug 2012 15:18:20 +0100"  >&lt;p&gt;+1 looks good. i&apos;ll commit if there aren&apos;t any objections&lt;/p&gt;</comment>
                            <comment id="13462455" author="breed" created="Tue, 25 Sep 2012 06:33:18 +0100"  >&lt;p&gt;thanx alex and andrew!&lt;/p&gt;</comment>
                            <comment id="13462647" author="hudson" created="Tue, 25 Sep 2012 12:02:43 +0100"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1690 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1690/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1690/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1540&quot; title=&quot;ZOOKEEPER-1411 breaks backwards compatibility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1540&quot;&gt;&lt;del&gt;ZOOKEEPER-1540&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1411&quot; title=&quot;Consolidate membership management, distinguish between static and dynamic configuration parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1411&quot;&gt;&lt;del&gt;ZOOKEEPER-1411&lt;/del&gt;&lt;/a&gt; breaks backwards compatibility (Andrew Ferguson via breed) (Revision 1389711)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
breed : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389711&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389711&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/util/DynamicConfigBCTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12545750">ZOOKEEPER-1411</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12542187" name="ZOOKEEPER-1540.patch" size="1930" author="adferguson" created="Thu, 23 Aug 2012 22:04:06 +0100"/>
                            <attachment id="12542163" name="ZOOKEEPER-1540.patch" size="1079" author="adferguson" created="Thu, 23 Aug 2012 18:58:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Aug 2012 18:40:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwdrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>