<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:43:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1830/ZOOKEEPER-1830.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1830] Support command line shell for removing watches</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1830</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This JIRA to discuss the command line shell for removing watches. Makes it easier to do ad-hoc testing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682833">ZOOKEEPER-1830</key>
            <summary>Support command line shell for removing watches</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12682832">ZOOKEEPER-1829</parent>
                                    <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshr">Rakesh R</assignee>
                                    <reporter username="rakeshr">Rakesh R</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2013 04:57:29 +0000</created>
                <updated>Fri, 4 Apr 2014 12:12:06 +0100</updated>
                            <resolved>Fri, 4 Apr 2014 00:04:09 +0100</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13840150" author="rakeshr" created="Thu, 5 Dec 2013 15:10:25 +0000"  >&lt;p&gt;Could you please have a look at the attached patch. &lt;br/&gt;
This should be applied on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-442&quot; title=&quot;need a way to remove watches that are no longer of interest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-442&quot;&gt;&lt;del&gt;ZOOKEEPER-442&lt;/del&gt;&lt;/a&gt;(as this contains the actual client api implementations)&lt;/p&gt;

&lt;p&gt;Delete watches command syntax :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     deletewatches path [-c|-d|-a] [-l]

     c - represents childwatchers
     d - represents datawatchers
     a - represents both child/data watchers
     l - represents remove watchers locally when no server connection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13881706" author="hadoopqa" created="Sat, 25 Jan 2014 06:18:45 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12617166/ZOOKEEPER-1830.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12617166/ZOOKEEPER-1830.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1561236.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 34 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1897//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1897//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1897//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1897//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1897//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1897//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13881721" author="rgs" created="Sat, 25 Jan 2014 06:49:20 +0000"  >&lt;p&gt;Nit:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        boolean local = false;
+        if (cl.hasOption(&quot;l&quot;)) {
+            local = true;
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;simplify to:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        boolean local = cl.hasOption(&quot;l&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nit:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        Assert.assertEquals(&quot;Didn&apos;t recieves DataWatchRemoved!&quot;, 1,
+                pathVsEvent.size());
+        Assert.assertEquals(&quot;Didn&apos;t recieves DataWatchRemoved!&quot;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;typos: &quot;Didn&apos;t receive DataWatchRemoved!&quot;.&lt;/p&gt;

&lt;p&gt;And some more:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+        Assert.assertEquals(&quot;Didn&apos;t recieves ChildWatchRemoved!&quot;, 1,
+                pathVsEvent.size());
+        Assert.assertEquals(&quot;Didn&apos;t recieves ChildWatchRemoved!&quot;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;Didn&apos;t receive ...&quot;. (there are more instance of &quot;recieves&quot; below).&lt;/p&gt;

&lt;p&gt;Nit:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+
+            @Override
+            public void process(WatchedEvent event) {
+                switch (event.getType()) {
+                case ChildWatchRemoved: {
+                    addWatchNotifications(pathVsEvent, event);
+                    watcherLatch.countDown();
+                    break;
+                }
+                case DataWatchRemoved: {
+                    addWatchNotifications(pathVsEvent, event);
+                    watcherLatch.countDown();
+                    break;
+                }
+                case NodeChildrenChanged: {
+                    addWatchNotifications(pathVsEvent, event);
+                    break;
+                }
+                case NodeDataChanged: {
+                    addWatchNotifications(pathVsEvent, event);
+                    break;
+                }
+                }
+            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can group some cases:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+
+            @Override
+            public void process(WatchedEvent event) {
+                switch (event.getType()) {
+                case ChildWatchRemoved: 
+                case DataWatchRemoved: {
+                    addWatchNotifications(pathVsEvent, event);
+                    watcherLatch.countDown();
+                    break;
+                }
+                case NodeChildrenChanged:
+                case NodeDataChanged: {
+                    addWatchNotifications(pathVsEvent, event);
+                    break;
+                }
+                }
+            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13881899" author="hadoopqa" created="Sat, 25 Jan 2014 14:07:22 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625182/ZOOKEEPER-1830.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625182/ZOOKEEPER-1830.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1561236.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 45 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1898//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1898//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1898//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1898//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1898//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1898//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13881929" author="rakeshr" created="Sat, 25 Jan 2014 15:48:54 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for the review. Attached latest patch addressing the comments.&lt;/p&gt;

&lt;p&gt;Also done the following changes apart from the comments:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;modified the command name to &apos;removewatches&apos;, I feel this is better inline with the zk#removeWatches api name. Earlier I used &apos;deletewatches&apos;&lt;/li&gt;
	&lt;li&gt;moved the unit testing to a new class&lt;/li&gt;
	&lt;li&gt;added one more test case for default options&lt;/li&gt;
	&lt;li&gt;modified the test case assetions a bit&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13882170" author="rgs" created="Sun, 26 Jan 2014 04:39:15 +0000"  >&lt;p&gt;lgtm, +1. &lt;/p&gt;</comment>
                            <comment id="13882312" author="rakeshr" created="Sun, 26 Jan 2014 14:49:13 +0000"  >&lt;p&gt;Thanks again &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;Raul Gutierrez Segales&lt;/a&gt; for the review and your time.&lt;/p&gt;

&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;Patrick Hunt&lt;/a&gt;, Please have a look at it and would like to know your thoughts.&lt;/p&gt;</comment>
                            <comment id="13959392" author="michim" created="Fri, 4 Apr 2014 00:01:57 +0100"  >&lt;p&gt;+1 Thank you Rakesh!&lt;/p&gt;</comment>
                            <comment id="13959396" author="michim" created="Fri, 4 Apr 2014 00:04:09 +0100"  >&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1584454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1584454&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13959873" author="hudson" created="Fri, 4 Apr 2014 12:12:06 +0100"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2279 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2279/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2279/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1830&quot; title=&quot;Support command line shell for removing watches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1830&quot;&gt;&lt;del&gt;ZOOKEEPER-1830&lt;/del&gt;&lt;/a&gt;. Support command line shell for removing watches (Rakesh R via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1584454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1584454&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/ZooKeeperMain.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/cli/RemoveWatchesCommand.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/RemoveWatchesCmdTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625182" name="ZOOKEEPER-1830.patch" size="19062" author="rakeshr" created="Sat, 25 Jan 2014 13:29:37 +0000"/>
                            <attachment id="12617166" name="ZOOKEEPER-1830.patch" size="17957" author="rakeshr" created="Thu, 5 Dec 2013 15:05:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Jan 2014 06:18:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362090</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzk9ef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>