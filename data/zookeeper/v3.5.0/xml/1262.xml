<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:46:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/ZOOKEEPER-1262/ZOOKEEPER-1262.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[ZOOKEEPER-1262] Documentation for Lock recipe has major flaw</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1262</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;The recipe for Locks documented here: &lt;a href=&quot;http://zookeeper.apache.org/doc/trunk/recipes.html#sc_recipes_Locks&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://zookeeper.apache.org/doc/trunk/recipes.html#sc_recipes_Locks&lt;/a&gt; doesn&apos;t deal with the problem of create() succeeding but the server crashing before the result is returned. As written, if the server crashes before the result is returned the client can never know what sequential node was created for it. The way to deal with this is to embed the session ID in the node name. The Lock implementation in the ZK distro does this. But, the documentation will lead implementors to write bad code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529148">ZOOKEEPER-1262</key>
            <summary>Documentation for Lock recipe has major flaw</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="randgalt">Jordan Zimmerman</assignee>
                                    <reporter username="randgalt">Jordan Zimmerman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Oct 2011 22:46:26 +0100</created>
                <updated>Wed, 28 Dec 2011 21:18:40 +0000</updated>
                            <resolved>Wed, 28 Dec 2011 21:18:40 +0000</resolved>
                                    <version>3.3.3</version>
                                    <fixVersion>3.5.0</fixVersion>
                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13137701" author="randgalt" created="Fri, 28 Oct 2011 00:03:08 +0100"  >&lt;p&gt;Actually, using the SessionID is not very good. You would only be able to create 1 lock per path per connection. Using a UUID would be better.&lt;/p&gt;</comment>
                            <comment id="13139368" author="phunt" created="Sat, 29 Oct 2011 18:06:18 +0100"  >&lt;p&gt;my response on list:&lt;/p&gt;

&lt;p&gt;You&apos;re right, we should have an &quot;error handling&quot; section in that doc,&lt;br/&gt;
the assumption is that this is the algo when things are working, but&lt;br/&gt;
what happens if things go awry?&lt;/p&gt;

&lt;p&gt;One way to handle the issue you describe, is when the client&lt;br/&gt;
reconnects to the cluster, if the session is not expired it could look&lt;br/&gt;
at any outstanding requests it made and not gotten responses for. In&lt;br/&gt;
this case it could scan the list looking for any znode that it created&lt;br/&gt;
(see the Stat object) and make a determination based on that.&lt;/p&gt;

&lt;p&gt;I see you entered &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1262&quot; title=&quot;Documentation for Lock recipe has major flaw&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1262&quot;&gt;&lt;del&gt;ZOOKEEPER-1262&lt;/del&gt;&lt;/a&gt;, perhaps you could supply a patch to&lt;br/&gt;
the docs detailing this?&lt;/p&gt;</comment>
                            <comment id="13139421" author="randgalt" created="Sat, 29 Oct 2011 20:57:03 +0100"  >&lt;p&gt;Sure - I&apos;ll work on something.&lt;/p&gt;</comment>
                            <comment id="13140366" author="randgalt" created="Mon, 31 Oct 2011 17:41:45 +0000"  >&lt;p&gt;Here is an updated recipes page (and its diff)&lt;/p&gt;</comment>
                            <comment id="13140452" author="hadoopqa" created="Mon, 31 Oct 2011 19:04:33 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501645/recipes.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501645/recipes.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1190450.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/751//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/751//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13140459" author="randgalt" created="Mon, 31 Oct 2011 19:10:06 +0000"  >&lt;p&gt;FYI - I don&apos;t have access to the website source so this is just a diff.&lt;/p&gt;</comment>
                            <comment id="13140494" author="phunt" created="Mon, 31 Oct 2011 19:48:08 +0000"  >&lt;p&gt;Hi Jordan - you do have access, the doc source is in src/docs/src/documentation/content/xdocs/ if you checkout ZK trunk (or any branch for that matter) from SVN.&lt;/p&gt;</comment>
                            <comment id="13140497" author="randgalt" created="Mon, 31 Oct 2011 19:49:02 +0000"  >&lt;p&gt;Ah - OK - I&apos;ll go to it and make a patch&lt;/p&gt;</comment>
                            <comment id="13143514" author="randgalt" created="Thu, 3 Nov 2011 20:40:50 +0000"  >&lt;p&gt;Real patch added.&lt;/p&gt;</comment>
                            <comment id="13143555" author="hadoopqa" created="Thu, 3 Nov 2011 21:58:13 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502217/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502217/patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1196819.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/773//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/773//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/773//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/773//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/773//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/773//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13143787" author="randgalt" created="Fri, 4 Nov 2011 06:48:53 +0000"  >&lt;p&gt;Hmm - maybe I shouldn&apos;t have closed this.&lt;/p&gt;</comment>
                            <comment id="13164882" author="mahadev" created="Thu, 8 Dec 2011 00:46:34 +0000"  >&lt;p&gt;Looks like a harmless change that could get into 3.4.1.&lt;/p&gt;</comment>
                            <comment id="13165534" author="hadoopqa" created="Thu, 8 Dec 2011 20:35:25 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12502217/patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12502217/patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1208979.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/816//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/816//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/816//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/816//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/816//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/816//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13165629" author="mahadev" created="Thu, 8 Dec 2011 22:20:53 +0000"  >&lt;p&gt;I just committed this to trunk. The patch doesnt apply for 3.4 branch so am skipping this for 3.4 branch&lt;/p&gt;</comment>
                            <comment id="13166070" author="hudson" created="Fri, 9 Dec 2011 11:06:13 +0000"  >&lt;p&gt;Integrated in ZooKeeper-trunk #1389 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/1389/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/1389/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1262&quot; title=&quot;Documentation for Lock recipe has major flaw&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1262&quot;&gt;&lt;del&gt;ZOOKEEPER-1262&lt;/del&gt;&lt;/a&gt;. Documentation for Lock recipe has major flaw. (Jordan Zimmerman via mahadev)&lt;/p&gt;

&lt;p&gt;mahadev : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1212166&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1212166&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/bookkeeperConfig.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/bookkeeperOverview.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/bookkeeperProgrammer.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/bookkeeperStarted.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/bookkeeperStream.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/index.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/javaExample.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/linkmap.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/recipes.html&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/recipes.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/releasenotes.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperAdmin.html&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperAdmin.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperHierarchicalQuorums.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperInternals.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperJMX.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperObservers.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperOver.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperProgrammers.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperQuotas.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperStarted.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/docs/zookeeperTutorial.pdf&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/docs/src/documentation/content/xdocs/recipes.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13176821" author="phunt" created="Wed, 28 Dec 2011 21:18:40 +0000"  >&lt;p&gt;afaict this was committed to trunk on 09/Dec/11. Closing.&lt;/p&gt;

&lt;p&gt;Thanks Jordan! &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12502217" name="patch.txt" size="7687" author="randgalt" created="Thu, 3 Nov 2011 20:40:27 +0000"/>
                            <attachment id="12501645" name="recipes.diff" size="5507" author="randgalt" created="Mon, 31 Oct 2011 17:41:45 +0000"/>
                            <attachment id="12501646" name="recipes.html" size="33750" author="randgalt" created="Mon, 31 Oct 2011 17:41:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Oct 2011 17:06:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215008</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxzst3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Updated recipes to document how to use a GUID to manage a recoverable create() error.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>