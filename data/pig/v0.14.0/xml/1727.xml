<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:56:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1727/PIG-1727.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1727] Hadoop default config override pig.properties</title>
                <link>https://issues.apache.org/jira/browse/PIG-1727</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;In GenericOptionsParser work, we have these lines:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
GenericOptionsParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericOptionsParser(args);
Configuration conf = parser.getConfiguration();    

Properties properties = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Properties();
properties.putAll(ConfigurationUtil.toProperties(conf));
PropertiesUtil.loadDefaultProperties(properties);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;conf contains two sources: one from hadoop default config files (core-site.xml, hdfs-site.xml, mapred-site.xml), the other is from hadoop related command line options. Override conf over pig property files is wrong for the default hadoop configuration part. We shall not bring default hadoop configuration in. The following code illustrate how to do that:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Configuration conf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Configuration(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
GenericOptionsParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericOptionsParser(conf, args);
conf = parser.getConfiguration();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12480012">PIG-1727</key>
            <summary>Hadoop default config override pig.properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rding">Richard Ding</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Nov 2010 23:07:05 +0000</created>
                <updated>Fri, 17 Dec 2010 22:46:56 +0000</updated>
                            <resolved>Wed, 17 Nov 2010 18:50:13 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12932298" author="rding" created="Tue, 16 Nov 2010 01:09:05 +0000"  >&lt;p&gt;The workaround is to use the command line option -P to pass in additional property files. &lt;/p&gt;</comment>
                            <comment id="12932303" author="rding" created="Tue, 16 Nov 2010 01:16:57 +0000"  >&lt;p&gt;Attaching the patch.&lt;/p&gt;</comment>
                            <comment id="12932322" author="chaitk" created="Tue, 16 Nov 2010 03:27:44 +0000"  >&lt;p&gt;Richard,&lt;/p&gt;

&lt;p&gt;  I see that this has more to do with the order in which properties are loaded. If we make sure that hadoop-specific default properties are loaded first, followed by the pig-specific ones, this problem should not arise. Looking at the following code snippet in Main.java :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        PropertiesUtil.loadDefaultProperties(properties);
        properties.putAll(ConfigurationUtil.toProperties(conf));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The order of loading the properties object in this case seems to be such that pig-specific default properties (i.e., properties in pig-default.properties, .pigrc and pig.properties) get loaded first, followed by the ones in hadoop-default configuration. Due to this order, some of the pig properties might get overriden. Therefore, a simple swap of the above two lines to change the order of loading of properties should solve the problem.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12932550" author="rding" created="Tue, 16 Nov 2010 17:33:20 +0000"  >&lt;p&gt;Thanks for the comment. The purpose of using GenericOptionsParser is to parse command line arguments generic to the Hadoop framework so that users can override system properties (including pig properties using -D option) from the command line.  This is the reason for the current load ordering. As Daniel pointed out, Pig doesn&apos;t need to load the hadoop-default properties at this point. The patch now only add the command line arguments to the properties.&lt;/p&gt;</comment>
                            <comment id="12933069" author="daijy" created="Wed, 17 Nov 2010 18:32:04 +0000"  >&lt;p&gt;+1 for the patch.&lt;/p&gt;</comment>
                            <comment id="12933071" author="daijy" created="Wed, 17 Nov 2010 18:35:20 +0000"  >&lt;p&gt;To V.V.Chaitanya,&lt;br/&gt;
We will merge with hadoop default configurations anyway in HExecutionEngine.init(). &lt;/p&gt;</comment>
                            <comment id="12933078" author="rding" created="Wed, 17 Nov 2010 18:50:13 +0000"  >&lt;p&gt;patch committed to both trunk and 0.8 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12459668" name="PIG-1727.patch" size="1339" author="rding" created="Tue, 16 Nov 2010 01:16:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Nov 2010 01:09:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyatdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>