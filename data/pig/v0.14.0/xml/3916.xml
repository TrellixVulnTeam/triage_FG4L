<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:57:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3916/PIG-3916.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3916] isEmpty should not be early terminating</title>
                <link>https://issues.apache.org/jira/browse/PIG-3916</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2066&quot; title=&quot;Accumulators should be able to early-terminate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2066&quot;&gt;&lt;del&gt;PIG-2066&lt;/del&gt;&lt;/a&gt; makes isEmpty early terminating which is very wrong. When there is a binary condition with isEmpty() followed by something like SUM, it skips records leading to wrong results. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12711814">PIG-3916</key>
            <summary>isEmpty should not be early terminating</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 23:01:59 +0100</created>
                <updated>Mon, 7 Jul 2014 19:07:52 +0100</updated>
                            <resolved>Fri, 2 May 2014 19:38:19 +0100</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.13.0</fixVersion>
                    <fixVersion>0.12.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13987461" author="daijy" created="Fri, 2 May 2014 08:18:24 +0100"  >&lt;p&gt;Seems isEmpty is the main use case for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2066&quot; title=&quot;Accumulators should be able to early-terminate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2066&quot;&gt;&lt;del&gt;PIG-2066&lt;/del&gt;&lt;/a&gt;. I am fine commit the patch as an immediate remedy but we also need to either rollback &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2066&quot; title=&quot;Accumulators should be able to early-terminate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2066&quot;&gt;&lt;del&gt;PIG-2066&lt;/del&gt;&lt;/a&gt; completely (other early terminating UDF will share the same issue), or redo &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2066&quot; title=&quot;Accumulators should be able to early-terminate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2066&quot;&gt;&lt;del&gt;PIG-2066&lt;/del&gt;&lt;/a&gt; in a right way (only terminate IsEmpty but not SUM).&lt;/p&gt;</comment>
                            <comment id="13987788" author="rohini" created="Fri, 2 May 2014 16:21:54 +0100"  >&lt;p&gt;Tried to see if only terminating isEmpty() was possible, but it is lot more work. For now reverting isEmpty() as it causes data loss. &lt;/p&gt;

&lt;p&gt;A more detailed description of impact for users to assess damage.&lt;br/&gt;
Impact:&lt;br/&gt;
The isEmpty() function in a FOREACH clause causes wrong results when used&lt;br/&gt;
after a GROUP or COGROUP clause when accumulative mode is used (i.e there are&lt;br/&gt;
no other non-Accumulator UDFs in the FOREACH clause). Also saw isEmpty() being evaluated to true when it was not.&lt;/p&gt;

&lt;p&gt;For eg:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If the FOREACH had only isEmpty() and SUM() functions in a binary&lt;br/&gt;
condition which are both Accumulator UDFs, then wrong results are produced for&lt;br/&gt;
the SUM() where it only sums up the first batch and terminates after that.&lt;br/&gt;
SUM,COUNT, MIN, MAX are all accumulator UDFs.&lt;/li&gt;
	&lt;li&gt;If the FOREACH had any another non-accumulator UDF (For eg: STRSPLIT()),&lt;br/&gt;
then it is not affected as accumulative mode would not be used. &lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13987909" author="daijy" created="Fri, 2 May 2014 18:00:57 +0100"  >&lt;p&gt;+1 for the patch. As I mentioned before, let&apos;s reverting isEmpty first. &lt;/p&gt;</comment>
                            <comment id="13988075" author="rohini" created="Fri, 2 May 2014 19:38:19 +0100"  >&lt;p&gt;Committed to branch-0.12 and trunk. Thanks Daniel for the review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12507027">PIG-2066</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12642958" name="PIG-3916-1.patch" size="4627" author="rohini" created="Fri, 2 May 2014 00:48:51 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 May 2014 07:18:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzp1yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390372</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>