<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1104/PIG-1104.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1104] [zebra] Provide streaming support in Zebra.</title>
                <link>https://issues.apache.org/jira/browse/PIG-1104</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hadoop streaming is very popular among Hadoop users. The main attraction is the simplicity of use. A user can write the application logic in any language and process large amounts of data using Hadoop framework. As more people start to use Zebra to store their data, we expect users would like to run Hadoop streaming scripts to easily process Zebra tables. &lt;/p&gt;

&lt;p&gt;The following lists a simple example of using Hadoop streaming to access Zebra data. It loads data from foo table using Zebra&apos;s TableInputFormat and then writes the data into output using default TextOutputFormat. &lt;/p&gt;

&lt;p&gt;$ hadoop jar hadoop-streaming.jar -D mapred.reduce.tasks=0 -input foo -output output -mapper &apos;cat&apos; -inputformat org.apache.hadoop.zebra.mapred.TableInputFormat &lt;/p&gt;

&lt;p&gt;More detailed, Zebra uses Pig DefaultTuple implementation of Tuple for its records. Currently, when Zebra&apos;s TableInputFormat is used for input, the user script sees each line containing &quot; key_if_any\tTuple.toString() &quot;. We plan to generate CSV format representation of our Pig tuples. To this end, we plan to do the following: &lt;/p&gt;

&lt;p&gt;1) Derive a sub class ZupleTuple from pig&apos;s DefaultTuple class and override its toString() method to present the data into CSV format. &lt;/p&gt;

&lt;p&gt;2) On Zebra side, the tuple factory should be changed to create ZebraTuple objects, instead of DefaultTuple objects. &lt;/p&gt;

&lt;p&gt;Note that we can only support streaming on the input side - ability to use streaming to read data from Zebra tables. For the output side, the streaming support is not feasible, since the streaming mapper or reducer only emits &quot;Text\tText&quot;, the output collector has no way of knowing how to convert this to (BytesWritable,Tuple).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441526">PIG-1104</key>
            <summary>[zebra] Provide streaming support in Zebra.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chaow">Chao Wang</assignee>
                                    <reporter username="chaow">Chao Wang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2009 22:43:15 +0000</created>
                <updated>Wed, 24 Mar 2010 22:15:59 +0000</updated>
                            <resolved>Mon, 7 Dec 2009 22:07:38 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12785552" author="gauravj" created="Thu, 3 Dec 2009 21:47:37 +0000"  >
&lt;p&gt;My 2 cents:&lt;/p&gt;

&lt;p&gt;hadoop.common.CsvRecordOutput code is duplicated in CsvZebraTupleOutput which might not be a good idea. &lt;/p&gt;

&lt;p&gt;Instead, in CsvZebraTupleOutput, CsvRecordOutput sld be used a member variable and the CsvRecordOutput.stream should be connected to Byte Stream.&lt;/p&gt;

&lt;p&gt;You can also extend the class.&lt;/p&gt;

&lt;p&gt;The stream is UTF-8 encoded&lt;/p&gt;


&lt;p&gt;Then, in   CsvZebraTupleOutput.writeTuple() sld look like this&lt;/p&gt;

&lt;p&gt;writeTuple ( ... ) &lt;/p&gt;
{

   cvsRecordOutputObject.writelong( ... )
   cvsRecordOutputObject.writeInt( ... )
   ...
   ...

}

&lt;p&gt;then create the string from ByteArraySteam connected above with a utf8 encoding charset.&lt;/p&gt;


&lt;p&gt;There might be various null object exceptions&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;// nullness of c sld be checked here&lt;/p&gt;

&lt;p&gt;ZebraTuple(List&amp;lt;Object&amp;gt; c) {&lt;br/&gt;
   mFields = new ArrayList&amp;lt;Object&amp;gt;(c.size());&lt;/p&gt;

&lt;p&gt;There are other similar behaviour&lt;/p&gt;






</comment>
                            <comment id="12785571" author="chaow" created="Thu, 3 Dec 2009 22:15:37 +0000"  >&lt;p&gt;Response to the above comment:&lt;/p&gt;

&lt;p&gt;point 1) The scenarios for using CsvRecordOutput and CsvZebraTupleOutput are quite different.&lt;br/&gt;
CsvRecordOutput is used to serialize a record data into a PrintStream object, therefore encoding is needed.&lt;br/&gt;
In contrast, CsvZebraTupleOutput is used to create a string repsentation for a record data, therefore encoding is not needed.&lt;/p&gt;

&lt;p&gt;point 2) ZebraTuple is derived from Pig&apos;s DefaultTuple and follows a similar implementation for this constructor (non-public). Caller will make sure the validity of c.&lt;/p&gt;




</comment>
                            <comment id="12785578" author="gauravj" created="Thu, 3 Dec 2009 22:29:21 +0000"  >
&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12786188" author="hadoopqa" created="Fri, 4 Dec 2009 21:51:29 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12426801/PIG1104.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12426801/PIG1104.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 887290.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/92/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/92/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/92/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/92/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/92/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/92/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12786535" author="hadoopqa" created="Sat, 5 Dec 2009 23:19:09 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12426998/PIG-1104.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12426998/PIG-1104.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 887401.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 20 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/98/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/98/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/98/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/98/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/98/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/98/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12786758" author="chaow" created="Mon, 7 Dec 2009 02:05:31 +0000"  >&lt;p&gt;Seems Pig has some issue. I checked Pig&apos;s TestBuiltin.java test file, it runs fine with the patch.&lt;/p&gt;

&lt;p&gt;So resubmit the same patch. &lt;/p&gt;</comment>
                            <comment id="12786809" author="hadoopqa" created="Mon, 7 Dec 2009 07:45:20 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12426998/PIG-1104.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12426998/PIG-1104.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 887806.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 20 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/101/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/101/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/101/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/101/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/101/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/101/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12787151" author="yanz" created="Mon, 7 Dec 2009 22:07:38 +0000"  >&lt;p&gt;committed to the Apache 0.6 branch and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426998" name="PIG-1104.patch" size="37350" author="chaow" created="Fri, 4 Dec 2009 23:42:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Dec 2009 21:47:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyamkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95968</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>