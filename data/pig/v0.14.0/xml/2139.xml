<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:57:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2139/PIG-2139.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2139] LogicalExpressionSimplifier optimizer rule should check if udf is deterministic while checking if they are equal</title>
                <link>https://issues.apache.org/jira/browse/PIG-2139</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;LogicalExpressionSimplifier simplifies filter expressions. In the process, it compares udfs to see if they are &apos;equal&apos; (ie expected to produce same results). But it does not check if the udfs are annotated as @Nondeterministic. If such an annotation exists, then the udfs should not be considered equal. UserFuncition.isEqual() is being used to compare the udfs.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12511279">PIG-2139</key>
            <summary>LogicalExpressionSimplifier optimizer rule should check if udf is deterministic while checking if they are equal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jun 2011 20:58:52 +0100</created>
                <updated>Thu, 4 Aug 2011 01:34:40 +0100</updated>
                            <resolved>Sat, 25 Jun 2011 01:07:14 +0100</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                    <version>0.9.0</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13054210" author="dvryaboy" created="Fri, 24 Jun 2011 02:49:27 +0100"  >&lt;p&gt;Thejas can you add an example of what this breaks to the ticket? Does the rule only affect 0.10 or is this also in 8 and 9?&lt;/p&gt;</comment>
                            <comment id="13054654" author="thejas" created="Fri, 24 Jun 2011 21:17:56 +0100"  >&lt;blockquote&gt;&lt;p&gt;Thejas can you add an example of what this breaks to the ticket? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If ND_FUNC is a non deterministic EvalFunc, then the following optimization that would be done by LogicalExpressionSimplifier is not correct -&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
f = filter l by ND_FUNC(a) &amp;gt; 0.1 and ND_FUNC(a) &amp;gt; 0.1;
=&amp;gt;
f = filter l by ND_FUNC(a) &amp;gt; 0.1 ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;Does the rule only affect 0.10 or is this also in 8 and 9?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It affects 8 and 9 as well. I will apply the fix to 0.9 as well.&lt;/p&gt;</comment>
                            <comment id="13054658" author="thejas" created="Fri, 24 Jun 2011 21:24:47 +0100"  >&lt;p&gt;unit tests and test-patch passed with &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2139&quot; title=&quot;LogicalExpressionSimplifier optimizer rule should check if udf is deterministic while checking if they are equal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2139&quot;&gt;&lt;del&gt;PIG-2139&lt;/del&gt;&lt;/a&gt;.1.patch. It also fixes a NPE issue seen in LogicalExpressionSimplifier when optimization runs on udfs with no arguments.&lt;/p&gt;</comment>
                            <comment id="13054677" author="daijy" created="Fri, 24 Jun 2011 22:03:01 +0100"  >&lt;p&gt;+1. Note this changes the semantic of LogicalPlan.isEqual. Two logical plan will never consider equal if they contain non-deterministic UDF. Since we don&apos;t yet have a use case to compare two logical plan, there is no side effect for now.&lt;/p&gt;</comment>
                            <comment id="13054771" author="thejas" created="Sat, 25 Jun 2011 01:07:14 +0100"  >&lt;p&gt;Patch committed to 0.9 branch and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12483765" name="PIG-2139.1.patch" size="7561" author="thejas" created="Fri, 24 Jun 2011 21:24:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jun 2011 01:49:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyavrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>