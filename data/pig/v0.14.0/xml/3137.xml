<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:04:11 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3137/PIG-3137.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3137] fix Piggybank test to not using /tmp dir</title>
                <link>https://issues.apache.org/jira/browse/PIG-3137</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;right now several Piggybank tests create directory under /tmp to store test data, the test could fail because user doesn&apos;t have permission to create directory under /tmp. It is better to move test data dir under build dir to avoid this problem.&lt;/p&gt;

&lt;p&gt;I will submit a patch soon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12629367">PIG-3137</key>
            <summary>fix Piggybank test to not using /tmp dir</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dreambird">Johnny Zhang</assignee>
                                    <reporter username="dreambird">Johnny Zhang</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Jan 2013 01:40:17 +0000</created>
                <updated>Mon, 14 Oct 2013 17:46:51 +0100</updated>
                            <resolved>Tue, 5 Feb 2013 01:22:49 +0000</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>piggybank</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13563529" author="jarcec" created="Sat, 26 Jan 2013 15:40:08 +0000"  >&lt;p&gt;Hi Jimmy,&lt;br/&gt;
I&apos;m currently working on &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2591&quot; title=&quot;Unit tests should not write to /tmp but respect java.io.tmpdir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2591&quot;&gt;PIG-2591&lt;/a&gt;, that is trying to fix buid-in usage of &quot;/tmp&quot; for all tests.&lt;/p&gt;

&lt;p&gt;Jarcec&lt;/p&gt;</comment>
                            <comment id="13566058" author="dreambird" created="Wed, 30 Jan 2013 01:48:10 +0000"  >&lt;p&gt;this patch changes TestDBStorage and TestAvroStorage not use /tmp to store the testing data.&lt;/p&gt;

&lt;p&gt;It uses the FileLocalizer to gain the temp dir from PigContext. The good side about it is user will have fully permission on the dir used by PigServer, so test won&apos;t fail in case user doesn&apos;t have enough permission on /tmp. For example, the TestAvroStorage right not using $PIG_DIR/contrib/piggybank/java/&lt;a href=&quot;file:/tmp/temp1371024088/tmp1070213954/TestAvroStorage/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp1371024088/tmp1070213954/TestAvroStorage/&lt;/a&gt; instead of /tmp/TestAvroStorage to store testing data.&lt;/p&gt;

&lt;p&gt;The fix for TestAvroStorage is straightforward, the fix for TestDBStorage is a little bit different, since hsqldb doesn&apos;t work in minicluster hdfs, we need to create another local PigServer to host the hsqldb database.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, what do you think about it? Thanks.&lt;/p&gt;</comment>
                            <comment id="13568760" author="cheolsoo" created="Fri, 1 Feb 2013 14:39:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dreambird&quot; class=&quot;user-hover&quot; rel=&quot;dreambird&quot;&gt;Johnny Zhang&lt;/a&gt;, thank you very much for the patch. I have two suggestions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;FileLocalizer.getTemporaryPath() is for generating random paths in Hadoop cluster (either it&apos;s local, mini cluster, or real cluster). So it makes sense to use FileLocalizer in TestAvroStorage where we need temp paths for test outputs. But in TestDBStorage, we need a temp dir for Hsqldb, so I don&apos;t think we want to use FileLocalizer there. Using a temporary path under build (e.g. contrib/piggybank/java/build/blah) would be better.&lt;/li&gt;
	&lt;li&gt;You can control the root dir of FileLocalizer.getTemporaryPath() using the pig.temp.dir property. It would be nice if it&apos;s set to somewhere under the build directory, so temporary dirs can be deleted by ant clean.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Let me know what you think. Thanks!&lt;/p&gt;
</comment>
                            <comment id="13568762" author="cheolsoo" created="Fri, 1 Feb 2013 14:41:31 +0000"  >&lt;p&gt;Canceling patch until it gets updated.&lt;/p&gt;</comment>
                            <comment id="13569149" author="dreambird" created="Fri, 1 Feb 2013 21:59:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, thanks for your comments, new patch just posted&lt;br/&gt;
1. change contrib/piggybank/java/build.xml to create log in user.dir instead of /tmp&lt;br/&gt;
2. not using FileLocalizer but using contrib/piggybank/java/build/test/ to store hsqldb in TestDBStorage&lt;br/&gt;
3. use pig.temp.dir to update PigContext&apos;s temp dir to contrib/piggybank/java/build/test/tmp/  before using FileLocalizer in TestAvroStorage&lt;/p&gt;</comment>
                            <comment id="13570827" author="cheolsoo" created="Tue, 5 Feb 2013 01:12:52 +0000"  >&lt;p&gt;+1. Looks good. I will commit it after running test.&lt;/p&gt;</comment>
                            <comment id="13570836" author="cheolsoo" created="Tue, 5 Feb 2013 01:22:49 +0000"  >&lt;p&gt;Committed to trunk. Thanks Johnny!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12546508">PIG-2591</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12567646" name="PIG-3137.nows.patch.txt" size="5310" author="dreambird" created="Fri, 1 Feb 2013 21:53:17 +0000"/>
                            <attachment id="12567647" name="PIG-3137.patch.txt" size="5681" author="dreambird" created="Fri, 1 Feb 2013 21:53:41 +0000"/>
                            <attachment id="12567090" name="PIG-3137.patch.txt" size="5379" author="dreambird" created="Wed, 30 Jan 2013 01:48:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 Jan 2013 15:40:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hza4if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>303197</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>