<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:01:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1870/PIG-1870.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1870] HBaseStorage doesn&apos;t project correctly</title>
                <link>https://issues.apache.org/jira/browse/PIG-1870</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Projecting columns after &lt;tt&gt;LOAD&lt;/tt&gt; via &lt;tt&gt;HBaseStorage&lt;/tt&gt; produces unexpected results. This is related to the &lt;tt&gt;loadKey&lt;/tt&gt; functionality and how the &lt;tt&gt;pushProjection&lt;/tt&gt; method in &lt;tt&gt;HBaseStorage&lt;/tt&gt; has to offset to build a column list that aligns with the tuple (the column list doesn&apos;t contain the row key).&lt;/p&gt;

&lt;p&gt;This shift appears to create an inconsistency with the FieldSchema for the tuple which results in the wrong tuple value being fetched for a given column. I&apos;ll attach a patch with unit tests that illustrate the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12499764">PIG-1870</key>
            <summary>HBaseStorage doesn&apos;t project correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dvryaboy">Dmitriy V. Ryaboy</assignee>
                                    <reporter username="billgraham">Bill Graham</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Feb 2011 21:34:55 +0000</created>
                <updated>Thu, 4 Aug 2011 01:34:46 +0100</updated>
                            <resolved>Sat, 16 Apr 2011 22:31:52 +0100</resolved>
                                    <version>0.8.1</version>
                                    <fixVersion>0.8.1</fixVersion>
                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12999591" author="billgraham" created="Fri, 25 Feb 2011 21:45:01 +0000"  >&lt;p&gt;Here&apos;s a patch with 5 new projection tests added to &lt;tt&gt;TestHBaseStorage&lt;/tt&gt;, of which 4 fail. It&apos;s intended to be applied over PIG_1680 and it was generated from the git branch show here fyi:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/billonahill/pig/commit/55561c23f209ca2f27e13ddd93146d7b2a2492e3&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/billonahill/pig/commit/55561c23f209ca2f27e13ddd93146d7b2a2492e3&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13016001" author="dvryaboy" created="Tue, 5 Apr 2011 17:36:54 +0100"  >&lt;p&gt;The problem isn&apos;t loadKey, it&apos;s that we set up a (static) TableInputFormat.SCAN in setLocation, which gets called multiple times, and not always after pushProjection; we wind up overwriting SCAN and &quot;forgetting&quot; we are pushing things. I am working on a patch.&lt;/p&gt;</comment>
                            <comment id="13018180" author="dvryaboy" created="Mon, 11 Apr 2011 04:06:28 +0100"  >&lt;p&gt;Attached patch for 0.8&lt;/p&gt;</comment>
                            <comment id="13018223" author="dvryaboy" created="Mon, 11 Apr 2011 08:03:11 +0100"  >&lt;p&gt;Attaching patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13018447" author="dvryaboy" created="Mon, 11 Apr 2011 18:29:51 +0100"  >&lt;p&gt;This is ready for review.&lt;/p&gt;</comment>
                            <comment id="13018563" author="billgraham" created="Mon, 11 Apr 2011 21:54:43 +0100"  >&lt;p&gt;Dmitriy, I was able to build with the new patches and the TestHBaseStorage test suite ran successfully with both trunk and 0.8.0. I&apos;m getting failures when trying to run an HBase job against a distributed cluster though (version 0.90.0). This is similar to the issue I ran into in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1782&quot; title=&quot;Add ability to load data by column family in HBaseStorage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1782&quot;&gt;&lt;del&gt;PIG-1782&lt;/del&gt;&lt;/a&gt; that caused me to mess with how configs were initialized at one point.&lt;/p&gt;

&lt;p&gt;These are the only values that I&apos;ve overriden in &lt;tt&gt;$HBASE_CONF_DIR/hbase-site.xml&lt;/tt&gt;: &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase.rootdir
hbase.cluster.distributed
hbase.tmp.dir
hbase.zookeeper.quorum
hbase.zookeeper.property.dataDir
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this is the error I get trying to run any Pig job against HBase:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2011-04-11 13:36:58,659 [main] ERROR org.apache.hadoop.hbase.zookeeper.ZKConfig - no clientPort found in zoo.cfg
2011-04-11 13:36:58,665 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2017: Internal error creating job configuration.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t get this error running the &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1782&quot; title=&quot;Add ability to load data by column family in HBaseStorage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1782&quot;&gt;&lt;del&gt;PIG-1782&lt;/del&gt;&lt;/a&gt; patch.&lt;/p&gt;</comment>
                            <comment id="13018639" author="dvryaboy" created="Tue, 12 Apr 2011 00:59:14 +0100"  >&lt;p&gt;Thanks, Bill.&lt;br/&gt;
Attaching a patch that fixes the config confusion.&lt;/p&gt;</comment>
                            <comment id="13018640" author="dvryaboy" created="Tue, 12 Apr 2011 01:00:32 +0100"  >&lt;p&gt;Forgot to click the apache license button &amp;#8211; i hereby submit this patch under the apache license, etc etc etc.&lt;/p&gt;</comment>
                            <comment id="13018697" author="billgraham" created="Tue, 12 Apr 2011 05:02:39 +0100"  >&lt;p&gt;Dymitriy, can you check that latest patch? PIG_1870.patch and PIG_1870.2.patch are the same. &lt;/p&gt;</comment>
                            <comment id="13018708" author="dvryaboy" created="Tue, 12 Apr 2011 05:42:55 +0100"  >&lt;p&gt;whoops &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13018710" author="dvryaboy" created="Tue, 12 Apr 2011 05:43:17 +0100"  >&lt;p&gt;patch for 0.8&lt;/p&gt;</comment>
                            <comment id="13018711" author="dvryaboy" created="Tue, 12 Apr 2011 05:43:41 +0100"  >&lt;p&gt;Patch for trunk&lt;/p&gt;</comment>
                            <comment id="13018717" author="billgraham" created="Tue, 12 Apr 2011 06:01:55 +0100"  >&lt;p&gt;Either someone ran &lt;tt&gt;alias diff=&apos;echo -n &quot;&quot;&apos;&lt;/tt&gt; on my machine on April 1st, or all these patches are still the same. I think it&apos;s the latter. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13018721" author="dvryaboy" created="Tue, 12 Apr 2011 06:08:35 +0100"  >&lt;p&gt;Are not.&lt;/p&gt;</comment>
                            <comment id="13018736" author="billgraham" created="Tue, 12 Apr 2011 07:13:34 +0100"  >&lt;p&gt;Ok, my bad (embarrassed). Lesson learned: don&apos;t wget a patch from JIRA, then manually change the patch name to get another. You&apos;ll get something totally unexpected.&lt;/p&gt;

&lt;p&gt;Verified that trunk and 0.8.0 branch tests pass for PIG_1870.3.patch and PIG_1870_for0.8.2.patch, respectively. Also verified ad-hoc Pig HBase jobs with projections now work against a cluster for both.&lt;/p&gt;</comment>
                            <comment id="13019215" author="dvryaboy" created="Wed, 13 Apr 2011 06:51:45 +0100"  >&lt;p&gt;Massively sped up tests for HBaseStorage by using local mode instead of mapreduce. About 10 secs / test now on my laptop (down from 50).&lt;/p&gt;</comment>
                            <comment id="13020133" author="daijy" created="Fri, 15 Apr 2011 01:38:29 +0100"  >&lt;p&gt;Hi, Dmitriy, do you still plan to commit this patch to 0.8?&lt;/p&gt;</comment>
                            <comment id="13020137" author="dvryaboy" created="Fri, 15 Apr 2011 01:51:09 +0100"  >&lt;p&gt;Daniel, yeah, it&apos;s ready to go &amp;#8211; just waiting on another committer to +1 it.&lt;/p&gt;</comment>
                            <comment id="13020392" author="daijy" created="Fri, 15 Apr 2011 19:39:22 +0100"  >&lt;p&gt;+1. Please commit if test pass.&lt;/p&gt;</comment>
                            <comment id="13020664" author="dvryaboy" created="Sat, 16 Apr 2011 22:31:52 +0100"  >&lt;p&gt;Committed to 0.8 branch and trunk.&lt;/p&gt;</comment>
                            <comment id="13051174" author="qwertymaniac" created="Fri, 17 Jun 2011 17:33:02 +0100"  >&lt;p&gt;Could someone please add the appropriate 0.8.x fix version here? Or if that&apos;s done when a release is tagged, np. Just thought it might help those following tickets here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13051292" author="dvryaboy" created="Fri, 17 Jun 2011 20:58:58 +0100"  >&lt;p&gt;it&apos;s in 8.1, I updated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12476069" name="PIG_1870.2.patch" size="26771" author="dvryaboy" created="Tue, 12 Apr 2011 00:59:14 +0100"/>
                            <attachment id="12476096" name="PIG_1870.3.patch" size="26687" author="dvryaboy" created="Tue, 12 Apr 2011 05:43:41 +0100"/>
                            <attachment id="12476215" name="PIG_1870.4.patch" size="28114" author="dvryaboy" created="Wed, 13 Apr 2011 06:51:45 +0100"/>
                            <attachment id="12475979" name="PIG_1870.patch" size="26771" author="dvryaboy" created="Mon, 11 Apr 2011 08:03:10 +0100"/>
                            <attachment id="12471977" name="PIG_1870_1.patch" size="10405" author="billgraham" created="Fri, 25 Feb 2011 21:45:01 +0000"/>
                            <attachment id="12476095" name="PIG_1870_for0.8.2.patch" size="27405" author="dvryaboy" created="Tue, 12 Apr 2011 05:43:17 +0100"/>
                            <attachment id="12476537" name="PIG_1870_for0.8.final.patch" size="26973" author="dvryaboy" created="Sat, 16 Apr 2011 22:26:32 +0100"/>
                            <attachment id="12475955" name="PIG_1870_for0.8.patch" size="27813" author="dvryaboy" created="Mon, 11 Apr 2011 04:06:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Apr 2011 16:36:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyau7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97207</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>