<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:11:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3199/PIG-3199.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3199] Provide a method to retriever name of loader/storer in PigServer</title>
                <link>https://issues.apache.org/jira/browse/PIG-3199</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;LogicalPlan could be exposed to user in order for one to make validations based on it. For eg, one could get Load/Store paths or other operators and be able to perform checks such as whether I/O paths are valid etc.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12633081">PIG-3199</key>
            <summary>Provide a method to retriever name of loader/storer in PigServer</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prkommireddi">Prashant Kommireddi</assignee>
                                    <reporter username="prkommireddi">Prashant Kommireddi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Feb 2013 21:50:41 +0000</created>
                <updated>Mon, 14 Oct 2013 17:45:48 +0100</updated>
                            <resolved>Fri, 20 Sep 2013 23:36:57 +0100</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13581678" author="prkommireddi" created="Tue, 19 Feb 2013 22:12:50 +0000"  >&lt;p&gt;Adding a new method getLogicalPlan() to PigServer that retrieves the lp associated with current DAG.&lt;/p&gt;

&lt;p&gt;Marking Graph.getLogicalPlan() as private since there is no calls being made to it within Pig, and Graph itself is protected. Please let me know if there are any objections to that.&lt;/p&gt;

&lt;p&gt;Also, removing an unnecessary annotation  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Added a test testGetLogicalPlan() to TestPigServer.&lt;/p&gt;
</comment>
                            <comment id="13584304" author="jcoveney" created="Fri, 22 Feb 2013 14:28:43 +0000"  >&lt;p&gt;Given that a logical plan is only available under certain conditions, now that it is public it&apos;s probably worth testing for those conditions and throwing an error if they are not met.&lt;/p&gt;

&lt;p&gt;Aside from that this is a pretty small but potentially useful change.&lt;/p&gt;</comment>
                            <comment id="13584751" author="alangates" created="Fri, 22 Feb 2013 22:02:12 +0000"  >&lt;p&gt;When you say &quot;now that &lt;span class=&quot;error&quot;&gt;&amp;#91;the logical plan&amp;#93;&lt;/span&gt; is public&quot; do you mean that&apos;s already true or it would be true with this patch?  If it&apos;s already true, where are we exposing it?  If it&apos;s not true yet, I&apos;m -1 at this point in exposing it.  Making that a public interface will severely restrict our ability to make changes at that layer, which we&apos;d like to be to do.&lt;/p&gt;</comment>
                            <comment id="13584772" author="jcoveney" created="Fri, 22 Feb 2013 22:31:12 +0000"  >&lt;p&gt;Alan,&lt;/p&gt;

&lt;p&gt;This patch almost exclusively exists to make the LogicalPlan publicly available.&lt;/p&gt;

&lt;p&gt;Prashant,&lt;/p&gt;

&lt;p&gt;Want to discuss further how you want to handle this? I agree that we don&apos;t want to put ourselves into a difficult position when it comes to changing things in the future, but maybe there&apos;s a compromise.&lt;/p&gt;</comment>
                            <comment id="13584776" author="prkommireddi" created="Fri, 22 Feb 2013 22:35:40 +0000"  >&lt;p&gt;It&apos;s not exposed at the moment but a part of this patch. I was not aware of plans to make changes to LogicalPlan at the interface level. Just noticed this for OperatorPlan and it makes sense.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@InterfaceAudience.Private
@InterfaceStability.Unstable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If that&apos;s the case, can we expose only a couple methods to get a handle on source/sinks?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;Operator&amp;gt; getSources();

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;Operator&amp;gt; getSinks();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13584784" author="alangates" created="Fri, 22 Feb 2013 22:46:46 +0000"  >&lt;p&gt;Even making Operator public is dangerous.  These are internal structures.&lt;/p&gt;

&lt;p&gt;It would help to understand who you want to expose these to and why.  Then we can see if there&apos;s a way to get you the information you need.  I don&apos;t want to stand in the way of innovation but I also don&apos;t want Pig&apos;s internals exposed to the point that the next time we make a change to our Operator class someone complains because we broke his tool.&lt;/p&gt;
</comment>
                            <comment id="13584795" author="prkommireddi" created="Fri, 22 Feb 2013 23:04:31 +0000"  >&lt;p&gt;Ok, I can understand the concerns and agree with you on not exposing LP.&lt;/p&gt;

&lt;p&gt;What I stated earlier is exactly the info I need - using PigServer register script/query and be able to determine the source/sinks. For eg, in the following snippet I read a script &quot;script.pig&quot;. I don&apos;t control the contents of the script (written by other users) and as an admin would like to make sure I can read the I/O paths being used here. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pigServer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PigServer(ExecType.MAPREDUCE, conf);
InputStream in = fs.open(&lt;span class=&quot;code-quote&quot;&gt;&quot;/foo/script.pig&quot;&lt;/span&gt;);
pigServer.registerScript(in);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;script.pig&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;/apache/pig/*&apos;;
B = store A into &apos;/google&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The idea with this patch was to be able to determine source (/apache/pig) and sink (/google) and perform certain operations on it. Would be great if you think it can be done in a way better than exposing any of LP/Operator.&lt;/p&gt;</comment>
                            <comment id="13584808" author="alangates" created="Fri, 22 Feb 2013 23:20:58 +0000"  >&lt;p&gt;Take a look at PigNotificationListener.initialPlanNotification.  It seems like this will give you what you want, since each of the sources and sinks for the MR jobs are in here.  To my chagrin this exposes the MR plan.  Someone snuck that past me.&lt;/p&gt;</comment>
                            <comment id="13584821" author="prkommireddi" created="Fri, 22 Feb 2013 23:30:41 +0000"  >&lt;p&gt;What are your thoughts on exposing the Load/Store paths as strings instead of exposing any of the internal interfaces? That way we have a very neat way of exposing these to users&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getLoadPaths();
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getStorePaths();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13584825" author="alangates" created="Fri, 22 Feb 2013 23:37:38 +0000"  >&lt;p&gt;If the PigNotificationListener doesn&apos;t work for you I think getLoadPaths()/getStorePaths() is fine.  I was thinking of proposing that when I remembered the initialPlanNotification stuff.  You might want to return a class so it can contain the names of the load/store funcs as well and so you can include more info later.&lt;/p&gt;</comment>
                            <comment id="13584851" author="prkommireddi" created="Sat, 23 Feb 2013 00:05:04 +0000"  >&lt;p&gt;That makes sense, I will work on implementing the above proposal. Thanks Alan.&lt;/p&gt;

&lt;p&gt;Should we change this JIRA title to reflect that or open a new one? &lt;/p&gt;</comment>
                            <comment id="13584853" author="alangates" created="Sat, 23 Feb 2013 00:07:18 +0000"  >&lt;p&gt;Keep this one, that way the history of the discussion is all together.&lt;/p&gt;</comment>
                            <comment id="13586418" author="dvryaboy" created="Mon, 25 Feb 2013 23:00:27 +0000"  >&lt;p&gt;Seriously though, why not PPNL?&lt;/p&gt;</comment>
                            <comment id="13587510" author="prkommireddi" created="Tue, 26 Feb 2013 20:37:20 +0000"  >&lt;p&gt;Mainly because we don&apos;t need the extra steps of running the optimizer, generating Physical plan, generating MR plan to get to this information. It just feels querying LP for source/sink or load/store funcs is more efficient. Would be happy to get your thoughts?&lt;/p&gt;</comment>
                            <comment id="13591527" author="prkommireddi" created="Sat, 2 Mar 2013 21:26:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dvryaboy&quot; class=&quot;user-hover&quot; rel=&quot;dvryaboy&quot;&gt;Dmitriy V. Ryaboy&lt;/a&gt; please let me know if you think otherwise?&lt;/p&gt;</comment>
                            <comment id="13626308" author="prkommireddi" created="Tue, 9 Apr 2013 07:49:04 +0100"  >&lt;p&gt;Uploading a new patch that returns a LogicalPlanData object that contains information regarding the LogicalPlan (sources, sinks, load/store func names). None of the pig internals are exposed, and any additional LP data can be added to this new class in the future. The idea behind this is that the information can be extracted before Pig moves on to generating Physical and MR plans. &lt;/p&gt;</comment>
                            <comment id="13637351" author="prkommireddi" created="Sat, 20 Apr 2013 21:32:59 +0100"  >&lt;p&gt;Ping!&lt;/p&gt;</comment>
                            <comment id="13637373" author="cheolsoo" created="Sat, 20 Apr 2013 22:41:21 +0100"  >&lt;p&gt;The patch seems fine to me except the following line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Source must end with input.txt&quot;&lt;/span&gt;, lData.getSinks().get(0).endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;output&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It should say &quot;Sink must end with output&quot; instead.&lt;/p&gt;

&lt;p&gt;Nevertheless, I will wait for more feedback from other committers given this is quite controversial.&lt;/p&gt;</comment>
                            <comment id="13773529" author="daijy" created="Fri, 20 Sep 2013 23:29:25 +0100"  >&lt;p&gt;Looks fine for me. We are not exposing LogicalPlan, but only loader/storer name in the new patch. I will commit the patch with Cheolsoo&apos;s suggested change shortly.&lt;/p&gt;</comment>
                            <comment id="13773547" author="daijy" created="Fri, 20 Sep 2013 23:36:57 +0100"  >&lt;p&gt;Patch committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12570008" name="PIG-3199.patch" size="2965" author="prkommireddi" created="Tue, 19 Feb 2013 22:12:50 +0000"/>
                            <attachment id="12577727" name="PIG-3199_2.patch" size="8797" author="prkommireddi" created="Tue, 9 Apr 2013 07:49:04 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Feb 2013 14:28:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzbypb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313922</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>api</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>