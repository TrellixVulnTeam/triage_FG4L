<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:06:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1885/PIG-1885.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1885] SUBSTRING fails when input length less than start</title>
                <link>https://issues.apache.org/jira/browse/PIG-1885</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;SUBSTRING throws an error if it gets a string which has a length less than its start value.  For example, SUBSTRING(x, 100, 120) will fail with any chararray of length less than 100.  It should return null instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500520">PIG-1885</key>
            <summary>SUBSTRING fails when input length less than start</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepujain">Deepak Kumar V</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Mar 2011 17:55:47 +0000</created>
                <updated>Thu, 4 Aug 2011 01:35:10 +0100</updated>
                            <resolved>Mon, 14 Mar 2011 18:42:14 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13003968" author="deepujain" created="Tue, 8 Mar 2011 14:39:37 +0000"  >&lt;p&gt;There are few more cases that needs to be handled.&lt;/p&gt;

&lt;p&gt;a) beginindex is -ve&lt;br/&gt;
Current Behavior: SUBSTRING throws ExceException because of java.lang.StringIndexOutOfBoundsException&lt;/p&gt;

&lt;p&gt;b) beginindex &amp;gt; endindex&lt;br/&gt;
Current Behavior: SUBSTRING throws ExceException because of java.lang.StringIndexOutOfBoundsException&lt;/p&gt;

&lt;p&gt;c) beginindex &amp;gt; string length &amp;#8211; bug reported&lt;br/&gt;
Current Behavior: SUBSTRING throws ExceException because of java.lang.StringIndexOutOfBoundsException&lt;/p&gt;

&lt;p&gt;d) endindex is -ve&lt;br/&gt;
Current Behavior: SUBSTRING throws ExceException because of java.lang.StringIndexOutOfBoundsException&lt;/p&gt;


&lt;p&gt;SUBSTRING.java can be modified to return null in all above cases as follows&lt;br/&gt;
            if(beginindex &amp;lt; 0 || beginindex &amp;gt; source.length() || beginindex &amp;gt; endindex) &lt;/p&gt;
{
                return null;
            }
&lt;p&gt;else &lt;/p&gt;
{
                return source.substring(beginindex, Math.min(source.length(), endindex));
            }


&lt;p&gt;In case no one is working on this defect, reassign to me.&lt;/p&gt;

</comment>
                            <comment id="13004110" author="deepujain" created="Tue, 8 Mar 2011 18:15:06 +0000"  >&lt;p&gt;Following scenarios are tested&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; a = load &apos;substrinput.txt&apos; as (data:chararray);   &lt;br/&gt;
grunt&amp;gt; dump a;                                        &lt;br/&gt;
(abcde)&lt;br/&gt;
()&lt;br/&gt;
(fghi)&lt;/p&gt;

&lt;p&gt;1) beginindex == endindex&lt;br/&gt;
grunt&amp;gt; a = load &apos;substrinput.txt&apos; as (data:chararray);&lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,0,0);    &lt;br/&gt;
grunt&amp;gt; dump b;&lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp1752997904/tmp55103794&quot;&lt;br/&gt;
()&lt;br/&gt;
()&lt;br/&gt;
()&lt;/p&gt;

&lt;p&gt;2) beginindex &amp;lt; endindex  - normal scenario &lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,0,3);&lt;br/&gt;
grunt&amp;gt; dump b;                                    &lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp1752997904/tmp-314465179&quot;&lt;br/&gt;
(abc)&lt;br/&gt;
()&lt;br/&gt;
(fgh)&lt;/p&gt;

&lt;p&gt;3) beginindex is -ve&lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,-1,3);&lt;br/&gt;
grunt&amp;gt; dump b;                                     &lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp1752997904/tmp286819157&quot;&lt;br/&gt;
()&lt;br/&gt;
()&lt;br/&gt;
()&lt;/p&gt;

&lt;p&gt;4) beginindex &amp;gt; String length.&lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,8,3); &lt;br/&gt;
grunt&amp;gt; dump b;                                    &lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp1752997904/tmp-900213360&quot;&lt;br/&gt;
()&lt;br/&gt;
()&lt;br/&gt;
()&lt;/p&gt;

&lt;p&gt;5) beginindex &amp;gt; endindex&lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,2,0);&lt;br/&gt;
grunt&amp;gt; dump b;                                    &lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp1752997904/tmp-834743686&quot;&lt;br/&gt;
()&lt;br/&gt;
()&lt;br/&gt;
()&lt;/p&gt;

&lt;p&gt;5) beginindex is correct endindex &amp;gt; string length.&lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,0,9);&lt;br/&gt;
grunt&amp;gt; dump b;                                    &lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp1752997904/tmp243973324&quot;&lt;br/&gt;
(abcde)&lt;br/&gt;
()&lt;br/&gt;
(fghi)&lt;/p&gt;

&lt;p&gt;6) beginindex is correct and endindex is -ve&lt;br/&gt;
grunt&amp;gt; b = foreach a generate SUBSTRING(data,0,-2);   &lt;br/&gt;
grunt&amp;gt; dump b;&lt;br/&gt;
Output(s):&lt;br/&gt;
Successfully stored records in: &quot;file:/tmp/temp970048830/tmp1979923245&quot;&lt;br/&gt;
()&lt;br/&gt;
()&lt;br/&gt;
()&lt;br/&gt;
grunt&amp;gt; quit&lt;/p&gt;</comment>
                            <comment id="13004136" author="alangates" created="Tue, 8 Mar 2011 18:51:04 +0000"  >&lt;p&gt;Changes look good.  One thought I had is rather than paying the cost of three ifs up front we could still call String.substring as we do today and catch the StringIndexOutofBoundsException, and only then figure out what was and wrong and give an error message.  That way you are only paying the cost of the checks once (since String.substring will do it anyway).  Up to you.&lt;/p&gt;

&lt;p&gt;You will need to add units tests before we can commit it.  Add them to the existing TestStringUDFs class.  A test should be added for each of the error conditions you check for.&lt;/p&gt;</comment>
                            <comment id="13005789" author="deepujain" created="Fri, 11 Mar 2011 19:07:14 +0000"  >&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="13005904" author="alangates" created="Fri, 11 Mar 2011 23:49:17 +0000"  >&lt;p&gt;Patch looks good.  I&apos;ll run the unit tests and test_patch.&lt;/p&gt;</comment>
                            <comment id="13006561" author="alangates" created="Mon, 14 Mar 2011 18:38:38 +0000"  >&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; +1 overall.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Unit tests pass&lt;/p&gt;</comment>
                            <comment id="13006563" author="alangates" created="Mon, 14 Mar 2011 18:42:14 +0000"  >&lt;p&gt;Patch committed.  Thanks Deepak.&lt;/p&gt;</comment>
                            <comment id="13006795" author="deepujain" created="Tue, 15 Mar 2011 04:56:32 +0000"  >&lt;p&gt;Yee-Haw&lt;br/&gt;
1st Commit.&lt;/p&gt;

&lt;p&gt;@Alan&lt;br/&gt;
Can you review &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-671&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-671&lt;/a&gt; &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12473420" name="PIG-1885.txt" size="2551" author="deepujain" created="Fri, 11 Mar 2011 19:03:37 +0000"/>
                            <attachment id="12473020" name="PIG-1885.txt" size="861" author="deepujain" created="Tue, 8 Mar 2011 18:15:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Mar 2011 14:39:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaubb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fix has been tested with 0.9.0 source. (&lt;a href=&quot;http://svn.apache.org/repos/asf/pig/trunk/&quot;&gt;http://svn.apache.org/repos/asf/pig/trunk/&lt;/a&gt;)&lt;br/&gt;
JUnit test case included.&lt;br/&gt;
Created a individual test cases for each scenario. This way its clear that SUBSTRING has been tested with different scenarios , also the same is reflected in test reports. Otherwise having all the scenarios within a single test case, does not reflect the various scenarios that a given api has been tested with.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>