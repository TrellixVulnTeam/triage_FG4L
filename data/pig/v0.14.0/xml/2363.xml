<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:02:57 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2363/PIG-2363.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2363] _logs for streaming commands bug in new parser</title>
                <link>https://issues.apache.org/jira/browse/PIG-2363</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;For Pig scripts which has streaming commands , the stderr is saved into hdfs under _logs folder in the output directory.&lt;br/&gt;
This behavior was not seen with Pig 0.8 by default, but from 0.9 onwards,  we are seeing _logs folder.&lt;br/&gt;
Hence it would be nice to have a configuration to disable this feature.&lt;/p&gt;

&lt;p&gt;Sample script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
DEFINE mycmd `t.pl` ship (&apos;t.pl&apos;);
a = load &apos;i1&apos; as (f1:chararray,f2:chararray);
b = stream a through mycmd;
store b into &apos;output&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12531333">PIG-2363</key>
            <summary>_logs for streaming commands bug in new parser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vivekp">Vivek Padmanabhan</assignee>
                                    <reporter username="vivekp">Vivek Padmanabhan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Nov 2011 16:18:29 +0000</created>
                <updated>Thu, 26 Apr 2012 21:33:07 +0100</updated>
                            <resolved>Tue, 3 Jan 2012 05:17:26 +0000</resolved>
                                    <version>0.9.1</version>
                                    <fixVersion>0.10.0</fixVersion>
                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13149721" author="vivekp" created="Mon, 14 Nov 2011 16:23:23 +0000"  >&lt;p&gt;Added a boolean configuration &quot;pig.streaming.log.persist&quot;.&lt;br/&gt;
Not sure whether anything more has to be done to introduce a new configuration.&lt;/p&gt;</comment>
                            <comment id="13149848" author="daijy" created="Mon, 14 Nov 2011 19:44:42 +0000"  >&lt;p&gt;That should be good enough. Do you have idea why 0.8 does not have such issue?&lt;/p&gt;</comment>
                            <comment id="13149930" author="olgan" created="Mon, 14 Nov 2011 21:21:26 +0000"  >&lt;p&gt;I looked at it at some point and it seems that we regressed and create _log directory in more places than before and instead of doing it lazily we do it proactively. I think rather than adding more config options, we need to figure out why this is happenning.&lt;/p&gt;</comment>
                            <comment id="13150416" author="vivekp" created="Tue, 15 Nov 2011 12:03:01 +0000"  >&lt;p&gt;As I understand in Pig 0.8, the logging happens only when the user explicitly specifies the logging option in the define clause. &lt;br/&gt;
DEFINE mycmd `t.pl` stderr(&apos;mylogs&apos; limit 100);&lt;/p&gt;

&lt;p&gt;This is defined in QueryParser.jjt, in DefineClause;&lt;br/&gt;
&amp;lt;INPUT&amp;gt; &quot;(&quot; InputOutputSpec(command, StreamingCommand.Handle.INPUT) &quot;)&quot;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;           &amp;lt;OUTPUT&amp;gt; &quot;(&quot; InputOutputSpec(command, StreamingCommand.Handle.OUTPUT) &quot;)&quot;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;           &amp;lt;ERROR&amp;gt; &quot;(&quot; ErrorSpec(command, t.image) &quot;)&quot;&lt;/p&gt;


&lt;p&gt;But in Pig 0.9, with the parser changes, the LogicalPlanBuilder.buildCommand always sets the logging to true.&lt;br/&gt;
This is because from the LogicalPlanGenerator.g the log directory is is set to the alias name if none specified.&lt;br/&gt;
($error_clause.dir == null? $alias : $error_clause.dir)&lt;/p&gt;

&lt;p&gt;So this change looks intentional, if not may be as Olga mentioned we should change this rather than adding a config.&lt;/p&gt;</comment>
                            <comment id="13155750" author="vivekp" created="Wed, 23 Nov 2011 08:36:05 +0000"  >&lt;p&gt;Please let me know whether we should change LogicalPlanGenerator.g so that, null will be considered as it.&lt;br/&gt;
My only concern is that, if the fix version is 0.10 or higher, we might be confusing the users with the default behavior across the versions.&lt;/p&gt;</comment>
                            <comment id="13172149" author="jiraposter@reviews.apache.org" created="Mon, 19 Dec 2011 09:50:30 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/3256/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3256/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for pig.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;For Pig scripts which has streaming commands , the stderr is saved into hdfs under _logs folder in the output directory.&lt;br/&gt;
This behavior was not seen with Pig 0.8 by default, but from 0.9 onwards, we are seeing _logs folder.&lt;br/&gt;
Hence it would be nice to have a configuration to disable this feature.&lt;/p&gt;


&lt;p&gt;Sample script&lt;br/&gt;
DEFINE mycmd `t.pl` ship (&apos;t.pl&apos;);&lt;br/&gt;
a = load &apos;i1&apos; as (f1:chararray,f2:chararray);&lt;br/&gt;
b = stream a through mycmd;&lt;br/&gt;
store b into &apos;output&apos;;&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2363&quot; title=&quot;_logs for streaming commands bug in new parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2363&quot;&gt;&lt;del&gt;PIG-2363&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2363&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-2363&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;


&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/3256/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/3256/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Vivek&lt;/p&gt;
</comment>
                            <comment id="13173558" author="daijy" created="Tue, 20 Dec 2011 22:15:05 +0000"  >&lt;p&gt;Hi, Vivek,&lt;br/&gt;
I don&apos;t think we intentionally drop stderr statement in 0.9. It must be a bug in the new parser. Can we fix the parser instead of introducing a new config?&lt;/p&gt;</comment>
                            <comment id="13174285" author="vivekp" created="Wed, 21 Dec 2011 18:37:31 +0000"  >&lt;p&gt;Attaching a patch which has a fix for the parser.&lt;/p&gt;</comment>
                            <comment id="13178503" author="daijy" created="Mon, 2 Jan 2012 18:46:58 +0000"  >&lt;p&gt;+1. Will commit once tests pass.&lt;/p&gt;</comment>
                            <comment id="13178636" author="daijy" created="Tue, 3 Jan 2012 05:17:27 +0000"  >&lt;p&gt;Unit test pass. test-patch:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; -1 overall.  &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 release audit.  The applied patch generated 508 release audit warnings (more than the trunk&apos;s current 501 warnings).&lt;/p&gt;

&lt;p&gt;No new file added, ignore release audit warning.&lt;/p&gt;

&lt;p&gt;Patch committed to 0.10/trunk.&lt;/p&gt;

&lt;p&gt;Thanks Vivek!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12503636" name="PIG-2363_1.patch" size="696" author="vivekp" created="Mon, 14 Nov 2011 16:20:30 +0000"/>
                            <attachment id="12508277" name="PIG-2363_2.patch" size="1869" author="vivekp" created="Wed, 21 Dec 2011 18:37:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Nov 2011 19:44:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217069</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyawuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>