<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:09:12 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1649/PIG-1649.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1649] FRJoin fails to compute number of input files for replicated input</title>
                <link>https://issues.apache.org/jira/browse/PIG-1649</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;In FRJoin, if input path has curly braces, it fails to compute number of input files and logs the following exception in the log -&lt;/p&gt;

&lt;p&gt;10/09/27 14:31:13 WARN mapReduceLayer.MRCompiler: failed to get number of input files&lt;br/&gt;
java.net.URISyntaxException: Illegal character in path at index 12: /user/tejas/&lt;/p&gt;
{std*txt}
&lt;p&gt;        at java.net.URI$Parser.fail(URI.java:2809)&lt;br/&gt;
        at java.net.URI$Parser.checkChars(URI.java:2982)&lt;br/&gt;
        at java.net.URI$Parser.parseHierarchical(URI.java:3066)&lt;br/&gt;
        at java.net.URI$Parser.parse(URI.java:3024)&lt;br/&gt;
        at java.net.URI.&amp;lt;init&amp;gt;(URI.java:578)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler.hasTooManyInputFiles(MRCompiler.java:1283)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler.visitFRJoin(MRCompiler.java:1203)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POFRJoin.visit(POFRJoin.java:188)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler.compile(MRCompiler.java:475)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler.compile(MRCompiler.java:454)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MRCompiler.compile(MRCompiler.java:336)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.compile(MapReduceLauncher.java:468)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:116)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.execute(HExecutionEngine.java:301)&lt;br/&gt;
        at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1197)&lt;br/&gt;
        at org.apache.pig.PigServer.storeEx(PigServer.java:873)&lt;br/&gt;
        at org.apache.pig.PigServer.store(PigServer.java:815)&lt;br/&gt;
        at org.apache.pig.PigServer.openIterator(PigServer.java:727)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:612)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:301)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:141)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:76)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:453)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:107)&lt;/p&gt;

&lt;p&gt;This does not cause a query to fail. But since the number of input files don&apos;t get calculated, the optimizations added in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1458&quot; title=&quot;aggregate files for replicated join&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1458&quot;&gt;&lt;del&gt;PIG-1458&lt;/del&gt;&lt;/a&gt; to reduce load on name node will not get used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12475248">PIG-1649</key>
            <summary>FRJoin fails to compute number of input files for replicated input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Sep 2010 23:04:41 +0100</created>
                <updated>Fri, 17 Dec 2010 22:46:03 +0000</updated>
                            <resolved>Thu, 30 Sep 2010 16:49:11 +0100</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12915818" author="thejas" created="Tue, 28 Sep 2010 17:30:31 +0100"  >&lt;p&gt;Patch passes unit tests and test-patch .&lt;/p&gt;</comment>
                            <comment id="12915951" author="thejas" created="Tue, 28 Sep 2010 23:40:02 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1649&quot; title=&quot;FRJoin fails to compute number of input files for replicated input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1649&quot;&gt;&lt;del&gt;PIG-1649&lt;/del&gt;&lt;/a&gt;.2.patch&lt;br/&gt;
Addressing review comments from Richard &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;pointed out that that hdfs Path class constructor can fail on valid Uri like the format used for jdbc. So this patch checks if the input location uri has a hdfs scheme before using the hdfs Path constructor.&lt;/li&gt;
	&lt;li&gt;The code here can run into same problem as one in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1652&quot; title=&quot;TestSortedTableUnion and TestSortedTableUnionMergeJoin fail on trunk due to estimateNumberOfReducers bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1652&quot;&gt;&lt;del&gt;PIG-1652&lt;/del&gt;&lt;/a&gt;. The patch also includes changes to handle comma separated file names.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A better long term solution would be to have support in LoadFunc or related interfaces to check the input size and to check if parts of the file should be consolidated.&lt;/p&gt;
</comment>
                            <comment id="12915953" author="thejas" created="Tue, 28 Sep 2010 23:41:27 +0100"  >&lt;p&gt;The patch also includes changes to fix the issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1652&quot; title=&quot;TestSortedTableUnion and TestSortedTableUnionMergeJoin fail on trunk due to estimateNumberOfReducers bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1652&quot;&gt;&lt;del&gt;PIG-1652&lt;/del&gt;&lt;/a&gt; , since FRJoin code path also faces similar issue.&lt;/p&gt;
</comment>
                            <comment id="12915966" author="thejas" created="Wed, 29 Sep 2010 00:14:30 +0100"  >&lt;p&gt;New patch that includes apache license header for UriUtil.java. Passes test-patch, waiting for unit tests to finish.&lt;/p&gt;</comment>
                            <comment id="12915984" author="thejas" created="Wed, 29 Sep 2010 01:40:07 +0100"  >&lt;p&gt;New patch addressing comments from Richard&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In UriUtil.isHDFSFile(String uri) return false if uri is null&lt;/li&gt;
	&lt;li&gt;Modified a test in TestFRJoin2 to use comma separated file name.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12915985" author="rding" created="Wed, 29 Sep 2010 01:45:44 +0100"  >&lt;p&gt;+1. Looks good.&lt;/p&gt;</comment>
                            <comment id="12916295" author="thejas" created="Wed, 29 Sep 2010 23:52:28 +0100"  >&lt;p&gt;&lt;br/&gt;
I committed &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1649&quot; title=&quot;FRJoin fails to compute number of input files for replicated input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1649&quot;&gt;&lt;del&gt;PIG-1649&lt;/del&gt;&lt;/a&gt;.4.patch to 0.8 and trunk after unit tests completed, but only after that I realized that I had run unit tests against a older patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1649&quot; title=&quot;FRJoin fails to compute number of input files for replicated input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1649&quot;&gt;&lt;del&gt;PIG-1649&lt;/del&gt;&lt;/a&gt;.2.patch). While running unit tests again I found 2 failure in TestJobSubmission. Patch &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1649&quot; title=&quot;FRJoin fails to compute number of input files for replicated input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1649&quot;&gt;&lt;del&gt;PIG-1649&lt;/del&gt;&lt;/a&gt;.5.patch has the fix. I am waiting for unit tests to complete.&lt;/p&gt;</comment>
                            <comment id="12916524" author="thejas" created="Thu, 30 Sep 2010 16:49:11 +0100"  >&lt;p&gt;unit tests passed. &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1649&quot; title=&quot;FRJoin fails to compute number of input files for replicated input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1649&quot;&gt;&lt;del&gt;PIG-1649&lt;/del&gt;&lt;/a&gt;.5.patch committed to trunk and 0.8 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455841" name="PIG-1649.1.patch" size="11162" author="thejas" created="Tue, 28 Sep 2010 17:30:31 +0100"/>
                            <attachment id="12455882" name="PIG-1649.2.patch" size="18365" author="thejas" created="Tue, 28 Sep 2010 23:40:02 +0100"/>
                            <attachment id="12455886" name="PIG-1649.3.patch" size="19188" author="thejas" created="Wed, 29 Sep 2010 00:14:30 +0100"/>
                            <attachment id="12455893" name="PIG-1649.4.patch" size="20235" author="thejas" created="Wed, 29 Sep 2010 01:40:07 +0100"/>
                            <attachment id="12455952" name="PIG-1649.5.patch" size="836" author="thejas" created="Wed, 29 Sep 2010 23:52:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Sep 2010 00:45:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyasqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>