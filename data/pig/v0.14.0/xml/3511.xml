<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:48:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3511/PIG-3511.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3511] Security: Pig temporary directories might have world readable permissions</title>
                <link>https://issues.apache.org/jira/browse/PIG-3511</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently, udf jars are copied to FileLocalizer.getTemporaryPath which is a unsecured location. We need to make sure the directory that we copy these jars to have 700 permission settings (similar behavior as JobClient).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12673307">PIG-3511</key>
            <summary>Security: Pig temporary directories might have world readable permissions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Oct 2013 21:58:29 +0100</created>
                <updated>Mon, 7 Jul 2014 19:08:04 +0100</updated>
                            <resolved>Thu, 23 Jan 2014 05:58:22 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13868020" author="rohini" created="Fri, 10 Jan 2014 17:25:54 +0000"  >&lt;p&gt;If the user umask for the output directories are world readable then the temporary directories created by pig also has same permissions. And these temporary directory has job.jar, other registered jars and scripts, replicated table, quantile file for orderby, etc which are localized for jobs. Hadoop localizes them as public when the permissions are readable by all. The heavy requests for public localization from pig caused &lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-1575&quot; title=&quot;Public localizer crashes with &amp;quot;Localized unkown resource&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-1575&quot;&gt;&lt;del&gt;YARN-1575&lt;/del&gt;&lt;/a&gt;. The hadoop team would like to get this fixed in pig as well as having the data readable by all in /tmp directory is not a good thing. Also publicly localized things are localized directly by the NM process via a thread pool. Privately localized things are localized by a container localizer process run as the user. Keeping it private puts less load on NM and avoids localization being slowed down by the NM thread pool limit.&lt;/p&gt;</comment>
                            <comment id="13868250" author="knoguchi" created="Fri, 10 Jan 2014 20:22:03 +0000"  >&lt;p&gt;Hadoop/Yarn should do a better job in handling of the public distributed cache.  &lt;br/&gt;
I&apos;m more worried for the case when we have a pig job that takes sensitive input (permission 700),  filter out those sensitive portion and produces an output with permission 755.  &lt;/p&gt;

&lt;p&gt;Users may feel that they&apos;re still protecting the sensitive info but pig may be making them available through world readable intermediate outputs.&lt;/p&gt;

&lt;p&gt;Of course, the original issue of udf jars being world writable (when output permission is 777) is most critical.&lt;/p&gt;</comment>
                            <comment id="13877137" author="aniket486" created="Tue, 21 Jan 2014 03:07:54 +0000"  >&lt;p&gt;In context of hadoop 1, rolling hadoop with the proper fixes for this distributed cache problem could be hard. Currently, pig is writing jars to pig.temp.dir (/tmp), a quick fix would be to make sure pig uses JobSubmissionFiles.getStagingDir or similar api to write its jars. Does that sound like a reasonable approach?&lt;/p&gt;</comment>
                            <comment id="13877176" author="rohini" created="Tue, 21 Jan 2014 04:35:25 +0000"  >&lt;p&gt;I am just setting permissions to 700 on the relativeRoot in FileLocalizer and that works fine. Will upload the patch tomorrow. &lt;/p&gt;</comment>
                            <comment id="13879049" author="rohini" created="Wed, 22 Jan 2014 19:14:31 +0000"  >&lt;p&gt;We cannot use job staging dir as the temporary location as usually that is in user home directory and quotas are set limiting the size and number of files. The pig.temp.dir (/tmp) location usually has a higher limit set. &lt;/p&gt;</comment>
                            <comment id="13879459" author="aniket486" created="Thu, 23 Jan 2014 05:39:42 +0000"  >&lt;p&gt;+1. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="13879472" author="rohini" created="Thu, 23 Jan 2014 05:58:22 +0000"  >&lt;p&gt;Committed to trunk. Thanks Aniket for the review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12687950">YARN-1575</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624400" name="PIG-3511-1.patch" size="25837" author="rohini" created="Wed, 22 Jan 2014 19:14:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 17:25:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzioxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>