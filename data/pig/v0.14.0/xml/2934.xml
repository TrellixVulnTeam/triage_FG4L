<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:09:03 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2934/PIG-2934.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2934] HBaseStorage filter optimizations</title>
                <link>https://issues.apache.org/jira/browse/PIG-2934</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Our HBase pal/guru Gary Helmling was kind enough to do a code review of HBaseStorage. He suggested some good filter optimizations:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;when using the &quot;lt*&quot; and &quot;gt*&quot; options, set the start/stop rows on the Scan instance, at least in addition to the RowFilters. Without this you&apos;re doing a full table scan, regardless of the RowFilters.&lt;/li&gt;
	&lt;li&gt;when selecting specific columns or entire families to return, it would be more efficient to set the family + columns on the Scan object (addFamily(), addColumn()), instead of using a FilterList. I&apos;m not familiar with the family:prefix handling you mention, but that would still seem to require filters. But if that&apos;s not being used, it would be better to avoid the FilterList for columns. At minimum, we should probably call Scan.addFamily() with the distinct families, so we can skip entire column families that are not being used. In the case of a table with 4 CFs, if, say, only 1 is being used, this could be a big gain.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12609313">PIG-2934</key>
            <summary>HBaseStorage filter optimizations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="billgraham">Bill Graham</assignee>
                                    <reporter username="billgraham">Bill Graham</reporter>
                        <labels>
                            <label>hbase</label>
                    </labels>
                <created>Wed, 26 Sep 2012 22:58:13 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:46 +0000</updated>
                            <resolved>Tue, 20 Nov 2012 07:47:11 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13493232" author="christoph.bauer" created="Thu, 8 Nov 2012 14:47:16 +0000"  >&lt;p&gt;I&apos;m starting on a patch for HBase Storage here at my company.&lt;/p&gt;

&lt;p&gt;Regarding your first issue you&apos;re totally right. It seems weird that it was implemented with filters at all.&lt;br/&gt;
The second issue is different. In HBaseStorage.setLocation those Families are added to the scan object. I don&apos;t understand why it&apos;s done there though.&lt;/p&gt;</comment>
                            <comment id="13493334" author="billgraham" created="Thu, 8 Nov 2012 17:49:07 +0000"  >&lt;p&gt;Initialization happens in the setLocation method often, since that&apos;s the first time the class has a conf object on the cluster. That can happen elsewhere in the initialization process though if it works.&lt;/p&gt;</comment>
                            <comment id="13497766" author="billgraham" created="Thu, 15 Nov 2012 05:14:31 +0000"  >&lt;p&gt;Attaching patch that reduces the number of filters used and improves how range scans are done.&lt;/p&gt;</comment>
                            <comment id="13497768" author="billgraham" created="Thu, 15 Nov 2012 05:20:12 +0000"  >&lt;p&gt;We uncovered a significant performance problem with HBaseStorage &amp;gt; 0.9 when used with a long list of columns on a tall table. The previous use of filters is too hard hitting on HBase and it pegs HBase cluster CPU. We should consider this patch to be included in Pig 0.11.&lt;/p&gt;</comment>
                            <comment id="13500687" author="dvryaboy" created="Mon, 19 Nov 2012 22:18:43 +0000"  >&lt;p&gt;+1 thanks Bill.&lt;/p&gt;</comment>
                            <comment id="13500892" author="billgraham" created="Tue, 20 Nov 2012 07:47:11 +0000"  >&lt;p&gt;Committed to both trunk and Pig 0.11 branch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553619" name="PIG-2934.1.patch" size="28029" author="billgraham" created="Thu, 15 Nov 2012 05:14:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Nov 2012 14:47:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwd27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HBaseStorage filter performance improvements</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>