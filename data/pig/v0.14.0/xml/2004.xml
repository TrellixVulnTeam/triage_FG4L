<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:05:23 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2004/PIG-2004.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2004] Incorrect input types passed on to eval function</title>
                <link>https://issues.apache.org/jira/browse/PIG-2004</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The below script fails by throwing a ClassCastException from the MAX udf. The udf expects the value of the bag supplied to be databyte array, but at run time the udf gets the actual type, ie Double in this case.  This causes the script execution to fail with exception;&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Caused by: java.lang.ClassCastException: java.lang.Double cannot be cast to org.apache.pig.data.DataByteArray&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;The same script runs properly with Pig 0.8.&lt;/p&gt;



&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = LOAD &apos;myinput&apos; as (f1,f2,f3);
B = foreach A generate f1,f2+f3/1000.0 as doub;
C = group B by f1;
D = foreach C generate (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)(MAX(B.doub)) as f4;
dump D;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;myinput&lt;br/&gt;
-------&lt;br/&gt;
a       1000    12345&lt;br/&gt;
b       2000    23456&lt;br/&gt;
c       3000    34567&lt;br/&gt;
a       1500    54321&lt;br/&gt;
b       2500    65432&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12504775">PIG-2004</key>
            <summary>Incorrect input types passed on to eval function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="vivekp">Vivek Padmanabhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Apr 2011 11:16:35 +0100</created>
                <updated>Thu, 4 Aug 2011 01:35:02 +0100</updated>
                            <resolved>Tue, 26 Apr 2011 20:24:46 +0100</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13022264" author="daijy" created="Wed, 20 Apr 2011 19:03:14 +0100"  >&lt;p&gt;Seems logical plan pick the wrong MAX implementation (should pick DoubleMax)&lt;/p&gt;</comment>
                            <comment id="13022363" author="daijy" created="Wed, 20 Apr 2011 21:50:24 +0100"  >&lt;p&gt;TypeCheckVisitor does not update schema before processing LOGenerate. Attach a patch for demonstration. Assign to Thejas for further investigation.&lt;/p&gt;</comment>
                            <comment id="13022385" author="olgan" created="Wed, 20 Apr 2011 22:46:55 +0100"  >&lt;p&gt;Thejas - can you treat this as high priority since it can cause failures in pretty basic Pig scripts&lt;/p&gt;</comment>
                            <comment id="13025021" author="thejas" created="Tue, 26 Apr 2011 02:21:02 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2004&quot; title=&quot;Incorrect input types passed on to eval function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2004&quot;&gt;&lt;del&gt;PIG-2004&lt;/del&gt;&lt;/a&gt;.1.patch&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Reset fieldschema of all expressions from TypeCheckingExpVisitor constructor, instead of doing it in each visit function.&lt;/li&gt;
	&lt;li&gt;Reset target fieldschema in CastExpression, copied LHS fieldschema in BinCondExpression so that uid of inner schema is not re-used.&lt;/li&gt;
	&lt;li&gt;Fixed a NPE in LogicalSchema that was seen in test cases after this issue was fixed.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13025389" author="daijy" created="Tue, 26 Apr 2011 20:14:46 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13025391" author="thejas" created="Tue, 26 Apr 2011 20:24:46 +0100"  >&lt;p&gt;Patch committed to trunk and 0.9 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12476939" name="PIG-2004-0.patch" size="3898" author="daijy" created="Wed, 20 Apr 2011 21:50:23 +0100"/>
                            <attachment id="12477348" name="PIG-2004.1.patch" size="8378" author="thejas" created="Tue, 26 Apr 2011 02:21:02 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Apr 2011 18:03:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyav0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>