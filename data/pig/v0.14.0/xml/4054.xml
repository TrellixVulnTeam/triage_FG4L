<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:02:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-4054/PIG-4054.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-4054] Do not create job.jar when submitting job</title>
                <link>https://issues.apache.org/jira/browse/PIG-4054</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently Pig creates job.jar per job when submitting mapreduce job. There are several disadvantages:&lt;br/&gt;
1. job.jar varies job by job, job.jar will not get reused even if jar cache is used (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2672&quot; title=&quot;Optimize the use of DistributedCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2672&quot;&gt;&lt;del&gt;PIG-2672&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
2. Before job submission, we need to pack a job.jar which are mostly repacking of existing jars, this is a waste of time&lt;br/&gt;
3. job.jar is a uber jar which makes debug harder and could lead to jar conflicting issue (eg, &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3039&quot; title=&quot;Not possible to use custom version of jackson jars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3039&quot;&gt;&lt;del&gt;PIG-3039&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;On tez side, situation is similar, the consequence is worse since container will not be reused.&lt;/p&gt;

&lt;p&gt;So instead of job.jar, I would like to ship individual jar to distributed cache. Note this issue is in essence independent of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4047&quot; title=&quot;Break up pig withouthadoop and fat jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4047&quot;&gt;&lt;del&gt;PIG-4047&lt;/del&gt;&lt;/a&gt;, however, &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4047&quot; title=&quot;Break up pig withouthadoop and fat jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4047&quot;&gt;&lt;del&gt;PIG-4047&lt;/del&gt;&lt;/a&gt; would make the picture more complete in that we don&apos;t have any uber jars.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12726856">PIG-4054</key>
            <summary>Do not create job.jar when submitting job</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jul 2014 19:32:42 +0100</created>
                <updated>Fri, 21 Nov 2014 05:58:58 +0000</updated>
                            <resolved>Sat, 26 Jul 2014 19:15:42 +0100</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14068206" author="daijy" created="Mon, 21 Jul 2014 05:57:14 +0100"  >&lt;p&gt;Rebase the patch after &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3886&quot; title=&quot;UdfDistributedCache_1 fails in tez branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3886&quot;&gt;&lt;del&gt;PIG-3886&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14074006" author="rohini" created="Fri, 25 Jul 2014 04:17:20 +0100"  >&lt;p&gt;Few minor comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Why not use a Set for List&amp;lt;URL&amp;gt; allJars? Same for List&amp;lt;String&amp;gt; defaultJars.&lt;/li&gt;
	&lt;li&gt;src/org/apache/pig/impl/util/Utils.java putJarOnClassPathThroughDistributedCache, shipToHDFS - The methods itself are not used and can be removed. Has been introduced as part of Tez merge only.&lt;/li&gt;
	&lt;li&gt;Assert.assertEquals(&quot;size 1 for &quot;+Arrays.toString(fileClassPaths), 1, fileClassPaths.length); - Can you keep the assert and just change the expected value?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14075090" author="daijy" created="Fri, 25 Jul 2014 23:47:57 +0100"  >&lt;p&gt;Addressing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;Rohini Palaniswamy&lt;/a&gt;&apos;s review comments:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Why not use a Set for List&amp;lt;URL&amp;gt; allJars? Same for List&amp;lt;String&amp;gt; defaultJars&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is intentional to make the list ordered. We need to ability to control the priority of conflicting jars&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The methods itself are not used and can be removed&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Fixed&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can you keep the assert and just change the expected value?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Fixed&lt;/p&gt;</comment>
                            <comment id="14075246" author="rohini" created="Sat, 26 Jul 2014 04:31:31 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14075454" author="daijy" created="Sat, 26 Jul 2014 19:15:42 +0100"  >&lt;p&gt;Patch committed to trunk. Thanks Rohini for review!&lt;/p&gt;</comment>
                            <comment id="14075568" author="cheolsoo" created="Sun, 27 Jul 2014 07:33:31 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt;, looks like this broke two piggybank test: TestDBStorage and TestMultiStorage.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NullPointerException
        at java.io.File.&amp;lt;init&amp;gt;(File.java:277)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:612)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you take a look?&lt;/p&gt;</comment>
                            <comment id="14075725" author="daijy" created="Sun, 27 Jul 2014 20:39:10 +0100"  >&lt;p&gt;Yes, missing pig-core.jar in classpath. Attach &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4054&quot; title=&quot;Do not create job.jar when submitting job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4054&quot;&gt;&lt;del&gt;PIG-4054&lt;/del&gt;&lt;/a&gt;-4.patch for that.&lt;/p&gt;</comment>
                            <comment id="14076426" author="cheolsoo" created="Mon, 28 Jul 2014 18:23:23 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt;, I used to run piggybank tests as follows-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant clean compile-test -Dhadoopversion=23
cd contrib/piggybank/java
ant clean test -Dhadoopversion=23
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But now I have to run this-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant clean compile-test -Dhadoopversion=23
ant clean jar -Dhadoopversion=23
cd contrib/piggybank/java
ant clean test -Dhadoopversion=23
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we make &lt;tt&gt;compile-test&lt;/tt&gt; depend on &lt;tt&gt;jar&lt;/tt&gt; instead of &lt;tt&gt;compile&lt;/tt&gt; in the root &lt;tt&gt;build.xml&lt;/tt&gt;?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;compile-test&quot;&lt;/span&gt; depends=&lt;span class=&quot;code-quote&quot;&gt;&quot;compile, ivy-test&quot;&lt;/span&gt;&amp;gt;
+    &amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;compile-test&quot;&lt;/span&gt; depends=&lt;span class=&quot;code-quote&quot;&gt;&quot;jar, ivy-test&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14076464" author="daijy" created="Mon, 28 Jul 2014 18:49:32 +0100"  >&lt;p&gt;Sure, let&apos;s do it. We do need pig-core.jar to run piggybank MiniCluster test.&lt;/p&gt;</comment>
                            <comment id="14076803" author="cheolsoo" created="Mon, 28 Jul 2014 21:42:25 +0100"  >&lt;p&gt;+1 for &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4054&quot; title=&quot;Do not create job.jar when submitting job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4054&quot;&gt;&lt;del&gt;PIG-4054&lt;/del&gt;&lt;/a&gt;-5.patch&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14076924" author="daijy" created="Mon, 28 Jul 2014 22:35:12 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4054&quot; title=&quot;Do not create job.jar when submitting job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4054&quot;&gt;&lt;del&gt;PIG-4054&lt;/del&gt;&lt;/a&gt;-5.patch committed to trunk. Thanks Cheolsoo!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="12721009">PIG-4011</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12724646">PIG-4047</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12655272" name="PIG-4054-1.patch" size="32733" author="daijy" created="Fri, 11 Jul 2014 19:39:54 +0100"/>
                            <attachment id="12656817" name="PIG-4054-2.patch" size="32927" author="daijy" created="Mon, 21 Jul 2014 05:57:14 +0100"/>
                            <attachment id="12657933" name="PIG-4054-3.patch" size="34998" author="daijy" created="Fri, 25 Jul 2014 23:47:57 +0100"/>
                            <attachment id="12658036" name="PIG-4054-4.patch" size="1670" author="daijy" created="Sun, 27 Jul 2014 20:39:10 +0100"/>
                            <attachment id="12658191" name="PIG-4054-5.patch" size="2230" author="daijy" created="Mon, 28 Jul 2014 18:49:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 25 Jul 2014 03:17:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrjun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405000</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>