<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:50:56 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3211/PIG-3211.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3211] Allow default Load/Store funcs to be configurable</title>
                <link>https://issues.apache.org/jira/browse/PIG-3211</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;PigStorage is used by default when a Load/StoreFunc is not specified. It would be useful to make this configurable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12633541">PIG-3211</key>
            <summary>Allow default Load/Store funcs to be configurable</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prkommireddi">Prashant Kommireddi</assignee>
                                    <reporter username="prkommireddi">Prashant Kommireddi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Feb 2013 03:04:35 +0000</created>
                <updated>Mon, 14 Oct 2013 17:46:29 +0100</updated>
                            <resolved>Tue, 5 Mar 2013 17:33:15 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13589264" author="prkommireddi" created="Thu, 28 Feb 2013 06:58:07 +0000"  >&lt;p&gt;Changes made to LogicalPlanBuilder, Utils and TestLogicalPlanBuilder. 1 thing I would appreciate feedback on was regarding the classloader to use which I am picking up from PigContext at the moment.&lt;/p&gt;

&lt;p&gt;2 new configs:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;pig.default.load.func&lt;/b&gt; - default class to load for LoadFunc&lt;br/&gt;
&lt;b&gt;pig.default.store.func&lt;/b&gt; - default class to load for StoreFunc&lt;/p&gt;

&lt;p&gt;I have added test cases for both load and store. Also, I noticed there&apos;s a lot of ugliness in TestLogicalPlanBuilder which I don&apos;t want to clean up in this patch but probably should be done at a later point.&lt;/p&gt;</comment>
                            <comment id="13592040" author="prkommireddi" created="Mon, 4 Mar 2013 07:35:55 +0000"  >&lt;p&gt;Please note I have not added these props to pig.properties in this patch. I will incorporate that with any changes I might need to make with the review.&lt;/p&gt;</comment>
                            <comment id="13592257" author="jcoveney" created="Mon, 4 Mar 2013 14:59:09 +0000"  >&lt;p&gt;I&apos;ll take a closer look in a little bit, though I will say that there is a PigConfiguration singleton I&apos;d like to see catch on. Ideally, it should be the central place for configurations like this.&lt;/p&gt;</comment>
                            <comment id="13592486" author="cheolsoo" created="Mon, 4 Mar 2013 18:48:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prkommireddi&quot; class=&quot;user-hover&quot; rel=&quot;prkommireddi&quot;&gt;Prashant Kommireddi&lt;/a&gt;, I have two comments:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;I think we can simplify the code. Why don&apos;t we do this?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;buildLoadOp&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-            FuncSpec instantiatedFuncSpec =
-                    funcSpec == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ?
-                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FuncSpec(PigStorage.class.getName()) :
-                        funcSpec;
-            loFunc = (LoadFunc)PigContext.instantiateFuncFromSpec(instantiatedFuncSpec);
-            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileNameKey = QueryParserUtils.constructFileNameSignature(filename, instantiatedFuncSpec) + &lt;span class=&quot;code-quote&quot;&gt;&quot;_&quot;&lt;/span&gt; + (loadIndex++);
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; defaultLoadFuncName = pigContext.getProperties().getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pig.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.load.func&quot;&lt;/span&gt;, PigStorage.class.getName());
+            funcSpec = funcSpec == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FuncSpec(defaultLoadFuncName): funcSpec;
+            loFunc = (LoadFunc)PigContext.instantiateFuncFromSpec(funcSpec);
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileNameKey = QueryParserUtils.constructFileNameSignature(filename, funcSpec) + &lt;span class=&quot;code-quote&quot;&gt;&quot;_&quot;&lt;/span&gt; + (loadIndex++);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;buildStoreOp&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-            FuncSpec instantiatedFuncSpec =
-                    funcSpec == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ?
-                            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FuncSpec(PigStorage.class.getName()):
-                            funcSpec;
-
-            StoreFuncInterface stoFunc = (StoreFuncInterface)PigContext.instantiateFuncFromSpec(instantiatedFuncSpec);
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; defaultStoreFuncName = pigContext.getProperties().getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pig.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.store.func&quot;&lt;/span&gt;, PigStorage.class.getName());
+            funcSpec = funcSpec == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FuncSpec(defaultStoreFuncName): funcSpec;
+            StoreFuncInterface stoFunc = (StoreFuncInterface)PigContext.instantiateFuncFromSpec(funcSpec);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can confirm that your test cases pass with this, so I don&apos;t think we need the helper functions in Utils.java.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;In addition, we should change the following in QueryParserUtils.java:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;QueryParserUtils.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void attachStorePlan(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scope, LogicalPlan lp, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileName, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; func, 
             Operator input, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; alias, PigContext pigContext) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FrontendException {
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( func == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ) {
-            func = PigStorage.class.getName();
+            func = pigContext.getProperties().getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pig.&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.store.func&quot;&lt;/span&gt;, PigStorage.class.getName());
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="13592620" author="prkommireddi" created="Mon, 4 Mar 2013 20:51:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;. I have updated the patch (may be simplified a bit further). I also took Jon&apos;s suggestion of using PigConfiguration to define the new properties. The same has been documented in pig.properties for users.&lt;/p&gt;</comment>
                            <comment id="13592660" author="cheolsoo" created="Mon, 4 Mar 2013 21:35:03 +0000"  >&lt;p&gt;+1. I will wait a day before committing just to see Jonathan has more suggestions. Thank you Prashant!&lt;/p&gt;</comment>
                            <comment id="13592710" author="jcoveney" created="Mon, 4 Mar 2013 22:11:06 +0000"  >&lt;p&gt;looks fine to me. go ahead and commit it cheolsoo &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13592716" author="cheolsoo" created="Mon, 4 Mar 2013 22:12:29 +0000"  >&lt;p&gt;OK, I will run unit test now.&lt;/p&gt;</comment>
                            <comment id="13593633" author="cheolsoo" created="Tue, 5 Mar 2013 17:33:15 +0000"  >&lt;p&gt;I committed to trunk. Thanks Prashant!&lt;/p&gt;</comment>
                            <comment id="13593712" author="prkommireddi" created="Tue, 5 Mar 2013 18:23:23 +0000"  >&lt;p&gt;Thanks for the review/commit Cheolsoo.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12571366" name="PIG-3211.patch" size="7348" author="prkommireddi" created="Thu, 28 Feb 2013 06:58:07 +0000"/>
                            <attachment id="12571953" name="PIG-3211_2.patch" size="10939" author="prkommireddi" created="Mon, 4 Mar 2013 20:51:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Mar 2013 14:59:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314036</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzc1jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314381</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The default storage is now configurable by the following new properties:&lt;br/&gt;
- pig.default.load.func=&amp;lt;fully qualified class name of LoadFunc&amp;gt;&lt;br/&gt;
- pig.default.store.func=&amp;lt;fully qualified class name of StoreFunc&amp;gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>