<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:48:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-4250/PIG-4250.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-4250] Fix Security Risks found by Coverity</title>
                <link>https://issues.apache.org/jira/browse/PIG-4250</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Here is the report: &lt;a href=&quot;https://scan.coverity.com/projects/3026&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://scan.coverity.com/projects/3026&lt;/a&gt; (Need to register to see). Most belong to one pattern: not close stream when exception happens.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12750918">PIG-4250</key>
            <summary>Fix Security Risks found by Coverity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Oct 2014 23:13:35 +0000</created>
                <updated>Fri, 21 Nov 2014 05:59:12 +0000</updated>
                            <resolved>Fri, 31 Oct 2014 21:46:11 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14188834" author="daijy" created="Wed, 29 Oct 2014 19:24:51 +0000"  >&lt;p&gt;There are several test failures in previous patch. Attach a new patch.&lt;/p&gt;</comment>
                            <comment id="14191114" author="thejas" created="Fri, 31 Oct 2014 00:37:22 +0000"  >&lt;p&gt;blocks such as following aren&apos;t necessary - &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e
        } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can use Hadoop IOUtils.closeStream or cleanup to call close. You don&apos;t need the addtional try-catch and null check with that.&lt;/p&gt;</comment>
                            <comment id="14191373" author="rohini" created="Fri, 31 Oct 2014 05:15:33 +0000"  >&lt;p&gt;DistinctDataBag.java,InternalDistinctBag.java, InternalSortedBag.java , SortedDataBag.java in the patch have out.close() with exceptions swallowed. For output streams it is best advised to not use IOUtils.closeStream or cleanup. Just null check is enough. When output stream is closed quietly it can lead to corrupted or partial data and have encountered that issue multiple times with hdfs data. Input streams can always be closed quietly though.  &lt;/p&gt;</comment>
                            <comment id="14191436" author="daijy" created="Fri, 31 Oct 2014 06:09:03 +0000"  >&lt;p&gt;Address review comments from Thejas and Rohini.&lt;/p&gt;</comment>
                            <comment id="14191453" author="rohini" created="Fri, 31 Oct 2014 06:19:43 +0000"  >&lt;p&gt;+1. &lt;/p&gt;

&lt;p&gt;Missed the out.flush() in the Bag classes and exception would be thrown when that fails. So it is good to just log a warning when out.close() fails. But I see a bigger problem. If there is a exception during spill() called by SpillableMemoryManager it will be just ignored. We do not track that there was an exception during spill and throw that back when the bag is accessed next time. But this is a different issue not related to this jira and we can follow this up in a new one. &lt;/p&gt;</comment>
                            <comment id="14192556" author="daijy" created="Fri, 31 Oct 2014 21:46:11 +0000"  >&lt;p&gt;Patch committed to both trunk and 0.14 branch. Thanks Thejas and Rohini for review!&lt;/p&gt;

&lt;p&gt;Rohini, do you want me file a ticket for exception handling for SpillableMemoryManager?&lt;/p&gt;</comment>
                            <comment id="14192674" author="rohini" created="Fri, 31 Oct 2014 22:51:03 +0000"  >&lt;p&gt;Sure. Exception handling has to be done in the bags.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12677442" name="PIG-4250-1.patch" size="23146" author="daijy" created="Mon, 27 Oct 2014 23:14:08 +0000"/>
                            <attachment id="12677966" name="PIG-4250-2.patch" size="22421" author="daijy" created="Wed, 29 Oct 2014 19:24:51 +0000"/>
                            <attachment id="12678420" name="PIG-4250-3.patch" size="22480" author="daijy" created="Fri, 31 Oct 2014 06:09:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Oct 2014 00:37:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzviav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>