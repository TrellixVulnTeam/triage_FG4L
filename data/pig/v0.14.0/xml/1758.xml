<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:48:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1758/PIG-1758.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1758] Deep cast of complex type</title>
                <link>https://issues.apache.org/jira/browse/PIG-1758</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig does not handle deep cast from bag -&amp;gt; bag, tuple -&amp;gt; tuple. Eg, the following script does not produce desired result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a = load &apos;1.txt&apos; as (a0:bag{t:tuple(i0:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;)});
b = foreach a generate (bag{tuple(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)})a0;
dump b;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result tuple still contain int inside tuple of bag. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-613&quot; title=&quot;Casting complex type(tuple/bag/map) does not take effect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-613&quot;&gt;&lt;del&gt;PIG-613&lt;/del&gt;&lt;/a&gt; fix the case we cast bytearray &lt;del&gt;&amp;gt; bag/tuple, we take complex type including inner types, but bag&lt;/del&gt;&amp;gt;bag, tuple-&amp;gt;tuple is still not effective.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492683">PIG-1758</key>
            <summary>Deep cast of complex type</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Dec 2010 23:43:13 +0000</created>
                <updated>Thu, 4 Aug 2011 01:34:47 +0100</updated>
                            <resolved>Fri, 10 Dec 2010 01:40:24 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12969551" author="daijy" created="Wed, 8 Dec 2010 23:13:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1758&quot; title=&quot;Deep cast of complex type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1758&quot;&gt;&lt;del&gt;PIG-1758&lt;/del&gt;&lt;/a&gt;-2.patch address findbugs warnings.&lt;/p&gt;</comment>
                            <comment id="12969982" author="yanz" created="Thu, 9 Dec 2010 22:38:36 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12970043" author="daijy" created="Fri, 10 Dec 2010 01:40:24 +0000"  >&lt;p&gt;Review notes:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/152/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/152/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Patch committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13011718" author="dvryaboy" created="Sun, 27 Mar 2011 04:44:16 +0100"  >&lt;p&gt;The Cassandra fellows ran into needing this for their CassandraStorage implementation. Objections to backporting this into 8.1?&lt;/p&gt;</comment>
                            <comment id="13011726" author="olgan" created="Sun, 27 Mar 2011 05:55:55 +0100"  >&lt;p&gt;This looks like a pretty involved change and not a bug fix but a new feature. Also, I am not sure if it is completely backward compatible. I would be hesitant to backport this into 0.8 branch.&lt;/p&gt;

&lt;p&gt;How about just making the patch available for 0.8 branch so that they can use it with the branch if they choose so.&lt;/p&gt;</comment>
                            <comment id="13011758" author="dvryaboy" created="Sun, 27 Mar 2011 09:46:36 +0100"  >&lt;p&gt;Olga, I would contend that this is indeed a bug. The fact that you cannot provide a cast of a complex type is not documented anywhere in 0.8, and in fact LoadCaster interface provides methods to cast complex types &amp;#8211; but they are silently ignored by Pig, which caused the Cassandra developers (and me) a good 3 days of debugging.&lt;/p&gt;

&lt;p&gt;I will post a 0.8 version of this patch tomorrow, let&apos;s look at how deep it has to go.&lt;/p&gt;</comment>
                            <comment id="13011838" author="dvryaboy" created="Sun, 27 Mar 2011 21:25:52 +0100"  >&lt;p&gt;Actually, as it turns out, this patch applies cleanly to 0.8 branch, and the tests pass.&lt;br/&gt;
I think this is safe to commit. &lt;br/&gt;
I&apos;ll wait a day since Olga expressed reservations in case someone wants to -1 this.&lt;/p&gt;</comment>
                            <comment id="13011888" author="sms" created="Mon, 28 Mar 2011 02:33:39 +0100"  >&lt;p&gt;Should be fine if the patch applies cleanly and all the unit tests pass. I am concerned about having patches in JIRAs that are not documented in release notes as known issues (with patches)&lt;/p&gt;</comment>
                            <comment id="13012133" author="alangates" created="Mon, 28 Mar 2011 17:57:03 +0100"  >&lt;p&gt;I have some concerns on this.  I want to review it more completely before I vote one way or another.  If I promise to get to it later today can you hold any checkins until then?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13012237" author="alangates" created="Mon, 28 Mar 2011 22:34:56 +0100"  >&lt;blockquote&gt;&lt;p&gt;LoadCaster interface provides methods to cast complex types &#8211; but they are silently ignored by Pig&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So before this patch casting of bytearray to tuple or bag fails in 0.8?  That is definitely a fix worth back porting.&lt;/p&gt;

&lt;p&gt;The addition of deep casting I have a hard time thinking of as a bug since we have never it in the past.&lt;/p&gt;

&lt;p&gt;Since this is relatively small and did not work in the past I am ok with back porting it.  I do think we should add something in the release notes that says the feature is experimental.&lt;/p&gt;

&lt;p&gt;I have a concern in general about when we back port features and when we do not, but I will start a thread on that on the dev list.&lt;/p&gt;</comment>
                            <comment id="13012791" author="daijy" created="Wed, 30 Mar 2011 01:41:27 +0100"  >&lt;p&gt;Cast bytes into bag/tuple is handled by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-613&quot; title=&quot;Casting complex type(tuple/bag/map) does not take effect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-613&quot;&gt;&lt;del&gt;PIG-613&lt;/del&gt;&lt;/a&gt;. This Jira handles cast bag to bag, tuple to tuple.&lt;/p&gt;</comment>
                            <comment id="13012796" author="dvryaboy" created="Wed, 30 Mar 2011 01:55:46 +0100"  >&lt;p&gt;In other words, it&apos;s impossible to cast a bag of tuples of bytearrays into a bag of tuples of longs without this patch. &lt;br/&gt;
It simply makes the POCast operator recurse into nested structures and keep applying the caster as needed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12461867">PIG-1371</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12411989">PIG-613</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12465760" name="PIG-1758-1.patch" size="18906" author="daijy" created="Tue, 7 Dec 2010 23:52:26 +0000"/>
                            <attachment id="12465856" name="PIG-1758-2.patch" size="18926" author="daijy" created="Wed, 8 Dec 2010 23:13:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Dec 2010 22:38:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66268</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyatk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Enable deep cast of a tuple/bag to a tuple/bag of different inner schema</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>