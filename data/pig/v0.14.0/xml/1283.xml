<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:48:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1283/PIG-1283.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1283] COUNT on null bag causes failure</title>
                <link>https://issues.apache.org/jira/browse/PIG-1283</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;grunt&amp;gt;  l = load &apos;/tmp/e.bag&apos; as (b : bag&lt;/p&gt;
{t: (i : int)}
&lt;p&gt;, a : int);&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;b is null for the only row&lt;br/&gt;
grunt&amp;gt; c = foreach l generate COUNT(b);                           &lt;br/&gt;
grunt&amp;gt; dump c       &lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;It results in following exception-&lt;/p&gt;

&lt;p&gt;org.apache.pig.backend.executionengine.ExecException: ERROR 2106: Error while computing count in COUNT&lt;br/&gt;
        at org.apache.pig.builtin.COUNT.exec(COUNT.java:59)&lt;br/&gt;
        at org.apache.pig.builtin.COUNT.exec(COUNT.java:39)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:212)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:293)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.processPlan(POForEach.java:358)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNext(POForEach.java:288)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.runPipeline(PigMapBase.java:232)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.map(PigMapBase.java:227)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.map(PigMapBase.java:52)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:583)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)&lt;br/&gt;
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:176)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.pig.builtin.COUNT.exec(COUNT.java:46)&lt;br/&gt;
        ... 12 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12458483">PIG-1283</key>
            <summary>COUNT on null bag causes failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="analog.sony">Anandha L Ranganathan</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Mon, 8 Mar 2010 22:09:09 +0000</created>
                <updated>Mon, 24 Mar 2014 18:27:58 +0000</updated>
                            <resolved>Fri, 19 Oct 2012 00:28:57 +0100</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13441557" author="analog.sony" created="Fri, 24 Aug 2012 23:28:17 +0100"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;Please take a look at the patch and provide your feedback.&lt;/p&gt;</comment>
                            <comment id="13441573" author="analog.sony" created="Fri, 24 Aug 2012 23:54:43 +0100"  >&lt;p&gt;Please review this patch.&lt;/p&gt;</comment>
                            <comment id="13442714" author="daijy" created="Mon, 27 Aug 2012 21:58:13 +0100"  >&lt;p&gt;Hi, Anand, can you add a test case? Usually we add a test case for bug fix if possible. Thanks.&lt;/p&gt;</comment>
                            <comment id="13442920" author="analog.sony" created="Tue, 28 Aug 2012 04:03:30 +0100"  >&lt;p&gt;Working.&lt;/p&gt;</comment>
                            <comment id="13474869" author="analog.sony" created="Fri, 12 Oct 2012 08:54:06 +0100"  >&lt;p&gt;Please find the patch for this bug&lt;/p&gt;</comment>
                            <comment id="13475193" author="dvryaboy" created="Fri, 12 Oct 2012 18:48:17 +0100"  >&lt;p&gt;marking as patch available&lt;/p&gt;</comment>
                            <comment id="13475295" author="jcoveney" created="Fri, 12 Oct 2012 20:54:30 +0100"  >&lt;p&gt;Anand,&lt;/p&gt;

&lt;p&gt;Thanks for working on this.&lt;/p&gt;

&lt;p&gt;Some feedback:&lt;/p&gt;

&lt;p&gt;1. make sure the spacing is good. No tabs, four space indents, etc. I realize a lot of existing Pig code is janky, but we try to make sure new stuff doesn&apos;t introduce that.&lt;br/&gt;
2. I don&apos;t know if your test case is actually testing the change? I mean, the change you made has COUNT return null in the case when you give it a null bag, right? So why does it return 0?&lt;br/&gt;
3. use assertEquals(expected, actual) instead of assertTrue&lt;/p&gt;</comment>
                            <comment id="13475331" author="analog.sony" created="Fri, 12 Oct 2012 21:36:23 +0100"  >&lt;p&gt;I will modify test case and make it as   &lt;br/&gt;
assertNull(count.exec(tup));&lt;/p&gt;

&lt;p&gt;Also, I will clean up the code (remove tab and add space) and update the patch.&lt;/p&gt;</comment>
                            <comment id="13475780" author="analog.sony" created="Sun, 14 Oct 2012 07:45:36 +0100"  >&lt;p&gt;Please find  pig_1283-3.patch for this bug.&lt;br/&gt;
I added the changes suggested by Jonathan.&lt;/p&gt;</comment>
                            <comment id="13479476" author="jcoveney" created="Fri, 19 Oct 2012 00:28:52 +0100"  >&lt;p&gt;Anand,&lt;/p&gt;

&lt;p&gt;Thanks for the contribution! Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12542355" name="PIG-1283-1.patch" size="544" author="analog.sony" created="Fri, 24 Aug 2012 23:28:17 +0100"/>
                            <attachment id="12548864" name="PIG-1283-2.patch" size="1355" author="analog.sony" created="Fri, 12 Oct 2012 08:54:06 +0100"/>
                            <attachment id="12549061" name="pig_1283-3.patch" size="1539" author="analog.sony" created="Sun, 14 Oct 2012 07:43:59 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Aug 2012 22:28:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy2oaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>