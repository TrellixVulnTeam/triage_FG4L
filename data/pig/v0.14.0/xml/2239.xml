<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:55:36 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2239/PIG-2239.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2239] Pig should use &quot;bin/hadoop jar pig-withouthadoop.jar&quot; in bin/pig instead of forming java command itself  </title>
                <link>https://issues.apache.org/jira/browse/PIG-2239</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;This will obliterate tons of classpath issues and hadoop versions, paths problem that has fraught bin/pig and Pig in general.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12520186">PIG-2239</key>
            <summary>Pig should use &quot;bin/hadoop jar pig-withouthadoop.jar&quot; in bin/pig instead of forming java command itself  </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Aug 2011 00:57:31 +0100</created>
                <updated>Thu, 2 May 2013 03:29:44 +0100</updated>
                            <resolved>Wed, 7 Sep 2011 18:18:20 +0100</resolved>
                                                    <fixVersion>0.9.1</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13091445" author="daijy" created="Fri, 26 Aug 2011 01:08:07 +0100"  >&lt;p&gt;Let hadoop figure out its own dependencies should be the right way. Currently Pig is very cumbersome in finding hadoop jar and its dependencies. This issue will become more apparent once Pig support both hadoop 20 and 23. The only downside of this approach is we will rely on hadoop command line processor to process Pig command line, and possibly create backward compatibility issues. &lt;/p&gt;</comment>
                            <comment id="13091453" author="daijy" created="Fri, 26 Aug 2011 01:16:04 +0100"  >&lt;p&gt;The other backward incompatibility change is Pig will not runnable without a local hadoop installation.&lt;/p&gt;</comment>
                            <comment id="13091465" author="milindb" created="Fri, 26 Aug 2011 01:42:26 +0100"  >&lt;p&gt;+1 !!!&lt;/p&gt;

&lt;p&gt;(I remember an email thread opposing this a couple of years ago. I hope the issues in that thread are resolved. I think the prominent issue was that bundling and shipping the whole pig jar as job.jar for every job will be a problem.)&lt;/p&gt;</comment>
                            <comment id="13091492" author="dvryaboy" created="Fri, 26 Aug 2011 02:15:12 +0100"  >&lt;p&gt;We can check if the hadoop command is available, and fall back to the old method with a warning if it is not. That will let us work in places that have the hadoop jar but not the hadoop scripts, etc.&lt;/p&gt;

&lt;p&gt;For reducing size of the job jar in other similar cases, I&apos;ve actually taken to keeping a tiny jar around, and invoking hadoop jar on that, while ensuring that my real jar is on the classpath and in libjars. Otherwise all the unnecessary unjarring Hadoop does gets really annoying.&lt;/p&gt;</comment>
                            <comment id="13095111" author="daijy" created="Thu, 1 Sep 2011 05:27:40 +0100"  >&lt;p&gt;Attach initial patch &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2239&quot; title=&quot;Pig should use &amp;quot;bin/hadoop jar pig-withouthadoop.jar&amp;quot; in bin/pig instead of forming java command itself  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2239&quot;&gt;&lt;del&gt;PIG-2239&lt;/del&gt;&lt;/a&gt;-0.patch. Some notes for the patch:&lt;br/&gt;
1. There is no change in java code, we still produce pig.jar, pig-withouthadoop.jar. However, pig-withouthadoop.jar is more lightweight (no hadoop dependencies, only Pig dependencies)&lt;/p&gt;

&lt;p&gt;2. If HADOOP_HOME is defined, bin/pig will invoke hadoop runJar to run pig-withouthadoop.jar, org.apache.pig.Main&lt;/p&gt;

&lt;p&gt;3. If HADOOP_HOME is not defined, fall back to old way--link to bundled hadoop 20.2 libraries.&lt;/p&gt;

&lt;p&gt;4. I didn&apos;t see any conflict options between Pig and Hadoop command line. The only change is now pig command line support hadoop generic options which is not supported before.&lt;/p&gt;</comment>
                            <comment id="13095401" author="daijy" created="Thu, 1 Sep 2011 17:44:06 +0100"  >&lt;p&gt;Actually 4 is not true. We do not go through GenericOptionsParser and hadoop will not take any command line options. So the command line parsing will be totally up to Pig as before.&lt;/p&gt;</comment>
                            <comment id="13096304" author="ashutoshc" created="Fri, 2 Sep 2011 22:14:12 +0100"  >&lt;p&gt;@Daniel,&lt;/p&gt;

&lt;p&gt;Is this targeted for 0.9 branch too? I tried to apply the patch, but it failed.&lt;/p&gt;</comment>
                            <comment id="13096351" author="daijy" created="Fri, 2 Sep 2011 22:53:48 +0100"  >&lt;p&gt;Yes, it is targeted for 0.9 branch as well, though I have not tried yet, maybe a different patch is needed.&lt;/p&gt;</comment>
                            <comment id="13096484" author="daijy" created="Sat, 3 Sep 2011 00:56:46 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2239&quot; title=&quot;Pig should use &amp;quot;bin/hadoop jar pig-withouthadoop.jar&amp;quot; in bin/pig instead of forming java command itself  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2239&quot;&gt;&lt;del&gt;PIG-2239&lt;/del&gt;&lt;/a&gt;-1.patch also change the release process. When we release, we will include both fat pig.jar and thin pig-withouthadoop.jar. If HADOOP_HOME exists, we use hadoop binary to run pig-withouthadoop.jar. Otherwise, we fall back to use pig.jar, which include hadoop 20.2.&lt;/p&gt;</comment>
                            <comment id="13096968" author="daijy" created="Mon, 5 Sep 2011 00:50:47 +0100"  >&lt;p&gt;A bug fix to make PIG_CONF_DIR works. Also modify the comments to match the current patch.&lt;/p&gt;</comment>
                            <comment id="13098428" author="alangates" created="Tue, 6 Sep 2011 23:22:05 +0100"  >&lt;p&gt;The debug statements:&lt;/p&gt;

&lt;p&gt;echo &quot;Find hadoop at $HADOOP_BIN&quot;&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;echo &quot;Cannot find local hadoop installation, using bundled hadoop 20.2&quot;&lt;/p&gt;

&lt;p&gt;should be changed to print only if $debug is true.&lt;/p&gt;

&lt;p&gt;Other than that, +1&lt;/p&gt;</comment>
                            <comment id="13099112" author="daijy" created="Wed, 7 Sep 2011 18:18:20 +0100"  >&lt;p&gt;Patch committed to both trunk and 0.9 branch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12520729">PIG-2253</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12492574" name="PIG-2239-0.patch" size="5430" author="daijy" created="Thu, 1 Sep 2011 05:27:40 +0100"/>
                            <attachment id="12492863" name="PIG-2239-1-0.9.patch" size="10041" author="daijy" created="Sat, 3 Sep 2011 01:59:05 +0100"/>
                            <attachment id="12492862" name="PIG-2239-1.patch" size="9769" author="daijy" created="Sat, 3 Sep 2011 01:59:05 +0100"/>
                            <attachment id="12492994" name="PIG-2239-2.patch" size="10944" author="daijy" created="Mon, 5 Sep 2011 00:50:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Aug 2011 00:08:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy3u9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>With this change it is now possible to run Pig with different versions of Hadoop just by setting HADOOP_HOME to point to the directory where you have installed Hadoop.  By default (if you do not set HADOOP_HOME) Pig still runs with the embedded version (0.20.2 currently).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>