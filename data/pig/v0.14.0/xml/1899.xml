<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:04:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1899/PIG-1899.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1899] Pig needs a tool for doing end to end testing efficiently</title>
                <link>https://issues.apache.org/jira/browse/PIG-1899</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig currently uses junit for all testing.  junit is good for unit tests, but limited for end to end and integration testing.&lt;/p&gt;

&lt;p&gt;Building an end to end test in junit is cumbersome (a lot of setup and such to do using MiniCluster).  Given that expected results must be known beforehand and hand crafted they must be kept very small, usually ten or less rows.  This does not lead to realistic testing scenarios.&lt;/p&gt;

&lt;p&gt;A test tool is needed that allows the test developer to write a Pig Latin script and specify a source of truth against which to test the results of running this Pig Latin script.  A database or a previous version of Pig can then be used as that source of truth.  This will allow developers to quickly add new tests that return more than trivial results.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501222">PIG-1899</key>
            <summary>Pig needs a tool for doing end to end testing efficiently</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="alangates">Alan Gates</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Mar 2011 01:20:48 +0000</created>
                <updated>Thu, 31 Mar 2011 16:32:59 +0100</updated>
                            <resolved>Thu, 31 Mar 2011 16:32:59 +0100</resolved>
                                                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13005966" author="alangates" created="Sat, 12 Mar 2011 01:36:24 +0000"  >&lt;p&gt;The attached patch contains a testing tool developed by the Yahoo Pig team to handle end to end testing.  In it&apos;s current form it is not complete, nor yet usable.  In particular I had to remove all of the code dealing with deploying the test cluster and database, since that was Yahoo specific.  The patch is placed here as a start.&lt;/p&gt;

&lt;p&gt;The patch contains two separate pieces, a test harness and Pig specific components.  The test harness is a fairly simple set of Perl modules that export one main class, TestDriver.  Users must extend this class and implement its three abstract methods, runTest, generateBenchmark, and compare.  runTest runs the test.  generateBenchmark generates results from the source of truth.  compare compares the outputs of runTest and generateBenchmark and decides if the test succeeded or failed.&lt;/p&gt;

&lt;p&gt;Tests for the harness are specified via a Perl data structure, generally stored in a separate file.  This data structure is a hash that contains an array of groups.  Each group is a hash that contains an array of tests.  Each test is a hash.  At each hash step along the way users are free to define keys in the hash.  These keys are then used by their implementation of TestDriver to run the tests, generate the benchmarks, and compare the results.&lt;/p&gt;

&lt;p&gt;The Pig specific portions of this patch provide an implementation of TestDriver for Pig called TestDriverPig.  This implementation takes a Pig Latin script in each test and runs it on a grid specified as part of the test invocation.  For a benchmark it takes a SQL query which is run against a database.  For cases where equivalent output cannot be generated by SQL pre-generated results can be used.  The compare function sorts the output of each and calculates an md5 checksum to see if the results are the same.&lt;/p&gt;

&lt;p&gt;Work remaining to be done is mainly in the area of deployment.  Work needs to be done to deploy a hadoop instance, construct a database, populate both with the test data, and then run the tests.&lt;/p&gt;</comment>
                            <comment id="13008251" author="alangates" created="Fri, 18 Mar 2011 01:11:53 +0000"  >&lt;p&gt;Added UDFs for use with the test harness that were left out in the first patch.&lt;/p&gt;</comment>
                            <comment id="13009372" author="alangates" created="Mon, 21 Mar 2011 20:52:22 +0000"  >&lt;p&gt;Added streaming tests that were left out previously.&lt;/p&gt;

&lt;p&gt;Added base harness code that accidentally was omitted in last patch.&lt;/p&gt;

&lt;p&gt;Added Apache license to files. &lt;/p&gt;</comment>
                            <comment id="13012785" author="olgan" created="Wed, 30 Mar 2011 01:31:53 +0100"  >&lt;p&gt;The patch looks good. A few comments:&lt;/p&gt;

&lt;p&gt;(1) There are several scripts that are placed directly under pig/tools. I wonder if we have a test subdirectory under this&lt;br/&gt;
(2) It would be great for each file especially for scripts and UDFs to have a a little more information on what it does. For instance, generate_data.pl just says that it generates data but not what kind and what parameters it support.&lt;br/&gt;
(3) CreateMap.java TOMAP.java - there is already a TOMAP function in builtin which I think does something very similar&lt;br/&gt;
(4) UPPER.java, TOBAG.java  - these are also part of builtins&lt;br/&gt;
(5) pig/udfs/java/build.xml - not sure exactly what this is for but location is kind of strange and it also refers to HowlDriver.&lt;br/&gt;
(6) There are also one reference to yahoo that needs to be removed (just grep for yahoo)&lt;/p&gt;</comment>
                            <comment id="13013692" author="alangates" created="Wed, 30 Mar 2011 22:53:02 +0100"  >&lt;blockquote&gt;&lt;p&gt;(1) There are several scripts that are placed directly under pig/tools. I wonder if we have a test subdirectory under this&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve created two directories under tools, one &apos;test&apos; for tools used by tests and the other &apos;generate&apos; for data generation tools.&lt;/p&gt;

&lt;p&gt;On (2), (3), and (4), I agree these need addressed, but rather than hold the initial patch for them I&apos;d like to file separate JIRAs.  They should be gating issues on using this for nightly tests.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;pig/udfs/java/build.xml - not sure exactly what this is for but location is kind of strange and it also refers to HowlDriver.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s the build file for the UDFs.  I removed the reference to Howl.&lt;/p&gt;

&lt;p&gt;I removed the yahoo reference.&lt;/p&gt;




</comment>
                            <comment id="13013695" author="alangates" created="Wed, 30 Mar 2011 22:53:49 +0100"  >&lt;p&gt;Addressed several issues from Olga&apos;s comments.  Added embedding (turing complete) tests that I missed previously.&lt;/p&gt;</comment>
                            <comment id="13013703" author="olgan" created="Wed, 30 Mar 2011 23:12:16 +0100"  >&lt;p&gt;I am fine with committing the patch and openning a seprate JIRA for the remaining issues.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13014020" author="alangates" created="Thu, 31 Mar 2011 16:32:59 +0100"  >&lt;p&gt;Patch 3 checked in.  I will open separate JIRAs for the issues raised in the comments.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475021" name="PIG-1899-3.patch" size="852477" author="alangates" created="Wed, 30 Mar 2011 22:53:49 +0100"/>
                            <attachment id="12474229" name="PIG-1899.patch" size="644067" author="alangates" created="Mon, 21 Mar 2011 20:52:21 +0000"/>
                            <attachment id="12473963" name="PIG-1899.patch" size="507658" author="alangates" created="Fri, 18 Mar 2011 01:11:53 +0000"/>
                            <attachment id="12473460" name="e2e.patch" size="501987" author="alangates" created="Sat, 12 Mar 2011 01:36:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Mar 2011 00:31:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165234</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaudr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>