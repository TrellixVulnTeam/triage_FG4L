<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:52:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2857/PIG-2857.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2857] Add a -tagPath option to PigStorage</title>
                <link>https://issues.apache.org/jira/browse/PIG-2857</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;We recently added a &quot;-tagSource&quot; option to PigStorage, which allows us to add filenames from which records come to the returned tuples.&lt;/p&gt;

&lt;p&gt;Often, users want the whole path, not just the source file. I propose we add a &quot;-tagPath&quot; option to do this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12601282">PIG-2857</key>
            <summary>Add a -tagPath option to PigStorage</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prkommireddi">Prashant Kommireddi</assignee>
                                    <reporter username="dvryaboy">Dmitriy V. Ryaboy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2012 00:16:52 +0100</created>
                <updated>Mon, 14 Oct 2013 17:45:50 +0100</updated>
                            <resolved>Thu, 13 Dec 2012 19:58:16 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13428351" author="prkommireddi" created="Fri, 3 Aug 2012 21:25:16 +0100"  >&lt;p&gt;Should only 1 of &quot;tagSource&quot; or &quot;tagpath&quot; options be allowed?&lt;/p&gt;</comment>
                            <comment id="13428420" author="dvryaboy" created="Fri, 3 Aug 2012 23:11:37 +0100"  >&lt;p&gt;I think so. And perhaps we can deprecate tagSource (log a message to that effect), and rename it to -tagFile (as opposed to -tagPath) ?&lt;/p&gt;</comment>
                            <comment id="13495176" author="prkommireddi" created="Mon, 12 Nov 2012 09:42:17 +0000"  >&lt;p&gt;Coming back to this. I think we should keep &apos;tagsource&apos; in the next release for backward compatibility and as you suggested, log the deprecation message. May be we can remove &apos;tagsource&apos; for 0.13. Adding a patch that now uses &apos;-tagFile&apos; for source filename and &apos;-tagPath&apos; for source path. I have modified tests accordingly to handle the same.&lt;/p&gt;</comment>
                            <comment id="13495520" author="prkommireddi" created="Mon, 12 Nov 2012 19:09:49 +0000"  >&lt;p&gt;Had made changes to Utils.java that I did not add to the previous patch. Attaching an updated patch.&lt;/p&gt;</comment>
                            <comment id="13503657" author="prkommireddi" created="Mon, 26 Nov 2012 08:07:13 +0000"  >&lt;p&gt;Ping!&lt;/p&gt;</comment>
                            <comment id="13530613" author="cheolsoo" created="Thu, 13 Dec 2012 02:23:09 +0000"  >&lt;p&gt;Overall looks good to me. Two comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Can you update the doc (&lt;tt&gt;func.xml&lt;/tt&gt;) too? We probably should keep &lt;tt&gt;tagsource&lt;/tt&gt; yet indicate it as depreciated in the doc.&lt;/li&gt;
	&lt;li&gt;Can you update the comment of &lt;tt&gt;testPigStorageSourceTagSchema()&lt;/tt&gt;? It still mentions &lt;tt&gt;tagsource&lt;/tt&gt;.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /** 
     * This is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testing source tagging option on PigStorage. When a user
     * specifies &apos;-tagsource&apos; as an option, PigStorage must prepend the input
     * source path to the tuple and &lt;span class=&quot;code-quote&quot;&gt;&quot;INPUT_FILE_NAME&quot;&lt;/span&gt; to schema.
     * 
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
     */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Can you update the following line in &lt;tt&gt;testPigStorageSourceTagValue()&lt;/tt&gt;? It still mentions &lt;tt&gt;tagsource&lt;/tt&gt;.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;tagsource value must be part-m-00000&quot;&lt;/span&gt;, inputFileName, storeFileName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Can you add some comment to code that tests &lt;tt&gt;-tagPath&lt;/tt&gt; in &lt;tt&gt;testPigStorageSourceTagSchema()&lt;/tt&gt; just to be clear?&lt;/li&gt;
	&lt;li&gt;Can you remove tabs in the patch?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13530795" author="prkommireddi" created="Thu, 13 Dec 2012 08:48:21 +0000"  >&lt;p&gt;Thanks Cheolsoo. I have updated the patch with your feedback incorporated, except that I wasn&apos;t sure about where the tabs were present.&lt;/p&gt;</comment>
                            <comment id="13531361" author="cheolsoo" created="Thu, 13 Dec 2012 19:27:57 +0000"  >&lt;p&gt;Hi Prashant,&lt;/p&gt;

&lt;p&gt;Thank you very much. I verified:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The doc builds fine.&lt;/li&gt;
	&lt;li&gt;ant test-commit passes.&lt;/li&gt;
	&lt;li&gt;ant test -Dtestcase=TestPigStorage passes.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am attaching a new patch where I removed tabs. I also made a minor change to the PigStorage option parsing code as follows:&lt;/p&gt;

&lt;p&gt;from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (configuredOptions.hasOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;tagsource&quot;&lt;/span&gt;)) {
+                mLog.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;-tagsource&apos; is deprecated. Use &apos;-tagFile&apos; instead.&quot;&lt;/span&gt;);
+            }
             isSchemaOn = configuredOptions.hasOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;schema&quot;&lt;/span&gt;);
             dontLoadSchema = configuredOptions.hasOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;noschema&quot;&lt;/span&gt;);
-            tagSource = configuredOptions.hasOption(TAG_SOURCE_PATH);
+            &lt;span class=&quot;code-comment&quot;&gt;// Remove -tagsource in 0.13. For backward compatibility we need
&lt;/span&gt;+            &lt;span class=&quot;code-comment&quot;&gt;// tagsource to be supported until at least 0.12
&lt;/span&gt;+            tagFile = configuredOptions.hasOption(TAG_SOURCE_FILE) || configuredOptions.hasOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;tagsource&quot;&lt;/span&gt;);
+            tagPath = configuredOptions.hasOption(TAG_SOURCE_PATH);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-            tagSource = configuredOptions.hasOption(TAG_SOURCE_PATH);
+            tagFile = configuredOptions.hasOption(TAG_SOURCE_FILE);
+            tagPath = configuredOptions.hasOption(TAG_SOURCE_PATH);
+            &lt;span class=&quot;code-comment&quot;&gt;// TODO: Remove -tagsource in 0.13. For backward compatibility, we
&lt;/span&gt;+            &lt;span class=&quot;code-comment&quot;&gt;// need tagsource to be supported until at least 0.12
&lt;/span&gt;+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (configuredOptions.hasOption(&lt;span class=&quot;code-quote&quot;&gt;&quot;tagsource&quot;&lt;/span&gt;)) {
+                mLog.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;-tagsource&apos; is deprecated. Use &apos;-tagFile&apos; instead.&quot;&lt;/span&gt;);
+                tagFile = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you&apos;re fine with the change, I will go ahead commit it.&lt;/p&gt;</comment>
                            <comment id="13531381" author="prkommireddi" created="Thu, 13 Dec 2012 19:42:30 +0000"  >&lt;p&gt;Go ahead. Thanks Cheolsoo&lt;/p&gt;</comment>
                            <comment id="13531407" author="cheolsoo" created="Thu, 13 Dec 2012 19:58:16 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Committed to trunk. Thanks Prashant!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12553093" name="PIG-2857.patch" size="10771" author="prkommireddi" created="Mon, 12 Nov 2012 09:42:17 +0000"/>
                            <attachment id="12553158" name="PIG-2857_1.patch" size="13060" author="prkommireddi" created="Mon, 12 Nov 2012 19:09:49 +0000"/>
                            <attachment id="12560734" name="PIG-2857_2.patch" size="15844" author="prkommireddi" created="Thu, 13 Dec 2012 08:48:21 +0000"/>
                            <attachment id="12560832" name="PIG-2857_3.patch" size="16913" author="cheolsoo" created="Thu, 13 Dec 2012 19:27:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Aug 2012 20:25:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyb0l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>