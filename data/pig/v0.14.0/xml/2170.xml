<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:57:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2170/PIG-2170.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2170] NPE thrown during illustrate</title>
                <link>https://issues.apache.org/jira/browse/PIG-2170</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;working with version&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/pig/trunk@1146777&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://svn.apache.org/repos/asf/pig/trunk@1146777&lt;/a&gt;&lt;br/&gt;
fetched from git &lt;br/&gt;
 git://git.apache.org/pig.git a7e1228a0fdfe76c3cff0e749e252dba8d387052&lt;/p&gt;

&lt;p&gt;using file /tmp/data.tsv&lt;br/&gt;
id1     123&lt;br/&gt;
id1     234&lt;br/&gt;
id2     345&lt;br/&gt;
id2     456&lt;/p&gt;

&lt;p&gt;this is the most cutdown/simplest script i can make that illustrates (no pun intended) the problem&lt;br/&gt;
grunt&amp;gt; data = load &apos;/tmp/data.tsv&apos;  as (id:chararray, value:long);&lt;br/&gt;
grunt&amp;gt; cogrouped = cogroup data by id;&lt;br/&gt;
grunt&amp;gt; exists = foreach cogrouped generate (IsEmpty(data.value) ? 0 : 1) as exists;&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; dump exists &lt;br/&gt;
is ok&lt;/p&gt;

&lt;p&gt;but&lt;br/&gt;
grunt&amp;gt; illustrate exists&lt;br/&gt;
throws&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.pig.pen.IllustratorAttacher.visitBinCond(IllustratorAttacher.java:360)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POBinCond.visit(POBinCond.java:145)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POBinCond.visit(POBinCond.java:36)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:69)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.walk(DepthFirstWalker.java:52)&lt;br/&gt;
        at org.apache.pig.pen.IllustratorAttacher.innerPlanAttach(IllustratorAttacher.java:417)&lt;br/&gt;
        at org.apache.pig.pen.IllustratorAttacher.visitPOForEach(IllustratorAttacher.java:229)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.visit(POForEach.java:117)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.visit(POForEach.java:47)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:69)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.depthFirst(DepthFirstWalker.java:71)&lt;br/&gt;
        at org.apache.pig.impl.plan.DepthFirstWalker.walk(DepthFirstWalker.java:52)&lt;br/&gt;
        at org.apache.pig.impl.plan.PlanVisitor.visit(PlanVisitor.java:51)&lt;br/&gt;
        at org.apache.pig.pen.ExampleGenerator.getData(ExampleGenerator.java:246)&lt;br/&gt;
        at org.apache.pig.pen.ExampleGenerator.getData(ExampleGenerator.java:238)&lt;br/&gt;
        at org.apache.pig.pen.LineageTrimmingVisitor.init(LineageTrimmingVisitor.java:103)&lt;br/&gt;
        at org.apache.pig.pen.LineageTrimmingVisitor.&amp;lt;init&amp;gt;(LineageTrimmingVisitor.java:98)&lt;br/&gt;
        at org.apache.pig.pen.ExampleGenerator.getExamples(ExampleGenerator.java:166)&lt;br/&gt;
        at org.apache.pig.PigServer.getExamples(PigServer.java:1201)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.processIllustrate(GruntParser.java:698)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.Illustrate(PigScriptParser.java:591)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:306)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:188)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:164)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:67)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:487)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:108)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;/p&gt;

&lt;p&gt;with pig.log containing&lt;br/&gt;
java.io.IOException: Exception : null&lt;br/&gt;
        at org.apache.pig.PigServer.getExamples(PigServer.java:1207)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.processIllustrate(GruntParser.java:698)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.Illustrate(PigScriptParser.java:591)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:306)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:188)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:164)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:67)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:487)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:108)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;/p&gt;

&lt;p&gt;something to do with the IsEmpty since...&lt;br/&gt;
grunt&amp;gt; data = load &apos;/tmp/data.tsv&apos;  as (id:chararray, value:long);&lt;br/&gt;
grunt&amp;gt; cogrouped = cogroup data by id;&lt;br/&gt;
grunt&amp;gt; exists = foreach cogrouped generate data.value as exists;&lt;br/&gt;
illustrates ok&lt;/p&gt;</description>
                <environment></environment>
        <key id="12514274">PIG-2170</key>
            <summary>NPE thrown during illustrate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="mat_kelcey">Mat Kelcey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2011 20:51:38 +0100</created>
                <updated>Fri, 5 Aug 2011 02:46:07 +0100</updated>
                            <resolved>Fri, 5 Aug 2011 02:46:07 +0100</resolved>
                                    <version>0.10.0</version>
                                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13079447" author="thejas" created="Thu, 4 Aug 2011 17:23:48 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2170&quot; title=&quot;NPE thrown during illustrate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2170&quot;&gt;&lt;del&gt;PIG-2170&lt;/del&gt;&lt;/a&gt;.2.patch fixes a findbugs warning in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2170&quot; title=&quot;NPE thrown during illustrate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2170&quot;&gt;&lt;del&gt;PIG-2170&lt;/del&gt;&lt;/a&gt;.1.patch. &lt;br/&gt;
Changes -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;BinCond is not a boolean expression (ie it does not return boolean value), so equivalence classes are not created for it.&lt;/li&gt;
	&lt;li&gt;Boolean expressions can appear in foreach (within bincond), and every where else after boolean type is introduced. But adding equivalence classes for each boolean expression in all these places will generate too many examples, affecting the conciseness. So I have chosen not to add equivalence classes in those cases.&lt;/li&gt;
	&lt;li&gt;When type conversion errors happened, pig tries to increment counters for it, and was throwing NPE because the local mode simulation did not supply the object that returns counters. That has also been fixed.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13079493" author="thejas" created="Thu, 4 Aug 2011 18:37:47 +0100"  >&lt;p&gt;Unit test and test-patch passed (except for a javac deprecation warning as I am using the old mapred Counters class to create counter. I didn&apos;t find a new replacement for it. )&lt;br/&gt;
In addition to new test cases TestExampleGenerator.java has changes to use local mode and also generate the input files only once. (test now takes 5 sec instead of 20).&lt;/p&gt;</comment>
                            <comment id="13079634" author="daijy" created="Thu, 4 Aug 2011 23:00:41 +0100"  >&lt;p&gt;Looks good. +1&lt;/p&gt;</comment>
                            <comment id="13079740" author="thejas" created="Fri, 5 Aug 2011 02:46:07 +0100"  >&lt;p&gt;patch committed to trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489302" name="PIG-2170.1.patch" size="10346" author="thejas" created="Thu, 4 Aug 2011 04:35:53 +0100"/>
                            <attachment id="12489361" name="PIG-2170.2.patch" size="10275" author="thejas" created="Thu, 4 Aug 2011 17:23:48 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 4 Aug 2011 16:23:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyavy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>