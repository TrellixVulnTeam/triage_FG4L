<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:55:49 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3654/PIG-3654.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3654] Add class cache to PigContext</title>
                <link>https://issues.apache.org/jira/browse/PIG-3654</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;While benchmarking compile time for a large scripts, I noticed that class lookups for UDFs accounted for a significant amount of time. Adding a simple cache for looked up classes would speed up compile time noticeably.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687662">PIG-3654</key>
            <summary>Add class cache to PigContext</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tmwoodruff">Travis Woodruff</assignee>
                                    <reporter username="tmwoodruff">Travis Woodruff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jan 2014 15:27:07 +0000</created>
                <updated>Wed, 22 Jan 2014 18:48:50 +0000</updated>
                            <resolved>Wed, 22 Jan 2014 18:48:50 +0000</resolved>
                                    <version>0.12.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13864340" author="tmwoodruff" created="Tue, 7 Jan 2014 15:42:04 +0000"  >&lt;p&gt;Patch with class cache and test. This patch has the cache enabled by default.&lt;/p&gt;

&lt;p&gt;Result of perf test on my machine (5000 lookups of the same class), values in ms:&lt;/p&gt;

&lt;p&gt;Cache Disabled: 1247&lt;br/&gt;
Cache Enabled: 8&lt;/p&gt;
</comment>
                            <comment id="13864778" author="daijy" created="Tue, 7 Jan 2014 22:35:17 +0000"  >&lt;p&gt;Is there any case we need to set classCacheEnabled to false? Shall we hardcode it to true?&lt;/p&gt;</comment>
                            <comment id="13865548" author="rohini" created="Wed, 8 Jan 2014 15:27:33 +0000"  >&lt;p&gt;Can we have some assert in the testcase bounded on max time expected? With just SOPs, even if it is taking more time in the future there is no way to catch it.&lt;/p&gt;</comment>
                            <comment id="13865599" author="tmwoodruff" created="Wed, 8 Jan 2014 16:32:46 +0000"  >&lt;p&gt;Daniel, I can&apos;t think of a reason for setting classCacheEnabled to false. I added it primarily so I could add the enabled vs disabled test. If we&apos;re satisfied with the approach, I can remove the flag.&lt;/p&gt;

&lt;p&gt;Rohini, do you mean an assert on absolute max time (e.g., 500 ms)? I thought about adding that, but I was worried that load on the build server might cause it to fail in the absence of an actual performance regression. Happy to add it if you don&apos;t have that concern.&lt;/p&gt;</comment>
                            <comment id="13865695" author="rohini" created="Wed, 8 Jan 2014 18:07:00 +0000"  >&lt;p&gt;  You are right about slow machines taking time and causing test failures. Come to think of it wondering if we even need the test. Obviously caching and fetching from map is going to be better than doing reflection. If we are keeping caching default and no option to turn it off, I think we can just remove the test. We usually don&apos;t have a before and after or with and without test when we do performance fixes. You can just document the performance numbers here in this jira. &lt;/p&gt;</comment>
                            <comment id="13878661" author="tmwoodruff" created="Wed, 22 Jan 2014 13:55:33 +0000"  >&lt;p&gt;New patch that removes enabmement flag (cache is always used) and removes the performance test.&lt;/p&gt;</comment>
                            <comment id="13878998" author="daijy" created="Wed, 22 Jan 2014 18:48:50 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Patch committed to trunk. Thanks Travis!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12624346" name="PIG-3654-2.patch" size="3504" author="tmwoodruff" created="Wed, 22 Jan 2014 13:55:33 +0000"/>
                            <attachment id="12621799" name="PIG-3654.patch" size="4956" author="tmwoodruff" created="Tue, 7 Jan 2014 15:42:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Jan 2014 22:35:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzl1vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366973</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Cache resolved classes in PigContext to improve script compile performance</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>