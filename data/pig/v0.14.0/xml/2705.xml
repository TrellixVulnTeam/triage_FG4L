<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:55:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2705/PIG-2705.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2705] outputSchema modification from scripting UDFs</title>
                <link>https://issues.apache.org/jira/browse/PIG-2705</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The examples for @schemaFunction that I&apos;ve seen on the web (&lt;a href=&quot;http://pig.apache.org/docs/r0.10.0/udf.html#decorators&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pig.apache.org/docs/r0.10.0/udf.html#decorators&lt;/a&gt;) tend to be trivial ones that return the same schema passed in.  I had a problem where I wrote a python udf that added a new field into a tuple in a bag.  I ended up not specifying schema in python and then casting in pig.   How does the community feel about making it easier to generate a dynamic schema from a scripting UDF?&lt;/p&gt;

&lt;p&gt;This could be done by modifying JythonFunction.outputSchema to handle outputSchemaFunc returning a string like @outputSchema does, or by exposing a public api that makes it easier to manipulate org.apache.pig.impl.logicalLayer.schema.Schema&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556114">PIG-2705</key>
            <summary>outputSchema modification from scripting UDFs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="levyjoshua">Josh Levy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 21:19:24 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:36 +0000</updated>
                            <resolved>Fri, 1 Jun 2012 01:15:42 +0100</resolved>
                                    <version>0.9.2</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13277082" author="levyjoshua" created="Wed, 16 May 2012 21:26:38 +0100"  >&lt;p&gt;This patch lets the python schemaFunction return a String or an instance of org.apache.pig.ResourceSchema.   ResourceSchema feels &quot;more public&quot; than org.apache.pig.impl.logicalLayer.schema.Schema &amp;#8211; maybe it&apos;s a better way to programatically manipulate Schema from python&lt;/p&gt;</comment>
                            <comment id="13277084" author="levyjoshua" created="Wed, 16 May 2012 21:28:03 +0100"  >&lt;p&gt;The patch that goes with my comment from 16/May/12 20:26&lt;/p&gt;</comment>
                            <comment id="13277277" author="julienledem" created="Thu, 17 May 2012 00:59:48 +0100"  >&lt;p&gt;Hi Josh&lt;br/&gt;
Thanks for the contribution.&lt;br/&gt;
This looks good to me.&lt;br/&gt;
I&apos;d just not reuse the same variable name.&lt;br/&gt;
IE: something like that&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; newSchema = ((pf.__call__(Py.java2py(input))).__tojava__(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.class));
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (newSchema &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ResourceSchema) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Schema.getPigSchema((ResourceSchema) newSchema);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (newSchema &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Schema) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (Schema) newSchema;
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Utils.getSchemaFromString(newSchema.toString());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13279173" author="levyjoshua" created="Fri, 18 May 2012 21:48:53 +0100"  >&lt;p&gt;Patch reflects Julien Le Dem&apos;s comment from 16 May/12&lt;/p&gt;</comment>
                            <comment id="13279176" author="levyjoshua" created="Fri, 18 May 2012 21:53:30 +0100"  >&lt;p&gt;Does anyone have feedback about which if any of org.apache.pig.impl.logicalLayer.schema.Schema, org.apache.pig.ResourceSchema, and String manipulation is the &quot;right&quot; way for a UDF author to dynamically create or modify a schema?&lt;/p&gt;</comment>
                            <comment id="13279991" author="daijy" created="Mon, 21 May 2012 08:20:58 +0100"  >&lt;p&gt;org.apache.pig.impl.logicalLayer.schema.Schema, which we used in EvalFunc. This is the data structure to expose to developer.&lt;/p&gt;</comment>
                            <comment id="13286733" author="julienledem" created="Thu, 31 May 2012 17:42:36 +0100"  >&lt;p&gt;+1 patch looks good to me&lt;/p&gt;</comment>
                            <comment id="13287055" author="julienledem" created="Fri, 1 Jun 2012 01:15:42 +0100"  >&lt;p&gt;committed to trunk.&lt;br/&gt;
Thanks Josh!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12527696" name="PIG-2705-1.patch" size="1599" author="levyjoshua" created="Wed, 16 May 2012 21:28:03 +0100"/>
                            <attachment id="12528145" name="PIG-2705.2.patch" size="1642" author="levyjoshua" created="Fri, 18 May 2012 21:48:53 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 May 2012 23:59:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256358</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaz1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>