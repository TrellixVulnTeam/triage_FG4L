<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:52:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2183/PIG-2183.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2183] Pig not working with Hadoop 0.20.203.0</title>
                <link>https://issues.apache.org/jira/browse/PIG-2183</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When running pig, I get the following error.&lt;br/&gt;
Error before Pig is launched&lt;br/&gt;
----------------------------&lt;br/&gt;
ERROR 2999: Unexpected internal error. Failed to create DataStorage&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: Failed to create DataStorage&lt;br/&gt;
	at org.apache.pig.backend.hadoop.datastorage.HDataStorage.init(HDataStorage.java:75)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.datastorage.HDataStorage.&amp;lt;init&amp;gt;(HDataStorage.java:58)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.init(HExecutionEngine.java:214)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.init(HExecutionEngine.java:134)&lt;br/&gt;
	at org.apache.pig.impl.PigContext.connect(PigContext.java:183)&lt;br/&gt;
	at org.apache.pig.PigServer.&amp;lt;init&amp;gt;(PigServer.java:226)&lt;br/&gt;
	at org.apache.pig.PigServer.&amp;lt;init&amp;gt;(PigServer.java:215)&lt;br/&gt;
	at org.apache.pig.tools.grunt.Grunt.&amp;lt;init&amp;gt;(Grunt.java:55)&lt;br/&gt;
	at org.apache.pig.Main.run(Main.java:452)&lt;br/&gt;
	at org.apache.pig.Main.main(Main.java:107)&lt;br/&gt;
Caused by: java.io.IOException: Call to rasputin/192.168.1.3:9000 failed on local exception: java.io.EOFException&lt;br/&gt;
	at org.apache.hadoop.ipc.Client.wrapException(Client.java:775)&lt;br/&gt;
	at org.apache.hadoop.ipc.Client.call(Client.java:743)&lt;br/&gt;
	at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)&lt;br/&gt;
	at $Proxy0.getProtocolVersion(Unknown Source)&lt;br/&gt;
	at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:359)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:106)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient.&amp;lt;init&amp;gt;(DFSClient.java:207)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DFSClient.&amp;lt;init&amp;gt;(DFSClient.java:170)&lt;br/&gt;
	at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:82)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1378)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1390)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:196)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:95)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.datastorage.HDataStorage.init(HDataStorage.java:72)&lt;br/&gt;
	... 9 more&lt;br/&gt;
Caused by: java.io.EOFException&lt;br/&gt;
	at java.io.DataInputStream.readInt(DataInputStream.java:375)&lt;br/&gt;
	at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:501)&lt;br/&gt;
	at org.apache.hadoop.ipc.Client$Connection.run(Client.java:446)&lt;br/&gt;
================================================================================&lt;/p&gt;

&lt;p&gt;My env vars are defined in bin/pig as the following&lt;br/&gt;
export JAVA_HOME=&quot;/etc/java-config-2/current-system-vm&quot;&lt;br/&gt;
export PIG_CLASSPATH=&quot;/var/hadoop/pig/pig-withouthadoop.jar:$HADOOP_HOME/hadoop-core-0.20.203.0.jar:$HADOOP_HOME/lib:$HADOOP_CONF_DIR&quot;&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Gentoo Linux Kernel: 2.6.38-gentoo-r6&lt;br/&gt;
java version &quot;1.6.0_26&quot;&lt;br/&gt;
Ant version 1.8.1&lt;/p&gt;</environment>
        <key id="12514825">PIG-2183</key>
            <summary>Pig not working with Hadoop 0.20.203.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="_iyp">John Lium</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jul 2011 21:34:30 +0100</created>
                <updated>Wed, 5 Oct 2011 18:20:43 +0100</updated>
                            <resolved>Wed, 10 Aug 2011 19:13:26 +0100</resolved>
                                    <version>0.8.1</version>
                    <version>0.9.1</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.9.1</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                                    <component>grunt</component>
                    <component>site</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13068616" author="_iyp" created="Wed, 20 Jul 2011 21:35:52 +0100"  >&lt;p&gt;Also, forgot to mention that I built pig with &quot;ant jar-withouthadoop&quot;&lt;/p&gt;</comment>
                            <comment id="13068623" author="_iyp" created="Wed, 20 Jul 2011 21:44:51 +0100"  >&lt;p&gt;Google waited till after I posted this issue to show me this.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2148&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-2148&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13069331" author="_iyp" created="Fri, 22 Jul 2011 02:04:28 +0100"  >&lt;p&gt;Finally got it to work. &lt;/p&gt;

&lt;p&gt;I built with the above mentioned &quot;ant jar-withouthadoop&quot;&lt;br/&gt;
Hacked up the wrapper script to this -&amp;gt; &lt;a href=&quot;http://pastebin.com/5WuLRUAN&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastebin.com/5WuLRUAN&lt;/a&gt;&lt;br/&gt;
Used this conf/pig-env.sh -&amp;gt; &lt;a href=&quot;http://pastebin.com/vs5fAHpu&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pastebin.com/vs5fAHpu&lt;/a&gt;&lt;br/&gt;
Replaced the hadoop jars in build/ivy/lib/Pig with the 0.20.203 core and test ones&lt;br/&gt;
Ran the wrapper script &lt;/p&gt;


</comment>
                            <comment id="13069339" author="daijy" created="Fri, 22 Jul 2011 02:25:47 +0100"  >&lt;p&gt;Thanks John. That is a first step toward a patch. To make it a formal patch, we need to add all your did into bin/pig. Are you interested to make a patch?&lt;/p&gt;</comment>
                            <comment id="13073363" author="_iyp" created="Sun, 31 Jul 2011 16:37:11 +0100"  >&lt;p&gt;My bash script is pretty clunky, would anyone be able to spruce it up a bit?&lt;/p&gt;

&lt;p&gt;Also, I wanted to add that for this fix you need to delete the old hadoop jars.&lt;/p&gt;</comment>
                            <comment id="13079263" author="daijy" created="Thu, 4 Aug 2011 08:21:59 +0100"  >&lt;p&gt;Restructure pig script to use pig-withouthadoop.jar, and link hadoop jars dynamically.&lt;/p&gt;</comment>
                            <comment id="13079480" author="daijy" created="Thu, 4 Aug 2011 18:22:05 +0100"  >&lt;p&gt;Here is the change I made in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2183&quot; title=&quot;Pig not working with Hadoop 0.20.203.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2183&quot;&gt;&lt;del&gt;PIG-2183&lt;/del&gt;&lt;/a&gt;-1.patch:&lt;br/&gt;
1. When releasing Pig, include pig-withouthadoop.jar instead of fat pig.jar&lt;br/&gt;
2. For hadoop 203+, using HADOOP_HOME to find hadoop binary, run &quot;hadoop classpath&quot; to get all hadoop libraries&lt;br/&gt;
3. For hadoop 20.2, assume hadoop libraries is inside HADOOP_HOME&lt;br/&gt;
4. If no HADOOP_HOME defined, Pig will link hadoop 20.2 jars inside $PIG_HOME/lib&lt;br/&gt;
5. Still pick PIG_CLASSPATH first, so user can override hadoop conf dir&lt;/p&gt;</comment>
                            <comment id="13081229" author="thejas" created="Mon, 8 Aug 2011 22:50:50 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13082083" author="daijy" created="Wed, 10 Aug 2011 02:41:21 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2183&quot; title=&quot;Pig not working with Hadoop 0.20.203.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2183&quot;&gt;&lt;del&gt;PIG-2183&lt;/del&gt;&lt;/a&gt;-2.patch include some bug fix, also change undesired behavior introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1857&quot; title=&quot;Create an package integration project&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1857&quot;&gt;&lt;del&gt;PIG-1857&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13082520" author="daijy" created="Wed, 10 Aug 2011 19:13:26 +0100"  >&lt;p&gt;Manually tested with release build, rpm/deb package and svn checkout, all works fine.&lt;/p&gt;

&lt;p&gt;Committed to both trunk and 0.9 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489326" name="PIG-2183-1.patch" size="5427" author="daijy" created="Thu, 4 Aug 2011 08:21:59 +0100"/>
                            <attachment id="12489937" name="PIG-2183-2.patch" size="12220" author="daijy" created="Wed, 10 Aug 2011 05:53:36 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Jul 2011 01:25:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaw0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>